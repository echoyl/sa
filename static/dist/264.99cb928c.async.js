!(function(){var TB=(vt,N,k)=>new Promise((H,W)=>{var w=ee=>{try{j(k.next(ee))}catch(Y){W(Y)}},X=ee=>{try{j(k.throw(ee))}catch(Y){W(Y)}},j=ee=>ee.done?H(ee.value):Promise.resolve(ee.value).then(w,X);j((k=k.apply(vt,N)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[264],{81618:function(vt){"use strict";(function(N,k){vt.exports=k()})(this,function(){function N(re){var Q=[];return re.AMapUI&&Q.push(k(re.AMapUI)),re.Loca&&Q.push(H(re.Loca)),Promise.all(Q)}function k(re){return new Promise(function(Q,ye){var se=[];if(re.plugins)for(var ne=0;ne<re.plugins.length;ne+=1)w.AMapUI.plugins.indexOf(re.plugins[ne])==-1&&se.push(re.plugins[ne]);if(X.AMapUI===W.failed)ye("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(X.AMapUI===W.notload){X.AMapUI=W.loading,w.AMapUI.version=re.version||w.AMapUI.version,ne=w.AMapUI.version;var $=document.body||document.head,A=document.createElement("script");A.type="text/javascript",A.src="https://webapi.amap.com/ui/"+ne+"/main.js",A.onerror=function(b){X.AMapUI=W.failed,ye("\u8BF7\u6C42 AMapUI \u5931\u8D25")},A.onload=function(){if(X.AMapUI=W.loaded,se.length)window.AMapUI.loadUI(se,function(){for(var b=0,te=se.length;b<te;b++){var le=se[b].split("/").slice(-1)[0];window.AMapUI[le]=arguments[b]}for(Q();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()});else for(Q();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()},$.appendChild(A)}else X.AMapUI===W.loaded?re.version&&re.version!==w.AMapUI.version?ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):se.length?window.AMapUI.loadUI(se,function(){for(var b=0,te=se.length;b<te;b++){var le=se[b].split("/").slice(-1)[0];window.AMapUI[le]=arguments[b]}Q()}):Q():re.version&&re.version!==w.AMapUI.version?ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):j.AMapUI.push(function(b){b?ye(b):se.length?window.AMapUI.loadUI(se,function(){for(var te=0,le=se.length;te<le;te++){var Ae=se[te].split("/").slice(-1)[0];window.AMapUI[Ae]=arguments[te]}Q()}):Q()})})}function H(re){return new Promise(function(Q,ye){if(X.Loca===W.failed)ye("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(X.Loca===W.notload){X.Loca=W.loading,w.Loca.version=re.version||w.Loca.version;var se=w.Loca.version,ne=w.AMap.version.startsWith("2"),$=se.startsWith("2");if(ne&&!$||!ne&&$)ye("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{ne=w.key,$=document.body||document.head;var A=document.createElement("script");A.type="text/javascript",A.src="https://webapi.amap.com/loca?v="+se+"&key="+ne,A.onerror=function(b){X.Loca=W.failed,ye("\u8BF7\u6C42 AMapUI \u5931\u8D25")},A.onload=function(){for(X.Loca=W.loaded,Q();j.Loca.length;)j.Loca.splice(0,1)[0]()},$.appendChild(A)}}else X.Loca===W.loaded?re.version&&re.version!==w.Loca.version?ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):Q():re.version&&re.version!==w.Loca.version?ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):j.Loca.push(function(b){b?ye(b):ye()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var W;(function(re){re.notload="notload",re.loading="loading",re.loaded="loaded",re.failed="failed"})(W||(W={}));var w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},X={AMap:W.notload,AMapUI:W.notload,Loca:W.notload},j={AMap:[],AMapUI:[],Loca:[]},ee=[],Y=function(re){typeof re=="function"&&(X.AMap===W.loaded?re(window.AMap):ee.push(re))};return{load:function(re){return new Promise(function(Q,ye){if(X.AMap==W.failed)ye("");else if(X.AMap==W.notload){var se=re.key,ne=re.version,$=re.plugins;se?(window.AMap&&location.host!=="lbs.amap.com"&&ye("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),w.key=se,w.AMap.version=ne||w.AMap.version,w.AMap.plugins=$||w.AMap.plugins,X.AMap=W.loading,ne=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)X.AMap=W.failed,ye(b);else for(X.AMap=W.loaded,N(re).then(function(){Q(window.AMap)}).catch(ye);ee.length;)ee.splice(0,1)[0]()},$=document.createElement("script"),$.type="text/javascript",$.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+w.AMap.version+"&key="+se+"&plugin="+w.AMap.plugins.join(","),$.onerror=function(b){X.AMap=W.failed,ye(b)},ne.appendChild($)):ye("\u8BF7\u586B\u5199key")}else if(X.AMap==W.loaded)if(re.key&&re.key!==w.key)ye("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(re.version&&re.version!==w.AMap.version)ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(se=[],re.plugins)for(ne=0;ne<re.plugins.length;ne+=1)w.AMap.plugins.indexOf(re.plugins[ne])==-1&&se.push(re.plugins[ne]);se.length?window.AMap.plugin(se,function(){N(re).then(function(){Q(window.AMap)}).catch(ye)}):N(re).then(function(){Q(window.AMap)}).catch(ye)}else if(re.key&&re.key!==w.key)ye("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(re.version&&re.version!==w.AMap.version)ye("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var A=[];if(re.plugins)for(ne=0;ne<re.plugins.length;ne+=1)w.AMap.plugins.indexOf(re.plugins[ne])==-1&&A.push(re.plugins[ne]);Y(function(){A.length?window.AMap.plugin(A,function(){N(re).then(function(){Q(window.AMap)}).catch(ye)}):N(re).then(function(){Q(window.AMap)}).catch(ye)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},X={AMap:W.notload,AMapUI:W.notload,Loca:W.notload},j={AMap:[],AMapUI:[],Loca:[]}}}})},25330:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};N.default=k},67303:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};N.default=k},83647:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};N.default=k},57583:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};N.default=k},29260:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};N.default=k},63678:function(vt,N,k){"use strict";k.d(N,{Z:function(){return KH}});var H={};k.r(H),k.d(H,{add:function(){return Di},adjoint:function(){return __},clone:function(){return Gh},copy:function(){return wm},create:function(){return ks},determinant:function(){return Lv},equals:function(){return $i},exactEquals:function(){return Yi},frob:function(){return Ki},fromQuat:function(){return Ht},fromQuat2:function(){return de},fromRotation:function(){return _},fromRotationTranslation:function(){return K},fromRotationTranslationScale:function(){return xt},fromRotationTranslationScaleOrigin:function(){return Lt},fromScaling:function(){return v},fromTranslation:function(){return h},fromValues:function(){return Iu},fromXRotation:function(){return R},fromYRotation:function(){return F},fromZRotation:function(){return z},frustum:function(){return ur},getRotation:function(){return ht},getScaling:function(){return it},getTranslation:function(){return Be},identity:function(){return Vf},invert:function(){return af},lookAt:function(){return Ln},mul:function(){return mo},multiply:function(){return Vu},multiplyScalar:function(){return Oi},multiplyScalarAndAdd:function(){return ro},ortho:function(){return gn},orthoNO:function(){return on},orthoZO:function(){return Tn},perspective:function(){return zr},perspectiveFromFieldOfView:function(){return qr},perspectiveNO:function(){return pr},perspectiveZO:function(){return Or},rotate:function(){return Ux},rotateX:function(){return Xa},rotateY:function(){return of},rotateZ:function(){return Op},scale:function(){return Ec},set:function(){return Ag},str:function(){return Ei},sub:function(){return Wa},subtract:function(){return ia},targetTo:function(){return pi},translate:function(){return sc},transpose:function(){return qd}});var W=k(67294),w=k(97582),X=k(21030),j={},ee={},Y=function(n){return ee[n]},re=function(n,r){ee[n]=r},Q=function(n){return j[n]},ye=function(n,r){j[n]=r},se={},ne={},$=34,A=10,b=13;function te(e){return new Function("d","return {"+e.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""'}).join(",")+"}")}function le(e,n){var r=te(e);return function(o,u){return n(r(o),u,e)}}function Ae(e){var n=Object.create(null),r=[];return e.forEach(function(o){for(var u in o)u in n||r.push(n[u]=u)}),r}function De(e,n){var r=e+"",o=r.length;return o<n?new Array(n-o+1).join(0)+r:r}function Ne(e){return e<0?"-"+De(-e,6):e>9999?"+"+De(e,6):De(e,4)}function Te(e){var n=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),u=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ne(e.getUTCFullYear(),4)+"-"+De(e.getUTCMonth()+1,2)+"-"+De(e.getUTCDate(),2)+(u?"T"+De(n,2)+":"+De(r,2)+":"+De(o,2)+"."+De(u,3)+"Z":o?"T"+De(n,2)+":"+De(r,2)+":"+De(o,2)+"Z":r||n?"T"+De(n,2)+":"+De(r,2)+"Z":"")}function We(e){var n=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function o(L,Z){var q,ce,me=u(L,function(be,$e){if(q)return q(be,$e-1);ce=be,q=Z?le(be,Z):te(be)});return me.columns=ce||[],me}function u(L,Z){var q=[],ce=L.length,me=0,be=0,$e,ft=ce<=0,mt=!1;L.charCodeAt(ce-1)===A&&--ce,L.charCodeAt(ce-1)===b&&--ce;function zt(){if(ft)return ne;if(mt)return mt=!1,se;var nr,Yt=me,Cr;if(L.charCodeAt(Yt)===$){for(;me++<ce&&L.charCodeAt(me)!==$||L.charCodeAt(++me)===$;);return(nr=me)>=ce?ft=!0:(Cr=L.charCodeAt(me++))===A?mt=!0:Cr===b&&(mt=!0,L.charCodeAt(me)===A&&++me),L.slice(Yt+1,nr-1).replace(/""/g,'"')}for(;me<ce;){if((Cr=L.charCodeAt(nr=me++))===A)mt=!0;else if(Cr===b)mt=!0,L.charCodeAt(me)===A&&++me;else if(Cr!==r)continue;return L.slice(Yt,nr)}return ft=!0,L.slice(Yt,ce)}for(;($e=zt())!==ne;){for(var ar=[];$e!==se&&$e!==ne;)ar.push($e),$e=zt();Z&&(ar=Z(ar,be++))==null||q.push(ar)}return q}function c(L,Z){return L.map(function(q){return Z.map(function(ce){return P(q[ce])}).join(e)})}function p(L,Z){return Z==null&&(Z=Ae(L)),[Z.map(P).join(e)].concat(c(L,Z)).join(`
`)}function g(L,Z){return Z==null&&(Z=Ae(L)),c(L,Z).join(`
`)}function y(L){return L.map(S).join(`
`)}function S(L){return L.map(P).join(e)}function P(L){return L==null?"":L instanceof Date?Te(L):n.test(L+="")?'"'+L.replace(/"/g,'""')+'"':L}return{parse:o,parseRows:u,format:p,formatBody:g,formatRows:y,formatRow:S,formatValue:P}}var _e=We(","),we=_e.parse,Re=_e.parseRows,ze=_e.format,Ge=_e.formatBody,yt=_e.formatRows,ke=_e.formatRow,tt=_e.formatValue,ae=k(1413),Ke=63710088e-1,he={centimeters:Ke*100,centimetres:Ke*100,degrees:Ke/111325,feet:Ke*3.28084,inches:Ke*39.37,kilometers:Ke/1e3,kilometres:Ke/1e3,meters:Ke,metres:Ke,miles:Ke/1609.344,millimeters:Ke*1e3,millimetres:Ke*1e3,nauticalmiles:Ke/1852,radians:1,yards:Ke*1.0936},Pe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ke,yards:1.0936133},lt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function He(e,n,r){r===void 0&&(r={});var o={type:"Feature"};return(r.id===0||r.id)&&(o.id=r.id),r.bbox&&(o.bbox=r.bbox),o.properties=n||{},o.geometry=e,o}function Ue(e,n,r){switch(r===void 0&&(r={}),e){case"Point":return Qe(n).geometry;case"LineString":return Je(n).geometry;case"Polygon":return xe(n).geometry;case"MultiPoint":return Xe(n).geometry;case"MultiLineString":return Ye(n).geometry;case"MultiPolygon":return Le(n).geometry;default:throw new Error(e+" is invalid")}}function Qe(e,n,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Xr(e[0])||!Xr(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return He(o,n,r)}function Se(e,n,r){return r===void 0&&(r={}),Bt(e.map(function(o){return Qe(o,n)}),r)}function xe(e,n,r){r===void 0&&(r={});for(var o=0,u=e;o<u.length;o++){var c=u[o];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}var g={type:"Polygon",coordinates:e};return He(g,n,r)}function rt(e,n,r){return r===void 0&&(r={}),Bt(e.map(function(o){return xe(o,n)}),r)}function Je(e,n,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return He(o,n,r)}function dt(e,n,r){return r===void 0&&(r={}),Bt(e.map(function(o){return Je(o,n)}),r)}function Bt(e,n){n===void 0&&(n={});var r={type:"FeatureCollection"};return n.id&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.features=e,r}function Ye(e,n,r){r===void 0&&(r={});var o={type:"MultiLineString",coordinates:e};return He(o,n,r)}function Xe(e,n,r){r===void 0&&(r={});var o={type:"MultiPoint",coordinates:e};return He(o,n,r)}function Le(e,n,r){r===void 0&&(r={});var o={type:"MultiPolygon",coordinates:e};return He(o,n,r)}function je(e,n,r){r===void 0&&(r={});var o={type:"GeometryCollection",geometries:e};return He(o,n,r)}function at(e,n){if(n===void 0&&(n=0),n&&!(n>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,n||0);return Math.round(e*r)/r}function Me(e,n){n===void 0&&(n="kilometers");var r=he[n];if(!r)throw new Error(n+" units is invalid");return e*r}function Ze(e,n){n===void 0&&(n="kilometers");var r=he[n];if(!r)throw new Error(n+" units is invalid");return e/r}function _t(e,n){return ir(Ze(e,n))}function Mt(e){var n=e%360;return n<0&&(n+=360),n}function ir(e){var n=e%(2*Math.PI);return n*180/Math.PI}function Tr(e){var n=e%360;return n*Math.PI/180}function et(e,n,r){if(n===void 0&&(n="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Me(Ze(e,n),r)}function en(e,n,r){if(n===void 0&&(n="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=lt[n];if(!o)throw new Error("invalid original units");var u=lt[r];if(!u)throw new Error("invalid final units");return e/o*u}function Xr(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Sr(e){return!!e&&e.constructor===Object}function pt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(n){if(!Xr(n))throw new Error("bbox must only contain numbers")})}function Ut(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function Gt(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Tt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qt(e){if(e.length>1&&isNumber(e[0])&&isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return qt(e[0]);throw new Error("coordinates must only contain numbers")}function fr(e,n,r){if(!n||!r)throw new Error("type and name required");if(!e||e.type!==n)throw new Error("Invalid input to "+r+": must be a "+n+", given "+e.type)}function hr(e,n,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==n)throw new Error("Invalid input to "+r+": must be a "+n+", given "+e.geometry.type)}function Er(e,n,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var o=0,u=e.features;o<u.length;o++){var c=u[o];if(!c||c.type!=="Feature"||!c.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!c.geometry||c.geometry.type!==n)throw new Error("Invalid input to "+r+": must be a "+n+", given "+c.geometry.type)}}function Ir(e){return e.type==="Feature"?e.geometry:e}function ue(e,n){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function G(e,n,r){if(e!==null)for(var o,u,c,p,g,y,S,P=0,L=0,Z,q=e.type,ce=q==="FeatureCollection",me=q==="Feature",be=ce?e.features.length:1,$e=0;$e<be;$e++){S=ce?e.features[$e].geometry:me?e.geometry:e,Z=S?S.type==="GeometryCollection":!1,g=Z?S.geometries.length:1;for(var ft=0;ft<g;ft++){var mt=0,zt=0;if(p=Z?S.geometries[ft]:S,p!==null){y=p.coordinates;var ar=p.type;switch(P=r&&(ar==="Polygon"||ar==="MultiPolygon")?1:0,ar){case null:break;case"Point":if(n(y,L,$e,mt,zt)===!1)return!1;L++,mt++;break;case"LineString":case"MultiPoint":for(o=0;o<y.length;o++){if(n(y[o],L,$e,mt,zt)===!1)return!1;L++,ar==="MultiPoint"&&mt++}ar==="LineString"&&mt++;break;case"Polygon":case"MultiLineString":for(o=0;o<y.length;o++){for(u=0;u<y[o].length-P;u++){if(n(y[o][u],L,$e,mt,zt)===!1)return!1;L++}ar==="MultiLineString"&&mt++,ar==="Polygon"&&zt++}ar==="Polygon"&&mt++;break;case"MultiPolygon":for(o=0;o<y.length;o++){for(zt=0,u=0;u<y[o].length;u++){for(c=0;c<y[o][u].length-P;c++){if(n(y[o][u][c],L,$e,mt,zt)===!1)return!1;L++}zt++}mt++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(G(p.geometries[o],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oe(e,n,r,o){var u=r;return G(e,function(c,p,g,y,S){p===0&&r===void 0?u=c:u=n(u,c,p,g,y,S)},o),u}function Ie(e,n){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&n(e.features[r].properties,r)!==!1;r++);break;case"Feature":n(e.properties,0);break}}function qe(e,n,r){var o=r;return Ie(e,function(u,c){c===0&&r===void 0?o=u:o=n(o,u,c)}),o}function At(e,n){if(e.type==="Feature")n(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&n(e.features[r],r)!==!1;r++);}function rr(e,n,r){var o=r;return At(e,function(u,c){c===0&&r===void 0?o=u:o=n(o,u,c)}),o}function Zt(e){var n=[];return G(e,function(r){n.push(r)}),n}function wt(e,n){var r,o,u,c,p,g,y,S,P,L,Z=0,q=e.type==="FeatureCollection",ce=e.type==="Feature",me=q?e.features.length:1;for(r=0;r<me;r++){for(g=q?e.features[r].geometry:ce?e.geometry:e,S=q?e.features[r].properties:ce?e.properties:{},P=q?e.features[r].bbox:ce?e.bbox:void 0,L=q?e.features[r].id:ce?e.id:void 0,y=g?g.type==="GeometryCollection":!1,p=y?g.geometries.length:1,u=0;u<p;u++){if(c=y?g.geometries[u]:g,c===null){if(n(null,Z,S,P,L)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(c,Z,S,P,L)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<c.geometries.length;o++)if(n(c.geometries[o],Z,S,P,L)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Z++}}function Pt(e,n,r){var o=r;return wt(e,function(u,c,p,g,y){c===0&&r===void 0?o=u:o=n(o,u,c,p,g,y)}),o}function ge(e,n){wt(e,function(r,o,u,c,p){var g=r===null?null:r.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return n(He(r,u,{bbox:c,id:p}),o,0)===!1?!1:void 0}var y;switch(g){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var S=0;S<r.coordinates.length;S++){var P=r.coordinates[S],L={type:y,coordinates:P};if(n(He(L,u),o,S)===!1)return!1}})}function ve(e,n,r){var o=r;return ge(e,function(u,c,p){c===0&&p===0&&r===void 0?o=u:o=n(o,u,c,p)}),o}function Fe(e,n){ge(e,function(r,o,u){var c=0;if(r.geometry){var p=r.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var g,y=0,S=0,P=0;if(G(r,function(L,Z,q,ce,me){if(g===void 0||o>y||ce>S||me>P){g=L,y=o,S=ce,P=me,c=0;return}var be=lineString([g,L],r.properties);if(n(be,o,u,me,c)===!1)return!1;c++,g=L})===!1)return!1}}})}function nt(e,n,r){var o=r,u=!1;return Fe(e,function(c,p,g,y,S){u===!1&&r===void 0?o=c:o=n(o,c,p,g,y,S),u=!0}),o}function St(e,n){if(!e)throw new Error("geojson is required");ge(e,function(r,o,u){if(r.geometry!==null){var c=r.geometry.type,p=r.geometry.coordinates;switch(c){case"LineString":if(n(r,o,u,0,0)===!1)return!1;break;case"Polygon":for(var g=0;g<p.length;g++)if(n(lineString(p[g],r.properties),o,u,g)===!1)return!1;break}}})}function $t(e,n,r){var o=r;return St(e,function(u,c,p,g){c===0&&r===void 0?o=u:o=n(o,u,c,p,g)}),o}function vr(e,n){if(n=n||{},!isObject(n))throw new Error("options is invalid");var r=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,c=n.segmentIndex||0,p=n.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=y.length+c-1),lineString([y[c],y[c+1]],p,n);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c-1),lineString([y[u][c],y[u][c+1]],p,n);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c-1),lineString([y[o][c],y[o][c+1]],p,n);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c-1),lineString([y[o][u][c],y[o][u][c+1]],p,n)}throw new Error("geojson is invalid")}function Rt(e,n){if(n=n||{},!isObject(n))throw new Error("options is invalid");var r=n.featureIndex||0,o=n.multiFeatureIndex||0,u=n.geometryIndex||0,c=n.coordIndex||0,p=n.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":return point(y,p,n);case"MultiPoint":return o<0&&(o=y.length+o),point(y[o],p,n);case"LineString":return c<0&&(c=y.length+c),point(y[c],p,n);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c),point(y[u][c],p,n);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c),point(y[o][c],p,n);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c),point(y[o][u][c],p,n)}throw new Error("geojson is invalid")}var ct=k(43144),It=k(15671),gr=k(60136),Br=k(82963),Nt=k(61120),wn=k(89611);function ei(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch(n){return typeof e=="function"}}var ci=k(78814);function ln(e,n,r){if((0,ci.Z)())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var u=new(e.bind.apply(e,o));return r&&(0,wn.Z)(u,r.prototype),u}function ti(e){var n=typeof Map=="function"?new Map:void 0;return ti=function(o){if(o===null||!ei(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(o))return n.get(o);n.set(o,u)}function u(){return ln(o,arguments,(0,Nt.Z)(this).constructor)}return u.prototype=Object.create(o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),(0,wn.Z)(u,o)},ti(e)}var $n={REGISTERED_PROTOCOLS:{}};function ri(e){var n=oa();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var yi=function(n){return $n.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))]},ya=function(e){(0,gr.Z)(r,e);var n=ri(r);function r(o,u,c,p){var g;return(0,It.Z)(this,r),g=n.call(this,"AJAXError: ".concat(u," (").concat(o,"): ").concat(c)),g.status=o,g.statusText=u,g.url=c,g.body=p,g}return(0,ct.Z)(r)}(ti(Error));function Ya(e,n){var r=new XMLHttpRequest,o=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",o,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(var u in e.headers)e.headers.hasOwnProperty(u)&&r.setRequestHeader(u,e.headers[u]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=function(){n(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){var c=r.response;if(e.type==="json")try{c=JSON.parse(r.response)}catch(g){return n(g)}n(null,c,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{var p=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});n(new ya(r.status,r.statusText,o.toString(),p))}},r.cancel=r.abort,r.send(e.body),r}function ha(e){return new Promise(function(n,r){Ya(e,function(o,u,c,p,g){o?r({err:o,data:null,xhr:g}):n({err:null,data:u,cacheControl:c,expires:p,xhr:g})})})}function Fa(e,n){return Ya(e,n)}var Sa=function(n,r){var o=yi(n.url)||Fa;return o((0,ae.Z)((0,ae.Z)({},n),{},{type:"json"}),r)},xs=function(n,r){var o=yi(n.url)||Fa;return o((0,ae.Z)((0,ae.Z)({},n),{},{type:"arrayBuffer"}),r)},co=function(n,r){return Fa(_objectSpread(_objectSpread({},n),{},{method:"POST"}),r)},Lo=function(n,r){return Fa((0,ae.Z)((0,ae.Z)({},n),{},{method:"GET"}),r)};function Za(e){var n=window.document.createElement("a");return n.href=e,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}var Kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ci(e,n){var r=new window.Image,o=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=function(){n(null,r),o.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(function(){r.src=Kn})},r.onerror=function(){return n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?o.createObjectURL(u):Kn}function Ga(e,n){var r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(function(o){n(null,o)}).catch(function(o){n(new Error("Could not load image because of ".concat(o.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var Jo=function(n,r,o){var u=function(p,g){if(p)r(p);else if(g){var y=typeof createImageBitmap=="function",S=o?o(g):g;y?Ga(S,r):Ci(S,r)}};return n.type==="json"?Sa(n,u):xs(n,u)},fo=function(n,r){var o=typeof createImageBitmap=="function";o?Ga(n,r):Ci(n,r)},To=function(e){return e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e}({}),lr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Dt(e,n,r){var o=e.classList;for(var u in lr)lr.hasOwnProperty(u)&&o.remove("l7-".concat(r,"-anchor-").concat(u));o.add("l7-".concat(r,"-anchor-").concat(n))}function er(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function kr(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function tn(){}var In=.7,zn=1/In,On="\\s*([+-]?\\d+)\\s*",Vi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ja=/^#([0-9a-f]{3,8})$/,Ao=new RegExp("^rgb\\("+[On,On,On]+"\\)$"),fs=new RegExp("^rgb\\("+[Bi,Bi,Bi]+"\\)$"),ko=new RegExp("^rgba\\("+[On,On,On,Vi]+"\\)$"),oo=new RegExp("^rgba\\("+[Bi,Bi,Bi,Vi]+"\\)$"),iu=new RegExp("^hsl\\("+[Vi,Bi,Bi]+"\\)$"),Ko=new RegExp("^hsla\\("+[Vi,Bi,Bi,Vi]+"\\)$"),jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};er(tn,Yn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHsl:Vr,formatRgb:Cn,toString:Cn});function sr(){return this.rgb().formatHex()}function Vr(){return du(this).formatHsl()}function Cn(){return this.rgb().formatRgb()}function Yn(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Ja.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Wi(n):r===3?new Fo(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?ho(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?ho(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ao.exec(e))?new Fo(n[1],n[2],n[3],1):(n=fs.exec(e))?new Fo(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=ko.exec(e))?ho(n[1],n[2],n[3],n[4]):(n=oo.exec(e))?ho(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=iu.exec(e))?eh(n[1],n[2]/100,n[3]/100,1):(n=Ko.exec(e))?eh(n[1],n[2]/100,n[3]/100,n[4]):jt.hasOwnProperty(e)?Wi(jt[e]):e==="transparent"?new Fo(NaN,NaN,NaN,0):null}function Wi(e){return new Fo(e>>16&255,e>>8&255,e&255,1)}function ho(e,n,r,o){return o<=0&&(e=n=r=NaN),new Fo(e,n,r,o)}function Gs(e){return e instanceof tn||(e=Yn(e)),e?(e=e.rgb(),new Fo(e.r,e.g,e.b,e.opacity)):new Fo}function Mo(e,n,r,o){return arguments.length===1?Gs(e):new Fo(e,n,r,o==null?1:o)}function Fo(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}er(Fo,Mo,kr(tn,{brighter:function(e){return e=e==null?zn:Math.pow(zn,e),new Fo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?In:Math.pow(In,e),new Fo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wu,formatHex:Wu,formatRgb:ff,toString:ff}));function Wu(){return"#"+Jf(this.r)+Jf(this.g)+Jf(this.b)}function ff(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Jf(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function eh(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new au(e,n,r,o)}function du(e){if(e instanceof au)return new au(e.h,e.s,e.l,e.opacity);if(e instanceof tn||(e=Yn(e)),!e)return new au;if(e instanceof au)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,u=Math.min(n,r,o),c=Math.max(n,r,o),p=NaN,g=c-u,y=(c+u)/2;return g?(n===c?p=(r-o)/g+(r<o)*6:r===c?p=(o-n)/g+2:p=(n-r)/g+4,g/=y<.5?c+u:2-c-u,p*=60):g=y>0&&y<1?0:p,new au(p,g,y,e.opacity)}function lc(e,n,r,o){return arguments.length===1?du(e):new au(e,n,r,o==null?1:o)}function au(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}er(au,lc,kr(tn,{brighter:function(e){return e=e==null?zn:Math.pow(zn,e),new au(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?In:Math.pow(In,e),new au(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,u=2*r-o;return new Fo(Rl(e>=240?e-240:e+120,u,o),Rl(e,u,o),Rl(e<120?e+240:e-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Rl(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}function cc(e){return typeof e=="string"?!!d3.color(e):!1}function bo(e){var n=Yn(e),r=[0,0,0,0];return n!=null&&(r[0]=n.r/255,r[1]=n.g/255,r[2]=n.b/255,r[3]=n.opacity),r}function ec(e){var n=e&&e[0],r=e&&e[1],o=e&&e[2],u=n+r*256+o*65536-1;return u}function Ms(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function Rs(e){var n=window.document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;for(var o=null,u=r.createLinearGradient(0,0,256,1),c=e.positions[0],p=e.positions[e.positions.length-1],g=0;g<e.colors.length;++g){var y=(e.positions[g]-c)/(p-c);u.addColorStop(y,e.colors[g])}return r.fillStyle=u,r.fillRect(0,0,256,1),o=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),n=null,r=null,{data:o,width:256,height:1}}function Rc(e,n){var r=window.document.createElement("canvas"),o=r.getContext("2d");r.width=256,r.height=1,console.log("colorRamp",r);for(var u=o.createLinearGradient(0,0,256,1),c=n[1]-n[0],p=0;p<e.colors.length;++p){var g=Math.max((e.positions[p]-n[0])/c,0);u.addColorStop(g,e.colors[p])}o.fillStyle=u,o.fillRect(0,0,256,1);var y=o.getImageData(0,0,256,1).data,S=Fl(o,y);return r=null,o=null,S}function Ic(e){var n=window.document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var o=r.createImageData(256,1);return o.data.fill(0),e.positions.forEach(function(u,c){var p=bo(e.colors[c]);o.data[u*4+0]=p[0]*255,o.data[u*4+1]=p[1]*255,o.data[u*4+2]=p[2]*255,o.data[u*4+3]=p[3]*255}),n=null,r=null,o}function If(e){var n=window.document.createElement("canvas"),r=n.getContext("2d");r.globalAlpha=1,n.width=256,n.height=1;for(var o=256/e.colors.length,u=0;u<e.colors.length;u++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[u],r.moveTo(u*o,0),r.lineTo((u+1)*o,0),r.stroke();var c=r.getImageData(0,0,256,1).data,p=Fl(r,c);return n=null,r=null,p}function Ll(e,n){var r=window.document.createElement("canvas"),o=r.getContext("2d");o.globalAlpha=1,r.width=256,r.height=1;var u=n[1]-n[0];e.positions.length-e.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var c=0;c<e.colors.length;c++)o.beginPath(),o.lineWidth=2,o.strokeStyle=e.colors[c],o.moveTo((e.positions[c]-n[0])/u*255,0),o.lineTo((e.positions[c+1]-n[0])/u*255,0),o.stroke();var p=o.getImageData(0,0,256,1).data,g=Fl(o,p);return r=null,o=null,g}function Fl(e,n){for(var r=e.createImageData(256,1),o=0;o<r.data.length;o+=4)r.data[o+0]=n[o+0],r.data[o+1]=n[o+1],r.data[o+2]=n[o+2],r.data[o+3]=n[o+3];return r}function tc(e){switch(e.type){case"cat":return[0,255];default:return[0,1]}}var Lu={BACK:1029,FRONT:1028};function Oc(e){switch(e){case"GAODE1.x":return Lu.BACK;case"GAODE2.x":return Lu.BACK;case"MAPBOX":return Lu.FRONT;case"SIMPLE":return Lu.FRONT;case"GLOBEL":return Lu.BACK;case"DEBAULT":return Lu.FRONT;default:return Lu.FRONT}}var Rn=k(74902),ji=k(97685),Sv=k(74691),th=k.n(Sv),fc=k(50361),$p=k.n(fc),Qs=k(23279),Pc=k.n(Qs),Bl=k(27361),ou=k.n(Bl),vu=k(51584),Il=k.n(vu),hc=k(18446),Nl=k.n(hc),kc=k(14293),Yc=k.n(kc),rh=k(81763),Xp=k.n(rh),jo=k(68630),Ld=k.n(jo),Ih=k(47037),hf=k.n(Ih),ss=k(36719),cp=k.n(ss),fp=k(82492),Fu=k.n(fp),Ot=k(30236),br=k.n(Ot),Hr=k(97019),Jr=k.n(Hr),Pn=k(23493),_i=k.n(Pn),sa=k(44908),xo=k.n(sa),Us=k(11700),yl=k.n(Us),al=k(23560),Bo=k.n(al),hp=k(13218),Fd=k.n(hp),qc=k(52353),pp=k.n(qc),pf=k(68929),Yp=k.n(pf),Aa={isNil:Yc(),merge:Fu(),throttle:_i(),isString:hf(),debounce:Pc(),pull:Jr(),isTypedArray:cp(),isPlainObject:Ld(),isNumber:Xp(),isBoolean:Il(),isEqual:Nl(),cloneDeep:$p(),uniq:xo(),clamp:th(),upperFirst:yl(),get:ou(),mergeWith:br(),isFunction:Bo(),isObject:Fd(),isUndefined:pp(),camelCase:Yp()},df=Aa.pull;function nh(e){var n=e;return typeof e=="string"&&(n=window.document.getElementById(e)),n}function ih(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Of(e){return ih(e).split(/\s+/)}function ah(e){var n,r=(n=document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!r)return e[0];for(var o in e)if(e[o]&&e[o]in r)return e[o];return e[0]}function $s(e,n,r){var o=window.document.createElement(e);return n&&(o.className=n||""),r&&r.appendChild(o),o}function pc(e){var n=e.parentNode;n&&n.removeChild(e)}function Bu(e,n){if(e.classList!==void 0)for(var r=Of(n),o=0,u=r.length;o<u;o++)e.classList.add(r[o]);else if(!qp(e,n)){var c=dc(e);Kp(e,(c?c+" ":"")+n)}}function oh(e,n){if(e.classList!==void 0){var r=Of(n);r.forEach(function(o){e.classList.remove(o)})}else Kp(e,ih((" "+dc(e)+" ").replace(" "+n+" "," ")))}function qp(e,n){if(e.classList!==void 0)return e.classList.contains(n);var r=dc(e);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function Kp(e,n){e instanceof HTMLElement?e.className=n:e.className.baseVal=n}function sh(e,n,r){r===void 0?qp(e,n)?oh(e,n):Bu(e,n):r?Bu(e,n):oh(e,n)}function dc(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Oh(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var dp=ah(["transform","WebkitTransform"]);function Pf(e,n){e.style[dp]=n}function pm(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}function Bd(e){var n=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log(`%c
`,n.join(""))}function Nd(){var e,n=window.document.querySelector('meta[name="viewport"]');if(!n)return 1;var r=(e=n.content)===null||e===void 0?void 0:e.split(","),o=r.find(function(u){var c=u.split("="),p=(0,ji.Z)(c,1),g=p[0];return g==="initial-scale"});return o?o.split("=")[1]*1:1}var Is=Nd()<1?1:window.devicePixelRatio;function Ph(e,n){e.setAttribute("style","".concat(e.style.cssText).concat(n))}function vp(e){return e.split(";").map(function(n){return n.trim()}).filter(function(n){return n})}function Qp(e,n){var r,o=vp((r=e.getAttribute("style"))!==null&&r!==void 0?r:""),u=vp(n),c=df.apply(void 0,[o].concat((0,Rn.Z)(u)));e.setAttribute("style",c.join(";"))}function gp(e){return Object.entries(e).map(function(n){var r=(0,ji.Z)(n,2),o=r[0],u=r[1];return"".concat(o,": ").concat(u)}).join(";")}function zd(e,n){return{left:e.left-n.left,top:e.top-n.top,right:n.left+n.width-e.left-e.width,bottom:n.top+n.height-e.top-e.height}}function kh(e,n){e.checked=n,n?e.setAttribute("checked","true"):e.removeAttribute("checked")}function Dh(e){e.innerHTML=""}function kf(e){e.setAttribute("draggable","false")}function hs(e,n){if(typeof n=="string"){var r=document.createElement("div");for(r.innerHTML=n;r.firstChild;)e.append(r.firstChild)}else Array.isArray(n)?e.append.apply(e,(0,Rn.Z)(n)):e.append(n)}function mp(e,n){for(var r=Array.isArray(n)?n:[n],o=e;o instanceof Element&&o!==window.document.body;){var u,c;if(r.find(function(p){var g;return(g=o)===null||g===void 0?void 0:g.matches(p)}))return o;o=(u=(c=o)===null||c===void 0?void 0:c.parentElement)!==null&&u!==void 0?u:null}}var rc;function vc(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function so(){return typeof importScripts=="function"}var ps=so()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},eo=(rc=navigator)===null||rc===void 0?void 0:rc.userAgent,Jp=!!eo.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),uh=eo.indexOf("Android")>-1||eo.indexOf("Adr")>-1;function yp(){for(var e=eo,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,o=0,u=n;o<u.length;o++){var c=u[o];if(e.indexOf(c)>0){r=!1;break}}return r}function Ud(e,n){e.forEach(function(r){n[r]&&(n[r]=n[r].bind(n))})}var wa=null;function lh(e){var n=[1/0,1/0,-1/0,-1/0];return G(e,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}lh.default=lh;var Df=lh;function su(e){return typeof e=="number"}var us=2*Math.PI*6378137/2;function ch(e,n){var r=(0,ji.Z)(n,4),o=r[0],u=r[1],c=r[2],p=r[3];return e.lng>o&&e.lng<=c&&e.lat>u&&e.lat<=p}function Zd(e){var n=[1/0,1/0,-1/0,-1/0];return e.forEach(function(r){var o=r.coordinates;bs(n,o)}),n}function bs(e,n){return Array.isArray(n[0])?n.forEach(function(r){bs(e,r)}):(e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])),e}function Ni(e,n){return ol(e,n)}function ol(e,n){return Array.isArray(e[0])?e.map(function(r){return ol(r,n)}):n(e)}function nc(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=ed(e,n);var o=e[0],u=e[1],c=o*us/180,p=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return p=p*us/180,r.enable&&(c=Number(c.toFixed(r.decimal)),p=Number(p.toFixed(r.decimal))),e.length===3?[c,p,e[2]]:[c,p]}function fh(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=e[0],o=e[1],u=r/us*180,c=o/us*180;return c=180/Math.PI*(2*Math.atan(Math.exp(c*Math.PI/180))-Math.PI/2),n!=null&&(u=Number(u.toFixed(n)),c=Number(c.toFixed(n))),e.length===3?[u,c,e[2]]:[u,c]}function _l(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function Ho(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function ed(e,n){if(n===!1)return e;var r=_l(e[0]),o=Ho(e[1]);return o>85&&(o=85),o<-85&&(o=-85),e.length===3?[r,o,e[2]]:[r,o]}function Qn(e){var n=85.0511287798,r=Math.max(Math.min(n,e[1]),-n),o=256<<20,u=Math.PI/180,c=e[0]*u,p=r*u;p=Math.log(Math.tan(Math.PI/4+p/2));var g=.5/Math.PI,y=.5,S=-.5/Math.PI;return u=.5,c=o*(g*c+y),p=o*(S*p+u),[Math.floor(c),Math.floor(p)]}function Kc(e){var n=.5/Math.PI,r=.5,o=-.5/Math.PI,u=.5,c=256<<20,p=_slicedToArray(e,2),g=p[0],y=p[1];g=(g/c-r)/n,y=(y/c-u)/o,y=(Math.atan(Math.pow(Math.E,y))-Math.PI/4)*2,u=Math.PI/180;var S=y/u,P=g/u;return[P,S]}function Dc(e,n){var r=85.0511287798,o=Math.PI/180,u=6378137;return n=Math.max(Math.min(r,n),-r),e*=o,n*=o,n=Math.log(Math.tan(Math.PI/4+n/2)),[e*u,n*u]}function _p(e,n){var r=Math.PI/180,o=6378137,u=e/o/r,c=2*(Math.atan(Math.exp(n/o))-Math.PI/4)/r;return[u,c]}function gc(e,n,r){var o=Tr(n[1]-e[1]),u=Tr(n[0]-e[0]),c=Tr(e[1]),p=Tr(n[1]),g=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(p);return Me(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),r="meters")}function sl(e){var n=Math.PI/180,r=85.0511287798,o=6378137,u=Math.max(Math.min(r,e[1]),-r),c=Math.sin(u*n),p=o*e[0]*n,g=o*Math.log((1+c)/(1-c))/2;return[p,g]}function Lh(e,n){var r=Math.abs(e[1][1]-e[0][1])*n,o=Math.abs(e[1][0]-e[0][0])*n;return[[e[0][0]-o,e[0][1]-r],[e[1][0]+o,e[1][1]+r]]}function vf(e,n){return e[0][0]<=n[0][0]&&e[0][1]<=n[0][1]&&e[1][0]>=n[1][0]&&e[1][1]>=n[1][1]}function Zs(e){return[[e[0],e[1]],[e[2],e[3]]]}function Ol(e){var n=Vd(e,[0,0]);return[e[0]/n,e[1]/n]}function Vd(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function xp(e,n){return e[0]*n[0]+e[1]*n[1]}function Lf(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ev(e,n){return Math.acos(xp(e,n)/(Lf(e)*Lf(n)))*180/Math.PI}function ic(e,n){return n[0]>0?n[1]>0?90-Math.atan(n[1]/n[0])*180/Math.PI:90+Math.atan(-n[1]/n[0])*180/Math.PI:n[1]<0?180+(90-Math.atan(n[1]/n[0])*180/Math.PI):270+Math.atan(n[1]/-n[0])*180/Math.PI}function ac(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!e||e.length<2)){for(var r=[0,1],o=0,u=[],c=0;c<e.length-1;c++){var p=e[c],g=e[c+1],y=Vd(p,g);o+=y;var S=[p[0]-g[0],p[1]-g[1]],P=ic(r,S);if(c>0){var L=u[c-1].rotation;L-P>360-L+P&&(P=P+360)}u.push({start:p,end:g,dis:y,rotation:P,duration:0})}return u.map(function(Z){Z.duration=n*(Z.dis/o)}),u}}function Ca(e){if(su(e[0]))return e;if(su(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(su(e[0][0][0])){var n=e,r=0,o=0,u=0;return n.forEach(function(c){c.forEach(function(p){r+=p[0],o+=p[1],u++})}),[r/u,o/u,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Os(e){for(var n=e[0],r=e[1],o=e[0],u=e[1],c=0,p=0,g=0,y=0;y<e.length;y+=2){var S=e[y],P=e[y+1];S&&P&&(n=Math.max(S,n),r=Math.max(P,r),o=Math.min(S,o),u=Math.min(P,u),c+=S,p+=P,g++)}return{center:[c/g,p/g],radius:Math.sqrt(Math.pow(n-o,2)+Math.pow(r-u,2))/2}}function zl(e){return Df(Bt([Je(e)]))}function Gu(e){var n=131,r=137,o=0;e+="x";for(var u=Math.floor(9007199254740991/r),c=0;c<e.length;c++)o>u&&(o=Math.floor(o/r)),o=o*n+e.charCodeAt(c);return o}function hh(e){e=e.toString();for(var n=5381,r=e.length;r;)n=n*33^e.charCodeAt(--r);return n>>>0}function Qc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,r=e==="x"?n:n&3|8;return r.toString(16)})}var Nu=function(e){return e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e}({});function xl(e,n,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*(c-1))/(c-1)),o?ul(e,n,g,o,u):ul(e,n,g,.314,u)}function gf(e,n){var r=1-n;return(e[0]*r+e[1]*n)*r+(e[1]*r+e[2]*n)*n}function Ji(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function wi(e,n,r){var o=[n[0]-e[0],n[1]-e[1]],u=Ji(o,[0,0]),c=Math.atan2(o[1],o[0]),p=u/2/Math.cos(r),g=c+r,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function ul(e,n,r,o,u){if(u===MapType["GAODE2.x"]){var c=amap2Project(e[0],e[1]),p=amap2Project(n[0],n[1]),g=wi(c,p,o),y=[c[0],g[0],p[0]],S=[c[1],g[1],p[1]];return[].concat(_toConsumableArray(amap2UnProject(gf(y,r),gf(S,r))),[0])}else{var P=wi(e,n,o),L=[e[0],P[0],n[0]],Z=[e[1],P[1],n[1]];return[gf(L,r),gf(Z,r),0]}}function bl(e,n,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*29)/29),mf(e,n,g,u)}function ll(e,n){var r=[n[0]-e[0],n[1]-e[1]],o=calDistance(r,[0,0]),u=Math.atan2(r[1],r[0]),c=.314,p=o/2/Math.cos(c),g=u+c,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function Ss(e,n){var r=1-n;return(e[0]*r+e[1]*n)*r+(e[1]*r+e[2]*n)*n}function mc(e,n){var r=[e[0]-n[0],e[1]-n[1]],o=[Math.sin(r[0]/2),Math.sin(r[1]/2)],u=o[1]*o[1]+Math.cos(e[1])*Math.cos(n[1])*o[0]*o[0];return 2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function mf(e,n,r,o){var u=[degreesToRadians(e[0]),degreesToRadians(e[1])],c=[degreesToRadians(n[0]),degreesToRadians(n[1])];if(o==="GAODE2.x"){var p=ll(u,c),g=[u[0],p[0],c[0]],y=[u[1],p[1],c[1]];return[Ss(g,r),Ss(y,r),0]}else{var S=mc(u,c);if(Math.abs(S-Math.PI)<.001)return[(1-r)*u[0]+r*c[0],(1-r)*u[1]+r*c[1]];var P=Math.sin((1-r)*S)/Math.sin(S),L=Math.sin(r*S)/Math.sin(S),Z=[Math.sin(u[0]),Math.sin(u[1])],q=[Math.cos(u[0]),Math.cos(u[1])],ce=[Math.sin(c[0]),Math.sin(c[1])],me=[Math.cos(c[0]),Math.cos(c[1])],be=P*q[1]*q[0]+L*me[1]*me[0],$e=P*q[1]*Z[0]+L*me[1]*ce[0],ft=P*Z[1]+L*ce[1];return[radiansToDegrees(Math.atan2($e,be)),radiansToDegrees(Math.atan2(ft,Math.sqrt(be*be+$e*$e)))]}}function Fh(e,n){for(var r=0,o=[],u=0;u<e.length-1;u++){var c=e[u],p=e[u+1],g=uu(c,p),y=r;r+=g,o.push({p1:c,p2:p,totalDistance:r,distance:g,lastTotalDistance:y})}for(var S=r*n,P,L,Z=0,q=o;Z<q.length;Z++){var ce=q[Z],me=ce.totalDistance;if(me>S){var be=ce.p1,$e=ce.p2,ft=(S-ce.lastTotalDistance)/ce.distance,mt=Vo($e,be,ft);P=mt[0],L=mt[1];break}}return{lng:P,lat:L,height:0}}function Vo(e,n,r){return[e[0]*r+n[0]*(1-r),e[1]*r+n[1]*(1-r)]}function uu(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function td(e,n){var r=n.featureId,o=e.data.dataArray;return typeof r=="number"&&(o=o.filter(function(u){var c=u.id;return c===r})),o.map(function(u){var c=Ff(u,n);return _objectSpread(_objectSpread({},u),c)})}function Bh(e,n){return new Promise(function(r){e.inited?r(td(e,n)):e.once("update",function(){r(td(e,n))})})}function Ff(e,n){var r=n.offset,o=n.shape,u=n.thetaOffset,c=n.mapVersion,p=n.segmentNumber,g=p===void 0?30:p,y=n.autoFit,S=y===void 0?!0:y,P=e.coordinates;if(o==="line")return pathLineAtOffset(P,r);var L=P[0],Z=P[1],q=typeof u=="string"?e[u]||0:u,ce;switch(o){case"arc":ce=arcLineAtOffset;break;case"greatcircle":ce=greatCircleLineAtOffset;break;default:ce=arcLineAtOffset}var me=ce(L,Z,r,q,c,g,S),be=_slicedToArray(me,3),$e=be[0],ft=be[1],mt=be[2];return{lng:$e,lat:ft,height:mt}}var yc=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,r=arguments.length>1?arguments[1]:void 0;(0,It.Z)(this,e),this.limit=n,this.destroy=r||this.defaultDestroy,this.order=[],this.clear()}return(0,ct.Z)(e,[{key:"clear",value:function(){var r=this;this.order.forEach(function(o){r.delete(o)}),this.cache={},this.order=[]}},{key:"get",value:function(r){var o=this.cache[r];return o&&(this.deleteOrder(r),this.appendOrder(r)),o}},{key:"set",value:function(r,o){this.cache[r]?(this.delete(r),this.cache[r]=o,this.appendOrder(r)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[r]=o,this.appendOrder(r))}},{key:"delete",value:function(r){var o=this.cache[r];o&&(this.deleteCache(r),this.deleteOrder(r),this.destroy(o,r))}},{key:"deleteCache",value:function(r){delete this.cache[r]}},{key:"deleteOrder",value:function(r){var o=this.order.findIndex(function(u){return u===r});o>=0&&this.order.splice(o,1)}},{key:"appendOrder",value:function(r){this.order.push(r)}},{key:"defaultDestroy",value:function(r,o){return null}}]),e}();function Ma(e){if(e.length===0)throw new Error("max requires at least one data point");for(var n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]);return n*1}function Nh(e){if(e.length===0)throw new Error("min requires at least one data point");for(var n=e[0],r=1;r<e.length;r++)e[r]<n&&(n=e[r]);return n*1}function Lc(e){if(e.length===0)return 0;for(var n=e[0]*1,r=1;r<e.length;r++)n+=e[r]*1;return n}function rd(e){if(e.length===0)throw new Error("mean requires at least one data point");return Lc(e)/e.length}function zh(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var n=e[0],r=NaN,o=0,u=1,c=1;c<e.length+1;c++)e[c]!==n?(u>o&&(o=u,r=n),u=1,n=e[c]):u++;return r*1}var ph={min:Nh,max:Ma,mean:rd,sum:Lc,mode:zh};function bp(e,n){return e.map(function(r){return r[n]})}function Uh(e,n){return ph[e](n)}var pn=k(15861),Mr=k(97326),Ve=k(4942),Fc=k(64687),Jt=k.n(Fc);function Bf(e,n){n===void 0&&(n={});var r=Number(e[0]),o=Number(e[1]),u=Number(e[2]),c=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var p=[r,o],g=[r,c],y=[u,c],S=[u,o];return xe([[p,S,y,g,p]],n.properties,{bbox:e,id:n.id})}var Es=k(26729),Sp=k.n(Es),Nf=function(e){return e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e}({}),Ul=function(e){return e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e}({}),Ep=0,E=1,M=2;function C(e){e.forEach(function(n){n.isCurrent&&(n.isVisible=n.isLoaded)})}function I(e){e.forEach(function(n){n.properties.state=Ep}),e.forEach(function(n){n.isCurrent&&!ie(n)&&fe(n)}),e.forEach(function(n){n.isVisible=!!(n.properties.state&M)})}function V(e){e.forEach(function(r){r.properties.state=Ep}),e.forEach(function(r){r.isCurrent&&ie(r)});var n=e.slice().sort(function(r,o){return r.z-o.z});n.forEach(function(r){r.isVisible=!!(r.properties.state&M),r.children.length&&(r.isVisible||r.properties.state&E)?r.children.forEach(function(o){o.properties.state=E}):r.isCurrent&&fe(r)})}function ie(e){for(;e;){if(e.isLoaded)return e.properties.state|=M,!0;e=e.parent}return!1}function fe(e){e.children.forEach(function(n){n.isLoaded?n.properties.state|=M:fe(n)})}var Oe,ut=256,Et=[-1/0,-1/0,1/0,1/0],Wt=.2,Xt=5,Kt=(Oe={},(0,Ve.Z)(Oe,Nf.Realtime,C),(0,Ve.Z)(Oe,Nf.Overlap,I),(0,Ve.Z)(Oe,Nf.Replace,V),Oe),_r=function(){};function dr(e,n,r){var o=Math.floor((e+180)/360*Math.pow(2,r)),u=Math.floor((1-Math.log(Math.tan(n*Math.PI/180)+1/Math.cos(n*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[o,u]}function Pr(e,n,r){var o=e/Math.pow(2,r)*360-180,u=Math.PI-2*Math.PI*n/Math.pow(2,r),c=180/Math.PI*Math.atan(.5*(Math.exp(u)-Math.exp(-u)));return[o,c]}var cr=function(n,r,o){var u=Pr(n,r,o),c=(0,ji.Z)(u,2),p=c[0],g=c[1],y=Pr(n+1,r+1,o),S=(0,ji.Z)(y,2),P=S[0],L=S[1];return[p,L,P,g]};function Dr(e){var n=e.zoom,r=e.latLonBounds,o=e.maxZoom,u=o===void 0?1/0:o,c=e.minZoom,p=c===void 0?0:c,g=e.zoomOffset,y=g===void 0?0:g,S=e.extent,P=S===void 0?Et:S,L=Math.ceil(n)+y;if(Number.isFinite(p)&&L<p)return[];Number.isFinite(u)&&L>u&&(L=u);for(var Z=(0,ji.Z)(r,4),q=Z[0],ce=Z[1],me=Z[2],be=Z[3],$e=[Math.max(q,P[0]),Math.max(ce,P[1]),Math.min(me,P[2]),Math.min(be,P[3])],ft=[],mt=dr($e[0],$e[1],L),zt=(0,ji.Z)(mt,2),ar=zt[0],nr=zt[1],Yt=dr($e[2],$e[3],L),Cr=(0,ji.Z)(Yt,2),Nr=Cr[0],nn=Cr[1],an=ar;an<=Nr;an++)for(var Nn=nn;Nn<=nr;Nn++)ft.push({x:an,y:Nn,z:L});var jn=(Nr+ar)/2,di=(nr+nn)/2,Ua=function(os,nu){return Math.abs(os-jn)+Math.abs(nu-di)};return ft.sort(function(Co,os){return Ua(Co.x,Co.y)-Ua(os.x,os.y)}),ft}var Wr=function(n,r,o){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=Math.pow(2,o),p=c-1,g=c,y=n,S=r;return u&&(y<0?y=y+g:y>p&&(y=y%g)),{warpX:y,warpY:S}};function rn(e){var n=xn();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function xn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dn=function(e){(0,gr.Z)(r,e);var n=rn(r);function r(o){var u;(0,It.Z)(this,r),u=n.call(this),(0,Ve.Z)((0,Mr.Z)(u),"tileSize",256),(0,Ve.Z)((0,Mr.Z)(u),"isVisible",!1),(0,Ve.Z)((0,Mr.Z)(u),"isCurrent",!1),(0,Ve.Z)((0,Mr.Z)(u),"isVisibleChange",!1),(0,Ve.Z)((0,Mr.Z)(u),"loadedLayers",0),(0,Ve.Z)((0,Mr.Z)(u),"isLayerLoaded",!1),(0,Ve.Z)((0,Mr.Z)(u),"isLoad",!1),(0,Ve.Z)((0,Mr.Z)(u),"isChildLoad",!1),(0,Ve.Z)((0,Mr.Z)(u),"parent",null),(0,Ve.Z)((0,Mr.Z)(u),"children",[]),(0,Ve.Z)((0,Mr.Z)(u),"data",null),(0,Ve.Z)((0,Mr.Z)(u),"properties",{}),(0,Ve.Z)((0,Mr.Z)(u),"loadDataId",0);var c=o.x,p=o.y,g=o.z,y=o.tileSize,S=o.warp,P=S===void 0?!0:S;return u.x=c,u.y=p,u.z=g,u.warp=P||!0,u.tileSize=y,u}return(0,ct.Z)(r,[{key:"isLoading",get:function(){return this.loadStatus===Ul.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Ul.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Ul.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Ul.Cancelled}},{key:"isDone",get:function(){return[Ul.Loaded,Ul.Cancelled,Ul.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return cr(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var u=(0,ji.Z)(this.bounds,4),c=u[0],p=u[1],g=u[2],y=u[3],S=[(g-c)/2,(y-p)/2],P=Bf(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:S,meta:`
      `.concat(this.key,`
      `)}});return P}},{key:"key",get:function(){var u="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return u}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar,nr,Yt;return Jt().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return g=p.getData,y=p.onLoad,S=p.onError,this.loadDataId++,P=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Ul.Loading,L=null,Nr.prev=7,q=this.x,ce=this.y,me=this.z,be=this.bounds,$e=this.tileSize,ft=this.warp,mt=Wr(q,ce,me,ft),zt=mt.warpX,ar=mt.warpY,nr=this.abortController.signal,Yt={x:zt,y:ar,z:me,bounds:be,tileSize:$e,signal:nr,warp:ft},Nr.next=14,g(Yt,this);case 14:L=Nr.sent,Nr.next=20;break;case 17:Nr.prev=17,Nr.t0=Nr.catch(7),Z=Nr.t0;case 20:if(P===this.loadDataId){Nr.next=22;break}return Nr.abrupt("return");case 22:if(!(this.isCancelled&&!L)){Nr.next=24;break}return Nr.abrupt("return");case 24:if(!(Z||!L)){Nr.next=28;break}return this.loadStatus=Ul.Failure,S(Z,this),Nr.abrupt("return");case 28:this.loadStatus=Ul.Loaded,this.data=L,y(this);case 31:case"end":return Nr.stop()}},c,this,[[7,17]])}));function u(c){return o.apply(this,arguments)}return u}()},{key:"reloadData",value:function(u){this.isLoading&&this.abortLoad(),this.loadData(u)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Ul.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),r}(Es.EventEmitter),An=function(n,r){var o=Zs(n),u=Lh(o,r),c=360*3-180,p=85.0511287798065,g=[Math.max(u[0][0],-c),Math.max(u[0][1],-p),Math.min(u[1][0],c),Math.min(u[1][1],p)];return g},Vn=function(n,r){var o=Zs(n),u=Zs(r),c=vf(o,u);return c};function ui(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=li(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function li(e,n){if(e){if(typeof e=="string")return Ri(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ri(e,n)}}function Ri(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function ea(e){var n=ua();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function ua(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ra=Aa.throttle,uo=function(e){return e.TilesLoadStart="tiles-load-start",e.TileLoaded="tile-loaded",e.TileError="tile-error",e.TileUnload="tile-unload",e.TileUpdate="tile-update",e.TilesLoadFinished="tiles-load-finished",e}({}),Li=function(e){(0,gr.Z)(r,e);var n=ea(r);function r(o){var u;return(0,It.Z)(this,r),u=n.call(this),(0,Ve.Z)((0,Mr.Z)(u),"currentTiles",[]),(0,Ve.Z)((0,Mr.Z)(u),"cacheTiles",new Map),(0,Ve.Z)((0,Mr.Z)(u),"throttleUpdate",ra(function(c,p){u.update(c,p)},16)),(0,Ve.Z)((0,Mr.Z)(u),"onTileLoad",function(c){u.emit(uo.TileLoaded,c),u.updateTileVisible(),u.loadFinished()}),(0,Ve.Z)((0,Mr.Z)(u),"onTileError",function(c,p){u.emit(uo.TileError,{error:c,tile:p}),u.updateTileVisible(),u.loadFinished()}),(0,Ve.Z)((0,Mr.Z)(u),"onTileUnload",function(c){u.emit(uo.TileUnload,c),u.loadFinished()}),u.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Et,getTileData:_r,warp:!0,updateStrategy:Nf.Replace},u.updateOptions(o),u}return(0,ct.Z)(r,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(u){return u.isDone})}},{key:"tiles",get:function(){var u=Array.from(this.cacheTiles.values()).sort(function(c,p){return c.z-p.z});return u}},{key:"updateOptions",value:function(u){var c=u.minZoom===void 0?this.options.minZoom:Math.ceil(u.minZoom),p=u.maxZoom===void 0?this.options.maxZoom:Math.floor(u.maxZoom);this.options=(0,ae.Z)((0,ae.Z)((0,ae.Z)({},this.options),u),{},{minZoom:c,maxZoom:p})}},{key:"update",value:function(u,c){var p=this,g=Math.max(0,Math.ceil(u));if(!(this.lastViewStates&&this.lastViewStates.zoom===g&&Vn(this.lastViewStates.latLonBoundsBuffer,c))){var y=An(c,Wt);this.lastViewStates={zoom:g,latLonBounds:c,latLonBoundsBuffer:y},this.currentZoom=g;var S=!1,P=this.getTileIndices(g,y).filter(function(L){return p.options.warp||L.x>=0&&L.x<Math.pow(2,g)});this.emit(uo.TilesLoadStart),this.currentTiles=P.map(function(L){var Z=L.x,q=L.y,ce=L.z,me=p.getTile(Z,q,ce);if(me){var be,$e,ft=((be=me)===null||be===void 0?void 0:be.isFailure)||(($e=me)===null||$e===void 0?void 0:$e.isCancelled);return ft&&me.loadData({getData:p.options.getTileData,onLoad:p.onTileLoad,onError:p.onTileError}),me}return me=p.createTile(Z,q,ce),S=!0,me}),S&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var u=ui(this.cacheTiles),c;try{for(u.s();!(c=u.n()).done;){var p=(0,ji.Z)(c.value,2),g=p[0],y=p[1];if(!this.currentTiles.includes(y)){this.cacheTiles.delete(g),this.onTileUnload(y);return}this.onTileUnload(y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(S){u.e(S)}finally{u.f()}}},{key:"reloadTileById",value:function(u,c,p){var g=this.cacheTiles.get("".concat(c,",").concat(p,",").concat(u));g&&(this.onTileUnload(g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(u,c,p){var g=this.getTileByLngLat(u,c,p);g&&this.reloadTileById(g.z,g.x,g.y)}},{key:"reloadTileByExtent",value:function(u,c){var p=this,g=this.getTileIndices(c,u);g.forEach(function(y){p.reloadTileById(y.z,y.x,y.y)})}},{key:"pruneRequests",value:function(){var u=[],c=ui(this.cacheTiles.values()),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;g.isLoading&&!g.isCurrent&&!g.isVisible&&u.push(g)}}catch(S){c.e(S)}finally{c.f()}for(;u.length>0;){var y=u.shift();y.abortLoad()}}},{key:"getTileByLngLat",value:function(u,c,p){var g=this.options.zoomOffset,y=Math.ceil(p)+g,S=dr(u,c,y),P=this.tiles.filter(function(L){return L.key==="".concat(S[0],"_").concat(S[1],"_").concat(y)});return P[0]}},{key:"getTileExtent",value:function(u,c){return this.getTileIndices(c,u)}},{key:"getTileByZXY",value:function(u,c,p){var g=this.tiles.filter(function(y){return y.key==="".concat(c,"_").concat(p,"_").concat(u)});return g[0]}},{key:"clear",value:function(){var u=ui(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.isLoading?p.abortLoad():this.onTileUnload(p)}}catch(g){u.e(g)}finally{u.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var u=this.options.updateStrategy,c=new Map,p=ui(this.cacheTiles.values()),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;c.set(y.key,y.isVisible),y.isCurrent=!1,y.isVisible=!1}}catch(ce){p.e(ce)}finally{p.f()}var S=ui(this.currentTiles),P;try{for(S.s();!(P=S.n()).done;){var L=P.value;L.isCurrent=!0,L.isVisible=!0}}catch(ce){S.e(ce)}finally{S.f()}var Z=Array.from(this.cacheTiles.values());typeof u=="function"?u(Z):Kt[u](Z);var q=!1;Array.from(this.cacheTiles.values()).forEach(function(ce){ce.isVisible!==c.get(ce.key)?(ce.isVisibleChange=!0,q=!0):ce.isVisibleChange=!1}),q&&this.emit(uo.TileUpdate)}},{key:"getTileIndices",value:function(u,c){var p=this.options,g=p.tileSize,y=p.extent,S=p.zoomOffset,P=Math.floor(this.options.maxZoom),L=Math.ceil(this.options.minZoom),Z=Dr({maxZoom:P,minZoom:L,zoomOffset:S,tileSize:g,zoom:u,latLonBounds:c,extent:y});return Z}},{key:"getTileId",value:function(u,c,p){var g="".concat(u,",").concat(c,",").concat(p);return g}},{key:"loadFinished",value:function(){var u=!this.currentTiles.some(function(c){return!c.isDone});return u&&this.emit(uo.TilesLoadFinished),u}},{key:"getTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=this.cacheTiles.get(g);return y}},{key:"createTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=new dn({x:u,y:c,z:p,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(g,y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),y}},{key:"resizeCacheTiles",value:function(){var u=Xt*this.currentTiles.length,c=this.cacheTiles.size>u;if(c){var p=ui(this.cacheTiles),g;try{for(p.s();!(g=p.n()).done;){var y=(0,ji.Z)(g.value,2),S=y[0],P=y[1];if(!P.isVisible&&!this.currentTiles.includes(P)&&(this.cacheTiles.delete(S),this.onTileUnload(P)),this.cacheTiles.size<=u)break}}catch(L){p.e(L)}finally{p.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var u=ui(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.parent=null,p.children.length=0}}catch(L){u.e(L)}finally{u.f()}var g=ui(this.cacheTiles.values()),y;try{for(g.s();!(y=g.n()).done;){var S=y.value,P=this.getNearestAncestor(S.x,S.y,S.z);S.parent=P,P!=null&&P.children&&P.children.push(S)}}catch(L){g.e(L)}finally{g.f()}}},{key:"getNearestAncestor",value:function(u,c,p){for(;p>this.options.minZoom;){u=Math.floor(u/2),c=Math.floor(c/2),p=p-1;var g=this.getTile(u,c,p);if(g)return g}return null}}]),r}(Sp());function Oa(e){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function Ha(e){var n=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var o=r[1].charCodeAt(0),u=r[2].charCodeAt(0),c;for(c=o;c<=u;++c)n.push(e.replace(r[0],String.fromCharCode(c)));return n}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var p=parseInt(r[2],10),g=parseInt(r[1],10);g<=p;g++)n.push(e.replace(r[0],g.toString()));return n}return n.push(e),n}function va(e,n){if(!e||!e.length)throw new Error("url is not allowed to be empty");var r=n.x,o=n.y,u=n.z,c=Ha(e),p=Math.abs(r+o)%c.length,g=yi(c[p])?"".concat(c[p],"/{z}/{x}/{y}"):c[p];return g.replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,o.toString()).replace(/\{z\}/g,u.toString()).replace(/\{bbox\}/g,cr(r,o,u).join(",")).replace(/\{-y\}/g,(Math.pow(2,u)-o-1).toString())}function Ea(e,n){var r=n.x,o=n.y,u=n.z,c=n.layer,p=n.version,g=p===void 0?"1.0.0":p,y=n.style,S=y===void 0?"default":y,P=n.format,L=n.service,Z=L===void 0?"WMTS":L,q=n.tileMatrixset,ce=Ha(e),me=Math.abs(r+o)%ce.length,be="".concat(ce[me],"&SERVICE=").concat(Z,"&REQUEST=GetTile&VERSION=").concat(g,"&LAYER=").concat(c,"&STYLE=").concat(S,"&TILEMATRIXSET=").concat(q,"&FORMAT=").concat(P,"&TILECOL=").concat(r,"&TILEROW=").concat(o,"&TILEMATRIX=").concat(u);return be}function Pa(e,n){if(!e)throw new Error(n||"web worker helper assertion failed.")}var la={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},ga=la.self||la.window||{},Tu=la.window||la.self||{},Vs=la.self||la.window||{},$u=la.document||{},zu=typeof importScripts=="function",es=typeof window!="undefined"&&typeof window.orientation!="undefined",ws=function(){function e(n,r){var o=this;this.name=n,this.workerThread=r,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(u,c){o.resolve=u,o.reject=c})}return e.prototype.postMessage=function(n,r){this.workerThread.postMessage({source:"Main thread",type:n,payload:r})},e.prototype.done=function(n){Pa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(n)},e.prototype.error=function(n){Pa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(n)},e}(),Xu=ws,Js=new Map;function Jc(e){Pa(e.source&&!e.url||!e.source&&e.url);var n=Js.get(e.source||e.url);return n||(e.url&&(n=Sl(e.url),Js.set(e.url,n)),e.source&&(n=oc(e.source),Js.set(e.source,n))),Pa(n),n}function Sl(e){if(!e.startsWith("http"))return e;var n=Zl(e);return oc(n)}function oc(e){var n=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(n)}function Zl(e){return`try {
  importScripts('`+e+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function yf(e,n,r){n===void 0&&(n=!0);var o=r||new Set;if(e){if(zf(e))o.add(e);else if(zf(e.buffer))o.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(n&&typeof e=="object")for(var u in e)yf(e[u],n,o)}}return r===void 0?Array.from(o):[]}function zf(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}var _c=function(){},Uf=function(){function e(n){this.terminated=!1,this.loadableURL="";var r=n.name,o=n.source,u=n.url;Pa(o||u),this.name=r,this.source=o,this.url=u,this.onMessage=_c,this.onError=function(c){return console.log(c)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return typeof Worker!="undefined"},e.prototype.destroy=function(){this.onMessage=_c,this.onError=_c,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return!!this.onMessage},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(n,r){r=r||yf(n),this.worker.postMessage(n,r)},e.prototype.getErrorFromErrorEvent=function(n){var r="Failed to load ";return r+="worker "+this.name+" from "+this.url+". ",n.message&&(r+=n.message+" in "),n.lineno&&(r+=":"+n.lineno+":"+n.colno),new Error(r)},e.prototype.createBrowserWorker=function(){var n=this;this.loadableURL=Jc({source:this.source,url:this.url});var r=new Worker(this.loadableURL,{name:this.name});return r.onmessage=function(o){o.data?n.onMessage(o.data):n.onError(new Error("No data received"))},r.onerror=function(o){n.onError(n.getErrorFromErrorEvent(o)),n.terminated=!0},r.onmessageerror=function(o){return console.error("worker "+n.name+", message error: "+o)},r},e}(),ef=Uf,Vl=function(){return Vl=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},Vl.apply(this,arguments)},_f=function(e,n,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(P){try{S(o.next(P))}catch(L){p(L)}}function y(P){try{S(o.throw(P))}catch(L){p(L)}}function S(P){P.done?c(P.value):u(P.value).then(g,y)}S((o=o.apply(e,n||[])).next())})},Au=function(e,n){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(P){return y([S,P])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=n.call(e,r)}catch(P){S=[6,P],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Ps=function(){function e(n){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=n.source,this.url=n.url,this.setProps(n)}return e.prototype.destroy=function(){this.idleQueue.forEach(function(n){return n.destroy()}),this.isDestroyed=!0},e.prototype.setProps=function(n){this.props=Vl(Vl({},this.props),n),n.name!==void 0&&(this.name=n.name),n.maxConcurrency!==void 0&&(this.maxConcurrency=n.maxConcurrency),n.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=n.maxMobileConcurrency),n.reuseWorkers!==void 0&&(this.reuseWorkers=n.reuseWorkers),n.onDebug!==void 0&&(this.onDebug=n.onDebug)},e.prototype.startJob=function(n,r,o){return r===void 0&&(r=function(u,c,p){return u.done(p)}),o===void 0&&(o=function(u,c){return u.error(c)}),_f(this,void 0,void 0,function(){var u,c=this;return Au(this,function(p){switch(p.label){case 0:return u=new Promise(function(g){return c.jobQueue.push({name:n,onMessage:r,onError:o,onStart:g}),c}),this.startQueuedJob(),[4,u];case 1:return[2,p.sent()]}})})},e.prototype.startQueuedJob=function(){return _f(this,void 0,void 0,function(){var n,r,o;return Au(this,function(u){switch(u.label){case 0:if(!this.jobQueue.length)return[2];if(n=this.getAvailableWorker(),!n)return[2];if(r=this.jobQueue.shift(),!r)return[3,4];this.onDebug({message:"Starting job",name:r.name,backlog:this.jobQueue.length,workerThread:n}),o=new Xu(r.name,n),n.onMessage=function(c){return r.onMessage(o,c.type,c.payload)},n.onError=function(c){return r.onError(o,c)},r.onStart(o),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,o.result];case 2:return u.sent(),[3,4];case 3:return this.returnWorkerToQueue(n),[7];case 4:return[2]}})})},e.prototype.returnWorkerToQueue=function(n){var r=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();r?(n.destroy(),this.count--):this.idleQueue.push(n),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var n=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new ef({name:n,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return es?this.maxMobileConcurrency:this.maxConcurrency},e}(),Yu=Ps,qu=function(){return qu=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},qu.apply(this,arguments)},jl=function(e){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&e[n],o=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},vo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Ku=function(){function e(n){this.workerPools=new Map,this.props=qu({},vo),this.setProps(n),this.workerPools=new Map}return e.isSupported=function(){return ef.isSupported()},e.getWorkerFarm=function(n){return n===void 0&&(n={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(n),e.workerFarm},e.prototype.destroy=function(){var n,r;try{for(var o=jl(this.workerPools.values()),u=o.next();!u.done;u=o.next()){var c=u.value;c.destroy()}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.setProps=function(n){var r,o;this.props=qu(qu({},this.props),n);try{for(var u=jl(this.workerPools.values()),c=u.next();!c.done;c=u.next()){var p=c.value;p.setProps(this.getWorkerPoolProps())}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.getWorkerPool=function(n){var r=n.name,o=n.source,u=n.url,c=this.workerPools.get(r);return c||(c=new Yu({name:r,source:o,url:u}),c.setProps(this.getWorkerPoolProps()),this.workerPools.set(r,c)),c},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),Mu=null,xc=new Map,nd=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(n){self.onmessage=function(r){if(id(r)){var o=r.data,u=o.type,c=o.payload;n(u,c)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(n){var r=xc.get(n);r||(r=function(o){if(id(o)){var u=o.data,c=u.type,p=u.payload;n(c,p)}}),self.addEventListener("message",r)},e.removeEventListener=function(n){var r=xc.get(n);xc.delete(n),self.removeEventListener("message",r)},e.postMessage=function(n,r){if(self){var o={source:"Worker thread",type:n,payload:r},u=yf(r);self.postMessage(o,u)}},e}(),dh=null;function id(e){var n=e.type,r=e.data;return n==="message"&&r&&typeof r.source=="string"&&r.source==="Main thread"}function Hl(e){return JSON.parse(Pl(e))}function Pl(e){var n=new Set;return JSON.stringify(e,function(r,o){if(typeof o=="object"&&o!==null){if(n.has(o))try{return JSON.parse(JSON.stringify(o))}catch(u){return}n.add(o)}return o})}function Wl(e){return""+e.name}function Zh(e,n){n===void 0&&(n={});var r=n[e.id]||{},o=e.name+".worker.js",u=r.workerUrl;return n._workerType==="test"&&(u=e.module+"/dist/"+o),u||(u="https://unpkg.com/"+e.module+"/dist/"+o),assert(u),u}var wp=function(e,n,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(P){try{S(o.next(P))}catch(L){p(L)}}function y(P){try{S(o.throw(P))}catch(L){p(L)}}function S(P){P.done?c(P.value):u(P.value).then(g,y)}S((o=o.apply(e,n||[])).next())})},tf=function(e,n){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(P){return y([S,P])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=n.call(e,r)}catch(P){S=[6,P],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};function kl(e,n){return WorkerFarm.isSupported()?e.worker&&(n==null?void 0:n.worker):!1}function vg(e,n,r,o){return r===void 0&&(r={}),o===void 0&&(o={}),wp(this,void 0,void 0,function(){var u,c,p,g,y,S,P,L;return tf(this,function(Z){switch(Z.label){case 0:return u=getWorkerName(e),c=getWorkerURL(e,r),p=WorkerFarm.getWorkerFarm(r),g=p.getWorkerPool({name:u,url:c}),y=r.jobName||e.name,[4,g.startJob(y,wv.bind(null,o))];case 1:return S=Z.sent(),P=removeNontransferableOptions(r),S.postMessage("process",{input:n,options:P}),[4,S.result];case 2:return L=Z.sent(),[2,L.result]}})})}function wv(e,n,r,o){return wp(this,void 0,void 0,function(){var u,c,p,g,y,S,P;return tf(this,function(L){switch(L.label){case 0:switch(u=r,u){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return n.done(o),[3,9];case 2:return n.error(new Error(o.error)),[3,9];case 3:c=o.id,p=o.input,g=o.options,L.label=4;case 4:return L.trys.push([4,6,,7]),e.process?[4,e.process(p,g)]:(n.postMessage("error",{id:c,error:"Worker not set up to process on main thread"}),[2]);case 5:return y=L.sent(),n.postMessage("done",{id:c,result:y}),[3,7];case 6:return S=L.sent(),P=S instanceof Error?S.message:"unknown error",n.postMessage("error",{id:c,error:P}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+r),L.label=9;case 9:return[2]}})})}var bc=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(n){return this.enqueue(n)},e.prototype.enqueue=function(n){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.shift();n instanceof Error?r.reject(n):r.resolve({value:n})}else this._values.push(n)},e.prototype.close=function(){for(;this._settlers.length>0;){var n=this._settlers.shift();n.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var n=this;if(this._values.length>0){var r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(o,u){n._settlers.push({resolve:o,reject:u})})},e}(),g_=null,b0=function(e,n,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(P){try{S(o.next(P))}catch(L){p(L)}}function y(P){try{S(o.throw(P))}catch(L){p(L)}}function S(P){P.done?c(P.value):u(P.value).then(g,y)}S((o=o.apply(e,n||[])).next())})},S0=function(e,n){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(P){return y([S,P])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=n.call(e,r)}catch(P){S=[6,P],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Cv=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],r;return n?n.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(c){r[c]=e[c]&&function(p){return new Promise(function(g,y){p=e[c](p),u(g,y,p.done,p.value)})}}function u(c,p,g,y){Promise.resolve(y).then(function(S){c({value:S,done:g})},p)}},E0=0,Cp,gg;function Tp(e,n){var r=this;if(typeof self!="undefined"){var o={process:jd};WorkerBody.onmessage=function(u,c){return b0(r,void 0,void 0,function(){var p,g,y,S,P,L,Z,q,ce,me,be;return S0(this,function($e){switch($e.label){case 0:switch($e.trys.push([0,19,,20]),p=u,p){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(c.input,c.options||{},o)];case 2:return g=$e.sent(),WorkerBody.postMessage("done",{result:g}),[3,18];case 3:if(!n)throw new Error("Worker does not support batched processing");Cp=new AsyncQueue,gg=c.options||{},y=n(Cp,gg,o),$e.label=4;case 4:$e.trys.push([4,9,10,15]),S=Cv(y),$e.label=5;case 5:return[4,S.next()];case 6:if(P=$e.sent(),!!P.done)return[3,8];L=P.value,WorkerBody.postMessage("output-batch",{result:L}),$e.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return Z=$e.sent(),me={error:Z},[3,15];case 10:return $e.trys.push([10,,13,14]),P&&!P.done&&(be=S.return)?[4,be.call(S)]:[3,12];case 11:$e.sent(),$e.label=12;case 12:return[3,14];case 13:if(me)throw me.error;return[7];case 14:return[7];case 15:return WorkerBody.postMessage("done",{}),[3,18];case 16:return Cp.push(c.input),[3,18];case 17:return Cp.close(),[3,18];case 18:return[3,20];case 19:return q=$e.sent(),ce=q instanceof Error?q.message:"",WorkerBody.postMessage("error",{error:ce}),[3,20];case 20:return[2]}})})}}}function jd(e,n){return n===void 0&&(n={}),new Promise(function(r,o){var u=E0++,c=function(g,y){if(y.id===u)switch(g){case"done":WorkerBody.removeEventListener(c),r(y.result);break;case"error":WorkerBody.removeEventListener(c),o(y.error);break;default:}};WorkerBody.addEventListener(c);var p={id:u,input:e,options:n};WorkerBody.postMessage("process",p)})}var dm=function(e,n,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(P){try{S(o.next(P))}catch(L){p(L)}}function y(P){try{S(o.throw(P))}catch(L){p(L)}}function S(P){P.done?c(P.value):u(P.value).then(g,y)}S((o=o.apply(e,n||[])).next())})},Ap=function(e,n){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(P){return y([S,P])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=n.call(e,r)}catch(P){S=[6,P],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},mg={};function w0(e,n,r){return n===void 0&&(n=null),r===void 0&&(r={}),dm(this,void 0,void 0,function(){return Ap(this,function(o){switch(o.label){case 0:return n&&(e=C0(e,n,r)),mg[e]=mg[e]||yg(e),[4,mg[e]];case 1:return[2,o.sent()]}})})}function C0(e,n,r){if(e.startsWith("http"))return e;var o=r.modules||{};return o[e]?o[e]:r.CDN?(assert(r.CDN.startsWith("http")),r.CDN+"/"+n+"/dist/libs/"+e):isWorker?"../src/libs/"+e:"modules/"+n+"/src/libs/"+e}function yg(e){return dm(this,void 0,void 0,function(){var n,r,o;return Ap(this,function(u){switch(u.label){case 0:return e.endsWith("wasm")?[4,fetch(e)]:[3,3];case 1:return n=u.sent(),[4,n.arrayBuffer()];case 2:return[2,u.sent()];case 3:return isWorker?[2,importScripts(e)]:[4,fetch(e)];case 4:return r=u.sent(),[4,r.text()];case 5:return o=u.sent(),[2,Tv(o,e)]}})})}function Tv(e,n){if(isWorker)return eval.call(global,e),null;var r=document.createElement("script");r.id=n;try{r.appendChild(document.createTextNode(e))}catch(o){r.text=e}return document.body.appendChild(r),null}var Hd="0.0.3",_g={id:"null",name:"null",module:"web-worker-helper",options:{}};function vh(e){var n=e.color;return!n||!n.length?[1,1,1,1]:n}function Mp(e,n,r){return r.length===2?[r[0],r[1],0]:[r[0],r[1],r[2]]}function Cs(e){var n=e.filter;return n?[1]:[0]}function Vh(e,n){return[n]}var Av=k(9187),Gl=k.n(Av),Jn=k(31437),xf=Jn.Ue(),Wd=Jn.Ue(),eu=Jn.Ue(),$l=Jn.Ue(),bf=Jn.Ue();function Sc(e,n,r,o,u){Jn.IH(e,r,o),Jn.Fv(e,e),n=Jn.al(-e[1],e[0]);var c=Jn.al(-r[1],r[0]);return[u/Jn.AK(n,c),n]}function gh(e,n){return Jn.t8(e,-n[1],n[0])}function Xl(e,n,r){return Jn.lu(e,n,r),Jn.Fv(e,e),e}function mh(e,n){return e[0]===n[0]&&e[1]===n[1]}function xg(e){for(var n=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();n.get(o)?(e.splice(r,1),r++):n.set(o,o)}return e}var bg=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,It.Z)(this,e),(0,Ve.Z)(this,"lastFlip",-1),(0,Ve.Z)(this,"miter",Jn.al(0,0)),(0,Ve.Z)(this,"started",!1),(0,Ve.Z)(this,"dash",!1),(0,Ve.Z)(this,"totalDistance",0),(0,Ve.Z)(this,"currentIndex",0),this.join=n.join||"miter",this.cap=n.cap||"butt",this.miterLimit=n.miterLimit||10,this.thickness=n.thickness||1,this.dash=n.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,ct.Z)(e,[{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,P,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var Z=o[g-1],q=r[g];q.push((S=o[g][2])!==null&&S!==void 0?S:0);var ce=o[g],me=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(P=o[g+1][2])!==null&&P!==void 0?P:0]):null,be=g<o.length-1?o[g+1]:null,$e=this.segment_gaode2(u,p,L,q,me,Z,ce,be);p+=$e}if(this.dash)for(var ft=0;ft<u.positions.length/6;ft++)u.positions[ft*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,P,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var Z=o[g-1],q=r[g];q.push((S=o[g][2])!==null&&S!==void 0?S:0);var ce=o[g],me=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(P=o[g+1][2])!==null&&P!==void 0?P:0]):null,be=g<o.length-1?o[g+1]:null,$e=this.simpleSegment(u,p,L,q,me,Z,ce,be);p+=$e}if(this.dash)for(var ft=0;ft<u.positions.length/6;ft++)u.positions[ft*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,P=this.segment(o,c,g,y,S);c+=P}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,P=this.simpleSegment(o,c,g,y,S);c+=P}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var P=0,L=r.indices,Z=r.positions,q=r.normals,ce=this.cap==="square",me=this.join==="bevel",be=Qn([y[0],y[1]]),$e=Qn([g[0],g[1]]);Xl(eu,c,u);var ft=0;if(this.dash&&(ft=this.lineSegmentDistance(be,$e),this.totalDistance+=ft),this.normal||(this.normal=Jn.Ue(),gh(this.normal,eu)),!this.started)if(this.started=!0,ce){var mt=Jn.Ue(),zt=Jn.Ue();Jn.IH(mt,this.normal,eu),Jn.IH(zt,this.normal,eu),q.push(zt[0],zt[1],0),q.push(mt[0],mt[1],0),Z.push(u[0],u[1],u[2]|0,this.totalDistance-ft,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(u[0],u[1],u[2]|0,this.totalDistance-ft,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Z,q,u,this.normal,this.thickness,this.totalDistance-ft);if(L.push(o+0,o+1,o+2),p){mh(c,p)&&Jn.IH(p,c,Jn.Fv(p,Jn.$X(p,c,u))),Xl($l,p,c);var Yt=Sc(bf,Jn.Ue(),eu,$l,this.thickness),Cr=(0,ji.Z)(Yt,2),Nr=Cr[0],nn=Cr[1],an=Jn.AK(bf,this.normal)<0?-1:1,Nn=me;if(!Nn&&this.join==="miter"){var jn=Nr;jn>this.miterLimit&&(Nn=!0)}Nn?(q.push(this.normal[0],this.normal[1],0),q.push(nn[0],nn[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L.push.apply(L,(0,Rn.Z)(this.lastFlip!==-an?[o,o+2,o+3]:[o+2,o+1,o+3])),L.push(o+2,o+3,o+4),gh(xf,$l),Jn.JG(this.normal,xf),q.push(this.normal[0],this.normal[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,P+=3):(this.extrusions(Z,q,c,nn,Nr,this.totalDistance),L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),an=-1,Jn.JG(this.normal,nn),P+=2),this.lastFlip=an}else{if(gh(this.normal,eu),ce){var ar=Jn.Ue(),nr=Jn.Ue();Jn.lu(nr,eu,this.normal),Jn.IH(ar,eu,this.normal),q.push(nr[0],nr[1],0),q.push(ar[0],ar[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Z,q,c,this.normal,this.thickness,this.totalDistance);L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),P+=2}return P}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,P=r.normals,L=Qn([c[0],c[1]]),Z=Qn([u[0],u[1]]);Xl(eu,L,Z);var q=0;if(this.dash&&(q=this.lineSegmentDistance(L,Z),this.totalDistance+=q),this.normal||(this.normal=Jn.Ue(),gh(this.normal,eu)),this.started||(this.started=!0,this.extrusions(S,P,u,this.normal,this.thickness,this.totalDistance-q)),y.push(o+0,o+1,o+2),!p)gh(this.normal,eu),this.extrusions(S,P,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ce=Qn([p[0],p[1]]);mh(L,ce)&&Jn.IH(ce,L,Jn.Fv(ce,Jn.$X(ce,L,Z))),Xl($l,ce,L);var me=Sc(bf,Jn.Ue(),eu,$l,this.thickness),be=(0,ji.Z)(me,2),$e=be[0],ft=be[1],mt=Jn.AK(bf,this.normal)<0?-1:1;this.extrusions(S,P,c,ft,$e,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),mt=-1,Jn.JG(this.normal,ft),g+=2,this.lastFlip=mt}return g}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,P=r.normals,L=this.cap==="square",Z=this.join==="bevel",q=Qn([c[0],c[1]]),ce=Qn([u[0],u[1]]);Xl(eu,q,ce);var me=0;if(this.dash&&(me=this.lineSegmentDistance(q,ce),this.totalDistance+=me),this.normal||(this.normal=Jn.Ue(),gh(this.normal,eu)),!this.started)if(this.started=!0,L){var be=Jn.Ue(),$e=Jn.Ue();Jn.IH(be,this.normal,eu),Jn.IH($e,this.normal,eu),P.push($e[0],$e[1],0),P.push(be[0],be[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-me,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-me,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,P,u,this.normal,this.thickness,this.totalDistance-me);if(y.push(o+0,o+1,o+2),p){var zt=Qn([p[0],p[1]]);mh(q,zt)&&Jn.IH(zt,q,Jn.Fv(zt,Jn.$X(zt,q,ce))),Xl($l,zt,q);var ar=Sc(bf,Jn.Ue(),eu,$l,this.thickness),nr=(0,ji.Z)(ar,2),Yt=nr[0],Cr=nr[1],Nr=Jn.AK(bf,this.normal)<0?-1:1,nn=Z;if(!nn&&this.join==="miter"){var an=Yt;an>this.miterLimit&&(nn=!0)}nn?(P.push(this.normal[0],this.normal[1],0),P.push(Cr[0],Cr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Rn.Z)(this.lastFlip!==-Nr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),gh(xf,$l),Jn.JG(this.normal,xf),P.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,P,c,Cr,Yt,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Nr=-1,Jn.JG(this.normal,Cr),g+=2),this.lastFlip=Nr}else{if(gh(this.normal,eu),L){var ft=Jn.Ue(),mt=Jn.Ue();Jn.lu(mt,eu,this.normal),Jn.IH(ft,eu,this.normal),P.push(mt[0],mt[1],0),P.push(ft[0],ft[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,P,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}();function Gd(e){var n=e.coordinates,r=e.originCoordinates,o=e.version,u=new bg({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=n;Array.isArray(c[0][0])||(c=[n]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var P=n;P[0]&&!Array.isArray(P[0][0])&&(P=[n]),P.forEach(function(Z){u.extrude(Z)})}var L=u.complex;return{vertices:L.positions,indices:L.indices,normals:L.normals,indexes:L.indexes,size:6}}function ad(e){var n=Ca(e.coordinates);return{vertices:[].concat((0,Rn.Z)(n),(0,Rn.Z)(n),(0,Rn.Z)(n),(0,Rn.Z)(n)),indices:[0,1,2,2,3,0],size:n.length}}function Bc(e){var n=e.coordinates,r=Gl().flatten(n),o=r.vertices,u=r.dimensions,c=r.holes,p=Gl()(o,c,u);return{indices:p,vertices:o,size:u}}var jh=function(){var e=(0,pn.Z)(Jt().mark(function n(r){var o,u,c,p,g,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.iconMap,g={a_Color:vh,a_Position:Mp,filter:Cs,a_vertexId:Vh,a_PickingColor:function(me){var be=me.id;return c?Ms(be):[0,0,0]},a_DistanceAndIndex:function(me,be,$e,ft,mt,zt){return zt===void 0?[$e[3],10]:[$e[3],zt]},a_Total_Distance:function(me,be,$e){return[$e[5]]},a_Size:function(me){var be=me.size,$e=be===void 0?1:be;return Array.isArray($e)?[$e[0],$e[1]]:[$e,0]},a_Normal:function(me,be,$e,ft,mt){return mt},a_Miter:function(me,be,$e){return[$e[4]]},a_iconMapUV:function(me){var be=me.texture,$e=p[be]||{x:0,y:0},ft=$e.x,mt=$e.y;return[ft,mt]}},y={sizePerElement:0,elements:[]},S=0,P=[],L=3,u.forEach(function(ce,me){var be=Gd(ce),$e=be.indices,ft=be.vertices,mt=be.normals,zt=be.size,ar=be.indexes;$e.forEach(function(Nr){P.push(Nr+S)}),L=zt;var nr=ft.length/zt;y.sizePerElement=L,y.elements.push({featureIdx:me,vertices:ft,normals:mt,offset:S}),S+=nr;for(var Yt=function(nn){var an=(mt==null?void 0:mt.slice(nn*3,nn*3+3))||[],Nn=ft.slice(nn*zt,nn*zt+zt),jn=0;ar&&ar[nn]!==void 0&&(jn=ar[nn]),o.forEach(function(di){if(di&&g[di.name]){var Ua;(Ua=di.buffer.data).push.apply(Ua,(0,Rn.Z)(g[di.name](ce,me,Nn,nn,an,jn)))}})},Cr=0;Cr<nr;Cr++)Yt(Cr)}),q.abrupt("return",{descriptors:o,featureLayout:y,indices:P});case 8:case"end":return q.stop()}},n)}));return function(r){return e.apply(this,arguments)}}(),$d=function(){var e=(0,pn.Z)(Jt().mark(function n(r){var o,u,c,p,g,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.shape2d,g={a_Color:vh,a_Position:Mp,filter:Cs,a_vertexId:Vh,a_PickingColor:function(me){var be=me.id;return c?Ms(be):[0,0,0]},a_Shape:function(me){var be=me.shape,$e=be===void 0?2:be,ft=p.indexOf($e);return[ft]},a_Extrude:function(me,be,$e,ft){var mt=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],zt=ft%4*3;return[mt[zt],mt[zt+1],mt[zt+2]]},a_Size:function(me){var be=me.size,$e=be===void 0?5:be;return Array.isArray($e)?[$e[0]]:[$e]}},y={sizePerElement:0,elements:[]},S=0,P=[],L=3,u.forEach(function(ce,me){var be=ad(ce),$e=be.indices,ft=be.vertices,mt=be.normals,zt=be.size,ar=be.indexes;$e.forEach(function(Nr){P.push(Nr+S)}),L=zt;var nr=ft.length/zt;y.sizePerElement=L,y.elements.push({featureIdx:me,vertices:ft,normals:mt,offset:S}),S+=nr;for(var Yt=function(nn){var an=(mt==null?void 0:mt.slice(nn*3,nn*3+3))||[],Nn=ft.slice(nn*zt,nn*zt+zt),jn=0;ar&&ar[nn]!==void 0&&(jn=ar[nn]),o.forEach(function(di){if(di&&g[di.name]){var Ua;(Ua=di.buffer.data).push.apply(Ua,(0,Rn.Z)(g[di.name](ce,me,Nn,nn,an,jn)))}})},Cr=0;Cr<nr;Cr++)Yt(Cr)}),q.abrupt("return",{descriptors:o,featureLayout:y,indices:P});case 8:case"end":return q.stop()}},n)}));return function(r){return e.apply(this,arguments)}}(),vm=function(){var e=(0,pn.Z)(Jt().mark(function n(r){var o,u,c,p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p={a_Color:vh,a_Position:Mp,filter:Cs,a_vertexId:Vh,a_PickingColor:function(ce){var me=ce.id;return c?Ms(me):[0,0,0]}},g={sizePerElement:0,elements:[]},y=0,S=[],P=3,u.forEach(function(q,ce){var me=Bc(q),be=me.indices,$e=me.vertices,ft=me.normals,mt=me.size,zt=me.indexes;be.forEach(function(Cr){S.push(Cr+y)}),P=mt;var ar=$e.length/mt;g.sizePerElement=P,g.elements.push({featureIdx:ce,vertices:$e,normals:ft,offset:y}),y+=ar;for(var nr=function(Nr){var nn=(ft==null?void 0:ft.slice(Nr*3,Nr*3+3))||[],an=$e.slice(Nr*mt,Nr*mt+mt),Nn=0;zt&&zt[Nr]!==void 0&&(Nn=zt[Nr]),o.forEach(function(jn){if(jn&&p[jn.name]){var di;(di=jn.buffer.data).push.apply(di,(0,Rn.Z)(p[jn.name](q,ce,an,Nr,nn,Nn)))}})},Yt=0;Yt<ar;Yt++)nr(Yt)}),Z.abrupt("return",{descriptors:o,featureLayout:g,indices:S});case 8:case"end":return Z.stop()}},n)}));return function(r){return e.apply(this,arguments)}}(),Sg={pointFill:$d,line:jh,polygonFill:vm},Mv=(0,ae.Z)({},Sg);function js(e){return Zf.apply(this,arguments)}function Zf(){return Zf=_asyncToGenerator(_regeneratorRuntime.mark(function e(n){var r,o;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=n.workerType,o=n.data,!Mv[r]){c.next=3;break}return c.abrupt("return",Mv[r](o));case 3:return c.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(r,'" non-existent.'))));case 4:case"end":return c.stop()}},e)})),Zf.apply(this,arguments)}var rf=new Map;function od(e,n){rf.set(e,n)}function sd(e){var n=rf.get(e);return n}var Nc="l7-worker",Rp=3,Hh=!0;function Yl(e){registerWorkerSource(Nc,e)}function Sf(){var e=getWorkerSource(Nc);if(!e)throw new Error("get worker failed by workerName: ".concat(Nc,"."));return e}function ls(e,n){return cl.apply(this,arguments)}function cl(){return cl=_asyncToGenerator(_regeneratorRuntime.mark(function e(n,r){var o,u,c,p,g;return _regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o=Sf(),u=WorkerFarm.getWorkerFarm({maxConcurrency:Rp,reuseWorkers:Hh}),c=u.getWorkerPool({name:Nc,source:o}),S.next=5,c.startJob(Nc,function(P,L,Z){return P.done(Z)});case 5:return p=S.sent,p.postMessage("process",{input:{workerType:n,data:r}}),S.next=9,p.result;case 9:return g=S.sent,S.abrupt("return",g.result);case 11:case"end":return S.stop()}},e)})),cl.apply(this,arguments)}function Xs(e,n){return e==null?n:e}var El=k(38163),gm=k.n(El);function Wh(e,n){return e.map(function(r){return r[n]*1})}function mm(e){return e===void 0?!1:!Array.isArray(e)&&e.data!==void 0}function Xd(e){return Array.isArray(e)?e.length===0?!1:!!mm(e[0]):!1}function Rv(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function Iv(e){var n=Object.isFrozen(e)?Aa.cloneDeep(e):e;return gm()(n,!0),n}function ym(e,n){var r=n.x,o=n.y,u=n.x1,c=n.y1,p=n.coordinates,g=n.geometry,y=[];if(!Array.isArray(e))return{dataArray:[]};if(g)return e.filter(function($e){return $e[g]&&$e[g].type&&$e[g].coordinates&&$e[g].coordinates.length>0}).forEach(function($e,ft){var mt=Iv($e[g]);ge(mt,function(zt){var ar=Tt(zt),nr=(0,ae.Z)((0,ae.Z)({},$e),{},{_id:ft,coordinates:ar});y.push(nr)})}),{dataArray:y};for(var S=0;S<e.length;S++){var P=e[S],L=[];if(p){var Z="Polygon";Array.isArray(p[0])||(Z="Point"),Array.isArray(p[0])&&!Array.isArray(p[0][0])&&(Z="LineString");var q=Iv({type:Z,coordinates:P[p]});L=q.coordinates}else if(r&&o&&u&&c){var ce=[parseFloat(P[r]),parseFloat(P[o])],me=[parseFloat(P[u]),parseFloat(P[c])];L=[ce,me]}else r&&o&&(L=[parseFloat(P[r]),parseFloat(P[o])]);var be=(0,ae.Z)((0,ae.Z)({},P),{},{_id:S,coordinates:L});y.push(be)}return{dataArray:y}}function _m(e,n){var r=we(e);return ym(r,n)}function wl(e){for(var n=e.toString(),r=5381,o=n.length;o;)r=r*33^n.charCodeAt(--o);return r>>>0}function T0(e,n){return n===void 0?null:typeof(e.properties[n]*1)=="number"?e.properties[n]*1:e.properties&&e.properties[n]?wl(e.properties[n]+"")%1000019:null}function xm(e,n){var r=[],o={};return e.features?(e.features=e.features.filter(function(u){var c=u.geometry;return u!=null&&c&&c.type&&c.coordinates&&c.coordinates.length>0}),e=Iv(e),e.features.length===0?{dataArray:[],featureKeys:o}:(ge(e,function(u,c){var p=T0(u,n==null?void 0:n.featureId);p===null&&(p=c);var g=p,y=Tt(u),S=(0,ae.Z)((0,ae.Z)({},u.properties),{},{coordinates:y,_id:g});r.push(S)}),{dataArray:r,featureKeys:o})):(e.features=[],{dataArray:[]})}function yh(e,n,r,o){for(var u=o,c=r-n>>1,p=r-n,g,y=e[n],S=e[n+1],P=e[r],L=e[r+1],Z=n+3;Z<r;Z+=3){var q=Eg(e[Z],e[Z+1],y,S,P,L);if(q>u)g=Z,u=q;else if(q===u){var ce=Math.abs(Z-c);ce<p&&(g=Z,p=ce)}}u>o&&(g-n>3&&yh(e,n,g,o),e[g+2]=u,r-g>3&&yh(e,g,r,o))}function Eg(e,n,r,o,u,c){var p=u-r,g=c-o;if(p!==0||g!==0){var y=((e-r)*p+(n-o)*g)/(p*p+g*g);y>1?(r=u,o=c):y>0&&(r+=p*y,o+=g*y)}return p=e-r,g=n-o,p*p+g*g}function Ip(e,n,r,o){var u={id:typeof e=="undefined"?null:e,type:n,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return A0(u),u}function A0(e){var n=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")wg(e,n);else if(r==="Polygon"||r==="MultiLineString")for(var o=0;o<n.length;o++)wg(e,n[o]);else if(r==="MultiPolygon")for(o=0;o<n.length;o++)for(var u=0;u<n[o].length;u++)wg(e,n[o][u])}function wg(e,n){for(var r=0;r<n.length;r+=3)e.minX=Math.min(e.minX,n[r]),e.minY=Math.min(e.minY,n[r+1]),e.maxX=Math.max(e.maxX,n[r]),e.maxY=Math.max(e.maxY,n[r+1])}function Yd(e,n){var r=[];if(e.type==="FeatureCollection")for(var o=0;o<e.features.length;o++)Ov(r,e.features[o],n,o);else e.type==="Feature"?Ov(r,e,n):Ov(r,{geometry:e},n);return r}function Ov(e,n,r,o){if(n.geometry){var u=n.geometry.coordinates,c=n.geometry.type,p=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),g=[],y=n.id;if(r.promoteId?y=n.properties[r.promoteId]:r.generateId&&(y=o||0),c==="Point")ot(u,g);else if(c==="MultiPoint")for(var S=0;S<u.length;S++)ot(u[S],g);else if(c==="LineString")tr(u,g,p,!1);else if(c==="MultiLineString")if(r.lineMetrics){for(S=0;S<u.length;S++)g=[],tr(u[S],g,p,!1),e.push(Ip(y,"LineString",g,n.properties));return}else Ar(u,g,p,!1);else if(c==="Polygon")Ar(u,g,p,!0);else if(c==="MultiPolygon")for(S=0;S<u.length;S++){var P=[];Ar(u[S],P,p,!0),g.push(P)}else if(c==="GeometryCollection"){for(S=0;S<n.geometry.geometries.length;S++)Ov(e,{id:y,geometry:n.geometry.geometries[S],properties:n.properties},r,o);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(Ip(y,c,g,n.properties))}}function ot(e,n){n.push(vn(e[0])),n.push(kn(e[1])),n.push(0)}function tr(e,n,r,o){for(var u,c,p=0,g=0;g<e.length;g++){var y=vn(e[g][0]),S=kn(e[g][1]);n.push(y),n.push(S),n.push(0),g>0&&(o?p+=(u*S-y*c)/2:p+=Math.sqrt(Math.pow(y-u,2)+Math.pow(S-c,2))),u=y,c=S}var P=n.length-3;n[2]=1,yh(n,0,P,r),n[P+2]=1,n.size=Math.abs(p),n.start=0,n.end=n.size}function Ar(e,n,r,o){for(var u=0;u<e.length;u++){var c=[];tr(e[u],c,r,o),n.push(c)}}function vn(e){return e/360+.5}function kn(e){var n=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return r<0?0:r>1?1:r}function fn(e,n,r,o,u,c,p,g){if(r/=n,o/=n,c>=r&&p<o)return e;if(p<r||c>=o)return null;for(var y=[],S=0;S<e.length;S++){var P=e[S],L=P.geometry,Z=P.type,q=u===0?P.minX:P.minY,ce=u===0?P.maxX:P.maxY;if(q>=r&&ce<o){y.push(P);continue}else if(ce<r||q>=o)continue;var me=[];if(Z==="Point"||Z==="MultiPoint")un(L,me,r,o,u);else if(Z==="LineString")ai(L,me,r,o,u,!1,g.lineMetrics);else if(Z==="MultiLineString")vi(L,me,r,o,u,!1);else if(Z==="Polygon")vi(L,me,r,o,u,!0);else if(Z==="MultiPolygon")for(var be=0;be<L.length;be++){var $e=[];vi(L[be],$e,r,o,u,!0),$e.length&&me.push($e)}if(me.length){if(g.lineMetrics&&Z==="LineString"){for(be=0;be<me.length;be++)y.push(Ip(P.id,Z,me[be],P.tags));continue}(Z==="LineString"||Z==="MultiLineString")&&(me.length===1?(Z="LineString",me=me[0]):Z="MultiLineString"),(Z==="Point"||Z==="MultiPoint")&&(Z=me.length===3?"Point":"MultiPoint"),y.push(Ip(P.id,Z,me,P.tags))}}return y.length?y:null}function un(e,n,r,o,u){for(var c=0;c<e.length;c+=3){var p=e[c+u];p>=r&&p<=o&&(n.push(e[c]),n.push(e[c+1]),n.push(e[c+2]))}}function ai(e,n,r,o,u,c,p){for(var g=Wn(e),y=u===0?fi:bi,S=e.start,P,L,Z=0;Z<e.length-3;Z+=3){var q=e[Z],ce=e[Z+1],me=e[Z+2],be=e[Z+3],$e=e[Z+4],ft=u===0?q:ce,mt=u===0?be:$e,zt=!1;p&&(P=Math.sqrt(Math.pow(q-be,2)+Math.pow(ce-$e,2))),ft<r?mt>r&&(L=y(g,q,ce,be,$e,r),p&&(g.start=S+P*L)):ft>o?mt<o&&(L=y(g,q,ce,be,$e,o),p&&(g.start=S+P*L)):oi(g,q,ce,me),mt<r&&ft>=r&&(L=y(g,q,ce,be,$e,r),zt=!0),mt>o&&ft<=o&&(L=y(g,q,ce,be,$e,o),zt=!0),!c&&zt&&(p&&(g.end=S+P*L),n.push(g),g=Wn(e)),p&&(S+=P)}var ar=e.length-3;q=e[ar],ce=e[ar+1],me=e[ar+2],ft=u===0?q:ce,ft>=r&&ft<=o&&oi(g,q,ce,me),ar=g.length-3,c&&ar>=3&&(g[ar]!==g[0]||g[ar+1]!==g[1])&&oi(g,g[0],g[1],g[2]),g.length&&n.push(g)}function Wn(e){var n=[];return n.size=e.size,n.start=e.start,n.end=e.end,n}function vi(e,n,r,o,u,c){for(var p=0;p<e.length;p++)ai(e[p],n,r,o,u,c,!1)}function oi(e,n,r,o){e.push(n),e.push(r),e.push(o)}function fi(e,n,r,o,u,c){var p=(c-n)/(o-n);return e.push(c),e.push(r+(u-r)*p),e.push(1),p}function bi(e,n,r,o,u,c){var p=(c-r)/(u-r);return e.push(n+(o-n)*p),e.push(c),e.push(1),p}function Mn(e,n){var r=n.buffer/n.extent,o=e,u=fn(e,1,-1-r,r,0,-1,2,n),c=fn(e,1,1-r,2+r,0,-1,2,n);return(u||c)&&(o=fn(e,1,-r,1+r,0,-1,2,n)||[],u&&(o=mi(u,1).concat(o)),c&&(o=o.concat(mi(c,-1)))),o}function mi(e,n){for(var r=[],o=0;o<e.length;o++){var u=e[o],c=u.type,p;if(c==="Point"||c==="MultiPoint"||c==="LineString")p=Qr(u.geometry,n);else if(c==="MultiLineString"||c==="Polygon"){p=[];for(var g=0;g<u.geometry.length;g++)p.push(Qr(u.geometry[g],n))}else if(c==="MultiPolygon")for(p=[],g=0;g<u.geometry.length;g++){for(var y=[],S=0;S<u.geometry[g].length;S++)y.push(Qr(u.geometry[g][S],n));p.push(y)}r.push(Ip(u.id,c,p,u.tags))}return r}function Qr(e,n){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+n,e[o+1],e[o+2]);return r}function En(e,n){if(e.transformed)return e;var r=1<<e.z,o=e.x,u=e.y,c,p,g;for(c=0;c<e.features.length;c++){var y=e.features[c],S=y.geometry,P=y.type;if(y.geometry=[],P===1)for(p=0;p<S.length;p+=2)y.geometry.push(si(S[p],S[p+1],n,r,o,u));else for(p=0;p<S.length;p++){var L=[];for(g=0;g<S[p].length;g+=2)L.push(si(S[p][g],S[p][g+1],n,r,o,u));y.geometry.push(L)}}return e.transformed=!0,e}function si(e,n,r,o,u,c){return[Math.round(r*(e*o-u)),Math.round(r*(n*o-c))]}function Ti(e,n,r,o,u){for(var c=n===u.maxZoom?0:u.tolerance/((1<<n)*u.extent),p={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},g=0;g<e.length;g++){p.numFeatures++,Kr(p,e[g],c,u);var y=e[g].minX,S=e[g].minY,P=e[g].maxX,L=e[g].maxY;y<p.minX&&(p.minX=y),S<p.minY&&(p.minY=S),P>p.maxX&&(p.maxX=P),L>p.maxY&&(p.maxY=L)}return p}function Kr(e,n,r,o){var u=n.geometry,c=n.type,p=[];if(c==="Point"||c==="MultiPoint")for(var g=0;g<u.length;g+=3)p.push(u[g]),p.push(u[g+1]),e.numPoints++,e.numSimplified++;else if(c==="LineString")Pi(p,u,e,r,!1,!1);else if(c==="MultiLineString"||c==="Polygon")for(g=0;g<u.length;g++)Pi(p,u[g],e,r,c==="Polygon",g===0);else if(c==="MultiPolygon")for(var y=0;y<u.length;y++){var S=u[y];for(g=0;g<S.length;g++)Pi(p,S[g],e,r,!0,g===0)}if(p.length){var P=n.tags||null;if(c==="LineString"&&o.lineMetrics){P={};for(var L in n.tags)P[L]=n.tags[L];P.mapbox_clip_start=u.start/u.size,P.mapbox_clip_end=u.end/u.size}var Z={geometry:p,type:c==="Polygon"||c==="MultiPolygon"?3:c==="LineString"||c==="MultiLineString"?2:1,tags:P};n.id!==null&&(Z.id=n.id),e.features.push(Z)}}function Pi(e,n,r,o,u,c){var p=o*o;if(o>0&&n.size<(u?p:o)){r.numPoints+=n.length/3;return}for(var g=[],y=0;y<n.length;y+=3)(o===0||n[y+2]>p)&&(r.numSimplified++,g.push(n[y]),g.push(n[y+1])),r.numPoints++;u&&ni(g,c),e.push(g)}function ni(e,n){for(var r=0,o=0,u=e.length,c=u-2;o<u;c=o,o+=2)r+=(e[o]-e[c])*(e[o+1]+e[c+1]);if(r>0===n)for(o=0,u=e.length;o<u/2;o+=2){var p=e[o],g=e[o+1];e[o]=e[u-2-o],e[o+1]=e[u-1-o],e[u-2-o]=p,e[u-1-o]=g}}function Mi(e,n){return new Un(e,n)}function Un(e,n){n=this.options=ca(Object.create(this.options),n);var r=n.debug;if(r&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=Yd(e,n);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=Mn(o,n),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Un.prototype.splitTile=function(e,n,r,o,u,c,p){for(var g=[e,n,r,o],y=this.options,S=y.debug;g.length;){o=g.pop(),r=g.pop(),n=g.pop(),e=g.pop();var P=1<<n,L=Si(n,r,o),Z=this.tiles[L];if(!Z&&(S>1&&console.time("creation"),Z=this.tiles[L]=Ti(e,n,r,o,y),this.tileCoords.push({z:n,x:r,y:o}),S)){S>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,r,o,Z.numFeatures,Z.numPoints,Z.numSimplified),console.timeEnd("creation"));var q="z"+n;this.stats[q]=(this.stats[q]||0)+1,this.total++}if(Z.source=e,u){if(n===y.maxZoom||n===u)continue;var ce=1<<u-n;if(r!==Math.floor(c/ce)||o!==Math.floor(p/ce))continue}else if(n===y.indexMaxZoom||Z.numPoints<=y.indexMaxPoints)continue;if(Z.source=null,e.length!==0){S>1&&console.time("clipping");var me=.5*y.buffer/y.extent,be=.5-me,$e=.5+me,ft=1+me,mt,zt,ar,nr,Yt,Cr;mt=zt=ar=nr=null,Yt=fn(e,P,r-me,r+$e,0,Z.minX,Z.maxX,y),Cr=fn(e,P,r+be,r+ft,0,Z.minX,Z.maxX,y),e=null,Yt&&(mt=fn(Yt,P,o-me,o+$e,1,Z.minY,Z.maxY,y),zt=fn(Yt,P,o+be,o+ft,1,Z.minY,Z.maxY,y),Yt=null),Cr&&(ar=fn(Cr,P,o-me,o+$e,1,Z.minY,Z.maxY,y),nr=fn(Cr,P,o+be,o+ft,1,Z.minY,Z.maxY,y),Cr=null),S>1&&console.timeEnd("clipping"),g.push(mt||[],n+1,r*2,o*2),g.push(zt||[],n+1,r*2,o*2+1),g.push(ar||[],n+1,r*2+1,o*2),g.push(nr||[],n+1,r*2+1,o*2+1)}}},Un.prototype.getTile=function(e,n,r){var o=this.options,u=o.extent,c=o.debug;if(e<0||e>24)return null;var p=1<<e;n=(n%p+p)%p;var g=Si(e,n,r);if(this.tiles[g])return En(this.tiles[g],u);c>1&&console.log("drilling down to z%d-%d-%d",e,n,r);for(var y=e,S=n,P=r,L;!L&&y>0;)y--,S=Math.floor(S/2),P=Math.floor(P/2),L=this.tiles[Si(y,S,P)];return!L||!L.source?null:(c>1&&console.log("found parent tile z%d-%d-%d",y,S,P),c>1&&console.time("drilling down"),this.splitTile(L.source,y,S,P,e,n,r),c>1&&console.timeEnd("drilling down"),this.tiles[g]?En(this.tiles[g],u):null)};function Si(e,n,r){return((1<<e)*r+n)*32+e}function ca(e,n){for(var r in n)e[r]=n[r];return e}var Ra=function(){function e(n,r,o,u){(0,It.Z)(this,e),(0,Ve.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=n}return(0,ct.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];return o.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Ai={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function ii(e){for(var n=0,r=0,o=e.length,u=o-1,c,p;r<o;u=r++)c=e[r],p=e[u],n+=(p.x-c.x)*(c.y+p.y);return n}function Dn(e){var n=e.length;if(n<=1)return[e];for(var r=[],o,u,c=0;c<n;c++){var p=ii(e[c]);p!==0&&(u===void 0&&(u=p<0),u===p<0?(o&&r.push(o),o=[e[c]]):o.push(e[c]))}return o&&r.push(o),r}var ta=["Unknown","Point","LineString","Polygon"];function to(e,n,r,o,u){var c=u.geometry,p=u.type,g=u.tags,y=u.id,S=e*Math.pow(2,o),P=e*n,L=e*r,Z=ta[p],q,ce;function me(ft){for(var mt=0;mt<ft.length;mt++){var zt=ft[mt];if(zt[3])break;var ar=180-(zt[1]+L)*360/S,nr=(zt[0]+P)*360/S-180,Yt=360/Math.PI*Math.atan(Math.exp(ar*Math.PI/180))-90;ft[mt]=[nr,Yt,0,1]}}switch(p){case 1:var be=[];for(q=0;q<c.length;q++)be[q]=c[q][0];c=be,me(c);break;case 2:for(q=0;q<c.length;q++)me(c[q]);break;case 3:for(c=Dn(c),q=0;q<c.length;q++)for(ce=0;ce<c[q].length;ce++)me(c[q][ce]);break}c.length===1?c=c[0]:Z="Multi"+Z;var $e={type:"Feature",geometry:{type:Z,coordinates:c},properties:g,id:y,tileOrigin:[0,0],coord:""};return $e}var ki=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y){var S=o.getTile(r.z,r.x,r.y),P=S?S.features.map(function(q){return to(c,u.x,u.y,u.z,q)}):[],L={layers:{defaultLayer:{features:P}}},Z=new Ra(L,r.x,r.y,r.z);y(Z)}));case 1:case"end":return g.stop()}},n)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function Ka(e){var n={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions=="undefined"?n:(0,ae.Z)((0,ae.Z)({},n),e.geojsonvtOptions)}function ka(e,n){var r=Ka(n),o=r.extent||4096,u=Mi(e,r),c=function(y,S){return ki(S,u,y,o)},p=(0,ae.Z)((0,ae.Z)((0,ae.Z)({},Ai),n),{},{getTileData:c});return{data:e,dataArray:[],tilesetOptions:p,isTile:!0}}function _a(e,n){var r=n.extent,o=r===void 0?[121.168,30.2828,121.384,30.4219]:r,u=n.requestParameters,c=u===void 0?{}:u,p=new Promise(function(y){e instanceof HTMLImageElement||vc(e)?y([e]):Ro(e,c,function(S){y(S)})}),g={originData:e,images:p,_id:1,dataArray:[{_id:0,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return g}function Ro(e,n,r){var o=[];if(typeof e=="string")Jo((0,ae.Z)((0,ae.Z)({},n),{},{url:e}),function(p,g){g&&(o.push(g),r(o))});else{var u=e.length,c=0;e.forEach(function(p){Jo((0,ae.Z)((0,ae.Z)({},n),{},{url:p}),function(g,y){c++,y&&o.push(y),c===u&&r(o)})})}return _a}var gu=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c){var p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p={x:o.x,y:o.y,z:o.z},g=va(r,p),S.abrupt("return",new Promise(function(P){c?c(p,function(L,Z){if(L||!Z){var q={layers:{defaultLayer:{features:[]}}},ce=new Ra(q,o.x,o.y,o.z);P(ce)}else{var me={layers:{defaultLayer:{features:Z.features}}},be=new Ra(me,o.x,o.y,o.z);P(be)}}):Lo((0,ae.Z)((0,ae.Z)({},u),{},{url:g}),function(L,Z){if(L||!Z){var q={layers:{defaultLayer:{features:[]}}},ce=new Ra(q,o.x,o.y,o.z);P(ce)}else{var me=JSON.parse(Z),be={layers:{defaultLayer:{features:me}}},$e=new Ra(be,o.x,o.y,o.z);P($e)}})}));case 3:case"end":return S.stop()}},n)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function Uu(e,n){var r=function(c,p){return gu(e,p,n==null?void 0:n.requestParameters,n.getCustomData)},o=(0,ae.Z)((0,ae.Z)({},n),{},{getTileData:r});return{dataArray:[],tilesetOptions:o,isTile:!0}}var go=k(38929),ds=k(3614),Wo=k.n(ds),lu=function(){function e(n,r,o,u){(0,It.Z)(this,e),(0,Ve.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=new go.VectorTile(new(Wo())(n))}return(0,ct.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];if(Array.isArray(o.features))return this.vectorLayerCache[r]=o.features,o.features;for(var u=[],c=0;c<o.length;c++){var p=o.feature(c),g=p.toGeoJSON(this.x,this.y,this.z);u.push((0,ae.Z)((0,ae.Z)({},g),{},{properties:(0,ae.Z)({id:g.id},g.properties)}))}return this.vectorLayerCache[r]=u,u}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Ys={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Hs=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c,p){var g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g=va(r,o),S.abrupt("return",new Promise(function(P){if(p)p({x:u.x,y:u.y,z:u.z},function(Z,q){if(Z||!q)P(void 0);else{var ce=new lu(q,u.x,u.y,u.z);P(ce)}});else{var L=xs((0,ae.Z)((0,ae.Z)({},c),{},{url:g}),function(Z,q){if(Z||!q)P(void 0);else{var ce=new lu(q,u.x,u.y,u.z);P(ce)}});u.xhrCancel=function(){return L.cancel()}}}));case 2:case"end":return S.stop()}},n)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function tu(e,n){var r=Array.isArray(e)?e[0]:e,o=function(p,g){return Hs(r,p,g,n==null?void 0:n.requestParameters,n==null?void 0:n.getCustomData)},u=(0,ae.Z)((0,ae.Z)((0,ae.Z)({},Ys),n),{},{getTileData:o});return{data:r,dataArray:[],tilesetOptions:u,isTile:!0}}var vs=k(71002);function cu(e,n,r){switch(e){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"^":return Math.pow(n,r);case"abs":return Math.abs(n);case"floor":return Math.floor(n);case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"sin":return Math.sin(n);case"cos":return Math.cos(n);case"atan":return r===-1?Math.atan(n):Math.atan2(n,r);case"min":return Math.min(n,r);case"max":return Math.max(n,r);case"log10":return Math.log(n);case"log2":return Math.log2(n);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Va(e,n){for(var r=n[0],o=r.width,u=r.height,c=n.map(function(q){return q.rasterData}),p=o*u,g=[],y=JSON.stringify(e),S=0;S<p;S++){var P=JSON.parse(y),L=Zu(P,c,S);if(typeof L=="number")g.push(L);else{var Z=da(P);g.push(Z)}}return g}function Zu(e,n,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return n[e[1]][r]}catch(o){return console.warn("Raster Data err!"),0}e.map(function(o,u){if(Array.isArray(o)&&o.length>0)switch(o[0]){case"band":try{e[u]=n[o[1]][r]}catch(c){console.warn("Raster Data err!"),e[u]=0}break;default:Zu(o,n,r)}})}function No(e){var n=(0,ji.Z)(e,3),r=n[0],o=n[1],u=o===void 0?-1:o,c=n[2],p=c===void 0?-1:c;if(r===void 0)return console.warn("Express err!"),["+",0,0];var g=r.replace(/\s+/g,"");return[g,u,p]}function da(e){var n=No(e),r=n[0],o=n[1],u=n[2];return Array.isArray(o)&&(o=da(e[1])),Array.isArray(u)&&(u=da(e[2])),cu(r,o,u)}var ba={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:Io}};function Io(e,n){for(var r=e[0].rasterData,o=e[1].rasterData,u=e[2].rasterData,c=[],p=(n==null?void 0:n.countCut)||[2,98],g=(0,ji.Z)(p,2),y=g[0],S=g[1],P=(n==null?void 0:n.RMinMax)||Ts(r,y,S),L=(n==null?void 0:n.GMinMax)||Ts(o,y,S),Z=(n==null?void 0:n.BMinMax)||Ts(u,y,S),q=0;q<r.length;q++)c.push(Math.max(0,r[q]-P[0])),c.push(Math.max(0,o[q]-L[0])),c.push(Math.max(0,u[q]-Z[0]));return{rasterData:c,rMinMax:P,gMinMax:L,bMinMax:Z}}function Ts(e,n,r){var o=e.slice().sort(function(g,y){return g-y}),u=o.length,c=o[Math.ceil(u*n/100)],p=o[Math.ceil(u*r/100)];return[c,p]}function mu(e,n,r){return mr.apply(this,arguments)}function mr(){return mr=(0,pn.Z)(Jt().mark(function e(n,r,o){var u,c,p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(n.length!==0){L.next=2;break}return L.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return L.next=4,Promise.all(n.map(function(Z){var q=Z.data,ce=Z.bands,me=ce===void 0?[0]:ce;return r(q,me)}));case 4:u=L.sent,c=[],u.forEach(function(Z){Array.isArray(Z)?c.push.apply(c,(0,Rn.Z)(Z)):c.push(Z)}),p=c[0],g=p.width,y=p.height,L.t0=(0,vs.Z)(o),L.next=L.t0==="function"?11:L.t0==="object"?13:15;break;case 11:return S=o(c),L.abrupt("break",16);case 13:return Array.isArray(o)?S={rasterData:Va(o,c)}:S=_n(o,c),L.abrupt("break",16);case 15:S={rasterData:c[0].rasterData};case 16:return L.abrupt("return",(0,ae.Z)((0,ae.Z)({},S),{},{width:g,height:y}));case 17:case"end":return L.stop()}},e)})),mr.apply(this,arguments)}function _n(e,n){var r=ba[e.type];if(r.type==="function")return r.method(n,e==null?void 0:e.options);if(r.type==="operation")return e.type==="rgb"?hn(r.expression,n):{rasterData:Va(r.expression,n)}}function hn(e,n){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var r=Va(e.r||["band",0],n),o=Va(e.g||["band",0],n),u=Va(e.b||["band",0],n);return[r,o,u]}function Ii(e,n,r,o){return $a.apply(this,arguments)}function $a(){return $a=(0,pn.Z)(Jt().mark(function e(n,r,o,u){var c;return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,mu(n,r,o);case 2:c=g.sent,u(null,{data:c});case 4:case"end":return g.stop()}},e)})),$a.apply(this,arguments)}function $o(e,n){var r=n.extent,o=n.width,u=n.height,c=n.min,p=n.max,g=n.format,y=n.operation,S,P,L;if(g===void 0||Rv(e))S=Array.from(e),P=o,L=u;else{var Z=Array.isArray(e)?e:[e];S=mu(Z,g,y)}var q={_id:1,dataArray:[{_id:1,data:S,width:P,height:L,min:c,max:p,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return q}var Vt=k(27330),kt=k(86700),wr=k(84879),Qt={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},sn=k(49296),Lr=k.n(sn);function Zr(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gr(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Gr(e,n){if(e){if(typeof e=="string")return yr(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yr(e,n)}}function yr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var Ur=30;function or(e){var n=e.characterSet,r=e.getFontWidth,o=e.fontHeight,u=e.buffer,c=e.maxCanvasWidth,p=e.mapping,g=p===void 0?{}:p,y=e.xOffset,S=y===void 0?0:y,P=e.yOffset,L=P===void 0?0:P,Z=0,q=S;Array.from(n).forEach(function(me,be){if(!g[me]){var $e=r(me,be);q+Ur>c&&(q=0,Z++),g[me]={x:q,y:L+Z*Ur,width:Ur,height:Ur,advance:$e},q+=Ur}});var ce=o+u*2;return{mapping:g,xOffset:q,yOffset:L+Z*ce,canvasHeight:Sn(L+(Z+1)*ce)}}function jr(e,n,r){var o=0,u=0,c=0,p=[],g={},y=Zr(e),S;try{for(y.s();!(S=y.n()).done;){var P=S.value;if(!g[P.id]){var L=P.size;o+L+n>r&&(bn(g,p,u),o=0,u=c+u+n,c=0,p=[]),p.push({icon:P,xOffset:o}),o=o+L+n,c=Math.max(c,L)}}}catch(q){y.e(q)}finally{y.f()}p.length>0&&bn(g,p,u);var Z=Sn(c+u+n);return{mapping:g,canvasHeight:Z}}function bn(e,n,r){var o=Zr(n),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,p=c.icon,g=c.xOffset;e[p.id]=(0,ae.Z)((0,ae.Z)({},p),{},{x:g,y:r,image:p.image,width:p.width,height:p.height})}}catch(y){o.e(y)}finally{o.f()}}function Sn(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var Xn,Zn;function qn(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Xi(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Xi(e,n){if(e){if(typeof e=="string")return Fn(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fn(e,n)}}function Fn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function Gi(e){var n=xa();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function xa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Da=ud(),zo="sans-serif",za="normal",ql=24,Cg=3,nf=.25,bm=8,Ef=1024,Sm=1,Pv=1,m_=3,M0=null;function ud(){for(var e=[],n=32;n<128;n++)e.push(String.fromCharCode(n));return e}function ld(e,n,r,o){e.font="".concat(o," ").concat(r,"px ").concat(n),e.fillStyle="black",e.textBaseline="middle"}function Tg(e,n){for(var r=0;r<e.length;r++)n.data[4*r+3]=e[r]}var kv=(Xn=(0,kt.b2)(),Xn(Zn=function(e){(0,gr.Z)(r,e);var n=Gi(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"fontAtlas",void 0),(0,Ve.Z)((0,Mr.Z)(o),"iconFontMap",void 0),(0,Ve.Z)((0,Mr.Z)(o),"iconFontGlyphs",{}),(0,Ve.Z)((0,Mr.Z)(o),"fontOptions",void 0),(0,Ve.Z)((0,Mr.Z)(o),"key",void 0),(0,Ve.Z)((0,Mr.Z)(o),"cache",new yc(m_)),o}return(0,ct.Z)(r,[{key:"scale",get:function(){return Pv}},{key:"canvas",get:function(){var u=this.cache.get(this.key);return u&&u.data}},{key:"mapping",get:function(){var u=this.cache.get(this.key);return u&&u.mapping||{}}},{key:"getCanvasByKey",value:function(u){var c=this.cache.get(u);return c&&c.data}},{key:"getMappingByKey",value:function(u){var c=this.cache.get(u);return c&&c.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:zo,fontWeight:za,characterSet:Da,fontSize:ql,buffer:Cg,sdf:!0,cutoff:nf,radius:bm,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(u){var c=this;u.forEach(function(p){c.iconFontGlyphs[p.name]=p.unicode})}},{key:"addIconFont",value:function(u,c){this.iconFontMap.set(u,c)}},{key:"getIconFontKey",value:function(u){return this.iconFontMap.get(u)||u}},{key:"getGlyph",value:function(u){return this.iconFontGlyphs[u]?String.fromCharCode(parseInt(this.iconFontGlyphs[u],16)):""}},{key:"setFontOptions",value:function(u){this.fontOptions=(0,ae.Z)((0,ae.Z)({},this.fontOptions),u),this.key=this.getKey();var c=this.getNewChars(this.key,this.fontOptions.characterSet),p=this.cache.get(this.key);if(!(p&&c.length===0)){var g=this.generateFontAtlas(this.key,c,p);this.fontAtlas=g,this.cache.set(this.key,g)}}},{key:"addFontFace",value:function(u,c){var p=this,g=document.createElement("style");g.type="text/css",g.innerText=`
        @font-face{
            font-family: '`.concat(u,`';
            src: url('`).concat(c,`') format('woff2'),
            url('`).concat(c,`') format('woff'),
            url('`).concat(c,`') format('truetype');
        }`),g.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(u),"L7text"),document.fonts.ready.then(function(){p.emit("fontloaded",{fontFamily:u})})}catch(y){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(y)}},document.getElementsByTagName("head")[0].appendChild(g)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(u,c,p){var g=this.fontOptions,y=g.fontFamily,S=g.fontWeight,P=g.fontSize,L=g.buffer,Z=g.sdf,q=g.radius,ce=g.cutoff,me=g.iconfont,be=p&&p.data;be||(be=window.document.createElement("canvas"),be.width=Ef);var $e=be.getContext("2d",{willReadFrequently:!0});ld($e,y,P,S);var ft=or((0,ae.Z)({getFontWidth:function(pu){return $e.measureText(pu).width},fontHeight:P*Pv,buffer:L,characterSet:c,maxCanvasWidth:Ef},p&&{mapping:p.mapping,xOffset:p.xOffset,yOffset:p.yOffset})),mt=ft.mapping,zt=ft.canvasHeight,ar=ft.xOffset,nr=ft.yOffset,Yt=$e.getImageData(0,0,be.width,be.height);if(be.height=zt,$e.putImageData(Yt,0,0),ld($e,y,P,S),Z){var Cr=new(Lr())(P,L,q,ce,y,S),Nr=$e.getImageData(0,0,Cr.size,Cr.size),nn=qn(c),an;try{for(nn.s();!(an=nn.n()).done;){var Nn=an.value;if(me){var jn=String.fromCharCode(parseInt(Nn.replace("&#x","").replace(";",""),16)),di=Cr.draw(jn);Tg(di,Nr)}else Tg(Cr.draw(Nn),Nr);$e.putImageData(Nr,mt[Nn].x,mt[Nn].y)}}catch(nu){nn.e(nu)}finally{nn.f()}}else{var Ua=qn(c),Co;try{for(Ua.s();!(Co=Ua.n()).done;){var os=Co.value;$e.fillText(os,mt[os].x,mt[os].y+P*Sm)}}catch(nu){Ua.e(nu)}finally{Ua.f()}}return{xOffset:ar,yOffset:nr,mapping:mt,data:be,width:be.width,height:be.height}}},{key:"getKey",value:function(){var u=this.fontOptions,c=u.fontFamily,p=u.fontWeight;return"".concat(c,"_").concat(p)}},{key:"getNewChars",value:function(u,c){var p=this.cache.get(u);if(!p)return c;var g=[],y=p.mapping,S=new Set(Object.keys(y)),P=new Set(c);return P.forEach(function(L){S.has(L)||g.push(L)}),g}}]),r}(Es.EventEmitter))||Zn),Em,Ru;function Ws(e){var n=y_();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function y_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var R0=3,I0=1024,Dv=64,O0=(Em=(0,kt.b2)(),Em(Ru=function(e){(0,gr.Z)(r,e);var n=Ws(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"canvasHeight",128),(0,Ve.Z)((0,Mr.Z)(o),"texture",void 0),(0,Ve.Z)((0,Mr.Z)(o),"canvas",void 0),(0,Ve.Z)((0,Mr.Z)(o),"iconData",void 0),(0,Ve.Z)((0,Mr.Z)(o),"iconMap",void 0),(0,Ve.Z)((0,Mr.Z)(o),"ctx",void 0),(0,Ve.Z)((0,Mr.Z)(o),"loadingImageCount",0),o}return(0,ct.Z)(r,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p,g){var y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return y=new Image,this.loadingImageCount++,this.hasImage(p)?console.warn("Image Id already exists"):this.iconData.push({id:p,size:Dv}),this.updateIconMap(),L.next=6,this.loadImage(g);case 6:y=L.sent,S=this.iconData.find(function(Z){return Z.id===p}),S&&(S.image=y,S.width=y.width,S.height=y.height),this.update();case 10:case"end":return L.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addImageMini",value:function(u,c,p){var g=this,y=p.getSceneConfig().canvas,S=y.createImage();if(this.loadingImageCount++,this.hasImage(u))throw new Error("Image Id already exists");this.iconData.push({id:u,size:Dv}),this.updateIconMap(),this.loadImageMini(c,y).then(function(P){S=P;var L=g.iconData.find(function(Z){return Z.id===u});L&&(L.image=S,L.width=S.width,L.height=S.height),g.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(u){return this.iconMap.hasOwnProperty(u)}},{key:"removeImage",value:function(u){this.hasImage(u)&&(this.iconData=this.iconData.filter(function(c){return c.id!==u}),delete this.iconMap[u],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(u){return new Promise(function(c,p){if(u instanceof HTMLImageElement){c(u);return}var g=new Image;g.crossOrigin="anonymous",g.onload=function(){c(g)},g.onerror=function(){p(new Error("Could not load image at "+u))},g.src=u instanceof File?URL.createObjectURL(u):u})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var u=this;this.canvas.width=I0,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(c){var p=u.iconMap[c],g=p.x,y=p.y,S=p.image,P=p.width,L=P===void 0?64:P,Z=p.height,q=Z===void 0?64:Z,ce=Math.max(L,q),me=ce/Dv,be=q/me,$e=L/me;S&&u.ctx.drawImage(S,g+(Dv-$e)/2,y+(Dv-be)/2,$e,be)})}},{key:"updateIconMap",value:function(){var u=jr(this.iconData,R0,I0),c=u.mapping,p=u.canvasHeight;this.iconMap=c,this.canvasHeight=p}},{key:"loadImageMini",value:function(u,c){return new Promise(function(p,g){var y=c.createImage();y.crossOrigin="anonymous",y.onload=function(){p(y)},y.onerror=function(){g(new Error("Could not load image at "+u))},y.src=u})}}]),r}(Es.EventEmitter))||Ru),Qo=k(49685);function ks(){var e=new Qo.WT(16);return Qo.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Gh(e){var n=new Qo.WT(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function wm(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function Iu(e,n,r,o,u,c,p,g,y,S,P,L,Z,q,ce,me){var be=new Qo.WT(16);return be[0]=e,be[1]=n,be[2]=r,be[3]=o,be[4]=u,be[5]=c,be[6]=p,be[7]=g,be[8]=y,be[9]=S,be[10]=P,be[11]=L,be[12]=Z,be[13]=q,be[14]=ce,be[15]=me,be}function Ag(e,n,r,o,u,c,p,g,y,S,P,L,Z,q,ce,me,be){return e[0]=n,e[1]=r,e[2]=o,e[3]=u,e[4]=c,e[5]=p,e[6]=g,e[7]=y,e[8]=S,e[9]=P,e[10]=L,e[11]=Z,e[12]=q,e[13]=ce,e[14]=me,e[15]=be,e}function Vf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qd(e,n){if(e===n){var r=n[1],o=n[2],u=n[3],c=n[6],p=n[7],g=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=r,e[6]=n[9],e[7]=n[13],e[8]=o,e[9]=c,e[11]=n[14],e[12]=u,e[13]=p,e[14]=g}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}function af(e,n){var r=n[0],o=n[1],u=n[2],c=n[3],p=n[4],g=n[5],y=n[6],S=n[7],P=n[8],L=n[9],Z=n[10],q=n[11],ce=n[12],me=n[13],be=n[14],$e=n[15],ft=r*g-o*p,mt=r*y-u*p,zt=r*S-c*p,ar=o*y-u*g,nr=o*S-c*g,Yt=u*S-c*y,Cr=P*me-L*ce,Nr=P*be-Z*ce,nn=P*$e-q*ce,an=L*be-Z*me,Nn=L*$e-q*me,jn=Z*$e-q*be,di=ft*jn-mt*Nn+zt*an+ar*nn-nr*Nr+Yt*Cr;return di?(di=1/di,e[0]=(g*jn-y*Nn+S*an)*di,e[1]=(u*Nn-o*jn-c*an)*di,e[2]=(me*Yt-be*nr+$e*ar)*di,e[3]=(Z*nr-L*Yt-q*ar)*di,e[4]=(y*nn-p*jn-S*Nr)*di,e[5]=(r*jn-u*nn+c*Nr)*di,e[6]=(be*zt-ce*Yt-$e*mt)*di,e[7]=(P*Yt-Z*zt+q*mt)*di,e[8]=(p*Nn-g*nn+S*Cr)*di,e[9]=(o*nn-r*Nn-c*Cr)*di,e[10]=(ce*nr-me*zt+$e*ft)*di,e[11]=(L*zt-P*nr-q*ft)*di,e[12]=(g*Nr-p*an-y*Cr)*di,e[13]=(r*an-o*Nr+u*Cr)*di,e[14]=(me*mt-ce*ar-be*ft)*di,e[15]=(P*ar-L*mt+Z*ft)*di,e):null}function __(e,n){var r=n[0],o=n[1],u=n[2],c=n[3],p=n[4],g=n[5],y=n[6],S=n[7],P=n[8],L=n[9],Z=n[10],q=n[11],ce=n[12],me=n[13],be=n[14],$e=n[15];return e[0]=g*(Z*$e-q*be)-L*(y*$e-S*be)+me*(y*q-S*Z),e[1]=-(o*(Z*$e-q*be)-L*(u*$e-c*be)+me*(u*q-c*Z)),e[2]=o*(y*$e-S*be)-g*(u*$e-c*be)+me*(u*S-c*y),e[3]=-(o*(y*q-S*Z)-g*(u*q-c*Z)+L*(u*S-c*y)),e[4]=-(p*(Z*$e-q*be)-P*(y*$e-S*be)+ce*(y*q-S*Z)),e[5]=r*(Z*$e-q*be)-P*(u*$e-c*be)+ce*(u*q-c*Z),e[6]=-(r*(y*$e-S*be)-p*(u*$e-c*be)+ce*(u*S-c*y)),e[7]=r*(y*q-S*Z)-p*(u*q-c*Z)+P*(u*S-c*y),e[8]=p*(L*$e-q*me)-P*(g*$e-S*me)+ce*(g*q-S*L),e[9]=-(r*(L*$e-q*me)-P*(o*$e-c*me)+ce*(o*q-c*L)),e[10]=r*(g*$e-S*me)-p*(o*$e-c*me)+ce*(o*S-c*g),e[11]=-(r*(g*q-S*L)-p*(o*q-c*L)+P*(o*S-c*g)),e[12]=-(p*(L*be-Z*me)-P*(g*be-y*me)+ce*(g*Z-y*L)),e[13]=r*(L*be-Z*me)-P*(o*be-u*me)+ce*(o*Z-u*L),e[14]=-(r*(g*be-y*me)-p*(o*be-u*me)+ce*(o*y-u*g)),e[15]=r*(g*Z-y*L)-p*(o*Z-u*L)+P*(o*y-u*g),e}function Lv(e){var n=e[0],r=e[1],o=e[2],u=e[3],c=e[4],p=e[5],g=e[6],y=e[7],S=e[8],P=e[9],L=e[10],Z=e[11],q=e[12],ce=e[13],me=e[14],be=e[15],$e=n*p-r*c,ft=n*g-o*c,mt=n*y-u*c,zt=r*g-o*p,ar=r*y-u*p,nr=o*y-u*g,Yt=S*ce-P*q,Cr=S*me-L*q,Nr=S*be-Z*q,nn=P*me-L*ce,an=P*be-Z*ce,Nn=L*be-Z*me;return $e*Nn-ft*an+mt*nn+zt*Nr-ar*Cr+nr*Yt}function Vu(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3],g=n[4],y=n[5],S=n[6],P=n[7],L=n[8],Z=n[9],q=n[10],ce=n[11],me=n[12],be=n[13],$e=n[14],ft=n[15],mt=r[0],zt=r[1],ar=r[2],nr=r[3];return e[0]=mt*o+zt*g+ar*L+nr*me,e[1]=mt*u+zt*y+ar*Z+nr*be,e[2]=mt*c+zt*S+ar*q+nr*$e,e[3]=mt*p+zt*P+ar*ce+nr*ft,mt=r[4],zt=r[5],ar=r[6],nr=r[7],e[4]=mt*o+zt*g+ar*L+nr*me,e[5]=mt*u+zt*y+ar*Z+nr*be,e[6]=mt*c+zt*S+ar*q+nr*$e,e[7]=mt*p+zt*P+ar*ce+nr*ft,mt=r[8],zt=r[9],ar=r[10],nr=r[11],e[8]=mt*o+zt*g+ar*L+nr*me,e[9]=mt*u+zt*y+ar*Z+nr*be,e[10]=mt*c+zt*S+ar*q+nr*$e,e[11]=mt*p+zt*P+ar*ce+nr*ft,mt=r[12],zt=r[13],ar=r[14],nr=r[15],e[12]=mt*o+zt*g+ar*L+nr*me,e[13]=mt*u+zt*y+ar*Z+nr*be,e[14]=mt*c+zt*S+ar*q+nr*$e,e[15]=mt*p+zt*P+ar*ce+nr*ft,e}function sc(e,n,r){var o=r[0],u=r[1],c=r[2],p,g,y,S,P,L,Z,q,ce,me,be,$e;return n===e?(e[12]=n[0]*o+n[4]*u+n[8]*c+n[12],e[13]=n[1]*o+n[5]*u+n[9]*c+n[13],e[14]=n[2]*o+n[6]*u+n[10]*c+n[14],e[15]=n[3]*o+n[7]*u+n[11]*c+n[15]):(p=n[0],g=n[1],y=n[2],S=n[3],P=n[4],L=n[5],Z=n[6],q=n[7],ce=n[8],me=n[9],be=n[10],$e=n[11],e[0]=p,e[1]=g,e[2]=y,e[3]=S,e[4]=P,e[5]=L,e[6]=Z,e[7]=q,e[8]=ce,e[9]=me,e[10]=be,e[11]=$e,e[12]=p*o+P*u+ce*c+n[12],e[13]=g*o+L*u+me*c+n[13],e[14]=y*o+Z*u+be*c+n[14],e[15]=S*o+q*u+$e*c+n[15]),e}function Ec(e,n,r){var o=r[0],u=r[1],c=r[2];return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=n[3]*o,e[4]=n[4]*u,e[5]=n[5]*u,e[6]=n[6]*u,e[7]=n[7]*u,e[8]=n[8]*c,e[9]=n[9]*c,e[10]=n[10]*c,e[11]=n[11]*c,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function Ux(e,n,r,o){var u=o[0],c=o[1],p=o[2],g=Math.hypot(u,c,p),y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar,nr,Yt,Cr,Nr,nn,an,Nn,jn,di,Ua;return g<Qo.Ib?null:(g=1/g,u*=g,c*=g,p*=g,y=Math.sin(r),S=Math.cos(r),P=1-S,L=n[0],Z=n[1],q=n[2],ce=n[3],me=n[4],be=n[5],$e=n[6],ft=n[7],mt=n[8],zt=n[9],ar=n[10],nr=n[11],Yt=u*u*P+S,Cr=c*u*P+p*y,Nr=p*u*P-c*y,nn=u*c*P-p*y,an=c*c*P+S,Nn=p*c*P+u*y,jn=u*p*P+c*y,di=c*p*P-u*y,Ua=p*p*P+S,e[0]=L*Yt+me*Cr+mt*Nr,e[1]=Z*Yt+be*Cr+zt*Nr,e[2]=q*Yt+$e*Cr+ar*Nr,e[3]=ce*Yt+ft*Cr+nr*Nr,e[4]=L*nn+me*an+mt*Nn,e[5]=Z*nn+be*an+zt*Nn,e[6]=q*nn+$e*an+ar*Nn,e[7]=ce*nn+ft*an+nr*Nn,e[8]=L*jn+me*di+mt*Ua,e[9]=Z*jn+be*di+zt*Ua,e[10]=q*jn+$e*di+ar*Ua,e[11]=ce*jn+ft*di+nr*Ua,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}function Xa(e,n,r){var o=Math.sin(r),u=Math.cos(r),c=n[4],p=n[5],g=n[6],y=n[7],S=n[8],P=n[9],L=n[10],Z=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=c*u+S*o,e[5]=p*u+P*o,e[6]=g*u+L*o,e[7]=y*u+Z*o,e[8]=S*u-c*o,e[9]=P*u-p*o,e[10]=L*u-g*o,e[11]=Z*u-y*o,e}function of(e,n,r){var o=Math.sin(r),u=Math.cos(r),c=n[0],p=n[1],g=n[2],y=n[3],S=n[8],P=n[9],L=n[10],Z=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=c*u-S*o,e[1]=p*u-P*o,e[2]=g*u-L*o,e[3]=y*u-Z*o,e[8]=c*o+S*u,e[9]=p*o+P*u,e[10]=g*o+L*u,e[11]=y*o+Z*u,e}function Op(e,n,r){var o=Math.sin(r),u=Math.cos(r),c=n[0],p=n[1],g=n[2],y=n[3],S=n[4],P=n[5],L=n[6],Z=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=c*u+S*o,e[1]=p*u+P*o,e[2]=g*u+L*o,e[3]=y*u+Z*o,e[4]=S*u-c*o,e[5]=P*u-p*o,e[6]=L*u-g*o,e[7]=Z*u-y*o,e}function h(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function v(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,n,r){var o=r[0],u=r[1],c=r[2],p=Math.hypot(o,u,c),g,y,S;return p<Qo.Ib?null:(p=1/p,o*=p,u*=p,c*=p,g=Math.sin(n),y=Math.cos(n),S=1-y,e[0]=o*o*S+y,e[1]=u*o*S+c*g,e[2]=c*o*S-u*g,e[3]=0,e[4]=o*u*S-c*g,e[5]=u*u*S+y,e[6]=c*u*S+o*g,e[7]=0,e[8]=o*c*S+u*g,e[9]=u*c*S-o*g,e[10]=c*c*S+y,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function R(e,n){var r=Math.sin(n),o=Math.cos(n);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,n){var r=Math.sin(n),o=Math.cos(n);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,n){var r=Math.sin(n),o=Math.cos(n);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function K(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3],g=o+o,y=u+u,S=c+c,P=o*g,L=o*y,Z=o*S,q=u*y,ce=u*S,me=c*S,be=p*g,$e=p*y,ft=p*S;return e[0]=1-(q+me),e[1]=L+ft,e[2]=Z-$e,e[3]=0,e[4]=L-ft,e[5]=1-(P+me),e[6]=ce+be,e[7]=0,e[8]=Z+$e,e[9]=ce-be,e[10]=1-(P+q),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function de(e,n){var r=new Qo.WT(3),o=-n[0],u=-n[1],c=-n[2],p=n[3],g=n[4],y=n[5],S=n[6],P=n[7],L=o*o+u*u+c*c+p*p;return L>0?(r[0]=(g*p+P*o+y*c-S*u)*2/L,r[1]=(y*p+P*u+S*o-g*c)*2/L,r[2]=(S*p+P*c+g*u-y*o)*2/L):(r[0]=(g*p+P*o+y*c-S*u)*2,r[1]=(y*p+P*u+S*o-g*c)*2,r[2]=(S*p+P*c+g*u-y*o)*2),K(e,n,r),e}function Be(e,n){return e[0]=n[12],e[1]=n[13],e[2]=n[14],e}function it(e,n){var r=n[0],o=n[1],u=n[2],c=n[4],p=n[5],g=n[6],y=n[8],S=n[9],P=n[10];return e[0]=Math.hypot(r,o,u),e[1]=Math.hypot(c,p,g),e[2]=Math.hypot(y,S,P),e}function ht(e,n){var r=new Qo.WT(3);it(r,n);var o=1/r[0],u=1/r[1],c=1/r[2],p=n[0]*o,g=n[1]*u,y=n[2]*c,S=n[4]*o,P=n[5]*u,L=n[6]*c,Z=n[8]*o,q=n[9]*u,ce=n[10]*c,me=p+P+ce,be=0;return me>0?(be=Math.sqrt(me+1)*2,e[3]=.25*be,e[0]=(L-q)/be,e[1]=(Z-y)/be,e[2]=(g-S)/be):p>P&&p>ce?(be=Math.sqrt(1+p-P-ce)*2,e[3]=(L-q)/be,e[0]=.25*be,e[1]=(g+S)/be,e[2]=(Z+y)/be):P>ce?(be=Math.sqrt(1+P-p-ce)*2,e[3]=(Z-y)/be,e[0]=(g+S)/be,e[1]=.25*be,e[2]=(L+q)/be):(be=Math.sqrt(1+ce-p-P)*2,e[3]=(g-S)/be,e[0]=(Z+y)/be,e[1]=(L+q)/be,e[2]=.25*be),e}function xt(e,n,r,o){var u=n[0],c=n[1],p=n[2],g=n[3],y=u+u,S=c+c,P=p+p,L=u*y,Z=u*S,q=u*P,ce=c*S,me=c*P,be=p*P,$e=g*y,ft=g*S,mt=g*P,zt=o[0],ar=o[1],nr=o[2];return e[0]=(1-(ce+be))*zt,e[1]=(Z+mt)*zt,e[2]=(q-ft)*zt,e[3]=0,e[4]=(Z-mt)*ar,e[5]=(1-(L+be))*ar,e[6]=(me+$e)*ar,e[7]=0,e[8]=(q+ft)*nr,e[9]=(me-$e)*nr,e[10]=(1-(L+ce))*nr,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Lt(e,n,r,o,u){var c=n[0],p=n[1],g=n[2],y=n[3],S=c+c,P=p+p,L=g+g,Z=c*S,q=c*P,ce=c*L,me=p*P,be=p*L,$e=g*L,ft=y*S,mt=y*P,zt=y*L,ar=o[0],nr=o[1],Yt=o[2],Cr=u[0],Nr=u[1],nn=u[2],an=(1-(me+$e))*ar,Nn=(q+zt)*ar,jn=(ce-mt)*ar,di=(q-zt)*nr,Ua=(1-(Z+$e))*nr,Co=(be+ft)*nr,os=(ce+mt)*Yt,nu=(be-ft)*Yt,pu=(1-(Z+me))*Yt;return e[0]=an,e[1]=Nn,e[2]=jn,e[3]=0,e[4]=di,e[5]=Ua,e[6]=Co,e[7]=0,e[8]=os,e[9]=nu,e[10]=pu,e[11]=0,e[12]=r[0]+Cr-(an*Cr+di*Nr+os*nn),e[13]=r[1]+Nr-(Nn*Cr+Ua*Nr+nu*nn),e[14]=r[2]+nn-(jn*Cr+Co*Nr+pu*nn),e[15]=1,e}function Ht(e,n){var r=n[0],o=n[1],u=n[2],c=n[3],p=r+r,g=o+o,y=u+u,S=r*p,P=o*p,L=o*g,Z=u*p,q=u*g,ce=u*y,me=c*p,be=c*g,$e=c*y;return e[0]=1-L-ce,e[1]=P+$e,e[2]=Z-be,e[3]=0,e[4]=P-$e,e[5]=1-S-ce,e[6]=q+me,e[7]=0,e[8]=Z+be,e[9]=q-me,e[10]=1-S-L,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ur(e,n,r,o,u,c,p){var g=1/(r-n),y=1/(u-o),S=1/(c-p);return e[0]=c*2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*y,e[6]=0,e[7]=0,e[8]=(r+n)*g,e[9]=(u+o)*y,e[10]=(p+c)*S,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*c*2*S,e[15]=0,e}function pr(e,n,r,o,u){var c=1/Math.tan(n/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=(u+o)*p,e[14]=2*u*o*p):(e[10]=-1,e[14]=-2*o),e}var zr=pr;function Or(e,n,r,o,u){var c=1/Math.tan(n/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=u*p,e[14]=u*o*p):(e[10]=-1,e[14]=-o),e}function qr(e,n,r,o){var u=Math.tan(n.upDegrees*Math.PI/180),c=Math.tan(n.downDegrees*Math.PI/180),p=Math.tan(n.leftDegrees*Math.PI/180),g=Math.tan(n.rightDegrees*Math.PI/180),y=2/(p+g),S=2/(u+c);return e[0]=y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=S,e[6]=0,e[7]=0,e[8]=-((p-g)*y*.5),e[9]=(u-c)*S*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function on(e,n,r,o,u,c,p){var g=1/(n-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*S,e[11]=0,e[12]=(n+r)*g,e[13]=(u+o)*y,e[14]=(p+c)*S,e[15]=1,e}var gn=on;function Tn(e,n,r,o,u,c,p){var g=1/(n-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=S,e[11]=0,e[12]=(n+r)*g,e[13]=(u+o)*y,e[14]=c*S,e[15]=1,e}function Ln(e,n,r,o){var u,c,p,g,y,S,P,L,Z,q,ce=n[0],me=n[1],be=n[2],$e=o[0],ft=o[1],mt=o[2],zt=r[0],ar=r[1],nr=r[2];return Math.abs(ce-zt)<Qo.Ib&&Math.abs(me-ar)<Qo.Ib&&Math.abs(be-nr)<Qo.Ib?Vf(e):(P=ce-zt,L=me-ar,Z=be-nr,q=1/Math.hypot(P,L,Z),P*=q,L*=q,Z*=q,u=ft*Z-mt*L,c=mt*P-$e*Z,p=$e*L-ft*P,q=Math.hypot(u,c,p),q?(q=1/q,u*=q,c*=q,p*=q):(u=0,c=0,p=0),g=L*p-Z*c,y=Z*u-P*p,S=P*c-L*u,q=Math.hypot(g,y,S),q?(q=1/q,g*=q,y*=q,S*=q):(g=0,y=0,S=0),e[0]=u,e[1]=g,e[2]=P,e[3]=0,e[4]=c,e[5]=y,e[6]=L,e[7]=0,e[8]=p,e[9]=S,e[10]=Z,e[11]=0,e[12]=-(u*ce+c*me+p*be),e[13]=-(g*ce+y*me+S*be),e[14]=-(P*ce+L*me+Z*be),e[15]=1,e)}function pi(e,n,r,o){var u=n[0],c=n[1],p=n[2],g=o[0],y=o[1],S=o[2],P=u-r[0],L=c-r[1],Z=p-r[2],q=P*P+L*L+Z*Z;q>0&&(q=1/Math.sqrt(q),P*=q,L*=q,Z*=q);var ce=y*Z-S*L,me=S*P-g*Z,be=g*L-y*P;return q=ce*ce+me*me+be*be,q>0&&(q=1/Math.sqrt(q),ce*=q,me*=q,be*=q),e[0]=ce,e[1]=me,e[2]=be,e[3]=0,e[4]=L*be-Z*me,e[5]=Z*ce-P*be,e[6]=P*me-L*ce,e[7]=0,e[8]=P,e[9]=L,e[10]=Z,e[11]=0,e[12]=u,e[13]=c,e[14]=p,e[15]=1,e}function Ei(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ki(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Di(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e[4]=n[4]+r[4],e[5]=n[5]+r[5],e[6]=n[6]+r[6],e[7]=n[7]+r[7],e[8]=n[8]+r[8],e[9]=n[9]+r[9],e[10]=n[10]+r[10],e[11]=n[11]+r[11],e[12]=n[12]+r[12],e[13]=n[13]+r[13],e[14]=n[14]+r[14],e[15]=n[15]+r[15],e}function ia(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e[4]=n[4]-r[4],e[5]=n[5]-r[5],e[6]=n[6]-r[6],e[7]=n[7]-r[7],e[8]=n[8]-r[8],e[9]=n[9]-r[9],e[10]=n[10]-r[10],e[11]=n[11]-r[11],e[12]=n[12]-r[12],e[13]=n[13]-r[13],e[14]=n[14]-r[14],e[15]=n[15]-r[15],e}function Oi(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*r,e[9]=n[9]*r,e[10]=n[10]*r,e[11]=n[11]*r,e[12]=n[12]*r,e[13]=n[13]*r,e[14]=n[14]*r,e[15]=n[15]*r,e}function ro(e,n,r,o){return e[0]=n[0]+r[0]*o,e[1]=n[1]+r[1]*o,e[2]=n[2]+r[2]*o,e[3]=n[3]+r[3]*o,e[4]=n[4]+r[4]*o,e[5]=n[5]+r[5]*o,e[6]=n[6]+r[6]*o,e[7]=n[7]+r[7]*o,e[8]=n[8]+r[8]*o,e[9]=n[9]+r[9]*o,e[10]=n[10]+r[10]*o,e[11]=n[11]+r[11]*o,e[12]=n[12]+r[12]*o,e[13]=n[13]+r[13]*o,e[14]=n[14]+r[14]*o,e[15]=n[15]+r[15]*o,e}function Yi(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[11]===n[11]&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[15]===n[15]}function $i(e,n){var r=e[0],o=e[1],u=e[2],c=e[3],p=e[4],g=e[5],y=e[6],S=e[7],P=e[8],L=e[9],Z=e[10],q=e[11],ce=e[12],me=e[13],be=e[14],$e=e[15],ft=n[0],mt=n[1],zt=n[2],ar=n[3],nr=n[4],Yt=n[5],Cr=n[6],Nr=n[7],nn=n[8],an=n[9],Nn=n[10],jn=n[11],di=n[12],Ua=n[13],Co=n[14],os=n[15];return Math.abs(r-ft)<=Qo.Ib*Math.max(1,Math.abs(r),Math.abs(ft))&&Math.abs(o-mt)<=Qo.Ib*Math.max(1,Math.abs(o),Math.abs(mt))&&Math.abs(u-zt)<=Qo.Ib*Math.max(1,Math.abs(u),Math.abs(zt))&&Math.abs(c-ar)<=Qo.Ib*Math.max(1,Math.abs(c),Math.abs(ar))&&Math.abs(p-nr)<=Qo.Ib*Math.max(1,Math.abs(p),Math.abs(nr))&&Math.abs(g-Yt)<=Qo.Ib*Math.max(1,Math.abs(g),Math.abs(Yt))&&Math.abs(y-Cr)<=Qo.Ib*Math.max(1,Math.abs(y),Math.abs(Cr))&&Math.abs(S-Nr)<=Qo.Ib*Math.max(1,Math.abs(S),Math.abs(Nr))&&Math.abs(P-nn)<=Qo.Ib*Math.max(1,Math.abs(P),Math.abs(nn))&&Math.abs(L-an)<=Qo.Ib*Math.max(1,Math.abs(L),Math.abs(an))&&Math.abs(Z-Nn)<=Qo.Ib*Math.max(1,Math.abs(Z),Math.abs(Nn))&&Math.abs(q-jn)<=Qo.Ib*Math.max(1,Math.abs(q),Math.abs(jn))&&Math.abs(ce-di)<=Qo.Ib*Math.max(1,Math.abs(ce),Math.abs(di))&&Math.abs(me-Ua)<=Qo.Ib*Math.max(1,Math.abs(me),Math.abs(Ua))&&Math.abs(be-Co)<=Qo.Ib*Math.max(1,Math.abs(be),Math.abs(Co))&&Math.abs($e-os)<=Qo.Ib*Math.max(1,Math.abs($e),Math.abs(os))}var mo=Vu,Wa=ia,no,xi,Uo=(no=(0,kt.b2)(),no(xi=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"viewport",void 0),(0,Ve.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Ve.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,Ve.Z)(this,"jitteredProjectionMatrix",void 0),(0,Ve.Z)(this,"viewMatrixInverse",void 0),(0,Ve.Z)(this,"cameraPosition",void 0)}return(0,ct.Z)(e,[{key:"init",value:function(){}},{key:"update",value:function(r){this.viewport=r,this.viewMatrixInverse=ks(),af(this.viewMatrixInverse,r.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var r=this.viewport.getCenter(),o=(0,ji.Z)(r,2),u=o[0],c=o[1];return[u,c]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}},{key:"setViewProjectionMatrix",value:function(r){this.overridedViewProjectionMatrix=r}},{key:"jitterProjectionMatrix",value:function(r,o){var u=h(ks(),[r,o,0]);this.jitteredProjectionMatrix=Vu(ks(),u,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Vu(ks(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||xi),ts=function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e}({}),qs,gs;function Ds(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=fu(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function fu(e,n){if(e){if(typeof e=="string")return Ls(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ls(e,n)}}function Ls(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var yu={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},Qu=(qs=(0,kt.b2)(),qs(gs=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"container",void 0),(0,Ve.Z)(this,"controlCorners",void 0),(0,Ve.Z)(this,"controlContainer",void 0),(0,Ve.Z)(this,"scene",void 0),(0,Ve.Z)(this,"mapsService",void 0),(0,Ve.Z)(this,"controls",[]),(0,Ve.Z)(this,"unAddControls",[])}return(0,ct.Z)(e,[{key:"init",value:function(r,o){this.container=r.container,this.scene=o,this.mapsService=o.get(Qt.IMapService),this.initControlPos()}},{key:"addControl",value:function(r,o){var u=o.get(Qt.IMapService);u.map?(r.addTo(this.scene),this.controls.push(r)):this.unAddControls.push(r)}},{key:"getControlByName",value:function(r){return this.controls.find(function(o){return o.controlOption.name===r})}},{key:"removeControl",value:function(r){var o=this.controls.indexOf(r);return o>-1&&this.controls.splice(o,1),r.remove(),this}},{key:"addControls",value:function(){var r=this;this.unAddControls.forEach(function(o){o.addTo(r.scene),r.controls.push(o)}),this.unAddControls=[]}},{key:"destroy",value:function(){var r=Ds(this.controls),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.remove()}}catch(c){r.e(c)}finally{r.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var r=this.controlCorners={},o="l7-",u=this.controlContainer=$s("div",o+"control-container",this.container);function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=g.map(function(S){return o+S}).join(" ");r[g.filter(function(S){return!["row","column"].includes(S)}).join("")]=$s("div",y,u)}function p(g){var y=g.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,Rn.Z)(y),[yu[g]])}Object.values(ts).forEach(function(g){c(p(g))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var r in this.controlCorners)this.controlCorners[r]&&pc(this.controlCorners[r]);this.controlContainer&&pc(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var r=this,o=window.MutationObserver;if(o)for(var u=function(){var y=p[c],S=y.match(/^(top|bottom)(left|right)$/);if(S){var P=(0,ji.Z)(S,3),L=P[1],Z=P[2],q=r.controlCorners["".concat(L).concat(Z)],ce=new o(function(me){var be=(0,ji.Z)(me,1),$e=be[0].target;q&&(q.style[L]=$e.clientHeight+"px")});ce.observe(r.controlCorners["".concat(Z).concat(L)],{childList:!0,attributes:!0})}},c=0,p=Object.keys(this.controlCorners);c<p.length;c++)u()}}]),e}())||gs),Ju,fl,Ou=(Ju=(0,kt.b2)(),Ju(fl=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"container",void 0),(0,Ve.Z)(this,"scene",void 0),(0,Ve.Z)(this,"mapsService",void 0),(0,Ve.Z)(this,"markers",[]),(0,Ve.Z)(this,"markerLayers",[]),(0,Ve.Z)(this,"unAddMarkers",[]),(0,Ve.Z)(this,"unAddMarkerLayers",[])}return(0,ct.Z)(e,[{key:"addMarkerLayer",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(r),r.addTo(this.scene)):this.unAddMarkerLayers.push(r)}},{key:"removeMarkerLayer",value:function(r){r.destroy(),this.markerLayers.indexOf(r);var o=this.markerLayers.indexOf(r);o>-1&&this.markerLayers.splice(o,1)}},{key:"addMarker",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(r),r.addTo(this.scene)):this.unAddMarkers.push(r)}},{key:"addMarkers",value:function(){var r=this;this.unAddMarkers.forEach(function(o){o.addTo(r.scene),r.markers.push(o)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var r=this;this.unAddMarkerLayers.forEach(function(o){r.markerLayers.push(o),o.addTo(r.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(r){r.remove(),this.markers.indexOf(r);var o=this.markers.indexOf(r);o>-1&&this.markers.splice(o,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Qt.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(r){r.remove()}),this.markers=[],this.markerLayers.forEach(function(r){r.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(r){r.destroy()}}]),e}())||fl),el,qa,rs=(el=(0,kt.b2)(),el(qa=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"scene",void 0),(0,Ve.Z)(this,"mapsService",void 0),(0,Ve.Z)(this,"popups",[]),(0,Ve.Z)(this,"unAddPopups",[])}return(0,ct.Z)(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(r){r!=null&&r.isOpen()&&r.remove();var o=this.popups.indexOf(r);o>-1&&this.popups.splice(o,1);var u=this.unAddPopups.indexOf(r);u>-1&&this.unAddPopups.splice(u,1)}},{key:"destroy",value:function(){this.popups.forEach(function(r){return r.remove()})}},{key:"addPopup",value:function(r){var o=this;r&&r.getOptions().autoClose&&[].concat((0,Rn.Z)(this.popups),(0,Rn.Z)(this.unAddPopups)).forEach(function(u){u.getOptions().autoClose&&o.removePopup(u)}),this.isMarkerReady?(r.addTo(this.scene),this.popups.push(r)):this.unAddPopups.push(r),r.on("close",function(){o.removePopup(r)})}},{key:"initPopup",value:function(){var r=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(o){r.addPopup(o),r.unAddPopups=[]})}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Qt.IMapService)}}]),e}())||qa),Oo=function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e}({}),yo=function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e}({}),hl=function(e){return e.AND="and",e.OR="or",e}({}),Xo=function(e){return e.INIT="init",e.UPDATE="update",e}({}),Fs={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},_u=Fs,Cl,Eo,jf=Aa.merge,Tl={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},$h={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:hl.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},xu=(Cl=(0,kt.b2)(),Cl(Eo=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"sceneConfigCache",{}),(0,Ve.Z)(this,"layerConfigCache",{}),(0,Ve.Z)(this,"layerAttributeConfigCache",{})}return(0,ct.Z)(e,[{key:"getSceneConfig",value:function(r){return this.sceneConfigCache[r]}},{key:"getSceneWarninfo",value:function(r){return _u[r]}},{key:"setSceneConfig",value:function(r,o){this.sceneConfigCache[r]=(0,ae.Z)((0,ae.Z)({},Tl),o)}},{key:"getLayerConfig",value:function(r){return this.layerConfigCache[r]}},{key:"setLayerConfig",value:function(r,o,u){this.layerConfigCache[o]=(0,ae.Z)({},jf({},this.sceneConfigCache[r],$h,u))}},{key:"getAttributeConfig",value:function(r){return this.layerAttributeConfigCache[r]}},{key:"setAttributeConfig",value:function(r,o){this.layerAttributeConfigCache[r]=(0,ae.Z)((0,ae.Z)({},this.layerAttributeConfigCache[r]),o)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||Eo);function Ba(e,n,r,o){r&&Object.defineProperty(e,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Ia(e,n,r,o,u){var c={};return Object.keys(o).forEach(function(p){c[p]=o[p]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=r.slice().reverse().reduce(function(p,g){return g(e,n,p)||p},c),u&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),c.initializer===void 0&&(Object.defineProperty(e,n,c),c=null),c}function Pp(){var e=new Qo.WT(4);return Qo.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Kd(e){var n=new glMatrix.ARRAY_TYPE(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function Qd(e,n,r,o){var u=new Qo.WT(4);return u[0]=e,u[1]=n,u[2]=r,u[3]=o,u}function kp(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function Jd(e,n,r,o,u){return e[0]=n,e[1]=r,e[2]=o,e[3]=u,e}function Cm(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e}function cd(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e}function Mg(e,n,r){return e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],e[3]=n[3]*r[3],e}function Tm(e,n,r){return e[0]=n[0]/r[0],e[1]=n[1]/r[1],e[2]=n[2]/r[2],e[3]=n[3]/r[3],e}function bu(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e[3]=Math.ceil(n[3]),e}function Dp(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e[3]=Math.floor(n[3]),e}function Fv(e,n,r){return e[0]=Math.min(n[0],r[0]),e[1]=Math.min(n[1],r[1]),e[2]=Math.min(n[2],r[2]),e[3]=Math.min(n[3],r[3]),e}function Rg(e,n,r){return e[0]=Math.max(n[0],r[0]),e[1]=Math.max(n[1],r[1]),e[2]=Math.max(n[2],r[2]),e[3]=Math.max(n[3],r[3]),e}function fd(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e[3]=Math.round(n[3]),e}function Bv(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}function Ig(e,n,r,o){return e[0]=n[0]+r[0]*o,e[1]=n[1]+r[1]*o,e[2]=n[2]+r[2]*o,e[3]=n[3]+r[3]*o,e}function P0(e,n){var r=n[0]-e[0],o=n[1]-e[1],u=n[2]-e[2],c=n[3]-e[3];return Math.hypot(r,o,u,c)}function Og(e,n){var r=n[0]-e[0],o=n[1]-e[1],u=n[2]-e[2],c=n[3]-e[3];return r*r+o*o+u*u+c*c}function k0(e){var n=e[0],r=e[1],o=e[2],u=e[3];return Math.hypot(n,r,o,u)}function x_(e){var n=e[0],r=e[1],o=e[2],u=e[3];return n*n+r*r+o*o+u*u}function D0(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}function uc(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}function _h(e,n){var r=n[0],o=n[1],u=n[2],c=n[3],p=r*r+o*o+u*u+c*c;return p>0&&(p=1/Math.sqrt(p)),e[0]=r*p,e[1]=o*p,e[2]=u*p,e[3]=c*p,e}function ns(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}function zc(e,n,r,o){var u=r[0]*o[1]-r[1]*o[0],c=r[0]*o[2]-r[2]*o[0],p=r[0]*o[3]-r[3]*o[0],g=r[1]*o[2]-r[2]*o[1],y=r[1]*o[3]-r[3]*o[1],S=r[2]*o[3]-r[3]*o[2],P=n[0],L=n[1],Z=n[2],q=n[3];return e[0]=L*S-Z*y+q*g,e[1]=-(P*S)+Z*p-q*c,e[2]=P*y-L*p+q*u,e[3]=-(P*g)+L*c-Z*u,e}function L0(e,n,r,o){var u=n[0],c=n[1],p=n[2],g=n[3];return e[0]=u+o*(r[0]-u),e[1]=c+o*(r[1]-c),e[2]=p+o*(r[2]-p),e[3]=g+o*(r[3]-g),e}function Pg(e,n){n=n||1;var r,o,u,c,p,g;do r=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,p=r*r+o*o;while(p>=1);do u=glMatrix.RANDOM()*2-1,c=glMatrix.RANDOM()*2-1,g=u*u+c*c;while(g>=1);var y=Math.sqrt((1-p)/g);return e[0]=n*r,e[1]=n*o,e[2]=n*u*y,e[3]=n*c*y,e}function xh(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3];return e[0]=r[0]*o+r[4]*u+r[8]*c+r[12]*p,e[1]=r[1]*o+r[5]*u+r[9]*c+r[13]*p,e[2]=r[2]*o+r[6]*u+r[10]*c+r[14]*p,e[3]=r[3]*o+r[7]*u+r[11]*c+r[15]*p,e}function Nv(e,n,r){var o=n[0],u=n[1],c=n[2],p=r[0],g=r[1],y=r[2],S=r[3],P=S*o+g*c-y*u,L=S*u+y*o-p*c,Z=S*c+p*u-g*o,q=-p*o-g*u-y*c;return e[0]=P*S+q*-p+L*-y-Z*-g,e[1]=L*S+q*-g+Z*-p-P*-y,e[2]=Z*S+q*-y+P*-g-L*-p,e[3]=n[3],e}function Am(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function zv(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function hd(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}function kg(e,n){var r=e[0],o=e[1],u=e[2],c=e[3],p=n[0],g=n[1],y=n[2],S=n[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}var b_=null,S_=null,E_=null,XE=null,Mm=null,Su=null,bh=null,YE=function(){var e=Pp();return function(n,r,o,u,c,p){var g,y;for(r||(r=4),o||(o=0),u?y=Math.min(u*r+o,n.length):y=n.length,g=o;g<y;g+=r)e[0]=n[g],e[1]=n[g+1],e[2]=n[g+2],e[3]=n[g+3],c(e,e,p),n[g]=e[0],n[g+1]=e[1],n[g+2]=e[2],n[g+3]=e[3];return n}}(),Xh=Math.PI/180,F0=512,B0=4003e4;function Dg(e){var n=e.latitude,r=n===void 0?0:n,o=e.zoom,u=o===void 0?0:o,c=e.scale,p=e.highPrecision,g=p===void 0?!1:p,y=e.flipY,S=y===void 0?!1:y;c=c!==void 0?c:Math.pow(2,u);var P={},L=F0*c,Z=Math.cos(r*Xh),q=L/360,ce=q/Z,me=L/B0/Z;if(P.pixelsPerMeter=[me,-me,me],P.metersPerPixel=[1/me,-1/me,1/me],P.pixelsPerDegree=[q,-ce,me],P.degreesPerPixel=[1/q,-1/ce,1/me],g){var be=Xh*Math.tan(r*Xh)/Z,$e=q*be/2,ft=L/B0*be,mt=ft/ce*me;P.pixelsPerDegree2=[0,-$e,ft],P.pixelsPerMeter2=[mt,0,mt],S&&(P.pixelsPerDegree2[1]=-P.pixelsPerDegree2[1],P.pixelsPerMeter2[1]=-P.pixelsPerMeter2[1])}return S&&(P.pixelsPerMeter[1]=-P.pixelsPerMeter[1],P.metersPerPixel[1]=-P.metersPerPixel[1],P.pixelsPerDegree[1]=-P.pixelsPerDegree[1],P.degreesPerPixel[1]=-P.degreesPerPixel[1]),P}var Pu=function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2",e}({}),Hf={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ev,pd,dd,vd,Lg,gd=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],N0=(ev=(0,kt.b2)(),pd=(0,kt.f3)(Qt.ICameraService),ev(dd=(vd=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"needRefresh",!0),Ba(this,"cameraService",Lg,this),(0,Ve.Z)(this,"coordinateSystem",void 0),(0,Ve.Z)(this,"viewportCenter",void 0),(0,Ve.Z)(this,"viewportCenterProjection",void 0),(0,Ve.Z)(this,"pixelsPerDegree",void 0),(0,Ve.Z)(this,"pixelsPerDegree2",void 0),(0,Ve.Z)(this,"pixelsPerMeter",void 0)}return(0,ct.Z)(e,[{key:"refresh",value:function(r){var o=this.cameraService.getZoom(),u=this.cameraService.getZoomScale(),c=r||this.cameraService.getCenter(),p=Dg({latitude:c[1],zoom:o}),g=p.pixelsPerMeter,y=p.pixelsPerDegree;this.viewportCenter=c,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Pu.LNGLAT||this.coordinateSystem===Pu.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Pu.LNGLAT_OFFSET?this.calculateLnglatOffset(c,o):this.coordinateSystem===Pu.P20_OFFSET&&this.calculateLnglatOffset(c,o,u,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(r){this.coordinateSystem=r}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(r,o,u,c){var p=Dg({latitude:r[1],zoom:o,scale:u,flipY:c,highPrecision:!0}),g=p.pixelsPerMeter,y=p.pixelsPerDegree,S=p.pixelsPerDegree2,P=this.cameraService.getViewMatrix(),L=this.cameraService.getProjectionMatrix(),Z=Vu([],L,P),q=this.cameraService.projectFlat([Math.fround(r[0]),Math.fround(r[1])],Math.pow(2,o));this.viewportCenterProjection=xh([],[q[0],q[1],0,1],Z),P=this.cameraService.getViewMatrixUncentered()||P,Z=Vu([],L,P),Z=Vu([],Z,gd),this.cameraService.setViewProjectionMatrix(Z),this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=S}}]),e}(),Lg=Ia(vd.prototype,"cameraService",[pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vd))||dd),Rm,Lp;function Im(e){var n=Om();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Om(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Uc=(Rm=(0,kt.b2)(),Rm(Lp=function(e){(0,gr.Z)(r,e);var n=Im(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"renderMap",new Map),(0,Ve.Z)((0,Mr.Z)(o),"enable",!1),(0,Ve.Z)((0,Mr.Z)(o),"renderEnable",!1),(0,Ve.Z)((0,Mr.Z)(o),"cacheLogs",{}),o}return(0,ct.Z)(r,[{key:"setEnable",value:function(u){this.enable=!!u}},{key:"log",value:function(u,c){var p=this;if(this.enable){var g=u.split("."),y=null;g.forEach(function(S,P){y!==null?(y[S]||(y[S]={}),P!==g.length-1&&(y=y[S])):(p.cacheLogs[S]||(p.cacheLogs[S]={}),P!==g.length-1&&(y=p.cacheLogs[S])),P===g.length-1&&(y[S]=(0,ae.Z)((0,ae.Z)({time:Date.now()},y[S]),c))})}}},{key:"getLog",value:function(u){var c=this;switch((0,vs.Z)(u)){case"string":return this.cacheLogs[u];case"object":return u.map(function(p){return c.cacheLogs[p]}).filter(function(p){return p!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(u){delete this.cacheLogs[u]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Qc():""}},{key:"renderDebug",value:function(u){this.renderEnable=u}},{key:"renderStart",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u)||{};this.renderMap.set(u,(0,ae.Z)((0,ae.Z)({},c),{},{renderUid:u,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u);if(c){var p=c.renderStart,g=Date.now();this.emit("renderEnd",(0,ae.Z)((0,ae.Z)({},c),{},{renderEnd:g,renderDuration:g-p})),this.renderMap.delete(u)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),r}(Es.EventEmitter))||Lp),Fp=k(50840),md=k.n(Fp),ju=function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e}({}),Pm,km,Yh,yd,_d;function tv(e){var n=Uv();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Uv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var w_={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},C_=(Pm=(0,kt.b2)(),km=(0,kt.f3)(Qt.IMapService),Pm(Yh=(yd=function(e){(0,gr.Z)(r,e);var n=tv(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"indragging",!1),Ba((0,Mr.Z)(o),"mapService",_d,(0,Mr.Z)(o)),(0,Ve.Z)((0,Mr.Z)(o),"hammertime",void 0),(0,Ve.Z)((0,Mr.Z)(o),"lastClickTime",0),(0,Ve.Z)((0,Mr.Z)(o),"lastClickXY",[-1,-1]),(0,Ve.Z)((0,Mr.Z)(o),"clickTimer",void 0),(0,Ve.Z)((0,Mr.Z)(o),"$containter",void 0),(0,Ve.Z)((0,Mr.Z)(o),"onDrag",function(g){var y=o.interactionEvent(g);y.type=w_[y.type],y.type==="dragging"?o.indragging=!0:o.indragging=!1,o.emit(ju.Drag,y)}),(0,Ve.Z)((0,Mr.Z)(o),"onHammer",function(g){g.srcEvent.stopPropagation();var y=o.interactionEvent(g);o.emit(ju.Hover,y)}),(0,Ve.Z)((0,Mr.Z)(o),"onTouch",function(g){var y=g.touches[0];o.onHover({clientX:y.clientX,clientY:y.clientY,type:"touchstart"})}),(0,Ve.Z)((0,Mr.Z)(o),"onTouchEnd",function(g){if(g.changedTouches.length>0){var y=g.changedTouches[0];o.onHover({clientX:y.clientX,clientY:y.clientY,type:"touchend"})}}),(0,Ve.Z)((0,Mr.Z)(o),"onTouchMove",function(g){var y=g.changedTouches[0];o.onHover({clientX:y.clientX,clientY:y.clientY,type:"touchmove"})}),(0,Ve.Z)((0,Mr.Z)(o),"onHover",function(g){var y=g.clientX,S=g.clientY,P=y,L=S,Z=g.type,q=o.mapService.getMapContainer();if(q){var ce=q.getBoundingClientRect(),me=ce.top,be=ce.left;P=P-be-q.clientLeft,L=L-me-q.clientTop}var $e=o.mapService.containerToLngLat([P,L]);if(Z==="click"){o.isDoubleTap(P,L,$e);return}if(Z==="touch"){o.isDoubleTap(P,L,$e);return}Z!=="click"&&Z!=="dblclick"&&o.emit(ju.Hover,{x:P,y:L,lngLat:$e,type:Z,target:g})}),o}return(0,ct.Z)(r,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(ju.Hover)}},{key:"triggerHover",value:function(u){var c=u.x,p=u.y;this.emit(ju.Hover,{x:c,y:p})}},{key:"triggerSelect",value:function(u){this.emit(ju.Select,{featureId:u})}},{key:"triggerActive",value:function(u){this.emit(ju.Active,{featureId:u})}},{key:"addEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();if(u){var c=new(md()).Manager(u);c.add(new(md()).Tap({event:"dblclick",taps:2})),c.add(new(md()).Tap({event:"click"})),c.add(new(md()).Pan({threshold:0,pointers:0})),c.add(new(md()).Press({})),c.on("dblclick click",this.onHammer),c.on("panstart panmove panend pancancel",this.onDrag),u.addEventListener("touchstart",this.onTouch),u.addEventListener("touchend",this.onTouchEnd),u.addEventListener("mousemove",this.onHover),u.addEventListener("touchmove",this.onTouchMove),u.addEventListener("mousedown",this.onHover,!0),u.addEventListener("mouseup",this.onHover),u.addEventListener("contextmenu",this.onHover),this.hammertime=c}}},{key:"removeEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();u&&(u.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),u.removeEventListener("touchstart",this.onTouch),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("mousedown",this.onHover),u.removeEventListener("mouseup",this.onHover),u.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(u){var c=u.type,p=u.pointerType,g,y;p==="touch"?(y=Math.floor(u.pointers[0].clientY),g=Math.floor(u.pointers[0].clientX)):(y=Math.floor(u.srcEvent.y),g=Math.floor(u.srcEvent.x));var S=this.mapService.getMapContainer();if(S){var P=S.getBoundingClientRect(),L=P.top,Z=P.left;g-=Z,y-=L}var q=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:q,type:c,target:u.srcEvent}}},{key:"isDoubleTap",value:function(u,c,p){var g=this,y=new Date().getTime(),S="click";y-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-u)<10&&Math.abs(this.lastClickXY[1]-c)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),S="dblclick",this.emit(ju.Hover,{x:u,y:c,lngLat:p,type:S})):(this.lastClickTime=y,this.lastClickXY=[u,c],this.clickTimer=setTimeout(function(){S="click",g.emit(ju.Hover,{x:u,y:c,lngLat:p,type:S})},400))}}]),r}(Sp()),_d=Ia(yd.prototype,"mapService",[km],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yd))||Yh),T_=0;function Dm(e){var n=e;if(typeof e=="string"&&(n=document.getElementById(e)),n){var r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id="l7-scene-".concat(T_++),r.classList.add("l7-scene"),n.appendChild(r),r}return null}function z0(e){var n,r=!0;if((e==null||(n=e.target)===null||n===void 0?void 0:n.target)instanceof HTMLElement)for(var o,u=e==null||(o=e.target)===null||o===void 0?void 0:o.target;u;){var c,p=Array.from(u.classList);if(p.includes("l7-marker")||p.includes("l7-popup")){r=!1;break}u=(c=u)===null||c===void 0?void 0:c.parentElement}return r}var Zc=function(e){return e[e.SAMPLED=0]="SAMPLED",e[e.RENDER_TARGET=1]="RENDER_TARGET",e}({}),qh,U0,rv,Lm,Z0,Fg,V0,xd,Dl,Kh,Zv,j0,Bg;function Zx(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=A_(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function A_(e,n){if(e){if(typeof e=="string")return H0(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H0(e,n)}}function H0(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var Vx=(qh=(0,kt.b2)(),U0=(0,kt.f3)(Qt.IMapService),rv=(0,kt.f3)(Qt.IRendererService),Lm=(0,kt.f3)(Qt.IGlobalConfigService),Z0=(0,kt.f3)(Qt.IInteractionService),Fg=(0,kt.f3)(Qt.ILayerService),qh(V0=(xd=function(){function e(){var n=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"pickedColors",void 0),(0,Ve.Z)(this,"pickedTileLayers",[]),Ba(this,"mapService",Dl,this),Ba(this,"rendererService",Kh,this),Ba(this,"configService",Zv,this),Ba(this,"interactionService",j0,this),Ba(this,"layerService",Bg,this),(0,Ve.Z)(this,"pickingFBO",void 0),(0,Ve.Z)(this,"width",0),(0,Ve.Z)(this,"height",0),(0,Ve.Z)(this,"alreadyInPicking",!1),(0,Ve.Z)(this,"pickBufferScale",1),(0,Ve.Z)(this,"pickFromPickingFBO",function(){var r=(0,pn.Z)(Jt().mark(function o(u,c){var p,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar,nr,Yt,Cr,Nr,nn,an,Nn;return Jt().wrap(function(di){for(;;)switch(di.prev=di.next){case 0:if(p=c.x,g=c.y,y=c.lngLat,S=c.type,P=c.target,L=!1,Z=n.rendererService,q=Z.readPixelsAsync,ce=Z.getContainer,me=n.getContainerSize(ce()),be=me.width,$e=me.height,be*=Is,$e*=Is,ft=u.getLayerConfig(),mt=ft.enableHighlight,zt=ft.enableSelect,ar=p*Is,nr=g*Is,!(ar>be-1*Is||ar<0||nr>$e-1*Is||nr<0)){di.next=11;break}return di.abrupt("return",!1);case 11:return di.next=13,q({x:Math.floor(ar/n.pickBufferScale),y:Math.floor(($e-(g+1)*Is)/n.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:n.pickingFBO});case 13:return Yt=di.sent,n.pickedColors=Yt,Yt[0]!==0||Yt[1]!==0||Yt[2]!==0?(Cr=ec(Yt),Nr=u.layerPickService.getFeatureById(Cr),Cr!==u.getCurrentPickId()&&S==="mousemove"&&(S="mouseenter"),nn={x:p,y:g,type:S,lngLat:y,featureId:Cr,feature:Nr,target:P},Nr&&(L=!0,u.setCurrentPickId(Cr),n.triggerHoverOnLayer(u,nn))):(an={x:p,y:g,lngLat:y,type:u.getCurrentPickId()!==null&&S==="mousemove"?"mouseout":"un"+S,featureId:null,target:P,feature:null},n.triggerHoverOnLayer(u,(0,ae.Z)((0,ae.Z)({},an),{},{type:"unpick"})),n.triggerHoverOnLayer(u,an),u.setCurrentPickId(null)),mt&&u.layerPickService.highlightPickedFeature(Yt),zt&&S==="click"&&(Yt==null?void 0:Yt.toString())!==[0,0,0,0].toString()&&(Nn=ec(Yt),u.getCurrentSelectedId()===null||Nn!==u.getCurrentSelectedId()?(u.layerPickService.selectFeature(Yt),u.setCurrentSelectedId(Nn)):(u.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),u.setCurrentSelectedId(null))),di.abrupt("return",L);case 19:case"end":return di.stop()}},o)}));return function(o,u){return r.apply(this,arguments)}}())}return(0,ct.Z)(e,[{key:"init",value:function(r){var o=this.rendererService,u=o.createTexture2D,c=o.createFramebuffer,p=o.getContainer,g=this.getContainerSize(p()),y=g.width,S=g.height;y*=Is,S*=Is,this.pickBufferScale=this.configService.getSceneConfig(r).pickBufferScale||1,y=Math.round(y/this.pickBufferScale),S=Math.round(S/this.pickBufferScale);var P=u({width:y,height:S,usage:Zc.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=c({color:P,depth:!0,width:y,height:S}),this.interactionService.on(ju.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c,p){var g=this,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return y=this.rendererService,S=y.useFramebufferAsync,P=y.clear,this.resizePickingFBO(),u.hooks.beforePickingEncode.call(),q.next=5,S(this.pickingFBO,(0,pn.Z)(Jt().mark(function ce(){return Jt().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:P({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),u.renderModels({ispick:!0});case 2:case"end":return be.stop()}},ce)})));case 5:return u.hooks.afterPickingEncode.call(),q.next=8,this.pickBox(u,c);case 8:L=q.sent,p(L);case 10:case"end":return q.stop()}},o,this)}));function r(o,u,c){return n.apply(this,arguments)}return r}()},{key:"pickBox",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){var p=this,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar,nr,Yt,Cr,Nr,nn,an;return Jt().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:if(g=c.map(function(di){var Ua=di<0?0:di;return Math.floor(Ua*Is/p.pickBufferScale)}),y=(0,ji.Z)(g,4),S=y[0],P=y[1],L=y[2],Z=y[3],q=this.rendererService,ce=q.readPixelsAsync,me=q.getContainer,be=this.getContainerSize(me()),$e=be.width,ft=be.height,$e*=Is,ft*=Is,!(S>($e-1)*Is/this.pickBufferScale||L<0||P>(ft-1)*Is/this.pickBufferScale||Z<0)){jn.next=7;break}return jn.abrupt("return",[]);case 7:return mt=Math.min($e/this.pickBufferScale,L)-S,zt=Math.min(ft/this.pickBufferScale,Z)-P,jn.next=11,ce({x:S,y:Math.floor(ft/this.pickBufferScale-(Z+1)),width:mt,height:zt,data:new Uint8Array(mt*zt*4),framebuffer:this.pickingFBO});case 11:for(ar=jn.sent,nr=[],Yt={},Cr=0;Cr<ar.length/4;Cr=Cr+1)Nr=ar.slice(Cr*4,Cr*4+4),nn=ec(Nr),nn!==-1&&!Yt[nn]&&(an=u.layerPickService.getFeatureById(nn),nr.push((0,ae.Z)((0,ae.Z)({},an),{},{pickedFeatureIdx:nn})),Yt[nn]=!0);return jn.abrupt("return",nr);case 16:case"end":return jn.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"handleCursor",value:function(r,o){var u=r.getLayerConfig(),c=u.cursor,p=c===void 0?"":c,g=u.cursorEnabled;if(g){var y=this.mapService.version,S=y==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),P=S==null?void 0:S.style.getPropertyValue("cursor");o==="unmousemove"&&P!==""?S==null||S.style.setProperty("cursor",""):o==="mousemove"&&(S==null||S.style.setProperty("cursor",p))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(r){return r.getContext?{width:r.width/Is,height:r.height/Is}:r.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!this.layerService.needPick(u.type)||!this.isPickingAllLayer())){p.next=2;break}return p.abrupt("return");case 2:return this.alreadyInPicking=!0,p.next=5,this.pickingLayers(u);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return p.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var r=this.rendererService.getContainer,o=this.getContainerSize(r()),u=o.width,c=o.height;u*=Is,c*=Is,(this.width!==u||this.height!==c)&&(this.pickingFBO.resize({width:Math.round(u/this.pickBufferScale),height:Math.round(c/this.pickBufferScale)}),this.width=u,this.height=c)}},{key:"pickingLayers",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){var c=this,p,g,y,S,P,L,Z;return Jt().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:p=this.rendererService,g=p.clear,y=p.useFramebufferAsync,this.resizePickingFBO(),S=this.layerService.getRenderList(),P=Zx(S.filter(function(me){return me.needPick(u.type)}).reverse()),ce.prev=4,Z=Jt().mark(function me(){var be,$e;return Jt().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return be=L.value,mt.next=3,y(c.pickingFBO,(0,pn.Z)(Jt().mark(function zt(){return Jt().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:g({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),be.layerPickService.pickRender(u);case 2:case"end":return nr.stop()}},zt)})));case 3:return mt.next=5,c.pickFromPickingFBO(be,u);case 5:if($e=mt.sent,c.layerService.pickedLayerId=$e?+be.id:-1,!($e&&!be.getLayerConfig().enablePropagation)){mt.next=9;break}return mt.abrupt("return",1);case 9:case"end":return mt.stop()}},me)}),P.s();case 7:if((L=P.n()).done){ce.next=13;break}return ce.delegateYield(Z(),"t0",9);case 9:if(!ce.t0){ce.next=11;break}return ce.abrupt("break",13);case 11:ce.next=7;break;case 13:ce.next=18;break;case 15:ce.prev=15,ce.t1=ce.catch(4),P.e(ce.t1);case 18:return ce.prev=18,P.f(),ce.finish(18);case 21:case"end":return ce.stop()}},o,this,[[4,15,18,21]])}));function r(o){return n.apply(this,arguments)}return r}()},{key:"triggerHoverOnLayer",value:function(r,o){z0(o)&&(this.handleCursor(r,o.type),r.emit(o.type,o))}}]),e}(),Dl=Ia(xd.prototype,"mapService",[U0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh=Ia(xd.prototype,"rendererService",[rv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zv=Ia(xd.prototype,"configService",[Lm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j0=Ia(xd.prototype,"interactionService",[Z0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg=Ia(xd.prototype,"layerService",[Fg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xd))||V0),W0=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,It.Z)(this,e),(0,Ve.Z)(this,"autoStart",void 0),(0,Ve.Z)(this,"startTime",0),(0,Ve.Z)(this,"oldTime",0),(0,Ve.Z)(this,"running",!1),(0,Ve.Z)(this,"elapsedTime",0),this.autoStart=n}return(0,ct.Z)(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance=="undefined"?Date:performance).now();r=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=r}return r}}]),e}(),M_,G0,Vv,R_,I_,sf,Ng,jv,nv;function zg(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=jx(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function jx(e,n){if(e){if(typeof e=="string")return Hx(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hx(e,n)}}function Hx(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function KR(e){var n=QR();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function QR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qE=Aa.throttle,JR=(M_=(0,kt.b2)(),G0=(0,kt.f3)(Qt.IRendererService),Vv=(0,kt.f3)(Qt.IMapService),R_=(0,kt.f3)(Qt.IDebugService),M_(I_=(sf=function(e){(0,gr.Z)(r,e);var n=KR(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"pickedLayerId",-1),(0,Ve.Z)((0,Mr.Z)(o),"clock",new W0),(0,Ve.Z)((0,Mr.Z)(o),"alreadyInRendering",!1),(0,Ve.Z)((0,Mr.Z)(o),"layers",[]),(0,Ve.Z)((0,Mr.Z)(o),"layerList",[]),(0,Ve.Z)((0,Mr.Z)(o),"layerRenderID",void 0),(0,Ve.Z)((0,Mr.Z)(o),"sceneInited",!1),(0,Ve.Z)((0,Mr.Z)(o),"animateInstanceCount",0),(0,Ve.Z)((0,Mr.Z)(o),"shaderPicking",!0),(0,Ve.Z)((0,Mr.Z)(o),"enableRender",!0),Ba((0,Mr.Z)(o),"renderService",Ng,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"mapService",jv,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"debugService",nv,(0,Mr.Z)(o)),(0,Ve.Z)((0,Mr.Z)(o),"reRender",qE(function(){o.renderLayers()},32)),(0,Ve.Z)((0,Mr.Z)(o),"throttleRenderLayers",qE(function(){o.renderLayers()},16)),o}return(0,ct.Z)(r,[{key:"needPick",value:function(u){return this.layerList.some(function(c){return c.needPick(u)})}},{key:"add",value:function(u){var c=this;this.layers.push(u),this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"addMask",value:function(u){var c=this;this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"initLayers",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var S=(0,pn.Z)(Jt().mark(function P(L){return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(L.startInit){q.next=4;break}return q.next=3,L.init();case 3:p.updateLayerRenderList();case 4:case"end":return q.stop()}},P)}));return function(P){return S.apply(this,arguments)}}());case 2:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(u){return this.layers.find(function(c){return c.id===u})}},{key:"getLayerByName",value:function(u){return this.layers.find(function(c){return c.name===u})}},{key:"remove",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p,g){var y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:g?(y=g.layerChildren.indexOf(p),y>-1&&g.layerChildren.splice(y,1)):(S=this.layers.indexOf(p),S>-1&&this.layers.splice(S,1)),p.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return L.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"removeAllLayers",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.destroy(),this.reRender();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"setEnableRender",value:function(u){this.enableRender=u}},{key:"renderLayers",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q,ce;return Jt().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){be.next=2;break}return be.abrupt("return");case 2:this.updateLayerRenderList(),p=this.debugService.generateRenderUid(),this.debugService.renderStart(p),this.alreadyInRendering=!0,this.clear(),g=zg(this.layerList);try{for(g.s();!(y=g.n()).done;)S=y.value,S.prerender()}catch($e){g.e($e)}finally{g.f()}this.renderService.beginFrame(),P=zg(this.layerList),be.prev=11,P.s();case 13:if((L=P.n()).done){be.next=25;break}if(Z=L.value,q=Z.getLayerConfig(),ce=q.enableMask,Z.masks.filter(function($e){return $e.inited}).length>0&&ce&&this.renderMask(Z.masks),!Z.getLayerConfig().enableMultiPassRenderer){be.next=22;break}return be.next=20,Z.renderMultiPass();case 20:be.next=23;break;case 22:Z.render();case 23:be.next=13;break;case 25:be.next=30;break;case 27:be.prev=27,be.t0=be.catch(11),P.e(be.t0);case 30:return be.prev=30,P.f(),be.finish(30);case 33:this.renderService.endFrame(),this.debugService.renderEnd(p),this.alreadyInRendering=!1;case 36:case"end":return be.stop()}},c,this,[[11,27,30,33]])}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMask",value:function(u){var c=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var p=u.length>1?yo.MULTIPLE:yo.SINGLE,g=zg(u),y;try{for(g.s();!(y=g.n()).done;){var S=y.value;S.render({isStencil:!0,stencilType:p,stencilIndex:c++})}}catch(P){g.e(P)}finally{g.f()}}},{key:"beforeRenderData",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,p.hooks.beforeRenderData.promise();case 2:g=S.sent,g&&this.renderLayers();case 4:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderTileLayerMask",value:function(u){var c=0,p=u.getLayerConfig(),g=p.enableMask,y=g===void 0?!0:g,S=u.tileMask?1:0,P=u.masks.filter(function(me){return me.inited});S=S+(y?P.length:1);var L=S>1?yo.MULTIPLE:yo.SINGLE;if((u.tileMask||P.length&&y)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),P.length&&y){var Z=zg(P),q;try{for(Z.s();!(q=Z.n()).done;){var ce=q.value;ce.render({isStencil:!0,stencilType:L,stencilIndex:c++})}}catch(me){Z.e(me)}finally{Z.f()}}u.tileMask&&u.tileMask.render({isStencil:!0,stencilType:L,stencilIndex:c++,stencilOperation:hl.OR})}},{key:"renderTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.renderTileLayerMask(p),!p.getLayerConfig().enableMultiPassRenderer){y.next=6;break}return y.next=4,p.renderMultiPass();case 4:y.next=8;break;case 6:return y.next=8,p.render();case 8:case"end":return y.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateLayerRenderList",value:function(){var u=this;this.layerList=[],this.layers.filter(function(c){return c.inited}).filter(function(c){return c.isVisible()}).sort(function(c,p){return c.zIndex-p.zIndex}).forEach(function(c){u.layerList.push(c)})}},{key:"destroy",value:function(){this.layers.forEach(function(u){u.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var u=bo(this.mapService.bgColor);this.renderService.clear({color:u,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),r}(Es.EventEmitter),Ng=Ia(sf.prototype,"renderService",[G0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jv=Ia(sf.prototype,"mapService",[Vv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv=Ia(sf.prototype,"debugService",[R_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf))||I_),Vc=k(45987),Ct=function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e}({}),e3=Aa.isNil,t3=function(){function e(n){var r=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"name",void 0),(0,Ve.Z)(this,"type",void 0),(0,Ve.Z)(this,"scale",void 0),(0,Ve.Z)(this,"descriptor",void 0),(0,Ve.Z)(this,"featureBufferLayout",[]),(0,Ve.Z)(this,"needRescale",!1),(0,Ve.Z)(this,"needRemapping",!1),(0,Ve.Z)(this,"needRegenerateVertices",!1),(0,Ve.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,Ve.Z)(this,"vertexAttribute",void 0),(0,Ve.Z)(this,"defaultCallback",function(o){if(o.length===0){var u;return((u=r.scale)===null||u===void 0?void 0:u.defaultValues)||[]}return o.map(function(c,p){var g,y=(g=r.scale)===null||g===void 0?void 0:g.scalers[p].func,S=y(c);return S})}),this.setProps(n)}return(0,ct.Z)(e,[{key:"setProps",value:function(r){Object.assign(this,r)}},{key:"mapping",value:function(r){var o;if((o=this.scale)!==null&&o!==void 0&&o.callback){var u,c=(u=this.scale)===null||u===void 0?void 0:u.callback.apply(u,(0,Rn.Z)(r));if(!e3(c))return[c]}return this.defaultCallback(r)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),r3=["buffer","update","name"],n3=["buffer","update","name"],$0,Wx,Gx,$x,Xx,KE,i3=($0={},(0,Ve.Z)($0,Ct.FLOAT,4),(0,Ve.Z)($0,Ct.UNSIGNED_BYTE,1),(0,Ve.Z)($0,Ct.UNSIGNED_SHORT,2),$0),Yx=(Wx=(0,kt.b2)(),Gx=(0,kt.f3)(Qt.IRendererService),Wx($x=(Xx=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"attributesAndIndices",void 0),Ba(this,"rendererService",KE,this),(0,Ve.Z)(this,"attributes",[]),(0,Ve.Z)(this,"triangulation",void 0),(0,Ve.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,ct.Z)(e,[{key:"registerStyleAttribute",value:function(r){var o=this.getLayerStyleAttribute(r.name||"");return o?o.setProps(r):(o=new t3(r),this.attributes.push(o)),o}},{key:"unRegisterStyleAttribute",value:function(r){var o=this.attributes.findIndex(function(u){return u.name===r});o>-1&&this.attributes.splice(o,1)}},{key:"updateScaleAttribute",value:function(r){this.attributes.forEach(function(o){var u,c=o.name,p=(u=o.scale)===null||u===void 0?void 0:u.field;(r[c]||p&&r[p])&&(o.needRescale=!0,o.needRemapping=!0,o.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(r,o,u){var c=this.getLayerStyleAttribute(r);c||(c=this.registerStyleAttribute((0,ae.Z)((0,ae.Z)({},o),{},{name:r})));var p=o.scale;p&&c&&(c.scale=p,c.needRescale=!0,c.needRemapping=!0,c.needRegenerateVertices=!0,u&&u.featureRange&&(c.featureRange=u.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(r){return this.attributes.find(function(o){return o.name===r})}},{key:"getLayerAttributeScale",value:function(r){var o,u=this.getLayerStyleAttribute(r),c=u==null||(o=u.scale)===null||o===void 0?void 0:o.scalers;return c&&c[0]?c[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0,g=this.attributes.find(function(ar){return ar.name===r});if(g&&g.descriptor){var y=g.descriptor,S=y.update,P=y.buffer,L=y.size,Z=L===void 0?0:L,q=i3[P.type||Ct.FLOAT];if(S){var ce=this.featureLayout,me=ce.elements,be=ce.sizePerElement,$e=me.slice(u,c);if(!$e.length)return;var ft=$e[0].offset,mt=ft*Z*q,zt=$e.map(function(ar,nr){for(var Yt=ar.featureIdx,Cr=ar.vertices,Nr=ar.normals,nn=Cr.length/be,an=[],Nn=0;Nn<nn;Nn++){var jn=Nr?Nr.slice(Nn*3,Nn*3+3):[];an.push.apply(an,(0,Rn.Z)(S(o[Yt],Yt,Cr.slice(Nn*be,Nn*be+be),nr,jn)))}return an}).flat();g.vertexAttribute.updateBuffer({data:zt,offset:mt}),p==null||p.emit("legend:".concat(r),{type:r,attr:g})}}}},{key:"createAttributesAndIndices",value:function(r,o,u){var c=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var p=this.attributes.map(function($e){return $e.resetDescriptor(),$e.descriptor}),g=0,y=0,S=[],P=3;r.forEach(function($e,ft){var mt=c.triangulation($e,u),zt=mt.indices,ar=mt.vertices,nr=mt.normals,Yt=mt.size,Cr=mt.indexes,Nr=mt.count;typeof Nr=="number"&&(y+=Nr),zt.forEach(function(jn){S.push(jn+g)}),P=Yt;var nn=ar.length/Yt;c.featureLayout.sizePerElement=P,c.featureLayout.elements.push({featureIdx:ft,vertices:ar,normals:nr,offset:g}),g+=nn;for(var an=function(di){var Ua=(nr==null?void 0:nr.slice(di*3,di*3+3))||[],Co=ar.slice(di*Yt,di*Yt+Yt),os=0;Cr&&Cr[di]!==void 0&&(os=Cr[di]),p.forEach(function(nu,pu){if(nu&&nu.update){var cf;(cf=nu.buffer.data).push.apply(cf,(0,Rn.Z)(nu.update($e,ft,Co,di,Ua,os)))}})},Nn=0;Nn<nn;Nn++)an(Nn)});var L=this.rendererService,Z=L.createAttribute,q=L.createBuffer,ce=L.createElements,me={};p.forEach(function($e,ft){if($e){var mt=$e.buffer,zt=$e.update,ar=$e.name,nr=(0,Vc.Z)($e,r3),Yt=Z((0,ae.Z)({buffer:q(mt)},nr));me[$e.name||""]=Yt,c.attributes[ft].vertexAttribute=Yt}});var be=ce({data:S,type:Ct.UNSIGNED_INT,count:S.length});return this.attributesAndIndices={attributes:me,elements:be,count:y},this.attributesAndIndices}},{key:"createAttributes",value:function(r,o){var u=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var c=this.attributes.map(function(q){return q.resetDescriptor(),q.descriptor}),p=0,g=[],y=3;r.forEach(function(q,ce){var me=u.triangulation(q),be=me.indices,$e=me.vertices,ft=me.normals,mt=me.size,zt=me.indexes;be.forEach(function(Cr){g.push(Cr+p)}),y=mt;var ar=$e.length/mt;u.featureLayout.sizePerElement=y,u.featureLayout.elements.push({featureIdx:ce,vertices:$e,normals:ft,offset:p}),p+=ar;for(var nr=function(Nr){var nn=(ft==null?void 0:ft.slice(Nr*3,Nr*3+3))||[],an=$e.slice(Nr*mt,Nr*mt+mt),Nn=0;zt&&zt[Nr]!==void 0&&(Nn=zt[Nr]),c.forEach(function(jn,di){if(jn&&jn.update){var Ua;(Ua=jn.buffer.data).push.apply(Ua,(0,Rn.Z)(jn.update(q,ce,an,Nr,nn,Nn)))}})},Yt=0;Yt<ar;Yt++)nr(Yt)});var S=this.rendererService,P=S.createAttribute,L=S.createBuffer,Z={};return c.forEach(function(q,ce){if(q){var me=q.buffer,be=q.update,$e=q.name,ft=(0,Vc.Z)(q,n3),mt=P((0,ae.Z)({buffer:L(me)},ft));Z[q.name||""]=mt,u.attributes[ce].vertexAttribute=mt}}),{attributes:Z}}},{key:"clearAllAttributes",value:function(){var r;this.attributes.forEach(function(o){o.vertexAttribute&&o.vertexAttribute.destroy()}),(r=this.attributesAndIndices)===null||r===void 0||r.elements.destroy(),this.attributes=[]}}]),e}(),KE=Ia(Xx.prototype,"rendererService",[Gx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xx))||$x),Yo=k(34155);function QE(e,n,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(P){try{S(o.next(P))}catch(L){p(L)}}function y(P){try{S(o.throw(P))}catch(L){p(L)}}function S(P){P.done?c(P.value):u(P.value).then(g,y)}S((o=o.apply(e,n||[])).next())})}function Wf(e,n){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(P){return y([S,P])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=n.call(e,r)}catch(P){S=[6,P],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function X0(e,n){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),u,c=[],p;try{for(;(n===void 0||n-- >0)&&!(u=o.next()).done;)c.push(u.value)}catch(g){p={error:g}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(p)throw p.error}}return c}function Y0(e,n,r){if(r||arguments.length===2)for(var o=0,u=n.length,c;o<u;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return e.concat(c||Array.prototype.slice.call(n))}function qx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kx={exports:{}},Hv={exports:{}},iv={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;function r(o){return o&&typeof o.length=="number"&&o.length>=0&&o.length%1===0}e.exports=n.default})(iv,iv.exports);var wf={},O_={exports:{}},Qx={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];var c=o.pop();return r.call(this,o,c)}},e.exports=n.default})(Qx,Qx.exports);var bd={};Object.defineProperty(bd,"__esModule",{value:!0}),bd.fallback=JE,bd.wrap=e2;var a3=bd.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,Qh=bd.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,o3=bd.hasNextTick=typeof Yo=="object"&&typeof Yo.nextTick=="function";function JE(e){setTimeout(e,0)}function e2(e){return function(n){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return e(function(){return n.apply(void 0,r)})}}var q0;a3?q0=queueMicrotask:Qh?q0=setImmediate:o3?q0=Yo.nextTick:q0=JE,bd.default=e2(q0),function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var r=Qx.exports,o=g(r),u=bd,c=g(u),p=wf;function g(L){return L&&L.__esModule?L:{default:L}}function y(L){return(0,p.isAsync)(L)?function(){for(var Z=[],q=arguments.length;q--;)Z[q]=arguments[q];var ce=Z.pop(),me=L.apply(this,Z);return S(me,ce)}:(0,o.default)(function(Z,q){var ce;try{ce=L.apply(this,Z)}catch(me){return q(me)}if(ce&&typeof ce.then=="function")return S(ce,q);q(null,ce)})}function S(L,Z){return L.then(function(q){P(Z,null,q)},function(q){P(Z,q&&q.message?q:new Error(q))})}function P(L,Z,q){try{L(Z,q)}catch(ce){(0,c.default)(function(me){throw me},ce)}}e.exports=n.default}(O_,O_.exports),Object.defineProperty(wf,"__esModule",{value:!0}),wf.isAsyncIterable=wf.isAsyncGenerator=wf.isAsync=void 0;var s3=O_.exports,u3=l3(s3);function l3(e){return e&&e.__esModule?e:{default:e}}function t2(e){return e[Symbol.toStringTag]==="AsyncFunction"}function c3(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function f3(e){return typeof e[Symbol.asyncIterator]=="function"}function P_(e){if(typeof e!="function")throw new Error("expected a function");return t2(e)?(0,u3.default)(e):e}wf.default=P_,wf.isAsync=t2,wf.isAsyncGenerator=c3,wf.isAsyncIterable=f3;var Wv={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;function r(o,u){if(u===void 0&&(u=o.length),!u)throw new Error("arity is undefined");function c(){for(var p=this,g=[],y=arguments.length;y--;)g[y]=arguments[y];return typeof g[u-1]=="function"?o.apply(this,g):new Promise(function(S,P){g[u-1]=function(L){for(var Z=[],q=arguments.length-1;q-- >0;)Z[q]=arguments[q+1];if(L)return P(L);S(Z.length>1?Z:Z[0])},o.apply(p,g)})}return c}e.exports=n.default})(Wv,Wv.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=iv.exports,o=y(r),u=wf,c=y(u),p=Wv.exports,g=y(p);function y(S){return S&&S.__esModule?S:{default:S}}n.default=(0,g.default)(function(S,P,L){var Z=(0,o.default)(P)?[]:{};S(P,function(q,ce,me){(0,c.default)(q)(function(be){for(var $e,ft=[],mt=arguments.length-1;mt-- >0;)ft[mt]=arguments[mt+1];ft.length<2&&($e=ft,ft=$e[0]),Z[ce]=ft,me(be)})},function(q){return L(q,Z)})},3),e.exports=n.default}(Hv,Hv.exports);var Jx={exports:{}},k_={exports:{}},eb={exports:{}},K0={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;function r(o){function u(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];if(o!==null){var g=o;o=null,g.apply(this,c)}}return Object.assign(u,o),u}e.exports=n.default})(K0,K0.exports);var tb={exports:{}},rb={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=n.default})(rb,rb.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=P;var r=iv.exports,o=p(r),u=rb.exports,c=p(u);function p(L){return L&&L.__esModule?L:{default:L}}function g(L){var Z=-1,q=L.length;return function(){return++Z<q?{value:L[Z],key:Z}:null}}function y(L){var Z=-1;return function(){var ce=L.next();return ce.done?null:(Z++,{value:ce.value,key:Z})}}function S(L){var Z=L?Object.keys(L):[],q=-1,ce=Z.length;return function me(){var be=Z[++q];return be==="__proto__"?me():q<ce?{value:L[be],key:be}:null}}function P(L){if((0,o.default)(L))return g(L);var Z=(0,c.default)(L);return Z?y(Z):S(L)}e.exports=n.default}(tb,tb.exports);var Q0={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;function r(o){return function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(o===null)throw new Error("Callback was already called.");var p=o;o=null,p.apply(this,u)}}e.exports=n.default})(Q0,Q0.exports);var nb={exports:{}},J0={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r={};n.default=r,e.exports=n.default})(J0,J0.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=J0.exports,o=u(r);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g,y,S){var P=!1,L=!1,Z=!1,q=0,ce=0;function me(){q>=g||Z||P||(Z=!0,p.next().then(function(ft){var mt=ft.value,zt=ft.done;if(!(L||P)){if(Z=!1,zt){P=!0,q<=0&&S(null);return}q++,y(mt,ce,be),ce++,me()}}).catch($e))}function be(ft,mt){if(q-=1,!L){if(ft)return $e(ft);if(ft===!1){P=!0,L=!0;return}if(mt===o.default||P&&q<=0)return P=!0,S(null);me()}}function $e(ft){L||(Z=!1,P=!0,S(ft))}me()}e.exports=n.default}(nb,nb.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=K0.exports,o=q(r),u=tb.exports,c=q(u),p=Q0.exports,g=q(p),y=wf,S=nb.exports,P=q(S),L=J0.exports,Z=q(L);function q(ce){return ce&&ce.__esModule?ce:{default:ce}}n.default=function(ce){return function(me,be,$e){if($e=(0,o.default)($e),ce<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!me)return $e(null);if((0,y.isAsyncGenerator)(me))return(0,P.default)(me,ce,be,$e);if((0,y.isAsyncIterable)(me))return(0,P.default)(me[Symbol.asyncIterator](),ce,be,$e);var ft=(0,c.default)(me),mt=!1,zt=!1,ar=0,nr=!1;function Yt(Nr,nn){if(!zt)if(ar-=1,Nr)mt=!0,$e(Nr);else if(Nr===!1)mt=!0,zt=!0;else{if(nn===Z.default||mt&&ar<=0)return mt=!0,$e(null);nr||Cr()}}function Cr(){for(nr=!0;ar<ce&&!mt;){var Nr=ft();if(Nr===null){mt=!0,ar<=0&&$e(null);return}ar+=1,be(Nr.value,Nr.key,(0,g.default)(Yt))}nr=!1}Cr()}},e.exports=n.default}(eb,eb.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=eb.exports,o=y(r),u=wf,c=y(u),p=Wv.exports,g=y(p);function y(P){return P&&P.__esModule?P:{default:P}}function S(P,L,Z,q){return(0,o.default)(L)(P,(0,c.default)(Z),q)}n.default=(0,g.default)(S,4),e.exports=n.default}(k_,k_.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=k_.exports,o=p(r),u=Wv.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S,P){return(0,o.default)(y,1,S,P)}n.default=(0,c.default)(g,3),e.exports=n.default}(Jx,Jx.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=g;var r=Hv.exports,o=p(r),u=Jx.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,o.default)(c.default,y,S)}e.exports=n.default}(Kx,Kx.exports);var D_=qx(Kx.exports),Sd=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var n=arguments,r=[],o=0;o<arguments.length;o++)r[o]=n[o];return this.args=r,D_(this.tasks)},e.prototype.tap=function(n,r){var o=this;this.tasks.push(function(u){r.apply(void 0,Y0([],X0(o.args),!1)),u(null,n)})},e}(),r2={exports:{}},ib={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=iv.exports,o=be(r),u=J0.exports,c=be(u),p=k_.exports,g=be(p),y=K0.exports,S=be(y),P=Q0.exports,L=be(P),Z=wf,q=be(Z),ce=Wv.exports,me=be(ce);function be(zt){return zt&&zt.__esModule?zt:{default:zt}}function $e(zt,ar,nr){nr=(0,S.default)(nr);var Yt=0,Cr=0,Nr=zt.length,nn=!1;Nr===0&&nr(null);function an(Nn,jn){Nn===!1&&(nn=!0),nn!==!0&&(Nn?nr(Nn):(++Cr===Nr||jn===c.default)&&nr(null))}for(;Yt<Nr;Yt++)ar(zt[Yt],Yt,(0,L.default)(an))}function ft(zt,ar,nr){return(0,g.default)(zt,1/0,ar,nr)}function mt(zt,ar,nr){var Yt=(0,o.default)(zt)?$e:ft;return Yt(zt,(0,q.default)(ar),nr)}n.default=(0,me.default)(mt,3),e.exports=n.default})(ib,ib.exports),function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=g;var r=ib.exports,o=p(r),u=Hv.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,c.default)(o.default,y,S)}e.exports=n.default}(r2,r2.exports);var h3=qx(r2.exports),AB=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return h3(this.tasks)},e.prototype.tapPromise=function(n,r){var o=this;this.tasks.push(function(u){return QE(o,void 0,void 0,function(){return Wf(this,function(c){switch(c.label){case 0:return[4,r()];case 1:return c.sent(),u(null,n),[2]}})})})},e}(),L_={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=K0.exports,o=P(r),u=Q0.exports,c=P(u),p=wf,g=P(p),y=Wv.exports,S=P(y);function P(Z){return Z&&Z.__esModule?Z:{default:Z}}function L(Z,q){if(q=(0,o.default)(q),!Array.isArray(Z))return q(new Error("First argument to waterfall must be an array of functions"));if(!Z.length)return q();var ce=0;function me($e){var ft=(0,g.default)(Z[ce++]);ft.apply(void 0,$e.concat([(0,c.default)(be)]))}function be($e){for(var ft=[],mt=arguments.length-1;mt-- >0;)ft[mt]=arguments[mt+1];if($e!==!1){if($e||ce===Z.length)return q.apply(void 0,[$e].concat(ft));me(ft)}}me([])}n.default=(0,S.default)(L),e.exports=n.default})(L_,L_.exports);var n2=qx(L_.exports),MB=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return n2(this.tasks)},e.prototype.tap=function(n,r){this.tasks.length===0?this.tasks.push(function(o){var u=r();o(u?null:!1,u)}):this.tasks.push(function(o,u){var c=r.apply(void 0,Y0([],X0(o),!1));u(c?null:!1,n)})},e}(),i2=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return D_(this.tasks)},e.prototype.tap=function(n,r){this.tasks.push(function(o){var u=r();o(u,n)})},e}(),p3=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var n=arguments,r=[],o=0;o<arguments.length;o++)r[o]=n[o];return this.args=r,D_(this.tasks)},e.prototype.tapPromise=function(n,r){var o=this;this.tasks.push(function(u){return QE(o,void 0,void 0,function(){return Wf(this,function(c){switch(c.label){case 0:return[4,r.apply(void 0,Y0([],X0(this.args),!1))];case 1:return c.sent(),u(null,n),[2]}})})})},e}(),v3=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var n=arguments,r=[],o=0;o<arguments.length;o++)r[o]=n[o];return this.args=r,D_(this.tasks)},e.prototype.tapPromise=function(n,r){var o=this;this.tasks.push(function(u){return QE(o,void 0,void 0,function(){var c;return Wf(this,function(p){switch(p.label){case 0:return[4,r.apply(void 0,Y0([],X0(this.args),!1))];case 1:return c=p.sent(),u(c,n),[2]}})})})},e}(),g3=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return n2(this.tasks)},e.prototype.tapPromise=function(n,r){this.tasks.length===0?this.tasks.push(function(o){r().then(function(u){o(null,u)})}):this.tasks.push(function(o,u){r(o).then(function(c){u(null,c)})})},e}(),m3=k(63844),y3=k.n(m3),ab,a2,o2,s2,u2,l2,c2,f2,h2,p2,ob,d2,v2,g2,m2,y2,_2,x2,wc,b2,S2,E2,F_,w2,ey,sb,_3,x3,C2,T2,b3,S3,A2,M2,R2;function E3(e){var n=ub();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function ub(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var lb=(ab=(0,kt.b2)(),a2=(0,kt.f3)(Qt.SceneID),o2=(0,kt.f3)(Qt.IIconService),s2=(0,kt.f3)(Qt.IFontService),u2=(0,kt.f3)(Qt.IControlService),l2=(0,kt.f3)(Qt.IGlobalConfigService),c2=(0,kt.f3)(Qt.IMapService),f2=(0,kt.f3)(Qt.ICoordinateSystemService),h2=(0,kt.f3)(Qt.IRendererService),p2=(0,kt.f3)(Qt.ILayerService),ob=(0,kt.f3)(Qt.IDebugService),d2=(0,kt.f3)(Qt.ICameraService),v2=(0,kt.f3)(Qt.IInteractionService),g2=(0,kt.f3)(Qt.IPickingService),m2=(0,kt.f3)(Qt.IShaderModuleService),y2=(0,kt.f3)(Qt.IMarkerService),_2=(0,kt.f3)(Qt.IPopupService),ab(x2=(wc=function(e){(0,gr.Z)(r,e);var n=E3(r);function r(){var o;return(0,It.Z)(this,r),o=n.call(this),(0,Ve.Z)((0,Mr.Z)(o),"destroyed",!1),(0,Ve.Z)((0,Mr.Z)(o),"loaded",!1),Ba((0,Mr.Z)(o),"id",b2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"iconService",S2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"fontService",E2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"controlService",F_,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"configService",w2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"map",ey,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"coordinateSystemService",sb,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"rendererService",_3,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"layerService",x3,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"debugService",C2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"cameraService",T2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"interactionService",b3,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"pickingService",S3,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"shaderModuleService",A2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"markerService",M2,(0,Mr.Z)(o)),Ba((0,Mr.Z)(o),"popupService",R2,(0,Mr.Z)(o)),(0,Ve.Z)((0,Mr.Z)(o),"inited",!1),(0,Ve.Z)((0,Mr.Z)(o),"rendering",!1),(0,Ve.Z)((0,Mr.Z)(o),"$container",void 0),(0,Ve.Z)((0,Mr.Z)(o),"canvas",void 0),(0,Ve.Z)((0,Mr.Z)(o),"markerContainer",void 0),(0,Ve.Z)((0,Mr.Z)(o),"resizeDetector",void 0),(0,Ve.Z)((0,Mr.Z)(o),"hooks",void 0),(0,Ve.Z)((0,Mr.Z)(o),"handleWindowResized",function(){o.emit("resize"),o.$container&&(o.initContainer(),o.coordinateSystemService.needRefresh=!0,o.render())}),(0,Ve.Z)((0,Mr.Z)(o),"handleMapCameraChanged",function(u){o.cameraService.update(u),o.render()}),o.hooks={init:new p3},o}return(0,ct.Z)(r,[{key:"init",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,pn.Z)(Jt().mark(function p(){return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c.debugService.log("map.mapInitStart",{type:c.map.version}),y.next=3,new Promise(function(S){c.map.onCameraChanged(function(P){c.cameraService.init(),c.cameraService.update(P),S()}),c.map.init()});case 3:c.map.onCameraChanged(c.handleMapCameraChanged),c.map.addMarkerContainer(),c.markerService.addMarkers(),c.markerService.addMarkerLayers(),c.popupService.initPopup(),c.interactionService.init(),c.interactionService.on(ju.Drag,c.addSceneEvent.bind(c));case 10:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,pn.Z)(Jt().mark(function p(){var g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(y=((g=c.map)===null||g===void 0?void 0:g.getOverlayContainer())||void 0,y?c.$container=y:c.$container=Dm(c.configService.getSceneConfig(c.id).id||""),!c.$container){L.next=14;break}return c.canvas=$s("canvas","",c.$container),c.setCanvas(),L.next=7,c.rendererService.init(c.canvas,c.configService.getSceneConfig(c.id),u.gl);case 7:c.registerContextLost(),c.initContainer(),c.resizeDetector=y3()({strategy:"scroll"}),c.resizeDetector.listenTo(c.$container,c.handleWindowResized),window.matchMedia&&((S=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||S===void 0||S.addListener(c.handleWindowResized.bind("screen"))),L.next=15;break;case 14:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 15:c.pickingService.init(c.id);case 16:case"end":return L.stop()}},p)}))),this.render()}},{key:"registerContextLost",value:function(){var u=this,c=this.rendererService.getCanvas();c&&c.addEventListener("webglcontextlost",function(){return u.emit("webglcontextlost")})}},{key:"addLayer",value:function(u){this.layerService.sceneService=this,this.layerService.add(u)}},{key:"addMask",value:function(u){this.layerService.sceneService=this,this.layerService.addMask(u)}},{key:"render",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.rendering||this.destroyed)){g.next=2;break}return g.abrupt("return");case 2:if(this.rendering=!0,this.inited){g.next=16;break}return g.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),g.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,g.next=20;break;case 16:return g.next=18,this.layerService.initLayers();case 18:return g.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addFontFace",value:function(u,c){this.fontService.addFontFace(u,c)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return y=(g=this.$container)===null||g===void 0?void 0:g.getElementsByTagName("canvas")[0],L.next=3,this.render();case 3:return S=p==="jpg"?y==null?void 0:y.toDataURL("image/jpeg"):y==null?void 0:y.toDataURL("image/png"),L.abrupt("return",S);case 5:case"end":return L.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var u=this.$container.parentElement;u!==null&&(this.markerContainer=$s("div","l7-marker-container",u))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var u=this,c;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var p;(p=u.$container)===null||p===void 0||p.removeChild(u.canvas),u.canvas=null,u.rendererService.destroy()}),(c=this.$container)===null||c===void 0||(c=c.parentNode)===null||c===void 0||c.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var u,c,p=Is,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S&&(S.width=g*p,S.height=y*p),this.rendererService.viewport({x:0,y:0,width:p*g,height:p*y})}},{key:"setCanvas",value:function(){var u,c,p=Is,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S.width=g*p,S.height=y*p,S.style.width="100%",S.style.height="100%"}},{key:"addSceneEvent",value:function(u){this.emit(u.type,u)}}]),r}(Es.EventEmitter),b2=Ia(wc.prototype,"id",[a2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S2=Ia(wc.prototype,"iconService",[o2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E2=Ia(wc.prototype,"fontService",[s2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F_=Ia(wc.prototype,"controlService",[u2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w2=Ia(wc.prototype,"configService",[l2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ey=Ia(wc.prototype,"map",[c2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sb=Ia(wc.prototype,"coordinateSystemService",[f2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_3=Ia(wc.prototype,"rendererService",[h2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x3=Ia(wc.prototype,"layerService",[p2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C2=Ia(wc.prototype,"debugService",[ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T2=Ia(wc.prototype,"cameraService",[d2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b3=Ia(wc.prototype,"interactionService",[v2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S3=Ia(wc.prototype,"pickingService",[g2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A2=Ia(wc.prototype,"shaderModuleService",[m2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M2=Ia(wc.prototype,"markerService",[y2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R2=Ia(wc.prototype,"popupService",[_2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wc))||x2);function I2(e){var n=0;switch(e){case"vec2":case"ivec2":n=2;break;case"vec3":case"ivec3":n=3;break;case"vec4":case"ivec4":case"mat2":n=4;break;case"mat3":n=9;break;case"mat4":n=16;break;default:}return n}var cb=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function O2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r={};return e=e.replace(cb,function(o,u,c){var p=c.split(":"),g=p[0].trim(),y="";switch(p.length>1&&(y=p[1].trim()),u){case"bool":y=y==="true";break;case"float":case"int":y=Number(y);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":y?y=y.replace("[","").replace("]","").split(",").reduce(function(S,P){return S.push(Number(P.trim())),S},[]):y=new Array(I2(u)).fill(0);break;default:}return r[g]=y,"".concat(n?"uniform ":"").concat(u," ").concat(g,`;
`)}),{content:e,uniforms:r}}function B_(e){var n=O2(e,!0),r=n.content,o=n.uniforms;return r=r.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(u,c,p){p=p.trim().replace(/^.*$/gm,function(P){return"uniform ".concat(P)});var g=O2(p),y=g.content,S=g.uniforms;return Object.assign(o,S),"".concat(c,`{
`).concat(y,`
};`)}),{content:r,uniforms:o}}function Fm(e){var n={};return e.replace(cb,function(r,o,u){var c=u.trim();return n[c]?"":(n[c]=!0,"uniform ".concat(o," ").concat(c,`;
`))})}var P2,w3,RB=Aa.uniq,k2="#define PI 3.14159265359",C3=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,N_=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,D2=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_EnableSelect;
  float u_activeMix;
};`,T3=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,A3=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,M3=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,L2=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,R3=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,z_=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,IB=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,OB=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,F2=/precision\s+(high|low|medium)p\s+float/,B2=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,I3=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,PB=/void\s+main\s*\([^)]*\)\s*\{\n?/,E8=/}\n?[^{}]*$/,O3=(P2=(0,kt.b2)(),P2(w3=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"moduleCache",{}),(0,Ve.Z)(this,"rawContentCache",{})}return(0,ct.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:k2,fs:k2}),this.registerModule("decode",{vs:C3,fs:""}),this.registerModule("scene_uniforms",{vs:N_,fs:N_}),this.registerModule("picking_uniforms",{vs:D2,fs:D2}),this.registerModule("projection",{vs:z_,fs:z_}),this.registerModule("project",{vs:R3,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:OB}),this.registerModule("lighting",{vs:A3,fs:""}),this.registerModule("light",{vs:T3,fs:""}),this.registerModule("picking",{vs:L2,fs:M3}),this.registerModule("rotation_2d",{vs:IB,fs:""})}},{key:"registerModule",value:function(r,o){o.vs=o.vs.replace(/\r\n/g,`
`),o.fs=o.fs.replace(/\r\n/g,`
`);var u=o.vs,c=o.fs,p=o.uniforms,g=o.inject,y=B_(u),S=y.content,P=y.uniforms,L=B_(c),Z=L.content,q=L.uniforms;this.rawContentCache[r]={fs:Z,inject:g,uniforms:(0,ae.Z)((0,ae.Z)((0,ae.Z)({},P),q),p),vs:S}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(r){var o=this,u=this.rawContentCache[r].vs,c=this.rawContentCache[r].fs,p=this.rawContentCache[r].inject,g={};p!=null&&p["vs:#decl"]&&(u=(p==null?void 0:p["vs:#decl"])+u,g=B_(p==null?void 0:p["vs:#decl"]).uniforms),p!=null&&p["vs:#main-start"]&&(u=u.replace(PB,function($e){return $e+(p==null?void 0:p["vs:#main-start"])})),p!=null&&p["fs:#decl"]&&(c=(p==null?void 0:p["fs:#decl"])+c);var y=this.processModule(u,[],"vs"),S=y.content,P=y.includeList,L=this.processModule(c,[],"fs"),Z=L.content,q=L.includeList,ce="",me=RB(P.concat(q).concat(r)).reduce(function($e,ft){return(0,ae.Z)((0,ae.Z)({},$e),o.rawContentCache[ft].uniforms)},(0,ae.Z)({},g));F2.test(Z)||(ce=ce+B2),ce=ce+Z;var be="";return F2.test(S)||(be=be+B2),be=be+S,this.moduleCache[r]={fs:ce.trim(),uniforms:me,vs:be.trim()},this.moduleCache[r]}},{key:"processModule",value:function(r,o,u){var c=this,p=r.replace(I3,function(g,y){var S=y.split(" "),P=S[0].replace(/"/g,"");if(o.indexOf(P)>-1)return"";var L=c.rawContentCache[P][u];o.push(P);var Z=c.processModule(L,o,u),q=Z.content;return q});return{content:p,includeList:o}}},{key:"injectDefines",value:function(r){var o=Object.keys(r).reduce(function(u,c){return u+"#define ".concat(c.toUpperCase()," ").concat(r[c],`;
`)},`
`);return o}}]),e}())||w3);function P3(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=(0,Nt.Z)(e),e!==null););return e}function Cf(){return typeof Reflect!="undefined"&&Reflect.get?Cf=Reflect.get.bind():Cf=function(n,r,o){var u=P3(n,r);if(u){var c=Object.getOwnPropertyDescriptor(u,r);return c.get?c.get.call(arguments.length<3?n:o):c.value}},Cf.apply(this,arguments)}var ty=function(e){return e.Normal="normal",e.PostProcessing="post-processing",e}({}),N2,z2,U_=(N2=(0,kt.b2)(),N2(z2=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"shaderModuleService",void 0),(0,Ve.Z)(this,"rendererService",void 0),(0,Ve.Z)(this,"cameraService",void 0),(0,Ve.Z)(this,"mapService",void 0),(0,Ve.Z)(this,"interactionService",void 0),(0,Ve.Z)(this,"layerService",void 0),(0,Ve.Z)(this,"config",void 0)}return(0,ct.Z)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return ty.Normal}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Qt.IRendererService),this.cameraService=r.getContainer().get(Qt.ICameraService),this.mapService=r.getContainer().get(Qt.IMapService),this.interactionService=r.getContainer().get(Qt.IInteractionService),this.layerService=r.getContainer().get(Qt.ILayerService),this.shaderModuleService=r.getContainer().get(Qt.IShaderModuleService)}},{key:"render",value:function(r){}}]),e}())||z2),k3,D3;function L3(e){var n=F3();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function F3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fb=(k3=(0,kt.b2)(),k3(D3=function(e){(0,gr.Z)(r,e);var n=L3(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(u,c){Cf((0,Nt.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),r}(U_))||D3),Z_,U2,Z2,hb,ry;function B3(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=N3(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function N3(e,n){if(e){if(typeof e=="string")return V2(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V2(e,n)}}function V2(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var z3=(Z_=(0,kt.b2)(),U2=(0,kt.f3)(Qt.IPostProcessor),Z_(Z2=(hb=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"passes",[]),Ba(this,"postProcessor",ry,this),(0,Ve.Z)(this,"layer",void 0),(0,Ve.Z)(this,"renderFlag",void 0),(0,Ve.Z)(this,"width",0),(0,Ve.Z)(this,"height",0)}return(0,ct.Z)(e,[{key:"setLayer",value:function(r){this.layer=r}},{key:"setRenderFlag",value:function(r){this.renderFlag=r}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){var u,c,p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=B3(this.passes),y.prev=1,u.s();case 3:if((c=u.n()).done){y.next=9;break}return p=c.value,y.next=7,p.render(this.layer);case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),u.e(y.t0);case 14:return y.prev=14,u.f(),y.finish(14);case 17:return y.next=19,this.postProcessor.render(this.layer);case 19:case"end":return y.stop()}},o,this,[[1,11,14,17]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){(this.width!==r||this.height!==o)&&(this.postProcessor.resize(r,o),this.width=r,this.height=o)}},{key:"add",value:function(r,o){r.getType()===ty.PostProcessing?this.postProcessor.add(r,this.layer,o):(r.init(this.layer,o),this.passes.push(r))}},{key:"insert",value:function(r,o,u){r.init(this.layer,o),this.passes.splice(u,0,r)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),ry=Ia(hb.prototype,"postProcessor",[U2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hb))||Z2),j2,H2;function U3(e){var n=Z3();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Z3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var W2=(j2=(0,kt.b2)(),j2(H2=function(e){(0,gr.Z)(r,e);var n=U3(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"pickingFBO",void 0),(0,Ve.Z)((0,Mr.Z)(o),"layer",void 0),(0,Ve.Z)((0,Mr.Z)(o),"width",0),(0,Ve.Z)((0,Mr.Z)(o),"height",0),(0,Ve.Z)((0,Mr.Z)(o),"alreadyInRendering",!1),(0,Ve.Z)((0,Mr.Z)(o),"pickFromPickingFBO",function(g){var y=g.x,S=g.y,P=g.lngLat,L=g.type;if(!(!o.layer.isVisible()||!o.layer.needPick(L))){var Z=o.rendererService,q=Z.getViewportSize,ce=Z.readPixelsAsync,me=Z.useFramebuffer,be=q(),$e=be.width,ft=be.height,mt=o.layer.getLayerConfig(),zt=mt.enableHighlight,ar=mt.enableSelect,nr=y*Is,Yt=S*Is;if(!(nr>$e||nr<0||Yt>ft||Yt<0)){var Cr;me(o.pickingFBO,(0,pn.Z)(Jt().mark(function Nr(){var nn,an,Nn,jn,di;return Jt().wrap(function(Co){for(;;)switch(Co.prev=Co.next){case 0:return Co.next=2,ce({x:Math.round(nr),y:Math.round(ft-(S+1)*Is),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:o.pickingFBO});case 2:Cr=Co.sent,Cr[0]!==0||Cr[1]!==0||Cr[2]!==0?(an=ec(Cr),Nn=o.layer.getSource().getFeatureById(an),jn={x:y,y:S,type:L,lngLat:P,featureId:an,feature:Nn},Nn&&(o.layer.setCurrentPickId(an),o.triggerHoverOnLayer(jn))):(di={x:y,y:S,lngLat:P,type:o.layer.getCurrentPickId()===null?"un"+L:"mouseout",featureId:null,feature:null},o.triggerHoverOnLayer((0,ae.Z)((0,ae.Z)({},di),{},{type:"unpick"})),o.triggerHoverOnLayer(di),o.layer.setCurrentPickId(null)),zt&&o.highlightPickedFeature(Cr),ar&&L==="click"&&((nn=Cr)===null||nn===void 0?void 0:nn.toString())!==[0,0,0,0].toString()&&o.selectFeature(Cr);case 6:case"end":return Co.stop()}},Nr)})))}}}),o}return(0,ct.Z)(r,[{key:"getType",value:function(){return ty.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(u,c){Cf((0,Nt.Z)(r.prototype),"init",this).call(this,u,c),this.layer=u;var p=this.rendererService,g=p.createTexture2D,y=p.createFramebuffer,S=p.getViewportSize,P=S(),L=P.width,Z=P.height,q=g({width:L,height:Z,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=y({color:q}),this.interactionService.on(ju.Hover,this.pickFromPickingFBO),this.interactionService.on(ju.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(ju.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(u){var c=this;if(!this.alreadyInRendering){var p=this.rendererService,g=p.getViewportSize,y=p.useFramebuffer,S=p.clear,P=g(),L=P.width,Z=P.height;this.alreadyInRendering=!0,(this.width!==L||this.height!==Z)&&(this.pickingFBO.resize({width:L,height:Z}),this.width=L,this.height=Z),y(this.pickingFBO,function(){S({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var q=c.layer.multiPassRenderer.getRenderFlag();c.layer.multiPassRenderer.setRenderFlag(!1),u.hooks.beforePickingEncode.call(),u.render(),u.hooks.afterPickingEncode.call(),c.layer.multiPassRenderer.setRenderFlag(q),c.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(u){this.layer.emit(u.type,u)}},{key:"highlightPickedFeature",value:function(u){var c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeHighlight.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(u){var c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeSelect.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(u){var c=u.featureId,p=Ms(c);this.selectFeature(new Uint8Array(p))}},{key:"highlightFeatureHandle",value:function(u){var c=u.featureId,p=Ms(c);this.highlightPickedFeature(new Uint8Array(p))}}]),r}(U_))||H2),pb,G2,$2,V_,X2,V3=Aa.camelCase,j3=Aa.isNil,H3=Aa.upperFirst,j_=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,av=(pb=(0,kt.b2)(),G2=(0,kt.f3)(Qt.IShaderModuleService),pb($2=(V_=function(){function e(){(0,It.Z)(this,e),Ba(this,"shaderModuleService",X2,this),(0,Ve.Z)(this,"rendererService",void 0),(0,Ve.Z)(this,"config",void 0),(0,Ve.Z)(this,"quad",j_),(0,Ve.Z)(this,"enabled",!0),(0,Ve.Z)(this,"renderToScreen",!1),(0,Ve.Z)(this,"model",void 0),(0,Ve.Z)(this,"name",void 0),(0,Ve.Z)(this,"optionsToUpdate",{})}return(0,ct.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(r){this.name=r}},{key:"getType",value:function(){return ty.PostProcessing}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Qt.IRendererService),this.shaderModuleService=r.getContainer().get(Qt.IShaderModuleService);var u=this.rendererService,c=u.createAttribute,p=u.createBuffer,g=u.createModel,y=this.setupShaders(),S=y.vs,P=y.fs,L=y.uniforms;this.model=g({vs:S,fs:P,attributes:{a_Position:c({buffer:p({data:[-4,-4,4,-4,0,4],type:Ct.FLOAT}),size:2})},uniforms:(0,ae.Z)((0,ae.Z)({u_Texture:null},L),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(r,o){var u=this,c=r.multiPassRenderer.getPostProcessor(),p=this.rendererService,g=p.useFramebuffer,y=p.getViewportSize,S=p.clear,P=y(),L=P.width,Z=P.height;g(this.renderToScreen?null:c.getWriteFBO(),function(){S({framebuffer:c.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var q=(0,ae.Z)({u_BloomFinal:0,u_Texture:c.getReadFBO(),u_ViewportSize:[L,Z]},u.convertOptionsToUniforms(u.optionsToUpdate));o&&(q.u_BloomFinal=1,q.u_Texture2=o),u.model.draw({uniforms:q})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(r){this.enabled=r}},{key:"setRenderToScreen",value:function(r){this.renderToScreen=r}},{key:"updateOptions",value:function(r){this.optionsToUpdate=(0,ae.Z)((0,ae.Z)({},this.optionsToUpdate),r)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(r){var o={};return Object.keys(r).forEach(function(u){j3(r[u])||(o["u_".concat(H3(V3(u)))]=r[u])}),o}}]),e}(),X2=Ia(V_.prototype,"shaderModuleService",[G2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V_))||$2),db,Y2;function W3(e){var n=q2();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function q2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var G3=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,$3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,H_=Aa.isNil,K2=(db=(0,kt.b2)(),db(Y2=function(e){(0,gr.Z)(r,e);var n=W3(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:$3,fs:G3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return H_(u.bloomRadius)||(c.u_radius=u.bloomRadius),H_(u.bloomIntensity)||(c.u_intensity=u.bloomIntensity),H_(u.bloomBaseRadio)||(c.u_baseRadio=u.bloomBaseRadio),c}}]),r}(av))||Y2),Q2,J2;function vb(e){var n=X3();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function X3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ew=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Y3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,q3=Aa.isNil,K3=(Q2=(0,kt.b2)(),Q2(J2=function(e){(0,gr.Z)(r,e);var n=vb(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Y3,fs:ew});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return q3(u.blurRadius)||(c.u_BlurDir=[u.blurRadius,0]),c}}]),r}(av))||J2),tw,rw;function nw(e){var n=Q3();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Q3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var J3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,eI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,tI=Aa.isNil,rI=(tw=(0,kt.b2)(),tw(rw=function(e){(0,gr.Z)(r,e);var n=nw(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:eI,fs:J3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return tI(u.blurRadius)||(c.u_BlurDir=[0,u.blurRadius]),c}}]),r}(av))||rw),gb,ny;function iw(e){var n=aw();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function aw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,iI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ow=(gb=(0,kt.b2)(),gb(ny=function(e){(0,gr.Z)(r,e);var n=iw(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:iI,fs:nI});var u=this.shaderModuleService.getModule("colorhalftone-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}}]),r}(av))||ny),sw,uw;function aI(e){var n=oI();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function oI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sI=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,uI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,mb=(sw=(0,kt.b2)(),sw(uw=function(e){(0,gr.Z)(r,e);var n=aI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:uI,fs:sI}),this.shaderModuleService.getModule("copy-pass")}}]),r}(av))||uw),W_,yb;function lI(e){var n=lw();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function lw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var cI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,fI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,hI=(W_=(0,kt.b2)(),W_(yb=function(e){(0,gr.Z)(r,e);var n=lI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:fI,fs:cI});var u=this.shaderModuleService.getModule("hexagonalpixelate-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}}]),r}(av))||yb),cw,fw;function pI(e){var n=dI();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function dI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,gI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,hw=(cw=(0,kt.b2)(),cw(fw=function(e){(0,gr.Z)(r,e);var n=pI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:gI,fs:vI});var u=this.shaderModuleService.getModule("ink-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,P=y.height;return{vs:c,fs:p,uniforms:(0,ae.Z)((0,ae.Z)({},g),{},{u_ViewportSize:[S,P]})}}}]),r}(av))||fw),pw,_b;function mI(e){var n=yI();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function yI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,_I=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,vw=(pw=(0,kt.b2)(),pw(_b=function(e){(0,gr.Z)(r,e);var n=mI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:_I,fs:dw}),this.shaderModuleService.getModule("noise-pass")}}]),r}(av))||_b),gw,G_;function xI(e){var n=$_();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function $_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,SI=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,EI=(gw=(0,kt.b2)(),gw(G_=function(e){(0,gr.Z)(r,e);var n=xI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:bI,fs:SI}),this.shaderModuleService.getModule("sepia-pass")}}]),r}(av))||G_),mw,yw,X_,_w,Bm,xw,wI=(mw=(0,kt.b2)(),yw=(0,kt.f3)(Qt.IRendererService),X_=(0,kt.zY)(),mw(_w=(Bm=function(){function e(){(0,It.Z)(this,e),Ba(this,"rendererService",xw,this),(0,Ve.Z)(this,"passes",[]),(0,Ve.Z)(this,"readFBO",void 0),(0,Ve.Z)(this,"writeFBO",void 0)}return(0,ct.Z)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var r=this.rendererService,o=r.getViewportSize,u=r.createTexture2D,c=o(),p=c.width,g=c.height;return u({x:0,y:0,width:p,height:g,copy:!0})}},{key:"getReadFBOTex",value:function(){var r=this,o=this.rendererService.useFramebuffer;return new Promise(function(u){o(r.readFBO,(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u(r.getCurrentFBOTex());case 1:case"end":return g.stop()}},c)})))})}},{key:"renderBloomPass",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){var p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.getReadFBOTex();case 2:p=S.sent,g=0;case 4:if(!(g<4)){S.next=11;break}return S.next=7,c.render(u,p);case 7:this.swap(),g++,S.next=4;break;case 11:case"end":return S.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"render",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){var c,p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c=0;case 1:if(!(c<this.passes.length)){y.next=15;break}if(p=this.passes[c],p.setRenderToScreen(this.isLastEnabledPass(c)),p.getName()!=="bloom"){y.next=9;break}return y.next=7,this.renderBloomPass(u,p);case 7:y.next=12;break;case 9:return y.next=11,p.render(u);case 11:c!==this.passes.length-1&&this.swap();case 12:c++,y.next=1;break;case 15:case"end":return y.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){this.readFBO.resize({width:r,height:o}),this.writeFBO.resize({width:r,height:o})}},{key:"add",value:function(r,o,u){r.init(o,u),this.passes.push(r)}},{key:"insert",value:function(r,o,u,c){r.init(u,c),this.passes.splice(o,0,r)}},{key:"getPostProcessingPassByName",value:function(r){return this.passes.find(function(o){return o.getName()===r})}},{key:"init",value:function(){var r=this.rendererService,o=r.createFramebuffer,u=r.createTexture2D;this.readFBO=o({color:u({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})}),this.writeFBO=o({color:u({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(r){for(var o=r+1;o<this.passes.length;o++)if(this.passes[o].isEnabled())return!1;return!0}},{key:"swap",value:function(){var r=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=r}}]),e}(),xw=Ia(Bm.prototype,"rendererService",[yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ia(Bm.prototype,"init",[X_],Object.getOwnPropertyDescriptor(Bm.prototype,"init"),Bm.prototype),Bm))||_w),bw,Sw;function CI(e){var n=Ew();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Ew(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ww=(bw=(0,kt.b2)(),bw(Sw=function(e){(0,gr.Z)(r,e);var n=CI(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getType",value:function(){return ty.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(u,c){Cf((0,Nt.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(u){var c=this.rendererService,p=c.useFramebuffer,g=c.clear,y=u.multiPassRenderer.getPostProcessor().getReadFBO();p(y,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:y}),u.multiPassRenderer.setRenderFlag(!1),u.models.forEach(function(S){S.draw({uniforms:u.layerModel.getUninforms()})}),u.multiPassRenderer.setRenderFlag(!0)})}}]),r}(U_))||Sw),xb,Cw,Tw,iy,Aw;function TI(e){var n=ov();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function ov(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bb=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Mw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,AI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Rw(e,n){for(var r=0,o=1/n,u=e;u>0;)r=r+o*(u%n),u=Math.floor(u/n),o=o/n;return r}var MI=1,RI=(xb=(0,kt.b2)(),Cw=(0,kt.f3)(Qt.IShaderModuleService),xb(Tw=(iy=function(e){(0,gr.Z)(r,e);var n=TI(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),Ba((0,Mr.Z)(o),"shaderModuleService",Aw,(0,Mr.Z)(o)),(0,Ve.Z)((0,Mr.Z)(o),"haltonSequence",[]),(0,Ve.Z)((0,Mr.Z)(o),"accumulatingId",0),(0,Ve.Z)((0,Mr.Z)(o),"frame",0),(0,Ve.Z)((0,Mr.Z)(o),"timer",void 0),(0,Ve.Z)((0,Mr.Z)(o),"sampleRenderTarget",void 0),(0,Ve.Z)((0,Mr.Z)(o),"prevRenderTarget",void 0),(0,Ve.Z)((0,Mr.Z)(o),"outputRenderTarget",void 0),(0,Ve.Z)((0,Mr.Z)(o),"copyRenderTarget",void 0),(0,Ve.Z)((0,Mr.Z)(o),"blendModel",void 0),(0,Ve.Z)((0,Mr.Z)(o),"outputModel",void 0),(0,Ve.Z)((0,Mr.Z)(o),"copyModel",void 0),o}return(0,ct.Z)(r,[{key:"getType",value:function(){return ty.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(u,c){Cf((0,Nt.Z)(r.prototype),"init",this).call(this,u,c);var p=this.rendererService,g=p.createFramebuffer,y=p.createTexture2D;this.sampleRenderTarget=g({color:y({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})}),this.prevRenderTarget=g({color:y({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})}),this.outputRenderTarget=g({color:y({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})}),this.copyRenderTarget=g({color:y({width:1,height:1,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE})});for(var S=0;S<30;S++)this.haltonSequence.push([Rw(S,2),Rw(S,3)]);this.blendModel=this.createTriangleModel("blend-pass",bb),this.outputModel=this.createTriangleModel("copy-pass",Mw,{blend:{enable:!0,func:{srcRGB:Ct.ONE,dstRGB:Ct.ONE_MINUS_SRC_ALPHA,srcAlpha:Ct.ONE,dstAlpha:Ct.ONE_MINUS_SRC_ALPHA},equation:{rgb:Ct.FUNC_ADD,alpha:Ct.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Mw)}},{key:"render",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,P=y(),L=P.width,Z=P.height;this.sampleRenderTarget.resize({width:L,height:Z}),this.prevRenderTarget.resize({width:L,height:Z}),this.outputRenderTarget.resize({width:L,height:Z}),this.copyRenderTarget.resize({width:L,height:Z}),this.resetFrame(),this.stopAccumulating();var q=u.multiPassRenderer.getPostProcessor().getReadFBO();S(q,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:q}),u.multiPassRenderer.setRenderFlag(!1),u.render(),u.multiPassRenderer.setRenderFlag(!0)});var ce=function me(be){!c.accumulatingId||be!==c.accumulatingId||c.isFinished()||(c.doRender(u),window.requestAnimationFrame(function(){me(be)}))};this.accumulatingId=MI++,this.timer=window.setTimeout(function(){ce(c.accumulatingId)},50)}},{key:"doRender",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,P=y(),L=P.width,Z=P.height,q=u.getLayerConfig(),ce=q.jitterScale,me=ce===void 0?1:ce,be=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((be[0]*2-1)/L*me,(be[1]*2-1)/Z*me),u.multiPassRenderer.setRenderFlag(!1),u.hooks.beforeRender.call(),S(this.sampleRenderTarget,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c.sampleRenderTarget}),u.render()}),u.hooks.afterRender.call(),u.multiPassRenderer.setRenderFlag(!0);var $e=u.getLayerConfig();S(this.outputRenderTarget,function(){c.blendModel.draw({uniforms:{u_opacity:$e.opacity||1,u_MixRatio:c.frame===0?1:.9,u_Diffuse1:c.sampleRenderTarget,u_Diffuse2:c.frame===0?u.multiPassRenderer.getPostProcessor().getReadFBO():c.prevRenderTarget}})}),this.frame===0&&g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(S(this.copyRenderTarget,function(){c.outputModel.draw({uniforms:{u_Texture:c.outputRenderTarget}})}),S(u.multiPassRenderer.getPostProcessor().getReadFBO(),function(){c.copyModel.draw({uniforms:{u_Texture:c.copyRenderTarget}})}),u.multiPassRenderer.getPostProcessor().render(u));var ft=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=ft,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(u,c,p){this.shaderModuleService.registerModule(u,{vs:AI,fs:c});var g=this.shaderModuleService.getModule(u),y=g.vs,S=g.fs,P=g.uniforms,L=this.rendererService,Z=L.createAttribute,q=L.createBuffer,ce=L.createModel;return ce((0,ae.Z)({vs:y,fs:S,attributes:{a_Position:Z({buffer:q({data:[-4,-4,4,-4,0,4],type:Ct.FLOAT}),size:2})},uniforms:(0,ae.Z)({},P),depth:{enable:!1},count:3},p))}}]),r}(U_),Aw=Ia(iy.prototype,"shaderModuleService",[Cw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy))||Tw),ay=new kt.W2;ay.bind(Qt.IGlobalConfigService).to(xu).inSingletonScope(),(0,kt.GW)((0,kt.b2)(),Es.EventEmitter),ay.bind(Qt.IEventEmitter).to(Es.EventEmitter);var Iw=(0,wr.Z)(ay,!1),Sb=function(n){var r=Iw.lazyInject(n);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},kB=function(n){var r=Iw.lazyMultiInject(n);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},Gf=ay,II=0;function OI(){var e=new kt.W2;return e.parent=ay,e.bind(Qt.SceneID).toConstantValue("".concat(II++)),e.bind(Qt.IShaderModuleService).to(O3).inSingletonScope(),e.bind(Qt.ILayerService).to(JR).inSingletonScope(),e.bind(Qt.IDebugService).to(Uc).inSingletonScope(),e.bind(Qt.ISceneService).to(lb).inSingletonScope(),e.bind(Qt.ICameraService).to(Uo).inSingletonScope(),e.bind(Qt.ICoordinateSystemService).to(N0).inSingletonScope(),e.bind(Qt.IInteractionService).to(C_).inSingletonScope(),e.bind(Qt.IPickingService).to(Vx).inSingletonScope(),e.bind(Qt.IControlService).to(Qu).inSingletonScope(),e.bind(Qt.IMarkerService).to(Ou).inSingletonScope(),e.bind(Qt.IIconService).to(O0).inSingletonScope(),e.bind(Qt.IFontService).to(kv).inSingletonScope(),e.bind(Qt.IPopupService).to(rs).inSingletonScope(),e.bind(Qt.INormalPass).to(fb).whenTargetNamed("clear"),e.bind(Qt.INormalPass).to(W2).whenTargetNamed("pixelPicking"),e.bind(Qt.INormalPass).to(ww).whenTargetNamed("render"),e.bind(Qt.INormalPass).to(RI).whenTargetNamed("taa"),e.bind(Qt.IFactoryNormalPass).toFactory(function(n){return function(r){return n.container.getNamed(Qt.INormalPass,r)}}),e.bind(Qt.IPostProcessingPass).to(mb).whenTargetNamed("copy"),e.bind(Qt.IPostProcessingPass).to(K2).whenTargetNamed("bloom"),e.bind(Qt.IPostProcessingPass).to(K3).whenTargetNamed("blurH"),e.bind(Qt.IPostProcessingPass).to(rI).whenTargetNamed("blurV"),e.bind(Qt.IPostProcessingPass).to(vw).whenTargetNamed("noise"),e.bind(Qt.IPostProcessingPass).to(EI).whenTargetNamed("sepia"),e.bind(Qt.IPostProcessingPass).to(ow).whenTargetNamed("colorHalftone"),e.bind(Qt.IPostProcessingPass).to(hI).whenTargetNamed("hexagonalPixelate"),e.bind(Qt.IPostProcessingPass).to(hw).whenTargetNamed("ink"),e.bind(Qt.IFactoryPostProcessingPass).toFactory(function(n){return function(r){var o=n.container.getNamed(Qt.IPostProcessingPass,r);return o.setName(r),o}}),e}function Nm(e){var n=new kt.W2;return n.parent=e,n.bind(Qt.IStyleAttributeService).to(Yx).inSingletonScope(),n.bind(Qt.IMultiPassRenderer).to(z3).inSingletonScope(),n.bind(Qt.IPostProcessor).to(wI).inSingletonScope(),n}var PI=null;function Eb(e){return PI.indexOf(e)}var oy=Aa.clamp,kI=2,DB=4,Ow=64,wb=128,Cb=256,Pw=512,Ug=8192,DI=16384,LB=32768,LI=null,sv=131072,FB=262144,kw=524288,FI=1048576,BI=2097152,BB=4194304,NB=8388608,Dw=16777216,Y_=null;function q_(e,n){return e=oy(Math.floor(e),0,255),n=oy(Math.floor(n),0,255),256*e+n}function zB(e){var n=e.color,r=e.radius,o=e.tileX,u=e.tileY,c=e.shape,p=e.opacity,g=e.stroke,y=e.strokeWidth,S=e.strokeOpacity,P=[],L=[],Z=[],q=[q_(n[0],n[1]),q_(n[2],n[3])],ce=[q_(g[0],g[1]),q_(g[2],g[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(me){var be=_slicedToArray(me,2),$e=be[0],ft=be[1];P.push([].concat(q,[($e+1)*NB+(ft+1)*BI+getShapeIndex(c)*sv+r,(o+512)*kw+(u+512)*Ow])),L.push([].concat(ce,[y,S])),Z.push([p,0,0,0])}),{packedBuffer:P,packedBuffer2:L,packedBuffer3:Z}}function UB(e,n){if(e===0&&!n)return 0;if(e===1&&n)return 4294967295;var r=n?1:0,o=Math.floor(e*127);return o*Y_+r*Dw+o*sv+r*LI+o*Pw+r*Cb+o*kI+r}var Zg={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},tl={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Bs=function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e.CUSTOM="threshold",e}({}),zm=function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e}({}),ma=function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e}({}),Tb=["mapload","mapchange","mapAfterFrameChange"],K_=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],jc=function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e}({}),NI=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y,S){o({x:r.x,y:r.y,z:r.z},function(P,L){if(P||L.length===0){S(P);return}L&&Ii([{data:L,bands:[0]}],u,c,function(Z,q){Z?S(Z):q&&y(q)})})}));case 1:case"end":return g.stop()}},n)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),zI=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o){return Jt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(p,g){o({x:r.x,y:r.y,z:r.z},function(y,S){if(y||!S){g(y);return}S instanceof ArrayBuffer?fo(S,function(P,L){P&&g(P),p(L)}):S instanceof HTMLImageElement?p(S):g(y)})}));case 1:case"end":return c.stop()}},n)}));return function(r,o){return e.apply(this,arguments)}}();function UI(e,n){return Array.isArray(e)?typeof e[0]=="string"?e.map(function(r){return va(r,n)}):e.map(function(r){return{url:va(r.url,n),bands:r.bands||[0]}}):va(e,n)}function ZI(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(function(n){return{url:n,bands:[0]}}):e}function Ab(e,n){e.xhrCancel=function(){n.map(function(r){r.abort()})}}var VI=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c,p){var g,y,S,P,L,Z;return Jt().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(g=ZI(o.url),!(g.length>1)){ce.next=15;break}return ce.next=4,jI(g,o);case 4:if(y=ce.sent,S=y.rasterFiles,P=y.xhrList,L=y.errList,Ab(r,P),!(L.length>0)){ce.next=12;break}return u(L,null),ce.abrupt("return");case 12:Ii(S,c,p,u),ce.next=17;break;case 15:Z=xs(o,function(me,be){if(me)u(me);else if(be){var $e=[{data:be,bands:g[0].bands}];Ii($e,c,p,u)}}),Ab(r,[Z]);case 17:case"end":return ce.stop()}},n)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function jI(e,n){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,pn.Z)(Jt().mark(function e(n,r){var o,u,c,p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:o=[],u=[],c=[],p=0;case 4:if(!(p<n.length)){me.next=20;break}return g=n[p],y=(0,ae.Z)((0,ae.Z)({},r),{},{url:g.url}),S=g.bands,me.next=10,ha((0,ae.Z)((0,ae.Z)({},y),{},{type:"arrayBuffer"}));case 10:P=me.sent,L=P.err,Z=P.data,q=P.xhr,L&&c.push(L),u.push(q),o.push({data:Z,bands:S});case 17:p++,me.next=4;break;case 20:return me.abrupt("return",{rasterFiles:o,xhrList:u,errList:c});case 21:case"end":return me.stop()}},e)})),Mb.apply(this,arguments)}var HI=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c,p){var g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g={url:UI(r,o)},S.abrupt("return",new Promise(function(P,L){VI(u,g,function(Z,q){Z?L(Z):q&&P(q)},c,p)}));case 2:case"end":return S.stop()}},n)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}(),Lw=function(){var e=(0,pn.Z)(Jt().mark(function n(r,o,u,c){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return g=Array.isArray(r)?r[0]:r,c.wmtsOptions?(y=(c==null?void 0:c.getURLFromTemplate)||Ea,p=y(g,(0,ae.Z)((0,ae.Z)({},o),c.wmtsOptions))):(S=(c==null?void 0:c.getURLFromTemplate)||va,p=S(g,o)),L.abrupt("return",new Promise(function(Z,q){var ce,me=Jo({url:p,type:(c==null||(ce=c.requestParameters)===null||ce===void 0?void 0:ce.type)||"arrayBuffer"},function(be,$e){be?q(be):$e&&Z($e)},c.transformResponse);u.xhrCancel=function(){return me.cancel()}}));case 3:case"end":return L.stop()}},n)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),Q_=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},Fw={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},ZB=[jc.ARRAYBUFFER,jc.RGB];function Rb(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function WI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Rb(e))throw new Error("tile server url is error");var r=(n==null?void 0:n.dataType)||jc.IMAGE;r===jc.RGB&&(r=jc.ARRAYBUFFER);var o=function(p,g){switch(r){case jc.IMAGE:return Lw(e,p,g,n);case jc.CUSTOMIMAGE:case jc.CUSTOMTERRAINRGB:return zI(g,n==null?void 0:n.getCustomData);case jc.ARRAYBUFFER:return HI(e,p,g,(n==null?void 0:n.format)||Q_,n==null?void 0:n.operation);case jc.CUSTOMARRAYBUFFER:case jc.CUSTOMRGB:return NI(g,n==null?void 0:n.getCustomData,(n==null?void 0:n.format)||Q_,n==null?void 0:n.operation);default:return Lw(e,p,g,n)}},u=(0,ae.Z)((0,ae.Z)((0,ae.Z)({},Fw),n),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:u,isTile:!0}}var GI=["extent","min","max","width","height","format","operation"];function $I(e,n){var r=n.extent,o=n.min,u=n.max,c=n.width,p=n.height,g=n.format,y=n.operation,S=(0,Vc.Z)(n,GI),P;if(g===void 0||Rv(e))P=Array.from(e);else{var L=Array.isArray(e)?e:[e];P=mu(L,g,y)}var Z={_id:1,dataArray:[(0,ae.Z)((0,ae.Z)({_id:1,data:P,width:c,height:p},S),{},{min:o,max:u,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return Z}var XI={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},YI=function(){var e=(0,pn.Z)(Jt().mark(function n(r){return Jt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c){var p=(0,ji.Z)(r.bounds,4),g=p[0],y=p[1],S=p[2],P=p[3],L={layers:{testTile:{features:[{type:"Feature",properties:{key:r.x+"/"+r.y+"/"+r.z,x:(g+S)/2,y:(y+P)/2},geometry:{type:"LineString",coordinates:[[S,P],[S,y],[g,y],[g,y]]}}]}}};c(L)}));case 1:case"end":return u.stop()}},n)}));return function(r){return e.apply(this,arguments)}}();function Ib(e,n){var r=function(c){return YI(c)},o=(0,ae.Z)((0,ae.Z)((0,ae.Z)({},XI),n),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var qI=["extent","width","height"];function KI(e,n){var r=n.extent,o=n.width,u=n.height,c=(0,Vc.Z)(n,qI);e.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var p=c.bands||[0,1,2],g=(0,ji.Z)(p,3),y=g[0],S=g[1],P=g[2],L=[e[y],e[S],e[P]],Z=[],q=(c==null?void 0:c.countCut)||[2,98],ce=(0,ji.Z)(q,2),me=ce[0],be=ce[1],$e=(c==null?void 0:c.RMinMax)||Ts(L[0],me,be),ft=(c==null?void 0:c.GMinMax)||Ts(L[1],me,be),mt=(c==null?void 0:c.BMinMax)||Ts(L[2],me,be),zt=0;zt<L[0].length;zt++)Z.push(Math.max(0,L[0][zt]-$e[0])),Z.push(Math.max(0,L[1][zt]-ft[0])),Z.push(Math.max(0,L[2][zt]-mt[0]));var ar={_id:1,dataArray:[(0,ae.Z)((0,ae.Z)({_id:1,data:Z,width:o,height:u,rMinMax:$e,gMinMax:ft,bMinMax:mt},c),{},{coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return ar}var QI=["extent","width","height"];function Ob(e,n){var r=n.extent,o=n.width,u=n.height,c=(0,Vc.Z)(n,QI);e.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var p=c.bands||[0,1],g=(0,ji.Z)(p,2),y=g[0],S=g[1],P=[e[y],e[S]],L=[],Z=0;Z<P[0].length;Z++)L.push((P[1][Z]-P[0][Z])/(P[1][Z]+P[0][Z]));var q={_id:1,dataArray:[(0,ae.Z)((0,ae.Z)({_id:1,data:L,width:o,height:u},c),{},{coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return q}var JI=k(69848),eO=k.n(JI);function Um(e,n){var r=n.radius,o=r===void 0?40:r,u=n.maxZoom,c=u===void 0?18:u,p=n.minZoom,g=p===void 0?0:p,y=n.zoom,S=y===void 0?2:y;if(e.pointIndex){var P=e.pointIndex.getClusters(e.extent,Math.floor(S));return e.dataArray=sy(P),e}var L=new(eO())({radius:o,minZoom:g,maxZoom:c}),Z={type:"FeatureCollection",features:[]};return Z.features=e.dataArray.map(function(q){return{type:"Feature",geometry:{type:"Point",coordinates:q.coordinates},properties:(0,ae.Z)({},q)}}),L.load(Z.features),L}function sy(e){return e.map(function(n,r){return(0,ae.Z)({coordinates:n.geometry.coordinates,_id:r+1},n.properties)})}function Pb(e){if(e.length===0)throw new Error("max requires at least one data point");for(var n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]);return n}function Bw(e){if(e.length===0)throw new Error("min requires at least one data point");for(var n=e[0],r=1;r<e.length;r++)e[r]<n&&(n=e[r]);return n}function Gv(e){if(e.length===0)return 0;for(var n=e[0],r=0,o,u=1;u<e.length;u++)o=n+e[u]*1,Math.abs(n)>=Math.abs(e[u])?r+=n-o+e[u]:r+=e[u]-o+n,n=o;return n+r*1}function uv(e){if(e.length===0)throw new Error("mean requires at least one data point");return Gv(e)/e.length}var tO={min:Bw,max:Pb,mean:uv,sum:Gv};function kb(e){var n=rO();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function rO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nO=Aa.cloneDeep,Nw=Aa.isFunction,iO=Aa.isString,Ed=Aa.mergeWith;function aO(e,n){if(Array.isArray(n))return n}var zw=function(e){(0,gr.Z)(r,e);var n=kb(r);function r(o,u){var c;return(0,It.Z)(this,r),c=n.call(this),(0,Ve.Z)((0,Mr.Z)(c),"type","source"),(0,Ve.Z)((0,Mr.Z)(c),"isTile",!1),(0,Ve.Z)((0,Mr.Z)(c),"inited",!1),(0,Ve.Z)((0,Mr.Z)(c),"hooks",{init:new Sd}),(0,Ve.Z)((0,Mr.Z)(c),"parser",{type:"geojson"}),(0,Ve.Z)((0,Mr.Z)(c),"transforms",[]),(0,Ve.Z)((0,Mr.Z)(c),"cluster",!1),(0,Ve.Z)((0,Mr.Z)(c),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,Ve.Z)((0,Mr.Z)(c),"invalidExtent",!1),(0,Ve.Z)((0,Mr.Z)(c),"dataArrayChanged",!1),(0,Ve.Z)((0,Mr.Z)(c),"cfg",{autoRender:!0}),c.originData=o,c.initCfg(u),c.init().then(function(){c.inited=!0,c.emit("update",{type:"inited"})}),c}return(0,ct.Z)(r,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(u){return this.clusterIndex.getClusters(this.caculClusterExtent(2),u)}},{key:"getClustersLeaves",value:function(u){return this.clusterIndex.getLeaves(u,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(u){var c=this,p=this.clusterOptions,g=p.method,y=g===void 0?"sum":g,S=p.field,P=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(u));this.clusterOptions.zoom=u,P.forEach(function(L){L.id||(L.properties.point_count=1)}),(S||Nw(y))&&(P=P.map(function(L){var Z=L.id;if(Z){var q=c.clusterIndex.getLeaves(Z,1/0),ce=q.map(function($e){return $e.properties}),me;if(iO(y)&&S){var be=Wh(ce,S);me=tO[y](be)}Nw(y)&&(me=y(ce)),L.properties.stat=me}else L.properties.point_count=1;return L})),this.data=Y("geojson")({type:"FeatureCollection",features:P}),this.executeTrans()}},{key:"getFeatureById",value:function(u){var c=this.parser,p=c.type,g=p===void 0?"geojson":p,y=c.geometry;if(g==="geojson"&&!this.cluster){var S=u<this.originData.features.length?this.originData.features[u]:"null",P=nO(S);if(P!=null&&P.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var L=this.data.dataArray.find(function(Z){return Z._id===u});P.properties=L}return P}else return g==="json"&&y?this.data.dataArray.find(function(Z){return Z._id===u}):u<this.data.dataArray.length?this.data.dataArray[u]:"null"}},{key:"updateFeaturePropertiesById",value:function(u,c){this.data.dataArray=this.data.dataArray.map(function(p){return p._id===u?(0,ae.Z)((0,ae.Z)({},p),c):p}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(u,c){var p=this.data.dataArray.find(function(g){return g[u]===c});return p==null?void 0:p._id}},{key:"setData",value:function(u,c){var p=this;this.originData=u,this.dataArrayChanged=!1,this.initCfg(c),this.init().then(function(){p.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var u;(u=this.tileset)===null||u===void 0||u.reloadAll()}},{key:"reloadTilebyId",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileById(u,c,p)}},{key:"reloadTileByLnglat",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileByLnglat(u,c,p)}},{key:"getTileExtent",value:function(u,c){var p;return(p=this.tileset)===null||p===void 0?void 0:p.getTileExtent(u,c)}},{key:"getTileByZXY",value:function(u,c,p){var g;return(g=this.tileset)===null||g===void 0?void 0:g.getTileByZXY(u,c,p)}},{key:"reloadTileByExtent",value:function(u,c){var p;(p=this.tileset)===null||p===void 0||p.reloadTileByExtent(u,c)}},{key:"destroy",value:function(){var u;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(u=this.tileset)===null||u===void 0||u.destroy()}},{key:"processData",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",new Promise(function(S,P){try{p.excuteParser(),p.initCluster(),p.executeTrans(),S({})}catch(L){P(L)}}));case 1:case"end":return y.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"initCfg",value:function(u){this.cfg=Ed(this.cfg,u,aO);var c=this.cfg;c&&(c.parser&&(this.parser=c.parser),c.transforms&&(this.transforms=c.transforms),this.cluster=c.cluster||!1,c.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,ae.Z)((0,ae.Z)({},this.clusterOptions),c.clusterOptions)))}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.inited=!1,g.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"excuteParser",value:function(){var u=this.parser,c=u.type||"geojson",p=Y(c);this.data=p(this.originData,u),this.tileset=this.initTileset(),!u.cancelExtent&&(this.extent=Zd(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(u){this.center=[(u[0]+u[2])/2,(u[1]+u[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var u=this.data.tilesetOptions;if(u){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(u),this.tileset;var c=new Li((0,ae.Z)({},u));return c}}},{key:"executeTrans",value:function(){var u=this,c=this.transforms;c.forEach(function(p){var g=p.type,y=Q(g)(u.data,p);Object.assign(u.data,y)})}},{key:"initCluster",value:function(){if(this.cluster){var u=this.clusterOptions||{};this.clusterIndex=Um(this.data,u)}}},{key:"caculClusterExtent",value:function(u){var c=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(c=Lh(Zs(this.extent),u)),c[0].concat(c[1])}}]),r}(Es.EventEmitter);function oO(e,n){var r=n.callback;return r&&(e.dataArray=e.dataArray.filter(r)),e}function Uw(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=sO(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function sO(e,n){if(e){if(typeof e=="string")return Zw(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zw(e,n)}}function Zw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var Db=6378e3;function uO(e,n){var r=e.dataArray,o=n.size,u=o===void 0?10:o,c=u/(2*Math.PI*Db)*(256<<20)/2,p=lO(r,u),g=p.gridHash,y=p.gridOffset,S=hO(g,y,n);return{yOffset:c,xOffset:c,radius:c,type:"grid",dataArray:S}}function lO(e,n){var r=1/0,o=-1/0,u,c=Uw(e),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;u=g.coordinates[1],Number.isFinite(u)&&(r=u<r?u:r,o=u>o?u:o)}}catch(mt){c.e(mt)}finally{c.f()}var y=(r+o)/2,S=cO(n,y);if(S.xOffset<=0||S.yOffset<=0)return{gridHash:{},gridOffset:S};var P={},L=Uw(e),Z;try{for(L.s();!(Z=L.n()).done;){var q=Z.value,ce=q.coordinates[1],me=q.coordinates[0];if(Number.isFinite(ce)&&Number.isFinite(me)){var be=Math.floor((ce+90)/S.yOffset),$e=Math.floor((me+180)/S.xOffset),ft="".concat(be,"-").concat($e);P[ft]=P[ft]||{count:0,points:[]},P[ft].count+=1,P[ft].points.push(q)}}}catch(mt){L.e(mt)}finally{L.f()}return{gridHash:P,gridOffset:S}}function cO(e,n){var r=fO(e),o=Vg(n,e);return{yOffset:r,xOffset:o}}function fO(e){return e/Db*(180/Math.PI)}function Vg(e,n){return n/Db*(180/Math.PI)/Math.cos(e*Math.PI/180)}function hO(e,n,r){return Object.keys(e).reduce(function(o,u,c){var p=u.split("-"),g=parseInt(p[0],10),y=parseInt(p[1],10),S={};if(r.field&&r.method){var P=bp(e[u].points,r.field);S[r.method]=ph[r.method](P)}return Object.assign(S,{_id:c,coordinates:Qn([-180+n.xOffset*(y+.5),-90+n.yOffset*(g+.5)]),rawData:e[u].points,count:e[u].count}),o.push(S),o},[])}var Zm=Math.PI/3,Vw=[0,Zm,2*Zm,3*Zm,4*Zm,5*Zm];function jw(e){return e[0]}function pO(e){return e[1]}function uy(){var e=0,n=0,r=1,o=1,u=jw,c=pO,p,g,y;function S(L){var Z={},q=[],ce,me=L.length;for(ce=0;ce<me;++ce)if(!(isNaN($e=+u.call(null,be=L[ce],ce,L))||isNaN(ft=+c.call(null,be,ce,L)))){var be,$e,ft,mt=Math.round(ft=ft/y),zt=Math.round($e=$e/g-(mt&1)/2),ar=ft-mt;if(Math.abs(ar)*3>1){var nr=$e-zt,Yt=zt+($e<zt?-1:1)/2,Cr=mt+(ft<mt?-1:1),Nr=$e-Yt,nn=ft-Cr;nr*nr+ar*ar>Nr*Nr+nn*nn&&(zt=Yt+(mt&1?1:-1)/2,mt=Cr)}var an=zt+"-"+mt,Nn=Z[an];Nn?Nn.push(be):(q.push(Nn=Z[an]=[be]),Nn.x=(zt+(mt&1)/2)*g,Nn.y=mt*y)}return q}function P(L){var Z=0,q=0;return Vw.map(function(ce){var me=Math.sin(ce)*L,be=-Math.cos(ce)*L,$e=me-Z,ft=be-q;return Z=me,q=be,[$e,ft]})}return S.hexagon=function(L){return"m"+P(L==null?p:+L).join("l")+"z"},S.centers=function(){for(var L=[],Z=Math.round(n/y),q=Math.round(e/g),ce=Z*y;ce<o+p;ce+=y,++Z)for(var me=q*g+(Z&1)*g/2;me<r+g/2;me+=g)L.push([me,ce]);return L},S.mesh=function(){var L=P(p).slice(0,4).join("l");return S.centers().map(function(Z){return"M"+Z+"m"+L}).join("")},S.x=function(L){return arguments.length?(u=L,S):u},S.y=function(L){return arguments.length?(c=L,S):c},S.radius=function(L){return arguments.length?(p=+L,g=p*2*Math.sin(Zm),y=p*1.5,S):p},S.size=function(L){return arguments.length?(e=n=0,r=+L[0],o=+L[1],S):[r-e,o-n]},S.extent=function(L){return arguments.length?(e=+L[0][0],n=+L[0][1],r=+L[1][0],o=+L[1][1],S):[[e,n],[r,o]]},S.radius(1)}var jg=6378e3;function dO(e,n){var r=e.dataArray,o=n.size,u=o===void 0?10:o,c=n.method,p=c===void 0?"sum":c,g=u/(2*Math.PI*jg)*(256<<20)/2,y=r.map(function(Z){var q=Qn(Z.coordinates),ce=(0,ji.Z)(q,2),me=ce[0],be=ce[1];return(0,ae.Z)((0,ae.Z)({},Z),{},{coordinates:[me,be]})}),S=uy().radius(g).x(function(Z){return Z.coordinates[0]}).y(function(Z){return Z.coordinates[1]}),P=S(y),L={dataArray:P.map(function(Z,q){var ce;if(n.field&&p){var me=bp(Z,n.field);Z[p]=ph[p](me)}return ce={},(0,Ve.Z)(ce,n.method,Z[p]),(0,Ve.Z)(ce,"count",Z.length),(0,Ve.Z)(ce,"rawData",Z),(0,Ve.Z)(ce,"coordinates",[Z.x,Z.y]),(0,Ve.Z)(ce,"_id",q),ce}),radius:g,xOffset:g,yOffset:g,type:"hexagon"};return L}function Lb(e,n){var r=n.sourceField,o=n.targetField,u=n.data,c={};return u.forEach(function(p){c[p[r]]=p}),e.dataArray=e.dataArray.map(function(p){var g=p[o];return(0,ae.Z)((0,ae.Z)({},p),c[g])}),e}function vO(e,n){var r=n.callback;return r&&(e.dataArray=e.dataArray.map(r)),e}re("rasterTile",WI),re("mvt",tu),re("geojsonvt",ka),re("testTile",Ib),re("geojson",xm),re("jsonTile",Uu),re("image",_a),re("csv",_m),re("json",ym),re("raster",$o),re("rasterRgb",$I),re("rgb",KI),re("ndi",Ob),ye("cluster",Um),ye("filter",oO),ye("join",Lb),ye("map",vO),ye("grid",uO),ye("hexagon",dO);var J_=zw;function gO(e){var n=mO();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function mO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Hg=function(e){(0,gr.Z)(r,e);var n=gO(r);function r(o){var u;return(0,It.Z)(this,r),u=n.call(this),(0,Ve.Z)((0,Mr.Z)(u),"added",!1),(0,Ve.Z)((0,Mr.Z)(u),"preLngLat",{lng:0,lat:0}),(0,Ve.Z)((0,Mr.Z)(u),"onMarkerDragStart",function(c){var p=u.mapsService.getContainer();if(p){u.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});var g=p.getClientRects()[0],y=g.left,S=g.top,P=c.x,L=c.y;u.preLngLat=u.mapsService.containerToLngLat([P-y,L-S]),u.mapsService.on("mousemove",u.onMarkerDragMove),document.addEventListener("mouseup",u.onMarkerDragEnd),u.emit("dragstart",u.lngLat)}}),(0,Ve.Z)((0,Mr.Z)(u),"onMarkerDragMove",function(c){var p=u.preLngLat,g=p.lng,y=p.lat,S=c.lnglat,P=S.lng,L=S.lat,Z={lng:u.lngLat.lng+P-g,lat:u.lngLat.lat+L-y};u.setLnglat(Z),u.preLngLat=c.lnglat,u.emit("dragging",Z)}),(0,Ve.Z)((0,Mr.Z)(u),"onMarkerDragEnd",function(c){u.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),u.mapsService.off("mousemove",u.onMarkerDragMove),document.removeEventListener("mouseup",u.onMarkerDragEnd),u.emit("dragend",u.lngLat)}),(0,Ve.Z)((0,Mr.Z)(u),"eventHandle",function(c){u.polyfillEvent(c),u.emit(c.type,{target:c,data:u.markerOption.extData,lngLat:u.lngLat})}),u.markerOption=(0,ae.Z)((0,ae.Z)({},u.getDefault()),o),Ud(["update","onMove","onMapClick","updatePositionWhenZoom"],(0,Mr.Z)(u)),u.init(),u}return(0,ct.Z)(r,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:To.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(u){this.scene=u,this.mapsService=u.get(Qt.IMapService),this.sceneSerive=u.get(Qt.ISceneService);var c=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(c),this.registerMarkerEvent(c),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var u=this.markerOption.element;return u&&pc(u),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(u){return this.lngLat=u,Array.isArray(u)&&(this.lngLat={lng:u[0],lat:u[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(u){var c=this;if(!this.added)return this.once("added",function(){c.setElement(u)}),this;var p=this.markerOption.element;return p&&pc(p),this.markerOption.element=u,this.init(),this.mapsService.getMarkerContainer().appendChild(u),this.registerMarkerEvent(u),this.updateDraggable(),this.update(),this}},{key:"openPopup",value:function(){var u=this;if(!this.added)return this.once("added",function(){u.openPopup()}),this;var c=this.popup;return c?(c.isOpen()||c.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var u=this;this.added||this.once("added",function(){u.closePopup()});var c=this.popup;return c&&c.remove(),this}},{key:"setPopup",value:function(u){return this.popup=u,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var u=this.popup;if(u)u.isOpen()?u.remove():u.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(u){this.markerOption.draggable=u,this.updateDraggable()}},{key:"getDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(u){this.markerOption.extData=u}},{key:"update",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.anchor;this.updatePosition(),Pf(c,"".concat(lr[p]))}}},{key:"updatePositionWhenZoom",value:function(u){if(this.mapsService){var c=this.markerOption,p=c.element,g=c.offsets,y=this.lngLat,S=y.lng,P=y.lat;if(p){p.style.display="block",p.style.whiteSpace="nowrap";var L=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Z=L.containerHeight,q=L.containerWidth,ce=L.bounds;if(!ce)return;var me=u.map,be=u.center,$e=u.zoom,ft=me.DE(this.lngLat,$e,be);if(ft.x=Math.round(ft.x+g[0]),ft.y=Math.round(ft.y-g[1]),Math.abs(ce[0][0])>180||Math.abs(ce[1][0])>180){if(ft.x>q){var mt=this.mapsService.lngLatToContainer([S-360,P]);ft.x=mt.x}if(ft.x<0){var zt=this.mapsService.lngLatToContainer([S+360,P]);ft.x=zt.x}}(ft.x>q||ft.x<0||ft.y>Z||ft.y<0)&&(p.style.display="none"),p.style.left=ft.x+"px",p.style.top=ft.y+"px",p.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}}},{key:"onMapClick",value:function(u){var c=this.markerOption.element;this.popup&&c&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var u=this.mapsService.getContainer();return{containerHeight:(u==null?void 0:u.scrollHeight)||0,containerWidth:(u==null?void 0:u.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updateDraggable",value:function(){var u=this.markerOption.element;u==null||u.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(u==null||u.addEventListener("mousedown",this.onMarkerDragStart))}},{key:"updatePosition",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.offsets,g=this.lngLat,y=g.lng,S=g.lat,P=this.mapsService.lngLatToContainer([y,S]);if(c){c.style.display="block",c.style.whiteSpace="nowrap";var L=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Z=L.containerHeight,q=L.containerWidth,ce=L.bounds;if(!ce)return;if(Math.abs(ce[0][0])>180||Math.abs(ce[1][0])>180){if(P.x>q){var me=this.mapsService.lngLatToContainer([y-360,S]);P.x=me.x}if(P.x<0){var be=this.mapsService.lngLatToContainer([y+360,S]);P.x=be.x}}(P.x>q||P.x<0||P.y>Z||P.y<0)&&(c.style.display="none"),c.style.left=P.x+p[0]+"px",c.style.top=P.y-p[1]+"px",console.log(c.style.left)}}}},{key:"init",value:function(){var u=this,c=this.markerOption.element,p=this.markerOption,g=p.color,y=p.anchor;if(!c){this.defaultMarker=!0,c=$s("div"),this.markerOption.element=c;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"display","block"),S.setAttributeNS(null,"height","48px"),S.setAttributeNS(null,"width","48px"),S.setAttributeNS(null,"viewBox","0 0 1024 1024");var P=document.createElementNS("http://www.w3.org/2000/svg","path");P.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),P.setAttributeNS(null,"fill",g),S.appendChild(P),c.appendChild(S)}Bu(c,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(L){var Z,q,ce=((Z=u.markerOption)===null||Z===void 0?void 0:Z.style)&&((q=u.markerOption)===null||q===void 0?void 0:q.style[L]);c&&(c.style[L]=ce)}),Dt(c,y,"marker")}},{key:"registerMarkerEvent",value:function(u){u.addEventListener("click",this.onMapClick),u.addEventListener("mousemove",this.eventHandle),u.addEventListener("click",this.eventHandle),u.addEventListener("mousedown",this.eventHandle),u.addEventListener("mouseup",this.eventHandle),u.addEventListener("dblclick",this.eventHandle),u.addEventListener("contextmenu",this.eventHandle),u.addEventListener("mouseover",this.eventHandle),u.addEventListener("mouseout",this.eventHandle),u.addEventListener("touchstart",this.eventHandle),u.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var u=this.getElement();u.removeEventListener("click",this.onMapClick),u.removeEventListener("mousemove",this.eventHandle),u.removeEventListener("click",this.eventHandle),u.removeEventListener("mousedown",this.eventHandle),u.removeEventListener("mouseup",this.eventHandle),u.removeEventListener("dblclick",this.eventHandle),u.removeEventListener("contextmenu",this.eventHandle),u.removeEventListener("mouseover",this.eventHandle),u.removeEventListener("mouseout",this.eventHandle),u.removeEventListener("touchstart",this.eventHandle),u.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(u){!this.mapsService||this.mapsService.version!=="GAODE2.x"||yp()||(u.type==="touchstart"&&(this.touchStartTime=Date.now()),u.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:u,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(u){return null}},{key:"onUp",value:function(u){throw new Error("Method not implemented.")}}]),r}(Es.EventEmitter);function Fb(e){var n=yO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function yO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VB=Aa.merge,ly=null,jB=k(4157);function _O(e){var n=Hw();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Hw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Wg=function(e){(0,gr.Z)(r,e);var n=_O(r);function r(o){var u;return(0,It.Z)(this,r),u=n.call(this),r.controlCount++,u.controlOption=(0,ae.Z)((0,ae.Z)({},u.getDefault(o)),o||{}),u}return(0,ct.Z)(r,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(u){var c=this.getDefault(u);Object.entries(u).forEach(function(p){var g=(0,ji.Z)(p,2),y=g[0],S=g[1];S===void 0&&(u[y]=c[y])}),"position"in u&&this.setPosition(u.position),"className"in u&&this.setClassName(u.className),"style"in u&&this.setStyle(u.style),this.controlOption=(0,ae.Z)((0,ae.Z)({},this.controlOption),u)}},{key:"addTo",value:function(u){this.mapsService=u.get(Qt.IMapService),this.renderService=u.get(Qt.IRendererService),this.layerService=u.get(Qt.ILayerService),this.controlService=u.get(Qt.IControlService),this.configService=u.get(Qt.IGlobalConfigService),this.scene=u.get(Qt.ISceneService),this.sceneContainer=u,this.isShow=!0,this.container=this.onAdd(),Bu(this.container,"l7-control");var c=this.controlOption,p=c.className,g=c.style;return p&&this.setClassName(p),g&&this.setStyle(g),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;pc(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return $s("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var u=this.container;oh(u,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var u=this.container;Bu(u,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(u){return{position:ts.TOPRIGHT,name:"".concat(r.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(u){if(this.mapsService&&u&&u.screenX>0&&u.screenY>0){var c=this.mapsService.getContainer();c!==null&&c.focus()}}},{key:"setPosition",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ts.TOPLEFT,c=this.controlService;return c&&c.removeControl(this),this.controlOption.position=u,c&&c.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(u){var c=this.container,p=this.controlOption.className;p&&oh(c,p),u&&Bu(c,u)}},{key:"setStyle",value:function(u){var c=this.container;u?c.setAttribute("style",u):c.removeAttribute("style")}},{key:"insertContainer",value:function(){var u=this.controlOption.position,c=this.container;if(u instanceof Element)u.appendChild(c);else{var p=this.controlService.controlCorners[u];["bottomleft","bottomright","righttop","rightbottom"].includes(u)?p.insertBefore(c,p.firstChild):p.appendChild(c)}}},{key:"checkUpdateOption",value:function(u,c){return c.some(function(p){return p in u})}}]),r}(Sp());(0,Ve.Z)(Wg,"controlCount",0);function HB(e){var n=xO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function xO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var WB=null;function Bb(e){var n=Ww();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Ww(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bO=function(e){(0,gr.Z)(r,e);var n=Bb(r);function r(o,u){var c;return(0,It.Z)(this,r),c=n.call(this),(0,Ve.Z)((0,Mr.Z)(c),"isShow",!1),(0,Ve.Z)((0,Mr.Z)(c),"timeout",null),(0,Ve.Z)((0,Mr.Z)(c),"show",function(){return c.isShow||!c.contentDOM.innerHTML||(c.resetPopperPosition(),oh(c.popperDOM,"l7-popper-hide"),c.isShow=!0,c.option.unique&&r.conflictPopperList.forEach(function(p){p!==(0,Mr.Z)(c)&&p.isShow&&p.hide()}),c.emit("show"),window.addEventListener("pointerdown",c.onPopperUnClick)),(0,Mr.Z)(c)}),(0,Ve.Z)((0,Mr.Z)(c),"hide",function(){return c.isShow&&(Bu(c.popperDOM,"l7-popper-hide"),c.isShow=!1,c.emit("hide"),window.removeEventListener("pointerdown",c.onPopperUnClick)),(0,Mr.Z)(c)}),(0,Ve.Z)((0,Mr.Z)(c),"setHideTimeout",function(){c.timeout||(c.timeout=window.setTimeout(function(){c.isShow&&(c.hide(),c.timeout=null)},300))}),(0,Ve.Z)((0,Mr.Z)(c),"clearHideTimeout",function(){c.timeout&&(window.clearTimeout(c.timeout),c.timeout=null)}),(0,Ve.Z)((0,Mr.Z)(c),"onBtnClick",function(){c.isShow?c.hide():c.show()}),(0,Ve.Z)((0,Mr.Z)(c),"onPopperUnClick",function(p){mp(p.target,[".l7-button-control",".l7-popper-content"])||c.hide()}),(0,Ve.Z)((0,Mr.Z)(c),"onBtnMouseLeave",function(){c.setHideTimeout()}),(0,Ve.Z)((0,Mr.Z)(c),"onBtnMouseMove",function(){c.clearHideTimeout(),!c.isShow&&c.show()}),c.button=o,c.option=u,c.init(),u.unique&&r.conflictPopperList.push((0,Mr.Z)(c)),c}return(0,ct.Z)(r,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(u){typeof u=="string"?this.contentDOM.innerHTML=u:u instanceof HTMLElement&&(Dh(this.contentDOM),this.contentDOM.appendChild(u)),this.content=u}},{key:"init",value:function(){var u=this.option.trigger;this.popperDOM=this.createPopper(),u==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),pc(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var u={},c=this.option,p=c.container,g=c.offset,y=g===void 0?[0,0]:g,S=c.placement,P=(0,ji.Z)(y,2),L=P[0],Z=P[1],q=this.button.getBoundingClientRect(),ce=p.getBoundingClientRect(),me=zd(q,ce),be=me.left,$e=me.right,ft=me.top,mt=me.bottom,zt=!1,ar=!1;/^(left|right)/.test(S)?(S.includes("left")?u.right="".concat(q.width+$e,"px"):S.includes("right")&&(u.left="".concat(q.width+be,"px")),S.includes("start")?u.top="".concat(ft,"px"):S.includes("end")?u.bottom="".concat(mt,"px"):(u.top="".concat(ft+q.height/2,"px"),ar=!0,u.transform="translate(".concat(L,"px, calc(").concat(Z,"px - 50%))"))):/^(top|bottom)/.test(S)&&(S.includes("top")?u.bottom="".concat(q.height+mt,"px"):S.includes("bottom")&&(u.top="".concat(q.height+ft,"px")),S.includes("start")?u.left="".concat(be,"px"):S.includes("end")?u.right="".concat($e,"px"):(u.left="".concat(be+q.width/2,"px"),zt=!0,u.transform="translate(calc(".concat(L,"px - 50%), ").concat(Z,"px)"))),u.transform="translate(calc(".concat(L,"px - ").concat(zt?"50%":"0%","), calc(").concat(Z,"px - ").concat(ar?"50%":"0%",")");var nr=S.split("-");nr.length&&Bu(this.popperDOM,nr.map(function(Yt){return"l7-popper-".concat(Yt)}).join(" ")),Ph(this.popperDOM,gp(u))}},{key:"createPopper",value:function(){var u=this.option,c=u.container,p=u.className,g=p===void 0?"":p,y=u.content,S=$s("div","l7-popper l7-popper-hide ".concat(g)),P=$s("div","l7-popper-content"),L=$s("div","l7-popper-arrow");return S.appendChild(P),S.appendChild(L),c.appendChild(S),this.popperDOM=S,this.contentDOM=P,y&&this.setContent(y),S}}]),r}(Es.EventEmitter);(0,Ve.Z)(bO,"conflictPopperList",[]);function GB(e){var n=Gw();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Gw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var SO={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},$B=null;function EO(e){var n=$w();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function $w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Xw=function(e){return e.ActiveOptionClassName="l7-select-control-item-active",e.OptionValueAttrKey="data-option-value",e.OptionIndexAttrKey="data-option-index",e}(Xw||{}),XB=null,Nb=function(n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("l7-iconfont"),r.setAttribute("aria-hidden","true");var o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(n)),r.appendChild(o),r};function Yw(e){var n=qw();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function qw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YB=null;function Kw(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=zb(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function zb(e,n){if(e){if(typeof e=="string")return Ub(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ub(e,n)}}function Ub(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var Qw=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],lv=function(){if(typeof document=="undefined")return!1;for(var e=Qw[0],n={},r=0,o=Qw;r<o.length;r++){var u=o[r],c=u==null?void 0:u[1];if(c in document){var p=Kw(u.entries()),g;try{for(p.s();!(g=p.n()).done;){var y=(0,ji.Z)(g.value,2),S=y[0],P=y[1];n[e[S]]=P}}catch(L){p.e(L)}finally{p.f()}return n}}return!1}(),Jw={change:lv.fullscreenchange,error:lv.fullscreenerror},$f={request:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,r=arguments.length>1?arguments[1]:void 0;return new Promise(function(o,u){var c=function g(){$f.off("change",g),o()};$f.on("change",c);var p=n[lv.requestFullscreen](r);p instanceof Promise&&p.then(c).catch(u)})},exit:function(){return new Promise(function(n,r){if(!$f.isFullscreen){n();return}var o=function c(){$f.off("change",c),n()};$f.on("change",o);var u=document[lv.exitFullscreen]();u instanceof Promise&&u.then(o).catch(r)})},toggle:function(n,r){return $f.isFullscreen?$f.exit():$f.request(n,r)},onchange:function(n){$f.on("change",n)},onerror:function(n){$f.on("error",n)},on:function(n,r){var o=Jw[n];o&&document.addEventListener(o,r,!1)},off:function(n,r){var o=Jw[n];o&&document.removeEventListener(o,r,!1)},raw:lv};Object.defineProperties($f,{isFullscreen:{get:function(){return!!document[lv.fullscreenElement]}},element:{enumerable:!0,get:function(){var n;return(n=document[lv.fullscreenElement])!==null&&n!==void 0?n:void 0}},isEnabled:{enumerable:!0,get:function(){return!!document[lv.fullscreenEnabled]}}}),lv||($f={isEnabled:!1});var qB=null;function wO(e){var n=CO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function CO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var TO=null;function KB(e){var n=AO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function AO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QB=null;function MO(e){var n=RO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function RO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function JB(e){return Object.keys(e!=null?e:{}).every(function(n){return["layer","name","img"].includes(n)})}var e4=null;function IO(e){var n=OO();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function OO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var PO=function(e){(0,gr.Z)(r,e);var n=IO(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getDefault",value:function(){return{position:ts.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var u=$s("div","l7-control-logo");return this.setLogoContent(u),u}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(u){Cf((0,Nt.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["img","href"])&&(Dh(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(u){var c=this.controlOption,p=c.href,g=c.img,y=$s("img");if(y.setAttribute("src",g),y.setAttribute("aria-label","AntV logo"),kf(y),p){var S=$s("a","l7-control-logo-link");S.target="_blank",S.href=p,S.rel="noopener nofollow",S.setAttribute("rel","noopener nofollow"),S.appendChild(y),u.appendChild(S)}else u.appendChild(y)}}]),r}(Wg),kO={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},Sh={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function t4(e){var n=e1();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function e1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var r4=null;function eC(e){var n=DO();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function DO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var n4=null;function LO(e){var n=tC();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function tC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FO=function(e){(0,gr.Z)(r,e);var n=LO(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"update",function(){var g=o.mapsService,y=o.controlOption.maxWidth,S=g.getSize()[1]/2,P=g.containerToLngLat([0,S]),L=g.containerToLngLat([y,S]),Z=gc([P.lng,P.lat],[L.lng,L.lat]);o.updateScales(Z)}),o}return(0,ct.Z)(r,[{key:"getDefault",value:function(u){return(0,ae.Z)((0,ae.Z)({},Cf((0,Nt.Z)(r.prototype),"getDefault",this).call(this,u)),{},{name:"scale",position:ts.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var u="l7-control-scale",c=$s("div",u);this.resetScaleLines(c);var p=this.controlOption.updateWhenIdle;return this.mapsService.on(p?"moveend":"mapmove",this.update),this.mapsService.on(p?"zoomend":"zoomchange",this.update),c}},{key:"onRemove",value:function(){var u=this.controlOption.updateWhenIdle;this.mapsService.off(u?"zoomend":"zoomchange",this.update),this.mapsService.off(u?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(u){Cf((0,Nt.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(u){var c=this.controlOption,p=c.metric,g=c.imperial;p&&u&&this.updateMetric(u),g&&u&&this.updateImperial(u)}},{key:"resetScaleLines",value:function(u){Dh(u);var c=this.controlOption,p=c.metric,g=c.imperial,y=c.maxWidth,S=c.lockWidth;S&&Ph(u,"width: ".concat(y,"px")),p&&(this.mScale=$s("div","l7-control-scale-line",u)),g&&(this.iScale=$s("div","l7-control-scale-line",u)),this.update()}},{key:"updateScale",value:function(u,c,p){var g=this.controlOption.maxWidth;u.style.width=Math.round(g*p)+"px",u.innerHTML=c}},{key:"getRoundNum",value:function(u){var c=Math.pow(10,(Math.floor(u)+"").length-1),p=u/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}},{key:"updateMetric",value:function(u){var c=this.getRoundNum(u),p=c<1e3?c+" m":c/1e3+" km";this.updateScale(this.mScale,p,c/u)}},{key:"updateImperial",value:function(u){var c=u*3.2808399,p,g,y;c>5280?(p=c/5280,g=this.getRoundNum(p),this.updateScale(this.iScale,g+" mi",g/p)):(y=this.getRoundNum(c),this.updateScale(this.iScale,y+" ft",y/c))}}]),r}(Wg),$v,rC=($v={},(0,Ve.Z)($v,Oo.additive,{enable:!0,func:{srcRGB:Ct.ONE,dstRGB:Ct.ONE,srcAlpha:1,dstAlpha:1}}),(0,Ve.Z)($v,Oo.none,{enable:!1}),(0,Ve.Z)($v,Oo.normal,{enable:!0,func:{srcRGB:Ct.SRC_ALPHA,dstRGB:Ct.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,Ve.Z)($v,Oo.subtractive,{enable:!0,func:{srcRGB:Ct.ONE,dstRGB:Ct.ONE,srcAlpha:Ct.ZERO,dstAlpha:Ct.ONE_MINUS_SRC_COLOR},equation:{rgb:Ct.FUNC_SUBTRACT,alpha:Ct.FUNC_SUBTRACT}}),(0,Ve.Z)($v,Oo.max,{enable:!0,func:{srcRGB:Ct.ONE,dstRGB:Ct.ONE},equation:{rgb:Ct.MAX_EXT}}),(0,Ve.Z)($v,Oo.min,{enable:!0,func:{srcRGB:Ct.ONE,dstRGB:Ct.ONE},equation:{rgb:Ct.MIN_EXT}}),$v);function nC(e){return e.map(function(n){return typeof n=="string"&&(n=[n,{}]),n})}function iC(e,n,r,o){var u=e.multiPassRenderer,c=e.getLayerConfig(),p=c.enableTAA;return p?u.add(o("taa")):u.add(o("render")),nC(n).forEach(function(g){var y=(0,ji.Z)(g,2),S=y[0],P=y[1];u.add(r(S),P)}),u.add(r("copy")),u}var BO=function(){function e(n){(0,It.Z)(this,e),this.layer=n}return(0,ct.Z)(e,[{key:"pickRender",value:function(r){var o=this.layer.getContainer(),u=o.get(Qt.ILayerService),c=this.layer;if(c.tileLayer)return c.tileLayer.pickRender(r);c.hooks.beforePickingEncode.call(),u.renderTileLayerMask(c),c.renderModels({ispick:!0}),c.hooks.afterPickingEncode.call()}},{key:"pick",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){var p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(p=this.layer.getContainer(),g=p.get(Qt.IPickingService),u.type!=="RasterLayer"){S.next=4;break}return S.abrupt("return",this.pickRasterLayer(u,c));case 4:return this.pickRender(c),S.abrupt("return",g.pickFromPickingFBO(u,c));case 6:case"end":return S.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"pickRasterLayer",value:function(r,o,u){var c=this.layer.getContainer(),p=c.get(Qt.IPickingService),g=c.get(Qt.IMapService),y=this.layer.getSource().extent,S=ch(o.lngLat,y),P={x:o.x,y:o.y,type:o.type,lngLat:o.lngLat,target:o,rasterValue:null},L=u||r;if(S){var Z=this.readRasterValue(r,y,g,o.x,o.y);return P.rasterValue=Z,p.triggerHoverOnLayer(L,P),!0}else return P.type=o.type==="mousemove"?"mouseout":"un"+o.type,p.triggerHoverOnLayer(L,(0,ae.Z)((0,ae.Z)({},P),{},{type:"unpick"})),p.triggerHoverOnLayer(L,P),!1}},{key:"readRasterValue",value:function(r,o,u,c,p){var g=r.getSource().data.dataArray[0],y=(0,ji.Z)(o,4),S=y[0],P=S===void 0?0:S,L=y[1],Z=L===void 0?0:L,q=y[2],ce=q===void 0?10:q,me=y[3],be=me===void 0?-10:me,$e=u.lngLatToContainer([P,Z]),ft=u.lngLatToContainer([ce,be]),mt=ft.x-$e.x,zt=$e.y-ft.y,ar=[(c-$e.x)/mt,(p-ft.y)/zt],nr=g.width||1,Yt=g.height||1,Cr=Math.floor(ar[0]*nr),Nr=Math.floor(ar[1]*Yt),nn=Math.max(0,Nr-1)*nr+Cr,an=g.data[nn];return an}},{key:"selectFeature",value:function(r){var o=this.layer,u=(0,ji.Z)(r,3),c=u[0],p=u[1],g=u[2];o.hooks.beforeSelect.call([c,p,g])}},{key:"highlightPickedFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2];this.layer.hooks.beforeHighlight.call([u,c,p])}},{key:"getFeatureById",value:function(r){return this.layer.getSource().getFeatureById(r)}}]),e}(),NO=function(){function e(n){(0,It.Z)(this,e),this.layer=n;var r=this.layer.getContainer();this.rendererService=r.get(Qt.IRendererService)}return(0,ct.Z)(e,[{key:"getColorTexture",value:function(r,o){var u=this.getTextureKey(r,o);return this.key===u?this.colorTexture:(this.createColorTexture(r,o),this.key=u,this.colorTexture)}},{key:"createColorTexture",value:function(r,o){var u=this.rendererService.createTexture2D,c=this.getColorRampBar(r,o),p=u({data:new Uint8Array(c.data),width:c.width,height:c.height,flipY:!1,unorm:!0});return this.colorTexture=p,p}},{key:"setColorTexture",value:function(r,o,u){this.key=this.getTextureKey(o,u),this.colorTexture=r}},{key:"destroy",value:function(){var r;(r=this.colorTexture)===null||r===void 0||r.destroy()}},{key:"getColorRampBar",value:function(r,o){switch(r.type){case"cat":return Ic(r);case"quantize":return If(r);case"custom":return Ll(r,o);case"linear":return Rc(r,o);default:return Rs(r)}}},{key:"getTextureKey",value:function(r,o){var u;return"".concat(r.colors.join("_"),"_").concat(r==null||(u=r.positions)===null||u===void 0?void 0:u.join("_"),"_").concat(r.type,"_").concat(o==null?void 0:o.join("_"))}}]),e}(),zO=["passes"],UO=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","pickingEnabled"],aC,t1,Zb;function ZO(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=oC(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function oC(e,n){if(e){if(typeof e=="string")return sC(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sC(e,n)}}function sC(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function VO(e){var n=jO();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function jO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Vb=Aa.isEqual,uC=Aa.isFunction,lC=Aa.isNumber,Hc=Aa.isObject,HO=Aa.isPlainObject,WO=Aa.isUndefined,cC=0,Vm=(aC=Sb(Qt.IGlobalConfigService),t1=function(e){(0,gr.Z)(r,e);var n=VO(r);function r(){var o,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,It.Z)(this,r),o=n.call(this),(0,Ve.Z)((0,Mr.Z)(o),"id","".concat(cC++)),(0,Ve.Z)((0,Mr.Z)(o),"name","".concat(cC)),(0,Ve.Z)((0,Mr.Z)(o),"visible",!0),(0,Ve.Z)((0,Mr.Z)(o),"zIndex",0),(0,Ve.Z)((0,Mr.Z)(o),"inited",!1),(0,Ve.Z)((0,Mr.Z)(o),"layerModelNeedUpdate",!1),(0,Ve.Z)((0,Mr.Z)(o),"pickedFeatureID",null),(0,Ve.Z)((0,Mr.Z)(o),"selectedFeatureID",null),(0,Ve.Z)((0,Mr.Z)(o),"styleNeedUpdate",!1),(0,Ve.Z)((0,Mr.Z)(o),"forceRender",!1),(0,Ve.Z)((0,Mr.Z)(o),"clusterZoom",0),(0,Ve.Z)((0,Mr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Ve.Z)((0,Mr.Z)(o),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Ve.Z)((0,Mr.Z)(o),"hooks",{init:new v3,afterInit:new i2,beforeRender:new i2,beforeRenderData:new g3,afterRender:new Sd,beforePickingEncode:new Sd,afterPickingEncode:new Sd,beforeHighlight:new Sd(["pickedColor"]),afterHighlight:new Sd,beforeSelect:new Sd(["pickedColor"]),afterSelect:new Sd,beforeDestroy:new Sd,afterDestroy:new Sd}),(0,Ve.Z)((0,Mr.Z)(o),"models",[]),(0,Ve.Z)((0,Mr.Z)(o),"startInit",!1),(0,Ve.Z)((0,Mr.Z)(o),"layerChildren",[]),(0,Ve.Z)((0,Mr.Z)(o),"masks",[]),Ba((0,Mr.Z)(o),"configService",Zb,(0,Mr.Z)(o)),(0,Ve.Z)((0,Mr.Z)(o),"animateOptions",{enable:!1}),(0,Ve.Z)((0,Mr.Z)(o),"currentPickId",null),(0,Ve.Z)((0,Mr.Z)(o),"encodeStyleAttribute",{}),(0,Ve.Z)((0,Mr.Z)(o),"enableShaderEncodeStyles",[]),(0,Ve.Z)((0,Mr.Z)(o),"enableDataEncodeStyles",[]),(0,Ve.Z)((0,Mr.Z)(o),"pendingStyleAttributes",[]),(0,Ve.Z)((0,Mr.Z)(o),"scaleOptions",{}),(0,Ve.Z)((0,Mr.Z)(o),"animateStatus",!1),(0,Ve.Z)((0,Mr.Z)(o),"isDestroyed",!1),(0,Ve.Z)((0,Mr.Z)(o),"uniformBuffers",[]),(0,Ve.Z)((0,Mr.Z)(o),"encodeDataLength",0),(0,Ve.Z)((0,Mr.Z)(o),"sourceEvent",function(){o.dataState.dataSourceNeedUpdate=!0;var c=o.getLayerConfig();c&&c.autoFit&&o.fitBounds(c.fitBoundsOptions);var p=o.layerSource.getSourceCfg().autoRender;p&&setTimeout(function(){o.reRender()},10)}),o.name=u.name||o.id,o.zIndex=u.zIndex||0,o.rawConfig=u,o}return(0,ct.Z)(r,[{key:"addMask",value:function(u){this.masks.push(u),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}},{key:"removeMask",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),this.updateLayerConfig({maskLayers:this.masks})}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(u){this.masks.push(u)}},{key:"removeMaskLayer",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),u.destroy()}},{key:"getAttribute",value:function(u){return this.styleAttributeService.getLayerStyleAttribute(u)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(u){var c=this;if(Object.keys(u).map(function(g){g in c.rawConfig&&(c.rawConfig[g]=u[g])}),!this.startInit)this.needUpdateConfig=(0,ae.Z)((0,ae.Z)({},this.needUpdateConfig),u);else{var p=this.container.get(Qt.SceneID);this.configService.setLayerConfig(p,this.id,(0,ae.Z)((0,ae.Z)((0,ae.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),u)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(u,c){this.container=u,this.sceneContainer=c}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(u){return this.plugins.push(u),this}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:g=this.container.get(Qt.SceneID),this.startInit=!0,this.configService.setLayerConfig(g,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Qt.IIconService),this.fontService=this.container.get(Qt.IFontService),this.rendererService=this.container.get(Qt.IRendererService),this.layerService=this.container.get(Qt.ILayerService),this.debugService=this.container.get(Qt.IDebugService),this.interactionService=this.container.get(Qt.IInteractionService),this.pickingService=this.container.get(Qt.IPickingService),this.mapService=this.container.get(Qt.IMapService),y=this.getLayerConfig(),S=y.enableMultiPassRenderer,P=y.passes,S&&P!==null&&P!==void 0&&P.length&&P.length>0&&this.mapService.on("mapAfterFrameChange",function(){p.renderLayers()}),this.cameraService=this.container.get(Qt.ICameraService),this.coordinateService=this.container.get(Qt.ICoordinateSystemService),this.shaderModuleService=this.container.get(Qt.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Qt.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Qt.IFactoryNormalPass),this.styleAttributeService=this.container.get(Qt.IStyleAttributeService),S&&(this.multiPassRenderer=this.container.get(Qt.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(be){var $e=be.attributeName,ft=be.attributeField,mt=be.attributeValues,zt=be.updateOptions;p.styleAttributeService.updateStyleAttribute($e,{scale:(0,ae.Z)({field:ft},p.splitValuesAndCallbackInAttribute(mt,ft?void 0:p.getLayerConfig()[$e]))},zt)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Qt.ILayerPlugin),L=ZO(this.plugins);try{for(L.s();!(Z=L.n()).done;)q=Z.value,q.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(be){L.e(be)}finally{L.f()}return this.layerPickService=new BO(this),this.textureService=new NO(this),this.log(tl.LayerInitStart),me.next=31,this.hooks.init.promise();case 31:this.log(tl.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"log",value:function(u){var c,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var g="".concat(this.id,".").concat(p,".").concat(u),y={id:this.id,type:this.type};(c=this.debugService)===null||c===void 0||c.log(g,y)}}},{key:"updateModelData",value:function(u){u.attributes&&u.elements?this.models.map(function(c){c.updateAttributesAndElements(u.attributes,u.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(u){this.layerPickService=u}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var u=this.getLayerConfig(),c=u.animateOption;c!=null&&c.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(u,c,p){return this.updateStyleAttribute("color",u,c,p),this}},{key:"texture",value:function(u,c,p){return this.updateStyleAttribute("texture",u,c,p),this}},{key:"rotate",value:function(u,c,p){return this.updateStyleAttribute("rotate",u,c,p),this}},{key:"size",value:function(u,c,p){return this.updateStyleAttribute("size",u,c,p),this}},{key:"filter",value:function(u,c,p){var g=this.updateStyleAttribute("filter",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"shape",value:function(u,c,p){this.shapeOption={field:u,values:c};var g=this.updateStyleAttribute("shape",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"label",value:function(u,c,p){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:u,attributeValues:c,updateOptions:p}),this}},{key:"animate",value:function(u){var c={};return Hc(u)?(c.enable=!0,c=(0,ae.Z)((0,ae.Z)({},c),u)):c.enable=u,this.updateLayerConfig({animateOption:c}),this}},{key:"source",value:function(u,c){return(u==null?void 0:u.type)==="source"?(this.setSource(u),this):(this.sourceOption={data:u,options:c},this.clusterZoom=0,this)}},{key:"setData",value:function(u,c){var p=this;return this.inited?(this.log(tl.SourceInitStart,Xo.UPDATE),this.layerSource.setData(u,c),this.log(tl.SourceInitEnd,Xo.UPDATE)):this.on("inited",function(){p.log(tl.SourceInitStart,Xo.UPDATE);var g=p.getSource();g?p.layerSource.setData(u,c):p.source(new J_(u,c)),p.layerSource.once("update",function(){p.log(tl.SourceInitEnd,Xo.UPDATE)})}),this}},{key:"style",value:function(u){var c=this,p=u.passes,g=(0,Vc.Z)(u,zO);p&&nC(p).forEach(function(S){var P=c.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(S[0]);P&&P.updateOptions(S[1])}),g.borderColor&&(g.stroke=g.borderColor),g.borderWidth&&(g.strokeWidth=g.borderWidth);var y=g;return Object.keys(g).forEach(function(S){var P=g[S];Array.isArray(P)&&P.length===2&&!lC(P[0])&&!lC(P[1])&&(y[S]={field:P[0],value:P[1]})}),this.encodeStyle(y),this.updateLayerConfig(y),this}},{key:"encodeStyle",value:function(u){var c=this;Object.keys(u).forEach(function(p){[].concat((0,Rn.Z)(c.enableShaderEncodeStyles),(0,Rn.Z)(c.enableDataEncodeStyles)).includes(p)&&HO(u[p])&&(u[p].field||u[p].value)&&!Vb(c.encodeStyleAttribute[p],u[p])?(c.encodeStyleAttribute[p]=u[p],c.updateStyleAttribute(p,u[p].field,u[p].value),c.inited&&(c.dataState.dataMappingNeedUpdate=!0)):c.encodeStyleAttribute[p]&&(delete c.encodeStyleAttribute[p],c.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(u,c){var p=(0,ae.Z)({},this.scaleOptions);if(Hc(u)?this.scaleOptions=(0,ae.Z)((0,ae.Z)({},this.scaleOptions),u):this.scaleOptions[u]=c,this.styleAttributeService&&!Vb(p,this.scaleOptions)){var g=Hc(u)?u:(0,Ve.Z)({},u,c);this.styleAttributeService.updateScaleAttribute(g)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"prerender",value:function(){}},{key:"render",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(u),this))}},{key:"renderMultiPass",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){g.next=2;break}return g.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){g.next=7;break}return g.next=5,this.multiPassRenderer.render();case 5:g.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"active",value:function(u){var c={};return c.enableHighlight=Hc(u)?!0:u,Hc(u)?(c.enableHighlight=!0,u.color&&(c.highlightColor=u.color),u.mix&&(c.activeMix=u.mix)):c.enableHighlight=!!u,this.updateLayerConfig(c),this}},{key:"setActive",value:function(u,c){var p=this;if(Hc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,P=S===void 0?0:S;this.updateLayerConfig({highlightColor:Hc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Hc(c)?c.mix:this.getLayerConfig().activeMix}),this.pick({x:y,y:P})}else this.updateLayerConfig({pickedFeatureID:u,highlightColor:Hc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Hc(c)?c.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Ms(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"select",value:function(u){var c={};return c.enableSelect=Hc(u)?!0:u,Hc(u)?(c.enableSelect=!0,u.color&&(c.selectColor=u.color),u.mix&&(c.selectMix=u.mix)):c.enableSelect=!!u,this.updateLayerConfig(c),this}},{key:"setSelect",value:function(u,c){var p=this;if(Hc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,P=S===void 0?0:S;this.updateLayerConfig({selectColor:Hc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Hc(c)?c.mix:this.getLayerConfig().selectMix}),this.pick({x:y,y:P})}else this.updateLayerConfig({pickedFeatureID:u,selectColor:Hc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Hc(c)?c.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Ms(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"setBlend",value:function(u){return this.updateLayerConfig({blend:u}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(u){return this.zIndex=u,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(u){this.currentPickId=u}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(u){this.selectedFeatureID=u}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var u=this.mapService.getZoom(),c=this.getLayerConfig(),p=c.visible,g=c.minZoom,y=g===void 0?-1/0:g,S=c.maxZoom,P=S===void 0?1/0:S;return!!p&&u>=y&&u<P}},{key:"setMultiPass",value:function(u,c){if(this.updateLayerConfig({enableMultiPassRenderer:u}),c&&this.updateLayerConfig({passes:c}),u){var p=this.getLayerConfig(),g=p.passes,y=g===void 0?[]:g;this.multiPassRenderer=iC(this,y,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var S=this.rendererService.getViewportSize(),P=S.width,L=S.height;this.multiPassRenderer.resize(P,L)}return this}},{key:"setMinZoom",value:function(u){return this.updateLayerConfig({minZoom:u}),this}},{key:"getMinZoom",value:function(){var u=this.getLayerConfig(),c=u.minZoom;return c}},{key:"getMaxZoom",value:function(){var u=this.getLayerConfig(),c=u.maxZoom;return c}},{key:"get",value:function(u){var c=this.getLayerConfig();return c[u]}},{key:"setMaxZoom",value:function(u){return this.updateLayerConfig({maxZoom:u}),this}},{key:"setAutoFit",value:function(u){return this.updateLayerConfig({autoFit:u}),this}},{key:"fitBounds",value:function(u){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var c=this.getSource(),p=c.extent,g=p.some(function(y){return Math.abs(y)===1/0});return g?this:(this.mapService.fitBounds([[p[0],p[1]],[p[2],p[3]]],u),this)}},{key:"destroy",value:function(){var u,c,p,g,y,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){(u=this.layerModel)===null||u===void 0||u.uniformBuffers.forEach(function(Z){Z.destroy()}),this.layerChildren.map(function(Z){return Z.destroy(!1)}),this.layerChildren=[];var P=this.getLayerConfig(),L=P.maskfence;L&&(this.masks.map(function(Z){return Z.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(c=this.multiPassRenderer)===null||c===void 0||c.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(p=this.layerModel)===null||p===void 0||p.clearModels(S),(g=this.tileLayer)===null||g===void 0||g.destroy(),this.models=[],(y=this.debugService)===null||y===void 0||y.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var u;this.models.forEach(function(c){return c.destroy()}),(u=this.layerModel)===null||u===void 0||u.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(u){return u.needRescale||u.needRemapping||u.needRegenerateVertices}).length}},{key:"setSource",value:function(u){var c=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=u,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var p=this.mapService.getZoom();this.layerSource.updateClusterData(p)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(g){var y=g.type;if(c.coordCenter===void 0){var S,P=c.layerSource.center;c.coordCenter=P,(S=c.mapService)!==null&&S!==void 0&&S.setCoordCenter&&c.mapService.setCoordCenter(P)}if(y==="update"){if(c.tileLayer){c.tileLayer.reload();return}c.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(u){this.encodedData=u,this.encodeDataLength=u.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(u){return this.styleAttributeService.getLayerAttributeScale(u)}},{key:"getLegend",value:function(u){var c,p,g,y=this.styleAttributeService.getLayerStyleAttribute(u),S=(y==null||(c=y.scale)===null||c===void 0?void 0:c.scalers)||[];return{type:(p=S[0].option)===null||p===void 0?void 0:p.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(u)}}},{key:"getLegendItems",value:function(u){var c=this.styleAttributeService.getLayerAttributeScale(u);if(!c)return[];if(c.invertExtent){var p=c.range().map(function(S){return(0,Ve.Z)({value:c.invertExtent(S)},u,S)});return p}else if(c.ticks){var g=c.ticks().map(function(S){return(0,Ve.Z)({value:S},u,c(S))});return g}else if(c!=null&&c.domain){var y=c.domain().filter(function(S){return!WO(S)}).map(function(S){return(0,Ve.Z)({value:S},u,c(S))});return y}return[]}},{key:"pick",value:function(u){var c=u.x,p=u.y;this.interactionService.triggerHover({x:c,y:p})}},{key:"boxSelect",value:function(u,c){this.pickingService.boxPickLayer(this,u,c)}},{key:"buildLayerModel",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g=this,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar;return Jt().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return y=p.moduleName,S=p.vertexShader,P=p.fragmentShader,L=p.inject,Z=p.triangulation,q=p.styleOption,ce=p.pickingEnabled,me=ce===void 0?!0:ce,be=(0,Vc.Z)(p,UO),this.shaderModuleService.registerModule(y,{vs:S,fs:P,inject:L}),$e=this.shaderModuleService.getModule(y),ft=$e.vs,mt=$e.fs,zt=$e.uniforms,ar=this.rendererService.createModel,Yt.abrupt("return",new Promise(function(Cr){var Nr=g.styleAttributeService.createAttributesAndIndices(g.encodedData,Z,q),nn=Nr.attributes,an=Nr.elements,Nn=Nr.count,jn=[].concat((0,Rn.Z)(g.layerModel.uniformBuffers),(0,Rn.Z)(g.rendererService.uniformBuffers),[g.getLayerUniformBuffer()]);me&&jn.push(g.getPickingUniformBuffer());var di=(0,ae.Z)({attributes:nn,uniforms:zt,fs:mt,vs:ft,elements:an,blend:rC[Oo.normal],uniformBuffers:jn,textures:g.layerModel.textures},be);Nn&&(di.count=Nn);var Ua=ar(di);Cr(Ua)}));case 5:case"end":return Yt.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"createAttributes",value:function(u){var c=u.triangulation,p=this.styleAttributeService.createAttributes(this.encodedData,c),g=p.attributes;return g}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(u){var c=this.getLayerConfig(),p=c.enableHighlight,g=p===void 0?!0:p,y=c.enableSelect,S=y===void 0?!0:y,P=this.eventNames().indexOf(u)!==-1||this.eventNames().indexOf("un"+u)!==-1;return(u==="click"||u==="dblclick")&&S&&(P=!0),u==="mousemove"&&(g||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(P=!0),this.isVisible()&&P}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMulPass",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,p.render();case 2:case"end":return y.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderModels",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(p){p.draw({uniforms:u.layerModel.getUninforms(),blend:u.layerModel.getBlend(),stencil:u.layerModel.getStencil(c),textures:u.layerModel.textures},(c==null?void 0:c.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(u,c,p,g){var y=this.configService.getAttributeConfig(this.id)||{};return Vb(y[u],{field:c,values:p})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(u)!==-1&&this.configService.setAttributeConfig(this.id,(0,Ve.Z)({},u,{field:c,values:p})),this.startInit?this.styleAttributeService.updateStyleAttribute(u,{scale:(0,ae.Z)({field:c},this.splitValuesAndCallbackInAttribute(p,this.getLayerConfig()[c]))},g):this.pendingStyleAttributes.push({attributeName:u,attributeField:c,attributeValues:p,updateOptions:g}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(u){console.warn("empty fn")}},{key:"processData",value:function(u){return u}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.models.forEach(function(P){return P.destroy()}),this.models=[],this.uniformBuffers.forEach(function(P){P.destroy()}),this.uniformBuffers=[],p=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(p),g=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(g),S.next=10,this.layerModel.initModels();case 10:this.models=S.sent;case 11:case"end":return S.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getLayerUniformBuffer",value:function(){return this.uniformBuffers[0]}},{key:"getPickingUniformBuffer",value:function(){return this.uniformBuffers[1]}},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(u){return{values:uC(u)?void 0:u,callback:uC(u)?u:void 0}}}]),r}(Es.EventEmitter),Zb=Ia(t1.prototype,"configService",[aC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t1);function cv(e,n){return{enable:e,mask:255,func:{cmp:Ct.EQUAL,ref:n?1:0,mask:1}}}function jb(e){return e.maskOperation===hl.OR?{enable:!0,mask:255,func:{cmp:Ct.ALWAYS,ref:1,mask:255},opFront:{fail:Ct.KEEP,zfail:Ct.REPLACE,zpass:Ct.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===yo.SINGLE||e.stencilIndex===0?Ct.ALWAYS:Ct.LESS,ref:e.stencilType===yo.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:Ct.KEEP,zfail:Ct.REPLACE,zpass:Ct.REPLACE}}}var fa=function(e){return e[e.POSITION=0]="POSITION",e[e.COLOR=1]="COLOR",e[e.VERTEX_ID=2]="VERTEX_ID",e[e.PICKING_COLOR=3]="PICKING_COLOR",e[e.STROKE=4]="STROKE",e[e.OPACITY=5]="OPACITY",e[e.OFFSETS=6]="OFFSETS",e[e.ROTATION=7]="ROTATION",e[e.EXTRUSION_BASE=8]="EXTRUSION_BASE",e[e.SIZE=9]="SIZE",e[e.SHAPE=10]="SHAPE",e[e.EXTRUDE=11]="EXTRUDE",e[e.MAX=12]="MAX",e[e.NORMAL=13]="NORMAL",e[e.UV=14]="UV",e[e.LINEAR=15]="LINEAR",e}({});function Bp(e){switch(e){case"rotation":return{name:"Rotation",type:ma.Attribute,descriptor:{name:"a_Rotation",shaderLocation:fa.ROTATION,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(r){var o=r.rotation,u=o===void 0?0:o;return Array.isArray(u)?[u[0]]:[u]}}};case"stroke":return{name:"stroke",type:ma.Attribute,descriptor:{name:"a_Stroke",shaderLocation:fa.STROKE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(r){var o=r.stroke,u=o===void 0?[1,1,1,1]:o;return u}}};case"opacity":return{name:"opacity",type:ma.Attribute,descriptor:{name:"a_Opacity",shaderLocation:fa.OPACITY,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(r){var o=r.opacity,u=o===void 0?1:o;return[u]}}};case"extrusionBase":return{name:"extrusionBase",type:ma.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:fa.EXTRUSION_BASE,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(r){var o=r.extrusionBase,u=o===void 0?0:o;return[u]}}};case"offsets":return{name:"offsets",type:ma.Attribute,descriptor:{name:"a_Offsets",shaderLocation:fa.OFFSETS,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(r){var o=r.offsets;return o}}};case"thetaOffset":return{name:"thetaOffset",type:ma.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(r){var o=r.thetaOffset,u=o===void 0?1:o;return[u]}}};default:return}}var fC={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},cy={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function w8(e){var n="";return Object.keys(e).forEach(function(r){var o=e[r];Array.isArray(o)?n+="vec".concat(o.length," ").concat(r,`;
`):n+="flot ".concat(r,`;
`)}),n}function wd(e){return Math.max(Math.ceil(e/4)*4,4)}var cs,fy,Hb,Xv={opacity:fa.OPACITY,stroke:fa.STROKE,offsets:fa.OFFSETS,rotation:fa.ROTATION,extrusionBase:fa.EXTRUSION_BASE,thetaOffset:15},Eu=(cs=Sb(Qt.IGlobalConfigService),fy=function(){function e(n){(0,It.Z)(this,e),(0,Ve.Z)(this,"uniformBuffers",[]),(0,Ve.Z)(this,"textures",[]),(0,Ve.Z)(this,"preStyleAttribute",{}),(0,Ve.Z)(this,"encodeStyleAttribute",{}),Ba(this,"configService",Hb,this),this.layer=n,this.rendererService=n.getContainer().get(Qt.IRendererService),this.pickingService=n.getContainer().get(Qt.IPickingService),this.shaderModuleService=n.getContainer().get(Qt.IShaderModuleService),this.styleAttributeService=n.getContainer().get(Qt.IStyleAttributeService),this.mapService=n.getContainer().get(Qt.IMapService),this.iconService=n.getContainer().get(Qt.IIconService),this.fontService=n.getContainer().get(Qt.IFontService),this.cameraService=n.getContainer().get(Qt.ICameraService),this.layerService=n.getContainer().get(Qt.ILayerService),this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var r=this.rendererService.createTexture2D;this.createTexture2D=r}return(0,ct.Z)(e,[{key:"getBlend",value:function(){var r=this.layer.getLayerConfig(),o=r.blend,u=o===void 0?"normal":o;return rC[Oo[u]]}},{key:"getStencil",value:function(r){var o=this.layer.getLayerConfig(),u=o.mask,c=u===void 0?!1:u,p=o.maskInside,g=p===void 0?!0:p,y=o.enableMask,S=o.maskOperation,P=S===void 0?hl.AND:S;if(this.layer.type==="MaskLayer")return jb({isStencil:!0,stencilType:yo.SINGLE});if(r.isStencil)return jb((0,ae.Z)((0,ae.Z)({},r),{},{maskOperation:P}));var L=c||y&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return cv(L,g)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){var r=this.getCommonUniformsInfo(),o=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();var u=(0,ae.Z)((0,ae.Z)({},o.uniformsOption),r.uniformsOption);return!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(u.u_texture=this.textures[0]),u}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){return Jt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",!1);case 1:case"end":return c.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){return Jt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){return Jt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"prerender",value:function(){}},{key:"render",value:function(r){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.duration||4,r.interval||.2,r.trailLength||.1]}},{key:"startModelAnimate",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;o.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var r=this.layer.encodeStyleAttribute,o="",u=[];this.layer.enableShaderEncodeStyles.forEach(function(g){r[g]?o+="#define USE_ATTRIBUTE_".concat(g.toUpperCase(),` 0.0; 

`):u.push("  ".concat(cy[g]," u_").concat(g,";"));var y=Xv[g];!y&&g==="THETA_OFFSET"&&(y=15),o+=`
          #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
          layout(location = `).concat(Xv[g],") in ").concat(cy[g]," a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
        #endif

        `)});var c=u.length?`
layout(std140) uniform AttributeUniforms {
`.concat(u.join(`
`),`
};
    `):"";o+=c;var p="";return this.layer.enableShaderEncodeStyles.forEach(function(g){p+=`

    #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
      `).concat(cy[g]," ").concat(g,"  = a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
    #else
      `).concat(cy[g]," ").concat(g," = u_").concat(g,`;
    #endif

    `)}),{"vs:#decl":o,"fs:#decl":c,"vs:#main-start":p}}},{key:"getStyleAttribute",value:function(){var r=this,o={};return this.layer.enableShaderEncodeStyles.forEach(function(u){if(!r.layer.encodeStyleAttribute[u]){var c=r.layer.getLayerConfig()[u],p=typeof c=="undefined"?fC[u]:c;u==="stroke"&&(p=bo(p)),o["u_"+u]=p}}),o}},{key:"registerStyleAttribute",value:function(){var r=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(o){var u=Bp(o);u&&(r.styleAttributeService.registerStyleAttribute(u),u.descriptor&&(u.descriptor.shaderLocation=Xv[o]))})}},{key:"updateEncodeAttribute",value:function(r,o){this.encodeStyleAttribute[r]=o}},{key:"initUniformsBuffer",value:function(){var r=this.getUniformsBufferInfo(this.getStyleAttribute()),o=this.getCommonUniformsInfo();r.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(wd(r.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),o.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(wd(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}},{key:"getUniformsBufferInfo",value:function(r){var o=0,u=[];return Object.values(r).forEach(function(c){Array.isArray(c)?(u.push.apply(u,(0,Rn.Z)(c)),o+=c.length):typeof c=="number"?(u.push(c),o+=1):typeof c=="boolean"&&(u.push(Number(c)),o+=1)}),{uniformsOption:r,uniformsLength:o,uniformsArray:u}}},{key:"getCommonUniformsInfo",value:function(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}},{key:"updateStyleUnifoms",value:function(){var r,o,u=this.getUniformsBufferInfo(this.getStyleAttribute()),c=u.uniformsArray,p=this.getCommonUniformsInfo(),g=p.uniformsArray;(r=this.attributeUnifoms)===null||r===void 0||r.subData({offset:0,data:new Uint8Array(new Float32Array(c).buffer)}),(o=this.commonUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)})}}]),e}(),Hb=Ia(fy.prototype,"configService",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fy),hC=100,GO=36,i4=40;function pC(e){return e/180*Math.acos(-1)}function Wb(e){var n=pC(e[0])+Math.PI/2,r=pC(e[1]),o=hC+Math.random()*.4,u=o*Math.cos(r)*Math.cos(n),c=o*Math.cos(r)*Math.sin(n),p=o*Math.sin(r);return[c,p,u]}function $O(e,n){var r=mat4.create(),o=mat4.create(),u=vec3.fromValues(0,1,0),c=vec3.fromValues(0,0,0);n=n||{},e=typeof e!="undefined"?e:1;for(var p=typeof n.segments!="undefined"?n.segments:32,g=2+p,y=2*g,S=[],P=[],L=[],Z=[],q=[],ce=[],me=0;me<=g;me++){for(var be=me/g,$e=be*Math.PI,ft=0;ft<=y;ft++){var mt=ft/y,zt=mt*Math.PI*2;mat4.identity(o),mat4.rotateZ(o,o,-$e),mat4.identity(r),mat4.rotateY(r,r,zt),vec3.transformMat4(c,u,o),vec3.transformMat4(c,c,r),vec3.scale(c,c,-e),L.push(c.slice()),Z.push.apply(Z,_toConsumableArray(c.slice())),vec3.normalize(c,c),q.push.apply(q,_toConsumableArray(c.slice())),ce.push([mt,1-be]),Z.push(mt,1-be)}if(me>0)for(var ar=L.length,nr=ar-2*(y+1);nr+y+2<ar;nr++)S.push([nr,nr+1,nr+y+1]),P.push(nr,nr+1,nr+y+1),S.push([nr+y+1,nr+1,nr+y+2]),P.push(nr+y+1,nr+1,nr+y+2)}return{cells:S,positions:L,uvs:ce,positionsArr:Z,indicesArr:P,normalArr:q}}var mn=Jn.Ue(),dC=Jn.Ue(),qi=Jn.Ue(),rl=Jn.Ue(),fv=Jn.Ue();function Gg(e,n,r,o,u){Jn.IH(e,r,o),Jn.Fv(e,e),n=Jn.al(-e[1],e[0]);var c=Jn.al(-r[1],r[0]);return[u/Jn.AK(n,c),n]}function Yv(e,n){return Jn.t8(e,-n[1],n[0])}function nl(e,n,r){return Jn.lu(e,n,r),Jn.Fv(e,e),e}function hy(e,n){return e[0]===n[0]&&e[1]===n[1]}function a4(e){for(var n=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();n.get(o)?(e.splice(r,1),r++):n.set(o,o)}return e}var o4=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,It.Z)(this,e),(0,Ve.Z)(this,"lastFlip",-1),(0,Ve.Z)(this,"miter",Jn.al(0,0)),(0,Ve.Z)(this,"started",!1),(0,Ve.Z)(this,"dash",!1),(0,Ve.Z)(this,"totalDistance",0),(0,Ve.Z)(this,"currentIndex",0),this.join=n.join||"miter",this.cap=n.cap||"butt",this.miterLimit=n.miterLimit||10,this.thickness=n.thickness||1,this.dash=n.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,ct.Z)(e,[{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,P=this.simpleSegment(o,c,g,y,S);c+=P}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,P,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var Z=o[g-1],q=r[g];q.push((S=o[g][2])!==null&&S!==void 0?S:0);var ce=o[g],me=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(P=o[g+1][2])!==null&&P!==void 0?P:0]):null,be=g<o.length-1?o[g+1]:null,$e=this.simpleSegment(u,p,L,q,me,Z,ce,be);p+=$e}if(this.dash)for(var ft=0;ft<u.positions.length/6;ft++)u.positions[ft*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,P,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var Z=o[g-1],q=r[g];q.push((S=o[g][2])!==null&&S!==void 0?S:0);var ce=o[g],me=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(P=o[g+1][2])!==null&&P!==void 0?P:0]):null,be=g<o.length-1?o[g+1]:null,$e=this.segment_gaode2(u,p,L,q,me,Z,ce,be);p+=$e}if(this.dash)for(var ft=0;ft<u.positions.length/6;ft++)u.positions[ft*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,P=this.segment(o,c,g,y,S);c+=P}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,P=r.normals,L=Qn([c[0],c[1]]),Z=Qn([u[0],u[1]]);nl(qi,L,Z);var q=0;if(this.dash&&(q=this.lineSegmentDistance(L,Z),this.totalDistance+=q),this.normal||(this.normal=Jn.Ue(),Yv(this.normal,qi)),this.started||(this.started=!0,this.extrusions(S,P,u,this.normal,this.thickness,this.totalDistance-q)),y.push(o+0,o+1,o+2),!p)Yv(this.normal,qi),this.extrusions(S,P,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ce=Qn([p[0],p[1]]);hy(L,ce)&&Jn.IH(ce,L,Jn.Fv(ce,Jn.$X(ce,L,Z))),nl(rl,ce,L);var me=Gg(fv,Jn.Ue(),qi,rl,this.thickness),be=(0,ji.Z)(me,2),$e=be[0],ft=be[1],mt=Jn.AK(fv,this.normal)<0?-1:1;this.extrusions(S,P,c,ft,$e,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),mt=-1,Jn.JG(this.normal,ft),g+=2,this.lastFlip=mt}return g}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var P=0,L=r.indices,Z=r.positions,q=r.normals,ce=this.cap==="square",me=this.join==="bevel",be=Qn([y[0],y[1]]),$e=Qn([g[0],g[1]]);nl(qi,c,u);var ft=0;if(this.dash&&(ft=this.lineSegmentDistance(be,$e),this.totalDistance+=ft),this.normal||(this.normal=Jn.Ue(),Yv(this.normal,qi)),!this.started)if(this.started=!0,ce){var mt=Jn.Ue(),zt=Jn.Ue();Jn.IH(mt,this.normal,qi),Jn.IH(zt,this.normal,qi),q.push(zt[0],zt[1],0),q.push(mt[0],mt[1],0),Z.push(u[0],u[1],u[2]|0,this.totalDistance-ft,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(u[0],u[1],u[2]|0,this.totalDistance-ft,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Z,q,u,this.normal,this.thickness,this.totalDistance-ft);if(L.push(o+0,o+1,o+2),p){hy(c,p)&&Jn.IH(p,c,Jn.Fv(p,Jn.$X(p,c,u))),nl(rl,p,c);var Yt=Gg(fv,Jn.Ue(),qi,rl,this.thickness),Cr=(0,ji.Z)(Yt,2),Nr=Cr[0],nn=Cr[1],an=Jn.AK(fv,this.normal)<0?-1:1,Nn=me;if(!Nn&&this.join==="miter"){var jn=Nr;jn>this.miterLimit&&(Nn=!0)}Nn?(q.push(this.normal[0],this.normal[1],0),q.push(nn[0],nn[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L.push.apply(L,(0,Rn.Z)(this.lastFlip!==-an?[o,o+2,o+3]:[o+2,o+1,o+3])),L.push(o+2,o+3,o+4),Yv(mn,rl),Jn.JG(this.normal,mn),q.push(this.normal[0],this.normal[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*an,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,P+=3):(this.extrusions(Z,q,c,nn,Nr,this.totalDistance),L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),an=-1,Jn.JG(this.normal,nn),P+=2),this.lastFlip=an}else{if(Yv(this.normal,qi),ce){var ar=Jn.Ue(),nr=Jn.Ue();Jn.lu(nr,qi,this.normal),Jn.IH(ar,qi,this.normal),q.push(nr[0],nr[1],0),q.push(ar[0],ar[1],0),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),Z.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Z,q,c,this.normal,this.thickness,this.totalDistance);L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),P+=2}return P}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,P=r.normals,L=this.cap==="square",Z=this.join==="bevel",q=Qn([c[0],c[1]]),ce=Qn([u[0],u[1]]);nl(qi,q,ce);var me=0;if(this.dash&&(me=this.lineSegmentDistance(q,ce),this.totalDistance+=me),this.normal||(this.normal=Jn.Ue(),Yv(this.normal,qi)),!this.started)if(this.started=!0,L){var be=Jn.Ue(),$e=Jn.Ue();Jn.IH(be,this.normal,qi),Jn.IH($e,this.normal,qi),P.push($e[0],$e[1],0),P.push(be[0],be[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-me,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-me,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,P,u,this.normal,this.thickness,this.totalDistance-me);if(y.push(o+0,o+1,o+2),p){var zt=Qn([p[0],p[1]]);hy(q,zt)&&Jn.IH(zt,q,Jn.Fv(zt,Jn.$X(zt,q,ce))),nl(rl,zt,q);var ar=Gg(fv,Jn.Ue(),qi,rl,this.thickness),nr=(0,ji.Z)(ar,2),Yt=nr[0],Cr=nr[1],Nr=Jn.AK(fv,this.normal)<0?-1:1,nn=Z;if(!nn&&this.join==="miter"){var an=Yt;an>this.miterLimit&&(nn=!0)}nn?(P.push(this.normal[0],this.normal[1],0),P.push(Cr[0],Cr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Rn.Z)(this.lastFlip!==-Nr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),Yv(mn,rl),Jn.JG(this.normal,mn),P.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Nr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,P,c,Cr,Yt,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Nr=-1,Jn.JG(this.normal,Cr),g+=2),this.lastFlip=Nr}else{if(Yv(this.normal,qi),L){var ft=Jn.Ue(),mt=Jn.Ue();Jn.lu(mt,qi,this.normal),Jn.IH(ft,qi,this.normal),P.push(mt[0],mt[1],0),P.push(ft[0],ft[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,P,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}(),ja=k(77160);function s4(e){var n=e[0][0],r=e[0][e[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var o=e[0].length,u=earcut.flatten(e),c=u.vertices,p=u.dimensions,g=[],y=[],S=0;S<c.length/p;S++)p===2?g.push(c[S*2],c[S*2+1],1):g.push(c[S*3],c[S*3+1],1);var P=earcut(u.vertices,u.holes,u.dimensions);y.push.apply(y,_toConsumableArray(P));for(var L=function(){var ce=u.vertices.slice(Z*p,(Z+1)*p),me=u.vertices.slice((Z+1)*p,(Z+2)*p);me.length===0&&(me=u.vertices.slice(0,p));var be=g.length/3;g.push(ce[0],ce[1],1,me[0],me[1],1,ce[0],ce[1],0,me[0],me[1],0),y.push.apply(y,_toConsumableArray([0,2,1,2,3,1].map(function($e){return $e+be})))},Z=0;Z<o;Z++)L();return{positions:g,index:y}}function $g(e){var n=earcut.flatten(e),r=earcut(n.vertices,n.holes,n.dimensions);return{positions:n.vertices,index:r}}function py(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e[0][0],o=e[0][e[0].length-1];r[0]===o[0]&&r[1]===o[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var u=e[0].length,c=Gl().flatten(e),p=c.vertices,g=c.dimensions,y=[],S=[],P=[],L=0;L<p.length/g;L++)y.push(p[L*g],p[L*g+1],1,-1,-1),P.push(0,0,1);var Z=Gl()(c.vertices,c.holes,c.dimensions);S.push.apply(S,(0,Rn.Z)(Z));for(var q=function(){var be=c.vertices.slice(ce*g,(ce+1)*g),$e=c.vertices.slice((ce+1)*g,(ce+2)*g);$e.length===0&&($e=c.vertices.slice(0,g));var ft=y.length/5;y.push(be[0],be[1],1,0,0,$e[0],$e[1],1,.1,0,be[0],be[1],0,0,.8,$e[0],$e[1],0,.1,.8);var mt=Gb([$e[0],$e[1],1],[be[0],be[1],0],[be[0],be[1],1],n);P.push.apply(P,(0,Rn.Z)(mt).concat((0,Rn.Z)(mt),(0,Rn.Z)(mt),(0,Rn.Z)(mt))),S.push.apply(S,(0,Rn.Z)([1,2,0,3,2,1].map(function(zt){return zt+ft})))},ce=0;ce<u;ce++)q();return{positions:y,index:S,normals:P}}function Gb(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=ja.create(),c=ja.create(),p=ja.create();o&&(e=nc(e),n=nc(n),r=nc(r));var g=ja.fromValues.apply(ja,(0,Rn.Z)(e)),y=ja.fromValues.apply(ja,(0,Rn.Z)(n)),S=ja.fromValues.apply(ja,(0,Rn.Z)(r));ja.sub(u,S,y),ja.sub(c,g,y),ja.cross(p,u,c);var P=ja.create();return ja.normalize(P,p),P}var Jh,dy=function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e}({}),vy=function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e}({});function gy(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=Math.PI*2/e,o=[],u=0;u<e;u++)o.push(r*u+n*Math.PI/12);var c=o.map(function(p){var g=Math.sin(p+Math.PI/4),y=Math.cos(p+Math.PI/4);return[g,y,0]});return c}function r1(){return gy(30)}function $b(){return gy(4)}function Xb(){return gy(3)}function yy(){return gy(6,1)}function vC(){return gy(5)}var n1=(Jh={},(0,Ve.Z)(Jh,vy.CIRCLE,r1),(0,Ve.Z)(Jh,vy.HEXAGON,yy),(0,Ve.Z)(Jh,vy.TRIANGLE,Xb),(0,Ve.Z)(Jh,vy.SQUARE,$b),(0,Ve.Z)(Jh,vy.PENTAGON,vC),(0,Ve.Z)(Jh,dy.CYLINDER,r1),(0,Ve.Z)(Jh,dy.HEXAGONCOLUMN,yy),(0,Ve.Z)(Jh,dy.TRIANGLECOLUMN,Xb),(0,Ve.Z)(Jh,dy.SQUARECOLUMN,$b),(0,Ve.Z)(Jh,dy.PENTAGONCOLUMN,vC),Jh),po={};function qv(e){var n=Ca(e.coordinates);return{vertices:[].concat((0,Rn.Z)(n),(0,Rn.Z)(n),(0,Rn.Z)(n),(0,Rn.Z)(n)),indices:[0,1,2,2,3,0],size:n.length}}function Yb(e){var n=Ca(e.coordinates),r=Wb(n);return{vertices:[].concat((0,Rn.Z)(r),(0,Rn.Z)(r),(0,Rn.Z)(r),(0,Rn.Z)(r)),indices:[0,1,2,2,3,0],size:r.length}}function jm(e){var n=e.shape,r=Xg(n,!1),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function i1(e){var n=Ca(e.coordinates);return{vertices:(0,Rn.Z)(n),indices:[0],size:n.length}}function qb(e){var n=e.coordinates,r=e.originCoordinates,o=e.version,u=new o4({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=n;Array.isArray(c[0][0])||(c=[n]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var P=n;P[0]&&!Array.isArray(P[0][0])&&(P=[n]),P.forEach(function(Z){u.extrude(Z)})}var L=u.complex;return{vertices:L.positions,indices:L.indices,normals:L.normals,indexes:L.indexes,size:6}}function gC(e){var n=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat(_toConsumableArray(n),[1,2,-3],_toConsumableArray(n),[1,1,-3],_toConsumableArray(n),[0,1,0],_toConsumableArray(n),[0,0,0],_toConsumableArray(n),[1,0,0],_toConsumableArray(n),[1,2,-3],_toConsumableArray(n),[1,1,-3],_toConsumableArray(n),[0,1,0],_toConsumableArray(n),[0,0,0],_toConsumableArray(n)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function mC(e){var n=e.coordinates,r=e.originCoordinates,o=[];if(!Array.isArray(n[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var u=YO(n,r),c=u.results,p=u.totalDistance;return c.map(function(g){o.push(g[0],g[1],g[2],g[3],0,p)}),{vertices:o,indices:[],normals:[],size:6,count:c.length}}function XO(e){var n=e.coordinates,r=[];if(!Array.isArray(n[0]))return{vertices:[],indices:[],size:4,count:0};var o=qO(n),u=o.results;return u.map(function(c){r.push(c[0],c[1],c[2],c[3])}),{vertices:r,indices:[],size:4,count:u.length}}function a1(e,n){var r=n[0]-e[0],o=n[1]-e[1];return Math.sqrt(r*r+o*o)}function Hm(e,n){return e.length<3&&e.push(0),n!==void 0&&e.push(n),e}function YO(e,n){var r=e,o=n||e;Array.isArray(r)&&Array.isArray(r[0])&&Array.isArray(r[0][0])&&(r=n.flat(),o=n.flat());var u=0;if(r.length<2)return{results:r,totalDistance:0};var c=[],p=Hm(r[0],u);c.push(p);for(var g=1;g<r.length-1;g++){var y=a1(Qn(o[g-1]),Qn(o[g]));u+=y;var S=Hm(r[g],u);c.push(S),c.push(S)}var P=a1(Qn(o[o.length-2]),Qn(o[o.length-1]));return u+=P,c.push(Hm(r[r.length-1],u)),{results:c,totalDistance:u}}function qO(e){if(e.length<2)return{results:e};var n=[],r=Hm(e[0]);n.push(r);for(var o=1;o<e.length-1;o++){var u=Hm(e[o]);n.push(u),n.push(u)}return n.push(Hm(e[e.length-1])),{results:n}}function Kb(e){var n=e.coordinates,r=Gl().flatten(n),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Gl()(o,c,u),vertices:o,size:u}}function KO(e){var n=e.coordinates,r=Gl().flatten(n),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Gl()(o,c,u),vertices:QO(o),size:u+4}}function QO(e){for(var n=[],r=Os(e),o=r.center,u=r.radius,c=0;c<e.length;c+=2){var p=e[c],g=e[c+1];n.push.apply(n,[p,g,0].concat((0,Rn.Z)(o),[u]))}return n}function yC(e){var n=e.coordinates,r=py(n,!0),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function u4(e){var n=e.shape,r=qo(n),o=r.positions,u=r.index;return{vertices:o,indices:u,size:3}}function o1(e){var n=e.coordinates,r=[].concat((0,Rn.Z)(n[0]),[0,0,1,n[1][0],n[0][1],0,1,1],(0,Rn.Z)(n[1]),[0,1,0],(0,Rn.Z)(n[0]),[0,0,1],(0,Rn.Z)(n[1]),[0,1,0,n[0][0],n[1][1],0,0,0]),o=[0,1,2,3,4,5];return{vertices:r,indices:o,size:5}}function Qb(e,n){for(var r=n.segmentNumber,o=r===void 0?30:r,u=e.coordinates,c=[],p=[],g=function(P){c.push(P,1,P,u[0][0],u[0][1],u[1][0],u[1][1],P,-1,P,u[0][0],u[0][1],u[1][0],u[1][1]),P!==o-1&&p.push.apply(p,(0,Rn.Z)([0,1,2,1,3,2].map(function(L){return P*2+L})))},y=0;y<o;y++)g(y);return{vertices:c,indices:p,size:7}}function ep(e){var n=e.coordinates;n.length===2&&n.push(0);var r=Np(-1,1),o=Np(1,1),u=Np(-1,-1),c=Np(1,-1),p=[].concat(_toConsumableArray(n),_toConsumableArray(r),_toConsumableArray(n),_toConsumableArray(u),_toConsumableArray(n),_toConsumableArray(c),_toConsumableArray(n),_toConsumableArray(o)),g=[0,1,2,3,0,2];return{vertices:p,indices:g,size:5}}function Xg(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(po&&po[e])return po[e];var r=n1[e]?n1[e]():n1.cylinder(),o=py([r],n);return po[e]=o,o}function Kl(e,n){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=new Float32Array(e.length/r*3),c,p,g,y=vec3.create(),S=vec3.create(),P=vec3.create(),L=0,Z=n.length;L<Z;L+=3){c=n[L+0]*3,p=n[L+1]*3,g=n[L+2]*3;var q=[e[c],e[c+1]],ce=[e[p],e[p+1]],me=[e[g],e[g+1]];o&&(q=lngLatToMeters(q),ce=lngLatToMeters(ce),me=lngLatToMeters(me));var be=q,$e=_slicedToArray(be,2),ft=$e[0],mt=$e[1],zt=vec3.fromValues(ft,mt,e[c+2]),ar=ce,nr=_slicedToArray(ar,2),Yt=nr[0],Cr=nr[1],Nr=vec3.fromValues(Yt,Cr,e[p+2]),nn=me,an=_slicedToArray(nn,2),Nn=an[0],jn=an[1],di=vec3.fromValues(Nn,jn,e[g+2]);vec3.sub(y,di,Nr),vec3.sub(S,zt,Nr),vec3.cross(P,y,S),u[c]+=y[0],u[c+1]+=y[1],u[c+2]+=y[2],u[p]+=y[0],u[p+1]+=y[1],u[p+2]+=y[2],u[g]+=y[0],u[g+1]+=y[1],u[g+2]+=y[2]}return hu(u),u}function hu(e){for(var n=0,r=e.length;n<r;n+=3){var o=vec3.fromValues(e[n],e[n+1],e[n+2]),u=vec3.create();vec3.normalize(u,o),e.set(u,n)}}function As(e){var n=e[0][0],r=e[0][e[0].length-1];return n[0]===r[0]&&n[1]===r[1]}function qo(e){var n=["cylinder","triangleColumn","hexagonColumn","squareColumn"],r=geometryShape[e]?geometryShape[e]():geometryShape.circle(),o=n.indexOf(e)===-1?fillPolygon([r]):extrudePolygon([r]);return o}function Np(e,n){var r=(e+1)/2,o=(n+1)/2;return[r,o]}function s1(){var e=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),n=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:n,indices:r,size:5,normals:o}}function _C(){var e=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),n=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:n,indices:r,size:5,normals:o}}function Hu(e){var n=wu();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function wu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Yg=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,xC=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,bC={solid:0,dash:1},C8=Aa.isNumber,u1=function(e){(0,gr.Z)(r,e);var n=Hu(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.NEAREST,min:Ct.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,P=S===void 0?"solid":S,L=u.dashArray,Z=L===void 0?[10,5]:L,q=u.forward,ce=q===void 0?!0:q,me=u.lineTexture,be=me===void 0?!1:me,$e=u.iconStep,ft=$e===void 0?100:$e,mt=u.segmentNumber,zt=mt===void 0?30:mt,ar=this.layer.getLayerConfig(),nr=ar.animateOption,Yt=Z;P!=="dash"&&(Yt=[0,0]),Yt.length===2&&Yt.push(0,0);var Cr=0,Nr=[0,0,0,0],nn=[0,0,0,0];c&&p&&(Nr=bo(c),nn=bo(p),Cr=1),this.rendererService.getDirty()&&this.texture.bind();var an={u_animate:this.animateOption2Array(nr),u_dash_array:Yt,u_sourceColor:Nr,u_targetColor:nn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:zt,u_lineDir:ce?1:-1,u_icon_step:ft,u_line_texture:be?1:0,u_textureBlend:y==="normal"?0:1,u_blur:.9,u_line_type:bC[P||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Cr},Nn=this.getUniformsBufferInfo(an);return Nn}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:Yg,vert:xC,type:""}}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return this.initUniformsBuffer(),p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),P=S.frag,L=S.vert,Z=S.type,me.next=5,this.layer.buildLayerModel({moduleName:"lineArc2d"+Z,vertexShader:L,fragmentShader:P,inject:this.getInject(),triangulation:Qb,depth:{enable:!1},styleOption:{segmentNumber:y}});case 5:return q=me.sent,me.abrupt("return",[q]);case 7:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ma.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu);function SC(e){var n=l1();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function l1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var JO=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,eP=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,tp={solid:0,dash:1},_y=function(e){(0,gr.Z)(r,e);var n=SC(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.NEAREST,min:Ct.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,P=S===void 0?"solid":S,L=u.dashArray,Z=L===void 0?[10,5]:L,q=u.lineTexture,ce=q===void 0?!1:q,me=u.iconStep,be=me===void 0?100:me,$e=u.segmentNumber,ft=$e===void 0?30:$e,mt=u.globalArcHeight,zt=mt===void 0?10:mt,ar=this.layer.getLayerConfig(),nr=ar.animateOption;Z.length===2&&Z.push(0,0);var Yt=0,Cr=[0,0,0,0],Nr=[0,0,0,0];c&&p&&(Cr=bo(c),Nr=bo(p),Yt=1),this.rendererService.getDirty()&&this.texture.bind();var nn={u_animate:this.animateOption2Array(nr),u_dash_array:Z,u_sourceColor:Cr,u_targetColor:Nr,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:hC,u_global_height:zt,segmentNumber:ft,u_line_type:tp[P]||0,u_icon_step:be,u_line_texture:ce?1:0,u_textureBlend:y==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Yt},an=this.getUniformsBufferInfo(nn);return an}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:JO,vert:eP,type:""}}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),P=S.frag,L=S.vert,Z=S.type,me.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+Z,vertexShader:L,fragmentShader:P,inject:this.getInject(),triangulation:Qb,styleOption:{segmentNumber:y}});case 4:return q=me.sent,me.abrupt("return",[q]);case 6:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ma.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu),qg={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Cu=1/2;function c1(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?1:u;return{vertices:[0,Cu*e,1*e*o,-(c+Cu)*e,1*e*o,(c-Cu)*e,0,Cu*e,1*e*o,-(c+Cu)*e,1*e*o,(c-Cu)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function EC(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?3:u;return{vertices:[0,0,1*e*o,1*c,1*e*o,-1*c,0,0,1*e*o,1*c,1*e*o,-1*c],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function tP(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?2:u;return{vertices:[0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2,0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Wc(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?3:u;return{vertices:[0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c,0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Wm(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?3:u;return{vertices:[0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c,0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Eh(e,n){var r=n.width,o=r===void 0?2:r,u=n.height,c=u===void 0?2:u,p=r1(),g=Gl().flatten([p]),y=Gl()(g.vertices,g.holes,g.dimensions),S=p.map(function(P){return[P[0]*o*e,P[1]*c]}).flat();return{vertices:[].concat((0,Rn.Z)(S),(0,Rn.Z)(S)),dimensions:2,indices:y.map(function(P){return P+p.length}),outLineIndices:y,normals:[].concat((0,Rn.Z)(p.map(function(P){return[P[1]*c,P[0]*o*e,1]}).flat()),(0,Rn.Z)(new Array(p.length*3).fill(0)))}}function f1(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=(0,vs.Z)(r.source)==="object"?r.source.type:r.source,u=(0,vs.Z)(r.target)==="object"?r.target.type:r.target,c=(0,vs.Z)(r.source)==="object"?r.source:{},p=c.width,g=p===void 0?o?qg[o]:0:p,y=c.height,S=y===void 0?2:y,P=(0,vs.Z)(r.target)==="object"?r.target:{},L=P.width,Z=L===void 0?u?qg[u]:0:L,q=P.height,ce=q===void 0?2:q;return{vertices:[0,Cu,1*g].concat((0,Rn.Z)(e),[1,Cu,-1*Z],(0,Rn.Z)(e),[1,-Cu,-1*Z],(0,Rn.Z)(e),[0,-Cu,1*g],(0,Rn.Z)(e),[0,Cu,1*g],(0,Rn.Z)(e),[1,Cu,-1*Z],(0,Rn.Z)(e),[1,-Cu,-1*Z],(0,Rn.Z)(e),[0,-Cu,1*g],(0,Rn.Z)(e)),outLineIndices:[0,1,2,0,2,3].map(function(me){return me+n}),indices:[4,5,6,4,6,7].map(function(me){return me+n}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function h1(e,n){var r=(0,vs.Z)(e)==="object"?e.type:e,o=n==="source"?1:-1,u=(0,vs.Z)(e)==="object"?e:{};switch(r){case"circle":return Eh(o,u);case"triangle":return EC(o,u);case"diamond":return Wc(o,u);case"rect":return tP(o,u);case"classic":return Wm(o,u);case"halfTriangle":return c1(o,u);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function rP(e){var n=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat((0,Rn.Z)(n),[1,2,-3],(0,Rn.Z)(n),[1,1,-3],(0,Rn.Z)(n),[0,1,0],(0,Rn.Z)(n),[0,0,0],(0,Rn.Z)(n),[1,0,0],(0,Rn.Z)(n),[1,2,-3],(0,Rn.Z)(n),[1,1,-3],(0,Rn.Z)(n),[0,1,0],(0,Rn.Z)(n),[0,0,0],(0,Rn.Z)(n)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function nP(e,n){return n?wC(e,n):rP(e)}function wC(e,n){var r=e.coordinates.flat(),o=n,u=o.target,c=u===void 0?"classic":u,p=o.source,g=p===void 0?"circle":p,y=Jb(h1(g,"source"),r,0,0),S=f1(r,y.vertices.length/7,n),P=Jb(h1(c,"target"),r,1,y.vertices.length/7+S.vertices.length/7),L={vertices:[].concat((0,Rn.Z)(y.vertices),(0,Rn.Z)(S.vertices),(0,Rn.Z)(P.vertices)),indices:[].concat((0,Rn.Z)(y.outLineIndices),(0,Rn.Z)(S.outLineIndices),(0,Rn.Z)(P.outLineIndices),(0,Rn.Z)(y.indices),(0,Rn.Z)(S.indices),(0,Rn.Z)(P.indices)),normals:[].concat((0,Rn.Z)(y.normals),(0,Rn.Z)(S.normals),(0,Rn.Z)(P.normals)),size:7};return L}function Jb(e,n){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=[],c=e.vertices,p=e.indices,g=e.dimensions,y=e.outLineIndices,S=0;S<c.length;S+=g)u.push.apply(u,[r,c[S+1],c[S]].concat((0,Rn.Z)(n)));return(0,ae.Z)((0,ae.Z)({},e),{},{vertices:u,indices:p.map(function(P){return P+o}),outLineIndices:y.map(function(P){return P+o})})}function io(e){var n=CC();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function CC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iP=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,xy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`,aP=function(e){(0,gr.Z)(r,e);var n=io(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.gapWidth,p=c===void 0?2:c,g=u.strokeWidth,y=g===void 0?1:g,S=u.strokeOpacity,P=S===void 0?1:S,L={u_gap_width:p,u_stroke_width:y,u_stroke_opacity:P},Z=this.getUniformsBufferInfo(L);return Z}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:xy,fragmentShader:iP,inject:this.getInject(),triangulation:nP,styleOption:this.layer.getLayerConfig().symbol,primitive:Ct.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ma.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(c,p,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c,p,g,y,S){return S}}})}}]),r}(Eu);function p1(e){var n=oP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function oP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var TC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,AC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,sP={solid:0,dash:1},uP=function(e){(0,gr.Z)(r,e);var n=p1(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.NEAREST,min:Ct.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,P=S===void 0?"solid":S,L=u.dashArray,Z=L===void 0?[10,5]:L,q=u.lineTexture,ce=q===void 0?!1:q,me=u.iconStep,be=me===void 0?100:me,$e=u.segmentNumber,ft=$e===void 0?30:$e,mt=this.layer.getLayerConfig(),zt=mt.animateOption;Z.length===2&&Z.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var ar=0,nr=[0,0,0,0],Yt=[0,0,0,0];c&&p&&(nr=bo(c),Yt=bo(p),ar=1);var Cr=this.layer.getLayerAnimateTime();isNaN(Cr)&&(Cr=0);var Nr={u_animate:this.animateOption2Array(zt),u_dash_array:Z,u_sourceColor:nr,u_targetColor:Yt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:ft,u_line_type:sP[P]||0,u_icon_step:be,u_line_texture:ce?1:0,u_textureBlend:y==="normal"?0:1,u_time:Cr,u_linearColor:ar},nn=this.getUniformsBufferInfo(Nr);return nn}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,L.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:AC,fragmentShader:TC,triangulation:Qb,styleOption:{segmentNumber:y},inject:this.getInject(),depth:{enable:!1}});case 3:return S=L.sent,L.abrupt("return",[S]);case 5:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ma.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu),lP=function(e){return e[e.solid=0]="solid",e[e.dash=1]="dash",e}({}),MC=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),cP=function(e){return e.NORMAL="normal",e.REPLACE="replace",e}({}),eS=function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e}({}),fP=function(e){return e.ALWAYS="always",e.DRAGEND="dragend",e}({});function hP(e){var n=pP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function pP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dP=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,vP=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in vec3 a_DistanceAndIndexAndMiter;
layout(location = 13) in vec4 a_Normal_Total_Distance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};


out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,l4={solid:0,dash:1},RC=function(e){(0,gr.Z)(r,e);var n=hP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"textureEventFlag",!1),(0,Ve.Z)((0,Mr.Z)(o),"texture",o.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.textures.length===0&&(o.textures=[o.texture]),o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.NEAREST,min:Ct.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,P=S===void 0?"solid":S,L=u.dashArray,Z=L===void 0?[10,5,0,0]:L,q=u.lineTexture,ce=q===void 0?!1:q,me=u.iconStep,be=me===void 0?100:me,$e=u.vertexHeightScale,ft=$e===void 0?20:$e,mt=u.strokeWidth,zt=mt===void 0?0:mt,ar=u.raisingHeight,nr=ar===void 0?0:ar,Yt=u.heightfixed,Cr=Yt===void 0?!1:Yt,Nr=u.linearDir,nn=Nr===void 0?MC.VERTICAL:Nr,an=u.blur,Nn=an===void 0?[1,1,1,0]:an,jn=Z;P!=="dash"&&(jn=[0,0,0,0]),jn.length===2&&jn.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var di=this.layer.getLayerConfig(),Ua=di.animateOption,Co=0,os=[0,0,0,0],nu=[0,0,0,0];c&&p&&(os=bo(c),nu=bo(p),Co=1);var pu={u_animate:this.animateOption2Array(Ua),u_dash_array:jn,u_blur:Nn,u_sourceColor:os,u_targetColor:nu,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:be,u_heightfixed:Number(Cr),u_vertexScale:ft,u_raisingHeight:Number(nr),u_strokeWidth:zt,u_textureBlend:y===cP.NORMAL?0:1,u_line_texture:ce?1:0,u_linearDir:nn===MC.VERTICAL?1:0,u_linearColor:Co,u_time:this.layer.getLayerAnimateTime()||0},cf=this.getUniformsBufferInfo(pu);return cf}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!1:g,S=this.getShaders(),P=S.frag,L=S.vert,Z=S.type,this.layer.triangulation=Gd,me.next=5,this.layer.buildLayerModel({moduleName:"line"+Z,vertexShader:L,fragmentShader:P,triangulation:Gd,inject:this.getInject(),depth:{enable:y}});case 5:return q=me.sent,me.abrupt("return",[q]);case 7:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:dP,vert:vP,type:""}}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ma.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:10,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(p,g,y,S,P,L){return L===void 0?[y[3],10,y[4]]:[y[3],L,y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:ma.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(p,g,y,S,P){return[].concat((0,Rn.Z)(P),[y[5]])}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu);function hv(e){var n=Kg();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Kg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var IC=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,OC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,Gm=Aa.isNumber,tS=function(e){(0,gr.Z)(r,e);var n=hv(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.lineType,y=g===void 0?"solid":g,S=u.dashArray,P=S===void 0?[10,5,0,0]:S,L=u.vertexHeightScale,Z=L===void 0?20:L,q=P;y!=="dash"&&(q=[0,0,0,0]),q.length===2&&q.push(0,0);var ce=0,me=[0,0,0,0],be=[0,0,0,0];c&&p&&(me=bo(c),be=bo(p),ce=1);var $e={u_sourceColor:me,u_targetColor:be,u_dash_array:q,u_vertexScale:Z,u_linearColor:ce},ft=this.getUniformsBufferInfo($e);return ft}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:IC,vert:OC,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return this.initUniformsBuffer(),p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,Z.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,triangulation:mC,inject:this.getInject(),primitive:Ct.LINES,depth:{enable:!1},pick:!1});case 4:return P=Z.sent,Z.abrupt("return",[P]);case 6:case"end":return Z.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:ma.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:fa.SIZE,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(c,p,g){var y=c.size,S=y===void 0?1:y,P=Array.isArray(S)?[S[0],S[1]]:[S,0];return[P[0],P[1],g[3],g[5]]}}})}}]),r}(Eu);function gP(e){var n=PC();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function PC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var mP=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,d1=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,yP=function(e){(0,gr.Z)(r,e);var n=gP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.NEAREST,min:Ct.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.heightfixed,P=S===void 0?!1:S,L=u.lineTexture,Z=L===void 0?!1:L,q=u.iconStep,ce=q===void 0?100:q,me=u.iconStepCount,be=me===void 0?1:me,$e=this.layer.getLayerConfig(),ft=$e.animateOption;this.rendererService.getDirty()&&this.texture.bind();var mt=0,zt=[0,0,0,0],ar=[0,0,0,0];c&&p&&(zt=bo(c),ar=bo(p),mt=1);var nr={u_animate:this.animateOption2Array(ft),u_sourceColor:zt,u_targetColor:ar,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:ce,u_heightfixed:Number(P),u_linearColor:mt,u_line_texture:Z?1:0,u_textureBlend:y==="normal"?0:1,u_iconStepCount:be,u_time:this.layer.getLayerAnimateTime()||0},Yt=this.getUniformsBufferInfo(nr);return Yt}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:d1,fragmentShader:mP,triangulation:qb,inject:this.getInject(),depth:{enable:!1},blend:this.getBlend()});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:ma.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p,g,y){return[y[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ma.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(p,g,y,S,P){return P}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ma.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu),_P={arc:u1,arc3d:_y,greatcircle:uP,wall:yP,line:RC,simple:tS,flowline:aP,earthArc3d:_y},xP=_P;function bP(e){var n=SP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function SP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var by=function(e){(0,gr.Z)(r,e);var n=bP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","LineLayer"),(0,Ve.Z)((0,Mr.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Ve.Z)((0,Mr.Z)(o),"arrowInsertCount",0),(0,Ve.Z)((0,Mr.Z)(o),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new xP[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return c[u]}},{key:"getModelType",value:function(){var u;if(this.layerType)return this.layerType;var c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p||"line"}},{key:"processData",value:function(u){if(this.getModelType()!=="simple")return u;var c=[];return u.map(function(p){if(Array.isArray(p.coordinates)&&Array.isArray(p.coordinates[0])&&Array.isArray(p.coordinates[0][0])){var g=(0,ae.Z)({},p);p.coordinates.map(function(y){c.push((0,ae.Z)((0,ae.Z)({},g),{},{coordinates:y}))})}else c.push(p)}),c}}]),r}(Vm);function rS(e){var n=EP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function EP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wP=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,CP=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function kC(e){var n=e.coordinates;return{vertices:(0,Rn.Z)(n),indices:[0],size:n.length}}var v1=function(e){(0,gr.Z)(r,e);var n=rS(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.strokeOpacity,g=p===void 0?1:p,y=u.strokeWidth,S=y===void 0?0:y,P=u.stroke,L=P===void 0?"#fff":P,Z={u_stroke_color:bo(L),u_additive:c==="additive"?1:0,u_stroke_opacity:g,u_stroke_width:S},q=this.getUniformsBufferInfo(Z);return q}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=kC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:CP,fragmentShader:wP,inject:this.getInject(),triangulation:kC,depth:{enable:!1},primitive:Ct.POINTS});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(Eu);function TP(e){var n=AP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function AP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var MP=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,RP=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,IP=Aa.isNumber,DC=function(e){(0,gr.Z)(r,e);var n=TP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"raiseCount",0),(0,Ve.Z)((0,Mr.Z)(o),"raiseRepeat",0),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.opacity,y=g===void 0?1:g,S=u.sourceColor,P=u.targetColor,L=u.pickLight,Z=L===void 0?!1:L,q=u.heightfixed,ce=q===void 0?!0:q,me=u.opacityLinear,be=me===void 0?{enable:!1,dir:"up"}:me,$e=u.lightEnable,ft=$e===void 0?!0:$e,mt=0,zt=[0,0,0,0],ar=[0,0,0,0];if(S&&P&&(zt=bo(S),ar=bo(P),mt=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var nr=p.speed,Yt=nr===void 0?.01:nr;this.raiseCount+=Yt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var Cr={u_sourceColor:zt,u_targetColor:ar,u_linearColor:mt,u_pickLight:Number(Z),u_heightfixed:Number(ce),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:IP(y)?y:1,u_opacitylinear:Number(be.enable),u_opacitylinear_dir:be.dir==="up"?1:0,u_lightEnable:Number(ft)},Nr=this.getUniformsBufferInfo(Cr);return Nr}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption.repeat,y=g===void 0?1:g,this.raiseRepeat=y,L.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:RP,fragmentShader:MP,triangulation:jm,depth:{enable:!0},inject:this.getInject(),cull:{enable:!0,face:Oc(this.mapService.version)},blend:this.getBlend()});case 4:return S=L.sent,L.abrupt("return",[S]);case 6:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ma.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c){var p=Ca(c.coordinates);return Wb([p[0],p[1]])}}})}}]),r}(Eu);function OP(e){var n=LC();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function LC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var PP=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,FC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`,nS=function(e){(0,gr.Z)(r,e);var n=OP(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,S=u.blend,P=u.blur,L=P===void 0?0:P;this.layer.getLayerConfig();var Z={u_additive:S==="additive"?1:0,u_stroke_opacity:p,u_stroke_width:y,u_blur:L},q=this.getUniformsBufferInfo(Z);return q}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=Yb,y.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:FC,fragmentShader:PP,triangulation:Yb,inject:this.getInject(),depth:{enable:!0},blend:this.getBlend()});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ma.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(p,g,y,S){var P=(0,ji.Z)(y,3),L=P[0],Z=P[1],q=P[2],ce=ja.fromValues(0,0,1),me=ja.fromValues(L,0,q),be=L>=0?ja.angle(ce,me):Math.PI*2-ja.angle(ce,me),$e=Math.PI*2-Math.asin(Z/100),ft=ks();of(ft,ft,be),Xa(ft,ft,$e);var mt=ja.fromValues(1,1,0);ja.transformMat4(mt,mt,ft),ja.normalize(mt,mt);var zt=ja.fromValues(-1,1,0);ja.transformMat4(zt,zt,ft),ja.normalize(zt,zt);var ar=ja.fromValues(-1,-1,0);ja.transformMat4(ar,ar,ft),ja.normalize(ar,ar);var nr=ja.fromValues(1,-1,0);ja.transformMat4(nr,nr,ft),ja.normalize(nr,nr);var Yt=[].concat((0,Rn.Z)(mt),(0,Rn.Z)(zt),(0,Rn.Z)(ar),(0,Rn.Z)(nr)),Cr=S%4*3;return[Yt[Cr],Yt[Cr+1],Yt[Cr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ma.Attribute,descriptor:{name:"a_Shape",shaderLocation:fa.SHAPE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,S=u.layer.getLayerConfig().shape2d,P=S.indexOf(y);return[P]}}})}}]),r}(Eu);function Kv(e){var n=Qv();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Qv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pv=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,iS=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`,$m=function(e){(0,gr.Z)(r,e);var n=Kv(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"raiseCount",0),(0,Ve.Z)((0,Mr.Z)(o),"raiseRepeat",0),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.sourceColor,y=u.targetColor,S=u.pickLight,P=S===void 0?!1:S,L=u.heightfixed,Z=L===void 0?!1:L,q=u.opacityLinear,ce=q===void 0?{enable:!1,dir:"up"}:q,me=u.lightEnable,be=me===void 0?!0:me,$e=0,ft=[0,0,0,0],mt=[0,0,0,0];if(g&&y&&(ft=bo(g),mt=bo(y),$e=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var zt=p.speed,ar=zt===void 0?.01:zt;this.raiseCount+=ar,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var nr={u_pickLight:Number(P),u_heightfixed:Number(Z),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:$e,u_sourceColor:ft,u_targetColor:mt,u_opacitylinear:Number(ce.enable),u_opacitylinear_dir:ce.dir==="up"?1:0,u_lightEnable:Number(be)},Yt=this.getUniformsBufferInfo(nr);return Yt}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!0:g,S=p.animateOption.repeat,P=S===void 0?1:S,this.raiseRepeat=P,this.initUniformsBuffer(),q.next=5,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:iS,fragmentShader:pv,triangulation:jm,inject:this.getInject(),cull:{enable:!0,face:Oc(this.mapService.version)},depth:{enable:y}});case 5:return L=q.sent,q.abrupt("return",[L]);case 7:case"end":return q.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ma.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c){var p=Ca(c.coordinates);return[p[0],p[1],0]}}})}}]),r}(Eu);function Sy(e){var n=kP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function kP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var BC=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,aS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,g1=function(e){(0,gr.Z)(r,e);var n=Sy(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,S=u.blend,P=u.blur,L=P===void 0?0:P,Z=u.raisingHeight,q=Z===void 0?0:Z,ce=u.heightfixed,me=ce===void 0?!1:ce,be=u.unit,$e=be===void 0?"pixel":be,ft=this.getAnimateUniforms().u_time;isNaN(ft)&&(ft=-1);var mt={u_blur_height_fixed:[L,Number(q),Number(me)],u_stroke_width:y,u_additive:S==="additive"?1:0,u_stroke_opacity:p,u_size_unit:eS[$e],u_time:ft,u_animate:this.getAnimateUniforms().u_animate},zt=this.getUniformsBufferInfo(mt);return zt}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ad)}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption,y=g===void 0?{enable:!1}:g,S=this.getShaders(y),P=S.frag,L=S.vert,Z=S.type,this.layer.triangulation=ad,this.initUniformsBuffer(),me.next=6,this.layer.buildLayerModel({moduleName:Z,vertexShader:L,fragmentShader:P,inject:this.getInject(),triangulation:ad,depth:{enable:!1}});case 6:return q=me.sent,me.abrupt("return",[q]);case 8:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(u){return{frag:BC,vert:aS,type:"pointFill"}}},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ma.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(p,g,y,S){var P=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=S%4*3;return[P[L],P[L+1],P[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ma.Attribute,descriptor:{name:"a_Shape",shaderLocation:fa.SHAPE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,S=u.indexOf(y);return[S]}}})}}]),r}(Eu);function DP(e){var n=LP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function LP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FP=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,NC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,zC=function(e){(0,gr.Z)(r,e);var n=DP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"meter2coord",1),(0,Ve.Z)((0,Mr.Z)(o),"isMeter",!1),(0,Ve.Z)((0,Mr.Z)(o),"radian",0),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),o.layerService.throttleRenderLayers();return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.LINEAR,min:Ct.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0}),o.textures=[o.texture]}),o}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,S=u.unit,P=S===void 0?"pixel":S;this.rendererService.getDirty()&&this.texture.bind();var L={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(y),u_raisingHeight:Number(p),u_size_unit:eS[P]},Z=this.getUniformsBufferInfo(L);return Z}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qv)}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:NC,fragmentShader:FP,triangulation:qv,depth:{enable:!1},inject:this.getInject(),cull:{enable:!0,face:Oc(this.mapService.version)}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;this.iconService.off("imageUpdate",this.updateTexture),(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},P=S.x,L=S.y;return[P,L]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ma.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(p,g,y,S){var P=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=S%4*3;return[P[L],P[L+1],P[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}})}}]),r}(Eu);function BP(e){var n=NP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function NP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var UC=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,zP=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,ZC=function(e){(0,gr.Z)(r,e);var n=BP(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){o.layerService.throttleRenderLayers()});return}o.texture=g({data:o.iconService.getCanvas(),mag:Ct.LINEAR,min:Ct.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0})}),o}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){this.rendererService.getDirty()&&this.texture.bind();var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,S={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(p),u_heightfixed:Number(y),u_texture:this.texture};this.textures=[this.texture];var P=this.getUniformsBufferInfo(S);return P}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:zP,fragmentShader:UC,triangulation:i1,inject:this.getInject(),depth:{enable:!1},primitive:Ct.POINTS});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},P=S.x,L=S.y;return[P,L]}}})}}]),r}(Eu);function UP(e){var n=ZP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function ZP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VP=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,jP=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function VC(e){var n=e.coordinates;return{vertices:(0,Rn.Z)(n),indices:[0],size:n.length}}var jC=function(e){(0,gr.Z)(r,e);var n=UP(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u={u_size_scale:.5},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=VC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:jP,fragmentShader:VP,triangulation:VC,inject:this.getInject(),depth:{enable:!1},primitive:Ct.POINTS,pick:!1});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(Eu);function HP(e){var n=WP();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function WP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var GP=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,HC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,oS=function(e){(0,gr.Z)(r,e);var n=HP(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.speed,g=p===void 0?1:p,y=u.unit,S=y===void 0?"pixel":y,P={u_additive:c==="additive"?1:0,u_size_unit:eS[S],u_speed:g,u_time:this.layer.getLayerAnimateTime()},L=this.getUniformsBufferInfo(P);return L}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qv)}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:HC,fragmentShader:GP,triangulation:qv,inject:this.getInject(),depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ma.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c,p,g,y){var S=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],P=y%4*3;return[S[P],S[P+1],S[P+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{shaderLocation:fa.SIZE,name:"a_Size",buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?5:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(Eu);function WC(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$P(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function $P(e,n){if(e){if(typeof e=="string")return GC(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GC(e,n)}}function GC(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var XP=function(){function e(n,r,o){(0,It.Z)(this,e),(0,Ve.Z)(this,"boxCells",[]);var u=this.boxCells;this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(r/o);for(var c=0;c<this.xCellCount*this.yCellCount;c++)u.push([]);this.boxKeys=[],this.bboxes=[],this.width=n,this.height=r,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/r,this.boxUid=0}return(0,ct.Z)(e,[{key:"insert",value:function(r,o,u,c,p){this.forEachCell(o,u,c,p,this.insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(c),this.bboxes.push(p)}},{key:"query",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!1,p)}},{key:"hitTest",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!0,p)}},{key:"insertBoxCell",value:function(r,o,u,c,p,g){this.boxCells[p].push(g)}},{key:"queryHitTest",value:function(r,o,u,c,p,g){if(u<0||r>this.width||c<0||o>this.height)return p?!1:[];var y=[];if(r<=0&&o<=0&&this.width<=u&&this.height<=c){if(p)return!0;for(var S=0;S<this.boxKeys.length;S++)y.push({key:this.boxKeys[S],x1:this.bboxes[S*4],y1:this.bboxes[S*4+1],x2:this.bboxes[S*4+2],y2:this.bboxes[S*4+3]});return g?y.filter(g):y}var P={hitTest:p,seenUids:{box:{},circle:{}}};return this.forEachCell(r,o,u,c,this.queryCell,y,P,g),p?y.length>0:y}},{key:"queryCell",value:function(r,o,u,c,p,g,y,S){var P=y.seenUids,L=this.boxCells[p];if(L!==null){var Z=this.bboxes,q=WC(L),ce;try{for(q.s();!(ce=q.n()).done;){var me=ce.value;if(!P.box[me]){P.box[me]=!0;var be=me*4;if(r<=Z[be+2]&&o<=Z[be+3]&&u>=Z[be+0]&&c>=Z[be+1]&&(!S||S(this.boxKeys[me]))){if(y.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[me],x1:Z[be],y1:Z[be+1],x2:Z[be+2],y2:Z[be+3]})}}}}catch($e){q.e($e)}finally{q.f()}}return!1}},{key:"forEachCell",value:function(r,o,u,c,p,g,y,S){for(var P=this.convertToXCellCoord(r),L=this.convertToYCellCoord(o),Z=this.convertToXCellCoord(u),q=this.convertToYCellCoord(c),ce=P;ce<=Z;ce++)for(var me=L;me<=q;me++){var be=this.xCellCount*me+ce;if(p.call(this,r,o,u,c,be,g,y,S))return}}},{key:"convertToXCellCoord",value:function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}},{key:"convertToYCellCoord",value:function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}}]),e}(),YP=XP,qP=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"viewportPadding",100),this.width=n,this.height=r,this.viewportPadding=Math.max(n,r),this.grid=new YP(n+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=n+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=n+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}return(0,ct.Z)(e,[{key:"placeCollisionBox",value:function(r){var o=r.x1+r.anchorPointX+this.viewportPadding,u=r.y1+r.anchorPointY+this.viewportPadding,c=r.x2+r.anchorPointX+this.viewportPadding,p=r.y2+r.anchorPointY+this.viewportPadding;return!this.isInsideGrid(o,u,c,p)||this.grid.hitTest(o,u,c,p)?{box:[]}:{box:[o,u,c,p]}}},{key:"insertCollisionBox",value:function(r,o){var u={featureIndex:o};this.grid.insert(u,r[0],r[1],r[2],r[3])}},{key:"project",value:function(r,o,u){var c=Qd(o,u,0,1),p=Pp(),g=Iu.apply(H,(0,Rn.Z)(r));return xh(p,c,g),{x:(p[0]/p[3]+1)/2*this.width+this.viewportPadding,y:(-p[1]/p[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(r,o,u,c){return u>=0&&r<this.gridRightBoundary&&c>=0&&o<this.gridBottomBoundary}}]),e}();function $C(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=XC(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function XC(e,n){if(e){if(typeof e=="string")return YC(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YC(e,n)}}function YC(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function Ey(e){var n=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0;break;default:n=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:n,verticalAlign:r}}function m1(e,n,r,o,u){if(u){var c=e[o],p=c.glyph;if(p)for(var g=n[p].advance*c.scale,y=(e[o].x+g)*u,S=r;S<=o;S++)e[S].x-=y}}function sS(e,n,r,o,u,c,p){var g=(n-r)*u,y=(-o*p+.5)*c,S=$C(e),P;try{for(S.s();!(P=S.n()).done;){var L=P.value;L.x+=g,L.y+=y}}catch(Z){S.e(Z)}finally{S.f()}}function dv(e,n,r,o,u,c,p){var g=-8,y=0,S=g,P=0,L=e.positionedGlyphs,Z=c==="right"?1:c==="left"?0:.5,q=L.length;r.forEach(function(ft){if(ft.split("").forEach(function(zt){var ar=n[zt],nr=0;ar&&(L.push({glyph:zt,x:y,y:S+nr,vertical:!1,scale:1,metrics:ar}),y+=ar.advance+p)}),L.length!==q){var mt=y-p;P=Math.max(mt,P),m1(L,n,q,L.length-1,Z)}y=0,S-=o+5});var ce=Ey(u),me=ce.horizontalAlign,be=ce.verticalAlign;sS(L,Z,me,be,P,o,r.length);var $e=S-g;e.top+=-be*$e,e.bottom=e.top-$e,e.left+=-me*P,e.right=e.left+P}function KP(e,n,r,o,u,c,p){var g=-8,y=0,S=g,P=0,L=e.positionedGlyphs,Z=c==="right"?1:c==="left"?0:.5,q=L.length;r.forEach(function(ft){var mt=n[ft],zt=0;if(mt&&(L.push({glyph:ft,x:mt.advance/2,y:S+zt,vertical:!1,scale:1,metrics:mt}),y+=mt.advance+p),L.length!==q){var ar=y-p;P=Math.max(ar,P),m1(L,n,q,L.length-1,Z)}y=0,S-=o+5});var ce=Ey(u),me=ce.horizontalAlign,be=ce.verticalAlign;sS(L,Z,me,be,P,o,r.length);var $e=S-g;e.top+=-be*$e,e.bottom=e.top-$e,e.left+=-me*P,e.right=e.left+P}function qC(e,n,r,o,u,c){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],g=arguments.length>7?arguments[7]:void 0,y=e.split(`
`),S=[],P={positionedGlyphs:S,top:p[1],bottom:p[1],left:p[0],right:p[0],lineCount:y.length,text:e};return g?KP(P,n,y,r,o,u,c):dv(P,n,y,r,o,u,c),S.length?P:!1}function KC(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,o=e.positionedGlyphs,u=o===void 0?[]:o,c=[],p=$C(u),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,S=y.metrics,P=4,L=S.advance*y.scale/2,Z=r?[y.x+L,y.y]:[0,0],q=r?[0,0]:[y.x+L+n[0],y.y+n[1]],ce=(0-P)*y.scale-L+q[0],me=(0-P)*y.scale+q[1],be=ce+S.width*y.scale,$e=me+S.height*y.scale,ft={x:ce,y:me},mt={x:be,y:me},zt={x:ce,y:$e},ar={x:be,y:$e};c.push({tl:ft,tr:mt,bl:zt,br:ar,tex:S,glyphOffset:Z})}}catch(nr){p.e(nr)}finally{p.f()}return c}function QP(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=JP(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function JP(e,n){if(e){if(typeof e=="string")return uS(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uS(e,n)}}function uS(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function QC(e){var n=ek();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function ek(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var JC=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,lS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,wy=Aa.isEqual;function eT(e){var n=this,r=e.id,o=[],u=[];if(!n.glyphInfoMap||!n.glyphInfoMap[r])return{vertices:[],indices:[],size:7};var c=n.glyphInfoMap[r].centroid,p=c.length===2?[c[0],c[1],0]:c;return n.glyphInfoMap[r].glyphQuads.forEach(function(g,y){o.push.apply(o,(0,Rn.Z)(p).concat([g.tex.x,g.tex.y+g.tex.height,g.tl.x,g.tl.y],(0,Rn.Z)(p),[g.tex.x+g.tex.width,g.tex.y+g.tex.height,g.tr.x,g.tr.y],(0,Rn.Z)(p),[g.tex.x+g.tex.width,g.tex.y,g.br.x,g.br.y],(0,Rn.Z)(p),[g.tex.x,g.tex.y,g.bl.x,g.bl.y])),u.push(0+y*4,1+y*4,2+y*4,2+y*4,3+y*4,0+y*4)}),{vertices:o,indices:u,size:7}}var cS=function(e){(0,gr.Z)(r,e);var n=QC(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"glyphInfoMap",{}),(0,Ve.Z)((0,Mr.Z)(o),"currentZoom",-1),(0,Ve.Z)((0,Mr.Z)(o),"textureHeight",0),(0,Ve.Z)((0,Mr.Z)(o),"textCount",0),(0,Ve.Z)((0,Mr.Z)(o),"preTextStyle",{}),(0,Ve.Z)((0,Mr.Z)(o),"mapping",(0,pn.Z)(Jt().mark(function g(){return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o.initGlyph(),o.updateTexture(),S.next=4,o.reBuildModel();case 4:case"end":return S.stop()}},g)}))),o}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption),{u_sdf_map:this.textures[0]})}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.stroke,p=c===void 0?"#fff":c,g=u.strokeWidth,y=g===void 0?0:g,S=u.halo,P=S===void 0?.5:S,L=u.gamma,Z=L===void 0?2:L,q=u.raisingHeight,ce=q===void 0?0:q,me=this.getFontServiceMapping(),be=this.getFontServiceCanvas();me&&Object.keys(me).length!==this.textCount&&be&&(this.updateTexture(),this.textCount=Object.keys(me).length),this.preTextStyle=this.getTextStyle();var $e={u_stroke_color:bo(p),u_sdf_map_size:[(be==null?void 0:be.width)||1,(be==null?void 0:be.height)||1],u_raisingHeight:Number(ce),u_stroke_width:y,u_gamma_scale:Z,u_halo_blur:P},ft=this.getUniformsBufferInfo($e);return ft}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 6:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.textAllowOverlap,y=g===void 0?!1:g,this.initGlyph(),this.updateTexture(),y||this.filterGlyphs(),L.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:lS,fragmentShader:JC,inject:this.getInject(),triangulation:eT.bind(this),depth:{enable:!1}});case 6:return S=L.sent,L.abrupt("return",[S]);case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"needUpdate",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q,ce,me,be,$e;return Jt().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(p=this.getTextStyle(),g=p.textAllowOverlap,y=g===void 0?!1:g,S=p.textAnchor,P=S===void 0?"center":S,L=p.textOffset,Z=p.padding,q=p.fontFamily,ce=p.fontWeight,!(!wy(Z,this.preTextStyle.padding)||!wy(L,this.preTextStyle.textOffset)||!wy(P,this.preTextStyle.textAnchor)||!wy(q,this.preTextStyle.fontFamily)||!wy(ce,this.preTextStyle.fontWeight))){mt.next=5;break}return mt.next=4,this.mapping();case 4:return mt.abrupt("return",!0);case 5:if(!y){mt.next=7;break}return mt.abrupt("return",!1);case 7:if(me=this.mapService.getZoom(),be=this.mapService.getBounds(),$e=vf(this.extent,be),!(Math.abs(this.currentZoom-me)>.5||!$e||y!==this.preTextStyle.textAllowOverlap)){mt.next=14;break}return mt.next=13,this.reBuildModel();case 13:return mt.abrupt("return",!0);case 14:return mt.abrupt("return",!1);case 15:case"end":return mt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ma.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ma.Attribute,descriptor:{name:"a_tex",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?12:p;return Array.isArray(g)?[g[0]]:[g]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var u=this.mapService.getBounds();return Lh(u,.5)}},{key:"initTextFont",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var P=S.shape,L=P===void 0?"":P;L=L.toString();var Z=QP(L),q;try{for(Z.s();!(q=Z.n()).done;){var ce=q.value;y.indexOf(ce)===-1&&y.push(ce)}}catch(me){Z.e(me)}finally{Z.f()}}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!1})}},{key:"initIconFontTex",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var P=S.shape,L=P===void 0?"":P;L="".concat(L),y.indexOf(L)===-1&&y.push(L)}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!0})}},{key:"getTextStyle",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g,S=u.textAllowOverlap,P=S===void 0?!1:S,L=u.padding,Z=L===void 0?[0,0]:L,q=u.textAnchor,ce=q===void 0?"center":q,me=u.textOffset,be=me===void 0?[0,0]:me,$e=u.opacity,ft=$e===void 0?1:$e,mt=u.strokeOpacity,zt=mt===void 0?1:mt,ar=u.strokeWidth,nr=ar===void 0?0:ar,Yt=u.stroke,Cr=Yt===void 0?"#000":Yt;return{fontWeight:p,fontFamily:y,textAllowOverlap:P,padding:Z,textAnchor:ce,textOffset:be,opacity:ft,strokeOpacity:zt,strokeWidth:nr,stroke:Cr}}},{key:"generateGlyphLayout",value:function(u){var c=this,p=this.getFontServiceMapping(),g=this.layer.getLayerConfig(),y=g.spacing,S=y===void 0?2:y,P=g.textAnchor,L=P===void 0?"center":P,Z=g.textOffset,q=this.rawEncodeData;this.glyphInfo=q.map(function(ce){var me=ce.shape,be=me===void 0?"":me,$e=ce.id,ft=ce.size,mt=ft===void 0?1:ft,zt=ce.textOffset?ce.textOffset:Z||[0,0],ar=ce.textAnchor?ce.textAnchor:L||"center",nr=qC(be.toString(),p,mt,ar,"left",S,zt,u),Yt=KC(nr,zt,!1);return ce.shaping=nr,ce.glyphQuads=Yt,ce.centroid=Ca(ce.coordinates),ce.originCentroid=ce.version==="GAODE2.x"?Ca(ce.originCoordinates):ce.originCentroid=ce.centroid,c.glyphInfoMap[$e]={shaping:nr,glyphQuads:Yt,centroid:Ca(ce.coordinates)},ce})}},{key:"getFontServiceMapping",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getMappingByKey("".concat(y,"_").concat(p))}},{key:"getFontServiceCanvas",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getCanvasByKey("".concat(y,"_").concat(p))}},{key:"filterGlyphs",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.padding,g=p===void 0?[0,0]:p,y=c.textAllowOverlap,S=y===void 0?!1:y;if(!S){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var P=this.rendererService.getViewportSize(),L=P.width,Z=P.height,q=new qP(L,Z),ce=this.glyphInfo.filter(function(me){var be=me.shaping,$e=me.id,ft=$e===void 0?0:$e,mt=me.version==="GAODE2.x"?me.originCentroid:me.centroid,zt=me.size,ar=zt/16,nr=u.mapService.lngLatToContainer(mt),Yt=q.placeCollisionBox({x1:be.left*ar-g[0],x2:be.right*ar+g[0],y1:be.top*ar-g[1],y2:be.bottom*ar+g[1],anchorPointX:nr.x,anchorPointY:nr.y}),Cr=Yt.box;return Cr&&Cr.length?(q.insertCollisionBox(Cr,ft),!0):!1});ce.forEach(function(me){u.glyphInfoMap[me.id]=me})}}},{key:"initGlyph",value:function(){var u=this.layer.getLayerConfig(),c=u.iconfont,p=c===void 0?!1:c;p?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(p)}},{key:"updateTexture",value:function(){var u=this.rendererService.createTexture2D,c=this.getFontServiceCanvas();this.textureHeight=c.height,this.texture&&this.texture.destroy(),this.texture=u({data:c,mag:Ct.LINEAR,min:Ct.LINEAR,width:c.width,height:c.height}),this.textures=[this.texture]}},{key:"reBuildModel",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.filterGlyphs(),y.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:lS,fragmentShader:JC,triangulation:eT.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:p=y.sent,this.layer.models=[p];case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(Eu),tk={fillImage:zC,fill:g1,radar:oS,image:ZC,normal:jC,simplePoint:v1,extrude:$m,text:cS,earthFill:nS,earthExtrude:DC},tT=tk;function rk(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=rT(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function rT(e,n){if(e){if(typeof e=="string")return Cy(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,n)}}function Cy(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function Ty(e){var n=nk();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function nk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var y1=function(e){(0,gr.Z)(r,e);var n=Ty(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","PointLayer"),(0,Ve.Z)((0,Mr.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Ve.Z)((0,Mr.Z)(o),"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Ve.Z)((0,Mr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new tT[p](this),y.next=5,this.initLayerModels();case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var u=this.shapeOption,c=u.field,p=u.values,g=this.getLayerConfig(),y=g.shape2d,S=this.iconService.getIconMap();if(c&&(y==null?void 0:y.indexOf(c))!==-1)return"fill";if(p==="text")return"text";if(p&&p instanceof Array){var P=rk(p),L;try{for(P.s();!(L=P.n()).done;){var Z=L.value;if(typeof Z=="string"&&S.hasOwnProperty(Z))return"image"}}catch(q){P.e(q)}finally{P.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=c.billboard,S=y===void 0?!0:y,P=this.iconService.getIconMap(),L=u.find(function(q){return q.hasOwnProperty("shape")});if(L){var Z=L.shape;return Z==="dot"?"normal":Z==="simple"?"simplePoint":Z==="radar"?"radar":this.layerType==="fillImage"||S===!1?"fillImage":(p==null?void 0:p.indexOf(Z))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(g==null?void 0:g.indexOf(Z))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":P.hasOwnProperty(Z)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),r}(Vm);function ik(e){return fS.apply(this,arguments)}function fS(){return fS=(0,pn.Z)(Jt().mark(function e(n){var r,o,u;return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!window.createImageBitmap){p.next=14;break}return p.next=3,fetch(n);case 3:return r=p.sent,p.t0=createImageBitmap,p.next=7,r.blob();case 7:return p.t1=p.sent,p.next=10,(0,p.t0)(p.t1);case 10:return o=p.sent,p.abrupt("return",o);case 14:return u=new window.Image,p.abrupt("return",new Promise(function(g){u.onload=function(){return g(u)},u.src=n,u.crossOrigin="Anonymous"}));case 16:case"end":return p.stop()}},e)})),fS.apply(this,arguments)}function ak(e){var n=nT();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function nT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ok=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,sk=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,uk=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,iT=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,aT=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,lk=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,hS=function(e){(0,gr.Z)(r,e);var n=ak(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.mapTexture,p=u.heightfixed,g=p===void 0?!1:p,y=u.raisingHeight,S=y===void 0?0:y,P=u.topsurface,L=P===void 0?!0:P,Z=u.sidesurface,q=Z===void 0?!0:Z,ce=u.sourceColor,me=u.targetColor,be=0,$e=[1,1,1,1],ft=[1,1,1,1];ce&&me&&($e=bo(ce),ft=bo(me),be=1);var mt={u_sourceColor:$e,u_targetColor:ft,u_linearColor:be,u_topsurface:Number(L),u_sidesurface:Number(q),u_heightfixed:Number(g),u_raisingHeight:Number(S)};c&&this.texture&&(mt.u_texture=this.texture,this.textures=[this.texture]);var zt=this.getUniformsBufferInfo(mt);return zt}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,this.initUniformsBuffer(),Z.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,depth:{enable:!0},inject:this.getInject(),triangulation:yC});case 4:return P=Z.sent,Z.abrupt("return",[P]);case 6:case"end":return Z.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.pickLight,p=u.mapTexture;return p?{frag:uk,vert:iT,type:"polygonExtrudeTexture"}:c?{frag:aT,vert:lk,type:"polygonExtrudePickLight"}:{frag:ok,vert:sk,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.textures=[]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=u,p=this.layer.coordCenter||this.layer.getSource().center,g=c[2]-c[0],y=c[3]-c[1];if(this.mapService.version==="GAODE2.x"){var S=this.mapService.coordToAMap2RelativeCoordinates([u[0],u[1]],p),P=(0,ji.Z)(S,2),L=P[0],Z=P[1],q=this.mapService.coordToAMap2RelativeCoordinates([u[2],u[3]],p),ce=(0,ji.Z)(q,2),me=ce[0],be=ce[1];g=me-L,y=be-Z,c=[L,Z,me,be]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:ma.Attribute,descriptor:{name:"a_uvs",shaderLocation:fa.UV,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(ft,mt,zt){var ar=zt[0],nr=zt[1];return[(ar-c[0])/g,(nr-c[1])/y,zt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(ft,mt,zt,ar,nr){return nr}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(ft){var mt=ft.size,zt=mt===void 0?10:mt;return Array.isArray(zt)?[zt[0]]:[zt]}}})}},{key:"loadTexture",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(p=this.layer.getLayerConfig(),g=p.mapTexture,y=this.rendererService.createTexture2D,this.texture=y({height:1,width:1}),!g){L.next=8;break}return L.next=6,ik(g);case 6:S=L.sent,this.texture=y({data:S,width:S.width,height:S.height,wrapS:Ct.CLAMP_TO_EDGE,wrapT:Ct.CLAMP_TO_EDGE,min:Ct.LINEAR,mag:Ct.LINEAR});case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(Eu);function ck(e){var n=fk();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function fk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hk=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,oT=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,pk=function(e){(0,gr.Z)(r,e);var n=ck(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u={},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,this.initUniformsBuffer(),Z.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:yC,depth:{enable:!0}});case 4:return P=Z.sent,Z.abrupt("return",[P]);case 6:case"end":return Z.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:hk,vert:oT,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:ma.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ma.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?10:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(Eu);function dk(e){var n=_1();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function _1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vk=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,gk=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,mk=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,yk=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,sT=function(e){(0,gr.Z)(r,e);var n=dk(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.opacityLinear,y=g===void 0?{enable:!1,dir:"in"}:g,S={u_raisingHeight:Number(p),u_opacitylinear:Number(y.enable),u_dir:y.dir==="in"?1:0},P=this.getUniformsBufferInfo(S);return P}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=this.getModelParams(),g=p.frag,y=p.vert,S=p.triangulation,P=p.type,this.initUniformsBuffer(),this.layer.triangulation=S,q.next=5,this.layer.buildLayerModel({moduleName:P,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:S,primitive:Ct.TRIANGLES,depth:{enable:!1}});case 5:return L=q.sent,q.abrupt("return",[L]);case 7:case"end":return q.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1,dir:"in"}:c;p.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:ma.Attribute,descriptor:{name:"a_linear",shaderLocation:fa.LINEAR,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:3,update:function(y,S,P){return[P[3],P[4],P[5]]}}})}},{key:"getModelParams",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1}:c;return p.enable?{frag:gk,vert:mk,type:"polygonLinear",triangulation:KO}:{frag:vk,vert:yk,type:"polygonFill",triangulation:Bc}}}]),r}(Eu);function uT(e){var n=_k();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function _k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xk=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,lT=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,bk=Aa.isNumber,cT=function(e){(0,gr.Z)(r,e);var n=uT(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.watercolor,p=c===void 0?"#6D99A8":c,g=u.watercolor2,y=g===void 0?"#0F121C":g,S={u_watercolor:bo(p),u_watercolor2:bo(y),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};this.textures=[this.texture1,this.texture2,this.texture3];var P=this.getUniformsBufferInfo(S);return P}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:lT,fragmentShader:xk,inject:this.getInject(),triangulation:Kb,primitive:Ct.TRIANGLES,depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c,p;(u=this.texture1)===null||u===void 0||u.destroy(),(c=this.texture2)===null||c===void 0||c.destroy(),(p=this.texture3)===null||p===void 0||p.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,ji.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],P=y-p,L=S-g;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:ma.Attribute,descriptor:{name:"a_uv",shaderLocation:fa.UV,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(q,ce,me,be){var $e=q.version==="GAODE2.x"?q.originCoordinates[0][be]:me,ft=(0,ji.Z)($e,2),mt=ft[0],zt=ft[1];return[(mt-p)/P,(zt-g)/L]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.rendererService.createTexture2D,p={height:0,width:0};this.texture1=c(p),this.texture2=c(p),this.texture3=c(p),g(function(S){u.texture1=y(S[0]),u.texture2=y(S[1]),u.texture3=y(S[2]),u.layerService.reRender()});function g(S){var P=0,L=[],Z=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];Z.map(function(q){var ce=new Image;ce.crossOrigin="",ce.src=q,L.push(ce),ce.onload=function(){P++,P===3&&S(L)}})}function y(S){return c({data:S,width:S.width,height:S.height,wrapS:Ct.MIRRORED_REPEAT,wrapT:Ct.MIRRORED_REPEAT,min:Ct.LINEAR,mag:Ct.LINEAR})}}}]),r}(Eu);function Sk(e){var n=pS();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function pS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fT=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,Ek=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,wk=Aa.isNumber,Ck=function(e){(0,gr.Z)(r,e);var n=Sk(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.speed,p=c===void 0?.5:c,g={u_speed:p,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};this.textures=[this.texture];var y=this.getUniformsBufferInfo(g);return y}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Ek,fragmentShader:fT,triangulation:Kb,inject:this.getInject(),primitive:Ct.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,ji.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],P=y-p,L=S-g;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:ma.Attribute,descriptor:{name:"a_uv",shaderLocation:fa.UV,buffer:{usage:Ct.STATIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(q,ce,me,be){var $e=q.version==="GAODE2.x"?q.originCoordinates[0][be]:me,ft=(0,ji.Z)($e,2),mt=ft[0],zt=ft[1];return[(mt-p)/P,(zt-g)/L]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.waterTexture,g=this.rendererService.createTexture2D;this.texture=g({height:1,width:1});var y=new Image;y.crossOrigin="",p?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),y.src=p):y.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",y.onload=function(){u.texture=g({data:y,width:y.width,height:y.height,wrapS:Ct.MIRRORED_REPEAT,wrapT:Ct.MIRRORED_REPEAT,min:Ct.LINEAR,mag:Ct.LINEAR}),u.layerService.reRender()}}}]),r}(Eu),Tk={fill:sT,line:RC,extrude:hS,text:cS,point_fill:g1,point_image:ZC,point_normal:jC,point_extrude:$m,water:Ck,ocean:cT,extrusion:pk},hT=Tk;function pT(e){var n=Ak();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Ak(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var x1=function(e){(0,gr.Z)(r,e);var n=pT(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","PolygonLayer"),(0,Ve.Z)((0,Mr.Z)(o),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new hT[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){var u,c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p==="fill"||!p?"fill":p==="extrude"?"extrude":p==="extrusion"?"extrusion":p==="water"?"water":p==="ocean"?"ocean":p==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=this.iconService.getIconMap(),S=u.find(function(L){return L.hasOwnProperty("shape")});if(S){var P=S.shape;return P==="dot"?"point_normal":(p==null?void 0:p.indexOf(P))!==-1?"point_fill":(g==null?void 0:g.indexOf(P))!==-1?"point_extrude":y.hasOwnProperty(P)?"point_image":"text"}else return"fill"}}]),r}(Vm);function Qg(e){var n=Mk();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Mk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Rk=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,Ik=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,Ok=function(e){(0,gr.Z)(r,e);var n=Qg(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.color,y=g===void 0?"#000":g,S={u_color:bo(y),u_opacity:p||1},P=this.getUniformsBufferInfo(S);return P}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"mask",vertexShader:Ik,fragmentShader:Rk,triangulation:Kb,depth:{enable:!1},pick:!1});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;u&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),r}(Eu),Pk={fill:Ok},kk=Pk;function dT(e){var n=Dk();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Dk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ay=function(e){(0,gr.Z)(r,e);var n=dT(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","MaskLayer"),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new kk[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){return"fill"}}]),r}(Vm),c4=k(28660),vT,gT,mT,yT,b1,dS,_T,Lk=Aa.cloneDeep,My=(vT=(0,kt.b2)(),gT=(0,kt.f3)(Qt.IMapService),mT=(0,kt.f3)(Qt.IFontService),vT(yT=(b1=function(){function e(){(0,It.Z)(this,e),Ba(this,"mapService",dS,this),Ba(this,"fontService",_T,this)}return(0,ct.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("DataMappingPlugin",(0,pn.Z)(Jt().mark(function p(){return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r.log(tl.MappingStart,Xo.INIT),u.generateMaping(r,{styleAttributeService:c}),r.log(tl.MappingEnd,Xo.INIT);case 3:case"end":return y.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var p=(0,pn.Z)(Jt().mark(function g(y){var S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(y){L.next=2;break}return L.abrupt("return",y);case 2:return r.dataState.dataMappingNeedUpdate=!1,r.log(tl.MappingStart,Xo.UPDATE),S=u.generateMaping(r,{styleAttributeService:c}),r.log(tl.MappingEnd,Xo.UPDATE),L.abrupt("return",S);case 7:case"end":return L.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("DataMappingPlugin",function(){var p=r.getSource();if(!(r.layerModelNeedUpdate||!p||!p.inited)){var g=c.getLayerStyleAttributes()||[],y=c.getLayerStyleAttribute("filter"),S=p.data.dataArray;if(!(Array.isArray(S)&&S.length===0)){var P=g.filter(function(q){return q.needRemapping}),L=S;if(y!=null&&y.needRemapping&&y!==null&&y!==void 0&&y.scale&&(L=S.filter(function(q){return u.applyAttributeMapping(y,q)[0]})),P.length){var Z=u.mapping(r,P,L,r.getEncodedData());r.setEncodedData(Z)}}}})}},{key:"generateMaping",value:function(r,o){var u=this,c=o.styleAttributeService,p=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter"),y=r.getSource().data.dataArray,S=y;g!=null&&g.scale&&(S=y.filter(function(L){return u.applyAttributeMapping(g,L)[0]})),S=r.processData(S);var P=this.mapping(r,p,S,void 0);return r.setEncodedData(P),r.emit("dataUpdate",null),!0}},{key:"mapping",value:function(r,o,u,c){var p=this,g=o.filter(function(S){return S.scale!==void 0}).filter(function(S){return S.name!=="filter"}),y=u.map(function(S,P){var L=c?c[P]:{},Z=(0,ae.Z)({id:S._id,coordinates:S.coordinates},L);return g.forEach(function(q){var ce=p.applyAttributeMapping(q,S);(q.name==="color"||q.name==="stroke")&&(ce=ce.map(function(me){return bo(me)})),Z[q.name]=Array.isArray(ce)&&ce.length===1?ce[0]:ce,q.name==="shape"&&(Z.shape=p.fontService.getIconFontKey(Z[q.name]))}),Z});return o.forEach(function(S){S.needRemapping=!1}),this.adjustData2Amap2Coordinates(y,r),this.adjustData2SimpleCoordinates(y),y}},{key:"adjustData2Amap2Coordinates",value:function(r,o){var u=this;if(r.length>0&&this.mapService.version==="GAODE2.x"){var c=o.coordCenter||o.getSource().center;r.filter(function(p){return!p.originCoordinates}).map(function(p){p.version="GAODE2.x",p.originCoordinates=Lk(p.coordinates),p.coordinates=u.mapService.coordToAMap2RelativeCoordinates(p.coordinates,c)})}}},{key:"adjustData2SimpleCoordinates",value:function(r){var o=this;r.length>0&&this.mapService.version==="SIMPLE"&&r.map(function(u){u.simpleCoordinate||(u.coordinates=o.unProjectCoordinates(u.coordinates),u.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(r){var o=this;if(typeof r[0]=="number")return this.mapService.simpleMapCoord.unproject(r);if(r[0]&&r[0][0]instanceof Array){var u=[];return r.map(function(p){var g=[];p.map(function(y){g.push(o.mapService.simpleMapCoord.unproject(y))}),u.push(g)}),u}else{var c=[];return r.map(function(p){c.push(o.mapService.simpleMapCoord.unproject(p))}),c}}},{key:"applyAttributeMapping",value:function(r,o){var u;if(!r.scale)return[];var c=(r==null||(u=r.scale)===null||u===void 0?void 0:u.scalers)||[],p=[];c.forEach(function(y){var S,P=y.field;(o.hasOwnProperty(P)||((S=r.scale)===null||S===void 0?void 0:S.type)==="variable")&&p.push(o[P])});var g=r.mapping?r.mapping(p):[];return g}},{key:"getArrowPoints",value:function(r,o){var u=[o[0]-r[0],o[1]-r[1]],c=Ol(u),p=[r[0]+c[0]*1e-4,r[1]+c[1]*1e-4];return p}}]),e}(),dS=Ia(b1.prototype,"mapService",[gT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_T=Ia(b1.prototype,"fontService",[mT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b1))||yT),Ry,vS,xT=(Ry=(0,kt.b2)(),Ry(vS=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){var o=this;this.mapService=r.getContainer().get(Qt.IMapService),r.hooks.init.tapPromise("DataSourcePlugin",(0,pn.Z)(Jt().mark(function u(){var c,p,g,y;return Jt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(r.log(tl.SourceInitStart,Xo.INIT),c=r.getSource(),c||(p=r.sourceOption||r.defaultSourceConfig,g=p.data,y=p.options,c=new J_(g,y),r.setSource(c)),!c.inited){P.next=8;break}o.updateClusterData(r),r.log(tl.SourceInitEnd,Xo.INIT),P.next=10;break;case 8:return P.next=10,new Promise(function(L){c.on("update",function(Z){Z.type==="inited"&&(o.updateClusterData(r),r.log(tl.SourceInitEnd,Xo.INIT)),L(null)})});case 10:case"end":return P.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,pn.Z)(Jt().mark(function u(){var c,p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=o.updateClusterData(r),p=r.dataState.dataSourceNeedUpdate,r.dataState.dataSourceNeedUpdate=!1,g=c||p,S.abrupt("return",g);case 5:case"end":return S.stop()}},u)})))}},{key:"updateClusterData",value:function(r){if(r.isTileLayer||r.tileLayer||!r.getSource())return!1;var o=r.getSource(),u=o.cluster,c=o.clusterOptions.zoom,p=c===void 0?0:c,g=this.mapService.getZoom()-1,y=r.dataState.dataSourceNeedUpdate;return u&&y&&o.updateClusterData(Math.floor(g)),u&&Math.abs(r.clusterZoom-g)>=1?(p!==Math.floor(g)&&o.updateClusterData(Math.floor(g)),r.clusterZoom=g,!0):!1}}]),e}())||vS);function gS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function bT(e){return e.length===1&&(e=ST(e)),{left:function(n,r,o,u){for(o==null&&(o=0),u==null&&(u=n.length);o<u;){var c=o+u>>>1;e(n[c],r)<0?o=c+1:u=c}return o},right:function(n,r,o,u){for(o==null&&(o=0),u==null&&(u=n.length);o<u;){var c=o+u>>>1;e(n[c],r)>0?u=c:o=c+1}return o}}}function ST(e){return function(n,r){return gS(e(n),r)}}var ET=bT(gS),Fk=ET.right,f4=ET.left,S1=Fk;function wT(e,n){var r=e.length,o=-1,u,c,p;if(n==null){for(;++o<r;)if((u=e[o])!=null&&u>=u)for(c=p=u;++o<r;)(u=e[o])!=null&&(c>u&&(c=u),p<u&&(p=u))}else for(;++o<r;)if((u=n(e[o],o,e))!=null&&u>=u)for(c=p=u;++o<r;)(u=n(e[o],o,e))!=null&&(c>u&&(c=u),p<u&&(p=u));return[c,p]}var mS=Array.prototype,h4=mS.slice,Xm=mS.map,Jg=Math.sqrt(50),Jv=Math.sqrt(10),E1=Math.sqrt(2);function CT(e,n,r){var o,u=-1,c,p,g;if(n=+n,e=+e,r=+r,e===n&&r>0)return[e];if((o=n<e)&&(c=e,e=n,n=c),(g=w1(e,n,r))===0||!isFinite(g))return[];if(g>0)for(e=Math.ceil(e/g),n=Math.floor(n/g),p=new Array(c=Math.ceil(n-e+1));++u<c;)p[u]=(e+u)*g;else for(e=Math.floor(e*g),n=Math.ceil(n*g),p=new Array(c=Math.ceil(e-n+1));++u<c;)p[u]=(e-u)/g;return o&&p.reverse(),p}function w1(e,n,r){var o=(n-e)/Math.max(0,r),u=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,u);return u>=0?(c>=Jg?10:c>=Jv?5:c>=E1?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=Jg?10:c>=Jv?5:c>=E1?2:1)}function eg(e,n,r){var o=Math.abs(n-e)/Math.max(0,r),u=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/u;return c>=Jg?u*=10:c>=Jv?u*=5:c>=E1&&(u*=2),n<e?-u:u}function Bk(){var e=identity,n=extent,r=sturges;function o(u){var c,p=u.length,g,y=new Array(p);for(c=0;c<p;++c)y[c]=e(u[c],c,u);var S=n(y),P=S[0],L=S[1],Z=r(y,P,L);Array.isArray(Z)||(Z=tickStep(P,L,Z),Z=range(Math.ceil(P/Z)*Z,L,Z));for(var q=Z.length;Z[0]<=P;)Z.shift(),--q;for(;Z[q-1]>L;)Z.pop(),--q;var ce=new Array(q+1),me;for(c=0;c<=q;++c)me=ce[c]=[],me.x0=c>0?Z[c-1]:P,me.x1=c<q?Z[c]:L;for(c=0;c<p;++c)g=y[c],P<=g&&g<=L&&ce[bisect(Z,g,0,q)].push(u[c]);return ce}return o.value=function(u){return arguments.length?(e=typeof u=="function"?u:constant(u),o):e},o.domain=function(u){return arguments.length?(n=typeof u=="function"?u:constant([u[0],u[1]]),o):n},o.thresholds=function(u){return arguments.length?(r=typeof u=="function"?u:Array.isArray(u)?constant(slice.call(u)):constant(u),o):r},o}function p4(e,n,r){return e=map.call(e,number).sort(ascending),Math.ceil((r-n)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-1/3)))}function Nk(e){return e===null?NaN:+e}function zk(e,n,r){if(r==null&&(r=Nk),!!(o=e.length)){if((n=+n)<=0||o<2)return+r(e[0],0,e);if(n>=1)return+r(e[o-1],o-1,e);var o,u=(o-1)*n,c=Math.floor(u),p=+r(e[c],c,e),g=+r(e[c+1],c+1,e);return p+(g-p)*(u-c)}}function yS(e,n,r,o,u){var c=e*e,p=c*e;return((1-3*e+3*c-p)*n+(4-6*c+3*p)*r+(1+3*e+3*c-3*p)*o+p*u)/6}function Uk(e){var n=e.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),u=e[o],c=e[o+1],p=o>0?e[o-1]:2*u-c,g=o<n-1?e[o+2]:2*c-u;return yS((r-o/n)*n,p,u,c,g)}}function Zk(e){var n=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*n),u=e[(o+n-1)%n],c=e[o%n],p=e[(o+1)%n],g=e[(o+2)%n];return yS((r-o/n)*n,u,c,p,g)}}function _S(e){return function(){return e}}function TT(e,n){return function(r){return e+r*n}}function AT(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function d4(e,n){var r=n-e;return r?TT(e,r>180||r<-180?r-360*Math.round(r/360):r):constant(isNaN(e)?n:e)}function Vk(e){return(e=+e)==1?MT:function(n,r){return r-n?AT(n,r,e):_S(isNaN(n)?r:n)}}function MT(e,n){var r=n-e;return r?TT(e,r):_S(isNaN(e)?n:e)}var RT=function e(n){var r=Vk(n);function o(u,c){var p=r((u=Mo(u)).r,(c=Mo(c)).r),g=r(u.g,c.g),y=r(u.b,c.b),S=MT(u.opacity,c.opacity);return function(P){return u.r=p(P),u.g=g(P),u.b=y(P),u.opacity=S(P),u+""}}return o.gamma=e,o}(1);function C1(e){return function(n){var r=n.length,o=new Array(r),u=new Array(r),c=new Array(r),p,g;for(p=0;p<r;++p)g=Mo(n[p]),o[p]=g.r||0,u[p]=g.g||0,c[p]=g.b||0;return o=e(o),u=e(u),c=e(c),g.opacity=1,function(y){return g.r=o(y),g.g=u(y),g.b=c(y),g+""}}}var jk=C1(Uk),v4=C1(Zk),rp="$";function T1(){}T1.prototype=IT.prototype={constructor:T1,has:function(e){return rp+e in this},get:function(e){return this[rp+e]},set:function(e,n){return this[rp+e]=n,this},remove:function(e){var n=rp+e;return n in this&&delete this[n]},clear:function(){for(var e in this)e[0]===rp&&delete this[e]},keys:function(){var e=[];for(var n in this)n[0]===rp&&e.push(n.slice(1));return e},values:function(){var e=[];for(var n in this)n[0]===rp&&e.push(this[n]);return e},entries:function(){var e=[];for(var n in this)n[0]===rp&&e.push({key:n.slice(1),value:this[n]});return e},size:function(){var e=0;for(var n in this)n[0]===rp&&++e;return e},empty:function(){for(var e in this)if(e[0]===rp)return!1;return!0},each:function(e){for(var n in this)n[0]===rp&&e(this[n],n.slice(1),this)}};function IT(e,n){var r=new T1;if(e instanceof T1)e.each(function(g,y){r.set(y,g)});else if(Array.isArray(e)){var o=-1,u=e.length,c;if(n==null)for(;++o<u;)r.set(o,e[o]);else for(;++o<u;)r.set(n(c=e[o],o,e),c)}else if(e)for(var p in e)r.set(p,e[p]);return r}var xS=IT;function g4(){var e=[],n=[],r,o,u;function c(g,y,S,P){if(y>=e.length)return r!=null&&g.sort(r),o!=null?o(g):g;for(var L=-1,Z=g.length,q=e[y++],ce,me,be=map(),$e,ft=S();++L<Z;)($e=be.get(ce=q(me=g[L])+""))?$e.push(me):be.set(ce,[me]);return be.each(function(mt,zt){P(ft,zt,c(mt,y,S,P))}),ft}function p(g,y){if(++y>e.length)return g;var S,P=n[y-1];return o!=null&&y>=e.length?S=g.entries():(S=[],g.each(function(L,Z){S.push({key:Z,values:p(L,y)})})),P!=null?S.sort(function(L,Z){return P(L.key,Z.key)}):S}return u={object:function(g){return c(g,0,Hk,Ym)},map:function(g){return c(g,0,OT,Wk)},entries:function(g){return p(c(g,0,OT,Wk),0)},key:function(g){return e.push(g),u},sortKeys:function(g){return n[e.length-1]=g,u},sortValues:function(g){return r=g,u},rollup:function(g){return o=g,u}}}function Hk(){return{}}function Ym(e,n,r){e[n]=r}function OT(){return map()}function Wk(e,n,r){e.set(n,r)}function wh(){}var uf=xS.prototype;wh.prototype=em.prototype={constructor:wh,has:uf.has,add:function(e){return e+="",this[rp+e]=e,this},remove:uf.remove,clear:uf.clear,values:uf.keys,size:uf.size,empty:uf.empty,each:uf.each};function em(e,n){var r=new wh;if(e instanceof wh)e.each(function(c){r.add(c)});else if(e){var o=-1,u=e.length;if(n==null)for(;++o<u;)r.add(e[o]);else for(;++o<u;)r.add(n(e[o],o,e))}return r}var Gk=null,Cd=Array.prototype,PT=Cd.map,tm=Cd.slice;function tg(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function kT(e,n){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(n).domain(e);break}return this}var DT={name:"implicit"};function A1(){var e=xS(),n=[],r=[],o=DT;function u(c){var p=c+"",g=e.get(p);if(!g){if(o!==DT)return o;e.set(p,g=n.push(c))}return r[(g-1)%r.length]}return u.domain=function(c){if(!arguments.length)return n.slice();n=[],e=xS();for(var p=-1,g=c.length,y,S;++p<g;)e.has(S=(y=c[p])+"")||e.set(S,n.push(y));return u},u.range=function(c){return arguments.length?(r=tm.call(c),u):r.slice()},u.unknown=function(c){return arguments.length?(o=c,u):o},u.copy=function(){return A1(n,r).unknown(o)},tg.apply(u,arguments),u}function LT(){var e=ordinal().unknown(void 0),n=e.domain,r=e.range,o=[0,1],u,c,p=!1,g=0,y=0,S=.5;delete e.unknown;function P(){var L=n().length,Z=o[1]<o[0],q=o[Z-0],ce=o[1-Z];u=(ce-q)/Math.max(1,L-g+y*2),p&&(u=Math.floor(u)),q+=(ce-q-u*(L-g))*S,c=u*(1-g),p&&(q=Math.round(q),c=Math.round(c));var me=sequence(L).map(function(be){return q+u*be});return r(Z?me.reverse():me)}return e.domain=function(L){return arguments.length?(n(L),P()):n()},e.range=function(L){return arguments.length?(o=[+L[0],+L[1]],P()):o.slice()},e.rangeRound=function(L){return o=[+L[0],+L[1]],p=!0,P()},e.bandwidth=function(){return c},e.step=function(){return u},e.round=function(L){return arguments.length?(p=!!L,P()):p},e.padding=function(L){return arguments.length?(g=Math.min(1,y=+L),P()):g},e.paddingInner=function(L){return arguments.length?(g=Math.min(1,L),P()):g},e.paddingOuter=function(L){return arguments.length?(y=+L,P()):y},e.align=function(L){return arguments.length?(S=Math.max(0,Math.min(1,L)),P()):S},e.copy=function(){return LT(n(),o).round(p).paddingInner(g).paddingOuter(y).align(S)},initRange.apply(P(),arguments)}function FT(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return FT(n())},e}function m4(){return FT(LT.apply(null,arguments).paddingInner(1))}function y4(e,n){return(isNumberArray(n)?numberArray:$k)(e,n)}function $k(e,n){var r=n?n.length:0,o=e?Math.min(r,e.length):0,u=new Array(o),c=new Array(r),p;for(p=0;p<o;++p)u[p]=ES(e[p],n[p]);for(;p<r;++p)c[p]=n[p];return function(g){for(p=0;p<o;++p)c[p]=u[p](g);return c}}function bS(e,n){var r=new Date;return e=+e,n=+n,function(o){return r.setTime(e*(1-o)+n*o),r}}function vv(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function Xk(e,n){var r={},o={},u;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(u in n)u in e?r[u]=ES(e[u],n[u]):o[u]=n[u];return function(c){for(u in r)o[u]=r[u](c);return o}}var SS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M1=new RegExp(SS.source,"g");function Yk(e){return function(){return e}}function BT(e){return function(n){return e(n)+""}}function qk(e,n){var r=SS.lastIndex=M1.lastIndex=0,o,u,c,p=-1,g=[],y=[];for(e=e+"",n=n+"";(o=SS.exec(e))&&(u=M1.exec(n));)(c=u.index)>r&&(c=n.slice(r,c),g[p]?g[p]+=c:g[++p]=c),(o=o[0])===(u=u[0])?g[p]?g[p]+=u:g[++p]=u:(g[++p]=null,y.push({i:p,x:vv(o,u)})),r=M1.lastIndex;return r<n.length&&(c=n.slice(r),g[p]?g[p]+=c:g[++p]=c),g.length<2?y[0]?BT(y[0].x):Yk(n):(n=y.length,function(S){for(var P=0,L;P<n;++P)g[(L=y[P]).i]=L.x(S);return g.join("")})}function Kk(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,o=n.slice(),u;return function(c){for(u=0;u<r;++u)o[u]=e[u]*(1-c)+n[u]*c;return o}}function Qk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ES(e,n){var r=typeof n,o;return n==null||r==="boolean"?_S(n):(r==="number"?vv:r==="string"?(o=Yn(n))?(n=o,RT):qk:n instanceof Yn?RT:n instanceof Date?bS:Qk(n)?Kk:Array.isArray(n)?$k:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Xk:vv)(e,n)}function Jk(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}function eD(e){return function(){return e}}function _4(e){return+e}var wS=[0,1];function Gc(e){return e}function CS(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:eD(isNaN(n)?NaN:.5)}function TS(e){var n=e[0],r=e[e.length-1],o;return n>r&&(o=n,n=r,r=o),function(u){return Math.max(n,Math.min(r,u))}}function tD(e,n,r){var o=e[0],u=e[1],c=n[0],p=n[1];return u<o?(o=CS(u,o),c=r(p,c)):(o=CS(o,u),c=r(c,p)),function(g){return c(o(g))}}function rD(e,n,r){var o=Math.min(e.length,n.length)-1,u=new Array(o),c=new Array(o),p=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++p<o;)u[p]=CS(e[p],e[p+1]),c[p]=r(n[p],n[p+1]);return function(g){var y=S1(e,g,1,o)-1;return c[y](u[y](g))}}function R1(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function AS(){var e=wS,n=wS,r=ES,o,u,c,p=Gc,g,y,S;function P(){return g=Math.min(e.length,n.length)>2?rD:tD,y=S=null,L}function L(Z){return isNaN(Z=+Z)?c:(y||(y=g(e.map(o),n,r)))(o(p(Z)))}return L.invert=function(Z){return p(u((S||(S=g(n,e.map(o),vv)))(Z)))},L.domain=function(Z){return arguments.length?(e=PT.call(Z,_4),p===Gc||(p=TS(e)),P()):e.slice()},L.range=function(Z){return arguments.length?(n=tm.call(Z),P()):n.slice()},L.rangeRound=function(Z){return n=tm.call(Z),r=Jk,P()},L.clamp=function(Z){return arguments.length?(p=Z?TS(e):Gc,L):p!==Gc},L.interpolate=function(Z){return arguments.length?(r=Z,P()):r},L.unknown=function(Z){return arguments.length?(c=Z,L):c},function(Z,q){return o=Z,u=q,P()}}function NT(e,n){return AS()(e,n)}var x4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I1(e){if(!(n=x4.exec(e)))throw new Error("invalid format: "+e);var n;return new MS({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}I1.prototype=MS.prototype;function MS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}MS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function O1(e,n){if((r=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var r,o=e.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+e.slice(r+1)]}function qm(e){return e=O1(Math.abs(e)),e?e[1]:NaN}function iD(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qm(n)/3)))*3-qm(Math.abs(e)))}function aD(e,n){return function(r,o){for(var u=r.length,c=[],p=0,g=e[0],y=0;u>0&&g>0&&(y+g+1>o&&(g=Math.max(1,o-y)),c.push(r.substring(u-=g,u+g)),!((y+=g+1)>o));)g=e[p=(p+1)%e.length];return c.reverse().join(n)}}function zT(e){return function(n){return n.replace(/[0-9]/g,function(r){return e[+r]})}}function UT(e){e:for(var n=e.length,r=1,o=-1,u;r<n;++r)switch(e[r]){case".":o=u=r;break;case"0":o===0&&(o=r),u=r;break;default:if(!+e[r])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var RS;function ZT(e,n){var r=O1(e,n);if(!r)return e+"";var o=r[0],u=r[1],c=u-(RS=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=o.length;return c===p?o:c>p?o+new Array(c-p+1).join("0"):c>0?o.slice(0,c)+"."+o.slice(c):"0."+new Array(1-c).join("0")+O1(e,Math.max(0,n+c-1))[0]}function VT(e,n){var r=O1(e,n);if(!r)return e+"";var o=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}var jT={"%":function(e,n){return(e*100).toFixed(n)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:nD,e:function(e,n){return e.toExponential(n)},f:function(e,n){return e.toFixed(n)},g:function(e,n){return e.toPrecision(n)},o:function(e){return Math.round(e).toString(8)},p:function(e,n){return VT(e*100,n)},r:VT,s:ZT,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function HT(e){return e}var WT=Array.prototype.map,GT=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function oD(e){var n=e.grouping===void 0||e.thousands===void 0?HT:aD(WT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?HT:zT(WT.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"-":e.minus+"",y=e.nan===void 0?"NaN":e.nan+"";function S(L){L=I1(L);var Z=L.fill,q=L.align,ce=L.sign,me=L.symbol,be=L.zero,$e=L.width,ft=L.comma,mt=L.precision,zt=L.trim,ar=L.type;ar==="n"?(ft=!0,ar="g"):jT[ar]||(mt===void 0&&(mt=12),zt=!0,ar="g"),(be||Z==="0"&&q==="=")&&(be=!0,Z="0",q="=");var nr=me==="$"?r:me==="#"&&/[boxX]/.test(ar)?"0"+ar.toLowerCase():"",Yt=me==="$"?o:/[%p]/.test(ar)?p:"",Cr=jT[ar],Nr=/[defgprs%]/.test(ar);mt=mt===void 0?6:/[gprs]/.test(ar)?Math.max(1,Math.min(21,mt)):Math.max(0,Math.min(20,mt));function nn(an){var Nn=nr,jn=Yt,di,Ua,Co;if(ar==="c")jn=Cr(an)+jn,an="";else{an=+an;var os=an<0||1/an<0;if(an=isNaN(an)?y:Cr(Math.abs(an),mt),zt&&(an=UT(an)),os&&+an==0&&ce!=="+"&&(os=!1),Nn=(os?ce==="("?ce:g:ce==="-"||ce==="("?"":ce)+Nn,jn=(ar==="s"?GT[8+RS/3]:"")+jn+(os&&ce==="("?")":""),Nr){for(di=-1,Ua=an.length;++di<Ua;)if(Co=an.charCodeAt(di),48>Co||Co>57){jn=(Co===46?u+an.slice(di+1):an.slice(di))+jn,an=an.slice(0,di);break}}}ft&&!be&&(an=n(an,1/0));var nu=Nn.length+an.length+jn.length,pu=nu<$e?new Array($e-nu+1).join(Z):"";switch(ft&&be&&(an=n(pu+an,pu.length?$e-jn.length:1/0),pu=""),q){case"<":an=Nn+an+jn+pu;break;case"=":an=Nn+pu+an+jn;break;case"^":an=pu.slice(0,nu=pu.length>>1)+Nn+an+jn+pu.slice(nu);break;default:an=pu+Nn+an+jn;break}return c(an)}return nn.toString=function(){return L+""},nn}function P(L,Z){var q=S((L=I1(L),L.type="f",L)),ce=Math.max(-8,Math.min(8,Math.floor(qm(Z)/3)))*3,me=Math.pow(10,-ce),be=GT[8+ce/3];return function($e){return q(me*$e)+be}}return{format:S,formatPrefix:P}}var P1,IS,$T;sD({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function sD(e){return P1=oD(e),IS=P1.format,$T=P1.formatPrefix,P1}function uD(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,qm(n)-qm(e))+1}function b4(e){return Math.max(0,-qm(Math.abs(e)))}function lD(e,n,r,o){var u=eg(e,n,r),c;switch(o=I1(o==null?",f":o),o.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(c=iD(u,p))&&(o.precision=c),$T(o,p)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(c=uD(u,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=c-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(c=b4(u))&&(o.precision=c-(o.type==="%")*2);break}}return IS(o)}function Iy(e){var n=e.domain;return e.ticks=function(r){var o=n();return CT(o[0],o[o.length-1],r==null?10:r)},e.tickFormat=function(r,o){var u=n();return lD(u[0],u[u.length-1],r==null?10:r,o)},e.nice=function(r){r==null&&(r=10);var o=n(),u=0,c=o.length-1,p=o[u],g=o[c],y;return g<p&&(y=p,p=g,g=y,y=u,u=c,c=y),y=w1(p,g,r),y>0?(p=Math.floor(p/y)*y,g=Math.ceil(g/y)*y,y=w1(p,g,r)):y<0&&(p=Math.ceil(p*y)/y,g=Math.floor(g*y)/y,y=w1(p,g,r)),y>0?(o[u]=Math.floor(p/y)*y,o[c]=Math.ceil(g/y)*y,n(o)):y<0&&(o[u]=Math.ceil(p*y)/y,o[c]=Math.floor(g*y)/y,n(o)),e},e}function OS(){var e=NT(Gc,Gc);return e.copy=function(){return R1(e,OS())},tg.apply(e,arguments),Iy(e)}function cD(e){var n;function r(o){return isNaN(o=+o)?n:o}return r.invert=r,r.domain=r.range=function(o){return arguments.length?(e=map.call(o,number),r):e.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return cD(e).unknown(n)},e=arguments.length?map.call(e,number):[0,1],linearish(r)}function PS(e,n){e=e.slice();var r=0,o=e.length-1,u=e[r],c=e[o],p;return c<u&&(p=r,r=o,o=p,p=u,u=c,c=p),e[r]=n.floor(u),e[o]=n.ceil(c),e}function kS(e){return Math.log(e)}function XT(e){return Math.exp(e)}function Oy(e){return-Math.log(-e)}function fD(e){return-Math.exp(-e)}function hD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pD(e){return e===10?hD:e===Math.E?Math.exp:function(n){return Math.pow(e,n)}}function YT(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(n){return Math.log(n)/e})}function qT(e){return function(n){return-e(-n)}}function k1(e){var n=e(kS,XT),r=n.domain,o=10,u,c;function p(){return u=YT(o),c=pD(o),r()[0]<0?(u=qT(u),c=qT(c),e(Oy,fD)):e(kS,XT),n}return n.base=function(g){return arguments.length?(o=+g,p()):o},n.domain=function(g){return arguments.length?(r(g),p()):r()},n.ticks=function(g){var y=r(),S=y[0],P=y[y.length-1],L;(L=P<S)&&(Z=S,S=P,P=Z);var Z=u(S),q=u(P),ce,me,be,$e=g==null?10:+g,ft=[];if(!(o%1)&&q-Z<$e){if(Z=Math.round(Z)-1,q=Math.round(q)+1,S>0){for(;Z<q;++Z)for(me=1,ce=c(Z);me<o;++me)if(be=ce*me,!(be<S)){if(be>P)break;ft.push(be)}}else for(;Z<q;++Z)for(me=o-1,ce=c(Z);me>=1;--me)if(be=ce*me,!(be<S)){if(be>P)break;ft.push(be)}}else ft=CT(Z,q,Math.min(q-Z,$e)).map(c);return L?ft.reverse():ft},n.tickFormat=function(g,y){if(y==null&&(y=o===10?".0e":","),typeof y!="function"&&(y=IS(y)),g===1/0)return y;g==null&&(g=10);var S=Math.max(1,o*g/n.ticks().length);return function(P){var L=P/c(Math.round(u(P)));return L*o<o-.5&&(L*=o),L<=S?y(P):""}},n.nice=function(){return r(PS(r(),{floor:function(g){return c(Math.floor(u(g)))},ceil:function(g){return c(Math.ceil(u(g)))}}))},n}function DS(){var e=k1(AS()).domain([1,10]);return e.copy=function(){return R1(e,DS()).base(e.base())},tg.apply(e,arguments),e}function D1(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function KT(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function dD(e){var n=1,r=e(D1(n),KT(n));return r.constant=function(o){return arguments.length?e(D1(n=+o),KT(n)):n},linearish(r)}function Py(){var e=dD(transformer());return e.copy=function(){return copy(e,Py()).constant(e.constant())},initRange.apply(e,arguments)}function LS(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function QT(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JT(e){return e<0?-e*e:e*e}function eA(e){var n=e(Gc,Gc),r=1;function o(){return r===1?e(Gc,Gc):r===.5?e(QT,JT):e(LS(r),LS(1/r))}return n.exponent=function(u){return arguments.length?(r=+u,o()):r},Iy(n)}function Km(){var e=eA(AS());return e.copy=function(){return R1(e,Km()).exponent(e.exponent())},tg.apply(e,arguments),e}function vD(){return Km.apply(null,arguments).exponent(.5)}function tA(){var e=[],n=[],r=[],o;function u(){var p=0,g=Math.max(1,n.length);for(r=new Array(g-1);++p<g;)r[p-1]=zk(e,p/g);return c}function c(p){return isNaN(p=+p)?o:n[S1(r,p)]}return c.invertExtent=function(p){var g=n.indexOf(p);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},c.domain=function(p){if(!arguments.length)return e.slice();e=[];for(var g=0,y=p.length,S;g<y;++g)S=p[g],S!=null&&!isNaN(S=+S)&&e.push(S);return e.sort(gS),u()},c.range=function(p){return arguments.length?(n=tm.call(p),u()):n.slice()},c.unknown=function(p){return arguments.length?(o=p,c):o},c.quantiles=function(){return r.slice()},c.copy=function(){return tA().domain(e).range(n).unknown(o)},tg.apply(c,arguments)}function rA(){var e=0,n=1,r=1,o=[.5],u=[0,1],c;function p(y){return y<=y?u[S1(o,y,0,r)]:c}function g(){var y=-1;for(o=new Array(r);++y<r;)o[y]=((y+1)*n-(y-r)*e)/(r+1);return p}return p.domain=function(y){return arguments.length?(e=+y[0],n=+y[1],g()):[e,n]},p.range=function(y){return arguments.length?(r=(u=tm.call(y)).length-1,g()):u.slice()},p.invertExtent=function(y){var S=u.indexOf(y);return S<0?[NaN,NaN]:S<1?[e,o[0]]:S>=r?[o[r-1],n]:[o[S-1],o[S]]},p.unknown=function(y){return arguments.length&&(c=y),p},p.thresholds=function(){return o.slice()},p.copy=function(){return rA().domain([e,n]).range(u).unknown(c)},tg.apply(Iy(p),arguments)}function ky(){var e=[.5],n=[0,1],r,o=1;function u(c){return c<=c?n[S1(e,c,0,o)]:r}return u.domain=function(c){return arguments.length?(e=tm.call(c),o=Math.min(e.length,n.length-1),u):e.slice()},u.range=function(c){return arguments.length?(n=tm.call(c),o=Math.min(e.length,n.length-1),u):n.slice()},u.invertExtent=function(c){var p=n.indexOf(c);return[e[p-1],e[p]]},u.unknown=function(c){return arguments.length?(r=c,u):r},u.copy=function(){return ky().domain(e).range(n).unknown(r)},tg.apply(u,arguments)}var gv=new Date,rg=new Date;function Tf(e,n,r,o){function u(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return u.floor=function(c){return e(c=new Date(+c)),c},u.ceil=function(c){return e(c=new Date(c-1)),n(c,1),e(c),c},u.round=function(c){var p=u(c),g=u.ceil(c);return c-p<g-c?p:g},u.offset=function(c,p){return n(c=new Date(+c),p==null?1:Math.floor(p)),c},u.range=function(c,p,g){var y=[],S;if(c=u.ceil(c),g=g==null?1:Math.floor(g),!(c<p)||!(g>0))return y;do y.push(S=new Date(+c)),n(c,g),e(c);while(S<c&&c<p);return y},u.filter=function(c){return Tf(function(p){if(p>=p)for(;e(p),!c(p);)p.setTime(p-1)},function(p,g){if(p>=p)if(g<0)for(;++g<=0;)for(;n(p,-1),!c(p););else for(;--g>=0;)for(;n(p,1),!c(p););})},r&&(u.count=function(c,p){return gv.setTime(+c),rg.setTime(+p),e(gv),e(rg),Math.floor(r(gv,rg))},u.every=function(c){return c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?u.filter(o?function(p){return o(p)%c===0}:function(p){return u.count(0,p)%c===0}):u}),u}var L1=Tf(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});L1.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Tf(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r*e)})};var rm=L1,nA=L1.range,FS=Tf(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,n){e.setMonth(e.getMonth()+n)},function(e,n){return n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),gD=FS,S4=FS.range,F1=1e3,Dy=6e4,iA=36e5,BS=864e5,aA=6048e5;function nm(e){return Tf(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,r){n.setDate(n.getDate()+r*7)},function(n,r){return(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Dy)/aA})}var NS=nm(0),B1=nm(1),mD=nm(2),yD=nm(3),Qm=nm(4),_D=nm(5),xD=nm(6),E4=NS.range,w4=B1.range,C4=mD.range,T4=yD.range,bD=Qm.range,A4=_D.range,SD=xD.range,im=Tf(function(e){e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Dy)/BS},function(e){return e.getDate()-1}),zS=im,M4=im.range,oA=Tf(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*F1-e.getMinutes()*Dy)},function(e,n){e.setTime(+e+n*iA)},function(e,n){return(n-e)/iA},function(e){return e.getHours()}),ED=oA,wD=oA.range,am=Tf(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*F1)},function(e,n){e.setTime(+e+n*Dy)},function(e,n){return(n-e)/Dy},function(e){return e.getMinutes()}),sA=am,CD=am.range,N1=Tf(function(e){e.setTime(e-e.getMilliseconds())},function(e,n){e.setTime(+e+n*F1)},function(e,n){return(n-e)/F1},function(e){return e.getUTCSeconds()}),US=N1,uA=N1.range,Jm=Tf(function(){},function(e,n){e.setTime(+e+n)},function(e,n){return n-e});Jm.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Tf(function(n){n.setTime(Math.floor(n/e)*e)},function(n,r){n.setTime(+n+r*e)},function(n,r){return(r-n)/e}):Jm};var TD=Jm,R4=Jm.range;function ng(e){return Tf(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r*7)},function(n,r){return(r-n)/aA})}var ZS=ng(0),z1=ng(1),AD=ng(2),MD=ng(3),e0=ng(4),RD=ng(5),ID=ng(6),I4=ZS.range,O4=z1.range,P4=AD.range,OD=MD.range,PD=e0.range,T8=RD.range,np=ID.range,Xf=Tf(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/BS},function(e){return e.getUTCDate()-1}),VS=Xf,k4=Xf.range,jS=Tf(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});jS.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Tf(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r*e)})};var Td=jS,t0=jS.range;function Ly(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fy(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function r0(e,n,r){return{y:e,m:n,d:r,H:0,M:0,S:0,L:0}}function lA(e){var n=e.dateTime,r=e.date,o=e.time,u=e.periods,c=e.days,p=e.shortDays,g=e.months,y=e.shortMonths,S=By(u),P=Ny(u),L=By(c),Z=Ny(c),q=By(p),ce=Ny(p),me=By(g),be=Ny(g),$e=By(y),ft=Ny(y),mt={a:os,A:nu,b:pu,B:cf,c:null,d:gA,e:gA,f:KD,g:rL,G:iL,H:XD,I:YD,j:qD,L:mA,m:F4,M:QD,p:XR,q:zx,Q:RA,s:IA,S:yA,u:JD,U:_A,V:eL,w:bA,W:SA,x:null,X:null,y:tL,Y:nL,Z:aL,"%":MA},zt={a:wB,A:CB,b:Ml,B:up,c:null,d:EA,e:EA,f:CA,g:gL,G:yL,H:oL,I:sL,j:uL,L:wA,m:B4,M:lL,p:YR,q:qR,Q:RA,s:IA,S:cL,u:fL,U:hL,V:pL,w:dL,W:vL,x:null,X:null,y:N4,Y:mL,Z:AA,"%":MA},ar={a:nn,A:an,b:Nn,B:jn,c:di,d:dA,e:dA,f:WD,g:pA,G:hA,H:vA,I:vA,j:D4,L:HD,m:ZD,M:VD,p:Nr,q:UD,Q:GD,s:$D,S:jD,u:LD,U:FD,V:BD,w:DD,W:ND,x:Ua,X:Co,y:pA,Y:hA,Z:zD,"%":L4};mt.x=nr(r,mt),mt.X=nr(o,mt),mt.c=nr(n,mt),zt.x=nr(r,zt),zt.X=nr(o,zt),zt.c=nr(n,zt);function nr(Na,_s){return function(Ks){var Zi=[],lp=-1,il=0,Wp=Na.length,Gp,v_,S8;for(Ks instanceof Date||(Ks=new Date(+Ks));++lp<Wp;)Na.charCodeAt(lp)===37&&(Zi.push(Na.slice(il,lp)),(v_=HS[Gp=Na.charAt(++lp)])!=null?Gp=Na.charAt(++lp):v_=Gp==="e"?" ":"0",(S8=_s[Gp])&&(Gp=S8(Ks,v_)),Zi.push(Gp),il=lp+1);return Zi.push(Na.slice(il,lp)),Zi.join("")}}function Yt(Na,_s){return function(Ks){var Zi=r0(1900,void 0,1),lp=Cr(Zi,Na,Ks+="",0),il,Wp;if(lp!=Ks.length)return null;if("Q"in Zi)return new Date(Zi.Q);if("s"in Zi)return new Date(Zi.s*1e3+("L"in Zi?Zi.L:0));if(_s&&!("Z"in Zi)&&(Zi.Z=0),"p"in Zi&&(Zi.H=Zi.H%12+Zi.p*12),Zi.m===void 0&&(Zi.m="q"in Zi?Zi.q:0),"V"in Zi){if(Zi.V<1||Zi.V>53)return null;"w"in Zi||(Zi.w=1),"Z"in Zi?(il=Fy(r0(Zi.y,0,1)),Wp=il.getUTCDay(),il=Wp>4||Wp===0?z1.ceil(il):z1(il),il=VS.offset(il,(Zi.V-1)*7),Zi.y=il.getUTCFullYear(),Zi.m=il.getUTCMonth(),Zi.d=il.getUTCDate()+(Zi.w+6)%7):(il=Ly(r0(Zi.y,0,1)),Wp=il.getDay(),il=Wp>4||Wp===0?B1.ceil(il):B1(il),il=zS.offset(il,(Zi.V-1)*7),Zi.y=il.getFullYear(),Zi.m=il.getMonth(),Zi.d=il.getDate()+(Zi.w+6)%7)}else("W"in Zi||"U"in Zi)&&("w"in Zi||(Zi.w="u"in Zi?Zi.u%7:"W"in Zi?1:0),Wp="Z"in Zi?Fy(r0(Zi.y,0,1)).getUTCDay():Ly(r0(Zi.y,0,1)).getDay(),Zi.m=0,Zi.d="W"in Zi?(Zi.w+6)%7+Zi.W*7-(Wp+5)%7:Zi.w+Zi.U*7-(Wp+6)%7);return"Z"in Zi?(Zi.H+=Zi.Z/100|0,Zi.M+=Zi.Z%100,Fy(Zi)):Ly(Zi)}}function Cr(Na,_s,Ks,Zi){for(var lp=0,il=_s.length,Wp=Ks.length,Gp,v_;lp<il;){if(Zi>=Wp)return-1;if(Gp=_s.charCodeAt(lp++),Gp===37){if(Gp=_s.charAt(lp++),v_=ar[Gp in HS?_s.charAt(lp++):Gp],!v_||(Zi=v_(Na,Ks,Zi))<0)return-1}else if(Gp!=Ks.charCodeAt(Zi++))return-1}return Zi}function Nr(Na,_s,Ks){var Zi=S.exec(_s.slice(Ks));return Zi?(Na.p=P[Zi[0].toLowerCase()],Ks+Zi[0].length):-1}function nn(Na,_s,Ks){var Zi=q.exec(_s.slice(Ks));return Zi?(Na.w=ce[Zi[0].toLowerCase()],Ks+Zi[0].length):-1}function an(Na,_s,Ks){var Zi=L.exec(_s.slice(Ks));return Zi?(Na.w=Z[Zi[0].toLowerCase()],Ks+Zi[0].length):-1}function Nn(Na,_s,Ks){var Zi=$e.exec(_s.slice(Ks));return Zi?(Na.m=ft[Zi[0].toLowerCase()],Ks+Zi[0].length):-1}function jn(Na,_s,Ks){var Zi=me.exec(_s.slice(Ks));return Zi?(Na.m=be[Zi[0].toLowerCase()],Ks+Zi[0].length):-1}function di(Na,_s,Ks){return Cr(Na,n,_s,Ks)}function Ua(Na,_s,Ks){return Cr(Na,r,_s,Ks)}function Co(Na,_s,Ks){return Cr(Na,o,_s,Ks)}function os(Na){return p[Na.getDay()]}function nu(Na){return c[Na.getDay()]}function pu(Na){return y[Na.getMonth()]}function cf(Na){return g[Na.getMonth()]}function XR(Na){return u[+(Na.getHours()>=12)]}function zx(Na){return 1+~~(Na.getMonth()/3)}function wB(Na){return p[Na.getUTCDay()]}function CB(Na){return c[Na.getUTCDay()]}function Ml(Na){return y[Na.getUTCMonth()]}function up(Na){return g[Na.getUTCMonth()]}function YR(Na){return u[+(Na.getUTCHours()>=12)]}function qR(Na){return 1+~~(Na.getUTCMonth()/3)}return{format:function(Na){var _s=nr(Na+="",mt);return _s.toString=function(){return Na},_s},parse:function(Na){var _s=Yt(Na+="",!1);return _s.toString=function(){return Na},_s},utcFormat:function(Na){var _s=nr(Na+="",zt);return _s.toString=function(){return Na},_s},utcParse:function(Na){var _s=Yt(Na+="",!0);return _s.toString=function(){return Na},_s}}}var HS={"-":"",_:" ",0:"0"},Cc=/^\s*\d+/,cA=/^%/,fA=/[\\^$*+?|[\]().{}]/g;function Ns(e,n,r){var o=e<0?"-":"",u=(o?-e:e)+"",c=u.length;return o+(c<r?new Array(r-c+1).join(n)+u:u)}function kD(e){return e.replace(fA,"\\$&")}function By(e){return new RegExp("^(?:"+e.map(kD).join("|")+")","i")}function Ny(e){for(var n={},r=-1,o=e.length;++r<o;)n[e[r].toLowerCase()]=r;return n}function DD(e,n,r){var o=Cc.exec(n.slice(r,r+1));return o?(e.w=+o[0],r+o[0].length):-1}function LD(e,n,r){var o=Cc.exec(n.slice(r,r+1));return o?(e.u=+o[0],r+o[0].length):-1}function FD(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.U=+o[0],r+o[0].length):-1}function BD(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.V=+o[0],r+o[0].length):-1}function ND(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.W=+o[0],r+o[0].length):-1}function hA(e,n,r){var o=Cc.exec(n.slice(r,r+4));return o?(e.y=+o[0],r+o[0].length):-1}function pA(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),r+o[0].length):-1}function zD(e,n,r){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),r+o[0].length):-1}function UD(e,n,r){var o=Cc.exec(n.slice(r,r+1));return o?(e.q=o[0]*3-3,r+o[0].length):-1}function ZD(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.m=o[0]-1,r+o[0].length):-1}function dA(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.d=+o[0],r+o[0].length):-1}function D4(e,n,r){var o=Cc.exec(n.slice(r,r+3));return o?(e.m=0,e.d=+o[0],r+o[0].length):-1}function vA(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.H=+o[0],r+o[0].length):-1}function VD(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.M=+o[0],r+o[0].length):-1}function jD(e,n,r){var o=Cc.exec(n.slice(r,r+2));return o?(e.S=+o[0],r+o[0].length):-1}function HD(e,n,r){var o=Cc.exec(n.slice(r,r+3));return o?(e.L=+o[0],r+o[0].length):-1}function WD(e,n,r){var o=Cc.exec(n.slice(r,r+6));return o?(e.L=Math.floor(o[0]/1e3),r+o[0].length):-1}function L4(e,n,r){var o=cA.exec(n.slice(r,r+1));return o?r+o[0].length:-1}function GD(e,n,r){var o=Cc.exec(n.slice(r));return o?(e.Q=+o[0],r+o[0].length):-1}function $D(e,n,r){var o=Cc.exec(n.slice(r));return o?(e.s=+o[0],r+o[0].length):-1}function gA(e,n){return Ns(e.getDate(),n,2)}function XD(e,n){return Ns(e.getHours(),n,2)}function YD(e,n){return Ns(e.getHours()%12||12,n,2)}function qD(e,n){return Ns(1+zS.count(rm(e),e),n,3)}function mA(e,n){return Ns(e.getMilliseconds(),n,3)}function KD(e,n){return mA(e,n)+"000"}function F4(e,n){return Ns(e.getMonth()+1,n,2)}function QD(e,n){return Ns(e.getMinutes(),n,2)}function yA(e,n){return Ns(e.getSeconds(),n,2)}function JD(e){var n=e.getDay();return n===0?7:n}function _A(e,n){return Ns(NS.count(rm(e)-1,e),n,2)}function xA(e){var n=e.getDay();return n>=4||n===0?Qm(e):Qm.ceil(e)}function eL(e,n){return e=xA(e),Ns(Qm.count(rm(e),e)+(rm(e).getDay()===4),n,2)}function bA(e){return e.getDay()}function SA(e,n){return Ns(B1.count(rm(e)-1,e),n,2)}function tL(e,n){return Ns(e.getFullYear()%100,n,2)}function rL(e,n){return e=xA(e),Ns(e.getFullYear()%100,n,2)}function nL(e,n){return Ns(e.getFullYear()%1e4,n,4)}function iL(e,n){var r=e.getDay();return e=r>=4||r===0?Qm(e):Qm.ceil(e),Ns(e.getFullYear()%1e4,n,4)}function aL(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Ns(n/60|0,"0",2)+Ns(n%60,"0",2)}function EA(e,n){return Ns(e.getUTCDate(),n,2)}function oL(e,n){return Ns(e.getUTCHours(),n,2)}function sL(e,n){return Ns(e.getUTCHours()%12||12,n,2)}function uL(e,n){return Ns(1+VS.count(Td(e),e),n,3)}function wA(e,n){return Ns(e.getUTCMilliseconds(),n,3)}function CA(e,n){return wA(e,n)+"000"}function B4(e,n){return Ns(e.getUTCMonth()+1,n,2)}function lL(e,n){return Ns(e.getUTCMinutes(),n,2)}function cL(e,n){return Ns(e.getUTCSeconds(),n,2)}function fL(e){var n=e.getUTCDay();return n===0?7:n}function hL(e,n){return Ns(ZS.count(Td(e)-1,e),n,2)}function TA(e){var n=e.getUTCDay();return n>=4||n===0?e0(e):e0.ceil(e)}function pL(e,n){return e=TA(e),Ns(e0.count(Td(e),e)+(Td(e).getUTCDay()===4),n,2)}function dL(e){return e.getUTCDay()}function vL(e,n){return Ns(z1.count(Td(e)-1,e),n,2)}function N4(e,n){return Ns(e.getUTCFullYear()%100,n,2)}function gL(e,n){return e=TA(e),Ns(e.getUTCFullYear()%100,n,2)}function mL(e,n){return Ns(e.getUTCFullYear()%1e4,n,4)}function yL(e,n){var r=e.getUTCDay();return e=r>=4||r===0?e0(e):e0.ceil(e),Ns(e.getUTCFullYear()%1e4,n,4)}function AA(){return"+0000"}function MA(){return"%"}function RA(e){return+e}function IA(e){return Math.floor(+e/1e3)}var n0,OA,z4,_L,xL;bL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bL(e){return n0=lA(e),OA=n0.format,z4=n0.parse,_L=n0.utcFormat,xL=n0.utcParse,n0}var zy=1e3,Uy=zy*60,Zy=Uy*60,Vy=Zy*24,SL=Vy*7,EL=Vy*30,U1=Vy*365;function PA(e){return new Date(e)}function kA(e){return e instanceof Date?+e:+new Date(+e)}function jy(e,n,r,o,u,c,p,g,y){var S=NT(Gc,Gc),P=S.invert,L=S.domain,Z=y(".%L"),q=y(":%S"),ce=y("%I:%M"),me=y("%I %p"),be=y("%a %d"),$e=y("%b %d"),ft=y("%B"),mt=y("%Y"),zt=[[p,1,zy],[p,5,5*zy],[p,15,15*zy],[p,30,30*zy],[c,1,Uy],[c,5,5*Uy],[c,15,15*Uy],[c,30,30*Uy],[u,1,Zy],[u,3,3*Zy],[u,6,6*Zy],[u,12,12*Zy],[o,1,Vy],[o,2,2*Vy],[r,1,SL],[n,1,EL],[n,3,3*EL],[e,1,U1]];function ar(Yt){return(p(Yt)<Yt?Z:c(Yt)<Yt?q:u(Yt)<Yt?ce:o(Yt)<Yt?me:n(Yt)<Yt?r(Yt)<Yt?be:$e:e(Yt)<Yt?ft:mt)(Yt)}function nr(Yt,Cr,Nr,nn){if(Yt==null&&(Yt=10),typeof Yt=="number"){var an=Math.abs(Nr-Cr)/Yt,Nn=bT(function(jn){return jn[2]}).right(zt,an);Nn===zt.length?(nn=eg(Cr/U1,Nr/U1,Yt),Yt=e):Nn?(Nn=zt[an/zt[Nn-1][2]<zt[Nn][2]/an?Nn-1:Nn],nn=Nn[1],Yt=Nn[0]):(nn=Math.max(eg(Cr,Nr,Yt),1),Yt=g)}return nn==null?Yt:Yt.every(nn)}return S.invert=function(Yt){return new Date(P(Yt))},S.domain=function(Yt){return arguments.length?L(PT.call(Yt,kA)):L().map(PA)},S.ticks=function(Yt,Cr){var Nr=L(),nn=Nr[0],an=Nr[Nr.length-1],Nn=an<nn,jn;return Nn&&(jn=nn,nn=an,an=jn),jn=nr(Yt,nn,an,Cr),jn=jn?jn.range(nn,an+1):[],Nn?jn.reverse():jn},S.tickFormat=function(Yt,Cr){return Cr==null?ar:y(Cr)},S.nice=function(Yt,Cr){var Nr=L();return(Yt=nr(Yt,Nr[0],Nr[Nr.length-1],Cr))?L(PS(Nr,Yt)):S},S.copy=function(){return R1(S,jy(e,n,r,o,u,c,p,g,y))},S}function Z1(){return tg.apply(jy(rm,gD,NS,zS,ED,sA,US,TD,OA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function U4(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V1(){var e=0,n=1,r,o,u,c,p=Gc,g=!1,y;function S(P){return isNaN(P=+P)?y:p(u===0?.5:(P=(c(P)-r)*u,g?Math.max(0,Math.min(1,P)):P))}return S.domain=function(P){return arguments.length?(r=c(e=+P[0]),o=c(n=+P[1]),u=r===o?0:1/(o-r),S):[e,n]},S.clamp=function(P){return arguments.length?(g=!!P,S):g},S.interpolator=function(P){return arguments.length?(p=P,S):p},S.unknown=function(P){return arguments.length?(y=P,S):y},function(P){return c=P,r=P(e),o=P(n),u=r===o?0:1/(o-r),S}}function Hy(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DA(){var e=Iy(V1()(Gc));return e.copy=function(){return Hy(e,DA())},kT.apply(e,arguments)}function wL(){var e=loggish(V1()).domain([1,10]);return e.copy=function(){return Hy(e,wL()).base(e.base())},initInterpolator.apply(e,arguments)}function CL(){var e=symlogish(V1());return e.copy=function(){return Hy(e,CL()).constant(e.constant())},initInterpolator.apply(e,arguments)}function j1(){var e=powish(V1());return e.copy=function(){return Hy(e,j1()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function Z4(){return j1.apply(null,arguments).exponent(.5)}function H1(){var e=[],n=identity;function r(o){if(!isNaN(o=+o))return n((bisect(e,o)-1)/(e.length-1))}return r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var u=0,c=o.length,p;u<c;++u)p=o[u],p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(ascending),r},r.interpolator=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return H1(n).domain(e)},initInterpolator.apply(r,arguments)}function i0(){var e=0,n=.5,r=1,o,u,c,p,g,y=Gc,S,P=!1,L;function Z(q){return isNaN(q=+q)?L:(q=.5+((q=+S(q))-u)*(q<u?p:g),y(P?Math.max(0,Math.min(1,q)):q))}return Z.domain=function(q){return arguments.length?(o=S(e=+q[0]),u=S(n=+q[1]),c=S(r=+q[2]),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),Z):[e,n,r]},Z.clamp=function(q){return arguments.length?(P=!!q,Z):P},Z.interpolator=function(q){return arguments.length?(y=q,Z):y},Z.unknown=function(q){return arguments.length?(L=q,Z):L},function(q){return S=q,o=q(e),u=q(n),c=q(r),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),Z}}function W1(){var e=Iy(i0()(Gc));return e.copy=function(){return Hy(e,W1())},kT.apply(e,arguments)}function TL(){var e=loggish(i0()).domain([.1,1,10]);return e.copy=function(){return copy(e,TL()).base(e.base())},initInterpolator.apply(e,arguments)}function LA(){var e=symlogish(i0());return e.copy=function(){return copy(e,LA()).constant(e.constant())},initInterpolator.apply(e,arguments)}function WS(){var e=powish(i0());return e.copy=function(){return copy(e,WS()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function GS(){return WS.apply(null,arguments).exponent(.5)}function G1(e){var n,r=[];function o(u){return u==null?n:u}return o.invert=o,o.domain=o.range=function(u){return u?(r=u,u):r},o.unknown=function(u){return u?(n=u,u):n},o.copy=function(){return G1(e).unknown(n)},o}var Ch,FA,BA,$1=Aa.isNil,NA=Aa.isString,AL=Aa.uniq,ML=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,RL=(Ch={},(0,Ve.Z)(Ch,Bs.LINEAR,OS),(0,Ve.Z)(Ch,Bs.POWER,Km),(0,Ve.Z)(Ch,Bs.LOG,DS),(0,Ve.Z)(Ch,Bs.IDENTITY,G1),(0,Ve.Z)(Ch,Bs.SEQUENTIAL,DA),(0,Ve.Z)(Ch,Bs.TIME,Z1),(0,Ve.Z)(Ch,Bs.QUANTILE,tA),(0,Ve.Z)(Ch,Bs.QUANTIZE,rA),(0,Ve.Z)(Ch,Bs.THRESHOLD,ky),(0,Ve.Z)(Ch,Bs.CAT,A1),(0,Ve.Z)(Ch,Bs.DIVERGING,W1),Ch),IL=(FA=(0,kt.b2)(),FA(BA=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"scaleOptions",{})}return(0,ct.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("FeatureScalePlugin",(0,pn.Z)(Jt().mark(function p(){var g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(r.log(tl.ScaleInitStart,Xo.INIT),u.scaleOptions=r.getScaleOptions(),y=c.getLayerStyleAttributes(),S=(g=r.getSource())===null||g===void 0?void 0:g.data.dataArray,!(Array.isArray(S)&&S.length===0)){L.next=8;break}return L.abrupt("return");case 8:u.caculateScalesForAttributes(y||[],S);case 9:r.log(tl.ScaleInitEnd,Xo.INIT);case 10:case"end":return L.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var p=(0,pn.Z)(Jt().mark(function g(y){var S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(y){Z.next=2;break}return Z.abrupt("return",y);case 2:if(r.log(tl.ScaleInitStart,Xo.UPDATE),u.scaleOptions=r.getScaleOptions(),S=c.getLayerStyleAttributes(),P=r.getSource().data.dataArray,!(Array.isArray(P)&&P.length===0)){Z.next=8;break}return Z.abrupt("return",!0);case 8:return u.caculateScalesForAttributes(S||[],P),r.log(tl.ScaleInitEnd,Xo.UPDATE),r.layerModelNeedUpdate=!0,Z.abrupt("return",!0);case 12:case"end":return Z.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!r.layerModelNeedUpdate){u.scaleOptions=r.getScaleOptions();var p=c.getLayerStyleAttributes(),g=r.getSource().data.dataArray;if(!(Array.isArray(g)&&g.length===0)&&p){var y=p.filter(function(S){return S.needRescale});y.length&&u.caculateScalesForAttributes(y,g)}}})}},{key:"isNumber",value:function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},{key:"caculateScalesForAttributes",value:function(r,o){var u=this;r.forEach(function(c){if(c.scale){var p=c.scale,g=c.scale.field;p.names=u.parseFields($1(g)?[]:g);var y=[];p.names.forEach(function(S){var P;y.push(u.createScale(S,c.name,(P=c.scale)===null||P===void 0?void 0:P.values,o))}),y.some(function(S){return S.type===zm.VARIABLE})?(p.type=zm.VARIABLE,y.forEach(function(S){if(!p.callback&&p.values!=="text"){var P;switch((P=S.option)===null||P===void 0?void 0:P.type){case Bs.LOG:case Bs.LINEAR:case Bs.POWER:if(p.values&&p.values.length>2){var L=S.scale.ticks(p.values.length);S.scale.domain(L)}p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case Bs.QUANTILE:case Bs.QUANTIZE:case Bs.THRESHOLD:S.scale.range(p.values);break;case Bs.IDENTITY:break;case Bs.CAT:p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case Bs.DIVERGING:case Bs.SEQUENTIAL:S.scale.interpolator(jk(p.values));break}}if(p.values==="text"){var Z;S.scale.range((Z=S.option)===null||Z===void 0?void 0:Z.domain)}})):(p.type=zm.CONSTANT,p.defaultValues=y.map(function(S,P){return S.scale(p.names[P])})),p.scalers=y.map(function(S){return{field:S.field,func:S.scale,option:S.option}}),c.needRescale=!1}})}},{key:"parseFields",value:function(r){return Array.isArray(r)?r:NA(r)?r.split("*"):[r]}},{key:"createScale",value:function(r,o,u,c){var p,g,y=this.scaleOptions[o]&&((p=this.scaleOptions[o])===null||p===void 0?void 0:p.field)===r?this.scaleOptions[o]:this.scaleOptions[r],S={field:r,scale:void 0,type:zm.VARIABLE,option:y};if(!c||!c.length)return y&&y.type?S.scale=this.createDefaultScale(y):(S.scale=A1([r]),S.type=zm.CONSTANT),S;var P=(g=c.find(function(q){return!$1(q[r])}))===null||g===void 0?void 0:g[r];if(this.isNumber(r)||$1(P)&&!y)S.scale=A1([r]),S.type=zm.CONSTANT;else{var L=y&&y.type||this.getDefaultType(P);u==="text"&&(L=Bs.CAT),u===void 0&&(L=Bs.IDENTITY);var Z=this.createScaleConfig(L,r,y,c);S.scale=this.createDefaultScale(Z),S.option=Z}return S}},{key:"getDefaultType",value:function(r){var o=Bs.LINEAR;return typeof r=="string"&&(o=ML.test(r)?Bs.TIME:Bs.CAT),o}},{key:"createScaleConfig",value:function(r,o,u,c){var p={type:r},g=[];if(r===Bs.QUANTILE){var y=new Map;c==null||c.forEach(function(L){y.set(L._id,L[o])}),g=Array.from(y.values())}else g=(c==null?void 0:c.map(function(L){return L[o]}))||[];if(u!=null&&u.domain)p.domain=u==null?void 0:u.domain;else if(r===Bs.CAT||r===Bs.IDENTITY)p.domain=AL(g);else if(r===Bs.QUANTILE)p.domain=g;else if(r===Bs.DIVERGING){var S=wT(g),P=(u==null?void 0:u.neutral)!==void 0?u==null?void 0:u.neutral:(S[0]+S[1])/2;p.domain=[S[0],P,S[1]]}else p.domain=wT(g);return(0,ae.Z)((0,ae.Z)({},p),u)}},{key:"createDefaultScale",value:function(r){var o=r.type,u=r.domain,c=r.unknown,p=r.clamp,g=r.nice,y=RL[o]();return u&&y.domain&&y.domain(u),c&&y.unknown(c),p!==void 0&&y.clamp&&y.clamp(p),g!==void 0&&y.nice&&y.nice(g),y}}]),e}())||BA),zA,UA,OL=(zA=(0,kt.b2)(),zA(UA=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var o=r.animateStatus;o&&r.models.forEach(function(u){u.addUniforms((0,ae.Z)({},r.layerModel.getAnimateUniforms()))})})}}]),e}())||UA),ZA,VA,jA=(ZA=(0,kt.b2)(),ZA(VA=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerMaskPlugin",function(){var o=r.getLayerConfig(),u=o.maskLayers,c=o.enableMask;if(!r.tileLayer&&u&&u.length>0){var p;(p=r.masks).push.apply(p,(0,Rn.Z)(u)),r.updateLayerConfig({mask:c})}})}}]),e}())||VA),PL=function(){function e(n){var r=n.rendererService,o=n.layerService,u=n.parent;(0,It.Z)(this,e),(0,Ve.Z)(this,"tileResource",new Map),(0,Ve.Z)(this,"layerTiles",[]),this.rendererService=r,this.layerService=o,this.parent=u}return(0,ct.Z)(e,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(r){return this.layerTiles.some(function(o){return o.key===r})}},{key:"addTile",value:function(r){this.layerTiles.push(r)}},{key:"getTile",value:function(r){return this.layerTiles.find(function(o){return o.key===r})}},{key:"getVisibleTileBylngLat",value:function(r){return this.layerTiles.find(function(o){return o.isLoaded&&o.visible&&o.lnglatInBounds(r)})}},{key:"removeTile",value:function(r){var o=this.layerTiles.findIndex(function(c){return c.key===r}),u=this.layerTiles.splice(o,1);u[0]&&u[0].destroy()}},{key:"updateTileVisible",value:function(r){var o=this.getTile(r.key);if(r.isVisible)if(r.parent){var u=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(u)}else o==null||o.updateVisible(!0);else if(r.parent){var c=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(!c)}else o==null||o.updateVisible(!1)}},{key:"isParentLoaded",value:function(r){var o=r.parent;if(!o)return!0;var u=this.getTile(o==null?void 0:o.key);return!!(u!=null&&u.isLoaded)}},{key:"isChildrenLoaded",value:function(r){var o=this,u=r==null?void 0:r.children;return u.length===0?!0:u.every(function(c){var p=o.getTile(c==null?void 0:c.key);return p?(p==null?void 0:p.isLoaded)===!0:!0})}},{key:"render",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){var u=this,c,p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=this.getRenderLayers(),p=c.map(function(){var S=(0,pn.Z)(Jt().mark(function P(L){return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,u.layerService.renderTileLayer(L);case 2:case"end":return q.stop()}},P)}));return function(P){return S.apply(this,arguments)}}()),y.next=4,Promise.all(p);case 4:case"end":return y.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getRenderLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.visible&&u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Rn.Z)(u.getLayers()))}),o}},{key:"getLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Rn.Z)(u.getLayers()))}),o}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(r){return r.destroy()}),this.tileResource.clear()}}]),e}(),kL=k(32676);function DL(e,n,r){r===void 0&&(r={});var o=Ir(e),u=Ir(n),c=kL.union(o.coordinates,u.coordinates);return c.length===0?null:c.length===1?xe(c[0],r.properties):Le(c,r.properties)}var LL=DL,FL=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"getCombineFeature",value:function(r){var o=null,u=r[0];return r.map(function(c){var p=xe(c.coordinates);o===null?o=p:o=LL(o,p)}),u&&(o.properties=(0,ae.Z)({},u)),o}}]),e}(),Wy="select",Gy="active",V4=function(){function e(n){var r=n.layerService,o=n.tileLayerService,u=n.parent;(0,It.Z)(this,e),(0,Ve.Z)(this,"tilePickID",new Map),this.layerService=r,this.tileLayerService=o,this.parent=u,this.tileSourceService=new FL}return(0,ct.Z)(e,[{key:"pickRender",value:function(r){var o=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o){var u=o.getMainLayer();u==null||u.layerPickService.pickRender(r)}}},{key:"pick",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(p=this.parent.getContainer(),g=p.get(Qt.IPickingService),u.type!=="RasterLayer"){L.next=8;break}if(y=this.tileLayerService.getVisibleTileBylngLat(c.lngLat),!(y&&y.getMainLayer()!==void 0)){L.next=7;break}return S=y.getMainLayer(),L.abrupt("return",S.layerPickService.pickRasterLayer(S,c,this.parent));case 7:return L.abrupt("return",!1);case 8:return this.pickRender(c),L.abrupt("return",g.pickFromPickingFBO(u,c));case 10:case"end":return L.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"selectFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(Wy,g),this.updateHighLight(u,c,p,Wy)}},{key:"highlightPickedFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(Gy,g),this.updateHighLight(u,c,p,Gy)}},{key:"updateHighLight",value:function(r,o,u,c){this.tileLayerService.tiles.map(function(p){var g=p.getMainLayer();switch(c){case Wy:g==null||g.hooks.beforeSelect.call([r,o,u]);break;case Gy:g==null||g.hooks.beforeHighlight.call([r,o,u]);break}})}},{key:"setPickState",value:function(){var r=this.tilePickID.get(Wy),o=this.tilePickID.get(Gy);if(r){var u=this.pickId2Color(r),c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.updateHighLight(p,g,y,Wy);return}if(o){var S=this.pickId2Color(o),P=(0,ji.Z)(S,3),L=P[0],Z=P[1],q=P[2];this.updateHighLight(L,Z,q,Gy);return}}},{key:"color2PickId",value:function(r,o,u){return ec(new Uint8Array([r,o,u]))}},{key:"pickId2Color",value:function(r){return Ms(r)}},{key:"getFeatureById",value:function(r){var o=this.tileLayerService.getTiles().filter(function(c){return c.visible}),u=[];return o.forEach(function(c){u.push.apply(u,(0,Rn.Z)(c.getFeatureById(r)))}),u}},{key:"pickRasterLayer",value:function(r,o,u){return!1}}]),e}();function $S(e){return e==="PolygonLayer"?x1:e==="LineLayer"?by:y1}function HA(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}function $y(e){var n=BL();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function BL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var om=function(e){(0,gr.Z)(r,e);var n=$y(r);function r(o,u){var c;return(0,It.Z)(this,r),c=n.call(this),(0,Ve.Z)((0,Mr.Z)(c),"visible",!0),(0,Ve.Z)((0,Mr.Z)(c),"layers",[]),(0,Ve.Z)((0,Mr.Z)(c),"isLoaded",!1),(0,Ve.Z)((0,Mr.Z)(c),"tileMaskLayers",[]),c.parent=u,c.sourceTile=o,c.x=o.x,c.y=o.y,c.z=o.z,c.key="".concat(c.x,"_").concat(c.y,"_").concat(c.z),c}return(0,ct.Z)(r,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(u){var c=(0,ji.Z)(this.sourceTile.bounds,4),p=c[0],g=c[1],y=c[2],S=c[3],P=u.lng,L=u.lat;return P>=p&&P<=y&&L>=g&&L<=S}},{key:"getLayerOptions",value:function(){var u,c=this.parent.getLayerConfig();return(0,ae.Z)((0,ae.Z)({},c),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:HA(this.parent.type),mask:c.mask||((u=c.maskLayers)===null||u===void 0?void 0:u.length)!==0&&c.enableMask})}},{key:"getMaskLayer",value:function(){var u=this,c=this.parent.getLayerConfig(),p=c.maskLayers,g=[];return p==null||p.forEach(function(y){if(!y.tileLayer)return g.push(y),y;var S=y.tileLayer,P=S.getTile(u.sourceTile.key),L=P==null?void 0:P.getLayers()[0];L&&g.push(L)}),g}},{key:"addTileMask",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y;return Jt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=new x1({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),g=Nm(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),P.next=5,p.init();case 5:return this.tileMask=p,y=this.getMainLayer(),y!==void 0&&(y.tileMask=p),P.abrupt("return",p);case 9:case"end":return P.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addMask",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p,g){var y;return Jt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return y=Nm(this.parent.sceneContainer),g.setContainer(y,this.parent.sceneContainer),P.next=4,g.init();case 4:p.addMask(g),this.tileMaskLayers.push(g);case 6:case"end":return P.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p.isTileLayer=!0,g=Nm(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),this.layers.push(p),S.next=6,p.init();case 6:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateVisible",value:function(u){this.visible=u,this.updateOptions("visible",u)}},{key:"updateOptions",value:function(u,c){this.layers.forEach(function(p){p.updateLayerConfig((0,Ve.Z)({},u,c))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(u){return[]}},{key:"getFeatureById",value:function(u){return[]}},{key:"destroy",value:function(){var u;(u=this.tileMask)===null||u===void 0||u.destroy(),this.layers.forEach(function(c){return c.destroy()})}}]),r}(Es.EventEmitter);function WA(e){var n=Xy();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Xy(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var GA=function(e){(0,gr.Z)(r,e);var n=WA(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.getSourceOption(),g=p.data.features[0].properties,y=new by().source(p.data,p.options).size(1).shape("line").color("red"),S=new y1({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([g],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),L.next=6,this.addLayer(y);case 6:return L.next=8,this.addLayer(S);case 8:this.isLoaded=!0;case 9:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:c},options:{parser:{type:"geojson"},transforms:u.transforms}}}}]),r}(om);function NL(e){var n=zL();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function zL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var UL=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,ZL=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`,VL=function(e){(0,gr.Z)(r,e);var n=NL(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=u.brightness,g=u.contrast,y=u.saturation,S=u.gamma,P={u_opacity:Xs(c,1),u_brightness:Xs(p,1),u_contrast:Xs(g,1),u_saturation:Xs(y,1),u_gamma:Xs(S,1)};this.textures=[this.texture];var L=this.getUniformsBufferInfo(P);return L}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"loadTexture",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y;return Jt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=this.rendererService.createTexture2D,this.texture=p({height:1,width:1}),g=this.layer.getSource(),P.next=5,g.data.images;case 5:y=P.sent,this.texture=p({data:y[0],width:y[0].width,height:y[0].height,mag:Ct.LINEAR,min:Ct.LINEAR});case 7:case"end":return P.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:ZL,fragmentShader:UL,triangulation:o1,primitive:Ct.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(Eu),jL={image:VL},HL=jL;function WL(e){var n=GL();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function GL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $L=function(e){(0,gr.Z)(r,e);var n=WL(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","ImageLayer"),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new HL[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={image:{}};return c[u]}},{key:"getModelType",value:function(){return"image"}}]),r}(Vm);function XL(e){var n=$A();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function $A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YL=function(e){(0,gr.Z)(r,e);var n=XL(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new $L((0,ae.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(Z){var q,ce,me=Z;S[me]((q=p[me])===null||q===void 0?void 0:q.field,(ce=p[me])===null||ce===void 0?void 0:ce.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(om);function qL(e){var n=KL();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function KL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QL=function(e){(0,gr.Z)(r,e);var n=qL(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new Ay((0,ae.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(Z){var q,ce,me=Z;S[me]((q=p[me])===null||q===void 0?void 0:q.field,(ce=p[me])===null||ce===void 0?void 0:ce.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getFeatures",value:function(u){if(!u)return[];var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=c.featureId,y=this.getFeatures(p);return{data:{type:"FeatureCollection",features:y},options:{parser:{type:"geojson",featureId:g},transforms:u.transforms}}}}]),r}(om);function XS(e){var n=YS();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function YS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var JL=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,eF=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,XA=function(e){(0,gr.Z)(r,e);var n=XS(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.clampLow,y=g===void 0?!0:g,S=u.clampHigh,P=S===void 0?!0:S,L=u.noDataValue,Z=L===void 0?-9999999:L,q=u.domain,ce=u.rampColors,me=q||tc(ce);this.colorTexture=this.layer.textureService.getColorTexture(ce,me);var be={u_domain:me,u_opacity:p||1,u_noDataValue:Z,u_clampLow:y?1:0,u_clampHigh:(typeof P!="undefined"?P:y)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};this.textures=[this.texture,this.colorTexture];var $e=this.getUniformsBufferInfo(be);return $e}},{key:"getRasterData",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!Array.isArray(p.data)){Z.next=4;break}return Z.abrupt("return",{data:p.data,width:p.width,height:p.height});case 4:return Z.next=6,p.data;case 6:return g=Z.sent,y=g.rasterData,S=g.width,P=g.height,Z.abrupt("return",{data:Array.from(y),width:S,height:P});case 11:case"end":return Z.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q,ce,me;return Jt().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService,y=g.createTexture2D,S=g.queryVerdorInfo,P=p.data.dataArray[0],$e.next=6,this.getRasterData(P);case 6:return L=$e.sent,Z=L.data,q=L.width,ce=L.height,this.texture=y({data:new Float32Array(Z),width:q,height:ce,format:S()==="WebGL1"?Ct.LUMINANCE:Ct.RED,type:Ct.FLOAT,alignment:1}),$e.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:eF,fragmentShader:JL,triangulation:o1,primitive:Ct.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return me=$e.sent,$e.abrupt("return",[me]);case 15:case"end":return $e.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c;(u=this.texture)===null||u===void 0||u.destroy(),(c=this.colorTexture)===null||c===void 0||c.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{shaderLocation:fa.UV,name:"a_Uv",buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(Eu),X1=["data"],tF=["rasterData"];function rF(e){var n=Y1();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function Y1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YA=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,qA=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,KA=function(e){(0,gr.Z)(r,e);var n=rF(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"dataOption",{}),o}return(0,ct.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ae.Z)((0,ae.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.noDataValue,y=g===void 0?0:g,S=this.dataOption,P=S.rMinMax,L=P===void 0?[0,255]:P,Z=S.gMinMax,q=Z===void 0?[0,255]:Z,ce=S.bMinMax,me=ce===void 0?[0,255]:ce,be={u_rminmax:L,u_gminmax:q,u_bminmax:me,u_opacity:p||1,u_noDataValue:y,u_texture:this.texture};this.textures=[this.texture];var $e=this.getUniformsBufferInfo(be);return $e}},{key:"getRasterData",value:function(){var o=(0,pn.Z)(Jt().mark(function c(p){var g,y,S,P,L;return Jt().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!Array.isArray(p.data)){q.next=4;break}return g=p.data,y=(0,Vc.Z)(p,X1),this.dataOption=y,q.abrupt("return",(0,ae.Z)({data:g},y));case 4:return q.next=6,p.data;case 6:if(S=q.sent,P=S.rasterData,L=(0,Vc.Z)(S,tF),this.dataOption=L,!Array.isArray(P)){q.next=14;break}return q.abrupt("return",(0,ae.Z)({data:P},L));case 14:return q.abrupt("return",(0,ae.Z)({data:Array.from(P)},L));case 15:case"end":return q.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q;return Jt().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],me.next=6,this.getRasterData(y);case 6:return S=me.sent,P=S.data,L=S.width,Z=S.height,this.texture=g({data:new Float32Array(P),width:L,height:Z,format:Ct.RGB,type:Ct.FLOAT}),me.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:qA,fragmentShader:YA,triangulation:o1,primitive:Ct.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return q=me.sent,me.abrupt("return",[q]);case 15:case"end":return me.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(Eu);function QA(e){var n=nF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function nF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iF=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,aF=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
   vec4 u_unpack;
   vec2 u_domain;
   float u_opacity;
   float u_noDataValue;
   float u_clampLow;
   float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,oF=function(e){(0,gr.Z)(r,e);var n=QA(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=u.clampLow,g=p===void 0?!0:p,y=u.clampHigh,S=y===void 0?!0:y,P=u.noDataValue,L=P===void 0?-9999999:P,Z=u.domain,q=u.rampColors,ce=u.colorTexture,me=u.rScaler,be=me===void 0?6553.6:me,$e=u.gScaler,ft=$e===void 0?25.6:$e,mt=u.bScaler,zt=mt===void 0?.1:mt,ar=u.offset,nr=ar===void 0?1e4:ar,Yt=Z||tc(q),Cr=ce;ce?this.layer.textureService.setColorTexture(ce,q,Yt):Cr=this.layer.textureService.getColorTexture(q,Yt);var Nr={u_unpack:[be,ft,zt,nr],u_domain:Yt,u_opacity:c||1,u_noDataValue:L,u_clampLow:g,u_clampHigh:typeof S!="undefined"?S:g,u_texture:this.texture,u_colorTexture:Cr};this.textures=[this.texture,Cr];var nn=this.getUniformsBufferInfo(Nr);return nn}},{key:"initModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService.createTexture2D,L.next=5,p.data.images;case 5:return y=L.sent,this.texture=g({data:y[0],width:y[0].width,height:y[0].height,min:Ct.LINEAR,mag:Ct.LINEAR}),L.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:aF,fragmentShader:iF,triangulation:o1,primitive:Ct.TRIANGLES,depth:{enable:!1}});case 9:return S=L.sent,L.abrupt("return",[S]);case 11:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ma.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(Eu),sF={raster:XA,rasterRgb:KA,raster3d:XA,rasterTerrainRgb:oF},JA=sF;function eM(e,n){return{type:e.type,field:"value",items:e.positions.map(function(r,o){var u;return u={},(0,Ve.Z)(u,n,o>=e.colors.length?null:e.colors[o]),(0,Ve.Z)(u,"value",r),u})}}function uF(e){var n=lF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function lF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qS=function(e){(0,gr.Z)(r,e);var n=uF(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","RasterLayer"),o}return(0,ct.Z)(r,[{key:"buildModels",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p;return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new JA[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.layerSource.getParserType();switch(u){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}},{key:"getLegend",value:function(u){if(u!=="color")return{type:void 0,field:void 0,items:[]};var c=this.getLayerConfig().rampColors;return eM(c,u)}}]),r}(Vm),cF=["rasterData"];function fF(e){var n=hF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function hF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pF=function(e){(0,gr.Z)(r,e);var n=fF(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new qS((0,ae.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(Z){var q,ce,me=Z;S[me]((q=p[me])===null||q===void 0?void 0:q.field,(ce=p[me])===null||ce===void 0?void 0:ce.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Vc.Z)(c,cF);return{data:p,options:{parser:(0,ae.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}}]),r}(om);function dF(e){var n=vF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function vF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j4=function(e){(0,gr.Z)(r,e);var n=dF(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S;return Jt().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new qS((0,ae.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(Z){var q,ce,me=Z;S[me]((q=p[me])===null||q===void 0?void 0:q.field,(ce=p[me])===null||ce===void 0?void 0:ce.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(om),tM=["rasterData"];function rM(e){var n=KS();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function KS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var gF={positions:[0,1],colors:["#000","#fff"]},QS=function(e){(0,gr.Z)(r,e);var n=rM(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z;return Jt().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=this.getLayerOptions(),P=S.rampColors,L=S.domain,this.colorTexture=this.parent.textureService.getColorTexture(P,L),Z=new qS((0,ae.Z)((0,ae.Z)({},g),{},{colorTexture:this.colorTexture})).source(y.data,y.options),p&&Object.keys(p).forEach(function(me){var be,$e,ft=me;Z[ft]((be=p[ft])===null||be===void 0?void 0:be.field,($e=p[ft])===null||$e===void 0?void 0:$e.values)}),ce.next=9,this.addLayer(Z);case 9:this.isLoaded=!0;case 10:case"end":return ce.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Vc.Z)(c,tM);return{data:p,options:{parser:(0,ae.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}},{key:"styleUpdate",value:function(){for(var u=this,c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];var y=p,S=y.rampColors,P=S===void 0?gF:S,L=y.domain;this.colorTexture=this.parent.textureService.getColorTexture(P,L||tc(P)),this.layers.forEach(function(Z){return Z.style({colorTexture:u.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(u){return u.destroy()})}}]),r}(om);function mF(e){var n=yF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function yF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var q1=function(e){(0,gr.Z)(r,e);var n=mF(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=$S(this.parent.type),S=this.getSourceOption(),S){Z.next=8;break}return this.isLoaded=!0,this.emit("loaded"),Z.abrupt("return");case 8:return P=new y((0,ae.Z)({},g)).source(S.data,S.options),Object.keys(p).forEach(function(q){var ce,me,be=q;P[be]((ce=p[be])===null||ce===void 0?void 0:ce.field,(me=p[be])===null||me===void 0?void 0:me.values)}),Z.next=12,this.addLayer(P);case 12:if(!g.tileMask){Z.next=15;break}return Z.next=15,this.addTileMask();case 15:this.setLayerMinMaxZoom(P),this.isLoaded=!0,this.emit("loaded");case 18:case"end":return Z.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=p===void 0?"defaultLayer":p,y=c.featureId,S=y===void 0?"id":y,P=this.getFeatures(g);return{data:{type:"FeatureCollection",features:P},options:{parser:{type:"geojson",featureId:S},transforms:u.transforms}}}},{key:"setLayerMinMaxZoom",value:function(u){u.getModelType()==="text"&&u.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(u){var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getFeatureById",value:function(u){var c=this.getMainLayer();if(!c)return[];var p=c.getSource().data.dataArray.filter(function(g){return g._id===u});return p}}]),r}(om);function _F(e){var n=e.type;switch(n){case"PolygonLayer":return q1;case"LineLayer":return q1;case"PointLayer":return q1;case"TileDebugLayer":return GA;case"MaskLayer":return QL;case"RasterLayer":var r=e.getSource().parser.dataType;switch(r){case jc.RGB:case jc.CUSTOMRGB:return pF;case jc.ARRAYBUFFER:case jc.CUSTOMARRAYBUFFER:return QS;case jc.TERRAINRGB:case jc.CUSTOMTERRAINRGB:return j4;default:return YL}default:return q1}}var xF=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],bF=Aa.debounce,nM=function(){function e(n){var r=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"initedTileset",!1),(0,Ve.Z)(this,"mapchange",function(){var u;if(r.parent.isVisible()!==!1){var c=r.getCurrentView(),p=c.latLonBounds,g=c.zoom;if(r.mapService.version==="GAODE1.x"){var y=r.parent.getLayerConfig(),S=y.visible;g<2&&S?(r.parent.updateLayerConfig({visible:!1}),r.layerService.reRender()):g>=2&&!S&&(r.parent.updateLayerConfig({visible:!0}),r.layerService.reRender())}r.lastViewStates&&r.lastViewStates.zoom===g&&r.lastViewStates.latLonBounds.toString()===p.toString()||(r.lastViewStates={zoom:g,latLonBounds:p},(u=r.tilesetManager)===null||u===void 0||u.throttleUpdate(g,p))}}),(0,Ve.Z)(this,"viewchange",bF(this.mapchange,24)),this.parent=n;var o=this.parent.getContainer();this.rendererService=o.get(Qt.IRendererService),this.layerService=o.get(Qt.ILayerService),this.mapService=o.get(Qt.IMapService),this.pickingService=o.get(Qt.IPickingService),this.tileLayerService=new PL({rendererService:this.rendererService,layerService:this.layerService,parent:n}),this.tilePickService=new V4({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:n}),this.parent.setLayerPickService(this.tilePickService),this.proxy(n),this.initTileSetManager()}return(0,ct.Z)(e,[{key:"initTileSetManager",value:function(){var r,o=this.parent.getSource();if(this.tilesetManager=o.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var u=this.getCurrentView(),c=u.latLonBounds,p=u.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(p,c)}}},{key:"getCurrentView",value:function(){var r=this.mapService.getBounds(),o=[r[0][0],r[0][1],r[1][0],r[1][1]],u=this.mapService.getZoom();return{latLonBounds:o,zoom:u}}},{key:"bindTilesetEvent",value:function(){var r=this;this.tilesetManager.on("tile-loaded",function(o){}),this.tilesetManager.on("tile-unload",function(o){r.tileUnLoad(o)}),this.tilesetManager.on("tile-error",function(o,u){r.tileError(o)}),this.tilesetManager.on("tile-update",function(){r.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(r){return this.tileLayerService.getTile(r)}},{key:"tileLoaded",value:function(r){}},{key:"tileError",value:function(r){console.warn("error:",r)}},{key:"destroy",value:function(){var r;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(r=this.tilesetManager)===null||r===void 0||r.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var r;this.tilesetManager.clear();var o=this.getCurrentView(),u=o.latLonBounds,c=o.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(c,u)}},{key:"tileUnLoad",value:function(r){this.tileLayerService.removeTile(r.key)}},{key:"tileUpdate",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){var u=this,c,p,g;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.tilesetManager){S.next=2;break}return S.abrupt("return");case 2:return c=this.parent.getMinZoom(),p=this.parent.getMaxZoom(),g=this.tilesetManager.tiles.filter(function(P){return P.isLoaded}).filter(function(P){return P.isVisibleChange}).filter(function(P){return P.data}).filter(function(P){return P.z>=c&&P.z<p}),S.next=7,Promise.all(g.map(function(){var P=(0,pn.Z)(Jt().mark(function L(Z){var q,ce;return Jt().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(u.tileLayerService.hasTile(Z.key)){be.next=9;break}return q=_F(u.parent),ce=new q(Z,u.parent),be.next=5,ce.initTileLayer();case 5:u.tilePickService.setPickState(),ce.getLayers().length!==0&&(u.tileLayerService.addTile(ce),u.tileLayerService.updateTileVisible(Z),u.layerService.reRender()),be.next=12;break;case 9:u.tileLayerService.updateTileVisible(Z),u.tilePickService.setPickState(),u.layerService.reRender();case 12:case"end":return be.stop()}},L)}));return function(L){return P.apply(this,arguments)}}()));case 7:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 8:case"end":return S.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"setPickState",value:function(r){}},{key:"pickRender",value:function(r){this.tilePickService.pickRender(r)}},{key:"selectFeature",value:function(r){this.tilePickService.selectFeature(r)}},{key:"highlightPickedFeature",value:function(r){this.tilePickService.highlightPickedFeature(r)}},{key:"proxy",value:function(r){var o=this;xF.forEach(function(u){var c=r[u].bind(r);r[u]=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return c.apply(void 0,g),o.getLayers().map(function(S){S[u].apply(S,g)}),u==="style"&&o.getTiles().forEach(function(S){return S.styleUpdate.apply(S,g)}),r}})}}]),e}(),SF,Ad,JS=(SF=(0,kt.b2)(),SF(Ad=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"build",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u.prepareBuildModel(),p.next=3,u.buildModels();case 3:case"end":return p.stop()}},o)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"initLayerModel",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"prepareLayerModel",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"apply",value:function(r){var o=this;r.hooks.init.tapPromise("LayerModelPlugin",(0,pn.Z)(Jt().mark(function u(){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!r.getSource().isTile){p.next=4;break}return r.prepareBuildModel(),r.tileLayer=new nM(r),p.abrupt("return");case 4:return r.log(tl.BuildModelStart,Xo.INIT),p.next=7,o.initLayerModel(r);case 7:r.log(tl.BuildModelEnd,Xo.INIT);case 8:case"end":return p.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var u=(0,pn.Z)(Jt().mark(function c(p){return Jt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(p){y.next=2;break}return y.abrupt("return",!1);case 2:if(!r.getSource().isTile){y.next=5;break}return r.tileLayer=new nM(r),y.abrupt("return",!1);case 5:return r.log(tl.BuildModelStart,Xo.UPDATE),y.next=8,o.prepareLayerModel(r);case 8:return r.log(tl.BuildModelEnd,Xo.UPDATE),y.abrupt("return",!0);case 10:case"end":return y.stop()}},c)}));return function(c){return u.apply(this,arguments)}}())}}]),e}())||Ad),iM,Yy,EF=(iM=(0,kt.b2)(),iM(Yy=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerStylePlugin",function(){var o=r.getLayerConfig(),u=o.autoFit,c=o.fitBoundsOptions;u&&r.fitBounds(c),r.styleNeedUpdate=!1})}}]),e}())||Yy),aM,oM,wF=["type"],sM={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},CF={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},TF={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},AF={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function MF(e){var n={u_DirectionalLights:new Array(3).fill((0,ae.Z)({},TF)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,ae.Z)({},AF)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[CF]),e.forEach(function(r){var o=r.type,u=o===void 0?"directional":o,c=(0,Vc.Z)(r,wF),p=sM[u].lights,g=sM[u].num,y=n[g];n[p][y]=(0,ae.Z)((0,ae.Z)({},n[p][y]),c),n[g]++}),n}var RF=(aM=(0,kt.b2)(),aM(oM=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LightingPlugin",function(){var o=r.getLayerConfig(),u=o.enableLighting;u&&r.models.forEach(function(c){return c.addUniforms((0,ae.Z)({},MF()))})})}}]),e}())||oM),a0,uM,IF=(a0=(0,kt.b2)(),a0(uM=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.postProcessingPassFactory,g=o.normalPassFactory;r.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var y=r.getLayerConfig(),S=y.enableMultiPassRenderer,P=y.passes,L=P===void 0?[]:P;u.enabled=!!S&&r.getLayerConfig().enableMultiPassRenderer!==!1,u.enabled&&(r.multiPassRenderer=iC(r,L,p,g),r.multiPassRenderer.setRenderFlag(!0))}),r.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(u.enabled){var y=c.getViewportSize(),S=y.width,P=y.height;r.multiPassRenderer.resize(S,P)}})}}]),e}())||uM),lM,cM,fM=Aa.isNumber,qy={NONE:0,ENCODE:1,HIGHLIGHT:2},Ky=(lM=(0,kt.b2)(),lM(cM=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"pickOption2Array",value:function(){var r=[];return this.pickingUniformMap.forEach(function(o,u){fM(o)?r.push(o):r.push.apply(r,(0,Rn.Z)(o))}),r}},{key:"updatePickOption",value:function(r,o){var u=this;Object.keys(r).forEach(function(y){u.pickingUniformMap.set(y,r[y])});var c=o.getLayerConfig().pickingBuffer||0,p=Number(o.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",c),this.pickingUniformMap.set("u_shaderPick",p);var g=o.getPickingUniformBuffer();g.subData({offset:0,data:this.pickOption2Array()})}},{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.styleAttributeService,g;this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_EnableSelect",0],["u_activeMix",0]]),r.hooks.init.tapPromise("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;p.registerStyleAttribute({name:"pickingColor",type:ma.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:fa.PICKING_COLOR,buffer:{data:[],type:Ct.FLOAT},size:3,update:function(L){var Z=L.id;return S?Ms(Z):[0,0,0]}}})}),r.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:qy.ENCODE},r),r.models.forEach(function(P){return P.addUniforms({u_PickingStage:qy.ENCODE})}))}),r.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:qy.HIGHLIGHT},r),r.models.forEach(function(P){return P.addUniforms({u_PickingStage:qy.HIGHLIGHT})}))}),r.hooks.beforeHighlight.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),P=S.highlightColor,L=S.activeMix,Z=L===void 0?0:L,q=typeof P=="string"?bo(P):P||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:ec(new Uint8Array(y))});var ce={u_PickingStage:qy.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:q.map(function(me){return me*255}),u_activeMix:Z};u.updatePickOption(ce,r),r.models.forEach(function(me){return me.addUniforms(ce)})}),r.hooks.beforeSelect.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),P=S.selectColor,L=S.selectMix,Z=L===void 0?0:L,q=typeof P=="string"?bo(P):P||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:ec(new Uint8Array(y))});var ce={u_PickingStage:qy.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:q.map(function(me){return me*255}),u_activeMix:Z,u_CurrentSelectedId:y,u_SelectColor:q.map(function(me){return me*255}),u_EnableSelect:1};u.updatePickOption(ce,r),r.models.forEach(function(me){return me.addUniforms(ce)})})}}]),e}())||cM),eE=["mvt","geojsonvt","testTile"];function OF(e){var n=e.getSource();return eE.includes(n.parser.type)}function PF(e){return e.getContext?{width:e.width/DOM.DPR,height:e.height/DOM.DPR}:e.getBoundingClientRect()}var hM,pM,H4=(hM=(0,kt.b2)(),hM(pM=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){OF(r)||u.registerBuiltinAttributes(c,r)})}},{key:"registerBuiltinAttributes",value:function(r,o){if(o.type==="MaskLayer"){this.registerPositionAttribute(r);return}this.registerPositionAttribute(r),this.registerColorAttribute(r),this.registerVertexIdAttribute(r)}},{key:"registerPositionAttribute",value:function(r){r.registerStyleAttribute({name:"position",type:ma.Attribute,descriptor:{name:"a_Position",shaderLocation:fa.POSITION,buffer:{data:[],type:Ct.FLOAT},size:3,update:function(u,c,p){return p.length===2?[p[0],p[1],0]:[p[0],p[1],p[2]]}}})}},{key:"registerColorAttribute",value:function(r){r.registerStyleAttribute({name:"color",type:ma.Attribute,descriptor:{name:"a_Color",shaderLocation:fa.COLOR,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:4,update:function(u){var c=u.color;return!c||!c.length?[1,1,1,1]:c}}})}},{key:"registerVertexIdAttribute",value:function(r){r.registerStyleAttribute({name:"vertexId",type:ma.Attribute,descriptor:{name:"a_vertexId",shaderLocation:fa.VERTEX_ID,buffer:{usage:Ct.DYNAMIC_DRAW,data:[],type:Ct.FLOAT},size:1,update:function(u,c){return[c]}}})}}]),e}())||pM),kF,DF,dM,tE,rE,vM,gM,Yf,K1,mM,nE,iE,yM,LF=(kF=(0,kt.b2)(),DF=(0,kt.f3)(Qt.ICameraService),dM=(0,kt.f3)(Qt.ICoordinateSystemService),tE=(0,kt.f3)(Qt.IRendererService),rE=(0,kt.f3)(Qt.IMapService),vM=(0,kt.f3)(Qt.ILayerService),kF(gM=(Yf=function(){function e(){(0,It.Z)(this,e),Ba(this,"cameraService",K1,this),Ba(this,"coordinateSystemService",mM,this),Ba(this,"rendererService",nE,this),Ba(this,"mapService",iE,this),Ba(this,"layerService",yM,this)}return(0,ct.Z)(e,[{key:"apply",value:function(r){var o=this,u=this.mapService.version,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[0,0],g;this.rendererService.uniformBuffers[0]||(g=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=g),r.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var y=r.getLayerConfig().tileOrigin;if(o.coordinateSystemService.refresh(y),u==="GAODE2.x"){o.setLayerCenter(r),c=o.mapService.map.customCoords.getMVPMatrix(),p=o.mapService.getCustomCoordCenter();var S=r.getLayerUniformBuffer();S.subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Rn.Z)(c),(0,Rn.Z)(p))).buffer)})}var P=o.rendererService.getViewportSize(),L=P.width,Z=P.height,q=o.generateUBO(c,p,L,Z),ce=q.data,me=q.uniforms;if(o.layerService.alreadyInRendering&&o.rendererService.uniformBuffers[0]){var be=o.rendererService.uniformBuffers[0];be.subData({offset:0,data:ce})}var $e=o.rendererService.queryVerdorInfo();$e==="WebGL1"&&r.models.forEach(function(ft){ft.addUniforms((0,ae.Z)((0,ae.Z)({},me),{},{u_PickingBuffer:r.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(r.getShaderPickStat())}))})})}},{key:"setLayerCenter",value:function(r){r.coordCenter===void 0&&(r.coordCenter=r.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(r.coordCenter)}},{key:"generateUBO",value:function(r,o,u,c){var p,g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),S=this.cameraService.getViewProjectionMatrix(),P=this.cameraService.getModelMatrix(),L=this.coordinateSystemService.getViewportCenterProjection(),Z=this.coordinateSystemService.getPixelsPerDegree(),q=this.cameraService.getZoom(),ce=this.coordinateSystemService.getPixelsPerDegree2(),me=this.cameraService.getZoomScale(),be=this.coordinateSystemService.getPixelsPerMeter(),$e=this.coordinateSystemService.getCoordinateSystem(),ft=this.cameraService.getCameraPosition(),mt=window.devicePixelRatio,zt=this.coordinateSystemService.getViewportCenter(),ar=[u,c],nr=this.cameraService.getFocalDistance(),Yt=[].concat((0,Rn.Z)(y),(0,Rn.Z)(g),(0,Rn.Z)(S),(0,Rn.Z)(P),(0,Rn.Z)(L),(0,Rn.Z)(Z),[q],(0,Rn.Z)(ce),[me],(0,Rn.Z)(be),[$e],(0,Rn.Z)(ft),[mt],(0,Rn.Z)(zt),ar,[nr,0,0,0]);return{data:Yt,uniforms:(p={},(0,Ve.Z)(p,Zg.ProjectionMatrix,g),(0,Ve.Z)(p,Zg.ViewMatrix,y),(0,Ve.Z)(p,Zg.ViewProjectionMatrix,S),(0,Ve.Z)(p,Zg.Zoom,q),(0,Ve.Z)(p,Zg.ZoomScale,me),(0,Ve.Z)(p,Zg.FocalDistance,nr),(0,Ve.Z)(p,Zg.CameraPosition,ft),(0,Ve.Z)(p,Hf.CoordinateSystem,$e),(0,Ve.Z)(p,Hf.ViewportCenter,zt),(0,Ve.Z)(p,Hf.ViewportCenterProjection,L),(0,Ve.Z)(p,Hf.PixelsPerDegree,Z),(0,Ve.Z)(p,Hf.PixelsPerDegree2,ce),(0,Ve.Z)(p,Hf.PixelsPerMeter,be),(0,Ve.Z)(p,Hf.Mvp,r),(0,Ve.Z)(p,"u_sceneCenterMercator",o),(0,Ve.Z)(p,"u_ViewportSize",ar),(0,Ve.Z)(p,"u_ModelMatrix",P),(0,Ve.Z)(p,"u_DevicePixelRatio",mt),p)}}}]),e}(),K1=Ia(Yf.prototype,"cameraService",[DF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mM=Ia(Yf.prototype,"coordinateSystemService",[dM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nE=Ia(Yf.prototype,"rendererService",[tE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iE=Ia(Yf.prototype,"mapService",[rE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yM=Ia(Yf.prototype,"layerService",[vM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yf))||gM),FF,_M,BF=(FF=(0,kt.b2)(),FF(_M=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("UpdateModelPlugin",function(){r.layerModel&&r.layerModel.needUpdate().then(function(o){o&&r.renderLayers()})}),r.hooks.afterRender.tap("UpdateModelPlugin",function(){r.layerModelNeedUpdate=!1})}}]),e}())||_M),aE,xM,NF=(aE=(0,kt.b2)(),aE(xM=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){u.initStyleAttribute(r,{styleAttributeService:c})}),r.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){r.layerModelNeedUpdate||r.inited&&u.updateStyleAttribute(r,{styleAttributeService:c})})}},{key:"updateStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[],p=u.getLayerStyleAttribute("filter");if(p&&p.needRegenerateVertices){r.layerModelNeedUpdate=!0,c.forEach(function(g){return g.needRegenerateVertices=!1});return}c.filter(function(g){return g.needRegenerateVertices}).forEach(function(g){u.updateAttributeByFeatureRange(g.name,r.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex,r),g.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[];c.filter(function(p){return p.needRegenerateVertices}).forEach(function(p){u.updateAttributeByFeatureRange(p.name,r.getEncodedData(),p.featureRange.startIndex,p.featureRange.endIndex),p.needRegenerateVertices=!1})}}]),e}())||xM);Gf.bind(Qt.ILayerPlugin).to(xT).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(H4).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(IL).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(My).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(EF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(jA).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(NF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(BF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(IF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(LF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(OL).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(RF).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(Ky).inRequestScope(),Gf.bind(Qt.ILayerPlugin).to(JS).inRequestScope();function oE(e){var n=Md();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Md(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zF=null;function sE(e){var n=UF();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function UF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ZF=function(e){(0,gr.Z)(r,e);var n=sE(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"zoomIn",function(){!o.disabled&&o.mapsService.getZoom()<o.mapsService.getMaxZoom()&&o.mapsService.zoomIn()}),(0,Ve.Z)((0,Mr.Z)(o),"zoomOut",function(){!o.disabled&&o.mapsService.getZoom()>o.mapsService.getMinZoom()&&o.mapsService.zoomOut()}),(0,Ve.Z)((0,Mr.Z)(o),"updateDisabled",function(){var g=o.mapsService;o.zoomInButton.removeAttribute("disabled"),o.zoomOutButton.removeAttribute("disabled"),(o.disabled||g.getZoom()<=g.getMinZoom())&&o.zoomOutButton.setAttribute("disabled","true"),o.controlOption.showZoom&&o.zoomNumDiv&&(o.zoomNumDiv.innerText=String(Math.floor(g.getZoom()))),(o.disabled||g.getZoom()>=g.getMaxZoom())&&o.zoomInButton.setAttribute("disabled","true")}),o}return(0,ct.Z)(r,[{key:"getDefault",value:function(u){return(0,ae.Z)((0,ae.Z)({},Cf((0,Nt.Z)(r.prototype),"getDefault",this).call(this,u)),{},{position:ts.BOTTOMRIGHT,name:"zoom",zoomInText:Nb("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:Nb("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}},{key:"setOptions",value:function(u){Cf((0,Nt.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var u=$s("div","l7-control-zoom");return this.resetButtonGroup(u),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),u}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(u){Dh(u),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",u,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",u)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",u,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(u,c,p,g,y){var S=$s("button",p,g);return typeof u=="string"?S.innerHTML=u:S.append(u),S.title=c,y&&S.addEventListener("click",y),S}}]),r}(Wg);function bM(e){var n=zp();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function zp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VF=null;function jF(e){var n=SM();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function SM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var EM=Aa.get,HF=null;function WF(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}WF(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 0;
      -ms-flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
          flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item input[type='radio'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -ms-touch-action: none;
      touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var wM,uE,GF,Q1=(wM=Sb(Qt.IGlobalConfigService),uE=function(){function e(n){(0,It.Z)(this,e),Ba(this,"configService",GF,this),this.config=n}return(0,ct.Z)(e,[{key:"setContainer",value:function(r,o,u){r.bind(Qt.MapConfig).toConstantValue((0,ae.Z)((0,ae.Z)({},this.config),{},{id:o,canvas:u})),r.bind(Qt.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),GF=Ia(uE.prototype,"configService",[wM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uE),W4=k(59858),CM=k(81618),J1=k.n(CM);function Qy(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ex(e,n){var r=xh([],n,e);return Bv(r,r,1/r[3]),r}function G4(e,n){var r=e%n;return r<0?n+r:r}function $4(e,n,r){return r*n+(1-r)*e}function sm(e,n){if(!e)throw new Error(n||"viewport-mercator-project: assertion failed.")}var Up=Math.PI,tx=Up/4,mv=Up/180,TM=180/Up,Jy=512,AM=4003e4,$F=1.5;function MM(e){return Math.pow(2,e)}function XF(e){return Math.log2(e)}function rx(e,n){var r=(0,ji.Z)(e,2),o=r[0],u=r[1];sm(Number.isFinite(o)&&Number.isFinite(n)),sm(Number.isFinite(u)&&u>=-90&&u<=90,"invalid latitude"),n*=Jy;var c=o*mv,p=u*mv,g=n*(c+Up)/(2*Up),y=n*(Up-Math.log(Math.tan(tx+p*.5)))/(2*Up);return[g,y]}function lE(e,n){var r=(0,ji.Z)(e,2),o=r[0],u=r[1];n*=Jy;var c=o/n*(2*Up)-Up,p=2*(Math.atan(Math.exp(Up-u/n*(2*Up)))-tx);return[c*TM,p*TM]}function YF(e){var n=e.latitude;assert(Number.isFinite(n));var r=Math.cos(n*mv);return XF(AM*r)-9}function RM(e){var n=e.latitude,r=e.longitude,o=e.zoom,u=e.scale,c=e.highPrecision,p=c===void 0?!1:c;u=u!==void 0?u:MM(o),sm(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(u));var g={},y=Jy*u,S=Math.cos(n*mv),P=y/360,L=P/S,Z=y/AM/S;if(g.pixelsPerMeter=[Z,-Z,Z],g.metersPerPixel=[1/Z,-1/Z,1/Z],g.pixelsPerDegree=[P,-L,Z],g.degreesPerPixel=[1/P,-1/L,1/Z],p){var q=mv*Math.tan(n*mv)/S,ce=P*q/2,me=y/AM*q,be=me/L*Z;g.pixelsPerDegree2=[0,-ce,me],g.pixelsPerMeter2=[be,0,be]}return g}function X4(e,n){var r=_slicedToArray(e,3),o=r[0],u=r[1],c=r[2],p=_slicedToArray(n,3),g=p[0],y=p[1],S=p[2],P=1,L=RM({longitude:o,latitude:u,scale:P,highPrecision:!0}),Z=L.pixelsPerMeter,q=L.pixelsPerMeter2,ce=rx(e,P);ce[0]+=g*(Z[0]+q[0]*y),ce[1]+=y*(Z[1]+q[1]*y);var me=lE(ce,P),be=(c||0)+(S||0);return Number.isFinite(c)||Number.isFinite(S)?[me[0],me[1],be]:me}function qF(e){var n=e.height,r=e.pitch,o=e.bearing,u=e.altitude,c=e.center,p=c===void 0?null:c,g=e.flipY,y=g===void 0?!1:g,S=Qy();return sc(S,S,[0,0,-u]),Ec(S,S,[1,1,1/n]),Xa(S,S,-r*mv),Op(S,S,o*mv),y&&Ec(S,S,[1,-1,1]),p&&sc(S,S,ja.negate([],p)),S}function KF(e){var n=e.width,r=e.height,o=e.altitude,u=o===void 0?$F:o,c=e.pitch,p=c===void 0?0:c,g=e.nearZMultiplier,y=g===void 0?1:g,S=e.farZMultiplier,P=S===void 0?1:S,L=p*mv,Z=Math.atan(.5/u),q=Math.sin(Z)*u/Math.sin(Math.PI/2-L-Z),ce=Math.cos(Math.PI/2-L)*q+u;return{fov:2*Math.atan(r/2/u),aspect:n/r,focalDistance:u,near:y,far:ce*P}}function QF(e){var n=e.width,r=e.height,o=e.pitch,u=e.altitude,c=e.nearZMultiplier,p=e.farZMultiplier,g=KF({width:n,height:r,altitude:u,pitch:o,nearZMultiplier:c,farZMultiplier:p}),y=g.fov,S=g.aspect,P=g.near,L=g.far,Z=zr([],y,S,P,L);return Z}function JF(e,n){var r=(0,ji.Z)(e,3),o=r[0],u=r[1],c=r[2],p=c===void 0?0:c;return sm(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(p)),ex(n,[o,u,p,1])}function IM(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=(0,ji.Z)(e,3),u=o[0],c=o[1],p=o[2];if(sm(Number.isFinite(u)&&Number.isFinite(c),"invalid pixel coordinate"),Number.isFinite(p)){var g=ex(n,[u,c,p,1]);return g}var y=ex(n,[u,c,0,1]),S=ex(n,[u,c,1,1]),P=y[2],L=S[2],Z=P===L?0:((r||0)-P)/(L-P);return Jn.t7([],y,S,Z)}var OM=Qy(),e5=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.width,o=n.height,u=n.viewMatrix,c=u===void 0?OM:u,p=n.projectionMatrix,g=p===void 0?OM:p;(0,It.Z)(this,e),this.width=r||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=c,this.projectionMatrix=g;var y=Qy();Vu(y,y,this.projectionMatrix),Vu(y,y,this.viewMatrix),this.viewProjectionMatrix=y;var S=Qy();Ec(S,S,[this.width/2,-this.height/2,1]),sc(S,S,[1,-1,0]),Vu(S,S,this.viewProjectionMatrix);var P=af(Qy(),S);if(!P)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=S,this.pixelUnprojectionMatrix=P,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,ct.Z)(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&$i(r.projectionMatrix,this.projectionMatrix)&&$i(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=this.projectPosition(r),g=JF(p,this.pixelProjectionMatrix),y=(0,ji.Z)(g,2),S=y[0],P=y[1],L=c?P:this.height-P;return r.length===2?[S,L]:[S,L,g[2]]}},{key:"unproject",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=o.targetZ,g=(0,ji.Z)(r,3),y=g[0],S=g[1],P=g[2],L=c?S:this.height-S,Z=p&&p*this.pixelsPerMeter,q=IM([y,L,P],this.pixelUnprojectionMatrix,Z),ce=this.unprojectPosition(q),me=(0,ji.Z)(ce,3),be=me[0],$e=me[1],ft=me[2];return Number.isFinite(P)?[be,$e,ft]:Number.isFinite(p)?[be,$e,p]:[be,$e]}},{key:"projectPosition",value:function(r){var o=this.projectFlat(r),u=(0,ji.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)*this.pixelsPerMeter;return[c,p,g]}},{key:"unprojectPosition",value:function(r){var o=this.unprojectFlat(r),u=(0,ji.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)/this.pixelsPerMeter;return[c,p,g]}},{key:"projectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}},{key:"unprojectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}}]),e}();function Y4(e){var n=e.width,r=e.height,o=e.bounds,u=e.minExtent,c=u===void 0?0:u,p=e.maxZoom,g=p===void 0?24:p,y=e.padding,S=y===void 0?0:y,P=e.offset,L=P===void 0?[0,0]:P,Z=(0,ji.Z)(o,2),q=(0,ji.Z)(Z[0],2),ce=q[0],me=q[1],be=(0,ji.Z)(Z[1],2),$e=be[0],ft=be[1];if(Number.isFinite(S)){var mt=S;S={top:mt,bottom:mt,left:mt,right:mt}}else sm(Number.isFinite(S.top)&&Number.isFinite(S.bottom)&&Number.isFinite(S.left)&&Number.isFinite(S.right));var zt=new qf({width:n,height:r,longitude:0,latitude:0,zoom:0}),ar=zt.project([ce,ft]),nr=zt.project([$e,me]),Yt=[Math.max(Math.abs(nr[0]-ar[0]),c),Math.max(Math.abs(nr[1]-ar[1]),c)],Cr=[n-S.left-S.right-Math.abs(L[0])*2,r-S.top-S.bottom-Math.abs(L[1])*2];sm(Cr[0]>0&&Cr[1]>0);var Nr=Cr[0]/Yt[0],nn=Cr[1]/Yt[1],an=(S.right-S.left)/2/Nr,Nn=(S.bottom-S.top)/2/nn,jn=[(nr[0]+ar[0])/2+an,(nr[1]+ar[1])/2+Nn],di=zt.unproject(jn),Ua=zt.zoom+Math.log2(Math.abs(Math.min(Nr,nn)));return{longitude:di[0],latitude:di[1],zoom:Math.min(Ua,g)}}var qf=function(e){(0,gr.Z)(n,e);function n(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.width,c=o.height,p=o.latitude,g=p===void 0?0:p,y=o.longitude,S=y===void 0?0:y,P=o.zoom,L=P===void 0?0:P,Z=o.pitch,q=Z===void 0?0:Z,ce=o.bearing,me=ce===void 0?0:ce,be=o.altitude,$e=be===void 0?1.5:be,ft=o.nearZMultiplier,mt=o.farZMultiplier;(0,It.Z)(this,n),u=u||1,c=c||1;var zt=MM(L);$e=Math.max(.75,$e);var ar=rx([S,g],zt);ar[2]=0;var nr=QF({width:u,height:c,pitch:q,bearing:me,altitude:$e,nearZMultiplier:ft||1/c,farZMultiplier:mt||1.01}),Yt=qF({height:c,center:ar,pitch:q,bearing:me,altitude:$e,flipY:!0});return r=(0,Br.Z)(this,(0,Nt.Z)(n).call(this,{width:u,height:c,viewMatrix:Yt,projectionMatrix:nr})),r.latitude=g,r.longitude=S,r.zoom=L,r.pitch=q,r.bearing=me,r.altitude=$e,r.scale=zt,r.center=ar,r.pixelsPerMeter=RM((0,Mr.Z)((0,Mr.Z)(r))).pixelsPerMeter[2],Object.freeze((0,Mr.Z)((0,Mr.Z)(r))),r}return(0,ct.Z)(n,[{key:"projectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return rx(o,u)}},{key:"unprojectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return lE(o,u)}},{key:"getMapCenterByLngLatPosition",value:function(o){var u=o.lngLat,c=o.pos,p=IM(c,this.pixelUnprojectionMatrix),g=rx(u,this.scale),y=Jn.IH([],g,Jn.tk([],p)),S=Jn.IH([],this.center,y);return lE(S,this.scale)}},{key:"getLocationAtPoint",value:function(o){var u=o.lngLat,c=o.pos;return this.getMapCenterByLngLatPosition({lngLat:u,pos:c})}},{key:"fitBounds",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.width,p=this.height,g=Y4(Object.assign({width:c,height:p,bounds:o},u)),y=g.longitude,S=g.latitude,P=g.zoom;return new n({width:c,height:p,longitude:y,latitude:S,zoom:P})}}]),n}(e5),ig=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth,S=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new qf((0,ae.Z)((0,ae.Z)({},S),{},{width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),PM=function(){function e(n){(0,It.Z)(this,e),(0,Ve.Z)(this,"size",1e4),this.size=n||1e4}return(0,ct.Z)(e,[{key:"setSize",value:function(r){this.size=r}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(r){return(180+r)/360*this.size}},{key:"mercatorYfromLat",value:function(r){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(r){return r/this.size*360-180}},{key:"latFromMercatorY",value:function(r){var o=180-(1-r/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}},{key:"project",value:function(r){var o=this.mercatorXfromLng(r[0]),u=this.mercatorYfromLat(r[1]);return[o,u]}},{key:"unproject",value:function(r){var o=this.lngFromMercatorX(r[0]),u=this.latFromMercatorY(r[1]);return[o,u]}}]),e}();function cE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return(0,ae.Z)((0,ae.Z)({},n),e)}var kM={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},DM=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],nx,LM,FM,BM,NM,zM,o0,fE,s0,e_,u0;function UM(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}UM(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var t5={contextmenu:"rightclick"},r5={contextmenu:"rightclick",camerachange:"viewchange"},hE={"GAODE1.x":t5,"GAODE2.x":r5},ZM=0;window.forceWebGL=!0;var pE="15cd8a57710d40c9b7c0e3cc120f1200",VM="1.4.15",ix="amap-script",l0=!1,ax=[],n5=12,jM=(nx=(0,kt.b2)(),LM=(0,kt.f3)(Qt.IGlobalConfigService),FM=(0,kt.f3)(Qt.MapConfig),BM=(0,kt.f3)(Qt.ICoordinateSystemService),NM=(0,kt.f3)(Qt.IEventEmitter),nx(zM=(o0=function(){function e(){var n=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"version",Nu["GAODE1.x"]),(0,Ve.Z)(this,"simpleMapCoord",new PM),(0,Ve.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),Ba(this,"configService",fE,this),Ba(this,"config",s0,this),Ba(this,"coordinateSystemService",e_,this),Ba(this,"eventEmitter",u0,this),(0,Ve.Z)(this,"handleCameraChanged",function(r){var o=r.camera,u=o.fov,c=o.near,p=o.far,g=o.height,y=o.pitch,S=o.rotation,P=o.aspect,L=o.position,Z=n.getCenter(),q=Z.lng,ce=Z.lat;if(n.emit("mapchange"),n.cameraChangedCallback){n.viewport.syncWithMapCamera({aspect:P,bearing:360-S,far:p,fov:u,cameraHeight:g,near:c,pitch:y,zoom:n.map.getZoom()-1,center:[q,ce],offsetOrigin:[L.x,L.y]});var me=n.config.offsetZoom,be=me===void 0?n5:me;n.viewport.getZoom()>be?n.coordinateSystemService.setCoordinateSystem(Pu.P20_OFFSET):n.coordinateSystemService.setCoordinateSystem(Pu.P20),n.cameraChangedCallback(n.viewport)}})}return(0,ct.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getContainer();if(r!==null){var o=r.getElementsByClassName("amap-maps")[0];this.markerContainer=$s("div","l7-marker-container",o)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(r,o){Tb.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(hE[this.version][r]||r,o)}},{key:"off",value:function(r,o){Tb.indexOf(r)!==-1?this.eventEmitter.off(r,o):this.map.off(hE[this.version][r]||r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var r;return(r=this.map.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var r=this.map.getSize();return[r.getWidth(),r.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(r){return this.map.setZoom(r+1)}},{key:"getCenter",value:function(r){if(r!=null&&r.padding){var o=this.getCenter(),u=cE(r.padding),c=this.lngLatToPixel([o.lng,o.lat]),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x-p[0],c.y-p[1]]);return g}var y=this.map.getCenter();return{lng:y.getLng(),lat:y.getLat()}}},{key:"setCenter",value:function(r,o){if(o!=null&&o.padding){var u=cE(o.padding),c=this.lngLatToPixel(r),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x+p[0],c.y+p[1]]);this.map.setCenter([g.lng,g.lat])}else this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var r=this.map.getBounds().toBounds(),o=r.getNorthEast(),u=r.getSouthWest(),c=this.getCenter(),p=c.lng>o.getLng()||c.lng<u.getLng()?180-o.getLng():o.getLng(),g=c.lng<u.getLng()?u.getLng()-180:u.getLng();return[[g,u.getLat()],[p,o.getLat()]]}},{key:"getMinZoom",value:function(){var r=this.map.get("zooms");return r[0]-1}},{key:"getMaxZoom",value:function(){var r=this.map.get("zooms");return r[1]-1}},{key:"setRotation",value:function(r){return this.map.setRotation(r)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(r,o)}},{key:"fitBounds",value:function(r){this.map.setBounds(new AMap.Bounds([r[0][0],r[0][1],r[1][0],r[1][1]]))}},{key:"setZoomAndCenter",value:function(r,o){this.map.setZoomAndCenter(r+1,o)}},{key:"setMapStyle",value:function(r){this.map.setMapStyle(this.getMapStyleValue(r))}},{key:"setMapStatus",value:function(r){this.map.setStatus(r)}},{key:"getMapStyleConfig",value:function(){return kM}},{key:"getMapStyleValue",value:function(r){return this.getMapStyleConfig()[r]||r}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(r){var o=this.map.pixelToLngLat(new AMap.Pixel(r[0],r[1]));return{lng:o.getLng(),lat:o.getLat()}}},{key:"lngLatToPixel",value:function(r){var o=this.map.lnglatToPixel(new AMap.LngLat(r[0],r[1]));return{x:o.getX(),y:o.getY()}}},{key:"containerToLngLat",value:function(r){var o=new AMap.Pixel(r[0],r[1]),u=this.map.containerToLngLat(o);return{lng:u==null?void 0:u.getLng(),lat:u==null?void 0:u.getLat()}}},{key:"lngLatToContainer",value:function(r){var o=new AMap.LngLat(r[0],r[1]),u=this.map.lngLatToContainer(o);return{x:u.getX(),y:u.getY()}}},{key:"lngLatToCoord",value:function(r){var o=this.map.lngLatToGeodeticCoord(r),u=o.x,c=o.y;return[u,-c]}},{key:"lngLatToMercator",value:function(r,o){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(r,o,u){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],p=this.viewport.projectFlat(r),g=ks();return sc(g,g,ja.fromValues(p[0],p[1],o)),Ec(g,g,ja.fromValues(c[0],c[1],c[2])),Xa(g,g,u[0]),of(g,g,u[1]),Op(g,g,u[2]),g}},{key:"init",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){var u=this,c,p,g,y,S,P,L,Z,q,ce,me,be,$e,ft;return Jt().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return c=this.config,p=c.id,g=c.style,y=g===void 0?"light":g,S=c.minZoom,P=S===void 0?0:S,L=c.maxZoom,Z=L===void 0?18:L,q=c.token,ce=q===void 0?pE:q,me=c.mapInstance,be=c.plugin,$e=be===void 0?[]:be,ft=(0,Vc.Z)(c,DM),zt.next=3,new Promise(function(ar){var nr=function(){if(me)u.map=me,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),ar()},30);else{u.$mapContainer=u.creatMapContainer(p);var Cr=(0,ae.Z)({mapStyle:u.getMapStyleValue(y),zooms:[P,Z],viewMode:"3D"},ft);Cr.zoom&&(Cr.zoom+=1);var Nr=new AMap.Map(u.$mapContainer,Cr);Nr.on("camerachange",u.handleCameraChanged),Nr.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Nr,setTimeout(function(){ar()},10)}};!l0&&!me?(ce===pE&&console.warn("%c".concat(u.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),l0=!0,$e.push("Map3D"),J1().load({key:ce,version:VM,plugins:$e}).then(function(){nr(),ax.length&&(ax.forEach(function(Yt){return Yt()}),ax=[])}).catch(function(Yt){throw new Error(Yt)})):l0&&window.AMap||me?nr():ax.push(nr)});case 3:this.viewport=new ig;case 4:case"end":return zt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"meterToCoord",value:function(r,o){var u=AMap.GeometryUtil.distance(ln(AMap.LngLat,(0,Rn.Z)(r)),ln(AMap.LngLat,(0,Rn.Z)(o))),c=this.lngLatToCoord(r),p=(0,ji.Z)(c,2),g=p[0],y=p[1],S=this.lngLatToCoord(o),P=(0,ji.Z)(S,2),L=P[0],Z=P[1],q=Math.sqrt(Math.pow(g-L,2)+Math.pow(y-Z,2));return q/u}},{key:"updateView",value:function(r){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(r){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],c=r==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return c}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"destroy",value:function(){var r;(r=this.$mapContainer)===null||r===void 0||(r=r.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var o=document.getElementById(ix);o&&document.head.removeChild(o),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(r){var o=r;typeof r=="string"&&(o=document.getElementById(r));var u=document.createElement("div");return u.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,u.id="l7_amap_div"+ZM++,o.appendChild(u),u}}]),e}(),fE=Ia(o0.prototype,"configService",[LM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s0=Ia(o0.prototype,"config",[FM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e_=Ia(o0.prototype,"coordinateSystemService",[BM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=Ia(o0.prototype,"eventEmitter",[NM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o0))||zM);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var Zp=function(e){return e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed",e}(Zp||{}),Kf={key:"",AMap:{version:"2.0",plugins:[]}},yv={AMap:Zp.notload},i5=[],a5=function(n){if(typeof n=="function"){if(yv.AMap===Zp.loaded){n(window.AMap);return}i5.push(n)}},o5=function(){var e=(0,pn.Z)(Jt().mark(function n(r){return Jt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c,p){if(yv.AMap===Zp.failed)p("");else if(yv.AMap===Zp.notload){var g=r.key,y=r.version,S=r.plugins;if(!g){p("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),Kf.key=g,Kf.AMap.version=y||Kf.AMap.version,Kf.AMap.plugins=S||Kf.AMap.plugins,yv.AMap=Zp.loading;var P=document.body||document.head;window._onAPILoaded=function(ce){ce?(yv.AMap=Zp.failed,p(ce)):(yv.AMap=Zp.loaded,c(null))};var L=document.createElement("script");L.type="text/javascript",L.async=!1,L.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+Kf.AMap.version+"&key="+g+"&plugin="+Kf.AMap.plugins.join(","),L.onerror=function(ce){yv.AMap=Zp.failed,p(ce)},P.appendChild(L)}else if(yv.AMap===Zp.loaded){if(r.key&&r.key!==Kf.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Kf.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var Z=[];r.plugins&&r.plugins.forEach(function(ce){Kf.AMap.plugins.indexOf(ce)===-1&&Z.push(ce)}),Z.length&&window.AMap.plugin(Z,function(){c(window.AMap)})}else{if(r.key&&r.key!==Kf.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Kf.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var q=[];r.plugins&&r.plugins.forEach(function(ce){Kf.AMap.plugins.indexOf(ce)===-1&&q.push(ce)}),a5(function(){q.length&&window.AMap.plugin(q,function(){c(window.AMap)})})}}));case 1:case"end":return u.stop()}},n)}));return function(r){return e.apply(this,arguments)}}();function q4(){delete window.AMap,Kf={key:"",AMap:{version:"1.4.15",plugins:[]}},yv={AMap:Zp.notload}}var ip={load:o5,reset:q4},t_=Math.PI/180,dE=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"projectionMatrix",ks()),(0,Ve.Z)(this,"viewMatrix",ks()),(0,Ve.Z)(this,"viewProjectionMatrix",ks()),(0,Ve.Z)(this,"ViewProjectionMatrixUncentered",ks()),(0,Ve.Z)(this,"viewUncenteredMatrix",ks())}return(0,ct.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.pitch,p=c===void 0?0:c,g=r.bearing,y=g===void 0?0:g,S=r.center,P=S===void 0?[0,0]:S,L=r.offsetOrigin,Z=L===void 0?[0,0]:L,q=r.cameraHeight,ce=q===void 0?1:q,me=r.aspect,be=me===void 0?1:me,$e=r.near,ft=$e===void 0?.1:$e,mt=r.far,zt=mt===void 0?1e3:mt,ar=r.fov,nr=ar===void 0?0:ar;this.zoom=u,this.center=P;var Yt=p*t_,Cr=(360-y)*t_;zr(this.projectionMatrix,nr,be,ft,zt);var Nr=ja.fromValues(ce*Math.sin(Yt)*Math.sin(Cr),-ce*Math.sin(Yt)*Math.cos(Cr),ce*Math.cos(Yt)),nn=ja.fromValues(-Math.cos(Yt)*Math.sin(Cr),Math.cos(Yt)*Math.cos(Cr),Math.sin(Yt));Ln(this.viewMatrix,Nr,ja.fromValues(0,0,0),nn),this.viewUncenteredMatrix=Gh(this.viewMatrix),sc(this.viewMatrix,this.viewMatrix,ja.fromValues(-Z[0],Z[1],0)),Vu(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vu(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var r=(0,ji.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,P=.5,L=-.5/Math.PI;return p=.5,g=c*(S*g+P)-215440491,y=-(c*(L*y+p)-106744817),[g,y]}}]),e}(),vE=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],HM,WM;function s5(e){var n=u5();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function u5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}window.forceWebGL=!0;var gE="15cd8a57710d40c9b7c0e3cc120f1200",l5="1.4.15",mE=!1,ox=[],c5=12,f5=(HM=(0,kt.b2)(),HM(WM=function(e){(0,gr.Z)(r,e);var n=s5(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"version","GAODE1.x"),(0,Ve.Z)((0,Mr.Z)(o),"handleCameraChanged",function(g){var y=g.camera,S=y.fov,P=y.near,L=y.far,Z=y.height,q=y.pitch,ce=y.rotation,me=y.aspect,be=y.position,$e=o.getCenter(),ft=$e.lng,mt=$e.lat;if(o.emit("mapchange"),o.cameraChangedCallback){o.viewport.syncWithMapCamera({aspect:me,bearing:360-ce,far:L,fov:S,cameraHeight:Z,near:P,pitch:q,zoom:o.map.getZoom()-1,center:[ft,mt],offsetOrigin:[be.x,be.y]});var zt=o.config.offsetZoom,ar=zt===void 0?c5:zt;o.viewport.getZoom()>ar?o.coordinateSystemService.setCoordinateSystem(Pu.P20_OFFSET):o.coordinateSystemService.setCoordinateSystem(Pu.P20),o.cameraChangedCallback(o.viewport)}}),o}return(0,ct.Z)(r,[{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.viewport.projectFlat(u),S=ks();return sc(S,S,ja.fromValues(y[0],y[1],c)),Ec(S,S,ja.fromValues(g[0],g[1],g[2])),Xa(S,S,p[0]),of(S,S,p[1]),Op(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt;return Jt().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return g=this.config,y=g.id,S=g.style,P=S===void 0?"light":S,L=g.minZoom,Z=L===void 0?0:L,q=g.maxZoom,ce=q===void 0?18:q,me=g.token,be=me===void 0?gE:me,$e=g.mapInstance,ft=g.plugin,mt=ft===void 0?[]:ft,zt=(0,Vc.Z)(g,vE),nr.next=3,new Promise(function(Yt){var Cr=function(){if($e)p.map=$e,p.$mapContainer=p.map.getContainer(),setTimeout(function(){p.map.on("camerachange",p.handleCameraChanged),Yt()},30);else{p.$mapContainer=p.creatMapContainer(y);var nn=(0,ae.Z)({mapStyle:p.getMapStyleValue(P),zooms:[Z,ce],viewMode:"3D"},zt);nn.zoom&&(nn.zoom+=1);var an=new AMap.Map(p.$mapContainer,nn);an.on("camerachange",p.handleCameraChanged),an.on("camerachange",function(){setTimeout(function(){return p.handleAfterMapChange()})}),p.map=an,setTimeout(function(){Yt()},10)}};!mE&&!$e?(be===gE&&console.warn(p.configService.getSceneWarninfo("MapToken")),mE=!0,mt.push("Map3D"),ip.load({key:be,version:l5,plugins:mt}).then(function(Nr){Cr(),ox.length&&(ox.forEach(function(nn){return nn()}),ox=[])}).catch(function(Nr){throw new Error(Nr)})):mE&&window.AMap||$e?Cr():ox.push(Cr)});case 3:this.viewport=new dE;case 4:case"end":return nr.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"meterToCoord",value:function(u,c){var p=AMap.GeometryUtil.distance(ln(AMap.LngLat,(0,Rn.Z)(u)),ln(AMap.LngLat,(0,Rn.Z)(c))),g=this.lngLatToCoord(u),y=(0,ji.Z)(g,2),S=y[0],P=y[1],L=this.lngLatToCoord(c),Z=(0,ji.Z)(L,2),q=Z[0],ce=Z[1],me=Math.sqrt(Math.pow(S-q,2)+Math.pow(P-ce,2));return me/p}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(u){var c,p=(c=this.getContainer())===null||c===void 0?void 0:c.getElementsByClassName("amap-layer")[0],g=u==="jpg"?p==null?void 0:p.toDataURL("image/jpeg"):p==null?void 0:p.toDataURL("image/png");return g}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}}]),r}(jM))||WM);function h5(e){var n=p5();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function p5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var d5=function(e){(0,gr.Z)(r,e);var n=h5(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getServiceConstructor",value:function(){return f5}}]),r}(Q1),K4=function(){function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"projectionMatrix",ks()),(0,Ve.Z)(this,"viewMatrix",ks()),(0,Ve.Z)(this,"viewProjectionMatrix",ks()),(0,Ve.Z)(this,"ViewProjectionMatrixUncentered",ks()),(0,Ve.Z)(this,"viewUncenteredMatrix",ks())}return(0,ct.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.center,p=c===void 0?[0,0]:c,g=r.offsetOrigin,y=g===void 0?[0,0]:g,S=r.cameraPosition,P=S===void 0?[0,0,0]:S,L=r.up,Z=L===void 0?[0,1,0]:L,q=r.lookAt,ce=q===void 0?[0,0,0]:q,me=r.aspect,be=me===void 0?1:me,$e=r.near,ft=$e===void 0?.1:$e,mt=r.far,zt=mt===void 0?1e3:mt,ar=r.fov,nr=ar===void 0?45:ar;this.zoom=u,this.center=p,zr(this.projectionMatrix,nr/180*Math.PI,be,ft,zt);var Yt=ja.fromValues.apply(ja,(0,Rn.Z)(P)),Cr=ja.fromValues.apply(ja,(0,Rn.Z)(ce)),Nr=ja.fromValues.apply(ja,(0,Rn.Z)(Z));Ln(this.viewMatrix,Yt,Cr,Nr),this.viewUncenteredMatrix=Gh(this.viewMatrix),sc(this.viewMatrix,this.viewMatrix,ja.fromValues(-y[0],y[1],0)),Vu(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vu(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var r=(0,ji.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,P=.5,L=-.5/Math.PI;return p=.5,g=c*(S*g+P)-215440491,y=-(c*(L*y+p)-106744817),[g,y]}}]),e}(),yE=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],GM,$M;function v5(e){var n=g5();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function g5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _E(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}_E(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var c0=[108.92361,34.54083];window.forceWebGL=!0;var r_="f59bcf249433f8b05caaee19f349b3d7",XM="2.0",Q4=!1,m5=null,y5=(GM=(0,kt.b2)(),GM($M=function(e){(0,gr.Z)(r,e);var n=v5(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"version","GAODE2.x"),(0,Ve.Z)((0,Mr.Z)(o),"handleViewChanged",function(g){var y=o.map.customCoords.getCameraParams(),S=y.fov,P=y.near,L=y.far,Z=y.aspect,q=y.position,ce=y.lookAt,me=y.up;o.emit("mapchange");var be=o.map.customCoords.getCenter();o.cameraChangedCallback&&(o.viewport.syncWithMapCamera({aspect:Z,far:L,fov:S,cameraPosition:q,lookAt:ce,up:me,near:P,zoom:o.map.getZoom()-1,center:be,offsetOrigin:[q[0],q[1]]}),o.coordinateSystemService.setCoordinateSystem(Pu.P20_2),o.cameraChangedCallback(o.viewport))}),o}return(0,ct.Z)(r,[{key:"setCustomCoordCenter",value:function(u){this.sceneCenter=u,this.sceneCenterMercator=Dc.apply(void 0,(0,Rn.Z)(u))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMercator}},{key:"lngLatToCoordByLayer",value:function(u,c){var p=c||this.sceneCenterMercator,g=this._sub(Dc(u[0],u[1]),p);return u[2]&&g.push(u[2]),g}},{key:"coordToAMap2RelativeCoordinates",value:function(u,c){var p=this,g=Dc(c[0],c[1]);return typeof u[0]=="number"?this.lngLatToCoordByLayer(u,g):u.map(function(y){return Array.isArray(y)&&typeof y[0]=="number"?p.lngLatToCoordByLayer(y,g):y.map(function(S){return p.lngLatToCoordByLayer(S,g)})})}},{key:"setCoordCenter",value:function(u){this.map.customCoords.setCenter(u||c0),this.setCustomCoordCenter(u||c0)}},{key:"lngLatToCoord",value:function(u){return this.sceneCenter||(this.map.customCoords.setCenter(u),this.setCustomCoordCenter(u)),this._sub(Dc(u[0],u[1]),this.sceneCenterMercator)}},{key:"lngLatToCoords",value:function(u){var c=this;return u.map(function(p){return typeof p[0]=="number"?c.lngLatToCoord(p):p.map(function(g){return c.lngLatToCoord(g)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var u=this.map.getContainer();if(u!==null){var c=u.getElementsByClassName("amap-maps")[0];c.style.zIndex="auto",this.markerContainer=$s("div","l7-marker-container2",c)}}}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var u=this.map.getBounds(),c=u.getNorthEast(),p=u.getSouthWest(),g=this.getCenter(),y=g.lng>c.getLng()||g.lng<p.getLng()?180-c.getLng():c.getLng(),S=g.lng<p.getLng()?p.getLng()-180:p.getLng();return[[S,p.getLat()],[y,c.getLat()]]}},{key:"getMinZoom",value:function(){var u=this.map.getZooms();return u[0]-1}},{key:"getMaxZoom",value:function(){var u=this.map.getZooms();return u[1]-1}},{key:"lngLatToContainer",value:function(u){var c=this.map.lngLatToContainer(u);return{x:c.getX(),y:c.getY()}}},{key:"lngLatToPixel",value:function(u){var c=this.map.lngLatToPixel(new AMap.LngLat(u[0],u[1]));return{x:c.getX(),y:c.getY()}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.map.customCoords.lngLatToCoord(u),S=ks();return sc(S,S,ja.fromValues(y[0],y[1],c)),Ec(S,S,ja.fromValues(g[0],g[1],g[2])),Xa(S,S,p[0]),of(S,S,p[1]),Op(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar,nr,Yt,Cr,Nr,nn,an;return Jt().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:if(p=this.config,g=p.id,y=p.style,S=y===void 0?"light":y,P=p.minZoom,L=P===void 0?0:P,Z=p.maxZoom,q=Z===void 0?24:Z,ce=p.token,me=ce===void 0?r_:ce,be=p.mapInstance,$e=p.plugin,ft=$e===void 0?[]:$e,mt=p.version,zt=mt===void 0?XM:mt,ar=(0,Vc.Z)(p,yE),this.viewport=new K4,window.AMap||be){jn.next=6;break}return ft.push("Map3D"),jn.next=6,J1().load({key:me,version:XM,plugins:ft});case 6:be?(this.map=be,this.$mapContainer=this.map.getContainer(),Yt=this.map.getCenter(),(nr=this.map.customCoords)===null||nr===void 0||nr.setCenter([Yt.lng,Yt.lat]),this.setCustomCoordCenter([Yt.lng,Yt.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(g),Nr=(0,ae.Z)({mapStyle:this.getMapStyleValue(S),zooms:[L,q],viewMode:"3D"},ar),Nr.zoom&&(Nr.zoom+=1),me===r_&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;")),nn=new AMap.Map(this.$mapContainer,Nr),this.map=nn,an=nn.getCenter(),(Cr=this.map.customCoords)===null||Cr===void 0||Cr.setCenter([an.lng,an.lat]),this.setCustomCoordCenter([an.lng,an.lat]),nn.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return jn.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}},{key:"initViewPort",value:function(){var u,c=((u=this.map.customCoords)===null||u===void 0?void 0:u.getCameraParams())||{},p=c.fov,g=c.near,y=c.far,S=c.aspect,P=c.position,L=c.lookAt,Z=c.up;this.emit("mapchange");var q=this.map.customCoords.getCenter(),ce=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:S,far:y,fov:p,cameraPosition:P,lookAt:L,near:g,up:Z,zoom:ce-1,center:q,offsetOrigin:[P[0],P[1]]}),this.coordinateSystemService.setCoordinateSystem(Pu.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(u,c){var p=[0,0];return p[0]=u[0]-c[0],p[1]=u[1]-c[1],p}}]),r}(jM))||$M);function _5(e){var n=x5();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function x5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YM=function(e){(0,gr.Z)(r,e);var n=_5(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getServiceConstructor",value:function(){return y5}}]),r}(Q1),b5=k(99874),S5=k.n(b5);function E5(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=qM(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function qM(e,n){if(e){if(typeof e=="string")return KM(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KM(e,n)}}function KM(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var sx;function xE(e,n,r){var o=r-n,u=((e-n)%o+o)%o+n;return u===n?r:u}function Tc(e,n,r){return Math.min(r,Math.max(n,e))}function ap(e,n,r){return e*(1-r)+n*r}function bE(e,n,r,o){var u=new(S5())(e,n,r,o);return function(c){return u.solve(c)}}var ux=bE(.25,.1,.25,1);function QM(){var e;return sx==null&&typeof window!="undefined"&&window.matchMedia&&(sx=window.matchMedia("(prefers-reduced-motion: reduce)")),(e=sx)===null||e===void 0?void 0:e.matches}function w5(e,n){var r={},o=E5(n),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;c in e&&(r[c]=e[c])}}catch(p){o.e(p)}finally{o.f()}return r}var ag=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),C5=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,T5=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function JM(e){var n=C5(e);return{cancel:function(){return T5(n)}}}function A5(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var u=0,c=r;u<c.length;u++){var p=c[u];for(var g in p)p[g]!==void 0&&(e[g]=p[g])}return e}var eR=63710088e-1,ku=function(){function e(n,r){if((0,It.Z)(this,e),isNaN(n)||isNaN(r))throw new Error("Invalid LngLat object: (".concat(n,", ").concat(r,")"));if(this.lng=+n,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,ct.Z)(e,[{key:"wrap",value:function(){return new e(xE(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(r){var o=Math.PI/180,u=this.lat*o,c=r.lat*o,p=Math.sin(u)*Math.sin(c)+Math.cos(u)*Math.cos(c)*Math.cos((r.lng-this.lng)*o),g=eR*Math.acos(Math.min(p,1));return g}}],[{key:"convert",value:function(r){if(r instanceof e)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new e(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&(0,vs.Z)(r)==="object"&&r!==null){var o="lng"in r?r.lng:r.lon;return new e(Number(o),Number(r.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),lx=function(){function e(n,r){(0,It.Z)(this,e),n&&(r?this.setSouthWest(n).setNorthEast(r):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}return(0,ct.Z)(e,[{key:"setNorthEast",value:function(r){return this.ne=r instanceof ku?new ku(r.lng,r.lat):ku.convert(r),this}},{key:"setSouthWest",value:function(r){return this.sw=r instanceof ku?new ku(r.lng,r.lat):ku.convert(r),this}},{key:"extend",value:function(r){var o=this.sw,u=this.ne,c,p;if(r instanceof ku)c=r,p=r;else if(r instanceof e){if(c=r.sw,p=r.ne,!c||!p)return this}else{if(Array.isArray(r))if(r.length===4||r.every(Array.isArray)){var g=r;return this.extend(e.convert(g))}else{var y=r;return this.extend(ku.convert(y))}return this}return!o&&!u?(this.sw=new ku(c.lng,c.lat),this.ne=new ku(p.lng,p.lat)):(o.lng=Math.min(c.lng,o.lng),o.lat=Math.min(c.lat,o.lat),u.lng=Math.max(p.lng,u.lng),u.lat=Math.max(p.lat,u.lat)),this}},{key:"getCenter",value:function(){return new ku((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new ku(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new ku(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(r){var o=ku.convert(r),u=o.lng,c=o.lat,p=this.sw.lat<=c&&c<=this.ne.lat,g=this.sw.lng<=u&&u<=this.ne.lng;return this.sw.lng>this.ne.lng&&(g=this.sw.lng>=u&&u>=this.ne.lng),p&&g}}],[{key:"convert",value:function(r){return r instanceof e?r:new e(r)}}]),e}(),is=function(){function e(n,r){(0,It.Z)(this,e),this.x=n,this.y=r}return(0,ct.Z)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"_add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"add",value:function(r){return this.clone()._add(r)}},{key:"_sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"sub",value:function(r){return this.clone()._sub(r)}},{key:"_multByPoint",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multByPoint",value:function(r){return this.clone()._multByPoint(r)}},{key:"_divByPoint",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divByPoint",value:function(r){return this.clone()._divByPoint(r)}},{key:"_mult",value:function(r){return this.x*=r,this.y*=r,this}},{key:"mult",value:function(r){return this.clone()._mult(r)}},{key:"_div",value:function(r){return this.x/=r,this.y/=r,this}},{key:"div",value:function(r){return this.clone()._div(r)}},{key:"_rotate",value:function(r){var o=Math.cos(r),u=Math.sin(r),c=o*this.x-u*this.y,p=u*this.x+o*this.y;return this.x=c,this.y=p,this}},{key:"rotate",value:function(r){return this.clone()._rotate(r)}},{key:"_rotateAround",value:function(r,o){var u=Math.cos(r),c=Math.sin(r),p=o.x+u*(this.x-o.x)-c*(this.y-o.y),g=o.y+c*(this.x-o.x)+u*(this.y-o.y);return this.x=p,this.y=g,this}},{key:"roateAround",value:function(r,o){return this.clone()._rotateAround(r,o)}},{key:"_matMult",value:function(r){var o=r[0]*this.x+r[1]*this.y,u=r[2]*this.x+r[3]*this.y;return this.x=o,this.y=u,this}},{key:"matMult",value:function(r){return this.clone()._matMult(r)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var r=this.y;return this.y=this.x,this.x=-r,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(r){return this.x===r.x&&this.y===r.y}},{key:"dist",value:function(r){return Math.sqrt(this.distSqr(r))}},{key:"distSqr",value:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(r){return Math.atan2(this.y-r.y,this.x-r.x)}},{key:"angleWith",value:function(r){return this.angleWithSep(r.x,r.y)}},{key:"angleWithSep",value:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)}}],[{key:"convert",value:function(r){return r instanceof e?r:Array.isArray(r)?new e(r[0],r[1]):r}}]),e}();function M5(){var e=new Qo.WT(4);return Qo.WT!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function J4(e){var n=new glMatrix.ARRAY_TYPE(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function e6(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function A8(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function M8(e,n,r,o){var u=new glMatrix.ARRAY_TYPE(4);return u[0]=e,u[1]=n,u[2]=r,u[3]=o,u}function R8(e,n,r,o,u){return e[0]=n,e[1]=r,e[2]=o,e[3]=u,e}function I8(e,n){if(e===n){var r=n[1];e[1]=n[2],e[2]=r}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e}function a(e,n){var r=n[0],o=n[1],u=n[2],c=n[3],p=r*c-u*o;return p?(p=1/p,e[0]=c*p,e[1]=-o*p,e[2]=-u*p,e[3]=r*p,e):null}function i(e,n){var r=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=r,e}function t(e){return e[0]*e[3]-e[2]*e[1]}function s(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3],g=r[0],y=r[1],S=r[2],P=r[3];return e[0]=o*g+c*y,e[1]=u*g+p*y,e[2]=o*S+c*P,e[3]=u*S+p*P,e}function l(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3],g=Math.sin(r),y=Math.cos(r);return e[0]=o*y+c*g,e[1]=u*y+p*g,e[2]=o*-g+c*y,e[3]=u*-g+p*y,e}function f(e,n,r){var o=n[0],u=n[1],c=n[2],p=n[3],g=r[0],y=r[1];return e[0]=o*g,e[1]=u*g,e[2]=c*y,e[3]=p*y,e}function d(e,n){var r=Math.sin(n),o=Math.cos(n);return e[0]=o,e[1]=r,e[2]=-r,e[3]=o,e}function m(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e}function x(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function T(e){return Math.hypot(e[0],e[1],e[2],e[3])}function O(e,n,r,o){return e[2]=o[2]/o[0],r[0]=o[0],r[1]=o[1],r[3]=o[3]-e[2]*r[1],[e,n,r]}function D(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e}function B(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e}function U(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}function J(e,n){var r=e[0],o=e[1],u=e[2],c=e[3],p=n[0],g=n[1],y=n[2],S=n[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}function pe(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}function Ee(e,n,r,o){return e[0]=n[0]+r[0]*o,e[1]=n[1]+r[1]*o,e[2]=n[2]+r[2]*o,e[3]=n[3]+r[3]*o,e}var Ce=null,st=null,gt=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,It.Z)(this,e),isNaN(n)||n<0||isNaN(r)||r<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=r,this.left=o,this.right=u}return(0,ct.Z)(e,[{key:"interpolate",value:function(r,o,u){return o.top!=null&&r.top!=null&&(this.top=ap(r.top,o.top,u)),o.bottom!=null&&r.bottom!=null&&(this.bottom=ap(r.bottom,o.bottom,u)),o.left!=null&&r.left!=null&&(this.left=ap(r.left,o.left,u)),o.right!=null&&r.right!=null&&(this.right=ap(r.right,o.right,u)),this}},{key:"getCenter",value:function(r,o){var u=Tc((this.left+r-this.right)/2,0,r),c=Tc((this.top+o-this.bottom)/2,0,o);return new is(u,c)}},{key:"equals",value:function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),bt=2*Math.PI*eR;function Ft(e){return bt*Math.cos(e*Math.PI/180)}function xr(e){return(180+e)/360}function Fr(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $r(e,n){return e/Ft(n)}function yn(e){return e*360-180}function cn(e){var n=180-e*360;return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}function Bn(e,n){return e*Ft(cn(n))}function hi(e){return 1/Math.cos(e*Math.PI/180)}var Hi=function(){function e(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,It.Z)(this,e),this.x=+n,this.y=+r,this.z=+o}return(0,ct.Z)(e,[{key:"toLngLat",value:function(){return new ku(yn(this.x),cn(this.y))}},{key:"toAltitude",value:function(){return Bn(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/bt*hi(cn(this.y))}}],[{key:"fromLngLat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=ku.convert(r);return new e(xr(u.lng),Fr(u.lat),$r(o,u.lat))}}]),e}();function aa(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Qa(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Qa(e,n){if(e){if(typeof e=="string")return Hn(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hn(e,n)}}function Hn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var Fi=8192,na=function(){function e(n,r,o,u,c){(0,It.Z)(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=c===void 0?!0:c,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=o==null?0:o,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new ku(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new gt,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,ct.Z)(e,[{key:"minZoom",get:function(){return this._minZoom},set:function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}},{key:"minPitch",get:function(){return this._minPitch},set:function(r){this._minPitch!==r&&(this._minPitch=r,this._pitch=Math.max(this._pitch,r))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(r){this._maxPitch!==r&&(this._maxPitch=r,this._pitch=Math.min(this._pitch,r))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new is(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(r){var o=-xE(r,-180,180)*Math.PI/180;this.angle!==o&&(this.unmodified=!1,this.angle=o,this.calcMatrices(),this.rotationMatrix=M5(),l(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(r){var o=Tc(r,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==o&&(this.unmodified=!1,this._pitch=o,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this.unmodified=!1,this._fov=r/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(r){var o=Math.min(Math.max(r,this._minZoom),this._maxZoom);this._zoom!==o&&(this.unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this.unmodified=!1,this._center=r,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(r){this.edgeInsets.equals(r)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,r,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var r=new e(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r.center=this._center,r.zoom=this.zoom,r.angle=this.angle,r.fov=this._fov,r.pitch=this._pitch,r.unmodified=this.unmodified,r.edgeInsets=this.edgeInsets.clone(),r.calcMatrices(),r}},{key:"isPaddingEqual",value:function(r){return this.edgeInsets.equals(r)}},{key:"interpolatePadding",value:function(r,o,u){this.unmodified=!1,this.edgeInsets.interpolate(r,o,u),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)}},{key:"resize",value:function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(r){return Math.pow(2,r)}},{key:"scaleZoom",value:function(r){return Math.log(r)/Math.LN2}},{key:"project",value:function(r){var o=Tc(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new is(xr(r.lng)*this.worldSize,Fr(o)*this.worldSize)}},{key:"unproject",value:function(r){return new Hi(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(r,o){var u=this.pointCoordinate(o),c=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),g=new Hi(p.x-(u.x-c.x),p.y-(u.y-c.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(r){var o=0,u=new Float64Array([r.x,r.y,0,1]),c=new Float64Array([r.x,r.y,1,1]);xh(u,u,this.pixelMatrixInverse),xh(c,c,this.pixelMatrixInverse);var p=u[3],g=c[3],y=u[0]/p,S=c[0]/g,P=u[1]/p,L=c[1]/g,Z=u[2]/p,q=c[2]/g,ce=Z===q?0:(o-Z)/(q-Z);return new Hi(ap(y,S,ce)/this.worldSize,ap(P,L,ce)/this.worldSize)}},{key:"getBounds",value:function(){return new lx().extend(this.pointLocation(new is(0,0))).extend(this.pointLocation(new is(this.width,0))).extend(this.pointLocation(new is(this.width,this.height))).extend(this.pointLocation(new is(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new lx([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new is(0,0)),o=new Float32Array([r.x*this.worldSize,r.y*this.worldSize,0,1]),u=xh(o,o,this.pixelMatrix);return u[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var r=this._pitch,o=Math.tan(r)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new is(0,o))}},{key:"getCameraQueryGeometry",value:function(r){var o=this.getCameraPoint();if(r.length===1)return[r[0],o];var u=o.x,c=o.y,p=o.x,g=o.y,y=aa(r),S;try{for(y.s();!(S=y.n()).done;){var P=S.value;u=Math.min(u,P.x),c=Math.min(c,P.y),p=Math.max(p,P.x),g=Math.max(g,P.y)}}catch(L){y.e(L)}finally{y.f()}return[new is(u,c),new is(p,c),new is(p,g),new is(u,g),new is(u,c)]}},{key:"coordinatePoint",value:function(r){var o=Qd(r.x*this.worldSize,r.y*this.worldSize,0,1);return xh(o,o,this.pixelMatrix),new is(o[0]/o[3],o[1]/o[3])}},{key:"locationPoint",value:function(r){return this.coordinatePoint(this.locationCoordinate(r))}},{key:"pointLocation",value:function(r){return this.coordinateLocation(this.pointCoordinate(r))}},{key:"locationCoordinate",value:function(r){return Hi.fromLngLat(r)}},{key:"coordinateLocation",value:function(r){return r.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var r=-90,o=90,u=-180,c=180,p,g,y,S,P=this.size,L=this.unmodified;if(this.latRange){var Z=this.latRange;r=Fr(Z[1])*this.worldSize,o=Fr(Z[0])*this.worldSize,p=o-r<P.y?P.y/(o-r):0}if(this.lngRange){var q=this.lngRange;u=xr(q[0])*this.worldSize,c=xr(q[1])*this.worldSize,g=c-u<P.x?P.x/(c-u):0}var ce=this.point,me=Math.max(g||0,p||0);if(me){this.center=this.unproject(new is(g?(c+u)/2:ce.x,p?(o+r)/2:ce.y)),this.zoom+=this.scaleZoom(me),this.unmodified=L,this.constraining=!1;return}if(this.latRange){var be=ce.y,$e=P.y/2;be-$e<r&&(S=r+$e),be+$e>o&&(S=o-$e)}if(this.lngRange){var ft=ce.x,mt=P.x/2;ft-mt<u&&(y=u+mt),ft+mt>c&&(y=c-mt)}(y!==void 0||S!==void 0)&&(this.center=this.unproject(new is(y!==void 0?y:ce.x,S!==void 0?S:ce.y))),this.unmodified=L,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var r=this._fov/2,o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(r)*this.height;var u=Math.PI/2+this._pitch,c=this._fov*(.5+o.y/this.height),p=Math.sin(c)*this.cameraToCenterDistance/Math.sin(Tc(Math.PI-u-c,.01,Math.PI-.01)),g=this.point,y=g.x,S=g.y,P=Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance,L=P*1.01,Z=this.height/50,q=new Float64Array(16);zr(q,this._fov,this.width/this.height,Z,L),q[8]=-o.x*2/this.width,q[9]=o.y*2/this.height,Ec(q,q,[1,-1,1]),sc(q,q,[0,0,-this.cameraToCenterDistance]),Xa(q,q,this._pitch),Op(q,q,this.angle),sc(q,q,[-y,-S,0]),this.mercatorMatrix=Ec([],q,[this.worldSize,this.worldSize,this.worldSize]),Ec(q,q,[1,1,$r(1,this.center.lat)*this.worldSize,1]),this.projMatrix=q,this.invProjMatrix=af([],this.projMatrix);var ce=this.width%2/2,me=this.height%2/2,be=Math.cos(this.angle),$e=Math.sin(this.angle),ft=y-Math.round(y)+be*ce+$e*me,mt=S-Math.round(S)+be*me+$e*ce,zt=new Float64Array(q);if(sc(zt,zt,[ft>.5?ft-1:ft,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=zt,q=ks(),Ec(q,q,[this.width/2,-this.height/2,1]),sc(q,q,[1,-1,0]),this.labelPlaneMatrix=q,q=ks(),Ec(q,q,[1,-1,1]),sc(q,q,[-1,-1,0]),Ec(q,q,[2/this.width,2/this.height,1]),this.glCoordMatrix=q,this.pixelMatrix=Vu(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),q=af(new Float64Array(16),this.pixelMatrix),!q)throw new Error("failed to invert matrix");this.pixelMatrixInverse=q,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),e}(),zi=Aa.merge,gi=(0,ct.Z)(function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,It.Z)(this,e),zi(this,r),this.type=n});function La(e){var n=So();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function So(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ao=Aa.merge,lo=function(e){(0,gr.Z)(r,e);var n=La(r);function r(o){var u;(0,It.Z)(this,r),u=n.call(this),(0,Ve.Z)((0,Mr.Z)(u),"renderFrameCallback",function(){var P=Math.min((ag()-u.easeStart)/u.easeOptions.duration,1);u.onEaseFrame(u.easeOptions.easing(P)),P<1?u.easeFrameId=u.requestRenderFrame(u.renderFrameCallback):u.stop()}),u.options=o;var c=o.minZoom,p=o.maxZoom,g=o.minPitch,y=o.maxPitch,S=o.renderWorldCopies;return u.moving=!1,u.zooming=!1,u.bearingSnap=o.bearingSnap,u.pitchEnabled=o.pitchEnabled,u.rotateEnabled=o.rotateEnabled,u.transform=new na(c,p,g,y,S),u}return(0,ct.Z)(r,[{key:"requestRenderFrame",value:function(u){return 0}},{key:"cancelRenderFrame",value:function(u){}},{key:"getCenter",value:function(){var u=this.transform.center,c=u.lng,p=u.lat;return new ku(c,p)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(u,c){return this.jumpTo({center:u},c)}},{key:"setPitch",value:function(u,c){return this.jumpTo({pitch:u},c),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(u,c,p){return this.easeTo(ao({center:u},c),p)}},{key:"panBy",value:function(u,c,p){return u=is.convert(u).mult(-1),this.panTo(this.transform.center,A5({offset:u},c||{}),p)}},{key:"zoomOut",value:function(u,c){return this.zoomTo(this.getZoom()-1,u,c),this}},{key:"setBearing",value:function(u,c){return this.jumpTo({bearing:u},c),this}},{key:"setZoom",value:function(u,c){return this.jumpTo({zoom:u},c),this}},{key:"zoomIn",value:function(u,c){return this.zoomTo(this.getZoom()+1,u,c),this}},{key:"zoomTo",value:function(u,c,p){return this.easeTo(ao({zoom:u},c),p)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(u,c){return this.jumpTo({padding:u},c),this}},{key:"rotateTo",value:function(u,c,p){return this.easeTo(ao({bearing:u},c),p)}},{key:"resetNorth",value:function(u,c){return this.rotateTo(0,ao({duration:1e3},u),c),this}},{key:"resetNorthPitch",value:function(u,c){return this.easeTo(ao({bearing:0,pitch:0,duration:1e3},u),c),this}},{key:"fitBounds",value:function(u,c,p){return this.fitInternal(this.cameraForBounds(u,c),c,p)}},{key:"cameraForBounds",value:function(u,c){return u=lx.convert(u),this.cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),0,c)}},{key:"snapToNorth",value:function(u,c){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(u,c):this}},{key:"jumpTo",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;this.stop();var p=this.transform,g=!1,y=!1,S=!1;return u.zoom!==void 0&&p.zoom!==+u.zoom&&(g=!0,p.zoom=+u.zoom),u.center!==void 0&&(p.center=ku.convert(u.center)),u.bearing!==void 0&&p.bearing!==+u.bearing&&(y=!0,p.bearing=+u.bearing),u.pitch!==void 0&&p.pitch!==+u.pitch&&(S=!0,p.pitch=+u.pitch),u.padding!==void 0&&!p.isPaddingEqual(u.padding)&&(p.padding=u.padding),this.emit("movestart",new gi("movestart",c)),this.emit("move",new gi("move",c)),g&&(this.emit("zoomstart",new gi("zoomstart",c)),this.emit("zoom",new gi("zoom",c)),this.emit("zoomend",new gi("zoomend",c))),y&&(this.emit("rotatestart",new gi("rotatestart",c)),this.emit("rotate",new gi("rotate",c)),this.emit("rotateend",new gi("rotateend",c))),S&&(this.emit("pitchstart",new gi("pitchstart",c)),this.emit("pitch",new gi("pitch",c)),this.emit("pitchend",new gi("pitchend",c))),this.emit("moveend",new gi("moveend",c))}},{key:"easeTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;c=ao({offset:[0,0],duration:500,easing:ux},c),(c.animate===!1||!c.essential&&QM())&&(c.duration=0);var g=this.transform,y=this.getZoom(),S=this.getBearing(),P=this.getPitch(),L=this.getPadding(),Z=c.zoom?+c.zoom:y,q=c.bearing?this.normalizeBearing(c.bearing,S):S,ce=c.pitch?+c.pitch:P,me=c.padding?c.padding:g.padding,be=is.convert(c.offset),$e=g.centerPoint.add(be),ft=g.pointLocation($e),mt=ku.convert(c.center||ft);this.normalizeCenter(mt);var zt=g.project(ft),ar=g.project(mt).sub(zt),nr=g.zoomScale(Z-y),Yt,Cr;c.around&&(Yt=ku.convert(c.around),Cr=g.locationPoint(Yt));var Nr={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||Z!==y,this.rotating=this.rotating||S!==q,this.pitching=this.pitching||ce!==P,this.padding=!g.isPaddingEqual(me),this.easeId=c.easeId,this.prepareEase(p,c.noMoveStart,Nr),clearTimeout(this.easeEndTimeoutID),this.ease(function(nn){if(u.zooming&&(g.zoom=ap(y,Z,nn)),u.rotating&&u.rotateEnabled&&(g.bearing=ap(S,q,nn)),u.pitching&&u.pitchEnabled&&(g.pitch=ap(P,ce,nn)),u.padding&&(g.interpolatePadding(L,me,nn),$e=g.centerPoint.add(be)),Yt)g.setLocationAtPoint(Yt,Cr);else{var an=g.zoomScale(g.zoom-y),Nn=Z>y?Math.min(2,nr):Math.max(.5,nr),jn=Math.pow(Nn,1-nn),di=g.unproject(zt.add(ar.mult(nn*jn)).mult(an));g.setLocationAtPoint(g.renderWorldCopies?di.wrap():di,$e)}u.fireMoveEvents(p)},function(nn){u.afterEase(p,nn)},c),this}},{key:"flyTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;if(!c.essential&&QM()){var g=w5(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),c=ao({offset:[0,0],speed:1.2,curve:1.42,easing:ux},c);var y=this.transform,S=this.getZoom(),P=this.getBearing(),L=this.getPitch(),Z=this.getPadding(),q=c.zoom?Tc(+c.zoom,y.minZoom,y.maxZoom):S,ce=c.bearing?this.normalizeBearing(c.bearing,P):P,me=c.pitch?+c.pitch:L,be="padding"in c?c.padding:y.padding,$e=y.zoomScale(q-S),ft=is.convert(c.offset),mt=y.centerPoint.add(ft),zt=y.pointLocation(mt),ar=ku.convert(c.center||zt);this.normalizeCenter(ar);var nr=y.project(zt),Yt=y.project(ar).sub(nr),Cr=c.curve,Nr=Math.max(y.width,y.height),nn=Nr/$e,an=Yt.mag();if("minZoom"in c){var Nn=Tc(Math.min(c.minZoom,S,q),y.minZoom,y.maxZoom),jn=Nr/y.zoomScale(Nn-S);Cr=Math.sqrt(jn/an*2)}var di=Cr*Cr;function Ua(Ml){var up=(nn*nn-Nr*Nr+(Ml?-1:1)*di*di*an*an)/(2*(Ml?nn:Nr)*di*an);return Math.log(Math.sqrt(up*up+1)-up)}function Co(Ml){return(Math.exp(Ml)-Math.exp(-Ml))/2}function os(Ml){return(Math.exp(Ml)+Math.exp(-Ml))/2}function nu(Ml){return Co(Ml)/os(Ml)}var pu=Ua(0),cf=function(up){return os(pu)/os(pu+Cr*up)},XR=function(up){return Nr*((os(pu)*nu(pu+Cr*up)-Co(pu))/di)/an},zx=(Ua(1)-pu)/Cr;if(Math.abs(an)<1e-6||!isFinite(zx)){if(Math.abs(Nr-nn)<1e-6)return this.easeTo(c,p);var wB=nn<Nr?-1:1;zx=Math.abs(Math.log(nn/Nr))/Cr,XR=function(){return 0},cf=function(up){return Math.exp(wB*Cr*up)}}if("duration"in c)c.duration=+c.duration;else{var CB="screenSpeed"in c?+c.screenSpeed/Cr:+c.speed;c.duration=1e3*zx/CB}return c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this.zooming=!0,this.rotating=P!==ce,this.pitching=me!==L,this.padding=!y.isPaddingEqual(be),this.prepareEase(p,!1),this.ease(function(Ml){var up=Ml*zx,YR=1/cf(up);y.zoom=Ml===1?q:S+y.scaleZoom(YR),u.rotating&&(y.bearing=ap(P,ce,Ml)),u.pitching&&(y.pitch=ap(L,me,Ml)),u.padding&&(y.interpolatePadding(Z,be,Ml),mt=y.centerPoint.add(ft));var qR=Ml===1?ar:y.unproject(nr.add(Yt.mult(XR(up))).mult(YR));y.setLocationAtPoint(y.renderWorldCopies?qR.wrap():qR,mt),u.fireMoveEvents(p)},function(){return u.afterEase(p)},c),this}},{key:"fitScreenCoordinates",value:function(u,c,p,g,y){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(is.convert(u)),this.transform.pointLocation(is.convert(c)),p,g),g,y)}},{key:"stop",value:function(u,c){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var p=this.onEaseEnd;delete this.onEaseEnd,p.call(this,c)}return this}},{key:"normalizeBearing",value:function(u,c){u=xE(u,-180,180);var p=Math.abs(u-c);return Math.abs(u-360-c)<p&&(u-=360),Math.abs(u+360-c)<p&&(u+=360),u}},{key:"normalizeCenter",value:function(u){var c=this.transform;if(!(!c.renderWorldCopies||c.lngRange)){var p=u.lng-c.center.lng;u.lng+=p>180?-360:p<-180?360:0}}},{key:"fireMoveEvents",value:function(u){this.emit("move",new gi("move",u)),this.zooming&&this.emit("zoom",new gi("zoom",u)),this.rotating&&this.emit("rotate",new gi("rotate",u)),this.pitching&&this.emit("rotate",new gi("pitch",u))}},{key:"prepareEase",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!c&&!p.moving&&this.emit("movestart",new gi("movestart",u)),this.zooming&&!p.zooming&&this.emit("zoomstart",new gi("zoomstart",u)),this.rotating&&!p.rotating&&this.emit("rotatestart",new gi("rotatestart",u)),this.pitching&&!p.pitching&&this.emit("pitchstart",new gi("pitchstart",u))}},{key:"afterEase",value:function(u,c){if(!(this.easeId&&c&&this.easeId===c)){delete this.easeId;var p=this.zooming,g=this.rotating,y=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,p&&this.emit("zoomend",new gi("zoomend",u)),g&&this.emit("rotateend",new gi("rotateend",u)),y&&this.emit("pitchend",new gi("pitchend",u)),this.emit("moveend",new gi("moveend",u))}}},{key:"ease",value:function(u,c,p){p.animate===!1||p.duration===0?(u(1),c()):(this.easeStart=ag(),this.easeOptions=p,this.onEaseFrame=u,this.onEaseEnd=c,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(u,c,p,g){var y={top:0,bottom:0,right:0,left:0};if(g=ao({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},g),typeof g.padding=="number"){var S=g.padding;g.padding={top:S,bottom:S,right:S,left:S}}g.padding=ao(y,g.padding);var P=this.transform,L=P.padding,Z=P.project(ku.convert(u)),q=P.project(ku.convert(c)),ce=Z.rotate(-p*Math.PI/180),me=q.rotate(-p*Math.PI/180),be=new is(Math.max(ce.x,me.x),Math.max(ce.y,me.y)),$e=new is(Math.min(ce.x,me.x),Math.min(ce.y,me.y)),ft=be.sub($e),mt=(P.width-(L.left+L.right+g.padding.left+g.padding.right))/ft.x,zt=(P.height-(L.top+L.bottom+g.padding.top+g.padding.bottom))/ft.y;if(!(zt<0||mt<0)){var ar=Math.min(P.scaleZoom(P.scale*Math.min(mt,zt)),g.maxZoom),nr=is.convert(g.offset),Yt=(g.padding.left-g.padding.right)/2,Cr=(g.padding.top-g.padding.bottom)/2,Nr=new is(nr.x+Yt,nr.y+Cr),nn=Nr.mult(P.scale/P.zoomScale(ar)),an=P.unproject(Z.add(q).div(2).sub(nn));return{center:an,zoom:ar,bearing:p}}}},{key:"fitInternal",value:function(u,c,p){return u?(c=ao(u,c),delete c.padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}}]),r}(Es.EventEmitter);function Po(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ms(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function ms(e,n){if(e){if(typeof e=="string")return pl(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pl(e,n)}}function pl(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var ys={},Du=ys;ys.create=function(e,n,r){var o=window.document.createElement(e);return n!==void 0&&(o.className=n),r&&r.appendChild(o),o},ys.createNS=function(e,n){var r=window.document.createElementNS(e,n);return r};var Th=window.document&&window.document.documentElement.style;function Rd(e){if(!Th)return e[0];var n=Po(e),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o in Th)return o}}catch(u){n.e(u)}finally{n.f()}return e[0]}var Id=Rd(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),um;ys.disableDrag=function(){Th&&Id&&(um=Th[Id],Th[Id]="none")},ys.enableDrag=function(){Th&&Id&&(Th[Id]=um)};var tR=Rd(["transform","WebkitTransform"]);ys.setTransform=function(e,n){e.style[tR]=n};var cx=!1;try{var fx=Object.defineProperty({},"passive",{get:function(){cx=!0}});window.addEventListener("test",fx,fx),window.removeEventListener("test",fx,fx)}catch(e){cx=!1}ys.addEventListener=function(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&cx?e.addEventListener(n,r,o):e.addEventListener(n,r,o.capture)},ys.removeEventListener=function(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&cx?e.removeEventListener(n,r,o):e.removeEventListener(n,r,o.capture)};var SE=function e(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",e,!0)};ys.suppressClick=function(){window.addEventListener("click",SE,!0),setTimeout(function(){window.removeEventListener("click",SE,!0)},0)},ys.mousePos=function(e,n){var r=e.getBoundingClientRect();return new is(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},ys.touchPos=function(e,n){var r=e.getBoundingClientRect(),o=[],u=Po(n),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;o.push(new is(p.clientX-r.left-e.clientLeft,p.clientY-r.top-e.clientTop))}}catch(g){u.e(g)}finally{u.f()}return o},ys.mouseButton=function(e){return e.button},ys.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};function EE(e){var n=rR();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function rR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var R5=Aa.merge,Vp=function(e){(0,gr.Z)(r,e);var n=EE(r);function r(o,u,c){var p,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,It.Z)(this,r);var y=Du.mousePos(u.getCanvasContainer(),c),S=u.unproject(y);return p=n.call(this,o,R5({point:y,lngLat:S,originalEvent:c},g)),p.defaultPrevented=!1,p.target=u,p}return(0,ct.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(gi);function I5(e){var n=wE();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function wE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var f0=function(e){(0,gr.Z)(r,e);var n=I5(r);function r(o,u,c){var p;(0,It.Z)(this,r);var g=o==="touchend"?c.changedTouches:c.touches,y=Du.touchPos(u.getCanvasContainer(),g),S=y.map(function(Z){return u.unproject(Z)}),P=y.reduce(function(Z,q,ce,me){return Z.add(q.div(me.length))},new is(0,0)),L=u.unproject(P);return p=n.call(this,o,{points:y,point:P,lngLats:S,lngLat:L,originalEvent:c}),p.defaultPrevented=!1,p}return(0,ct.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(gi);function t6(e){var n=O5();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function O5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var og=function(e){(0,gr.Z)(r,e);var n=t6(r);function r(o,u,c){var p;return(0,It.Z)(this,r),p=n.call(this,o,{originalEvent:c}),p.defaultPrevented=!1,p}return(0,ct.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(gi),P5=function(){function e(n){(0,It.Z)(this,e),this.map=n}return(0,ct.Z)(e,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(r){this.map.emit(r.type,new Vp(r.type,this.map,r))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Vp("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(r){this.delayContextMenu?this.contextMenuEvent=r:this.map.emit(r.type,new Vp(r.type,this.map,r)),this.map.listeners("contextmenu")&&r.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),e}(),Od=function(){function e(n,r){(0,It.Z)(this,e),this.map=n,this.el=n.getCanvasContainer(),this.container=n.getContainer(),this.clickTolerance=r.clickTolerance||1}return(0,ct.Z)(e,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(Du.disableDrag(),this.startPos=this.lastPos=o,this.active=!0)}},{key:"mousemoveWindow",value:function(r,o){if(this.active){var u=o;if(!(this.lastPos.equals(u)||!this.box&&u.dist(this.startPos)<this.clickTolerance)){var c=this.startPos;this.lastPos=u,this.box||(this.box=Du.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",r));var p=Math.min(c.x,u.x),g=Math.max(c.x,u.x),y=Math.min(c.y,u.y),S=Math.max(c.y,u.y);Du.setTransform(this.box,"translate(".concat(p,"px,").concat(y,"px)")),this.box&&(this.box.style.width="".concat(g-p,"px"),this.box.style.height="".concat(S-y,"px"))}}}},{key:"mouseupWindow",value:function(r,o){var u=this;if(this.active&&r.button===0){var c=this.startPos,p=o;if(this.reset(),Du.suppressClick(),c.x===p.x&&c.y===p.y)this.fireEvent("boxzoomcancel",r);else return this.map.emit("boxzoomend",new gi("boxzoomend",{originalEvent:r})),{cameraAnimation:function(y){return y.fitScreenCoordinates(c,p,u.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(r){this.active&&r.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",r))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(Du.remove(this.box),this.box=null),Du.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(r,o){return this.map.emit(r,new gi(r,{originalEvent:o}))}}]),e}(),n_=Od,O8=function(){function e(){(0,It.Z)(this,e),this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(r,o){return r.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(r.shiftKey?-1:1),around:c.unproject(o)},{originalEvent:r})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function P8(e){var n=k8();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function k8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var D8=function(e){(0,gr.Z)(r,e);var n=P8(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"type","renderFrame"),o}return(0,ct.Z)(r)}(gi);function L8(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=F8(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function F8(e,n){if(e){if(typeof e=="string")return r6(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r6(e,n)}}function r6(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var hx=Aa.merge,nR={linearity:.3,easing:bE(0,0,.3,1)},B8=hx({deceleration:2500,maxSpeed:1400},nR),N8=hx({deceleration:20,maxSpeed:1400},nR),z8=hx({deceleration:1e3,maxSpeed:360},nR),U8=hx({deceleration:1e3,maxSpeed:90},nR),Z8=function(){function e(n){(0,It.Z)(this,e),this.map=n,this.clear()}return(0,ct.Z)(e,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(r){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:ag(),settings:r})}},{key:"drainInertiaBuffer",value:function(){for(var r=this.inertiaBuffer,o=ag(),u=160;r.length>0&&o-r[0].time>u;)r.shift()}},{key:"onMoveEnd",value:function(r){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var o={zoom:0,bearing:0,pitch:0,pan:new is(0,0),pinchAround:void 0,around:void 0},u=L8(this.inertiaBuffer),c;try{for(u.s();!(c=u.n()).done;){var p=c.value.settings;o.zoom+=p.zoomDelta||0,o.bearing+=p.bearingDelta||0,o.pitch+=p.pitchDelta||0,p.panDelta&&o.pan._add(p.panDelta),p.around&&(o.around=p.around),p.pinchAround&&(o.pinchAround=p.pinchAround)}}catch(me){u.e(me)}finally{u.f()}var g=this.inertiaBuffer[this.inertiaBuffer.length-1],y=g.time-this.inertiaBuffer[0].time,S={};if(o.pan.mag()){var P=aR(o.pan.mag(),y,hx({},B8,r||{}));S.offset=o.pan.mult(P.amount/o.pan.mag()),S.center=this.map.transform.center,iR(S,P)}if(o.zoom){var L=aR(o.zoom,y,N8);S.zoom=this.map.transform.zoom+L.amount,iR(S,L)}if(o.bearing){var Z=aR(o.bearing,y,z8);S.bearing=this.map.transform.bearing+Tc(Z.amount,-179,179),iR(S,Z)}if(o.pitch){var q=aR(o.pitch,y,U8);S.pitch=this.map.transform.pitch+q.amount,iR(S,q)}if(S.zoom||S.bearing){var ce=o.pinchAround===void 0?o.around:o.pinchAround;S.around=ce?this.map.unproject(ce):this.map.getCenter()}return this.clear(),hx(S,{noMoveStart:!0})}}}]),e}();function iR(e,n){(!e.duration||e.duration<n.duration)&&(e.duration=n.duration,e.easing=n.easing)}function aR(e,n,r){var o=r.maxSpeed,u=r.linearity,c=r.deceleration,p=Tc(e*u/(n/1e3),-o,o),g=Math.abs(p)/(c*u);return{easing:r.easing,duration:g*1e3,amount:p*(g/2)}}var V8={panStep:100,bearingStep:15,pitchStep:10},j8=function(){function e(){(0,It.Z)(this,e);var n=V8;this.panStep=n.panStep,this.bearingStep=n.bearingStep,this.pitchStep=n.pitchStep}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(r){var o=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=0,c=0,p=0,g=0,y=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?c=-1:(r.preventDefault(),g=-1);break;case 39:r.shiftKey?c=1:(r.preventDefault(),g=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),y=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),y=1);break;default:return}return{cameraAnimation:function(P){var L=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:H8,zoom:u?Math.round(L)+u*(r.shiftKey?2:1):L,bearing:P.getBearing()+c*o.bearingStep,pitch:P.getPitch()+p*o.pitchStep,offset:[-g*o.panStep,-y*o.panStep],center:P.getCenter()},{originalEvent:r})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function H8(e){return e*(2-e)}var W8=j8,G8=function(){function e(n,r){(0,It.Z)(this,e),this.map=n,this.clickTolerance=r.clickTolerance}return(0,ct.Z)(e,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(r){return this.firePreventable(new og(r.type,this.map,r))}},{key:"mousedown",value:function(r,o){return this.mousedownPos=o,this.firePreventable(new Vp(r.type,this.map,r))}},{key:"mouseup",value:function(r){this.map.emit(r.type,new Vp(r.type,this.map,r))}},{key:"click",value:function(r,o){this.mousedownPos&&this.mousedownPos.dist(o)>=this.clickTolerance||this.map.emit(r.type,new Vp(r.type,this.map,r))}},{key:"dblclick",value:function(r){return this.firePreventable(new Vp(r.type,this.map,r))}},{key:"mouseover",value:function(r){this.map.emit(r.type,new Vp(r.type,this.map,r))}},{key:"mouseout",value:function(r){this.map.emit(r.type,new Vp(r.type,this.map,r))}},{key:"touchstart",value:function(r){return this.firePreventable(new f0(r.type,this.map,r))}},{key:"touchmove",value:function(r){this.map.emit(r.type,new f0(r.type,this.map,r))}},{key:"touchend",value:function(r){this.map.emit(r.type,new f0(r.type,this.map,r))}},{key:"touchcancel",value:function(r){this.map.emit(r.type,new f0(r.type,this.map,r))}},{key:"firePreventable",value:function(r){if(this.map.emit(r.type,r),r.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),e}(),oR,sR=0,k5=2,$8=(oR={},(0,Ve.Z)(oR,sR,1),(0,Ve.Z)(oR,k5,2),oR);function X8(e,n){var r=$8[n];return e.buttons===void 0||(e.buttons&r)!==r}var D5=function(){function e(n){(0,It.Z)(this,e),this.reset(),this.clickTolerance=n.clickTolerance||1}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(r,o){if(!this.lastPoint){var u=Du.mouseButton(r);this.correctButton(r,u)&&(this.lastPoint=o,this.eventButton=u)}}},{key:"mousemoveWindow",value:function(r,o){var u=this.lastPoint;if(u){if(r.preventDefault(),X8(r,this.eventButton)){this.reset();return}if(!(!this.moved&&o.dist(u)<this.clickTolerance))return this.moved=!0,this.lastPoint=o,this.move(u,o)}}},{key:"mouseupWindow",value:function(r){if(this.lastPoint){var o=Du.mouseButton(r);o===this.eventButton&&(this.moved&&Du.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(r,o){return!1}},{key:"move",value:function(r,o){}}]),e}();function Y8(e){var n=q8();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function q8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var K8=function(e){(0,gr.Z)(r,e);var n=Y8(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"mousedown",value:function(u,c){Cf((0,Nt.Z)(r.prototype),"mousedown",this).call(this,u,c),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(u,c){return{around:c,panDelta:c.sub(u)}}},{key:"correctButton",value:function(u,c){return c===sR&&!u.ctrlKey}}]),r}(D5);function Q8(e){var n=J8();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function J8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var e7=function(e){(0,gr.Z)(r,e);var n=Q8(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"correctButton",value:function(u,c){return c===sR&&u.ctrlKey||c===k5}},{key:"move",value:function(u,c){var p=-.5,g=(c.y-u.y)*p;if(g)return this.active=!0,{pitchDelta:g}}},{key:"contextmenu",value:function(u){u.preventDefault()}}]),r}(D5);function t7(e){var n=r7();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function r7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var n7=function(e){(0,gr.Z)(r,e);var n=t7(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"contextmenu",value:function(u){u.preventDefault()}},{key:"correctButton",value:function(u,c){return c===sR&&u.ctrlKey||c===k5}},{key:"move",value:function(u,c){var p=.8,g=(c.x-u.x)*p;if(g)return this.active=!0,{bearingDelta:g}}}]),r}(D5),n6=4.000244140625,i7=1/100,a7=1/450,o7=2,s7=function(){function e(n,r){var o=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"onScrollFrame",function(){if(o.frameId&&(o.frameId=null,!!o.isActive())){var u=o.map.transform;if(o.delta!==0){var c=o.type==="wheel"&&Math.abs(o.delta)>n6?o.wheelZoomRate:o.defaultZoomRate,p=o7/(1+Math.exp(-Math.abs(o.delta*c)));o.delta<0&&p!==0&&(p=1/p);var g=typeof o.targetZoom=="number"?u.zoomScale(o.targetZoom):u.scale;o.targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(g*p))),o.type==="wheel"&&(o.startZoom=u.zoom,o.easing=o.smoothOutEasing(200)),o.delta=0}var y=typeof o.targetZoom=="number"?o.targetZoom:u.zoom,S=o.startZoom,P=o.easing,L=!1,Z;if(o.type==="wheel"&&S&&P){var q=Math.min((ag()-o.lastWheelEventTime)/200,1),ce=P(q);Z=ap(S,y,ce),q<1?o.frameId||(o.frameId=!0):L=!0}else Z=y,L=!0;return o.active=!0,L&&(o.active=!1,o.finishTimeout=setTimeout(function(){o.zooming=!1,o.handler.triggerRenderFrame(),delete o.targetZoom,delete o.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:Z-u.zoom,around:o.aroundPoint,originalEvent:o.lastWheelEvent}}}),this.map=n,this.el=n.getCanvasContainer(),this.handler=r,this.delta=0,this.defaultZoomRate=i7,this.wheelZoomRate=a7}return(0,ct.Z)(e,[{key:"setZoomRate",value:function(r){this.defaultZoomRate=r}},{key:"setWheelZoomRate",value:function(r){this.wheelZoomRate=r}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(r){this.isEnabled()||(this.enabled=!0,this.aroundCenter=r&&r.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(r){if(this.isEnabled()){var o=r.deltaMode===window.WheelEvent.DOM_DELTA_LINE?r.deltaY*40:r.deltaY,u=ag(),c=u-(this.lastWheelEventTime||0);this.lastWheelEventTime=u,o!==0&&o%n6===0?this.type="wheel":o!==0&&Math.abs(o)<4?this.type="trackpad":c>400?(this.type=null,this.lastValue=o,this.timeout=setTimeout(this.onTimeout,40,r)):this.type||(this.type=Math.abs(c*o)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,o+=this.lastValue)),r.shiftKey&&o&&(o=o/4),this.type&&(this.lastWheelEvent=r,this.delta-=o,this.active||this.start(r)),r.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(r){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(r)}},{key:"start",value:function(r){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var o=Du.mousePos(this.el,r);this.around=ku.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(o)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(r){var o=ux;if(this.prevEase){var u=this.prevEase,c=(ag()-u.start)/u.duration,p=u.easing(c+.01)-u.easing(c),g=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.27*.27-g*g);o=bE(g,y,.25,1)}return this.prevEase={start:ag(),duration:r,easing:o},o}}]),e}(),u7=s7,l7=function(){function e(n,r){(0,It.Z)(this,e),this.clickZoom=n,this.tapZoom=r}return(0,ct.Z)(e,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),e}(),c7=function(){function e(n,r,o){(0,It.Z)(this,e),this.el=n,this.mousePan=r,this.touchPan=o}return(0,ct.Z)(e,[{key:"enable",value:function(r){this.inertiaOptions=r||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),e}(),f7=function(){function e(n,r,o){(0,It.Z)(this,e),this.pitchWithRotate=n.pitchWithRotate,this.mouseRotate=r,this.mousePitch=o}return(0,ct.Z)(e,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),e}(),h7=function(){function e(n,r,o,u){(0,It.Z)(this,e),this.el=n,this.touchZoom=r,this.touchRotate=o,this.tapDragZoom=u,this.rotationDisabled=!1,this.enabled=!0}return(0,ct.Z)(e,[{key:"enable",value:function(r){this.touchZoom.enable(r),this.rotationDisabled||this.touchRotate.enable(r),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),e}();function L5(e,n){for(var r={},o=0;o<e.length;o++)r[e[o].identifier]=n[o];return r}function p7(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d7(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function d7(e,n){if(e){if(typeof e=="string")return i6(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i6(e,n)}}function i6(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function v7(e){var n=new is(0,0),r=p7(e),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;n._add(u)}}catch(c){r.e(c)}finally{r.f()}return n.div(e.length)}var a6=500,g7=500,o6=30,m7=function(){function e(n){(0,It.Z)(this,e),this.reset(),this.numTouches=n.numTouches}return(0,ct.Z)(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(r,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=r.timeStamp),u.length===this.numTouches&&(this.centroid=v7(o),this.touches=L5(u,o)))}},{key:"touchmove",value:function(r,o,u){if(!(this.aborted||!this.centroid)){var c=L5(u,o);for(var p in this.touches)if(this.touches[p]){var g=this.touches[p],y=c[p];(!y||y.dist(g)>o6)&&(this.aborted=!0)}}}},{key:"touchend",value:function(r,o,u){if((!this.centroid||r.timeStamp-this.startTime>g7)&&(this.aborted=!0),u.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}}}]),e}(),F5=function(){function e(n){(0,It.Z)(this,e),this.singleTap=new m7(n),this.numTaps=n.numTaps,this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(r,o,u){this.singleTap.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.singleTap.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this.singleTap.touchend(r,o,u);if(c){var p=r.timeStamp-this.lastTime<a6,g=!this.lastTap||this.lastTap.dist(c)<o6;if((!p||!g)&&this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}}}]),e}(),y7=function(){function e(){(0,It.Z)(this,e),this.tap=new F5({numTouches:1,numTaps:1}),this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(r,o,u){this.swipePoint||(this.tapTime&&r.timeStamp-this.tapTime>a6&&this.reset(),this.tapTime?u.length>0&&(this.swipePoint=o[0],this.swipeTouch=u[0].identifier):this.tap.touchstart(r,o,u))}},{key:"touchmove",value:function(r,o,u){if(!this.tapTime)this.tap.touchmove(r,o,u);else if(this.swipePoint){if(u[0].identifier!==this.swipeTouch)return;var c=o[0],p=c.y-this.swipePoint.y;return this.swipePoint=c,r.preventDefault(),this.active=!0,{zoomDelta:p/128}}}},{key:"touchend",value:function(r,o,u){if(this.tapTime)this.swipePoint&&u.length===0&&this.reset();else{var c=this.tap.touchend(r,o,u);c&&(this.tapTime=r.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),_7=function(){function e(){(0,It.Z)(this,e),this.zoomIn=new F5({numTouches:1,numTaps:2}),this.zoomOut=new F5({numTouches:2,numTaps:1}),this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(r,o,u){this.zoomIn.touchstart(r,o,u),this.zoomOut.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.zoomIn.touchmove(r,o,u),this.zoomOut.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this,p=this.zoomIn.touchend(r,o,u),g=this.zoomOut.touchend(r,o,u);if(p)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(p)},{originalEvent:r})}};if(g)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(g)},{originalEvent:r})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),x7=function(){function e(n){(0,It.Z)(this,e),this.minTouches=1,this.clickTolerance=n.clickTolerance||1,this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new is(0,0)}},{key:"touchstart",value:function(r,o,u){return this.calculateTransform(r,o,u)}},{key:"touchmove",value:function(r,o,u){if(this.active)return r.preventDefault(),this.calculateTransform(r,o,u)}},{key:"touchend",value:function(r,o,u){this.calculateTransform(r,o,u),this.active&&u.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(r,o,u){u.length>0&&(this.active=!0);var c=L5(u,o),p=new is(0,0),g=new is(0,0),y=0;for(var S in c)if(c[S]){var P=c[S],L=this.touches[S];L&&(p._add(P),g._add(P.sub(L)),y++,c[S]=P)}if(this.touches=c,!(y<this.minTouches||!g.mag())){var Z=g.div(y);if(this.sum._add(Z),!(this.sum.mag()<this.clickTolerance)){var q=p.div(y);return{around:q,panDelta:Z}}}}}]),e}(),B5=function(){function e(){(0,It.Z)(this,e),this.reset()}return(0,ct.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(r){}},{key:"move",value:function(r,o,u){}},{key:"touchstart",value:function(r,o,u){this.firstTwoTouches||u.length<2||(this.firstTwoTouches=[u[0].identifier,u[1].identifier],this.start([o[0],o[1]]))}},{key:"touchmove",value:function(r,o,u){if(this.firstTwoTouches){r.preventDefault();var c=(0,ji.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=uR(u,o,p),S=uR(u,o,g);if(!(!y||!S)){var P=this.aroundCenter?null:y.add(S).div(2);return this.move([y,S],P,r)}}}},{key:"touchend",value:function(r,o,u){if(this.firstTwoTouches){var c=(0,ji.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=uR(u,o,p),S=uR(u,o,g);y&&S||(this.active&&Du.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(r){this.enabled=!0,this.aroundCenter=!!r&&r.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function uR(e,n,r){for(var o=0;o<e.length;o++)if(e[o].identifier===r)return n[o]}function b7(e){var n=S7();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function S7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function N5(e){return Math.abs(e.y)>Math.abs(e.x)}var E7=100,w7=function(e){(0,gr.Z)(r,e);var n=b7(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"reset",value:function(){Cf((0,Nt.Z)(r.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(u){this.lastPoints=u,N5(u[0].sub(u[1]))&&(this.valid=!1)}},{key:"move",value:function(u,c,p){var g=u[0].sub(this.lastPoints[0]),y=u[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(g,y,p.timeStamp),!!this.valid){this.lastPoints=u,this.active=!0;var S=(g.y+y.y)/2,P=-.5;return{pitchDelta:S*P}}}},{key:"gestureBeginsVertically",value:function(u,c,p){if(this.valid!==void 0)return this.valid;var g=2,y=u.mag()>=g,S=c.mag()>=g;if(!(!y&&!S)){if(!y||!S)return this.firstMove===void 0&&(this.firstMove=p),p-this.firstMove<E7?void 0:!1;var P=u.y>0==c.y>0;return N5(u)&&N5(c)&&P}}}]),r}(B5);function C7(e){var n=T7();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function T7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var A7=25;function s6(e,n){return e.angleWith(n)*180/Math.PI}var M7=function(e){(0,gr.Z)(r,e);var n=C7(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"reset",value:function(){Cf((0,Nt.Z)(r.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(u){this.startVector=this.vector=u[0].sub(u[1]),this.minDiameter=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.vector;if(this.vector=u[0].sub(u[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:s6(this.vector,p),pinchAround:c}}},{key:"isBelowThreshold",value:function(u){this.minDiameter=Math.min(this.minDiameter,u.mag());var c=Math.PI*this.minDiameter,p=A7/c*360,g=s6(u,this.startVector);return Math.abs(g)<p}}]),r}(B5);function R7(e){var n=I7();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function I7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var O7=.1;function u6(e,n){return Math.log(e/n)/Math.LN2}var P7=function(e){(0,gr.Z)(r,e);var n=R7(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"reset",value:function(){Cf((0,Nt.Z)(r.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(u){this.startDistance=this.distance=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.distance;if(this.distance=u[0].dist(u[1]),!(!this.active&&Math.abs(u6(this.distance,this.startDistance))<O7))return this.active=!0,{zoomDelta:u6(this.distance,p),pinchAround:c}}}]),r}(B5);function i_(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=k7(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function k7(e,n){if(e){if(typeof e=="string")return l6(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l6(e,n)}}function l6(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var z5=Aa.merge,lR=function(n){return n.zoom||n.drag||n.pitch||n.rotate};function U5(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var D7=function(){function e(n,r){var o=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"handleWindowEvent",function(L){o.handleEvent(L,"".concat(L.type,"Window"))}),(0,Ve.Z)(this,"handleEvent",function(L,Z){if(L.type==="blur"){o.stop();return}o.updatingCamera=!0;var q=L.type==="renderFrame"?void 0:L,ce={needsRenderFrame:!1},me={},be={},$e=L.touches?o.getMapTouches(L.touches):void 0,ft=$e?Du.touchPos(o.el,$e):Du.mousePos(o.el,L),mt=i_(o.handlers),zt;try{for(mt.s();!(zt=mt.n()).done;){var ar=zt.value,nr=ar.handlerName,Yt=ar.handler,Cr=ar.allowed;if(Yt.isEnabled()){var Nr=void 0;if(o.blockedByActive(be,Cr,nr))Yt.reset();else{var nn=Z||L.type;Yt&&Yt[nn]&&(Nr=Yt[nn](L,ft,$e),o.mergeIHandlerResult(ce,me,Nr,nr,q),Nr&&Nr.needsRenderFrame&&o.triggerRenderFrame())}(Nr||Yt.isActive())&&(be[nr]=Yt)}}}catch(di){mt.e(di)}finally{mt.f()}var an={};for(var Nn in o.previousActiveHandlers)be[Nn]||(an[Nn]=q);o.previousActiveHandlers=be,(Object.keys(an).length||U5(ce))&&(o.changes.push([ce,me,an]),o.triggerRenderFrame()),(Object.keys(be).length||U5(ce))&&o.map.stop(!0),o.updatingCamera=!1;var jn=ce.cameraAnimation;jn&&(o.inertia.clear(),o.fireEvents({},{}),o.changes=[],jn(o.map))}),this.map=n,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Z8(n),this.bearingSnap=r.bearingSnap,this.rotateEnabled=r.rotateEnabled,this.pitchEnabled=r.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(r);var u=this.el;this.listeners=[],this.listeners=[[u,"touchstart",{passive:!1}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];var c=i_(this.listeners),p;try{for(c.s();!(p=c.n()).done;){var g=(0,ji.Z)(p.value,3),y=g[0],S=g[1],P=g[2];Du.addEventListener(y,S,y===window.document?this.handleWindowEvent:this.handleEvent,P)}}catch(L){c.e(L)}finally{c.f()}}return(0,ct.Z)(e,[{key:"destroy",value:function(){var r=i_(this.listeners),o;try{for(r.s();!(o=r.n()).done;){var u=(0,ji.Z)(o.value,3),c=u[0],p=u[1],g=u[2];Du.removeEventListener(c,p,c===window.document?this.handleWindowEvent:this.handleEvent,g)}}catch(y){r.e(y)}finally{r.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var r=i_(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;u.reset()}}catch(c){r.e(c)}finally{r.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var r=i_(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;if(u.isActive())return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!lR(this.eventsInProgress)||this.isZooming()}},{key:"mergeIHandlerResult",value:function(r,o,u,c,p){if(u){z5(r,u);var g={handlerName:c,originalEvent:u.originalEvent||p};u.zoomDelta!==void 0&&(o.zoom=g),u.panDelta!==void 0&&(o.drag=g),u.pitchDelta!==void 0&&(o.pitch=g),u.bearingDelta!==void 0&&(o.rotate=g)}}},{key:"triggerRenderFrame",value:function(){var r=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(o){delete r.frameId,r.handleEvent(new D8("renderFrame",{timeStamp:o})),r.applyChanges()}))}},{key:"addDefaultHandlers",value:function(r){var o=this.map,u=o.getCanvasContainer();this.add("mapEvent",new G8(o,r));var c=o.boxZoom=new n_(o,r);this.add("boxZoom",c);var p=new _7,g=new O8;o.doubleClickZoom=new l7(g,p),this.add("tapZoom",p),this.add("clickZoom",g);var y=new y7;this.add("tapDragZoom",y);var S=o.touchPitch=new w7;this.add("touchPitch",S);var P=new e7(r),L=new n7(r);o.dragRotate=new f7(r,P,L),this.add("mouseRotate",P,["mousePitch"]),this.add("mousePitch",L,["mouseRotate"]);var Z=new K8(r),q=new x7(r);o.dragPan=new c7(u,Z,q),this.add("mousePan",Z),this.add("touchPan",q,["touchZoom","touchRotate"]);var ce=new M7,me=new P7;o.touchZoomRotate=new h7(u,me,ce,y),this.add("touchRotate",ce,["touchPan","touchZoom"]),this.add("touchZoom",me,["touchPan","touchRotate"]);var be=o.scrollZoom=new u7(o,this);this.add("scrollZoom",be,["mousePan"]);var $e=o.keyboard=new W8;this.add("keyboard",$e),this.add("blockableMapEvent",new P5(o));for(var ft=0,mt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ft<mt.length;ft++){var zt=mt[ft];r.interactive&&r[zt]&&o[zt].enable(r[zt])}}},{key:"add",value:function(r,o,u){this.handlers.push({handlerName:r,handler:o,allowed:u}),this.handlersById[r]=o}},{key:"blockedByActive",value:function(r,o,u){for(var c in r)if(c!==u&&(!o||o.indexOf(c)<0))return!0;return!1}},{key:"getMapTouches",value:function(r){var o=[],u=i_(r),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,g=p.target;this.el.contains(g)&&o.push(p)}}catch(y){u.e(y)}finally{u.f()}return o}},{key:"applyChanges",value:function(){var r={},o={},u={},c=i_(this.changes),p;try{for(c.s();!(p=c.n()).done;){var g=(0,ji.Z)(p.value,3),y=g[0],S=g[1],P=g[2];y.panDelta&&(r.panDelta=(r.panDelta||new is(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),z5(o,S),z5(u,P)}}catch(L){c.e(L)}finally{c.f()}this.updateMapTransform(r,o,u),this.changes=[]}},{key:"updateMapTransform",value:function(r,o,u){var c=this.map,p=c.transform;if(!U5(r))return this.fireEvents(o,u);var g=r.panDelta,y=r.zoomDelta,S=r.bearingDelta,P=r.pitchDelta,L=r.pinchAround,Z=r.around;L!==void 0&&(Z=L),c.stop(!0),Z=Z||c.transform.centerPoint;var q=p.pointLocation(g?Z.sub(g):Z);S&&this.rotateEnabled&&(p.bearing+=S),P&&this.pitchEnabled&&(p.pitch+=P),y&&(p.zoom+=y),p.setLocationAtPoint(q,Z),this.map.update(),r.noInertia||this.inertia.record(r),this.fireEvents(o,u)}},{key:"fireEvents",value:function(r,o){var u=this,c=lR(this.eventsInProgress),p=lR(r),g={};for(var y in r)if(r[y]){var S=r[y].originalEvent;this.eventsInProgress[y]||(g["".concat(y,"start")]=S),this.eventsInProgress[y]=r[y]}!c&&p&&this.fireEvent("movestart",p.originalEvent);for(var P in g)g[P]&&this.fireEvent(P,g[P]);r.rotate&&(this.bearingChanged=!0),p&&this.fireEvent("move",p.originalEvent);for(var L in r)if(r[L]){var Z=r[L].originalEvent;this.fireEvent(L,Z)}var q={},ce;for(var me in this.eventsInProgress)if(this.eventsInProgress[me]){var be=this.eventsInProgress[me],$e=be.handlerName,ft=be.originalEvent;this.handlersById[$e].isActive()||(delete this.eventsInProgress[me],ce=o[$e]||ft,q["".concat(me,"end")]=ce)}for(var mt in q)q[mt]&&this.fireEvent(mt,q[mt]);var zt=lR(this.eventsInProgress);if((c||p)&&!zt){this.updatingCamera=!0;var ar=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),nr=function(Cr){return Cr!==0&&-u.bearingSnap<Cr&&Cr<u.bearingSnap};ar?(nr(ar.bearing||this.map.getBearing())&&(ar.bearing=0),this.map.easeTo(ar,{originalEvent:ce})):(this.map.emit("moveend",new gi("moveend",{originalEvent:ce})),nr(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(r,o){this.map.emit(r,new gi(r,o?{originalEvent:o}:{}))}}]),e}(),L7=D7,cR=null,CE=[],F7=30,Z5=1e3/F7,px=window.performance,dx={create:"create",load:"load",fullLoad:"fullLoad"},c6={mark:function(n){px.mark(n)},frame:function(n){var r=n;if(cR!=null){var o=r-cR;CE.push(o)}cR=r},clearMetrics:function(){cR=null,CE=[],px.clearMeasures("loadTime"),px.clearMeasures("fullLoadTime");for(var n in dx)px.clearMarks(dx[n])},getPerformanceMetrics:function(){var n=px.measure("loadTime",dx.create,dx.load).duration,r=px.measure("fullLoadTime",dx.create,dx.fullLoad).duration,o=CE.length,u=CE.reduce(function(y,S){return y+S},0)/o/1e3,c=1/u,p=CE.filter(function(y){return y>Z5}).reduce(function(y,S){return y+(S-Z5)/Z5},0),g=p/(o+p)*100;return{loadTime:n,fullLoadTime:r,fps:c,percentDroppedFrames:g}}};function f6(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=B7(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function B7(e,n){if(e){if(typeof e=="string")return h6(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h6(e,n)}}function h6(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var N7=function(){function e(){(0,It.Z)(this,e),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,ct.Z)(e,[{key:"add",value:function(r){var o=++this.id,u=this.queue;return u.push({callback:r,id:o,cancelled:!1}),o}},{key:"remove",value:function(r){var o=this.currentlyRunning,u=o?this.queue.concat(o):this.queue,c=f6(u),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;if(g.id===r){g.cancelled=!0;return}}}catch(y){c.e(y)}finally{c.f()}}},{key:"run",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=this.currentlyRunning=this.queue;this.queue=[];var u=f6(o),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;if(!p.cancelled&&(p.callback(r),this.cleared))break}}catch(g){u.e(g)}finally{u.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),e}(),z7=N7;function QH(e){var n=U7();return function(){var o=_getPrototypeOf(e),u;if(n){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function U7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Z7(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}Z7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var V7=-2,j7=22,JH=Aa.merge,H7=0,W7=60,eW={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:V7,maxZoom:j7,minPitch:H7,maxPitch:W7,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},tW=null,G7=Aa.throttle,$7=function(){function e(n){var r=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"onHashChange",function(){var o=r.getCurrentHash();if(o.length>=3&&!o.some(function(c){return isNaN(+c)})){var u=r.map.dragRotate.isEnabled()&&r.map.touchZoomRotate.isEnabled()?+(o[3]||0):r.map.getBearing();return r.map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1}),(0,Ve.Z)(this,"getCurrentHash",function(){var o=window.location.hash.replace("#","");if(r.hashName){var u;return o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===r.hashName&&(u=c)}),(u&&u[1]||"").split("/")}return o.split("/")}),(0,Ve.Z)(this,"updateHashUnthrottled",function(){var o=r.getHashString();try{window.history.replaceState(window.history.state,"",o)}catch(u){}}),this.hashName=n&&encodeURIComponent(n),this.updateHash=G7(this.updateHashUnthrottled,30*1e3/100)}return(0,ct.Z)(e,[{key:"addTo",value:function(r){return this.map=r,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(r){var o=this.map.getCenter(),u=Math.round(this.map.getZoom()*100)/100,c=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,c),g=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,S=this.map.getBearing(),P=this.map.getPitch(),L="";if(r?L+="/".concat(g,"/").concat(y,"/").concat(u):L+="".concat(u,"/").concat(y,"/").concat(g),(S||P)&&(L+="/".concat(Math.round(S*10)/10)),P&&(L+="/".concat(Math.round(P))),this.hashName){var Z=this.hashName,q=!1,ce=window.location.hash.slice(1).split("&").map(function(me){var be=me.split("=")[0];return be===Z?(q=!0,"".concat(be,"=").concat(L)):me}).filter(function(me){return me});return q||ce.push("".concat(Z,"=").concat(L)),"#".concat(ce.join("&"))}return"#".concat(L)}}]),e}(),X7=$7;function Y7(e){var n=q7();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function q7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function K7(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}K7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`),function(){if(typeof window.CustomEvent=="function")return!1;function e(n,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(n,r.bubbles,r.cancelable,r.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();var fR=-2,p6=22,d6=Aa.merge,vx=0,hR=60,Q7={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:fR,maxZoom:p6,minPitch:vx,maxPitch:hR,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},J7=function(e){(0,gr.Z)(r,e);var n=Y7(r);function r(o){var u;(0,It.Z)(this,r),u=n.call(this,d6({},Q7,o)),(0,Ve.Z)((0,Mr.Z)(u),"renderTaskQueue",new z7),(0,Ve.Z)((0,Mr.Z)(u),"trackResize",!0),(0,Ve.Z)((0,Mr.Z)(u),"onWindowOnline",function(){u.update()}),(0,Ve.Z)((0,Mr.Z)(u),"onWindowResize",function(p){u.trackResize&&u.resize({originalEvent:p}).update()}),u.initContainer(),u.resize(),u.handlers=new L7((0,Mr.Z)(u),u.options),typeof window!="undefined"&&(window.addEventListener("online",u.onWindowOnline,!1),window.addEventListener("resize",u.onWindowResize,!1),window.addEventListener("orientationchange",u.onWindowResize,!1));var c=typeof o.hash=="string"&&o.hash||void 0;return o.hash&&(u.hash=new X7(c).addTo((0,Mr.Z)(u))),(!u.hash||!u.hash.onHashChange())&&(u.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(u.resize(),u.fitBounds(o.bounds,d6({},o.fitBoundsOptions,{duration:0})))),u}return(0,ct.Z)(r,[{key:"resize",value:function(u){var c=this.containerDimensions(),p=(0,ji.Z)(c,2),g=p[0],y=p[1];this.transform.resize(g,y);var S=!this.moving;return S&&(this.stop(),this.emit("movestart",new window.CustomEvent("movestart",u)),this.emit("move",new window.CustomEvent("move",u))),this.emit("resize",new window.CustomEvent("resize",u)),S&&this.emit("moveend",new window.CustomEvent("moveend",u)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(u){return this.transform.locationPoint(ku.convert(u))}},{key:"unproject",value:function(u){return this.transform.pointLocation(is.convert(u))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(u){this.transform.setMaxBounds(lx.convert(u))}},{key:"setStyle",value:function(u){}},{key:"setMinZoom",value:function(u){if(u=u==null?fR:u,u>=fR&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between ".concat(fR," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(u){if(u=u==null?p6:u,u>=this.transform.minZoom)return this.transform.maxZoom=u,this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(u){if(u=u==null?vx:u,u<vx)throw new Error("minPitch must be greater than or equal to ".concat(vx));if(u>=vx&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between ".concat(vx," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(u){if(u=u==null?hR:u,u>hR)throw new Error("maxPitch must be less than or equal to ".concat(hR));if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(u){this.transform.renderWorldCopies=!!u}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear(),this.handlers.destroy(),typeof window!="undefined"&&(window.removeEventListener("online",this.onWindowOnline,!1),window.removeEventListener("resize",this.onWindowResize,!1),window.removeEventListener("orientationchange",this.onWindowResize,!1))}},{key:"requestRenderFrame",value:function(u){return this.update(),this.renderTaskQueue.add(u)}},{key:"cancelRenderFrame",value:function(u){return this.renderTaskQueue.remove(u)}},{key:"triggerRepaint",value:function(){var u=this;this.frame||(this.frame=JM(function(c){c6.frame(c),u.frame=null,u.update(c)}))}},{key:"update",value:function(u){var c=this;this.frame||(this.frame=JM(function(p){c6.frame(p),c.frame=null,c.renderTaskQueue.run(u)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var u=this.container;u.classList.add("l7-map");var c=this.canvasContainer=$s("div","l7-canvas-container",u);this.options.interactive&&c.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var u=0,c=0;return this.container&&(u=this.container.clientWidth,c=this.container.clientHeight,u=u===0?400:u,c=c===0?300:c),[u,c]}}]),r}(lo),ez={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},v6,g6,m6,y6,_6,x6,gx,b6,S6,E6,w6,C6={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},tz=12,T6=(v6=(0,kt.b2)(),g6=(0,kt.f3)(Qt.MapConfig),m6=(0,kt.f3)(Qt.IGlobalConfigService),y6=(0,kt.f3)(Qt.ICoordinateSystemService),_6=(0,kt.f3)(Qt.IEventEmitter),v6(x6=(gx=function(){function e(){var n=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"version","DEFAUlTMAP"),(0,Ve.Z)(this,"simpleMapCoord",new PM),(0,Ve.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Ba(this,"config",b6,this),Ba(this,"configService",S6,this),Ba(this,"coordinateSystemService",E6,this),Ba(this,"eventEmitter",w6,this),(0,Ve.Z)(this,"handleCameraChanged",function(r){var o=n.map.getCenter(),u=o.lat,c=o.lng;n.emit("mapchange"),n.viewport.syncWithMapCamera({bearing:n.map.getBearing(),center:[c,u],viewportHeight:n.map.transform.height,pitch:n.map.getPitch(),viewportWidth:n.map.transform.width,zoom:n.map.getZoom(),cameraHeight:0}),n.updateCoordinateSystemService(),n.cameraChangedCallback(n.viewport)})}return(0,ct.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getCanvasContainer();this.markerContainer=$s("div","l7-marker-container",r),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(r,o){Tb.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(C6[r]||r,o)}},{key:"off",value:function(r,o){this.map.off(C6[r]||r,o),this.eventEmitter.off(r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var r=this.map.transform;return[r.width,r.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(r){return this.map.setZoom(r)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(r){this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(r){this.map.setBearing(r)}},{key:"zoomIn",value:function(r,o){this.map.zoomIn(r,o)}},{key:"zoomOut",value:function(r,o){this.map.zoomOut(r,o)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([r,o])}},{key:"fitBounds",value:function(r,o){this.map.fitBounds(r,o)}},{key:"setMaxZoom",value:function(r){this.map.setMaxZoom(r)}},{key:"setMinZoom",value:function(r){this.map.setMinZoom(r)}},{key:"setMapStatus",value:function(r){r.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),r.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),r.dragEnable===!1&&this.map.dragPan.disable(),r.dragEnable===!0&&this.map.dragPan.enable(),r.rotateEnable===!1&&this.map.dragRotate.disable(),r.dragEnable===!0&&this.map.dragRotate.enable(),r.keyboardEnable===!1&&this.map.keyboard.disable(),r.keyboardEnable===!0&&this.map.keyboard.enable(),r.zoomEnable===!1&&this.map.scrollZoom.disable(),r.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(r,o){this.map.flyTo({zoom:r,center:o})}},{key:"setMapStyle",value:function(r){this.map.setStyle(this.getMapStyleValue(r))}},{key:"meterToCoord",value:function(r,o){return 1}},{key:"pixelToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToPixel",value:function(r){return this.map.project(r)}},{key:"containerToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToContainer",value:function(r){return this.map.project(r)}},{key:"getMapStyle",value:function(){try{var r,o=(r=this.map.getStyle().sprite)!==null&&r!==void 0?r:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(o)?o==null?void 0:o.replace(/\/\w+$/,"").replace(/sprites/,"styles"):o}catch(u){return""}}},{key:"getMapStyleConfig",value:function(){return ez}},{key:"getMapStyleValue",value:function(r){var o;return(o=this.getMapStyleConfig()[r])!==null&&o!==void 0?o:r}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(r){var o=this.map.getCanvas(),u=r==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"creatMapContainer",value:function(r){var o=r;return typeof r=="string"&&(o=document.getElementById(r)),o}},{key:"updateView",value:function(r){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:r.bearing,center:r.center,viewportHeight:r.viewportHeight,pitch:r.pitch,viewportWidth:r.viewportWidth,zoom:r.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var r=this.config.offsetCoordinate,o=r===void 0?!0:r;this.viewport.getZoom()>tz&&o?this.coordinateSystemService.setCoordinateSystem(Pu.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Pu.LNGLAT)}}]),e}(),b6=Ia(gx.prototype,"config",[g6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S6=Ia(gx.prototype,"configService",[m6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E6=Ia(gx.prototype,"coordinateSystemService",[y6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w6=Ia(gx.prototype,"eventEmitter",[_6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gx))||x6),rz=["id","style","rotation","mapInstance","version","mapSize","interactive"],A6,M6;function nz(e){var n=iz();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function iz(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var az=(A6=(0,kt.b2)(),A6(M6=function(e){(0,gr.Z)(r,e);var n=nz(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"version",Nu.DEFAULT),o}return(0,ct.Z)(r,[{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=Hi.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,P=S===void 0?0:S,L=p.z,Z=L===void 0?0:L;return{x:y,y:P,z:Z}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=Hi.fromLngLat(u,c),P=S.meterInMercatorCoordinateUnits(),L=ks();return sc(L,L,ja.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),Ec(L,L,ja.fromValues(P*g[0],-P*g[1],P*g[2])),Xa(L,L,p[0]),of(L,L,p[1]),Op(L,L,p[2]),L}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt,zt,ar;return Jt().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,P=g.style,L=P===void 0?"light":P,Z=g.rotation,q=Z===void 0?0:Z,ce=g.mapInstance,me=g.version,be=me===void 0?"DEFAULTMAP":me,$e=g.mapSize,ft=$e===void 0?1e4:$e,mt=g.interactive,zt=mt===void 0?!0:mt,ar=(0,Vc.Z)(g,rz),this.viewport=new ig,this.version=be,this.simpleMapCoord.setSize(ft),be==="SIMPLE"&&ar.center&&(ar.center=this.simpleMapCoord.unproject(ar.center)),ce?(this.map=ce,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new J7((0,ae.Z)({container:this.$mapContainer,style:this.getMapStyleValue(L),bearing:q},ar))),this.map.on("load",function(){p.handleCameraChanged()}),zt&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){p.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return Yt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}}]),r}(T6))||M6);function oz(e){var n=sz();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function sz(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uz=function(e){(0,gr.Z)(r,e);var n=oz(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getServiceConstructor",value:function(){return az}}]),r}(Q1),lz=k(6158),TE=k.n(lz),cz=function(){function e(){(0,It.Z)(this,e)}return(0,ct.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth;this.viewport=new qf({width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),fz=["id","attributionControl","style","token","rotation","mapInstance"],R6,I6;function hz(e){var n=pz();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function pz(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function dz(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}dz(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=TE();var vz=0,O6="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",gz=(R6=(0,kt.b2)(),R6(I6=function(e){(0,gr.Z)(r,e);var n=hz(r);function r(){var o;(0,It.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=n.call.apply(n,[this].concat(c)),(0,Ve.Z)((0,Mr.Z)(o),"version","MAPBOX"),o}return(0,ct.Z)(r,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,P=S===void 0?0:S,L=p.z,Z=L===void 0?0:L;return{x:y,y:P,z:Z}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),P=S.meterInMercatorCoordinateUnits(),L=ks();return sc(L,L,ja.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),Ec(L,L,ja.fromValues(P*g[0],-P*g[1],P*g[2])),Xa(L,L,p[0]),of(L,L,p[1]),Op(L,L,p[2]),L}},{key:"init",value:function(){var o=(0,pn.Z)(Jt().mark(function c(){var p=this,g,y,S,P,L,Z,q,ce,me,be,$e,ft,mt;return Jt().wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,P=g.attributionControl,L=P===void 0?!1:P,Z=g.style,q=Z===void 0?"light":Z,ce=g.token,me=ce===void 0?O6:ce,be=g.rotation,$e=be===void 0?0:be,ft=g.mapInstance,mt=(0,Vc.Z)(g,fz),this.viewport=new cz,!ft&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),me===O6&&q!=="blank"&&!window.mapboxgl.accessToken&&!ft&&console.warn(this.configService.getSceneWarninfo("MapToken")),!ft&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=me),ft?(this.map=ft,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new window.mapboxgl.Map((0,ae.Z)({container:this.$mapContainer,style:this.getMapStyleValue(q),attributionControl:L,bearing:$e},mt))),this.map.on("load",function(){p.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return ar.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"destroy",value:function(){var u;(u=this.$mapContainer)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).emit.apply(c,[u].concat(g))}},{key:"once",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).once.apply(c,[u].concat(g))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(u,c){var p=new(TE()).LngLat(u[0],u[1]),g=new(TE()).LngLat(c[0],c[1]),y=p.distanceTo(g),S=TE().MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]}),P=TE().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),L=S.x,Z=S.y,q=P.x,ce=P.y,me=Math.sqrt(Math.pow(L-q,2)+Math.pow(Z-ce,2))*4194304*2;return me/y}},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}},{key:"creatMapContainer",value:function(u){var c=u;typeof u=="string"&&(c=document.getElementById(u));var p=document.createElement("div");return p.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,p.id="l7_mapbox_div"+vz++,c.appendChild(p),p}}]),r}(T6))||I6);function mz(e){var n=yz();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function yz(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _z(e,n){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(n||(n=document),!!n)){var u=n.head||n.getElementsByTagName("head")[0];if(!u){u=n.createElement("head");var c=n.body||n.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):n.documentElement.appendChild(u)}var p=n.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(n.createTextNode(e)),u.appendChild(p),p}}_z(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var xz=function(e){(0,gr.Z)(r,e);var n=mz(r);function r(){return(0,It.Z)(this,r),n.apply(this,arguments)}return(0,ct.Z)(r,[{key:"getServiceConstructor",value:function(){return gz}}]),r}(Q1),rW=k(31857),bz=k(36556),Sz=k.n(bz),Ez=function(){function e(n,r){(0,It.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor;this.buffer=o,this.attribute={buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,ct.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),lm,AE,h0,Pd,ME,p0,RE,pR,sg,a_,Af,ug,lg,dR,wz=(lm={},(0,Ve.Z)(lm,Ct.POINTS,"points"),(0,Ve.Z)(lm,Ct.LINES,"lines"),(0,Ve.Z)(lm,Ct.LINE_LOOP,"line loop"),(0,Ve.Z)(lm,Ct.LINE_STRIP,"line strip"),(0,Ve.Z)(lm,Ct.TRIANGLES,"triangles"),(0,Ve.Z)(lm,Ct.TRIANGLE_FAN,"triangle fan"),(0,Ve.Z)(lm,Ct.TRIANGLE_STRIP,"triangle strip"),lm),P6=(AE={},(0,Ve.Z)(AE,Ct.STATIC_DRAW,"static"),(0,Ve.Z)(AE,Ct.DYNAMIC_DRAW,"dynamic"),(0,Ve.Z)(AE,Ct.STREAM_DRAW,"stream"),AE),V5=(h0={},(0,Ve.Z)(h0,Ct.BYTE,"int8"),(0,Ve.Z)(h0,Ct.INT,"int32"),(0,Ve.Z)(h0,Ct.UNSIGNED_BYTE,"uint8"),(0,Ve.Z)(h0,Ct.UNSIGNED_SHORT,"uint16"),(0,Ve.Z)(h0,Ct.UNSIGNED_INT,"uint32"),(0,Ve.Z)(h0,Ct.FLOAT,"float"),h0),Cz=(Pd={},(0,Ve.Z)(Pd,Ct.ALPHA,"alpha"),(0,Ve.Z)(Pd,Ct.LUMINANCE,"luminance"),(0,Ve.Z)(Pd,Ct.LUMINANCE_ALPHA,"luminance alpha"),(0,Ve.Z)(Pd,Ct.RGB,"rgb"),(0,Ve.Z)(Pd,Ct.RGBA,"rgba"),(0,Ve.Z)(Pd,Ct.RGBA4,"rgba4"),(0,Ve.Z)(Pd,Ct.RGB5_A1,"rgb5 a1"),(0,Ve.Z)(Pd,Ct.RGB565,"rgb565"),(0,Ve.Z)(Pd,Ct.DEPTH_COMPONENT,"depth"),(0,Ve.Z)(Pd,Ct.DEPTH_STENCIL,"depth stencil"),Pd),Tz=(ME={},(0,Ve.Z)(ME,Ct.DONT_CARE,"dont care"),(0,Ve.Z)(ME,Ct.NICEST,"nice"),(0,Ve.Z)(ME,Ct.FASTEST,"fast"),ME),k6=(p0={},(0,Ve.Z)(p0,Ct.NEAREST,"nearest"),(0,Ve.Z)(p0,Ct.LINEAR,"linear"),(0,Ve.Z)(p0,Ct.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Ve.Z)(p0,Ct.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Ve.Z)(p0,Ct.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Ve.Z)(p0,Ct.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),p0),D6=(RE={},(0,Ve.Z)(RE,Ct.REPEAT,"repeat"),(0,Ve.Z)(RE,Ct.CLAMP_TO_EDGE,"clamp"),(0,Ve.Z)(RE,Ct.MIRRORED_REPEAT,"mirror"),RE),Az=(pR={},(0,Ve.Z)(pR,Ct.NONE,"none"),(0,Ve.Z)(pR,Ct.BROWSER_DEFAULT_WEBGL,"browser"),pR),Mz=(sg={},(0,Ve.Z)(sg,Ct.NEVER,"never"),(0,Ve.Z)(sg,Ct.ALWAYS,"always"),(0,Ve.Z)(sg,Ct.LESS,"less"),(0,Ve.Z)(sg,Ct.LEQUAL,"lequal"),(0,Ve.Z)(sg,Ct.GREATER,"greater"),(0,Ve.Z)(sg,Ct.GEQUAL,"gequal"),(0,Ve.Z)(sg,Ct.EQUAL,"equal"),(0,Ve.Z)(sg,Ct.NOTEQUAL,"notequal"),sg),L6=(a_={},(0,Ve.Z)(a_,Ct.FUNC_ADD,"add"),(0,Ve.Z)(a_,Ct.MIN_EXT,"min"),(0,Ve.Z)(a_,Ct.MAX_EXT,"max"),(0,Ve.Z)(a_,Ct.FUNC_SUBTRACT,"subtract"),(0,Ve.Z)(a_,Ct.FUNC_REVERSE_SUBTRACT,"reverse subtract"),a_),vR=(Af={},(0,Ve.Z)(Af,Ct.ZERO,"zero"),(0,Ve.Z)(Af,Ct.ONE,"one"),(0,Ve.Z)(Af,Ct.SRC_COLOR,"src color"),(0,Ve.Z)(Af,Ct.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Ve.Z)(Af,Ct.SRC_ALPHA,"src alpha"),(0,Ve.Z)(Af,Ct.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Ve.Z)(Af,Ct.DST_COLOR,"dst color"),(0,Ve.Z)(Af,Ct.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Ve.Z)(Af,Ct.DST_ALPHA,"dst alpha"),(0,Ve.Z)(Af,Ct.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Ve.Z)(Af,Ct.CONSTANT_COLOR,"constant color"),(0,Ve.Z)(Af,Ct.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Ve.Z)(Af,Ct.CONSTANT_ALPHA,"constant alpha"),(0,Ve.Z)(Af,Ct.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Ve.Z)(Af,Ct.SRC_ALPHA_SATURATE,"src alpha saturate"),Af),Rz=(ug={},(0,Ve.Z)(ug,Ct.NEVER,"never"),(0,Ve.Z)(ug,Ct.ALWAYS,"always"),(0,Ve.Z)(ug,Ct.LESS,"less"),(0,Ve.Z)(ug,Ct.LEQUAL,"lequal"),(0,Ve.Z)(ug,Ct.GREATER,"greater"),(0,Ve.Z)(ug,Ct.GEQUAL,"gequal"),(0,Ve.Z)(ug,Ct.EQUAL,"equal"),(0,Ve.Z)(ug,Ct.NOTEQUAL,"notequal"),ug),mx=(lg={},(0,Ve.Z)(lg,Ct.ZERO,"zero"),(0,Ve.Z)(lg,Ct.KEEP,"keep"),(0,Ve.Z)(lg,Ct.REPLACE,"replace"),(0,Ve.Z)(lg,Ct.INVERT,"invert"),(0,Ve.Z)(lg,Ct.INCR,"increment"),(0,Ve.Z)(lg,Ct.DECR,"decrement"),(0,Ve.Z)(lg,Ct.INCR_WRAP,"increment wrap"),(0,Ve.Z)(lg,Ct.DECR_WRAP,"decrement wrap"),lg),Iz=(dR={},(0,Ve.Z)(dR,Ct.FRONT,"front"),(0,Ve.Z)(dR,Ct.BACK,"back"),dR),Oz=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type;this.buffer=n.buffer({data:o,usage:P6[u||Ct.STATIC_DRAW],type:V5[c||Ct.UNSIGNED_BYTE]})}return(0,ct.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset;this.buffer.subdata(o,u)}}]),e}(),Pz=function(){function e(n,r){(0,It.Z)(this,e);var o=r.data,u=r.usage,c=r.type,p=r.count;this.elements=n.elements({data:o,usage:P6[u||Ct.STATIC_DRAW],type:V5[c||Ct.UNSIGNED_BYTE],count:p})}return(0,ct.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var o=r.data;this.elements.subdata(o)}},{key:"destroy",value:function(){}}]),e}(),kz=function(){function e(n,r){(0,It.Z)(this,e);var o=r.width,u=r.height,c=r.color,p=r.colors,g={width:o,height:u};Array.isArray(p)&&(g.colors=p.map(function(y){return y.get()})),c&&typeof c!="boolean"&&(g.color=c.get()),this.framebuffer=n.framebuffer(g)}return(0,ct.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.framebuffer.resize(o,u)}}]),e}(),Dz=function(e){return e==null},kd=Dz,Lz={}.toString,Fz=function(e,n){return Lz.call(e)==="[object "+n+"]"},Bz=Fz,Nz=function(e){return Bz(e,"Number")},yx=Nz,zz=function(e,n,r){return e<n?n:e>r?r:e},Uz=zz,Zz=k(90857),F6=Zz,Rr;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Rr||(Rr={}));var as;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool",e[e.RenderBundle=11]="RenderBundle"})(as||(as={}));var wo;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(wo||(wo={}));var IE;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(IE||(IE={}));var op;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(op||(op={}));var Zo;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Zo||(Zo={}));var $c;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})($c||($c={}));var Ah;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Ah||(Ah={}));var Al;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(Al||(Al={}));var Ac;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(Ac||(Ac={}));var Ql;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(Ql||(Ql={}));var ru;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(ru||(ru={}));var _v;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(_v||(_v={}));var o_;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(o_||(o_={}));var B6;(function(e){e.LOADED="loaded"})(B6||(B6={}));var Do;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Do||(Do={}));var Mf;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"})(Mf||(Mf={}));var Xc;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(Xc||(Xc={}));var dl;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(dl||(dl={}));function nW(e,n,r,o){var u=Do.TEXTURE_2D,c=1,p=Mf.SAMPLED;return{dimension:u,format:e,width:n,height:r,depthOrArrayLayers:c,mipLevelCount:o,usage:p}}var vl;(function(e){e[e.Float=0]="Float",e[e.UnfilterableFloat=1]="UnfilterableFloat",e[e.Uint=2]="Uint",e[e.Sint=3]="Sint",e[e.Depth=4]="Depth"})(vl||(vl={}));var cg;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(cg||(cg={}));var _x;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(_x||(_x={}));var gR;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(gR||(gR={}));var Gn;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(Gn||(Gn={}));var Qi;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(Qi||(Qi={}));function iW(e){return e}var Ui;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})(Ui||(Ui={}));function Ta(e,n,r){return e<<16|n<<8|r}var Yr;(function(e){e[e.ALPHA=Ta(Gn.U8,Qi.A,Ui.None)]="ALPHA",e[e.U8_LUMINANCE=Ta(Gn.U8,Qi.A,Ui.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=Ta(Gn.F16,Qi.A,Ui.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=Ta(Gn.F32,Qi.A,Ui.Luminance)]="F32_LUMINANCE",e[e.F16_R=Ta(Gn.F16,Qi.R,Ui.None)]="F16_R",e[e.F16_RG=Ta(Gn.F16,Qi.RG,Ui.None)]="F16_RG",e[e.F16_RGB=Ta(Gn.F16,Qi.RGB,Ui.None)]="F16_RGB",e[e.F16_RGBA=Ta(Gn.F16,Qi.RGBA,Ui.None)]="F16_RGBA",e[e.F32_R=Ta(Gn.F32,Qi.R,Ui.None)]="F32_R",e[e.F32_RG=Ta(Gn.F32,Qi.RG,Ui.None)]="F32_RG",e[e.F32_RGB=Ta(Gn.F32,Qi.RGB,Ui.None)]="F32_RGB",e[e.F32_RGBA=Ta(Gn.F32,Qi.RGBA,Ui.None)]="F32_RGBA",e[e.U8_R=Ta(Gn.U8,Qi.R,Ui.None)]="U8_R",e[e.U8_R_NORM=Ta(Gn.U8,Qi.R,Ui.Normalized)]="U8_R_NORM",e[e.U8_RG=Ta(Gn.U8,Qi.RG,Ui.None)]="U8_RG",e[e.U8_RG_NORM=Ta(Gn.U8,Qi.RG,Ui.Normalized)]="U8_RG_NORM",e[e.U8_RGB=Ta(Gn.U8,Qi.RGB,Ui.None)]="U8_RGB",e[e.U8_RGB_NORM=Ta(Gn.U8,Qi.RGB,Ui.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=Ta(Gn.U8,Qi.RGB,Ui.sRGB|Ui.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=Ta(Gn.U8,Qi.RGBA,Ui.None)]="U8_RGBA",e[e.U8_RGBA_NORM=Ta(Gn.U8,Qi.RGBA,Ui.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=Ta(Gn.U8,Qi.RGBA,Ui.sRGB|Ui.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=Ta(Gn.U16,Qi.R,Ui.None)]="U16_R",e[e.U16_R_NORM=Ta(Gn.U16,Qi.R,Ui.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=Ta(Gn.U16,Qi.RG,Ui.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=Ta(Gn.U16,Qi.RGBA,Ui.Normalized)]="U16_RGBA_NORM",e[e.U16_RGBA=Ta(Gn.U16,Qi.RGBA,Ui.None)]="U16_RGBA",e[e.U16_RGB=Ta(Gn.U16,Qi.RGB,Ui.None)]="U16_RGB",e[e.U16_RG=Ta(Gn.U16,Qi.RG,Ui.None)]="U16_RG",e[e.U32_R=Ta(Gn.U32,Qi.R,Ui.None)]="U32_R",e[e.U32_RG=Ta(Gn.U32,Qi.RG,Ui.None)]="U32_RG",e[e.U32_RGB=Ta(Gn.U32,Qi.RGB,Ui.None)]="U32_RGB",e[e.U32_RGBA=Ta(Gn.U32,Qi.RGBA,Ui.None)]="U32_RGBA",e[e.S8_R=Ta(Gn.S8,Qi.R,Ui.None)]="S8_R",e[e.S8_R_NORM=Ta(Gn.S8,Qi.R,Ui.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=Ta(Gn.S8,Qi.RG,Ui.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=Ta(Gn.S8,Qi.RGB,Ui.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=Ta(Gn.S8,Qi.RGBA,Ui.Normalized)]="S8_RGBA_NORM",e[e.S16_R=Ta(Gn.S16,Qi.R,Ui.None)]="S16_R",e[e.S16_RG=Ta(Gn.S16,Qi.RG,Ui.None)]="S16_RG",e[e.S16_RG_NORM=Ta(Gn.S16,Qi.RG,Ui.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=Ta(Gn.S16,Qi.RGB,Ui.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=Ta(Gn.S16,Qi.RGBA,Ui.None)]="S16_RGBA",e[e.S16_RGBA_NORM=Ta(Gn.S16,Qi.RGBA,Ui.Normalized)]="S16_RGBA_NORM",e[e.S32_R=Ta(Gn.S32,Qi.R,Ui.None)]="S32_R",e[e.S32_RG=Ta(Gn.S32,Qi.RG,Ui.None)]="S32_RG",e[e.S32_RGB=Ta(Gn.S32,Qi.RGB,Ui.None)]="S32_RGB",e[e.S32_RGBA=Ta(Gn.S32,Qi.RGBA,Ui.None)]="S32_RGBA",e[e.U16_RGBA_5551=Ta(Gn.U16_PACKED_5551,Qi.RGBA,Ui.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=Ta(Gn.U16_PACKED_565,Qi.RGB,Ui.Normalized)]="U16_RGB_565",e[e.BC1=Ta(Gn.BC1,Qi.RGBA,Ui.Normalized)]="BC1",e[e.BC1_SRGB=Ta(Gn.BC1,Qi.RGBA,Ui.Normalized|Ui.sRGB)]="BC1_SRGB",e[e.BC2=Ta(Gn.BC2,Qi.RGBA,Ui.Normalized)]="BC2",e[e.BC2_SRGB=Ta(Gn.BC2,Qi.RGBA,Ui.Normalized|Ui.sRGB)]="BC2_SRGB",e[e.BC3=Ta(Gn.BC3,Qi.RGBA,Ui.Normalized)]="BC3",e[e.BC3_SRGB=Ta(Gn.BC3,Qi.RGBA,Ui.Normalized|Ui.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=Ta(Gn.BC4_UNORM,Qi.R,Ui.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=Ta(Gn.BC4_SNORM,Qi.R,Ui.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=Ta(Gn.BC5_UNORM,Qi.RG,Ui.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=Ta(Gn.BC5_SNORM,Qi.RG,Ui.Normalized)]="BC5_SNORM",e[e.D24=Ta(Gn.D24,Qi.R,Ui.Depth)]="D24",e[e.D24_S8=Ta(Gn.D24S8,Qi.RG,Ui.Depth|Ui.Stencil)]="D24_S8",e[e.D32F=Ta(Gn.D32F,Qi.R,Ui.Depth)]="D32F",e[e.D32F_S8=Ta(Gn.D32FS8,Qi.RG,Ui.Depth|Ui.Stencil)]="D32F_S8",e[e.U8_RGB_RT=Ta(Gn.U8,Qi.RGB,Ui.RenderTarget|Ui.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=Ta(Gn.U8,Qi.RGBA,Ui.RenderTarget|Ui.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=Ta(Gn.U8,Qi.RGBA,Ui.RenderTarget|Ui.Normalized|Ui.sRGB)]="U8_RGBA_RT_SRGB"})(Yr||(Yr={}));function mR(e){return e>>>8&255}function fg(e){return e>>>16&255}function xx(e){return e&255}function N6(e){switch(e){case Gn.F32:case Gn.U32:case Gn.S32:return 4;case Gn.U16:case Gn.S16:case Gn.F16:return 2;case Gn.U8:case Gn.S8:return 1;default:throw new Error("whoops")}}function z6(e){return N6(fg(e))}function aW(e){return mR(e)}function Vz(e){var n=N6(fg(e)),r=mR(e);return n*r}function oW(e,n){return e&4294967040|n}function sW(e,n){return e&4294902015|n<<8}function U6(e){var n=xx(e);if(n&Ui.Depth)return vl.Depth;if(n&Ui.Normalized)return vl.Float;var r=fg(e);if(r===Gn.F16||r===Gn.F32)return vl.Float;if(r===Gn.U8||r===Gn.U16||r===Gn.U32)return vl.Uint;if(r===Gn.S8||r===Gn.S16||r===Gn.S32)return vl.Sint;throw new Error("whoops")}function _o(e,n){if(n===void 0&&(n=""),!e)throw new Error("Assert fail: ".concat(n))}function s_(e){if(e!=null)return e;throw new Error("Missing object")}function Z6(e,n){return e.r===n.r&&e.g===n.g&&e.b===n.b&&e.a===n.a}function V6(e,n){e.r=n.r,e.g=n.g,e.b=n.b,e.a=n.a}function j6(e){var n=e.r,r=e.g,o=e.b,u=e.a;return{r:n,g:r,b:o,a:u}}function OE(e,n,r,o){return o===void 0&&(o=1),{r:e,g:n,b:r,a:o}}var yR=OE(0,0,0,0),uW=OE(0,0,0,1),jz=OE(1,1,1,0),lW=OE(1,1,1,1),bx=!0;function cW(e,n){n===void 0&&(n=bx),n&&(e[10]=-e[10],e[14]=-e[14])}function fW(e,n){n===void 0&&(n=bx),n&&(e[10]=-e[10],e[14]=-e[14]+1)}function Hz(e,n){if(n===void 0&&(n=bx),n)switch(e){case wo.LESS:return wo.GREATER;case wo.LEQUAL:return wo.GEQUAL;case wo.GEQUAL:return wo.LEQUAL;case wo.GREATER:return wo.LESS;default:return e}else return e}function hW(e,n){return n===void 0&&(n=bx),n?1-e:e}function pW(e,n){return n===void 0&&(n=bx),n?-e:e}function dW(e,n,r,o){if(o===void 0&&(o=bx),r=Hz(r,o),r===wo.LESS)return e<n;if(r===wo.LEQUAL)return e<=n;if(r===wo.GREATER)return e>n;if(r===wo.GEQUAL)return e>=n;throw new Error("whoops")}function _R(e){return!!(e&&!(e&e-1))}function Sx(e,n){return e!=null?e:n}function Wz(e){return e===void 0?null:e}function vW(e,n,r){e.length=n,e.fill(r)}function xR(e,n){var r=n-1;return e+r&~r}function gW(e,n){return((e+n-1)/n|0)*n}function Gz(e,n,r){for(var o=0,u=e.length;o<u;){var c=o+(u-o>>>1),p=r(n,e[c]);p<0?u=c:o=c+1}return o}function mW(e,n,r){var o=Gz(e,n,r);e.splice(o,0,n)}function yW(e,n,r){return r?e|=n:e&=~n,e}function $z(e,n){for(var r=new Array(e),o=0;o<e;o++)r[o]=n();return r}function Xz(e,n){n===void 0&&(n=1);var r=e.split(`
`);return r.map(function(o,u){return"".concat(Yz(""+(n+u),4," "),"  ").concat(o)}).join(`
`)}function Yz(e,n,r){for(r===void 0&&(r="0");e.length<n;)e="".concat(r).concat(e);return e}function _W(e,n){for(var r=[],o=e;o<e+n;o++)r.push(o);return r}function H6(e,n){e.blendDstFactor=n.blendDstFactor,e.blendSrcFactor=n.blendSrcFactor,e.blendMode=n.blendMode}function bR(e,n){return e===void 0&&(e={}),e.compare=n.compare,e.depthFailOp=n.depthFailOp,e.passOp=n.passOp,e.failOp=n.failOp,e.mask=n.mask,e}function W6(e,n){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),H6(e.rgbBlendState,n.rgbBlendState),H6(e.alphaBlendState,n.alphaBlendState),e.channelWriteMask=n.channelWriteMask,e}function j5(e,n){e.length!==n.length&&(e.length=n.length);for(var r=0;r<n.length;r++)e[r]=W6(e[r],n[r])}function qz(e,n){n.attachmentsState!==void 0&&j5(e.attachmentsState,n.attachmentsState),e.blendConstant&&n.blendConstant&&V6(e.blendConstant,n.blendConstant),e.depthCompare=Sx(n.depthCompare,e.depthCompare),e.depthWrite=Sx(n.depthWrite,e.depthWrite),e.stencilWrite=Sx(n.stencilWrite,e.stencilWrite),e.stencilFront&&n.stencilFront&&bR(e.stencilFront,n.stencilFront),e.stencilBack&&n.stencilBack&&bR(e.stencilBack,n.stencilBack),e.cullMode=Sx(n.cullMode,e.cullMode),e.frontFace=Sx(n.frontFace,e.frontFace),e.polygonOffset=Sx(n.polygonOffset,e.polygonOffset)}function Ex(e){var n=Object.assign({},e);return n.attachmentsState=[],j5(n.attachmentsState,e.attachmentsState),n.blendConstant=n.blendConstant&&j6(n.blendConstant),n.stencilFront=bR(void 0,e.stencilFront),n.stencilBack=bR(void 0,e.stencilBack),n}function Kz(e,n){n.channelWriteMask!==void 0&&(e.channelWriteMask=n.channelWriteMask),n.rgbBlendMode!==void 0&&(e.rgbBlendState.blendMode=n.rgbBlendMode),n.alphaBlendMode!==void 0&&(e.alphaBlendState.blendMode=n.alphaBlendMode),n.rgbBlendSrcFactor!==void 0&&(e.rgbBlendState.blendSrcFactor=n.rgbBlendSrcFactor),n.alphaBlendSrcFactor!==void 0&&(e.alphaBlendState.blendSrcFactor=n.alphaBlendSrcFactor),n.rgbBlendDstFactor!==void 0&&(e.rgbBlendState.blendDstFactor=n.rgbBlendDstFactor),n.alphaBlendDstFactor!==void 0&&(e.alphaBlendState.blendDstFactor=n.alphaBlendDstFactor)}var G6={blendMode:$c.ADD,blendSrcFactor:Zo.ONE,blendDstFactor:Zo.ZERO},u_={attachmentsState:[{channelWriteMask:Xc.ALL,rgbBlendState:G6,alphaBlendState:G6}],blendConstant:j6(yR),depthWrite:!0,depthCompare:wo.LEQUAL,stencilWrite:!1,stencilFront:{compare:wo.ALWAYS,passOp:dl.KEEP,depthFailOp:dl.KEEP,failOp:dl.KEEP},stencilBack:{compare:wo.ALWAYS,passOp:dl.KEEP,depthFailOp:dl.KEEP,failOp:dl.KEEP},cullMode:op.NONE,frontFace:IE.CCW,polygonOffset:!1};function Qz(e,n){e===void 0&&(e=null),n===void 0&&(n=u_);var r=Ex(n);return e!==null&&qz(r,e),r}var xW=Qz({depthCompare:wo.ALWAYS,depthWrite:!1},u_);function bW(e,n){return e.attachmentsState===void 0&&(e.attachmentsState=[],j5(e.attachmentsState,u_.attachmentsState)),Kz(e.attachmentsState[0],n),e}var $6={texture:null,sampler:null,formatKind:vl.Float,dimension:Do.TEXTURE_2D};function d0(e,n,r){if(e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(!r(e[o],n[o]))return!1;return!0}function Cx(e,n){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=n(e[o]);return r}function Jz(e,n){return e.texture===n.texture&&e.binding===n.binding}function X6(e,n){return e.buffer===n.buffer&&e.size===n.size&&e.binding===n.binding&&e.offset===n.offset}function eU(e,n){return e===null?n===null:n===null?!1:e.sampler===n.sampler&&e.texture===n.texture&&e.dimension===n.dimension&&e.formatKind===n.formatKind&&e.comparison===n.comparison}function tU(e,n){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],n.samplerBindings=n.samplerBindings||[],n.uniformBufferBindings=n.uniformBufferBindings||[],n.storageBufferBindings=n.storageBufferBindings||[],n.storageTextureBindings=n.storageTextureBindings||[],!(e.samplerBindings.length!==n.samplerBindings.length||!d0(e.samplerBindings,n.samplerBindings,eU)||!d0(e.uniformBufferBindings,n.uniformBufferBindings,X6)||!d0(e.storageBufferBindings,n.storageBufferBindings,X6)||!d0(e.storageTextureBindings,n.storageTextureBindings,Jz))}function Y6(e,n){return e.blendMode==n.blendMode&&e.blendSrcFactor===n.blendSrcFactor&&e.blendDstFactor===n.blendDstFactor}function rU(e,n){return!(!Y6(e.rgbBlendState,n.rgbBlendState)||!Y6(e.alphaBlendState,n.alphaBlendState)||e.channelWriteMask!==n.channelWriteMask)}function SR(e,n){return e.compare==n.compare&&e.depthFailOp===n.depthFailOp&&e.failOp===n.failOp&&e.passOp===n.passOp&&e.mask===n.mask}function nU(e,n){return!d0(e.attachmentsState,n.attachmentsState,rU)||e.blendConstant&&n.blendConstant&&!Z6(e.blendConstant,n.blendConstant)||e.stencilFront&&n.stencilFront&&!SR(e.stencilFront,n.stencilFront)||e.stencilBack&&n.stencilBack&&!SR(e.stencilBack,n.stencilBack)?!1:e.depthCompare===n.depthCompare&&e.depthWrite===n.depthWrite&&e.stencilWrite===n.stencilWrite&&e.cullMode===n.cullMode&&e.frontFace===n.frontFace&&e.polygonOffset===n.polygonOffset}function q6(e,n){return e.id===n.id}function iU(e,n){return e===n}function aU(e,n){return!(e.topology!==n.topology||e.inputLayout!==n.inputLayout||e.sampleCount!==n.sampleCount||e.megaStateDescriptor&&n.megaStateDescriptor&&!nU(e.megaStateDescriptor,n.megaStateDescriptor)||!q6(e.program,n.program)||!d0(e.colorAttachmentFormats,n.colorAttachmentFormats,iU)||e.depthStencilAttachmentFormat!==n.depthStencilAttachmentFormat)}function oU(e,n){return e.offset===n.offset&&e.shaderLocation===n.shaderLocation&&e.format===n.format&&e.divisor===n.divisor}function sU(e,n){return kd(e)?kd(n):kd(n)?!1:e.arrayStride===n.arrayStride&&e.stepMode===n.stepMode&&d0(e.attributes,n.attributes,oU)}function uU(e,n){return!(e.indexBufferFormat!==n.indexBufferFormat||!d0(e.vertexBufferDescriptors,n.vertexBufferDescriptors,sU)||!q6(e.program,n.program))}function SW(e,n){return e.addressModeU===n.addressModeU&&e.addressModeV===n.addressModeV&&e.minFilter===n.minFilter&&e.magFilter===n.magFilter&&e.mipmapFilter===n.mipmapFilter&&e.lodMinClamp===n.lodMinClamp&&e.lodMaxClamp===n.lodMaxClamp&&e.maxAnisotropy===n.maxAnisotropy&&e.compareFunction===n.compareFunction}function lU(e){var n=e.sampler,r=e.texture,o=e.dimension,u=e.formatKind,c=e.comparison;return{sampler:n,texture:r,dimension:o,formatKind:u,comparison:c}}function K6(e){var n=e.buffer,r=e.size,o=e.binding,u=e.offset;return{binding:o,buffer:n,offset:u,size:r}}function cU(e){var n=e.binding,r=e.texture;return{binding:n,texture:r}}function fU(e){var n=e.samplerBindings&&Cx(e.samplerBindings,lU),r=e.uniformBufferBindings&&Cx(e.uniformBufferBindings,K6),o=e.storageBufferBindings&&Cx(e.storageBufferBindings,K6),u=e.storageTextureBindings&&Cx(e.storageTextureBindings,cU);return{samplerBindings:n,uniformBufferBindings:r,storageBufferBindings:o,storageTextureBindings:u,pipeline:e.pipeline}}function hU(e){var n=e.inputLayout,r=e.program,o=e.topology,u=e.megaStateDescriptor&&Ex(e.megaStateDescriptor),c=e.colorAttachmentFormats.slice(),p=e.depthStencilAttachmentFormat,g=e.sampleCount;return{inputLayout:n,megaStateDescriptor:u,program:r,topology:o,colorAttachmentFormats:c,depthStencilAttachmentFormat:p,sampleCount:g}}function pU(e){var n=e.shaderLocation,r=e.format,o=e.offset,u=e.divisor;return{shaderLocation:n,format:r,offset:o,divisor:u}}function dU(e){if(kd(e))return e;var n=e.arrayStride,r=e.stepMode,o=Cx(e.attributes,pU);return{arrayStride:n,stepMode:r,attributes:o}}function vU(e){var n=Cx(e.vertexBufferDescriptors,dU),r=e.indexBufferFormat,o=e.program;return{vertexBufferDescriptors:n,indexBufferFormat:r,program:o}}var Go,gU=/([^[]*)(\[[0-9]+\])?/;function mU(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var n=e.match(gU);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:n[1],length:Number(n[2])||1,isArray:!!n[2]}}function Mh(){var e=null;return function(n,r,o){var u=e!==o;return u&&(n.uniform1i(r,o),e=o),u}}function gl(e,n,r,o){var u=null,c=null;return function(p,g,y){var S=n(y,r),P=S.length,L=!1;if(u===null)u=new Float32Array(P),c=P,L=!0;else{_o(c===P,"Uniform length cannot change.");for(var Z=0;Z<P;++Z)if(S[Z]!==u[Z]){L=!0;break}}return L&&(o(p,e,g,S),u.set(S)),L}}function Qf(e,n,r,o){e[n](r,o)}function cm(e,n,r,o){e[n](r,!1,o)}var yU={},_U={},xU={},Q6=[0];function H5(e,n,r,o){n===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(Q6[0]=e,e=Q6);var u=e.length;if(e instanceof r)return e;var c=o[u];c||(c=new r(u),o[u]=c);for(var p=0;p<u;p++)c[p]=e[p];return c}function jp(e,n){return H5(e,n,Float32Array,yU)}function v0(e,n){return H5(e,n,Int32Array,_U)}function ER(e,n){return H5(e,n,Uint32Array,xU)}var bU=(Go={},Go[Rr.FLOAT]=gl.bind(null,"uniform1fv",jp,1,Qf),Go[Rr.FLOAT_VEC2]=gl.bind(null,"uniform2fv",jp,2,Qf),Go[Rr.FLOAT_VEC3]=gl.bind(null,"uniform3fv",jp,3,Qf),Go[Rr.FLOAT_VEC4]=gl.bind(null,"uniform4fv",jp,4,Qf),Go[Rr.INT]=gl.bind(null,"uniform1iv",v0,1,Qf),Go[Rr.INT_VEC2]=gl.bind(null,"uniform2iv",v0,2,Qf),Go[Rr.INT_VEC3]=gl.bind(null,"uniform3iv",v0,3,Qf),Go[Rr.INT_VEC4]=gl.bind(null,"uniform4iv",v0,4,Qf),Go[Rr.BOOL]=gl.bind(null,"uniform1iv",v0,1,Qf),Go[Rr.BOOL_VEC2]=gl.bind(null,"uniform2iv",v0,2,Qf),Go[Rr.BOOL_VEC3]=gl.bind(null,"uniform3iv",v0,3,Qf),Go[Rr.BOOL_VEC4]=gl.bind(null,"uniform4iv",v0,4,Qf),Go[Rr.FLOAT_MAT2]=gl.bind(null,"uniformMatrix2fv",jp,4,cm),Go[Rr.FLOAT_MAT3]=gl.bind(null,"uniformMatrix3fv",jp,9,cm),Go[Rr.FLOAT_MAT4]=gl.bind(null,"uniformMatrix4fv",jp,16,cm),Go[Rr.UNSIGNED_INT]=gl.bind(null,"uniform1uiv",ER,1,Qf),Go[Rr.UNSIGNED_INT_VEC2]=gl.bind(null,"uniform2uiv",ER,2,Qf),Go[Rr.UNSIGNED_INT_VEC3]=gl.bind(null,"uniform3uiv",ER,3,Qf),Go[Rr.UNSIGNED_INT_VEC4]=gl.bind(null,"uniform4uiv",ER,4,Qf),Go[Rr.FLOAT_MAT2x3]=gl.bind(null,"uniformMatrix2x3fv",jp,6,cm),Go[Rr.FLOAT_MAT2x4]=gl.bind(null,"uniformMatrix2x4fv",jp,8,cm),Go[Rr.FLOAT_MAT3x2]=gl.bind(null,"uniformMatrix3x2fv",jp,6,cm),Go[Rr.FLOAT_MAT3x4]=gl.bind(null,"uniformMatrix3x4fv",jp,12,cm),Go[Rr.FLOAT_MAT4x2]=gl.bind(null,"uniformMatrix4x2fv",jp,8,cm),Go[Rr.FLOAT_MAT4x3]=gl.bind(null,"uniformMatrix4x3fv",jp,12,cm),Go[Rr.SAMPLER_2D]=Mh,Go[Rr.SAMPLER_CUBE]=Mh,Go[Rr.SAMPLER_3D]=Mh,Go[Rr.SAMPLER_2D_SHADOW]=Mh,Go[Rr.SAMPLER_2D_ARRAY]=Mh,Go[Rr.SAMPLER_2D_ARRAY_SHADOW]=Mh,Go[Rr.SAMPLER_CUBE_SHADOW]=Mh,Go[Rr.INT_SAMPLER_2D]=Mh,Go[Rr.INT_SAMPLER_3D]=Mh,Go[Rr.INT_SAMPLER_CUBE]=Mh,Go[Rr.INT_SAMPLER_2D_ARRAY]=Mh,Go[Rr.UNSIGNED_INT_SAMPLER_2D]=Mh,Go[Rr.UNSIGNED_INT_SAMPLER_3D]=Mh,Go[Rr.UNSIGNED_INT_SAMPLER_CUBE]=Mh,Go[Rr.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Mh,Go);function J6(e,n,r){var o=bU[r.type];if(!o)throw new Error("Unknown GLSL uniform type ".concat(r.type));return o().bind(null,e,n)}var SU={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function EU(e){return Object.prototype.toString.call(e)in SU}function PE(e,n){return"#define ".concat(e," ").concat(n)}function wU(e){var n={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,o,u){var c=Number(u);return n[o]=isNaN(c)?u:c,""}),n}function CU(e,n){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(o,u,c){var p=Number(u);return r.push({location:isNaN(p)?n[u]:p,name:c}),""}),r}function EW(e){var n=[],r=[];return e.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(o,u,c){var p=[];return c.trim().replace(`\r
`,`
`).split(`
`).forEach(function(g){var y=__read(g.trim().split(/\s+/),2),S=y[0],P=y[1];p.push({type:S.trim(),name:P.replace(";","").trim()})}),r.push({type:u.trim(),uniforms:p}),""}),e.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(o,u){return u.trim().replace(`\r
`,`
`).split(`
`).forEach(function(c){var p=c.trim().split(" "),g=p[0]||"",y=p[1]||"",S=y.indexOf("[")>-1;if(y=y.replace(";","").replace("[","").trim(),!g.startsWith("#")){if(g){var P=r.find(function(q){return g===q.type});if(P)if(S)for(var L=function(q){P.uniforms.forEach(function(ce){n.push("".concat(y,"[").concat(q,"].").concat(ce.name))})},Z=0;Z<5;Z++)L(Z);else P.uniforms.forEach(function(q){n.push("".concat(y,".").concat(q.name))})}y&&n.push(y)}}),""}),n}function eN(e){if(e===void 0)return null;var n=/binding\s*=\s*(\d+)/.exec(e);if(n!==null){var r=parseInt(n[1],10);if(!Number.isNaN(r))return r}return null}function TU(e){var n="",r=e;return[r,n]}function g0(e,n,r,o,u){var c;o===void 0&&(o=null),u===void 0&&(u=!0);var p=e.glslVersion==="#version 100",g=n==="frag"&&((c=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||c===void 0?void 0:c.length)>1,y=r.replace(`\r
`,`
`).split(`
`).map(function(nr){return nr.replace(/[/][/].*$/,"")}).filter(function(nr){var Yt=!nr||/^\s+$/.test(nr);return!Yt}),S="";o!==null&&(S=Object.keys(o).map(function(nr){return PE(nr,o[nr])}).join(`
`));var P=y.find(function(nr){return nr.startsWith("precision")})||"precision mediump float;",L=u?y.filter(function(nr){return!nr.startsWith("precision")}).join(`
`):y.join(`
`),Z="";if(e.viewportOrigin===cg.UPPER_LEFT&&(Z+="".concat(PE("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===_x.ZERO&&(Z+="".concat(PE("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var q=0,ce=0,me=0;L=L.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(nr,Yt,Cr,Nr){var nn=Cr?"".concat(Cr,", "):"";return"layout(".concat(nn,"set = ").concat(q,", binding = ").concat(ce++,") uniform ").concat(Nr)}),q++,ce=0,_o(e.separateSamplerTextures),L=L.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(nr,Yt,Cr,Nr,nn){var an=eN(Cr);an===null&&(an=ce++);var Nn=(0,w.CR)(TU(Nr),2),jn=Nn[0],di=Nn[1];return n==="frag"?`
layout(set = `.concat(q,", binding = ").concat(an*2+0,") uniform texture").concat(jn," T_").concat(nn,`;
layout(set = `).concat(q,", binding = ").concat(an*2+1,") uniform sampler").concat(di," S_").concat(nn,";").trim():""}),L=L.replace(n==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(nr,Yt){return"layout(location = ".concat(me++,") ").concat(Yt)}),Z+="".concat(PE("gl_VertexID","gl_VertexIndex"),`
`),Z+="".concat(PE("gl_InstanceID","gl_InstanceIndex"),`
`),P=P.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var be=0;L=L.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(nr,Yt,Cr,Nr,nn){var an=eN(Cr);return an===null&&(an=be++),"uniform sampler".concat(Nr," ").concat(nn,"; // BINDING=").concat(an)})}if(e.separateSamplerTextures)L=L.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(nr,Yt,Cr){return"sampler".concat(Yt,"(T_").concat(Cr,", S_").concat(Cr,")")}),L=L.replace(/\bTEXTURE\((.*?)\)/g,function(nr,Yt){return"T_".concat(Yt)});else{var $e=[];L=L.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(nr,Yt,Cr){return $e.push([Cr,Yt]),Cr}),p&&$e.forEach(function(nr){var Yt=(0,w.CR)(nr,2),Cr=Yt[0],Nr=Yt[1];L=L.replace(new RegExp("texture\\(".concat(Cr),"g"),function(){return"texture".concat(Nr,"(").concat(Cr)})}),L=L.replace(/\bTEXTURE\((.*?)\)/g,function(nr,Yt){return Yt})}var ft="".concat(p?"":e.glslVersion,`
`).concat(p&&g?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(p&&n==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(u?P:"",`
`).concat(Z||"").concat(S?S+`
`:"",`
`).concat(L,`
`).trim();if(e.explicitBindingLocations&&n==="frag"&&(ft=ft.replace(/^\b(out)\b/g,function(nr,Yt){return"layout(location = 0) ".concat(Yt)})),p){if(n==="frag"&&(ft=ft.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(nr,Yt,Cr){return"varying ".concat(Yt," ").concat(Cr,`;
`)})),n==="vert"&&(ft=ft.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(nr,Yt,Cr){return"varying ".concat(Yt," ").concat(Cr,`;
`)}),ft=ft.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(nr,Yt,Cr){return"attribute ".concat(Yt," ").concat(Cr,`;
`)})),ft=ft.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(nr,Yt){return Yt.trim().replace(/^.*$/gm,function(Cr){var Nr=Cr.trim();return Nr.startsWith("#")?Nr:Cr?"uniform ".concat(Nr):""})}),n==="frag")if(g){var mt=[];ft=ft.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(nr,Yt){return mt.push(Yt),"vec4 ".concat(Yt,`;
`)});var zt=ft.lastIndexOf("}");ft=ft.substring(0,zt)+`
    `.concat(mt.map(function(nr,Yt){return"gl_FragData[".concat(Yt,"] = ").concat(nr,`;
    `)}).join(`
`))+ft.substring(zt)}else{var ar;if(ft=ft.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(nr,Yt,Cr){return ar=Cr,"".concat(Yt," ").concat(Cr,`;
`)}),ar){var zt=ft.lastIndexOf("}");ft=ft.substring(0,zt)+`
  gl_FragColor = vec4(`.concat(ar,`);
`)+ft.substring(zt)}}ft=ft.replace(/^\s*layout\((.*)\)/gm,"")}return ft}function wW(e,n,r,o){o===void 0&&(o=null);var u=g0(e,"vert",n,o),c=g0(e,"frag",r,o);return{vert:n,frag:r,preprocessedVert:u,preprocessedFrag:c}}var Dd=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c.device.resourceCreationTracker!==null&&c.device.resourceCreationTracker.trackResourceCreated(c),c}return n.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},n}(F6),AU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.Bindings;var g=c.uniformBufferBindings,y=c.samplerBindings;return p.uniformBufferBindings=g||[],p.samplerBindings=y||[],p.bindingLayouts=p.createBindingLayouts(),p}return n.prototype.createBindingLayouts=function(){var r=0,o=0,u=[],c=this.uniformBufferBindings.length,p=this.samplerBindings.length;return u.push({firstUniformBuffer:r,numUniformBuffers:c,firstSampler:o,numSamplers:p}),r+=c,o+=p,{numUniformBuffers:r,numSamplers:o,bindingLayoutTables:u}},n}(Dd);function pa(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}function tN(e){var n=fg(e);switch(n){case Gn.BC1:case Gn.BC2:case Gn.BC3:case Gn.BC4_UNORM:case Gn.BC4_SNORM:case Gn.BC5_UNORM:case Gn.BC5_SNORM:return!0;default:return!1}}function rN(e){var n=xx(e);if(n&Ui.Normalized)return!1;var r=fg(e);return r===Gn.S8||r===Gn.S16||r===Gn.S32||r===Gn.U8||r===Gn.U16||r===Gn.U32}function MU(e){switch(e){case _v.STATIC:return Rr.STATIC_DRAW;case _v.DYNAMIC:return Rr.DYNAMIC_DRAW}}function nN(e){if(e&ru.INDEX)return Rr.ELEMENT_ARRAY_BUFFER;if(e&ru.VERTEX)return Rr.ARRAY_BUFFER;if(e&ru.UNIFORM)return Rr.UNIFORM_BUFFER}function RU(e){switch(e){case Ql.TRIANGLES:return Rr.TRIANGLES;case Ql.POINTS:return Rr.POINTS;case Ql.TRIANGLE_STRIP:return Rr.TRIANGLE_STRIP;case Ql.LINES:return Rr.LINES;case Ql.LINE_STRIP:return Rr.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function IU(e){switch(e){case Gn.U8:return Rr.UNSIGNED_BYTE;case Gn.U16:return Rr.UNSIGNED_SHORT;case Gn.U32:return Rr.UNSIGNED_INT;case Gn.S8:return Rr.BYTE;case Gn.S16:return Rr.SHORT;case Gn.S32:return Rr.INT;case Gn.F16:return Rr.HALF_FLOAT;case Gn.F32:return Rr.FLOAT;default:throw new Error("whoops")}}function OU(e){switch(e){case Qi.R:return 1;case Qi.RG:return 2;case Qi.RGB:return 3;case Qi.RGBA:return 4;default:return 1}}function PU(e){var n=fg(e),r=mR(e),o=xx(e),u=IU(n),c=OU(r),p=!!(o&Ui.Normalized);return{size:c,type:u,normalized:p}}function kU(e){switch(e){case Yr.U8_R:return Rr.UNSIGNED_BYTE;case Yr.U16_R:return Rr.UNSIGNED_SHORT;case Yr.U32_R:return Rr.UNSIGNED_INT;default:throw new Error("whoops")}}function kE(e){switch(e){case Ah.CLAMP_TO_EDGE:return Rr.CLAMP_TO_EDGE;case Ah.REPEAT:return Rr.REPEAT;case Ah.MIRRORED_REPEAT:return Rr.MIRRORED_REPEAT;default:throw new Error("whoops")}}function wR(e,n){if(n===Ac.LINEAR&&e===Al.BILINEAR)return Rr.LINEAR_MIPMAP_LINEAR;if(n===Ac.LINEAR&&e===Al.POINT)return Rr.NEAREST_MIPMAP_LINEAR;if(n===Ac.NEAREST&&e===Al.BILINEAR)return Rr.LINEAR_MIPMAP_NEAREST;if(n===Ac.NEAREST&&e===Al.POINT)return Rr.NEAREST_MIPMAP_NEAREST;if(n===Ac.NO_MIP&&e===Al.BILINEAR)return Rr.LINEAR;if(n===Ac.NO_MIP&&e===Al.POINT)return Rr.NEAREST;throw new Error("Unknown texture filter mode")}function Tx(e,n){n===void 0&&(n=0);var r=e;return r.gl_buffer_pages[n/r.pageByteSize|0]}function Ax(e){var n=e;return n.gl_texture}function W5(e){var n=e;return n.gl_sampler}function DE(e,n){e.name=n,e.__SPECTOR_Metadata={name:n}}function iN(e,n){for(var r=[];;){var o=n.exec(e);if(!o)break;r.push(o)}return r}function m0(e){return e.blendMode==$c.ADD&&e.blendSrcFactor==Zo.ONE&&e.blendDstFactor===Zo.ZERO}function DU(e){switch(e){case gR.OcclusionConservative:return Rr.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function LU(e){if(e===Do.TEXTURE_2D)return Rr.TEXTURE_2D;if(e===Do.TEXTURE_2D_ARRAY)return Rr.TEXTURE_2D_ARRAY;if(e===Do.TEXTURE_CUBE_MAP)return Rr.TEXTURE_CUBE_MAP;if(e===Do.TEXTURE_3D)return Rr.TEXTURE_3D;throw new Error("whoops")}function G5(e,n,r,o){return!(e%r!==0||n%o!==0)}var FU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.Buffer;var g=c.viewOrSize,y=c.usage,S=c.hint,P=S===void 0?_v.STATIC:S,L=u.uniformBufferMaxPageByteSize,Z=u.gl,q=y&ru.UNIFORM;q||(pa(Z)?Z.bindVertexArray(null):u.OES_vertex_array_object.bindVertexArrayOES(null));var ce=yx(g)?xR(g,4):xR(g.byteLength,4);p.gl_buffer_pages=[];var me;if(q){for(var be=ce;be>0;)p.gl_buffer_pages.push(p.createBufferPage(Math.min(be,L),y,P)),be-=L;me=L}else p.gl_buffer_pages.push(p.createBufferPage(ce,y,P)),me=ce;return p.pageByteSize=me,p.byteSize=ce,p.usage=y,p.gl_target=nN(y),yx(g)||p.setSubData(0,new Uint8Array(g.buffer)),q||(pa(Z)?Z.bindVertexArray(p.device.currentBoundVAO):u.OES_vertex_array_object.bindVertexArrayOES(p.device.currentBoundVAO)),p}return n.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=o.byteLength-u);for(var p=this.device.gl,g=this.pageByteSize,y=r+c,S=r,P=r%g;S<y;){var L=pa(p)?p.COPY_WRITE_BUFFER:this.gl_target,Z=Tx(this,S);if(Z.ubo)return;p.bindBuffer(L,Z),pa(p)?p.bufferSubData(L,P,o,u,Math.min(y-S,g)):p.bufferSubData(L,P,o),S+=g,P=0,u+=g,this.device.debugGroupStatisticsBufferUpload()}},n.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},n.prototype.createBufferPage=function(r,o,u){var c=this.device.gl,p=o&ru.UNIFORM;if(!pa(c)&&p)return{ubo:!0};var g=this.device.ensureResourceExists(c.createBuffer()),y=nN(o),S=MU(u);return c.bindBuffer(y,g),c.bufferData(y,r,S),g},n}(Dd),BU=function(e){(0,w.ZT)(n,e);function n(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,P,L=e.call(this,{id:g,device:y})||this;L.type=as.InputLayout;var Z=S.vertexBufferDescriptors,q=S.indexBufferFormat,ce=S.program;_o(q===Yr.U16_R||q===Yr.U32_R||q===null);var me=q!==null?kU(q):null,be=q!==null?z6(q):null,$e=L.device.gl,ft=L.device.ensureResourceExists(pa($e)?$e.createVertexArray():y.OES_vertex_array_object.createVertexArrayOES());pa($e)?$e.bindVertexArray(ft):y.OES_vertex_array_object.bindVertexArrayOES(ft),$e.bindBuffer($e.ARRAY_BUFFER,Tx(L.device.fallbackVertexBuffer));try{for(var mt=(0,w.XA)(S.vertexBufferDescriptors),zt=mt.next();!zt.done;zt=mt.next()){var ar=zt.value,nr=ar.stepMode,Yt=ar.attributes;try{for(var Cr=(c=void 0,(0,w.XA)(Yt)),Nr=Cr.next();!Nr.done;Nr=Cr.next()){var nn=Nr.value,an=nn.shaderLocation,Nn=nn.format,jn=nn.divisor,di=jn===void 0?1:jn,Ua=pa($e)?an:(P=ce.attributes[an])===null||P===void 0?void 0:P.location,Co=PU(Nn);if(nn.vertexFormat=Co,!kd(Ua)){rN(Nn);var os=Co.size,nu=Co.type,pu=Co.normalized;$e.vertexAttribPointer(Ua,os,nu,pu,0,0),nr===o_.INSTANCE&&(pa($e)?$e.vertexAttribDivisor(Ua,di):y.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(Ua,di)),$e.enableVertexAttribArray(Ua)}}}catch(cf){c={error:cf}}finally{try{Nr&&!Nr.done&&(p=Cr.return)&&p.call(Cr)}finally{if(c)throw c.error}}}}catch(cf){o={error:cf}}finally{try{zt&&!zt.done&&(u=mt.return)&&u.call(mt)}finally{if(o)throw o.error}}return pa($e)?$e.bindVertexArray(null):y.OES_vertex_array_object.bindVertexArrayOES(null),L.vertexBufferDescriptors=Z,L.vao=ft,L.indexBufferFormat=q,L.indexBufferType=me,L.indexBufferCompByteSize=be,L.program=ce,L}return n.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(pa(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},n}(Dd),$5=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=r.fake,g=e.call(this,{id:o,device:u})||this;g.type=as.Texture,c=(0,w.pi)({dimension:Do.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},c);var y=g.device.gl,S,P,L=g.clampmipLevelCount(c);if(g.immutable=c.usage===Mf.RENDER_TARGET,g.pixelStore=c.pixelStore,g.format=c.format,g.dimension=c.dimension,g.formatKind=U6(c.format),g.width=c.width,g.height=c.height,g.depthOrArrayLayers=c.depthOrArrayLayers,g.mipmaps=L>=1,!p){P=g.device.ensureResourceExists(y.createTexture());var Z=g.device.translateTextureType(c.format),q=g.device.translateTextureInternalFormat(c.format);if(g.device.setActiveTexture(y.TEXTURE0),g.device.currentTextures[0]=null,g.preprocessImage(),c.dimension===Do.TEXTURE_2D){if(S=Rr.TEXTURE_2D,y.bindTexture(S,P),g.immutable)if(pa(y))y.texStorage2D(S,L,q,c.width,c.height);else{var ce=(q===Rr.DEPTH_COMPONENT||g.isNPOT(),0);(g.format===Yr.D32F||g.format===Yr.D24_S8)&&!pa(y)&&!u.WEBGL_depth_texture||(y.texImage2D(S,ce,q,c.width,c.height,0,q,Z,null),g.mipmaps&&(g.mipmaps=!1,y.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_MIN_FILTER,Rr.LINEAR),y.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_WRAP_S,Rr.CLAMP_TO_EDGE),y.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_WRAP_T,Rr.CLAMP_TO_EDGE)))}_o(c.depthOrArrayLayers===1)}else if(c.dimension===Do.TEXTURE_2D_ARRAY)S=Rr.TEXTURE_2D_ARRAY,y.bindTexture(S,P),g.immutable&&pa(y)&&y.texStorage3D(S,L,q,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Do.TEXTURE_3D)S=Rr.TEXTURE_3D,y.bindTexture(S,P),g.immutable&&pa(y)&&y.texStorage3D(S,L,q,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Do.TEXTURE_CUBE_MAP)S=Rr.TEXTURE_CUBE_MAP,y.bindTexture(S,P),g.immutable&&pa(y)&&y.texStorage2D(S,L,q,c.width,c.height),_o(c.depthOrArrayLayers===6);else throw new Error("whoops")}return g.gl_texture=P,g.gl_target=S,g.mipLevelCount=L,g}return n.prototype.setImageData=function(r,o){o===void 0&&(o=0);var u=this.device.gl;tN(this.format);var c=this.gl_target===Rr.TEXTURE_3D||this.gl_target===Rr.TEXTURE_2D_ARRAY,p=this.gl_target===Rr.TEXTURE_CUBE_MAP,g=EU(r[0]);this.device.setActiveTexture(u.TEXTURE0),this.device.currentTextures[0]=null;var y=r[0],S,P;g?(S=this.width,P=this.height):(S=y.width,P=y.height,this.width=S,this.height=P),u.bindTexture(this.gl_target,this.gl_texture);var L=this.device.translateTextureFormat(this.format),Z=pa(u)?this.device.translateInternalTextureFormat(this.format):L,q=this.device.translateTextureType(this.format);this.preprocessImage();for(var ce=0;ce<this.depthOrArrayLayers;ce++){var me=r[ce],be=this.gl_target;p&&(be=Rr.TEXTURE_CUBE_MAP_POSITIVE_X+ce%6),this.immutable?u.texSubImage2D(be,o,0,0,S,P,L,q,me):pa(u)?c?u.texImage3D(be,o,Z,S,P,this.depthOrArrayLayers,0,L,q,me):u.texImage2D(be,o,Z,S,P,0,L,q,me):g?u.texImage2D(be,o,L,S,P,0,L,q,me):u.texImage2D(be,o,L,L,q,me)}this.mipmaps&&this.generateMipmap(c)},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(Ax(this))},n.prototype.clampmipLevelCount=function(r){if(r.dimension===Do.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var o=fg(r.format);if(o===Gn.BC1)for(var u=r.width,c=r.height,p=0;p<r.mipLevelCount;p++){if(u<=2||c<=2)return p-1;u=Math.max(u/2|0,1),c=Math.max(c/2|0,1)}}return r.mipLevelCount},n.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(Rr.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(Rr.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(Rr.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},n.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var o=this.device.gl;return!pa(o)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(o.bindTexture(this.gl_target,this.gl_texture),r?(o.texParameteri(this.gl_target,Rr.TEXTURE_BASE_LEVEL,0),o.texParameteri(this.gl_target,Rr.TEXTURE_MAX_LEVEL,Math.log2(this.width)),o.texParameteri(this.gl_target,Rr.TEXTURE_MIN_FILTER,Rr.LINEAR_MIPMAP_LINEAR),o.texParameteri(this.gl_target,Rr.TEXTURE_MAG_FILTER,Rr.LINEAR)):o.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_MIN_FILTER,Rr.NEAREST_MIPMAP_LINEAR),o.generateMipmap(this.gl_target),o.bindTexture(this.gl_target,null)),this)},n.prototype.isNPOT=function(){var r=this.device.gl;return pa(r)?!1:!_R(this.width)||!_R(this.height)},n}(Dd),NU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.RenderTarget,p.gl_renderbuffer=null,p.texture=null;var g=p.device.gl,y=c.format,S=c.width,P=c.height,L=c.sampleCount,Z=L===void 0?1:L,q=c.texture,ce=!1;if((y===Yr.D32F||y===Yr.D24_S8)&&q&&!pa(g)&&!u.WEBGL_depth_texture&&(q.destroy(),p.texture=null,ce=!0),!ce&&q)p.texture=q;else{p.gl_renderbuffer=p.device.ensureResourceExists(g.createRenderbuffer()),g.bindRenderbuffer(g.RENDERBUFFER,p.gl_renderbuffer);var me=p.device.translateTextureInternalFormat(y,!0);pa(g)&&Z>1?g.renderbufferStorageMultisample(Rr.RENDERBUFFER,Z,me,S,P):g.renderbufferStorage(Rr.RENDERBUFFER,me,S,P)}return p.format=y,p.width=S,p.height=P,p.sampleCount=Z,p}return n.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},n}(Dd),sp;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(sp||(sp={}));var zU=function(e){(0,w.ZT)(n,e);function n(r,o){var u=r.id,c=r.device,p=r.descriptor,g=e.call(this,{id:u,device:c})||this;g.rawVertexGLSL=o,g.type=as.Program,g.uniformSetters={},g.attributes=[];var y=g.device.gl;return g.descriptor=p,g.gl_program=g.device.ensureResourceExists(y.createProgram()),g.gl_shader_vert=null,g.gl_shader_frag=null,g.compileState=sp.NeedsCompile,g.tryCompileProgram(),g}return n.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},n.prototype.tryCompileProgram=function(){_o(this.compileState===sp.NeedsCompile);var r=this.descriptor,o=r.vertex,u=r.fragment,c=this.device.gl;o!=null&&o.glsl&&(u!=null&&u.glsl)&&(this.gl_shader_vert=this.compileShader(o.postprocess?o.postprocess(o.glsl):o.glsl,c.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(u.postprocess?u.postprocess(u.glsl):u.glsl,c.FRAGMENT_SHADER),c.attachShader(this.gl_program,this.gl_shader_vert),c.attachShader(this.gl_program,this.gl_shader_frag),c.linkProgram(this.gl_program),this.compileState=sp.Compiling,pa(c)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},n.prototype.readAttributesFromLinkedProgram=function(){for(var r,o=this.device.gl,u=o.getProgramParameter(this.gl_program,o.ACTIVE_ATTRIBUTES),c=wU(this.descriptor.vertex.glsl),p=CU(this.rawVertexGLSL,c),g=function(P){var L=o.getActiveAttrib(y.gl_program,P),Z=L.name,q=L.type,ce=L.size,me=o.getAttribLocation(y.gl_program,Z),be=(r=p.find(function($e){return $e.name===Z}))===null||r===void 0?void 0:r.location;me>=0&&!kd(be)&&(y.attributes[be]={name:Z,location:me,type:q,size:ce})},y=this,S=0;S<u;S++)g(S)},n.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,o=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),u=0;u<o;u++){var c=r.getActiveUniform(this.gl_program,u),p=mU(c.name).name,g=r.getUniformLocation(this.gl_program,p);if(this.uniformSetters[p]=J6(r,g,c),c&&c.size>1)for(var y=0;y<c.size;y++)g=r.getUniformLocation(this.gl_program,"".concat(p,"[").concat(y,"]")),this.uniformSetters["".concat(p,"[").concat(y,"]")]=J6(r,g,c)}},n.prototype.compileShader=function(r,o){var u=this.device.gl,c=this.device.ensureResourceExists(u.createShader(o));return u.shaderSource(c,r),u.compileShader(c),c},n.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var o=this.device.gl;if(!pa(o)){var u=!1;for(var c in r){u||(o.useProgram(this.gl_program),u=!0);var p=r[c],g=this.uniformSetters[c];if(g){var y=p;y instanceof $5&&(y=y.textureIndex),g(y)}}}return this},n}(Dd),UU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.QueryPool;var g=p.device.gl;if(pa(g)){var y=c.elemCount,S=c.type;p.gl_query=$z(y,function(){return p.device.ensureResourceExists(g.createQuery())}),p.gl_query_type=DU(S)}return p}return n.prototype.queryResultOcclusion=function(r){var o=this.device.gl;if(pa(o)){var u=this.gl_query[r];return o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)?!!o.getQueryParameter(u,o.QUERY_RESULT):null}return null},n.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(pa(r))for(var o=0;o<this.gl_query.length;o++)r.deleteQuery(this.gl_query[o])},n}(Dd),ZU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=as.Readback,c.gl_pbo=null,c.gl_sync=null,c}return n.prototype.clientWaitAsync=function(r,o,u){o===void 0&&(o=0),u===void 0&&(u=10);var c=this.device.gl;return new Promise(function(p,g){function y(){var S=c.clientWaitSync(r,o,0);if(S==c.WAIT_FAILED){g();return}if(S==c.TIMEOUT_EXPIRED){setTimeout(y,Uz(u,0,c.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}p()}y()})},n.prototype.getBufferSubDataAsync=function(r,o,u,c,p,g){return(0,w.mG)(this,void 0,void 0,function(){var y;return(0,w.Jh)(this,function(S){switch(S.label){case 0:return y=this.device.gl,pa(y)?(this.gl_sync=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0),y.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return S.sent(),y.bindBuffer(r,o),y.getBufferSubData(r,u,c,p,g),y.bindBuffer(r,null),[2,c];case 2:return[2]}})})},n.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),S===void 0&&(S=g.byteLength||0),(0,w.mG)(this,void 0,void 0,function(){var P,L,Z,q,ce;return(0,w.Jh)(this,function(me){return P=this.device.gl,L=r,Z=this.device.translateTextureFormat(L.format),q=this.device.translateTextureType(L.format),ce=Vz(L.format),pa(P)?(this.gl_pbo=this.device.ensureResourceExists(P.createBuffer()),P.bindBuffer(P.PIXEL_PACK_BUFFER,this.gl_pbo),P.bufferData(P.PIXEL_PACK_BUFFER,S,P.STREAM_READ),P.bindBuffer(P.PIXEL_PACK_BUFFER,null),P.bindFramebuffer(Rr.READ_FRAMEBUFFER,this.device.readbackFramebuffer),P.framebufferTexture2D(Rr.READ_FRAMEBUFFER,Rr.COLOR_ATTACHMENT0,Rr.TEXTURE_2D,L.gl_texture,0),P.bindBuffer(P.PIXEL_PACK_BUFFER,this.gl_pbo),P.readPixels(o,u,c,p,Z,q,y*ce),P.bindBuffer(P.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(P.PIXEL_PACK_BUFFER,this.gl_pbo,0,g,y,0)]):[2,this.readTextureSync(r,o,u,c,p,g,y,S)]})})},n.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){S===void 0&&(S=g.byteLength||0);var P=this.device.gl,L=r,Z=this.device.translateTextureType(L.format);return P.bindFramebuffer(Rr.FRAMEBUFFER,this.device.readbackFramebuffer),P.framebufferTexture2D(Rr.FRAMEBUFFER,Rr.COLOR_ATTACHMENT0,Rr.TEXTURE_2D,L.gl_texture,0),P.pixelStorei(P.PACK_ALIGNMENT,4),P.readPixels(o,u,c,p,P.RGBA,Z,g),g},n.prototype.readBuffer=function(r,o,u,c,p){return(0,w.mG)(this,void 0,void 0,function(){var g;return(0,w.Jh)(this,function(y){return g=this.device.gl,pa(g)?[2,this.getBufferSubDataAsync(g.ARRAY_BUFFER,Tx(r,o),o,u,c,p)]:[2,Promise.reject()]})})},n.prototype.destroy=function(){e.prototype.destroy.call(this),pa(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},n}(Dd),VU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;return y.type=as.RenderPipeline,y.drawMode=RU((p=c.topology)!==null&&p!==void 0?p:Ql.TRIANGLES),y.program=c.program,y.inputLayout=c.inputLayout,y.megaState=(0,w.pi)((0,w.pi)({},Ex(u_)),c.megaStateDescriptor),y.colorAttachmentFormats=c.colorAttachmentFormats.slice(),y.depthStencilAttachmentFormat=c.depthStencilAttachmentFormat,y.sampleCount=(g=c.sampleCount)!==null&&g!==void 0?g:1,y}return n}(Dd),jU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=as.ComputePipeline,p.descriptor=c,p}return n}(Dd),HU=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(n){this.creationStacks.set(n,new Error().stack),this.liveObjects.add(n)},e.prototype.trackResourceDestroyed=function(n){this.deletionStacks.has(n)&&console.warn("Object double freed:",n,`

Creation stack: `,this.creationStacks.get(n),`

Deletion stack: `,this.deletionStacks.get(n),`

This stack: `,new Error().stack),this.deletionStacks.set(n,new Error().stack),this.liveObjects.delete(n)},e.prototype.checkForLeaks=function(){var n,r;try{for(var o=(0,w.XA)(this.liveObjects.values()),u=o.next();!u.done;u=o.next()){var c=u.value;console.warn("Object leaked:",c,"Creation stack:",this.creationStacks.get(c))}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.setResourceLeakCheck=function(n,r){r?this.liveObjects.add(n):this.liveObjects.delete(n)},e}(),WU=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=as.Sampler;var S=y.device.gl;if(pa(S)){var P=y.device.ensureResourceExists(S.createSampler());S.samplerParameteri(P,Rr.TEXTURE_WRAP_S,kE(c.addressModeU)),S.samplerParameteri(P,Rr.TEXTURE_WRAP_T,kE(c.addressModeV)),S.samplerParameteri(P,Rr.TEXTURE_WRAP_R,kE((p=c.addressModeW)!==null&&p!==void 0?p:c.addressModeU)),S.samplerParameteri(P,Rr.TEXTURE_MIN_FILTER,wR(c.minFilter,c.mipmapFilter)),S.samplerParameteri(P,Rr.TEXTURE_MAG_FILTER,wR(c.magFilter,Ac.NO_MIP)),c.lodMinClamp!==void 0&&S.samplerParameterf(P,Rr.TEXTURE_MIN_LOD,c.lodMinClamp),c.lodMaxClamp!==void 0&&S.samplerParameterf(P,Rr.TEXTURE_MAX_LOD,c.lodMaxClamp),c.compareFunction!==void 0&&(S.samplerParameteri(P,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE),S.samplerParameteri(P,S.TEXTURE_COMPARE_FUNC,c.compareFunction));var L=(g=c.maxAnisotropy)!==null&&g!==void 0?g:1;L>1&&y.device.EXT_texture_filter_anisotropic!==null&&(_o(c.minFilter===Al.BILINEAR&&c.magFilter===Al.BILINEAR&&c.mipmapFilter===Ac.LINEAR),S.samplerParameterf(P,y.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L)),y.gl_sampler=P}else y.descriptor=c;return y}return n.prototype.setTextureParameters=function(r,o,u){var c,p=this.device.gl,g=this.descriptor;this.isNPOT(o,u)?p.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_MIN_FILTER,Rr.LINEAR):p.texParameteri(r,Rr.TEXTURE_MIN_FILTER,wR(g.minFilter,g.mipmapFilter)),p.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_WRAP_S,kE(g.addressModeU)),p.texParameteri(Rr.TEXTURE_2D,Rr.TEXTURE_WRAP_T,kE(g.addressModeV)),p.texParameteri(r,Rr.TEXTURE_MAG_FILTER,wR(g.magFilter,Ac.NO_MIP));var y=(c=g.maxAnisotropy)!==null&&c!==void 0?c:1;y>1&&this.device.EXT_texture_filter_anisotropic!==null&&(_o(g.minFilter===Al.BILINEAR&&g.magFilter===Al.BILINEAR&&g.mipmapFilter===Ac.LINEAR),p.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y))},n.prototype.destroy=function(){e.prototype.destroy.call(this),pa(this.device.gl)&&this.device.gl.deleteSampler(W5(this))},n.prototype.isNPOT=function(r,o){return!_R(r)||!_R(o)},n}(Dd),GU=function(){function e(){}return e.prototype.dispatchWorkgroups=function(n,r,o){},e.prototype.dispatchWorkgroupsIndirect=function(n,r){},e.prototype.setPipeline=function(n){},e.prototype.setBindings=function(n){},e.prototype.pushDebugGroup=function(n){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(n){},e}(),$U=function(e){(0,w.ZT)(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=as.RenderBundle,r.commands=[],r}return n.prototype.push=function(r){this.commands.push(r)},n.prototype.replay=function(){this.commands.forEach(function(r){return r()})},n}(Dd),aN=65536,XU=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,YU=function(){function e(n,r){r===void 0&&(r={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Ex(u_),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=cg.LOWER_LEFT,this.clipSpaceNearZ=_x.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=n,this.contextAttributes=s_(n.getContextAttributes()),pa(n)?(this.EXT_texture_norm16=n.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=n.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=n.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=n.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=n.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=n.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=n.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=n.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=n.getExtension("EXT_color_buffer_half_float"),n.getExtension("EXT_frag_depth"),n.getExtension("OES_element_index_uint"),n.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=n.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=n.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=n.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=n.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=n.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=n.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=n.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=n.getExtension("KHR_parallel_shader_compile"),pa(n)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new $5({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Do.TEXTURE_2D,mipLevelCount:1,usage:Mf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Yr.U8_RGB_RT:Yr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=vl.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Do.TEXTURE_2D,vl.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Do.TEXTURE_2D,vl.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:ru.VERTEX,hint:_v.STATIC}),pa(n)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Do.TEXTURE_2D_ARRAY,vl.Float),this.fallbackTexture3D=this.createFallbackTexture(Do.TEXTURE_3D,vl.Float),this.fallbackTextureCube=this.createFallbackTexture(Do.TEXTURE_CUBE_MAP,vl.Float)),this.currentMegaState.depthCompare=wo.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Xc.ALL,n.enable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new HU)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(n,r){var o=n===Do.TEXTURE_CUBE_MAP?6:1,u=r===vl.Depth?Yr.D32F:Yr.U8_RGBA_NORM,c=this.createTexture({dimension:n,format:u,usage:Mf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1});return r===vl.Float&&c.setImageData([new Uint8Array(4*o)]),Ax(c)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var n=this.gl;if(this.maxVertexAttribs=n.getParameter(Rr.MAX_VERTEX_ATTRIBS),pa(n)){this.uniformBufferMaxPageByteSize=Math.min(n.getParameter(Rr.MAX_UNIFORM_BLOCK_SIZE),aN),this.uniformBufferWordAlignment=n.getParameter(n.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=n.getInternalformatParameter(n.RENDERBUFFER,n.DEPTH32F_STENCIL8,n.SAMPLES);this.supportedSampleCounts=r?(0,w.ev)([],(0,w.CR)(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=aN;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(o,u){return o-u})},e.prototype.configureSwapChain=function(n,r,o){var u=this.scTexture;u.width=n,u.height=r,this.scPlatformFramebuffer=Wz(o)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(n,r){switch(r===void 0&&(r=!1),n){case Yr.ALPHA:return Rr.ALPHA;case Yr.U8_LUMINANCE:case Yr.F16_LUMINANCE:case Yr.F32_LUMINANCE:return Rr.LUMINANCE;case Yr.F16_R:return Rr.R16F;case Yr.F16_RG:return Rr.RG16F;case Yr.F16_RGB:return Rr.RGB16F;case Yr.F16_RGBA:return Rr.RGBA16F;case Yr.F32_R:return Rr.R32F;case Yr.F32_RG:return Rr.RG32F;case Yr.F32_RGB:return Rr.RGB32F;case Yr.F32_RGBA:return pa(this.gl)?Rr.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:Rr.RGBA;case Yr.U8_R_NORM:return Rr.R8;case Yr.U8_RG_NORM:return Rr.RG8;case Yr.U8_RGB_NORM:case Yr.U8_RGB_RT:return Rr.RGB8;case Yr.U8_RGB_SRGB:return Rr.SRGB8;case Yr.U8_RGBA_NORM:case Yr.U8_RGBA_RT:return pa(this.gl)?Rr.RGBA8:r?Rr.RGBA4:Rr.RGBA;case Yr.U8_RGBA:return Rr.RGBA;case Yr.U8_RGBA_SRGB:case Yr.U8_RGBA_RT_SRGB:return Rr.SRGB8_ALPHA8;case Yr.U16_R:return Rr.R16UI;case Yr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Yr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Yr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Yr.U16_RGBA_5551:return Rr.RGB5_A1;case Yr.U16_RGB_565:return Rr.RGB565;case Yr.U32_R:return Rr.R32UI;case Yr.S8_RGBA_NORM:return Rr.RGBA8_SNORM;case Yr.S8_RG_NORM:return Rr.RG8_SNORM;case Yr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Yr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Yr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Yr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Yr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Yr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Yr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Yr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Yr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Yr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Yr.D32F_S8:return pa(this.gl)?Rr.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Rr.DEPTH_STENCIL:Rr.DEPTH_COMPONENT16;case Yr.D24_S8:return pa(this.gl)?Rr.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Rr.DEPTH_STENCIL:Rr.DEPTH_COMPONENT16;case Yr.D32F:return pa(this.gl)?Rr.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Rr.DEPTH_COMPONENT:Rr.DEPTH_COMPONENT16;case Yr.D24:return pa(this.gl)?Rr.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Rr.DEPTH_COMPONENT:Rr.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(n){var r=fg(n);switch(r){case Gn.U8:return Rr.UNSIGNED_BYTE;case Gn.U16:return Rr.UNSIGNED_SHORT;case Gn.U32:return Rr.UNSIGNED_INT;case Gn.S8:return Rr.BYTE;case Gn.F16:return Rr.HALF_FLOAT;case Gn.F32:return Rr.FLOAT;case Gn.U16_PACKED_5551:return Rr.UNSIGNED_SHORT_5_5_5_1;case Gn.D32F:return pa(this.gl)?Rr.FLOAT:this.WEBGL_depth_texture?Rr.UNSIGNED_INT:Rr.UNSIGNED_BYTE;case Gn.D24:return pa(this.gl)?Rr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Rr.UNSIGNED_SHORT:Rr.UNSIGNED_BYTE;case Gn.D24S8:return pa(this.gl)?Rr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Rr.UNSIGNED_INT_24_8_WEBGL:Rr.UNSIGNED_BYTE;case Gn.D32FS8:return Rr.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(n){switch(n){case Yr.F32_R:return Rr.R32F;case Yr.F32_RG:return Rr.RG32F;case Yr.F32_RGB:return Rr.RGB32F;case Yr.F32_RGBA:return Rr.RGBA32F;case Yr.F16_R:return Rr.R16F;case Yr.F16_RG:return Rr.RG16F;case Yr.F16_RGB:return Rr.RGB16F;case Yr.F16_RGBA:return Rr.RGBA16F}return this.translateTextureFormat(n)},e.prototype.translateTextureFormat=function(n){if(tN(n)||n===Yr.F32_LUMINANCE||n===Yr.U8_LUMINANCE)return this.translateTextureInternalFormat(n);var r=pa(this.gl)||!pa(this.gl)&&!!this.WEBGL_depth_texture;switch(n){case Yr.D24_S8:case Yr.D32F_S8:return r?Rr.DEPTH_STENCIL:Rr.RGBA;case Yr.D24:case Yr.D32F:return r?Rr.DEPTH_COMPONENT:Rr.RGBA}var o=rN(n),u=mR(n);switch(u){case Qi.A:return Rr.ALPHA;case Qi.R:return o?Rr.RED_INTEGER:Rr.RED;case Qi.RG:return o?Rr.RG_INTEGER:Rr.RG;case Qi.RGB:return o?Rr.RGB_INTEGER:Rr.RGB;case Qi.RGBA:return Rr.RGBA}},e.prototype.setActiveTexture=function(n){this.currentActiveTexture!==n&&(this.gl.activeTexture(n),this.currentActiveTexture=n)},e.prototype.bindVAO=function(n){this.currentBoundVAO!==n&&(pa(this.gl)?this.gl.bindVertexArray(n):this.OES_vertex_array_object.bindVertexArrayOES(n),this.currentBoundVAO=n)},e.prototype.programCompiled=function(n){_o(n.compileState!==sp.NeedsCompile),n.compileState===sp.Compiling&&(n.compileState=sp.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(n))},e.prototype.useProgram=function(n){this.currentProgram!==n&&(this.programCompiled(n),this.gl.useProgram(n.gl_program),this.currentProgram=n)},e.prototype.ensureResourceExists=function(n){if(n===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return n},e.prototype.createBuffer=function(n){return new FU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createTexture=function(n){return new $5({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createSampler=function(n){return new WU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createRenderTarget=function(n){return new NU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createRenderTargetFromTexture=function(n){var r=n,o=r.format,u=r.width,c=r.height,p=r.mipLevelCount;return _o(p===1),this.createRenderTarget({format:o,width:u,height:c,sampleCount:1,texture:n})},e.prototype.createProgram=function(n){var r,o,u,c=(r=n.vertex)===null||r===void 0?void 0:r.glsl;return!((o=n.vertex)===null||o===void 0)&&o.glsl&&(n.vertex.glsl=g0(this.queryVendorInfo(),"vert",n.vertex.glsl)),!((u=n.fragment)===null||u===void 0)&&u.glsl&&(n.fragment.glsl=g0(this.queryVendorInfo(),"frag",n.fragment.glsl)),this.createProgramSimple(n,c)},e.prototype.createProgramSimple=function(n,r){var o=new zU({id:this.getNextUniqueId(),device:this,descriptor:n},r);return o},e.prototype.createBindings=function(n){return new AU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createInputLayout=function(n){return new BU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createRenderPipeline=function(n){return new VU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createComputePass=function(){return new GU},e.prototype.createComputePipeline=function(n){return new jU({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createReadback=function(){return new ZU({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(n,r){return new UU({id:this.getNextUniqueId(),device:this,descriptor:{type:n,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(n){var r,o,u,c,p,g,y=n.colorAttachment;n.depthClearValue=(r=n.depthClearValue)!==null&&r!==void 0?r:"load",n.stencilClearValue=(o=n.stencilClearValue)!==null&&o!==void 0?o:"load";for(var S=0;S<y.length;S++)n.colorAttachmentLevel||(n.colorAttachmentLevel=[]),n.colorAttachmentLevel[S]=(u=n.colorAttachmentLevel[S])!==null&&u!==void 0?u:0,n.colorResolveToLevel||(n.colorResolveToLevel=[]),n.colorResolveToLevel[S]=(c=n.colorResolveToLevel[S])!==null&&c!==void 0?c:0,n.colorClearColor||(n.colorClearColor=[]),n.colorClearColor[S]=(p=n.colorClearColor[S])!==null&&p!==void 0?p:"load",n.colorStore||(n.colorStore=[]),n.colorStore[S]=(g=n.colorStore[S])!==null&&g!==void 0?g:!1},e.prototype.createRenderBundle=function(){return new $U({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(n){this.renderBundle=n},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(n){n.forEach(function(r){r.replay()})},e.prototype.createRenderPass=function(n){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=n,this.formatRenderPassDescriptor(n);var r=n.colorAttachment,o=n.colorAttachmentLevel,u=n.colorClearColor,c=n.colorResolveTo,p=n.colorResolveToLevel,g=n.depthStencilAttachment,y=n.depthClearValue,S=n.stencilClearValue,P=n.depthStencilResolveTo;this.setRenderPassParametersBegin(r.length);for(var L=0;L<r.length;L++)this.setRenderPassParametersColor(L,r[L],o[L],c[L],p[L]);this.setRenderPassParametersDepthStencil(g,P),this.validateCurrentAttachments();for(var L=0;L<r.length;L++){var Z=u[L];Z!=="load"&&this.setRenderPassParametersClearColor(L,Z.r,Z.g,Z.b,Z.a)}return this.setRenderPassParametersClearDepthStencil(y,S),this},e.prototype.submitPass=function(n){_o(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(n,r,o,u,c,p){var g=this.gl,y=n,S=u;if(_o(S.mipLevelCount===1),_o(y.mipLevelCount===1),pa(g))y===this.scTexture?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,y,0)),g.bindFramebuffer(g.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,S,0),g.blitFramebuffer(c,p,c+S.width,p+S.height,r,o,r+S.width,o+S.height,g.COLOR_BUFFER_BIT,g.LINEAR),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null);else if(y===this.scTexture){var P=this.createRenderTargetFromTexture(u);this.submitBlitRenderPass(P,y)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(n,r,o){switch(n){case Yr.BC1_SRGB:case Yr.BC2_SRGB:case Yr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?G5(r,o,4,4):!1;case Yr.BC1:case Yr.BC2:case Yr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?G5(r,o,4,4):!1;case Yr.BC4_UNORM:case Yr.BC4_SNORM:case Yr.BC5_UNORM:case Yr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?G5(r,o,4,4):!1;case Yr.U16_R_NORM:case Yr.U16_RG_NORM:case Yr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Yr.F32_R:case Yr.F32_RG:case Yr.F32_RGB:case Yr.F32_RGBA:return this.OES_texture_float_linear!==null;case Yr.F16_R:case Yr.F16_RG:case Yr.F16_RGB:case Yr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(n){var r=this.gl;if(n.compileState===sp.NeedsCompile)throw new Error("whoops");if(n.compileState===sp.Compiling){var o=void 0;return this.KHR_parallel_shader_compile!==null?o=r.getProgramParameter(n.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):o=!0,o&&this.programCompiled(n),o}return n.compileState===sp.NeedsBind||n.compileState===sp.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(n){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(n){var r=n;return r},e.prototype.setResourceName=function(n,r){if(n.name=r,n.type===as.Buffer)for(var o=n.gl_buffer_pages,u=0;u<o.length;u++)DE(o[u],"".concat(r," Page ").concat(u));else if(n.type===as.Texture)DE(Ax(n),r);else if(n.type===as.Sampler)DE(W5(n),r);else if(n.type===as.RenderTarget){var c=n.gl_renderbuffer;c!==null&&DE(c,r)}else n.type===as.InputLayout&&DE(n.vao,r)},e.prototype.setResourceLeakCheck=function(n,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(n,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(n){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(n){},e.prototype.programPatched=function(n,r){_o(this.shaderDebug)},e.prototype.getBufferData=function(n,r,o){o===void 0&&(o=0);var u=this.gl;pa(u)&&(u.bindBuffer(u.COPY_READ_BUFFER,Tx(n,o*4)),u.getBufferSubData(u.COPY_READ_BUFFER,o*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(n){n===void 0&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=n},e.prototype.debugGroupStatisticsBufferUpload=function(n){n===void 0&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=n},e.prototype.debugGroupStatisticsTextureBind=function(n){n===void 0&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=n},e.prototype.debugGroupStatisticsTriangles=function(n){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=n},e.prototype.reportShaderError=function(n,r){var o=this.gl,u=o.getShaderParameter(n,o.COMPILE_STATUS);if(!u){console.error(Xz(r));var c=o.getExtension("WEBGL_debug_shaders");c&&console.error(c.getTranslatedShaderSource(n)),console.error(o.getShaderInfoLog(n))}return u},e.prototype.checkProgramCompilationForErrors=function(n){var r=this.gl,o=n.gl_program;if(!r.getProgramParameter(o,r.LINK_STATUS)){var u=n.descriptor;if(!this.reportShaderError(n.gl_shader_vert,u.vertex.glsl)||!this.reportShaderError(n.gl_shader_frag,u.fragment.glsl))return;console.error(r.getProgramInfoLog(n.gl_program))}},e.prototype.bindFramebufferAttachment=function(n,r,o,u){var c=this.gl;if(kd(o))c.framebufferRenderbuffer(n,r,c.RENDERBUFFER,null);else if(o.type===as.RenderTarget)o.gl_renderbuffer!==null?c.framebufferRenderbuffer(n,r,c.RENDERBUFFER,o.gl_renderbuffer):o.texture!==null&&c.framebufferTexture2D(n,r,Rr.TEXTURE_2D,Ax(o.texture),u);else if(o.type===as.Texture){var p=Ax(o);o.dimension===Do.TEXTURE_2D?c.framebufferTexture2D(n,r,Rr.TEXTURE_2D,p,u):pa(c)&&(o.dimension,Do.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(n,r){var o=this.gl,u=kd(r)?Ui.Depth|Ui.Stencil:xx(r.format),c=!!(u&Ui.Depth),p=!!(u&Ui.Stencil);if(c&&p){var g=pa(this.gl)||!pa(this.gl)&&!!this.WEBGL_depth_texture;g?this.bindFramebufferAttachment(n,o.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(n,o.DEPTH_ATTACHMENT,r,0)}else c?(this.bindFramebufferAttachment(n,o.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(n,o.STENCIL_ATTACHMENT,null,0)):p&&(this.bindFramebufferAttachment(n,o.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(n,o.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var n=-1,r=-1,o=-1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];c!==null&&(n===-1?(n=c.sampleCount,r=c.width,o=c.height):(_o(n===c.sampleCount),_o(r===c.width),_o(o===c.height)))}this.currentDepthStencilAttachment&&(n===-1?n=this.currentDepthStencilAttachment.sampleCount:(_o(n===this.currentDepthStencilAttachment.sampleCount),_o(r===this.currentDepthStencilAttachment.width),_o(o===this.currentDepthStencilAttachment.height))),this.currentSampleCount=n},e.prototype.setRenderPassParametersBegin=function(n){var r=this.gl;if(pa(r)?r.bindFramebuffer(Rr.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(Rr.FRAMEBUFFER,this.renderPassDrawFramebuffer),pa(r)?r.drawBuffers([Rr.COLOR_ATTACHMENT0,Rr.COLOR_ATTACHMENT1,Rr.COLOR_ATTACHMENT2,Rr.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Rr.COLOR_ATTACHMENT0_WEBGL,Rr.COLOR_ATTACHMENT1_WEBGL,Rr.COLOR_ATTACHMENT2_WEBGL,Rr.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var o=n;o<this.currentColorAttachments.length;o++){var u=pa(r)?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,c=pa(r)?Rr.COLOR_ATTACHMENT0:Rr.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(u,c+o,Rr.RENDERBUFFER,null),r.framebufferTexture2D(u,c+o,Rr.TEXTURE_2D,null,0)}this.currentColorAttachments.length=n},e.prototype.setRenderPassParametersColor=function(n,r,o,u,c){var p=this.gl,g=pa(p);(this.currentColorAttachments[n]!==r||this.currentColorAttachmentLevels[n]!==o)&&(this.currentColorAttachments[n]=r,this.currentColorAttachmentLevels[n]=o,(g||!g&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(g?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,(g?Rr.COLOR_ATTACHMENT0:Rr.COLOR_ATTACHMENT0_WEBGL)+n,r,o),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[n]!==u||this.currentColorResolveToLevels[n]!==c)&&(this.currentColorResolveTos[n]=u,this.currentColorResolveToLevels[n]=c,u!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(n,r){var o=this.gl;this.currentDepthStencilAttachment!==n&&(this.currentDepthStencilAttachment=n,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(pa(o)?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(n,r,o,u,c){var p=this.gl;if(this.OES_draw_buffers_indexed!==null){var g=this.currentMegaState.attachmentsState[n];g&&g.channelWriteMask!==Xc.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(n,!0,!0,!0,!0),g.channelWriteMask=Xc.ALL)}else{var g=this.currentMegaState.attachmentsState[0];g&&g.channelWriteMask!==Xc.ALL&&(p.colorMask(!0,!0,!0,!0),g.channelWriteMask=Xc.ALL)}this.setScissorRectEnabled(!1),pa(p)?p.clearBufferfv(p.COLOR,n,[r,o,u,c]):(p.clearColor(r,o,u,c),p.clear(p.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(n,r){n===void 0&&(n="load"),r===void 0&&(r="load");var o=this.gl;n!=="load"&&(_o(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(o.depthMask(!0),this.currentMegaState.depthWrite=!0),pa(o)?o.clearBufferfv(o.DEPTH,0,[n]):(o.clearDepth(n),o.clear(o.DEPTH_BUFFER_BIT))),r!=="load"&&(_o(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(o.enable(o.STENCIL_TEST),o.stencilMask(255),this.currentMegaState.stencilWrite=!0),pa(o)?o.clearBufferiv(o.STENCIL,0,[r]):(o.clearStencil(r),o.clear(o.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(n){var r=this,o;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(n)});return}var u=this.gl,c=n,p=c.uniformBufferBindings,g=c.samplerBindings,y=c.bindingLayouts;_o(0<y.bindingLayoutTables.length);var S=y.bindingLayoutTables[0];_o(p.length>=S.numUniformBuffers),_o(g.length>=S.numSamplers);for(var P=0;P<p.length;P++){var L=p[P];if(L.size!==0){var Z=S.firstUniformBuffer+P,q=L.buffer,ce=L.offset||0,me=L.size||q.byteSize;if(q!==this.currentUniformBuffers[Z]||ce!==this.currentUniformBufferByteOffsets[Z]||me!==this.currentUniformBufferByteSizes[Z]){var be=ce%q.pageByteSize,$e=q.gl_buffer_pages[ce/q.pageByteSize|0];_o(be+me<=q.pageByteSize),pa(u)&&u.bindBufferRange(u.UNIFORM_BUFFER,Z,$e,be,me),this.currentUniformBuffers[Z]=q,this.currentUniformBufferByteOffsets[Z]=ce,this.currentUniformBufferByteSizes[Z]=me}}}for(var P=0;P<S.numSamplers;P++){var L=g[P],ft=S.firstSampler+P,mt=L!==null&&L.sampler!==null?W5(L.sampler):null,zt=L!==null&&L.texture!==null?Ax(L.texture):null;if(this.currentSamplers[ft]!==mt&&(pa(u)&&u.bindSampler(ft,mt),this.currentSamplers[ft]=mt),this.currentTextures[ft]!==zt){if(this.setActiveTexture(u.TEXTURE0+ft),zt!==null){var ar=s_(L).texture,nr=ar.gl_target,Yt=ar.width,Cr=ar.height;L.texture.textureIndex=ft,u.bindTexture(nr,zt),pa(u)||(o=L.sampler)===null||o===void 0||o.setTextureParameters(nr,Yt,Cr),this.debugGroupStatisticsTextureBind()}else{var Nr=(0,w.pi)((0,w.pi)({},L),$6),nn=Nr.dimension,an=Nr.formatKind,nr=LU(nn);u.bindTexture(nr,this.getFallbackTexture((0,w.pi)({gl_target:nr,formatKind:an},Nr)))}this.currentTextures[ft]=zt}}},e.prototype.setViewport=function(n,r,o,u){var c=this.gl;c.viewport(n,r,o,u)},e.prototype.setScissorRect=function(n,r,o,u){var c=this.gl;this.setScissorRectEnabled(!0),c.scissor(n,r,o,u)},e.prototype.applyAttachmentStateIndexed=function(n,r,o){var u=this.gl,c=this.OES_draw_buffers_indexed;r.channelWriteMask!==o.channelWriteMask&&(c.colorMaskiOES(n,!!(o.channelWriteMask&Xc.RED),!!(o.channelWriteMask&Xc.GREEN),!!(o.channelWriteMask&Xc.BLUE),!!(o.channelWriteMask&Xc.ALPHA)),r.channelWriteMask=o.channelWriteMask);var p=r.rgbBlendState.blendMode!==o.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==o.alphaBlendState.blendMode,g=r.rgbBlendState.blendSrcFactor!==o.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==o.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==o.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==o.alphaBlendState.blendDstFactor;(g||p)&&(m0(r.rgbBlendState)&&m0(r.alphaBlendState)?c.enableiOES(n,u.BLEND):m0(o.rgbBlendState)&&m0(o.alphaBlendState)&&c.disableiOES(n,u.BLEND)),p&&(c.blendEquationSeparateiOES(n,o.rgbBlendState.blendMode,o.alphaBlendState.blendMode),r.rgbBlendState.blendMode=o.rgbBlendState.blendMode,r.alphaBlendState.blendMode=o.alphaBlendState.blendMode),g&&(c.blendFuncSeparateiOES(n,o.rgbBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor,o.alphaBlendState.blendSrcFactor,o.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=o.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=o.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=o.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=o.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(n,r){var o=this.gl;n.channelWriteMask!==r.channelWriteMask&&(o.colorMask(!!(r.channelWriteMask&Xc.RED),!!(r.channelWriteMask&Xc.GREEN),!!(r.channelWriteMask&Xc.BLUE),!!(r.channelWriteMask&Xc.ALPHA)),n.channelWriteMask=r.channelWriteMask);var u=n.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||n.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,c=n.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||n.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||n.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||n.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(c||u)&&(m0(n.rgbBlendState)&&m0(n.alphaBlendState)?o.enable(o.BLEND):m0(r.rgbBlendState)&&m0(r.alphaBlendState)&&o.disable(o.BLEND)),u&&(o.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),n.rgbBlendState.blendMode=r.rgbBlendState.blendMode,n.alphaBlendState.blendMode=r.alphaBlendState.blendMode),c&&(o.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),n.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,n.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,n.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(n){var r=this.gl,o=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var u=0;u<n.attachmentsState.length;u++)this.applyAttachmentStateIndexed(u,o.attachmentsState[0],n.attachmentsState[0]);else _o(n.attachmentsState.length===1),this.applyAttachmentState(o.attachmentsState[0],n.attachmentsState[0]);if(Z6(o.blendConstant,n.blendConstant)||(r.blendColor(n.blendConstant.r,n.blendConstant.g,n.blendConstant.b,n.blendConstant.a),V6(o.blendConstant,n.blendConstant)),o.depthCompare!==n.depthCompare&&(r.depthFunc(n.depthCompare),o.depthCompare=n.depthCompare),!!o.depthWrite!=!!n.depthWrite&&(r.depthMask(n.depthWrite),o.depthWrite=n.depthWrite),!!o.stencilWrite!=!!n.stencilWrite&&(r.stencilMask(n.stencilWrite?255:0),o.stencilWrite=n.stencilWrite),!SR(o.stencilFront,n.stencilFront)){var c=n.stencilFront,p=c.passOp,g=c.failOp,y=c.depthFailOp,S=c.compare;(o.stencilFront.passOp!==p||o.stencilFront.failOp!==g||o.stencilFront.depthFailOp!==y)&&(r.stencilOpSeparate(r.FRONT,g,y,p),o.stencilFront.passOp=p,o.stencilFront.failOp=g,o.stencilFront.depthFailOp=y),o.stencilFront.compare!==S&&(this.setStencilReference(0),o.stencilFront.compare=S)}if(!SR(o.stencilBack,n.stencilBack)){var P=n.stencilBack,p=P.passOp,g=P.failOp,y=P.depthFailOp,S=P.compare;(o.stencilBack.passOp!==p||o.stencilBack.failOp!==g||o.stencilBack.depthFailOp!==y)&&(r.stencilOpSeparate(r.BACK,g,y,p),o.stencilBack.passOp=p,o.stencilBack.failOp=g,o.stencilBack.depthFailOp=y),o.stencilBack.compare!==S&&(this.setStencilReference(0),o.stencilBack.compare=S)}(o.stencilFront.mask!==n.stencilFront.mask||o.stencilBack.mask!==n.stencilBack.mask)&&(o.stencilFront.mask=n.stencilFront.mask,o.stencilBack.mask=n.stencilBack.mask,this.applyStencil()),o.cullMode!==n.cullMode&&(o.cullMode===op.NONE?r.enable(r.CULL_FACE):n.cullMode===op.NONE&&r.disable(r.CULL_FACE),n.cullMode===op.BACK?r.cullFace(r.BACK):n.cullMode===op.FRONT?r.cullFace(r.FRONT):n.cullMode===op.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),o.cullMode=n.cullMode),o.frontFace!==n.frontFace&&(r.frontFace(n.frontFace),o.frontFace=n.frontFace),o.polygonOffset!==n.polygonOffset&&(n.polygonOffset?(r.polygonOffset(1,1),r.enable(r.POLYGON_OFFSET_FILL)):r.disable(r.POLYGON_OFFSET_FILL),o.polygonOffset=n.polygonOffset)},e.prototype.validatePipelineFormats=function(n){for(var r=0;r<this.currentColorAttachments.length;r++)var o=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&_o(this.currentDepthStencilAttachment.format===n.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&_o(this.currentSampleCount===n.sampleCount)},e.prototype.setPipeline=function(n){var r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setPipeline(n)});return}this.currentPipeline=n,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var o=this.currentPipeline.program;if(this.useProgram(o),o.compileState===sp.NeedsBind){var u=this.gl,c=o.gl_program,p=o.descriptor,g=iN(p.vertex.glsl,XU);if(pa(u))for(var y=0;y<g.length;y++){var S=(0,w.CR)(g[y],2),P=S[1],L=u.getUniformBlockIndex(c,P);L!==-1&&L!==4294967295&&u.uniformBlockBinding(c,L,y)}for(var Z=iN(p.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),y=0;y<Z.length;y++){var q=(0,w.CR)(Z[y],3),ce=q[1],me=q[2],be=u.getUniformLocation(c,ce);u.uniform1i(be,parseInt(me))}o.compileState=sp.ReadyToUse}},e.prototype.setVertexInput=function(n,r,o){var u,c,p=this,g;if(this.renderBundle){this.renderBundle.push(function(){return p.setVertexInput(n,r,o)});return}if(n!==null){_o(this.currentPipeline.inputLayout===n);var y=n;this.bindVAO(y.vao);for(var S=this.gl,P=0;P<y.vertexBufferDescriptors.length;P++){var L=y.vertexBufferDescriptors[P],Z=L.arrayStride,q=L.attributes;try{for(var ce=(u=void 0,(0,w.XA)(q)),me=ce.next();!me.done;me=ce.next()){var be=me.value,$e=be.shaderLocation,ft=be.offset,mt=pa(S)?$e:(g=y.program.attributes[$e])===null||g===void 0?void 0:g.location;if(!kd(mt)){var zt=r[P];if(zt===null)continue;var ar=be.vertexFormat;S.bindBuffer(S.ARRAY_BUFFER,Tx(zt.buffer));var nr=(zt.offset||0)+ft;S.vertexAttribPointer(mt,ar.size,ar.type,ar.normalized,Z,nr)}}}catch(Cr){u={error:Cr}}finally{try{me&&!me.done&&(c=ce.return)&&c.call(ce)}finally{if(u)throw u.error}}}if(_o(o!==null==(y.indexBufferFormat!==null)),o!==null){var Yt=o.buffer;_o(Yt.usage===ru.INDEX),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,Tx(Yt)),this.currentIndexBufferByteOffset=o.offset||0}else this.currentIndexBufferByteOffset=null}else _o(this.currentPipeline.inputLayout===null),_o(o===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(n){this.currentStencilRef!==n&&(this.currentStencilRef=n,this.applyStencil())},e.prototype.draw=function(n,r,o,u){var c,p=this;if(this.renderBundle){this.renderBundle.push(function(){return p.draw(n,r,o,u)});return}var g=this.gl,y=this.currentPipeline;if(r){var S=[y.drawMode,o||0,n,r];pa(g)?g.drawArraysInstanced.apply(g,(0,w.ev)([],(0,w.CR)(S),!1)):(c=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(c,(0,w.ev)([],(0,w.CR)(S),!1))}else g.drawArrays(y.drawMode,o,n);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(n/3*Math.max(r,1))},e.prototype.drawIndexed=function(n,r,o,u,c){var p,g=this;if(this.renderBundle){this.renderBundle.push(function(){return g.drawIndexed(n,r,o,u,c)});return}var y=this.gl,S=this.currentPipeline,P=s_(S.inputLayout),L=s_(this.currentIndexBufferByteOffset)+o*P.indexBufferCompByteSize;if(r){var Z=[S.drawMode,n,P.indexBufferType,L,r];pa(y)?y.drawElementsInstanced.apply(y,(0,w.ev)([],(0,w.CR)(Z),!1)):(p=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(p,(0,w.ev)([],(0,w.CR)(Z),!1))}else y.drawElements(S.drawMode,n,P.indexBufferType,L);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(n/3*Math.max(r,1))},e.prototype.drawIndirect=function(n,r){},e.prototype.drawIndexedIndirect=function(n,r){},e.prototype.beginOcclusionQuery=function(n){var r=this.gl;if(pa(r)){var o=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(o.gl_query_type,o.gl_query[n])}},e.prototype.endOcclusionQuery=function(){var n=this.gl;if(pa(n)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;n.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(n){var r=n;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(n){},e.prototype.endPass=function(){for(var n=this.gl,r=pa(n),o=!1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];if(c!==null){var p=this.currentColorResolveTos[u],g=!1;p!==null&&(_o(c.width===p.width&&c.height===p.height),this.setScissorRectEnabled(!1),r&&n.bindFramebuffer(n.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u]),g=!0,p===this.scTexture?n.bindFramebuffer(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,this.scPlatformFramebuffer):(n.bindFramebuffer(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&n.framebufferTexture2D(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,p.gl_texture,this.currentColorResolveToLevels[u])),r?(n.blitFramebuffer(0,0,c.width,c.height,0,0,p.width,p.height,n.COLOR_BUFFER_BIT,n.LINEAR),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(c,p),o=!0),this.currentRenderPassDescriptor.colorStore[u]||g||(n.bindFramebuffer(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,n.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u])),n.bindFramebuffer(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var y=this.currentDepthStencilAttachment;if(y){var S=this.currentDepthStencilResolveTo,g=!1;S&&(_o(y.width===S.width&&y.height===S.height),this.setScissorRectEnabled(!1),n.bindFramebuffer(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),n.bindFramebuffer(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,y),this.bindFramebufferDepthStencilAttachment(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,S)),g=!0,r&&n.blitFramebuffer(0,0,y.width,y.height,0,0,S.width,S.height,n.DEPTH_BUFFER_BIT,n.NEAREST),n.bindFramebuffer(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,null),o=!0),this.currentRenderPassDescriptor.depthStencilStore||(g||(n.bindFramebuffer(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,y),g=!0),r&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[n.DEPTH_STENCIL_ATTACHMENT])),g&&n.bindFramebuffer(r?Rr.READ_FRAMEBUFFER:Rr.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}o||n.bindFramebuffer(r?Rr.DRAW_FRAMEBUFFER:Rr.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(n){if(this.currentScissorEnabled!==n){var r=this.gl;n?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=n}},e.prototype.applyStencil=function(){kd(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Rr.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(Rr.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(n){var r=n.gl_target,o=n.formatKind;if(r===Rr.TEXTURE_2D)return o===vl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Rr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Rr.TEXTURE_3D)return this.fallbackTexture3D;if(r===Rr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(n,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:ru.VERTEX|ru.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:o_.VERTEX,attributes:[{format:Yr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Ql.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Yr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Ex(u_)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:n.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:n}));var o=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var u=this.createRenderPass({colorAttachment:[n],colorResolveTo:[r],colorClearColor:[jz]}),c=this.getCanvas(),p=c.width,g=c.height;u.setPipeline(this.blitRenderPipeline),u.setBindings(this.blitBindings),u.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),u.setViewport(0,0,p,g),this.gl.disable(this.gl.BLEND),u.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=o,this.inBlitRenderPass=!1},e}(),qU=function(){function e(n){this.pluginOptions=n}return e.prototype.createSwapChain=function(n){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S,P,L,Z,q,ce;return(0,w.Jh)(this,function(me){return r=this.pluginOptions,o=r.targets,u=r.xrCompatible,c=r.antialias,p=c===void 0?!1:c,g=r.preserveDrawingBuffer,y=g===void 0?!1:g,S=r.premultipliedAlpha,P=S===void 0?!0:S,L=r.shaderDebug,Z=r.trackResources,q={antialias:p,preserveDrawingBuffer:y,stencil:!0,premultipliedAlpha:P,xrCompatible:u},this.handleContextEvents(n),o.includes("webgl2")&&(ce=n.getContext("webgl2",q)||n.getContext("experimental-webgl2",q)),!ce&&o.includes("webgl1")&&(ce=n.getContext("webgl",q)||n.getContext("experimental-webgl",q)),[2,new YU(ce,{shaderDebug:L,trackResources:Z})]})})},e.prototype.handleContextEvents=function(n){var r=this.pluginOptions,o=r.onContextLost,u=r.onContextRestored,c=r.onContextCreationError;c&&n.addEventListener("webglcontextcreationerror",c,!1),o&&n.addEventListener("webglcontextlost",o,!1),u&&n.addEventListener("webglcontextrestored",u,!1)},e}();let Jl;const oN=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&oN.decode();let LE=null;function CR(){return(LE===null||LE.byteLength===0)&&(LE=new Uint8Array(Jl.memory.buffer)),LE}function TR(e,n){return e=e>>>0,oN.decode(CR().subarray(e,e+n))}const fm=new Array(128).fill(void 0);fm.push(void 0,null,!0,!1);let FE=fm.length;function KU(e){FE===fm.length&&fm.push(fm.length+1);const n=FE;return FE=fm[n],fm[n]=e,n}function AR(e){return fm[e]}function QU(e){e<132||(fm[e]=FE,FE=e)}function JU(e){const n=AR(e);return QU(e),n}let BE=0;const MR=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},eZ=typeof MR.encodeInto=="function"?function(e,n){return MR.encodeInto(e,n)}:function(e,n){const r=MR.encode(e);return n.set(r),{read:e.length,written:r.length}};function X5(e,n,r){if(r===void 0){const g=MR.encode(e),y=n(g.length,1)>>>0;return CR().subarray(y,y+g.length).set(g),BE=g.length,y}let o=e.length,u=n(o,1)>>>0;const c=CR();let p=0;for(;p<o;p++){const g=e.charCodeAt(p);if(g>127)break;c[u+p]=g}if(p!==o){p!==0&&(e=e.slice(p)),u=r(u,o,o=p+e.length*3,1)>>>0;const g=CR().subarray(u+p,u+o),y=eZ(e,g);p+=y.written}return BE=p,u}let NE=null;function RR(){return(NE===null||NE.byteLength===0)&&(NE=new Int32Array(Jl.memory.buffer)),NE}function tZ(e,n,r){let o,u;try{const g=Jl.__wbindgen_add_to_stack_pointer(-16),y=X5(e,Jl.__wbindgen_malloc,Jl.__wbindgen_realloc),S=BE,P=X5(n,Jl.__wbindgen_malloc,Jl.__wbindgen_realloc),L=BE;Jl.glsl_compile(g,y,S,P,L,r);var c=RR()[g/4+0],p=RR()[g/4+1];return o=c,u=p,TR(c,p)}finally{Jl.__wbindgen_add_to_stack_pointer(16),Jl.__wbindgen_free(o,u,1)}}class zE{static __wrap(n){n=n>>>0;const r=Object.create(zE.prototype);return r.__wbg_ptr=n,r}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();Jl.__wbg_wgslcomposer_free(n)}constructor(){const n=Jl.wgslcomposer_new();return zE.__wrap(n)}wgsl_compile(n){let r,o;try{const p=Jl.__wbindgen_add_to_stack_pointer(-16),g=X5(n,Jl.__wbindgen_malloc,Jl.__wbindgen_realloc),y=BE;Jl.wgslcomposer_wgsl_compile(p,this.__wbg_ptr,g,y);var u=RR()[p/4+0],c=RR()[p/4+1];return r=u,o=c,TR(u,c)}finally{Jl.__wbindgen_add_to_stack_pointer(16),Jl.__wbindgen_free(r,o,1)}}}function rZ(e,n){return TB(this,null,function*(){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(e,n)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const r=yield e.arrayBuffer();return yield WebAssembly.instantiate(r,n)}else{const r=yield WebAssembly.instantiate(e,n);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}})}function nZ(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(n,r){const o=TR(n,r);return KU(o)},e.wbg.__wbindgen_object_drop_ref=function(n){JU(n)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(n){console.log(AR(n))},e.wbg.__wbg_log_576ca876af0d4a77=function(n,r){console.log(AR(n),AR(r))},e.wbg.__wbindgen_throw=function(n,r){throw new Error(TR(n,r))},e}function iZ(e,n){return Jl=e.exports,sN.__wbindgen_wasm_module=n,NE=null,LE=null,Jl}function sN(e){return TB(this,null,function*(){if(Jl!==void 0)return Jl;const n=nZ();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=yield rZ(yield e,n);return iZ(r,o)})}var Mc;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Mc||(Mc={}));var Y5;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(Y5||(Y5={}));function aZ(e){var n=0;return e&Mf.SAMPLED&&(n|=Mc.TEXTURE_BINDING|Mc.COPY_DST|Mc.COPY_SRC),e&Mf.STORAGE&&(n|=Mc.TEXTURE_BINDING|Mc.STORAGE_BINDING|Mc.COPY_SRC|Mc.COPY_DST),e&Mf.RENDER_TARGET&&(n|=Mc.RENDER_ATTACHMENT|Mc.TEXTURE_BINDING|Mc.COPY_SRC|Mc.COPY_DST),n}function q5(e){if(e===Yr.U8_R_NORM)return"r8unorm";if(e===Yr.S8_R_NORM)return"r8snorm";if(e===Yr.U8_RG_NORM)return"rg8unorm";if(e===Yr.S8_RG_NORM)return"rg8snorm";if(e===Yr.U32_R)return"r32uint";if(e===Yr.S32_R)return"r32sint";if(e===Yr.F32_R)return"r32float";if(e===Yr.U16_RG)return"rg16uint";if(e===Yr.S16_RG)return"rg16sint";if(e===Yr.F16_RG)return"rg16float";if(e===Yr.U8_RGBA_RT)return"bgra8unorm";if(e===Yr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===Yr.U8_RGBA_NORM)return"rgba8unorm";if(e===Yr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===Yr.S8_RGBA_NORM)return"rgba8snorm";if(e===Yr.F32_RGB)return"rgb9e5ufloat";if(e===Yr.U32_RG)return"rg32uint";if(e===Yr.S32_RG)return"rg32sint";if(e===Yr.F32_RG)return"rg32float";if(e===Yr.U16_RGBA)return"rgba16uint";if(e===Yr.S16_RGBA)return"rgba16sint";if(e===Yr.F16_RGBA)return"rgba16float";if(e===Yr.F32_RGBA)return"rgba32float";if(e===Yr.U32_RGBA)return"rgba32uint";if(e===Yr.S32_RGBA)return"rgba32sint";if(e===Yr.D24)return"depth24plus";if(e===Yr.D24_S8)return"depth24plus-stencil8";if(e===Yr.D32F)return"depth32float";if(e===Yr.D32F_S8)return"depth32float-stencil8";if(e===Yr.BC1)return"bc1-rgba-unorm";if(e===Yr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===Yr.BC2)return"bc2-rgba-unorm";if(e===Yr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===Yr.BC3)return"bc3-rgba-unorm";if(e===Yr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===Yr.BC4_SNORM)return"bc4-r-snorm";if(e===Yr.BC4_UNORM)return"bc4-r-unorm";if(e===Yr.BC5_SNORM)return"bc5-rg-snorm";if(e===Yr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function oZ(e){if(e===Do.TEXTURE_2D)return"2d";if(e===Do.TEXTURE_CUBE_MAP)return"2d";if(e===Do.TEXTURE_2D_ARRAY)return"2d";if(e===Do.TEXTURE_3D)return"3d";throw new Error("whoops")}function sZ(e){if(e===Do.TEXTURE_2D)return"2d";if(e===Do.TEXTURE_CUBE_MAP)return"cube";if(e===Do.TEXTURE_2D_ARRAY)return"2d-array";if(e===Do.TEXTURE_3D)return"3d";throw new Error("whoops")}function uZ(e){var n=0;return e&ru.INDEX&&(n|=GPUBufferUsage.INDEX),e&ru.VERTEX&&(n|=GPUBufferUsage.VERTEX),e&ru.UNIFORM&&(n|=GPUBufferUsage.UNIFORM),e&ru.STORAGE&&(n|=GPUBufferUsage.STORAGE),e&ru.COPY_SRC&&(n|=GPUBufferUsage.COPY_SRC),e&ru.INDIRECT&&(n|=GPUBufferUsage.INDIRECT),n|=GPUBufferUsage.COPY_DST,n}function K5(e){if(e===Ah.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===Ah.REPEAT)return"repeat";if(e===Ah.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function uN(e){if(e===Al.BILINEAR)return"linear";if(e===Al.POINT)return"nearest";throw new Error("whoops")}function lZ(e){if(e===Ac.LINEAR)return"linear";if(e===Ac.NEAREST)return"nearest";if(e===Ac.NO_MIP)return"nearest";throw new Error("whoops")}function Mx(e){var n=e;return n.gpuBuffer}function cZ(e){var n=e;return n.gpuSampler}function fZ(e){var n=e;return n.querySet}function hZ(e){if(e===gR.OcclusionConservative)return"occlusion";throw new Error("whoops")}function pZ(e){switch(e){case Ql.TRIANGLES:return"triangle-list";case Ql.POINTS:return"point-list";case Ql.TRIANGLE_STRIP:return"triangle-strip";case Ql.LINES:return"line-list";case Ql.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function dZ(e){if(e===op.NONE)return"none";if(e===op.FRONT)return"front";if(e===op.BACK)return"back";throw new Error("whoops")}function vZ(e){if(e===IE.CCW)return"ccw";if(e===IE.CW)return"cw";throw new Error("whoops")}function gZ(e,n){return{topology:pZ(e),cullMode:dZ(n.cullMode),frontFace:vZ(n.frontFace)}}function lN(e){if(e===Zo.ZERO)return"zero";if(e===Zo.ONE)return"one";if(e===Zo.SRC)return"src";if(e===Zo.ONE_MINUS_SRC)return"one-minus-src";if(e===Zo.DST)return"dst";if(e===Zo.ONE_MINUS_DST)return"one-minus-dst";if(e===Zo.SRC_ALPHA)return"src-alpha";if(e===Zo.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===Zo.DST_ALPHA)return"dst-alpha";if(e===Zo.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===Zo.CONST)return"constant";if(e===Zo.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===Zo.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function mZ(e){if(e===$c.ADD)return"add";if(e===$c.SUBSTRACT)return"subtract";if(e===$c.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===$c.MIN)return"min";if(e===$c.MAX)return"max";throw new Error("whoops")}function cN(e){return{operation:mZ(e.blendMode),srcFactor:lN(e.blendSrcFactor),dstFactor:lN(e.blendDstFactor)}}function fN(e){return e.blendMode===$c.ADD&&e.blendSrcFactor===Zo.ONE&&e.blendDstFactor===Zo.ZERO}function yZ(e){if(!(fN(e.rgbBlendState)&&fN(e.alphaBlendState)))return{color:cN(e.rgbBlendState),alpha:cN(e.alphaBlendState)}}function _Z(e,n){return{format:q5(n),blend:yZ(e),writeMask:e.channelWriteMask}}function xZ(e,n){return n.attachmentsState.map(function(r,o){return _Z(r,e[o])})}function IR(e){if(e===wo.NEVER)return"never";if(e===wo.LESS)return"less";if(e===wo.EQUAL)return"equal";if(e===wo.LEQUAL)return"less-equal";if(e===wo.GREATER)return"greater";if(e===wo.NOTEQUAL)return"not-equal";if(e===wo.GEQUAL)return"greater-equal";if(e===wo.ALWAYS)return"always";throw new Error("whoops")}function Rx(e){if(e===dl.KEEP)return"keep";if(e===dl.REPLACE)return"replace";if(e===dl.ZERO)return"zero";if(e===dl.DECREMENT_CLAMP)return"decrement-clamp";if(e===dl.DECREMENT_WRAP)return"decrement-wrap";if(e===dl.INCREMENT_CLAMP)return"increment-clamp";if(e===dl.INCREMENT_WRAP)return"increment-wrap";if(e===dl.INVERT)return"invert";throw new Error("whoops")}function bZ(e,n){if(!kd(e))return{format:q5(e),depthWriteEnabled:!!n.depthWrite,depthCompare:IR(n.depthCompare),depthBias:n.polygonOffset?1:0,depthBiasSlopeScale:n.polygonOffset?1:0,stencilFront:{compare:IR(n.stencilFront.compare),passOp:Rx(n.stencilFront.passOp),failOp:Rx(n.stencilFront.failOp),depthFailOp:Rx(n.stencilFront.depthFailOp)},stencilBack:{compare:IR(n.stencilBack.compare),passOp:Rx(n.stencilBack.passOp),failOp:Rx(n.stencilBack.failOp),depthFailOp:Rx(n.stencilBack.depthFailOp)},stencilReadMask:1,stencilWriteMask:1}}function SZ(e){if(e!==null){if(e===Yr.U16_R)return"uint16";if(e===Yr.U32_R)return"uint32";throw new Error("whoops")}}function EZ(e){if(e===o_.VERTEX)return"vertex";if(e===o_.INSTANCE)return"instance";throw new Error("whoops")}function wZ(e){if(e===Yr.U8_R)return"uint8x2";if(e===Yr.U8_RG)return"uint8x2";if(e===Yr.U8_RGB)return"uint8x4";if(e===Yr.U8_RGBA)return"uint8x4";if(e===Yr.U8_RG_NORM)return"unorm8x2";if(e===Yr.U8_RGBA_NORM)return"unorm8x4";if(e===Yr.S8_RGB_NORM)return"snorm8x4";if(e===Yr.S8_RGBA_NORM)return"snorm8x4";if(e===Yr.U16_RG_NORM)return"unorm16x2";if(e===Yr.U16_RGBA_NORM)return"unorm16x4";if(e===Yr.S16_RG_NORM)return"snorm16x2";if(e===Yr.S16_RGBA_NORM)return"snorm16x4";if(e===Yr.S16_RG)return"uint16x2";if(e===Yr.F16_RG)return"float16x2";if(e===Yr.F16_RGBA)return"float16x4";if(e===Yr.F32_R)return"float32";if(e===Yr.F32_RG)return"float32x2";if(e===Yr.F32_RGB)return"float32x3";if(e===Yr.F32_RGBA)return"float32x4";throw"whoops"}function CZ(e){var n=fg(e);switch(n){case Gn.BC1:case Gn.BC2:case Gn.BC3:case Gn.BC4_SNORM:case Gn.BC4_UNORM:case Gn.BC5_SNORM:case Gn.BC5_UNORM:return!0;default:return!1}}function TZ(e){var n=fg(e);switch(n){case Gn.BC1:case Gn.BC2:case Gn.BC3:case Gn.BC4_SNORM:case Gn.BC4_UNORM:case Gn.BC5_SNORM:case Gn.BC5_UNORM:return 4;default:return 1}}function hN(e,n,r,o){switch(r===void 0&&(r=!1),e){case Yr.S8_R:case Yr.S8_R_NORM:case Yr.S8_RG_NORM:case Yr.S8_RGB_NORM:case Yr.S8_RGBA_NORM:{var u=n instanceof ArrayBuffer?new Int8Array(n):new Int8Array(n);return o&&u.set(new Int8Array(o)),u}case Yr.U8_R:case Yr.U8_R_NORM:case Yr.U8_RG:case Yr.U8_RG_NORM:case Yr.U8_RGB:case Yr.U8_RGB_NORM:case Yr.U8_RGB_SRGB:case Yr.U8_RGBA:case Yr.U8_RGBA_NORM:case Yr.U8_RGBA_SRGB:{var c=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n);return o&&c.set(new Uint8Array(o)),c}case Yr.S16_R:case Yr.S16_RG:case Yr.S16_RG_NORM:case Yr.S16_RGB_NORM:case Yr.S16_RGBA:case Yr.S16_RGBA_NORM:{var p=n instanceof ArrayBuffer?new Int16Array(n):new Int16Array(r?n/2:n);return o&&p.set(new Int16Array(o)),p}case Yr.U16_R:case Yr.U16_RGB:case Yr.U16_RGBA_5551:case Yr.U16_RGBA_NORM:case Yr.U16_RG_NORM:case Yr.U16_R_NORM:{var g=n instanceof ArrayBuffer?new Uint16Array(n):new Uint16Array(r?n/2:n);return o&&g.set(new Uint16Array(o)),g}case Yr.S32_R:{var y=n instanceof ArrayBuffer?new Int32Array(n):new Int32Array(r?n/4:n);return o&&y.set(new Int32Array(o)),y}case Yr.U32_R:case Yr.U32_RG:{var S=n instanceof ArrayBuffer?new Uint32Array(n):new Uint32Array(r?n/4:n);return o&&S.set(new Uint32Array(o)),S}case Yr.F32_R:case Yr.F32_RG:case Yr.F32_RGB:case Yr.F32_RGBA:{var P=n instanceof ArrayBuffer?new Float32Array(n):new Float32Array(r?n/4:n);return o&&P.set(new Float32Array(o)),P}}var L=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n);return o&&L.set(new Uint8Array(o)),L}function AZ(e){var n=(e&32768)>>15,r=(e&31744)>>10,o=e&1023;return r===0?(n?-1:1)*Math.pow(2,-14)*(o/Math.pow(2,10)):r==31?o?NaN:(n?-1:1)*(1/0):(n?-1:1)*Math.pow(2,r-15)*(1+o/Math.pow(2,10))}function pN(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var xv=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c}return n.prototype.destroy=function(){},n}(F6),MZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=as.Bindings;var S=c.pipeline;_o(!!S);var P=c.uniformBufferBindings,L=c.storageBufferBindings,Z=c.samplerBindings,q=c.storageTextureBindings;y.numUniformBuffers=(P==null?void 0:P.length)||0;var ce=[[],[],[],[]],me=0;if(P&&P.length)for(var be=0;be<P.length;be++){var $e=c.uniformBufferBindings[be],ft=$e.binding,mt=$e.size,zt=$e.offset,ar=$e.buffer,nr={buffer:Mx(ar),offset:zt!=null?zt:0,size:mt};ce[0].push({binding:ft!=null?ft:me++,resource:nr})}if(Z&&Z.length){me=0;for(var be=0;be<Z.length;be++){var Yt=(0,w.pi)((0,w.pi)({},Z[be]),$6),ft=c.samplerBindings[be],Cr=ft.texture!==null?ft.texture:y.device.getFallbackTexture(Yt);Yt.dimension=Cr.dimension,Yt.formatKind=U6(Cr.format);var Nr=Cr.gpuTextureView;if(ce[1].push({binding:(p=ft.textureBinding)!==null&&p!==void 0?p:me++,resource:Nr}),ft.samplerBinding!==-1){var nn=ft.sampler!==null?ft.sampler:y.device.getFallbackSampler(Yt),an=cZ(nn);ce[1].push({binding:(g=ft.samplerBinding)!==null&&g!==void 0?g:me++,resource:an})}}}if(L&&L.length){me=0;for(var be=0;be<L.length;be++){var Nn=c.storageBufferBindings[be],ft=Nn.binding,mt=Nn.size,zt=Nn.offset,ar=Nn.buffer,nr={buffer:Mx(ar),offset:zt!=null?zt:0,size:mt};ce[2].push({binding:ft!=null?ft:me++,resource:nr})}}if(q&&q.length){me=0;for(var be=0;be<q.length;be++){var jn=c.storageTextureBindings[be],ft=jn.binding,Cr=jn.texture,Nr=Cr.gpuTextureView;ce[3].push({binding:ft!=null?ft:me++,resource:Nr})}}var di=ce.findLastIndex(function(Ua){return!!Ua.length});return y.gpuBindGroup=ce.map(function(Ua,Co){return Co<=di&&y.device.device.createBindGroup({layout:S.getBindGroupLayout(Co),entries:Ua})}),y}return n}(xv),RZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.Buffer;var g=c.usage,y=c.viewOrSize,S=!!(g&ru.MAP_READ);p.usage=uZ(g),S&&(p.usage=ru.MAP_READ|ru.COPY_DST);var P=!yx(y);if(p.view=yx(y)?null:y,p.size=yx(y)?xR(y,4):xR(y.byteLength,4),yx(y))p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:S?P:!1});else{p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:!0});var L=y&&y.constructor||Float32Array;new L(p.gpuBuffer.getMappedRange()).set(y),p.gpuBuffer.unmap()}return p}return n.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var p=this.gpuBuffer;c=c||o.byteLength,c=Math.min(c,this.size-r);var g=o.byteOffset+u,y=g+c,S=c+3&-4;if(S!==c){var P=new Uint8Array(o.buffer.slice(g,y));o=new Uint8Array(S),o.set(P),u=0,g=0,y=S,c=S}for(var L=1024*1024*15,Z=0;y-(g+Z)>L;)this.device.device.queue.writeBuffer(p,r+Z,o.buffer,g+Z,L),Z+=L;this.device.device.queue.writeBuffer(p,r+Z,o.buffer,g+Z,c-Z)},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},n}(xv),dN=function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(n,r,o){this.gpuComputePassEncoder.dispatchWorkgroups(n,r,o)},e.prototype.dispatchWorkgroupsIndirect=function(n,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(n.gpuBuffer,r)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(n){_o(this.gpuComputePassEncoder===null),this.frameCommandEncoder=n,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(n){var r=n,o=s_(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(o)},e.prototype.setBindings=function(n){var r=this,o=n;o.gpuBindGroup.forEach(function(u,c){u&&r.gpuComputePassEncoder.setBindGroup(c,o.gpuBindGroup[c])})},e.prototype.pushDebugGroup=function(n){this.gpuComputePassEncoder.pushDebugGroup(n)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(n){this.gpuComputePassEncoder.insertDebugMarker(n)},e}(),IZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.ComputePipeline,p.gpuComputePipeline=null,p.descriptor=c;var g=c.program,y=g.computeStage;if(y===null)return p;var S={layout:"auto",compute:(0,w.pi)({},y)};return p.gpuComputePipeline=p.device.device.createComputePipeline(S),p.name!==void 0&&(p.gpuComputePipeline.label=p.name),p}return n.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},n}(xv),OZ=function(e){(0,w.ZT)(n,e);function n(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,P=e.call(this,{id:g,device:y})||this;P.type=as.InputLayout;var L=[];try{for(var Z=(0,w.XA)(S.vertexBufferDescriptors),q=Z.next();!q.done;q=Z.next()){var ce=q.value,me=ce.arrayStride,be=ce.stepMode,$e=ce.attributes;L.push({arrayStride:me,stepMode:EZ(be),attributes:[]});try{for(var ft=(c=void 0,(0,w.XA)($e)),mt=ft.next();!mt.done;mt=ft.next()){var zt=mt.value,ar=zt.shaderLocation,nr=zt.format,Yt=zt.offset;L[L.length-1].attributes.push({shaderLocation:ar,format:wZ(nr),offset:Yt})}}catch(Cr){c={error:Cr}}finally{try{mt&&!mt.done&&(p=ft.return)&&p.call(ft)}finally{if(c)throw c.error}}}}catch(Cr){o={error:Cr}}finally{try{q&&!q.done&&(u=Z.return)&&u.call(Z)}finally{if(o)throw o.error}}return P.indexFormat=SZ(S.indexBufferFormat),P.buffers=L,P}return n}(xv),vN=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=as.Program,p.vertexStage=null,p.fragmentStage=null,p.computeStage=null,p.descriptor=c,c.vertex&&(p.vertexStage=p.createShaderStage(c.vertex,"vertex")),c.fragment&&(p.fragmentStage=p.createShaderStage(c.fragment,"fragment")),c.compute&&(p.computeStage=p.createShaderStage(c.compute,"compute")),p}return n.prototype.setUniformsLegacy=function(r){},n.prototype.createShaderStage=function(r,o){var u,c,p=r.glsl,g=r.wgsl,y=r.entryPoint,S=r.postprocess,P=!1,L=g;if(!L)try{L=this.device.glsl_compile(p,o,P)}catch($e){throw console.error($e,p),new Error("whoops")}var Z=function($e){if(!L.includes($e))return"continue";L=L.replace("var T_".concat($e,": texture_2d<f32>;"),"var T_".concat($e,": texture_depth_2d;")),L=L.replace(new RegExp("textureSample\\(T_".concat($e,"(.*)\\);$"),"gm"),function(ft,mt){return"vec4<f32>(textureSample(T_".concat($e).concat(mt,"), 0.0, 0.0, 0.0);")})};try{for(var q=(0,w.XA)(["u_TextureFramebufferDepth"]),ce=q.next();!ce.done;ce=q.next()){var me=ce.value;Z(me)}}catch($e){u={error:$e}}finally{try{ce&&!ce.done&&(c=q.return)&&c.call(q)}finally{if(u)throw u.error}}S&&(L=S(L));var be=this.device.device.createShaderModule({code:L});return{module:be,entryPoint:y||"main"}},n}(xv),PZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=as.QueryPool;var g=c.elemCount,y=c.type;return p.querySet=p.device.device.createQuerySet({type:hZ(y),count:g}),p.resolveBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),p.cpuBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p.results=null,p}return n.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},n}(xv),kZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=as.Readback,c}return n.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),(0,w.mG)(this,void 0,void 0,function(){var P,L,Z,q,ce,me,be,$e;return(0,w.Jh)(this,function(ft){return P=r,L=0,Z=pN(P.gpuTextureformat),q=Math.ceil(c/Z.width)*Z.length,ce=Math.ceil(q/256)*256,me=ce*p,be=this.device.createBuffer({usage:ru.STORAGE|ru.MAP_READ|ru.COPY_DST,hint:_v.STATIC,viewOrSize:me}),$e=this.device.device.createCommandEncoder(),$e.copyTextureToBuffer({texture:P.gpuTexture,mipLevel:0,origin:{x:o,y:u,z:Math.max(L,0)}},{buffer:be.gpuBuffer,offset:0,bytesPerRow:ce},{width:c,height:p,depthOrArrayLayers:1}),this.device.device.queue.submit([$e.finish()]),[2,this.readBuffer(be,0,g.byteLength===me?g:null,y,me,P.format,!0,!1,q,ce,p)]})})},n.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},n.prototype.readBuffer=function(r,o,u,c,p,g,y,S,P,L,Z){var q=this;o===void 0&&(o=0),u===void 0&&(u=null),p===void 0&&(p=0),g===void 0&&(g=Yr.U8_RGB),y===void 0&&(y=!1),P===void 0&&(P=0),L===void 0&&(L=0),Z===void 0&&(Z=0);var ce=r,me=p||ce.size,be=u||ce.view,$e=be&&be.constructor&&be.constructor.BYTES_PER_ELEMENT||z6(g),ft=ce;if(!(ce.usage&ru.MAP_READ&&ce.usage&ru.COPY_DST)){var mt=this.device.device.createCommandEncoder();ft=this.device.createBuffer({usage:ru.STORAGE|ru.MAP_READ|ru.COPY_DST,hint:_v.STATIC,viewOrSize:me}),mt.copyBufferToBuffer(ce.gpuBuffer,o,ft.gpuBuffer,0,me),this.device.device.queue.submit([mt.finish()])}return new Promise(function(zt,ar){ft.gpuBuffer.mapAsync(Y5.READ,o,me).then(function(){var nr=ft.gpuBuffer.getMappedRange(o,me),Yt=be;if(y)Yt===null?Yt=hN(g,me,!0,nr):Yt=hN(g,Yt.buffer,void 0,nr);else if(Yt===null)switch($e){case 1:Yt=new Uint8Array(me),Yt.set(new Uint8Array(nr));break;case 2:Yt=q.getHalfFloatAsFloatRGBAArrayBuffer(me/2,nr);break;case 4:Yt=new Float32Array(me/4),Yt.set(new Float32Array(nr));break}else switch($e){case 1:Yt=new Uint8Array(Yt.buffer),Yt.set(new Uint8Array(nr));break;case 2:Yt=q.getHalfFloatAsFloatRGBAArrayBuffer(me/2,nr,be);break;case 4:var Cr=be&&be.constructor||Float32Array;Yt=new Cr(Yt.buffer),Yt.set(new Cr(nr));break}if(P!==L){$e===1&&!y&&(P*=2,L*=2);for(var Nr=new Uint8Array(Yt.buffer),nn=P,an=0,Nn=1;Nn<Z;++Nn){an=Nn*L;for(var jn=0;jn<P;++jn)Nr[nn++]=Nr[an++]}$e!==0&&!y?Yt=new Float32Array(Nr.buffer,0,nn/4):Yt=new Uint8Array(Nr.buffer,0,nn)}ft.gpuBuffer.unmap(),zt(Yt)},function(nr){return ar(nr)})})},n.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,o,u){u||(u=new Float32Array(r));for(var c=new Uint16Array(o);r--;)u[r]=AZ(c[r]);return u},n}(xv),gN=function(){function e(n){this.device=n,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var n;return((n=this.renderBundle)===null||n===void 0?void 0:n.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(n,r){return _o(r<n.mipLevelCount),n.mipLevelCount===1?n.gpuTextureView:n.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(n){var r,o,u,c,p,g;this.descriptor=n,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var y=n.colorAttachment.length;this.gfxColorAttachment.length=y,this.gfxColorResolveTo.length=y;for(var S=0;S<n.colorAttachment.length;S++){var P=n.colorAttachment[S],L=n.colorResolveTo[S];if(P===null&&L!==null&&(P=L,L=null),this.gfxColorAttachment[S]=P,this.gfxColorResolveTo[S]=L,this.gfxColorAttachmentLevel[S]=((r=n.colorAttachmentLevel)===null||r===void 0?void 0:r[S])||0,this.gfxColorResolveToLevel[S]=((o=n.colorResolveToLevel)===null||o===void 0?void 0:o[S])||0,P!==null){this.gpuColorAttachments[S]===void 0&&(this.gpuColorAttachments[S]={});var Z=this.gpuColorAttachments[S];Z.view=this.getTextureView(P,((u=this.gfxColorAttachmentLevel)===null||u===void 0?void 0:u[S])||0);var q=(p=(c=n.colorClearColor)===null||c===void 0?void 0:c[S])!==null&&p!==void 0?p:"load";q==="load"?Z.loadOp="load":(Z.loadOp="clear",Z.clearValue=q),Z.storeOp=!((g=n.colorStore)===null||g===void 0)&&g[S]?"store":"discard",Z.resolveTarget=void 0,L!==null&&(P.sampleCount>1?Z.resolveTarget=this.getTextureView(L,this.gfxColorResolveToLevel[S]):Z.storeOp="store")}else{this.gpuColorAttachments.length=S,this.gfxColorAttachment.length=S,this.gfxColorResolveTo.length=S;break}}if(this.gfxDepthStencilAttachment=n.depthStencilAttachment,this.gfxDepthStencilResolveTo=n.depthStencilResolveTo,n.depthStencilAttachment){var ce=n.depthStencilAttachment,Z=this.gpuDepthStencilAttachment;Z.view=ce.gpuTextureView;var me=!!(xx(ce.format)&Ui.Depth);me?(n.depthClearValue==="load"?Z.depthLoadOp="load":(Z.depthLoadOp="clear",Z.depthClearValue=n.depthClearValue),n.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Z.depthStoreOp="store":Z.depthStoreOp="discard"):(Z.depthLoadOp=void 0,Z.depthStoreOp=void 0);var be=!!(xx(ce.format)&Ui.Stencil);be?(n.stencilClearValue==="load"?Z.stencilLoadOp="load":(Z.stencilLoadOp="clear",Z.stencilClearValue=n.stencilClearValue),n.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Z.stencilStoreOp="store":Z.stencilStoreOp="discard"):(Z.stencilLoadOp=void 0,Z.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=kd(n.occlusionQueryPool)?void 0:fZ(n.occlusionQueryPool)},e.prototype.beginRenderPass=function(n,r){_o(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(r),this.frameCommandEncoder=n,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(n,r){var o=this.device.swapChainHeight;return o-n-r},e.prototype.setViewport=function(n,r,o,u,c,p){c===void 0&&(c=0),p===void 0&&(p=1),this.gpuRenderPassEncoder.setViewport(n,this.flipY(r,u),o,u,c,p)},e.prototype.setScissorRect=function(n,r,o,u){this.gpuRenderPassEncoder.setScissorRect(n,this.flipY(r,u),o,u)},e.prototype.setPipeline=function(n){var r=n,o=s_(r.gpuRenderPipeline);this.getEncoder().setPipeline(o)},e.prototype.setVertexInput=function(n,r,o){if(n!==null){var u=this.getEncoder(),c=n;o!==null&&u.setIndexBuffer(Mx(o.buffer),s_(c.indexFormat),o.offset);for(var p=0;p<r.length;p++){var g=r[p];g!==null&&u.setVertexBuffer(p,Mx(g.buffer),g.offset)}}},e.prototype.setBindings=function(n){var r=n,o=this.getEncoder();r.gpuBindGroup.forEach(function(u,c){u&&o.setBindGroup(c,r.gpuBindGroup[c])})},e.prototype.setStencilReference=function(n){this.gpuRenderPassEncoder.setStencilReference(n)},e.prototype.draw=function(n,r,o,u){this.getEncoder().draw(n,r,o,u)},e.prototype.drawIndexed=function(n,r,o,u,c){this.getEncoder().drawIndexed(n,r,o,u,c)},e.prototype.drawIndirect=function(n,r){this.getEncoder().drawIndirect(Mx(n),r)},e.prototype.drawIndexedIndirect=function(n,r){this.getEncoder().drawIndexedIndirect(Mx(n),r)},e.prototype.beginOcclusionQuery=function(n){this.gpuRenderPassEncoder.beginOcclusionQuery(n)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(n){this.gpuRenderPassEncoder.pushDebugGroup(n)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(n){this.gpuRenderPassEncoder.insertDebugMarker(n)},e.prototype.beginBundle=function(n){this.renderBundle=n},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(n){this.gpuRenderPassEncoder.executeBundles(n.map(function(r){return r.renderBundle}))},e.prototype.finish=function(){var n;(n=this.gpuRenderPassEncoder)===null||n===void 0||n.end(),this.gpuRenderPassEncoder=null;for(var r=0;r<this.gfxColorAttachment.length;r++){var o=this.gfxColorAttachment[r],u=this.gfxColorResolveTo[r];o!==null&&u!==null&&o.sampleCount===1&&this.copyAttachment(u,this.gfxColorAttachmentLevel[r],o,this.gfxColorResolveToLevel[r])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(n,r,o,u){_o(o.sampleCount===1);var c={texture:o.gpuTexture,mipLevel:u},p={texture:n.gpuTexture,mipLevel:r};_o(o.width>>>u===n.width>>>r),_o(o.height>>>u===n.height>>>r),_o(!!(o.usage&Mc.COPY_SRC)),_o(!!(n.usage&Mc.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(c,p,[n.width,n.height,1])},e}(),DZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=as.RenderPipeline,p.isCreatingAsync=!1,p.gpuRenderPipeline=null,p.descriptor=c,p.device.createRenderPipelineInternal(p,!1),p}return n.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},n}(xv),LZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=as.Sampler;var S=c.lodMinClamp,P=c.mipmapFilter===Ac.NO_MIP?c.lodMinClamp:c.lodMaxClamp,L=(p=c.maxAnisotropy)!==null&&p!==void 0?p:1;return L>1&&_o(c.minFilter===Al.BILINEAR&&c.magFilter===Al.BILINEAR&&c.mipmapFilter===Ac.LINEAR),y.gpuSampler=y.device.device.createSampler({addressModeU:K5(c.addressModeU),addressModeV:K5(c.addressModeV),addressModeW:K5((g=c.addressModeW)!==null&&g!==void 0?g:c.addressModeU),lodMinClamp:S,lodMaxClamp:P,minFilter:uN(c.minFilter),magFilter:uN(c.magFilter),mipmapFilter:lZ(c.mipmapFilter),compare:c.compareFunction!==void 0?IR(c.compareFunction):void 0,maxAnisotropy:L}),y}return n}(xv),OR=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=r.descriptor,p=r.skipCreate,g=r.sampleCount,y=e.call(this,{id:o,device:u})||this;y.type=as.Texture,y.flipY=!1;var S=c.format,P=c.dimension,L=c.width,Z=c.height,q=c.depthOrArrayLayers,ce=c.mipLevelCount,me=c.usage,be=c.pixelStore;return y.flipY=!!(be!=null&&be.unpackFlipY),y.device.createTextureShared({format:S,dimension:P!=null?P:Do.TEXTURE_2D,width:L,height:Z,depthOrArrayLayers:q!=null?q:1,mipLevelCount:ce!=null?ce:1,usage:me,sampleCount:g!=null?g:1},y,p),y}return n.prototype.textureFromImageBitmapOrCanvas=function(r,o,u){for(var c=o[0].width,p=o[0].height,g={size:{width:c,height:p,depthOrArrayLayers:u},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},y=r.createTexture(g),S=0;S<o.length;S++)r.queue.copyExternalImageToTexture({source:o[S],flipY:this.flipY},{texture:y,origin:[0,0,S]},[c,p]);return[y,c,p]},n.prototype.isImageBitmapOrCanvases=function(r){var o=r[0];return o instanceof ImageBitmap||o instanceof HTMLCanvasElement||o instanceof OffscreenCanvas},n.prototype.isVideo=function(r){var o=r[0];return o instanceof HTMLVideoElement},n.prototype.setImageData=function(r,o){var u,c=this,p=this.device.device,g,y,S;if(this.isImageBitmapOrCanvases(r))u=(0,w.CR)(this.textureFromImageBitmapOrCanvas(p,r,this.depthOrArrayLayers),3),g=u[0],y=u[1],S=u[2];else if(this.isVideo(r))g=p.importExternalTexture({source:r[0]});else{var P=pN(this.gpuTextureformat),L=Math.ceil(this.width/P.width)*P.length;r.forEach(function(Z){p.queue.writeTexture({texture:c.gpuTexture},Z,{bytesPerRow:L},{width:c.width,height:c.height})})}this.width=y,this.height=S,g&&(this.gpuTexture=g),this.gpuTextureView=this.gpuTexture.createView({dimension:sZ(this.dimension)})},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},n}(xv),FZ=function(e){(0,w.ZT)(n,e);function n(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=as.RenderBundle,c.renderBundleEncoder=c.device.device.createRenderBundleEncoder({colorFormats:[c.device.swapChainFormat]}),c}return n.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},n}(xv),BZ=function(){function e(n,r,o,u,c,p){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Mc.RENDER_ATTACHMENT|Mc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=cg.UPPER_LEFT,this.clipSpaceNearZ=_x.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=o,this.canvasContext=u,this.glsl_compile=c,this.WGSLComposer=p,this.fallbackTexture2D=this.createFallbackTexture(Do.TEXTURE_2D,vl.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Do.TEXTURE_2D,vl.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Do.TEXTURE_2D_ARRAY,vl.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Do.TEXTURE_3D,vl.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Do.TEXTURE_CUBE_MAP,vl.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Ah.REPEAT,addressModeV:Ah.REPEAT,minFilter:Al.POINT,magFilter:Al.POINT,mipmapFilter:Ac.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Ah.REPEAT,addressModeV:Ah.REPEAT,minFilter:Al.POINT,magFilter:Al.POINT,mipmapFilter:Ac.NEAREST,compareFunction:wo.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(g){console.error(g.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(n,r){this.swapChainWidth===n&&this.swapChainHeight===r||(this.swapChainWidth=n,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var n=this.canvasContext.getCurrentTexture(),r=n.createView(),o=new OR({id:0,device:this,descriptor:{format:Yr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Do.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return o.depthOrArrayLayers=1,o.sampleCount=1,o.gpuTexture=n,o.gpuTextureView=r,o.name="Onscreen",this.setResourceName(o,"Onscreen Texture"),o},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){_o(this.frameCommandEncoderPool.length===0)},e.prototype.endFrame=function(){_o(this.frameCommandEncoderPool.every(function(n){return n!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(n){return n.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(n){return new RZ({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createTexture=function(n){return new OR({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createSampler=function(n){return new LZ({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createRenderTarget=function(n){var r=new OR({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)((0,w.pi)({},n),{dimension:Do.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Mf.RENDER_TARGET}),sampleCount:n.sampleCount});return r.depthOrArrayLayers=1,r.type=as.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(n){var r=n,o=r.format,u=r.width,c=r.height,p=r.depthOrArrayLayers,g=r.sampleCount,y=r.mipLevelCount,S=r.gpuTexture,P=r.gpuTextureView,L=r.usage;_o(!!(L&Mc.RENDER_ATTACHMENT));var Z=new OR({id:this.getNextUniqueId(),device:this,descriptor:{format:o,width:u,height:c,depthOrArrayLayers:p,dimension:Do.TEXTURE_2D,mipLevelCount:y,usage:L},skipCreate:!0});return Z.depthOrArrayLayers=p,Z.sampleCount=g,Z.gpuTexture=S,Z.gpuTextureView=P,Z},e.prototype.createProgram=function(n){var r,o;return!((r=n.vertex)===null||r===void 0)&&r.glsl&&(n.vertex.glsl=g0(this.queryVendorInfo(),"vert",n.vertex.glsl)),!((o=n.fragment)===null||o===void 0)&&o.glsl&&(n.fragment.glsl=g0(this.queryVendorInfo(),"frag",n.fragment.glsl)),new vN({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createProgramSimple=function(n){return new vN({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createTextureShared=function(n,r,o){var u={width:n.width,height:n.height,depthOrArrayLayers:n.depthOrArrayLayers},c=n.mipLevelCount,p=q5(n.format),g=oZ(n.dimension),y=aZ(n.usage);if(r.gpuTextureformat=p,r.dimension=n.dimension,r.format=n.format,r.width=n.width,r.height=n.height,r.depthOrArrayLayers=n.depthOrArrayLayers,r.mipLevelCount=c,r.usage=y,r.sampleCount=n.sampleCount,!o){var S=this.device.createTexture({size:u,mipLevelCount:c,format:p,dimension:g,sampleCount:n.sampleCount,usage:y}),P=S.createView();r.gpuTexture=S,r.gpuTextureView=P}},e.prototype.getFallbackSampler=function(n){var r=n.formatKind;return r===vl.Depth&&n.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(n){var r=n.dimension,o=n.formatKind;if(r===Do.TEXTURE_2D)return o===vl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Do.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Do.TEXTURE_3D)return this.fallbackTexture3D;if(r===Do.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(n,r){var o=n===Do.TEXTURE_CUBE_MAP?6:1,u=r===vl.Float?Yr.U8_RGBA_NORM:Yr.D24;return this.createTexture({dimension:n,format:u,usage:Mf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1})},e.prototype.createBindings=function(n){return new MZ({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createInputLayout=function(n){return new OZ({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createComputePipeline=function(n){return new IZ({id:this.getNextUniqueId(),device:this,descriptor:n})},e.prototype.createRenderPipeline=function(n){return new DZ({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)({},n)})},e.prototype.createQueryPool=function(n,r){return new PZ({id:this.getNextUniqueId(),device:this,descriptor:{type:n,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(n,r){var o;if(n.gpuRenderPipeline===null){var u=n.descriptor,c=u.program,p=c.vertexStage,g=c.fragmentStage;if(!(p===null||g===null)){var y=u.megaStateDescriptor||{},S=y.stencilBack,P=y.stencilFront,L=(0,w._T)(y,["stencilBack","stencilFront"]),Z=Ex(u_);u.megaStateDescriptor=(0,w.pi)((0,w.pi)((0,w.pi)({},Z),{stencilBack:(0,w.pi)((0,w.pi)({},Z.stencilBack),S),stencilFront:(0,w.pi)((0,w.pi)({},Z.stencilFront),P)}),L);var q=u.megaStateDescriptor.attachmentsState[0];u.colorAttachmentFormats.forEach(function(zt,ar){u.megaStateDescriptor.attachmentsState[ar]||(u.megaStateDescriptor.attachmentsState[ar]=W6(void 0,q))});var ce=gZ((o=u.topology)!==null&&o!==void 0?o:Ql.TRIANGLES,u.megaStateDescriptor),me=xZ(u.colorAttachmentFormats,u.megaStateDescriptor),be=bZ(u.depthStencilAttachmentFormat,u.megaStateDescriptor),$e=void 0;u.inputLayout!==null&&($e=u.inputLayout.buffers);var ft=u.sampleCount,mt={layout:"auto",vertex:(0,w.pi)((0,w.pi)({},p),{buffers:$e}),primitive:ce,depthStencil:be,multisample:{count:ft},fragment:(0,w.pi)((0,w.pi)({},g),{targets:me})};n.gpuRenderPipeline=this.device.createRenderPipeline(mt)}}},e.prototype.createReadback=function(){return new kZ({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new FZ({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(n){var r=this.renderPassPool.pop();r===void 0&&(r=new gN(this));var o=this.frameCommandEncoderPool.pop();return o===void 0&&(o=this.device.createCommandEncoder()),r.beginRenderPass(o,n),r},e.prototype.createComputePass=function(){var n=this.computePassPool.pop();n===void 0&&(n=new dN);var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),n.beginComputePass(r),n},e.prototype.submitPass=function(n){var r=n;r instanceof gN?(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.renderPassPool.push(r)):r instanceof dN&&(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.computePassPool.push(r))},e.prototype.copySubTexture2D=function(n,r,o,u,c,p,g){var y=this.device.createCommandEncoder(),S=n,P=u,L={texture:P.gpuTexture,origin:[c,p,0],mipLevel:0,aspect:"all"},Z={texture:S.gpuTexture,origin:[r,o,0],mipLevel:0,aspect:"all"};_o(!!(P.usage&Mc.COPY_SRC)),_o(!!(S.usage&Mc.COPY_DST)),y.copyTextureToTexture(L,Z,[P.width,P.height,g||1]),this.device.queue.submit([y.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(n,r,o){if(CZ(n)){if(!this.featureTextureCompressionBC)return!1;var u=TZ(n);return r%u!==0||o%u!==0?!1:this.featureTextureCompressionBC}switch(n){case Yr.U16_RGBA_NORM:return!1;case Yr.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(n){var r=n;return r.descriptor},e.prototype.queryRenderTarget=function(n){var r=n;return r},e.prototype.setResourceName=function(n,r){if(n.name=r,n.type===as.Buffer){var o=n;o.gpuBuffer.label=r}else if(n.type===as.Texture){var o=n;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(n.type===as.RenderTarget){var o=n;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(n.type===as.Sampler){var o=n;o.gpuSampler.label=r}else if(n.type===as.RenderPipeline){var o=n;o.gpuRenderPipeline!==null&&(o.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(n,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(n){},e.prototype.pipelineQueryReady=function(n){var r=n;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(n){var r=n;this.createRenderPipelineInternal(r,!1)},e}(),NZ=function(){function e(n){this.pluginOptions=n}return e.prototype.createSwapChain=function(n){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S;return(0,w.Jh)(this,function(P){switch(P.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,P.label=1;case 1:return P.trys.push([1,3,,4]),o=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:o})];case 2:return r=P.sent(),[3,4];case 3:return u=P.sent(),console.log(u),[3,4];case 4:return r===null?[2,null]:(c=["depth32float-stencil8","texture-compression-bc","float32-filterable"],p=c.filter(function(L){return r.features.has(L)}),[4,r.requestDevice({requiredFeatures:p})]);case 5:if(g=P.sent(),g&&(y=this.pluginOptions.onContextLost,g.lost.then(function(){y&&y()})),g===null)return[2,null];if(S=n.getContext("webgpu"),!S)return[2,null];P.label=6;case 6:return P.trys.push([6,8,,9]),[4,sN(this.pluginOptions.shaderCompilerPath)];case 7:return P.sent(),[3,9];case 8:return P.sent(),[3,9];case 9:return[2,new BZ(r,g,n,S,tZ,zE&&new zE)]}})})},e}(),zZ=Aa.isPlainObject,UZ=Aa.isTypedArray,ZZ=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"destroyed",!1),(0,Ve.Z)(this,"uniforms",{}),this.reGl=n;var o=r.vs,u=r.fs,c=r.attributes,p=r.uniforms,g=r.primitive,y=r.count,S=r.elements,P=r.depth,L=r.cull,Z=r.instances,q={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:cg.LOWER_LEFT,clipSpaceNearZ:_x.NEGATIVE_ONE,supportMRT:!1},ce={};this.options=r,p&&(this.uniforms=this.extractUniforms(p),Object.keys(p).forEach(function(mt){ce[mt]=n.prop(mt)}));var me={};Object.keys(c).forEach(function(mt){me[mt]=c[mt].get()});var be=Fm(g0(q,"frag",u,null,!1)),$e=Fm(g0(q,"vert",o,null,!1)),ft={attributes:me,frag:be,uniforms:ce,vert:$e,colorMask:n.prop("colorMask"),lineWidth:1,blend:{enable:n.prop("blend.enable"),func:n.prop("blend.func"),equation:n.prop("blend.equation"),color:n.prop("blend.color")},stencil:{enable:n.prop("stencil.enable"),mask:n.prop("stencil.mask"),func:n.prop("stencil.func"),opFront:n.prop("stencil.opFront"),opBack:n.prop("stencil.opBack")},primitive:wz[g===void 0?Ct.TRIANGLES:g]};Z&&(ft.instances=Z),y?ft.count=y:S&&(ft.elements=S.get()),this.initDepthDrawParams({depth:P},ft),this.initCullDrawParams({cull:L},ft),this.drawCommand=n(ft),this.drawParams=ft}return(0,ct.Z)(e,[{key:"updateAttributesAndElements",value:function(r,o){var u={};Object.keys(r).forEach(function(c){u[c]=r[c].get()}),this.drawParams.attributes=u,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(r){var o={};Object.keys(r).forEach(function(u){o[u]=r[u].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(r){this.uniforms=(0,ae.Z)((0,ae.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var u=(0,ae.Z)((0,ae.Z)({},this.uniforms),this.extractUniforms(r.uniforms||{})),c={};Object.keys(u).forEach(function(p){var g=(0,vs.Z)(u[p]);g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT?c[p]=u[p]:c[p]=u[p].get()}),c.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(r),c.stencil=this.getStencilDrawParams(r),c.colorMask=this.getColorMaskDrawParams(r,o),this.drawCommand(c)}}},{key:"destroy",value:function(){var r;(r=this.drawParams)===null||r===void 0||(r=r.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(o){o==null||o.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r,o){var u=r.depth;u&&(o.depth={enable:u.enable===void 0?!0:!!u.enable,mask:u.mask===void 0?!0:!!u.mask,func:Mz[u.func||Ct.LESS],range:u.range||[0,1]})}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:vR[p&&p.srcRGB||Ct.SRC_ALPHA],srcAlpha:vR[p&&p.srcAlpha||Ct.SRC_ALPHA],dstRGB:vR[p&&p.dstRGB||Ct.ONE_MINUS_SRC_ALPHA],dstAlpha:vR[p&&p.dstAlpha||Ct.ONE_MINUS_SRC_ALPHA]},equation:{rgb:L6[g&&g.rgb||Ct.FUNC_ADD],alpha:L6[g&&g.alpha||Ct.FUNC_ADD]},color:S}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?-1:p,y=u.func,S=y===void 0?{cmp:Ct.ALWAYS,ref:0,mask:-1}:y,P=u.opFront,L=P===void 0?{fail:Ct.KEEP,zfail:Ct.KEEP,zpass:Ct.KEEP}:P,Z=u.opBack,q=Z===void 0?{fail:Ct.KEEP,zfail:Ct.KEEP,zpass:Ct.KEEP}:Z;return{enable:!!c,mask:g,func:(0,ae.Z)((0,ae.Z)({},S),{},{cmp:Rz[S.cmp]}),opFront:{fail:mx[L.fail],zfail:mx[L.zfail],zpass:mx[L.zpass]},opBack:{fail:mx[q.fail],zfail:mx[q.zfail],zpass:mx[q.zpass]}}}},{key:"getColorMaskDrawParams",value:function(r,o){var u=r.stencil,c=u!=null&&u.enable&&u.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0];return c}},{key:"initCullDrawParams",value:function(r,o){var u=r.cull;if(u){var c=u.enable,p=u.face,g=p===void 0?Ct.BACK:p;o.cull={enable:!!c,face:Iz[g]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||UZ(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}zZ(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}(),VZ=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?Ct.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,S=y===void 0?!1:y,P=r.format,L=P===void 0?Ct.RGBA:P,Z=r.mipmap,q=Z===void 0?!1:Z,ce=r.wrapS,me=ce===void 0?Ct.CLAMP_TO_EDGE:ce,be=r.wrapT,$e=be===void 0?Ct.CLAMP_TO_EDGE:be,ft=r.aniso,mt=ft===void 0?0:ft,zt=r.alignment,ar=zt===void 0?1:zt,nr=r.premultiplyAlpha,Yt=nr===void 0?!1:nr,Cr=r.mag,Nr=Cr===void 0?Ct.NEAREST:Cr,nn=r.min,an=nn===void 0?Ct.NEAREST:nn,Nn=r.colorSpace,jn=Nn===void 0?Ct.BROWSER_DEFAULT_WEBGL:Nn,di=r.x,Ua=di===void 0?0:di,Co=r.y,os=Co===void 0?0:Co,nu=r.copy,pu=nu===void 0?!1:nu;this.width=p,this.height=g;var cf={width:p,height:g,type:V5[c],format:Cz[L],wrapS:D6[me],wrapT:D6[$e],mag:k6[Nr],min:k6[an],alignment:ar,flipY:S,colorSpace:Az[jn],premultiplyAlpha:Yt,aniso:mt,x:Ua,y:os,copy:pu};o&&(cf.data=o),typeof q=="number"?cf.mipmap=Tz[q]:typeof q=="boolean"&&(cf.mipmap=q),this.texture=n.texture(cf)}return(0,ct.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(r)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.texture.resize(o,u),this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),mN,yN,jZ=(mN=(0,kt.b2)(),mN(yN=function(){function e(){var n=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"uniformBuffers",[]),(0,Ve.Z)(this,"queryVerdorInfo",function(){return"WebGL1"}),(0,Ve.Z)(this,"createModel",function(r){return new ZZ(n.gl,r)}),(0,Ve.Z)(this,"createAttribute",function(r){return new Ez(n.gl,r)}),(0,Ve.Z)(this,"createBuffer",function(r){return new Oz(n.gl,r)}),(0,Ve.Z)(this,"createElements",function(r){return new Pz(n.gl,r)}),(0,Ve.Z)(this,"createTexture2D",function(r){return new VZ(n.gl,r)}),(0,Ve.Z)(this,"createFramebuffer",function(r){return new kz(n.gl,r)}),(0,Ve.Z)(this,"useFramebuffer",function(r,o){n.gl({framebuffer:r?r.get():null})(o)}),(0,Ve.Z)(this,"useFramebufferAsync",function(){var r=(0,pn.Z)(Jt().mark(function o(u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:n.gl({framebuffer:u?u.get():null})(c);case 1:case"end":return g.stop()}},o)}));return function(o,u){return r.apply(this,arguments)}}()),(0,Ve.Z)(this,"clear",function(r){var o,u=r.color,c=r.depth,p=r.stencil,g=r.framebuffer,y=g===void 0?null:g,S={color:u,depth:c,stencil:p};S.framebuffer=y===null?y:y.get(),(o=n.gl)===null||o===void 0||o.clear(S)}),(0,Ve.Z)(this,"viewport",function(r){var o=r.x,u=r.y,c=r.width,p=r.height;n.gl._gl.viewport(o,u,c,p),n.width=c,n.height=p,n.gl._refresh()}),(0,Ve.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y={x:u,y:c,width:p,height:g};return o&&(y.framebuffer=o.get()),n.gl.read(y)}),(0,Ve.Z)(this,"readPixelsAsync",function(){var r=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",n.readPixels(u));case 1:case"end":return p.stop()}},o)}));return function(o){return r.apply(this,arguments)}}()),(0,Ve.Z)(this,"getViewportSize",function(){return{width:n.gl._gl.drawingBufferWidth,height:n.gl._gl.drawingBufferHeight}}),(0,Ve.Z)(this,"getContainer",function(){var r;return(r=n.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Ve.Z)(this,"getCanvas",function(){return n.canvas}),(0,Ve.Z)(this,"getGLContext",function(){return n.gl._gl}),(0,Ve.Z)(this,"destroy",function(){var r;n.canvas=null,(r=n.gl)===null||r===void 0||(r=r._gl)===null||r===void 0||(r=r.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext(),n.gl.destroy(),n.gl=null})}return(0,ct.Z)(e,[{key:"init",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c,p){var g=this;return Jt().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.canvas=u,!p){S.next=5;break}this.gl=p,S.next=8;break;case 5:return S.next=7,new Promise(function(P,L){Sz()({canvas:g.canvas,attributes:{alpha:!0,antialias:c.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:c.preserveDrawingBuffer,stencil:c.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(q,ce){(q||!ce)&&L(q),P(ce)}})});case 7:this.gl=S.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return S.stop()}},o,this)}));function r(o,u,c){return n.apply(this,arguments)}return r}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var r=this.getGLContext();r.disable(r.CULL_FACE)}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}())||yN),HZ=function(){function e(n,r){(0,It.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor,S=r.shaderLocation;this.buffer=o,this.attribute={shaderLocation:S,buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,ct.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),y0,hm,Ix,UE,ZE,hg,PR,l_,Rf,pg,dg,kR=(y0={},(0,Ve.Z)(y0,Ct.FLOAT,Float32Array),(0,Ve.Z)(y0,Ct.UNSIGNED_BYTE,Uint8Array),(0,Ve.Z)(y0,Ct.SHORT,Int16Array),(0,Ve.Z)(y0,Ct.UNSIGNED_SHORT,Uint16Array),(0,Ve.Z)(y0,Ct.INT,Int32Array),(0,Ve.Z)(y0,Ct.UNSIGNED_INT,Uint32Array),y0),WZ=(hm={},(0,Ve.Z)(hm,Ct.POINTS,Ql.POINTS),(0,Ve.Z)(hm,Ct.LINES,Ql.LINES),(0,Ve.Z)(hm,Ct.LINE_LOOP,Ql.LINES),(0,Ve.Z)(hm,Ct.LINE_STRIP,Ql.LINE_STRIP),(0,Ve.Z)(hm,Ct.TRIANGLES,Ql.TRIANGLES),(0,Ve.Z)(hm,Ct.TRIANGLE_FAN,Ql.TRIANGLES),(0,Ve.Z)(hm,Ct.TRIANGLE_STRIP,Ql.TRIANGLE_STRIP),hm),GZ=(Ix={},(0,Ve.Z)(Ix,1,Yr.F32_R),(0,Ve.Z)(Ix,2,Yr.F32_RG),(0,Ve.Z)(Ix,3,Yr.F32_RGB),(0,Ve.Z)(Ix,4,Yr.F32_RGBA),Ix),$Z=(UE={},(0,Ve.Z)(UE,Ct.STATIC_DRAW,_v.STATIC),(0,Ve.Z)(UE,Ct.DYNAMIC_DRAW,_v.DYNAMIC),(0,Ve.Z)(UE,Ct.STREAM_DRAW,_v.DYNAMIC),UE),_N=(ZE={},(0,Ve.Z)(ZE,Ct.REPEAT,Ah.REPEAT),(0,Ve.Z)(ZE,Ct.CLAMP_TO_EDGE,Ah.CLAMP_TO_EDGE),(0,Ve.Z)(ZE,Ct.MIRRORED_REPEAT,Ah.MIRRORED_REPEAT),ZE),XZ=(hg={},(0,Ve.Z)(hg,Ct.NEVER,wo.NEVER),(0,Ve.Z)(hg,Ct.ALWAYS,wo.ALWAYS),(0,Ve.Z)(hg,Ct.LESS,wo.LESS),(0,Ve.Z)(hg,Ct.LEQUAL,wo.LEQUAL),(0,Ve.Z)(hg,Ct.GREATER,wo.GREATER),(0,Ve.Z)(hg,Ct.GEQUAL,wo.GEQUAL),(0,Ve.Z)(hg,Ct.EQUAL,wo.EQUAL),(0,Ve.Z)(hg,Ct.NOTEQUAL,wo.NOTEQUAL),hg),YZ=(PR={},(0,Ve.Z)(PR,Ct.FRONT,op.FRONT),(0,Ve.Z)(PR,Ct.BACK,op.BACK),PR),xN=(l_={},(0,Ve.Z)(l_,Ct.FUNC_ADD,$c.ADD),(0,Ve.Z)(l_,Ct.MIN_EXT,$c.MIN),(0,Ve.Z)(l_,Ct.MAX_EXT,$c.MAX),(0,Ve.Z)(l_,Ct.FUNC_SUBTRACT,$c.SUBSTRACT),(0,Ve.Z)(l_,Ct.FUNC_REVERSE_SUBTRACT,$c.REVERSE_SUBSTRACT),l_),DR=(Rf={},(0,Ve.Z)(Rf,Ct.ZERO,Zo.ZERO),(0,Ve.Z)(Rf,Ct.ONE,Zo.ONE),(0,Ve.Z)(Rf,Ct.SRC_COLOR,Zo.SRC),(0,Ve.Z)(Rf,Ct.ONE_MINUS_SRC_COLOR,Zo.ONE_MINUS_SRC),(0,Ve.Z)(Rf,Ct.SRC_ALPHA,Zo.SRC_ALPHA),(0,Ve.Z)(Rf,Ct.ONE_MINUS_SRC_ALPHA,Zo.ONE_MINUS_SRC_ALPHA),(0,Ve.Z)(Rf,Ct.DST_COLOR,Zo.DST),(0,Ve.Z)(Rf,Ct.ONE_MINUS_DST_COLOR,Zo.ONE_MINUS_DST),(0,Ve.Z)(Rf,Ct.DST_ALPHA,Zo.DST_ALPHA),(0,Ve.Z)(Rf,Ct.ONE_MINUS_DST_ALPHA,Zo.ONE_MINUS_DST_ALPHA),(0,Ve.Z)(Rf,Ct.CONSTANT_COLOR,Zo.CONST),(0,Ve.Z)(Rf,Ct.ONE_MINUS_CONSTANT_COLOR,Zo.ONE_MINUS_CONSTANT),(0,Ve.Z)(Rf,Ct.CONSTANT_ALPHA,Zo.CONST),(0,Ve.Z)(Rf,Ct.ONE_MINUS_CONSTANT_ALPHA,Zo.ONE_MINUS_CONSTANT),(0,Ve.Z)(Rf,Ct.SRC_ALPHA_SATURATE,Zo.SRC_ALPHA_SATURATE),Rf),Ox=(pg={},(0,Ve.Z)(pg,Ct.REPLACE,dl.REPLACE),(0,Ve.Z)(pg,Ct.KEEP,dl.KEEP),(0,Ve.Z)(pg,Ct.ZERO,dl.ZERO),(0,Ve.Z)(pg,Ct.INVERT,dl.INVERT),(0,Ve.Z)(pg,Ct.INCR,dl.INCREMENT_CLAMP),(0,Ve.Z)(pg,Ct.DECR,dl.DECREMENT_CLAMP),(0,Ve.Z)(pg,Ct.INCR_WRAP,dl.INCREMENT_WRAP),(0,Ve.Z)(pg,Ct.DECR_WRAP,dl.DECREMENT_WRAP),pg),qZ=(dg={},(0,Ve.Z)(dg,Ct.ALWAYS,wo.ALWAYS),(0,Ve.Z)(dg,Ct.EQUAL,wo.EQUAL),(0,Ve.Z)(dg,Ct.GEQUAL,wo.GEQUAL),(0,Ve.Z)(dg,Ct.GREATER,wo.GREATER),(0,Ve.Z)(dg,Ct.LEQUAL,wo.LEQUAL),(0,Ve.Z)(dg,Ct.LESS,wo.LESS),(0,Ve.Z)(dg,Ct.NEVER,wo.NEVER),(0,Ve.Z)(dg,Ct.NOTEQUAL,wo.NOTEQUAL),dg),KZ={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function LR(e){return Object.prototype.toString.call(e)in KZ}function QZ(e,n){for(var r=e.length,o=Math.ceil(r/3),u=r+o,c=new Float32Array(u),p=0;p<u;p+=4)c[p]=e[p/4*3],c[p+1]=e[p/4*3+1],c[p+2]=e[p/4*3+2],c[p+3]=n;return c}var JZ=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type,p=r.isUBO,g=r.label,y;LR(o)?y=o:y=new kR[this.type||Ct.FLOAT](o),this.type=c,this.size=y.byteLength,this.buffer=n.createBuffer({viewOrSize:y,usage:p?ru.UNIFORM:ru.VERTEX,hint:$Z[u||Ct.STATIC_DRAW]}),g&&n.setResourceName(this.buffer,g)}return(0,ct.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset,c;LR(o)?c=o:c=new kR[this.type||Ct.FLOAT](o),this.buffer.setSubData(u,new Uint8Array(c.buffer))}}]),e}();function bN(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=e9(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function e9(e,n){if(e){if(typeof e=="string")return SN(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SN(e,n)}}function SN(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function zs(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e+=n,e+=e<<10,e+=e>>>6,e>>>0}function EN(e){return e+=e<<3,e^=e>>>11,e+=e<<15,e>>>0}function wN(e){return 0}var t9=(0,ct.Z)(function e(){(0,It.Z)(this,e),(0,Ve.Z)(this,"keys",[]),(0,Ve.Z)(this,"values",[])}),FR=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"buckets",new Map),this.keyEqualFunc=n,this.keyHashFunc=r}return(0,ct.Z)(e,[{key:"findBucketIndex",value:function(r,o){for(var u=0;u<r.keys.length;u++)if(this.keyEqualFunc(o,r.keys[u]))return u;return-1}},{key:"findBucket",value:function(r){var o=this.keyHashFunc(r);return this.buckets.get(o)}},{key:"get",value:function(r){var o=this.findBucket(r);if(o===void 0)return null;var u=this.findBucketIndex(o,r);return u<0?null:o.values[u]}},{key:"add",value:function(r,o){var u=this.keyHashFunc(r);this.buckets.get(u)===void 0&&this.buckets.set(u,new t9);var c=this.buckets.get(u);c.keys.push(r),c.values.push(o)}},{key:"delete",value:function(r){var o=this.findBucket(r);if(o!==void 0){var u=this.findBucketIndex(o,r);u!==-1&&(o.keys.splice(u,1),o.values.splice(u,1))}}},{key:"clear",value:function(){this.buckets.clear()}},{key:"size",value:function(){var r=0,o=bN(this.buckets.values()),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;r+=c.values.length}}catch(p){o.e(p)}finally{o.f()}return r}},{key:"values",value:Jt().mark(function n(){var r,o,u,c;return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:r=bN(this.buckets.values()),g.prev=1,r.s();case 3:if((o=r.n()).done){g.next=14;break}u=o.value,c=u.values.length-1;case 6:if(!(c>=0)){g.next=12;break}return g.next=9,u.values[c];case 9:c--,g.next=6;break;case 12:g.next=3;break;case 14:g.next=19;break;case 16:g.prev=16,g.t0=g.catch(1),r.e(g.t0);case 19:return g.prev=19,r.f(),g.finish(19);case 22:case"end":return g.stop()}},n,this,[[1,16,19,22]])})}]),e}();function BR(e,n){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=r9(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function r9(e,n){if(e){if(typeof e=="string")return CN(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CN(e,n)}}function CN(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function TN(e,n){return e=zs(e,n.blendMode),e=zs(e,n.blendSrcFactor),e=zs(e,n.blendDstFactor),e}function n9(e,n){return e=TN(e,n.rgbBlendState),e=TN(e,n.alphaBlendState),e=zs(e,n.channelWriteMask),e}function i9(e,n){return e=zs(e,n.r<<24|n.g<<16|n.b<<8|n.a),e}function a9(e,n){for(var r,o,u,c,p,g,y,S,P=0;P<n.attachmentsState.length;P++)e=n9(e,n.attachmentsState[P]);return e=i9(e,n.blendConstant||yR),e=zs(e,n.depthCompare),e=zs(e,n.depthWrite?1:0),e=zs(e,(r=n.stencilFront)===null||r===void 0?void 0:r.compare),e=zs(e,(o=n.stencilFront)===null||o===void 0?void 0:o.passOp),e=zs(e,(u=n.stencilFront)===null||u===void 0?void 0:u.failOp),e=zs(e,(c=n.stencilFront)===null||c===void 0?void 0:c.depthFailOp),e=zs(e,(p=n.stencilBack)===null||p===void 0?void 0:p.compare),e=zs(e,(g=n.stencilBack)===null||g===void 0?void 0:g.passOp),e=zs(e,(y=n.stencilBack)===null||y===void 0?void 0:y.failOp),e=zs(e,(S=n.stencilBack)===null||S===void 0?void 0:S.depthFailOp),e=zs(e,n.stencilWrite?1:0),e=zs(e,n.cullMode),e=zs(e,n.frontFace?1:0),e=zs(e,n.polygonOffset?1:0),e}function o9(e){var n=0;n=zs(n,e.program.id),e.inputLayout!==null&&(n=zs(n,e.inputLayout.id)),n=a9(n,e.megaStateDescriptor);for(var r=0;r<e.colorAttachmentFormats.length;r++)n=zs(n,e.colorAttachmentFormats[r]||0);return n=zs(n,e.depthStencilAttachmentFormat||0),EN(n)}function s9(e){var n=0;if(e.samplerBindings)for(var r=0;r<e.samplerBindings.length;r++){var o=e.samplerBindings[r];o!==null&&o.texture!==null&&(n=zs(n,o.texture.id))}if(e.uniformBufferBindings)for(var u=0;u<e.uniformBufferBindings.length;u++){var c=e.uniformBufferBindings[u];c!==null&&c.buffer!==null&&(n=zs(n,c.buffer.id),n=zs(n,c.binding),n=zs(n,c.offset),n=zs(n,c.size))}if(e.storageBufferBindings)for(var p=0;p<e.storageBufferBindings.length;p++){var g=e.storageBufferBindings[p];g!==null&&g.buffer!==null&&(n=zs(n,g.buffer.id),n=zs(n,g.binding),n=zs(n,g.offset),n=zs(n,g.size))}if(e.storageTextureBindings)for(var y=0;y<e.storageTextureBindings.length;y++){var S=e.storageTextureBindings[y];S!==null&&S.texture!==null&&(n=zs(n,S.texture.id),n=zs(n,S.binding))}return EN(n)}function u9(e,n){var r,o,u,c;return((r=e.vertex)===null||r===void 0?void 0:r.glsl)===((o=n.vertex)===null||o===void 0?void 0:o.glsl)&&((u=e.fragment)===null||u===void 0?void 0:u.glsl)===((c=n.fragment)===null||c===void 0?void 0:c.glsl)}function l9(e){var n,r;return{vertex:{glsl:(n=e.vertex)===null||n===void 0?void 0:n.glsl},fragment:{glsl:(r=e.fragment)===null||r===void 0?void 0:r.glsl}}}var c9=function(){function e(n){(0,It.Z)(this,e),(0,Ve.Z)(this,"bindingsCache",new FR(tU,s9)),(0,Ve.Z)(this,"renderPipelinesCache",new FR(aU,o9)),(0,Ve.Z)(this,"inputLayoutsCache",new FR(uU,wN)),(0,Ve.Z)(this,"programCache",new FR(u9,wN)),this.device=n}return(0,ct.Z)(e,[{key:"createBindings",value:function(r){var o=this.bindingsCache.get(r);if(o===null){var u,c=fU(r);c.uniformBufferBindings=(u=c.uniformBufferBindings)===null||u===void 0?void 0:u.filter(function(p){var g=p.size;return g&&g>0}),o=this.device.createBindings(c),this.bindingsCache.add(c,o)}return o}},{key:"createRenderPipeline",value:function(r){var o=this.renderPipelinesCache.get(r);if(o===null){var u=hU(r);u.colorAttachmentFormats=u.colorAttachmentFormats.filter(function(c){return c}),o=this.device.createRenderPipeline(u),this.renderPipelinesCache.add(u,o)}return o}},{key:"createInputLayout",value:function(r){r.vertexBufferDescriptors=r.vertexBufferDescriptors.filter(function(c){return!!c});var o=this.inputLayoutsCache.get(r);if(o===null){var u=vU(r);o=this.device.createInputLayout(u),this.inputLayoutsCache.add(u,o)}return o}},{key:"createProgram",value:function(r){var o=this.programCache.get(r);if(o===null){var u=l9(r);o=this.device.createProgram(r),this.programCache.add(u,o)}return o}},{key:"destroy",value:function(){var r=BR(this.bindingsCache.values()),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.destroy()}}catch(ce){r.e(ce)}finally{r.f()}var c=BR(this.renderPipelinesCache.values()),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;g.destroy()}}catch(ce){c.e(ce)}finally{c.f()}var y=BR(this.inputLayoutsCache.values()),S;try{for(y.s();!(S=y.n()).done;){var P=S.value;P.destroy()}}catch(ce){y.e(ce)}finally{y.f()}var L=BR(this.programCache.values()),Z;try{for(L.s();!(Z=L.n()).done;){var q=Z.value;q.destroy()}}catch(ce){L.e(ce)}finally{L.f()}this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}}]),e}(),f9=function(){function e(n,r){(0,It.Z)(this,e);var o=r.data,u=r.type,c=r.count,p=c===void 0?0:c,g;LR(o)?g=o:g=new kR[this.type||Ct.UNSIGNED_INT](o),this.type=u,this.count=p,this.indexBuffer=n.createBuffer({viewOrSize:g,usage:ru.INDEX})}return(0,ct.Z)(e,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(r){var o=r.data,u;LR(o)?u=o:u=new kR[this.type||Ct.UNSIGNED_INT](o),this.indexBuffer.setSubData(0,new Uint8Array(u.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),e}();function AN(e){return!!(e&&e.texture)}var MN=function(){function e(n,r){(0,It.Z)(this,e),(0,Ve.Z)(this,"isDestroy",!1),this.device=n,this.options=r;var o=r.wrapS,u=o===void 0?Ct.CLAMP_TO_EDGE:o,c=r.wrapT,p=c===void 0?Ct.CLAMP_TO_EDGE:c,g=r.aniso,y=r.mipmap,S=y===void 0?!1:y,P=r.mag,L=P===void 0?Ct.NEAREST:P,Z=r.min,q=Z===void 0?Ct.NEAREST:Z;this.createTexture(r),this.sampler=n.createSampler({addressModeU:_N[u],addressModeV:_N[p],minFilter:q===Ct.NEAREST?Al.POINT:Al.BILINEAR,magFilter:L===Ct.NEAREST?Al.POINT:Al.BILINEAR,mipmapFilter:Ac.NO_MIP,maxAnisotropy:g})}return(0,ct.Z)(e,[{key:"createTexture",value:function(r){var o=r.type,u=o===void 0?Ct.UNSIGNED_BYTE:o,c=r.width,p=r.height,g=r.flipY,y=g===void 0?!1:g,S=r.format,P=S===void 0?Ct.RGBA:S,L=r.aniso,Z=r.alignment,q=Z===void 0?1:Z,ce=r.usage,me=ce===void 0?Zc.SAMPLED:ce,be=r.unorm,$e=be===void 0?!1:be,ft=r.label,mt=r.data;this.width=c,this.height=p;var zt=Yr.U8_RGBA_RT;if(u===Ct.UNSIGNED_BYTE&&P===Ct.RGBA)zt=$e?Yr.U8_RGBA_NORM:Yr.U8_RGBA_RT;else if(u===Ct.UNSIGNED_BYTE&&P===Ct.LUMINANCE)zt=Yr.U8_LUMINANCE;else if(u===Ct.FLOAT&&P===Ct.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(mt&&(mt=QZ(mt,0)),zt=Yr.F32_RGBA):zt=Yr.F32_RGB;else if(u===Ct.FLOAT&&P===Ct.RGBA)zt=Yr.F32_RGBA;else if(u===Ct.FLOAT&&P===Ct.RED)zt=Yr.F32_R;else throw new Error("create texture error, type: ".concat(u,", format: ").concat(P));this.texture=this.device.createTexture({format:zt,width:c,height:p,usage:me===Zc.SAMPLED?Mf.SAMPLED:Mf.RENDER_TARGET,pixelStore:{unpackFlipY:y,packAlignment:q},mipLevelCount:1}),ft&&this.device.setResourceName(this.texture,ft),mt&&this.texture.setImageData([mt])}},{key:"get",value:function(){return this.texture}},{key:"update",value:function(r){var o=r.data;this.texture.setImageData([o])}},{key:"bind",value:function(){}},{key:"resize",value:function(r){var o=r.width,u=r.height;(this.width!==o||this.height!==u)&&this.destroy(),this.options.width=o,this.options.height=u,this.createTexture(this.options),this.isDestroy=!1}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy&&!this.texture.destroyed){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),RN=function(){function e(n,r){(0,It.Z)(this,e),this.device=n,this.options=r,this.createColorRenderTarget(),this.createDepthRenderTarget()}return(0,ct.Z)(e,[{key:"createColorRenderTarget",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.options,u=o.width,c=o.height,p=o.color;p&&(AN(p)?(r&&p.resize({width:u,height:c}),this.colorTexture=p.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=p.width,this.height=p.height):u&&c&&(this.colorTexture=this.device.createTexture({format:Yr.U8_RGBA_RT,usage:Mf.RENDER_TARGET,width:u,height:c}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=u,this.height=c))}},{key:"createDepthRenderTarget",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.options,u=o.width,c=o.height,p=o.depth;p&&(AN(p)?(r&&p.resize({width:u,height:c}),this.depthTexture=p.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=p.width,this.height=p.height):u&&c&&(this.depthTexture=this.device.createTexture({format:Yr.D24_S8,usage:Mf.RENDER_TARGET,width:u,height:c}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=u,this.height=c))}},{key:"get",value:function(){return this.colorRenderTarget}},{key:"destroy",value:function(){var r,o;(r=this.colorRenderTarget)===null||r===void 0||r.destroy(),(o=this.depthRenderTarget)===null||o===void 0||o.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;(this.width!==o||this.height!==u)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=o,this.options.height=u,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}}]),e}(),h9=Aa.isPlainObject,p9=Aa.isTypedArray,d9=function(){function e(n,r,o){var u=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"destroyed",!1),(0,Ve.Z)(this,"uniforms",{}),(0,Ve.Z)(this,"vertexBuffers",[]),this.device=n,this.options=r,this.service=o;var c=r.vs,p=r.fs,g=r.attributes,y=r.uniforms,S=r.count,P=r.elements,L=r.diagnosticDerivativeUniformityEnabled;this.options=r;var Z=L?"":this.service.viewportOrigin===cg.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=o.renderCache.createProgram({vertex:{glsl:c},fragment:{glsl:p,postprocess:function($e){return Z+$e}}}),y&&(this.uniforms=this.extractUniforms(y));var q=[],ce=0;Object.keys(g).forEach(function(be){var $e=g[be],ft=$e.get();u.vertexBuffers.push(ft.get());var mt=$e.attribute,zt=mt.offset,ar=zt===void 0?0:zt,nr=mt.stride,Yt=nr===void 0?0:nr,Cr=mt.size,Nr=Cr===void 0?1:Cr,nn=mt.divisor,an=nn===void 0?0:nn,Nn=mt.shaderLocation,jn=Nn===void 0?0:Nn;q.push({arrayStride:Yt||Nr*4,stepMode:o_.VERTEX,attributes:[{format:GZ[Nr],shaderLocation:jn,offset:ar,divisor:an}]}),ce=ft.size/Nr}),S||(this.options.count=ce),P&&(this.indexBuffer=P.get());var me=o.renderCache.createInputLayout({vertexBufferDescriptors:q,indexBufferFormat:P?Yr.U32_R:null,program:this.program});this.inputLayout=me,this.pipeline=this.createPipeline(r)}return(0,ct.Z)(e,[{key:"createPipeline",value:function(r,o){var u=r.primitive,c=u===void 0?Ct.TRIANGLES:u,p=r.depth,g=r.cull,y=r.blend,S=r.stencil,P=this.initDepthDrawParams({depth:p}),L=!!(P&&P.enable),Z=this.initCullDrawParams({cull:g}),q=!!(Z&&Z.enable),ce=this.getBlendDrawParams({blend:y}),me=!!(ce&&ce.enable),be=this.getStencilDrawParams({stencil:S}),$e=!!(be&&be.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:WZ[c],colorAttachmentFormats:[Yr.U8_RGBA_RT],depthStencilAttachmentFormat:Yr.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:Xc.ALL,rgbBlendState:{blendMode:$c.ADD,blendSrcFactor:Zo.ONE,blendDstFactor:Zo.ZERO},alphaBlendState:{blendMode:$c.ADD,blendSrcFactor:Zo.ONE,blendDstFactor:Zo.ZERO}}:{channelWriteMask:$e&&be.opFront.zpass===dl.REPLACE?Xc.NONE:Xc.ALL,rgbBlendState:{blendMode:me&&ce.equation.rgb||$c.ADD,blendSrcFactor:me&&ce.func.srcRGB||Zo.SRC_ALPHA,blendDstFactor:me&&ce.func.dstRGB||Zo.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:me&&ce.equation.alpha||$c.ADD,blendSrcFactor:me&&ce.func.srcAlpha||Zo.ONE,blendDstFactor:me&&ce.func.dstAlpha||Zo.ONE}}],blendConstant:me?yR:void 0,depthWrite:L,depthCompare:L&&P.func||wo.LESS,cullMode:q&&Z.face||op.NONE,stencilWrite:$e,stencilFront:{compare:$e?be.func.cmp:wo.ALWAYS,passOp:be.opFront.zpass,failOp:be.opFront.fail,depthFailOp:be.opFront.zfail,mask:be.opFront.mask},stencilBack:{compare:$e?be.func.cmp:wo.ALWAYS,passOp:be.opBack.zpass,failOp:be.opBack.fail,depthFailOp:be.opBack.zfail,mask:be.opBack.mask}}})}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(r){this.uniforms=(0,ae.Z)((0,ae.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){var u=this,c=(0,ae.Z)((0,ae.Z)({},this.options),r),p=c.count,g=p===void 0?0:p,y=c.instances,S=c.elements,P=c.uniforms,L=P===void 0?{}:P,Z=c.uniformBuffers,q=c.textures;this.uniforms=(0,ae.Z)((0,ae.Z)({},this.uniforms),this.extractUniforms(L));var ce=this.service,me=ce.renderPass,be=ce.currentFramebuffer,$e=ce.width,ft=ce.height,mt=ce.renderCache;this.pipeline=this.createPipeline(c,o);var zt=this.service.device,ar=zt.swapChainHeight;if(zt.swapChainHeight=(be==null?void 0:be.height)||ft,me.setViewport(0,0,(be==null?void 0:be.width)||$e,(be==null?void 0:be.height)||ft),zt.swapChainHeight=ar,me.setPipeline(this.pipeline),me.setStencilReference(1),me.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(Yt){return{buffer:Yt}}),S?{buffer:this.indexBuffer,offset:0}:null),Z&&(this.bindings=mt.createBindings({pipeline:this.pipeline,uniformBufferBindings:Z.map(function(Yt,Cr){var Nr=Yt;return{binding:Cr,buffer:Nr.get(),size:Nr.size}}),samplerBindings:q==null?void 0:q.map(function(Yt){return{texture:Yt.texture,sampler:Yt.sampler}})})),this.bindings&&(me.setBindings(this.bindings),Object.keys(this.uniforms).forEach(function(Yt){var Cr=u.uniforms[Yt];Cr instanceof MN?u.uniforms[Yt]=Cr.get():Cr instanceof RN&&(u.uniforms[Yt]=Cr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),S){var nr=S.count;nr===0?me.draw(g,y):me.drawIndexed(nr,y)}else me.draw(g,y)}},{key:"destroy",value:function(){var r,o,u;this.program.destroy(),(r=this.vertexBuffers)===null||r===void 0||r.forEach(function(c){return c.destroy()}),(o=this.indexBuffer)===null||o===void 0||o.destroy(),(u=this.bindings)===null||u===void 0||u.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r){var o=r.depth;if(o)return{enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:XZ[o.func||Ct.LESS],range:o.range||[0,1]}}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:DR[p&&p.srcRGB||Ct.SRC_ALPHA],srcAlpha:DR[p&&p.srcAlpha||Ct.SRC_ALPHA],dstRGB:DR[p&&p.dstRGB||Ct.ONE_MINUS_SRC_ALPHA],dstAlpha:DR[p&&p.dstAlpha||Ct.ONE_MINUS_SRC_ALPHA]},equation:{rgb:xN[g&&g.rgb||Ct.FUNC_ADD],alpha:xN[g&&g.alpha||Ct.FUNC_ADD]},color:S}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?4294967295:p,y=u.func,S=y===void 0?{cmp:Ct.ALWAYS,ref:0,mask:4294967295}:y,P=u.opFront,L=P===void 0?{fail:Ct.KEEP,zfail:Ct.KEEP,zpass:Ct.KEEP}:P,Z=u.opBack,q=Z===void 0?{fail:Ct.KEEP,zfail:Ct.KEEP,zpass:Ct.KEEP}:Z;return{enable:!!c,mask:g,func:(0,ae.Z)((0,ae.Z)({},S),{},{cmp:qZ[S.cmp]}),opFront:{fail:Ox[L.fail],zfail:Ox[L.zfail],zpass:Ox[L.zpass],mask:S.mask},opBack:{fail:Ox[q.fail],zfail:Ox[q.zfail],zpass:Ox[q.zpass],mask:S.mask}}}},{key:"initCullDrawParams",value:function(r){var o=r.cull;if(o){var u=o.enable,c=o.face,p=c===void 0?Ct.BACK:c;return{enable:!!u,face:YZ[p]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||p9(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}h9(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}();function v9(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var IN,ON,NR=Aa.isUndefined,g9=(IN=(0,kt.b2)(),IN(ON=function(){function e(){var n=this;(0,It.Z)(this,e),(0,Ve.Z)(this,"uniformBuffers",[]),(0,Ve.Z)(this,"queryVerdorInfo",function(){return n.device.queryVendorInfo().platformString}),(0,Ve.Z)(this,"createModel",function(r){return new d9(n.device,r,n)}),(0,Ve.Z)(this,"createAttribute",function(r){return new HZ(n.device,r)}),(0,Ve.Z)(this,"createBuffer",function(r){return new JZ(n.device,r)}),(0,Ve.Z)(this,"createElements",function(r){return new f9(n.device,r)}),(0,Ve.Z)(this,"createTexture2D",function(r){return new MN(n.device,r)}),(0,Ve.Z)(this,"createFramebuffer",function(r){return new RN(n.device,r)}),(0,Ve.Z)(this,"useFramebuffer",function(r,o){n.currentFramebuffer=r,n.beginFrame(),o(),n.endFrame(),n.currentFramebuffer=null}),(0,Ve.Z)(this,"useFramebufferAsync",function(){var r=(0,pn.Z)(Jt().mark(function o(u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return n.currentFramebuffer=u,n.preRenderPass=n.renderPass,n.beginFrame(),g.next=5,c();case 5:n.endFrame(),n.currentFramebuffer=null,n.renderPass=n.preRenderPass;case 8:case"end":return g.stop()}},o)}));return function(o,u){return r.apply(this,arguments)}}()),(0,Ve.Z)(this,"clear",function(r){var o=r.color,u=r.depth,c=r.stencil,p=r.framebuffer,g=p===void 0?null:p;if(g)g.clearOptions={color:o,depth:u,stencil:c};else{var y=n.queryVerdorInfo();if(y==="WebGL1"){var S=n.getGLContext();NR(c)?NR(u)||(S.clearDepth(u),S.clear(S.DEPTH_BUFFER_BIT)):(S.clearStencil(c),S.clear(S.STENCIL_BUFFER_BIT))}else if(y==="WebGL2"){var P=n.getGLContext();NR(c)?NR(u)||P.clearBufferfv(P.DEPTH,0,[u]):P.clearBufferiv(P.STENCIL,0,[c])}}}),(0,Ve.Z)(this,"viewport",function(r){var o=r.width,u=r.height;n.swapChain.configureSwapChain(o,u),n.createMainColorDepthRT(o,u),n.width=o,n.height=u}),(0,Ve.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y=n.device.createReadback(),S=o.colorTexture,P=y.readTextureSync(S,u,n.viewportOrigin===cg.LOWER_LEFT?c:n.height-c,p,g,new Uint8Array(p*g*4));return y.destroy(),P}),(0,Ve.Z)(this,"readPixelsAsync",function(){var r=(0,pn.Z)(Jt().mark(function o(u){var c,p,g,y,S,P,L,Z,q,ce;return Jt().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return c=u.framebuffer,p=u.x,g=u.y,y=u.width,S=u.height,P=n.device.createReadback(),L=c.colorTexture,be.next=5,P.readTexture(L,p,n.viewportOrigin===cg.LOWER_LEFT?g:n.height-g,y,S,new Uint8Array(y*S*4));case 5:if(Z=be.sent,n.viewportOrigin!==cg.LOWER_LEFT)for(q=0;q<Z.length;q+=4)ce=Z[q],Z[q]=Z[q+2],Z[q+2]=ce;return P.destroy(),be.abrupt("return",Z);case 9:case"end":return be.stop()}},o)}));return function(o){return r.apply(this,arguments)}}()),(0,Ve.Z)(this,"getViewportSize",function(){return{width:n.width,height:n.height}}),(0,Ve.Z)(this,"getContainer",function(){var r;return(r=n.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Ve.Z)(this,"getCanvas",function(){return n.canvas}),(0,Ve.Z)(this,"getGLContext",function(){return n.device.gl}),(0,Ve.Z)(this,"destroy",function(){var r;n.canvas=null,(r=n.uniformBuffers)===null||r===void 0||r.forEach(function(o){o.destroy()}),n.device.destroy(),n.renderCache.destroy()})}return(0,ct.Z)(e,[{key:"init",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){var p,g,y,S,P;return Jt().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return p=c.enableWebGPU,g=c.shaderCompilerPath,this.canvas=u,y=p?new NZ({shaderCompilerPath:g}):new qU({targets:["webgl2","webgl1"],onContextLost:function(ce){console.warn("context lost",ce)},onContextCreationError:function(ce){console.warn("context creation error",ce)},onContextRestored:function(ce){console.warn("context restored",ce)}}),Z.next=5,y.createSwapChain(u);case 5:S=Z.sent,S.configureSwapChain(u.width,u.height),this.device=S.getDevice(),this.swapChain=S,this.renderCache=new c9(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin,P=this.device.gl,this.extensionObject={OES_texture_float:!v9(P)&&this.device.OES_texture_float},this.createMainColorDepthRT(u.width,u.height);case 15:case"end":return Z.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"createMainColorDepthRT",value:function(r,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Yr.U8_RGBA_RT,width:r,height:o,usage:Mf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Yr.D24_S8,width:r,height:o,usage:Mf.RENDER_TARGET}))}},{key:"beginFrame",value:function(){this.device.beginFrame();var r=this.currentFramebuffer,o=this.swapChain,u=this.mainColorRT,c=this.mainDepthRT,p=r?r.colorRenderTarget:u,g=r?null:o.getOnscreenTexture(),y=r?r.depthRenderTarget:c,S=(r==null?void 0:r.clearOptions)||{},P=S.color,L=P===void 0?[0,0,0,0]:P,Z=S.depth,q=Z===void 0?1:Z,ce=S.stencil,me=ce===void 0?0:ce,be=p?OE(L[0]*255,L[1]*255,L[2]*255,L[3]):yR,$e=y?q:void 0,ft=y?me:void 0,mt=this.device.createRenderPass({colorAttachment:[p],colorResolveTo:[g],colorClearColor:[be],colorStore:[!0],depthStencilAttachment:y,depthClearValue:$e,stencilClearValue:ft});this.renderPass=mt}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass),this.device.endFrame()}},{key:"getPointSizeRange",value:function(){var r=this.device.gl;return r.getParameter(r.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||ON);function m9(e){var n=y9();return function(){var o=(0,Nt.Z)(e),u;if(n){var c=(0,Nt.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Br.Z)(this,u)}}function y9(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q5=["selectstart","selecting","selectend"],_9=function(e){(0,gr.Z)(r,e);var n=m9(r);function r(o){var u,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,It.Z)(this,r),u=n.call(this),(0,Ve.Z)((0,Mr.Z)(u),"isEnable",!1),(0,Ve.Z)((0,Mr.Z)(u),"onDragStart",function(p){u.box.style.display="block",u.startEvent=u.endEvent=p,u.syncBoxBound(),u.emit("selectstart",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Ve.Z)((0,Mr.Z)(u),"onDragging",function(p){u.endEvent=p,u.syncBoxBound(),u.emit("selecting",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Ve.Z)((0,Mr.Z)(u),"onDragEnd",function(p){u.endEvent=p,u.box.style.display="none",u.emit("selectend",u.getLngLatBox(),u.startEvent,u.endEvent)}),u.scene=o,u.options=c,u}return(0,ct.Z)(r,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var u=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var c=$s("div",void 0,this.container);c.classList.add("l7-select-box"),u&&c.classList.add(u),c.style.display="none",this.box=c}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var u=this.startEvent,c=u.x,p=u.y,g=this.endEvent,y=g.x,S=g.y,P=Math.min(c,y),L=Math.min(p,S),Z=Math.abs(c-y),q=Math.abs(p-S);this.box.style.top="".concat(L,"px"),this.box.style.left="".concat(P,"px"),this.box.style.width="".concat(Z,"px"),this.box.style.height="".concat(q,"px")}},{key:"getLngLatBox",value:function(){var u=this.startEvent.lngLat,c=u.lng,p=u.lat,g=this.endEvent.lngLat,y=g.lng,S=g.lat;return zl([[c,p],[y,S]])}}]),r}(Es.EventEmitter),x9=function(){function e(n){(0,It.Z)(this,e);var r=n.id,o=n.map,u=n.canvas,c=n.renderer,p=c===void 0?"regl":c,g=OI();this.container=g,o.setContainer(g,r,u),g.bind(Qt.IRendererService).to(p==="regl"?jZ:g9).inSingletonScope(),this.sceneService=g.get(Qt.ISceneService),this.mapService=g.get(Qt.IMapService),this.iconService=g.get(Qt.IIconService),this.fontService=g.get(Qt.IFontService),this.controlService=g.get(Qt.IControlService),this.layerService=g.get(Qt.ILayerService),this.debugService=g.get(Qt.IDebugService),this.debugService.setEnable(n.debug),this.markerService=g.get(Qt.IMarkerService),this.interactionService=g.get(Qt.IInteractionService),this.popupService=g.get(Qt.IPopupService),this.boxSelect=new _9(this,{}),this.initComponent(r),this.sceneService.init(n),this.initControl()}return(0,ct.Z)(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"exportMap",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u){return Jt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"registerRenderService",value:function(r){var o=this;if(this.sceneService.loaded){var u=new r(this);u.init()}else this.on("loaded",function(){var c=new r(o);c.init()})}},{key:"setBgColor",value:function(r){this.mapService.setBgColor(r)}},{key:"addLayer",value:function(r){var o=this,u=Nm(this.container);if(r.setContainer(u,this.container),this.sceneService.addLayer(r),r.inited){var c=this.initMask(r);this.addMask(c,r.id)}else r.on("inited",function(){var p=o.initMask(r);o.addMask(p,r.id)})}},{key:"initMask",value:function(r){var o=r.getLayerConfig(),u=o.mask,c=o.maskfence,p=o.maskColor,g=p===void 0?"#000":p,y=o.maskOpacity,S=y===void 0?0:y;if(!(!u||!c)){var P=new Ay().source(c).shape("fill").style({color:g,opacity:S});return P}}},{key:"addMask",value:function(r,o){if(r){var u=this.getLayer(o);if(u){var c=Nm(this.container);r.setContainer(c,this.container),u.addMaskLayer(r),this.sceneService.addMask(r)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(r){return this.layerService.getLayer(r)}},{key:"getLayerByName",value:function(r){return this.layerService.getLayerByName(r)}},{key:"removeLayer",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layerService.remove(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"removeAllLayer",value:function(){var n=(0,pn.Z)(Jt().mark(function o(){return Jt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.layerService.removeAllLayers();case 2:case"end":return c.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(r){this.layerService.setEnableRender(r)}},{key:"addIconFont",value:function(r,o){this.fontService.addIconFont(r,o)}},{key:"addIconFonts",value:function(r){var o=this;r.forEach(function(u){var c=(0,ji.Z)(u,2),p=c[0],g=c[1];o.fontService.addIconFont(p,g)})}},{key:"addFontFace",value:function(r,o){var u=this;this.fontService.once("fontloaded",function(c){u.emit("fontloaded",c)}),this.fontService.addFontFace(r,o)}},{key:"addImage",value:function(){var n=(0,pn.Z)(Jt().mark(function o(u,c){return Jt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.iconService.addImage(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"hasImage",value:function(r){return this.iconService.hasImage(r)}},{key:"removeImage",value:function(r){this.iconService.removeImage(r)}},{key:"addIconFontGlyphs",value:function(r,o){this.fontService.addIconGlyphs(o)}},{key:"addControl",value:function(r){this.controlService.addControl(r,this.container)}},{key:"removeControl",value:function(r){this.controlService.removeControl(r)}},{key:"getControlByName",value:function(r){return this.controlService.getControlByName(r)}},{key:"addMarker",value:function(r){this.markerService.addMarker(r)}},{key:"addMarkerLayer",value:function(r){this.markerService.addMarkerLayer(r)}},{key:"removeMarkerLayer",value:function(r){this.markerService.removeMarkerLayer(r)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(r){this.popupService.addPopup(r)}},{key:"removePopup",value:function(r){this.popupService.removePopup(r)}},{key:"on",value:function(r,o){if(Q5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.on(r,o)}else K_.includes(r)?this.sceneService.on(r,o):this.mapService.on(r,o)}},{key:"once",value:function(r,o){if(Q5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.once(r,o)}else K_.includes(r)?this.sceneService.once(r,o):this.mapService.once(r,o)}},{key:"emit",value:function(r,o){K_.indexOf(r)===-1?this.mapService.on(r,o):this.sceneService.emit(r,o)}},{key:"off",value:function(r,o){if(Q5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.off(r,o)}else K_.includes(r)?this.sceneService.off(r,o):this.mapService.off(r,o)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(r){return this.mapService.getCenter(r)}},{key:"setCenter",value:function(r,o){return this.mapService.setCenter(r,o)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(r){return this.mapService.setPitch(r)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(r){this.mapService.setRotation(r)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(r){this.mapService.panTo(r)}},{key:"panBy",value:function(r,o){this.mapService.panBy(r,o)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(r){this.mapService.setZoom(r)}},{key:"fitBounds",value:function(r,o){var u=this.sceneService.getSceneConfig(),c=u.fitBoundsOptions,p=u.animate;this.mapService.fitBounds(r,o||(0,ae.Z)((0,ae.Z)({},c),{},{animate:p}))}},{key:"setZoomAndCenter",value:function(r,o){this.mapService.setZoomAndCenter(r,o)}},{key:"setMapStyle",value:function(r){this.mapService.setMapStyle(r)}},{key:"setMapStatus",value:function(r){this.mapService.setMapStatus(r)}},{key:"pixelToLngLat",value:function(r){return this.mapService.pixelToLngLat(r)}},{key:"lngLatToPixel",value:function(r){return this.mapService.lngLatToPixel(r)}},{key:"containerToLngLat",value:function(r){return this.mapService.containerToLngLat(r)}},{key:"lngLatToContainer",value:function(r){return this.mapService.lngLatToContainer(r)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(r,o){this.container.bind(Qt.IPostProcessingPass).to(r).whenTargetNamed(o)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),o&&this.boxSelect.once("selectend",function(){r.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(r){return $n.REGISTERED_PROTOCOLS[r]}},{key:"startAnimate",value:function(){this.layerService.startAnimate()}},{key:"stopAnimate",value:function(){this.layerService.stopAnimate()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(r){this.controlService.init({container:nh(r)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var r=this.sceneService.getSceneConfig(),o=r.logoVisible,u=r.logoPosition;o&&this.addControl(new PO({position:u}))}}],[{key:"addProtocol",value:function(r,o){$n.REGISTERED_PROTOCOLS[r]=o}},{key:"removeProtocol",value:function(r){delete $n.REGISTERED_PROTOCOLS[r]}}]),e}(),CW="2.20.19",zR=k(90494),Rh=k(45442),J5={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`},eB="l7plot-legend l7plot-legend__category",tB="l7plot-legend__title",rB="l7plot-legend__category-list",PN="l7plot-legend__list-item",kN="l7plot-legend__category-marker",DN="l7plot-legend__category-value",b9='<div class="'.concat(eB,`">
  <div class="`).concat(tB,`"></div>
  <ul class="`).concat(rB,`"></ul>
</div>`),LN='<li class="'.concat(PN,`" data-index={index}>
  <span class="`).concat(kN,`" style="background:{color}"></span>
  <span class="`).concat(DN,`">{value}</span>
</li>`),_0,S9=(_0={},_0[eB]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:J5.fontFamily,padding:"10px 10px 6px 10px",lineHeight:1,fontSize:"12px"},_0[tB]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},_0[rB]={margin:"0px",listStyleType:"none",padding:"0px"},_0[PN]={listStyleType:"none",display:"flex",alignItems:"center",marginBottom:"2px"},_0[kN]={width:"10px",height:"10px"},_0[DN]={paddingLeft:"8px"},_0),E9=k(6056);function w9(e,n){return!!e.className.match(new RegExp("(\\s|^)".concat(n,"(\\s|$)")))}function nB(e){for(var n=e.childNodes,r=n.length,o=r-1;o>=0;o--)e.removeChild(n[o])}var iB=function(){function e(n){this.destroyed=!1,this.options=(0,X.b$)({},this.getDefaultOptions(),n),this.container=this.initContainer(),this.initDom(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible(),this.render()}return e.prototype.getDefaultOptions=function(){return{name:"",containerTpl:"<div></div>",visible:!0,capture:!0,domStyles:{}}},e.prototype.getContainer=function(){return this.container},e.prototype.getParentContainer=function(){var n=this.options.parent,r;if(!n)return r;if((0,X.HD)(n)){var o=document.getElementById(n);if(o)r=o;else throw new Error("No parent id ".concat(n))}else r=n;return r},e.prototype.initContainer=function(){var n=this.createDom(this.options.containerTpl),r=this.getParentContainer();return r&&r.appendChild(n),n},e.prototype.initVisible=function(){this.options.visible?this.show():this.hide()},e.prototype.initCapture=function(){this.setCapture(this.options.capture)},e.prototype.update=function(n){this.options=(0,X.b$)({},this.options,n),this.updateInner(n),this.afterUpdate(n)},e.prototype.updateInner=function(n){n.domStyles&&this.applyStyles()},e.prototype.afterUpdate=function(n){n.capture&&this.setCapture(n.capture)},e.prototype.setCapture=function(n){var r=this.container,o=n?"auto":"none";r.style.pointerEvents=o},e.prototype.applyStyles=function(){var n=this.options.domStyles;if(n){var r=this.container;this.applyChildrenStyles(r,n);var o=this.options.className;if(o&&w9(r,o)){var u=n[o];(0,Rh.Z)(r,u)}}},e.prototype.applyChildrenStyles=function(n,r){(0,X.S6)(r,function(o,u){var c=n.getElementsByClassName(u);(0,X.S6)(c,function(p){(0,Rh.Z)(p,o)})})},e.prototype.applyStyle=function(n,r){var o=this.options.domStyles;o&&(0,Rh.Z)(r,o[n])},e.prototype.createDom=function(n){return n===void 0&&(n="<div></div>"),(0,E9.Z)(n)},e.prototype.removeDom=function(){var n=this.container;n&&n.parentNode&&n.parentNode.removeChild(n)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),this.destroyed=!0},e}(),C9=function(e){(0,w.ZT)(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getDefaultOptions=function(){return(0,X.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-category-legend",name:"l7plot-category-legend",title:"",items:[],containerTpl:b9,itemTpl:LN,domStyles:S9,className:eB})},n.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(tB)[0],u=r.getElementsByClassName(rB)[0];this.titleDom=o,this.listDom=u},n.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},n.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},n.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},n.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},n.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},n.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,X.HD)(u)?o=this.createDom(u):o=u,o},n.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},n.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},n.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},n.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},n.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items.length>30?this.options.items.slice(0,30):this.options.items,u=this.options.itemTpl||LN,c=this.listDom;c&&(o.forEach(function(p){var g=p.value==="",y=g?"\u2014":Array.isArray(p.value)?p.value.join(" - "):p.value,S=(0,w.pi)((0,w.pi)({},p),{value:y}),P=(0,X.ng)(u,S),L=r.createDom(P);c.appendChild(L)}),this.applyChildrenStyles(c,this.options.domStyles))},n.prototype.clearItemDoms=function(){this.listDom&&nB(this.listDom)},n.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},n}(iB),aB="l7plot-legend l7plot-legend__continue",oB="l7plot-legend__title",FN="l7plot-legend__ribbon-container",BN="l7plot-legend__ribbon",NN="l7plot-legend__gradient-bar",sB="l7plot-legend__value-range",T9='<div class="'.concat(aB,`">
  <div class="`).concat(oB,`"></div>
  <div class="`).concat(FN,`"></div>
</div>`),zN='<div class="'.concat(BN,`">
  <span class="`).concat(sB,`">{min}</span>
  <div class="`).concat(NN,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(sB,`">{max}</span>
</div>`),c_,A9=(c_={},c_[aB]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:J5.fontFamily,padding:"10px",lineHeight:1,fontSize:"12px"},c_[oB]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},c_[BN]={display:"flex",alignItems:"center"},c_[NN]={width:"140px",height:"14px",margin:"0px 5px"},c_[sB]={padding:"0px"},c_),M9=function(e){(0,w.ZT)(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getDefaultOptions=function(){return(0,X.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-continue-legend",name:"l7plot-continue-legend",title:"",containerTpl:T9,ribbonTpl:zN,domStyles:A9,className:aB})},n.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(oB)[0],u=r.getElementsByClassName(FN)[0];this.titleDom=o,this.ribbonContainerDom=u},n.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderRibbon())},n.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},n.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},n.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.colors&&this.renderRibbon()),e.prototype.updateInner.call(this,r)},n.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},n.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.min,this.options.max,this.options.colors);return(0,X.HD)(u)?o=this.createDom(u):o=u,o},n.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},n.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},n.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},n.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},n.prototype.renderRibbon=function(){this.clearRibbonContainerDoms();var r=this.options,o=r.min,u=r.max,c=r.colors,p=r.ribbonTpl,g=p===void 0?zN:p,y=this.ribbonContainerDom;if(y){var S="linear-gradient(to right, ".concat(c.join(", "),")"),P={min:o,max:u,backgroundImage:S},L=(0,X.ng)(g,P),Z=this.createDom(L);y.appendChild(Z),this.applyChildrenStyles(y,this.options.domStyles)}},n.prototype.clearRibbonContainerDoms=function(){this.ribbonContainerDom&&nB(this.ribbonContainerDom)},n.prototype.clear=function(){this.setTitle(""),this.clearRibbonContainerDoms()},n}(iB),R9=function(e){(0,w.ZT)(n,e);function n(r){var o=e.call(this,r)||this;return o.legendComponents=[],o.options=r,o.legendComponents=o.initLegendComponents(r.items),o}return n.prototype.initLegendComponents=function(r){for(var o=[],u=0;u<r.length;u++){var c=r[u];if(c.type==="category"){var p=new C9({title:c.options.title,items:c.options.items,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}else if(c.type==="continue"){var p=new M9({title:c.options.title,min:c.options.min,max:c.options.max,colors:c.options.colors,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}}return o},n.prototype.getDefaultOptions=function(){return{position:"bottomleft"}},n.prototype.onAdd=function(){var r=window.document.createElement("div");return r.className="l7plot-legend-container",this.legendComponents.forEach(function(o){var u=o.getContainer();r.appendChild(u)}),r},n.prototype.onRemove=function(){this.legendComponents.forEach(function(r){r.destroy()})},n}(Wg),uB="l7plot-tooltip",lB="l7plot-tooltip__title",cB="l7plot-tooltip__list",UN="l7plot-tooltip__list-item",ZN="l7plot-tooltip__name",VN="l7plot-tooltip__value",I9='<div class="'.concat(uB,`">
  <div class="`).concat(lB,`"></div>
  <ul class="`).concat(cB,`"></ul>
</div>`),jN='<li class="'.concat(UN,`" data-index={index}>
  <span class="`).concat(ZN,`">{name}</span>
  <span class="`).concat(VN,`">{value}</span>
</li>`),x0,O9=(x0={},x0[uB]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:J5.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},x0[lB]={marginBottom:"4px"},x0[cB]={margin:"0px",listStyleType:"none",padding:"0px"},x0[UN]={listStyleType:"none",marginBottom:"4px",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"},x0[ZN]={},x0[VN]={marginLeft:"30px"},x0),P9=function(e){(0,w.ZT)(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getDefaultOptions=function(){return(0,X.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-tooltip",name:"l7plot-tooltip",title:"",showTitle:!0,items:[],containerTpl:I9,itemTpl:jN,domStyles:O9,className:uB})},n.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(lB)[0],u=r.getElementsByClassName(cB)[0];this.titleDom=o,this.listDom=u},n.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},n.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},n.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},n.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},n.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},n.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,X.HD)(u)?o=this.createDom(u):o=u,o},n.prototype.resetTitle=function(){var r=this.options.title,o=this.options.showTitle;o&&r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},n.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},n.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},n.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},n.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items,u=this.options.itemTpl||jN,c=this.listDom;c&&(o.forEach(function(p){var g=(0,w.pi)({},p),y=(0,X.ng)(u,g),S=r.createDom(y);c.appendChild(S)}),this.applyChildrenStyles(c,this.options.domStyles))},n.prototype.clearItemDoms=function(){this.listDom&&nB(this.listDom)},n.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},n}(iB),fB=k(27771),k9=typeof global=="object"&&global&&global.Object===Object&&global,D9=k9,L9=typeof self=="object"&&self&&self.Object===Object&&self,F9=D9||L9||Function("return this")(),UR=F9,B9=UR.Symbol,Px=B9,HN=Object.prototype,N9=HN.hasOwnProperty,z9=HN.toString,VE=Px?Px.toStringTag:void 0;function U9(e){var n=N9.call(e,VE),r=e[VE];try{e[VE]=void 0;var o=!0}catch(c){}var u=z9.call(e);return o&&(n?e[VE]=r:delete e[VE]),u}var Z9=U9,V9=Object.prototype,j9=V9.toString;function H9(e){return j9.call(e)}var W9=H9,G9="[object Null]",$9="[object Undefined]",WN=Px?Px.toStringTag:void 0;function X9(e){return e==null?e===void 0?$9:G9:WN&&WN in Object(e)?Z9(e):W9(e)}var GN=X9;function Y9(e){return e!=null&&typeof e=="object"}var q9=Y9,K9="[object Symbol]";function Q9(e){return typeof e=="symbol"||q9(e)&&GN(e)==K9}var ZR=Q9,J9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eV=/^\w*$/;function tV(e,n){if((0,fB.Z)(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ZR(e)?!0:eV.test(e)||!J9.test(e)||n!=null&&e in Object(n)}var rV=tV;function nV(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var VR=nV,iV="[object AsyncFunction]",aV="[object Function]",oV="[object GeneratorFunction]",sV="[object Proxy]";function uV(e){if(!VR(e))return!1;var n=GN(e);return n==aV||n==oV||n==iV||n==sV}var lV=uV,cV=UR["__core-js_shared__"],hB=cV,$N=function(){var e=/[^.]+$/.exec(hB&&hB.keys&&hB.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fV(e){return!!$N&&$N in e}var hV=fV,pV=Function.prototype,dV=pV.toString;function vV(e){if(e!=null){try{return dV.call(e)}catch(n){}try{return e+""}catch(n){}}return""}var gV=vV,mV=/[\\^$.*+?()[\]{}|]/g,yV=/^\[object .+?Constructor\]$/,_V=Function.prototype,xV=Object.prototype,bV=_V.toString,SV=xV.hasOwnProperty,EV=RegExp("^"+bV.call(SV).replace(mV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wV(e){if(!VR(e)||hV(e))return!1;var n=lV(e)?EV:yV;return n.test(gV(e))}var CV=wV;function TV(e,n){return e==null?void 0:e[n]}var AV=TV;function MV(e,n){var r=AV(e,n);return CV(r)?r:void 0}var XN=MV,RV=XN(Object,"create"),jE=RV;function IV(){this.__data__=jE?jE(null):{},this.size=0}var OV=IV;function PV(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var kV=PV,DV="__lodash_hash_undefined__",LV=Object.prototype,FV=LV.hasOwnProperty;function BV(e){var n=this.__data__;if(jE){var r=n[e];return r===DV?void 0:r}return FV.call(n,e)?n[e]:void 0}var NV=BV,zV=Object.prototype,UV=zV.hasOwnProperty;function ZV(e){var n=this.__data__;return jE?n[e]!==void 0:UV.call(n,e)}var VV=ZV,jV="__lodash_hash_undefined__";function HV(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=jE&&n===void 0?jV:n,this}var WV=HV;function kx(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}kx.prototype.clear=OV,kx.prototype.delete=kV,kx.prototype.get=NV,kx.prototype.has=VV,kx.prototype.set=WV;var YN=kx;function GV(){this.__data__=[],this.size=0}var $V=GV;function XV(e,n){return e===n||e!==e&&n!==n}var YV=XV;function qV(e,n){for(var r=e.length;r--;)if(YV(e[r][0],n))return r;return-1}var jR=qV,KV=Array.prototype,QV=KV.splice;function JV(e){var n=this.__data__,r=jR(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():QV.call(n,r,1),--this.size,!0}var ej=JV;function tj(e){var n=this.__data__,r=jR(n,e);return r<0?void 0:n[r][1]}var rj=tj;function nj(e){return jR(this.__data__,e)>-1}var ij=nj;function aj(e,n){var r=this.__data__,o=jR(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this}var oj=aj;function Dx(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}Dx.prototype.clear=$V,Dx.prototype.delete=ej,Dx.prototype.get=rj,Dx.prototype.has=ij,Dx.prototype.set=oj;var sj=Dx,uj=XN(UR,"Map"),lj=uj;function cj(){this.size=0,this.__data__={hash:new YN,map:new(lj||sj),string:new YN}}var fj=cj;function hj(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var pj=hj;function dj(e,n){var r=e.__data__;return pj(n)?r[typeof n=="string"?"string":"hash"]:r.map}var HR=dj;function vj(e){var n=HR(this,e).delete(e);return this.size-=n?1:0,n}var gj=vj;function mj(e){return HR(this,e).get(e)}var yj=mj;function _j(e){return HR(this,e).has(e)}var xj=_j;function bj(e,n){var r=HR(this,e),o=r.size;return r.set(e,n),this.size+=r.size==o?0:1,this}var Sj=bj;function Lx(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}Lx.prototype.clear=fj,Lx.prototype.delete=gj,Lx.prototype.get=yj,Lx.prototype.has=xj,Lx.prototype.set=Sj;var qN=Lx,Ej="Expected a function";function pB(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Ej);var r=function(){var o=arguments,u=n?n.apply(this,o):o[0],c=r.cache;if(c.has(u))return c.get(u);var p=e.apply(this,o);return r.cache=c.set(u,p)||c,p};return r.cache=new(pB.Cache||qN),r}pB.Cache=qN;var wj=pB,Cj=500;function Tj(e){var n=wj(e,function(o){return r.size===Cj&&r.clear(),o}),r=n.cache;return n}var Aj=Tj,Mj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rj=/\\(\\)?/g,Ij=Aj(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Mj,function(r,o,u,c){n.push(u?c.replace(Rj,"$1"):o||r)}),n}),Oj=Ij;function Pj(e,n){for(var r=-1,o=e==null?0:e.length,u=Array(o);++r<o;)u[r]=n(e[r],r,e);return u}var kj=Pj,Dj=1/0,KN=Px?Px.prototype:void 0,QN=KN?KN.toString:void 0;function JN(e){if(typeof e=="string")return e;if((0,fB.Z)(e))return kj(e,JN)+"";if(ZR(e))return QN?QN.call(e):"";var n=e+"";return n=="0"&&1/e==-Dj?"-0":n}var Lj=JN;function Fj(e){return e==null?"":Lj(e)}var dB=Fj;function Bj(e,n){return(0,fB.Z)(e)?e:rV(e,n)?[e]:Oj(dB(e))}var Nj=Bj,zj=1/0;function Uj(e){if(typeof e=="string"||ZR(e))return e;var n=e+"";return n=="0"&&1/e==-zj?"-0":n}var Zj=Uj;function Vj(e,n){n=Nj(n,e);for(var r=0,o=n.length;e!=null&&r<o;)e=e[Zj(n[r++])];return r&&r==o?e:void 0}var jj=Vj;function Hj(e,n,r){var o=e==null?void 0:jj(e,n);return o===void 0?r:o}var e8=Hj,Wj=5,Gj=new Object().toString,t8=function(e,n){return Gj.call(e)==="[object "+n+"]"},$j=function(e){return t8(e,"Array")},Xj=function(e){return typeof e=="object"&&e!==null},r8=function(e){if(!Xj(e)||!t8(e,"Object"))return!1;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n},n8=function(e,n,r,o){r=r||0,o=o||Wj;for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var c=n[u];c?r8(c)?(r8(e[u])||(e[u]={}),r<o?n8(e[u],c,r+1,o):e[u]=n[u]):$j(c)?(e[u]=[],e[u]=e[u].concat(c)):e[u]=c:e[u]=c}},Hp=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var o=0;o<n.length;o+=1)n8(e,n[o]);return e},Yj=["mousemove","click"],qj=function(e){(0,w.ZT)(n,e);function n(r,o,u){var c=e.call(this)||this;c.currentVisible=!1,c.interactionTriggerHander=function(ce){var me=ce.feature,be=ce.featureId,$e=c.options,ft=$e.title,mt=$e.customTitle,zt=$e.items,ar=$e.customItems,nr=me.type==="Feature"&&me.geometry&&me.properties,Yt=nr?me.properties:me,Cr=[];if(ar){var Nr=ar(me);if(Array.isArray(Nr))Cr=Nr;else throw new Error("customItems return array")}else zt&&zt.forEach(function(an){if((0,X.HD)(an)){var Nn=an.split(".").pop()||an,jn=e8(Yt,an);jn!==void 0&&Cr.push({name:Nn,value:jn})}else{var di=an.field,Ua=an.alias,Co=an.customValue,os=Ua||di.split(".").pop()||di,jn=e8(Yt,di);jn!==void 0&&Cr.push({name:os,value:Co?Co(jn,Yt,be):jn})}});var nn={title:mt?mt(Yt):ft,items:Cr};c.updateTooltip(ce,nn)},c.interactionUntriggerHander=function(){c.hideTooltip()},c.scene=r,c.interactionLayers=o,c.options=Hp({},c.getDefaultOptions(),u);var p=c.options,g=p.offsets,y=p.title,S=p.showTitle,P=p.customContent,L=p.domStyles,Z=p.anchor,q=p.className;return c.marker=new Hg({offsets:g,anchor:Z,draggable:!1}),c.tooltipComponent=new P9({title:y,showTitle:S,items:[],customContent:P,domStyles:L,className:q}),c.setComponent(),c.initInteractionEvent(),c}return n.prototype.getDefaultOptions=function(){return{showTitle:!0,showComponent:!0,items:[],offsets:[15,0],trigger:"mousemove",anchor:To["TOP-LEFT"]}},n.prototype.update=function(r){this.marker.remove(),this.currentVisible=!1,this.options=Hp({},this.options,r);var o=this.options,u=o.offsets,c=o.showTitle,p=o.customContent,g=o.domStyles,y=o.anchor,S=o.className;this.marker=new Hg({offsets:u,anchor:y,draggable:!1}),this.tooltipComponent.update({showTitle:c,customContent:p,domStyles:g,className:S}),this.setComponent()},n.prototype.initInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";if(!Yj.includes(o))throw new Error("trigger is mousemove or click");this.interactionLayers.forEach(function(u){var c=u.layer;c.on(o,r.interactionTriggerHander),c.on("un".concat(o),r.interactionUntriggerHander)})},n.prototype.unBindInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";this.interactionLayers.forEach(function(u){var c=u.layer;c.off(o,r.interactionTriggerHander),c.off("un".concat(o),r.interactionUntriggerHander)})},n.prototype.updateTooltip=function(r,o){var u=r.lngLat,c=r.x,p=r.y;if(this.options.showComponent&&(this.updateComponent(o),this.setPostion(u)),this.currentVisible){var g={type:"tooltip:change",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:change",g)}else{this.showTooltip();var y={type:"tooltip:show",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:show",y)}},n.prototype.showTooltip=function(){this.currentVisible||(this.options.showComponent&&this.scene.addMarker(this.marker),this.currentVisible=!0)},n.prototype.hideTooltip=function(){if(this.currentVisible){this.options.showComponent&&this.marker.remove(),this.currentVisible=!1;var r={type:"tooltip:hide"};this.emit("tooltip:hide",r)}},n.prototype.updateComponent=function(r){(0,X.Xy)(this.lastComponentOptions,r)||(this.tooltipComponent.update(r),this.lastComponentOptions=r)},n.prototype.setComponent=function(){var r=this.tooltipComponent.getContainer(),o=window.document.createElement("div");o.style.cursor="auto",o.style.userSelect="text",o.className="l7plot-tooltip-container",["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(u){o.addEventListener(u,function(c){return c.stopPropagation()})}),o.appendChild(r),this.marker.setElement(o)},n.prototype.setPostion=function(r){this.marker.setLnglat(r)},n.prototype.destroy=function(){this.unBindInteractionEvent(),this.off(),this.marker.remove(),this.tooltipComponent.destroy()},n}(zR.Z),Fx=k(77972),Bx=k(3876),HE=k(56992);function i8(e){var n,r,o,u={point:{default:{fill:e.pointFillColor,size:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{fill:e.pointActiveFillColor},selected:{fill:e.pointSelectedFillColor}}};return{mapStyle:e.mapStyle,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,fontFamily:e.fontFamily,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["circle","square"],line:["line"]},sizes:[1,10],geometries:{point:{circle:{default:{style:u.point.default},active:{style:u.point.active},selected:{style:u.point.selected}}},line:{},polygon:{}},components:{legend:{category:{domStyles:(n={},n[Bx.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:"1",fontSize:"".concat(e.legendTextFontSize,"px")},n[Bx.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},n[Bx.fL]={margin:"0px",padding:"0px"},n[Bx.jp]={marginBottom:"2px"},n[Bx.Bc]={width:"10px",height:"10px"},n[Bx.Tf]={paddingLeft:"8px"},n)},continue:{domStyles:(r={},r[HE.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:1,fontSize:"".concat(e.legendTextFontSize,"px")},r[HE.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},r[HE.el]={display:"flex",alignItems:"center"},r[HE.bl]={width:"140px",height:"14px",margin:"0px 5px"},r[HE.VI]={padding:"0px"},r)}},tooltip:{domStyles:(o={},o[Fx.rC]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:e.tooltipContainerFillColor,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:e.tooltipTextLineHeight},o[Fx.O6]={marginBottom:"4px"},o[Fx.fL]={margin:"0px",padding:"0px"},o[Fx.jp]={marginBottom:"4px"},o[Fx.bX]={color:e.tooltipItemNameFillColor},o[Fx.Tf]={color:e.tooltipItemValueFillColor,marginLeft:"30px"},o)},label:{style:{textAnchor:"center",textOffset:[0,0],fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight}}}}}var f_={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Kj={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Qj=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Jj=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],eH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],a8=function(e){e===void 0&&(e={});var n=e.mapStyle,r=n===void 0?"light":n,o=e.subColor,u=o===void 0?"rgba(0,0,0,0.05)":o,c=e.paletteQualitative10,p=c===void 0?Qj:c,g=e.paletteQualitative20,y=g===void 0?Jj:g,S=e.paletteSemanticRed,P=S===void 0?"#F4664A":S,L=e.paletteSemanticGreen,Z=L===void 0?"#30BF78":L,q=e.paletteSemanticYellow,ce=q===void 0?"#FAAD14":q,me=e.paletteSequence,be=me===void 0?eH:me,$e=e.fontFamily,ft=$e===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:$e,mt=e.brandColor,zt=mt===void 0?p[0]:mt;return{mapStyle:r,brandColor:zt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:P,paletteSemanticGreen:Z,paletteSemanticYellow:ce,paletteSequence:be,fontFamily:ft,legendContainerFillColor:"rgba(255, 255, 255, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:f_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(255, 255, 255, 0.9)",tooltipContainerShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",tooltipContainerBorderRadius:2,tooltipTextFillColor:f_[65],tooltipItemNameFillColor:f_[65],tooltipItemValueFillColor:f_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:f_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:zt,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Kj[100],pointActiveBorderColor:f_[100],pointSelectedBorderColor:f_[100]}},TW=a8(),tH={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},h_={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},o8=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],rH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],nH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],s8=function(e){e===void 0&&(e={});var n=e.mapStyle,r=n===void 0?"dark":n,o=e.subColor,u=o===void 0?"rgba(255,255,255,0.05)":o,c=e.paletteQualitative10,p=c===void 0?o8:c,g=e.paletteQualitative20,y=g===void 0?rH:g,S=e.paletteSemanticRed,P=S===void 0?"#F4664A":S,L=e.paletteSemanticGreen,Z=L===void 0?"#30BF78":L,q=e.paletteSemanticYellow,ce=q===void 0?"#FAAD14":q,me=e.paletteSequence,be=me===void 0?nH:me,$e=e.fontFamily,ft=$e===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:$e,mt=e.brandColor,zt=mt===void 0?p[0]:mt;return{mapStyle:r,brandColor:zt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:P,paletteSemanticGreen:Z,paletteSemanticYellow:ce,paletteSequence:be,fontFamily:ft,legendContainerFillColor:"rgba(31, 31, 31, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:h_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(31, 31, 31, 0.9)",tooltipContainerShadow:"0px 2px 4px rgba(0, 0, 0, 0.5)",tooltipContainerBorderRadius:2,tooltipTextFillColor:h_[65],tooltipItemNameFillColor:h_[65],tooltipItemValueFillColor:h_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:h_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:o8[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:tH[100],pointActiveBorderColor:h_[100],pointSelectedBorderColor:h_[100]}},AW=s8();function u8(e){var n=e.styleSheet,r=n===void 0?{}:n,o=(0,w._T)(e,["styleSheet"]),u=a8(r);return(0,X.b$)({},i8(u),o)}function iH(e){var n=e.styleSheet,r=n===void 0?{}:n,o=(0,w._T)(e,["styleSheet"]),u=s8(r);return(0,X.b$)({},i8(u),o)}var l8=u8({}),aH=iH({}),vB={default:l8,light:l8,dark:aH};function gB(e){return e===void 0&&(e="default"),(0,X.U2)(vB,(0,X.vl)(e),vB.default)}function MW(e,n,r){r===void 0&&(r="light"),vB[lowerCase(e)]=r==="light"?createTheme(n):createDarkTheme(n)}var bv;(function(e){e.Map="map",e.Amap="amap",e.AmapV1="amapv1",e.AmapV2="amapv2",e.Mapbox="mapbox"})(bv||(bv={}));var c8=function(e){(0,w.ZT)(n,e);function n(r,o){r===void 0&&(r=[]),o===void 0&&(o={});var u=e.call(this)||this;return u.name=o.name?o.name:(0,X.EL)("layerGroup"),u.layers=r,u}return n.prototype.addTo=function(r){var o=this;this.scene=r;var u=0,c=this.layers.length;this.layers.forEach(function(p){p.once("inited",function(g){u++,o.emit("inited",g),u===c&&o.emit("inited-all")}),p.addTo(r)})},n.prototype.hasLayer=function(r){return this.layers.some(function(o){return o===r})},n.prototype.addLayer=function(r){var o=this;this.layers.push(r),this.scene&&(r.once("inited",function(u){return o.emit("inited",u)}),r.addTo(this.scene))},n.prototype.removeLayer=function(r){var o=this.layers.findIndex(function(u){return u===r});return o===-1?!1:(this.layers.splice(o,1),this.scene&&r.remove(this.scene),!0)},n.prototype.getLayers=function(){return this.layers},n.prototype.getInteractionLayers=function(){return this.layers.filter(function(r){var o=r.interaction;return o})},n.prototype.getLayer=function(r){return this.layers.find(function(o){var u=o.layer;return u.id===r})},n.prototype.getLayerByName=function(r){return this.layers.find(function(o){return o.name===r})},n.prototype.removeAllLayer=function(){var r=this;this.layers.forEach(function(o){r.scene&&o.remove(r.scene)}),this.layers=[]},n.prototype.isEmpty=function(){return this.layers.length===0},n}(zR.Z),oH=[{original:"loaded",adaptation:"scene-loaded"},{original:"resize",adaptation:"resize"},{original:"destroy",adaptation:"destroy"},{original:"resize",adaptation:"resize"}],sH=["mapmove","movestart","moveend","zoomchange","zoomstart","zoomend","click","dblclick","contextmenu","mousemove","mousewheel","mouseover","mouseout","mouseup","mousedown","dragstart","dragging","dragend"],WR=["inited","add","remove","dataUpdate","click","unclick","dblclick","undblclick","contextmenu","uncontextmenu","mouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","uncontextmenu","unpick"],p_=new Map;function RW(e,n){p_.set(e,n)}function IW(e){e.forEach(function(n){p_.set(n.id,n.image)})}function OW(e){return p_.get(e)}function PW(e){return p_.has(e)}function kW(e){return p_.delete(e)}var GR=new Map;function DW(e,n){GR.set(e,n)}function LW(e){return GR.delete(e)}var WE=new Map;function FW(e,n){WE.set(e,n)}function BW(e){e.forEach(function(n){WE.set(n.name,n.fontUnicode)})}function NW(e){return WE.delete(e)}var f8={map:{type:bv.Amap},logo:!0},uH=function(e){(0,w.ZT)(n,e);function n(r){var o=e.call(this)||this;return o.inited=!1,o.sceneLoaded=!1,o.layersLoaded=!1,o.loaded=!1,o.layerGroup=new c8,o.options=Hp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return n.prototype.getDefaultOptions=function(){return n.DefaultOptions},n.prototype.createContainer=function(r){var o=this.options,u=o.width,c=o.height,p=typeof r=="string"?document.getElementById(r):r;return p.style.position||(p.style.position="relative"),u&&(p.style.width||(p.style.width="".concat(u,"px"))),c&&(p.style.height||(p.style.height="".concat(c,"px"))),p},n.prototype.createTheme=function(){var r=(0,X.Kn)(this.options.theme)?Hp({},gB("default"),u8(this.options.theme)):gB(this.options.theme);return r},n.prototype.createMap=function(){var r=this.options.map?this.options.map:f8.map,o=r.type,u=(0,w._T)(r,["type"]),c=Object.assign({style:this.theme.mapStyle},u);return o===bv.Amap?new YM(c):o===bv.AmapV1?new d5(c):o===bv.AmapV2?new YM(c):o===bv.Mapbox?new xz(c):new uz(c)},n.prototype.createScene=function(){var r=this.options,o=r.logo,u=r.antialias,c=r.preserveDrawingBuffer,p=(0,X.jn)(o)?{logoVisible:o}:{logoVisible:o==null?void 0:o.visible,logoPosition:o==null?void 0:o.position},g=Object.assign({antialias:u,preserveDrawingBuffer:c},p),y=this.createMap(),S=new x9((0,w.pi)({id:this.container,map:y},g));return S},n.prototype.registerResources=function(){var r=this;p_.size&&p_.forEach(function(o,u){!r.scene.hasImage(u)&&r.scene.addImage(u,o)}),GR.size&&GR.forEach(function(o,u){r.scene.addFontFace(u,o)}),WE.size&&WE.forEach(function(o,u){r.scene.addIconFont(u,o)})},n.prototype.update=function(r){this.updateOption(r),r.map&&!(0,X.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.render(),this.emit("update")},n.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Hp({},this.options,r)},n.prototype.updateMap=function(r){var o;if(this.scene){var u=r.style,c=r.center,p=r.zoom,g=r.rotation,y=r.pitch;(0,X.o8)(y)||this.scene.setPitch(y),(0,X.o8)(g)||this.scene.setRotation(g),u&&u!==((o=this.lastOptions.map)===null||o===void 0?void 0:o.style)&&this.scene.setMapStyle(u),p&&c&&this.scene.setZoomAndCenter(p,c)}},n.prototype.changeSize=function(r,o){this.options.width===r&&this.options.height===o||(this.container.style.width="".concat(r,"px"),this.container.style.height="".concat(o,"px"),this.options=Object.assign(this.options,{width:r,height:o}))},n.prototype.on=function(r,o,u){return this.proxyEventHander("on",r,o,u),this},n.prototype.once=function(r,o){return this.proxyEventHander("once",r,o),this},n.prototype.off=function(r,o){return this.proxyEventHander("off",r,o),this},n.prototype.proxyEventHander=function(r,o,u,c){var p=oH.find(function(L){return L.adaptation===o});if(p)this.scene[r](p.original,u);else if(sH.indexOf(o)!==-1)this.scene[r](o,u);else if(o.includes("Layer:")){var g=(0,w.CR)(o.split(":"),2),y=g[0],S=g[1],P=this[y]&&this[y][r];if(P&&WR.indexOf(S)!==-1)this[y][r](S,u);else throw new Error('No event name "'.concat(o,'"'))}else e.prototype[r].call(this,o,u,c)},n.prototype.getScene=function(){return this.scene},n.prototype.getMap=function(){var r,o,u,c;return((r=this.options.map)===null||r===void 0?void 0:r.type)===bv.Amap?this.scene.map:((o=this.options.map)===null||o===void 0?void 0:o.type)===bv.AmapV2?this.scene.map:((u=this.options.map)===null||u===void 0?void 0:u.type)===bv.Mapbox?this.scene.map:((c=this.options.map)===null||c===void 0?void 0:c.type)===bv.Map?this.scene.map:this.scene.map},n.prototype.addLayer=function(r){this.layerGroup.addLayer(r)},n.prototype.getLayes=function(){return console.warn("Replace to use getLayers()"),this.getLayers()},n.prototype.getLayers=function(){return this.layerGroup.getLayers()},n.prototype.getLayerByName=function(r){return this.layerGroup.getLayerByName(r)},n.prototype.removeLayer=function(r){return this.layerGroup.removeLayer(r)},n.prototype.removeAllLayer=function(){this.layerGroup.removeAllLayer()},n.prototype.zoomIn=function(){this.scene.zoomIn()},n.prototype.zoomOut=function(){this.scene.zoomOut()},n.prototype.setPitch=function(r){this.scene.setPitch(r)},n.prototype.fitBounds=function(r){this.scene.fitBounds(r)},n.prototype.setMapStatus=function(r){this.scene.setMapStatus(r)},n.prototype.setBgColor=function(r){this.scene.setBgColor(r)},n.prototype.initComponents=function(){this.initControls(),this.initTooltip()},n.prototype.updateComponents=function(){this.updateControls(),this.initTooltip()},n.prototype.initControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;u&&this.addScaleControl(u),o&&this.addZoomControl(o),c&&this.addLayerMenuControl(c),p&&(this.addLegendControl(p),this.emit("add-legend"))},n.prototype.updateControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;(0,X.Xy)(this.lastOptions.zoom,o)||(o?this.updateZoomControl(o):this.removeZoomControl()),(0,X.Xy)(this.lastOptions.scale,u)||(u?this.updateScaleControl(u):this.removeScaleControl()),(0,X.Xy)(this.lastOptions.layerMenu,c)||(c?this.updateLayerMenuControl(c):this.removeLayerMenuControl()),(0,X.Xy)(this.lastOptions.legend,p)||(p?this.updateLegendControl(p):this.removeLegendControl())},n.prototype.addZoomControl=function(r){this.zoomControl||(this.zoomControl=new ZF(r),this.scene.addControl(this.zoomControl))},n.prototype.updateZoomControl=function(r){if(!this.zoomControl){this.addZoomControl(r);return}this.removeZoomControl(),this.addZoomControl(r)},n.prototype.removeZoomControl=function(){this.zoomControl&&(this.zoomControl.remove(),this.zoomControl=void 0)},n.prototype.addScaleControl=function(r){this.scaleControl||(this.scaleControl=new FO(r),this.scene.addControl(this.scaleControl))},n.prototype.updateScaleControl=function(r){if(!this.scaleControl){this.addScaleControl(r);return}this.removeScaleControl(),this.addScaleControl(r)},n.prototype.removeScaleControl=function(){this.scaleControl&&(this.scaleControl.remove(),this.scaleControl=void 0)},n.prototype.addLayerMenuControl=function(r){var o={},u={};this.layerGroup.getLayers().forEach(function(c){var p=c.name,g=c.layer;u[p]=g})},n.prototype.updateLayerMenuControl=function(r){this.removeLayerMenuControl(),this.addLayerMenuControl(r)},n.prototype.removeLayerMenuControl=function(){},n.prototype.getLegendOptions=function(){return{}},n.prototype.addLegendControl=function(r){if(!this.legendControl){var o=this.theme.components.legend,u=Hp({},this.getLegendOptions(),r),c=u.type,p=u.position,g=(0,w._T)(u,["type","position"]),y=[];if(c==="category"){var S=Hp({},{domStyles:o.category.domStyles},g);y.push({type:c,options:S})}else if(c==="continue"){var P=Hp({},{domStyles:o.continue.domStyles},g);y.push({type:c,options:P})}y.length&&(this.legendControl=new R9({position:p,items:y}),this.scene.addControl(this.legendControl))}},n.prototype.updateLegendControl=function(r){if(!this.legendControl){this.addLegendControl(r);return}this.removeLegendControl(),this.addLegendControl(r)},n.prototype.removeLegendControl=function(){this.legendControl&&(this.legendControl.remove(),this.legendControl=void 0)},n.prototype.initTooltip=function(){var r=this;this.tooltip&&this.tooltip.destroy();var o=this.options.tooltip;if(o){var u=Hp({},{domStyles:this.theme.components.tooltip.domStyles},o),c=this.layerGroup.getInteractionLayers();this.tooltip=new qj(this.scene,c,u),this.tooltip.on("*",function(p){return r.emit(p.type,p)})}},n.prototype.exportPng=function(r){return this.scene.exportPng(r)},n.prototype.destroy=function(){var r;e.prototype.off.call(this,"*"),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy(),this.scene.destroy()},n.DefaultOptions=f8,n}(zR.Z),h8;(function(e){e[e.solid=0]="solid",e[e.dash=1]="dash"})(h8||(h8={}));var mB;(function(e){e.TextLayer="textLayer",e.DotLayer="dotLayer",e.IconLayer="iconLayer",e.DotDensity="dotDensityLayer",e.ColumnLayer="columnLayer",e.HeatmapLayer="heatmapLayer",e.GridLayer="gridLayer",e.HexbinLayer="hexbinLayer",e.LinesLayer="linesLayer",e.PathLayer="pathLayer",e.ArcLayer="arcLayer",e.AreaLayer="areaLayer",e.PrismLayer="prismLayer"})(mB||(mB={}));var yB=function(){function e(){}return e.aggregation=function(n,r){var o=r.type,u=o===void 0?"grid":o,c=r.radius,p=r.method,g=r.field,y={type:u,size:c,method:p,field:g};n.transforms?(n.transforms=n.transforms.filter(function(S){return S.type!==y.type}),n.transforms.push(y)):n.transforms=[y]},e}(),p8=["name","zIndex","visible","minZoom","maxZoom","pickingBuffer","autoFit","blend"],Nx=function(e){(0,w.ZT)(n,e);function n(r){var o=e.call(this)||this;return o.options=Hp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return n.prototype.getDefaultOptions=function(){return{}},n.prototype.pickLayerConfig=function(r){var o=(0,X.ei)(r,p8);return o},n.prototype.addTo=function(r){r.addLayer(this.layer)},n.prototype.remove=function(r){r.removeLayer(this.layer)},n.prototype.update=function(r){this.updateOption(r),this.updateConfig(r)},n.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Hp({},this.options,r)},n.prototype.updateConfig=function(r){!(0,X.o8)(r.zIndex)&&!(0,X.Xy)(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(r.zIndex),!(0,X.o8)(r.blend)&&!(0,X.Xy)(this.lastOptions.blend,this.options.blend)&&this.setBlend(r.blend),!(0,X.o8)(r.minZoom)&&!(0,X.Xy)(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(r.minZoom),!(0,X.o8)(r.maxZoom)&&!(0,X.Xy)(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMinZoom(r.maxZoom),!(0,X.o8)(r.visible)&&!(0,X.Xy)(this.lastOptions.visible,this.options.visible)&&(r.visible?this.show():this.hide())},n.prototype.render=function(){this.layer.renderLayers()},n.prototype.setSource=function(r){if(r instanceof J_)this.layer.setSource(r);else{var o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&yB.aggregation(c,u);var p=this.layer.getSource();p?this.layer.setData(o,c):this.layer.source(o,c)}},n.prototype.changeData=function(r){this.setSource(r)},n.prototype.setIndex=function(r){this.layer.setIndex(r)},n.prototype.setBlend=function(r){this.layer.setBlend(r)},n.prototype.setMinZoom=function(r){this.layer.setMinZoom(r)},n.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r)},n.prototype.show=function(){this.layer.inited&&this.layer.show()},n.prototype.hide=function(){this.layer.inited&&this.layer.hide()},n.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},n.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():this.options.visible},n.prototype.fitBounds=function(r){this.layer.fitBounds(r)},n.prototype.on=function(r,o){return WR.indexOf(r)!==-1?this.layer.on(r,o):e.prototype.on.call(this,r,o),this},n.prototype.once=function(r,o){return WR.indexOf(r)!==-1?this.layer.once(r,o):e.prototype.once.call(this,r,o),this},n.prototype.off=function(r,o){return WR.indexOf(r)!==-1?this.layer.off(r,o):e.prototype.off.call(this,r,o),this},n.LayerType=mB,n.LayerConfigkeys=p8,n}(zR.Z);function d_(e,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u={};return e.forEach(function(c,p){u[c]=r[p]}),delete u.undefined,n(u)}}var ml=function(){function e(){}return e.shape=function(n,r){if((0,X.HD)(r))n.shape(r);else if((0,X.mf)(r)){var o=[];n.shape(o.join("*"),d_(o,r))}else if((0,X.Kn)(r)){var u=r.field?r.field:"";if((0,X.mf)(r.value)){var o=(0,X.kJ)(u)?u:u.split("*");n.shape(u,d_(o,r.value))}else n.shape(u,r.value);(0,X.HD)(u)&&r.scale&&e.scale(n,u,r.scale)}},e.size=function(n,r){if((0,X.hj)(r))n.size(r);else if((0,X.kJ)(r))n.size(r);else if((0,X.mf)(r)){var o=[];n.size(o.join("*"),d_(o,r))}else if((0,X.Kn)(r)){var u=r.field?r.field:"";if((0,X.mf)(r.value)){var o=(0,X.kJ)(u)?u:u.split("*");n.size(u,d_(o,r.value))}else n.size(u,r.value);(0,X.HD)(u)&&r.scale&&e.scale(n,u,r.scale)}},e.color=function(n,r){if((0,X.HD)(r))n.color(r);else if((0,X.mf)(r)){var o=[];n.color(o.join("*"),d_(o,r))}else if((0,X.Kn)(r)){var u=r.field?r.field:"";if((0,X.mf)(r.value)){var o=(0,X.kJ)(u)?u:u.split("*");n.color(u,d_(o,r.value))}else n.color(u,r.value);(0,X.HD)(u)&&r.scale&&e.scale(n,u,r.scale)}},e.style=function(n,r){r&&n.style(r)},e.state=function(n,r){var o=r.active,u=r.select;o&&n.active(o),u&&n.select(u)},e.rotate=function(n,r){(0,X.HD)(r)||(0,X.mf)(r)||(0,X.Kn)(r)},e.texture=function(n,r){(0,X.HD)(r)&&n.texture(r)},e.animate=function(n,r){((0,X.jn)(r)||(0,X.Kn)(r))&&n.animate(r)},e.scale=function(n,r,o){n.scale(r,o)},e.filter=function(n,r){var o=r.field?r.field:"",u=(0,X.kJ)(o)?o:o.split("*");n.filter(u.join("*"),d_(u,r.value))},e}();function lH(e,n){var r=n.field,o=n.content,u=n.style,c=u===void 0?{}:u,p=n.state,g=c.fontSize,y=c.fill,S=r||o||"",P={field:S,value:"text"};ml.shape(e,P),g&&ml.size(e,g),y&&ml.color(e,y),c&&ml.style(e,c),p&&ml.state(e,p)}var d8={style:{fontSize:12}},cH=[],fH=function(e){(0,w.ZT)(n,e);function n(r){var o=e.call(this,r)||this;o.type=Nx.LayerType.TextLayer,o.interaction=!1;var u=o.options,c=u.name,p=u.source,g=o.pickLayerConfig(o.options);return o.name=c||(0,X.EL)(o.type),o.layer=new y1((0,w.pi)((0,w.pi)({},g),{name:o.name})),o.mappingLayer(o.layer,o.options),o.setSource(p),o}return n.prototype.getDefaultOptions=function(){return d8},n.prototype.mappingLayer=function(r,o){lH(r,o)},n.prototype.update=function(r){e.prototype.update.call(this,r),this.mappingLayer(this.layer,this.options)},n.DefaultOptions=d8,n.LayerOptionsKeys=Nx.LayerConfigkeys.concat(cH),n}(Nx),_B;(function(e){e.Dot="dot",e.DotDensity="dotDensity",e.Heatmap="heatmap",e.Grid="grid",e.Hexbin="hexbin",e.Path="path",e.Flow="flow",e.Area="area",e.Choropleth="choropleth"})(_B||(_B={}));var hH={autoFit:!1},xB=function(e){(0,w.ZT)(n,e);function n(r,o){var u=this;if(typeof r=="string"||r instanceof Element){if(o===void 0)throw new Error("options is undefined");u=e.call(this,o)||this,u.container=u.createContainer(r),u.theme=u.createTheme(),u.scene=u.createScene(),u.registerResources(),u.initSource()}else u=e.call(this,r)||this;return u}return n.prototype.initSource=function(){this.source=this.createSource(),this.render(),this.inited=!0},n.prototype.initLayersEvent=function(){},n.prototype.getDefaultOptions=function(){return n.DefaultOptions},n.prototype.createSource=function(){var r=this.options.source,o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&yB.aggregation(c,u);var p=new J_(o,c);return p},n.prototype.createLabelLayer=function(r,o,u){var c=u||{},p=c.visible,g=c.minZoom,y=c.maxZoom,S=c.zIndex,P=S===void 0?0:S,L=new fH((0,w.pi)({name:"labelLayer",visible:p,minZoom:g,maxZoom:y,zIndex:P+.1,source:r},o));return L},n.prototype.updateLabelLayer=function(r,o,u,c){o?c?c.update((0,w.pi)({},o)):(c=this.createLabelLayer(r,o,u),this.layerGroup.addLayer(c)):o===!1&&c&&this.layerGroup.removeLayer(c)},n.prototype.render=function(){var r=this,o=this.createLayers(this.source);this.inited?(this.layerGroup.removeAllLayer(),o.addTo(this.scene),this.layerGroup=o):(this.layerGroup=o,this.scene.sceneService.loaded?this.onSceneLoaded():this.scene.once("loaded",function(){r.onSceneLoaded()})),this.initLayersEvent()},n.prototype.onSceneLoaded=function(){var r=this;this.sceneLoaded=!0,this.layerGroup.isEmpty()?this.onLayersLoaded():this.layerGroup.once("inited-all",function(){r.onLayersLoaded()}),this.layerGroup.addTo(this.scene)},n.prototype.onLayersLoaded=function(){this.layersLoaded=!0,this.initComponents(),this.loaded=!0,this.emit("loaded")},n.prototype.attachToScene=function(r,o){this.scene=r,this.theme=o||gB("default"),this.registerResources(),this.initSource()},n.prototype.unattachFromScene=function(){var r;this.removeAllLayer(),(r=this.tooltip)===null||r===void 0||r.destroy()},n.prototype.addToScene=function(r){this.attachToScene(r)},n.prototype.removeFromScene=function(){var r;this.removeAllLayer(),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy()},n.prototype.update=function(r){if(this.updateOption(r),r.map&&!(0,X.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.scene.setEnableRender(!1),r.source&&!(0,X.Xy)(this.lastOptions.source,this.options.source)){var o=r.source,u=o.data,c=(0,w._T)(o,["data"]);this.changeData(u,c)}this.scene.setEnableRender(!0),this.render(),this.updateComponents(),this.emit("update")},n.prototype.changeData=function(r,o){var u=this;this.options.source=Hp({},this.options.source,(0,w.pi)({data:r},o));var c=this.options.source,p=c.aggregation,g=(0,w._T)(c,["aggregation"]);p&&yB.aggregation(g,p),this.source.setData(this.options.source.data,g);var y=this.options.legend;y&&setTimeout(function(){u.updateLegendControl(y)}),this.emit("change-data")},n.DefaultOptions=hH,n.PlotType=_B,n}(uH),pH=Hp({},xB.DefaultOptions,{source:{data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}}),v8="#2f54eb",lf={active:{fill:!1,stroke:v8,lineWidth:1.5,lineOpacity:.8},select:{fill:!1,stroke:v8,lineWidth:1.5,lineOpacity:.8}},GE=function(e){return(0,X.o8)(e)||(e.active===!1?lf.active=Object.assign(lf.active,{fill:!1,stroke:!1}):typeof e.active=="object"&&(e.active.fill===!1?lf.active.fill=!1:typeof e.active.fill=="string"&&(lf.active.fill=e.active.fill),e.active.stroke===!1?lf.active.stroke=!1:typeof e.active.stroke=="string"&&(lf.active.stroke=e.active.stroke),typeof e.active.lineWidth=="number"&&(lf.active.lineWidth=e.active.lineWidth),typeof e.active.lineOpacity=="number"&&(lf.active.lineOpacity=e.active.lineOpacity)),e.select===!1?lf.select=Object.assign(lf.select,{fill:!1,stroke:!1}):typeof e.select=="object"&&(e.select.fill===!1?lf.select.fill=!1:typeof e.select.fill=="string"&&(lf.select.fill=e.select.fill),e.select.stroke===!1?lf.select.stroke=!1:typeof e.select.stroke=="string"&&(lf.select.stroke=e.select.stroke),typeof e.select.lineWidth=="number"&&(lf.select.lineWidth=e.select.lineWidth),typeof e.select.lineOpacity=="number"&&(lf.select.lineOpacity=e.select.lineOpacity))),lf};function dH(e,n,r,o,u,c){var p=c.color,g=c.style,y=c.state,S=GE(y),P={active:S.active.fill===!1?!1:{color:S.active.fill},select:!1},L={opacity:g==null?void 0:g.opacity},Z=g==null?void 0:g.lineWidth,q=g==null?void 0:g.stroke,ce={opacity:g==null?void 0:g.lineOpacity,dashArray:g==null?void 0:g.lineDash,lineType:g==null?void 0:g.lineType};if(ml.shape(e,"fill"),p&&ml.color(e,p),L&&ml.style(e,L),P&&ml.state(e,P),ml.shape(n,"line"),Z&&ml.size(n,Z),q&&ml.color(n,q),ce&&ml.style(n,ce),S.active.stroke){var me=S.active.stroke,be=S.active.lineWidth||Z,$e={opacity:S.active.lineOpacity};ml.shape(r,"line"),be&&ml.size(r,be),me&&ml.color(r,me),$e&&ml.style(r,$e)}if(S.select.fill){var ft=S.select.fill;ml.shape(o,"fill"),ft&&ml.color(o,ft),L&&ml.style(o,L),ml.state(o,{select:!1,active:!1})}if(S.select.stroke){var mt=S.select.stroke,be=S.select.lineWidth||Z,zt={opacity:S.select.lineOpacity};ml.shape(u,"line"),be&&ml.size(u,be),mt&&ml.color(u,mt),zt&&ml.style(u,zt)}}var vH=/\s/;function gH(e){for(var n=e.length;n--&&vH.test(e.charAt(n)););return n}var mH=gH,yH=/^\s+/;function _H(e){return e&&e.slice(0,mH(e)+1).replace(yH,"")}var xH=_H,g8=0/0,bH=/^[-+]0x[0-9a-f]+$/i,SH=/^0b[01]+$/i,EH=/^0o[0-7]+$/i,wH=parseInt;function CH(e){if(typeof e=="number")return e;if(ZR(e))return g8;if(VR(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=VR(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=xH(e);var r=SH.test(e);return r||EH.test(e)?wH(e.slice(2),r?2:8):bH.test(e)?g8:+e}var m8=CH,y8=1/0,TH=17976931348623157e292;function AH(e){if(!e)return e===0?e:0;if(e=m8(e),e===y8||e===-y8){var n=e<0?-1:1;return n*TH}return e===e?e:0}var MH=AH;function RH(e){var n=MH(e),r=n%1;return n===n?r?n-r:n:0}var IH=RH,OH=UR.isFinite,PH=Math.min;function kH(e){var n=Math[e];return function(r,o){if(r=m8(r),o=o==null?0:PH(IH(o),292),o&&OH(r)){var u=(dB(r)+"e").split("e"),c=n(u[0]+"e"+(+u[1]+o));return u=(dB(c)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return n(r)}}var DH=kH,LH=DH("round"),_8=LH,FH=function(e){return!Array.isArray(e[0].value)},BH=function(e){if(FH(e))return e;var n=e.map(function(r){return(0,w.pi)((0,w.pi)({},r),{value:[_8(r.value[0],2),_8(r.value[1],2)]})});return n},x8={visible:!0,state:{active:!1,select:!1},enabledMultiSelect:!1},NH=["color","style","state","enabledMultiSelect"],bB=function(e){(0,w.ZT)(n,e);function n(r){var o=e.call(this,r)||this;o.selectData=[],o.type=Nx.LayerType.AreaLayer,o.interaction=!0,o.onHighlighHandle=function(ce){var me=ce.feature,be=ce.featureId;o.setHighlightLayerSource(me,be)},o.onUnhighlighHandle=function(){o.setHighlightLayerSource()},o.onSelectHandle=function(ce){var me=o.options.enabledMultiSelect,be=ce.feature,$e=ce.featureId,ft=(0,X.d9)(o.selectData),mt=ft.findIndex(function(ar){return ar.featureId===$e});if(mt===-1)me?ft.push({feature:be,featureId:$e}):ft=[{feature:be,featureId:$e}],o.emit("select",be,(0,X.d9)(ft));else{var zt=ft[mt];me?ft.splice(mt,1):ft=[],o.emit("unselect",zt,(0,X.d9)(ft))}o.setSelectLayerSource(ft)};var u=o.options,c=u.name,p=u.source,g=u.visible,y=u.minZoom,S=u.maxZoom,P=u.zIndex,L=P===void 0?0:P,Z=o.pickLayerConfig(o.options),q=GE(o.options.state);return o.name=c||(0,X.EL)(o.type),o.layer=new x1((0,w.pi)((0,w.pi)({},Z),{name:o.name})),o.strokeLayer=new by({name:"strokeLayer",visible:g,zIndex:L,minZoom:y,maxZoom:S}),o.highlightLayer=new by({name:"highlightLayer",visible:g&&!!q.active.stroke,zIndex:L+.1,minZoom:y,maxZoom:S}),o.selectFillLayer=new x1({name:"selectFillLayer",visible:g&&!!q.select.fill,zIndex:L+.1,minZoom:y,maxZoom:S}),o.selectStrokeLayer=new by({name:"selectStrokeLayer",visible:g&&!!q.select.stroke,zIndex:L+.1,minZoom:y,maxZoom:S}),o.mappingLayer(o.options),o.setSource(p),o.initEvent(),o}return n.prototype.getDefaultOptions=function(){return x8},n.prototype.mappingLayer=function(r){dH(this.layer,this.strokeLayer,this.highlightLayer,this.selectFillLayer,this.selectStrokeLayer,r)},n.prototype.setSource=function(r){e.prototype.setSource.call(this,r),this.setStrokeLayerSource(),this.setHighlightLayerSource(),this.selectFillLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}}),this.selectStrokeLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}})},n.prototype.setStrokeLayerSource=function(){var r=this.layer.getSource();if(r)this.strokeLayer.setSource(r);else{var o=this.layer.sourceOption,u=o.data,c=o.options;this.strokeLayer.source(u,c)}},n.prototype.setHighlightLayerSource=function(r,o){if(o===void 0&&(o=-999),this.highlightLayerData!==o){var u=r?[r]:[];this.highlightLayer.setData({type:"FeatureCollection",features:u},{parser:{type:"geojson"}}),this.highlightLayerData=o}},n.prototype.setSelectLayerSource=function(r){if(r===void 0&&(r=[]),!(this.selectData.length===r.length&&(0,X.Xy)(this.selectData.map(function(u){var c=u.featureId;return c}),r.map(function(u){var c=u.featureId;return c})))){var o=r.map(function(u){var c=u.feature;return c});this.selectFillLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectStrokeLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectData=r}},n.prototype.initEvent=function(){this.layer.off("mousemove",this.onHighlighHandle),this.layer.off("unmousemove",this.onHighlighHandle),this.layer.off("click",this.onSelectHandle),this.selectData=[],this.highlightLayerData=null,this.options.state&&(this.options.state.active&&(this.layer.on("mousemove",this.onHighlighHandle),this.layer.on("unmousemove",this.onUnhighlighHandle)),this.options.state.select&&this.layer.on("click",this.onSelectHandle))},n.prototype.addTo=function(r){r.addLayer(this.layer),r.addLayer(this.strokeLayer),r.addLayer(this.highlightLayer),r.addLayer(this.selectFillLayer),r.addLayer(this.selectStrokeLayer)},n.prototype.remove=function(r){r.removeLayer(this.layer),r.removeLayer(this.strokeLayer),r.removeLayer(this.highlightLayer),r.removeLayer(this.selectFillLayer),r.removeLayer(this.selectStrokeLayer)},n.prototype.update=function(r){if(e.prototype.update.call(this,r),this.mappingLayer(this.options),this.options.visible){!(0,X.o8)(r.state)&&!(0,X.Xy)(this.lastOptions.state,this.options.state)&&this.updateHighlightLayer();var o=GE(this.options.state);o.active.stroke&&this.setHighlightLayerSource(),(o.select.fill||o.select.stroke)&&this.setSelectLayerSource()}this.initEvent()},n.prototype.updateHighlightLayer=function(){var r=GE(this.options.state),o=GE(this.lastOptions.state);o.active.stroke!==r.active.stroke&&(r.active.stroke?this.highlightLayer.show():this.highlightLayer.hide()),o.select.fill!==r.select.fill&&(r.select.fill?this.selectFillLayer.show():this.selectFillLayer.hide()),o.select.stroke!==r.select.stroke&&(r.select.stroke?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},n.prototype.setIndex=function(r){this.layer.setIndex(r),this.strokeLayer.setIndex(r),this.highlightLayer.setIndex(r+.1),this.selectFillLayer.setIndex(r+.1),this.selectStrokeLayer.setIndex(r+.1)},n.prototype.setMinZoom=function(r){this.layer.setMinZoom(r),this.strokeLayer.setMinZoom(r),this.highlightLayer.setMinZoom(r),this.selectFillLayer.setMinZoom(r),this.selectStrokeLayer.setMinZoom(r)},n.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r),this.strokeLayer.setMaxZoom(r),this.highlightLayer.setMaxZoom(r),this.selectFillLayer.setMaxZoom(r),this.selectStrokeLayer.setMaxZoom(r)},n.prototype.show=function(){this.layer.inited&&(this.layer.show(),this.strokeLayer.show(),this.selectFillLayer.show(),this.selectStrokeLayer.show())},n.prototype.hide=function(){this.layer.inited&&(this.layer.hide(),this.strokeLayer.hide(),this.selectFillLayer.hide(),this.selectStrokeLayer.hide())},n.prototype.getColorLegendItems=function(){var r=this.layer.getLegendItems("color");if(Array.isArray(r)&&r.length!==0){var o=BH(r);return o}return[]},n.prototype.setActive=function(r){},n.prototype.setSelect=function(r){},n.DefaultOptions=x8,n.LayerOptionsKeys=Nx.LayerConfigkeys.concat(NH),n}(Nx),zH=function(e){(0,w.ZT)(n,e);function n(){var r=e.apply(this,(0,w.ev)([],(0,w.CR)(arguments),!1))||this;return r.type=xB.PlotType.Area,r}return n.prototype.getDefaultOptions=function(){return n.DefaultOptions},n.prototype.createLayers=function(r){this.areaLayer=new bB((0,w.pi)({source:r},(0,X.ei)(this.options,bB.LayerOptionsKeys)));var o=new c8([this.areaLayer]);return this.options.label&&(this.labelLayer=this.createLabelLayer(r,this.options.label,this.options),o.addLayer(this.labelLayer)),o},n.prototype.updateLayers=function(r){var o=(0,X.ei)(r,bB.LayerOptionsKeys);this.areaLayer.update(o),this.updateLabelLayer(this.source,r.label,this.options,this.labelLayer)},n.prototype.initLayersEvent=function(){},n.prototype.getLegendOptions=function(){var r=this.areaLayer.getColorLegendItems();return r.length!==0?{type:"category",items:r}:{}},n.DefaultOptions=pH,n}(xB),zW=function(e,n){var r={}.toString;return r.call(e)==="[object ".concat(n,"]")},UW=function(e){return Object.prototype.toString.call(e).slice(8,-1)},SB=function(e){if(!e||typeof e!="object")return e;var n;return Array.isArray(e)?n=e.map(function(r){return SB(r)}):(n={},Object.keys(e).forEach(function(r){return n[r]=SB(e[r])})),n},ZW=function(e){if(!e)return e;var n={};for(var r in e)n[r]=e[r];return n},$E=function(){return $E=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},$E.apply(this,arguments)},UH=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},b8=function(e){var n=e.source,r=UH(e,["source"]),o=$E($E({},SB(r)),{source:$E({},n)});return o},EB=function(){return EB=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},EB.apply(this,arguments)},$R=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r};function ZH(e,n){var r=(0,W.useRef)(),o=(0,W.useRef)(),u=(0,W.useRef)(null),c=n.onReady;return(0,W.useEffect)(function(){if(!(!r.current||!o.current||(0,X.Xy)(o.current,n))){var p=!1,g=!1,y=!1,S=o.current,P=S.onReady,L=S.map,Z=S.source,q=Z.data,ce=$R(Z,["data"]),me=$R(S,["onReady","map","source"]),be=n.onReady,$e=n.map,ft=n.source,mt=ft.data,zt=$R(ft,["data"]),ar=$R(n,["onReady","map","source"]);if(g=!(0,X.Xy)(L,$e),p=!(0,X.Xy)(ce,zt)||q!==mt,y=!(0,X.Xy)(me,ar),o.current=b8(n),g){var nr=(0,X.ei)($e,["center","pitch","rotation","zoom","style"]);r.current.updateMap(nr)}p&&(r.current.loaded?r.current.changeData(mt,zt):r.current.once("loaded",function(){var Yt;(Yt=r.current)===null||Yt===void 0||Yt.changeData(mt,zt)})),y&&(r.current.loaded?r.current.update(ar):r.current.once("loaded",function(){var Yt;(Yt=r.current)===null||Yt===void 0||Yt.update(ar)}))}},[n]),(0,W.useEffect)(function(){return u.current?(o.current||(o.current=b8(n)),r.current=new e(u.current,EB({},n)),c&&r.current.once("loaded",function(){c(r.current)}),function(){r.current&&(r.current.destroy(),r.current=void 0)}):function(){return null}},[]),{plotRef:r,containerRef:u}}var VH=function(e,n){e&&((0,X.mf)(e)?e(n):e.current=n)},jH=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),HH=function(e){jH(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(o){var u=r.props.errorTemplate;switch(o){default:return typeof u=="function"?u(o):u||W.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",o.message)}},r}return n.getDerivedStateFromError=function(r){return{hasError:!0,error:r}},n.getDerivedStateFromProps=function(r,o){return o.children!==r.children?{children:r.children,hasError:!1,error:void 0}:null},n.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):W.createElement(W.Fragment,null,this.props.children)},n}(W.Component),WH=HH,GH=k(24561),$H=function(e){var n=e.loadingTemplate,r=function(){return n||W.createElement(GH.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1},W.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),W.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),W.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),W.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),W.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),W.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),W.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),W.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),W.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),W.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return W.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},r())},XH=$H,YH=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},qH=(0,W.forwardRef)(function(e,n){var r=e.chartRef,o=e.containerStyle,u=o===void 0?{height:"inherit"}:o,c=e.className,p=e.loading,g=e.loadingTemplate,y=e.errorTemplate,S=YH(e,["chartRef","containerStyle","className","loading","loadingTemplate","errorTemplate"]),P=ZH(zH,S),L=P.plotRef,Z=P.containerRef;return(0,W.useEffect)(function(){VH(r,L.current)},[L.current]),(0,W.useImperativeHandle)(n,function(){return{getChart:function(){return L.current}}}),W.createElement(WH,{errorTemplate:y},p&&W.createElement(XH,{loadingTemplate:g}),W.createElement("div",{className:c,style:u,ref:Z}))}),KH=qH},79611:function(vt,N,k){"use strict";var H=k(67294),W=k(19372),w=k(11924),X=k(79360),j=k(24770),ee=k(80803),Y=function(Q,ye){var se={};for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ye.indexOf(ne)<0&&(se[ne]=Q[ne]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,ne=Object.getOwnPropertySymbols(Q);$<ne.length;$++)ye.indexOf(ne[$])<0&&Object.prototype.propertyIsEnumerable.call(Q,ne[$])&&(se[ne[$]]=Q[ne[$]]);return se},re=(0,H.forwardRef)(function(Q,ye){var se=Q.chartRef,ne=Q.style,$=ne===void 0?{height:"inherit"}:ne,A=Q.className,b=Q.loading,te=Q.loadingTemplate,le=Q.errorTemplate,Ae=Y(Q,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,w.Z)(W.$Q,Ae),Ne=De.chart,Te=De.container;return(0,H.useEffect)(function(){(0,X.J)(se,Ne.current)},[Ne.current]),(0,H.useImperativeHandle)(ye,function(){return{getChart:function(){return Ne.current}}}),H.createElement(j.Z,{errorTemplate:le},b&&H.createElement(ee.Z,{loadingTemplate:te,theme:Q.theme}),H.createElement("div",{className:A,style:$,ref:Te}))});N.Z=re},78677:function(vt,N,k){"use strict";var H=k(67294),W=k(19372),w=k(11924),X=k(79360),j=k(24770),ee=k(80803),Y=function(Q,ye){var se={};for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ye.indexOf(ne)<0&&(se[ne]=Q[ne]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,ne=Object.getOwnPropertySymbols(Q);$<ne.length;$++)ye.indexOf(ne[$])<0&&Object.prototype.propertyIsEnumerable.call(Q,ne[$])&&(se[ne[$]]=Q[ne[$]]);return se},re=(0,H.forwardRef)(function(Q,ye){var se=Q.chartRef,ne=Q.style,$=ne===void 0?{height:"inherit"}:ne,A=Q.className,b=Q.loading,te=Q.loadingTemplate,le=Q.errorTemplate,Ae=Y(Q,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,w.Z)(W.sg,Ae),Ne=De.chart,Te=De.container;return(0,H.useEffect)(function(){(0,X.J)(se,Ne.current)},[Ne.current]),(0,H.useImperativeHandle)(ye,function(){return{getChart:function(){return Ne.current}}}),H.createElement(j.Z,{errorTemplate:le},b&&H.createElement(ee.Z,{loadingTemplate:te,theme:Q.theme}),H.createElement("div",{className:A,style:$,ref:Te}))});N.Z=re},80652:function(vt,N,k){"use strict";var H=k(67294),W=k(19372),w=k(11924),X=k(79360),j=k(24770),ee=k(80803),Y=function(Q,ye){var se={};for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ye.indexOf(ne)<0&&(se[ne]=Q[ne]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,ne=Object.getOwnPropertySymbols(Q);$<ne.length;$++)ye.indexOf(ne[$])<0&&Object.prototype.propertyIsEnumerable.call(Q,ne[$])&&(se[ne[$]]=Q[ne[$]]);return se},re=(0,H.forwardRef)(function(Q,ye){var se=Q.chartRef,ne=Q.style,$=ne===void 0?{height:"inherit"}:ne,A=Q.className,b=Q.loading,te=Q.loadingTemplate,le=Q.errorTemplate,Ae=Y(Q,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,w.Z)(W.x1,Ae),Ne=De.chart,Te=De.container;return(0,H.useEffect)(function(){(0,X.J)(se,Ne.current)},[Ne.current]),(0,H.useImperativeHandle)(ye,function(){return{getChart:function(){return Ne.current}}}),H.createElement(j.Z,{errorTemplate:le},b&&H.createElement(ee.Z,{loadingTemplate:te,theme:Q.theme}),H.createElement("div",{className:A,style:$,ref:Te}))});N.Z=re},63430:function(vt,N,k){"use strict";var H=k(67294),W=k(19372),w=k(11924),X=k(79360),j=k(24770),ee=k(80803),Y=function(Q,ye){var se={};for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ye.indexOf(ne)<0&&(se[ne]=Q[ne]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,ne=Object.getOwnPropertySymbols(Q);$<ne.length;$++)ye.indexOf(ne[$])<0&&Object.prototype.propertyIsEnumerable.call(Q,ne[$])&&(se[ne[$]]=Q[ne[$]]);return se},re=(0,H.forwardRef)(function(Q,ye){var se=Q.chartRef,ne=Q.style,$=ne===void 0?{height:"inherit"}:ne,A=Q.className,b=Q.loading,te=Q.loadingTemplate,le=Q.errorTemplate,Ae=Y(Q,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,w.Z)(W.by,Ae),Ne=De.chart,Te=De.container;return(0,H.useEffect)(function(){(0,X.J)(se,Ne.current)},[Ne.current]),(0,H.useImperativeHandle)(ye,function(){return{getChart:function(){return Ne.current}}}),H.createElement(j.Z,{errorTemplate:le},b&&H.createElement(ee.Z,{loadingTemplate:te,theme:Q.theme}),H.createElement("div",{className:A,style:$,ref:Te}))});N.Z=re},24770:function(vt,N,k){"use strict";var H=k(67294),W=function(){var X=function(j,ee){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,re){Y.__proto__=re}||function(Y,re){for(var Q in re)Object.prototype.hasOwnProperty.call(re,Q)&&(Y[Q]=re[Q])},X(j,ee)};return function(j,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");X(j,ee);function Y(){this.constructor=j}j.prototype=ee===null?Object.create(ee):(Y.prototype=ee.prototype,new Y)}}(),w=function(X){W(j,X);function j(){var ee=X!==null&&X.apply(this,arguments)||this;return ee.state={hasError:!1},ee.renderError=function(Y){var re=ee.props.errorTemplate;switch(Y){default:return typeof re=="function"?re(Y):re||H.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Y.message)}},ee}return j.getDerivedStateFromError=function(ee){return{hasError:!0,error:ee}},j.getDerivedStateFromProps=function(ee,Y){return Y.children!==ee.children?{children:ee.children,hasError:!1,error:void 0}:null},j.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):H.createElement(H.Fragment,null,this.props.children)},j}(H.Component);N.Z=w},11924:function(vt,N,k){"use strict";k.d(N,{Z:function(){return He}});var H=k(67294),W=k(21030),w=k(73935),X=k.t(w,2),j=function(){return j=Object.assign||function(Ue){for(var Qe,Se=1,xe=arguments.length;Se<xe;Se++){Qe=arguments[Se];for(var rt in Qe)Object.prototype.hasOwnProperty.call(Qe,rt)&&(Ue[rt]=Qe[rt])}return Ue},j.apply(this,arguments)},ee=function(Ue,Qe,Se,xe){function rt(Je){return Je instanceof Se?Je:new Se(function(dt){dt(Je)})}return new(Se||(Se=Promise))(function(Je,dt){function Bt(Le){try{Xe(xe.next(Le))}catch(je){dt(je)}}function Ye(Le){try{Xe(xe.throw(Le))}catch(je){dt(je)}}function Xe(Le){Le.done?Je(Le.value):rt(Le.value).then(Bt,Ye)}Xe((xe=xe.apply(Ue,Qe||[])).next())})},Y=function(Ue,Qe){var Se={label:0,sent:function(){if(Je[0]&1)throw Je[1];return Je[1]},trys:[],ops:[]},xe,rt,Je,dt;return dt={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function Bt(Xe){return function(Le){return Ye([Xe,Le])}}function Ye(Xe){if(xe)throw new TypeError("Generator is already executing.");for(;dt&&(dt=0,Xe[0]&&(Se=0)),Se;)try{if(xe=1,rt&&(Je=Xe[0]&2?rt.return:Xe[0]?rt.throw||((Je=rt.return)&&Je.call(rt),0):rt.next)&&!(Je=Je.call(rt,Xe[1])).done)return Je;switch(rt=0,Je&&(Xe=[Xe[0]&2,Je.value]),Xe[0]){case 0:case 1:Je=Xe;break;case 4:return Se.label++,{value:Xe[1],done:!1};case 5:Se.label++,rt=Xe[1],Xe=[0];continue;case 7:Xe=Se.ops.pop(),Se.trys.pop();continue;default:if(Je=Se.trys,!(Je=Je.length>0&&Je[Je.length-1])&&(Xe[0]===6||Xe[0]===2)){Se=0;continue}if(Xe[0]===3&&(!Je||Xe[1]>Je[0]&&Xe[1]<Je[3])){Se.label=Xe[1];break}if(Xe[0]===6&&Se.label<Je[1]){Se.label=Je[1],Je=Xe;break}if(Je&&Se.label<Je[2]){Se.label=Je[2],Se.ops.push(Xe);break}Je[2]&&Se.ops.pop(),Se.trys.pop();continue}Xe=Qe.call(Ue,Se)}catch(Le){Xe=[6,Le],rt=0}finally{xe=Je=0}if(Xe[0]&5)throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}},re=j({},X),Q=re.version,ye=re.render,se=re.unmountComponentAtNode,ne;try{var $=Number((Q||"").split(".")[0]);$>=18&&(ne=re.createRoot)}catch(Ue){}function A(Ue){var Qe=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Qe&&typeof Qe=="object"&&(Qe.usingClientEntryPoint=Ue)}var b="__rc_react_root__";function te(Ue,Qe){A(!0);var Se=Qe[b]||ne(Qe);A(!1),Se.render(Ue),Qe[b]=Se}function le(Ue,Qe){ye(Ue,Qe)}function Ae(Ue,Qe){}function De(Ue,Qe){if(ne){te(Ue,Qe);return}le(Ue,Qe)}function Ne(Ue){return ee(this,void 0,void 0,function(){return Y(this,function(Qe){return[2,Promise.resolve().then(function(){var Se;(Se=Ue[b])===null||Se===void 0||Se.unmount(),delete Ue[b]})]})})}function Te(Ue){se(Ue)}function We(Ue){}function _e(Ue){return ee(this,void 0,void 0,function(){return Y(this,function(Qe){return ne!==void 0?[2,Ne(Ue)]:(Te(Ue),[2])})})}var we=new Map,Re=function(Ue,Qe,Se){var xe=document.createElement("div");return Qe==="tooltip"&&(xe.setAttribute("data-uuid",Se),we.has(Se)?xe=we.get(Se):we.set(Se,xe),xe.className="g2-tooltip"),De(Ue,xe),xe},ze=Re,Ge=function(Ue,Qe){var Se={}.toString;return Se.call(Ue)==="[object ".concat(Qe,"]")},yt=function(Ue){if(!Ue)return Ue;var Qe={};for(var Se in Ue)Qe[Se]=Ue[Se];return Qe},ke=function(Ue){return Object.prototype.toString.call(Ue).slice(8,-1)},tt=function(Ue){if(!Ue||typeof Ue!="object")return Ue;var Qe;return Array.isArray(Ue)?Qe=Ue.map(function(Se){return tt(Se)}):(Qe={},Object.keys(Ue).forEach(function(Se){return Qe[Se]=tt(Ue[Se])})),Qe},ae=function(Ue,Qe){for(var Se=Ue,xe=0;xe<Qe.length;xe+=1)if(Se!=null&&Se[Qe[xe]])Se=Se[Qe[xe]];else{Se=void 0;break}return Se},Ke=function(Ue,Qe,Se){if(!Ue)return Ue;var xe=Ue;return Qe.forEach(function(rt,Je){Je<Qe.length-1?xe=xe[rt]:xe[rt]=Se}),Ue},he=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ue){var Qe=Math.random()*16|0,Se=Ue=="x"?Qe:Qe&3|8;return Se.toString(16)})},Pe=function(){return Pe=Object.assign||function(Ue){for(var Qe,Se=1,xe=arguments.length;Se<xe;Se++){Qe=arguments[Se];for(var rt in Qe)Object.prototype.hasOwnProperty.call(Qe,rt)&&(Ue[rt]=Qe[rt])}return Ue},Pe.apply(this,arguments)},lt=function(Ue,Qe){var Se={};for(var xe in Ue)Object.prototype.hasOwnProperty.call(Ue,xe)&&Qe.indexOf(xe)<0&&(Se[xe]=Ue[xe]);if(Ue!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,xe=Object.getOwnPropertySymbols(Ue);rt<xe.length;rt++)Qe.indexOf(xe[rt])<0&&Object.prototype.propertyIsEnumerable.call(Ue,xe[rt])&&(Se[xe[rt]]=Ue[xe[rt]]);return Se};function He(Ue,Qe){var Se=(0,H.useRef)(),xe=(0,H.useRef)(),rt=(0,H.useRef)(null),Je=Qe.onReady,dt=Qe.onEvent,Bt=function(je,at){var Me;return je===void 0&&(je="image/png"),(Me=Se.current)===null||Me===void 0?void 0:Me.chart.canvas.cfg.el.toDataURL(je,at)},Ye=function(je,at,Me){var Ze;je===void 0&&(je="download"),at===void 0&&(at="image/png");var _t=je;je.indexOf(".")===-1&&(_t="".concat(je,".").concat(at.split("/")[1]));var Mt=(Ze=Se.current)===null||Ze===void 0?void 0:Ze.chart.canvas.cfg.el.toDataURL(at,Me),ir=document.createElement("a");return ir.href=Mt,ir.download=_t,document.body.appendChild(ir),ir.click(),document.body.removeChild(ir),ir=null,_t},Xe=function(je,at,Me,Ze){var _t=ae(je,at);Ke(je,at,function(){for(var Mt=[],ir=0;ir<arguments.length;ir++)Mt[ir]=arguments[ir];var Tr=Ge(_t,"Function")?_t.apply(void 0,Mt):_t;return Ge(Tr,"String")||Ge(Tr,"Number")||Ge(Tr,"HTMLDivElement")?Tr:ze(Tr,Me,Ze)})},Le=function(){var je=he();ae(Qe,["statistic","content","customHtml"])&&Xe(Qe,["statistic","content","customHtml"]),ae(Qe,["statistic","title","customHtml"])&&Xe(Qe,["statistic","title","customHtml"]),typeof Qe.tooltip=="object"&&(ae(Qe,["tooltip","container"])&&Xe(Qe,["tooltip","container"],"tooltip",je),ae(Qe,["tooltip","customContent"])&&Xe(Qe,["tooltip","customContent"],"tooltip",je))};return(0,H.useEffect)(function(){if(Se.current&&!(0,W.Xy)(xe.current,Qe)){var je=!1;if(xe.current){var at=xe.current,Me=at.data,Ze=at.value,_t=at.percent,Mt=lt(at,["data","value","percent"]),ir=Qe.data,Tr=Qe.value,et=Qe.percent,en=lt(Qe,["data","value","percent"]);je=(0,W.Xy)(Mt,en)}if(xe.current=tt(Qe),je&&(0,W.U2)(Qe,"chartType")!=="Mix"){var Xr="data",Sr=["percent"],pt=Object.keys(Qe);Sr.forEach(function(Ut){pt.includes(Ut)&&(Xr=Ut)}),Se.current.changeData((Qe==null?void 0:Qe[Xr])||[]),Se.current.render()}else Le(),Se.current.update(Qe)}},[Qe]),(0,H.useEffect)(function(){if(!rt.current)return function(){return null};xe.current||(xe.current=tt(Qe)),Le();var je=new Ue(rt.current,Pe({},Qe));je.toDataURL=function(Me,Ze){return Bt(Me,Ze)},je.downloadImage=function(Me,Ze,_t){return Ye(Me,Ze,_t)},je.render(),Se.current=yt(je),Je&&Je(je);var at=function(Me){dt&&dt(je,Me)};return je.on("*",at),function(){Se.current&&(Se.current.destroy(),Se.current.off("*",at),Se.current=void 0)}},[]),{chart:Se,container:rt}}},80803:function(vt,N,k){"use strict";var H=k(67294),W=k(24561),w=function(X){var j=X.loadingTemplate,ee=X.theme,Y=ee===void 0?"light":ee,re=function(){return j||H.createElement(W.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:Y==="dark"?"#262626":"#D9D9D9"},H.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),H.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),H.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),H.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),H.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),H.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),H.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),H.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),H.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),H.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return H.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:Y==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},re())};N.Z=w},79360:function(vt,N,k){"use strict";k.d(N,{J:function(){return W}});var H=k(21030),W=function(w,X){w&&((0,H.mf)(w)?w(X):w.current=X)}},39615:function(vt,N,k){"use strict";k.d(N,{Z:function(){return Xr}});var H=k(4942),W=k(1413),w=k(45987),X=k(28459),j=k(93967),ee=k.n(j),Y=k(67294),re=k(2338),Q=k(44962),ye=k(98082),se=function(pt){return(0,H.Z)({},pt.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:pt.marginLG,marginInline:0,color:pt.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function ne(Sr){return(0,ye.Xj)("ProCardOperation",function(pt){var Ut=(0,W.Z)((0,W.Z)({},pt),{},{componentCls:".".concat(Sr)});return[se(Ut)]})}var $=k(85893),A=function(pt){var Ut=pt.className,Gt=pt.style,Tt=Gt===void 0?{}:Gt,qt=pt.children,fr=(0,Y.useContext)(X.ZP.ConfigContext),hr=fr.getPrefixCls,Er=hr("pro-card-operation"),Ir=ne(Er),ue=Ir.wrapSSR,G=Ir.hashId,oe=ee()(Er,Ut,G);return ue((0,$.jsx)("div",{className:oe,style:Tt,children:qt}))},b=A,te=k(87462),le=k(36688),Ae=k(5627),De=function(pt,Ut){return Y.createElement(Ae.Z,(0,te.Z)({},pt,{ref:Ut,icon:le.Z}))},Ne=Y.forwardRef(De),Te=k(83062),We=k(40411),_e=k(57838),we=k(96159),Re=k(64217),ze=k(53124),Ge=k(87564),ke=Sr=>{const{value:pt,formatter:Ut,precision:Gt,decimalSeparator:Tt,groupSeparator:qt="",prefixCls:fr}=Sr;let hr;if(typeof Ut=="function")hr=Ut(pt);else{const Er=String(pt),Ir=Er.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Ir||Er==="-")hr=Er;else{const ue=Ir[1];let G=Ir[2]||"0",oe=Ir[4]||"";G=G.replace(/\B(?=(\d{3})+(?!\d))/g,qt),typeof Gt=="number"&&(oe=oe.padEnd(Gt,"0").slice(0,Gt>0?Gt:0)),oe&&(oe=`${Tt}${oe}`),hr=[Y.createElement("span",{key:"int",className:`${fr}-content-value-int`},ue,G),oe&&Y.createElement("span",{key:"decimal",className:`${fr}-content-value-decimal`},oe)]}}return Y.createElement("span",{className:`${fr}-content-value`},hr)},tt=k(14747),ae=k(91945),Ke=k(45503);const he=Sr=>{const{componentCls:pt,marginXXS:Ut,padding:Gt,colorTextDescription:Tt,titleFontSize:qt,colorTextHeading:fr,contentFontSize:hr,fontFamily:Er}=Sr;return{[`${pt}`]:Object.assign(Object.assign({},(0,tt.Wf)(Sr)),{[`${pt}-title`]:{marginBottom:Ut,color:Tt,fontSize:qt},[`${pt}-skeleton`]:{paddingTop:Gt},[`${pt}-content`]:{color:fr,fontSize:hr,fontFamily:Er,[`${pt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${pt}-content-prefix, ${pt}-content-suffix`]:{display:"inline-block"},[`${pt}-content-prefix`]:{marginInlineEnd:Ut},[`${pt}-content-suffix`]:{marginInlineStart:Ut}}})}},Pe=Sr=>{const{fontSizeHeading3:pt,fontSize:Ut}=Sr;return{titleFontSize:Ut,contentFontSize:pt}};var lt=(0,ae.I$)("Statistic",Sr=>{const pt=(0,Ke.TS)(Sr,{});return[he(pt)]},Pe),He=function(Sr,pt){var Ut={};for(var Gt in Sr)Object.prototype.hasOwnProperty.call(Sr,Gt)&&pt.indexOf(Gt)<0&&(Ut[Gt]=Sr[Gt]);if(Sr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tt=0,Gt=Object.getOwnPropertySymbols(Sr);Tt<Gt.length;Tt++)pt.indexOf(Gt[Tt])<0&&Object.prototype.propertyIsEnumerable.call(Sr,Gt[Tt])&&(Ut[Gt[Tt]]=Sr[Gt[Tt]]);return Ut},Qe=Sr=>{const{prefixCls:pt,className:Ut,rootClassName:Gt,style:Tt,valueStyle:qt,value:fr=0,title:hr,valueRender:Er,prefix:Ir,suffix:ue,loading:G=!1,formatter:oe,precision:Ie,decimalSeparator:qe=".",groupSeparator:At=",",onMouseEnter:rr,onMouseLeave:Zt}=Sr,wt=He(Sr,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:Pt,direction:ge,statistic:ve}=Y.useContext(ze.E_),Fe=Pt("statistic",pt),[nt,St,$t]=lt(Fe),vr=Y.createElement(ke,{decimalSeparator:qe,groupSeparator:At,prefixCls:Fe,formatter:oe,precision:Ie,value:fr}),Rt=ee()(Fe,{[`${Fe}-rtl`]:ge==="rtl"},ve==null?void 0:ve.className,Ut,Gt,St,$t),ct=(0,Re.Z)(wt,{aria:!0,data:!0});return nt(Y.createElement("div",Object.assign({},ct,{className:Rt,style:Object.assign(Object.assign({},ve==null?void 0:ve.style),Tt),onMouseEnter:rr,onMouseLeave:Zt}),hr&&Y.createElement("div",{className:`${Fe}-title`},hr),Y.createElement(Ge.Z,{paragraph:!1,loading:G,className:`${Fe}-skeleton`},Y.createElement("div",{style:qt,className:`${Fe}-content`},Ir&&Y.createElement("span",{className:`${Fe}-content-prefix`},Ir),Er?Er(vr):vr,ue&&Y.createElement("span",{className:`${Fe}-content-suffix`},ue)))))};const Se=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function xe(Sr,pt){let Ut=Sr;const Gt=/\[[^\]]*]/g,Tt=(pt.match(Gt)||[]).map(Er=>Er.slice(1,-1)),qt=pt.replace(Gt,"[]"),fr=Se.reduce((Er,Ir)=>{let[ue,G]=Ir;if(Er.includes(ue)){const oe=Math.floor(Ut/G);return Ut-=oe*G,Er.replace(new RegExp(`${ue}+`,"g"),Ie=>{const qe=Ie.length;return oe.toString().padStart(qe,"0")})}return Er},qt);let hr=0;return fr.replace(Gt,()=>{const Er=Tt[hr];return hr+=1,Er})}function rt(Sr,pt){const{format:Ut=""}=pt,Gt=new Date(Sr).getTime(),Tt=Date.now(),qt=Math.max(Gt-Tt,0);return xe(qt,Ut)}var Je=function(Sr,pt){var Ut={};for(var Gt in Sr)Object.prototype.hasOwnProperty.call(Sr,Gt)&&pt.indexOf(Gt)<0&&(Ut[Gt]=Sr[Gt]);if(Sr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tt=0,Gt=Object.getOwnPropertySymbols(Sr);Tt<Gt.length;Tt++)pt.indexOf(Gt[Tt])<0&&Object.prototype.propertyIsEnumerable.call(Sr,Gt[Tt])&&(Ut[Gt[Tt]]=Sr[Gt[Tt]]);return Ut};const dt=1e3/30;function Bt(Sr){return new Date(Sr).getTime()}const Ye=Sr=>{const{value:pt,format:Ut="HH:mm:ss",onChange:Gt,onFinish:Tt}=Sr,qt=Je(Sr,["value","format","onChange","onFinish"]),fr=(0,_e.Z)(),hr=Y.useRef(null),Er=()=>{Tt==null||Tt(),hr.current&&(clearInterval(hr.current),hr.current=null)},Ir=()=>{const oe=Bt(pt);oe>=Date.now()&&(hr.current=setInterval(()=>{fr(),Gt==null||Gt(oe-Date.now()),oe<Date.now()&&Er()},dt))};Y.useEffect(()=>(Ir(),()=>{hr.current&&(clearInterval(hr.current),hr.current=null)}),[pt]);const ue=(oe,Ie)=>rt(oe,Object.assign(Object.assign({},Ie),{format:Ut})),G=oe=>(0,we.Tm)(oe,{title:void 0});return Y.createElement(Qe,Object.assign({},qt,{value:pt,valueRender:G,formatter:ue}))};var Xe=Y.memo(Ye);Qe.Countdown=Xe;var Le=Qe,je=function(pt){return(0,H.Z)({},pt.componentCls,(0,H.Z)((0,H.Z)((0,H.Z)((0,H.Z)((0,H.Z)({display:"flex",fontSize:pt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,H.Z)({display:"flex",width:"100%"},"".concat(pt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,H.Z)({width:"100%"},"".concat(pt.antCls,"-statistic-content"),{"&-value-int":{fontSize:pt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(pt.antCls,"-statistic-title"),{color:pt.colorText}),"&-trend-up",(0,H.Z)({},"".concat(pt.antCls,"-statistic-content"),(0,H.Z)({color:"#f5222d"},"".concat(pt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,H.Z)({},"".concat(pt.antCls,"-statistic-content"),(0,H.Z)({color:"#389e0d"},"".concat(pt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,H.Z)((0,H.Z)((0,H.Z)({display:"flex",justifyContent:"space-between"},"".concat(pt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(pt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(pt.antCls,"-statistic-title,").concat(pt.antCls,"-statistic-content,").concat(pt.antCls,"-statistic-content-suffix,").concat(pt.antCls,"-statistic-content-prefix,").concat(pt.antCls,"-statistic-content-value-decimal"),{fontSize:pt.fontSize})),"& &-layout-inline",(0,H.Z)((0,H.Z)((0,H.Z)({display:"inline-flex",color:pt.colorTextSecondary},"".concat(pt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(pt.antCls,"-statistic-content"),{color:pt.colorTextSecondary}),"".concat(pt.antCls,"-statistic-title,").concat(pt.antCls,"-statistic-content,").concat(pt.antCls,"-statistic-content-suffix,").concat(pt.antCls,"-statistic-content-prefix,").concat(pt.antCls,"-statistic-content-value-decimal"),{fontSize:pt.fontSizeSM})))};function at(Sr){return(0,ye.Xj)("Statistic",function(pt){var Ut=(0,W.Z)((0,W.Z)({},pt),{},{componentCls:".".concat(Sr)});return[je(Ut)]})}var Me=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Ze=function(pt){var Ut=pt.className,Gt=pt.layout,Tt=Gt===void 0?"inline":Gt,qt=pt.style,fr=pt.description,hr=pt.children,Er=pt.title,Ir=pt.tip,ue=pt.status,G=pt.trend,oe=pt.prefix,Ie=pt.icon,qe=(0,w.Z)(pt,Me),At=(0,Y.useContext)(X.ZP.ConfigContext),rr=At.getPrefixCls,Zt=rr("pro-card-statistic"),wt=at(Zt),Pt=wt.wrapSSR,ge=wt.hashId,ve=ee()(Zt,Ut,ge),Fe=ee()("".concat(Zt,"-status"),ge),nt=ee()("".concat(Zt,"-icon"),ge),St=ee()("".concat(Zt,"-wrapper"),ge),$t=ee()("".concat(Zt,"-content"),ge),vr=ee()(ge,(0,H.Z)((0,H.Z)({},"".concat(Zt,"-layout-").concat(Tt),Tt),"".concat(Zt,"-trend-").concat(G),G)),Rt=Ir&&(0,$.jsx)(Te.Z,{title:Ir,children:(0,$.jsx)(Ne,{className:"".concat(Zt,"-tip ").concat(ge).trim()})}),ct=ee()("".concat(Zt,"-trend-icon"),ge,(0,H.Z)({},"".concat(Zt,"-trend-icon-").concat(G),G)),It=G&&(0,$.jsx)("div",{className:ct}),gr=ue&&(0,$.jsx)("div",{className:Fe,children:(0,$.jsx)(We.Z,{status:ue,text:null})}),Br=Ie&&(0,$.jsx)("div",{className:nt,children:Ie});return Pt((0,$.jsxs)("div",{className:ve,style:qt,children:[Br,(0,$.jsxs)("div",{className:St,children:[gr,(0,$.jsxs)("div",{className:$t,children:[(0,$.jsx)(Le,(0,W.Z)({title:(Er||Rt)&&(0,$.jsxs)($.Fragment,{children:[Er,Rt]}),prefix:(It||oe)&&(0,$.jsxs)($.Fragment,{children:[It,oe]}),className:vr},qe)),fr&&(0,$.jsx)("div",{className:"".concat(Zt,"-description ").concat(ge).trim(),children:fr})]})]})]}))},_t=Ze,Mt=function(pt){return(0,H.Z)({},pt.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,H.Z)({flexDirection:"row"},"".concat(pt.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(pt.colorBorder)}})};function ir(Sr){return(0,ye.Xj)("StatisticCard",function(pt){var Ut=(0,W.Z)((0,W.Z)({},pt),{},{componentCls:".".concat(Sr)});return[Mt(Ut)]})}var Tr=["children","statistic","className","chart","chartPlacement","footer"],et=function(pt){var Ut=pt.children,Gt=pt.statistic,Tt=pt.className,qt=pt.chart,fr=pt.chartPlacement,hr=pt.footer,Er=(0,w.Z)(pt,Tr),Ir=(0,Y.useContext)(X.ZP.ConfigContext),ue=Ir.getPrefixCls,G=ue("pro-statistic-card"),oe=ir(G),Ie=oe.wrapSSR,qe=oe.hashId,At=ee()(G,Tt,qe),rr=Gt&&(0,$.jsx)(_t,(0,W.Z)({layout:"vertical"},Gt)),Zt=ee()("".concat(G,"-chart"),qe,(0,H.Z)((0,H.Z)({},"".concat(G,"-chart-left"),fr==="left"&&qt&&Gt),"".concat(G,"-chart-right"),fr==="right"&&qt&&Gt)),wt=qt&&(0,$.jsx)("div",{className:Zt,children:qt}),Pt=ee()("".concat(G,"-content "),qe,(0,H.Z)({},"".concat(G,"-content-horizontal"),fr==="left"||fr==="right")),ge=(wt||rr)&&(fr==="left"?(0,$.jsxs)("div",{className:Pt,children:[wt,rr]}):(0,$.jsxs)("div",{className:Pt,children:[rr,wt]})),ve=hr&&(0,$.jsx)("div",{className:"".concat(G,"-footer ").concat(qe).trim(),children:hr});return Ie((0,$.jsxs)(re.Z,(0,W.Z)((0,W.Z)({className:At},Er),{},{children:[ge,Ut,ve]})))},en=function(pt){return(0,$.jsx)(et,(0,W.Z)({bodyStyle:{padding:0}},pt))};et.Statistic=_t,et.Divider=Q.Z,et.Operation=b,et.isProCard=!0,et.Group=en;var Xr=et},6056:function(vt,N,k){"use strict";k.d(N,{Z:function(){return ee}});var H,W,w,X;function j(){H=document.createElement("table"),W=document.createElement("tr"),w=/^\s*<(\w+|!)[^>]*>/,X={tr:document.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:W,th:W,"*":document.createElement("div")}}function ee(Y){H||j();var re=w.test(Y)&&RegExp.$1;(!re||!(re in X))&&(re="*");var Q=X[re];Y=typeof Y=="string"?Y.replace(/(^\s*)|(\s*$)/g,""):Y,Q.innerHTML=""+Y;var ye=Q.childNodes[0];return ye&&Q.contains(ye)&&Q.removeChild(ye),ye}},45442:function(vt,N,k){"use strict";k.d(N,{Z:function(){return H}});function H(W,w){if(W)for(var X in w)w.hasOwnProperty(X)&&(W.style[X]=w[X]);return W}},90494:function(vt,N){"use strict";var k="*",H=function(){function W(){this._events={}}return W.prototype.on=function(w,X,j){return this._events[w]||(this._events[w]=[]),this._events[w].push({callback:X,once:!!j}),this},W.prototype.once=function(w,X){return this.on(w,X,!0)},W.prototype.emit=function(w){for(var X=this,j=[],ee=1;ee<arguments.length;ee++)j[ee-1]=arguments[ee];var Y=this._events[w]||[],re=this._events[k]||[],Q=function(ye){for(var se=ye.length,ne=0;ne<se;ne++)if(ye[ne]){var $=ye[ne],A=$.callback,b=$.once;b&&(ye.splice(ne,1),ye.length===0&&delete X._events[w],se--,ne--),A.apply(X,j)}};Q(Y),Q(re)},W.prototype.off=function(w,X){if(!w)this._events={};else if(!X)delete this._events[w];else{for(var j=this._events[w]||[],ee=j.length,Y=0;Y<ee;Y++)j[Y].callback===X&&(j.splice(Y,1),ee--,Y--);j.length===0&&delete this._events[w]}return this},W.prototype.getEvents=function(){return this._events},W}();N.Z=H},2667:function(vt,N,k){"use strict";var H=k(97582),W=k(90494),w=k(77341),X=function(j){(0,H.ZT)(ee,j);function ee(Y){var re=j.call(this)||this;re.destroyed=!1;var Q=re.getDefaultCfg();return re.cfg=(0,w.CD)(Q,Y),re}return ee.prototype.getDefaultCfg=function(){return{}},ee.prototype.get=function(Y){return this.cfg[Y]},ee.prototype.set=function(Y,re){this.cfg[Y]=re},ee.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},ee}(W.Z);N.Z=X},58906:function(vt,N,k){"use strict";k.d(N,{Z:function(){return To}});var H=k(97582),W=k(43631),w=k(37153),X=k(77341),j=k(21030),ee=0,Y=0,re=0,Q=1e3,ye,se,ne=0,$=0,A=0,b=typeof performance=="object"&&performance.now?performance:Date,te=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(lr){setTimeout(lr,17)};function le(){return $||(te(Ae),$=b.now()+A)}function Ae(){$=0}function De(){this._call=this._time=this._next=null}De.prototype=Ne.prototype={constructor:De,restart:function(lr,Dt,er){if(typeof lr!="function")throw new TypeError("callback is not a function");er=(er==null?le():+er)+(Dt==null?0:+Dt),!this._next&&se!==this&&(se?se._next=this:ye=this,se=this),this._call=lr,this._time=er,Re()},stop:function(){this._call&&(this._call=null,this._time=1/0,Re())}};function Ne(lr,Dt,er){var kr=new De;return kr.restart(lr,Dt,er),kr}function Te(){le(),++ee;for(var lr=ye,Dt;lr;)(Dt=$-lr._time)>=0&&lr._call.call(null,Dt),lr=lr._next;--ee}function We(){$=(ne=b.now())+A,ee=Y=0;try{Te()}finally{ee=0,we(),$=0}}function _e(){var lr=b.now(),Dt=lr-ne;Dt>Q&&(A-=Dt,ne=lr)}function we(){for(var lr,Dt=ye,er,kr=1/0;Dt;)Dt._call?(kr>Dt._time&&(kr=Dt._time),lr=Dt,Dt=Dt._next):(er=Dt._next,Dt._next=null,Dt=lr?lr._next=er:ye=er);se=lr,Re(kr)}function Re(lr){if(!ee){Y&&(Y=clearTimeout(Y));var Dt=lr-$;Dt>24?(lr<1/0&&(Y=setTimeout(We,lr-b.now()-A)),re&&(re=clearInterval(re))):(re||(ne=b.now(),re=setInterval(_e,Q)),ee=1,te(We))}}var ze=k(52677);function Ge(lr,Dt,er){lr.prototype=Dt.prototype=er,er.constructor=lr}function yt(lr,Dt){var er=Object.create(lr.prototype);for(var kr in Dt)er[kr]=Dt[kr];return er}function ke(){}var tt=.7,ae=1/tt,Ke="\\s*([+-]?\\d+)\\s*",he="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lt=/^#([0-9a-f]{3,8})$/,He=new RegExp("^rgb\\(".concat(Ke,",").concat(Ke,",").concat(Ke,"\\)$")),Ue=new RegExp("^rgb\\(".concat(Pe,",").concat(Pe,",").concat(Pe,"\\)$")),Qe=new RegExp("^rgba\\(".concat(Ke,",").concat(Ke,",").concat(Ke,",").concat(he,"\\)$")),Se=new RegExp("^rgba\\(".concat(Pe,",").concat(Pe,",").concat(Pe,",").concat(he,"\\)$")),xe=new RegExp("^hsl\\(".concat(he,",").concat(Pe,",").concat(Pe,"\\)$")),rt=new RegExp("^hsla\\(".concat(he,",").concat(Pe,",").concat(Pe,",").concat(he,"\\)$")),Je={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ge(ke,Le,{copy:function(Dt){return Object.assign(new this.constructor,this,Dt)},displayable:function(){return this.rgb().displayable()},hex:dt,formatHex:dt,formatHex8:Bt,formatHsl:Ye,formatRgb:Xe,toString:Xe});function dt(){return this.rgb().formatHex()}function Bt(){return this.rgb().formatHex8()}function Ye(){return pt(this).formatHsl()}function Xe(){return this.rgb().formatRgb()}function Le(lr){var Dt,er;return lr=(lr+"").trim().toLowerCase(),(Dt=lt.exec(lr))?(er=Dt[1].length,Dt=parseInt(Dt[1],16),er===6?je(Dt):er===3?new _t(Dt>>8&15|Dt>>4&240,Dt>>4&15|Dt&240,(Dt&15)<<4|Dt&15,1):er===8?at(Dt>>24&255,Dt>>16&255,Dt>>8&255,(Dt&255)/255):er===4?at(Dt>>12&15|Dt>>8&240,Dt>>8&15|Dt>>4&240,Dt>>4&15|Dt&240,((Dt&15)<<4|Dt&15)/255):null):(Dt=He.exec(lr))?new _t(Dt[1],Dt[2],Dt[3],1):(Dt=Ue.exec(lr))?new _t(Dt[1]*255/100,Dt[2]*255/100,Dt[3]*255/100,1):(Dt=Qe.exec(lr))?at(Dt[1],Dt[2],Dt[3],Dt[4]):(Dt=Se.exec(lr))?at(Dt[1]*255/100,Dt[2]*255/100,Dt[3]*255/100,Dt[4]):(Dt=xe.exec(lr))?Sr(Dt[1],Dt[2]/100,Dt[3]/100,1):(Dt=rt.exec(lr))?Sr(Dt[1],Dt[2]/100,Dt[3]/100,Dt[4]):Je.hasOwnProperty(lr)?je(Je[lr]):lr==="transparent"?new _t(NaN,NaN,NaN,0):null}function je(lr){return new _t(lr>>16&255,lr>>8&255,lr&255,1)}function at(lr,Dt,er,kr){return kr<=0&&(lr=Dt=er=NaN),new _t(lr,Dt,er,kr)}function Me(lr){return lr instanceof ke||(lr=Le(lr)),lr?(lr=lr.rgb(),new _t(lr.r,lr.g,lr.b,lr.opacity)):new _t}function Ze(lr,Dt,er,kr){return arguments.length===1?Me(lr):new _t(lr,Dt,er,kr==null?1:kr)}function _t(lr,Dt,er,kr){this.r=+lr,this.g=+Dt,this.b=+er,this.opacity=+kr}Ge(_t,Ze,yt(ke,{brighter:function(Dt){return Dt=Dt==null?ae:Math.pow(ae,Dt),new _t(this.r*Dt,this.g*Dt,this.b*Dt,this.opacity)},darker:function(Dt){return Dt=Dt==null?tt:Math.pow(tt,Dt),new _t(this.r*Dt,this.g*Dt,this.b*Dt,this.opacity)},rgb:function(){return this},clamp:function(){return new _t(en(this.r),en(this.g),en(this.b),et(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mt,formatHex:Mt,formatHex8:ir,formatRgb:Tr,toString:Tr}));function Mt(){return"#".concat(Xr(this.r)).concat(Xr(this.g)).concat(Xr(this.b))}function ir(){return"#".concat(Xr(this.r)).concat(Xr(this.g)).concat(Xr(this.b)).concat(Xr((isNaN(this.opacity)?1:this.opacity)*255))}function Tr(){var lr=et(this.opacity);return"".concat(lr===1?"rgb(":"rgba(").concat(en(this.r),", ").concat(en(this.g),", ").concat(en(this.b)).concat(lr===1?")":", ".concat(lr,")"))}function et(lr){return isNaN(lr)?1:Math.max(0,Math.min(1,lr))}function en(lr){return Math.max(0,Math.min(255,Math.round(lr)||0))}function Xr(lr){return lr=en(lr),(lr<16?"0":"")+lr.toString(16)}function Sr(lr,Dt,er,kr){return kr<=0?lr=Dt=er=NaN:er<=0||er>=1?lr=Dt=NaN:Dt<=0&&(lr=NaN),new Gt(lr,Dt,er,kr)}function pt(lr){if(lr instanceof Gt)return new Gt(lr.h,lr.s,lr.l,lr.opacity);if(lr instanceof ke||(lr=Le(lr)),!lr)return new Gt;if(lr instanceof Gt)return lr;lr=lr.rgb();var Dt=lr.r/255,er=lr.g/255,kr=lr.b/255,tn=Math.min(Dt,er,kr),In=Math.max(Dt,er,kr),zn=NaN,On=In-tn,Vi=(In+tn)/2;return On?(Dt===In?zn=(er-kr)/On+(er<kr)*6:er===In?zn=(kr-Dt)/On+2:zn=(Dt-er)/On+4,On/=Vi<.5?In+tn:2-In-tn,zn*=60):On=Vi>0&&Vi<1?0:zn,new Gt(zn,On,Vi,lr.opacity)}function Ut(lr,Dt,er,kr){return arguments.length===1?pt(lr):new Gt(lr,Dt,er,kr==null?1:kr)}function Gt(lr,Dt,er,kr){this.h=+lr,this.s=+Dt,this.l=+er,this.opacity=+kr}Ge(Gt,Ut,yt(ke,{brighter:function(Dt){return Dt=Dt==null?ae:Math.pow(ae,Dt),new Gt(this.h,this.s,this.l*Dt,this.opacity)},darker:function(Dt){return Dt=Dt==null?tt:Math.pow(tt,Dt),new Gt(this.h,this.s,this.l*Dt,this.opacity)},rgb:function(){var Dt=this.h%360+(this.h<0)*360,er=isNaN(Dt)||isNaN(this.s)?0:this.s,kr=this.l,tn=kr+(kr<.5?kr:1-kr)*er,In=2*kr-tn;return new _t(fr(Dt>=240?Dt-240:Dt+120,In,tn),fr(Dt,In,tn),fr(Dt<120?Dt+240:Dt-120,In,tn),this.opacity)},clamp:function(){return new Gt(Tt(this.h),qt(this.s),qt(this.l),et(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Dt=et(this.opacity);return"".concat(Dt===1?"hsl(":"hsla(").concat(Tt(this.h),", ").concat(qt(this.s)*100,"%, ").concat(qt(this.l)*100,"%").concat(Dt===1?")":", ".concat(Dt,")"))}}));function Tt(lr){return lr=(lr||0)%360,lr<0?lr+360:lr}function qt(lr){return Math.max(0,Math.min(1,lr||0))}function fr(lr,Dt,er){return(lr<60?Dt+(er-Dt)*lr/60:lr<180?er:lr<240?Dt+(er-Dt)*(240-lr)/60:Dt)*255}function hr(lr,Dt,er,kr,tn){var In=lr*lr,zn=In*lr;return((1-3*lr+3*In-zn)*Dt+(4-6*In+3*zn)*er+(1+3*lr+3*In-3*zn)*kr+zn*tn)/6}function Er(lr){var Dt=lr.length-1;return function(er){var kr=er<=0?er=0:er>=1?(er=1,Dt-1):Math.floor(er*Dt),tn=lr[kr],In=lr[kr+1],zn=kr>0?lr[kr-1]:2*tn-In,On=kr<Dt-1?lr[kr+2]:2*In-tn;return hr((er-kr/Dt)*Dt,zn,tn,In,On)}}function Ir(lr){var Dt=lr.length;return function(er){var kr=Math.floor(((er%=1)<0?++er:er)*Dt),tn=lr[(kr+Dt-1)%Dt],In=lr[kr%Dt],zn=lr[(kr+1)%Dt],On=lr[(kr+2)%Dt];return hr((er-kr/Dt)*Dt,tn,In,zn,On)}}var ue=function(lr){return function(){return lr}};function G(lr,Dt){return function(er){return lr+er*Dt}}function oe(lr,Dt,er){return lr=Math.pow(lr,er),Dt=Math.pow(Dt,er)-lr,er=1/er,function(kr){return Math.pow(lr+kr*Dt,er)}}function Ie(lr,Dt){var er=Dt-lr;return er?G(lr,er>180||er<-180?er-360*Math.round(er/360):er):constant(isNaN(lr)?Dt:lr)}function qe(lr){return(lr=+lr)==1?At:function(Dt,er){return er-Dt?oe(Dt,er,lr):ue(isNaN(Dt)?er:Dt)}}function At(lr,Dt){var er=Dt-lr;return er?G(lr,er):ue(isNaN(lr)?Dt:lr)}var rr=function lr(Dt){var er=qe(Dt);function kr(tn,In){var zn=er((tn=Ze(tn)).r,(In=Ze(In)).r),On=er(tn.g,In.g),Vi=er(tn.b,In.b),Bi=At(tn.opacity,In.opacity);return function(Ja){return tn.r=zn(Ja),tn.g=On(Ja),tn.b=Vi(Ja),tn.opacity=Bi(Ja),tn+""}}return kr.gamma=lr,kr}(1);function Zt(lr){return function(Dt){var er=Dt.length,kr=new Array(er),tn=new Array(er),In=new Array(er),zn,On;for(zn=0;zn<er;++zn)On=Ze(Dt[zn]),kr[zn]=On.r||0,tn[zn]=On.g||0,In[zn]=On.b||0;return kr=lr(kr),tn=lr(tn),In=lr(In),On.opacity=1,function(Vi){return On.r=kr(Vi),On.g=tn(Vi),On.b=In(Vi),On+""}}}var wt=Zt(Er),Pt=Zt(Ir);function ge(lr,Dt){Dt||(Dt=[]);var er=lr?Math.min(Dt.length,lr.length):0,kr=Dt.slice(),tn;return function(In){for(tn=0;tn<er;++tn)kr[tn]=lr[tn]*(1-In)+Dt[tn]*In;return kr}}function ve(lr){return ArrayBuffer.isView(lr)&&!(lr instanceof DataView)}function Fe(lr,Dt){return(ve(Dt)?ge:nt)(lr,Dt)}function nt(lr,Dt){var er=Dt?Dt.length:0,kr=lr?Math.min(er,lr.length):0,tn=new Array(kr),In=new Array(er),zn;for(zn=0;zn<kr;++zn)tn[zn]=Nt(lr[zn],Dt[zn]);for(;zn<er;++zn)In[zn]=Dt[zn];return function(On){for(zn=0;zn<kr;++zn)In[zn]=tn[zn](On);return In}}function St(lr,Dt){var er=new Date;return lr=+lr,Dt=+Dt,function(kr){return er.setTime(lr*(1-kr)+Dt*kr),er}}function $t(lr,Dt){return lr=+lr,Dt=+Dt,function(er){return lr*(1-er)+Dt*er}}function vr(lr,Dt){var er={},kr={},tn;(lr===null||ze(lr)!=="object")&&(lr={}),(Dt===null||ze(Dt)!=="object")&&(Dt={});for(tn in Dt)tn in lr?er[tn]=Nt(lr[tn],Dt[tn]):kr[tn]=Dt[tn];return function(In){for(tn in er)kr[tn]=er[tn](In);return kr}}var Rt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ct=new RegExp(Rt.source,"g");function It(lr){return function(){return lr}}function gr(lr){return function(Dt){return lr(Dt)+""}}function Br(lr,Dt){var er=Rt.lastIndex=ct.lastIndex=0,kr,tn,In,zn=-1,On=[],Vi=[];for(lr=lr+"",Dt=Dt+"";(kr=Rt.exec(lr))&&(tn=ct.exec(Dt));)(In=tn.index)>er&&(In=Dt.slice(er,In),On[zn]?On[zn]+=In:On[++zn]=In),(kr=kr[0])===(tn=tn[0])?On[zn]?On[zn]+=tn:On[++zn]=tn:(On[++zn]=null,Vi.push({i:zn,x:$t(kr,tn)})),er=ct.lastIndex;return er<Dt.length&&(In=Dt.slice(er),On[zn]?On[zn]+=In:On[++zn]=In),On.length<2?Vi[0]?gr(Vi[0].x):It(Dt):(Dt=Vi.length,function(Bi){for(var Ja=0,Ao;Ja<Dt;++Ja)On[(Ao=Vi[Ja]).i]=Ao.x(Bi);return On.join("")})}function Nt(lr,Dt){var er=ze(Dt),kr;return Dt==null||er==="boolean"?ue(Dt):(er==="number"?$t:er==="string"?(kr=Le(Dt))?(Dt=kr,rr):Br:Dt instanceof Le?rr:Dt instanceof Date?St:ve(Dt)?ge:Array.isArray(Dt)?nt:typeof Dt.valueOf!="function"&&typeof Dt.toString!="function"||isNaN(Dt)?vr:$t)(lr,Dt)}var wn=k(93924),ei=k(47575),ci=function(lr){return["fill","stroke","fillStyle","strokeStyle"].includes(lr)},ln=function(lr){return/^[r,R,L,l]{1}[\s]*\(/.test(lr)},ti=[1,0,0,0,1,0,0,0,1];function $n(lr,Dt,er){var kr={},tn=Dt.fromAttrs,In=Dt.toAttrs;if(!lr.destroyed){var zn;for(var On in In)if(!(0,j.Xy)(tn[On],In[On]))if(On==="path"){var Vi=In[On],Bi=tn[On];Vi.length>Bi.length?(Vi=ei.parsePathString(In[On]),Bi=ei.parsePathString(tn[On]),Bi=ei.fillPathByDiff(Bi,Vi),Bi=ei.formatPath(Bi,Vi),Dt.fromAttrs.path=Bi,Dt.toAttrs.path=Vi):Dt.pathFormatted||(Vi=ei.parsePathString(In[On]),Bi=ei.parsePathString(tn[On]),Bi=ei.formatPath(Bi,Vi),Dt.fromAttrs.path=Bi,Dt.toAttrs.path=Vi,Dt.pathFormatted=!0),kr[On]=[];for(var Ja=0;Ja<Vi.length;Ja++){for(var Ao=Vi[Ja],fs=Bi[Ja],ko=[],oo=0;oo<Ao.length;oo++)(0,j.hj)(Ao[oo])&&fs&&(0,j.hj)(fs[oo])?(zn=Nt(fs[oo],Ao[oo]),ko.push(zn(er))):ko.push(Ao[oo]);kr[On].push(ko)}}else if(On==="matrix"){var iu=Fe(tn[On]||ti,In[On]||ti),Ko=iu(er);kr[On]=Ko}else ci(On)&&ln(In[On])?kr[On]=In[On]:(0,j.mf)(In[On])||(zn=Nt(tn[On],In[On]),kr[On]=zn(er));lr.attr(kr)}}function ri(lr,Dt,er){var kr=Dt.startTime,tn=Dt.delay;if(er<kr+tn||Dt._paused)return!1;var In,zn=Dt.duration,On=Dt.easing,Vi=(0,wn._)(On);if(er=er-kr-Dt.delay,Dt.repeat)In=er%zn/zn,In=Vi(In);else if(In=er/zn,In<1)In=Vi(In);else return Dt.onFrame?lr.attr(Dt.onFrame(1)):lr.attr(Dt.toAttrs),!0;if(Dt.onFrame){var Bi=Dt.onFrame(In);lr.attr(Bi)}else $n(lr,Dt,In);return!1}var oa=function(){function lr(Dt){this.animators=[],this.current=0,this.timer=null,this.canvas=Dt}return lr.prototype.initTimer=function(){var Dt=this,er=!1,kr,tn,In;this.timer=Ne(function(zn){if(Dt.current=zn,Dt.animators.length>0){for(var On=Dt.animators.length-1;On>=0;On--){if(kr=Dt.animators[On],kr.destroyed){Dt.removeAnimator(On);continue}if(!kr.isAnimatePaused()){tn=kr.get("animations");for(var Vi=tn.length-1;Vi>=0;Vi--)In=tn[Vi],er=ri(kr,In,zn),er&&(tn.splice(Vi,1),er=!1,In.callback&&In.callback())}tn.length===0&&Dt.removeAnimator(On)}var Bi=Dt.canvas.get("autoDraw");Bi||Dt.canvas.draw()}})},lr.prototype.addAnimator=function(Dt){this.animators.push(Dt)},lr.prototype.removeAnimator=function(Dt){this.animators.splice(Dt,1)},lr.prototype.isAnimating=function(){return!!this.animators.length},lr.prototype.stop=function(){this.timer&&this.timer.stop()},lr.prototype.stopAllAnimations=function(Dt){Dt===void 0&&(Dt=!0),this.animators.forEach(function(er){er.stopAnimate(Dt)}),this.animators=[],this.canvas.draw()},lr.prototype.getTime=function(){return this.current},lr}(),yi=oa,ya=k(89473),Ya=40,ha=0,Fa=":",Sa=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function xs(lr,Dt){for(var er in lr)if(lr.hasOwnProperty(er)&&er.indexOf(Fa+Dt)>=0)return!0;return!1}function co(lr,Dt,er){er.name=Dt,er.target=lr,er.currentTarget=lr,er.delegateTarget=lr,lr.emit(Dt,er)}function Lo(lr,Dt,er){if(er.bubbles){var kr=void 0,tn=!1;if(Dt==="mouseenter"?(kr=er.fromShape,tn=!0):Dt==="mouseleave"&&(tn=!0,kr=er.toShape),lr.isCanvas()&&tn)return;if(kr&&(0,X.UY)(lr,kr)){er.bubbles=!1;return}er.name=Dt,er.currentTarget=lr,er.delegateTarget=lr,lr.emit(Dt,er)}}var Za=function(){function lr(Dt){var er=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(kr){var tn=kr.type;er._triggerEvent(tn,kr)},this._onDocumentMove=function(kr){var tn=er.canvas,In=tn.get("el");if(In!==kr.target&&(er.dragging||er.currentShape)){var zn=er._getPointInfo(kr);er.dragging&&er._emitEvent("drag",kr,zn,er.draggingShape)}},this._onDocumentMouseUp=function(kr){var tn=er.canvas,In=tn.get("el");if(In!==kr.target&&er.dragging){var zn=er._getPointInfo(kr);er.draggingShape&&er._emitEvent("drop",kr,zn,null),er._emitEvent("dragend",kr,zn,er.draggingShape),er._afterDrag(er.draggingShape,zn,kr)}},this.canvas=Dt.canvas}return lr.prototype.init=function(){this._bindEvents()},lr.prototype._bindEvents=function(){var Dt=this,er=this.canvas.get("el");(0,X.S6)(Sa,function(kr){er.addEventListener(kr,Dt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},lr.prototype._clearEvents=function(){var Dt=this,er=this.canvas.get("el");(0,X.S6)(Sa,function(kr){er.removeEventListener(kr,Dt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},lr.prototype._getEventObj=function(Dt,er,kr,tn,In,zn){var On=new ya.Z(Dt,er);return On.fromShape=In,On.toShape=zn,On.x=kr.x,On.y=kr.y,On.clientX=kr.clientX,On.clientY=kr.clientY,On.propagationPath.push(tn),On},lr.prototype._getShape=function(Dt,er){return this.canvas.getShape(Dt.x,Dt.y,er)},lr.prototype._getPointInfo=function(Dt){var er=this.canvas,kr=er.getClientByEvent(Dt),tn=er.getPointByEvent(Dt);return{x:tn.x,y:tn.y,clientX:kr.x,clientY:kr.y}},lr.prototype._triggerEvent=function(Dt,er){var kr=this._getPointInfo(er),tn=this._getShape(kr,er),In=this["_on"+Dt],zn=!1;if(In)In.call(this,kr,tn,er);else{var On=this.currentShape;Dt==="mouseenter"||Dt==="dragenter"||Dt==="mouseover"?(this._emitEvent(Dt,er,kr,null,null,tn),tn&&this._emitEvent(Dt,er,kr,tn,null,tn),Dt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",er,kr,null)):Dt==="mouseleave"||Dt==="dragleave"||Dt==="mouseout"?(zn=!0,On&&this._emitEvent(Dt,er,kr,On,On,null),this._emitEvent(Dt,er,kr,null,On,null),Dt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",er,kr,null)):this._emitEvent(Dt,er,kr,tn,null,null)}if(zn||(this.currentShape=tn),tn&&!tn.get("destroyed")){var Vi=this.canvas,Bi=Vi.get("el");Bi.style.cursor=tn.attr("cursor")||Vi.get("cursor")}},lr.prototype._onmousedown=function(Dt,er,kr){kr.button===ha&&(this.mousedownShape=er,this.mousedownPoint=Dt,this.mousedownTimeStamp=kr.timeStamp),this._emitEvent("mousedown",kr,Dt,er,null,null)},lr.prototype._emitMouseoverEvents=function(Dt,er,kr,tn){var In=this.canvas.get("el");kr!==tn&&(kr&&(this._emitEvent("mouseout",Dt,er,kr,kr,tn),this._emitEvent("mouseleave",Dt,er,kr,kr,tn),(!tn||tn.get("destroyed"))&&(In.style.cursor=this.canvas.get("cursor"))),tn&&(this._emitEvent("mouseover",Dt,er,tn,kr,tn),this._emitEvent("mouseenter",Dt,er,tn,kr,tn)))},lr.prototype._emitDragoverEvents=function(Dt,er,kr,tn,In){tn?(tn!==kr&&(kr&&this._emitEvent("dragleave",Dt,er,kr,kr,tn),this._emitEvent("dragenter",Dt,er,tn,kr,tn)),In||this._emitEvent("dragover",Dt,er,tn)):kr&&this._emitEvent("dragleave",Dt,er,kr,kr,tn),In&&this._emitEvent("dragover",Dt,er,tn)},lr.prototype._afterDrag=function(Dt,er,kr){Dt&&(Dt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var tn=this._getShape(er,kr);tn!==Dt&&this._emitMouseoverEvents(kr,er,Dt,tn),this.currentShape=tn},lr.prototype._onmouseup=function(Dt,er,kr){if(kr.button===ha){var tn=this.draggingShape;this.dragging?(tn&&this._emitEvent("drop",kr,Dt,er),this._emitEvent("dragend",kr,Dt,tn),this._afterDrag(tn,Dt,kr)):(this._emitEvent("mouseup",kr,Dt,er),er===this.mousedownShape&&this._emitEvent("click",kr,Dt,er),this.mousedownShape=null,this.mousedownPoint=null)}},lr.prototype._ondragover=function(Dt,er,kr){kr.preventDefault();var tn=this.currentShape;this._emitDragoverEvents(kr,Dt,tn,er,!0)},lr.prototype._onmousemove=function(Dt,er,kr){var tn=this.canvas,In=this.currentShape,zn=this.draggingShape;if(this.dragging)zn&&this._emitDragoverEvents(kr,Dt,In,er,!1),this._emitEvent("drag",kr,Dt,zn);else{var On=this.mousedownPoint;if(On){var Vi=this.mousedownShape,Bi=kr.timeStamp,Ja=Bi-this.mousedownTimeStamp,Ao=On.clientX-Dt.clientX,fs=On.clientY-Dt.clientY,ko=Ao*Ao+fs*fs;Ja>120||ko>Ya?Vi&&Vi.get("draggable")?(zn=this.mousedownShape,zn.set("capture",!1),this.draggingShape=zn,this.dragging=!0,this._emitEvent("dragstart",kr,Dt,zn),this.mousedownShape=null,this.mousedownPoint=null):!Vi&&tn.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",kr,Dt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(kr,Dt,In,er),this._emitEvent("mousemove",kr,Dt,er)):(this._emitMouseoverEvents(kr,Dt,In,er),this._emitEvent("mousemove",kr,Dt,er))}else this._emitMouseoverEvents(kr,Dt,In,er),this._emitEvent("mousemove",kr,Dt,er)}},lr.prototype._emitEvent=function(Dt,er,kr,tn,In,zn){var On=this._getEventObj(Dt,er,kr,tn,In,zn);if(tn){On.shape=tn,co(tn,Dt,On);for(var Vi=tn.getParent();Vi;)Vi.emitDelegation(Dt,On),On.propagationStopped||Lo(Vi,Dt,On),On.propagationPath.push(Vi),Vi=Vi.getParent()}else{var Bi=this.canvas;co(Bi,Dt,On)}},lr.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},lr}(),Kn=Za,Ci="px",Ga=(0,W.qY)(),Jo=Ga&&Ga.name==="firefox",fo=function(lr){(0,H.ZT)(Dt,lr);function Dt(er){var kr=lr.call(this,er)||this;return kr.initContainer(),kr.initDom(),kr.initEvents(),kr.initTimeline(),kr}return Dt.prototype.getDefaultCfg=function(){var er=lr.prototype.getDefaultCfg.call(this);return er.cursor="default",er.supportCSSTransform=!1,er},Dt.prototype.initContainer=function(){var er=this.get("container");(0,X.HD)(er)&&(er=document.getElementById(er),this.set("container",er))},Dt.prototype.initDom=function(){var er=this.createDom();this.set("el",er);var kr=this.get("container");kr.appendChild(er),this.setDOMSize(this.get("width"),this.get("height"))},Dt.prototype.initEvents=function(){var er=new Kn({canvas:this});er.init(),this.set("eventController",er)},Dt.prototype.initTimeline=function(){var er=new yi(this);this.set("timeline",er)},Dt.prototype.setDOMSize=function(er,kr){var tn=this.get("el");X.jU&&(tn.style.width=er+Ci,tn.style.height=kr+Ci)},Dt.prototype.changeSize=function(er,kr){this.setDOMSize(er,kr),this.set("width",er),this.set("height",kr),this.onCanvasChange("changeSize")},Dt.prototype.getRenderer=function(){return this.get("renderer")},Dt.prototype.getCursor=function(){return this.get("cursor")},Dt.prototype.setCursor=function(er){this.set("cursor",er);var kr=this.get("el");X.jU&&kr&&(kr.style.cursor=er)},Dt.prototype.getPointByEvent=function(er){var kr=this.get("supportCSSTransform");if(kr){if(Jo&&!(0,X.kK)(er.layerX)&&er.layerX!==er.offsetX)return{x:er.layerX,y:er.layerY};if(!(0,X.kK)(er.offsetX))return{x:er.offsetX,y:er.offsetY}}var tn=this.getClientByEvent(er),In=tn.x,zn=tn.y;return this.getPointByClient(In,zn)},Dt.prototype.getClientByEvent=function(er){var kr=er;return er.touches&&(er.type==="touchend"?kr=er.changedTouches[0]:kr=er.touches[0]),{x:kr.clientX,y:kr.clientY}},Dt.prototype.getPointByClient=function(er,kr){var tn=this.get("el"),In=tn.getBoundingClientRect();return{x:er-In.left,y:kr-In.top}},Dt.prototype.getClientByPoint=function(er,kr){var tn=this.get("el"),In=tn.getBoundingClientRect();return{x:er+In.left,y:kr+In.top}},Dt.prototype.draw=function(){},Dt.prototype.removeDom=function(){var er=this.get("el");er.parentNode.removeChild(er)},Dt.prototype.clearEvents=function(){var er=this.get("eventController");er.destroy()},Dt.prototype.isCanvas=function(){return!0},Dt.prototype.getParent=function(){return null},Dt.prototype.destroy=function(){var er=this.get("timeline");this.get("destroyed")||(this.clear(),er&&er.stop(),this.clearEvents(),this.removeDom(),lr.prototype.destroy.call(this))},Dt}(w.Z),To=fo},37153:function(vt,N,k){"use strict";var H=k(97582),W=k(29881),w=k(77341),X={},j="_INDEX";function ee(ne,$){if(ne.set("canvas",$),ne.isGroup()){var A=ne.get("children");A.length&&A.forEach(function(b){ee(b,$)})}}function Y(ne,$){if(ne.set("timeline",$),ne.isGroup()){var A=ne.get("children");A.length&&A.forEach(function(b){Y(b,$)})}}function re(ne,$){var A=ne.getChildren();return A.indexOf($)>=0}function Q(ne,$,A){A===void 0&&(A=!0),A?$.destroy():($.set("parent",null),$.set("canvas",null)),(0,w.As)(ne.getChildren(),$)}function ye(ne){return function($,A){var b=ne($,A);return b===0?$[j]-A[j]:b}}var se=function(ne){(0,H.ZT)($,ne);function $(){return ne!==null&&ne.apply(this,arguments)||this}return $.prototype.isCanvas=function(){return!1},$.prototype.getBBox=function(){var A=1/0,b=-1/0,te=1/0,le=-1/0,Ae=this.getChildren().filter(function(Ne){return Ne.get("visible")&&(!Ne.isGroup()||Ne.isGroup()&&Ne.getChildren().length>0)});Ae.length>0?(0,w.S6)(Ae,function(Ne){var Te=Ne.getBBox(),We=Te.minX,_e=Te.maxX,we=Te.minY,Re=Te.maxY;We<A&&(A=We),_e>b&&(b=_e),we<te&&(te=we),Re>le&&(le=Re)}):(A=0,b=0,te=0,le=0);var De={x:A,y:te,minX:A,minY:te,maxX:b,maxY:le,width:b-A,height:le-te};return De},$.prototype.getCanvasBBox=function(){var A=1/0,b=-1/0,te=1/0,le=-1/0,Ae=this.getChildren().filter(function(Ne){return Ne.get("visible")&&(!Ne.isGroup()||Ne.isGroup()&&Ne.getChildren().length>0)});Ae.length>0?(0,w.S6)(Ae,function(Ne){var Te=Ne.getCanvasBBox(),We=Te.minX,_e=Te.maxX,we=Te.minY,Re=Te.maxY;We<A&&(A=We),_e>b&&(b=_e),we<te&&(te=we),Re>le&&(le=Re)}):(A=0,b=0,te=0,le=0);var De={x:A,y:te,minX:A,minY:te,maxX:b,maxY:le,width:b-A,height:le-te};return De},$.prototype.getDefaultCfg=function(){var A=ne.prototype.getDefaultCfg.call(this);return A.children=[],A},$.prototype.onAttrChange=function(A,b,te){if(ne.prototype.onAttrChange.call(this,A,b,te),A==="matrix"){var le=this.getTotalMatrix();this._applyChildrenMarix(le)}},$.prototype.applyMatrix=function(A){var b=this.getTotalMatrix();ne.prototype.applyMatrix.call(this,A);var te=this.getTotalMatrix();te!==b&&this._applyChildrenMarix(te)},$.prototype._applyChildrenMarix=function(A){var b=this.getChildren();(0,w.S6)(b,function(te){te.applyMatrix(A)})},$.prototype.addShape=function(){for(var A=[],b=0;b<arguments.length;b++)A[b]=arguments[b];var te=A[0],le=A[1];(0,w.Kn)(te)?le=te:le.type=te;var Ae=X[le.type];Ae||(Ae=(0,w.jC)(le.type),X[le.type]=Ae);var De=this.getShapeBase(),Ne=new De[Ae](le);return this.add(Ne),Ne},$.prototype.addGroup=function(){for(var A=[],b=0;b<arguments.length;b++)A[b]=arguments[b];var te=A[0],le=A[1],Ae;if((0,w.mf)(te))le?Ae=new te(le):Ae=new te({parent:this});else{var De=te||{},Ne=this.getGroupBase();Ae=new Ne(De)}return this.add(Ae),Ae},$.prototype.getCanvas=function(){var A;return this.isCanvas()?A=this:A=this.get("canvas"),A},$.prototype.getShape=function(A,b,te){if(!(0,w.pP)(this))return null;var le=this.getChildren(),Ae;if(this.isCanvas())Ae=this._findShape(le,A,b,te);else{var De=[A,b,1];De=this.invertFromMatrix(De),this.isClipped(De[0],De[1])||(Ae=this._findShape(le,De[0],De[1],te))}return Ae},$.prototype._findShape=function(A,b,te,le){for(var Ae=null,De=A.length-1;De>=0;De--){var Ne=A[De];if((0,w.pP)(Ne)&&(Ne.isGroup()?Ae=Ne.getShape(b,te,le):Ne.isHit(b,te)&&(Ae=Ne)),Ae)break}return Ae},$.prototype.add=function(A){var b=this.getCanvas(),te=this.getChildren(),le=this.get("timeline"),Ae=A.getParent();Ae&&Q(Ae,A,!1),A.set("parent",this),b&&ee(A,b),le&&Y(A,le),te.push(A),A.onCanvasChange("add"),this._applyElementMatrix(A)},$.prototype._applyElementMatrix=function(A){var b=this.getTotalMatrix();b&&A.applyMatrix(b)},$.prototype.getChildren=function(){return this.get("children")},$.prototype.sort=function(){var A=this.getChildren();(0,w.S6)(A,function(b,te){return b[j]=te,b}),A.sort(ye(function(b,te){return b.get("zIndex")-te.get("zIndex")})),this.onCanvasChange("sort")},$.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var A=this.getChildren(),b=A.length-1;b>=0;b--)A[b].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},$.prototype.destroy=function(){this.get("destroyed")||(this.clear(),ne.prototype.destroy.call(this))},$.prototype.getFirst=function(){return this.getChildByIndex(0)},$.prototype.getLast=function(){var A=this.getChildren();return this.getChildByIndex(A.length-1)},$.prototype.getChildByIndex=function(A){var b=this.getChildren();return b[A]},$.prototype.getCount=function(){var A=this.getChildren();return A.length},$.prototype.contain=function(A){var b=this.getChildren();return b.indexOf(A)>-1},$.prototype.removeChild=function(A,b){b===void 0&&(b=!0),this.contain(A)&&A.remove(b)},$.prototype.findAll=function(A){var b=[],te=this.getChildren();return(0,w.S6)(te,function(le){A(le)&&b.push(le),le.isGroup()&&(b=b.concat(le.findAll(A)))}),b},$.prototype.find=function(A){var b=null,te=this.getChildren();return(0,w.S6)(te,function(le){if(A(le)?b=le:le.isGroup()&&(b=le.find(A)),b)return!1}),b},$.prototype.findById=function(A){return this.find(function(b){return b.get("id")===A})},$.prototype.findByClassName=function(A){return this.find(function(b){return b.get("className")===A})},$.prototype.findAllByName=function(A){return this.findAll(function(b){return b.get("name")===A})},$}(W.Z);N.Z=se},29881:function(vt,N,k){"use strict";var H=k(97582),W=k(21030),w=k(31506),X=k(77341),j=k(41482),ee=k(2667),Y=w.vs,re="matrix",Q=["zIndex","capture","visible","type"],ye=["repeat"],se=":",ne="*";function $(Ae){for(var De=[],Ne=0;Ne<Ae.length;Ne++)(0,W.kJ)(Ae[Ne])?De.push([].concat(Ae[Ne])):De.push(Ae[Ne]);return De}function A(Ae,De){var Ne={},Te=De.attrs;for(var We in Ae)Ne[We]=Te[We];return Ne}function b(Ae,De){var Ne={},Te=De.attr();return(0,W.S6)(Ae,function(We,_e){ye.indexOf(_e)===-1&&!(0,W.Xy)(Te[_e],We)&&(Ne[_e]=We)}),Ne}function te(Ae,De){if(De.onFrame)return Ae;var Ne=De.startTime,Te=De.delay,We=De.duration,_e=Object.prototype.hasOwnProperty;return(0,W.S6)(Ae,function(we){Ne+Te<we.startTime+we.delay+we.duration&&We>we.delay&&(0,W.S6)(De.toAttrs,function(Re,ze){_e.call(we.toAttrs,ze)&&(delete we.toAttrs[ze],delete we.fromAttrs[ze])})}),Ae}var le=function(Ae){(0,H.ZT)(De,Ae);function De(Ne){var Te=Ae.call(this,Ne)||this;Te.attrs={};var We=Te.getDefaultAttrs();return(0,W.CD)(We,Ne.attrs),Te.attrs=We,Te.initAttrs(We),Te.initAnimate(),Te}return De.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},De.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},De.prototype.onCanvasChange=function(Ne){},De.prototype.initAttrs=function(Ne){},De.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},De.prototype.isGroup=function(){return!1},De.prototype.getParent=function(){return this.get("parent")},De.prototype.getCanvas=function(){return this.get("canvas")},De.prototype.attr=function(){for(var Ne,Te=[],We=0;We<arguments.length;We++)Te[We]=arguments[We];var _e=Te[0],we=Te[1];if(!_e)return this.attrs;if((0,W.Kn)(_e)){for(var Re in _e)this.setAttr(Re,_e[Re]);return this.afterAttrsChange(_e),this}return Te.length===2?(this.setAttr(_e,we),this.afterAttrsChange((Ne={},Ne[_e]=we,Ne)),this):this.attrs[_e]},De.prototype.isClipped=function(Ne,Te){var We=this.getClip();return We&&!We.isHit(Ne,Te)},De.prototype.setAttr=function(Ne,Te){var We=this.attrs[Ne];We!==Te&&(this.attrs[Ne]=Te,this.onAttrChange(Ne,Te,We))},De.prototype.onAttrChange=function(Ne,Te,We){Ne==="matrix"&&this.set("totalMatrix",null)},De.prototype.afterAttrsChange=function(Ne){if(this.cfg.isClipShape){var Te=this.cfg.applyTo;Te&&Te.onCanvasChange("clip")}else this.onCanvasChange("attr")},De.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},De.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},De.prototype.setZIndex=function(Ne){this.set("zIndex",Ne);var Te=this.getParent();return Te&&Te.sort(),this},De.prototype.toFront=function(){var Ne=this.getParent();if(Ne){var Te=Ne.getChildren(),We=this.get("el"),_e=Te.indexOf(this);Te.splice(_e,1),Te.push(this),this.onCanvasChange("zIndex")}},De.prototype.toBack=function(){var Ne=this.getParent();if(Ne){var Te=Ne.getChildren(),We=this.get("el"),_e=Te.indexOf(this);Te.splice(_e,1),Te.unshift(this),this.onCanvasChange("zIndex")}},De.prototype.remove=function(Ne){Ne===void 0&&(Ne=!0);var Te=this.getParent();Te?((0,X.As)(Te.getChildren(),this),Te.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),Ne&&this.destroy()},De.prototype.resetMatrix=function(){this.attr(re,this.getDefaultMatrix()),this.onCanvasChange("matrix")},De.prototype.getMatrix=function(){return this.attr(re)},De.prototype.setMatrix=function(Ne){this.attr(re,Ne),this.onCanvasChange("matrix")},De.prototype.getTotalMatrix=function(){var Ne=this.cfg.totalMatrix;if(!Ne){var Te=this.attr("matrix"),We=this.cfg.parentMatrix;We&&Te?Ne=(0,j.xq)(We,Te):Ne=Te||We,this.set("totalMatrix",Ne)}return Ne},De.prototype.applyMatrix=function(Ne){var Te=this.attr("matrix"),We=null;Ne&&Te?We=(0,j.xq)(Ne,Te):We=Te||Ne,this.set("totalMatrix",We),this.set("parentMatrix",Ne)},De.prototype.getDefaultMatrix=function(){return null},De.prototype.applyToMatrix=function(Ne){var Te=this.attr("matrix");return Te?(0,j.rG)(Te,Ne):Ne},De.prototype.invertFromMatrix=function(Ne){var Te=this.attr("matrix");if(Te){var We=(0,j.U_)(Te);if(We)return(0,j.rG)(We,Ne)}return Ne},De.prototype.setClip=function(Ne){var Te=this.getCanvas(),We=null;if(Ne){var _e=this.getShapeBase(),we=(0,W.jC)(Ne.type),Re=_e[we];Re&&(We=new Re({type:Ne.type,isClipShape:!0,applyTo:this,attrs:Ne.attrs,canvas:Te}))}return this.set("clipShape",We),this.onCanvasChange("clip"),We},De.prototype.getClip=function(){var Ne=this.cfg.clipShape;return Ne||null},De.prototype.clone=function(){var Ne=this,Te=this.attrs,We={};(0,W.S6)(Te,function(Re,ze){(0,W.kJ)(Te[ze])?We[ze]=$(Te[ze]):We[ze]=Te[ze]});var _e=this.constructor,we=new _e({attrs:We});return(0,W.S6)(Q,function(Re){we.set(Re,Ne.get(Re))}),we},De.prototype.destroy=function(){var Ne=this.destroyed;Ne||(this.attrs={},Ae.prototype.destroy.call(this))},De.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},De.prototype.animate=function(){for(var Ne=[],Te=0;Te<arguments.length;Te++)Ne[Te]=arguments[Te];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var We=this.get("timeline");We||(We=this.get("canvas").get("timeline"),this.set("timeline",We));var _e=this.get("animations")||[];We.timer||We.initTimer();var we=Ne[0],Re=Ne[1],ze=Ne[2],Ge=ze===void 0?"easeLinear":ze,yt=Ne[3],ke=yt===void 0?W.ZT:yt,tt=Ne[4],ae=tt===void 0?0:tt,Ke,he,Pe,lt,He;(0,W.mf)(we)?(Ke=we,we={}):(0,W.Kn)(we)&&we.onFrame&&(Ke=we.onFrame,he=we.repeat),(0,W.Kn)(Re)?(He=Re,Re=He.duration,Ge=He.easing||"easeLinear",ae=He.delay||0,he=He.repeat||he||!1,ke=He.callback||W.ZT,Pe=He.pauseCallback||W.ZT,lt=He.resumeCallback||W.ZT):((0,W.hj)(ke)&&(ae=ke,ke=null),(0,W.mf)(Ge)?(ke=Ge,Ge="easeLinear"):Ge=Ge||"easeLinear");var Ue=b(we,this),Qe={fromAttrs:A(Ue,this),toAttrs:Ue,duration:Re,easing:Ge,repeat:he,callback:ke,pauseCallback:Pe,resumeCallback:lt,delay:ae,startTime:We.getTime(),id:(0,W.EL)(),onFrame:Ke,pathFormatted:!1};_e.length>0?_e=te(_e,Qe):We.addAnimator(this),_e.push(Qe),this.set("animations",_e),this.set("_pause",{isPaused:!1})}},De.prototype.stopAnimate=function(Ne){var Te=this;Ne===void 0&&(Ne=!0);var We=this.get("animations");(0,W.S6)(We,function(_e){Ne&&(_e.onFrame?Te.attr(_e.onFrame(1)):Te.attr(_e.toAttrs)),_e.callback&&_e.callback()}),this.set("animating",!1),this.set("animations",[])},De.prototype.pauseAnimate=function(){var Ne=this.get("timeline"),Te=this.get("animations"),We=Ne.getTime();return(0,W.S6)(Te,function(_e){_e._paused=!0,_e._pauseTime=We,_e.pauseCallback&&_e.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:We}),this},De.prototype.resumeAnimate=function(){var Ne=this.get("timeline"),Te=Ne.getTime(),We=this.get("animations"),_e=this.get("_pause").pauseTime;return(0,W.S6)(We,function(we){we.startTime=we.startTime+(Te-_e),we._paused=!1,we._pauseTime=null,we.resumeCallback&&we.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",We),this},De.prototype.emitDelegation=function(Ne,Te){var We=this,_e=Te.propagationPath,we=this.getEvents(),Re;Ne==="mouseenter"?Re=Te.fromShape:Ne==="mouseleave"&&(Re=Te.toShape);for(var ze=function(tt){var ae=_e[tt],Ke=ae.get("name");if(Ke){if((ae.isGroup()||ae.isCanvas&&ae.isCanvas())&&Re&&(0,X.UY)(ae,Re))return"break";(0,W.kJ)(Ke)?(0,W.S6)(Ke,function(he){We.emitDelegateEvent(ae,he,Te)}):Ge.emitDelegateEvent(ae,Ke,Te)}},Ge=this,yt=0;yt<_e.length;yt++){var ke=ze(yt);if(ke==="break")break}},De.prototype.emitDelegateEvent=function(Ne,Te,We){var _e=this.getEvents(),we=Te+se+We.type;(_e[we]||_e[ne])&&(We.name=we,We.currentTarget=Ne,We.delegateTarget=this,We.delegateObject=Ne.get("delegateObject"),this.emit(we,We))},De.prototype.translate=function(Ne,Te){Ne===void 0&&(Ne=0),Te===void 0&&(Te=0);var We=this.getMatrix(),_e=Y(We,[["t",Ne,Te]]);return this.setMatrix(_e),this},De.prototype.move=function(Ne,Te){var We=this.attr("x")||0,_e=this.attr("y")||0;return this.translate(Ne-We,Te-_e),this},De.prototype.moveTo=function(Ne,Te){return this.move(Ne,Te)},De.prototype.scale=function(Ne,Te){var We=this.getMatrix(),_e=Y(We,[["s",Ne,Te||Ne]]);return this.setMatrix(_e),this},De.prototype.rotate=function(Ne){var Te=this.getMatrix(),We=Y(Te,[["r",Ne]]);return this.setMatrix(We),this},De.prototype.rotateAtStart=function(Ne){var Te=this.attr(),We=Te.x,_e=Te.y,we=this.getMatrix(),Re=Y(we,[["t",-We,-_e],["r",Ne],["t",We,_e]]);return this.setMatrix(Re),this},De.prototype.rotateAtPoint=function(Ne,Te,We){var _e=this.getMatrix(),we=Y(_e,[["t",-Ne,-Te],["r",We],["t",Ne,Te]]);return this.setMatrix(we),this},De}(ee.Z);N.Z=le},31841:function(vt,N,k){"use strict";var H=k(97582),W=k(37153),w=function(X){(0,H.ZT)(j,X);function j(){return X!==null&&X.apply(this,arguments)||this}return j.prototype.isGroup=function(){return!0},j.prototype.isEntityGroup=function(){return!1},j.prototype.clone=function(){for(var ee=X.prototype.clone.call(this),Y=this.getChildren(),re=0;re<Y.length;re++){var Q=Y[re];ee.add(Q.clone())}return ee},j}(W.Z);N.Z=w},15032:function(vt,N,k){"use strict";var H=k(97582),W=k(29881),w=k(41482),X=function(j){(0,H.ZT)(ee,j);function ee(Y){return j.call(this,Y)||this}return ee.prototype._isInBBox=function(Y,re){var Q=this.getBBox();return Q.minX<=Y&&Q.maxX>=Y&&Q.minY<=re&&Q.maxY>=re},ee.prototype.afterAttrsChange=function(Y){j.prototype.afterAttrsChange.call(this,Y),this.clearCacheBBox()},ee.prototype.getBBox=function(){var Y=this.cfg.bbox;return Y||(Y=this.calculateBBox(),this.set("bbox",Y)),Y},ee.prototype.getCanvasBBox=function(){var Y=this.cfg.canvasBBox;return Y||(Y=this.calculateCanvasBBox(),this.set("canvasBBox",Y)),Y},ee.prototype.applyMatrix=function(Y){j.prototype.applyMatrix.call(this,Y),this.set("canvasBBox",null)},ee.prototype.calculateCanvasBBox=function(){var Y=this.getBBox(),re=this.getTotalMatrix(),Q=Y.minX,ye=Y.minY,se=Y.maxX,ne=Y.maxY;if(re){var $=(0,w.rG)(re,[Y.minX,Y.minY]),A=(0,w.rG)(re,[Y.maxX,Y.minY]),b=(0,w.rG)(re,[Y.minX,Y.maxY]),te=(0,w.rG)(re,[Y.maxX,Y.maxY]);Q=Math.min($[0],A[0],b[0],te[0]),se=Math.max($[0],A[0],b[0],te[0]),ye=Math.min($[1],A[1],b[1],te[1]),ne=Math.max($[1],A[1],b[1],te[1])}var le=this.attrs;if(le.shadowColor){var Ae=le.shadowBlur,De=Ae===void 0?0:Ae,Ne=le.shadowOffsetX,Te=Ne===void 0?0:Ne,We=le.shadowOffsetY,_e=We===void 0?0:We,we=Q-De+Te,Re=se+De+Te,ze=ye-De+_e,Ge=ne+De+_e;Q=Math.min(Q,we),se=Math.max(se,Re),ye=Math.min(ye,ze),ne=Math.max(ne,Ge)}return{x:Q,y:ye,minX:Q,minY:ye,maxX:se,maxY:ne,width:se-Q,height:ne-ye}},ee.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},ee.prototype.isClipShape=function(){return this.get("isClipShape")},ee.prototype.isInShape=function(Y,re){return!1},ee.prototype.isOnlyHitBox=function(){return!1},ee.prototype.isHit=function(Y,re){var Q=this.get("startArrowShape"),ye=this.get("endArrowShape"),se=[Y,re,1];se=this.invertFromMatrix(se);var ne=se[0],$=se[1],A=this._isInBBox(ne,$);return this.isOnlyHitBox()?A:!!(A&&!this.isClipped(ne,$)&&(this.isInShape(ne,$)||Q&&Q.isHit(ne,$)||ye&&ye.isHit(ne,$)))},ee}(W.Z);N.Z=X},93924:function(vt,N,k){"use strict";k.d(N,{_:function(){return at},C:function(){return Me}});var H={};k.r(H),k.d(H,{easeBack:function(){return rt},easeBackIn:function(){return Se},easeBackInOut:function(){return rt},easeBackOut:function(){return xe},easeBounce:function(){return He},easeBounceIn:function(){return lt},easeBounceInOut:function(){return Ue},easeBounceOut:function(){return He},easeCircle:function(){return we},easeCircleIn:function(){return We},easeCircleInOut:function(){return we},easeCircleOut:function(){return _e},easeCubic:function(){return re},easeCubicIn:function(){return ee},easeCubicInOut:function(){return re},easeCubicOut:function(){return Y},easeElastic:function(){return Xe},easeElasticIn:function(){return Ye},easeElasticInOut:function(){return Le},easeElasticOut:function(){return Xe},easeExp:function(){return Te},easeExpIn:function(){return De},easeExpInOut:function(){return Te},easeExpOut:function(){return Ne},easeLinear:function(){return W},easePoly:function(){return ne},easePolyIn:function(){return ye},easePolyInOut:function(){return ne},easePolyOut:function(){return se},easeQuad:function(){return j},easeQuadIn:function(){return w},easeQuadInOut:function(){return j},easeQuadOut:function(){return X},easeSin:function(){return le},easeSinIn:function(){return b},easeSinInOut:function(){return le},easeSinOut:function(){return te}});function W(Ze){return+Ze}function w(Ze){return Ze*Ze}function X(Ze){return Ze*(2-Ze)}function j(Ze){return((Ze*=2)<=1?Ze*Ze:--Ze*(2-Ze)+1)/2}function ee(Ze){return Ze*Ze*Ze}function Y(Ze){return--Ze*Ze*Ze+1}function re(Ze){return((Ze*=2)<=1?Ze*Ze*Ze:(Ze-=2)*Ze*Ze+2)/2}var Q=3,ye=function Ze(_t){_t=+_t;function Mt(ir){return Math.pow(ir,_t)}return Mt.exponent=Ze,Mt}(Q),se=function Ze(_t){_t=+_t;function Mt(ir){return 1-Math.pow(1-ir,_t)}return Mt.exponent=Ze,Mt}(Q),ne=function Ze(_t){_t=+_t;function Mt(ir){return((ir*=2)<=1?Math.pow(ir,_t):2-Math.pow(2-ir,_t))/2}return Mt.exponent=Ze,Mt}(Q),$=Math.PI,A=$/2;function b(Ze){return+Ze==1?1:1-Math.cos(Ze*A)}function te(Ze){return Math.sin(Ze*A)}function le(Ze){return(1-Math.cos($*Ze))/2}function Ae(Ze){return(Math.pow(2,-10*Ze)-.0009765625)*1.0009775171065494}function De(Ze){return Ae(1-+Ze)}function Ne(Ze){return 1-Ae(Ze)}function Te(Ze){return((Ze*=2)<=1?Ae(1-Ze):2-Ae(Ze-1))/2}function We(Ze){return 1-Math.sqrt(1-Ze*Ze)}function _e(Ze){return Math.sqrt(1- --Ze*Ze)}function we(Ze){return((Ze*=2)<=1?1-Math.sqrt(1-Ze*Ze):Math.sqrt(1-(Ze-=2)*Ze)+1)/2}var Re=4/11,ze=6/11,Ge=8/11,yt=3/4,ke=9/11,tt=10/11,ae=15/16,Ke=21/22,he=63/64,Pe=1/Re/Re;function lt(Ze){return 1-He(1-Ze)}function He(Ze){return(Ze=+Ze)<Re?Pe*Ze*Ze:Ze<Ge?Pe*(Ze-=ze)*Ze+yt:Ze<tt?Pe*(Ze-=ke)*Ze+ae:Pe*(Ze-=Ke)*Ze+he}function Ue(Ze){return((Ze*=2)<=1?1-He(1-Ze):He(Ze-1)+1)/2}var Qe=1.70158,Se=function Ze(_t){_t=+_t;function Mt(ir){return(ir=+ir)*ir*(_t*(ir-1)+ir)}return Mt.overshoot=Ze,Mt}(Qe),xe=function Ze(_t){_t=+_t;function Mt(ir){return--ir*ir*((ir+1)*_t+ir)+1}return Mt.overshoot=Ze,Mt}(Qe),rt=function Ze(_t){_t=+_t;function Mt(ir){return((ir*=2)<1?ir*ir*((_t+1)*ir-_t):(ir-=2)*ir*((_t+1)*ir+_t)+2)/2}return Mt.overshoot=Ze,Mt}(Qe),Je=2*Math.PI,dt=1,Bt=.3,Ye=function Ze(_t,Mt){var ir=Math.asin(1/(_t=Math.max(1,_t)))*(Mt/=Je);function Tr(et){return _t*Ae(- --et)*Math.sin((ir-et)/Mt)}return Tr.amplitude=function(et){return Ze(et,Mt*Je)},Tr.period=function(et){return Ze(_t,et)},Tr}(dt,Bt),Xe=function Ze(_t,Mt){var ir=Math.asin(1/(_t=Math.max(1,_t)))*(Mt/=Je);function Tr(et){return 1-_t*Ae(et=+et)*Math.sin((et+ir)/Mt)}return Tr.amplitude=function(et){return Ze(et,Mt*Je)},Tr.period=function(et){return Ze(_t,et)},Tr}(dt,Bt),Le=function Ze(_t,Mt){var ir=Math.asin(1/(_t=Math.max(1,_t)))*(Mt/=Je);function Tr(et){return((et=et*2-1)<0?_t*Ae(-et)*Math.sin((ir-et)/Mt):2-_t*Ae(et)*Math.sin((ir+et)/Mt))/2}return Tr.amplitude=function(et){return Ze(et,Mt*Je)},Tr.period=function(et){return Ze(_t,et)},Tr}(dt,Bt),je={};function at(Ze){return je[Ze.toLowerCase()]||H[Ze]}function Me(Ze,_t){je[Ze.toLowerCase()]=_t}},46556:function(vt,N,k){"use strict";k.d(N,{b:function(){return w},W:function(){return W}});var H=new Map;function W(Ne,Te){H.set(Ne,Te)}function w(Ne){return H.get(Ne)}function X(Ne){var Te=Ne.attr(),We=Te.x,_e=Te.y,we=Te.width,Re=Te.height;return{x:We,y:_e,width:we,height:Re}}function j(Ne){var Te=Ne.attr(),We=Te.x,_e=Te.y,we=Te.r;return{x:We-we,y:_e-we,width:we*2,height:we*2}}var ee=k(32793);function Y(Ne,Te){return!Ne||!Te?Ne||Te:{minX:Math.min(Ne.minX,Te.minX),minY:Math.min(Ne.minY,Te.minY),maxX:Math.max(Ne.maxX,Te.maxX),maxY:Math.max(Ne.maxY,Te.maxY)}}function re(Ne,Te){var We=Ne.get("startArrowShape"),_e=Ne.get("endArrowShape"),we=null,Re=null;return We&&(we=We.getCanvasBBox(),Te=Y(Te,we)),_e&&(Re=_e.getCanvasBBox(),Te=Y(Te,Re)),Te}function Q(Ne){for(var Te=Ne.attr(),We=Te.points,_e=[],we=[],Re=0;Re<We.length;Re++){var ze=We[Re];_e.push(ze[0]),we.push(ze[1])}var Ge=ee.Zr.getBBoxByArray(_e,we),yt=Ge.x,ke=Ge.y,tt=Ge.width,ae=Ge.height,Ke={minX:yt,minY:ke,maxX:yt+tt,maxY:ke+ae};return Ke=re(Ne,Ke),{x:Ke.minX,y:Ke.minY,width:Ke.maxX-Ke.minX,height:Ke.maxY-Ke.minY}}function ye(Ne){for(var Te=Ne.attr(),We=Te.points,_e=[],we=[],Re=0;Re<We.length;Re++){var ze=We[Re];_e.push(ze[0]),we.push(ze[1])}return ee.Zr.getBBoxByArray(_e,we)}var se=k(8723);function ne(Ne){var Te=Ne.attr(),We=Te.x,_e=Te.y,we=Te.text,Re=Te.fontSize,ze=Te.lineHeight,Ge=Te.font;Ge||(Ge=(0,se.$O)(Te));var yt=(0,se.mY)(we,Ge),ke;if(!yt)ke={x:We,y:_e,width:0,height:0};else{var tt=Te.textAlign,ae=Te.textBaseline,Ke=(0,se.FE)(we,Re,ze),he={x:We,y:_e-Ke};tt&&(tt==="end"||tt==="right"?he.x-=yt:tt==="center"&&(he.x-=yt/2)),ae&&(ae==="top"?he.y+=Ke:ae==="middle"&&(he.y+=Ke/2)),ke={x:he.x,y:he.y,width:yt,height:Ke}}return ke}var $=k(39499),A=k(21030);function b(Ne,Te){for(var We=[],_e=[],we=[],Re=0;Re<Ne.length;Re++){var ze=Ne[Re],Ge=ze.currentPoint,yt=ze.params,ke=ze.prePoint,tt=void 0;switch(ze.command){case"Q":tt=ee.lD.box(ke[0],ke[1],yt[1],yt[2],yt[3],yt[4]);break;case"C":tt=ee.Ll.box(ke[0],ke[1],yt[1],yt[2],yt[3],yt[4],yt[5],yt[6]);break;case"A":var ae=ze.arcParams;tt=ee.wN.box(ae.cx,ae.cy,ae.rx,ae.ry,ae.xRotation,ae.startAngle,ae.endAngle);break;default:We.push(Ge[0]),_e.push(Ge[1]);break}tt&&(ze.box=tt,We.push(tt.x,tt.x+tt.width),_e.push(tt.y,tt.y+tt.height)),Te&&(ze.command==="L"||ze.command==="M")&&ze.prePoint&&ze.nextPoint&&we.push(ze)}We=We.filter(function(Ue){return!Number.isNaN(Ue)&&Ue!==1/0&&Ue!==-1/0}),_e=_e.filter(function(Ue){return!Number.isNaN(Ue)&&Ue!==1/0&&Ue!==-1/0});var Ke=(0,A.VV)(We),he=(0,A.VV)(_e),Pe=(0,A.Fp)(We),lt=(0,A.Fp)(_e);if(we.length===0)return{x:Ke,y:he,width:Pe-Ke,height:lt-he};for(var Re=0;Re<we.length;Re++){var ze=we[Re],Ge=ze.currentPoint,He=void 0;Ge[0]===Ke?(He=te(ze,Te),Ke=Ke-He.xExtra):Ge[0]===Pe&&(He=te(ze,Te),Pe=Pe+He.xExtra),Ge[1]===he?(He=te(ze,Te),he=he-He.yExtra):Ge[1]===lt&&(He=te(ze,Te),lt=lt+He.yExtra)}return{x:Ke,y:he,width:Pe-Ke,height:lt-he}}function te(Ne,Te){var We=Ne.prePoint,_e=Ne.currentPoint,we=Ne.nextPoint,Re=Math.pow(_e[0]-We[0],2)+Math.pow(_e[1]-We[1],2),ze=Math.pow(_e[0]-we[0],2)+Math.pow(_e[1]-we[1],2),Ge=Math.pow(We[0]-we[0],2)+Math.pow(We[1]-we[1],2),yt=Math.acos((Re+ze-Ge)/(2*Math.sqrt(Re)*Math.sqrt(ze)));if(!yt||Math.sin(yt)===0||(0,A.vQ)(yt,0))return{xExtra:0,yExtra:0};var ke=Math.abs(Math.atan2(we[1]-_e[1],we[0]-_e[0])),tt=Math.abs(Math.atan2(we[0]-_e[0],we[1]-_e[1]));ke=ke>Math.PI/2?Math.PI-ke:ke,tt=tt>Math.PI/2?Math.PI-tt:tt;var ae={xExtra:Math.cos(yt/2-ke)*(Te/2*(1/Math.sin(yt/2)))-Te/2||0,yExtra:Math.cos(tt-yt/2)*(Te/2*(1/Math.sin(yt/2)))-Te/2||0};return ae}function le(Ne){var Te=Ne.attr(),We=Te.path,_e=Te.stroke,we=_e?Te.lineWidth:0,Re=Ne.get("segments")||(0,$.zx)(We),ze=b(Re,we),Ge=ze.x,yt=ze.y,ke=ze.width,tt=ze.height,ae={minX:Ge,minY:yt,maxX:Ge+ke,maxY:yt+tt};return ae=re(Ne,ae),{x:ae.minX,y:ae.minY,width:ae.maxX-ae.minX,height:ae.maxY-ae.minY}}function Ae(Ne){var Te=Ne.attr(),We=Te.x1,_e=Te.y1,we=Te.x2,Re=Te.y2,ze=Math.min(We,we),Ge=Math.max(We,we),yt=Math.min(_e,Re),ke=Math.max(_e,Re),tt={minX:ze,maxX:Ge,minY:yt,maxY:ke};return tt=re(Ne,tt),{x:tt.minX,y:tt.minY,width:tt.maxX-tt.minX,height:tt.maxY-tt.minY}}function De(Ne){var Te=Ne.attr(),We=Te.x,_e=Te.y,we=Te.rx,Re=Te.ry;return{x:We-we,y:_e-Re,width:we*2,height:Re*2}}W("rect",X),W("image",X),W("circle",j),W("marker",j),W("polyline",Q),W("polygon",ye),W("text",ne),W("path",le),W("line",Ae),W("ellipse",De)},89473:function(vt,N){"use strict";var k=function(){function H(W,w){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=W,this.name=W,this.originalEvent=w,this.timeStamp=w.timeStamp}return H.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},H.prototype.stopPropagation=function(){this.propagationStopped=!0},H.prototype.toString=function(){var W=this.type;return"[Event (type="+W+")]"},H.prototype.save=function(){},H.prototype.restore=function(){},H}();N.Z=k},98190:function(vt,N,k){"use strict";k.r(N),k.d(N,{AbstractCanvas:function(){return ye.Z},AbstractGroup:function(){return se.Z},AbstractShape:function(){return ne.Z},Base:function(){return Q.Z},Event:function(){return re.Z},PathUtil:function(){return H},assembleFont:function(){return A.$O},getBBoxMethod:function(){return $.b},getOffScreenContext:function(){return le.L},getTextHeight:function(){return A.FE},invert:function(){return te.U_},isAllowCapture:function(){return b.pP},multiplyVec2:function(){return te.rG},registerBBox:function(){return $.W},registerEasing:function(){return Ae.C},version:function(){return De}});var H=k(47575),W=k(52),w=k.n(W),Y={};for(var X in W)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(X)<0&&(Y[X]=function(Ne){return W[Ne]}.bind(0,X));k.d(N,Y);var j=k(19641),ee=k.n(j),Y={};for(var X in j)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(X)<0&&(Y[X]=function(Te){return j[Te]}.bind(0,X));k.d(N,Y);var re=k(89473),Q=k(2667),ye=k(58906),se=k(31841),ne=k(15032),$=k(46556),A=k(8723),b=k(77341),te=k(41482),le=k(67052),Ae=k(93924),De="0.5.11"},19641:function(){},52:function(){},41482:function(vt,N,k){"use strict";k.d(N,{U_:function(){return w},rG:function(){return W},xq:function(){return H}});function H(X,j){var ee=[],Y=X[0],re=X[1],Q=X[2],ye=X[3],se=X[4],ne=X[5],$=X[6],A=X[7],b=X[8],te=j[0],le=j[1],Ae=j[2],De=j[3],Ne=j[4],Te=j[5],We=j[6],_e=j[7],we=j[8];return ee[0]=te*Y+le*ye+Ae*$,ee[1]=te*re+le*se+Ae*A,ee[2]=te*Q+le*ne+Ae*b,ee[3]=De*Y+Ne*ye+Te*$,ee[4]=De*re+Ne*se+Te*A,ee[5]=De*Q+Ne*ne+Te*b,ee[6]=We*Y+_e*ye+we*$,ee[7]=We*re+_e*se+we*A,ee[8]=We*Q+_e*ne+we*b,ee}function W(X,j){var ee=[],Y=j[0],re=j[1];return ee[0]=X[0]*Y+X[3]*re+X[6],ee[1]=X[1]*Y+X[4]*re+X[7],ee}function w(X){var j=[],ee=X[0],Y=X[1],re=X[2],Q=X[3],ye=X[4],se=X[5],ne=X[6],$=X[7],A=X[8],b=A*ye-se*$,te=-A*Q+se*ne,le=$*Q-ye*ne,Ae=ee*b+Y*te+re*le;return Ae?(Ae=1/Ae,j[0]=b*Ae,j[1]=(-A*Y+re*$)*Ae,j[2]=(se*Y-re*ye)*Ae,j[3]=te*Ae,j[4]=(A*ee-re*ne)*Ae,j[5]=(-se*ee+re*Q)*Ae,j[6]=le*Ae,j[7]=(-$*ee+Y*ne)*Ae,j[8]=(ye*ee-Y*Q)*Ae,j):null}},67052:function(vt,N,k){"use strict";k.d(N,{L:function(){return W}});var H=null;function W(){if(!H){var w=document.createElement("canvas");w.width=1,w.height=1,H=w.getContext("2d")}return H}},47575:function(vt,N,k){"use strict";k.r(N),k.d(N,{catmullRomToBezier:function(){return ee},fillPath:function(){return ae},fillPathByDiff:function(){return lt},formatPath:function(){return Qe},intersection:function(){return Ge},parsePathArray:function(){return A},parsePathString:function(){return j},pathToAbsolute:function(){return re},pathToCurve:function(){return ne},rectPath:function(){return Ne}});var H=k(21030),W=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,w=new RegExp("([a-z])["+W+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+W+"]*,?["+W+"]*)+)","ig"),X=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+W+"]*,?["+W+"]*","ig"),j=function(Se){if(!Se)return null;if((0,H.kJ)(Se))return Se;var xe={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},rt=[];return String(Se).replace(w,function(Je,dt,Bt){var Ye=[],Xe=dt.toLowerCase();if(Bt.replace(X,function(Le,je){je&&Ye.push(+je)}),Xe==="m"&&Ye.length>2&&(rt.push([dt].concat(Ye.splice(0,2))),Xe="l",dt=dt==="m"?"l":"L"),Xe==="o"&&Ye.length===1&&rt.push([dt,Ye[0]]),Xe==="r")rt.push([dt].concat(Ye));else for(;Ye.length>=xe[Xe]&&(rt.push([dt].concat(Ye.splice(0,xe[Xe]))),!!xe[Xe]););return Se}),rt},ee=function(Se,xe){for(var rt=[],Je=0,dt=Se.length;dt-2*!xe>Je;Je+=2){var Bt=[{x:+Se[Je-2],y:+Se[Je-1]},{x:+Se[Je],y:+Se[Je+1]},{x:+Se[Je+2],y:+Se[Je+3]},{x:+Se[Je+4],y:+Se[Je+5]}];xe?Je?dt-4===Je?Bt[3]={x:+Se[0],y:+Se[1]}:dt-2===Je&&(Bt[2]={x:+Se[0],y:+Se[1]},Bt[3]={x:+Se[2],y:+Se[3]}):Bt[0]={x:+Se[dt-2],y:+Se[dt-1]}:dt-4===Je?Bt[3]=Bt[2]:Je||(Bt[0]={x:+Se[Je],y:+Se[Je+1]}),rt.push(["C",(-Bt[0].x+6*Bt[1].x+Bt[2].x)/6,(-Bt[0].y+6*Bt[1].y+Bt[2].y)/6,(Bt[1].x+6*Bt[2].x-Bt[3].x)/6,(Bt[1].y+6*Bt[2].y-Bt[3].y)/6,Bt[2].x,Bt[2].y])}return rt},Y=function(Se,xe,rt,Je,dt){var Bt=[];if(dt===null&&Je===null&&(Je=rt),Se=+Se,xe=+xe,rt=+rt,Je=+Je,dt!==null){var Ye=Math.PI/180,Xe=Se+rt*Math.cos(-Je*Ye),Le=Se+rt*Math.cos(-dt*Ye),je=xe+rt*Math.sin(-Je*Ye),at=xe+rt*Math.sin(-dt*Ye);Bt=[["M",Xe,je],["A",rt,rt,0,+(dt-Je>180),0,Le,at]]}else Bt=[["M",Se,xe],["m",0,-Je],["a",rt,Je,0,1,1,0,2*Je],["a",rt,Je,0,1,1,0,-2*Je],["z"]];return Bt},re=function(Se){if(Se=j(Se),!Se||!Se.length)return[["M",0,0]];var xe=[],rt=0,Je=0,dt=0,Bt=0,Ye=0,Xe,Le;Se[0][0]==="M"&&(rt=+Se[0][1],Je=+Se[0][2],dt=rt,Bt=Je,Ye++,xe[0]=["M",rt,Je]);for(var je=Se.length===3&&Se[0][0]==="M"&&Se[1][0].toUpperCase()==="R"&&Se[2][0].toUpperCase()==="Z",at=void 0,Me=void 0,Ze=Ye,_t=Se.length;Ze<_t;Ze++){if(xe.push(at=[]),Me=Se[Ze],Xe=Me[0],Xe!==Xe.toUpperCase())switch(at[0]=Xe.toUpperCase(),at[0]){case"A":at[1]=Me[1],at[2]=Me[2],at[3]=Me[3],at[4]=Me[4],at[5]=Me[5],at[6]=+Me[6]+rt,at[7]=+Me[7]+Je;break;case"V":at[1]=+Me[1]+Je;break;case"H":at[1]=+Me[1]+rt;break;case"R":Le=[rt,Je].concat(Me.slice(1));for(var Mt=2,ir=Le.length;Mt<ir;Mt++)Le[Mt]=+Le[Mt]+rt,Le[++Mt]=+Le[Mt]+Je;xe.pop(),xe=xe.concat(ee(Le,je));break;case"O":xe.pop(),Le=Y(rt,Je,Me[1],Me[2]),Le.push(Le[0]),xe=xe.concat(Le);break;case"U":xe.pop(),xe=xe.concat(Y(rt,Je,Me[1],Me[2],Me[3])),at=["U"].concat(xe[xe.length-1].slice(-2));break;case"M":dt=+Me[1]+rt,Bt=+Me[2]+Je;break;default:for(var Mt=1,ir=Me.length;Mt<ir;Mt++)at[Mt]=+Me[Mt]+(Mt%2?rt:Je)}else if(Xe==="R")Le=[rt,Je].concat(Me.slice(1)),xe.pop(),xe=xe.concat(ee(Le,je)),at=["R"].concat(Me.slice(-2));else if(Xe==="O")xe.pop(),Le=Y(rt,Je,Me[1],Me[2]),Le.push(Le[0]),xe=xe.concat(Le);else if(Xe==="U")xe.pop(),xe=xe.concat(Y(rt,Je,Me[1],Me[2],Me[3])),at=["U"].concat(xe[xe.length-1].slice(-2));else for(var Tr=0,et=Me.length;Tr<et;Tr++)at[Tr]=Me[Tr];if(Xe=Xe.toUpperCase(),Xe!=="O")switch(at[0]){case"Z":rt=+dt,Je=+Bt;break;case"H":rt=at[1];break;case"V":Je=at[1];break;case"M":dt=at[at.length-2],Bt=at[at.length-1];break;default:rt=at[at.length-2],Je=at[at.length-1]}}return xe},Q=function(Se,xe,rt,Je){return[Se,xe,rt,Je,rt,Je]},ye=function(Se,xe,rt,Je,dt,Bt){var Ye=.3333333333333333,Xe=2/3;return[Ye*Se+Xe*rt,Ye*xe+Xe*Je,Ye*dt+Xe*rt,Ye*Bt+Xe*Je,dt,Bt]},se=function(Se,xe,rt,Je,dt,Bt,Ye,Xe,Le,je){rt===Je&&(rt+=1);var at=Math.PI*120/180,Me=Math.PI/180*(+dt||0),Ze=[],_t,Mt,ir,Tr,et,en=function(nt,St,$t){var vr=nt*Math.cos($t)-St*Math.sin($t),Rt=nt*Math.sin($t)+St*Math.cos($t);return{x:vr,y:Rt}};if(je)Mt=je[0],ir=je[1],Tr=je[2],et=je[3];else{_t=en(Se,xe,-Me),Se=_t.x,xe=_t.y,_t=en(Xe,Le,-Me),Xe=_t.x,Le=_t.y,Se===Xe&&xe===Le&&(Xe+=1,Le+=1);var Xr=(Se-Xe)/2,Sr=(xe-Le)/2,pt=Xr*Xr/(rt*rt)+Sr*Sr/(Je*Je);pt>1&&(pt=Math.sqrt(pt),rt=pt*rt,Je=pt*Je);var Ut=rt*rt,Gt=Je*Je,Tt=(Bt===Ye?-1:1)*Math.sqrt(Math.abs((Ut*Gt-Ut*Sr*Sr-Gt*Xr*Xr)/(Ut*Sr*Sr+Gt*Xr*Xr)));Tr=Tt*rt*Sr/Je+(Se+Xe)/2,et=Tt*-Je*Xr/rt+(xe+Le)/2,Mt=Math.asin(((xe-et)/Je).toFixed(9)),ir=Math.asin(((Le-et)/Je).toFixed(9)),Mt=Se<Tr?Math.PI-Mt:Mt,ir=Xe<Tr?Math.PI-ir:ir,Mt<0&&(Mt=Math.PI*2+Mt),ir<0&&(ir=Math.PI*2+ir),Ye&&Mt>ir&&(Mt=Mt-Math.PI*2),!Ye&&ir>Mt&&(ir=ir-Math.PI*2)}var qt=ir-Mt;if(Math.abs(qt)>at){var fr=ir,hr=Xe,Er=Le;ir=Mt+at*(Ye&&ir>Mt?1:-1),Xe=Tr+rt*Math.cos(ir),Le=et+Je*Math.sin(ir),Ze=se(Xe,Le,rt,Je,dt,0,Ye,hr,Er,[ir,fr,Tr,et])}qt=ir-Mt;var Ir=Math.cos(Mt),ue=Math.sin(Mt),G=Math.cos(ir),oe=Math.sin(ir),Ie=Math.tan(qt/4),qe=4/3*rt*Ie,At=4/3*Je*Ie,rr=[Se,xe],Zt=[Se+qe*ue,xe-At*Ir],wt=[Xe+qe*oe,Le-At*G],Pt=[Xe,Le];if(Zt[0]=2*rr[0]-Zt[0],Zt[1]=2*rr[1]-Zt[1],je)return[Zt,wt,Pt].concat(Ze);Ze=[Zt,wt,Pt].concat(Ze).join().split(",");for(var ge=[],ve=0,Fe=Ze.length;ve<Fe;ve++)ge[ve]=ve%2?en(Ze[ve-1],Ze[ve],Me).y:en(Ze[ve],Ze[ve+1],Me).x;return ge},ne=function(Se,xe){var rt=re(Se),Je=xe&&re(xe),dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Bt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ye=[],Xe=[],Le="",je="",at,Me=function(Xr,Sr,pt){var Ut,Gt;if(!Xr)return["C",Sr.x,Sr.y,Sr.x,Sr.y,Sr.x,Sr.y];switch(!(Xr[0]in{T:1,Q:1})&&(Sr.qx=Sr.qy=null),Xr[0]){case"M":Sr.X=Xr[1],Sr.Y=Xr[2];break;case"A":Xr=["C"].concat(se.apply(0,[Sr.x,Sr.y].concat(Xr.slice(1))));break;case"S":pt==="C"||pt==="S"?(Ut=Sr.x*2-Sr.bx,Gt=Sr.y*2-Sr.by):(Ut=Sr.x,Gt=Sr.y),Xr=["C",Ut,Gt].concat(Xr.slice(1));break;case"T":pt==="Q"||pt==="T"?(Sr.qx=Sr.x*2-Sr.qx,Sr.qy=Sr.y*2-Sr.qy):(Sr.qx=Sr.x,Sr.qy=Sr.y),Xr=["C"].concat(ye(Sr.x,Sr.y,Sr.qx,Sr.qy,Xr[1],Xr[2]));break;case"Q":Sr.qx=Xr[1],Sr.qy=Xr[2],Xr=["C"].concat(ye(Sr.x,Sr.y,Xr[1],Xr[2],Xr[3],Xr[4]));break;case"L":Xr=["C"].concat(Q(Sr.x,Sr.y,Xr[1],Xr[2]));break;case"H":Xr=["C"].concat(Q(Sr.x,Sr.y,Xr[1],Sr.y));break;case"V":Xr=["C"].concat(Q(Sr.x,Sr.y,Sr.x,Xr[1]));break;case"Z":Xr=["C"].concat(Q(Sr.x,Sr.y,Sr.X,Sr.Y));break;default:break}return Xr},Ze=function(Xr,Sr){if(Xr[Sr].length>7){Xr[Sr].shift();for(var pt=Xr[Sr];pt.length;)Ye[Sr]="A",Je&&(Xe[Sr]="A"),Xr.splice(Sr++,0,["C"].concat(pt.splice(0,6)));Xr.splice(Sr,1),at=Math.max(rt.length,Je&&Je.length||0)}},_t=function(Xr,Sr,pt,Ut,Gt){Xr&&Sr&&Xr[Gt][0]==="M"&&Sr[Gt][0]!=="M"&&(Sr.splice(Gt,0,["M",Ut.x,Ut.y]),pt.bx=0,pt.by=0,pt.x=Xr[Gt][1],pt.y=Xr[Gt][2],at=Math.max(rt.length,Je&&Je.length||0))};at=Math.max(rt.length,Je&&Je.length||0);for(var Mt=0;Mt<at;Mt++){rt[Mt]&&(Le=rt[Mt][0]),Le!=="C"&&(Ye[Mt]=Le,Mt&&(je=Ye[Mt-1])),rt[Mt]=Me(rt[Mt],dt,je),Ye[Mt]!=="A"&&Le==="C"&&(Ye[Mt]="C"),Ze(rt,Mt),Je&&(Je[Mt]&&(Le=Je[Mt][0]),Le!=="C"&&(Xe[Mt]=Le,Mt&&(je=Xe[Mt-1])),Je[Mt]=Me(Je[Mt],Bt,je),Xe[Mt]!=="A"&&Le==="C"&&(Xe[Mt]="C"),Ze(Je,Mt)),_t(rt,Je,dt,Bt,Mt),_t(Je,rt,Bt,dt,Mt);var ir=rt[Mt],Tr=Je&&Je[Mt],et=ir.length,en=Je&&Tr.length;dt.x=ir[et-2],dt.y=ir[et-1],dt.bx=parseFloat(ir[et-4])||dt.x,dt.by=parseFloat(ir[et-3])||dt.y,Bt.bx=Je&&(parseFloat(Tr[en-4])||Bt.x),Bt.by=Je&&(parseFloat(Tr[en-3])||Bt.y),Bt.x=Je&&Tr[en-2],Bt.y=Je&&Tr[en-1]}return Je?[rt,Je]:rt},$=/,?([a-z]),?/gi,A=function(Se){return Se.join(",").replace($,"$1")},b=function(Se,xe,rt,Je,dt){var Bt=-3*xe+9*rt-9*Je+3*dt,Ye=Se*Bt+6*xe-12*rt+6*Je;return Se*Ye-3*xe+3*rt},te=function(Se,xe,rt,Je,dt,Bt,Ye,Xe,Le){Le===null&&(Le=1),Le=Le>1?1:Le<0?0:Le;for(var je=Le/2,at=12,Me=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ze=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],_t=0,Mt=0;Mt<at;Mt++){var ir=je*Me[Mt]+je,Tr=b(ir,Se,rt,dt,Ye),et=b(ir,xe,Je,Bt,Xe),en=Tr*Tr+et*et;_t+=Ze[Mt]*Math.sqrt(en)}return je*_t},le=function(Se,xe,rt,Je,dt,Bt,Ye,Xe){for(var Le=[],je=[[],[]],at,Me,Ze,_t,Mt=0;Mt<2;++Mt){if(Mt===0?(Me=6*Se-12*rt+6*dt,at=-3*Se+9*rt-9*dt+3*Ye,Ze=3*rt-3*Se):(Me=6*xe-12*Je+6*Bt,at=-3*xe+9*Je-9*Bt+3*Xe,Ze=3*Je-3*xe),Math.abs(at)<1e-12){if(Math.abs(Me)<1e-12)continue;_t=-Ze/Me,_t>0&&_t<1&&Le.push(_t);continue}var ir=Me*Me-4*Ze*at,Tr=Math.sqrt(ir);if(!(ir<0)){var et=(-Me+Tr)/(2*at);et>0&&et<1&&Le.push(et);var en=(-Me-Tr)/(2*at);en>0&&en<1&&Le.push(en)}}for(var Xr=Le.length,Sr=Xr,pt;Xr--;)_t=Le[Xr],pt=1-_t,je[0][Xr]=pt*pt*pt*Se+3*pt*pt*_t*rt+3*pt*_t*_t*dt+_t*_t*_t*Ye,je[1][Xr]=pt*pt*pt*xe+3*pt*pt*_t*Je+3*pt*_t*_t*Bt+_t*_t*_t*Xe;return je[0][Sr]=Se,je[1][Sr]=xe,je[0][Sr+1]=Ye,je[1][Sr+1]=Xe,je[0].length=je[1].length=Sr+2,{min:{x:Math.min.apply(0,je[0]),y:Math.min.apply(0,je[1])},max:{x:Math.max.apply(0,je[0]),y:Math.max.apply(0,je[1])}}},Ae=function(Se,xe,rt,Je,dt,Bt,Ye,Xe){if(!(Math.max(Se,rt)<Math.min(dt,Ye)||Math.min(Se,rt)>Math.max(dt,Ye)||Math.max(xe,Je)<Math.min(Bt,Xe)||Math.min(xe,Je)>Math.max(Bt,Xe))){var Le=(Se*Je-xe*rt)*(dt-Ye)-(Se-rt)*(dt*Xe-Bt*Ye),je=(Se*Je-xe*rt)*(Bt-Xe)-(xe-Je)*(dt*Xe-Bt*Ye),at=(Se-rt)*(Bt-Xe)-(xe-Je)*(dt-Ye);if(at){var Me=Le/at,Ze=je/at,_t=+Me.toFixed(2),Mt=+Ze.toFixed(2);if(!(_t<+Math.min(Se,rt).toFixed(2)||_t>+Math.max(Se,rt).toFixed(2)||_t<+Math.min(dt,Ye).toFixed(2)||_t>+Math.max(dt,Ye).toFixed(2)||Mt<+Math.min(xe,Je).toFixed(2)||Mt>+Math.max(xe,Je).toFixed(2)||Mt<+Math.min(Bt,Xe).toFixed(2)||Mt>+Math.max(Bt,Xe).toFixed(2)))return{x:Me,y:Ze}}}},De=function(Se,xe,rt){return xe>=Se.x&&xe<=Se.x+Se.width&&rt>=Se.y&&rt<=Se.y+Se.height},Ne=function(Se,xe,rt,Je,dt){if(dt)return[["M",+Se+ +dt,xe],["l",rt-dt*2,0],["a",dt,dt,0,0,1,dt,dt],["l",0,Je-dt*2],["a",dt,dt,0,0,1,-dt,dt],["l",dt*2-rt,0],["a",dt,dt,0,0,1,-dt,-dt],["l",0,dt*2-Je],["a",dt,dt,0,0,1,dt,-dt],["z"]];var Bt=[["M",Se,xe],["l",rt,0],["l",0,Je],["l",-rt,0],["z"]];return Bt.parsePathArray=A,Bt},Te=function(Se,xe,rt,Je){return Se===null&&(Se=xe=rt=Je=0),xe===null&&(xe=Se.y,rt=Se.width,Je=Se.height,Se=Se.x),{x:Se,y:xe,width:rt,w:rt,height:Je,h:Je,x2:Se+rt,y2:xe+Je,cx:Se+rt/2,cy:xe+Je/2,r1:Math.min(rt,Je)/2,r2:Math.max(rt,Je)/2,r0:Math.sqrt(rt*rt+Je*Je)/2,path:Ne(Se,xe,rt,Je),vb:[Se,xe,rt,Je].join(" ")}},We=function(Se,xe){return Se=Te(Se),xe=Te(xe),De(xe,Se.x,Se.y)||De(xe,Se.x2,Se.y)||De(xe,Se.x,Se.y2)||De(xe,Se.x2,Se.y2)||De(Se,xe.x,xe.y)||De(Se,xe.x2,xe.y)||De(Se,xe.x,xe.y2)||De(Se,xe.x2,xe.y2)||(Se.x<xe.x2&&Se.x>xe.x||xe.x<Se.x2&&xe.x>Se.x)&&(Se.y<xe.y2&&Se.y>xe.y||xe.y<Se.y2&&xe.y>Se.y)},_e=function(Se,xe,rt,Je,dt,Bt,Ye,Xe){(0,H.kJ)(Se)||(Se=[Se,xe,rt,Je,dt,Bt,Ye,Xe]);var Le=le.apply(null,Se);return Te(Le.min.x,Le.min.y,Le.max.x-Le.min.x,Le.max.y-Le.min.y)},we=function(Se,xe,rt,Je,dt,Bt,Ye,Xe,Le){var je=1-Le,at=Math.pow(je,3),Me=Math.pow(je,2),Ze=Le*Le,_t=Ze*Le,Mt=at*Se+Me*3*Le*rt+je*3*Le*Le*dt+_t*Ye,ir=at*xe+Me*3*Le*Je+je*3*Le*Le*Bt+_t*Xe,Tr=Se+2*Le*(rt-Se)+Ze*(dt-2*rt+Se),et=xe+2*Le*(Je-xe)+Ze*(Bt-2*Je+xe),en=rt+2*Le*(dt-rt)+Ze*(Ye-2*dt+rt),Xr=Je+2*Le*(Bt-Je)+Ze*(Xe-2*Bt+Je),Sr=je*Se+Le*rt,pt=je*xe+Le*Je,Ut=je*dt+Le*Ye,Gt=je*Bt+Le*Xe,Tt=90-Math.atan2(Tr-en,et-Xr)*180/Math.PI;return{x:Mt,y:ir,m:{x:Tr,y:et},n:{x:en,y:Xr},start:{x:Sr,y:pt},end:{x:Ut,y:Gt},alpha:Tt}},Re=function(Se,xe,rt){var Je=_e(Se),dt=_e(xe);if(!We(Je,dt))return rt?0:[];for(var Bt=te.apply(0,Se),Ye=te.apply(0,xe),Xe=~~(Bt/8),Le=~~(Ye/8),je=[],at=[],Me={},Ze=rt?0:[],_t=0;_t<Xe+1;_t++){var Mt=we.apply(0,Se.concat(_t/Xe));je.push({x:Mt.x,y:Mt.y,t:_t/Xe})}for(var _t=0;_t<Le+1;_t++){var Mt=we.apply(0,xe.concat(_t/Le));at.push({x:Mt.x,y:Mt.y,t:_t/Le})}for(var _t=0;_t<Xe;_t++)for(var ir=0;ir<Le;ir++){var Tr=je[_t],et=je[_t+1],en=at[ir],Xr=at[ir+1],Sr=Math.abs(et.x-Tr.x)<.001?"y":"x",pt=Math.abs(Xr.x-en.x)<.001?"y":"x",Ut=Ae(Tr.x,Tr.y,et.x,et.y,en.x,en.y,Xr.x,Xr.y);if(Ut){if(Me[Ut.x.toFixed(4)]===Ut.y.toFixed(4))continue;Me[Ut.x.toFixed(4)]=Ut.y.toFixed(4);var Gt=Tr.t+Math.abs((Ut[Sr]-Tr[Sr])/(et[Sr]-Tr[Sr]))*(et.t-Tr.t),Tt=en.t+Math.abs((Ut[pt]-en[pt])/(Xr[pt]-en[pt]))*(Xr.t-en.t);Gt>=0&&Gt<=1&&Tt>=0&&Tt<=1&&(rt?Ze+=1:Ze.push({x:Ut.x,y:Ut.y,t1:Gt,t2:Tt}))}}return Ze},ze=function(Se,xe,rt){Se=ne(Se),xe=ne(xe);for(var Je,dt,Bt,Ye,Xe,Le,je,at,Me,Ze,_t=rt?0:[],Mt=0,ir=Se.length;Mt<ir;Mt++){var Tr=Se[Mt];if(Tr[0]==="M")Je=Xe=Tr[1],dt=Le=Tr[2];else{Tr[0]==="C"?(Me=[Je,dt].concat(Tr.slice(1)),Je=Me[6],dt=Me[7]):(Me=[Je,dt,Je,dt,Xe,Le,Xe,Le],Je=Xe,dt=Le);for(var et=0,en=xe.length;et<en;et++){var Xr=xe[et];if(Xr[0]==="M")Bt=je=Xr[1],Ye=at=Xr[2];else{Xr[0]==="C"?(Ze=[Bt,Ye].concat(Xr.slice(1)),Bt=Ze[6],Ye=Ze[7]):(Ze=[Bt,Ye,Bt,Ye,je,at,je,at],Bt=je,Ye=at);var Sr=Re(Me,Ze,rt);if(rt)_t+=Sr;else{for(var pt=0,Ut=Sr.length;pt<Ut;pt++)Sr[pt].segment1=Mt,Sr[pt].segment2=et,Sr[pt].bez1=Me,Sr[pt].bez2=Ze;_t=_t.concat(Sr)}}}}}return _t},Ge=function(Se,xe){return ze(Se,xe)};function yt(Se,xe){var rt=[],Je=[];function dt(Bt,Ye){if(Bt.length===1)rt.push(Bt[0]),Je.push(Bt[0]);else{for(var Xe=[],Le=0;Le<Bt.length-1;Le++)Le===0&&rt.push(Bt[0]),Le===Bt.length-2&&Je.push(Bt[Le+1]),Xe[Le]=[(1-Ye)*Bt[Le][0]+Ye*Bt[Le+1][0],(1-Ye)*Bt[Le][1]+Ye*Bt[Le+1][1]];dt(Xe,Ye)}}return Se.length&&dt(Se,xe),{left:rt,right:Je.reverse()}}function ke(Se,xe,rt){var Je=[[Se[1],Se[2]]];rt=rt||2;var dt=[];xe[0]==="A"?(Je.push(xe[6]),Je.push(xe[7])):xe[0]==="C"?(Je.push([xe[1],xe[2]]),Je.push([xe[3],xe[4]]),Je.push([xe[5],xe[6]])):xe[0]==="S"||xe[0]==="Q"?(Je.push([xe[1],xe[2]]),Je.push([xe[3],xe[4]])):Je.push([xe[1],xe[2]]);for(var Bt=Je,Ye=1/rt,Xe=0;Xe<rt-1;Xe++){var Le=Ye/(1-Ye*Xe),je=yt(Bt,Le);dt.push(je.left),Bt=je.right}dt.push(Bt);var at=dt.map(function(Me){var Ze=[];return Me.length===4&&(Ze.push("C"),Ze=Ze.concat(Me[2])),Me.length>=3&&(Me.length===3&&Ze.push("Q"),Ze=Ze.concat(Me[1])),Me.length===2&&Ze.push("L"),Ze=Ze.concat(Me[Me.length-1]),Ze});return at}var tt=function(Se,xe,rt){if(rt===1)return[[].concat(Se)];var Je=[];if(xe[0]==="L"||xe[0]==="C"||xe[0]==="Q")Je=Je.concat(ke(Se,xe,rt));else{var dt=[].concat(Se);dt[0]==="M"&&(dt[0]="L");for(var Bt=0;Bt<=rt-1;Bt++)Je.push(dt)}return Je},ae=function(Se,xe){if(Se.length===1)return Se;var rt=Se.length-1,Je=xe.length-1,dt=rt/Je,Bt=[];if(Se.length===1&&Se[0][0]==="M"){for(var Ye=0;Ye<Je-rt;Ye++)Se.push(Se[0]);return Se}for(var Ye=0;Ye<Je;Ye++){var Xe=Math.floor(dt*Ye);Bt[Xe]=(Bt[Xe]||0)+1}var Le=Bt.reduce(function(je,at,Me){return Me===rt?je.concat(Se[rt]):je.concat(tt(Se[Me],Se[Me+1],at))},[]);return Le.unshift(Se[0]),(xe[Je]==="Z"||xe[Je]==="z")&&Le.push("Z"),Le},Ke=function(Se,xe){if(Se.length!==xe.length)return!1;var rt=!0;return(0,H.S6)(Se,function(Je,dt){if(Je!==xe[dt])return rt=!1,!1}),rt};function he(Se,xe,rt){var Je=null,dt=rt;return xe<dt&&(dt=xe,Je="add"),Se<dt&&(dt=Se,Je="del"),{type:Je,min:dt}}var Pe=function(Se,xe){var rt=Se.length,Je=xe.length,dt,Bt,Ye=0;if(rt===0||Je===0)return null;for(var Xe=[],Le=0;Le<=rt;Le++)Xe[Le]=[],Xe[Le][0]={min:Le};for(var je=0;je<=Je;je++)Xe[0][je]={min:je};for(var Le=1;Le<=rt;Le++){dt=Se[Le-1];for(var je=1;je<=Je;je++){Bt=xe[je-1],Ke(dt,Bt)?Ye=0:Ye=1;var at=Xe[Le-1][je].min+1,Me=Xe[Le][je-1].min+1,Ze=Xe[Le-1][je-1].min+Ye;Xe[Le][je]=he(at,Me,Ze)}}return Xe},lt=function(Se,xe){var rt=Pe(Se,xe),Je=Se.length,dt=xe.length,Bt=[],Ye=1,Xe=1;if(rt[Je][dt].min!==Je){for(var Le=1;Le<=Je;Le++){var je=rt[Le][Le].min;Xe=Le;for(var at=Ye;at<=dt;at++)rt[Le][at].min<je&&(je=rt[Le][at].min,Xe=at);Ye=Xe,rt[Le][Ye].type&&Bt.push({index:Le-1,type:rt[Le][Ye].type})}for(var Le=Bt.length-1;Le>=0;Le--)Ye=Bt[Le].index,Bt[Le].type==="add"?Se.splice(Ye,0,[].concat(Se[Ye])):Se.splice(Ye,1)}Je=Se.length;var Me=dt-Je;if(Je<dt)for(var Le=0;Le<Me;Le++)Se[Je-1][0]==="z"||Se[Je-1][0]==="Z"?Se.splice(Je-2,0,Se[Je-2]):Se.push(Se[Je-1]),Je+=1;return Se};function He(Se,xe,rt){for(var Je=[].concat(Se),dt,Bt=1/(rt+1),Ye=Ue(xe)[0],Xe=1;Xe<=rt;Xe++)Bt*=Xe,dt=Math.floor(Se.length*Bt),dt===0?Je.unshift([Ye[0]*Bt+Se[dt][0]*(1-Bt),Ye[1]*Bt+Se[dt][1]*(1-Bt)]):Je.splice(dt,0,[Ye[0]*Bt+Se[dt][0]*(1-Bt),Ye[1]*Bt+Se[dt][1]*(1-Bt)]);return Je}function Ue(Se){var xe=[];switch(Se[0]){case"M":xe.push([Se[1],Se[2]]);break;case"L":xe.push([Se[1],Se[2]]);break;case"A":xe.push([Se[6],Se[7]]);break;case"Q":xe.push([Se[3],Se[4]]),xe.push([Se[1],Se[2]]);break;case"T":xe.push([Se[1],Se[2]]);break;case"C":xe.push([Se[5],Se[6]]),xe.push([Se[1],Se[2]]),xe.push([Se[3],Se[4]]);break;case"S":xe.push([Se[3],Se[4]]),xe.push([Se[1],Se[2]]);break;case"H":xe.push([Se[1],Se[1]]);break;case"V":xe.push([Se[1],Se[1]]);break;default:}return xe}var Qe=function(Se,xe){if(Se.length<=1)return Se;for(var rt,Je=0;Je<xe.length;Je++)if(Se[Je][0]!==xe[Je][0])switch(rt=Ue(Se[Je]),xe[Je][0]){case"M":Se[Je]=["M"].concat(rt[0]);break;case"L":Se[Je]=["L"].concat(rt[0]);break;case"A":Se[Je]=[].concat(xe[Je]),Se[Je][6]=rt[0][0],Se[Je][7]=rt[0][1];break;case"Q":if(rt.length<2)if(Je>0)rt=He(rt,Se[Je-1],1);else{Se[Je]=xe[Je];break}Se[Je]=["Q"].concat(rt.reduce(function(dt,Bt){return dt.concat(Bt)},[]));break;case"T":Se[Je]=["T"].concat(rt[0]);break;case"C":if(rt.length<3)if(Je>0)rt=He(rt,Se[Je-1],2);else{Se[Je]=xe[Je];break}Se[Je]=["C"].concat(rt.reduce(function(dt,Bt){return dt.concat(Bt)},[]));break;case"S":if(rt.length<2)if(Je>0)rt=He(rt,Se[Je-1],1);else{Se[Je]=xe[Je];break}Se[Je]=["S"].concat(rt.reduce(function(dt,Bt){return dt.concat(Bt)},[]));break;default:Se[Je]=xe[Je]}return Se}},8723:function(vt,N,k){"use strict";k.d(N,{$O:function(){return ee},FE:function(){return w},mY:function(){return j}});var H=k(77341),W=k(67052);function w(Y,re,Q){var ye=1;if((0,H.HD)(Y)&&(ye=Y.split(`
`).length),ye>1){var se=X(re,Q);return re*ye+se*(ye-1)}return re}function X(Y,re){return re?re-Y:Y*.14}function j(Y,re){var Q=(0,W.L)(),ye=0;if((0,H.kK)(Y)||Y==="")return ye;if(Q.save(),Q.font=re,(0,H.HD)(Y)&&Y.includes(`
`)){var se=Y.split(`
`);(0,H.S6)(se,function(ne){var $=Q.measureText(ne).width;ye<$&&(ye=$)})}else ye=Q.measureText(Y).width;return Q.restore(),ye}function ee(Y){var re=Y.fontSize,Q=Y.fontFamily,ye=Y.fontWeight,se=Y.fontStyle,ne=Y.fontVariant;return[se,ne,ye,re+"px",Q].join(" ").trim()}},77341:function(vt,N,k){"use strict";k.d(N,{As:function(){return W},CD:function(){return H.CD},HD:function(){return H.HD},Kn:function(){return H.Kn},S6:function(){return H.S6},UY:function(){return X},jC:function(){return H.jC},jU:function(){return w},kK:function(){return H.UM},mf:function(){return H.mf},pP:function(){return j}});var H=k(21030);function W(ee,Y){var re=ee.indexOf(Y);re!==-1&&ee.splice(re,1)}var w=typeof window!="undefined"&&typeof window.document!="undefined";function X(ee,Y){if(ee.isCanvas())return!0;for(var re=Y.getParent(),Q=!1;re;){if(re===ee){Q=!0;break}re=re.getParent()}return Q}function j(ee){return ee.cfg.visible&&ee.cfg.capture}},90857:function(vt){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function H(){}Object.create&&(H.prototype=Object.create(null),new H().__proto__||(k=!1));function W(ee,Y,re){this.fn=ee,this.context=Y,this.once=re||!1}function w(ee,Y,re,Q,ye){if(typeof re!="function")throw new TypeError("The listener must be a function");var se=new W(re,Q||ee,ye),ne=k?k+Y:Y;return ee._events[ne]?ee._events[ne].fn?ee._events[ne]=[ee._events[ne],se]:ee._events[ne].push(se):(ee._events[ne]=se,ee._eventsCount++),ee}function X(ee,Y){--ee._eventsCount===0?ee._events=new H:delete ee._events[Y]}function j(){this._events=new H,this._eventsCount=0}j.prototype.eventNames=function(){var Y=[],re,Q;if(this._eventsCount===0)return Y;for(Q in re=this._events)N.call(re,Q)&&Y.push(k?Q.slice(1):Q);return Object.getOwnPropertySymbols?Y.concat(Object.getOwnPropertySymbols(re)):Y},j.prototype.listeners=function(Y){var re=k?k+Y:Y,Q=this._events[re];if(!Q)return[];if(Q.fn)return[Q.fn];for(var ye=0,se=Q.length,ne=new Array(se);ye<se;ye++)ne[ye]=Q[ye].fn;return ne},j.prototype.listenerCount=function(Y){var re=k?k+Y:Y,Q=this._events[re];return Q?Q.fn?1:Q.length:0},j.prototype.emit=function(Y,re,Q,ye,se,ne){var $=k?k+Y:Y;if(!this._events[$])return!1;var A=this._events[$],b=arguments.length,te,le;if(A.fn){switch(A.once&&this.removeListener(Y,A.fn,void 0,!0),b){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,re),!0;case 3:return A.fn.call(A.context,re,Q),!0;case 4:return A.fn.call(A.context,re,Q,ye),!0;case 5:return A.fn.call(A.context,re,Q,ye,se),!0;case 6:return A.fn.call(A.context,re,Q,ye,se,ne),!0}for(le=1,te=new Array(b-1);le<b;le++)te[le-1]=arguments[le];A.fn.apply(A.context,te)}else{var Ae=A.length,De;for(le=0;le<Ae;le++)switch(A[le].once&&this.removeListener(Y,A[le].fn,void 0,!0),b){case 1:A[le].fn.call(A[le].context);break;case 2:A[le].fn.call(A[le].context,re);break;case 3:A[le].fn.call(A[le].context,re,Q);break;case 4:A[le].fn.call(A[le].context,re,Q,ye);break;default:if(!te)for(De=1,te=new Array(b-1);De<b;De++)te[De-1]=arguments[De];A[le].fn.apply(A[le].context,te)}}return!0},j.prototype.on=function(Y,re,Q){return w(this,Y,re,Q,!1)},j.prototype.once=function(Y,re,Q){return w(this,Y,re,Q,!0)},j.prototype.removeListener=function(Y,re,Q,ye){var se=k?k+Y:Y;if(!this._events[se])return this;if(!re)return X(this,se),this;var ne=this._events[se];if(ne.fn)ne.fn===re&&(!ye||ne.once)&&(!Q||ne.context===Q)&&X(this,se);else{for(var $=0,A=[],b=ne.length;$<b;$++)(ne[$].fn!==re||ye&&!ne[$].once||Q&&ne[$].context!==Q)&&A.push(ne[$]);A.length?this._events[se]=A.length===1?A[0]:A:X(this,se)}return this},j.prototype.removeAllListeners=function(Y){var re;return Y?(re=k?k+Y:Y,this._events[re]&&X(this,re)):(this._events=new H,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,vt.exports=j},32793:function(vt,N,k){"use strict";k.d(N,{wN:function(){return He},Ll:function(){return we},x1:function(){return Q},aH:function(){return Je},lD:function(){return Ae},Zr:function(){return H}});var H={};k.r(H),k.d(H,{distance:function(){return w},getBBoxByArray:function(){return j},getBBoxRange:function(){return ee},isNumberEqual:function(){return X},piMod:function(){return Y}});var W=k(21030);function w(Ye,Xe,Le,je){var at=Ye-Le,Me=Xe-je;return Math.sqrt(at*at+Me*Me)}function X(Ye,Xe){return Math.abs(Ye-Xe)<.001}function j(Ye,Xe){var Le=(0,W.VV)(Ye),je=(0,W.VV)(Xe),at=(0,W.Fp)(Ye),Me=(0,W.Fp)(Xe);return{x:Le,y:je,width:at-Le,height:Me-je}}function ee(Ye,Xe,Le,je){return{minX:(0,W.VV)([Ye,Le]),maxX:(0,W.Fp)([Ye,Le]),minY:(0,W.VV)([Xe,je]),maxY:(0,W.Fp)([Xe,je])}}function Y(Ye){return(Ye+Math.PI*2)%(Math.PI*2)}var re=k(31437),Q={box:function(Ye,Xe,Le,je){return j([Ye,Le],[Xe,je])},length:function(Ye,Xe,Le,je){return w(Ye,Xe,Le,je)},pointAt:function(Ye,Xe,Le,je,at){return{x:(1-at)*Ye+at*Le,y:(1-at)*Xe+at*je}},pointDistance:function(Ye,Xe,Le,je,at,Me){var Ze=(Le-Ye)*(at-Ye)+(je-Xe)*(Me-Xe);if(Ze<0)return w(Ye,Xe,at,Me);var _t=(Le-Ye)*(Le-Ye)+(je-Xe)*(je-Xe);return Ze>_t?w(Le,je,at,Me):this.pointToLine(Ye,Xe,Le,je,at,Me)},pointToLine:function(Ye,Xe,Le,je,at,Me){var Ze=[Le-Ye,je-Xe];if(re.I6(Ze,[0,0]))return Math.sqrt((at-Ye)*(at-Ye)+(Me-Xe)*(Me-Xe));var _t=[-Ze[1],Ze[0]];re.Fv(_t,_t);var Mt=[at-Ye,Me-Xe];return Math.abs(re.AK(Mt,_t))},tangentAngle:function(Ye,Xe,Le,je){return Math.atan2(je-Xe,Le-Ye)}},ye=1e-4;function se(Ye,Xe,Le,je,at,Me){var Ze,_t=1/0,Mt=[Le,je],ir=20;Me&&Me>200&&(ir=Me/10);for(var Tr=1/ir,et=Tr/10,en=0;en<=ir;en++){var Xr=en*Tr,Sr=[at.apply(null,Ye.concat([Xr])),at.apply(null,Xe.concat([Xr]))],pt=w(Mt[0],Mt[1],Sr[0],Sr[1]);pt<_t&&(Ze=Xr,_t=pt)}if(Ze===0)return{x:Ye[0],y:Xe[0]};if(Ze===1){var Ut=Ye.length;return{x:Ye[Ut-1],y:Xe[Ut-1]}}_t=1/0;for(var en=0;en<32&&!(et<ye);en++){var Gt=Ze-et,Tt=Ze+et,Sr=[at.apply(null,Ye.concat([Gt])),at.apply(null,Xe.concat([Gt]))],pt=w(Mt[0],Mt[1],Sr[0],Sr[1]);if(Gt>=0&&pt<_t)Ze=Gt,_t=pt;else{var qt=[at.apply(null,Ye.concat([Tt])),at.apply(null,Xe.concat([Tt]))],fr=w(Mt[0],Mt[1],qt[0],qt[1]);Tt<=1&&fr<_t?(Ze=Tt,_t=fr):et*=.5}}return{x:at.apply(null,Ye.concat([Ze])),y:at.apply(null,Xe.concat([Ze]))}}function ne(Ye,Xe){for(var Le=0,je=Ye.length,at=0;at<je;at++){var Me=Ye[at],Ze=Xe[at],_t=Ye[(at+1)%je],Mt=Xe[(at+1)%je];Le+=w(Me,Ze,_t,Mt)}return Le/2}function $(Ye,Xe,Le,je){var at=1-je;return at*at*Ye+2*je*at*Xe+je*je*Le}function A(Ye,Xe,Le){var je=Ye+Le-2*Xe;if(X(je,0))return[.5];var at=(Ye-Xe)/je;return at<=1&&at>=0?[at]:[]}function b(Ye,Xe,Le,je){return 2*(1-je)*(Xe-Ye)+2*je*(Le-Xe)}function te(Ye,Xe,Le,je,at,Me,Ze){var _t=$(Ye,Le,at,Ze),Mt=$(Xe,je,Me,Ze),ir=Q.pointAt(Ye,Xe,Le,je,Ze),Tr=Q.pointAt(Le,je,at,Me,Ze);return[[Ye,Xe,ir.x,ir.y,_t,Mt],[_t,Mt,Tr.x,Tr.y,at,Me]]}function le(Ye,Xe,Le,je,at,Me,Ze){if(Ze===0)return(w(Ye,Xe,Le,je)+w(Le,je,at,Me)+w(Ye,Xe,at,Me))/2;var _t=te(Ye,Xe,Le,je,at,Me,.5),Mt=_t[0],ir=_t[1];return Mt.push(Ze-1),ir.push(Ze-1),le.apply(null,Mt)+le.apply(null,ir)}var Ae={box:function(Ye,Xe,Le,je,at,Me){var Ze=A(Ye,Le,at)[0],_t=A(Xe,je,Me)[0],Mt=[Ye,at],ir=[Xe,Me];return Ze!==void 0&&Mt.push($(Ye,Le,at,Ze)),_t!==void 0&&ir.push($(Xe,je,Me,_t)),j(Mt,ir)},length:function(Ye,Xe,Le,je,at,Me){return le(Ye,Xe,Le,je,at,Me,3)},nearestPoint:function(Ye,Xe,Le,je,at,Me,Ze,_t){return se([Ye,Le,at],[Xe,je,Me],Ze,_t,$)},pointDistance:function(Ye,Xe,Le,je,at,Me,Ze,_t){var Mt=this.nearestPoint(Ye,Xe,Le,je,at,Me,Ze,_t);return w(Mt.x,Mt.y,Ze,_t)},interpolationAt:$,pointAt:function(Ye,Xe,Le,je,at,Me,Ze){return{x:$(Ye,Le,at,Ze),y:$(Xe,je,Me,Ze)}},divide:function(Ye,Xe,Le,je,at,Me,Ze){return te(Ye,Xe,Le,je,at,Me,Ze)},tangentAngle:function(Ye,Xe,Le,je,at,Me,Ze){var _t=b(Ye,Le,at,Ze),Mt=b(Xe,je,Me,Ze),ir=Math.atan2(Mt,_t);return Y(ir)}};function De(Ye,Xe,Le,je,at){var Me=1-at;return Me*Me*Me*Ye+3*Xe*at*Me*Me+3*Le*at*at*Me+je*at*at*at}function Ne(Ye,Xe,Le,je,at){var Me=1-at;return 3*(Me*Me*(Xe-Ye)+2*Me*at*(Le-Xe)+at*at*(je-Le))}function Te(Ye,Xe,Le,je){var at=-3*Ye+9*Xe-9*Le+3*je,Me=6*Ye-12*Xe+6*Le,Ze=3*Xe-3*Ye,_t=[],Mt,ir,Tr;if(X(at,0))X(Me,0)||(Mt=-Ze/Me,Mt>=0&&Mt<=1&&_t.push(Mt));else{var et=Me*Me-4*at*Ze;X(et,0)?_t.push(-Me/(2*at)):et>0&&(Tr=Math.sqrt(et),Mt=(-Me+Tr)/(2*at),ir=(-Me-Tr)/(2*at),Mt>=0&&Mt<=1&&_t.push(Mt),ir>=0&&ir<=1&&_t.push(ir))}return _t}function We(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){var ir=De(Ye,Le,at,Ze,Mt),Tr=De(Xe,je,Me,_t,Mt),et=Q.pointAt(Ye,Xe,Le,je,Mt),en=Q.pointAt(Le,je,at,Me,Mt),Xr=Q.pointAt(at,Me,Ze,_t,Mt),Sr=Q.pointAt(et.x,et.y,en.x,en.y,Mt),pt=Q.pointAt(en.x,en.y,Xr.x,Xr.y,Mt);return[[Ye,Xe,et.x,et.y,Sr.x,Sr.y,ir,Tr],[ir,Tr,pt.x,pt.y,Xr.x,Xr.y,Ze,_t]]}function _e(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){if(Mt===0)return ne([Ye,Le,at,Ze],[Xe,je,Me,_t]);var ir=We(Ye,Xe,Le,je,at,Me,Ze,_t,.5),Tr=ir[0],et=ir[1];return Tr.push(Mt-1),et.push(Mt-1),_e.apply(null,Tr)+_e.apply(null,et)}var we={extrema:Te,box:function(Ye,Xe,Le,je,at,Me,Ze,_t){for(var Mt=[Ye,Ze],ir=[Xe,_t],Tr=Te(Ye,Le,at,Ze),et=Te(Xe,je,Me,_t),en=0;en<Tr.length;en++)Mt.push(De(Ye,Le,at,Ze,Tr[en]));for(var en=0;en<et.length;en++)ir.push(De(Xe,je,Me,_t,et[en]));return j(Mt,ir)},length:function(Ye,Xe,Le,je,at,Me,Ze,_t){return _e(Ye,Xe,Le,je,at,Me,Ze,_t,3)},nearestPoint:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt,ir,Tr){return se([Ye,Le,at,Ze],[Xe,je,Me,_t],Mt,ir,De,Tr)},pointDistance:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt,ir,Tr){var et=this.nearestPoint(Ye,Xe,Le,je,at,Me,Ze,_t,Mt,ir,Tr);return w(et.x,et.y,Mt,ir)},interpolationAt:De,pointAt:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){return{x:De(Ye,Le,at,Ze,Mt),y:De(Xe,je,Me,_t,Mt)}},divide:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){return We(Ye,Xe,Le,je,at,Me,Ze,_t,Mt)},tangentAngle:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){var ir=Ne(Ye,Le,at,Ze,Mt),Tr=Ne(Xe,je,Me,_t,Mt);return Y(Math.atan2(Tr,ir))}};function Re(Ye,Xe){var Le=Math.abs(Ye);return Xe>0?Le:Le*-1}var ze={box:function(Ye,Xe,Le,je){return{x:Ye-Le,y:Xe-je,width:Le*2,height:je*2}},length:function(Ye,Xe,Le,je){return Math.PI*(3*(Le+je)-Math.sqrt((3*Le+je)*(Le+3*je)))},nearestPoint:function(Ye,Xe,Le,je,at,Me){var Ze=Le,_t=je;if(Ze===0||_t===0)return{x:Ye,y:Xe};for(var Mt=at-Ye,ir=Me-Xe,Tr=Math.abs(Mt),et=Math.abs(ir),en=Ze*Ze,Xr=_t*_t,Sr=Math.PI/4,pt,Ut,Gt=0;Gt<4;Gt++){pt=Ze*Math.cos(Sr),Ut=_t*Math.sin(Sr);var Tt=(en-Xr)*Math.pow(Math.cos(Sr),3)/Ze,qt=(Xr-en)*Math.pow(Math.sin(Sr),3)/_t,fr=pt-Tt,hr=Ut-qt,Er=Tr-Tt,Ir=et-qt,ue=Math.hypot(hr,fr),G=Math.hypot(Ir,Er),oe=ue*Math.asin((fr*Ir-hr*Er)/(ue*G)),Ie=oe/Math.sqrt(en+Xr-pt*pt-Ut*Ut);Sr+=Ie,Sr=Math.min(Math.PI/2,Math.max(0,Sr))}return{x:Ye+Re(pt,Mt),y:Xe+Re(Ut,ir)}},pointDistance:function(Ye,Xe,Le,je,at,Me){var Ze=this.nearestPoint(Ye,Xe,Le,je,at,Me);return w(Ze.x,Ze.y,at,Me)},pointAt:function(Ye,Xe,Le,je,at){var Me=2*Math.PI*at;return{x:Ye+Le*Math.cos(Me),y:Xe+je*Math.sin(Me)}},tangentAngle:function(Ye,Xe,Le,je,at){var Me=2*Math.PI*at,Ze=Math.atan2(je*Math.cos(Me),-Le*Math.sin(Me));return Y(Ze)}};function Ge(Ye,Xe,Le,je,at,Me,Ze,_t){return-1*Le*Math.cos(at)*Math.sin(_t)-je*Math.sin(at)*Math.cos(_t)}function yt(Ye,Xe,Le,je,at,Me,Ze,_t){return-1*Le*Math.sin(at)*Math.sin(_t)+je*Math.cos(at)*Math.cos(_t)}function ke(Ye,Xe,Le){return Math.atan(-Xe/Ye*Math.tan(Le))}function tt(Ye,Xe,Le){return Math.atan(Xe/(Ye*Math.tan(Le)))}function ae(Ye,Xe,Le,je,at,Me){return Le*Math.cos(at)*Math.cos(Me)-je*Math.sin(at)*Math.sin(Me)+Ye}function Ke(Ye,Xe,Le,je,at,Me){return Le*Math.sin(at)*Math.cos(Me)+je*Math.cos(at)*Math.sin(Me)+Xe}function he(Ye,Xe,Le,je){var at=Math.atan2(je*Ye,Le*Xe);return(at+Math.PI*2)%(Math.PI*2)}function Pe(Ye,Xe,Le){return{x:Ye*Math.cos(Le),y:Xe*Math.sin(Le)}}function lt(Ye,Xe,Le){var je=Math.cos(Le),at=Math.sin(Le);return[Ye*je-Xe*at,Ye*at+Xe*je]}var He={box:function(Ye,Xe,Le,je,at,Me,Ze){for(var _t=ke(Le,je,at),Mt=1/0,ir=-1/0,Tr=[Me,Ze],et=-Math.PI*2;et<=Math.PI*2;et+=Math.PI){var en=_t+et;Me<Ze?Me<en&&en<Ze&&Tr.push(en):Ze<en&&en<Me&&Tr.push(en)}for(var et=0;et<Tr.length;et++){var Xr=ae(Ye,Xe,Le,je,at,Tr[et]);Xr<Mt&&(Mt=Xr),Xr>ir&&(ir=Xr)}for(var Sr=tt(Le,je,at),pt=1/0,Ut=-1/0,Gt=[Me,Ze],et=-Math.PI*2;et<=Math.PI*2;et+=Math.PI){var Tt=Sr+et;Me<Ze?Me<Tt&&Tt<Ze&&Gt.push(Tt):Ze<Tt&&Tt<Me&&Gt.push(Tt)}for(var et=0;et<Gt.length;et++){var qt=Ke(Ye,Xe,Le,je,at,Gt[et]);qt<pt&&(pt=qt),qt>Ut&&(Ut=qt)}return{x:Mt,y:pt,width:ir-Mt,height:Ut-pt}},length:function(Ye,Xe,Le,je,at,Me,Ze){},nearestPoint:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){var ir=lt(_t-Ye,Mt-Xe,-at),Tr=ir[0],et=ir[1],en=ze.nearestPoint(0,0,Le,je,Tr,et),Xr=he(Le,je,en.x,en.y);Xr<Me?en=Pe(Le,je,Me):Xr>Ze&&(en=Pe(Le,je,Ze));var Sr=lt(en.x,en.y,at);return{x:Sr[0]+Ye,y:Sr[1]+Xe}},pointDistance:function(Ye,Xe,Le,je,at,Me,Ze,_t,Mt){var ir=this.nearestPoint(Ye,Xe,Le,je,_t,Mt);return w(ir.x,ir.y,_t,Mt)},pointAt:function(Ye,Xe,Le,je,at,Me,Ze,_t){var Mt=(Ze-Me)*_t+Me;return{x:ae(Ye,Xe,Le,je,at,Mt),y:Ke(Ye,Xe,Le,je,at,Mt)}},tangentAngle:function(Ye,Xe,Le,je,at,Me,Ze,_t){var Mt=(Ze-Me)*_t+Me,ir=Ge(Ye,Xe,Le,je,at,Me,Ze,Mt),Tr=yt(Ye,Xe,Le,je,at,Me,Ze,Mt);return Y(Math.atan2(Tr,ir))}};function Ue(Ye){for(var Xe=0,Le=[],je=0;je<Ye.length-1;je++){var at=Ye[je],Me=Ye[je+1],Ze=w(at[0],at[1],Me[0],Me[1]),_t={from:at,to:Me,length:Ze};Le.push(_t),Xe+=Ze}return{segments:Le,totalLength:Xe}}function Qe(Ye){if(Ye.length<2)return 0;for(var Xe=0,Le=0;Le<Ye.length-1;Le++){var je=Ye[Le],at=Ye[Le+1];Xe+=w(je[0],je[1],at[0],at[1])}return Xe}function Se(Ye,Xe){if(Xe>1||Xe<0||Ye.length<2)return null;var Le=Ue(Ye),je=Le.segments,at=Le.totalLength;if(at===0)return{x:Ye[0][0],y:Ye[0][1]};for(var Me=0,Ze=null,_t=0;_t<je.length;_t++){var Mt=je[_t],ir=Mt.from,Tr=Mt.to,et=Mt.length/at;if(Xe>=Me&&Xe<=Me+et){var en=(Xe-Me)/et;Ze=Q.pointAt(ir[0],ir[1],Tr[0],Tr[1],en);break}Me+=et}return Ze}function xe(Ye,Xe){if(Xe>1||Xe<0||Ye.length<2)return 0;for(var Le=Ue(Ye),je=Le.segments,at=Le.totalLength,Me=0,Ze=0,_t=0;_t<je.length;_t++){var Mt=je[_t],ir=Mt.from,Tr=Mt.to,et=Mt.length/at;if(Xe>=Me&&Xe<=Me+et){Ze=Math.atan2(Tr[1]-ir[1],Tr[0]-ir[0]);break}Me+=et}return Ze}function rt(Ye,Xe,Le){for(var je=1/0,at=0;at<Ye.length-1;at++){var Me=Ye[at],Ze=Ye[at+1],_t=Q.pointDistance(Me[0],Me[1],Ze[0],Ze[1],Xe,Le);_t<je&&(je=_t)}return je}var Je={box:function(Ye){for(var Xe=[],Le=[],je=0;je<Ye.length;je++){var at=Ye[je];Xe.push(at[0]),Le.push(at[1])}return j(Xe,Le)},length:function(Ye){return Qe(Ye)},pointAt:function(Ye,Xe){return Se(Ye,Xe)},pointDistance:function(Ye,Xe,Le){return rt(Ye,Xe,Le)},tangentAngle:function(Ye,Xe){return xe(Ye,Xe)}};function dt(Ye){var Xe=Ye.slice(0);return Ye.length&&Xe.push(Ye[0]),Xe}var Bt={box:function(Ye){return Je.box(Ye)},length:function(Ye){return Qe(dt(Ye))},pointAt:function(Ye,Xe){return Se(dt(Ye),Xe)},pointDistance:function(Ye,Xe,Le){return rt(dt(Ye),Xe,Le)},tangentAngle:function(Ye,Xe){return xe(dt(Ye),Xe)}}},19372:function(vt,N,k){"use strict";k.d(N,{$Q:function(){return LC},sg:function(){return FC},x1:function(){return iT},by:function(){return bk}});var H={};k.r(H),k.d(H,{assign:function(){return Ko},default:function(){return Ms},defaultI18n:function(){return Yn},format:function(){return cc},parse:function(){return bo},setGlobalDateI18n:function(){return ho},setGlobalDateMasks:function(){return Rl}});var W={};k.r(W),k.d(W,{Arc:function(){return bp},DataMarker:function(){return Jt},DataRegion:function(){return Es},Html:function(){return ut},Image:function(){return Ve},Line:function(){return Lc},Region:function(){return pn},RegionFilter:function(){return Nf},Shape:function(){return Ep},Text:function(){return zh}});var w={};k.r(w),k.d(w,{ellipsisHead:function(){return dr},ellipsisMiddle:function(){return cr},ellipsisTail:function(){return Pr},getDefault:function(){return _r}});var X={};k.r(X),k.d(X,{equidistance:function(){return Ri},equidistanceWithReverseBoth:function(){return ea},getDefault:function(){return An},reserveBoth:function(){return li},reserveFirst:function(){return Vn},reserveLast:function(){return ui}});var j={};k.r(j),k.d(j,{fixedAngle:function(){return Li},getDefault:function(){return uo},unfixedAngle:function(){return Oa}});var ee={};k.r(ee),k.d(ee,{autoEllipsis:function(){return w},autoHide:function(){return X},autoRotate:function(){return j}});var Y={};k.r(Y),k.d(Y,{Base:function(){return ga},Circle:function(){return zu},Html:function(){return oc},Line:function(){return Vs}});var re={};k.r(re),k.d(re,{CONTAINER_CLASS:function(){return Hl},CROSSHAIR_X:function(){return vg},CROSSHAIR_Y:function(){return wv},LIST_CLASS:function(){return Wl},LIST_ITEM_CLASS:function(){return Zh},MARKER_CLASS:function(){return wp},NAME_CLASS:function(){return kl},TITLE_CLASS:function(){return Pl},VALUE_CLASS:function(){return tf}});var Q={};k.r(Q),k.d(Q,{Base:function(){return Zc},Circle:function(){return U0},Ellipse:function(){return Z0},Image:function(){return xd},Line:function(){return j0},Marker:function(){return A_},Path:function(){return jx},Polygon:function(){return QR},Polyline:function(){return JR},Rect:function(){return t3},Text:function(){return n3}});var ye={};k.r(ye),k.d(ye,{Canvas:function(){return KE},Group:function(){return Dm},Shape:function(){return Q},getArcParams:function(){return pd},version:function(){return i3}});var se={};k.r(se),k.d(se,{Base:function(){return Qh},Circle:function(){return JE},Dom:function(){return q0},Ellipse:function(){return u3},Image:function(){return t2},Line:function(){return f3},Marker:function(){return k_},Path:function(){return K0},Polygon:function(){return rb},Polyline:function(){return nb},Rect:function(){return h3},Text:function(){return v3}});var ne={};k.r(ne),k.d(ne,{Canvas:function(){return b2},Group:function(){return bd},Shape:function(){return se},version:function(){return S2}});var $={};k.r($),k.d($,{cluster:function(){return $L},hierarchy:function(){return im},pack:function(){return L1},packEnclose:function(){return YT},packSiblings:function(){return tA},partition:function(){return GA},stratify:function(){return KL},tree:function(){return rF},treemap:function(){return QA},treemapBinary:function(){return nF},treemapDice:function(){return Xy},treemapResquarify:function(){return aF},treemapSlice:function(){return Y1},treemapSliceDice:function(){return iF},treemapSquarify:function(){return KA}});var A=k(97582),b=k(21030),te;(function(a){a.FORE="fore",a.MID="mid",a.BG="bg"})(te||(te={}));var le;(function(a){a.TOP="top",a.TOP_LEFT="top-left",a.TOP_RIGHT="top-right",a.RIGHT="right",a.RIGHT_TOP="right-top",a.RIGHT_BOTTOM="right-bottom",a.LEFT="left",a.LEFT_TOP="left-top",a.LEFT_BOTTOM="left-bottom",a.BOTTOM="bottom",a.BOTTOM_LEFT="bottom-left",a.BOTTOM_RIGHT="bottom-right",a.RADIUS="radius",a.CIRCLE="circle",a.NONE="none"})(le||(le={}));var Ae;(function(a){a.AXIS="axis",a.GRID="grid",a.LEGEND="legend",a.TOOLTIP="tooltip",a.ANNOTATION="annotation",a.SLIDER="slider",a.SCROLLBAR="scrollbar",a.OTHER="other"})(Ae||(Ae={}));var De={FORE:3,MID:2,BG:1},Ne;(function(a){a.BEFORE_RENDER="beforerender",a.AFTER_RENDER="afterrender",a.BEFORE_PAINT="beforepaint",a.AFTER_PAINT="afterpaint",a.BEFORE_CHANGE_DATA="beforechangedata",a.AFTER_CHANGE_DATA="afterchangedata",a.BEFORE_CLEAR="beforeclear",a.AFTER_CLEAR="afterclear",a.BEFORE_DESTROY="beforedestroy",a.BEFORE_CHANGE_SIZE="beforechangesize",a.AFTER_CHANGE_SIZE="afterchangesize"})(Ne||(Ne={}));var Te;(function(a){a.BEFORE_DRAW_ANIMATE="beforeanimate",a.AFTER_DRAW_ANIMATE="afteranimate",a.BEFORE_RENDER_LABEL="beforerenderlabel",a.AFTER_RENDER_LABEL="afterrenderlabel"})(Te||(Te={}));var We;(function(a){a.MOUSE_ENTER="plot:mouseenter",a.MOUSE_DOWN="plot:mousedown",a.MOUSE_MOVE="plot:mousemove",a.MOUSE_UP="plot:mouseup",a.MOUSE_LEAVE="plot:mouseleave",a.TOUCH_START="plot:touchstart",a.TOUCH_MOVE="plot:touchmove",a.TOUCH_END="plot:touchend",a.TOUCH_CANCEL="plot:touchcancel",a.CLICK="plot:click",a.DBLCLICK="plot:dblclick",a.CONTEXTMENU="plot:contextmenu",a.LEAVE="plot:leave",a.ENTER="plot:enter"})(We||(We={}));var _e;(function(a){a.ACTIVE="active",a.INACTIVE="inactive",a.SELECTED="selected",a.DEFAULT="default"})(_e||(_e={}));var we=["color","shape","size"],Re="_origin",ze=1,Ge=1,yt=.25,ke={};function tt(a){var i=ke[a];if(!i)throw new Error("G engine '".concat(a,"' is not exist, please register it at first."));return i}function ae(a,i){ke[a]=i}var Ke=k(6056),he=k(45442);function Pe(a){var i=getComputedStyle(a);return{width:(a.clientWidth||parseInt(i.width,10))-parseInt(i.paddingLeft,10)-parseInt(i.paddingRight,10),height:(a.clientHeight||parseInt(i.height,10))-parseInt(i.paddingTop,10)-parseInt(i.paddingBottom,10)}}function lt(a){return typeof a=="number"&&!isNaN(a)}function He(a,i,t,s){var l=t,f=s;if(i){var d=Pe(a);l=d.width?d.width:l,f=d.height?d.height:f}return{width:Math.max(lt(l)?l:ze,ze),height:Math.max(lt(f)?f:Ge,Ge)}}function Ue(a){var i=a.parentNode;i&&i.removeChild(a)}var Qe=k(90494),Se=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this)||this;s.destroyed=!1;var l=t.visible,f=l===void 0?!0:l;return s.visible=f,s}return i.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},i.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},i.prototype.destroy=function(){this.off(),this.destroyed=!0},i.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},i}(Qe.Z),xe=Se,rt=k(98190),Je=0,dt=1/2,Bt=1/2,Ye=.05,Xe=function(){function a(i){var t=i.xField,s=i.yField,l=i.adjustNames,f=l===void 0?["x","y"]:l,d=i.dimValuesMap;this.adjustNames=f,this.xField=t,this.yField=s,this.dimValuesMap=d}return a.prototype.isAdjust=function(i){return this.adjustNames.indexOf(i)>=0},a.prototype.getAdjustRange=function(i,t,s){var l=this.yField,f=s.indexOf(t),d=s.length,m,x;return!l&&this.isAdjust("y")?(m=0,x=1):d>1?(m=s[f===0?0:f-1],x=s[f===d-1?d-1:f+1],f!==0?m+=(t-m)/2:m-=(x-t)/2,f!==d-1?x-=(x-t)/2:x+=(t-s[d-2])/2):(m=t===0?0:t-.5,x=t===0?1:t+.5),{pre:m,next:x}},a.prototype.adjustData=function(i,t){var s=this,l=this.getDimValues(t);b.S6(i,function(f,d){b.S6(l,function(m,x){s.adjustDim(x,m,f,d)})})},a.prototype.groupData=function(i,t){return b.S6(i,function(s){s[t]===void 0&&(s[t]=Je)}),b.vM(i,t)},a.prototype.adjustDim=function(i,t,s,l){},a.prototype.getDimValues=function(i){var t=this,s=t.xField,l=t.yField,f=b.f0({},this.dimValuesMap),d=[];if(s&&this.isAdjust("x")&&d.push(s),l&&this.isAdjust("y")&&d.push(l),d.forEach(function(x){f&&f[x]||(f[x]=b.I(i,x).sort(function(T,O){return T-O}))}),!l&&this.isAdjust("y")){var m="y";f[m]=[Je,1]}return f},a}(),Le=Xe,je={},at=function(a){return je[a.toLowerCase()]},Me=function(a,i){if(at(a))throw new Error("Adjust type '"+a+"' existed.");je[a.toLowerCase()]=i},Ze=k(52677),_t=k.n(Ze);var Mt=function(i,t){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])},Mt(i,t)};function ir(a,i){Mt(a,i);function t(){this.constructor=a}a.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Tr=function(){return Tr=Object.assign||function(t){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(t[d]=s[d])}return t},Tr.apply(this,arguments)};function et(a,i){var t={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(t[s[l]]=a[s[l]]);return t}function en(a,i,t,s){var l=arguments.length,f=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,t):s,d;if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(a,i,t,s);else for(var m=a.length-1;m>=0;m--)(d=a[m])&&(f=(l<3?d(f):l>3?d(i,t,f):d(i,t))||f);return l>3&&f&&Object.defineProperty(i,t,f),f}function Xr(a,i){return function(t,s){i(t,s,a)}}function Sr(a,i){if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,i)}function pt(a,i,t,s){function l(f){return f instanceof t?f:new t(function(d){d(f)})}return new(t||(t=Promise))(function(f,d){function m(O){try{T(s.next(O))}catch(D){d(D)}}function x(O){try{T(s.throw(O))}catch(D){d(D)}}function T(O){O.done?f(O.value):l(O.value).then(m,x)}T((s=s.apply(a,i||[])).next())})}function Ut(a,i){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,l,f,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(T){return function(O){return x([T,O])}}function x(T){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(f=T[0]&2?l.return:T[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,T[1])).done)return f;switch(l=0,f&&(T=[T[0]&2,f.value]),T[0]){case 0:case 1:f=T;break;case 4:return t.label++,{value:T[1],done:!1};case 5:t.label++,l=T[1],T=[0];continue;case 7:T=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(T[0]===6||T[0]===2)){t=0;continue}if(T[0]===3&&(!f||T[1]>f[0]&&T[1]<f[3])){t.label=T[1];break}if(T[0]===6&&t.label<f[1]){t.label=f[1],f=T;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(T);break}f[2]&&t.ops.pop(),t.trys.pop();continue}T=i.call(a,t)}catch(O){T=[6,O],l=0}finally{s=f=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function Gt(a,i,t,s){s===void 0&&(s=t),a[s]=i[t]}function Tt(a,i){for(var t in a)t!=="default"&&!i.hasOwnProperty(t)&&(i[t]=a[t])}function qt(a){var i=typeof Symbol=="function"&&Symbol.iterator,t=i&&a[i],s=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function fr(a,i){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var s=t.call(a),l,f=[],d;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)f.push(l.value)}catch(m){d={error:m}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return f}function hr(){for(var a=[],i=0;i<arguments.length;i++)a=a.concat(fr(arguments[i]));return a}function Er(){for(var a=0,i=0,t=arguments.length;i<t;i++)a+=arguments[i].length;for(var s=Array(a),l=0,i=0;i<t;i++)for(var f=arguments[i],d=0,m=f.length;d<m;d++,l++)s[l]=f[d];return s}function Ir(a){return this instanceof Ir?(this.v=a,this):new Ir(a)}function ue(a,i,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(a,i||[]),l,f=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(B){s[B]&&(l[B]=function(U){return new Promise(function(J,pe){f.push([B,U,J,pe])>1||m(B,U)})})}function m(B,U){try{x(s[B](U))}catch(J){D(f[0][3],J)}}function x(B){B.value instanceof Ir?Promise.resolve(B.value.v).then(T,O):D(f[0][2],B)}function T(B){m("next",B)}function O(B){m("throw",B)}function D(B,U){B(U),f.shift(),f.length&&m(f[0][0],f[0][1])}}function G(a){var i,t;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,f){i[l]=a[l]?function(d){return(t=!t)?{value:Ir(a[l](d)),done:l==="return"}:f?f(d):d}:f}}function oe(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=a[Symbol.asyncIterator],t;return i?i.call(a):(a=typeof qt=="function"?qt(a):a[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(f){t[f]=a[f]&&function(d){return new Promise(function(m,x){d=a[f](d),l(m,x,d.done,d.value)})}}function l(f,d,m,x){Promise.resolve(x).then(function(T){f({value:T,done:m})},d)}}function Ie(a,i){return Object.defineProperty?Object.defineProperty(a,"raw",{value:i}):a.raw=i,a}function qe(a){if(a&&a.__esModule)return a;var i={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(i[t]=a[t]);return i.default=a,i}function At(a){return a&&a.__esModule?a:{default:a}}function rr(a,i){if(!i.has(a))throw new TypeError("attempted to get private field on non-instance");return i.get(a)}function Zt(a,i,t){if(!i.has(a))throw new TypeError("attempted to set private field on non-instance");return i.set(a,t),t}var wt=function(a){ir(i,a);function i(t){var s=a.call(this,t)||this;s.cacheMap={},s.adjustDataArray=[],s.mergeData=[];var l=t.marginRatio,f=l===void 0?dt:l,d=t.dodgeRatio,m=d===void 0?Bt:d,x=t.dodgeBy,T=t.intervalPadding,O=t.dodgePadding,D=t.xDimensionLength,B=t.groupNum,U=t.defaultSize,J=t.maxColumnWidth,pe=t.minColumnWidth,Ee=t.columnWidthRatio,Ce=t.customOffset;return s.marginRatio=f,s.dodgeRatio=m,s.dodgeBy=x,s.intervalPadding=T,s.dodgePadding=O,s.xDimensionLegenth=D,s.groupNum=B,s.defaultSize=U,s.maxColumnWidth=J,s.minColumnWidth=pe,s.columnWidthRatio=Ee,s.customOffset=Ce,s}return i.prototype.process=function(t){var s=b.d9(t),l=b.xH(s),f=this.dodgeBy,d=f?b.ru(l,f):s;return this.cacheMap={},this.adjustDataArray=d,this.mergeData=l,this.adjustData(d,l),this.adjustDataArray=[],this.mergeData=[],s},i.prototype.adjustDim=function(t,s,l,f){var d=this,m=this.customOffset,x=this.getDistribution(t),T=this.groupData(l,t);return b.S6(T,function(O,D){var B;s.length===1?B={pre:s[0]-1,next:s[0]+1}:B=d.getAdjustRange(t,parseFloat(D),s),b.S6(O,function(U){var J=U[t],pe=x[J],Ee=pe.indexOf(f);if(b.UM(m))U[t]=d.getDodgeOffset(B,Ee,pe.length);else{var Ce=B.pre,st=B.next;U[t]=b.mf(m)?m(U,B):(Ce+st)/2+m}})}),[]},i.prototype.getDodgeOffset=function(t,s,l){var f=this,d=f.dodgeRatio,m=f.marginRatio,x=f.intervalPadding,T=f.dodgePadding,O=t.pre,D=t.next,B=D-O,U;if(!b.UM(x)&&b.UM(T)&&x>=0){var J=this.getIntervalOnlyOffset(l,s);U=O+J}else if(!b.UM(T)&&b.UM(x)&&T>=0){var J=this.getDodgeOnlyOffset(l,s);U=O+J}else if(!b.UM(x)&&!b.UM(T)&&x>=0&&T>=0){var J=this.getIntervalAndDodgeOffset(l,s);U=O+J}else{var pe=B*d/l,Ee=m*pe,J=1/2*(B-l*pe-(l-1)*Ee)+((s+1)*pe+s*Ee)-1/2*pe-1/2*B;U=(O+D)/2+J}return U},i.prototype.getIntervalOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.intervalPadding,m=l.xDimensionLegenth,x=l.groupNum,T=l.dodgeRatio,O=l.maxColumnWidth,D=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,J=(1-(x-1)*U)/x*T/(t-1),pe=((1-U*(x-1))/x-J*(t-1))/t;if(pe=b.UM(B)?pe:1/x/t*B,!b.UM(O)){var Ee=O/m;pe=Math.min(pe,Ee)}if(!b.UM(D)){var Ce=D/m;pe=Math.max(pe,Ce)}pe=f?f/m:pe,J=((1-(x-1)*U)/x-t*pe)/(t-1);var st=((1/2+s)*pe+s*J+1/2*U)*x-U/2;return st},i.prototype.getDodgeOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,T=l.marginRatio,O=l.maxColumnWidth,D=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,J=1*T/(x-1),pe=((1-J*(x-1))/x-U*(t-1))/t;if(pe=B?1/x/t*B:pe,!b.UM(O)){var Ee=O/m;pe=Math.min(pe,Ee)}if(!b.UM(D)){var Ce=D/m;pe=Math.max(pe,Ce)}pe=f?f/m:pe,J=(1-(pe*t+U*(t-1))*x)/(x-1);var st=((1/2+s)*pe+s*U+1/2*J)*x-J/2;return st},i.prototype.getIntervalAndDodgeOffset=function(t,s){var l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,T=f/m,O=d/m,D=((1-T*(x-1))/x-O*(t-1))/t,B=((1/2+s)*D+s*O+1/2*T)*x-T/2;return B},i.prototype.getDistribution=function(t){var s=this.adjustDataArray,l=this.cacheMap,f=l[t];return f||(f={},b.S6(s,function(d,m){var x=b.I(d,t);x.length||x.push(0),b.S6(x,function(T){f[T]||(f[T]=[]),f[T].push(m)})}),l[t]=f),f},i}(Le),Pt=wt;function ge(a,i){return(i-a)*Math.random()+a}var ve=function(a){ir(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.process=function(t){var s=b.d9(t),l=b.xH(s);return this.adjustData(s,l),s},i.prototype.adjustDim=function(t,s,l){var f=this,d=this.groupData(l,t);return b.S6(d,function(m,x){return f.adjustGroup(m,t,parseFloat(x),s)})},i.prototype.getAdjustOffset=function(t){var s=t.pre,l=t.next,f=(l-s)*Ye;return ge(s+f,l-f)},i.prototype.adjustGroup=function(t,s,l,f){var d=this,m=this.getAdjustRange(s,l,f);return b.S6(t,function(x){x[s]=d.getAdjustOffset(m)}),t},i}(Le),Fe=ve,nt=b.Ct,St=function(a){ir(i,a);function i(t){var s=a.call(this,t)||this,l=t.adjustNames,f=l===void 0?["y"]:l,d=t.height,m=d===void 0?NaN:d,x=t.size,T=x===void 0?10:x,O=t.reverseOrder,D=O===void 0?!1:O;return s.adjustNames=f,s.height=m,s.size=T,s.reverseOrder=D,s}return i.prototype.process=function(t){var s=this,l=s.yField,f=s.reverseOrder,d=l?this.processStack(t):this.processOneDimStack(t);return f?this.reverse(d):d},i.prototype.reverse=function(t){return t.slice(0).reverse()},i.prototype.processStack=function(t){var s=this,l=s.xField,f=s.yField,d=s.reverseOrder,m=d?this.reverse(t):t,x=new nt,T=new nt;return m.map(function(O){return O.map(function(D){var B,U=b.U2(D,l,0),J=b.U2(D,[f]),pe=U.toString();if(J=b.kJ(J)?J[1]:J,!b.UM(J)){var Ee=J>=0?x:T;Ee.has(pe)||Ee.set(pe,0);var Ce=Ee.get(pe),st=J+Ce;return Ee.set(pe,st),Tr(Tr({},D),(B={},B[f]=[Ce,st],B))}return D})})},i.prototype.processOneDimStack=function(t){var s=this,l=this,f=l.xField,d=l.height,m=l.reverseOrder,x="y",T=m?this.reverse(t):t,O=new nt;return T.map(function(D){return D.map(function(B){var U,J=s.size,pe=B[f],Ee=J*2/d;O.has(pe)||O.set(pe,Ee/2);var Ce=O.get(pe);return O.set(pe,Ce+Ee),Tr(Tr({},B),(U={},U[x]=Ce,U))})})},i}(Le),$t=St,vr=function(a){ir(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.process=function(t){var s=b.xH(t),l=this,f=l.xField,d=l.yField,m=this.getXValuesMaxMap(s),x=Math.max.apply(Math,Object.keys(m).map(function(T){return m[T]}));return b.UI(t,function(T){return b.UI(T,function(O){var D,B,U=O[d],J=O[f];if(b.kJ(U)){var pe=(x-m[J])/2;return Tr(Tr({},O),(D={},D[d]=b.UI(U,function(Ce){return pe+Ce}),D))}var Ee=(x-U)/2;return Tr(Tr({},O),(B={},B[d]=[Ee,U+Ee],B))})})},i.prototype.getXValuesMaxMap=function(t){var s=this,l=this,f=l.xField,d=l.yField,m=b.vM(t,function(x){return x[f]});return b.Q8(m,function(x){return s.getDimMaxValue(x,d)})},i.prototype.getDimMaxValue=function(t,s){var l=b.UI(t,function(d){return b.U2(d,s,[])}),f=b.xH(l);return Math.max.apply(Math,f)},i}(Le),Rt=vr;Me("Dodge",Pt),Me("Jitter",Fe),Me("Stack",$t),Me("Symmetric",Rt);var ct=function(a,i){return(0,b.HD)(i)?i:a.invert(a.scale(i))},It=function(){function a(i){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(i)}return a.prototype.mapping=function(){for(var i=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=t.map(function(f,d){return i._toOriginParam(f,i.scales[d])});return this.callback.apply(this,l)},a.prototype.getLinearValue=function(i){var t=this.values.length-1,s=Math.floor(t*i),l=t*i-s,f=this.values[s],d=s===t?f:this.values[s+1];return f+(d-f)*l},a.prototype.getNames=function(){for(var i=this.scales,t=this.names,s=Math.min(i.length,t.length),l=[],f=0;f<s;f+=1)l.push(t[f]);return l},a.prototype.getFields=function(){return this.scales.map(function(i){return i.field})},a.prototype.getScale=function(i){return this.scales[this.names.indexOf(i)]},a.prototype.defaultCallback=function(){for(var i=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length===0?this.values:t.map(function(l,f){var d=i.scales[f];return d.type==="identity"?d.values[0]:i._getAttributeValue(d,l)})},a.prototype._parseCfg=function(i){var t=this,s=i.type,l=s===void 0?"base":s,f=i.names,d=f===void 0?[]:f,m=i.scales,x=m===void 0?[]:m,T=i.values,O=T===void 0?[]:T,D=i.callback;this.type=l,this.scales=x,this.values=O,this.names=d,this.callback=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];if(D){var J=D.apply(void 0,B);if(!(0,b.UM)(J))return[J]}return t.defaultCallback.apply(t,B)}},a.prototype._getAttributeValue=function(i,t){if(i.isCategory&&!this.linear){var s=i.translate(t);return this.values[s%this.values.length]}var l=i.scale(t);return this.getLinearValue(l)},a.prototype._toOriginParam=function(i,t){return t.isLinear?i:(0,b.kJ)(i)?i.map(function(s){return ct(t,s)}):ct(t,i)},a}(),gr=It,Br=/rgba?\(([\s.,0-9]+)\)/,Nt=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,wn=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ei=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,ci=function(a){return/^[r,R,L,l]{1}[\s]*\(/.test(a)},ln=function(){var a=document.createElement("i");return a.title="Web Colour Picker",a.style.display="none",document.body.appendChild(a),a},ti=function(a,i,t,s){return a[s]+(i[s]-a[s])*t};function $n(a){return"#"+oa(a[0])+oa(a[1])+oa(a[2])}var ri=function(a){return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]},oa=function(a){var i=Math.round(a).toString(16);return i.length===1?"0"+i:i},yi=function(a,i){var t=isNaN(Number(i))||i<0?0:i>1?1:Number(i),s=a.length-1,l=Math.floor(s*t),f=s*t-l,d=a[l],m=l===s?d:a[l+1];return $n([ti(d,m,f,0),ti(d,m,f,1),ti(d,m,f,2)])},ya,Ya=function(a){if(a[0]==="#"&&a.length===7)return a;ya||(ya=ln()),ya.style.color=a;var i=document.defaultView.getComputedStyle(ya,"").getPropertyValue("color"),t=Br.exec(i),s=t[1].split(/\s*,\s*/).map(function(l){return Number(l)});return i=$n(s),i},ha=function(a){var i=(0,b.HD)(a)?a.split("-"):a,t=(0,b.UI)(i,function(s){return ri(s.indexOf("#")===-1?Ya(s):s)});return function(s){return yi(t,s)}},Fa=function(a){if(ci(a)){var i,t=void 0;if(a[0]==="l"){var s=Nt.exec(a),l=+s[1]+90;t=s[2],i="linear-gradient("+l+"deg, "}else if(a[0]==="r"){i="radial-gradient(";var s=wn.exec(a);t=s[4]}var f=t.match(ei);return(0,b.S6)(f,function(d,m){var x=d.split(":");i+=x[1]+" "+x[0]*100+"%",m!==f.length-1&&(i+=", ")}),i+=")",i}return a},Sa={rgb2arr:ri,gradient:ha,toRGB:(0,b.HP)(Ya),toCSSGradient:Fa},xs=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.type="color",s.names=["color"],(0,b.HD)(s.values)&&(s.linear=!0),s.gradient=Sa.gradient(s.values),s}return i.prototype.getLinearValue=function(t){return this.gradient(t)},i}(gr),co=xs,Lo=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.type="opacity",s.names=["opacity"],s}return i}(gr),Za=Lo,Kn=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.names=["x","y"],s.type="position",s}return i.prototype.mapping=function(t,s){var l=this.scales,f=l[0],d=l[1];return(0,b.UM)(t)||(0,b.UM)(s)?[]:[(0,b.kJ)(t)?t.map(function(m){return f.scale(m)}):f.scale(t),(0,b.kJ)(s)?s.map(function(m){return d.scale(m)}):d.scale(s)]},i}(gr),Ci=Kn,Ga=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.type="shape",s.names=["shape"],s}return i.prototype.getLinearValue=function(t){var s=Math.round((this.values.length-1)*t);return this.values[s]},i}(gr),Jo=Ga,fo=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.type="size",s.names=["size"],s}return i}(gr),To=fo,lr={};function Dt(a){return lr[a]}function er(a,i){lr[a]=i}var kr=function(){function a(i){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=i,this.initCfg(),this.init()}return a.prototype.translate=function(i){return i},a.prototype.change=function(i){(0,b.f0)(this.__cfg__,i),this.init()},a.prototype.clone=function(){return this.constructor(this.__cfg__)},a.prototype.getTicks=function(){var i=this;return(0,b.UI)(this.ticks,function(t,s){return(0,b.Kn)(t)?t:{text:i.getText(t,s),tickValue:t,value:i.scale(t)}})},a.prototype.getText=function(i,t){var s=this.formatter,l=s?s(i,t):i;return(0,b.UM)(l)||!(0,b.mf)(l.toString)?"":l.toString()},a.prototype.getConfig=function(i){return this.__cfg__[i]},a.prototype.init=function(){(0,b.f0)(this,this.__cfg__),this.setDomain(),(0,b.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},a.prototype.initCfg=function(){},a.prototype.setDomain=function(){},a.prototype.calculateTicks=function(){var i=this.tickMethod,t=[];if((0,b.HD)(i)){var s=Dt(i);if(!s)throw new Error("There is no method to to calculate ticks!");t=s(this)}else(0,b.mf)(i)&&(t=i(this));return t},a.prototype.rangeMin=function(){return this.range[0]},a.prototype.rangeMax=function(){return this.range[1]},a.prototype.calcPercent=function(i,t,s){return(0,b.hj)(i)?(i-t)/(s-t):NaN},a.prototype.calcValue=function(i,t,s){return t+i*(s-t)},a}(),tn=kr,In=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return i.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},i.prototype.translate=function(t){this.buildIndexMap();var s=this.translateIndexMap.get(t);return s===void 0&&(s=(0,b.hj)(t)?t:NaN),s},i.prototype.scale=function(t){var s=this.translate(t),l=this.calcPercent(s,this.min,this.max);return this.calcValue(l,this.rangeMin(),this.rangeMax())},i.prototype.invert=function(t){var s=this.max-this.min,l=this.calcPercent(t,this.rangeMin(),this.rangeMax()),f=Math.round(s*l)+this.min;return f<this.min||f>this.max?NaN:this.values[f]},i.prototype.getText=function(t){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var f=t;return(0,b.hj)(t)&&!this.values.includes(t)&&(f=this.values[f]),a.prototype.getText.apply(this,(0,A.pr)([f],s))},i.prototype.initCfg=function(){this.tickMethod="cat"},i.prototype.setDomain=function(){if((0,b.UM)(this.getConfig("min"))&&(this.min=0),(0,b.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},i}(tn),zn=In,On=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Vi="\\d\\d?",Bi="\\d\\d",Ja="\\d{3}",Ao="\\d{4}",fs="[^\\s]+",ko=/\[([^]*?)\]/gm;function oo(a,i){for(var t=[],s=0,l=a.length;s<l;s++)t.push(a[s].substr(0,i));return t}var iu=function(a){return function(i,t){var s=t[a].map(function(f){return f.toLowerCase()}),l=s.indexOf(i.toLowerCase());return l>-1?l:null}};function Ko(a){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];for(var s=0,l=i;s<l.length;s++){var f=l[s];for(var d in f)a[d]=f[d]}return a}var jt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],sr=["January","February","March","April","May","June","July","August","September","October","November","December"],Vr=oo(sr,3),Cn=oo(jt,3),Yn={dayNamesShort:Cn,dayNames:jt,monthNamesShort:Vr,monthNames:sr,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][a%10>3?0:(a-a%10!==10?1:0)*a%10]}},Wi=Ko({},Yn),ho=function(a){return Wi=Ko(Wi,a)},Gs=function(a){return a.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Mo=function(a,i){for(i===void 0&&(i=2),a=String(a);a.length<i;)a="0"+a;return a},Fo={D:function(a){return String(a.getDate())},DD:function(a){return Mo(a.getDate())},Do:function(a,i){return i.DoFn(a.getDate())},d:function(a){return String(a.getDay())},dd:function(a){return Mo(a.getDay())},ddd:function(a,i){return i.dayNamesShort[a.getDay()]},dddd:function(a,i){return i.dayNames[a.getDay()]},M:function(a){return String(a.getMonth()+1)},MM:function(a){return Mo(a.getMonth()+1)},MMM:function(a,i){return i.monthNamesShort[a.getMonth()]},MMMM:function(a,i){return i.monthNames[a.getMonth()]},YY:function(a){return Mo(String(a.getFullYear()),4).substr(2)},YYYY:function(a){return Mo(a.getFullYear(),4)},h:function(a){return String(a.getHours()%12||12)},hh:function(a){return Mo(a.getHours()%12||12)},H:function(a){return String(a.getHours())},HH:function(a){return Mo(a.getHours())},m:function(a){return String(a.getMinutes())},mm:function(a){return Mo(a.getMinutes())},s:function(a){return String(a.getSeconds())},ss:function(a){return Mo(a.getSeconds())},S:function(a){return String(Math.round(a.getMilliseconds()/100))},SS:function(a){return Mo(Math.round(a.getMilliseconds()/10),2)},SSS:function(a){return Mo(a.getMilliseconds(),3)},a:function(a,i){return a.getHours()<12?i.amPm[0]:i.amPm[1]},A:function(a,i){return a.getHours()<12?i.amPm[0].toUpperCase():i.amPm[1].toUpperCase()},ZZ:function(a){var i=a.getTimezoneOffset();return(i>0?"-":"+")+Mo(Math.floor(Math.abs(i)/60)*100+Math.abs(i)%60,4)},Z:function(a){var i=a.getTimezoneOffset();return(i>0?"-":"+")+Mo(Math.floor(Math.abs(i)/60),2)+":"+Mo(Math.abs(i)%60,2)}},Wu=function(a){return+a-1},ff=[null,Vi],Jf=[null,fs],eh=["isPm",fs,function(a,i){var t=a.toLowerCase();return t===i.amPm[0]?0:t===i.amPm[1]?1:null}],du=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(a){var i=(a+"").match(/([+-]|\d\d)/gi);if(i){var t=+i[1]*60+parseInt(i[2],10);return i[0]==="+"?t:-t}return 0}],lc={D:["day",Vi],DD:["day",Bi],Do:["day",Vi+fs,function(a){return parseInt(a,10)}],M:["month",Vi,Wu],MM:["month",Bi,Wu],YY:["year",Bi,function(a){var i=new Date,t=+(""+i.getFullYear()).substr(0,2);return+(""+(+a>68?t-1:t)+a)}],h:["hour",Vi,void 0,"isPm"],hh:["hour",Bi,void 0,"isPm"],H:["hour",Vi],HH:["hour",Bi],m:["minute",Vi],mm:["minute",Bi],s:["second",Vi],ss:["second",Bi],YYYY:["year",Ao],S:["millisecond","\\d",function(a){return+a*100}],SS:["millisecond",Bi,function(a){return+a*10}],SSS:["millisecond",Ja],d:ff,dd:ff,ddd:Jf,dddd:Jf,MMM:["month",fs,iu("monthNamesShort")],MMMM:["month",fs,iu("monthNames")],a:eh,A:eh,ZZ:du,Z:du},au={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Rl=function(a){return Ko(au,a)},cc=function(a,i,t){if(i===void 0&&(i=au.default),t===void 0&&(t={}),typeof a=="number"&&(a=new Date(a)),Object.prototype.toString.call(a)!=="[object Date]"||isNaN(a.getTime()))throw new Error("Invalid Date pass to format");i=au[i]||i;var s=[];i=i.replace(ko,function(f,d){return s.push(d),"@@@"});var l=Ko(Ko({},Wi),t);return i=i.replace(On,function(f){return Fo[f](a,l)}),i.replace(/@@@/g,function(){return s.shift()})};function bo(a,i,t){if(t===void 0&&(t={}),typeof i!="string")throw new Error("Invalid format in fecha parse");if(i=au[i]||i,a.length>1e3)return null;var s=new Date,l={year:s.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},f=[],d=[],m=i.replace(ko,function(bt,Ft){return d.push(Gs(Ft)),"@@@"}),x={},T={};m=Gs(m).replace(On,function(bt){var Ft=lc[bt],xr=Ft[0],Fr=Ft[1],$r=Ft[3];if(x[xr])throw new Error("Invalid format. "+xr+" specified twice in format");return x[xr]=!0,$r&&(T[$r]=!0),f.push(Ft),"("+Fr+")"}),Object.keys(T).forEach(function(bt){if(!x[bt])throw new Error("Invalid format. "+bt+" is required in specified format")}),m=m.replace(/@@@/g,function(){return d.shift()});var O=a.match(new RegExp(m,"i"));if(!O)return null;for(var D=Ko(Ko({},Wi),t),B=1;B<O.length;B++){var U=f[B-1],J=U[0],pe=U[2],Ee=pe?pe(O[B],D):+O[B];if(Ee==null)return null;l[J]=Ee}l.isPm===1&&l.hour!=null&&+l.hour!=12?l.hour=+l.hour+12:l.isPm===0&&+l.hour==12&&(l.hour=0);var Ce;if(l.timezoneOffset==null){Ce=new Date(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond);for(var st=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],B=0,gt=st.length;B<gt;B++)if(x[st[B][0]]&&l[st[B][0]]!==Ce[st[B][1]]())return null}else if(Ce=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute-l.timezoneOffset,l.second,l.millisecond)),l.month>11||l.month<0||l.day>31||l.day<1||l.hour>23||l.hour<0||l.minute>59||l.minute<0||l.second>59||l.second<0)return null;return Ce}var ec={format:cc,parse:bo,defaultI18n:Yn,setGlobalDateI18n:ho,setGlobalDateMasks:Rl},Ms=ec;function Rs(a){return function(i,t,s,l){for(var f=(0,b.UM)(s)?0:s,d=(0,b.UM)(l)?i.length:l;f<d;){var m=f+d>>>1;a(i[m])>t?d=m:f=m+1}return f}}var Rc="format";function Ic(a,i){var t=H[Rc]||Ms[Rc];return t(a,i)}function If(a){return(0,b.HD)(a)&&(a.indexOf("T")>0?a=new Date(a).getTime():a=new Date(a.replace(/-/gi,"/")).getTime()),(0,b.J_)(a)&&(a=a.getTime()),a}var Ll=1e3,Fl=60*Ll,tc=60*Fl,Lu=24*tc,Oc=Lu*31,Rn=Lu*365,ji=[["HH:mm:ss",Ll],["HH:mm:ss",Ll*10],["HH:mm:ss",Ll*30],["HH:mm",Fl],["HH:mm",Fl*10],["HH:mm",Fl*30],["HH",tc],["HH",tc*6],["HH",tc*12],["YYYY-MM-DD",Lu],["YYYY-MM-DD",Lu*4],["YYYY-WW",Lu*7],["YYYY-MM",Oc],["YYYY-MM",Oc*4],["YYYY-MM",Oc*6],["YYYY",Lu*380]];function Sv(a,i,t){var s=(i-a)/t,l=Rs(function(d){return d[1]})(ji,s)-1,f=ji[l];return l<0?f=ji[0]:l>=ji.length&&(f=(0,b.Z$)(ji)),f}var th=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="timeCat",t}return i.prototype.translate=function(t){t=If(t);var s=this.values.indexOf(t);return s===-1&&((0,b.hj)(t)&&t<this.values.length?s=t:s=NaN),s},i.prototype.getText=function(t,s){var l=this.translate(t);if(l>-1){var f=this.values[l],d=this.formatter;return f=d?d(f,s):Ic(f,this.mask),f}return t},i.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},i.prototype.setDomain=function(){var t=this.values;(0,b.S6)(t,function(s,l){t[l]=If(s)}),t.sort(function(s,l){return s-l}),a.prototype.setDomain.call(this)},i}(zn),fc=th,$p=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.isContinuous=!0,t}return i.prototype.scale=function(t){if((0,b.UM)(t))return NaN;var s=this.rangeMin(),l=this.rangeMax(),f=this.max,d=this.min;if(f===d)return s;var m=this.getScalePercent(t);return s+m*(l-s)},i.prototype.init=function(){a.prototype.init.call(this);var t=this.ticks,s=(0,b.YM)(t),l=(0,b.Z$)(t);s<this.min&&(this.min=s),l>this.max&&(this.max=l),(0,b.UM)(this.minLimit)||(this.min=s),(0,b.UM)(this.maxLimit)||(this.max=l)},i.prototype.setDomain=function(){var t=(0,b.rx)(this.values),s=t.min,l=t.max;(0,b.UM)(this.min)&&(this.min=s),(0,b.UM)(this.max)&&(this.max=l),this.min>this.max&&(this.min=s,this.max=l)},i.prototype.calculateTicks=function(){var t=this,s=a.prototype.calculateTicks.call(this);return this.nice||(s=(0,b.hX)(s,function(l){return l>=t.min&&l<=t.max})),s},i.prototype.getScalePercent=function(t){var s=this.max,l=this.min;return(t-l)/(s-l)},i.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},i}(tn),Qs=$p,Pc=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return i.prototype.invert=function(t){var s=this.getInvertPercent(t);return this.min+s*(this.max-this.min)},i.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},i}(Qs),Bl=Pc;function ou(a,i){var t=Math.E,s;return i>=0?s=Math.pow(t,Math.log(i)/a):s=Math.pow(t,Math.log(-i)/a)*-1,s}function vu(a,i){return a===1?1:Math.log(i)/Math.log(a)}function Il(a,i,t){(0,b.UM)(t)&&(t=Math.max.apply(null,a));var s=t;return(0,b.S6)(a,function(l){l>0&&l<s&&(s=l)}),s===t&&(s=t/i),s>1&&(s=1),s}function hc(a){var i=a.toString().split(/[eE]/),t=(i[0].split(".")[1]||"").length-+(i[1]||0);return t>0?t:0}function Nl(a,i){var t=hc(a),s=hc(i),l=Math.pow(10,Math.max(t,s));return(a*l+i*l)/l}var kc=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t}return i.prototype.invert=function(t){var s=this.base,l=vu(s,this.max),f=this.rangeMin(),d=this.rangeMax()-f,m,x=this.positiveMin;if(x){if(t===0)return 0;m=vu(s,x/s);var T=1/(l-m)*d;if(t<T)return t/T*x}else m=vu(s,this.min);var O=(t-f)/d,D=O*(l-m)+m;return Math.pow(s,D)},i.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},i.prototype.setDomain=function(){a.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Il(this.values,this.base,this.max))},i.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l||t<=0)return 0;var f=this.base,d=this.positiveMin;d&&(l=d*1/f);var m;return t<d?m=t/d/(vu(f,s)-vu(f,l)):m=(vu(f,t)-vu(f,l))/(vu(f,s)-vu(f,l)),m},i}(Qs),Yc=kc,rh=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pow",t}return i.prototype.invert=function(t){var s=this.getInvertPercent(t),l=this.exponent,f=ou(l,this.max),d=ou(l,this.min),m=s*(f-d)+d,x=m>=0?1:-1;return Math.pow(m,l)*x},i.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},i.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l)return 0;var f=this.exponent,d=(ou(f,t)-ou(f,l))/(ou(f,s)-ou(f,l));return d},i}(Qs),Xp=rh,jo=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="time",t}return i.prototype.getText=function(t,s){var l=this.translate(t),f=this.formatter;return f?f(l,s):Ic(l,this.mask)},i.prototype.scale=function(t){var s=t;return((0,b.HD)(s)||(0,b.J_)(s))&&(s=this.translate(s)),a.prototype.scale.call(this,s)},i.prototype.translate=function(t){return If(t)},i.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},i.prototype.setDomain=function(){var t=this.values,s=this.getConfig("min"),l=this.getConfig("max");if((!(0,b.UM)(s)||!(0,b.hj)(s))&&(this.min=this.translate(this.min)),(!(0,b.UM)(l)||!(0,b.hj)(l))&&(this.max=this.translate(this.max)),t&&t.length){var f=[],d=1/0,m=d,x=0;(0,b.S6)(t,function(T){var O=If(T);if(isNaN(O))throw new TypeError("Invalid Time: "+T+" in time scale!");d>O?(m=d,d=O):m>O&&(m=O),x<O&&(x=O),f.push(O)}),t.length>1&&(this.minTickInterval=m-d),(0,b.UM)(s)&&(this.min=d),(0,b.UM)(l)&&(this.max=x)}},i}(Bl),Ld=jo,Ih=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantize",t}return i.prototype.invert=function(t){var s=this.ticks,l=s.length,f=this.getInvertPercent(t),d=Math.floor(f*(l-1));if(d>=l-1)return(0,b.Z$)(s);if(d<0)return(0,b.YM)(s);var m=s[d],x=s[d+1],T=d/(l-1),O=(d+1)/(l-1);return m+(f-T)/(O-T)*(x-m)},i.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},i.prototype.calculateTicks=function(){var t=a.prototype.calculateTicks.call(this);return this.nice||((0,b.Z$)(t)!==this.max&&t.push(this.max),(0,b.YM)(t)!==this.min&&t.unshift(this.min)),t},i.prototype.getScalePercent=function(t){var s=this.ticks;if(t<(0,b.YM)(s))return 0;if(t>(0,b.Z$)(s))return 1;var l=0;return(0,b.S6)(s,function(f,d){if(t>=f)l=d;else return!1}),l/(s.length-1)},i}(Qs),hf=Ih,ss=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantile",t}return i.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},i}(hf),cp=ss,fp={};function Fu(a){return fp[a]}function Ot(a,i){if(Fu(a))throw new Error("type '"+a+"' existed.");fp[a]=i}var br=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return i.prototype.calculateTicks=function(){return this.values},i.prototype.scale=function(t){return this.values[0]!==t&&(0,b.hj)(t)?t:this.range[0]},i.prototype.invert=function(t){var s=this.range;return t<s[0]||t>s[1]?NaN:this.values[0]},i}(tn),Hr=br;function Jr(a){var i=a.values,t=a.tickInterval,s=a.tickCount,l=a.showLast;if((0,b.hj)(t)){var f=(0,b.hX)(i,function(J,pe){return pe%t===0}),d=(0,b.Z$)(i);return l&&(0,b.Z$)(f)!==d&&f.push(d),f}var m=i.length,x=a.min,T=a.max;if((0,b.UM)(x)&&(x=0),(0,b.UM)(T)&&(T=i.length-1),!(0,b.hj)(s)||s>=m)return i.slice(x,T+1);if(s<=0||T<=0)return[];for(var O=s===1?m:Math.floor(m/(s-1)),D=[],B=x,U=0;U<s&&!(B>=T);U++)B=Math.min(x+U*O,T),U===s-1&&l?D.push(i[T]):D.push(i[B]);return D}function Pn(a){var i=a.min,t=a.max,s=a.nice,l=a.tickCount,f=new yl;return f.domain([i,t]),s&&f.nice(l),f.ticks(l)}var _i=5,sa=Math.sqrt(50),xo=Math.sqrt(10),Us=Math.sqrt(2),yl=function(){function a(){this._domain=[0,1]}return a.prototype.domain=function(i){return i?(this._domain=Array.from(i,Number),this):this._domain.slice()},a.prototype.nice=function(i){var t,s;i===void 0&&(i=_i);var l=this._domain.slice(),f=0,d=this._domain.length-1,m=this._domain[f],x=this._domain[d],T;return x<m&&(t=[x,m],m=t[0],x=t[1],s=[d,f],f=s[0],d=s[1]),T=Bo(m,x,i),T>0?(m=Math.floor(m/T)*T,x=Math.ceil(x/T)*T,T=Bo(m,x,i)):T<0&&(m=Math.ceil(m*T)/T,x=Math.floor(x*T)/T,T=Bo(m,x,i)),T>0?(l[f]=Math.floor(m/T)*T,l[d]=Math.ceil(x/T)*T,this.domain(l)):T<0&&(l[f]=Math.ceil(m*T)/T,l[d]=Math.floor(x*T)/T,this.domain(l)),this},a.prototype.ticks=function(i){return i===void 0&&(i=_i),al(this._domain[0],this._domain[this._domain.length-1],i||_i)},a}();function al(a,i,t){var s,l=-1,f,d,m;if(i=+i,a=+a,t=+t,a===i&&t>0)return[a];if((s=i<a)&&(f=a,a=i,i=f),(m=Bo(a,i,t))===0||!isFinite(m))return[];if(m>0)for(a=Math.ceil(a/m),i=Math.floor(i/m),d=new Array(f=Math.ceil(i-a+1));++l<f;)d[l]=(a+l)*m;else for(a=Math.floor(a*m),i=Math.ceil(i*m),d=new Array(f=Math.ceil(a-i+1));++l<f;)d[l]=(a-l)/m;return s&&d.reverse(),d}function Bo(a,i,t){var s=(i-a)/Math.max(0,t),l=Math.floor(Math.log(s)/Math.LN10),f=s/Math.pow(10,l);return l>=0?(f>=sa?10:f>=xo?5:f>=Us?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(f>=sa?10:f>=xo?5:f>=Us?2:1)}function hp(a,i,t){var s;return t==="ceil"?s=Math.ceil(a/i):t==="floor"?s=Math.floor(a/i):s=Math.round(a/i),s*i}function Fd(a,i,t){var s=hp(a,t,"floor"),l=hp(i,t,"ceil");s=(0,b.ri)(s,t),l=(0,b.ri)(l,t);for(var f=[],d=Math.max((l-s)/(Math.pow(2,12)-1),t),m=s;m<=l;m=m+d){var x=(0,b.ri)(m,d);f.push(x)}return{min:s,max:l,ticks:f}}function qc(a,i,t){var s,l=a.minLimit,f=a.maxLimit,d=a.min,m=a.max,x=a.tickCount,T=x===void 0?5:x,O=(0,b.UM)(l)?(0,b.UM)(i)?d:i:l,D=(0,b.UM)(f)?(0,b.UM)(t)?m:t:f;if(O>D&&(s=[O,D],D=s[0],O=s[1]),T<=2)return[O,D];for(var B=(D-O)/(T-1),U=[],J=0;J<T;J++)U.push(O+B*J);return U}function pp(a){var i=a.min,t=a.max,s=a.tickInterval,l=a.minLimit,f=a.maxLimit,d=Pn(a);return!(0,b.UM)(l)||!(0,b.UM)(f)?qc(a,(0,b.YM)(d),(0,b.Z$)(d)):s?Fd(i,t,s).ticks:d}function pf(a){return Math.abs(a)<1e-15?a:parseFloat(a.toFixed(15))}var Yp=[1,5,2,2.5,4,3],Aa=null,df=Number.EPSILON*100;function nh(a,i){return(a%i+i)%i}function ih(a){return Math.round(a*1e12)/1e12}function Of(a,i,t,s,l,f){var d=(0,b.dp)(i),m=(0,b.cq)(i,a),x=0,T=nh(s,f);return(T<df||f-T<df)&&s<=0&&l>=0&&(x=1),1-m/(d-1)-t+x}function ah(a,i,t){var s=(0,b.dp)(i),l=(0,b.cq)(i,a),f=1;return 1-l/(s-1)-t+f}function $s(a,i,t,s,l,f){var d=(a-1)/(f-l),m=(i-1)/(Math.max(f,s)-Math.min(t,l));return 2-Math.max(d/m,m/d)}function pc(a,i){return a>=i?2-(a-1)/(i-1):1}function Bu(a,i,t,s){var l=i-a;return 1-.5*(Math.pow(i-s,2)+Math.pow(a-t,2))/Math.pow(.1*l,2)}function oh(a,i,t){var s=i-a;if(t>s){var l=(t-s)/2;return 1-Math.pow(l,2)/Math.pow(.1*s,2)}return 1}function qp(){return 1}function Kp(a,i,t,s,l,f){t===void 0&&(t=5),s===void 0&&(s=!0),l===void 0&&(l=Yp),f===void 0&&(f=[.25,.2,.5,.05]);var d=t<0?0:Math.round(t);if(Number.isNaN(a)||Number.isNaN(i)||typeof a!="number"||typeof i!="number"||!d)return{min:0,max:0,ticks:[]};if(i-a<1e-15||d===1)return{min:a,max:i,ticks:[a]};if(i-a>1e148){var m=t||5,x=(i-a)/m;return{min:a,max:i,ticks:Array(m).fill(null).map(function(La,So){return pf(a+x*So)})}}for(var T={score:-2,lmin:0,lmax:0,lstep:0},O=1;O<1/0;){for(var D=0;D<l.length;D+=1){var B=l[D],U=ah(B,l,O);if(f[0]*U+f[1]+f[2]+f[3]<T.score){O=1/0;break}for(var J=2;J<1/0;){var pe=pc(J,d);if(f[0]*U+f[1]+f[2]*pe+f[3]<T.score)break;for(var Ee=(i-a)/(J+1)/O/B,Ce=Math.ceil(Math.log10(Ee));Ce<1/0;){var st=O*B*Math.pow(10,Ce),gt=oh(a,i,st*(J-1));if(f[0]*U+f[1]*gt+f[2]*pe+f[3]<T.score)break;var bt=Math.floor(i/st)*O-(J-1)*O,Ft=Math.ceil(a/st)*O;if(bt<=Ft)for(var m=Ft-bt,xr=0;xr<=m;xr+=1){var Fr=bt+xr,$r=Fr*(st/O),yn=$r+st*(J-1),cn=st,Bn=Of(B,l,O,$r,yn,cn),hi=Bu(a,i,$r,yn),Hi=$s(J,d,a,i,$r,yn),aa=qp(),Qa=f[0]*Bn+f[1]*hi+f[2]*Hi+f[3]*aa;Qa>T.score&&(!s||$r<=a&&yn>=i)&&(T.lmin=$r,T.lmax=yn,T.lstep=cn,T.score=Qa)}Ce+=1}J+=1}}O+=1}var Hn=pf(T.lmax),Fi=pf(T.lmin),na=pf(T.lstep),zi=Math.floor(ih((Hn-Fi)/na))+1,gi=new Array(zi);gi[0]=pf(Fi);for(var D=1;D<zi;D++)gi[D]=pf(gi[D-1]+na);return{min:Math.min(a,(0,b.YM)(gi)),max:Math.max(i,(0,b.Z$)(gi)),ticks:gi}}function sh(a){var i=a.min,t=a.max,s=a.tickCount,l=a.nice,f=a.tickInterval,d=a.minLimit,m=a.maxLimit,x=Kp(i,t,s,l).ticks;return!(0,b.UM)(d)||!(0,b.UM)(m)?qc(a,(0,b.YM)(x),(0,b.Z$)(x)):f?Fd(i,t,f).ticks:x}function dc(a){var i=a.base,t=a.tickCount,s=a.min,l=a.max,f=a.values,d,m=vu(i,l);if(s>0)d=Math.floor(vu(i,s));else{var x=Il(f,i,l);d=Math.floor(vu(i,x))}for(var T=m-d,O=Math.ceil(T/t),D=[],B=d;B<m+O;B=B+O)D.push(Math.pow(i,B));return s<=0&&D.unshift(0),D}function Oh(a,i,t){if(t===void 0&&(t=5),a===i)return{max:i,min:a,ticks:[a]};var s=t<0?0:Math.round(t);if(s===0)return{max:i,min:a,ticks:[]};var l=1.5,f=.5+1.5*l,d=i-a,m=d/s,x=Math.pow(10,Math.floor(Math.log10(m))),T=x;2*x-m<l*(m-T)&&(T=2*x,5*x-m<f*(m-T)&&(T=5*x,10*x-m<l*(m-T)&&(T=10*x)));for(var O=Math.ceil(i/T),D=Math.floor(a/T),B=Math.max(O*T,i),U=Math.min(D*T,a),J=Math.floor((B-U)/T)+1,pe=new Array(J),Ee=0;Ee<J;Ee++)pe[Ee]=pf(U+Ee*T);return{min:U,max:B,ticks:pe}}function dp(a){var i=a.exponent,t=a.tickCount,s=Math.ceil(ou(i,a.max)),l=Math.floor(ou(i,a.min)),f=Oh(l,s,t).ticks;return f.map(function(d){var m=d>=0?1:-1;return Math.pow(d,i)*m})}function Pf(a,i){var t=a.length*i;return i===1?a[a.length-1]:i===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function pm(a){var i=a.tickCount,t=a.values;if(!t||!t.length)return[];for(var s=t.slice().sort(function(m,x){return m-x}),l=[],f=0;f<i;f++){var d=f/(i-1);l.push(Pf(s,d))}return l}function Bd(a){var i=a.min,t=a.max,s=a.tickCount,l=a.tickInterval,f=a.minLimit,d=a.maxLimit,m=Oh(i,t,s).ticks;return!(0,b.UM)(f)||!(0,b.UM)(d)?qc(a,(0,b.YM)(m),(0,b.Z$)(m)):l?Fd(i,t,l).ticks:m}function Nd(a){var i=a.min,t=a.max,s=a.minTickInterval,l=a.tickInterval,f=a.tickCount;if(l)f=Math.ceil((t-i)/l);else{l=Sv(i,t,f)[1];var d=(t-i)/l,m=d/f;m>1&&(l=l*Math.ceil(m)),s&&l<s&&(l=s)}l=Math.max(Math.floor((t-i)/(Math.pow(2,12)-1)),l);for(var x=[],T=i;T<t+l;T+=l)x.push(T);return x}function Is(a){var i=Jr((0,A.pi)({showLast:!0},a));return i}function Ph(a){return new Date(a).getFullYear()}function vp(a){return new Date(a,0,1).getTime()}function Qp(a){return new Date(a).getMonth()}function gp(a,i){var t=Ph(a),s=Ph(i),l=Qp(a),f=Qp(i);return(s-t)*12+(f-l)%12}function zd(a,i){return new Date(a,i,1).getTime()}function kh(a,i){return Math.ceil((i-a)/Lu)}function Dh(a,i){return Math.ceil((i-a)/tc)}function kf(a,i){return Math.ceil((i-a)/(60*1e3))}function hs(a){var i=a.min,t=a.max,s=a.minTickInterval,l=a.tickCount,f=a.tickInterval,d=[];f||(f=(t-i)/l,s&&f<s&&(f=s)),f=Math.max(Math.floor((t-i)/(Math.pow(2,12)-1)),f);var m=Ph(i);if(f>Rn)for(var x=Ph(t),T=Math.ceil(f/Rn),O=m;O<=x+T;O=O+T)d.push(vp(O));else if(f>Oc)for(var D=Math.ceil(f/Oc),B=Qp(i),U=gp(i,t),O=0;O<=U+D;O=O+D)d.push(zd(m,O+B));else if(f>Lu)for(var J=new Date(i),pe=J.getFullYear(),Ee=J.getMonth(),Ce=J.getDate(),st=Math.ceil(f/Lu),gt=kh(i,t),O=0;O<gt+st;O=O+st)d.push(new Date(pe,Ee,Ce+O).getTime());else if(f>tc)for(var J=new Date(i),pe=J.getFullYear(),Ee=J.getMonth(),st=J.getDate(),bt=J.getHours(),Ft=Math.ceil(f/tc),xr=Dh(i,t),O=0;O<=xr+Ft;O=O+Ft)d.push(new Date(pe,Ee,st,bt+O).getTime());else if(f>Fl)for(var Fr=kf(i,t),$r=Math.ceil(f/Fl),O=0;O<=Fr+$r;O=O+$r)d.push(i+O*Fl);else{var yn=f;yn<Ll&&(yn=Ll);for(var cn=Math.floor(i/Ll)*Ll,Bn=Math.ceil((t-i)/Ll),hi=Math.ceil(yn/Ll),O=0;O<Bn+hi;O=O+hi)d.push(cn+O*Ll)}return d.length>=512&&console.warn("Notice: current ticks length("+d.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+f+") is too small, increase the value to solve the problem!"),d}er("cat",Jr),er("time-cat",Is),er("wilkinson-extended",sh),er("r-pretty",Bd),er("time",Nd),er("time-pretty",hs),er("log",dc),er("pow",dp),er("quantile",pm),er("d3-linear",pp),Ot("cat",zn),Ot("category",zn),Ot("identity",Hr),Ot("linear",Bl),Ot("log",Yc),Ot("pow",Xp),Ot("time",Ld),Ot("timeCat",fc),Ot("quantize",hf),Ot("quantile",cp);var mp={},rc=function(a){return mp[a.toLowerCase()]},vc=function(a,i){if(rc(a))throw new Error("Attribute type '".concat(a,"' existed."));mp[a.toLowerCase()]=i};vc("Color",co),vc("Opacity",Za),vc("Position",Ci),vc("Shape",Jo),vc("Size",To);var so=k(77160),ps=k(35600),eo=k(31506),Jp=function(){function a(i){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=i.start,s=i.end,l=i.matrix,f=l===void 0?[1,0,0,0,1,0,0,0,1]:l,d=i.isTransposed,m=d===void 0?!1:d;this.start=t,this.end=s,this.matrix=f,this.originalMatrix=(0,A.ev)([],f),this.isTransposed=m}return a.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},a.prototype.update=function(i){(0,b.f0)(this,i),this.initial()},a.prototype.convertDim=function(i,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),f+i*(d-f)},a.prototype.invertDim=function(i,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),(i-f)/(d-f)},a.prototype.applyMatrix=function(i,t,s){s===void 0&&(s=0);var l=this.matrix,f=[i,t,s];return so.transformMat3(f,f,l),f},a.prototype.invertMatrix=function(i,t,s){s===void 0&&(s=0);var l=this.matrix,f=ps.U_([0,0,0,0,0,0,0,0,0],l),d=[i,t,s];return f&&so.transformMat3(d,d,f),d},a.prototype.convert=function(i){var t=this.convertPoint(i),s=t.x,l=t.y,f=this.applyMatrix(s,l,1);return{x:f[0],y:f[1]}},a.prototype.invert=function(i){var t=this.invertMatrix(i.x,i.y,1);return this.invertPoint({x:t[0],y:t[1]})},a.prototype.rotate=function(i){var t=this.matrix,s=this.center;return eo.m$(t,t,[-s.x,-s.y]),eo.zu(t,t,i),eo.m$(t,t,[s.x,s.y]),this},a.prototype.reflect=function(i){return i==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},a.prototype.scale=function(i,t){var s=this.matrix,l=this.center;return eo.m$(s,s,[-l.x,-l.y]),eo.lh(s,s,[i,t]),eo.m$(s,s,[l.x,l.y]),this},a.prototype.translate=function(i,t){var s=this.matrix;return eo.m$(s,s,[i,t]),this},a.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},a.prototype.getCenter=function(){return this.center},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.getRadius=function(){return this.radius},a.prototype.isReflect=function(i){return i==="x"?this.isReflectX:this.isReflectY},a.prototype.resetMatrix=function(i){this.matrix=i||(0,A.ev)([],this.originalMatrix)},a}(),uh=Jp,yp=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.isRect=!0,s.type="cartesian",s.initial(),s}return i.prototype.initial=function(){a.prototype.initial.call(this);var t=this.start,s=this.end;this.x={start:t.x,end:s.x},this.y={start:t.y,end:s.y}},i.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:this.convertDim(l,"x"),y:this.convertDim(f,"y")}},i.prototype.invertPoint=function(t){var s,l=this.invertDim(t.x,"x"),f=this.invertDim(t.y,"y");return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:l,y:f}},i}(uh),Ud=yp,wa=k(31437),lh=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.isHelix=!0,s.type="helix";var l=t.startAngle,f=l===void 0?1.25*Math.PI:l,d=t.endAngle,m=d===void 0?7.25*Math.PI:d,x=t.innerRadius,T=x===void 0?0:x,O=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=T,s.radius=O,s.initial(),s}return i.prototype.initial=function(){a.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,s=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(s=s*this.radius),this.d=Math.floor(s*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*s,end:this.innerRadius*s+this.d*.99}},i.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;this.isTransposed&&(s=[f,l],l=s[0],f=s[1]);var d=this.convertDim(l,"x"),m=this.a*d,x=this.convertDim(f,"y");return{x:this.center.x+Math.cos(d)*(m+x),y:this.center.y+Math.sin(d)*(m+x)}},i.prototype.invertPoint=function(t){var s,l=this.d+this.y.start,f=wa.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),d=eo.Dg(f,[1,0],!0),m=d*this.a;wa.kE(f)<m&&(m=wa.kE(f));var x=Math.floor((wa.kE(f)-m)/l);d=2*x*Math.PI+d;var T=this.a*d,O=wa.kE(f)-T;O=(0,b.vQ)(O,0)?0:O;var D=this.invertDim(d,"x"),B=this.invertDim(O,"y");return D=(0,b.vQ)(D,0)?0:D,B=(0,b.vQ)(B,0)?0:B,this.isTransposed&&(s=[B,D],D=s[0],B=s[1]),{x:D,y:B}},i}(uh),Df=lh,su=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.isPolar=!0,s.type="polar";var l=t.startAngle,f=l===void 0?-Math.PI/2:l,d=t.endAngle,m=d===void 0?Math.PI*3/2:d,x=t.innerRadius,T=x===void 0?0:x,O=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=T,s.radius=O,s.initial(),s}return i.prototype.initial=function(){for(a.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),s=t.maxX-t.minX,l=t.maxY-t.minY,f=Math.abs(t.minX)/s,d=Math.abs(t.minY)/l,m;this.height/l>this.width/s?(m=this.width/s,this.circleCenter={x:this.center.x-(.5-f)*this.width,y:this.center.y-(.5-d)*m*l}):(m=this.height/l,this.circleCenter={x:this.center.x-(.5-f)*m*s,y:this.center.y-(.5-d)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=m*this.radius:(this.radius<=0||this.radius>m)&&(this.polarRadius=m):this.polarRadius=m,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},i.prototype.getRadius=function(){return this.polarRadius},i.prototype.convertPoint=function(t){var s,l=this.getCenter(),f=t.x,d=t.y;return this.isTransposed&&(s=[d,f],f=s[0],d=s[1]),f=this.convertDim(f,"x"),d=this.convertDim(d,"y"),{x:l.x+Math.cos(f)*d,y:l.y+Math.sin(f)*d}},i.prototype.invertPoint=function(t){var s,l=this.getCenter(),f=[t.x-l.x,t.y-l.y],d=this,m=d.startAngle,x=d.endAngle;this.isReflect("x")&&(s=[x,m],m=s[0],x=s[1]);var T=[1,0,0,0,1,0,0,0,1];eo.zu(T,T,m);var O=[1,0,0];so.transformMat3(O,O,T);var D=[O[0],O[1]],B=eo.Dg(D,f,x<m);(0,b.vQ)(B,Math.PI*2)&&(B=0);var U=wa.kE(f),J=B/(x-m);J=x-m>0?J:-J;var pe=this.invertDim(U,"y"),Ee={x:0,y:0};return Ee.x=this.isTransposed?pe:J,Ee.y=this.isTransposed?J:pe,Ee},i.prototype.getCenter=function(){return this.circleCenter},i.prototype.getOneBox=function(){var t=this.startAngle,s=this.endAngle;if(Math.abs(s-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var l=[0,Math.cos(t),Math.cos(s)],f=[0,Math.sin(t),Math.sin(s)],d=Math.min(t,s);d<Math.max(t,s);d+=Math.PI/18)l.push(Math.cos(d)),f.push(Math.sin(d));return{minX:Math.min.apply(Math,l),maxX:Math.max.apply(Math,l),minY:Math.min.apply(Math,f),maxY:Math.max.apply(Math,f)}},i}(uh),us=su,ch={},Zd=function(a){return ch[a.toLowerCase()]},bs=function(a,i){ch[a.toLowerCase()]=i};bs("rect",Ud),bs("cartesian",Ud),bs("polar",us),bs("helix",Df);function Ni(a,i,t){var s=new rt.Event(i,t);s.target=a,s.propagationPath.push(a),a.emitDelegation(i,s);for(var l=a.getParent();l;)l.emitDelegation(i,s),s.propagationPath.push(l),l=l.getParent()}var ol=[1,0,0,0,1,0,0,0,1];function nc(a,i,t){if(t===void 0&&(t=ol),!i)return null;var s=eo.vs(t,[["t",-a.x,-a.y],["r",i],["t",a.x,a.y]]);return s}function fh(a,i){return!a.x&&!a.y?null:eo.vs(i||ol,[["t",a.x,a.y]])}function _l(a){var i=[1,0,0],t=[0,0,0];return so.transformMat3(t,i,a),Math.atan2(t[1],t[0])}function Ho(a,i){var t=[0,0];return wa.kK(t,i,a),t}function ed(a,i){var t=Ho(a,[i.minX,i.minY]),s=Ho(a,[i.maxX,i.minY]),l=Ho(a,[i.minX,i.maxY]),f=Ho(a,[i.maxX,i.maxY]),d=Math.min(t[0],s[0],l[0],f[0]),m=Math.max(t[0],s[0],l[0],f[0]),x=Math.min(t[1],s[1],l[1],f[1]),T=Math.max(t[1],s[1],l[1],f[1]);return{x:d,y:x,minX:d,minY:x,maxX:m,maxY:T,width:m-d,height:T-x}}function Qn(a,i,t,s){if(i){var l=nc({x:t,y:s},i,a.getMatrix());a.setMatrix(l)}}function Kc(a,i,t){var s=fh({x:i,y:t});a.attr("matrix",s)}function Dc(a){var i=0,t=0,s=0,l=0;return(0,b.hj)(a)?i=t=s=l=a:(0,b.kJ)(a)&&(i=a[0],s=(0,b.UM)(a[1])?a[0]:a[1],l=(0,b.UM)(a[2])?a[0]:a[2],t=(0,b.UM)(a[3])?s:a[3]),[i,s,l,t]}function _p(a){for(var i=a.childNodes,t=i.length,s=t-1;s>=0;s--)a.removeChild(i[s])}function gc(a,i){return!!a.className.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))}function sl(a){var i=a.start,t=a.end,s=Math.min(i.x,t.x),l=Math.min(i.y,t.y),f=Math.max(i.x,t.x),d=Math.max(i.y,t.y);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Lh(a){var i=a.map(function(m){return m.x}),t=a.map(function(m){return m.y}),s=Math.min.apply(Math,i),l=Math.min.apply(Math,t),f=Math.max.apply(Math,i),d=Math.max.apply(Math,t);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function vf(a,i,t,s){var l=a+t,f=i+s;return{x:a,y:i,width:t,height:s,minX:a,minY:i,maxX:isNaN(l)?0:l,maxY:isNaN(f)?0:f}}function Zs(a,i,t){return(1-t)*a+i*t}function Ol(a,i,t){return{x:a.x+Math.cos(t)*i,y:a.y+Math.sin(t)*i}}function Vd(a,i){var t=i.x-a.x,s=i.y-a.y;return Math.sqrt(t*t+s*s)}var xp=function(a){return new Promise(function(i){setTimeout(i,a)})},Lf=function(a,i,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[a,i].includes(1/0)?Math.abs(a)===Math.abs(i):Math.abs(a-i)<t};function Ev(a,i){var t=Math.max(a.minX,i.minX),s=Math.max(a.minY,i.minY),l=Math.min(a.maxX,i.maxX),f=Math.min(a.maxY,i.maxY);return vf(t,s,l-t,f-s)}function ic(a,i){var t=Math.min(a.minX,i.minX),s=Math.min(a.minY,i.minY),l=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return vf(t,s,l-t,f-s)}function ac(a){var i=a.getClip(),t=i&&i.getBBox(),s;if(!a.isGroup())s=a.getBBox();else{var l=1/0,f=-1/0,d=1/0,m=-1/0,x=a.getChildren();x.length>0?(0,b.S6)(x,function(T){if(T.get("visible")){if(T.isGroup()&&T.get("children").length===0)return!0;var O=ac(T),D=T.applyToMatrix([O.minX,O.minY,1]),B=T.applyToMatrix([O.minX,O.maxY,1]),U=T.applyToMatrix([O.maxX,O.minY,1]),J=T.applyToMatrix([O.maxX,O.maxY,1]),pe=Math.min(D[0],B[0],U[0],J[0]),Ee=Math.max(D[0],B[0],U[0],J[0]),Ce=Math.min(D[1],B[1],U[1],J[1]),st=Math.max(D[1],B[1],U[1],J[1]);pe<l&&(l=pe),Ee>f&&(f=Ee),Ce<d&&(d=Ce),st>m&&(m=st)}}):(l=0,f=0,d=0,m=0),s=vf(l,d,f-l,m-d)}return t?Ev(s,t):s}function Ca(a,i){if(!(!a.getClip()&&!i.getClip())){var t=i.getClip();if(!t){a.setClip(null);return}var s={type:t.get("type"),attrs:t.attr()};a.setClip(s)}}function Os(a){return a+"px"}function zl(a,i,t,s){var l=Vd(a,i),f=s/l,d=0;return t==="start"?d=0-f:t==="end"&&(d=1+f),{x:Zs(a.x,i.x,d),y:Zs(a.y,i.y,d)}}var Gu={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},hh=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.initCfg(),s}return i.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},i.prototype.clear=function(){},i.prototype.update=function(t){var s=this,l=this.get("defaultCfg")||{};(0,b.S6)(t,function(f,d){var m=s.get(d),x=f;m!==f&&((0,b.Kn)(f)&&l[d]&&(x=(0,b.b$)({},l[d],f)),s.set(d,x))}),this.updateInner(t),this.afterUpdate(t)},i.prototype.updateInner=function(t){},i.prototype.afterUpdate=function(t){(0,b.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,b.wH)(t,"capture")&&this.setCapture(t.capture)},i.prototype.getLayoutBBox=function(){return this.getBBox()},i.prototype.getLocationType=function(){return this.get("locationType")},i.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},i.prototype.setOffset=function(t,s){this.update({offsetX:t,offsetY:s})},i.prototype.setLocation=function(t){var s=(0,A.pi)({},t);this.update(s)},i.prototype.getLocation=function(){var t=this,s={},l=this.get("locationType"),f=Gu[l];return(0,b.S6)(f,function(d){s[d]=t.get(d)}),s},i.prototype.isList=function(){return!1},i.prototype.isSlider=function(){return!1},i.prototype.init=function(){},i.prototype.initCfg=function(){var t=this,s=this.get("defaultCfg");(0,b.S6)(s,function(l,f){var d=t.get(f);if((0,b.Kn)(d)){var m=(0,b.b$)({},l,d);t.set(f,m)}})},i}(rt.Base),Qc=hh,Nu="update_status",xl=["visible","tip","delegateObject"],gf=["container","group","shapesMap","isRegister","isUpdating","destroyed"],Ji=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},i.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},i.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},i.prototype.getChildComponentById=function(t){var s=this.getElementById(t),l=s&&s.get("component");return l},i.prototype.getElementById=function(t){return this.get("shapesMap")[t]},i.prototype.getElementByLocalId=function(t){var s=this.getElementId(t);return this.getElementById(s)},i.prototype.getElementsByName=function(t){var s=[];return(0,b.S6)(this.get("shapesMap"),function(l){l.get("name")===t&&s.push(l)}),s},i.prototype.getContainer=function(){return this.get("container")},i.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},i.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var s=this.get("group");this.updateElements(t,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},i.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},i.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},i.prototype.setCapture=function(t){var s=this.get("group");s.set("capture",t),this.set("capture",t)},i.prototype.destroy=function(){this.removeEvent(),this.remove(),a.prototype.destroy.call(this)},i.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},i.prototype.getLayoutBBox=function(){var t=this.get("group"),s=this.getInnerLayoutBBox(),l=t.getTotalMatrix();return l&&(s=ed(l,s)),s},i.prototype.on=function(t,s,l){var f=this.get("group");return f.on(t,s,l),this},i.prototype.off=function(t,s){var l=this.get("group");return l&&l.off(t,s),this},i.prototype.emit=function(t,s){var l=this.get("group");l.emit(t,s)},i.prototype.init=function(){a.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},i.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},i.prototype.delegateEmit=function(t,s){var l=this.get("group");s.target=l,l.emit(t,s),Ni(l,t,s)},i.prototype.createOffScreenGroup=function(){var t=this.get("group"),s=t.getGroupBase(),l=new s({delegateObject:this.getDelegateObject()});return l},i.prototype.applyOffset=function(){var t=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:s})},i.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},i.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",ac(t)),t},i.prototype.addGroup=function(t,s){this.appendDelegateObject(t,s);var l=t.addGroup(s);return this.get("isRegister")&&this.registerElement(l),l},i.prototype.addShape=function(t,s){this.appendDelegateObject(t,s);var l=t.addShape(s);return this.get("isRegister")&&this.registerElement(l),l},i.prototype.addComponent=function(t,s){var l=s.id,f=s.component,d=(0,A._T)(s,["id","component"]),m=new f((0,A.pi)((0,A.pi)({},d),{id:l,container:t,updateAutoRender:this.get("updateAutoRender")}));return m.init(),m.render(),this.get("isRegister")&&this.registerElement(m.get("group")),m},i.prototype.initEvent=function(){},i.prototype.removeEvent=function(){var t=this.get("group");t.off()},i.prototype.getElementId=function(t){var s=this.get("id"),l=this.get("name");return s+"-"+l+"-"+t},i.prototype.registerElement=function(t){var s=t.get("id");this.get("shapesMap")[s]=t},i.prototype.unregisterElement=function(t){var s=t.get("id");delete this.get("shapesMap")[s]},i.prototype.moveElementTo=function(t,s){var l=fh(s);t.attr("matrix",l)},i.prototype.addAnimation=function(t,s,l){var f=s.attr("opacity");(0,b.UM)(f)&&(f=1),s.attr("opacity",0),s.animate({opacity:f},l)},i.prototype.removeAnimation=function(t,s,l){s.animate({opacity:0},l)},i.prototype.updateAnimation=function(t,s,l,f){s.animate(l,f)},i.prototype.updateElements=function(t,s){var l=this,f=this.get("animate"),d=this.get("animateOption"),m=t.getChildren().slice(0),x;(0,b.S6)(m,function(T){var O=T.get("id"),D=l.getElementById(O),B=T.get("name");if(D)if(T.get("isComponent")){var U=T.get("component"),J=D.get("component"),pe=(0,b.ei)(U.cfg,(0,b.e5)((0,b.XP)(U.cfg),gf));J.update(pe),D.set(Nu,"update")}else{var Ee=l.getReplaceAttrs(D,T);f&&d.update?l.updateAnimation(B,D,Ee,d.update):D.attr(Ee),T.isGroup()&&l.updateElements(T,D),(0,b.S6)(xl,function(bt){D.set(bt,T.get(bt))}),Ca(D,T),x=D,D.set(Nu,"update")}else{s.add(T);var Ce=s.getChildren();if(Ce.splice(Ce.length-1,1),x){var st=Ce.indexOf(x);Ce.splice(st+1,0,T)}else Ce.unshift(T);if(l.registerElement(T),T.set(Nu,"add"),T.get("isComponent")){var U=T.get("component");U.set("container",s)}else T.isGroup()&&l.registerNewGroup(T);if(x=T,f){var gt=l.get("isInit")?d.appear:d.enter;gt&&l.addAnimation(B,T,gt)}}})},i.prototype.clearUpdateStatus=function(t){var s=t.getChildren();(0,b.S6)(s,function(l){l.set(Nu,null)})},i.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},i.prototype.getDelegateObject=function(){var t,s=this.get("name"),l=(t={},t[s]=this,t.component=this,t);return l},i.prototype.appendDelegateObject=function(t,s){var l=t.get("delegateObject");s.delegateObject||(s.delegateObject={}),(0,b.CD)(s.delegateObject,l)},i.prototype.getReplaceAttrs=function(t,s){var l=t.attr(),f=s.attr();return(0,b.S6)(l,function(d,m){f[m]===void 0&&(f[m]=void 0)}),f},i.prototype.registerNewGroup=function(t){var s=this,l=t.getChildren();(0,b.S6)(l,function(f){s.registerElement(f),f.set(Nu,"add"),f.isGroup()&&s.registerNewGroup(f)})},i.prototype.deleteElements=function(){var t=this,s=this.get("shapesMap"),l=[];(0,b.S6)(s,function(m,x){!m.get(Nu)||m.destroyed?l.push([x,m]):m.set(Nu,null)});var f=this.get("animate"),d=this.get("animateOption");(0,b.S6)(l,function(m){var x=m[0],T=m[1];if(!T.destroyed){var O=T.get("name");if(f&&d.leave){var D=(0,b.CD)({callback:function(){t.removeElement(T)}},d.leave);t.removeAnimation(O,T,D)}else t.removeElement(T)}delete s[x]})},i.prototype.removeElement=function(t){if(t.get("isGroup")){var s=t.get("component");s&&s.destroy()}t.remove()},i}(Qc),wi=Ji,ul="\u2026";function bl(a){for(var i=0,t=0;t<a.length;t++)i+=ll(a,t);return i}function ll(a,i){return a.charCodeAt(i)>0&&a.charCodeAt(i)<128?1:2}function Ss(a,i,t){t===void 0&&(t="tail");var s=a.length,l="";if(t==="tail"){for(var f=0,d=0;f<i;){var m=ll(a,d);if(f+m<=i)l+=a[d],f+=ll(a,d),d++;else break}l+=ul}else if(t==="head"){for(var f=0,d=s-1;f<i;){var m=ll(a,d);if(f+m<=i)l+=a[d],f+=ll(a,d),d--;else break}l=ul+l}else{for(var x="",T="",f=0,O=0,D=s-1;f<i;){var B=ll(a,O),U=!1;B+f<=i&&(x+=a[O],O++,f+=B,U=!0);var J=ll(a,D);if(J+f<=i&&(T=a[D]+T,f+=J,D--,U=!0),!U)break}l=x+ul+T}return l}var mc="\u2026",mf=2,Fh=400;function Vo(a){for(var i=a.map(function(x){var T=x.attr("text");return(0,b.UM)(T)?"":""+T}),t=0,s=0,l=0;l<i.length;l+=1){for(var f=0,d=0;d<=i[l].length;d+=1){var m=i[l].charCodeAt(d);m>=19968&&m<=40869?f+=2:f+=1}f>t&&(t=f,s=l)}return a[s].getBBox().width}function uu(a){if(a.length>Fh)return Vo(a);var i=0;return(0,b.S6)(a,function(t){var s=t.getBBox(),l=s.width;i<l&&(i=l)}),i}function td(a,i){var t=i.getCanvasBBox();return a?t.width:t.height}function Bh(a,i){return a.getBBox().width<i}function Ff(a,i,t,s){var l;s===void 0&&(s="tail");var f=(l=i.attr("text"))!==null&&l!==void 0?l:"";if(s==="tail"){var d=(0,b.ei)(i.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),m=(0,b.Lo)(f,t,d,"\u2026");return f!==m?(i.attr("text",m),i.set("tip",f),!0):(i.set("tip",null),!1)}var x=td(a,i),T=bl(f),O=!1;if(t<x){var D=Math.floor(t/x*T)-mf,B=void 0;D>=0?B=Ss(f,D,s):B=mc,B&&(i.attr("text",B),O=!0)}return O?i.set("tip",f):i.set("tip",null),O}function yc(a,i){var t=i.x,s=i.y,l=i.content,f=i.style,d=i.id,m=i.name,x=i.rotate,T=i.maxLength,O=i.autoEllipsis,D=i.isVertical,B=i.ellipsisPosition,U=i.background,J=a.addGroup({id:d+"-group",name:m+"-group",attrs:{x:t,y:s}}),pe=J.addShape({type:"text",id:d,name:m,attrs:(0,A.pi)({x:0,y:0,text:l},f)}),Ee=Dc((0,b.U2)(U,"padding",0));if(T&&O){var Ce=T-(Ee[1]+Ee[3]);Ff(!D,pe,Ce,B)}if(U){var st=(0,b.U2)(U,"style",{}),gt=pe.getCanvasBBox(),bt=gt.minX,Ft=gt.minY,xr=gt.width,Fr=gt.height,$r=J.addShape("rect",{id:d+"-bg",name:d+"-bg",attrs:(0,A.pi)({x:bt-Ee[3],y:Ft-Ee[0],width:xr+Ee[1]+Ee[3],height:Fr+Ee[0]+Ee[2]},st)});$r.toBack()}Kc(J,t,s),Qn(J,x,t,s)}var Ma={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},Nh=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Ma.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Ma.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Ma.lineColor,lineWidth:1}}}})},i.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},i.prototype.renderLine=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,A.pi)({x1:s.x,y1:s.y,x2:l.x,y2:l.y},f)})},i.prototype.getLabelPoint=function(t,s,l){var f;return l==="start"?f=0:l==="center"?f=.5:(0,b.HD)(l)&&l.indexOf("%")!==-1?f=parseInt(l,10)/100:(0,b.hj)(l)?f=l:f=1,(f>1||f<0)&&(f=1),{x:Zs(t.x,s.x,f),y:Zs(t.y,s.y,f)}},i.prototype.renderLabel=function(t){var s=this.get("text"),l=this.get("start"),f=this.get("end"),d=s.position,m=s.content,x=s.style,T=s.offsetX,O=s.offsetY,D=s.autoRotate,B=s.maxLength,U=s.autoEllipsis,J=s.ellipsisPosition,pe=s.background,Ee=s.isVertical,Ce=Ee===void 0?!1:Ee,st=this.getLabelPoint(l,f,d),gt=st.x+T,bt=st.y+O,Ft={id:this.getElementId("line-text"),name:"annotation-line-text",x:gt,y:bt,content:m,style:x,maxLength:B,autoEllipsis:U,ellipsisPosition:J,background:pe,isVertical:Ce};if(D){var xr=[f.x-l.x,f.y-l.y];Ft.rotate=Math.atan2(xr[1],xr[0])}yc(t,Ft)},i}(wi),Lc=Nh,rd=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Ma.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Ma.fontFamily}}})},i.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},i.prototype.renderInner=function(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("content"),m=this.get("style"),x=this.getElementId("text"),T=this.get("name")+"-text",O=this.get("maxLength"),D=this.get("autoEllipsis"),B=this.get("isVertical"),U=this.get("ellipsisPosition"),J=this.get("background"),pe=this.get("rotate"),Ee={id:x,name:T,x:l,y:f,content:d,style:m,maxLength:O,autoEllipsis:D,isVertical:B,ellipsisPosition:U,background:J,rotate:pe};yc(t,Ee)},i.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("rotate");Kc(t,l,f),Qn(t,d,l,f)}},i}(wi),zh=rd,ph=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},i.prototype.renderInner=function(t){this.renderArc(t)},i.prototype.getArcPath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=Ol(s,l,f),x=Ol(s,l,d),T=d-f>Math.PI?1:0,O=[["M",m.x,m.y]];if(d-f===Math.PI*2){var D=Ol(s,l,f+Math.PI);O.push(["A",l,l,0,T,1,D.x,D.y]),O.push(["A",l,l,0,T,1,x.x,x.y])}else O.push(["A",l,l,0,T,1,x.x,x.y]);return O},i.prototype.renderArc=function(t){var s=this.getArcPath(),l=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,A.pi)({path:s},l)})},i}(wi),bp=ph,Uh=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Ma.regionColor,opacity:.4}}})},i.prototype.renderInner=function(t){this.renderRegion(t)},i.prototype.renderRegion=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style"),d=sl({start:s,end:l});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,A.pi)({x:d.x,y:d.y,width:d.width,height:d.height},f)})},i}(wi),pn=Uh,Mr=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},i.prototype.renderInner=function(t){this.renderImage(t)},i.prototype.getImageAttrs=function(){var t=this.get("start"),s=this.get("end"),l=this.get("style"),f=sl({start:t,end:s}),d=this.get("src");return(0,A.pi)({x:f.x,y:f.y,img:d,width:f.width,height:f.height},l)},i.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},i}(wi),Ve=Mr,Fc=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Ma.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Ma.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Ma.fontFamily}}}})},i.prototype.renderInner=function(t){(0,b.U2)(this.get("line"),"display")&&this.renderLine(t),(0,b.U2)(this.get("text"),"display")&&this.renderText(t),(0,b.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},i.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},i.prototype.renderPoint=function(t){var s=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:s})},i.prototype.renderLine=function(t){var s=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:s})},i.prototype.renderText=function(t){var s=this.getShapeAttrs().text,l=s.x,f=s.y,d=s.text,m=(0,A._T)(s,["x","y","text"]),x=this.get("text"),T=x.background,O=x.maxLength,D=x.autoEllipsis,B=x.isVertival,U=x.ellipsisPosition,J={x:l,y:f,id:this.getElementId("text"),name:"annotation-text",content:d,style:m,background:T,maxLength:O,autoEllipsis:D,isVertival:B,ellipsisPosition:U};yc(t,J)},i.prototype.autoAdjust=function(t){var s=this.get("direction"),l=this.get("x"),f=this.get("y"),d=(0,b.U2)(this.get("line"),"length",0),m=this.get("coordinateBBox"),x=t.getBBox(),T=x.minX,O=x.maxX,D=x.minY,B=x.maxY,U=t.findById(this.getElementId("text-group")),J=t.findById(this.getElementId("text")),pe=t.findById(this.getElementId("line"));if(m&&U){var Ee=U.attr("x"),Ce=U.attr("y"),st=J.getCanvasBBox(),gt=st.width,bt=st.height,Ft=0,xr=0;if(l+T<=m.minX)if(s==="leftward")Ft=1;else{var Fr=m.minX-(l+T);Ee=U.attr("x")+Fr}else if(l+O>=m.maxX)if(s==="rightward")Ft=-1;else{var Fr=l+O-m.maxX;Ee=U.attr("x")-Fr}if(Ft&&(pe&&pe.attr("path",[["M",0,0],["L",d*Ft,0]]),Ee=(d+2+gt)*Ft),f+D<=m.minY)if(s==="upward")xr=1;else{var Fr=m.minY-(f+D);Ce=U.attr("y")+Fr}else if(f+B>=m.maxY)if(s==="downward")xr=-1;else{var Fr=f+B-m.maxY;Ce=U.attr("y")-Fr}xr&&(pe&&pe.attr("path",[["M",0,0],["L",0,d*xr]]),Ce=(d+2+bt)*xr),(Ee!==U.attr("x")||Ce!==U.attr("y"))&&Kc(U,Ee,Ce)}},i.prototype.getShapeAttrs=function(){var t=(0,b.U2)(this.get("line"),"display"),s=(0,b.U2)(this.get("point"),"style",{}),l=(0,b.U2)(this.get("line"),"style",{}),f=(0,b.U2)(this.get("text"),"style",{}),d=this.get("direction"),m=t?(0,b.U2)(this.get("line"),"length",0):0,x=0,T=0,O="top",D="start";switch(d){case"upward":T=-1,O="bottom";break;case"downward":T=1,O="top";break;case"leftward":x=-1,D="end";break;case"rightward":x=1,D="start";break}return{point:(0,A.pi)({x:0,y:0},s),line:(0,A.pi)({path:[["M",0,0],["L",m*x,m*T]]},l),text:(0,A.pi)({x:(m+2)*x,y:(m+2)*T,text:(0,b.U2)(this.get("text"),"content",""),textBaseline:O,textAlign:D},f)}},i}(wi),Jt=Fc,Bf=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Ma.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Ma.textColor,fontFamily:Ma.fontFamily}}}})},i.prototype.renderInner=function(t){var s=(0,b.U2)(this.get("region"),"style",{}),l=(0,b.U2)(this.get("text"),"style",{}),f=this.get("lineLength")||0,d=this.get("points");if(d.length){var m=Lh(d),x=[];x.push(["M",d[0].x,m.minY-f]),d.forEach(function(O){x.push(["L",O.x,O.y])}),x.push(["L",d[d.length-1].x,d[d.length-1].y-f]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,A.pi)({path:x},s)});var T=(0,A.pi)({id:this.getElementId("text"),name:"annotation-text",x:(m.minX+m.maxX)/2,y:m.minY-f},this.get("text"));yc(t,T)}},i}(wi),Es=Bf,Sp=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},i.prototype.renderInner=function(t){var s=this,l=this.get("start"),f=this.get("end"),d=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,b.S6)(this.get("shapes"),function(x,T){var O=x.get("type"),D=(0,b.d9)(x.attr());s.adjustShapeAttrs(D),s.addShape(d,{id:s.getElementId("shape-"+O+"-"+T),capture:!1,type:O,attrs:D})});var m=sl({start:l,end:f});d.setClip({type:"rect",attrs:{x:m.minX,y:m.minY,width:m.width,height:m.height}})},i.prototype.adjustShapeAttrs=function(t){var s=this.get("color");t.fill&&(t.fill=t.fillStyle=s),t.stroke=t.strokeStyle=s},i}(wi),Nf=Sp,Ul=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"shape",draw:b.ZT})},i.prototype.renderInner=function(t){var s=this.get("render");(0,b.mf)(s)&&s(t)},i}(wi),Ep=Ul;function E(a,i,t){var s;try{s=window.getComputedStyle?window.getComputedStyle(a,null)[i]:a.style[i]}catch(l){}finally{s=s===void 0?t:s}return s}function M(a,i){var t=E(a,"width",i);return t==="auto"&&(t=a.offsetWidth),parseFloat(t)}function C(a,i){var t=M(a,i),s=parseFloat(E(a,"borderLeftWidth"))||0,l=parseFloat(E(a,"paddingLeft"))||0,f=parseFloat(E(a,"paddingRight"))||0,d=parseFloat(E(a,"borderRightWidth"))||0,m=parseFloat(E(a,"marginRight"))||0,x=parseFloat(E(a,"marginLeft"))||0;return t+s+d+l+f+x+m}function I(a,i){var t=E(a,"height",i);return t==="auto"&&(t=a.offsetHeight),parseFloat(t)}function V(a,i){var t=I(a,i),s=parseFloat(E(a,"borderTopWidth"))||0,l=parseFloat(E(a,"paddingTop"))||0,f=parseFloat(E(a,"paddingBottom"))||0,d=parseFloat(E(a,"borderBottomWidth"))||0,m=parseFloat(E(a,"marginTop"))||0,x=parseFloat(E(a,"marginBottom"))||0;return t+s+d+l+f+m+x}var ie=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},i.prototype.getContainer=function(){return this.get("container")},i.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},i.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},i.prototype.setCapture=function(t){var s=this.getContainer(),l=t?"auto":"none";s.style.pointerEvents=l,this.set("capture",t)},i.prototype.getBBox=function(){var t=this.getContainer(),s=parseFloat(t.style.left)||0,l=parseFloat(t.style.top)||0;return vf(s,l,t.clientWidth,t.clientHeight)},i.prototype.clear=function(){var t=this.get("container");_p(t)},i.prototype.destroy=function(){this.removeEvent(),this.removeDom(),a.prototype.destroy.call(this)},i.prototype.init=function(){a.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},i.prototype.initCapture=function(){this.setCapture(this.get("capture"))},i.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},i.prototype.initDom=function(){},i.prototype.initContainer=function(){var t=this.get("container");if((0,b.UM)(t)){t=this.createDom();var s=this.get("parent");(0,b.HD)(s)&&(s=document.getElementById(s),this.set("parent",s)),s.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,b.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},i.prototype.resetStyles=function(){var t=this.get("domStyles"),s=this.get("defaultStyles");t?t=(0,b.b$)({},s,t):t=s,this.set("domStyles",t)},i.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var s=this.getContainer();this.applyChildrenStyles(s,t);var l=this.get("containerClassName");if(l&&gc(s,l)){var f=t[l];(0,he.Z)(s,f)}}},i.prototype.applyChildrenStyles=function(t,s){(0,b.S6)(s,function(l,f){var d=t.getElementsByClassName(f);(0,b.S6)(d,function(m){(0,he.Z)(m,l)})})},i.prototype.applyStyle=function(t,s){var l=this.get("domStyles");(0,he.Z)(s,l[t])},i.prototype.createDom=function(){var t=this.get("containerTpl");return(0,Ke.Z)(t)},i.prototype.initEvent=function(){},i.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},i.prototype.removeEvent=function(){},i.prototype.updateInner=function(t){(0,b.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},i.prototype.resetPosition=function(){},i}(Qc),fe=ie,Oe=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},i.prototype.render=function(){var t=this.getContainer(),s=this.get("html");_p(t);var l=(0,b.mf)(s)?s(t):s;if((0,b.kK)(l))t.appendChild(l);else if((0,b.HD)(l)||(0,b.hj)(l)){var f=(0,Ke.Z)(""+l);f&&t.appendChild(f)}this.resetPosition()},i.prototype.resetPosition=function(){var t=this.getContainer(),s=this.getLocation(),l=s.x,f=s.y,d=this.get("alignX"),m=this.get("alignY"),x=this.get("offsetX"),T=this.get("offsetY"),O=C(t),D=V(t),B={x:l,y:f};d==="middle"?B.x-=Math.round(O/2):d==="right"&&(B.x-=Math.round(O)),m==="middle"?B.y-=Math.round(D/2):m==="bottom"&&(B.y-=Math.round(D)),x&&(B.x+=x),T&&(B.y+=T),(0,he.Z)(t,{position:"absolute",left:B.x+"px",top:B.y+"px",zIndex:this.get("zIndex")})},i}(fe),ut=Oe;function Et(a,i,t){var s=i+"Style",l=null;return(0,b.S6)(t,function(f,d){a[d]&&f[s]&&(l||(l={}),(0,b.CD)(l,f[s]))}),l}var Wt=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Ma.lineColor}},tickLine:{style:{lineWidth:1,stroke:Ma.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Ma.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Ma.textColor,fontFamily:Ma.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Ma.textColor,textBaseline:"middle",fontFamily:Ma.fontFamily,textAlign:"center"},iconStyle:{fill:Ma.descriptionIconFill,stroke:Ma.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Ma.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},i.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},i.prototype.isList=function(){return!0},i.prototype.getItems=function(){return this.get("ticks")},i.prototype.setItems=function(t){this.update({ticks:t})},i.prototype.updateItem=function(t,s){(0,b.CD)(t,s),this.clear(),this.render()},i.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},i.prototype.setItemState=function(t,s,l){t[s]=l,this.updateTickStates(t)},i.prototype.hasState=function(t,s){return!!t[s]},i.prototype.getItemStates=function(t){var s=this.get("tickStates"),l=[];return(0,b.S6)(s,function(f,d){t[d]&&l.push(d)}),l},i.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,b.S6)(l,function(f){s.setItemState(f,t,!1)})},i.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,b.hX)(l,function(f){return s.hasState(f,t)})},i.prototype.getSidePoint=function(t,s){var l=this,f=l.getSideVector(s,t);return{x:t.x+f[0],y:t.y+f[1]}},i.prototype.getTextAnchor=function(t){var s;return(0,b.vQ)(t[0],0)?s="center":t[0]>0?s="start":t[0]<0&&(s="end"),s},i.prototype.getTextBaseline=function(t){var s;return(0,b.vQ)(t[1],0)?s="middle":t[1]>0?s="top":t[1]<0&&(s="bottom"),s},i.prototype.processOverlap=function(t){},i.prototype.drawLine=function(t){var s=this.getLinePath(),l=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,b.CD)({path:s},l.style)})},i.prototype.getTickLineItems=function(t){var s=this,l=[],f=this.get("tickLine"),d=f.alignTick,m=f.length,x=1,T=t.length;return T>=2&&(x=t[1].value-t[0].value),(0,b.S6)(t,function(O){var D=O.point;d||(D=s.getTickPoint(O.value-x/2));var B=s.getSidePoint(D,m);l.push({startPoint:D,tickValue:O.value,endPoint:B,tickId:O.id,id:"tickline-"+O.id})}),l},i.prototype.getSubTickLineItems=function(t){var s=[],l=this.get("subTickLine"),f=l.count,d=t.length;if(d>=2)for(var m=0;m<d-1;m++)for(var x=t[m],T=t[m+1],O=0;O<f;O++){var D=(O+1)/(f+1),B=(1-D)*x.tickValue+D*T.tickValue,U=this.getTickPoint(B),J=this.getSidePoint(U,l.length);s.push({startPoint:U,endPoint:J,tickValue:B,id:"sub-"+x.id+"-"+O})}return s},i.prototype.getTickLineAttrs=function(t,s,l,f){var d=this.get(s).style,m={points:[t.startPoint,t.endPoint]},x=(0,b.U2)(this.get("theme"),["tickLine","style"],{});d=(0,b.mf)(d)?(0,b.CD)({},x,d(m,l,f)):d;var T=t.startPoint,O=t.endPoint;return(0,A.pi)({x1:T.x,y1:T.y,x2:O.x,y2:O.y},d)},i.prototype.drawTick=function(t,s,l,f,d){this.addShape(s,{type:"line",id:this.getElementId(t.id),name:"axis-"+l,attrs:this.getTickLineAttrs(t,l,f,d)})},i.prototype.drawTickLines=function(t){var s=this,l=this.get("ticks"),f=this.get("subTickLine"),d=this.getTickLineItems(l),m=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),x=this.get("tickLine");if((0,b.S6)(d,function(O,D){if(x.displayWithLabel){var B=s.getElementId("label-"+O.tickId);t.findById(B)&&s.drawTick(O,m,"tickLine",D,d)}else s.drawTick(O,m,"tickLine",D,d)}),f){var T=this.getSubTickLineItems(d);(0,b.S6)(T,function(O,D){s.drawTick(O,m,"subTickLine",D,T)})}},i.prototype.processTicks=function(){var t=this,s=this.get("ticks");(0,b.S6)(s,function(l){l.point=t.getTickPoint(l.value),(0,b.UM)(l.id)&&(l.id=l.name)})},i.prototype.drawTicks=function(t){var s=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var l=this.get("ticks");(0,b.S6)(l,function(f){s.applyTickStates(f,t)})},i.prototype.optimizeTicks=function(){var t=this.get("optimize"),s=this.get("ticks");if(t&&t.enable&&t.threshold>0){var l=(0,b.dp)(s);if(l>t.threshold){var f=Math.ceil(l/t.threshold),d=s.filter(function(m,x){return x%f===0});this.set("ticks",d),this.set("originalTicks",s)}}},i.prototype.getLabelAttrs=function(t,s,l){var f=this.get("label"),d=f.offset,m=f.offsetX,x=f.offsetY,T=f.rotate,O=f.formatter,D=this.getSidePoint(t.point,d),B=this.getSideVector(d,D),U=O?O(t.name,t,s):t.name,J=f.style;J=(0,b.mf)(J)?(0,b.U2)(this.get("theme"),["label","style"],{}):J;var pe=(0,b.CD)({x:D.x+m,y:D.y+x,text:U,textAlign:this.getTextAnchor(B),textBaseline:this.getTextBaseline(B)},J);return T&&(pe.matrix=nc(D,T)),pe},i.prototype.drawLabels=function(t){var s=this,l=this.get("ticks"),f=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,b.S6)(l,function(B,U){s.addShape(f,{type:"text",name:"axis-label",id:s.getElementId("label-"+B.id),attrs:s.getLabelAttrs(B,U,l),delegateObject:{tick:B,item:B,index:U}})}),this.processOverlap(f);var d=f.getChildren(),m=(0,b.U2)(this.get("theme"),["label","style"],{}),x=this.get("label"),T=x.style,O=x.formatter;if((0,b.mf)(T)){var D=d.map(function(B){return(0,b.U2)(B.get("delegateObject"),"tick")});(0,b.S6)(d,function(B,U){var J=B.get("delegateObject").tick,pe=O?O(J.name,J,U):J.name,Ee=(0,b.CD)({},m,T(pe,U,D));B.attr(Ee)})}},i.prototype.getTitleAttrs=function(){var t=this.get("title"),s=t.style,l=t.position,f=t.offset,d=t.spacing,m=d===void 0?0:d,x=t.autoRotate,T=s.fontSize,O=.5;l==="start"?O=0:l==="end"&&(O=1);var D=this.getTickPoint(O),B=this.getSidePoint(D,f||m+T/2),U=(0,b.CD)({x:B.x,y:B.y,text:t.text},s),J=t.rotate,pe=J;if((0,b.UM)(J)&&x){var Ee=this.getAxisVector(D),Ce=[1,0];pe=eo.Dg(Ee,Ce,!0)}if(pe){var st=nc(B,pe);U.matrix=st}return U},i.prototype.drawTitle=function(t){var s,l=this.getTitleAttrs(),f=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:l});!((s=this.get("title"))===null||s===void 0)&&s.description&&this.drawDescriptionIcon(t,f,l.matrix)},i.prototype.drawDescriptionIcon=function(t,s,l){var f=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),d=s.getBBox(),m=d.maxX,x=d.maxY,T=d.height,O=this.get("title").iconStyle,D=4,B=T/2,U=B/6,J=m+D,pe=x-T/2,Ee=[J+B,pe-B],Ce=Ee[0],st=Ee[1],gt=[Ce+B,st+B],bt=gt[0],Ft=gt[1],xr=[Ce,Ft+B],Fr=xr[0],$r=xr[1],yn=[J,st+B],cn=yn[0],Bn=yn[1],hi=[J+B,pe-T/4],Hi=hi[0],aa=hi[1],Qa=[Hi,aa+U],Hn=Qa[0],Fi=Qa[1],na=[Hn,Fi+U],zi=na[0],gi=na[1],La=[zi,gi+B*3/4],So=La[0],ao=La[1];this.addShape(f,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,A.pi)({path:[["M",Ce,st],["A",B,B,0,0,1,bt,Ft],["A",B,B,0,0,1,Fr,$r],["A",B,B,0,0,1,cn,Bn],["A",B,B,0,0,1,Ce,st],["M",Hi,aa],["L",Hn,Fi],["M",zi,gi],["L",So,ao]],lineWidth:U,matrix:l},O)}),this.addShape(f,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:J,y:pe-T/2,width:T,height:T,stroke:"#000",fill:"#000",opacity:0,matrix:l,cursor:"pointer"}})},i.prototype.applyTickStates=function(t,s){var l=this.getItemStates(t);if(l.length){var f=this.get("tickStates"),d=this.getElementId("label-"+t.id),m=s.findById(d);if(m){var x=Et(t,"label",f);x&&m.attr(x)}var T=this.getElementId("tickline-"+t.id),O=s.findById(T);if(O){var D=Et(t,"tickLine",f);D&&O.attr(D)}}},i.prototype.updateTickStates=function(t){var s=this.getItemStates(t),l=this.get("tickStates"),f=this.get("label"),d=this.getElementByLocalId("label-"+t.id),m=this.get("tickLine"),x=this.getElementByLocalId("tickline-"+t.id);if(s.length){if(d){var T=Et(t,"label",l);T&&d.attr(T)}if(x){var O=Et(t,"tickLine",l);O&&x.attr(O)}}else d&&d.attr(f.style),x&&x.attr(m.style)},i}(wi),Xt=Wt;function Kt(a,i,t,s){var l=i.getChildren(),f=!1;return(0,b.S6)(l,function(d){var m=Ff(a,d,t,s);f=f||m}),f}function _r(){return Pr}function dr(a,i,t){return Kt(a,i,t,"head")}function Pr(a,i,t){return Kt(a,i,t,"tail")}function cr(a,i,t){return Kt(a,i,t,"middle")}function Dr(a){var i=a.attr("matrix");return i&&i[0]!==1}function Wr(a){var i=Dr(a)?_l(a.attr("matrix")):0;return i%360}function rn(a,i,t,s){var l=!1,f=Wr(i),d=Math.abs(a?t.attr("y")-i.attr("y"):t.attr("x")-i.attr("x")),m=(a?t.attr("y")>i.attr("y"):t.attr("x")>i.attr("x"))?i.getBBox():t.getBBox();if(a){var x=Math.abs(Math.cos(f));Lf(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}else{var x=Math.abs(Math.sin(f));Lf(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}return l}function xn(a,i,t,s){var l=(s==null?void 0:s.minGap)||0,f=i.getChildren().slice().filter(function(J){return J.get("visible")});if(!f.length)return!1;var d=!1;t&&f.reverse();for(var m=f.length,x=f[0],T=x,O=1;O<m;O++){var D=f[O],B=D.getBBox(),U=rn(a,T,D,l);U?(D.hide(),d=!0):T=D}return d}function dn(a,i,t){var s=(t==null?void 0:t.minGap)||0,l=i.getChildren().slice();if(l.length<2)return!1;var f=!1,d=l[0],m=d.getBBox(),x=l[1],T=l.length,O=Wr(d),D=Math.abs(a?x.attr("y")-d.attr("y"):x.attr("x")-d.attr("x")),B=0;if(a){var U=Math.abs(Math.cos(O));if(Lf(U,0,Math.PI/180)){var J=uu(l);B=(J+s)/D}else B=(m.height/U+s)/D}else{var U=Math.abs(Math.sin(O));if(Lf(U,0,Math.PI/180)){var J=uu(l);B=(J+s)/D}else B=(m.height/U+s)/D}if(B>1){B=Math.ceil(B);for(var pe=0;pe<T;pe++)pe%B!==0&&(l[pe].hide(),f=!0)}return f}function An(){return Ri}function Vn(a,i,t,s){return xn(a,i,!1,s)}function ui(a,i,t,s){return xn(a,i,!0,s)}function li(a,i,t,s){var l=(s==null?void 0:s.minGap)||0,f=i.getChildren().slice();if(f.length<=2)return!1;for(var d=!1,m=f.length,x=f[0],T=f[m-1],O=x,D=1;D<m-1;D++){var B=f[D],U=B.getBBox(),J=rn(a,O,B,l);J?(B.hide(),d=!0):O=B}var pe=rn(a,O,T,l);return pe&&(O.hide(),d=!0),d}function Ri(a,i,t,s){var l=dn(a,i,s);return xn(a,i,!1)&&(l=!0),l}function ea(a,i,t,s){var l=i.getChildren().slice(),f=dn(a,i,s);if(l.length>2){var d=l[0],m=l[l.length-1];d.get("visible")||(d.show(),xn(a,i,!1,s)&&(f=!0)),m.get("visible")||(m.show(),xn(a,i,!0,s)&&(f=!0))}return f}function ua(a,i){(0,b.S6)(a,function(t){var s=t.attr("x"),l=t.attr("y"),f=nc({x:s,y:l},i);t.attr("matrix",f)})}function ra(a,i,t,s){var l=i.getChildren();if(!l.length||!a&&l.length<2)return!1;var f=uu(l),d=!1;if(a)d=!!t&&f>t;else{var m=Math.abs(l[1].attr("x")-l[0].attr("x"));d=f>m}if(d){var x=s(t,f);ua(l,x)}return d}function uo(){return Li}function Li(a,i,t,s){return ra(a,i,t,function(){return(0,b.hj)(s)?s:a?Ma.verticalAxisRotate:Ma.horizontalAxisRotate})}function Oa(a,i,t){return ra(a,i,t,function(s,l){if(!s)return a?Ma.verticalAxisRotate:Ma.horizontalAxisRotate;if(a)return-Math.acos(s/l);var f=0;return s>l?f=Math.PI/4:(f=Math.asin(s/l),f>Math.PI/4&&(f=Math.PI/4)),f})}var Ha=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},i.prototype.getLinePath=function(){var t=this.get("start"),s=this.get("end"),l=[];return l.push(["M",t.x,t.y]),l.push(["L",s.x,s.y]),l},i.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),s=this.get("end"),l=a.prototype.getInnerLayoutBBox.call(this),f=Math.min(t.x,s.x,l.x),d=Math.min(t.y,s.y,l.y),m=Math.max(t.x,s.x,l.maxX),x=Math.max(t.y,s.y,l.maxY);return{x:f,y:d,minX:f,minY:d,maxX:m,maxY:x,width:m-f,height:x-d}},i.prototype.isVertical=function(){var t=this.get("start"),s=this.get("end");return(0,b.vQ)(t.x,s.x)},i.prototype.isHorizontal=function(){var t=this.get("start"),s=this.get("end");return(0,b.vQ)(t.y,s.y)},i.prototype.getTickPoint=function(t){var s=this,l=s.get("start"),f=s.get("end"),d=f.x-l.x,m=f.y-l.y;return{x:l.x+d*t,y:l.y+m*t}},i.prototype.getSideVector=function(t){var s=this.getAxisVector(),l=wa.Fv([0,0],s),f=this.get("verticalFactor"),d=[l[1],l[0]*-1];return wa.bA([0,0],d,t*f)},i.prototype.getAxisVector=function(){var t=this.get("start"),s=this.get("end");return[s.x-t.x,s.y-t.y]},i.prototype.processOverlap=function(t){var s=this,l=this.isVertical(),f=this.isHorizontal();if(!(!l&&!f)){var d=this.get("label"),m=this.get("title"),x=this.get("verticalLimitLength"),T=d.offset,O=x,D=0,B=0;m&&(D=m.style.fontSize,B=m.spacing),O&&(O=O-T-B-D);var U=this.get("overlapOrder");if((0,b.S6)(U,function(Ee){d[Ee]&&s.canProcessOverlap(Ee)&&s.autoProcessOverlap(Ee,d[Ee],t,O)}),m&&(0,b.UM)(m.offset)){var J=t.getCanvasBBox(),pe=l?J.width:J.height;m.offset=T+pe+B+D/2}}},i.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,b.UM)(s.rotate):!0},i.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=this.isVertical(),x=!1,T=ee[t];if(s===!0){var O=this.get("label");x=T.getDefault()(m,l,f)}else if((0,b.mf)(s))x=s(m,l,f);else if((0,b.Kn)(s)){var D=s;T[D.type]&&(x=T[D.type](m,l,f,D.cfg))}else T[s]&&(x=T[s](m,l,f));if(t==="autoRotate"){if(x){var B=l.getChildren(),U=this.get("verticalFactor");(0,b.S6)(B,function(pe){var Ee=pe.attr("textAlign");if(Ee==="center"){var Ce=U>0?"end":"start";pe.attr("textAlign",Ce)}})}}else if(t==="autoHide"){var J=l.getChildren().slice(0);(0,b.S6)(J,function(pe){pe.get("visible")||(d.get("isRegister")&&d.unregisterElement(pe),pe.remove())})}},i}(Xt),va=Ha,Ea=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},i.prototype.getLinePath=function(){var t=this.get("center"),s=t.x,l=t.y,f=this.get("radius"),d=f,m=this.get("startAngle"),x=this.get("endAngle"),T=[];if(Math.abs(x-m)===Math.PI*2)T=[["M",s,l-d],["A",f,d,0,1,1,s,l+d],["A",f,d,0,1,1,s,l-d],["Z"]];else{var O=this.getCirclePoint(m),D=this.getCirclePoint(x),B=Math.abs(x-m)>Math.PI?1:0,U=m>x?0:1;T=[["M",s,l],["L",O.x,O.y],["A",f,d,0,B,U,D.x,D.y],["L",s,l]]}return T},i.prototype.getTickPoint=function(t){var s=this.get("startAngle"),l=this.get("endAngle"),f=s+(l-s)*t;return this.getCirclePoint(f)},i.prototype.getSideVector=function(t,s){var l=this.get("center"),f=[s.x-l.x,s.y-l.y],d=this.get("verticalFactor"),m=wa.kE(f);return wa.bA(f,f,d*t/m),f},i.prototype.getAxisVector=function(t){var s=this.get("center"),l=[t.x-s.x,t.y-s.y];return[l[1],-1*l[0]]},i.prototype.getCirclePoint=function(t,s){var l=this.get("center");return s=s||this.get("radius"),{x:l.x+Math.cos(t)*s,y:l.y+Math.sin(t)*s}},i.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,b.UM)(s.rotate):!0},i.prototype.processOverlap=function(t){var s=this,l=this.get("label"),f=this.get("title"),d=this.get("verticalLimitLength"),m=l.offset,x=d,T=0,O=0;f&&(T=f.style.fontSize,O=f.spacing),x&&(x=x-m-O-T);var D=this.get("overlapOrder");if((0,b.S6)(D,function(U){l[U]&&s.canProcessOverlap(U)&&s.autoProcessOverlap(U,l[U],t,x)}),f&&(0,b.UM)(f.offset)){var B=t.getCanvasBBox().height;f.offset=m+B+O+T/2}},i.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=!1,x=ee[t];if(f>0)if(s===!0)m=x.getDefault()(!1,l,f);else if((0,b.mf)(s))m=s(!1,l,f);else if((0,b.Kn)(s)){var T=s;x[T.type]&&(m=x[T.type](!1,l,f,T.cfg))}else x[s]&&(m=x[s](!1,l,f));if(t==="autoRotate"){if(m){var O=l.getChildren(),D=this.get("verticalFactor");(0,b.S6)(O,function(U){var J=U.attr("textAlign");if(J==="center"){var pe=D>0?"end":"start";U.attr("textAlign",pe)}})}}else if(t==="autoHide"){var B=l.getChildren().slice(0);(0,b.S6)(B,function(U){U.get("visible")||(d.get("isRegister")&&d.unregisterElement(U),U.remove())})}},i}(Xt),Pa=Ea,la=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Ma.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Ma.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Ma.fontFamily}},textBackground:{padding:5,style:{stroke:Ma.lineColor}}}})},i.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},i.prototype.renderText=function(t){var s=this.get("text"),l=s.style,f=s.autoRotate,d=s.content;if(!(0,b.UM)(d)){var m=this.getTextPoint(),x=null;if(f){var T=this.getRotateAngle();x=nc(m,T)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,A.pi)((0,A.pi)((0,A.pi)({},m),{text:d,matrix:x}),l)})}},i.prototype.renderLine=function(t){var s=this.getLinePath(),l=this.get("line"),f=l.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,A.pi)({path:s},f)})},i.prototype.renderBackground=function(t){var s=this.getElementId("text"),l=t.findById(s),f=this.get("textBackground");if(f&&l){var d=l.getBBox(),m=Dc(f.padding),x=f.style,T=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,A.pi)({x:d.x-m[3],y:d.y-m[0],width:d.width+m[1]+m[3],height:d.height+m[0]+m[2],matrix:l.attr("matrix")},x)});T.toBack()}},i}(wi),ga=la,Tu=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},i.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text").position,d=Math.atan2(l.y-s.y,l.x-s.x),m=f==="start"?d-Math.PI/2:d+Math.PI/2;return m},i.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return zl(s,l,d,m)},i.prototype.getLinePath=function(){var t=this.getLocation(),s=t.start,l=t.end;return[["M",s.x,s.y],["L",l.x,l.y]]},i}(ga),Vs=Tu,$u=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},i.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.startAngle,l=t.endAngle,f=this.get("text").position,d=f==="start"?s+Math.PI/2:l-Math.PI/2;return d},i.prototype.getTextPoint=function(){var t=this.get("text"),s=t.position,l=t.offset,f=this.getLocation(),d=f.center,m=f.radius,x=f.startAngle,T=f.endAngle,O=s==="start"?x:T,D=this.getRotateAngle()-Math.PI,B=Ol(d,m,O),U=Math.cos(D)*l,J=Math.sin(D)*l;return{x:B.x+U,y:B.y+J}},i.prototype.getLinePath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=null;if(d-f===Math.PI*2){var x=s.x,T=s.y;m=[["M",x,T-l],["A",l,l,0,1,1,x,T+l],["A",l,l,0,1,1,x,T-l],["Z"]]}else{var O=Ol(s,l,f),D=Ol(s,l,d),B=Math.abs(d-f)>Math.PI?1:0,U=f>d?0:1;m=[["M",O.x,O.y],["A",l,l,0,B,U,D.x,D.y]]}return m},i}(ga),zu=$u,es="g2-crosshair",ws=es+"-line",Xu=es+"-text",Js,Jc=(Js={},Js[""+es]={position:"relative"},Js[""+ws]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Js[""+Xu]={position:"absolute",color:Ma.textColor,fontFamily:Ma.fontFamily},Js),Sl=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+es+'"></div>',crosshairTpl:'<div class="'+ws+'"></div>',textTpl:'<span class="'+Xu+'">{content}</span>',domStyles:null,containerClassName:es,defaultStyles:Jc,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},i.prototype.render=function(){this.resetText(),this.resetPosition()},i.prototype.initCrossHair=function(){var t=this.getContainer(),s=this.get("crosshairTpl"),l=(0,Ke.Z)(s);t.appendChild(l),this.applyStyle(ws,l),this.set("crosshairEl",l)},i.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return zl(s,l,d,m)},i.prototype.resetText=function(){var t=this.get("text"),s=this.get("textEl");if(t){var l=t.content;if(!s){var f=this.getContainer(),d=(0,b.ng)(this.get("textTpl"),t);s=(0,Ke.Z)(d),f.appendChild(s),this.applyStyle(Xu,s),this.set("textEl",s)}s.innerHTML=l}else s&&s.remove()},i.prototype.isVertical=function(t,s){return t.x===s.x},i.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var s=this.get("start"),l=this.get("end"),f=Math.min(s.x,l.x),d=Math.min(s.y,l.y);this.isVertical(s,l)?(0,he.Z)(t,{width:"1px",height:Os(Math.abs(l.y-s.y))}):(0,he.Z)(t,{height:"1px",width:Os(Math.abs(l.x-s.x))}),(0,he.Z)(t,{top:Os(d),left:Os(f)}),this.alignText()},i.prototype.alignText=function(){var t=this.get("textEl");if(t){var s=this.get("text").align,l=t.clientWidth,f=this.getTextPoint();switch(s){case"center":f.x=f.x-l/2;break;case"right":f.x=f.x-l;case"left":break}(0,he.Z)(t,{top:Os(f.y),left:Os(f.x)})}},i.prototype.updateInner=function(t){(0,b.wH)(t,"text")&&this.resetText(),a.prototype.updateInner.call(this,t)},i}(fe),oc=Sl,Zl=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Ma.lineColor}}}})},i.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},i.prototype.renderInner=function(t){this.drawGrid(t)},i.prototype.getAlternatePath=function(t,s){var l=this.getGridPath(t),f=s.slice(0).reverse(),d=this.getGridPath(f,!0),m=this.get("closed");return m?l=l.concat(d):(d[0][0]="L",l=l.concat(d),l.push(["Z"])),l},i.prototype.getPathStyle=function(){return this.get("line").style},i.prototype.drawGrid=function(t){var s=this,l=this.get("line"),f=this.get("items"),d=this.get("alternateColor"),m=null;(0,b.S6)(f,function(x,T){var O=x.id||T;if(l){var D=s.getPathStyle();D=(0,b.mf)(D)?D(x,T,f):D;var B=s.getElementId("line-"+O),U=s.getGridPath(x.points);s.addShape(t,{type:"path",name:"grid-line",id:B,attrs:(0,b.CD)({path:U},D)})}if(d&&T>0){var J=s.getElementId("region-"+O),pe=T%2===0;if((0,b.HD)(d))pe&&s.drawAlternateRegion(J,t,m.points,x.points,d);else{var Ee=pe?d[1]:d[0];s.drawAlternateRegion(J,t,m.points,x.points,Ee)}}m=x})},i.prototype.drawAlternateRegion=function(t,s,l,f,d){var m=this.getAlternatePath(l,f);this.addShape(s,{type:"path",id:t,name:"grid-region",attrs:{path:m,fill:d}})},i}(wi),yf=Zl;function zf(a,i,t,s){var l=t-a,f=s-i;return Math.sqrt(l*l+f*f)}var _c=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"circle",center:null,closed:!0})},i.prototype.getGridPath=function(t,s){var l=this.getLineType(),f=this.get("closed"),d=[];if(t.length)if(l==="circle"){var m=this.get("center"),x=t[0],T=zf(m.x,m.y,x.x,x.y),O=s?0:1;f?(d.push(["M",m.x,m.y-T]),d.push(["A",T,T,0,0,O,m.x,m.y+T]),d.push(["A",T,T,0,0,O,m.x,m.y-T]),d.push(["Z"])):(0,b.S6)(t,function(D,B){B===0?d.push(["M",D.x,D.y]):d.push(["A",T,T,0,0,O,D.x,D.y])})}else(0,b.S6)(t,function(D,B){B===0?d.push(["M",D.x,D.y]):d.push(["L",D.x,D.y])}),f&&d.push(["Z"]);return d},i}(yf),Uf=_c,ef=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"line"})},i.prototype.getGridPath=function(t){var s=[];return(0,b.S6)(t,function(l,f){f===0?s.push(["M",l.x,l.y]):s.push(["L",l.x,l.y])}),s},i}(yf),Vl=ef,_f=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},i.prototype.getLayoutBBox=function(){var t=a.prototype.getLayoutBBox.call(this),s=this.get("maxWidth"),l=this.get("maxHeight"),f=t.width,d=t.height;return s&&(f=Math.min(f,s)),l&&(d=Math.min(d,l)),vf(t.minX,t.minY,f,d)},i.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},i.prototype.resetLocation=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offsetX"),f=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+l,y:s+f})},i.prototype.applyOffset=function(){this.resetLocation()},i.prototype.getDrawPoint=function(){return this.get("currentPoint")},i.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},i.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},i.prototype.drawBackground=function(t){var s=this.get("background"),l=t.getBBox(),f=Dc(s.padding),d=(0,A.pi)({x:0,y:0,width:l.width+f[1]+f[3],height:l.height+f[0]+f[2]},s.style),m=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:d});m.toBack()},i.prototype.drawTitle=function(t){var s=this.get("currentPoint"),l=this.get("title"),f=l.spacing,d=l.style,m=l.text,x=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,A.pi)({text:m,x:s.x,y:s.y},d)}),T=x.getBBox();this.set("currentPoint",{x:s.x,y:T.maxY+f})},i.prototype.resetDraw=function(){var t=this.get("background"),s={x:0,y:0};if(t){var l=Dc(t.padding);s.x=l[3],s.y=l[0]}this.set("currentPoint",s)},i}(wi),Au=_f,Ps={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},Yu={fill:Ma.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Ma.fontFamily,fontWeight:"normal",lineHeight:12},qu="navigation-arrow-right",jl="navigation-arrow-left",vo={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Ku=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t.onNavigationAfter=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Ma.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Ma.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:Ps,itemName:{spacing:16,style:Yu},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:Yu,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Ma.uncheckedColor},markerStyle:{fill:Ma.uncheckedColor,stroke:Ma.uncheckedColor}},inactive:{nameStyle:{fill:Ma.uncheckedColor},markerStyle:{opacity:.2}}}}})},i.prototype.isList=function(){return!0},i.prototype.getItems=function(){return this.get("items")},i.prototype.setItems=function(t){this.update({items:t})},i.prototype.updateItem=function(t,s){(0,b.CD)(t,s),this.clear(),this.render()},i.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},i.prototype.setItemState=function(t,s,l){t[s]=l;var f=this.getElementByLocalId("item-"+t.id);if(f){var d=this.getItems(),m=d.indexOf(t),x=this.createOffScreenGroup(),T=this.drawItem(t,m,this.getItemHeight(),x);this.updateElements(T,f),this.clearUpdateStatus(f)}},i.prototype.hasState=function(t,s){return!!t[s]},i.prototype.getItemStates=function(t){var s=this.get("itemStates"),l=[];return(0,b.S6)(s,function(f,d){t[d]&&l.push(d)}),l},i.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,b.S6)(l,function(f){s.setItemState(f,t,!1)})},i.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,b.hX)(l,function(f){return s.hasState(f,t)})},i.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},i.prototype.processItems=function(){var t=this.get("items");(0,b.S6)(t,function(s){s.id||(s.id=s.name)})},i.prototype.drawItems=function(t){var s=this,l=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),f=this.addGroup(l,{id:this.getElementId("item-group"),name:"legend-item-group"}),d=this.getItemHeight(),m=this.get("itemWidth"),x=this.get("itemSpacing"),T=this.get("itemMarginBottom"),O=this.get("currentPoint"),D=O.x,B=O.y,U=this.get("layout"),J=this.get("items"),pe=!1,Ee=0,Ce=this.get("maxWidth"),st=this.get("maxHeight");(0,b.S6)(J,function(gt,bt){var Ft=s.drawItem(gt,bt,d,f),xr=Ft.getBBox(),Fr=m||xr.width;Fr>Ee&&(Ee=Fr),U==="horizontal"?(Ce&&Ce<O.x+Fr-D&&(pe=!0,O.x=D,O.y+=d+T),s.moveElementTo(Ft,O),O.x+=Fr+x):(st&&st<O.y+d+T-B&&(pe=!0,O.x+=Ee+x,O.y=B,Ee=0),s.moveElementTo(Ft,O),O.y+=d+T)}),pe&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=D,this.startY=B,this.adjustNavigation(t,f))},i.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var s=(this.get("itemName")||{}).style;if((0,b.mf)(s)){var l=this.getItems();l.forEach(function(f,d){var m=(0,A.pi)((0,A.pi)({},Yu),s(f,d,l)).fontSize;t<m&&(t=m)})}else s&&(t=s.fontSize)}return t},i.prototype.drawMarker=function(t,s,l,f){var d=(0,A.pi)((0,A.pi)((0,A.pi)({x:0,y:f/2},s.style),{symbol:(0,b.U2)(l.marker,"symbol","circle")}),(0,b.U2)(l.marker,"style",{})),m=this.addShape(t,{type:"marker",id:this.getElementId("item-"+l.id+"-marker"),name:"legend-item-marker",attrs:d}),x=m.getBBox();m.attr("x",x.width/2);var T=m.attr(),O=T.stroke,D=T.fill;return O&&m.set("isStroke",!0),D&&m.set("isFill",!0),m},i.prototype.drawItemText=function(t,s,l,f,d,m,x){var T=l.formatter,O=l.style,D=(0,A.pi)((0,A.pi)({x:m,y:d/2,text:T?T(f[s],f,x):f[s]},Yu),(0,b.mf)(O)?O(f,x,this.getItems()):O);return this.addShape(t,{type:"text",id:this.getElementId("item-"+f.id+"-"+s),name:"legend-item-"+s,attrs:D})},i.prototype.drawRadio=function(t,s,l,f,d){var m,x,T=s.style||{},O=(m=T.r)!==null&&m!==void 0?m:f/2,D=O*3.6/8,B=[d+O,f/2-O],U=B[0],J=B[1],pe=[U+O,J+O],Ee=pe[0],Ce=pe[1],st=[U,Ce+O],gt=st[0],bt=st[1],Ft=[d,J+O],xr=Ft[0],Fr=Ft[1],$r=l.showRadio,yn=(0,A.pi)((0,A.pi)({path:[["M",U,J],["A",O,O,0,0,1,Ee,Ce],["L",Ee-D,Ce],["L",Ee,Ce],["A",O,O,0,0,1,gt,bt],["L",gt,bt-D],["L",gt,bt],["A",O,O,0,0,1,xr,Fr],["L",xr+D,Fr],["L",xr,Fr],["A",O,O,0,0,1,U,J],["L",U,J+D]],stroke:"#000000",fill:"#ffffff"},T),{opacity:$r?(x=T==null?void 0:T.opacity)!==null&&x!==void 0?x:.45:0}),cn=this.addShape(t,{type:"path",id:this.getElementId("item-"+l.id+"-radio"),name:"legend-item-radio",attrs:yn});return cn.set("tip",s.tip),cn},i.prototype.drawItem=function(t,s,l,f){var d="item-"+t.id,m=this.addGroup(f,{name:"legend-item-container",id:this.getElementId("item-container-"+d),delegateObject:{item:t,index:s}}),x=this.addGroup(m,{name:"legend-item",id:this.getElementId(d),delegateObject:{item:t,index:s}}),T=this.get("marker"),O=this.get("itemName"),D=this.get("itemValue"),B=this.get("itemBackground"),U=this.get("radio"),J=this.getLimitItemWidth(),pe=0;if(T){var Ee=this.drawMarker(x,T,t,l),Ce=T.spacing,st=(0,b.U2)(t,["marker","spacing"]);(0,b.hj)(st)&&(Ce=st),pe=Ee.getBBox().maxX+Ce}if(O){var gt=this.drawItemText(x,"name",O,t,l,pe,s);J&&Ff(!0,gt,(0,b.uZ)(J-pe,0,J)),pe=gt.getBBox().maxX+O.spacing}if(D){var bt=this.drawItemText(x,"value",D,t,l,pe,s);J&&(D.alignRight?(bt.attr({textAlign:"right",x:J}),Ff(!0,bt,(0,b.uZ)(J-pe,0,J),"head")):Ff(!0,bt,(0,b.uZ)(J-pe,0,J))),pe=bt.getBBox().maxX+D.spacing}if(U&&this.drawRadio(x,U,t,l,pe),B){var Ft=x.getBBox(),xr=this.addShape(x,{type:"rect",name:"legend-item-background",id:this.getElementId(d+"-background"),attrs:(0,A.pi)({x:0,y:0,width:Ft.width,height:l},B.style)});xr.toBack()}return this.applyItemStates(t,x),x},i.prototype.adjustNavigation=function(t,s){var l=this,f=this.startX,d=this.startY,m=this.get("layout"),x=s.findAll(function(hi){return hi.get("name")==="legend-item"}),T=this.get("maxWidth"),O=this.get("maxHeight"),D=this.get("itemWidth"),B=this.get("itemSpacing"),U=this.getItemHeight(),J=(0,b.b$)({},Ps,this.get("pageNavigator")),pe=this.drawNavigation(t,m,"00/00",J),Ee=pe.getBBox(),Ce={x:f,y:d},st=1,gt=0,bt=0,Ft=0,xr=this.get("itemMarginBottom");function Fr(hi,Hi){var aa=hi.getBBox(),Qa=D||aa.width,Hn=Hi.x+Qa+B+Ee.width;return Hn>T}if(m==="horizontal"){var $r=this.get("maxRow")||1,yn=U+($r===1?0:xr),cn=T-B-Ee.width-Ee.minX;this.pageHeight=yn*$r,this.pageWidth=cn,(0,b.S6)(x,function(hi){var Hi=hi.getBBox(),aa=D||Hi.width;(gt&&gt<Ce.x+aa+B||Fr(hi,Ce))&&(st===1&&(gt=Ce.x+B,l.moveElementTo(pe,{x:cn,y:Ce.y+U/2-Ee.height/2-Ee.minY})),st+=1,Ce.x=f,Ce.y+=yn),l.moveElementTo(hi,Ce),hi.getParent().setClip({type:"rect",attrs:{x:Ce.x,y:Ce.y,width:aa+B,height:U}}),Ce.x+=aa+B})}else{(0,b.S6)(x,function(hi){var Hi=hi.getBBox();Hi.width>bt&&(bt=Hi.width)}),Ft=bt,bt+=B,T&&(bt=Math.min(T,bt),Ft=Math.min(T,Ft)),this.pageWidth=bt,this.pageHeight=O-Math.max(Ee.height,U+xr);var Bn=Math.floor(this.pageHeight/(U+xr));(0,b.S6)(x,function(hi,Hi){Hi!==0&&Hi%Bn===0&&(st+=1,Ce.x+=bt,Ce.y=d),l.moveElementTo(hi,Ce),hi.getParent().setClip({type:"rect",attrs:{x:Ce.x,y:Ce.y,width:bt,height:U}}),Ce.y+=U+xr}),this.totalPagesCnt=st,this.moveElementTo(pe,{x:f+Ft/2-Ee.width/2-Ee.minX,y:O-Ee.height-Ee.minY})}this.pageHeight&&this.pageWidth&&s.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),m==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(st/this.get("maxRow")):this.totalPagesCnt=st,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(pe),s.attr("matrix",this.getCurrentNavigationMatrix())},i.prototype.drawNavigation=function(t,s,l,f){var d={x:0,y:0},m=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),x=(0,b.U2)(f.marker,"style",{}),T=x.size,O=T===void 0?12:T,D=(0,A._T)(x,["size"]),B=this.drawArrow(m,d,jl,s==="horizontal"?"up":"left",O,D);B.on("click",this.onNavigationBack);var U=B.getBBox();d.x+=U.width+2;var J=this.addShape(m,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,A.pi)({x:d.x,y:d.y+O/2,text:l,textBaseline:"middle"},(0,b.U2)(f.text,"style"))}),pe=J.getBBox();d.x+=pe.width+2;var Ee=this.drawArrow(m,d,qu,s==="horizontal"?"down":"right",O,D);return Ee.on("click",this.onNavigationAfter),m},i.prototype.updateNavigation=function(t){var s=(0,b.b$)({},Ps,this.get("pageNavigator")),l=s.marker.style,f=l.fill,d=l.opacity,m=l.inactiveFill,x=l.inactiveOpacity,T=this.currentPageIndex+"/"+this.totalPagesCnt,O=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),D=t?t.findById(this.getElementId(jl)):this.getElementByLocalId(jl),B=t?t.findById(this.getElementId(qu)):this.getElementByLocalId(qu);O.attr("text",T),D.attr("opacity",this.currentPageIndex===1?x:d),D.attr("fill",this.currentPageIndex===1?m:f),D.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),B.attr("opacity",this.currentPageIndex===this.totalPagesCnt?x:d),B.attr("fill",this.currentPageIndex===this.totalPagesCnt?m:f),B.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var U=D.getBBox().maxX+2;O.attr("x",U),U+=O.getBBox().width+2,this.updateArrowPath(B,{x:U,y:0})},i.prototype.drawArrow=function(t,s,l,f,d,m){var x=s.x,T=s.y,O=this.addShape(t,{type:"path",id:this.getElementId(l),name:l,attrs:(0,A.pi)({size:d,direction:f,path:[["M",x+d/2,T],["L",x,T+d],["L",x+d,T+d],["Z"]],cursor:"pointer"},m)});return O.attr("matrix",nc({x:x+d/2,y:T+d/2},vo[f])),O},i.prototype.updateArrowPath=function(t,s){var l=s.x,f=s.y,d=t.attr(),m=d.size,x=d.direction,T=nc({x:l+m/2,y:f+m/2},vo[x]);t.attr("path",[["M",l+m/2,f],["L",l,f+m],["L",l+m,f+m],["Z"]]),t.attr("matrix",T)},i.prototype.getCurrentNavigationMatrix=function(){var t=this,s=t.currentPageIndex,l=t.pageWidth,f=t.pageHeight,d=this.get("layout"),m=d==="horizontal"?{x:0,y:f*(1-s)}:{x:l*(1-s),y:0};return fh(m)},i.prototype.applyItemStates=function(t,s){var l=this.getItemStates(t),f=l.length>0;if(f){var d=s.getChildren(),m=this.get("itemStates");(0,b.S6)(d,function(x){var T=x.get("name"),O=T.split("-")[2],D=Et(t,O,m);D&&(x.attr(D),O==="marker"&&!(x.get("isStroke")&&x.get("isFill"))&&(x.get("isStroke")&&x.attr("fill",null),x.get("isFill")&&x.attr("stroke",null)))})}},i.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),s=this.get("maxItemWidth");return s?t&&(s=t<=s?t:s):t&&(s=t),s},i}(Au),Mu=Ku,xc=1.4,nd=.4,dh=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Ma.textColor,textBaseline:"middle",fontFamily:Ma.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Ma.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},i.prototype.isSlider=function(){return!0},i.prototype.getValue=function(){return this.getCurrentValue()},i.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},i.prototype.setRange=function(t,s){this.update({min:t,max:s})},i.prototype.setValue=function(t){var s=this.getValue();this.set("value",t);var l=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(l),this.delegateEmit("valuechanged",{originValue:s,value:t})},i.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},i.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},i.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},i.prototype.bindHandlersEvent=function(t){var s=this;t.on("legend-handler-min:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[1];m<f&&(m=f),s.setValue([f,m])}),t.on("legend-handler-max:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[0];m>f&&(m=f),s.setValue([m,f])})},i.prototype.bindRailEvent=function(t){},i.prototype.bindTrackEvent=function(t){var s=this,l=null;t.on("legend-track:dragstart",function(f){l={x:f.x,y:f.y}}),t.on("legend-track:drag",function(f){if(l){var d=s.getValueByCanvasPoint(l.x,l.y),m=s.getValueByCanvasPoint(f.x,f.y),x=s.getCurrentValue(),T=x[1]-x[0],O=s.getRange(),D=m-d;D<0?x[0]+D>O.min?s.setValue([x[0]+D,x[1]+D]):s.setValue([O.min,O.min+T]):D>0&&(D>0&&x[1]+D<O.max?s.setValue([x[0]+D,x[1]+D]):s.setValue([O.max-T,O.max])),l={x:f.x,y:f.y}}}),t.on("legend-track:dragend",function(f){l=null})},i.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},i.prototype.drawLabel=function(t,s){var l=this.get("label"),f=l.style,d=l.align,m=l.formatter,x=this.get(t),T=this.getLabelAlignAttrs(t,d),O="label-"+t;this.addShape(s,{type:"text",id:this.getElementId(O),name:"legend-label-"+t,attrs:(0,A.pi)((0,A.pi)({x:0,y:0,text:(0,b.mf)(m)?m(x):x},f),T)})},i.prototype.getLabelAlignAttrs=function(t,s){var l=this.isVertical(),f="center",d="middle";return l?(f="start",s!=="rail"?t==="min"?d="top":d="bottom":d="top"):s!=="rail"?(d="top",t==="min"?f="start":f="end"):(f="start",d="middle"),{textAlign:f,textBaseline:d}},i.prototype.getRailPath=function(t,s,l,f){var d=this.get("rail"),m=d.size,x=d.defaultLength,T=d.type,O=this.isVertical(),D=x,B=l,U=f;B||(B=O?m:D),U||(U=O?D:m);var J=[];return T==="color"?(J.push(["M",t,s]),J.push(["L",t+B,s]),J.push(["L",t+B,s+U]),J.push(["L",t,s+U]),J.push(["Z"])):(J.push(["M",t+B,s]),J.push(["L",t+B,s+U]),J.push(["L",t,s+U]),J.push(["Z"])),J},i.prototype.drawRail=function(t){var s=this.get("rail"),l=s.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,A.pi)({path:this.getRailPath(0,0)},l)})},i.prototype.getTrackColor=function(t){var s=t.length;if(!s)return null;if(s===1)return t[0];var l;this.isVertical()?l="l(90)":l="l(0)";for(var f=0;f<s;f++){var d=f/(s-1);l+=" "+d+":"+t[f]}return l},i.prototype.getTrackPath=function(t){var s=this.getRailShape(t),l=s.attr("path");return(0,b.d9)(l)},i.prototype.getClipTrackAttrs=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1],d=this.getRailBBox(t),m=this.getPointByValue(l,t),x=this.getPointByValue(f,t),T=this.isVertical(),O,D,B,U;return T?(O=d.minX,D=m.y,B=d.width,U=x.y-m.y):(O=m.x,D=d.minY,B=x.x-m.x,U=d.height),{x:O,y:D,width:B,height:U}},i.prototype.getTrackAttrs=function(t){var s=this.get("track"),l=this.get("colors"),f=this.getTrackPath(t);return(0,b.CD)({path:f,fill:this.getTrackColor(l)},s.style)},i.prototype.resetTrackClip=function(t){var s=t||this.get("group"),l=this.getElementId("track"),f=s.findById(l),d=f.getClip(),m=this.getClipTrackAttrs(t);d?d.attr(m):f.setClip({type:"rect",attrs:m})},i.prototype.resetTrack=function(t){var s=this.getElementId("track"),l=t.findById(s),f=this.getTrackAttrs(t);l?l.attr(f):this.addShape(t,{type:"path",id:s,draggable:this.get("slidable"),name:"legend-track",attrs:f})},i.prototype.getPointByValue=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=(t-f)/(d-f),x=this.getRailBBox(s),T=this.isVertical(),O={x:0,y:0};return T?(O.x=x.minX+x.width/2,O.y=Zs(x.minY,x.maxY,m)):(O.x=Zs(x.minX,x.maxX,m),O.y=x.minY+x.height/2),O},i.prototype.getRailShape=function(t){var s=t||this.get("group");return s.findById(this.getElementId("rail"))},i.prototype.getRailBBox=function(t){var s=this.getRailShape(t),l=s.getBBox();return l},i.prototype.getRailCanvasBBox=function(){var t=this.get("group"),s=t.findById(this.getElementId("rail")),l=s.getCanvasBBox();return l},i.prototype.isVertical=function(){return this.get("layout")==="vertical"},i.prototype.getValueByCanvasPoint=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=this.getRailCanvasBBox(),x=this.isVertical(),T=this.get("step"),O;x?O=(s-m.minY)/m.height:O=(t-m.minX)/m.width;var D=Zs(f,d,O);if(T){var B=Math.round((D-f)/T);D=f+B*T}return D>d&&(D=d),D<f&&(D=f),D},i.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var s=this.get("values");return s?[Math.max(Math.min.apply(Math,(0,A.pr)(s,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,A.pr)(s,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},i.prototype.resetHandlers=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1];this.resetHandler(t,"min",l),this.resetHandler(t,"max",f)},i.prototype.getHandlerPath=function(t,s){var l=this.isVertical(),f=[],d=t.size,m=s.x,x=s.y,T=d*xc,O=d/2,D=d/6;if(l){var B=m+T*nd;f.push(["M",m,x]),f.push(["L",B,x+O]),f.push(["L",m+T,x+O]),f.push(["L",m+T,x-O]),f.push(["L",B,x-O]),f.push(["Z"]),f.push(["M",B,x+D]),f.push(["L",m+T-2,x+D]),f.push(["M",B,x-D]),f.push(["L",m+T-2,x-D])}else{var U=x+T*nd;f.push(["M",m,x]),f.push(["L",m-O,U]),f.push(["L",m-O,x+T]),f.push(["L",m+O,x+T]),f.push(["L",m+O,U]),f.push(["Z"]),f.push(["M",m-D,U]),f.push(["L",m-D,x+T-2]),f.push(["M",m+D,U]),f.push(["L",m+D,x+T-2])}return f},i.prototype.resetHandler=function(t,s,l){var f=this.getPointByValue(l,t),d=this.get("handler"),m=this.getHandlerPath(d,f),x=this.getElementId("handler-"+s),T=t.findById(x),O=this.isVertical();T?T.attr("path",m):this.addShape(t,{type:"path",name:"legend-handler-"+s,draggable:!0,id:x,attrs:(0,A.pi)((0,A.pi)({path:m},d.style),{cursor:O?"ns-resize":"ew-resize"})})},i.prototype.fixedElements=function(t){var s=t.findById(this.getElementId("rail")),l=t.findById(this.getElementId("label-min")),f=t.findById(this.getElementId("label-max")),d=this.getDrawPoint();this.isVertical()?this.fixedVertail(l,f,s,d):this.fixedHorizontal(l,f,s,d)},i.prototype.fitRailLength=function(t,s,l,f){var d=this.isVertical(),m=d?"height":"width",x=this.get("label"),T=x.align,O=x.spacing,D=this.get("max"+(0,b.jC)(m));if(D){var B=T==="rail"?l[m]+t[m]+s[m]+O*2:l[m],U=B-D;U>0&&this.changeRailLength(f,m,l[m]-U)}},i.prototype.changeRailLength=function(t,s,l){var f=t.getBBox(),d;s==="height"?d=this.getRailPath(f.x,f.y,f.width,l):d=this.getRailPath(f.x,f.y,l,f.height),t.attr("path",d)},i.prototype.changeRailPosition=function(t,s,l){var f=t.getBBox(),d=this.getRailPath(s,l,f.width,f.height);t.attr("path",d)},i.prototype.fixedHorizontal=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,T=l.getBBox(),O=t.getBBox(),D=s.getBBox(),B=T.height;this.fitRailLength(O,D,T,l),T=l.getBBox(),m==="rail"?(t.attr({x:f.x,y:f.y+B/2}),this.changeRailPosition(l,f.x+O.width+x,f.y),s.attr({x:f.x+O.width+T.width+x*2,y:f.y+B/2})):m==="top"?(t.attr({x:f.x,y:f.y}),s.attr({x:f.x+T.width,y:f.y}),this.changeRailPosition(l,f.x,f.y+O.height+x)):(this.changeRailPosition(l,f.x,f.y),t.attr({x:f.x,y:f.y+T.height+x}),s.attr({x:f.x+T.width,y:f.y+T.height+x}))},i.prototype.fixedVertail=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,T=l.getBBox(),O=t.getBBox(),D=s.getBBox();if(this.fitRailLength(O,D,T,l),T=l.getBBox(),m==="rail")t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x,f.y+O.height+x),s.attr({x:f.x,y:f.y+O.height+T.height+x*2});else if(m==="right")t.attr({x:f.x+T.width+x,y:f.y}),this.changeRailPosition(l,f.x,f.y),s.attr({x:f.x+T.width+x,y:f.y+T.height});else{var B=Math.max(O.width,D.width);t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x+B+x,f.y),s.attr({x:f.x,y:f.y+T.height})}},i}(Au),id=dh,Hl="g2-tooltip",Pl="g2-tooltip-title",Wl="g2-tooltip-list",Zh="g2-tooltip-list-item",wp="g2-tooltip-marker",tf="g2-tooltip-value",kl="g2-tooltip-name",vg="g2-tooltip-crosshair-x",wv="g2-tooltip-crosshair-y",bc,g_=(bc={},bc[""+Hl]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Ma.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},bc[""+Pl]={marginBottom:"4px"},bc[""+Wl]={margin:"0px",listStyleType:"none",padding:"0px"},bc[""+Zh]={listStyleType:"none",marginBottom:"4px"},bc[""+wp]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},bc[""+tf]={display:"inline-block",float:"right",marginLeft:"30px"},bc[""+vg]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},bc[""+wv]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},bc);function b0(a,i,t,s,l){var f={left:a<l.x,right:a+t>l.x+l.width,top:i<l.y,bottom:i+s>l.y+l.height};return f}function S0(a,i,t,s,l,f){var d=a,m=i;switch(f){case"left":d=a-s-t,m=i-l/2;break;case"right":d=a+t,m=i-l/2;break;case"top":d=a-s/2,m=i-l-t;break;case"bottom":d=a-s/2,m=i+t;break;default:d=a+t,m=i-l-t;break}return{x:d,y:m}}function Cv(a,i,t,s,l,f,d){var m=S0(a,i,t,s,l,f);if(d){var x=b0(m.x,m.y,s,l,d);f==="auto"?(x.right&&(m.x=Math.max(0,a-s-t)),x.top&&(m.y=Math.max(0,i-l-t))):f==="top"||f==="bottom"?(x.left&&(m.x=d.x),x.right&&(m.x=d.x+d.width-s),f==="top"&&x.top&&(m.y=i+t),f==="bottom"&&x.bottom&&(m.y=i-l-t)):(x.top&&(m.y=d.y),x.bottom&&(m.y=d.y+d.height-l),f==="left"&&x.left&&(m.x=a+t),f==="right"&&x.right&&(m.x=a-s-t))}return m}function E0(a,i){var t=!1;return(0,b.S6)(i,function(s){if((0,b.wH)(a,s))return t=!0,!1}),t}var Cp=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Hl+'"><div class="'+Pl+'"></div><ul class="'+Wl+'"></ul></div>',itemTpl:'<li class="'+Zh+`" data-index={index}>
          <span class="`+wp+`" style="background:{color}"></span>
          <span class="`+kl+`">{name}</span>:
          <span class="`+tf+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+vg+'"></div>',yCrosshairTpl:'<div class="'+wv+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Hl,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:g_})},i.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},i.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},i.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),(0,he.Z)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},i.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),(0,he.Z)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},i.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},i.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},i.prototype.setCrossHairsVisible=function(t){var s=t?"":"none",l=this.get("xCrosshairDom"),f=this.get("yCrosshairDom");l&&(0,he.Z)(l,{display:s}),f&&(0,he.Z)(f,{display:s})},i.prototype.initContainer=function(){if(a.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},i.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(E0(t,["title","showTitle"])&&this.resetTitle(),(0,b.wH)(t,"items")&&this.renderItems()),a.prototype.updateInner.call(this,t)},i.prototype.initDom=function(){this.cacheDoms()},i.prototype.removeDom=function(){a.prototype.removeDom.call(this),this.clearCrosshairs()},i.prototype.resetPosition=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offset"),f=this.getOffset(),d=f.offsetX,m=f.offsetY,x=this.get("position"),T=this.get("region"),O=this.getContainer(),D=this.getBBox(),B=D.width,U=D.height,J;T&&(J=sl(T));var pe=Cv(t,s,l,B,U,x,J);(0,he.Z)(O,{left:Os(pe.x+d),top:Os(pe.y+m)}),this.resetCrosshairs()},i.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),s=this.get("parent"),l=this.get("container");l&&l.parentNode===s?s.replaceChild(t,l):s.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},i.prototype.getHtmlContentNode=function(){var t,s=this.get("customContent");if(s){var l=s(this.get("title"),this.get("items"));(0,b.kK)(l)?t=l:t=(0,Ke.Z)(l)}return t},i.prototype.cacheDoms=function(){var t=this.getContainer(),s=t.getElementsByClassName(Pl)[0],l=t.getElementsByClassName(Wl)[0];this.set("titleDom",s),this.set("listDom",l)},i.prototype.resetTitle=function(){var t=this.get("title"),s=this.get("showTitle");s&&t?this.setTitle(t):this.setTitle("")},i.prototype.setTitle=function(t){var s=this.get("titleDom");s&&(s.innerText=t)},i.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),s=this.get("crosshairs");if(!t||!s)this.clearCrosshairs();else{var l=sl(t),f=this.get("xCrosshairDom"),d=this.get("yCrosshairDom");s==="x"?(this.resetCrosshair("x",l),d&&(d.remove(),this.set("yCrosshairDom",null))):s==="y"?(this.resetCrosshair("y",l),f&&(f.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",l),this.resetCrosshair("y",l)),this.setCrossHairsVisible(this.get("visible"))}},i.prototype.resetCrosshair=function(t,s){var l=this.checkCrosshair(t),f=this.get(t);t==="x"?(0,he.Z)(l,{left:Os(f),top:Os(s.y),height:Os(s.height)}):(0,he.Z)(l,{top:Os(f),left:Os(s.x),width:Os(s.width)})},i.prototype.checkCrosshair=function(t){var s=t+"CrosshairDom",l=t+"CrosshairTpl",f="CROSSHAIR_"+t.toUpperCase(),d=re[f],m=this.get(s),x=this.get("parent");return m||(m=(0,Ke.Z)(this.get(l)),this.applyStyle(d,m),x.appendChild(m),this.set(s,m)),m},i.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),s=this.get("itemTpl"),l=this.get("listDom");l&&((0,b.S6)(t,function(f){var d=Sa.toCSSGradient(f.color),m=(0,A.pi)((0,A.pi)({},f),{color:d}),x=(0,b.ng)(s,m),T=(0,Ke.Z)(x);l.appendChild(T)}),this.applyChildrenStyles(l,this.get("domStyles")))},i.prototype.clearItemDoms=function(){this.get("listDom")&&_p(this.get("listDom"))},i.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),s=this.get("yCrosshairDom");t&&t.remove(),s&&s.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},i}(fe),gg=Cp,Tp={opacity:0},jd={stroke:"#C5C5C5",strokeOpacity:.85},dm={fill:"#CACED4",opacity:.85},Ap=k(39499);function mg(a){return(0,b.UI)(a,function(i,t){var s=t===0?"M":"L",l=i[0],f=i[1];return[s,l,f]})}function w0(a){return mg(a)}function C0(a){if(a.length<=2)return w0(a);var i=[];(0,b.S6)(a,function(d){(0,b.Xy)(d,i.slice(i.length-2))||i.push(d[0],d[1])});var t=(0,Ap.e9)(i,!1),s=(0,b.YM)(a),l=s[0],f=s[1];return t.unshift(["M",l,f]),t}function yg(a,i,t,s){s===void 0&&(s=!0);var l=new Bl({values:a}),f=new zn({values:(0,b.UI)(a,function(m,x){return x})}),d=(0,b.UI)(a,function(m,x){return[f.scale(x)*i,t-l.scale(m)*t]});return s?C0(d):w0(d)}function Tv(a,i){var t=new Bl({values:a}),s=t.max<0?t.max:Math.max(0,t.min);return i-t.scale(s)*i}function Hd(a,i,t,s){var l=(0,A.pr)(a),f=Tv(s,t);return l.push(["L",i,f]),l.push(["L",0,f]),l.push(["Z"]),l}var _g=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Tp,lineStyle:jd,areaStyle:dm})},i.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.data,m=s.smooth,x=s.isArea,T=s.backgroundStyle,O=s.lineStyle,D=s.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,A.pi)({x:0,y:0,width:l,height:f},T)});var B=yg(d,l,f,m);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,A.pi)({path:B},O)}),x){var U=Hd(B,l,f,d);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,A.pi)({path:U},D)})}},i.prototype.applyOffset=function(){var t=this.cfg,s=t.x,l=t.y;this.moveElementTo(this.get("group"),{x:s,y:l})},i}(wi),vh=null,Mp={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Cs=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Mp})},i.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.style,m=d.fill,x=d.stroke,T=d.radius,O=d.opacity,D=d.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:l,height:f,fill:m,stroke:x,radius:T,opacity:O,cursor:D}});var B=1/3*l,U=2/3*l,J=1/4*f,pe=3/4*f;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:B,y1:J,x2:B,y2:pe,stroke:x,cursor:D}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:U,y1:J,x2:U,y2:pe,stroke:x,cursor:D}})},i.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},i.prototype.initEvent=function(){this.bindEvents()},i.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var s=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",s),t.draw()}),this.get("group").on("mouseleave",function(){var s=t.get("style").fill;t.getElementByLocalId("background").attr("fill",s),t.draw()})},i.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},i}(wi),Vh=null,Av={fill:"#416180",opacity:.05},Gl={fill:"#5B8FF9",opacity:.15,cursor:"move"},Jn=10,xf={width:Jn,height:24},Wd={textBaseline:"middle",fill:"#000",opacity:.45},eu="sliderchange",$l=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.onMouseDown=function(s){return function(l){t.currentTarget=s;var f=l.originalEvent;f.stopPropagation(),f.preventDefault(),t.prevX=(0,b.U2)(f,"touches.0.pageX",f.pageX),t.prevY=(0,b.U2)(f,"touches.0.pageY",f.pageY);var d=t.getContainerDOM();d.addEventListener("mousemove",t.onMouseMove),d.addEventListener("mouseup",t.onMouseUp),d.addEventListener("mouseleave",t.onMouseUp),d.addEventListener("touchmove",t.onMouseMove),d.addEventListener("touchend",t.onMouseUp),d.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(s){var l=t.cfg.width,f=[t.get("start"),t.get("end")];s.stopPropagation(),s.preventDefault();var d=(0,b.U2)(s,"touches.0.pageX",s.pageX),m=(0,b.U2)(s,"touches.0.pageY",s.pageY),x=d-t.prevX,T=t.adjustOffsetRange(x/l);t.updateStartEnd(T),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=d,t.prevY=m,t.draw(),t.emit(eu,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:f,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var s=t.getContainerDOM();s&&(s.removeEventListener("mousemove",t.onMouseMove),s.removeEventListener("mouseup",t.onMouseUp),s.removeEventListener("mouseleave",t.onMouseUp),s.removeEventListener("touchmove",t.onMouseMove),s.removeEventListener("touchend",t.onMouseUp),s.removeEventListener("touchcancel",t.onMouseUp))},t}return i.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.get("start"),f=this.get("end"),d=(0,b.uZ)(l,t,s),m=(0,b.uZ)(f,t,s);!this.get("isInit")&&(l!==d||f!==m)&&this.setValue([d,m])},i.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},i.prototype.setValue=function(t){var s=this.getRange();if((0,b.kJ)(t)&&t.length===2){var l=[this.get("start"),this.get("end")];this.update({start:(0,b.uZ)(t[0],s.min,s.max),end:(0,b.uZ)(t[1],s.min,s.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:l,value:t})}},i.prototype.getValue=function(){return[this.get("start"),this.get("end")]},i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Av,foregroundStyle:Gl,handlerStyle:xf,textStyle:Wd}})},i.prototype.update=function(t){var s=t.start,l=t.end,f=(0,A.pi)({},t);(0,b.UM)(s)||(f.start=(0,b.uZ)(s,0,1)),(0,b.UM)(l)||(f.end=(0,b.uZ)(l,0,1)),a.prototype.update.call(this,f),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},i.prototype.init=function(){this.set("start",(0,b.uZ)(this.get("start"),0,1)),this.set("end",(0,b.uZ)(this.get("end"),0,1)),a.prototype.init.call(this)},i.prototype.render=function(){a.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},i.prototype.renderInner=function(t){var s=this.cfg,l=s.start,f=s.end,d=s.width,m=s.height,x=s.trendCfg,T=x===void 0?{}:x,O=s.minText,D=s.maxText,B=s.backgroundStyle,U=B===void 0?{}:B,J=s.foregroundStyle,pe=J===void 0?{}:J,Ee=s.textStyle,Ce=Ee===void 0?{}:Ee,st=(0,b.b$)({},Mp,this.cfg.handlerStyle),gt=l*d,bt=f*d;(0,b.dp)((0,b.U2)(T,"data"))&&(this.trend=this.addComponent(t,(0,A.pi)({component:_g,id:this.getElementId("trend"),x:0,y:0,width:d,height:m},T))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,A.pi)({x:0,y:0,width:d,height:m},U)});var Ft=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,A.pi)({y:m/2,textAlign:"right",text:O,silent:!1},Ce)}),xr=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,A.pi)({y:m/2,textAlign:"left",text:D,silent:!1},Ce)}),Fr=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,A.pi)({y:0,height:m},pe)}),$r=(0,b.U2)(st,"width",Jn),yn=(0,b.U2)(st,"height",24);this.minHandler=this.addComponent(t,{component:Cs,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(m-yn)/2,width:$r,height:yn,cursor:"ew-resize",style:st}),this.maxHandler=this.addComponent(t,{component:Cs,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(m-yn)/2,width:$r,height:yn,cursor:"ew-resize",style:st})},i.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},i.prototype.initEvent=function(){this.bindEvents()},i.prototype.updateUI=function(t,s,l){var f=this.cfg,d=f.start,m=f.end,x=f.width,T=f.minText,O=f.maxText,D=f.handlerStyle,B=f.height,U=d*x,J=m*x;this.trend&&(this.trend.update({width:x,height:B}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",U),t.attr("width",J-U);var pe=(0,b.U2)(D,"width",Jn);s.attr("text",T),l.attr("text",O);var Ee=this._dodgeText([U,J],s,l),Ce=Ee[0],st=Ee[1];this.minHandler&&(this.minHandler.update({x:U-pe/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,b.S6)(Ce,function(gt,bt){return s.attr(bt,gt)}),this.maxHandler&&(this.maxHandler.update({x:J-pe/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,b.S6)(st,function(gt,bt){return l.attr(bt,gt)})},i.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var s=t.findById(this.getElementId("foreground"));s.on("mousedown",this.onMouseDown("foreground")),s.on("touchstart",this.onMouseDown("foreground"))},i.prototype.adjustOffsetRange=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":{var d=0-l,m=1-l;return Math.min(m,Math.max(d,t))}case"maxHandler":{var d=0-f,m=1-f;return Math.min(m,Math.max(d,t))}case"foreground":{var d=0-l,m=1-f;return Math.min(m,Math.max(d,t))}}},i.prototype.updateStartEnd=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":l+=t;break;case"maxHandler":f+=t;break;case"foreground":l+=t,f+=t;break}this.set("start",l),this.set("end",f)},i.prototype._dodgeText=function(t,s,l){var f,d,m=this.cfg,x=m.handlerStyle,T=m.width,O=2,D=(0,b.U2)(x,"width",Jn),B=t[0],U=t[1],J=!1;B>U&&(f=[U,B],B=f[0],U=f[1],d=[l,s],s=d[0],l=d[1],J=!0);var pe=s.getBBox(),Ee=l.getBBox(),Ce=pe.width>B-O?{x:B+D/2+O,textAlign:"left"}:{x:B-D/2-O,textAlign:"right"},st=Ee.width>T-U-O?{x:U-D/2-O,textAlign:"right"}:{x:U+D/2+O,textAlign:"left"};return J?[st,Ce]:[Ce,st]},i.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},i.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},i}(wi),bf=null;function Sc(a,i,t){if(a){if(typeof a.addEventListener=="function")return a.addEventListener(i,t,!1),{remove:function(){a.removeEventListener(i,t,!1)}};if(typeof a.attachEvent=="function")return a.attachEvent("on"+i,t),{remove:function(){a.detachEvent("on"+i,t)}}}}var gh={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Xl={default:gh,hover:{thumbColor:"rgba(0,0,0,0.2)"}},mh=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.clearEvents=b.ZT,t.onStartEvent=function(s){return function(l){t.isMobile=s,l.originalEvent.preventDefault();var f=s?(0,b.U2)(l.originalEvent,"touches.0.clientX"):l.clientX,d=s?(0,b.U2)(l.originalEvent,"touches.0.clientY"):l.clientY;t.startPos=t.cfg.isHorizontal?f:d,t.bindLaterEvent()}},t.bindLaterEvent=function(){var s=t.getContainerDOM(),l=[];t.isMobile?l=[Sc(s,"touchmove",t.onMouseMove),Sc(s,"touchend",t.onMouseUp),Sc(s,"touchcancel",t.onMouseUp)]:l=[Sc(s,"mousemove",t.onMouseMove),Sc(s,"mouseup",t.onMouseUp),Sc(s,"mouseleave",t.onMouseUp)],t.clearEvents=function(){l.forEach(function(f){f.remove()})}},t.onMouseMove=function(s){var l=t.cfg,f=l.isHorizontal,d=l.thumbOffset;s.preventDefault();var m=t.isMobile?(0,b.U2)(s,"touches.0.clientX"):s.clientX,x=t.isMobile?(0,b.U2)(s,"touches.0.clientY"):s.clientY,T=f?m:x,O=T-t.startPos;t.startPos=T,t.updateThumbOffset(d+O)},t.onMouseUp=function(s){s.preventDefault(),t.clearEvents()},t.onTrackClick=function(s){var l=t.cfg,f=l.isHorizontal,d=l.x,m=l.y,x=l.thumbLen,T=t.getContainerDOM(),O=T.getBoundingClientRect(),D=s.clientX,B=s.clientY,U=f?D-O.left-d-x/2:B-O.top-m-x/2,J=t.validateRange(U);t.updateThumbOffset(J)},t.onThumbMouseOver=function(){var s=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t.onThumbMouseOut=function(){var s=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t}return i.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.getValue(),f=(0,b.uZ)(l,t,s);l!==f&&!this.get("isInit")&&this.setValue(f)},i.prototype.getRange=function(){var t=this.get("minLimit")||0,s=this.get("maxLimit")||1;return{min:t,max:s}},i.prototype.setValue=function(t){var s=this.getRange(),l=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,b.uZ)(t,s.min,s.max)}),this.delegateEmit("valuechange",{originalValue:l,value:this.getValue()})},i.prototype.getValue=function(){return(0,b.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,A.pi)((0,A.pi)({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Xl})},i.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},i.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},i.prototype.initEvent=function(){this.bindEvents()},i.prototype.renderTrackShape=function(t){var s=this.cfg,l=s.trackLen,f=s.theme,d=f===void 0?{default:{}}:f,m=(0,b.b$)({},Xl,d).default,x=m.lineCap,T=m.trackColor,O=m.size,D=(0,b.U2)(this.cfg,"size",O),B=this.get("isHorizontal")?{x1:0+D/2,y1:D/2,x2:l-D/2,y2:D/2,lineWidth:D,stroke:T,lineCap:x}:{x1:D/2,y1:0+D/2,x2:D/2,y2:l-D/2,lineWidth:D,stroke:T,lineCap:x};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:B})},i.prototype.renderThumbShape=function(t){var s=this.cfg,l=s.thumbOffset,f=s.thumbLen,d=s.theme,m=(0,b.b$)({},Xl,d).default,x=m.size,T=m.lineCap,O=m.thumbColor,D=(0,b.U2)(this.cfg,"size",x),B=this.get("isHorizontal")?{x1:l+D/2,y1:D/2,x2:l+f-D/2,y2:D/2,lineWidth:D,stroke:O,lineCap:T,cursor:"default"}:{x1:D/2,y1:l+D/2,x2:D/2,y2:l+f-D/2,lineWidth:D,stroke:O,lineCap:T,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:B})},i.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var s=t.findById(this.getElementId("track"));s.on("click",this.onTrackClick);var l=t.findById(this.getElementId("thumb"));l.on("mouseover",this.onThumbMouseOver),l.on("mouseout",this.onThumbMouseOut)},i.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},i.prototype.validateRange=function(t){var s=this.cfg,l=s.thumbLen,f=s.trackLen,d=t;return t+l>f?d=f-l:t+l<l&&(d=0),d},i.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},i.prototype.updateThumbOffset=function(t){var s=this.cfg,l=s.thumbOffset,f=s.isHorizontal,d=s.thumbLen,m=s.size,x=this.validateRange(t);if(x!==l){var T=this.getElementByLocalId("thumb");f?T.attr({x1:x+m/2,x2:x+d-m/2}):T.attr({y1:x+m/2,y2:x+d-m/2}),this.emitOffsetChange(x)}},i.prototype.emitOffsetChange=function(t){var s=this.cfg,l=s.thumbOffset,f=s.trackLen,d=s.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,b.uZ)(t/(f-d),0,1)}),this.delegateEmit("valuechange",{originalValue:l,value:t})},i}(wi),xg=va,bg=Pa,Gd=Vl,ad=Uf,Bc=Mu,jh=id,$d=gg;function vm(a){if((0,b.xb)(a))return null;var i=a[0].x,t=a[0].x,s=a[0].y,l=a[0].y;return(0,b.S6)(a,function(f){i=i>f.x?f.x:i,t=t<f.x?f.x:t,s=s>f.y?f.y:s,l=l<f.y?f.y:l}),{minX:i,maxX:t,minY:s,maxY:l,centerX:(i+t)/2,centerY:(s+l)/2}}function Sg(a){return Array.from(new Set(a)).length===1}function Mv(a){return((0,b.VV)(a)+(0,b.Fp)(a))/2}function js(a,i,t,s){return{x:a+t*Math.cos(s),y:i+t*Math.sin(s)}}function Zf(a,i,t,s,l,f){f===void 0&&(f=0);var d=js(a,i,t,s),m=js(a,i,t,l),x=js(a,i,f,s),T=js(a,i,f,l);if(l-s===Math.PI*2){var O=js(a,i,t,s+Math.PI),D=js(a,i,f,s+Math.PI),B=[["M",d.x,d.y],["A",t,t,0,1,1,O.x,O.y],["A",t,t,0,1,1,m.x,m.y],["M",x.x,x.y]];return f&&(B.push(["A",f,f,0,1,0,D.x,D.y]),B.push(["A",f,f,0,1,0,T.x,T.y])),B.push(["M",d.x,d.y]),B.push(["Z"]),B}var U=l-s<=Math.PI?0:1,J=[["M",d.x,d.y],["A",t,t,0,U,1,m.x,m.y],["L",T.x,T.y]];return f&&J.push(["A",f,f,0,U,0,x.x,x.y]),J.push(["L",d.x,d.y]),J.push(["Z"]),J}function rf(a,i,t,s,l){var f=js(a,i,t,s),d=js(a,i,t,l);if((0,b.vQ)(l-s,Math.PI*2)){var m=js(a,i,t,s+Math.PI);return[["M",f.x,f.y],["A",t,t,0,1,1,m.x,m.y],["A",t,t,0,1,1,f.x,f.y],["A",t,t,0,1,0,m.x,m.y],["A",t,t,0,1,0,f.x,f.y],["Z"]]}var x=l-s<=Math.PI?0:1;return[["M",f.x,f.y],["A",t,t,0,x,1,d.x,d.y]]}function od(a,i){var t=a.points,s=vm(t),l,f,d=i.startAngle,m=i.endAngle,x=m-d;return i.isTransposed?(l=s.maxY*x,f=s.minY*x):(l=s.maxX*x,f=s.minX*x),l+=d,f+=d,{startAngle:f,endAngle:l}}function sd(a,i){if((0,b.hj)(a)&&(0,b.hj)(i))return[a,i];if(a=a,i=i,Sg(a)||Sg(i))return[Mv(a),Mv(i)];for(var t=-1,s=0,l=0,f,d=a.length-1,m,x=0;++t<a.length;)f=d,d=t,x+=m=a[f]*i[d]-a[d]*i[f],s+=(a[f]+a[d])*m,l+=(i[f]+i[d])*m;return x*=3,[s/x,l/x]}function Nc(a,i){var t=a.attr(),s=i.attr();return(0,b.S6)(t,function(l,f){s[f]===void 0&&(s[f]=void 0)}),s}function Rp(a,i,t){var s=Math.min(i,t),l=Math.max(i,t);return a>=s&&a<=l}function Hh(a,i,t){if((0,b.HD)(a))return a.padEnd(i,t);if((0,b.kJ)(a)){var s=a.length;if(s<i)for(var l=i-s,f=0;f<l;f++)a.push(t)}return a}function Yl(a,i){return typeof a=="object"&&i.forEach(function(t){delete a[t]}),a}function Sf(a,i,t){var s,l;i===void 0&&(i=[]),t===void 0&&(t=new Map);try{for(var f=(0,A.XA)(a),d=f.next();!d.done;d=f.next()){var m=d.value;t.has(m)||(i.push(m),t.set(m,!0))}}catch(x){s={error:x}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return i}var ls=function(){function a(i,t,s,l){i===void 0&&(i=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.x=i,this.y=t,this.height=l,this.width=s}return a.fromRange=function(i,t,s,l){return new a(i,t,s-i,l-t)},a.fromObject=function(i){return new a(i.minX,i.minY,i.width,i.height)},Object.defineProperty(a.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height},a.prototype.contains=function(i){return i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.add=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var s=this.clone();return(0,b.S6)(i,function(l){s.x=Math.min(l.x,s.x),s.y=Math.min(l.y,s.y),s.width=Math.max(l.maxX,s.maxX)-s.x,s.height=Math.max(l.maxY,s.maxY)-s.y}),s},a.prototype.merge=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var s=this.clone();return(0,b.S6)(i,function(l){s.x=Math.max(l.x,s.x),s.y=Math.max(l.y,s.y),s.width=Math.min(l.maxX,s.maxX)-s.x,s.height=Math.min(l.maxY,s.maxY)-s.y}),s},a.prototype.cut=function(i,t){var s=i.width,l=i.height;switch(t){case le.TOP:case le.TOP_LEFT:case le.TOP_RIGHT:return a.fromRange(this.minX,this.minY+l,this.maxX,this.maxY);case le.RIGHT:case le.RIGHT_TOP:case le.RIGHT_BOTTOM:return a.fromRange(this.minX,this.minY,this.maxX-s,this.maxY);case le.BOTTOM:case le.BOTTOM_LEFT:case le.BOTTOM_RIGHT:return a.fromRange(this.minX,this.minY,this.maxX,this.maxY-l);case le.LEFT:case le.LEFT_TOP:case le.LEFT_BOTTOM:return a.fromRange(this.minX+s,this.minY,this.maxX,this.maxY);default:return this}},a.prototype.shrink=function(i){var t=(0,A.CR)(i,4),s=t[0],l=t[1],f=t[2],d=t[3];return new a(this.x+d,this.y+s,this.width-d-l,this.height-s-f)},a.prototype.expand=function(i){var t=(0,A.CR)(i,4),s=t[0],l=t[1],f=t[2],d=t[3];return new a(this.x-d,this.y-s,this.width+d+l,this.height+s+f)},a.prototype.exceed=function(i){return[Math.max(-this.minY+i.minY,0),Math.max(this.maxX-i.maxX,0),Math.max(this.maxY-i.maxY,0),Math.max(-this.minX+i.minX,0)]},a.prototype.collide=function(i){return this.minX<i.maxX&&this.maxX>i.minX&&this.minY<i.maxY&&this.maxY>i.minY},a.prototype.size=function(){return this.width*this.height},a.prototype.isPointIn=function(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY},a}(),cl=function(a,i){var t=i.start,s=i.end;return new ls(a.x+a.width*t.x,a.y+a.height*t.y,a.width*Math.abs(s.x-t.x),a.height*Math.abs(s.y-t.y))};function Xs(a){return[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}function El(a){if(a.isPolar&&!a.isTransposed)return(a.endAngle-a.startAngle)*a.getRadius();var i=a.convert({x:0,y:0}),t=a.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function gm(a){if(a.isPolar){var i=a.startAngle,t=a.endAngle;return t-i===Math.PI*2}return!1}function Wh(a,i){var t=a.getCenter();return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function mm(a,i){var t=!1;if(a)if(a.type==="theta"){var s=a.start,l=a.end;t=Rp(i.x,s.x,l.x)&&Rp(i.y,s.y,l.y)}else{var f=a.invert(i);t=Rp(f.x,0,1)&&Rp(f.y,0,1)}return t}function Xd(a,i){var t=a.getCenter();return Math.atan2(i.y-t.y,i.x-t.x)}function Rv(a,i){i===void 0&&(i=0);var t=a.start,s=a.end,l=a.getWidth(),f=a.getHeight();if(a.isPolar){var d=a.startAngle,m=a.endAngle,x=a.getCenter(),T=a.getRadius();return{type:"path",startState:{path:Zf(x.x,x.y,T+i,d,d)},endState:function(D){var B=(m-d)*D+d,U=Zf(x.x,x.y,T+i,d,B);return{path:U}},attrs:{path:Zf(x.x,x.y,T+i,d,m)}}}var O;return a.isTransposed?O={height:f+i*2}:O={width:l+i*2},{type:"rect",startState:{x:t.x-i,y:s.y-i,width:a.isTransposed?l+i*2:0,height:a.isTransposed?0:f+i*2},endState:O,attrs:{x:t.x-i,y:s.y-i,width:l+i*2,height:f+i*2}}}function Iv(a,i){i===void 0&&(i=0);var t=a.start,s=a.end,l=a.getWidth(),f=a.getHeight(),d=Math.min(t.x,s.x),m=Math.min(t.y,s.y);return ls.fromRange(d-i,m-i,d+l+i,m+f+i)}var ym=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function _m(a){var i="linear";return ym.test(a)?i="timeCat":(0,b.HD)(a)&&(i="cat"),i}function wl(a,i,t,s){return i===void 0&&(i={}),i.type?i.type:a.type!=="identity"&&we.includes(t)&&["interval"].includes(s)||a.isCategory?"cat":a.type}function T0(a,i,t){var s=i||[];if((0,b.hj)(a)||(0,b.UM)((0,b.Wx)(s,a))&&(0,b.xb)(t)){var l=Fu("identity");return new l({field:a.toString(),values:[a]})}var f=(0,b.I)(s,a),d=(0,b.U2)(t,"type",_m(f[0])),m=Fu(d);return new m((0,A.pi)({field:a,values:f},t))}function xm(a,i){if(a.type!=="identity"&&i.type!=="identity"){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);a.change(t)}}function yh(a){return a.alias||a.field}function Eg(a,i,t){var s=a.values,l=s.length,f;if(l===1)f=[.5,1];else{var d=1,m=0;gm(i)?i.isTransposed?(d=(0,b.U2)(t,"widthRatio.multiplePie",1/1.3),m=1/l*d,f=[m/2,1-m/2]):f=[0,1-1/l]:(m=1/l/2,f=[m,1-m])}return f}function Ip(a){var i=a.values.filter(function(t){return!(0,b.UM)(t)&&!isNaN(t)});return Math.max.apply(Math,(0,A.ev)((0,A.ev)([],(0,A.CR)(i),!1),[(0,b.UM)(a.max)?-1/0:a.max],!1))}function A0(a){var i,t;switch(a){case le.TOP:i={x:0,y:1},t={x:1,y:1};break;case le.RIGHT:i={x:1,y:0},t={x:1,y:1};break;case le.BOTTOM:i={x:0,y:0},t={x:1,y:0};break;case le.LEFT:i={x:0,y:0},t={x:0,y:1};break;default:i=t={x:0,y:0}}return{start:i,end:t}}function wg(a){var i,t;return a.isTransposed?(i={x:0,y:0},t={x:1,y:0}):(i={x:0,y:0},t={x:0,y:1}),{start:i,end:t}}function Yd(a,i){var t={start:{x:0,y:0},end:{x:0,y:0}};a.isRect?t=A0(i):a.isPolar&&(t=wg(a));var s=t.start,l=t.end;return{start:a.convert(s),end:a.convert(l)}}function Ov(a,i){if(a.isRect)return a.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(i)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(i)?-1:1;if(a.isPolar){var t=a.x.start;return t<0?-1:1}return 1}function ot(a){var i=a.start,t=a.end;return i.x===t.x}function tr(a,i){var t=a.start,s=a.end,l=ot(a);return l?(t.y-s.y)*(i.x-t.x)>0?1:-1:(s.x-t.x)*(t.y-i.y)>0?-1:1}function Ar(a,i){var t=(0,b.U2)(a,["components","axis"],{});return(0,b.b$)({},(0,b.U2)(t,["common"],{}),(0,b.b$)({},(0,b.U2)(t,[i],{})))}function vn(a,i,t){var s=(0,b.U2)(a,["components","axis"],{});return(0,b.b$)({},(0,b.U2)(s,["common","title"],{}),(0,b.b$)({},(0,b.U2)(s,[i,"title"],{})),t)}function kn(a){var i=a.x,t=a.y,s=a.circleCenter,l=t.start>t.end,f=a.isTransposed?a.convert({x:l?0:1,y:0}):a.convert({x:0,y:l?0:1}),d=[f.x-s.x,f.y-s.y],m=[1,0],x=f.y>s.y?wa.EU(d,m):wa.EU(d,m)*-1,T=x+(i.end-i.start),O=Math.sqrt(Math.pow(f.x-s.x,2)+Math.pow(f.y-s.y,2));return{center:s,radius:O,startAngle:x,endAngle:T}}function fn(a,i){return(0,b.jn)(a)?a===!1?!1:{}:(0,b.U2)(a,[i])}function un(a,i){return(0,b.U2)(a,"position",i)}function ai(a,i){return(0,b.U2)(i,["title","text"],yh(a))}var Wn=function(){function a(i,t){this.destroyed=!1,this.facets=[],this.view=i,this.cfg=(0,b.b$)({},this.getDefaultCfg(),t)}return a.prototype.init=function(){this.container||(this.container=this.createContainer());var i=this.view.getData();this.facets=this.generateFacets(i)},a.prototype.render=function(){this.renderViews()},a.prototype.update=function(){},a.prototype.clear=function(){this.clearFacetViews()},a.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},a.prototype.facetToView=function(i){var t=i.region,s=i.data,l=i.padding,f=l===void 0?this.cfg.padding:l,d=this.view.createView({region:t,padding:f});d.data(s||[]),i.view=d,this.beforeEachView(d,i);var m=this.cfg.eachView;return m&&m(d,i),this.afterEachView(d,i),d},a.prototype.createContainer=function(){var i=this.view.getLayer(te.FORE);return i.addGroup()},a.prototype.renderViews=function(){this.createFacetViews()},a.prototype.createFacetViews=function(){var i=this;return this.facets.map(function(t){return i.facetToView(t)})},a.prototype.clearFacetViews=function(){var i=this;(0,b.S6)(this.facets,function(t){t.view&&(i.view.removeView(t.view),t.view=void 0)})},a.prototype.parseSpacing=function(){var i=this.view.viewBBox,t=i.width,s=i.height,l=this.cfg.spacing;return l.map(function(f,d){return(0,b.hj)(f)?f/(d===0?t:s):parseFloat(f)/100})},a.prototype.getFieldValues=function(i,t){var s=[],l={};return(0,b.S6)(i,function(f){var d=f[t];!(0,b.UM)(d)&&!l[d]&&(s.push(d),l[d]=!0)}),s},a.prototype.getRegion=function(i,t,s,l){var f=(0,A.CR)(this.parseSpacing(),2),d=f[0],m=f[1],x=(1+d)/(t===0?1:t)-d,T=(1+m)/(i===0?1:i)-m,O={x:(x+d)*s,y:(T+m)*l},D={x:O.x+x,y:O.y+T};return{start:O,end:D}},a.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},a.prototype.getDefaultTitleCfg=function(){var i=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:i}}},a.prototype.processAxis=function(i,t){var s=i.getOptions(),l=s.coordinate,f=i.geometries,d=(0,b.U2)(l,"type","rect");if(d==="rect"&&f.length){(0,b.UM)(s.axes)&&(s.axes={});var m=s.axes,x=(0,A.CR)(f[0].getXYFields(),2),T=x[0],O=x[1],D=fn(m,T),B=fn(m,O);D!==!1&&(s.axes[T]=this.getXAxisOption(T,m,D,t)),B!==!1&&(s.axes[O]=this.getYAxisOption(O,m,B,t))}},a.prototype.getFacetDataFilter=function(i){return function(t){return(0,b.yW)(i,function(s){var l=s.field,f=s.value;return!(0,b.UM)(f)&&l?t[l]===f:!0})}},a}(),vi={},oi=function(a){return vi[(0,b.vl)(a)]},fi=function(a,i){vi[(0,b.vl)(a)]=i},bi=function(){function a(i,t){this.context=i,this.cfg=t,i.addAction(this)}return a.prototype.applyCfg=function(i){(0,b.f0)(this,i)},a.prototype.init=function(){this.applyCfg(this.cfg)},a.prototype.destroy=function(){this.context.removeAction(this),this.context=null},a}(),Mn=bi,mi=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.execute=function(){this.callback&&this.callback(this.context)},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.callback=null},i}(Mn),Qr=mi,En={};function si(a,i){var t=En[a],s=null;if(t){var l=t.ActionClass,f=t.cfg;s=new l(i,f),s.name=a,s.init()}return s}function Ti(a){var i=En[a];return(0,b.U2)(i,"ActionClass")}function Kr(a,i,t){En[a]={ActionClass:i,cfg:t}}function Pi(a){delete En[a]}function ni(a,i){var t=new Qr(i);return t.callback=a,t.name="callback",t}function Mi(a,i){var t=[];if(a.length){t.push(["M",a[0].x,a[0].y]);for(var s=1,l=a.length;s<l;s+=1){var f=a[s];t.push(["L",f.x,f.y])}i&&t.push(["Z"])}return t}function Un(a,i){for(var t=[a[0]],s=1,l=a.length;s<l;s=s+2){var f=i.convert({x:a[s],y:a[s+1]});t.push(f.x,f.y)}return t}function Si(a,i){var t=i.isTransposed,s=a[1],l=a[6],f=a[7],d=i.convert({x:l,y:f}),m=t?0:1;return["A",s,s,0,0,m,d.x,d.y]}function ca(a,i,t){var s=t.isTransposed,l=t.startAngle,f=t.endAngle,d=a[0].toLowerCase()==="a"?{x:a[6],y:a[7]}:{x:a[1],y:a[2]},m={x:i[1],y:i[2]},x=[],T=s?"y":"x",O=Math.abs(m[T]-d[T])*(f-l),D=m[T]>=d[T]?1:0,B=O>Math.PI?1:0,U=t.convert(m),J=Wh(t,U);if(J>=.5)if(O===Math.PI*2){var pe={x:(m.x+d.x)/2,y:(m.y+d.y)/2},Ee=t.convert(pe);x.push(["A",J,J,0,B,D,Ee.x,Ee.y]),x.push(["A",J,J,0,B,D,U.x,U.y])}else x.push(["A",J,J,0,B,D,U.x,U.y]);return x}function Ra(a){(0,b.S6)(a,function(i,t){var s=i;if(s[0].toLowerCase()==="a"){var l=a[t-1],f=a[t+1];f&&f[0].toLowerCase()==="a"?l&&l[0].toLowerCase()==="l"&&(l[0]="M"):l&&l[0].toLowerCase()==="a"&&f&&f[0].toLowerCase()==="l"&&(f[0]="M")}})}var Ai=function(a,i,t,s){var l,f=[],d=!!s,m,x,T,O,D,B,U;if(d){l=(0,A.CR)(s,2),T=l[0],O=l[1];for(var J=0,pe=a.length;J<pe;J++){var Ee=a[J];T=wa.VV([0,0],T,Ee),O=wa.Fp([0,0],O,Ee)}}for(var J=0,Ce=a.length;J<Ce;J++){var Ee=a[J];if(J===0&&!t)U=Ee;else if(J===Ce-1&&!t)B=Ee,f.push(U),f.push(B);else{m=a[t?J?J-1:Ce-1:J-1],x=a[t?(J+1)%Ce:J+1];var st=[0,0];st=wa.lu(st,x,m),st=wa.bA(st,st,i);var gt=wa.TE(Ee,m),bt=wa.TE(Ee,x),Ft=gt+bt;Ft!==0&&(gt/=Ft,bt/=Ft);var xr=wa.bA([0,0],st,-gt),Fr=wa.bA([0,0],st,bt);B=wa.IH([0,0],Ee,xr),D=wa.IH([0,0],Ee,Fr),D=wa.VV([0,0],D,wa.Fp([0,0],x,Ee)),D=wa.Fp([0,0],D,wa.VV([0,0],x,Ee)),xr=wa.lu([0,0],D,Ee),xr=wa.bA([0,0],xr,-gt/bt),B=wa.IH([0,0],Ee,xr),B=wa.VV([0,0],B,wa.Fp([0,0],m,Ee)),B=wa.Fp([0,0],B,wa.VV([0,0],m,Ee)),Fr=wa.lu([0,0],Ee,B),Fr=wa.bA([0,0],Fr,bt/gt),D=wa.IH([0,0],Ee,Fr),d&&(B=wa.Fp([0,0],B,T),B=wa.VV([0,0],B,O),D=wa.Fp([0,0],D,T),D=wa.VV([0,0],D,O)),f.push(U),f.push(B),U=D}}return t&&f.push(f.shift()),f};function ii(a,i,t){for(var s=!!i,l=[],f=0,d=a.length;f<d;f+=2)l.push([a[f],a[f+1]]);for(var m=Ai(l,.4,s,t),x=l.length,T=[],O,D,B,f=0;f<x-1;f++)O=m[f*2],D=m[f*2+1],B=l[f+1],T.push(["C",O[0],O[1],D[0],D[1],B[0],B[1]]);return s&&(O=m[x],D=m[x+1],B=l[0],T.push(["C",O[0],O[1],D[0],D[1],B[0],B[1]])),T}function Dn(a,i){return Mi(a,i)}function ta(a,i,t){var s=[],l=a[0],f=null;if(a.length<=2)return Dn(a,i);for(var d=0,m=a.length;d<m;d++){var x=a[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var T=t||[[0,0],[1,1]],O=ii(s,i,T);return O.unshift(["M",l.x,l.y]),O}function to(a,i){var t=[];return(0,b.S6)(i,function(s){var l=s[0];switch(l.toLowerCase()){case"m":case"l":case"c":t.push(Un(s,a));break;case"a":t.push(Si(s,a));break;case"z":default:t.push(s);break}}),t}function ki(a,i){var t=[],s,l,f,d;return(0,b.S6)(i,function(m,x){var T=m[0];switch(T.toLowerCase()){case"m":case"c":case"q":t.push(Un(m,a));break;case"l":s=i[x-1],l=m,f=a.isTransposed,d=f?s[s.length-2]===l[1]:s[s.length-1]===l[2],d?t=t.concat(ca(s,l,a)):t.push(Un(m,a));break;case"a":t.push(Si(m,a));break;case"z":default:t.push(m);break}}),Ra(t),t}function Ka(a,i){var t=a.event,s=t.target;return _a(s,i)}function ka(a,i){var t=a.getCanvasBBox(),s=t.width,l=t.height;return s>0&&l>0&&(s>=i||l>=i)}function _a(a,i){var t=a.getCanvasBBox();return ka(a,i)?t:null}function Ro(a,i){var t=a.event.maskShapes;return t.map(function(s){return _a(s,i)}).filter(function(s){return!!s})}function gu(a,i){var t=a.event,s=t.target;return Uu(s,i)}function Uu(a,i){return ka(a,i)?a.attr("path"):null}function go(a,i){var t=a.event.maskShapes;return t.map(function(s){return Uu(s,i)})}function ds(a){var i=a.event,t,s=i.target;return s&&(t=s.get("element")),t}function Wo(a){var i=a.event,t=i.target,s;return t&&(s=t.get("delegateObject")),s}function lu(a){var i=a.event.gEvent;return!(i&&i.fromShape&&i.toShape&&i.fromShape.get("element")===i.toShape.get("element"))}function Ys(a){return a&&a.component&&a.component.isList()}function Hs(a){return a&&a.component&&a.component.isSlider()}function tu(a){var i=a.event,t=i.target;return t&&(t==null?void 0:t.get("name"))==="mask"||vs(a)}function vs(a){var i;return((i=a.event.target)===null||i===void 0?void 0:i.get("name"))==="multi-mask"}function cu(a,i){var t=a.event.target;if(vs(a))return Va(a,i);if(t.get("type")==="path"){var s=gu(a,i);return s?Ii(a.view,s):void 0}var l=Ka(a,i);return l?_n(a.view,l):null}function Va(a,i){var t=a.event.target;if(t.get("type")==="path"){var s=go(a,i);return s.length>0?s.flatMap(function(f){return Ii(a.view,f)}):null}var l=Ro(a,i);return l.length>0?l.flatMap(function(f){return _n(a.view,f)}):null}function Zu(a,i,t){if(vs(a))return da(a,i,t);var s=Ka(a,t);return s?No(s,a,i):null}function No(a,i,t){var s=i.view,l=sn(s,t,{x:a.x,y:a.y}),f=sn(s,t,{x:a.maxX,y:a.maxY}),d={minX:l.x,minY:l.y,maxX:f.x,maxY:f.y};return _n(t,d)}function da(a,i,t){var s=Ro(a,t);return s.length>0?s.flatMap(function(l){return No(l,a,i)}):null}function ba(a){var i=a.geometries,t=[];return(0,b.S6)(i,function(s){var l=s.elements;t=t.concat(l)}),a.views&&a.views.length&&(0,b.S6)(a.views,function(s){t=t.concat(ba(s))}),t}function Io(a,i,t){var s=ba(a);return s.filter(function(l){return mu(l,i)===t})}function Ts(a,i){var t=a.geometries,s=[];return(0,b.S6)(t,function(l){var f=l.getElementsBy(function(d){return d.hasState(i)});s=s.concat(f)}),s}function mu(a,i){var t=a.getModel(),s=t.data,l;return(0,b.kJ)(s)?l=s[0][i]:l=s[i],l}function mr(a,i){return!(i.minX>a.maxX||i.maxX<a.minX||i.minY>a.maxY||i.maxY<a.minY)}function _n(a,i){var t=ba(a),s=[];return(0,b.S6)(t,function(l){var f=l.shape,d=f.getCanvasBBox();mr(i,d)&&s.push(l)}),s}function hn(a){var i=[];return(0,b.S6)(a,function(t){var s=t[0];if(s!=="A")for(var l=1;l<t.length;l=l+2)i.push([t[l],t[l+1]]);else{var f=t.length;i.push([t[f-2],t[f-1]])}}),i}function Ii(a,i){var t=ba(a),s=hn(i),l=t.filter(function(f){var d=f.shape,m;if(d.get("type")==="path")m=hn(d.attr("path"));else{var x=d.getCanvasBBox();m=Xs(x)}return(0,Ap.Wq)(s,m)});return l}function $a(a){return a.getComponents().map(function(i){return i.component})}function $o(a,i){var t=i.x-a.x,s=i.y-a.y;return Math.sqrt(t*t+s*s)}function Vt(a,i){if(a.length<=2)return Dn(a,!1);var t=a[0],s=[];(0,b.S6)(a,function(f){s.push(f.x),s.push(f.y)});var l=ii(s,i,null);return l.unshift(["M",t.x,t.y]),l}function kt(a,i){return a.x<=i.x&&a.maxX>=i.x&&a.y<=i.y&&a.maxY>i.y}function wr(a){var i=a.parent,t=null;return i&&(t=i.views.filter(function(s){return s!==a})),t}function Qt(a,i){var t=a.getCoordinate();return t.invert(i)}function sn(a,i,t){var s=Qt(a,t);return i.getCoordinate().convert(s)}function Lr(a,i,t,s){var l=!1;return(0,b.S6)(a,function(f){if(f[t]===i[t]&&f[s]===i[s])return l=!0,!1}),l}function Zr(a,i){var t=a.getScaleByField(i);return!t&&a.views&&(0,b.S6)(a.views,function(s){if(t=Zr(s,i),t)return!1}),t}var Gr=function(){function a(i){this.actions=[],this.event=null,this.cacheMap={},this.view=i}return a.prototype.cache=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];if(i.length===1)return this.cacheMap[i[0]];i.length===2&&(this.cacheMap[i[0]]=i[1])},a.prototype.getAction=function(i){return this.actions.find(function(t){return t.name===i})},a.prototype.addAction=function(i){this.actions.push(i)},a.prototype.removeAction=function(i){var t=this.actions,s=this.actions.indexOf(i);s>=0&&t.splice(s,1)},a.prototype.getCurrentPoint=function(){var i=this.event;if(i)if(i.target instanceof HTMLElement){var t=this.view.getCanvas(),s=t.getPointByClient(i.clientX,i.clientY);return s}else return{x:i.x,y:i.y};return null},a.prototype.getCurrentShape=function(){return(0,b.U2)(this.event,["gEvent","shape"])},a.prototype.isInPlot=function(){var i=this.getCurrentPoint();return i?this.view.isPointInPlot(i):!1},a.prototype.isInShape=function(i){var t=this.getCurrentShape();return t?t.get("name")===i:!1},a.prototype.isInComponent=function(i){var t=$a(this.view),s=this.getCurrentPoint();return s?!!t.find(function(l){var f=l.getBBox();return i?l.get("name")===i&&kt(f,s):kt(f,s)}):!1},a.prototype.destroy=function(){(0,b.S6)(this.actions.slice(),function(i){i.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},a}(),yr=Gr,Ur=function(){function a(i,t){this.view=i,this.cfg=t}return a.prototype.init=function(){this.initEvents()},a.prototype.initEvents=function(){},a.prototype.clearEvents=function(){},a.prototype.destroy=function(){this.clearEvents()},a}(),or=Ur;function jr(a,i,t){var s=a.split(":"),l=s[0],f=i.getAction(l)||si(l,i);if(!f)throw new Error("There is no action named ".concat(l));var d=s[1];return{action:f,methodName:d,arg:t}}function bn(a){var i=a.action,t=a.methodName,s=a.arg;if(i[t])i[t](s);else throw new Error("Action(".concat(i.name,") doesn't have a method called ").concat(t))}var Sn={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Xn=function(a){(0,A.ZT)(i,a);function i(t,s){var l=a.call(this,t,s)||this;return l.callbackCaches={},l.emitCaches={},l.steps=s,l}return i.prototype.init=function(){this.initContext(),a.prototype.init.call(this)},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},i.prototype.initEvents=function(){var t=this;(0,b.S6)(this.steps,function(s,l){(0,b.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.bindEvent(f.trigger,d)})})},i.prototype.clearEvents=function(){var t=this;(0,b.S6)(this.steps,function(s,l){(0,b.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.offEvent(f.trigger,d)})})},i.prototype.initContext=function(){var t=this.view,s=new yr(t);this.context=s;var l=this.steps;(0,b.S6)(l,function(f){(0,b.S6)(f,function(d){if((0,b.mf)(d.action))d.actionObject={action:ni(d.action,s),methodName:"execute"};else if((0,b.HD)(d.action))d.actionObject=jr(d.action,s,d.arg);else if((0,b.kJ)(d.action)){var m=d.action,x=(0,b.kJ)(d.arg)?d.arg:[d.arg];d.actionObject=[],(0,b.S6)(m,function(T,O){d.actionObject.push(jr(T,s,x[O]))})}})})},i.prototype.isAllowStep=function(t){var s=this.currentStepName,l=this.steps;if(s===t||t===Sn.SHOW_ENABLE)return!0;if(t===Sn.PROCESSING)return s===Sn.START;if(t===Sn.START)return s!==Sn.PROCESSING;if(t===Sn.END)return s===Sn.PROCESSING||s===Sn.START;if(t===Sn.ROLLBACK){if(l[Sn.END])return s===Sn.END;if(s===Sn.START)return!0}return!1},i.prototype.isAllowExecute=function(t,s){if(this.isAllowStep(t)){var l=this.getKey(t,s);return s.once&&this.emitCaches[l]?!1:s.isEnable?s.isEnable(this.context):!0}return!1},i.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},i.prototype.afterExecute=function(t,s){t!==Sn.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var l=this.getKey(t,s);this.emitCaches[l]=!0},i.prototype.getKey=function(t,s){return t+s.trigger+s.action},i.prototype.getActionCallback=function(t,s){var l=this,f=this.context,d=this.callbackCaches,m=s.actionObject;if(s.action&&m){var x=this.getKey(t,s);if(!d[x]){var T=function(O){f.event=O,l.isAllowExecute(t,s)?((0,b.kJ)(m)?(0,b.S6)(m,function(D){f.event=O,bn(D)}):(f.event=O,bn(m)),l.afterExecute(t,s),s.callback&&(f.event=O,s.callback(f))):f.event=null};s.debounce?d[x]=(0,b.Ds)(T,s.debounce.wait,s.debounce.immediate):s.throttle?d[x]=(0,b.P2)(T,s.throttle.wait,{leading:s.throttle.leading,trailing:s.throttle.trailing}):d[x]=T}return d[x]}return null},i.prototype.bindEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.addEventListener(l[1],s):l[0]==="document"?document.addEventListener(l[1],s):this.view.on(t,s)},i.prototype.offEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.removeEventListener(l[1],s):l[0]==="document"?document.removeEventListener(l[1],s):this.view.off(t,s)},i}(or),Zn=Xn,qn={};function Xi(a){return qn[(0,b.vl)(a)]}function Fn(a,i){qn[(0,b.vl)(a)]=i}function Gi(a,i,t){var s=Xi(a);if(!s)return null;if((0,b.PO)(s)){var l=(0,b.CD)((0,b.d9)(s),t);return new Zn(i,l)}else{var f=s;return new f(i,t)}}function xa(a){return{title:{autoRotate:!0,position:"center",spacing:a.axisTitleSpacing,style:{fill:a.axisTitleTextFillColor,fontSize:a.axisTitleTextFontSize,lineHeight:a.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily},iconStyle:{fill:a.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:a.axisLabelOffset,style:{fill:a.axisLabelFillColor,fontSize:a.axisLabelFontSize,lineHeight:a.axisLabelLineHeight,fontFamily:a.fontFamily}},line:{style:{lineWidth:a.axisLineBorder,stroke:a.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:a.axisGridBorderColor,lineWidth:a.axisGridBorder,lineDash:a.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:a.axisTickLineBorder,stroke:a.axisTickLineBorderColor},alignTick:!0,length:a.axisTickLineLength},subTickLine:null,animate:!0}}function Da(a){return{title:null,marker:{symbol:"circle",spacing:a.legendMarkerSpacing,style:{r:a.legendCircleMarkerSize,fill:a.legendMarkerColor}},itemName:{spacing:5,style:{fill:a.legendItemNameFillColor,fontFamily:a.fontFamily,fontSize:a.legendItemNameFontSize,lineHeight:a.legendItemNameLineHeight,fontWeight:a.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:a.legendPageNavigatorMarkerSize,inactiveFill:a.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:a.legendPageNavigatorMarkerInactiveFillOpacity,fill:a.legendPageNavigatorMarkerFillColor,opacity:a.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:a.legendPageNavigatorTextFillColor,fontSize:a.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:a.legendItemSpacing,itemMarginBottom:a.legendItemMarginBottom,padding:a.legendPadding}}function zo(a){var i,t={point:{default:{fill:a.pointFillColor,r:a.pointSize,stroke:a.pointBorderColor,lineWidth:a.pointBorder,fillOpacity:a.pointFillOpacity},active:{stroke:a.pointActiveBorderColor,lineWidth:a.pointActiveBorder},selected:{stroke:a.pointSelectedBorderColor,lineWidth:a.pointSelectedBorder},inactive:{fillOpacity:a.pointInactiveFillOpacity,strokeOpacity:a.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:a.hollowPointFillColor,lineWidth:a.hollowPointBorder,stroke:a.hollowPointBorderColor,strokeOpacity:a.hollowPointBorderOpacity,r:a.hollowPointSize},active:{stroke:a.hollowPointActiveBorderColor,strokeOpacity:a.hollowPointActiveBorderOpacity},selected:{lineWidth:a.hollowPointSelectedBorder,stroke:a.hollowPointSelectedBorderColor,strokeOpacity:a.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:a.hollowPointInactiveBorderOpacity}},area:{default:{fill:a.areaFillColor,fillOpacity:a.areaFillOpacity,stroke:null},active:{fillOpacity:a.areaActiveFillOpacity},selected:{fillOpacity:a.areaSelectedFillOpacity},inactive:{fillOpacity:a.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:a.hollowAreaBorderColor,lineWidth:a.hollowAreaBorder,strokeOpacity:a.hollowAreaBorderOpacity},active:{fill:null,lineWidth:a.hollowAreaActiveBorder},selected:{fill:null,lineWidth:a.hollowAreaSelectedBorder},inactive:{strokeOpacity:a.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:a.intervalFillColor,fillOpacity:a.intervalFillOpacity},active:{stroke:a.intervalActiveBorderColor,lineWidth:a.intervalActiveBorder},selected:{stroke:a.intervalSelectedBorderColor,lineWidth:a.intervalSelectedBorder},inactive:{fillOpacity:a.intervalInactiveFillOpacity,strokeOpacity:a.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:a.hollowIntervalFillColor,stroke:a.hollowIntervalBorderColor,lineWidth:a.hollowIntervalBorder,strokeOpacity:a.hollowIntervalBorderOpacity},active:{stroke:a.hollowIntervalActiveBorderColor,lineWidth:a.hollowIntervalActiveBorder,strokeOpacity:a.hollowIntervalActiveBorderOpacity},selected:{stroke:a.hollowIntervalSelectedBorderColor,lineWidth:a.hollowIntervalSelectedBorder,strokeOpacity:a.hollowIntervalSelectedBorderOpacity},inactive:{stroke:a.hollowIntervalInactiveBorderColor,lineWidth:a.hollowIntervalInactiveBorder,strokeOpacity:a.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:a.lineBorderColor,lineWidth:a.lineBorder,strokeOpacity:a.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:a.lineActiveBorder},selected:{lineWidth:a.lineSelectedBorder},inactive:{strokeOpacity:a.lineInactiveBorderOpacity}}},s=xa(a),l=Da(a);return{background:a.backgroundColor,defaultColor:a.brandColor,subColor:a.subColor,semanticRed:a.paletteSemanticRed,semanticGreen:a.paletteSemanticGreen,padding:"auto",fontFamily:a.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:a.paletteQualitative10,colors20:a.paletteQualitative20,sequenceColors:a.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(f){var d=f.geometry.coordinate;if(d.isPolar&&d.isTransposed){var m=od(f.getModel(),d),x=m.startAngle,T=m.endAngle,O=(x+T)/2,D=7.5,B=D*Math.cos(O),U=D*Math.sin(O);return{matrix:eo.vs(null,[["t",B,U]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,A.pi)((0,A.pi)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,A.pi)((0,A.pi)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,A.pi)((0,A.pi)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,A.pi)((0,A.pi)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,A.pi)((0,A.pi)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,A.pi)((0,A.pi)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,A.pi)((0,A.pi)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,A.pi)((0,A.pi)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:s,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,b.b$)({},s.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,b.b$)({},s.grid,{line:{type:"circle"}})}},legend:{common:l,right:{layout:"vertical",padding:a.legendVerticalPadding},left:{layout:"vertical",padding:a.legendVerticalPadding},top:{layout:"horizontal",padding:a.legendHorizontalPadding},bottom:{layout:"horizontal",padding:a.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:a.sliderRailHeight,defaultLength:a.sliderRailWidth,style:{fill:a.sliderRailFillColor,stroke:a.sliderRailBorderColor,lineWidth:a.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:a.sliderLabelTextFillColor,fontSize:a.sliderLabelTextFontSize,lineHeight:a.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily}},handler:{size:a.sliderHandlerWidth,style:{fill:a.sliderHandlerFillColor,stroke:a.sliderHandlerBorderColor}},slidable:!0,padding:l.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:a.tooltipCrosshairsBorderColor,lineWidth:a.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(i={},i["".concat(Hl)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:a.tooltipContainerFillColor,opacity:a.tooltipContainerFillOpacity,boxShadow:a.tooltipContainerShadow,borderRadius:"".concat(a.tooltipContainerBorderRadius,"px"),color:a.tooltipTextFillColor,fontSize:"".concat(a.tooltipTextFontSize,"px"),fontFamily:a.fontFamily,lineHeight:"".concat(a.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},i["".concat(Pl)]={marginBottom:"12px",marginTop:"12px"},i["".concat(Wl)]={margin:0,listStyleType:"none",padding:0},i["".concat(Zh)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},i["".concat(wp)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},i["".concat(tf)]={display:"inline-block",float:"right",marginLeft:"30px"},i)},annotation:{arc:{style:{stroke:a.annotationArcBorderColor,lineWidth:a.annotationArcBorder},animate:!0},line:{style:{stroke:a.annotationLineBorderColor,lineDash:a.annotationLineDash,lineWidth:a.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textAlign:"start",fontFamily:a.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:a.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:a.annotationRegionBorder,stroke:a.annotationRegionBorderColor,fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:a.brandColor,lineWidth:2}},line:{style:{stroke:a.annotationLineBorderColor,lineWidth:a.annotationLineBorder},length:a.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:a.cSliderBackgroundFillColor,opacity:a.cSliderBackgroundFillOpacity},foregroundStyle:{fill:a.cSliderForegroundFillColor,opacity:a.cSliderForegroundFillOpacity},handlerStyle:{width:a.cSliderHandlerWidth,height:a.cSliderHandlerHeight,fill:a.cSliderHandlerFillColor,opacity:a.cSliderHandlerFillOpacity,stroke:a.cSliderHandlerBorderColor,lineWidth:a.cSliderHandlerBorder,radius:a.cSliderHandlerBorderRadius,highLightFill:a.cSliderHandlerHighlightFillColor},textStyle:{fill:a.cSliderTextFillColor,opacity:a.cSliderTextFillOpacity,fontSize:a.cSliderTextFontSize,lineHeight:a.cSliderTextLineHeight,fontWeight:a.cSliderTextFontWeight,stroke:a.cSliderTextBorderColor,lineWidth:a.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:a.scrollbarTrackFillColor,thumbColor:a.scrollbarThumbFillColor}},hover:{style:{thumbColor:a.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:a.labelFillColor,fontSize:a.labelFontSize,fontFamily:a.fontFamily,stroke:a.labelBorderColor,lineWidth:a.labelBorder},fillColorDark:a.labelFillColorDark,fillColorLight:a.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:a.innerLabelFillColor,fontSize:a.innerLabelFontSize,fontFamily:a.fontFamily,stroke:a.innerLabelBorderColor,lineWidth:a.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:a.overflowLabelFillColor,fontSize:a.overflowLabelFontSize,fontFamily:a.fontFamily,stroke:a.overflowLabelBorderColor,lineWidth:a.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:a.labelLineBorder}},autoRotate:!0}}}var za={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},ql={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Cg=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],nf=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],bm=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Ef=function(a){a===void 0&&(a={});var i=a.paletteQualitative10,t=i===void 0?Cg:i,s=a.paletteQualitative20,l=s===void 0?nf:s,f=a.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"transparent",brandColor:d,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:bm,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:za[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:za[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:ql[85],axisTickLineBorderColor:za[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:za[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:za[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:za[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:za[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:d,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:za[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:za[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:za[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:za[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:za[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:za[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:za[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:za[25],annotationArcBorderColor:za[15],annotationArcBorder:1,annotationLineBorderColor:za[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:za[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:za[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:za[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:za[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:za[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:ql[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:za[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:ql[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:za[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:d,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:ql[100],pointBorderOpacity:1,pointActiveBorderColor:za[100],pointSelectedBorder:2,pointSelectedBorderColor:za[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:d,hollowPointBorderOpacity:.95,hollowPointFillColor:ql[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:za[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:za[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:d,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:d,areaFillOpacity:.25,areaActiveFillColor:d,areaActiveFillOpacity:.5,areaSelectedFillColor:d,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:d,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:za[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:za[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:d,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:za[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:za[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:d,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:ql[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:za[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:za[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,A.pi)((0,A.pi)({},m),a)},Sm=Ef();function Pv(a){var i=a.styleSheet,t=i===void 0?{}:i,s=(0,A._T)(a,["styleSheet"]),l=Ef(t);return(0,b.b$)({},zo(l),s)}var m_=Pv({}),M0={default:m_};function ud(a){return(0,b.U2)(M0,(0,b.vl)(a),M0.default)}function ld(a,i){M0[(0,b.vl)(a)]=Pv(i)}function Tg(a,i,t){var s=t.translate(a),l=t.translate(i);return(0,b.vQ)(s,l)}function kv(a,i){var t=i.coordinate,s=i.getXScale(),l=s.range,f=l[l.length-1],d=l[0],m=t.invert(a),x=m.x;return t.isPolar&&x>(1+f)/2&&(x=d),s.translate(s.invert(x))}function Em(a,i,t){var s=t.coordinate,l=t.getYScale(),f=l.field,d=s.invert(i),m=l.invert(d.y),x=(0,b.sE)(a,function(T){var O=T[Re];return O[f][0]<=m&&O[f][1]>=m});return x||a[a.length-1]}var Ru=(0,b.HP)(function(a){if(a.isCategory)return 1;for(var i=a.values,t=i.length,s=a.translate(i[0]),l=s,f=0;f<t;f++){var d=i[f],m=a.translate(d);m<s&&(s=m),m>l&&(l=m)}return(l-s)/(t-1)});function Ws(a,i,t){var s=i.getAttribute("position"),l=s.getFields(),f=i.scales,d=(0,b.mf)(t)||!t?l[0]:t,m=f[d],x=m?m.getText(a[d]):a[d]||d;return(0,b.mf)(t)?t(x,a):x}function y_(a){var i=(0,b.VO)(a.attributes);return(0,b.hX)(i,function(t){return(0,b.FX)(we,t.type)})}function R0(a){var i,t,s=y_(a),l;try{for(var f=(0,A.XA)(s),d=f.next();!d.done;d=f.next()){var m=d.value,x=m.getScale(m.type);if(x&&x.isLinear){var T=(0,b.U2)(a.scaleDefs,x.field),O=wl(x,T,m.type,a.type);if(O!=="cat"){l=x;break}}}}catch(U){i={error:U}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(i)throw i.error}}var D=a.getXScale(),B=a.getYScale();return l||B||D}function I0(a,i){var t=i.field,s=a[t];if((0,b.kJ)(s)){var l=s.map(function(f){return i.getText(f)});return l.join("-")}return i.getText(s)}function Dv(a,i){var t,s=i.getGroupScales();if(s.length&&(t=s[0]),t){var l=t.field;return t.getText(a[l])}var f=R0(i);return yh(f)}function O0(a,i,t){if(i.length===0)return null;var s=t.type,l=t.getXScale(),f=t.getYScale(),d=l.field,m=f.field,x=null;if(s==="heatmap"||s==="point"){for(var T=t.coordinate,O=T.invert(a),D=l.invert(O.x),B=f.invert(O.y),U=1/0,J=0;J<i.length;J++){var pe=i[J],Ee=pe[Re],Ce=Math.pow(Ee[d]-D,2)+Math.pow(Ee[m]-B,2);Ce<U&&(U=Ce,x=pe)}return x}var st=i[0],gt=i[i.length-1],bt=kv(a,t),Ft=st[Re][d],xr=st[Re][m],Fr=gt[Re][d],$r=f.isLinear&&(0,b.kJ)(xr);if((0,b.kJ)(Ft)){for(var J=0;J<i.length;J++){var yn=i[J],Ee=yn[Re];if(l.translate(Ee[d][0])<=bt&&l.translate(Ee[d][1])>=bt)if($r)(0,b.kJ)(x)||(x=[]),x.push(yn);else{x=yn;break}}(0,b.kJ)(x)&&(x=Em(x,a,t))}else{var cn=void 0;if(!l.isLinear&&l.type!=="timeCat"){for(var J=0;J<i.length;J++){var yn=i[J],Ee=yn[Re];if(Tg(Ee[d],bt,l))if($r)(0,b.kJ)(x)||(x=[]),x.push(yn);else{x=yn;break}else l.translate(Ee[d])<=bt&&(gt=yn,cn=i[J+1])}(0,b.kJ)(x)&&(x=Em(x,a,t))}else{if((bt>l.translate(Fr)||bt<l.translate(Ft))&&(bt>l.max||bt<l.min))return null;for(var Bn=0,hi=i.length-1,Hi=void 0;Bn<=hi;){Hi=Math.floor((Bn+hi)/2);var aa=i[Hi][Re][d];if(Tg(aa,bt,l))return i[Hi];l.translate(aa)<=l.translate(bt)?(Bn=Hi+1,gt=i[Hi],cn=i[Hi+1]):(hi===0&&(gt=i[0]),hi=Hi-1)}}gt&&cn&&Math.abs(l.translate(gt[Re][d])-bt)>Math.abs(l.translate(cn[Re][d])-bt)&&(gt=cn)}var Qa=Ru(t.getXScale());return!x&&Math.abs(l.translate(gt[Re][d])-bt)<=Qa/2&&(x=gt),x}function Qo(a,i,t,s){var l,f;t===void 0&&(t=""),s===void 0&&(s=!1);var d=a[Re],m=Ws(d,i,t),x=i.tooltipOption,T=i.theme.defaultColor,O=[],D,B;function U(yn,cn){if(s||!(0,b.UM)(cn)&&cn!==""){var Bn={title:m,data:d,mappingData:a,name:yn,value:cn,color:a.color||T,marker:!0};O.push(Bn)}}if((0,b.Kn)(x)){var J=x.fields,pe=x.callback;if(pe){var Ee=J.map(function(yn){return a[Re][yn]}),Ce=pe.apply(void 0,(0,A.ev)([],(0,A.CR)(Ee),!1)),st=(0,A.pi)({data:a[Re],mappingData:a,title:m,color:a.color||T,marker:!0},Ce);O.push(st)}else{var gt=i.scales;try{for(var bt=(0,A.XA)(J),Ft=bt.next();!Ft.done;Ft=bt.next()){var xr=Ft.value;if(!(0,b.UM)(d[xr])){var Fr=gt[xr];D=yh(Fr),B=Fr.getText(d[xr]),U(D,B)}}}catch(yn){l={error:yn}}finally{try{Ft&&!Ft.done&&(f=bt.return)&&f.call(bt)}finally{if(l)throw l.error}}}}else{var $r=R0(i);B=I0(d,$r),D=Dv(d,i),U(D,B)}return O}function ks(a,i,t,s){var l,f,d=s.showNil,m=[],x=a.dataArray;if(!(0,b.xb)(x)){a.sort(x);try{for(var T=(0,A.XA)(x),O=T.next();!O.done;O=T.next()){var D=O.value,B=O0(i,D,a);if(B){var U=a.getElementId(B),J=a.elementsMap[U];if(a.type==="heatmap"||J.visible){var pe=Qo(B,a,t,d);pe.length&&m.push(pe)}}}}catch(Ee){l={error:Ee}}finally{try{O&&!O.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}}return m}function Gh(a,i,t,s){var l=s.showNil,f=[],d=a.container,m=d.getShape(i.x,i.y);if(m&&m.get("visible")&&m.get("origin")){var x=m.get("origin").mappingData,T=Qo(x,a,t,l);T.length&&f.push(T)}return f}function wm(a,i,t){var s,l,f=[],d=a.geometries,m=t.shared,x=t.title,T=t.reversed;try{for(var O=(0,A.XA)(d),D=O.next();!D.done;D=O.next()){var B=D.value;if(B.visible&&B.tooltipOption!==!1){var U=B.type,J=void 0;["point","edge","polygon"].includes(U)?J=Gh(B,i,x,t):["area","line","path","heatmap"].includes(U)||m!==!1?J=ks(B,i,x,t):J=Gh(B,i,x,t),J.length&&(T&&J.reverse(),f.push(J))}}}catch(pe){s={error:pe}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}return f}function Iu(a,i,t){var s,l,f=wm(a,i,t);try{for(var d=(0,A.XA)(a.views),m=d.next();!m.done;m=d.next()){var x=m.value;f=f.concat(wm(x,i,t))}}catch(T){s={error:T}}finally{try{m&&!m.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return f}function Ag(a){return!(0,b.hj)(a)&&!(0,b.kJ)(a)}function Vf(a){a===void 0&&(a=0);var i=(0,b.kJ)(a)?a:[a];switch(i.length){case 0:i=[0,0,0,0];break;case 1:i=new Array(4).fill(i[0]);break;case 2:i=(0,A.ev)((0,A.ev)([],(0,A.CR)(i),!1),(0,A.CR)(i),!1);break;case 3:i=(0,A.ev)((0,A.ev)([],(0,A.CR)(i),!1),[i[1]],!1);break;default:i=i.slice(0,4);break}return i}var qd={};function af(a,i){qd[a]=i}function __(a){delete qd[a]}function Lv(){return Object.keys(qd)}function Vu(a){return qd[a]}var sc=function(){function a(i){this.option=this.wrapperOption(i)}return a.prototype.update=function(i){return this.option=this.wrapperOption(i),this},a.prototype.hasAction=function(i){var t=this.option.actions;return(0,b.G)(t,function(s){return s[0]===i})},a.prototype.create=function(i,t){var s=this.option,l=s.type,f=s.cfg,d=l==="theta",m=(0,A.pi)({start:i,end:t},f),x=Zd(d?"polar":l);return this.coordinate=new x(m),this.coordinate.type=l,d&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},a.prototype.adjust=function(i,t){return this.coordinate.update({start:i,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},a.prototype.rotate=function(i){return this.option.actions.push(["rotate",i]),this},a.prototype.reflect=function(i){return this.option.actions.push(["reflect",i]),this},a.prototype.scale=function(i,t){return this.option.actions.push(["scale",i,t]),this},a.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},a.prototype.getOption=function(){return this.option},a.prototype.getCoordinate=function(){return this.coordinate},a.prototype.wrapperOption=function(i){return(0,A.pi)({type:"rect",actions:[],cfg:{}},i)},a.prototype.execActions=function(i){var t=this,s=this.option.actions;(0,b.S6)(s,function(l){var f,d=(0,A.CR)(l),m=d[0],x=d.slice(1),T=(0,b.UM)(i)?!0:i.includes(m);T&&(f=t.coordinate)[m].apply(f,(0,A.ev)([],(0,A.CR)(x),!1))})},a}(),Ec=sc,Ux=function(){function a(i,t,s){this.view=i,this.gEvent=t,this.data=s,this.type=t.type}return a.fromData=function(i,t,s){return new a(i,new rt.Event(t,{}),s)},Object.defineProperty(a.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),a.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},a.prototype.clone=function(){return new a(this.view,this.gEvent,this.data)},a}(),Xa=Ux;function of(a){var i=a.getController("axis"),t=a.getController("legend"),s=a.getController("annotation"),l=a.getController("slider"),f=a.getController("scrollbar");[i,l,f,t,s].forEach(function(d){d&&d.layout()})}var Op=function(){function a(){this.scales=new Map,this.syncScales=new Map}return a.prototype.createScale=function(i,t,s,l){var f=s,d=this.getScaleMeta(l);if(t.length===0&&d){var m=d.scale,x={type:m.type};m.isCategory&&(x.values=m.values),f=(0,b.b$)(x,d.scaleDef,s)}var T=T0(i,t,f);return this.cacheScale(T,s,l),T},a.prototype.sync=function(i,t){var s=this;this.syncScales.forEach(function(l,f){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,x=[];(0,b.S6)(l,function(T){var O=s.getScale(T);m=(0,b.hj)(O.max)?Math.max(m,O.max):m,d=(0,b.hj)(O.min)?Math.min(d,O.min):d,(0,b.S6)(O.values,function(D){x.includes(D)||x.push(D)})}),(0,b.S6)(l,function(T){var O=s.getScale(T);if(O.isContinuous)O.change({min:d,max:m,values:x});else if(O.isCategory){var D=O.range,B=s.getScaleMeta(T);x&&!(0,b.U2)(B,["scaleDef","range"])&&(D=Eg((0,b.b$)({},O,{values:x}),i,t)),O.change({values:x,range:D})}})})},a.prototype.cacheScale=function(i,t,s){var l=this.getScaleMeta(s);l&&l.scale.type===i.type?(xm(l.scale,i),l.scaleDef=t):(l={key:s,scale:i,scaleDef:t},this.scales.set(s,l));var f=this.getSyncKey(l);if(l.syncKey=f,this.removeFromSyncScales(s),f){var d=this.syncScales.get(f);d||(d=[],this.syncScales.set(f,d)),d.push(s)}},a.prototype.getScale=function(i){var t=this.getScaleMeta(i);if(!t){var s=(0,b.Z$)(i.split("-")),l=this.syncScales.get(s);l&&l.length&&(t=this.getScaleMeta(l[0]))}return t&&t.scale},a.prototype.deleteScale=function(i){var t=this.getScaleMeta(i);if(t){var s=t.syncKey,l=this.syncScales.get(s);if(l&&l.length){var f=l.indexOf(i);f!==-1&&l.splice(f,1)}}this.scales.delete(i)},a.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},a.prototype.removeFromSyncScales=function(i){var t=this;this.syncScales.forEach(function(s,l){var f=s.indexOf(i);if(f!==-1)return s.splice(f,1),s.length===0&&t.syncScales.delete(l),!1})},a.prototype.getSyncKey=function(i){var t=i.scale,s=i.scaleDef,l=t.field,f=(0,b.U2)(s,["sync"]);return f===!0?l:f===!1?void 0:f},a.prototype.getScaleMeta=function(i){return this.scales.get(i)},a}(),h=function(){function a(i,t,s,l){i===void 0&&(i=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.top=i,this.right=t,this.bottom=s,this.left=l}return a.instance=function(i,t,s,l){return i===void 0&&(i=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),new a(i,t,s,l)},a.prototype.max=function(i){var t=(0,A.CR)(i,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top=Math.max(this.top,s),this.right=Math.max(this.right,l),this.bottom=Math.max(this.bottom,f),this.left=Math.max(this.left,d),this},a.prototype.shrink=function(i){var t=(0,A.CR)(i,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top+=s,this.right+=l,this.bottom+=f,this.left+=d,this},a.prototype.inc=function(i,t){var s=i.width,l=i.height;switch(t){case le.TOP:case le.TOP_LEFT:case le.TOP_RIGHT:this.top+=l;break;case le.RIGHT:case le.RIGHT_TOP:case le.RIGHT_BOTTOM:this.right+=s;break;case le.BOTTOM:case le.BOTTOM_LEFT:case le.BOTTOM_RIGHT:this.bottom+=l;break;case le.LEFT:case le.LEFT_TOP:case le.LEFT_BOTTOM:this.left+=s;break;default:break}return this},a.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},a.prototype.clone=function(){return new(a.bind.apply(a,(0,A.ev)([void 0],(0,A.CR)(this.getPadding()),!1)))},a}();function v(a){var i=a.padding;if(!Ag(i))return new(h.bind.apply(h,(0,A.ev)([void 0],(0,A.CR)(Vf(i)),!1)));var t=a.viewBBox,s=new h,l=[],f=[],d=[];return(0,b.S6)(a.getComponents(),function(m){var x=m.type;x===Ae.AXIS?l.push(m):[Ae.LEGEND,Ae.SLIDER,Ae.SCROLLBAR].includes(x)?f.push(m):x!==Ae.GRID&&x!==Ae.TOOLTIP&&d.push(m)}),(0,b.S6)(l,function(m){var x=m.component,T=x.getLayoutBBox(),O=new ls(T.x,T.y,T.width,T.height),D=O.exceed(t);s.max(D)}),(0,b.S6)(f,function(m){var x=m.component,T=m.direction,O=x.getLayoutBBox(),D=x.get("padding"),B=new ls(O.x,O.y,O.width,O.height).expand(D);s.inc(B,T)}),(0,b.S6)(d,function(m){var x=m.component,T=m.direction,O=x.getLayoutBBox(),D=new ls(O.x,O.y,O.width,O.height);s.inc(D,T)}),s}function _(a,i,t){var s=t.instance();i.forEach(function(l){l.autoPadding=s.max(l.autoPadding.getPadding())})}var R=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,{visible:t.visible})||this;s.views=[],s.geometries=[],s.controllers=[],s.interactions={},s.limitInPlot=!1,s.options={data:[],animate:!0},s.usedControllers=Lv(),s.scalePool=new Op,s.layoutFunc=of,s.isPreMouseInPlot=!1,s.isDataChanged=!1,s.isCoordinateChanged=!1,s.createdScaleKeys=new Map,s.onCanvasEvent=function(gt){var bt=gt.name;if(!bt.includes(":")){var Ft=s.createViewEvent(gt);s.doPlotEvent(Ft),s.emit(bt,Ft)}},s.onDelegateEvents=function(gt){var bt=gt.name;if(bt.includes(":")){var Ft=s.createViewEvent(gt);s.emit(bt,Ft)}};var l=t.id,f=l===void 0?(0,b.EL)("view"):l,d=t.parent,m=t.canvas,x=t.backgroundGroup,T=t.middleGroup,O=t.foregroundGroup,D=t.region,B=D===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:D,U=t.padding,J=t.appendPadding,pe=t.theme,Ee=t.options,Ce=t.limitInPlot,st=t.syncViewPadding;return s.parent=d,s.canvas=m,s.backgroundGroup=x,s.middleGroup=T,s.foregroundGroup=O,s.region=B,s.padding=U,s.appendPadding=J,s.options=(0,A.pi)((0,A.pi)({},s.options),Ee),s.limitInPlot=Ce,s.id=f,s.syncViewPadding=st,s.themeObject=(0,b.Kn)(pe)?(0,b.b$)({},ud("default"),Pv(pe)):ud(pe),s.init(),s}return i.prototype.setLayout=function(t){this.layoutFunc=t},i.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},i.prototype.render=function(t,s){t===void 0&&(t=!1),this.emit(Ne.BEFORE_RENDER,Xa.fromData(this,Ne.BEFORE_RENDER,s)),this.paint(t),this.emit(Ne.AFTER_RENDER,Xa.fromData(this,Ne.AFTER_RENDER,s)),this.visible===!1&&this.changeVisible(!1)},i.prototype.clear=function(){var t=this;this.emit(Ne.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var s=this.geometries,l=0;l<s.length;l++)s[l].clear(),s[l].container.remove(!0),s[l].labelsContainer.remove(!0);this.geometries=[];for(var f=this.controllers,l=0;l<f.length;l++)f[l].name==="annotation"?f[l].clear(!0):f[l].clear();this.createdScaleKeys.forEach(function(m,x){t.getRootView().scalePool.deleteScale(x)}),this.createdScaleKeys.clear();for(var d=this.views,l=0;l<d.length;l++)d[l].clear();this.emit(Ne.AFTER_CLEAR)},i.prototype.destroy=function(){this.emit(Ne.BEFORE_DESTROY);var t=this.interactions;(0,b.S6)(t,function(m){m&&m.destroy()}),this.clear();for(var s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];d.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),a.prototype.destroy.call(this)},i.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t);for(var s=this.geometries,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}for(var m=this.controllers,l=0,f=m.length;l<f;l++){var x=m[l];x.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},i.prototype.data=function(t){return(0,b.t8)(this.options,"data",t),this.isDataChanged=!0,this},i.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},i.prototype.filter=function(t,s){return(0,b.mf)(s)?((0,b.t8)(this.options,["filters",t],s),this):(!s&&(0,b.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},i.prototype.axis=function(t,s){return(0,b.jn)(t)?(0,b.t8)(this.options,["axes"],t):(0,b.t8)(this.options,["axes",t],s),this},i.prototype.legend=function(t,s){return(0,b.jn)(t)?(0,b.t8)(this.options,["legends"],t):(0,b.HD)(t)?((0,b.t8)(this.options,["legends",t],s),(0,b.PO)(s)&&(s!=null&&s.selected)&&(0,b.t8)(this.options,["filters",t],function(l){var f;return(f=s==null?void 0:s.selected[l])!==null&&f!==void 0?f:!0})):(0,b.t8)(this.options,["legends"],t),this},i.prototype.scale=function(t,s){var l=this;return(0,b.HD)(t)?(0,b.t8)(this.options,["scales",t],s):(0,b.Kn)(t)&&(0,b.S6)(t,function(f,d){(0,b.t8)(l.options,["scales",d],f)}),this},i.prototype.tooltip=function(t){return(0,b.t8)(this.options,"tooltip",t),this},i.prototype.annotation=function(){return this.getController("annotation")},i.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},i.prototype.coordinate=function(t,s){return(0,b.HD)(t)?(0,b.t8)(this.options,"coordinate",{type:t,cfg:s}):(0,b.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},i.prototype.coord=function(t,s){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,s)},i.prototype.facet=function(t,s){this.facetInstance&&this.facetInstance.destroy();var l=oi(t);if(!l)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new l(this,(0,A.pi)((0,A.pi)({},s),{type:t})),this},i.prototype.animate=function(t){return(0,b.t8)(this.options,"animate",t),this},i.prototype.updateOptions=function(t){return this.clear(),(0,b.CD)(this.options,t),this.views.forEach(function(s){return s.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},i.prototype.option=function(t,s){if(i.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return(0,b.t8)(this.options,t,s),this},i.prototype.theme=function(t){return this.themeObject=(0,b.Kn)(t)?(0,b.b$)({},this.themeObject,Pv(t)):ud(t),this},i.prototype.interaction=function(t,s){var l=this.interactions[t];l&&l.destroy();var f=Gi(t,this,s);return f&&(f.init(),this.interactions[t]=f),this},i.prototype.removeInteraction=function(t){var s=this.interactions[t];s&&(s.destroy(),this.interactions[t]=void 0)},i.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this,Ne.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.changeData(t)}this.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this,Ne.AFTER_CHANGE_DATA,null))},i.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var s={data:this.options.data,scales:(0,b.d9)(this.options.scales),axes:(0,b.d9)(this.options.axes),coordinate:(0,b.d9)(this.coordinateController.getOption()),tooltip:(0,b.d9)(this.options.tooltip),legends:(0,b.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},l=new i((0,A.pi)((0,A.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:De.BG}),middleGroup:this.middleGroup.addGroup({zIndex:De.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:De.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,A.pi)((0,A.pi)({},s),(0,b.U2)(t,"options",{}))}));return this.views.push(l),l},i.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},i.prototype.removeView=function(t){var s=(0,b.Od)(this.views,function(l){return l===t})[0];return s&&s.destroy(),s},i.prototype.getCoordinate=function(){return this.coordinateInstance},i.prototype.getTheme=function(){return this.themeObject},i.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},i.prototype.getYScales=function(){var t={},s=[];return this.geometries.forEach(function(l){var f=l.getYScale(),d=f.field;t[d]||(t[d]=!0,s.push(f))}),s},i.prototype.getScalesByDim=function(t){for(var s=this.geometries,l={},f=0,d=s.length;f<d;f++){var m=s[f],x=t==="x"?m.getXScale():m.getYScale();x&&!l[x.field]&&(l[x.field]=x)}return l},i.prototype.getScale=function(t,s){var l=s||this.getScaleKey(t);return this.getRootView().scalePool.getScale(l)},i.prototype.getScaleByField=function(t,s){return this.getScale(t,s)},i.prototype.getOptions=function(){return this.options},i.prototype.getData=function(){return this.filteredData},i.prototype.getOriginalData=function(){return this.options.data},i.prototype.getPadding=function(){return this.autoPadding.getPadding()},i.prototype.getGeometries=function(){return this.geometries},i.prototype.getElements=function(){return(0,b.u4)(this.geometries,function(t,s){return t.concat(s.getElements())},[])},i.prototype.getElementsBy=function(t){return this.getElements().filter(function(s){return t(s)})},i.prototype.getLayer=function(t){return t===te.BG?this.backgroundGroup:t===te.MID?this.middleGroup:t===te.FORE?this.foregroundGroup:this.foregroundGroup},i.prototype.isPointInPlot=function(t){return mm(this.getCoordinate(),t)},i.prototype.getLegendAttributes=function(){return(0,b.xH)(this.geometries.map(function(t){return t.getGroupAttributes()}))},i.prototype.getGroupScales=function(){var t=this.geometries.map(function(s){return s.getGroupScales()});return Sf((0,b.xH)(t))},i.prototype.getCanvas=function(){return this.getRootView().canvas},i.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},i.prototype.getXY=function(t){var s=this.getCoordinate(),l=this.getScalesByDim("x"),f=this.getScalesByDim("y"),d,m;if((0,b.S6)(t,function(x,T){l[T]&&(d=l[T].scale(x)),f[T]&&(m=f[T].scale(x))}),!(0,b.UM)(d)&&!(0,b.UM)(m))return s.convert({x:d,y:m})},i.prototype.getController=function(t){return(0,b.sE)(this.controllers,function(s){return s.name===t})},i.prototype.showTooltip=function(t){var s=this.getController("tooltip");return s&&s.showTooltip(t),this},i.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},i.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},i.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},i.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},i.prototype.getTooltipItems=function(t){var s=this.getController("tooltip");return s?s.getTooltipItems(t):[]},i.prototype.getSnapRecords=function(t){for(var s=this.geometries,l=[],f=0,d=s.length;f<d;f++){var m=s[f],x=m.dataArray;m.sort(x);for(var T=void 0,O=0,D=x.length;O<D;O++){var B=x[O];T=O0(t,B,m),T&&l.push(T)}}for(var U=this.views,f=0,d=U.length;f<d;f++){var J=U[f],pe=J.getSnapRecords(t);l=l.concat(pe)}return l},i.prototype.getComponents=function(){for(var t=[],s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];t=t.concat(d.getComponents())}return t},i.prototype.filterData=function(t){var s=this.options.filters;return(0,b.dp)(s)===0?t:(0,b.hX)(t,function(l,f){var d=Object.keys(s);return d.every(function(m){var x=s[m];return x(l[m],l,f)})})},i.prototype.filterFieldData=function(t,s){var l=this.options.filters,f=(0,b.U2)(l,t);return(0,b.o8)(f)?s:s.filter(function(d,m){return f(d[t],d,m)})},i.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),s=t.start,l=t.end,f=this.coordinateBBox.bl,d=this.coordinateBBox.tr;if((0,b.Xy)(s,f)&&(0,b.Xy)(l,d)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(f,d)},i.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Ne.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Ne.AFTER_PAINT),this.isDataChanged=!1},i.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,b.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var s=this.viewBBox,l=s.x,f=s.y,d=s.width,m=s.height;this.backgroundStyleRectShape.attr({fill:t,x:l,y:f,width:d,height:m})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},i.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=v(this).shrink(Vf(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var s=this.controllers.find(function(x){return x.name==="tooltip"});s.update();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderPaddingRecursive(t)}},i.prototype.renderLayoutRecursive=function(t){var s=this.syncViewPadding===!0?_:(0,b.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;s&&(s(this,this.views,h),this.views.forEach(function(x){x.coordinateBBox=x.viewBBox.shrink(x.autoPadding.getPadding()),x.adjustCoordinate()})),this.doLayout();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderLayoutRecursive(t)}},i.prototype.renderPaintRecursive=function(t){var s=this.middleGroup;if(this.limitInPlot){var l=Rv(this.coordinateInstance),f=l.type,d=l.attrs;s.setClip({type:f,attrs:d})}else s.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var m=this.views,x=0,T=m.length;x<T;x++){var O=m[x];O.renderPaintRecursive(t)}},i.prototype.createScale=function(t,s,l,f){var d=(0,b.U2)(this.options.scales,[t]),m=(0,A.pi)((0,A.pi)({},d),l);return this.parent?this.parent.createScale(t,s,m,f):this.scalePool.createScale(t,s,m,f)},i.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.renderDataRecursive(t)}},i.prototype.calculateViewBBox=function(){var t,s,l,f;if(this.parent){var d=this.parent.coordinateBBox;t=d.x,s=d.y,l=d.width,f=d.height}else t=0,s=0,l=this.canvas.get("width"),f=this.canvas.get("height");var m=this.region,x=m.start,T=m.end,O=new ls(t+l*x.x,s+f*x.y,l*(T.x-x.x),f*(T.y-x.y));(!this.viewBBox||!this.viewBBox.isEqual(O))&&(this.viewBBox=new ls(t+l*x.x,s+f*x.y,l*(T.x-x.x),f*(T.y-x.y))),this.coordinateBBox=this.viewBBox},i.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},i.prototype.initComponentController=function(){for(var t=this.usedControllers,s=0,l=t.length;s<l;s++){var f=t[s],d=Vu(f);d&&this.controllers.push(new d(this))}},i.prototype.createViewEvent=function(t){var s=t.shape,l=t.name,f=s?s.get("origin"):null,d=new Xa(this,t,f);return d.type=l,d},i.prototype.doPlotEvent=function(t){var s=t.type,l=t.x,f=t.y,d={x:l,y:f},m=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(m.includes(s)){var x=this.isPointInPlot(d),T=t.clone();if(x){var O="plot:".concat(s);T.type=O,this.emit(O,T),(s==="mouseleave"||s==="touchend")&&(this.isPreMouseInPlot=!1)}s==="mousemove"||s==="touchmove"?(this.isPreMouseInPlot&&!x?(s==="mousemove"&&(T.type=We.MOUSE_LEAVE,this.emit(We.MOUSE_LEAVE,T)),T.type=We.LEAVE,this.emit(We.LEAVE,T)):!this.isPreMouseInPlot&&x&&(s==="mousemove"&&(T.type=We.MOUSE_ENTER,this.emit(We.MOUSE_ENTER,T)),T.type=We.ENTER,this.emit(We.ENTER,T)),this.isPreMouseInPlot=x):(s==="mouseleave"||s==="touchend")&&this.isPreMouseInPlot&&(s==="mouseleave"&&(T.type=We.MOUSE_LEAVE,this.emit(We.MOUSE_LEAVE,T)),T.type=We.LEAVE,this.emit(We.LEAVE,T),this.isPreMouseInPlot=!1)}},i.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},i.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var s=this.getCoordinate(),l=(0,b.U2)(this.options,"scales",{}),f=this.geometries,d=0,m=f.length;d<m;d++){var x=f[d];x.scales=this.getGeometryScales();var T={coordinate:s,scaleDefs:l,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?x.update(T):x.init(T)}this.adjustScales()},i.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),s=this.getGroupedFields(),l=this.getOptions(),f=l.data,d=l.scales,m=d===void 0?{}:d,x=this.filteredData,T=0,O=t.length;T<O;T++){var D=t[T],B=m[D],U=this.getScaleKey(D);this.createScale(D,s.includes(D)?f:x,B,U),this.createdScaleKeys.set(U,!0)}},i.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},i.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),s={},l=0;l<t.length;l++){var f=t[l];s[f]=this.getScaleByField(f)}return s},i.prototype.getScaleFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getScaleFields();Sf(m,t,s)}return t},i.prototype.getGroupedFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getGroupFields();Sf(m,t,s)}return t},i.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},i.prototype.adjustCategoryScaleRange=function(){var t=this,s=(0,A.ev)([this.getXScale()],(0,A.CR)(this.getYScales()),!1).filter(function(d){return!!d}),l=this.getCoordinate(),f=this.options.scales;(0,b.S6)(s,function(d){var m=d.field,x=d.values,T=d.isCategory,O=d.isIdentity;(T||O)&&x&&!(0,b.U2)(f,[m,"range"])&&(d.range=Eg(d,l,t.theme))})},i.prototype.initComponents=function(t){for(var s=this.controllers,l=0;l<s.length;l++){var f=s[l];t?f.update():(f.clear(),f.render())}},i.prototype.doLayout=function(){this.layoutFunc(this)},i.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,s=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,s)},i.prototype.paintGeometries=function(t){for(var s=this.options.animate,l=this.getCoordinate(),f={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},d=this.geometries,m=0;m<d.length;m++){var x=d[m];x.coordinate=l,x.canvasRegion=f,s||x.animate(!1),x.paint(t)}},i.prototype.renderComponents=function(t){for(var s=this.getComponents(),l=0;l<s.length;l++){var f=s[l];f.component.render()}},i.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},i.prototype.initOptions=function(){var t=this,s=this.options,l=s.geometries,f=l===void 0?[]:l,d=s.interactions,m=d===void 0?[]:d,x=s.views,T=x===void 0?[]:x,O=s.annotations,D=O===void 0?[]:O,B=s.coordinate,U=s.events,J=s.facets;this.coordinateController?B&&this.coordinateController.update(B):this.coordinateController=new Ec(B);for(var pe=0;pe<f.length;pe++){var Ee=f[pe];this.createGeometry(Ee)}for(var Ce=0;Ce<m.length;Ce++){var st=m[Ce],gt=st.type,bt=st.cfg;this.interaction(gt,bt)}for(var Ft=0;Ft<T.length;Ft++){var xr=T[Ft];this.createView(xr)}for(var Fr=this.getController("annotation"),$r=0;$r<D.length;$r++){var yn=D[$r];Fr.annotation(yn)}U&&(0,b.S6)(U,function(cn,Bn){t.on(Bn,cn)}),J&&(0,b.S6)(J,function(cn){var Bn=cn.type,hi=(0,A._T)(cn,["type"]);t.facet(Bn,hi)})},i.prototype.createGeometry=function(t){var s=t.type,l=t.cfg,f=l===void 0?{}:l;if(this[s]){var d=this[s](f);(0,b.S6)(t,function(m,x){(0,b.mf)(d[x])&&d[x](m)})}},i.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},i}(xe);function F(a,i){R.prototype[a.toLowerCase()]=function(t){t===void 0&&(t={});var s=(0,A.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),l=new i(s);return this.geometries.push(l),l}}var z=R,K=function(a){(0,A.ZT)(i,a);function i(t){var s=this,l=t.container,f=t.width,d=t.height,m=t.autoFit,x=m===void 0?!1:m,T=t.padding,O=t.appendPadding,D=t.renderer,B=D===void 0?"canvas":D,U=t.pixelRatio,J=t.localRefresh,pe=J===void 0?!0:J,Ee=t.visible,Ce=Ee===void 0?!0:Ee,st=t.supportCSSTransform,gt=st===void 0?!1:st,bt=t.defaultInteractions,Ft=bt===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:bt,xr=t.options,Fr=t.limitInPlot,$r=t.theme,yn=t.syncViewPadding,cn=(0,b.HD)(l)?document.getElementById(l):l,Bn=(0,Ke.Z)('<div style="position:relative;"></div>');cn.appendChild(Bn);var hi=He(cn,x,f,d),Hi=tt(B),aa=new Hi.Canvas((0,A.pi)({container:Bn,pixelRatio:U,localRefresh:pe,supportCSSTransform:gt},hi));return s=a.call(this,{parent:null,canvas:aa,backgroundGroup:aa.addGroup({zIndex:De.BG}),middleGroup:aa.addGroup({zIndex:De.MID}),foregroundGroup:aa.addGroup({zIndex:De.FORE}),padding:T,appendPadding:O,visible:Ce,options:xr,limitInPlot:Fr,theme:$r,syncViewPadding:yn})||this,s.onResize=(0,b.Ds)(function(){s.forceFit()},300),s.ele=cn,s.canvas=aa,s.width=hi.width,s.height=hi.height,s.autoFit=x,s.localRefresh=pe,s.renderer=B,s.wrapperElement=Bn,s.updateCanvasStyle(),s.bindAutoFit(),s.initDefaultInteractions(Ft),s}return i.prototype.initDefaultInteractions=function(t){var s=this;(0,b.S6)(t,function(l){s.interaction(l)})},i.prototype.aria=function(t){var s="aria-label";t===!1?this.ele.removeAttribute(s):this.ele.setAttribute(s,t.label)},i.prototype.changeSize=function(t,s){return this.width===t&&this.height===s?this:(this.emit(Ne.BEFORE_CHANGE_SIZE),this.width=t,this.height=s,this.canvas.changeSize(t,s),this.render(!0),this.emit(Ne.AFTER_CHANGE_SIZE),this)},i.prototype.clear=function(){a.prototype.clear.call(this),this.aria(!1)},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Ue(this.wrapperElement),this.wrapperElement=null},i.prototype.changeVisible=function(t){return a.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},i.prototype.forceFit=function(){if(!this.destroyed){var t=He(this.ele,!0,this.width,this.height),s=t.width,l=t.height;this.changeSize(s,l)}},i.prototype.updateCanvasStyle=function(){(0,he.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},i.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},i.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},i}(z),de=K,Be=function(){function a(i){this.visible=!0,this.components=[],this.view=i}return a.prototype.clear=function(i){(0,b.S6)(this.components,function(t){t.component.destroy()}),this.components=[]},a.prototype.destroy=function(){this.clear()},a.prototype.getComponents=function(){return this.components},a.prototype.changeVisible=function(i){this.visible!==i&&(this.components.forEach(function(t){i?t.component.show():t.component.hide()}),this.visible=i)},a}();function it(a){for(var i=[],t=function(l){var f=a[l],d=(0,b.sE)(i,function(m){return m.color===f.color&&m.name===f.name&&m.value===f.value&&m.title===f.title});d||i.push(f)},s=0;s<a.length;s++)t(s);return i}var ht=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(i.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},i.prototype.render=function(){},i.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var s=this.view,l=this.getTooltipItems(t);if(!l.length){this.hideTooltip();return}var f=this.getTitle(l),d={x:l[0].x,y:l[0].y};s.emit("tooltip:show",Xa.fromData(s,"tooltip:show",(0,A.pi)({items:l,title:f},t)));var m=this.getTooltipCfg(),x=m.follow,T=m.showMarkers,O=m.showCrosshairs,D=m.showContent,B=m.marker,U=this.items,J=this.title;if(!(0,b.Xy)(J,f)||!(0,b.Xy)(U,l)?(s.emit("tooltip:change",Xa.fromData(s,"tooltip:change",(0,A.pi)({items:l,title:f},t))),((0,b.mf)(D)?D(l):D)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,b.CD)({},m,{items:this.getItemsAfterProcess(l),title:f},x?t:{})),this.tooltip.show()),T&&this.renderTooltipMarkers(l,B)):(this.tooltip&&x&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=l,this.title=f,O){var pe=(0,b.U2)(m,["crosshairs","follow"],!1);this.renderCrosshairs(pe?t:d,m)}}},i.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var s=this.tooltipMarkersGroup;s&&s.hide();var l=this.xCrosshair,f=this.yCrosshair;l&&l.hide(),f&&f.hide();var d=this.tooltip;d&&d.hide(),this.view.emit("tooltip:hide",Xa.fromData(this.view,"tooltip:hide",{})),this.point=null},i.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},i.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},i.prototype.isTooltipLocked=function(){return this.isLocked},i.prototype.clear=function(){var t=this,s=t.tooltip,l=t.xCrosshair,f=t.yCrosshair,d=t.tooltipMarkersGroup;s&&(s.hide(),s.clear()),l&&l.clear(),f&&f.clear(),d&&d.clear(),s!=null&&s.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},i.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},i.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},i.prototype.changeVisible=function(t){if(this.visible!==t){var s=this,l=s.tooltip,f=s.tooltipMarkersGroup,d=s.xCrosshair,m=s.yCrosshair;t?(l&&l.show(),f&&f.show(),d&&d.show(),m&&m.show()):(l&&l.hide(),f&&f.hide(),d&&d.hide(),m&&m.hide()),this.visible=t}},i.prototype.getTooltipItems=function(t){var s,l,f,d,m,x,T=this.findItemsFromView(this.view,t);if(T.length){T=(0,b.xH)(T);try{for(var O=(0,A.XA)(T),D=O.next();!D.done;D=O.next()){var B=D.value;try{for(var U=(f=void 0,(0,A.XA)(B)),J=U.next();!J.done;J=U.next()){var pe=J.value,Ee=pe.mappingData,Ce=Ee.x,st=Ee.y;pe.x=(0,b.kJ)(Ce)?Ce[Ce.length-1]:Ce,pe.y=(0,b.kJ)(st)?st[st.length-1]:st}}catch(cn){f={error:cn}}finally{try{J&&!J.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(cn){s={error:cn}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}var gt=this.getTooltipCfg().shared;if(gt===!1&&T.length>1){var bt=T[0],Ft=Math.abs(t.y-bt[0].y);try{for(var xr=(0,A.XA)(T),Fr=xr.next();!Fr.done;Fr=xr.next()){var $r=Fr.value,yn=Math.abs(t.y-$r[0].y);yn<=Ft&&(bt=$r,Ft=yn)}}catch(cn){m={error:cn}}finally{try{Fr&&!Fr.done&&(x=xr.return)&&x.call(xr)}finally{if(m)throw m.error}}T=[bt]}return it((0,b.xH)(T))}return[]},i.prototype.layout=function(){},i.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},i.prototype.isCursorEntered=function(t){if(this.tooltip){var s=this.tooltip.getContainer(),l=this.tooltip.get("capture");if(s&&l){var f=s.getBoundingClientRect(),d=f.x,m=f.y,x=f.width,T=f.height;return new ls(d,m,x,T).isPointIn(t)}}return!1},i.prototype.getTooltipCfg=function(){var t=this.view,s=t.getOptions().tooltip,l=this.processCustomContent(s),f=t.getTheme(),d=(0,b.U2)(f,["components","tooltip"],{}),m=(0,b.U2)(l,"enterable",d.enterable);return(0,b.b$)({},d,l,{capture:!!(m||this.isLocked)})},i.prototype.processCustomContent=function(t){if((0,b.jn)(t)||!(0,b.U2)(t,"customContent"))return t;var s=t.customContent,l=function(f,d){var m=s(f,d)||"";return(0,b.HD)(m)?'<div class="g2-tooltip">'+m+"</div>":m};return(0,A.pi)((0,A.pi)({},t),{customContent:l})},i.prototype.getTitle=function(t){var s=t[0].title||t[0].name;return this.title=s,s},i.prototype.renderTooltip=function(){var t=this.view.getCanvas(),s={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},l=this.getTooltipCfg(),f=new $d((0,A.pi)((0,A.pi)({parent:t.get("el").parentNode,region:s},l),{visible:!1,crosshairs:null}));f.init(),this.tooltip=f},i.prototype.renderTooltipMarkers=function(t,s){var l,f,d=this.getTooltipMarkersGroup(),m=this.view.getRootView(),x=m.limitInPlot;try{for(var T=(0,A.XA)(t),O=T.next();!O.done;O=T.next()){var D=O.value,B=D.x,U=D.y;if(x||d!=null&&d.getClip()){var J=Rv(m.getCoordinate()),pe=J.type,Ee=J.attrs;d==null||d.setClip({type:pe,attrs:Ee})}else d==null||d.setClip(void 0);var Ce=this.view.getTheme(),st=(0,b.U2)(Ce,["components","tooltip","marker"],{}),gt=(0,A.pi)((0,A.pi)({fill:D.color,symbol:"circle",shadowColor:D.color},(0,b.mf)(s)?(0,A.pi)((0,A.pi)({},st),s(D)):s),{x:B,y:U});d.addShape("marker",{attrs:gt})}}catch(bt){l={error:bt}}finally{try{O&&!O.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}},i.prototype.renderCrosshairs=function(t,s){var l=(0,b.U2)(s,["crosshairs","type"],"x");l==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,s)):l==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,s)):l==="xy"&&(this.renderXCrosshairs(t,s),this.renderYCrosshairs(t,s))},i.prototype.renderXCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect)l.isTransposed?(f={x:l.start.x,y:t.y},d={x:l.end.x,y:t.y}):(f={x:t.x,y:l.end.y},d={x:t.x,y:l.start.y});else{var m=Xd(l,t),x=l.getCenter(),T=l.getRadius();d=js(x.x,x.y,T,m),f=x}var O=(0,b.b$)({start:f,end:d,container:this.getTooltipCrosshairsGroup()},(0,b.U2)(s,"crosshairs",{}),this.getCrosshairsText("x",t,s));delete O.type;var D=this.xCrosshair;D?D.update(O):(D=new Vs(O),D.init()),D.render(),D.show(),this.xCrosshair=D},i.prototype.renderYCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect){var m=void 0,x=void 0;l.isTransposed?(m={x:t.x,y:l.end.y},x={x:t.x,y:l.start.y}):(m={x:l.start.x,y:t.y},x={x:l.end.x,y:t.y}),f={start:m,end:x},d="Line"}else f={center:l.getCenter(),radius:Wh(l,t),startAngle:l.startAngle,endAngle:l.endAngle},d="Circle";f=(0,b.b$)({container:this.getTooltipCrosshairsGroup()},f,(0,b.U2)(s,"crosshairs",{}),this.getCrosshairsText("y",t,s)),delete f.type;var T=this.yCrosshair;T?l.isRect&&T.get("type")==="circle"||!l.isRect&&T.get("type")==="line"?(T=new Y[d](f),T.init()):T.update(f):(T=new Y[d](f),T.init()),T.render(),T.show(),this.yCrosshair=T},i.prototype.getCrosshairsText=function(t,s,l){var f=(0,b.U2)(l,["crosshairs","text"]),d=(0,b.U2)(l,["crosshairs","follow"]),m=this.items;if(f){var x=this.getViewWithGeometry(this.view),T=m[0],O=x.getXScale(),D=x.getYScales()[0],B=void 0,U=void 0;if(d){var J=this.view.getCoordinate().invert(s);B=O.invert(J.x),U=D.invert(J.y)}else B=T.data[O.field],U=T.data[D.field];var pe=t==="x"?B:U;return(0,b.mf)(f)?f=f(t,pe,m,s):f.content=pe,{text:f}}},i.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},i.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},i.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},i.prototype.findItemsFromView=function(t,s){var l,f;if(t.getOptions().tooltip===!1)return[];var d=this.getTooltipCfg(),m=wm(t,s,d);try{for(var x=(0,A.XA)(t.views),T=x.next();!T.done;T=x.next()){var O=T.value;m=m.concat(this.findItemsFromView(O,s))}}catch(D){l={error:D}}finally{try{T&&!T.done&&(f=x.return)&&f.call(x)}finally{if(l)throw l.error}}return m},i.prototype.getViewWithGeometry=function(t){var s=this;return t.geometries.length?t:(0,b.sE)(t.views,function(l){return s.getViewWithGeometry(l)})},i.prototype.getItemsAfterProcess=function(t){var s=this.getTooltipCfg().customItems,l=s||function(f){return f};return l(t)},i}(Be),xt=ht,Lt={};function Ht(a){return Lt[a.toLowerCase()]}function ur(a,i){Lt[a.toLowerCase()]=i}var pr={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},zr={interval:function(a){return{enter:{animation:a.isRect?a.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:a.isPolar&&a.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Or={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(a){var i;return a.isRect?i=a.isTransposed?"grow-in-x":"grow-in-y":(i="grow-in-xy",a.isPolar&&a.isTransposed&&(i="wave-in")),{animation:i}},schema:function(a){var i;return a.isRect?i=a.isTransposed?"grow-in-x":"grow-in-y":i="grow-in-xy",{animation:i}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function qr(a,i){return{delay:(0,b.mf)(a.delay)?a.delay(i):a.delay,easing:(0,b.mf)(a.easing)?a.easing(i):a.easing,duration:(0,b.mf)(a.duration)?a.duration(i):a.duration,callback:a.callback,repeat:a.repeat}}function on(a,i,t){var s=zr[a];return s&&((0,b.mf)(s)&&(s=s(i)),s=(0,b.b$)({},pr,s),t)?s[t]:s}function gn(a,i,t){var s=(0,b.U2)(a.get("origin"),"data",Re),l=i.animation,f=qr(i,s);if(l){var d=Ht(l);d&&d(a,f,t)}else a.animate(t.toAttrs,f)}function Tn(a,i,t,s,l){if(Or[t]){var f=Or[t](s),d=Ht((0,b.U2)(f,"animation",""));if(d){var m=(0,A.pi)((0,A.pi)((0,A.pi)({},pr.appear),f),i);a.stopAnimate(),d(a,m,{coordinate:s,minYPoint:l,toAttrs:null})}}}var Ln="element-background",pi=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.labelShape=[],s.states=[];var l=t.shapeFactory,f=t.container,d=t.offscreenGroup,m=t.elementIndex,x=t.visible,T=x===void 0?!0:x;return s.shapeFactory=l,s.container=f,s.offscreenGroup=d,s.visible=T,s.elementIndex=m,s}return i.prototype.draw=function(t,s){s===void 0&&(s=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,s),this.visible===!1&&this.changeVisible(!1)},i.prototype.update=function(t){var s=this,l=s.shapeFactory,f=s.shape;if(f){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(f,t);var d=this.getOffscreenGroup(),m=l.drawShape(this.shapeType,t,d);m.cfg.data=this.data,m.cfg.origin=t,m.cfg.element=this,this.syncShapeStyle(f,m,this.getStates(),this.getAnimateCfg("update"))}},i.prototype.destroy=function(){var t=this,s=t.shapeFactory,l=t.shape;if(l){var f=this.getAnimateCfg("leave");f?gn(l,f,{coordinate:s.coordinate,toAttrs:(0,A.pi)({},l.attr())}):l.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,a.prototype.destroy.call(this)},i.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(s){s.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(s){s.hide()}))},i.prototype.setState=function(t,s){var l=this,f=l.states,d=l.shapeFactory,m=l.model,x=l.shape,T=l.shapeType,O=f.indexOf(t);if(s){if(O>-1)return;f.push(t),(t==="active"||t==="selected")&&(x==null||x.toFront())}else{if(O===-1)return;if(f.splice(O,1),t==="active"||t==="selected"){var D=this.geometry,B=D.sortZIndex,U=D.zIndexReversed,J=U?this.geometry.elements.length-this.elementIndex:this.elementIndex;B?x.setZIndex(J):x.set("zIndex",J)}}var pe=d.drawShape(T,m,this.getOffscreenGroup());f.length?this.syncShapeStyle(x,pe,f,null):this.syncShapeStyle(x,pe,["reset"],null),pe.remove(!0);var Ee={state:t,stateStatus:s,element:this,target:this.container};this.container.emit("statechange",Ee),Ni(this.shape,"statechange",Ee)},i.prototype.clearStates=function(){var t=this,s=this.states;(0,b.S6)(s,function(l){t.setState(l,!1)}),this.states=[]},i.prototype.hasState=function(t){return this.states.includes(t)},i.prototype.getStates=function(){return this.states},i.prototype.getData=function(){return this.data},i.prototype.getModel=function(){return this.model},i.prototype.getBBox=function(){var t=this,s=t.shape,l=t.labelShape,f={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return s&&(f=s.getCanvasBBox()),l&&l.forEach(function(d){var m=d.getCanvasBBox();f.x=Math.min(m.x,f.x),f.y=Math.min(m.y,f.y),f.minX=Math.min(m.minX,f.minX),f.minY=Math.min(m.minY,f.minY),f.maxX=Math.max(m.maxX,f.maxX),f.maxY=Math.max(m.maxY,f.maxY)}),f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,f},i.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,s=t.shapeType,l=t.geometry,f=t.shapeFactory,d=l.stateOption,m=f.defaultShapeType,x=f.theme[s]||f.theme[m];this.statesStyle=(0,b.b$)({},x,d)}return this.statesStyle},i.prototype.getStateStyle=function(t,s){var l=this.getStatesStyle(),f=(0,b.U2)(l,[t,"style"],{}),d=f[s]||f;return(0,b.mf)(d)?d(this):d},i.prototype.getAnimateCfg=function(t){var s=this,l=this.animate;if(l){var f=l[t];return f&&(0,A.pi)((0,A.pi)({},f),{callback:function(){var d;(0,b.mf)(f.callback)&&f.callback(),(d=s.geometry)===null||d===void 0||d.emit(Te.AFTER_DRAW_ANIMATE)}})}return null},i.prototype.drawShape=function(t,s){var l;s===void 0&&(s=!1);var f=this,d=f.shapeFactory,m=f.container,x=f.shapeType;if(this.shape=d.drawShape(x,t,m),this.shape){this.setShapeInfo(this.shape,t);var T=this.shape.cfg.name;T?(0,b.HD)(T)&&(this.shape.cfg.name=["element",T]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var O=s?"enter":"appear",D=this.getAnimateCfg(O);D&&((l=this.geometry)===null||l===void 0||l.emit(Te.BEFORE_DRAW_ANIMATE),gn(this.shape,D,{coordinate:d.coordinate,toAttrs:(0,A.pi)({},this.shape.attr())}))}},i.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},i.prototype.setShapeInfo=function(t,s){var l=this;if(t.cfg.origin=s,t.cfg.element=this,t.isGroup()){var f=t.get("children");f.forEach(function(d){l.setShapeInfo(d,s)})}},i.prototype.syncShapeStyle=function(t,s,l,f,d){var m=this,x;if(l===void 0&&(l=[]),d===void 0&&(d=0),!(!t||!s)){var T=t.get("clipShape"),O=s.get("clipShape");if(this.syncShapeStyle(T,O,l,f),t.isGroup())for(var D=t.get("children"),B=s.get("children"),U=0;U<D.length;U++)this.syncShapeStyle(D[U],B[U],l,f,d+U);else{if(!(0,b.xb)(l)&&!(0,b.Xy)(l,["reset"])){var J=t.get("name");(0,b.kJ)(J)&&(J=J[1]),(0,b.S6)(l,function(Ee){if(s.get("name")!==Ln){var Ce=m.getStateStyle(Ee,J||d);s.attr(Ce)}})}var pe=Nc(t,s);this.animate?f?((x=this.geometry)===null||x===void 0||x.emit(Te.BEFORE_DRAW_ANIMATE),gn(t,f,{coordinate:this.shapeFactory.coordinate,toAttrs:pe,shapeModel:this.model})):(0,b.xb)(l)?t.attr(pe):(t.stopAnimate(),t.animate(pe,{duration:300})):t.attr(pe)}}},i.prototype.getShapeType=function(t){var s=(0,b.U2)(t,"shape");return(0,b.kJ)(s)?s[0]:s},i}(xe),Ei=pi,Ki={},Di={};function ia(a){return Ki[a.toLowerCase()]}function Oi(a,i){Ki[a.toLowerCase()]=i}function ro(a){return Di[a.toLowerCase()]}function Yi(a,i){Di[a.toLowerCase()]=i}var $i={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(a,i){var t=this.getShape(a);return t.getPoints?t.getPoints(i):this.getDefaultPoints(i)},getShape:function(a){var i=this[a]||this[this.defaultShapeType];return i.coordinate=this.coordinate,i},getDefaultPoints:function(){return[]},getDefaultStyle:function(a){return(0,b.U2)(a,[this.defaultShapeType,"default","style"],{})},getMarker:function(a,i){var t=this.getShape(a);if(!t.getMarker){var s=this.defaultShapeType;t=this.getShape(s)}var l=this.theme,f=(0,b.U2)(l,[a,"default"],{}),d=t.getMarker(i);return(0,b.b$)({},f,d)},drawShape:function(a,i,t){var s=this.getShape(a);return s.draw(i,t)}},mo={coordinate:null,parsePath:function(a){var i=this.coordinate,t=(0,Ap.tr)(a);return i.isPolar?t=ki(i,t):t=to(i,t),t},parsePoint:function(a){var i=this.coordinate;return i.convert(a)},parsePoints:function(a){var i=this.coordinate;return a.map(function(t){return i.convert(t)})},draw:function(a,i){}},Wa={};function no(a,i){var t=(0,b.jC)(a),s=(0,A.pi)((0,A.pi)((0,A.pi)({},$i),i),{geometryType:a});return Wa[t]=s,s}function xi(a,i,t){var s=(0,b.jC)(a),l=Wa[s],f=(0,A.pi)((0,A.pi)({},mo),t);return l[i]=f,f}function Uo(a){var i=(0,b.jC)(a);return Wa[i]}function ts(a,i,t){var s,l;if(t===void 0&&(t={}),!i)return[a];var f=(0,b.Ms)(a,i),d=[];if(i.length===1&&t[i[0]]){var m=t[i[0]];try{for(var x=(0,A.XA)(m),T=x.next();!T.done;T=x.next()){var O=T.value,D=f["_".concat(O)];D&&d.push(D)}}catch(J){s={error:J}}finally{try{T&&!T.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}else for(var B in f)if(f.hasOwnProperty(B)){var U=f[B];d.push(U)}return d}function qs(a,i){return(0,b.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,b.Xy)(a[t],i[t])})}function gs(a){return(0,b.kJ)(a)?a:a.split("*")}function Ds(a,i){for(var t=[],s=[],l=[],f=new Map,d=0;d<i.length;d++){var m=i[d];a[m]?s.push(m):t.push(m),f.set(m,!0)}return Object.keys(a).forEach(function(x){f.has(x)||l.push(x)}),{added:t,updated:s,removed:l}}var fu=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.type="base",s.attributes={},s.elements=[],s.elementsMap={},s.animateOption=!0,s.attributeOption={},s.lastElementsMap={},s.generatePoints=!1,s.beforeMappingData=null,s.adjusts={},s.idFields=[],s.hasSorted=!1,s.isCoordinateChanged=!1;var l=t.container,f=t.labelsContainer,d=t.coordinate,m=t.data,x=t.sortable,T=x===void 0?!1:x,O=t.visible,D=O===void 0?!0:O,B=t.theme,U=t.scales,J=U===void 0?{}:U,pe=t.scaleDefs,Ee=pe===void 0?{}:pe,Ce=t.intervalPadding,st=t.dodgePadding,gt=t.maxColumnWidth,bt=t.minColumnWidth,Ft=t.columnWidthRatio,xr=t.roseWidthRatio,Fr=t.multiplePieWidthRatio,$r=t.zIndexReversed,yn=t.sortZIndex,cn=t.useDeferredLabel;return s.container=l,s.labelsContainer=f,s.coordinate=d,s.data=m,s.sortable=T,s.visible=D,s.userTheme=B,s.scales=J,s.scaleDefs=Ee,s.intervalPadding=Ce,s.dodgePadding=st,s.maxColumnWidth=gt,s.minColumnWidth=bt,s.columnWidthRatio=Ft,s.roseWidthRatio=xr,s.multiplePieWidthRatio=Fr,s.zIndexReversed=$r,s.sortZIndex=yn,s.useDeferredLabel=cn?typeof cn=="number"?cn:1/0:null,s}return i.prototype.position=function(t){var s=t;(0,b.PO)(t)||(s={fields:gs(t)});var l=(0,b.U2)(s,"fields");return l.length===1&&(l.unshift("1"),(0,b.t8)(s,"fields",l)),(0,b.t8)(this.attributeOption,"position",s),this},i.prototype.color=function(t,s){return this.createAttrOption("color",t,s),this},i.prototype.shape=function(t,s){return this.createAttrOption("shape",t,s),this},i.prototype.size=function(t,s){return this.createAttrOption("size",t,s),this},i.prototype.adjust=function(t){var s=t;return((0,b.HD)(t)||(0,b.PO)(t))&&(s=[t]),(0,b.S6)(s,function(l,f){(0,b.Kn)(l)||(s[f]={type:l})}),this.adjustOption=s,this},i.prototype.style=function(t,s){if((0,b.HD)(t)){var l=gs(t);this.styleOption={fields:l,callback:s}}else{var f=t,l=f.fields,d=f.callback,m=f.cfg;l||d||m?this.styleOption=t:this.styleOption={cfg:t}}return this},i.prototype.tooltip=function(t,s){if((0,b.HD)(t)){var l=gs(t);this.tooltipOption={fields:l,callback:s}}else this.tooltipOption=t;return this},i.prototype.animate=function(t){return this.animateOption=t,this},i.prototype.label=function(t,s,l){if((0,b.HD)(t)){var f={},d=gs(t);f.fields=d,(0,b.mf)(s)?f.callback=s:(0,b.PO)(s)&&(f.cfg=s),l&&(f.cfg=l),this.labelOption=f}else this.labelOption=t;return this},i.prototype.state=function(t){return this.stateOption=t,this},i.prototype.customInfo=function(t){return this.customOption=t,this},i.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},i.prototype.update=function(t){t===void 0&&(t={});var s=t.data,l=t.isDataChanged,f=t.isCoordinateChanged,d=this,m=d.attributeOption,x=d.lastAttributeOption;(0,b.Xy)(m,x)?s&&(l||!(0,b.Xy)(s,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(s)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=f},i.prototype.paint=function(t){var s=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,b.b$)({},on(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var l=this.getOffscreenGroup();l.clear();var f=this.beforeMappingData,d=this.beforeMapping(f);this.dataArray=new Array(d.length);for(var m=0;m<d.length;m++){var x=d[m];this.dataArray[m]=this.mapping(x)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var T=this.container,O=this.type,D=this.coordinate,B=(0,b.U2)(this.animateOption,"appear"),U=this.getYScale(),J=D.convert({x:0,y:U.scale(this.getYMinValue())});Tn(T,B,O,D,J)}if(this.labelOption){var pe=this.useDeferredLabel,Ee=function(){return s.renderLabels((0,b.xH)(s.dataArray),t)}.bind(this);if(typeof pe=="number"){var Ce=typeof pe=="number"&&pe!==1/0?pe:0;if(!window.requestIdleCallback)setTimeout(Ee,Ce);else{var st=Ce&&Ce!==1/0?{timeout:Ce}:void 0;window.requestIdleCallback(Ee,st)}}else Ee()}this.lastAttributeOption=(0,A.pi)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},i.prototype.clear=function(){var t=this,s=t.container,l=t.geometryLabel,f=t.offscreenGroup;s&&s.clear(),l&&l.clear(),f&&f.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},i.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,a.prototype.destroy.call(this)},i.prototype.getGroupScales=function(){return this.groupScales},i.prototype.getAttribute=function(t){return this.attributes[t]},i.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},i.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},i.prototype.getGroupAttributes=function(){var t=[];return(0,b.S6)(this.attributes,function(s){we.includes(s.type)&&t.push(s)}),t},i.prototype.getDefaultValue=function(t){var s,l=this.getAttribute(t);return l&&(0,b.xb)(l.scales)&&(s=l.values[0]),s},i.prototype.getAttributeValues=function(t,s){for(var l=[],f=t.scales,d=0,m=f.length;d<m;d++){var x=f[d],T=x.field;x.isIdentity?l.push(x.values):l.push(s[T])}return t.mapping.apply(t,(0,A.ev)([],(0,A.CR)(l),!1))},i.prototype.getAdjust=function(t){return this.adjusts[t]},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.getData=function(){return this.data},i.prototype.getShapeMarker=function(t,s){var l=this.getShapeFactory();return l.getMarker(t,s)},i.prototype.getElementsBy=function(t){return this.elements.filter(function(s){return t(s)})},i.prototype.getElements=function(){return this.elements},i.prototype.getElementId=function(t){t=(0,b.kJ)(t)?t[0]:t;var s=t[Re];if(this.idFields.length){for(var l=s[this.idFields[0]],f=1;f<this.idFields.length;f++)l+="-"+s[this.idFields[f]];return l}var d=this.type,m=this.getXScale(),x=this.getYScale(),T=m.field||"x",O=x.field||"y",D=s[O],B;m.type==="identity"?B=m.values[0]:B=s[T];var U;d==="interval"||d==="schema"?U="".concat(B):d==="line"||d==="area"||d==="path"?U=d:U="".concat(B,"-").concat(D);for(var J=this.groupScales,f=0,pe=J.length;f<pe;f++){var Ee=J[f],Ce=Ee.field;U="".concat(U,"-").concat(s[Ce])}var st=this.getAdjust("dodge");if(st){var gt=st.dodgeBy;gt&&(U="".concat(U,"-").concat(s[gt]))}return this.getAdjust("jitter")&&(U="".concat(U,"-").concat(t.x,"-").concat(t.y)),U},i.prototype.getScaleFields=function(){var t=[],s=new Map,l=this,f=l.attributeOption,d=l.labelOption,m=l.tooltipOption;for(var x in f)if(f.hasOwnProperty(x)){var T=f[x];T.fields?Sf(T.fields,t,s):T.values&&Sf(T.values,t,s)}return d&&d.fields&&Sf(d.fields,t,s),(0,b.Kn)(m)&&m.fields&&Sf(m.fields,t,s),t},i.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t);for(var s=this.elements,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},i.prototype.getFields=function(){var t=new Map,s=[];return Object.values(this.attributeOption).forEach(function(l){var f=(l==null?void 0:l.fields)||[];f.forEach(function(d){t.has(d)||s.push(d),t.set(d,!0)})},[]),s},i.prototype.getGroupFields=function(){for(var t=[],s=new Map,l=0,f=we.length;l<f;l++){var d=we[l],m=this.attributeOption[d];m&&m.fields&&Sf(m.fields,t,s)}return t},i.prototype.getXYFields=function(){var t=(0,A.CR)(this.attributeOption.position.fields,2),s=t[0],l=t[1];return[s,l]},i.prototype.getXField=function(){return(0,b.U2)(this.getXYFields(),[0])},i.prototype.getYField=function(){return(0,b.U2)(this.getXYFields(),[1])},i.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},i.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},i.prototype.sort=function(t){if(!this.hasSorted)for(var s=this.getXScale(),l=s.field,f=0;f<t.length;f++){var d=t[f];d.sort(function(m,x){return s.translate(m[Re][l])-s.translate(x[Re][l])})}this.hasSorted=!0},i.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},i.prototype.getShapeFactory=function(){var t=this.shapeType;if(Uo(t))return this.shapeFactory||(this.shapeFactory=(0,b.d9)(Uo(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},i.prototype.createShapePointsCfg=function(t){var s=this.getXScale(),l=this.getYScale(),f=this.normalizeValues(t[s.field],s),d;return l?d=this.normalizeValues(t[l.field],l):d=t.y?t.y:.1,{x:f,y:d,y0:l?l.scale(this.getYMinValue()):void 0}},i.prototype.createElement=function(t,s,l){l===void 0&&(l=!1);var f=this.container,d=this.getDrawCfg(t),m=this.getShapeFactory(),x=new Ei({shapeFactory:m,container:f,offscreenGroup:this.getOffscreenGroup(),elementIndex:s});return x.animate=this.animateOption,x.geometry=this,x.draw(d,l),x},i.prototype.getDrawCfg=function(t){var s=t[Re],l={mappingData:t,data:s,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},f=t.shape;!f&&this.getShapeFactory()&&(f=this.getShapeFactory().defaultShapeType),l.shape=f;var d=this.theme.geometries[this.shapeType];l.defaultStyle=(0,b.U2)(d,[f,"default"],{}).style,!l.defaultStyle&&this.getShapeFactory()&&(l.defaultStyle=this.getShapeFactory().getDefaultStyle(d));var m=this.styleOption;return m&&(l.style=this.getStyleCfg(m,s)),this.generatePoints&&(l.points=t.points,l.nextPoints=t.nextPoints),l},i.prototype.updateElements=function(t,s){var l,f,d,m,x,T;s===void 0&&(s=!1);for(var O=new Map,D=[],B=new Map,U=0,J=0;J<t.length;J++)for(var pe=t[J],Ee=0;Ee<pe.length;Ee++){var Ce=pe[Ee],st=this.getElementId(Ce),gt=O.has(st)?"".concat(st,"-").concat(J,"-").concat(Ee):st;D.push(gt),O.set(gt,Ce),B.set(gt,U),U++}this.elements=new Array(U);var bt=Ds(this.lastElementsMap,D),Ft=bt.added,xr=bt.updated,Fr=bt.removed;try{for(var $r=(0,A.XA)(Ft),yn=$r.next();!yn.done;yn=$r.next()){var st=yn.value,Ce=O.get(st),J=B.get(st),cn=this.createElement(Ce,J,s);this.elements[J]=cn,this.elementsMap[st]=cn,cn.shape&&cn.shape.set("zIndex",this.zIndexReversed?this.elements.length-J:J)}}catch(Fi){l={error:Fi}}finally{try{yn&&!yn.done&&(f=$r.return)&&f.call($r)}finally{if(l)throw l.error}}try{for(var Bn=(0,A.XA)(xr),hi=Bn.next();!hi.done;hi=Bn.next()){var st=hi.value,cn=this.lastElementsMap[st],Ce=O.get(st),Hi=this.getDrawCfg(Ce),aa=cn.getModel(),J=B.get(st);(this.isCoordinateChanged||qs(Hi,aa))&&(cn.animate=this.animateOption,cn.update(Hi)),this.elements[J]=cn,this.elementsMap[st]=cn,cn.shape&&cn.shape.set("zIndex",this.zIndexReversed?this.elements.length-J:J)}}catch(Fi){d={error:Fi}}finally{try{hi&&!hi.done&&(m=Bn.return)&&m.call(Bn)}finally{if(d)throw d.error}}this.container&&this.container.sort();try{for(var Qa=(0,A.XA)(Fr),Hn=Qa.next();!Hn.done;Hn=Qa.next()){var st=Hn.value,cn=this.lastElementsMap[st];cn.animate=this.animateOption,cn.destroy()}}catch(Fi){x={error:Fi}}finally{try{Hn&&!Hn.done&&(T=Qa.return)&&T.call(Qa)}finally{if(x)throw x.error}}},i.prototype.getLabelType=function(){var t=this,s=t.labelOption,l=t.coordinate,f=t.type,d=l.type,m=l.isTransposed,x=(0,b.U2)(s,["cfg","type"]);return x||(d==="polar"?x=m?"pie":"polar":d==="theta"?x="pie":f==="interval"||f==="polygon"?x="interval":x="base"),x},i.prototype.getYMinValue=function(){var t=this.getYScale(),s=t.min,l=t.max,f;return s>=0?f=s:l<=0?f=l:f=0,f},i.prototype.createAttrOption=function(t,s,l){if((0,b.UM)(s)||(0,b.Kn)(s))(0,b.Kn)(s)&&(0,b.Xy)(Object.keys(s),["values"])?(0,b.t8)(this.attributeOption,t,{fields:s.values}):(0,b.t8)(this.attributeOption,t,s);else{var f={};(0,b.hj)(s)?f.values=[s]:f.fields=gs(s),l&&((0,b.mf)(l)?f.callback=l:f.values=l),(0,b.t8)(this.attributeOption,t,f)}},i.prototype.initAttributes=function(){var t=this,s=this,l=s.attributes,f=s.attributeOption,d=s.theme,m=s.shapeType;this.groupScales=[];var x={},T=function(B){if(f.hasOwnProperty(B)){var U=f[B];if(!U)return{value:void 0};var J=(0,A.pi)({},U),pe=J.callback,Ee=J.values,Ce=J.fields,st=Ce===void 0?[]:Ce,gt=st.map(function(Ft){var xr=t.scales[Ft];if(!x[Ft]&&we.includes(B)){var Fr=wl(xr,(0,b.U2)(t.scaleDefs,Ft),B,t.type);Fr==="cat"&&(t.groupScales.push(xr),x[Ft]=!0)}return xr});J.scales=gt,B!=="position"&&gt.length===1&&gt[0].type==="identity"?J.values=gt[0].values:!pe&&!Ee&&(B==="size"?J.values=d.sizes:B==="shape"?J.values=d.shapes[m]||[]:B==="color"&&(gt.length?J.values=gt[0].values.length<=10?d.colors10:d.colors20:J.values=d.colors10));var bt=rc(B);l[B]=new bt(J)}};for(var O in f){var D=T(O);if(typeof D=="object")return D.value}},i.prototype.processData=function(t){var s,l;this.hasSorted=!1;for(var f=this.getAttribute("position").scales,d=f.filter(function(Fr){return Fr.isCategory}),m=this.groupData(t),x=[],T=0,O=m.length;T<O;T++){for(var D=m[T],B=[],U=0,J=D.length;U<J;U++){var pe=D[U],Ee={};for(var Ce in pe)Ee[Ce]=pe[Ce];Ee[Re]=pe;try{for(var st=(s=void 0,(0,A.XA)(d)),gt=st.next();!gt.done;gt=st.next()){var bt=gt.value,Ft=bt.field;Ee[Ft]=bt.translate(Ee[Ft])}}catch(Fr){s={error:Fr}}finally{try{gt&&!gt.done&&(l=st.return)&&l.call(st)}finally{if(s)throw s.error}}B.push(Ee)}x.push(B)}var xr=this.adjustData(x);return this.beforeMappingData=xr,xr},i.prototype.adjustData=function(t){var s=this.adjustOption,l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.theme,x=this.maxColumnWidth||m.maxColumnWidth,T=this.minColumnWidth||m.minColumnWidth,O=this.columnWidthRatio||m.columnWidthRatio,D=t;if(s){var B=this.getXScale(),U=this.getYScale(),J=B.field,pe=U?U.field:null,Ee=El(this.coordinate),Ce=B.values.length,st=this.getAttribute("size"),gt=void 0;st&&(gt=st.values[0]);for(var bt=0,Ft=s.length;bt<Ft;bt++){var xr=s[bt],Fr=(0,A.pi)({xField:J,yField:pe,intervalPadding:f,dodgePadding:d,xDimensionLength:Ee,groupNum:Ce,defaultSize:gt,maxColumnWidth:x,minColumnWidth:T,columnWidthRatio:O},xr),$r=xr.type;if($r==="dodge"){var yn=[];if(B.isCategory||B.type==="identity")yn.push("x");else if(!U)yn.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Fr.adjustNames=yn,Fr.dodgeRatio=O}else if($r==="stack"){var cn=this.coordinate;if(!U){Fr.height=cn.getHeight();var Bn=this.getDefaultValue("size")||3;Fr.size=Bn}!cn.isTransposed&&(0,b.UM)(Fr.reverseOrder)&&(Fr.reverseOrder=!0)}var hi=at($r);Fr.dimValuesMap={},B&&B.values&&(Fr.dimValuesMap[B.field]=B.values.map(function(aa){return B.translate(aa)}));var Hi=new hi(Fr);D=Hi.process(D),this.adjusts[$r]=Hi}}return D},i.prototype.groupData=function(t){for(var s=this.getGroupScales(),l=this.scaleDefs,f={},d=[],m=0;m<s.length;m++){var x=s[m],T=x.field;d.push(T),(0,b.U2)(l,[T,"values"])&&(f[T]=l[T].values)}return ts(t,d,f)},i.prototype.updateStackRange=function(t,s){for(var l=(0,b.xH)(s),f=t.field,d=t.min,m=t.max,x=0;x<l.length;x++){var T=l[x],O=Math.min.apply(null,T[f]),D=Math.max.apply(null,T[f]);O<d&&(d=O),D>m&&(m=D)}var B=this.scaleDefs,U={};d<t.min&&!(0,b.U2)(B,[f,"min"])&&(U.min=d),m>t.max&&!(0,b.U2)(B,[f,"max"])&&(U.max=m),t.change(U)},i.prototype.beforeMapping=function(t){var s=t;if(this.sortable&&this.sort(s),this.generatePoints)for(var l=0,f=s.length;l<f;l++){var d=s[l];this.generateShapePoints(d);var m=s[l+1];m&&(this.generateShapePoints(m),d[0].nextPoints=m[0].points)}return s},i.prototype.generateShapePoints=function(t){for(var s=this.getShapeFactory(),l=this.getAttribute("shape"),f=0;f<t.length;f++){var d=t[f],m=this.createShapePointsCfg(d),x=l?this.getAttributeValues(l,d):null,T=s.getShapePoints(x,m);d.points=T}},i.prototype.normalizeValues=function(t,s){var l=[];if((0,b.kJ)(t))for(var f=0;f<t.length;f++){var d=t[f];l.push(s.scale(d))}else l=s.scale(t);return l},i.prototype.mapping=function(t){for(var s=this.attributes,l=[],f=0;f<t.length;f++){var d=t[f],m={_origin:d[Re],points:d.points,nextPoints:d.nextPoints};for(var x in s)if(s.hasOwnProperty(x)){var T=s[x],O=T.names,D=this.getAttributeValues(T,d);if(O.length>1)for(var B=0;B<D.length;B+=1){var U=D[B],J=O[B];m[J]=(0,b.kJ)(U)&&U.length===1?U[0]:U}else m[O[0]]=D.length===1?D[0]:D}this.convertPoint(m),l.push(m)}return l},i.prototype.convertPoint=function(t){var s=t.x,l=t.y,f,d,m,x=this.coordinate;if((0,b.kJ)(s)&&(0,b.kJ)(l)){f=[],d=[];for(var T=0,O=0,D=s.length,B=l.length;T<D&&O<B;T+=1,O+=1)m=x.convert({x:s[T],y:l[O]}),f.push(m.x),d.push(m.y)}else if((0,b.kJ)(l)){d=[];for(var U=0;U<l.length;U++){var J=l[U];m=x.convert({x:s,y:J}),f&&f!==m.x?((0,b.kJ)(f)||(f=[f]),f.push(m.x)):f=m.x,d.push(m.y)}}else if((0,b.kJ)(s)){f=[];for(var U=0;U<s.length;U++){var pe=s[U];m=x.convert({x:pe,y:l}),d&&d!==m.y?((0,b.kJ)(d)||(d=[d]),d.push(m.y)):d=m.y,f.push(m.x)}}else{var Ee=x.convert({x:s,y:l});f=Ee.x,d=Ee.y}t.x=f,t.y=d},i.prototype.getStyleCfg=function(t,s){var l=t.fields,f=l===void 0?[]:l,d=t.callback,m=t.cfg;if(m)return m;var x=f.map(function(T){return s[T]});return d.apply(void 0,(0,A.ev)([],(0,A.CR)(x),!1))},i.prototype.setCfg=function(t){var s=this,l=t.coordinate,f=t.data,d=t.theme,m=t.scaleDefs;l&&(this.coordinate=l),f&&(this.data=f),m&&(this.scaleDefs=m,this.idFields=[],(0,b.S6)(m,function(x,T){x&&x.key&&s.idFields.push(T)})),d&&(this.theme=this.userTheme?(0,b.b$)({},d,this.userTheme):d)},i.prototype.renderLabels=function(t,s){return s===void 0&&(s=!1),(0,A.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T,O,D,B,U,J,pe,Ee=this;return(0,A.Jh)(this,function(Ce){switch(Ce.label){case 0:return l=this.geometryLabel,this.emit(Te.BEFORE_RENDER_LABEL),l||(f=this.getLabelType(),d=ia(f),l=new d(this),this.geometryLabel=l),[4,l.render(t,s)];case 1:Ce.sent(),m=l.labelsRenderer.shapesMap,x=new Map,(0,b.S6)(m,function(st,gt){for(var bt=st.getChildren()||[],Ft=0;Ft<bt.length;Ft++){var xr=bt[Ft],Fr=Ee.elementsMap[xr.get("elementId")||gt.split(" ")[0]];if(Fr){xr.cfg.name=["element","label"],xr.cfg.element=Fr;var $r=x.get(Fr)||new Set;$r.add(st),x.set(Fr,$r)}}});try{for(T=(0,A.XA)(x.entries()),O=T.next();!O.done;O=T.next())D=(0,A.CR)(O.value,2),B=D[0],U=D[1],B.labelShape=(0,A.ev)([],(0,A.CR)(U),!1)}catch(st){J={error:st}}finally{try{O&&!O.done&&(pe=T.return)&&pe.call(T)}finally{if(J)throw J.error}}return this.emit(Te.AFTER_RENDER_LABEL),[2]}})})},i.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,b.U2)(this.animateOption,"appear")===void 0||(0,b.U2)(this.animateOption,"appear")&&(0,b.U2)(this.animateOption,["appear","animation"])===void 0)},i}(xe),Ls=fu,yu=eo.vs;function Qu(a,i,t){var s=yu(a.getMatrix(),[["t",i,t]]);a.setMatrix(s)}function Ju(a,i){var t=a.attr(),s=t.x,l=t.y,f=yu(a.getMatrix(),[["t",-s,-l],["r",i],["t",s,l]]);return f}function fl(a,i){var t=Ju(a,i);a.setMatrix(t)}function Ou(){return[1,0,0,0,1,0,0,0,1]}function el(a,i){var t=a.getBBox(),s=(t.minX+t.maxX)/2,l=(t.minY+t.maxY)/2;a.applyToMatrix([s,l,1]);var f=yu(a.getMatrix(),[["t",-s,-l],["s",i,i],["t",s,l]]);a.setMatrix(f)}function qa(a){return a.find(function(i){return i.get("type")==="text"})}function rs(a,i,t){t===void 0&&(t=[0,0,0,0]);var s=a&&a.getChildren()[0];if(s){var l=s.clone();i!=null&&i.rotate&&fl(l,-i.rotate);var f=l.getCanvasBBox(),d=f.x,m=f.y,x=f.width,T=f.height;l.destroy();var O=t;return(0,b.UM)(O)?O=[2,2,2,2]:(0,b.hj)(O)&&(O=new Array(4).fill(O)),{x:d-O[3],y:m-O[0],width:x+O[1]+O[3],height:T+O[0]+O[2],rotation:(i==null?void 0:i.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Oo(a,i,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,i.x+i.width+t)-Math.max(a.x-t,i.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,i.y+i.height+t)-Math.max(a.y-t,i.y-t));return s*l}function yo(a,i){var t=a.getBBox();return(0,b.G)(i,function(s){var l=s.getBBox();return Oo(t,l,2)>0})}function hl(a,i,t){var s=t.data,l=t.origin,f=t.animateCfg,d=t.coordinate,m=(0,b.U2)(f,"update");a.set("data",s),a.set("origin",l),a.set("animateCfg",f),a.set("coordinate",d),a.set("visible",i.get("visible")),(a.getChildren()||[]).forEach(function(x,T){var O=i.getChildByIndex(T);if(!O)a.removeChild(x),x.remove(!0);else{x.set("data",s),x.set("origin",l),x.set("animateCfg",f),x.set("coordinate",d);var D=Nc(x,O);m?gn(x,m,{toAttrs:D,coordinate:d}):x.attr(D),O.isGroup()&&hl(x,O,t)}}),(0,b.S6)(i.getChildren(),function(x,T){T>=a.getCount()&&(x.destroyed||a.add(x))})}var Xo=function(){function a(i){this.shapesMap={};var t=i.layout,s=i.container;this.layout=t,this.container=s}return a.prototype.render=function(i,t,s){return s===void 0&&(s=!1),(0,A.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T,O,D,B=this;return(0,A.Jh)(this,function(U){switch(U.label){case 0:if(l={},f=this.createOffscreenGroup(),!i.length)return[3,2];try{for(d=(0,A.XA)(i),m=d.next();!m.done;m=d.next())x=m.value,x&&(l[x.id]=this.renderLabel(x,f))}catch(J){O={error:J}}finally{try{m&&!m.done&&(D=d.return)&&D.call(d)}finally{if(O)throw O.error}}return[4,this.doLayout(i,t,l)];case 1:U.sent(),this.renderLabelLine(i,l),this.renderLabelBackground(i,l),this.adjustLabel(i,l),U.label=2;case 2:return T=this.shapesMap,(0,b.S6)(l,function(J,pe){if(J.destroyed)delete l[pe];else{if(T[pe]){var Ee=J.get("data"),Ce=J.get("origin"),st=J.get("coordinate"),gt=J.get("animateCfg"),bt=T[pe];hl(bt,l[pe],{data:Ee,origin:Ce,animateCfg:gt,coordinate:st}),l[pe]=bt}else{if(B.container.destroyed)return;B.container.add(J);var Ft=(0,b.U2)(J.get("animateCfg"),s?"enter":"appear");Ft&&gn(J,Ft,{toAttrs:(0,A.pi)({},J.attr()),coordinate:J.get("coordinate")})}delete T[pe]}}),(0,b.S6)(T,function(J){var pe=(0,b.U2)(J.get("animateCfg"),"leave");pe?gn(J,pe,{toAttrs:null,coordinate:J.get("coordinate")}):J.remove(!0)}),this.shapesMap=l,f.destroy(),[2]}})})},a.prototype.clear=function(){this.container.clear(),this.shapesMap={}},a.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},a.prototype.renderLabel=function(i,t){var s=i.id,l=i.elementId,f=i.data,d=i.mappingData,m=i.coordinate,x=i.animate,T=i.content,O=i.capture,D={id:s,elementId:l,capture:O,data:f,origin:(0,A.pi)((0,A.pi)({},d),{data:d[Re]}),coordinate:m},B=t.addGroup((0,A.pi)({name:"label",animateCfg:this.animate===!1||x===null||x===!1?!1:(0,b.b$)({},this.animate,x)},D)),U;if(T.isGroup&&T.isGroup()||T.isShape&&T.isShape()){var J=T.getCanvasBBox(),pe=J.width,Ee=J.height,Ce=(0,b.U2)(i,"textAlign","left"),st=i.x,gt=i.y-Ee/2;Ce==="center"?st=st-pe/2:(Ce==="right"||Ce==="end")&&(st=st-pe),Qu(T,st,gt),U=T,B.add(T)}else{var bt=(0,b.U2)(i,["style","fill"]);U=B.addShape("text",(0,A.pi)({attrs:(0,A.pi)((0,A.pi)({x:i.x,y:i.y,textAlign:i.textAlign,textBaseline:(0,b.U2)(i,"textBaseline","middle"),text:i.content},i.style),{fill:(0,b.Ft)(bt)?i.color:bt})},D))}return i.rotate&&fl(U,i.rotate),B},a.prototype.doLayout=function(i,t,s){return(0,A.mG)(this,void 0,void 0,function(){var l,f=this;return(0,A.Jh)(this,function(d){switch(d.label){case 0:return this.layout?(l=(0,b.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(l.map(function(m){var x=ro((0,b.U2)(m,"type",""));if(x){var T=[],O=[];return(0,b.S6)(s,function(D,B){T.push(D),O.push(t[D.get("elementId")])}),x(i,T,O,f.region,m.cfg)}}))]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},a.prototype.renderLabelLine=function(i,t){(0,b.S6)(i,function(s){var l=(0,b.U2)(s,"coordinate");if(!(!s||!l)){var f=l.getCenter(),d=l.getRadius();if(s.labelLine){var m=(0,b.U2)(s,"labelLine",{}),x=s.id,T=m.path;if(!T){var O=js(f.x,f.y,d,s.angle);T=[["M",O.x,O.y],["L",s.x,s.y]]}var D=t[x];D.destroyed||D.addShape("path",{capture:!1,attrs:(0,A.pi)({path:T,stroke:s.color?s.color:(0,b.U2)(s,["style","fill"],"#000"),fill:null},m.style),id:x,origin:s.mappingData,data:s.data,coordinate:s.coordinate})}}})},a.prototype.renderLabelBackground=function(i,t){(0,b.S6)(i,function(s){var l=(0,b.U2)(s,"coordinate"),f=(0,b.U2)(s,"background");if(!(!f||!l)){var d=s.id,m=t[d];if(!m.destroyed){var x=m.getChildren()[0];if(x){var T=rs(m,s,f.padding),O=T.rotation,D=(0,A._T)(T,["rotation"]),B=m.addShape("rect",{attrs:(0,A.pi)((0,A.pi)({},D),f.style||{}),id:d,origin:s.mappingData,data:s.data,coordinate:s.coordinate});if(B.setZIndex(-1),O){var U=x.getMatrix();B.setMatrix(U)}}}}})},a.prototype.createOffscreenGroup=function(){var i=this.container,t=i.getGroupBase(),s=new t({});return s},a.prototype.adjustLabel=function(i,t){(0,b.S6)(i,function(s){if(s){var l=s.id,f=t[l];if(!f.destroyed){var d=f.findAll(function(m){return m.get("type")!=="path"});(0,b.S6)(d,function(m){m&&(s.offsetX&&m.attr("x",m.attr("x")+s.offsetX),s.offsetY&&m.attr("y",m.attr("y")+s.offsetY))})}}})},a}(),Fs=Xo;function _u(a){var i=0;return(0,b.S6)(a,function(t){i+=t}),i/a.length}var Cl=function(){function a(i){this.geometry=i}return a.prototype.getLabelItems=function(i){var t=this,s=[],l=this.getLabelCfgs(i);return(0,b.S6)(i,function(f,d){var m=l[d];if(!m||(0,b.UM)(f.x)||(0,b.UM)(f.y)){s.push(null);return}var x=(0,b.kJ)(m.content)?m.content:[m.content];m.content=x;var T=x.length;(0,b.S6)(x,function(O,D){if((0,b.UM)(O)||O===""){s.push(null);return}var B=(0,A.pi)((0,A.pi)({},m),t.getLabelPoint(m,f,D));B.textAlign||(B.textAlign=t.getLabelAlign(B,D,T)),B.offset<=0&&(B.labelLine=null),s.push(B)})}),s},a.prototype.render=function(i,t){return t===void 0&&(t=!1),(0,A.mG)(this,void 0,void 0,function(){var s,l,f;return(0,A.Jh)(this,function(d){switch(d.label){case 0:return s=this.getLabelItems(i),l=this.getLabelsRenderer(),f=this.getGeometryShapes(),[4,l.render(s,f,t)];case 1:return d.sent(),[2]}})})},a.prototype.clear=function(){var i=this.labelsRenderer;i&&i.clear()},a.prototype.destroy=function(){var i=this.labelsRenderer;i&&i.destroy(),this.labelsRenderer=null},a.prototype.getCoordinate=function(){return this.geometry.coordinate},a.prototype.getDefaultLabelCfg=function(i,t){var s=this.geometry,l=s.type,f=s.theme;return l==="polygon"||l==="interval"&&t==="middle"||i<0&&!["line","point","path"].includes(l)?(0,b.U2)(f,"innerLabels",{}):(0,b.U2)(f,"labels",{})},a.prototype.getThemedLabelCfg=function(i){var t=this.geometry,s=this.getDefaultLabelCfg(),l=t.type,f=t.theme,d;return l==="polygon"||i.offset<0&&!["line","point","path"].includes(l)?d=(0,b.b$)({},s,f.innerLabels,i):d=(0,b.b$)({},s,f.labels,i),d},a.prototype.setLabelPosition=function(i,t,s,l){},a.prototype.getLabelOffset=function(i){var t=this.getCoordinate(),s=this.getOffsetVector(i);return t.isTransposed?s[0]:s[1]},a.prototype.getLabelOffsetPoint=function(i,t,s){var l=i.offset,f=this.getCoordinate(),d=f.isTransposed,m=d?"x":"y",x=d?1:-1,T={x:0,y:0};return t>0||s===1?T[m]=l*x:T[m]=l*x*-1,T},a.prototype.getLabelPoint=function(i,t,s){var l=this.getCoordinate(),f=i.content.length;function d(Ee,Ce,st){st===void 0&&(st=!1);var gt=Ee;return(0,b.kJ)(gt)&&(i.content.length===1?st?gt=_u(gt):gt.length<=2?gt=gt[Ee.length-1]:gt=_u(gt):gt=gt[Ce]),gt}var m={content:i.content[s],x:0,y:0,start:{x:0,y:0},color:"#fff"},x=(0,b.kJ)(t.shape)?t.shape[0]:t.shape,T=x==="funnel"||x==="pyramid";if(this.geometry.type==="polygon"){var O=sd(t.x,t.y);m.x=O[0],m.y=O[1]}else this.geometry.type==="interval"&&!T?(m.x=d(t.x,s,!0),m.y=d(t.y,s)):(m.x=d(t.x,s),m.y=d(t.y,s));if(T){var D=(0,b.U2)(t,"nextPoints"),B=(0,b.U2)(t,"points");if(D){var U=l.convert(B[1]),J=l.convert(D[1]);m.x=(U.x+J.x)/2,m.y=(U.y+J.y)/2}else if(x==="pyramid"){var U=l.convert(B[1]),J=l.convert(B[2]);m.x=(U.x+J.x)/2,m.y=(U.y+J.y)/2}}i.position&&this.setLabelPosition(m,t,s,i.position);var pe=this.getLabelOffsetPoint(i,s,f);return m.start={x:m.x,y:m.y},m.x+=pe.x,m.y+=pe.y,m.color=t.color,m},a.prototype.getLabelAlign=function(i,t,s){var l="center",f=this.getCoordinate();if(f.isTransposed){var d=i.offset;d<0?l="right":d===0?l="center":l="left",s>1&&t===0&&(l==="right"?l="left":l==="left"&&(l="right"))}return l},a.prototype.getLabelId=function(i){var t=this.geometry,s=t.type,l=t.getXScale(),f=t.getYScale(),d=i[Re],m=t.getElementId(i);return s==="line"||s==="area"?m+=" ".concat(d[l.field]):s==="path"&&(m+=" ".concat(d[l.field],"-").concat(d[f.field])),m},a.prototype.getLabelsRenderer=function(){var i=this.geometry,t=i.labelsContainer,s=i.labelOption,l=i.canvasRegion,f=i.animateOption,d=this.geometry.coordinate,m=this.labelsRenderer;return m||(m=new Fs({container:t,layout:(0,b.U2)(s,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=m),m.region=l,m.animate=f?on("label",d):!1,m},a.prototype.getLabelCfgs=function(i){var t=this,s=this.geometry,l=s.labelOption,f=s.scales,d=s.coordinate,m=l,x=m.fields,T=m.callback,O=m.cfg,D=x.map(function(U){return f[U]}),B=[];return(0,b.S6)(i,function(U,J){var pe=U[Re],Ee=t.getLabelText(pe,D),Ce;if(T){var st=x.map(function(Fr){return pe[Fr]});if(Ce=T.apply(void 0,(0,A.ev)([],(0,A.CR)(st),!1)),(0,b.UM)(Ce)){B.push(null);return}}var gt=(0,A.pi)((0,A.pi)({id:t.getLabelId(U),elementId:t.geometry.getElementId(U),data:pe,mappingData:U,coordinate:d},O),Ce);(0,b.mf)(gt.position)&&(gt.position=gt.position(pe,U,J));var bt=t.getLabelOffset(gt.offset||0),Ft=t.getDefaultLabelCfg(bt,gt.position);gt=(0,b.b$)({},Ft,gt),gt.offset=t.getLabelOffset(gt.offset||0);var xr=gt.content;(0,b.mf)(xr)?gt.content=xr(pe,U,J):(0,b.o8)(xr)&&(gt.content=Ee[0]),B.push(gt)}),B},a.prototype.getLabelText=function(i,t){var s=[];return(0,b.S6)(t,function(l){var f=i[l.field];(0,b.kJ)(f)?f=f.map(function(d){return l.getText(d)}):f=l.getText(f),(0,b.UM)(f)||f===""?s.push(null):s.push(f)}),s},a.prototype.getOffsetVector=function(i){i===void 0&&(i=0);var t=this.getCoordinate(),s=0;return(0,b.hj)(i)&&(s=i),t.isTransposed?t.applyMatrix(s,0):t.applyMatrix(0,s)},a.prototype.getGeometryShapes=function(){var i=this.geometry,t={};return(0,b.S6)(i.elementsMap,function(s,l){t[l]=s.shape}),(0,b.S6)(i.getOffscreenGroup().getChildren(),function(s){var l=i.getElementId(s.get("origin").mappingData);t[l]=s}),t},a}(),Eo=Cl;function jf(a,i,t){if(!a)return t;var s;if(a.callback&&a.callback.length>1){var l=Array(a.callback.length-1).fill("");s=a.mapping.apply(a,(0,A.ev)([i],(0,A.CR)(l),!1)).join("")}else s=a.mapping(i).join("");return s||t}var Tl={hexagon:function(a,i,t){var s=t/2*Math.sqrt(3);return[["M",a,i-t],["L",a+s,i-t/2],["L",a+s,i+t/2],["L",a,i+t],["L",a-s,i+t/2],["L",a-s,i-t/2],["Z"]]},bowtie:function(a,i,t){var s=t-1.5;return[["M",a-t,i-s],["L",a+t,i+s],["L",a+t,i-s],["L",a-t,i+s],["Z"]]},cross:function(a,i,t){return[["M",a-t,i-t],["L",a+t,i+t],["M",a+t,i-t],["L",a-t,i+t]]},tick:function(a,i,t){return[["M",a-t/2,i-t],["L",a+t/2,i-t],["M",a,i-t],["L",a,i+t],["M",a-t/2,i+t],["L",a+t/2,i+t]]},plus:function(a,i,t){return[["M",a-t,i],["L",a+t,i],["M",a,i-t],["L",a,i+t]]},hyphen:function(a,i,t){return[["M",a-t,i],["L",a+t,i]]},line:function(a,i,t){return[["M",a,i-t],["L",a,i+t]]}},$h=["line","cross","tick","plus","hyphen"];function xu(a,i){return(0,b.mf)(i)?i(a):(0,b.b$)({},a,i)}function Ba(a,i){var t=a.symbol;if((0,b.HD)(t)&&$h.indexOf(t)!==-1){var s=(0,b.U2)(a,"style",{}),l=(0,b.U2)(s,"lineWidth",1),f=s.stroke||s.fill||i;a.style=(0,b.b$)({},a.style,{lineWidth:l,stroke:f,fill:null})}}function Ia(a){var i=a.symbol;(0,b.HD)(i)&&Tl[i]&&(a.symbol=Tl[i])}function Pp(a){return a.startsWith(le.LEFT)||a.startsWith(le.RIGHT)?"vertical":"horizontal"}function Kd(a,i,t,s,l){var f=t.getScale(t.type);if(f.isCategory){var d=f.field,m=i.getAttribute("color"),x=i.getAttribute("shape"),T=a.getTheme().defaultColor,O=i.coordinate.isPolar;return f.getTicks().map(function(D,B){var U,J=D.text,pe=D.value,Ee=J,Ce=f.invert(pe),st=a.filterFieldData(d,[(U={},U[d]=Ce,U)]).length===0;(0,b.S6)(a.views,function(Fr){var $r;Fr.filterFieldData(d,[($r={},$r[d]=Ce,$r)]).length||(st=!0)});var gt=jf(m,Ce,T),bt=jf(x,Ce,"point"),Ft=i.getShapeMarker(bt,{color:gt,isInPolar:O}),xr=l;return(0,b.mf)(xr)&&(xr=xr(Ee,B,(0,A.pi)({name:Ee,value:Ce},(0,b.b$)({},s,Ft)))),Ft=(0,b.b$)({},s,Ft,Yl((0,A.pi)({},xr),["style"])),Ba(Ft,gt),xr&&xr.style&&(Ft.style=xu(Ft.style,xr.style)),Ia(Ft),{id:Ce,name:Ee,value:Ce,marker:Ft,unchecked:st}})}return[]}function Qd(a,i,t){return t.map(function(s,l){var f=i;(0,b.mf)(f)&&(f=f(s.name,l,(0,b.b$)({},a,s)));var d=(0,b.mf)(s.marker)?s.marker(s.name,l,(0,b.b$)({},a,s)):s.marker,m=(0,b.b$)({},a,f,d);return Ia(m),s.marker=m,s})}function kp(a,i){var t=(0,b.U2)(a,["components","legend"],{});return(0,b.b$)({},(0,b.U2)(t,["common"],{}),(0,b.b$)({},(0,b.U2)(t,[i],{})))}function Jd(a){return a?!1:a==null||isNaN(a)}function Cm(a){if((0,b.kJ)(a))return Jd(a[1].y);var i=a.y;return(0,b.kJ)(i)?Jd(i[0]):Jd(i)}function cd(a,i,t){if(i===void 0&&(i=!1),t===void 0&&(t=!0),!a.length||a.length===1&&!t)return[];if(i){for(var s=[],l=0,f=a.length;l<f;l++){var d=a[l];Cm(d)||s.push(d)}return[s]}for(var m=[],x=[],l=0,f=a.length;l<f;l++){var d=a[l];Cm(d)?x.length&&(x.length===1&&!t||m.push(x),x=[]):x.push(d)}return x.length&&m.push(x),m}function Mg(a){for(var i=[],t=0;t<a.length;t++){var s=a[t];if(s){var l=t===0?"M":"L";i.push([l,s.x,s.y])}}var f=a[0];return f&&(i.push(["L",f.x,f.y]),i.push(["z"])),i}function Tm(a){for(var i=a.length/2,t=[],s=[],l=0;l<a.length;l++)l<i?t.push(a[l]):s.push(a[l]);var f=ta(t,!1),d=ta(s,!1);s.length&&f.push(["L",s[0].x,s[0].y]),d.shift();var m=f.concat(d);return t.length&&m.push(["L",t[0].x,t[0].y]),m.push(["z"]),m}function bu(a,i,t,s){s===void 0&&(s="");var l=a.style,f=l===void 0?{}:l,d=a.defaultStyle,m=a.color,x=a.size,T=(0,A.pi)((0,A.pi)({},d),f);return m&&(i&&(f.stroke||(T.stroke=m)),t&&(f.fill||(T.fill=m))),s&&(0,b.UM)(f[s])&&!(0,b.UM)(x)&&(T[s]=x),T}function Dp(a){return(0,b.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,b.U2)(a,["background","style"]))}function Fv(a){var i=a.x,t=(0,b.kJ)(a.y)?a.y:[a.y];return t.map(function(s,l){return{x:(0,b.kJ)(i)?i[l]:i,y:s}})}var Rg={line:function(a,i,t){return[["M",a-t,i],["L",a+t,i]]},dot:function(a,i,t){return[["M",a-t,i],["L",a+t,i]]},dash:function(a,i,t){return[["M",a-t,i],["L",a+t,i]]},smooth:function(a,i,t){return[["M",a-t,i],["A",t/2,t/2,0,1,1,a,i],["A",t/2,t/2,0,1,0,a+t,i]]},hv:function(a,i,t){return[["M",a-t-1,i-2.5],["L",a,i-2.5],["L",a,i+2.5],["L",a+t+1,i+2.5]]},vh:function(a,i,t){return[["M",a-t-1,i+2.5],["L",a,i+2.5],["L",a,i-2.5],["L",a+t+1,i-2.5]]},hvh:function(a,i,t){return[["M",a-(t+1),i+2.5],["L",a-t/2,i+2.5],["L",a-t/2,i-2.5],["L",a+t/2,i-2.5],["L",a+t/2,i+2.5],["L",a+t+1,i+2.5]]},vhv:function(a,i){return[["M",a-5,i+2.5],["L",a-5,i],["L",a,i],["L",a,i-3],["L",a,i+3],["L",a+6.5,i+3]]}};function fd(a,i){var t=a.color;return{symbol:Rg[i],style:{lineWidth:2,r:6,stroke:t}}}function Bv(a,i,t){for(var s=a.isStack,l=a.connectNulls,f=a.isInCircle,d=a.showSinglePoint,m=bu(a,!0,!1,"lineWidth"),x=cd(a.points,l,d),T=[],O=0,D=x.length;O<D;O++){var B=x[O];T=T.concat(Og(B,f,s,i,t,m))}return m.path=T,m}function Ig(a,i,t,s,l){if(a.length===1)return[["M",a[0].x,a[0].y-l.lineWidth/2],["L",a[0].x,a[0].y],["L",a[0].x,a[0].y+l.lineWidth/2]];var f;return t?(i&&a.length&&a.push({x:a[0].x,y:a[0].y}),f=ta(a,!1,s)):(f=Dn(a,!1),i&&f.push(["Z"])),f}function P0(a,i,t,s,l,f){var d=[],m=[];(0,b.S6)(a,function(O){var D=Fv(O);d.push(D[1]),m.push(D[0])});var x=Ig(d,i,s,l,f),T=Ig(m,i,s,l,f);return t?x:x.concat(T)}function Og(a,i,t,s,l,f){if(a.length){var d=a[0];return(0,b.kJ)(d.y)?P0(a,i,t,s,l,f):Ig(a,i,s,l,f)}return[]}var k0=no("line",{defaultShapeType:"line"});(0,b.S6)(["line","dot","dash","smooth"],function(a){xi("line",a,{draw:function(i,t){var s=a==="smooth",l;if(s){var f=this.coordinate,d=f.start,m=f.end;l=[[d.x,m.y],[m.x,d.y]]}var x=Bv(i,s,l),T=t.addShape({type:"path",attrs:x,name:"line",capture:!s});return T},getMarker:function(i){return fd(i,a)}})});var x_=null,D0="4.2.10",uc={getLegendItems:Kd,translate:Qu,rotate:fl,zoom:el,transform:yu,getAngle:od,getSectorPath:Zf,polarToCartesian:js,getDelegationObject:Wo,getTooltipItems:Qo,getMappingValue:jf,getPath:Og,getPathPoints:cd},_h={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},ns={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},zc=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],L0=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Pg=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],xh=function(a){a===void 0&&(a={});var i=a.paletteQualitative10,t=i===void 0?zc:i,s=a.paletteQualitative20,l=s===void 0?L0:s,f=a.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"#141414",brandColor:d,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:Pg,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:ns[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:ns[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:_h[85],axisTickLineBorderColor:ns[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:ns[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:ns[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:ns[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:ns[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:zc[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:ns[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:ns[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:ns[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:ns[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:ns[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:ns[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:_h[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:_h[25],annotationArcBorderColor:ns[15],annotationArcBorder:1,annotationLineBorderColor:ns[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:ns[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:ns[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:ns[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:ns[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:ns[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:_h[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:ns[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:_h[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:ns[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:zc[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:_h[100],pointBorderOpacity:1,pointActiveBorderColor:ns[100],pointSelectedBorder:2,pointSelectedBorderColor:ns[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:zc[0],hollowPointBorderOpacity:.95,hollowPointFillColor:_h[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:ns[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:ns[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:zc[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:zc[0],areaFillOpacity:.25,areaActiveFillColor:zc[0],areaActiveFillOpacity:.5,areaSelectedFillColor:zc[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:zc[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:ns[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:ns[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:zc[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:ns[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:ns[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:zc[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:_h[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:ns[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:ns[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,A.pi)((0,A.pi)({},m),a)},Nv=xh();function Am(){return window?window.devicePixelRatio:1}function zv(a,i,t,s){var l=a-t,f=i-s;return Math.sqrt(l*l+f*f)}function hd(a,i,t,s,l,f){return l>=a&&l<=a+t&&f>=i&&f<=i+s}function kg(a,i){return!(i.minX>a.maxX||i.maxX<a.minX||i.minY>a.maxY||i.maxY<a.minY)}function b_(a,i){return!a||!i?a||i:{minX:Math.min(a.minX,i.minX),minY:Math.min(a.minY,i.minY),maxX:Math.max(a.maxX,i.maxX),maxY:Math.max(a.maxY,i.maxY)}}function S_(a,i){return a[0]===i[0]&&a[1]===i[1]}var E_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,XE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Su=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function bh(a,i){var t=a.match(Su);(0,b.S6)(t,function(s){var l=s.split(":");i.addColorStop(l[0],l[1])})}function YE(a,i,t){var s=E_.exec(t),l=parseFloat(s[1])%360*(Math.PI/180),f=s[2],d=i.getBBox(),m,x;l>=0&&l<1/2*Math.PI?(m={x:d.minX,y:d.minY},x={x:d.maxX,y:d.maxY}):1/2*Math.PI<=l&&l<Math.PI?(m={x:d.maxX,y:d.minY},x={x:d.minX,y:d.maxY}):Math.PI<=l&&l<3/2*Math.PI?(m={x:d.maxX,y:d.maxY},x={x:d.minX,y:d.minY}):(m={x:d.minX,y:d.maxY},x={x:d.maxX,y:d.minY});var T=Math.tan(l),O=T*T,D=(x.x-m.x+T*(x.y-m.y))/(O+1)+m.x,B=T*(x.x-m.x+T*(x.y-m.y))/(O+1)+m.y,U=a.createLinearGradient(m.x,m.y,D,B);return bh(f,U),U}function Xh(a,i,t){var s=XE.exec(t),l=parseFloat(s[1]),f=parseFloat(s[2]),d=parseFloat(s[3]),m=s[4];if(d===0){var x=m.match(Su);return x[x.length-1].split(":")[1]}var T=i.getBBox(),O=T.maxX-T.minX,D=T.maxY-T.minY,B=Math.sqrt(O*O+D*D)/2,U=a.createRadialGradient(T.minX+O*l,T.minY+D*f,0,T.minX+O/2,T.minY+D/2,d*B);return bh(m,U),U}function F0(a,i,t){if(i.get("patternSource")&&i.get("patternSource")===t)return i.get("pattern");var s,l,f=Mm.exec(t),d=f[1],m=f[2];function x(){s=a.createPattern(l,d),i.set("pattern",s),i.set("patternSource",t)}switch(d){case"a":d="repeat";break;case"x":d="repeat-x";break;case"y":d="repeat-y";break;case"n":d="no-repeat";break;default:d="no-repeat"}return l=new Image,m.match(/^data:/i)||(l.crossOrigin="Anonymous"),l.src=m,l.complete?x():(l.onload=x,l.src=l.src),s}function B0(a,i,t){var s=i.getBBox();if(isNaN(s.x)||isNaN(s.y)||isNaN(s.width)||isNaN(s.height))return t;if((0,b.HD)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return YE(a,i,t);if(t[0]==="r")return Xh(a,i,t);if(t[0]==="p")return F0(a,i,t)}return t}if(t instanceof CanvasPattern)return t}function Dg(a){var i=0,t=0,s=0,l=0;return(0,b.kJ)(a)?a.length===1?i=t=s=l=a[0]:a.length===2?(i=s=a[0],t=l=a[1]):a.length===3?(i=a[0],t=l=a[1],s=a[2]):(i=a[0],t=a[1],s=a[2],l=a[3]):i=t=s=l=a,[i,t,s,l]}function Pu(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Hf(a,i){return Pu(a)*Pu(i)?(a[0]*i[0]+a[1]*i[1])/(Pu(a)*Pu(i)):1}function ev(a,i){return(a[0]*i[1]<a[1]*i[0]?-1:1)*Math.acos(Hf(a,i))}function pd(a,i){var t=i[1],s=i[2],l=(0,b.wQ)((0,b.c$)(i[3]),Math.PI*2),f=i[4],d=i[5],m=a[0],x=a[1],T=i[6],O=i[7],D=Math.cos(l)*(m-T)/2+Math.sin(l)*(x-O)/2,B=-1*Math.sin(l)*(m-T)/2+Math.cos(l)*(x-O)/2,U=D*D/(t*t)+B*B/(s*s);U>1&&(t*=Math.sqrt(U),s*=Math.sqrt(U));var J=t*t*(B*B)+s*s*(D*D),pe=J?Math.sqrt((t*t*(s*s)-J)/J):1;f===d&&(pe*=-1),isNaN(pe)&&(pe=0);var Ee=s?pe*t*B/s:0,Ce=t?pe*-s*D/t:0,st=(m+T)/2+Math.cos(l)*Ee-Math.sin(l)*Ce,gt=(x+O)/2+Math.sin(l)*Ee+Math.cos(l)*Ce,bt=[(D-Ee)/t,(B-Ce)/s],Ft=[(-1*D-Ee)/t,(-1*B-Ce)/s],xr=ev([1,0],bt),Fr=ev(bt,Ft);return Hf(bt,Ft)<=-1&&(Fr=Math.PI),Hf(bt,Ft)>=1&&(Fr=0),d===0&&Fr>0&&(Fr=Fr-2*Math.PI),d===1&&Fr<0&&(Fr=Fr+2*Math.PI),{cx:st,cy:gt,rx:S_(a,[T,O])?0:t,ry:S_(a,[T,O])?0:s,startAngle:xr,endAngle:xr+Fr,xRotation:l,arcFlag:f,sweepFlag:d}}var dd=Math.sin,vd=Math.cos,Lg=Math.atan2,gd=Math.PI;function N0(a,i,t,s,l,f,d){var m=i.stroke,x=i.lineWidth,T=t-l,O=s-f,D=Lg(O,T),B=new jx({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*vd(gd/6)+","+10*dd(gd/6)+" L0,0 L"+10*vd(gd/6)+",-"+10*dd(gd/6),stroke:m,lineWidth:x}});B.translate(l,f),B.rotateAtPoint(l,f,D),a.set(d?"startArrowShape":"endArrowShape",B)}function Rm(a,i,t,s,l,f,d){var m=i.startArrow,x=i.endArrow,T=i.stroke,O=i.lineWidth,D=d?m:x,B=D.d,U=D.fill,J=D.stroke,pe=D.lineWidth,Ee=(0,A._T)(D,["d","fill","stroke","lineWidth"]),Ce=t-l,st=s-f,gt=Lg(st,Ce);B&&(l=l-vd(gt)*B,f=f-dd(gt)*B);var bt=new jx({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:(0,A.pi)((0,A.pi)({},Ee),{stroke:J||T,lineWidth:pe||O,fill:U})});bt.translate(l,f),bt.rotateAtPoint(l,f,gt),a.set(d?"startArrowShape":"endArrowShape",bt)}function Lp(a,i,t,s,l){var f=Lg(s-i,t-a);return{dx:vd(f)*l,dy:dd(f)*l}}function Im(a,i,t,s,l,f){typeof i.startArrow=="object"?Rm(a,i,t,s,l,f,!0):i.startArrow?N0(a,i,t,s,l,f,!0):a.set("startArrowShape",null)}function Om(a,i,t,s,l,f){typeof i.endArrow=="object"?Rm(a,i,t,s,l,f,!1):i.endArrow?N0(a,i,t,s,l,f,!1):a.set("startArrowShape",null)}var Uc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Fp(a,i){var t=i.attr();for(var s in t){var l=t[s],f=Uc[s]?Uc[s]:s;f==="matrix"&&l?a.transform(l[0],l[1],l[3],l[4],l[6],l[7]):f==="lineDash"&&a.setLineDash?(0,b.kJ)(l)&&a.setLineDash(l):(f==="strokeStyle"||f==="fillStyle"?l=B0(a,i,l):f==="globalAlpha"&&(l=l*a.globalAlpha),a[f]=l)}}function md(a,i,t){for(var s=0;s<i.length;s++){var l=i[s];l.cfg.visible?l.draw(a,t):l.skipDraw()}}function ju(a,i,t){var s=a.get("refreshElements");(0,b.S6)(s,function(l){if(l!==a)for(var f=l.cfg.parent;f&&f!==a&&!f.cfg.refresh;)f.cfg.refresh=!0,f=f.cfg.parent}),s[0]===a?Yh(i,t):Pm(i,t)}function Pm(a,i){for(var t=0;t<a.length;t++){var s=a[t];if(s.cfg.visible)if(s.cfg.hasChanged)s.cfg.refresh=!0,s.isGroup()&&Yh(s.cfg.children,i);else if(s.cfg.refresh)s.isGroup()&&Pm(s.cfg.children,i);else{var l=yd(s,i);s.cfg.refresh=l,l&&s.isGroup()&&Pm(s.cfg.children,i)}}}function km(a){for(var i=0;i<a.length;i++){var t=a[i];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&km(t.cfg.children)}}function Yh(a,i){for(var t=0;t<a.length;t++){var s=a[t];s.cfg.visible&&(s.cfg.refresh=!0,s.isGroup()&&Yh(s.get("children"),i))}}function yd(a,i){var t=a.cfg.cacheCanvasBBox,s=a.cfg.isInView&&t&&kg(t,i);return s}function _d(a,i,t,s){var l=t.path,f=t.startArrow,d=t.endArrow;if(l){var m=[0,0],x=[0,0],T={dx:0,dy:0};i.beginPath();for(var O=0;O<l.length;O++){var D=l[O],B=D[0];if(O===0&&f&&f.d){var U=a.getStartTangent();T=Lp(U[0][0],U[0][1],U[1][0],U[1][1],f.d)}else if(O===l.length-2&&l[O+1][0]==="Z"&&d&&d.d){var J=l[O+1];if(J[0]==="Z"){var U=a.getEndTangent();T=Lp(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}}else if(O===l.length-1&&d&&d.d&&l[0]!=="Z"){var U=a.getEndTangent();T=Lp(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}var pe=T.dx,Ee=T.dy;switch(B){case"M":i.moveTo(D[1]-pe,D[2]-Ee),x=[D[1],D[2]];break;case"L":i.lineTo(D[1]-pe,D[2]-Ee);break;case"Q":i.quadraticCurveTo(D[1],D[2],D[3]-pe,D[4]-Ee);break;case"C":i.bezierCurveTo(D[1],D[2],D[3],D[4],D[5]-pe,D[6]-Ee);break;case"A":{var Ce=void 0;s?(Ce=s[O],Ce||(Ce=pd(m,D),s[O]=Ce)):Ce=pd(m,D);var st=Ce.cx,gt=Ce.cy,bt=Ce.rx,Ft=Ce.ry,xr=Ce.startAngle,Fr=Ce.endAngle,$r=Ce.xRotation,yn=Ce.sweepFlag;if(i.ellipse)i.ellipse(st,gt,bt,Ft,$r,xr,Fr,1-yn);else{var cn=bt>Ft?bt:Ft,Bn=bt>Ft?1:bt/Ft,hi=bt>Ft?Ft/bt:1;i.translate(st,gt),i.rotate($r),i.scale(Bn,hi),i.arc(0,0,cn,xr,Fr,1-yn),i.scale(1/Bn,1/hi),i.rotate(-$r),i.translate(-st,-gt)}break}case"Z":i.closePath();break;default:break}if(B==="Z")m=x;else{var Hi=D.length;m=[D[Hi-2],D[Hi-1]]}}}}function tv(a,i){var t=a.get("canvas");t&&(i==="remove"&&(a._cacheCanvasBBox=a.get("cacheCanvasBBox")),a.get("hasChanged")||(a.set("hasChanged",!0),a.cfg.parent&&a.cfg.parent.get("hasChanged")||(t.refreshElement(a,i,t),t.get("autoDraw")&&t.draw())))}function Uv(a){var i;if(a.destroyed)i=a._cacheCanvasBBox;else{var t=a.get("cacheCanvasBBox"),s=t&&!!(t.width&&t.height),l=a.getCanvasBBox(),f=l&&!!(l.width&&l.height);s&&f?i=b_(t,l):s?i=t:f&&(i=l)}return i}function w_(a){if(!a.length)return null;var i=[],t=[],s=[],l=[];return(0,b.S6)(a,function(f){var d=Uv(f);d&&(i.push(d.minX),t.push(d.minY),s.push(d.maxX),l.push(d.maxY))}),{minX:(0,b.VV)(i),minY:(0,b.VV)(t),maxX:(0,b.Fp)(s),maxY:(0,b.Fp)(l)}}function C_(a,i){return!a||!i||!kg(a,i)?null:{minX:Math.max(a.minX,i.minX),minY:Math.max(a.minY,i.minY),maxX:Math.min(a.maxX,i.maxX),maxY:Math.min(a.maxY,i.maxY)}}var T_=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.onCanvasChange=function(t){tv(this,t)},i.prototype.getShapeBase=function(){return Q},i.prototype.getGroupBase=function(){return i},i.prototype._applyClip=function(t,s){s&&(t.save(),Fp(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},i.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,s=[],l=[];(0,b.S6)(t,function(B){var U=B.cfg.cacheCanvasBBox;U&&B.cfg.isInView&&(s.push(U.minX,U.maxX),l.push(U.minY,U.maxY))});var f=null;if(s.length){var d=(0,b.VV)(s),m=(0,b.Fp)(s),x=(0,b.VV)(l),T=(0,b.Fp)(l);f={minX:d,minY:x,x:d,y:x,maxX:m,maxY:T,width:m-d,height:T-x};var O=this.cfg.canvas;if(O){var D=O.getViewRange();this.set("isInView",kg(f,D))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",f)},i.prototype.draw=function(t,s){var l=this.cfg.children,f=s?this.cfg.refresh:!0;l.length&&f&&(t.save(),Fp(t,this),this._applyClip(t,this.getClip()),md(t,l,s),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},i.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},i}(rt.AbstractGroup),Dm=T_,z0=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},i.prototype.getShapeBase=function(){return Q},i.prototype.getGroupBase=function(){return Dm},i.prototype.onCanvasChange=function(t){tv(this,t)},i.prototype.calculateBBox=function(){var t=this.get("type"),s=this.getHitLineWidth(),l=(0,rt.getBBoxMethod)(t),f=l(this),d=s/2,m=f.x-d,x=f.y-d,T=f.x+f.width+d,O=f.y+f.height+d;return{x:m,minX:m,y:x,minY:x,width:f.width+s,height:f.height+s,maxX:T,maxY:O}},i.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},i.prototype.isStroke=function(){return!!this.attrs.stroke},i.prototype._applyClip=function(t,s){s&&(t.save(),Fp(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},i.prototype.draw=function(t,s){var l=this.cfg.clipShape;if(s){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var f=this.getCanvasBBox();if(!kg(s,f)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Fp(t,this),this._applyClip(t,l),this.drawPath(t),t.restore(),this._afterDraw()},i.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},i.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var s=this.getCanvasBBox(),l=kg(s,t);this.set("isInView",l),l?this.set("cacheCanvasBBox",s):this.set("cacheCanvasBBox",null)}},i.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},i.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},i.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},i.prototype.fill=function(t){t.fill()},i.prototype.stroke=function(t){t.stroke()},i.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isFill()&&(!(0,b.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.isStroke()&&l>0&&(!(0,b.UM)(d)&&d!==1&&(t.globalAlpha=d),this.stroke(t)),this.afterDrawPath(t)},i.prototype.createPath=function(t){},i.prototype.afterDrawPath=function(t){},i.prototype.isInShape=function(t,s){var l=this.isStroke(),f=this.isFill(),d=this.getHitLineWidth();return this.isInStrokeOrPath(t,s,l,f,d)},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){return!1},i.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},i}(rt.AbstractShape),Zc=z0,qh=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,r:0})},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,T=m.y,O=m.r,D=d/2,B=zv(x,T,t,s);return f&&l?B<=O+D:f?B<=O:l?B>=O-D&&B<=O+D:!1},i.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.r;t.beginPath(),t.arc(l,f,d,0,Math.PI*2,!1),t.closePath()},i}(Zc),U0=qh;function rv(a,i,t,s){return a/(t*t)+i/(s*s)}var Lm=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,rx:0,ry:0})},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=d/2,T=m.x,O=m.y,D=m.rx,B=m.ry,U=(t-T)*(t-T),J=(s-O)*(s-O);return f&&l?rv(U,J,D+x,B+x)<=1:f?rv(U,J,D,B)<=1:l?rv(U,J,D-x,B-x)>=1&&rv(U,J,D+x,B+x)<=1:!1},i.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.rx,m=s.ry;if(t.beginPath(),t.ellipse)t.ellipse(l,f,d,m,0,0,Math.PI*2,!1);else{var x=d>m?d:m,T=d>m?1:d/m,O=d>m?m/d:1;t.save(),t.translate(l,f),t.scale(T,O),t.arc(0,0,x,0,Math.PI*2),t.restore(),t.closePath()}},i}(Zc),Z0=Lm;function Fg(a){return a instanceof HTMLElement&&(0,b.HD)(a.nodeName)&&a.nodeName.toUpperCase()==="CANVAS"}var V0=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,width:0,height:0})},i.prototype.initAttrs=function(t){this._setImage(t.img)},i.prototype.isStroke=function(){return!1},i.prototype.isOnlyHitBox=function(){return!0},i.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},i.prototype._setImage=function(t){var s=this,l=this.attrs;if((0,b.HD)(t)){var f=new Image;f.onload=function(){if(s.destroyed)return!1;s.attr("img",f),s.set("loading",!1),s._afterLoading();var d=s.get("callback");d&&d.call(s)},f.crossOrigin="Anonymous",f.src=t,this.set("loading",!0)}else t instanceof Image?(l.width||(l.width=t.width),l.height||(l.height=t.height)):Fg(t)&&(l.width||(l.width=Number(t.getAttribute("width"))),l.height||(l.height,Number(t.getAttribute("height"))))},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t==="img"&&this._setImage(s)},i.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.sx,T=s.sy,O=s.swidth,D=s.sheight,B=s.img;(B instanceof Image||Fg(B))&&(!(0,b.UM)(x)&&!(0,b.UM)(T)&&!(0,b.UM)(O)&&!(0,b.UM)(D)?t.drawImage(B,x,T,O,D,l,f,d,m):t.drawImage(B,l,f,d,m))},i}(Zc),xd=V0,Dl=k(32793);function Kh(a,i,t,s,l,f,d){var m=Math.min(a,t),x=Math.max(a,t),T=Math.min(i,s),O=Math.max(i,s),D=l/2;return f>=m-D&&f<=x+D&&d>=T-D&&d<=O+D?Dl.x1.pointToLine(a,i,t,s,f,d)<=l/2:!1}var Zv=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},i.prototype.initAttrs=function(t){this.setArrow()},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),this.setArrow()},i.prototype.setArrow=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2,m=t.startArrow,x=t.endArrow;m&&Im(this,t,f,d,s,l),x&&Om(this,t,s,l,f,d)},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr(),x=m.x1,T=m.y1,O=m.x2,D=m.y2;return Kh(x,T,O,D,d,t,s)},i.prototype.createPath=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2,x=s.startArrow,T=s.endArrow,O={dx:0,dy:0},D={dx:0,dy:0};x&&x.d&&(O=Lp(l,f,d,m,s.startArrow.d)),T&&T.d&&(D=Lp(l,f,d,m,s.endArrow.d)),t.beginPath(),t.moveTo(l+O.dx,f+O.dy),t.lineTo(d-D.dx,m-D.dy)},i.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},i.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Dl.x1.length(s,l,f,d)},i.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Dl.x1.pointAt(l,f,d,m,t)},i}(Zc),j0=Zv,Bg={circle:function(a,i,t){return[["M",a-t,i],["A",t,t,0,1,0,a+t,i],["A",t,t,0,1,0,a-t,i]]},square:function(a,i,t){return[["M",a-t,i-t],["L",a+t,i-t],["L",a+t,i+t],["L",a-t,i+t],["Z"]]},diamond:function(a,i,t){return[["M",a-t,i],["L",a,i-t],["L",a+t,i],["L",a,i+t],["Z"]]},triangle:function(a,i,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,i+s],["L",a,i-s],["L",a+t,i+s],["Z"]]},"triangle-down":function(a,i,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,i-s],["L",a+t,i-s],["L",a,i+s],["Z"]]}},Zx=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.initAttrs=function(t){this._resetParamsCache()},i.prototype._resetParamsCache=function(){this.set("paramsCache",{})},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},i.prototype.isOnlyHitBox=function(){return!0},i.prototype._getR=function(t){return(0,b.UM)(t.r)?t.radius:t.r},i.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.symbol||"circle",d=this._getR(t),m,x;if((0,b.mf)(f))m=f,x=m(s,l,d),x=(0,Ap.wb)(x);else{if(m=i.Symbols[f],!m)return console.warn(f+" marker is not supported."),null;x=m(s,l,d)}return x},i.prototype.createPath=function(t){var s=this._getPath(),l=this.get("paramsCache");_d(this,t,{path:s},l)},i.Symbols=Bg,i}(Zc),A_=Zx;function H0(a,i,t){var s=(0,rt.getOffScreenContext)();return a.createPath(s),s.isPointInPath(i,t)}var Vx=1e-6;function W0(a){return Math.abs(a)<Vx?0:a<0?-1:1}function M_(a,i,t){return(t[0]-a[0])*(i[1]-a[1])===(i[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],i[0])<=t[0]&&t[0]<=Math.max(a[0],i[0])&&Math.min(a[1],i[1])<=t[1]&&t[1]<=Math.max(a[1],i[1])}function G0(a,i,t){var s=!1,l=a.length;if(l<=2)return!1;for(var f=0;f<l;f++){var d=a[f],m=a[(f+1)%l];if(M_(d,m,[i,t]))return!0;W0(d[1]-t)>0!=W0(m[1]-t)>0&&W0(i-(t-d[1])*(d[0]-m[0])/(d[1]-m[1])-d[0])<0&&(s=!s)}return s}function Vv(a,i,t,s,l,f,d,m){var x=(Math.atan2(m-i,d-a)+Math.PI*2)%(Math.PI*2);if(x<s||x>l)return!1;var T={x:a+t*Math.cos(x),y:i+t*Math.sin(x)};return zv(T.x,T.y,d,m)<=f/2}var R_=eo.vs;function I_(a){for(var i=!1,t=a.length,s=0;s<t;s++){var l=a[s],f=l[0];if(f==="C"||f==="A"||f==="Q"){i=!0;break}}return i}function sf(a,i,t,s,l){for(var f=!1,d=i/2,m=0;m<a.length;m++){var x=a[m],T=x.currentPoint,O=x.params,D=x.prePoint,B=x.box;if(!(B&&!hd(B.x-d,B.y-d,B.width+i,B.height+i,t,s))){switch(x.command){case"L":case"Z":f=Kh(D[0],D[1],T[0],T[1],i,t,s);break;case"Q":var U=Dl.lD.pointDistance(D[0],D[1],O[1],O[2],O[3],O[4],t,s);f=U<=i/2;break;case"C":var J=Dl.Ll.pointDistance(D[0],D[1],O[1],O[2],O[3],O[4],O[5],O[6],t,s,l);f=J<=i/2;break;case"A":var pe=x.arcParams,Ee=pe.cx,Ce=pe.cy,st=pe.rx,gt=pe.ry,bt=pe.startAngle,Ft=pe.endAngle,xr=pe.xRotation,Fr=[t,s,1],$r=st>gt?st:gt,yn=st>gt?1:st/gt,cn=st>gt?gt/st:1,Bn=R_(null,[["t",-Ee,-Ce],["r",-xr],["s",1/yn,1/cn]]);so.transformMat3(Fr,Fr,Bn),f=Vv(0,0,$r,bt,Ft,i,Fr[0],Fr[1]);break;default:break}if(f)break}}return f}function Ng(a){for(var i=a.length,t=[],s=[],l=[],f=0;f<i;f++){var d=a[f],m=d[0];m==="M"?(l.length&&(s.push(l),l=[]),l.push([d[1],d[2]])):m==="Z"?l.length&&(t.push(l),l=[]):l.push([d[1],d[2]])}return l.length>0&&s.push(l),{polygons:t,polylines:s}}var jv=(0,A.pi)({hasArc:I_,extractPolygons:Ng,isPointInStroke:sf},rt.PathUtil);function nv(a,i,t){for(var s=!1,l=0;l<a.length;l++){var f=a[l];if(s=G0(f,i,t),s)break}return s}var zg=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{startArrow:!1,endArrow:!1})},i.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t==="path"&&this._setPathArr(s),this.setArrow()},i.prototype._setPathArr=function(t){this.attrs.path=(0,Ap.wb)(t);var s=jv.hasArc(t);this.set("hasArc",s),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},i.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,Ap.zx)(this.attr("path")),this.set("segments",t)),t},i.prototype.setArrow=function(){var t=this.attr(),s=t.startArrow,l=t.endArrow;if(s){var f=this.getStartTangent();Im(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}if(l){var f=this.getEndTangent();Om(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.getSegments(),x=this.get("hasArc"),T=!1;if(l){var O=this.getTotalLength();T=jv.isPointInStroke(m,d,t,s,O)}if(!T&&f)if(x)T=H0(this,t,s);else{var D=this.attr("path"),B=jv.extractPolygons(D);T=nv(B.polygons,t,s)||nv(B.polylines,t,s)}return T},i.prototype.createPath=function(t){var s=this.attr(),l=this.get("paramsCache");_d(this,t,s,l)},i.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},i.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,b.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},i.prototype.getPoint=function(t){var s=this.get("tCache");s||(this._calculateCurve(),this._setTcache(),s=this.get("tCache"));var l,f,d=this.get("curve");if(!s||s.length===0)return d?{x:d[0][1],y:d[0][2]}:null;(0,b.S6)(s,function(O,D){t>=O[0]&&t<=O[1]&&(l=(t-O[0])/(O[1]-O[0]),f=D)});var m=d[f];if((0,b.UM)(m)||(0,b.UM)(f))return null;var x=m.length,T=d[f+1];return Dl.Ll.pointAt(m[x-2],m[x-1],T[1],T[2],T[3],T[4],T[5],T[6],l)},i.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",jv.pathToCurve(t))},i.prototype._setTcache=function(){var t=0,s=0,l=[],f,d,m,x,T=this.get("curve");if(T){if((0,b.S6)(T,function(O,D){m=T[D+1],x=O.length,m&&(t+=Dl.Ll.length(O[x-2],O[x-1],m[1],m[2],m[3],m[4],m[5],m[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,b.S6)(T,function(O,D){m=T[D+1],x=O.length,m&&(f=[],f[0]=s/t,d=Dl.Ll.length(O[x-2],O[x-1],m[1],m[2],m[3],m[4],m[5],m[6]),s+=d||0,f[1]=s/t,l.push(f))}),this.set("tCache",l)}},i.prototype.getStartTangent=function(){var t=this.getSegments(),s;if(t.length>1){var l=t[0].currentPoint,f=t[1].currentPoint,d=t[1].startTangent;s=[],d?(s.push([l[0]-d[0],l[1]-d[1]]),s.push([l[0],l[1]])):(s.push([f[0],f[1]]),s.push([l[0],l[1]]))}return s},i.prototype.getEndTangent=function(){var t=this.getSegments(),s=t.length,l;if(s>1){var f=t[s-2].currentPoint,d=t[s-1].currentPoint,m=t[s-1].endTangent;l=[],m?(l.push([d[0]-m[0],d[1]-m[1]]),l.push([d[0],d[1]])):(l.push([f[0],f[1]]),l.push([d[0],d[1]]))}return l},i}(Zc),jx=zg;function Hx(a,i,t,s,l){var f=a.length;if(f<2)return!1;for(var d=0;d<f-1;d++){var m=a[d][0],x=a[d][1],T=a[d+1][0],O=a[d+1][1];if(Kh(m,x,T,O,i,t,s))return!0}if(l){var D=a[0],B=a[f-1];if(Kh(D[0],D[1],B[0],B[1],i,t,s))return!0}return!1}var KR=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr().points,x=!1;return l&&(x=Hx(m,d,t,s,!0)),!x&&f&&(x=G0(m,t,s)),x},i.prototype.createPath=function(t){var s=this.attr(),l=s.points;if(!(l.length<2)){t.beginPath();for(var f=0;f<l.length;f++){var d=l[f];f===0?t.moveTo(d[0],d[1]):t.lineTo(d[0],d[1])}t.closePath()}},i}(Zc),QR=KR,qE=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{startArrow:!1,endArrow:!1})},i.prototype.initAttrs=function(t){this.setArrow()},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},i.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},i.prototype.setArrow=function(){var t=this.attr(),s=this.attrs,l=s.points,f=s.startArrow,d=s.endArrow,m=l.length,x=l[0][0],T=l[0][1],O=l[m-1][0],D=l[m-1][1];f&&Im(this,t,l[1][0],l[1][1],x,T),d&&Om(this,t,l[m-2][0],l[m-2][1],O,D)},i.prototype.isFill=function(){return!1},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr().points;return Hx(m,d,t,s,!1)},i.prototype.isStroke=function(){return!0},i.prototype.createPath=function(t){var s=this.attr(),l=s.points,f=s.startArrow,d=s.endArrow,m=l.length;if(!(l.length<2)){var x=l[0][0],T=l[0][1],O=l[m-1][0],D=l[m-1][1];if(f&&f.d){var B=Lp(x,T,l[1][0],l[1][1],f.d);x+=B.dx,T+=B.dy}if(d&&d.d){var B=Lp(l[m-2][0],l[m-2][1],O,D,d.d);O-=B.dx,D-=B.dy}t.beginPath(),t.moveTo(x,T);for(var U=0;U<m-1;U++){var J=l[U];t.lineTo(J[0],J[1])}t.lineTo(O,D)}},i.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},i.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,b.UM)(s)?(this.set("totalLength",Dl.aH.length(t)),this.get("totalLength")):s},i.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,b.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Dl.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},i.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,b.S6)(t,function(x,T){t[T+1]&&(d=[],d[0]=l/s,m=Dl.x1.length(x[0],x[1],t[T+1][0],t[T+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},i.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},i.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},i}(Zc),JR=qE;function Vc(a,i,t,s,l,f,d){var m=l/2;return hd(a-m,i-m,t,l,f,d)||hd(a+t-m,i-m,l,s,f,d)||hd(a+m,i+s-m,t,l,f,d)||hd(a-m,i+m,l,s,f,d)}function Ct(a,i,t,s,l,f,d,m){var x=f/2;return Kh(a+l,i,a+t-l,i,f,d,m)||Kh(a+t,i+l,a+t,i+s-l,f,d,m)||Kh(a+t-l,i+s,a+l,i+s,f,d,m)||Kh(a,i+s-l,a,i+l,f,d,m)||Vv(a+t-l,i+l,l,1.5*Math.PI,2*Math.PI,f,d,m)||Vv(a+t-l,i+s-l,l,0,.5*Math.PI,f,d,m)||Vv(a+l,i+s-l,l,.5*Math.PI,Math.PI,f,d,m)||Vv(a+l,i+l,l,Math.PI,1.5*Math.PI,f,d,m)}var e3=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},i.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,T=m.y,O=m.width,D=m.height,B=m.radius;if(B){var J=!1;return l&&(J=Ct(x,T,O,D,B,d,t,s)),!J&&f&&(J=H0(this,t,s)),J}else{var U=d/2;if(f&&l)return hd(x-U,T-U,O+U,D+U,t,s);if(f)return hd(x,T,O,D,t,s);if(l)return Vc(x,T,O,D,d,t,s)}},i.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.radius;if(t.beginPath(),x===0)t.rect(l,f,d,m);else{var T=Dg(x),O=T[0],D=T[1],B=T[2],U=T[3];t.moveTo(l+O,f),t.lineTo(l+d-D,f),D!==0&&t.arc(l+d-D,f+D,D,-Math.PI/2,0),t.lineTo(l+d,f+m-B),B!==0&&t.arc(l+d-B,f+m-B,B,0,Math.PI/2),t.lineTo(l+U,f+m),U!==0&&t.arc(l+U,f+m-U,U,Math.PI/2,Math.PI),t.lineTo(l,f+O),O!==0&&t.arc(l+O,f+O,O,Math.PI,Math.PI*1.5),t.closePath()}},i}(Zc),t3=e3,r3=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},i.prototype.isOnlyHitBox=function(){return!0},i.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},i.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,rt.assembleFont)(t)},i.prototype._setText=function(t){var s=null;(0,b.HD)(t)&&t.indexOf(`
`)!==-1&&(s=t.split(`
`)),this.set("textArr",s)},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(s)},i.prototype._getSpaceingY=function(){var t=this.attrs,s=t.lineHeight,l=t.fontSize*1;return s?s-l:l*.14},i.prototype._drawTextArr=function(t,s,l){var f=this.attrs,d=f.textBaseline,m=f.x,x=f.y,T=f.fontSize*1,O=this._getSpaceingY(),D=(0,rt.getTextHeight)(f.text,f.fontSize,f.lineHeight),B;(0,b.S6)(s,function(U,J){B=x+J*(O+T)-D+T,d==="middle"&&(B+=D-T-(D-T)/2),d==="top"&&(B+=D-T),(0,b.UM)(U)||(l?t.fillText(U,m,B):t.strokeText(U,m,B))})},i.prototype._drawText=function(t,s){var l=this.attr(),f=l.x,d=l.y,m=this.get("textArr");if(m)this._drawTextArr(t,m,s);else{var x=l.text;(0,b.UM)(x)||(s?t.fillText(x,f,d):t.strokeText(x,f,d))}},i.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isStroke()&&l>0&&(!(0,b.UM)(d)&&d!==1&&(t.globalAlpha=f),this.stroke(t)),this.isFill()&&(!(0,b.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.afterDrawPath(t)},i.prototype.fill=function(t){this._drawText(t,!0)},i.prototype.stroke=function(t){this._drawText(t,!1)},i}(Zc),n3=r3;function $0(a,i){if(i){var t=(0,rt.invert)(i);return(0,rt.multiplyVec2)(t,a)}return a}function Wx(a,i,t){var s=a.getTotalMatrix();if(s){var l=$0([i,t,1],s),f=l[0],d=l[1];return[f,d]}return[i,t]}function Gx(a,i,t){if(a.isCanvas&&a.isCanvas())return!0;if(!(0,rt.isAllowCapture)(a)||a.cfg.isInView===!1)return!1;if(a.cfg.clipShape){var s=Wx(a,i,t),l=s[0],f=s[1];if(a.isClipped(l,f))return!1}var d=a.cfg.cacheCanvasBBox||a.getCanvasBBox();return i>=d.minX&&i<=d.maxX&&t>=d.minY&&t<=d.maxY}function $x(a,i,t){if(!Gx(a,i,t))return null;for(var s=null,l=a.getChildren(),f=l.length,d=f-1;d>=0;d--){var m=l[d];if(m.isGroup())s=$x(m,i,t);else if(Gx(m,i,t)){var x=m,T=Wx(m,i,t),O=T[0],D=T[1];x.isInShape(O,D)&&(s=m)}if(s)break}return s}var Xx=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},i.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},i.prototype.getShapeBase=function(){return Q},i.prototype.getGroupBase=function(){return Dm},i.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Am();return t>=1?Math.ceil(t):1},i.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},i.prototype.createDom=function(){var t=document.createElement("canvas"),s=t.getContext("2d");return this.set("context",s),t},i.prototype.setDOMSize=function(t,s){a.prototype.setDOMSize.call(this,t,s);var l=this.get("context"),f=this.get("el"),d=this.getPixelRatio();f.width=d*t,f.height=d*s,d>1&&l.scale(d,d)},i.prototype.clear=function(){a.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),s=this.get("el");t.clearRect(0,0,s.width,s.height)},i.prototype.getShape=function(t,s){var l;return this.get("quickHit")?l=$x(this,t,s):l=a.prototype.getShape.call(this,t,s,null),l},i.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),s=this.getViewRange(),l;if(t.length&&t[0]===this)l=s;else if(l=w_(t),l){l.minX=Math.floor(l.minX),l.minY=Math.floor(l.minY),l.maxX=Math.ceil(l.maxX),l.maxY=Math.ceil(l.maxY),l.maxY+=1;var f=this.get("clipView");f&&(l=C_(l,s))}return l},i.prototype.refreshElement=function(t){var s=this.get("refreshElements");s.push(t)},i.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,b.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},i.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},i.prototype._drawAll=function(){var t=this.get("context"),s=this.get("el"),l=this.getChildren();t.clearRect(0,0,s.width,s.height),Fp(t,this),md(t,l),this.set("refreshElements",[])},i.prototype._drawRegion=function(){var t=this.get("context"),s=this.get("refreshElements"),l=this.getChildren(),f=this._getRefreshRegion();f?(t.clearRect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.save(),t.beginPath(),t.rect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.clip(),Fp(t,this),ju(this,l,f),md(t,l,f),t.restore()):s.length&&km(s),(0,b.S6)(s,function(d){d.get("hasChanged")&&d.set("hasChanged",!1)}),this.set("refreshElements",[])},i.prototype._startDraw=function(){var t=this,s=this.get("drawFrame");s||(s=(0,b.U7)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",s))},i.prototype.skipDraw=function(){},i.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},i}(rt.AbstractCanvas),KE=Xx,i3="0.5.12",Yx={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Yo={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},QE=null;function Wf(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function X0(a){var i=Yx[a.type],t=a.getParent();if(!i)throw new Error("the type "+a.type+" is not supported by svg");var s=Wf(i);if(a.get("id")&&(s.id=a.get("id")),a.set("el",s),a.set("attrs",{}),t){var l=t.get("el");l||(l=t.createDom(),t.set("el",l)),l.appendChild(s)}return s}function Y0(a,i){var t=a.get("el"),s=(0,b.qo)(t.children).sort(i),l=document.createDocumentFragment();s.forEach(function(f){l.appendChild(f)}),t.appendChild(l)}function qx(a,i){var t=a.parentNode,s=Array.from(t.childNodes).filter(function(m){return m.nodeType===1&&m.nodeName.toLowerCase()!=="defs"}),l=s[i],f=s.indexOf(a);if(l){if(f>i)t.insertBefore(a,l);else if(f<i){var d=s[i+1];d?t.insertBefore(a,d):t.appendChild(a)}}else t.appendChild(a)}function Kx(a,i){var t=a.cfg.el,s=a.attr(),l={dx:s.shadowOffsetX,dy:s.shadowOffsetY,blur:s.shadowBlur,color:s.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)t.removeAttribute("filter");else{var f=i.find("filter",l);f||(f=i.addShadow(l)),t.setAttribute("filter","url(#"+f+")")}}function Hv(a){var i=a.attr().matrix;if(i){for(var t=a.cfg.el,s=[],l=0;l<9;l+=3)s.push(i[l]+","+i[l+1]);s=s.join(","),s.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+s+")"):console.warn("invalid matrix:",i)}}function iv(a,i){var t=a.getClip(),s=a.get("el");if(!t)s.removeAttribute("clip-path");else if(t&&!s.hasAttribute("clip-path")){X0(t),t.createPath(i);var l=i.addClip(t);s.setAttribute("clip-path","url(#"+l+")")}}function wf(a,i){i.forEach(function(t){t.draw(a)})}function O_(a,i){var t=a.get("canvas");if(t&&t.get("autoDraw")){var s=t.get("context"),l=a.getParent(),f=l?l.getChildren():[t],d=a.get("el");if(i==="remove"){var m=a.get("isClipShape");if(m){var x=d&&d.parentNode,T=x&&x.parentNode;x&&T&&T.removeChild(x)}else d&&d.parentNode&&d.parentNode.removeChild(d)}else if(i==="show")d.setAttribute("visibility","visible");else if(i==="hide")d.setAttribute("visibility","hidden");else if(i==="zIndex")qx(d,f.indexOf(a));else if(i==="sort"){var O=a.get("children");O&&O.length&&Y0(a,function(D,B){return O.indexOf(D)-O.indexOf(B)?1:0})}else i==="clear"?d&&(d.innerHTML=""):i==="matrix"?Hv(a):i==="clip"?iv(a,s):i==="attr"||i==="add"&&a.draw(s)}}var Qx=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.isEntityGroup=function(){return!0},i.prototype.createDom=function(){var t=Wf("g");this.set("el",t);var s=this.getParent();if(s){var l=s.get("el");l||(l=s.createDom(),s.set("el",l)),l.appendChild(t)}return t},i.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.createPath(l,t)}},i.prototype.onCanvasChange=function(t){O_(this,t)},i.prototype.getShapeBase=function(){return se},i.prototype.getGroupBase=function(){return i},i.prototype.draw=function(t){var s=this.getChildren(),l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||this.createDom(),iv(this,t),this.createPath(t),s.length&&wf(t,s))},i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){Yo[m]&&f.setAttribute(Yo[m],d)}),Hv(this)},i}(rt.AbstractGroup),bd=Qx,a3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},i.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.draw(l,t)}},i.prototype.getShapeBase=function(){return se},i.prototype.getGroupBase=function(){return bd},i.prototype.onCanvasChange=function(t){O_(this,t)},i.prototype.calculateBBox=function(){var t=this.get("el"),s=null;if(t)s=t.getBBox();else{var l=(0,rt.getBBoxMethod)(this.get("type"));l&&(s=l(this))}if(s){var f=s.x,d=s.y,m=s.width,x=s.height,T=this.getHitLineWidth(),O=T/2,D=f-O,B=d-O,U=f+m+O,J=d+x+O;return{x:D,y:B,minX:D,minY:B,maxX:U,maxY:J,width:m+T,height:x+T}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},i.prototype.isFill=function(){var t=this.attr(),s=t.fill,l=t.fillStyle;return(s||l||this.isClipShape())&&this.canFill},i.prototype.isStroke=function(){var t=this.attr(),s=t.stroke,l=t.strokeStyle;return(s||l)&&this.canStroke},i.prototype.draw=function(t,s){var l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||X0(this),iv(this,t),this.createPath(t,s),this.shadow(t,s),this.strokeAndFill(t,s),this.transform(s))},i.prototype.createPath=function(t,s){},i.prototype.strokeAndFill=function(t,s){var l=s||this.attr(),f=l.fill,d=l.fillStyle,m=l.stroke,x=l.strokeStyle,T=l.fillOpacity,O=l.strokeOpacity,D=l.lineWidth,B=this.get("el");this.canFill&&(s?"fill"in l?this._setColor(t,"fill",f):"fillStyle"in l&&this._setColor(t,"fill",d):this._setColor(t,"fill",f||d),T&&B.setAttribute(Yo.fillOpacity,T)),this.canStroke&&D>0&&(s?"stroke"in l?this._setColor(t,"stroke",m):"strokeStyle"in l&&this._setColor(t,"stroke",x):this._setColor(t,"stroke",m||x),O&&B.setAttribute(Yo.strokeOpacity,O),D&&B.setAttribute(Yo.lineWidth,D))},i.prototype._setColor=function(t,s,l){var f=this.get("el");if(!l){f.setAttribute(Yo[s],"none");return}if(l=l.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(l)){var d=t.find("gradient",l);d||(d=t.addGradient(l)),f.setAttribute(Yo[s],"url(#"+d+")")}else if(/^[p,P]{1}[\s]*\(/.test(l)){var d=t.find("pattern",l);d||(d=t.addPattern(l)),f.setAttribute(Yo[s],"url(#"+d+")")}else f.setAttribute(Yo[s],l)},i.prototype.shadow=function(t,s){var l=this.attr(),f=s||l,d=f.shadowOffsetX,m=f.shadowOffsetY,x=f.shadowBlur,T=f.shadowColor;(d||m||x||T)&&Kx(this,t)},i.prototype.transform=function(t){var s=this.attr(),l=(t||s).matrix;l&&Hv(this)},i.prototype.isInShape=function(t,s){return this.isPointInPath(t,s)},i.prototype.isPointInPath=function(t,s){var l=this.get("el"),f=this.get("canvas"),d=f.get("el").getBoundingClientRect(),m=t+d.left,x=s+d.top,T=document.elementFromPoint(m,x);return!!(T&&T.isEqualNode(l))},i.prototype.getHitLineWidth=function(){var t=this.attrs,s=t.lineWidth,l=t.lineAppendWidth;return this.isStroke()?s+l:0},i}(rt.AbstractShape),Qh=a3,o3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,r:0})},i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Yo[m]&&f.setAttribute(Yo[m],d)})},i}(Qh),JE=o3,e2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");if((0,b.S6)(s||l,function(T,O){Yo[O]&&f.setAttribute(Yo[O],T)}),typeof l.html=="function"){var d=l.html.call(this,l);if(d instanceof Element||d instanceof HTMLDocument){for(var m=f.childNodes,x=m.length-1;x>=0;x--)f.removeChild(m[x]);f.appendChild(d)}else f.innerHTML=d}else f.innerHTML=l.html},i}(Qh),q0=e2,s3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,rx:0,ry:0})},i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Yo[m]&&f.setAttribute(Yo[m],d)})},i}(Qh),u3=s3,l3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,width:0,height:0})},i.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,b.S6)(s||f,function(m,x){x==="img"?l._setImage(f.img):Yo[x]&&d.setAttribute(Yo[x],m)})},i.prototype.setAttr=function(t,s){this.attrs[t]=s,t==="img"&&this._setImage(s)},i.prototype._setImage=function(t){var s=this.attr(),l=this.get("el");if((0,b.HD)(t))l.setAttribute("href",t);else if(t instanceof window.Image)s.width||(l.setAttribute("width",t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",t.height),this.attr("height",t.height)),l.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,b.HD)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")l.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var f=document.createElement("canvas");f.setAttribute("width",""+t.width),f.setAttribute("height",""+t.height),f.getContext("2d").putImageData(t,0,0),s.width||(l.setAttribute("width",""+t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",""+t.height),this.attr("height",t.height)),l.setAttribute("href",f.toDataURL())}},i}(Qh),t2=l3,c3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){if(m==="startArrow"||m==="endArrow")if(d){var x=(0,b.Kn)(d)?t.addArrow(l,Yo[m]):t.getDefaultArrow(l,Yo[m]);f.setAttribute(Yo[m],"url(#"+x+")")}else f.removeAttribute(Yo[m]);else Yo[m]&&f.setAttribute(Yo[m],d)})},i.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Dl.x1.length(s,l,f,d)},i.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Dl.x1.pointAt(l,f,d,m,t)},i}(Qh),f3=c3,P_={circle:function(a,i,t){return[["M",a,i],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(a,i,t){return[["M",a-t,i-t],["L",a+t,i-t],["L",a+t,i+t],["L",a-t,i+t],["Z"]]},diamond:function(a,i,t){return[["M",a-t,i],["L",a,i-t],["L",a+t,i],["L",a,i+t],["Z"]]},triangle:function(a,i,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,i+s],["L",a,i-s],["L",a+t,i+s],["z"]]},triangleDown:function(a,i,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,i-s],["L",a+t,i-s],["L",a,i+s],["Z"]]}},Wv={get:function(a){return P_[a]},register:function(a,i){P_[a]=i},remove:function(a){delete P_[a]},getAll:function(){return P_}},Jx=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return i.prototype.createPath=function(t){var s=this.get("el");s.setAttribute("d",this._assembleMarker())},i.prototype._assembleMarker=function(){var t=this._getPath();return(0,b.kJ)(t)?t.map(function(s){return s.join(" ")}).join(""):t},i.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.r||t.radius,d=t.symbol||"circle",m;return(0,b.mf)(d)?m=d:m=Wv.get(d),m?m(s,l,f):(console.warn(m+" symbol is not exist."),null)},i.symbolsFactory=Wv,i}(Qh),k_=Jx,eb=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{startArrow:!1,endArrow:!1})},i.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,b.S6)(s||f,function(m,x){if(x==="path"&&(0,b.kJ)(m))d.setAttribute("d",l._formatPath(m));else if(x==="startArrow"||x==="endArrow")if(m){var T=(0,b.Kn)(m)?t.addArrow(f,Yo[x]):t.getDefaultArrow(f,Yo[x]);d.setAttribute(Yo[x],"url(#"+T+")")}else d.removeAttribute(Yo[x]);else Yo[x]&&d.setAttribute(Yo[x],m)})},i.prototype._formatPath=function(t){var s=t.map(function(l){return l.join(" ")}).join("");return~s.indexOf("NaN")?"":s},i.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},i.prototype.getPoint=function(t){var s=this.get("el"),l=this.getTotalLength();if(l===0)return null;var f=s?s.getPointAtLength(t*l):null;return f?{x:f.x,y:f.y}:null},i}(Qh),K0=eb,tb=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){m==="points"&&(0,b.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Yo[m]&&f.setAttribute(Yo[m],d)})},i}(Qh),rb=tb,Q0=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{startArrow:!1,endArrow:!1})},i.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),["points"].indexOf(t)!==-1&&this._resetCache()},i.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},i.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,b.S6)(s||l,function(d,m){m==="points"&&(0,b.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Yo[m]&&f.setAttribute(Yo[m],d)})},i.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,b.UM)(s)?(this.set("totalLength",Dl.aH.length(t)),this.get("totalLength")):s},i.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,b.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Dl.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},i.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,b.S6)(t,function(x,T){t[T+1]&&(d=[],d[0]=l/s,m=Dl.x1.length(x[0],x[1],t[T+1][0],t[T+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},i.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},i.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},i}(Qh),nb=Q0,J0=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,D_=/[^\s,]+/gi;function Sd(a){var i=0,t=0,s=0,l=0;return(0,b.kJ)(a)?a.length===1?i=t=s=l=a[0]:a.length===2?(i=s=a[0],t=l=a[1]):a.length===3?(i=a[0],t=l=a[1],s=a[2]):(i=a[0],t=a[1],s=a[2],l=a[3]):i=t=s=l=a,{r1:i,r2:t,r3:s,r4:l}}function r2(a){if(a=a||[],isArray(a))return a;if(isString(a))return a=a.match(J0),each(a,function(i,t){if(i=i.match(D_),i[0].length>1){var s=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=s}each(i,function(l,f){isNaN(l)||(i[f]=+l)}),a[t]=i}),a}var ib=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},i.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el"),m=!1,x=["x","y","width","height","radius"];(0,b.S6)(s||f,function(T,O){x.indexOf(O)!==-1&&!m?(d.setAttribute("d",l._assembleRect(f)),m=!0):x.indexOf(O)===-1&&Yo[O]&&d.setAttribute(Yo[O],T)})},i.prototype._assembleRect=function(t){var s=t.x,l=t.y,f=t.width,d=t.height,m=t.radius;if(!m)return"M "+s+","+l+" l "+f+",0 l 0,"+d+" l"+-f+" 0 z";var x=Sd(m);(0,b.kJ)(m)?m.length===1?x.r1=x.r2=x.r3=x.r4=m[0]:m.length===2?(x.r1=x.r3=m[0],x.r2=x.r4=m[1]):m.length===3?(x.r1=m[0],x.r2=x.r4=m[1],x.r3=m[2]):(x.r1=m[0],x.r2=m[1],x.r3=m[2],x.r4=m[3]):x.r1=x.r2=x.r3=x.r4=m;var T=[["M "+(s+x.r1)+","+l],["l "+(f-x.r1-x.r2)+",0"],["a "+x.r2+","+x.r2+",0,0,1,"+x.r2+","+x.r2],["l 0,"+(d-x.r2-x.r3)],["a "+x.r3+","+x.r3+",0,0,1,"+-x.r3+","+x.r3],["l "+(x.r3+x.r4-f)+",0"],["a "+x.r4+","+x.r4+",0,0,1,"+-x.r4+","+-x.r4],["l 0,"+(x.r4+x.r1-d)],["a "+x.r1+","+x.r1+",0,0,1,"+x.r1+","+-x.r1],["z"]];return T.join(" ")},i}(Qh),h3=ib,AB=k(43631),L_=.3,n2={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},MB={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},i2={left:"left",start:"left",center:"middle",right:"end",end:"end"},p3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return i.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,A.pi)((0,A.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},i.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");this._setFont(),(0,b.S6)(s||f,function(m,x){x==="text"?l._setText(""+m):x==="matrix"&&m?Hv(l):Yo[x]&&d.setAttribute(Yo[x],m)}),d.setAttribute("paint-order","stroke"),d.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},i.prototype._setFont=function(){var t=this.get("el"),s=this.attr(),l=s.textBaseline,f=s.textAlign,d=(0,AB.qY)();d&&d.name==="firefox"?t.setAttribute("dominant-baseline",MB[l]||"alphabetic"):t.setAttribute("alignment-baseline",n2[l]||"baseline"),t.setAttribute("text-anchor",i2[f]||"left")},i.prototype._setText=function(t){var s=this.get("el"),l=this.attr(),f=l.x,d=l.textBaseline,m=d===void 0?"bottom":d;if(!t)s.innerHTML="";else if(~t.indexOf(`
`)){var x=t.split(`
`),T=x.length-1,O="";(0,b.S6)(x,function(D,B){B===0?m==="alphabetic"?O+='<tspan x="'+f+'" dy="'+-T+'em">'+D+"</tspan>":m==="top"?O+='<tspan x="'+f+'" dy="0.9em">'+D+"</tspan>":m==="middle"?O+='<tspan x="'+f+'" dy="'+-(T-1)/2+'em">'+D+"</tspan>":m==="bottom"?O+='<tspan x="'+f+'" dy="-'+(T+L_)+'em">'+D+"</tspan>":m==="hanging"&&(O+='<tspan x="'+f+'" dy="'+(-(T-1)-L_)+'em">'+D+"</tspan>"):O+='<tspan x="'+f+'" dy="1em">'+D+"</tspan>"}),s.innerHTML=O}else s.innerHTML=t},i}(Qh),v3=p3,g3=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,m3=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y3=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function ab(a){var i=a.match(y3);if(!i)return"";var t="";return i.sort(function(s,l){return s=s.split(":"),l=l.split(":"),Number(s[0])-Number(l[0])}),(0,b.S6)(i,function(s){s=s.split(":"),t+='<stop offset="'+s[0]+'" stop-color="'+s[1]+'"></stop>'}),t}function a2(a,i){var t=g3.exec(a),s=(0,b.wQ)((0,b.c$)(parseFloat(t[1])),Math.PI*2),l=t[2],f,d;s>=0&&s<.5*Math.PI?(f={x:0,y:0},d={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(f={x:1,y:0},d={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(f={x:1,y:1},d={x:0,y:0}):(f={x:0,y:1},d={x:1,y:0});var m=Math.tan(s),x=m*m,T=(d.x-f.x+m*(d.y-f.y))/(x+1)+f.x,O=m*(d.x-f.x+m*(d.y-f.y))/(x+1)+f.y;i.setAttribute("x1",f.x),i.setAttribute("y1",f.y),i.setAttribute("x2",T),i.setAttribute("y2",O),i.innerHTML=ab(l)}function o2(a,i){var t=m3.exec(a),s=parseFloat(t[1]),l=parseFloat(t[2]),f=parseFloat(t[3]),d=t[4];i.setAttribute("cx",s),i.setAttribute("cy",l),i.setAttribute("r",f),i.innerHTML=ab(d)}var s2=function(){function a(i){this.cfg={};var t=null,s=(0,b.EL)("gradient_");return i.toLowerCase()[0]==="l"?(t=Wf("linearGradient"),a2(i,t)):(t=Wf("radialGradient"),o2(i,t)),t.setAttribute("id",s),this.el=t,this.id=s,this.cfg=i,this}return a.prototype.match=function(i,t){return this.cfg===t},a}(),u2=s2,l2={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},c2={x:"-40%",y:"-40%",width:"200%",height:"200%"},f2=function(){function a(i){this.type="filter",this.cfg={},this.type="filter";var t=Wf("filter");return(0,b.S6)(c2,function(s,l){t.setAttribute(l,s)}),this.el=t,this.id=(0,b.EL)("filter_"),this.el.id=this.id,this.cfg=i,this._parseShadow(i,t),this}return a.prototype.match=function(i,t){if(this.type!==i)return!1;var s=!0,l=this.cfg;return(0,b.S6)(Object.keys(l),function(f){if(l[f]!==t[f])return s=!1,!1}),s},a.prototype.update=function(i,t){var s=this.cfg;return s[l2[i]]=t,this._parseShadow(s,this.el),this},a.prototype._parseShadow=function(i,t){var s=`<feDropShadow
      dx="`+(i.dx||0)+`"
      dy="`+(i.dy||0)+`"
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;t.innerHTML=s},a}(),h2=f2,p2=function(){function a(i,t){this.cfg={};var s=Wf("marker"),l=(0,b.EL)("marker_");s.setAttribute("id",l);var f=Wf("path");f.setAttribute("stroke",i.stroke||"none"),f.setAttribute("fill",i.fill||"none"),s.appendChild(f),s.setAttribute("overflow","visible"),s.setAttribute("orient","auto-start-reverse"),this.el=s,this.child=f,this.id=l;var d=i[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=i.stroke||"#000",d===!0?this._setDefaultPath(t,f):(this.cfg=d,this._setMarker(i.lineWidth,f)),this}return a.prototype.match=function(){return!1},a.prototype._setDefaultPath=function(i,t){var s=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),s.setAttribute("refX",""+10*Math.cos(Math.PI/6)),s.setAttribute("refY","5")},a.prototype._setMarker=function(i,t){var s=this.el,l=this.cfg.path,f=this.cfg.d;(0,b.kJ)(l)&&(l=l.map(function(d){return d.join(" ")}).join("")),t.setAttribute("d",l),s.appendChild(t),f&&s.setAttribute("refX",""+f/i)},a.prototype.update=function(i){var t=this.child;t.attr?t.attr("fill",i):t.setAttribute("fill",i)},a}(),ob=p2,d2=function(){function a(i){this.type="clip",this.cfg={};var t=Wf("clipPath");this.el=t,this.id=(0,b.EL)("clip_"),t.id=this.id;var s=i.cfg.el;return t.appendChild(s),this.cfg=i,this}return a.prototype.match=function(){return!1},a.prototype.remove=function(){var i=this.el;i.parentNode.removeChild(i)},a}(),v2=d2,g2=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,m2=function(){function a(i){this.cfg={};var t=Wf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var s=Wf("image");t.appendChild(s);var l=(0,b.EL)("pattern_");t.id=l,this.el=t,this.id=l,this.cfg=i;var f=g2.exec(i),d=f[2];s.setAttribute("href",d);var m=new Image;d.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=d;function x(){t.setAttribute("width",""+m.width),t.setAttribute("height",""+m.height)}return m.complete?x():(m.onload=x,m.src=m.src),this}return a.prototype.match=function(i,t){return this.cfg===t},a}(),y2=m2,_2=function(){function a(i){var t=Wf("defs"),s=(0,b.EL)("defs_");t.id=s,i.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=i}return a.prototype.find=function(i,t){for(var s=this.children,l=null,f=0;f<s.length;f++)if(s[f].match(i,t)){l=s[f].id;break}return l},a.prototype.findById=function(i){for(var t=this.children,s=null,l=0;l<t.length;l++)if(t[l].id===i){s=t[l];break}return s},a.prototype.add=function(i){this.children.push(i),i.canvas=this.canvas,i.parent=this},a.prototype.getDefaultArrow=function(i,t){var s=i.stroke||i.strokeStyle;if(this.defaultArrow[s])return this.defaultArrow[s].id;var l=new ob(i,t);return this.defaultArrow[s]=l,this.el.appendChild(l.el),this.add(l),l.id},a.prototype.addGradient=function(i){var t=new u2(i);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addArrow=function(i,t){var s=new ob(i,t);return this.el.appendChild(s.el),this.add(s),s.id},a.prototype.addShadow=function(i){var t=new h2(i);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addPattern=function(i){var t=new y2(i);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addClip=function(i){var t=new v2(i);return this.el.appendChild(t.el),this.add(t),t.id},a}(),x2=_2,wc=function(a){(0,A.ZT)(i,a);function i(t){return a.call(this,(0,A.pi)((0,A.pi)({},t),{autoDraw:!0,renderer:"svg"}))||this}return i.prototype.getShapeBase=function(){return se},i.prototype.getGroupBase=function(){return bd},i.prototype.getShape=function(t,s,l){var f=l.target||l.srcElement;if(!Yx[f.tagName]){for(var d=f.parentNode;d&&!Yx[d.tagName];)d=d.parentNode;f=d}return this.find(function(m){return m.get("el")===f})},i.prototype.createDom=function(){var t=Wf("svg"),s=new x2(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",s),t},i.prototype.onCanvasChange=function(t){var s=this.get("context"),l=this.get("el");if(t==="sort"){var f=this.get("children");f&&f.length&&Y0(this,function(m,x){return f.indexOf(m)-f.indexOf(x)?1:0})}else if(t==="clear"){if(l){l.innerHTML="";var d=s.el;d.innerHTML="",l.appendChild(d)}}else t==="matrix"?Hv(this):t==="clip"?iv(this,s):t==="changeSize"&&(l.setAttribute("width",""+this.get("width")),l.setAttribute("height",""+this.get("height")))},i.prototype.draw=function(){var t=this.get("context"),s=this.getChildren();iv(this,t),s.length&&wf(t,s)},i}(rt.AbstractCanvas),b2=wc,S2="0.5.6",E2=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.type="path",s.shapeType="line";var l=t.connectNulls,f=l===void 0?!1:l,d=t.showSinglePoint,m=d===void 0?!0:d;return s.connectNulls=f,s.showSinglePoint=m,s}return i.prototype.updateElements=function(t,s){var l,f,d,m,x,T;s===void 0&&(s=!1);for(var O=new Map,D=new Map,B=[],U=0,J=0;J<t.length;J++){var pe=t[J],Ee=this.getElementId(pe);B.push(Ee),O.set(Ee,pe),D.set(Ee,U),U++}this.elements=new Array(U);var Ce=Ds(this.lastElementsMap,B),st=Ce.added,gt=Ce.updated,bt=Ce.removed;try{for(var Ft=(0,A.XA)(st),xr=Ft.next();!xr.done;xr=Ft.next()){var Ee=xr.value,pe=O.get(Ee),Fr=this.getShapeFactory(),$r=this.getShapeInfo(pe),J=D.get(Ee),yn=new Ei({shapeFactory:Fr,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:J});yn.geometry=this,yn.animate=this.animateOption,yn.draw($r,s),this.elementsMap[Ee]=yn,this.elements[J]=yn}}catch(Qa){l={error:Qa}}finally{try{xr&&!xr.done&&(f=Ft.return)&&f.call(Ft)}finally{if(l)throw l.error}}try{for(var cn=(0,A.XA)(gt),Bn=cn.next();!Bn.done;Bn=cn.next()){var Ee=Bn.value,pe=O.get(Ee),yn=this.lastElementsMap[Ee],J=D.get(Ee),$r=this.getShapeInfo(pe),hi=yn.getModel();(this.isCoordinateChanged||qs(hi,$r))&&(yn.animate=this.animateOption,yn.update($r)),this.elementsMap[Ee]=yn,this.elements[J]=yn}}catch(Qa){d={error:Qa}}finally{try{Bn&&!Bn.done&&(m=cn.return)&&m.call(cn)}finally{if(d)throw d.error}}try{for(var Hi=(0,A.XA)(bt),aa=Hi.next();!aa.done;aa=Hi.next()){var Ee=aa.value,yn=this.lastElementsMap[Ee];yn.animate=this.animateOption,yn.destroy()}}catch(Qa){x={error:Qa}}finally{try{aa&&!aa.done&&(T=Hi.return)&&T.call(Hi)}finally{if(x)throw x.error}}},i.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push({x:m.x,y:m.y}),l.push(m[Re])}return{points:s,data:l}},i.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=this.getPointsAndData(t),f=l.points,d=l.data;return s.mappingData=t,s.data=d,s.isStack=!!this.getAdjust("stack"),s.points=f,s.connectNulls=this.connectNulls,s.showSinglePoint=this.showSinglePoint,s},i}(Ls),F_=E2;function w2(a,i,t,s,l){var f=[];if(a.length){for(var d=[],m=[],x=0,T=a.length;x<T;x++){var O=a[x];d.push(O[1]),m.push(O[0])}m=m.reverse(),(0,b.S6)([d,m],function(D,B){var U=[],J=s.parsePoints(D),pe=J[0];d.length===1&&m.length===1?U=B===0?[["M",pe.x-.5,pe.y],["L",pe.x+.5,pe.y]]:[["L",pe.x+.5,pe.y],["L",pe.x-.5,pe.y]]:(i&&J.push({x:pe.x,y:pe.y}),t?U=ta(J,!1,l):U=Dn(J,!1),B>0&&(U[0][0]="L")),f=f.concat(U)}),f.push(["Z"])}return f}function ey(a,i,t,s,l){for(var f=bu(a,i,!i,"lineWidth"),d=a.connectNulls,m=a.isInCircle,x=a.points,T=a.showSinglePoint,O=cd(x,d,T),D=[],B=0,U=O.length;B<U;B++){var J=O[B];D=D.concat(w2(J,m,t,s,l))}return f.path=D,f}function sb(a){var i=a.start,t=a.end;return[[i.x,t.y],[t.x,i.y]]}var _3=no("area",{defaultShapeType:"area",getDefaultPoints:function(a){var i=a.x,t=a.y0,s=(0,b.kJ)(a.y)?a.y:[t,a.y];return s.map(function(l){return{x:i,y:l}})}});xi("area","area",{draw:function(a,i){var t=ey(a,!1,!1,this),s=i.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:i,fillOpacity:1}}}});var x3=null,C2=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.type="area",s.shapeType="area",s.generatePoints=!0,s.startOnZero=!0;var l=t.startOnZero,f=l===void 0?!0:l,d=t.sortable,m=d===void 0?!1:d,x=t.showSinglePoint,T=x===void 0?!1:x;return s.startOnZero=f,s.sortable=m,s.showSinglePoint=T,s}return i.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push(m.points),l.push(m[Re])}return{points:s,data:l}},i.prototype.getYMinValue=function(){if(this.startOnZero)return a.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},i}(F_),T2=C2,b3=no("edge",{defaultShapeType:"line",getDefaultPoints:function(a){return Fv(a)}});xi("edge","line",{draw:function(a,i){var t=bu(a,!0,!1,"lineWidth"),s=Dn(this.parsePoints(a.points),this.coordinate.isPolar);return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});var S3=null,A2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return i}(Ls),M2=A2,R2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return i.prototype.updateElements=function(t,s){s===void 0&&(s=!1);for(var l=0;l<t.length;l++){var f=t[l],d=this.prepareRange(f),m=this.prepareSize(),x=(0,b.U2)(this.styleOption,["cfg","shadowBlur"]);(0,b.hj)(x)||(x=m/2),this.prepareGreyScaleBlurredCircle(m,x),this.drawWithRange(f,d,m,x)}},i.prototype.color=function(t,s){return this.createAttrOption("color",t,typeof s!="function"?s:""),this},i.prototype.clear=function(){a.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},i.prototype.prepareRange=function(t){var s=this.getAttribute("color"),l=s.getFields()[0],f=1/0,d=-1/0;return t.forEach(function(m){var x=m[Re][l];x>d&&(d=x),x<f&&(f=x)}),f===d&&(f=d-1),[f,d]},i.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,b.hj)(t)||(t=this.getDefaultSize()),t},i.prototype.prepareGreyScaleBlurredCircle=function(t,s){var l=this.getGrayScaleBlurredCanvas(),f=t+s,d=l.getContext("2d");l.width=l.height=f*2,d.clearRect(0,0,l.width,l.height),d.shadowOffsetX=d.shadowOffsetY=f*2,d.shadowBlur=s,d.shadowColor="black",d.beginPath(),d.arc(-f,-f,t,0,Math.PI*2,!0),d.closePath(),d.fill()},i.prototype.drawWithRange=function(t,s,l,f){var d,m,x=this.coordinate,T=x.start,O=x.end,D=this.coordinate.getWidth(),B=this.coordinate.getHeight(),U=this.getAttribute("color"),J=U.getFields()[0];this.clearShadowCanvasCtx();var pe=this.getShadowCanvasCtx();s&&(t=t.filter(function(cn){return cn[Re][J]<=s[1]&&cn[Re][J]>=s[0]}));var Ee=this.scales[J];try{for(var Ce=(0,A.XA)(t),st=Ce.next();!st.done;st=Ce.next()){var gt=st.value,bt=this.getDrawCfg(gt),Ft=bt.x,xr=bt.y,Fr=Ee.scale(gt[Re][J]);this.drawGrayScaleBlurredCircle(Ft-T.x,xr-O.y,l+f,Fr,pe)}}catch(cn){d={error:cn}}finally{try{st&&!st.done&&(m=Ce.return)&&m.call(Ce)}finally{if(d)throw d.error}}var $r=pe.getImageData(0,0,D,B);this.clearShadowCanvasCtx(),this.colorize($r),pe.putImageData($r,0,0);var yn=this.getImageShape();yn.attr("x",T.x),yn.attr("y",O.y),yn.attr("width",D),yn.attr("height",B),yn.attr("img",pe.canvas),yn.set("origin",this.getShapeInfo(t))},i.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),s=this.coordinate;return Math.min(s.getWidth()/(t.scales[0].ticks.length*4),s.getHeight()/(t.scales[1].ticks.length*4))},i.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},i.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},i.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},i.prototype.drawGrayScaleBlurredCircle=function(t,s,l,f,d){var m=this.getGrayScaleBlurredCanvas();d.globalAlpha=f,d.drawImage(m,t-l,s-l)},i.prototype.colorize=function(t){for(var s=this.getAttribute("color"),l=t.data,f=this.paletteCache,d=3;d<l.length;d+=4){var m=l[d];if((0,b.hj)(m)){var x=f[m]?f[m]:Sa.rgb2arr(s.gradient(m/256));l[d-3]=x[0],l[d-2]=x[1],l[d-1]=x[2],l[d]=m}}},i.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var s=this.container;return t=s.addShape({type:"image",attrs:{}}),this.imageShape=t,t},i.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=t.map(function(f){return f[Re]});return(0,A.pi)((0,A.pi)({},s),{mappingData:t,data:l})},i}(Ls),E3=R2;function ub(a){var i,t,s=a.x,l=a.y,f=a.y0,d=a.size,m,x;(0,b.kJ)(l)?(i=(0,A.CR)(l,2),m=i[0],x=i[1]):(m=f,x=l);var T,O;(0,b.kJ)(s)?(t=(0,A.CR)(s,2),T=t[0],O=t[1]):(T=s-d/2,O=s+d/2);var D=[{x:T,y:m},{x:T,y:x}];return D.push({x:O,y:x},{x:O,y:m}),D}function lb(a,i){i===void 0&&(i=!0);var t=[],s=a[0];t.push(["M",s.x,s.y]);for(var l=1,f=a.length;l<f;l++)t.push(["L",a[l].x,a[l].y]);return i&&(t.push(["L",s.x,s.y]),t.push(["z"])),t}function I2(a,i){var t=0,s=0,l=0,f=0;return(0,b.kJ)(a)?a.length===1?t=s=l=f=a[0]:a.length===2?(t=l=a[0],s=f=a[1]):a.length===3?(t=a[0],s=f=a[1],l=a[2]):(t=a[0],s=a[1],l=a[2],f=a[3]):t=s=l=f=a,t+s>i&&(t=t?i/(1+s/t):0,s=i-t),l+f>i&&(l=l?i/(1+f/l):0,f=i-l),[t||0,s||0,l||0,f||0]}function cb(a,i,t){var s=[];if(t.isRect){var l=t.isTransposed?{x:t.start.x,y:i[0].y}:{x:i[0].x,y:t.start.y},f=t.isTransposed?{x:t.end.x,y:i[2].y}:{x:i[3].x,y:t.end.y},d=(0,b.U2)(a,["background","style","radius"]);if(d){var m=t.isTransposed?Math.abs(i[0].y-i[2].y):i[2].x-i[1].x,x=t.isTransposed?t.getWidth():t.getHeight(),T=(0,A.CR)(I2(d,Math.min(m,x)),4),O=T[0],D=T[1],B=T[2],U=T[3],J=t.isTransposed&&t.isReflect("y"),pe=J?0:1,Ee=function(xr){return J?-xr:xr};s.push(["M",l.x,f.y+Ee(O)]),O!==0&&s.push(["A",O,O,0,0,pe,l.x+O,f.y]),s.push(["L",f.x-D,f.y]),D!==0&&s.push(["A",D,D,0,0,pe,f.x,f.y+Ee(D)]),s.push(["L",f.x,l.y-Ee(B)]),B!==0&&s.push(["A",B,B,0,0,pe,f.x-B,l.y]),s.push(["L",l.x+U,l.y]),U!==0&&s.push(["A",U,U,0,0,pe,l.x,l.y-Ee(U)])}else s.push(["M",l.x,l.y]),s.push(["L",f.x,l.y]),s.push(["L",f.x,f.y]),s.push(["L",l.x,f.y]),s.push(["L",l.x,l.y]);s.push(["z"])}if(t.isPolar){var Ce=t.getCenter(),st=od(a,t),gt=st.startAngle,bt=st.endAngle;if(t.type!=="theta"&&!t.isTransposed)s=Zf(Ce.x,Ce.y,t.getRadius(),gt,bt);else{var Ft=function($r){return Math.pow($r,2)},O=Math.sqrt(Ft(Ce.x-i[0].x)+Ft(Ce.y-i[0].y)),D=Math.sqrt(Ft(Ce.x-i[2].x)+Ft(Ce.y-i[2].y));s=Zf(Ce.x,Ce.y,O,t.startAngle,t.endAngle,D)}}return s}function O2(a,i,t){var s=t.getWidth(),l=t.getHeight(),f=t.type==="rect",d=[],m=(a[2].x-a[1].x)/2,x=t.isTransposed?m*l/s:m*s/l;return i==="round"?(f?(d.push(["M",a[0].x,a[0].y+x]),d.push(["L",a[1].x,a[1].y-x]),d.push(["A",m,m,0,0,1,a[2].x,a[2].y-x]),d.push(["L",a[3].x,a[3].y+x]),d.push(["A",m,m,0,0,1,a[0].x,a[0].y+x])):(d.push(["M",a[0].x,a[0].y]),d.push(["L",a[1].x,a[1].y]),d.push(["A",m,m,0,0,1,a[2].x,a[2].y]),d.push(["L",a[3].x,a[3].y]),d.push(["A",m,m,0,0,1,a[0].x,a[0].y])),d.push(["z"])):d=lb(a),d}function B_(a,i,t){var s=[];return(0,b.UM)(i)?t?s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",(a[2].x+a[3].x)/2,(a[2].y+a[3].y)/2],["Z"]):s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",a[2].x,a[2].y],["L",a[3].x,a[3].y],["Z"]):s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",i[1].x,i[1].y],["L",i[0].x,i[0].y],["Z"]),s}function Fm(a,i){return[i,a]}function P2(a,i,t){var s,l,f,d,m,x,T,O=(0,A.CR)((0,A.ev)([],(0,A.CR)(a),!1),4),D=O[0],B=O[1],U=O[2],J=O[3],pe=(0,A.CR)(typeof t=="number"?Array(4).fill(t):t,4),Ee=pe[0],Ce=pe[1],st=pe[2],gt=pe[3];i.isTransposed&&(s=(0,A.CR)(Fm(B,J),2),B=s[0],J=s[1]),i.isReflect("y")&&(l=(0,A.CR)(Fm(D,B),2),D=l[0],B=l[1],f=(0,A.CR)(Fm(U,J),2),U=f[0],J=f[1]),i.isReflect("x")&&(d=(0,A.CR)(Fm(D,J),2),D=d[0],J=d[1],m=(0,A.CR)(Fm(B,U),2),B=m[0],U=m[1]);var bt=[],Ft=function(xr){return Math.abs(xr)};return x=(0,A.CR)(I2([Ee,Ce,st,gt],Math.min(Ft(J.x-D.x),Ft(B.y-D.y))).map(function(xr){return Ft(xr)}),4),Ee=x[0],Ce=x[1],st=x[2],gt=x[3],i.isTransposed&&(T=(0,A.CR)([gt,Ee,Ce,st],4),Ee=T[0],Ce=T[1],st=T[2],gt=T[3]),D.y<B.y?(bt.push(["M",J.x,J.y+st]),st!==0&&bt.push(["A",st,st,0,0,0,J.x-st,J.y]),bt.push(["L",D.x+gt,D.y]),gt!==0&&bt.push(["A",gt,gt,0,0,0,D.x,D.y+gt]),bt.push(["L",B.x,B.y-Ee]),Ee!==0&&bt.push(["A",Ee,Ee,0,0,0,B.x+Ee,B.y]),bt.push(["L",U.x-Ce,U.y]),Ce!==0&&bt.push(["A",Ce,Ce,0,0,0,U.x,U.y-Ce]),bt.push(["L",J.x,J.y+st]),bt.push(["z"])):J.x<D.x?(bt.push(["M",U.x+Ce,U.y]),Ce!==0&&bt.push(["A",Ce,Ce,0,0,0,U.x,U.y+Ce]),bt.push(["L",J.x,J.y-st]),st!==0&&bt.push(["A",st,st,0,0,0,J.x+st,J.y]),bt.push(["L",D.x-gt,D.y]),gt!==0&&bt.push(["A",gt,gt,0,0,0,D.x,D.y-gt]),bt.push(["L",B.x,B.y+Ee]),Ee!==0&&bt.push(["A",Ee,Ee,0,0,0,B.x-Ee,B.y]),bt.push(["L",U.x+Ce,U.y]),bt.push(["z"])):(bt.push(["M",B.x,B.y+Ee]),Ee!==0&&bt.push(["A",Ee,Ee,0,0,1,B.x+Ee,B.y]),bt.push(["L",U.x-Ce,U.y]),Ce!==0&&bt.push(["A",Ce,Ce,0,0,1,U.x,U.y+Ce]),bt.push(["L",J.x,J.y-st]),st!==0&&bt.push(["A",st,st,0,0,1,J.x-st,J.y]),bt.push(["L",D.x+gt,D.y]),gt!==0&&bt.push(["A",gt,gt,0,0,1,D.x,D.y-gt]),bt.push(["L",B.x,B.y+Ee]),bt.push(["z"])),bt}var w3=no("interval",{defaultShapeType:"rect",getDefaultPoints:function(a){return ub(a)}});xi("interval","rect",{draw:function(a,i){var t=bu(a,!1,!0),s=i,l=a==null?void 0:a.background;if(l){s=i.addGroup({name:"interval-group"});var f=Dp(a),d=cb(a,this.parsePoints(a.points),this.coordinate);s.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Ln})}var m;t.radius&&this.coordinate.isRect?m=P2(this.parsePoints(a.points),this.coordinate,t.radius):m=this.parsePath(O2(a.points,t.lineCap,this.coordinate));var x=s.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(a){var i=a.color,t=a.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:i}}:{symbol:"square",style:{r:4,fill:i}}}});var RB=null;function k2(a,i){var t=a.length,s=a;(0,b.HD)(s[0])&&(s=a.map(function(m){return i.translate(m)}));for(var l=s[1]-s[0],f=2;f<t;f++){var d=s[f]-s[f-1];l>d&&(l=d)}return l}function C3(a,i){if(i){var t=(0,b.xH)(a),s=(0,b.I)(t,i);return s.length}return a.length}function N_(a){var i=a.theme,t=a.coordinate,s=a.getXScale(),l=s.values,f=a.beforeMappingData,d=l.length,m=El(a.coordinate),x=a.intervalPadding,T=a.dodgePadding,O=a.maxColumnWidth||i.maxColumnWidth,D=a.minColumnWidth||i.minColumnWidth,B=a.columnWidthRatio||i.columnWidthRatio,U=a.multiplePieWidthRatio||i.multiplePieWidthRatio,J=a.roseWidthRatio||i.roseWidthRatio;if(s.isLinear&&l.length>1){l.sort();var pe=k2(l,s);d=(s.max-s.min)/pe,l.length>d&&(d=l.length)}var Ee=s.range,Ce=1/d,st=1;if(t.isPolar?t.isTransposed&&d>1?st=U:st=J:(s.isLinear&&(Ce*=Ee[1]-Ee[0]),st=B),!(0,b.UM)(x)&&x>=0){var gt=x/m;Ce=(1-(d-1)*gt)/d}else Ce*=st;if(a.getAdjust("dodge")){var bt=a.getAdjust("dodge"),Ft=bt.dodgeBy,xr=C3(f,Ft);if(!(0,b.UM)(T)&&T>=0){var Fr=T/m;Ce=(Ce-Fr*(xr-1))/xr}else!(0,b.UM)(x)&&x>=0&&(Ce*=st),Ce=Ce/xr;Ce=Ce>=0?Ce:0}if(!(0,b.UM)(O)&&O>=0){var $r=O/m;Ce>$r&&(Ce=$r)}if(!(0,b.UM)(D)&&D>=0){var yn=D/m;Ce<yn&&(Ce=yn)}return Ce}var D2=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.type="interval",s.shapeType="interval",s.generatePoints=!0;var l=t.background;return s.background=l,s}return i.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=El(d);l=l/m}else this.defaultSize||(this.defaultSize=N_(this)),l=this.defaultSize;return s.size=l,s},i.prototype.adjustScale=function(){a.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Ip(t)});else{var s=this.scaleDefs,l=t.field,f=t.min,d=t.max,m=t.type;m!=="time"&&(f>0&&!(0,b.U2)(s,[l,"min"])&&t.change({min:0}),d<=0&&!(0,b.U2)(s,[l,"max"])&&t.change({max:0}))}},i.prototype.getDrawCfg=function(t){var s=a.prototype.getDrawCfg.call(this,t);return s.background=this.background,s},i}(Ls),T3=D2,A3=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;s.type="line";var l=t.sortable,f=l===void 0?!1:l;return s.sortable=f,s}return i}(F_),M3=A3,L2=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],R3=["cross","tick","plus","hyphen","line"];function z_(a,i,t,s,l){var f,d,m=bu(i,l,!l,"r"),x=a.parsePoints(i.points),T=x[0];if(i.isStack)T=x[1];else if(x.length>1){var O=t.addGroup();try{for(var D=(0,A.XA)(x),B=D.next();!B.done;B=D.next()){var U=B.value;O.addShape({type:"marker",attrs:(0,A.pi)((0,A.pi)((0,A.pi)({},m),{symbol:Tl[s]||s}),U)})}}catch(J){f={error:J}}finally{try{B&&!B.done&&(d=D.return)&&d.call(D)}finally{if(f)throw f.error}}return O}return t.addShape({type:"marker",attrs:(0,A.pi)((0,A.pi)((0,A.pi)({},m),{symbol:Tl[s]||s}),T)})}var IB=no("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(a){return Fv(a)}});(0,b.S6)(L2,function(a){xi("point","hollow-".concat(a),{draw:function(i,t){return z_(this,i,t,a,!0)},getMarker:function(i){var t=i.color;return{symbol:Tl[a]||a,style:{r:4.5,stroke:t,fill:null}}}})});var OB=null,F2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return i.prototype.getDrawCfg=function(t){var s=a.prototype.getDrawCfg.call(this,t);return(0,A.pi)((0,A.pi)({},s),{isStack:!!this.getAdjust("stack")})},i}(Ls),B2=F2;function I3(a){for(var i=a[0],t=1,s=[["M",i.x,i.y]];t<a.length;){var l=a[t];(l.x!==a[t-1].x||l.y!==a[t-1].y)&&(s.push(["L",l.x,l.y]),l.x===i.x&&l.y===i.y&&t<a.length-1&&(i=a[t+1],s.push(["Z"]),s.push(["M",i.x,i.y]),t++)),t++}return(0,b.Xy)((0,b.Z$)(s),i)||s.push(["L",i.x,i.y]),s.push(["Z"]),s}var PB=no("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(a){var i=[];return(0,b.S6)(a.x,function(t,s){var l=a.y[s];i.push({x:t,y:l})}),i}});xi("polygon","polygon",{draw:function(a,i){if(!(0,b.xb)(a.points)){var t=bu(a,!0,!0),s=this.parsePath(I3(a.points));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s}),name:"polygon"})}},getMarker:function(a){var i=a.color;return{symbol:"square",style:{r:4,fill:i}}}});var E8=null,O3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l=s.x,f=s.y,d;if(!((0,b.kJ)(l)&&(0,b.kJ)(f))){var m=this.getXScale(),x=this.getYScale(),T=m.values.length,O=x.values.length,D=.5*1/T,B=.5*1/O;m.isCategory&&x.isCategory?(l=[l-D,l-D,l+D,l+D],f=[f-B,f+B,f+B,f-B]):(0,b.kJ)(l)?(d=l,l=[d[0],d[0],d[1],d[1]],f=[f-B/2,f+B/2,f+B/2,f-B/2]):(0,b.kJ)(f)&&(d=f,f=[d[0],d[1],d[1],d[0]],l=[l-D/2,l-D/2,l+D/2,l+D/2]),s.x=l,s.y=f}return s},i}(Ls),P3=O3,Cf=no("schema",{defaultShapeType:""}),ty=null,N2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=El(d);l=l/m}else this.defaultSize||(this.defaultSize=N_(this)),l=this.defaultSize;return s.size=l,s},i}(Ls),z2=N2;function U_(a){if(!(0,b.kJ)(a))return[];var i=(0,b.Fp)(a);return(0,b.UI)(a,function(t){return t/i})}var k3=no("violin",{defaultShapeType:"violin",getDefaultPoints:function(a){var i=a.size/2,t=[],s=U_(a._size);return(0,b.S6)(a.y,function(l,f){var d=s[f]*i,m=f===0,x=f===a.y.length-1;t.push({isMin:m,isMax:x,x:a.x-d,y:l}),t.unshift({isMin:m,isMax:x,x:a.x+d,y:l})}),t}});xi("violin","violin",{draw:function(a,i){var t=bu(a,!0,!0),s=this.parsePath(Mg(a.points));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s}),name:"violin"})},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{r:4,fill:i}}}});var D3=null,L3=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=El(d);l=l/m}else this.defaultSize||(this.defaultSize=N_(this)),l=this.defaultSize;return s.size=l,s._size=(0,b.U2)(t[Re],[this._sizeField]),s},i.prototype.initAttributes=function(){var t=this.attributeOption,s=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=s,delete t.size,a.prototype.initAttributes.call(this)},i}(Ls),F3=L3;xi("area","line",{draw:function(a,i){var t=ey(a,!0,!1,this),s=i.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:i,fill:null}}}}),xi("area","smooth",{draw:function(a,i){var t=this.coordinate,s=ey(a,!1,!0,this,sb(t)),l=i.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:i,fillOpacity:1}}}}),xi("area","smooth-line",{draw:function(a,i){var t=this.coordinate,s=ey(a,!0,!0,this,sb(t)),l=i.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:i,fill:null}}}});function fb(a,i){return["C",a.x*1/2+i.x*1/2,a.y,a.x*1/2+i.x*1/2,i.y,i.x,i.y]}function Z_(a,i){var t=[];t.push({x:i.x,y:i.y}),t.push(a);var s=["Q"];return(0,b.S6)(t,function(l){s.push(l.x,l.y)}),s}function U2(a,i,t){var s=Z_(i,t),l=[["M",a.x,a.y]];return l.push(s),l}function Z2(a,i){var t=Z_(a[1],i),s=Z_(a[3],i),l=[["M",a[0].x,a[0].y]];return l.push(s),l.push(["L",a[3].x,a[3].y]),l.push(["L",a[2].x,a[2].y]),l.push(t),l.push(["L",a[1].x,a[1].y]),l.push(["L",a[0].x,a[0].y]),l.push(["Z"]),l}xi("edge","arc",{draw:function(a,i){var t=bu(a,!0,!1,"lineWidth"),s=a.points,l=s.length>2?"weight":"normal",f;if(a.isInCircle){var d={x:0,y:1};return l==="normal"?f=U2(s[0],s[1],d):(t.fill=t.stroke,f=Z2(s,d)),f=this.parsePath(f),i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:f})})}else{if(l==="normal")return s=this.parsePoints(s),f=rf((s[1].x+s[0].x)/2,s[0].y,Math.abs(s[1].x-s[0].x)/2,Math.PI,Math.PI*2),i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:f})});var m=fb(s[1],s[3]),x=fb(s[2],s[0]);return f=[["M",s[0].x,s[0].y],["L",s[1].x,s[1].y],m,["L",s[3].x,s[3].y],["L",s[2].x,s[2].y],x,["Z"]],f=this.parsePath(f),t.fill=t.stroke,i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:f})})}},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});function hb(a,i){var t=fb(a,i),s=[["M",a.x,a.y]];return s.push(t),s}xi("edge","smooth",{draw:function(a,i){var t=bu(a,!0,!1,"lineWidth"),s=a.points,l=this.parsePath(hb(s[0],s[1]));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:l})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});var ry=1/3;function B3(a,i){var t=[];t.push({x:a.x,y:a.y*(1-ry)+i.y*ry}),t.push({x:i.x,y:a.y*(1-ry)+i.y*ry}),t.push(i);var s=[["M",a.x,a.y]];return(0,b.S6)(t,function(l){s.push(["L",l.x,l.y])}),s}xi("edge","vhv",{draw:function(a,i){var t=bu(a,!0,!1,"lineWidth"),s=a.points,l=this.parsePath(B3(s[0],s[1]));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:l})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}}),xi("interval","funnel",{getPoints:function(a){return a.size=a.size*2,ub(a)},draw:function(a,i){var t=bu(a,!1,!0),s=this.parsePath(B_(a.points,a.nextPoints,!1)),l=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var i=a.color;return{symbol:"square",style:{r:4,fill:i}}}}),xi("interval","hollow-rect",{draw:function(a,i){var t=bu(a,!0,!1),s=i,l=a==null?void 0:a.background;if(l){s=i.addGroup();var f=Dp(a),d=cb(a,this.parsePoints(a.points),this.coordinate);s.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Ln})}var m=this.parsePath(lb(a.points)),x=s.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(a){var i=a.color,t=a.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:i,fill:null}}:{symbol:"square",style:{r:4,stroke:i,fill:null}}}});function N3(a){var i=a.x,t=a.y,s=a.y0;return(0,b.kJ)(t)?t.map(function(l,f){return{x:(0,b.kJ)(i)?i[f]:i,y:l}}):[{x:i,y:s},{x:i,y:t}]}xi("interval","line",{getPoints:function(a){return N3(a)},draw:function(a,i){var t=bu(a,!0,!1,"lineWidth"),s=Yl((0,A.pi)({},t),["fill"]),l=this.parsePath(lb(a.points,!1)),f=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},s),{path:l}),name:"interval"});return f},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return[["M",t,s-l],["L",t,s+l]]},style:{r:5,stroke:i}}}}),xi("interval","pyramid",{getPoints:function(a){return a.size=a.size*2,ub(a)},draw:function(a,i){var t=bu(a,!1,!0),s=this.parsePath(B_(a.points,a.nextPoints,!0)),l=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var i=a.color;return{symbol:"square",style:{r:4,fill:i}}}});function V2(a){var i,t=a.x,s=a.y,l=a.y0,f=a.size,d,m;(0,b.kJ)(s)?(i=(0,A.CR)(s,2),d=i[0],m=i[1]):(d=l,m=s);var x=t+f/2,T=t-f/2;return[{x:t,y:d},{x:t,y:m},{x:T,y:d},{x,y:d},{x:T,y:m},{x,y:m}]}function z3(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["M",a[4].x,a[4].y],["L",a[5].x,a[5].y]]}xi("interval","tick",{getPoints:function(a){return V2(a)},draw:function(a,i){var t=bu(a,!0,!1),s=this.parsePath(z3(a.points)),l=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){return[["M",t-l/2,s-l],["L",t+l/2,s-l],["M",t,s-l],["L",t,s+l],["M",t-l/2,s+l],["L",t+l/2,s+l]]},style:{r:5,stroke:i}}}});var j2=function(a,i,t){var s=a.x,l=a.y,f=i.x,d=i.y,m;switch(t){case"hv":m=[{x:f,y:l}];break;case"vh":m=[{x:s,y:d}];break;case"hvh":var x=(f+s)/2;m=[{x,y:l},{x,y:d}];break;case"vhv":var T=(l+d)/2;m=[{x:s,y:T},{x:f,y:T}];break;default:break}return m};function H2(a,i){var t=[];return(0,b.S6)(a,function(s,l){var f=a[l+1];if(t.push(s),f){var d=j2(s,f,i);t=t.concat(d)}}),t}function U3(a){return a.map(function(i,t){return t===0?["M",i.x,i.y]:["L",i.x,i.y]})}function Z3(a,i){var t=cd(a.points,a.connectNulls,a.showSinglePoint),s=[];return(0,b.S6)(t,function(l){var f=H2(l,i);s=s.concat(U3(f))}),(0,A.pi)((0,A.pi)({},bu(a,!0,!1,"lineWidth")),{path:s})}(0,b.S6)(["hv","vh","hvh","vhv"],function(a){xi("line",a,{draw:function(i,t){var s=Z3(i,a),l=t.addShape({type:"path",attrs:s,name:"line"});return l},getMarker:function(i){return fd(i,a)}})}),(0,b.S6)(R3,function(a){xi("point",a,{draw:function(i,t){return z_(this,i,t,a,!0)},getMarker:function(i){var t=i.color;return{symbol:Tl[a],style:{r:4.5,stroke:t,fill:null}}}})}),xi("point","image",{draw:function(a,i){var t,s,l=bu(a,!1,!1,"r").r,f=this.parsePoints(a.points),d=f[0];if(a.isStack)d=f[1];else if(f.length>1){var m=i.addGroup();try{for(var x=(0,A.XA)(f),T=x.next();!T.done;T=x.next()){var O=T.value;m.addShape("image",{attrs:{x:O.x-l/2,y:O.y-l,width:l,height:l,img:a.shape[1]}})}}catch(D){t={error:D}}finally{try{T&&!T.done&&(s=x.return)&&s.call(x)}finally{if(t)throw t.error}}return m}return i.addShape("image",{attrs:{x:d.x-l/2,y:d.y-l,width:l,height:l,img:a.shape[1]}})},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{r:4.5,fill:i}}}}),(0,b.S6)(L2,function(a){xi("point",a,{draw:function(i,t){return z_(this,i,t,a,!1)},getMarker:function(i){var t=i.color;return{symbol:Tl[a]||a,style:{r:4.5,fill:t}}}})});function W2(a){var i=(0,b.kJ)(a)?a:[a],t=i[0],s=i[i.length-1],l=i.length>1?i[1]:t,f=i.length>3?i[3]:s,d=i.length>2?i[2]:l;return{min:t,max:s,min1:l,max1:f,median:d}}function pb(a,i,t){var s=t/2,l;if((0,b.kJ)(i)){var f=W2(i),d=f.min,m=f.max,x=f.median,T=f.min1,O=f.max1,D=a-s,B=a+s;l=[[D,m],[B,m],[a,m],[a,O],[D,T],[D,O],[B,O],[B,T],[a,T],[a,d],[D,d],[B,d],[D,x],[B,x]]}else{i=(0,b.UM)(i)?.5:i;var U=W2(a),d=U.min,m=U.max,x=U.median,T=U.min1,O=U.max1,J=i-s,pe=i+s;l=[[d,J],[d,pe],[d,i],[T,i],[T,J],[T,pe],[O,pe],[O,J],[O,i],[m,i],[m,J],[m,pe],[x,J],[x,pe]]}return l.map(function(Ee){return{x:Ee[0],y:Ee[1]}})}function G2(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["M",a[4].x,a[4].y],["L",a[5].x,a[5].y],["L",a[6].x,a[6].y],["L",a[7].x,a[7].y],["L",a[4].x,a[4].y],["Z"],["M",a[8].x,a[8].y],["L",a[9].x,a[9].y],["M",a[10].x,a[10].y],["L",a[11].x,a[11].y],["M",a[12].x,a[12].y],["L",a[13].x,a[13].y]]}xi("schema","box",{getPoints:function(a){var i=a.x,t=a.y,s=a.size;return pb(i,t,s)},draw:function(a,i){var t=bu(a,!0,!1),s=this.parsePath(G2(a.points)),l=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){var f=[s-6,s-3,s,s+3,s+6],d=pb(t,f,l);return[["M",d[0].x+1,d[0].y],["L",d[1].x-1,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["M",d[4].x,d[4].y],["L",d[5].x,d[5].y],["L",d[6].x,d[6].y],["L",d[7].x,d[7].y],["L",d[4].x,d[4].y],["Z"],["M",d[8].x,d[8].y],["L",d[9].x,d[9].y],["M",d[10].x+1,d[10].y],["L",d[11].x-1,d[11].y],["M",d[12].x,d[12].y],["L",d[13].x,d[13].y]]},style:{r:6,lineWidth:1,stroke:i}}}});function $2(a){var i=(0,b.kJ)(a)?a:[a],t=i.sort(function(s,l){return l-s});return Hh(t,4,t[t.length-1])}function V_(a,i,t){var s=$2(i);return[{x:a,y:s[0]},{x:a,y:s[1]},{x:a-t/2,y:s[2]},{x:a-t/2,y:s[1]},{x:a+t/2,y:s[1]},{x:a+t/2,y:s[2]},{x:a,y:s[2]},{x:a,y:s[3]}]}function X2(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["L",a[4].x,a[4].y],["L",a[5].x,a[5].y],["Z"],["M",a[6].x,a[6].y],["L",a[7].x,a[7].y]]}xi("schema","candle",{getPoints:function(a){var i=a.x,t=a.y,s=a.size;return V_(i,t,s)},draw:function(a,i){var t=bu(a,!0,!0),s=this.parsePath(X2(a.points)),l=i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(a){var i=a.color;return{symbol:function(t,s,l){var f=[s+7.5,s+3,s-3,s-7.5],d=V_(t,f,l);return[["M",d[0].x,d[0].y],["L",d[1].x,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["L",d[4].x,d[4].y],["L",d[5].x,d[5].y],["Z"],["M",d[6].x,d[6].y],["L",d[7].x,d[7].y]]},style:{lineWidth:1,stroke:i,fill:i,r:6}}}});function V3(a,i){var t=Math.abs(a[0].x-a[2].x),s=Math.abs(a[0].y-a[2].y),l=Math.min(t,s);i&&(l=(0,b.uZ)(i,0,Math.min(t,s))),l=l/2;var f=(a[0].x+a[2].x)/2,d=(a[0].y+a[2].y)/2;return{x:f-l,y:d-l,width:l*2,height:l*2}}xi("polygon","square",{draw:function(a,i){if(!(0,b.xb)(a.points)){var t=bu(a,!0,!0),s=this.parsePoints(a.points);return i.addShape("rect",{attrs:(0,A.pi)((0,A.pi)({},t),V3(s,a.size)),name:"polygon"})}},getMarker:function(a){var i=a.color;return{symbol:"square",style:{r:4,fill:i}}}}),xi("violin","smooth",{draw:function(a,i){var t=bu(a,!0,!0),s=this.parsePath(Tm(a.points));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s})})},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{stroke:null,r:4,fill:i}}}}),xi("violin","hollow",{draw:function(a,i){var t=bu(a,!0,!1),s=this.parsePath(Mg(a.points));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s})})},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{r:4,fill:null,stroke:i}}}}),xi("violin","hollow-smooth",{draw:function(a,i){var t=bu(a,!0,!1),s=this.parsePath(Tm(a.points));return i.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},t),{path:s})})},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{r:4,fill:null,stroke:i}}}});var j3=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getLabelValueDir=function(t){var s="y",l=t.points;return l[0][s]<=l[2][s]?1:-1},i.prototype.getLabelOffsetPoint=function(t,s,l,f){var d,m=a.prototype.getLabelOffsetPoint.call(this,t,s,l),x=this.getCoordinate(),T=x.isTransposed,O=T?"x":"y",D=this.getLabelValueDir(t.mappingData);return m=(0,A.pi)((0,A.pi)({},m),(d={},d[O]=m[O]*D,d)),x.isReflect("x")&&(m=(0,A.pi)((0,A.pi)({},m),{x:m.x*-1})),x.isReflect("y")&&(m=(0,A.pi)((0,A.pi)({},m),{y:m.y*-1})),m},i.prototype.getThemedLabelCfg=function(t){var s=this.geometry,l=this.getDefaultLabelCfg(),f=s.theme;return(0,b.b$)({},l,f.labels,t.position==="middle"?{offset:0}:{},t)},i.prototype.setLabelPosition=function(t,s,l,f){var d=this.getCoordinate(),m=d.isTransposed,x=s.points,T=d.convert(x[0]),O=d.convert(x[2]),D=this.getLabelValueDir(s),B,U,J,pe,Ee=(0,b.kJ)(s.shape)?s.shape[0]:s.shape;if(Ee==="funnel"||Ee==="pyramid"){var Ce=(0,b.U2)(s,"nextPoints"),st=(0,b.U2)(s,"points");if(Ce){var gt=d.convert(st[0]),bt=d.convert(st[1]),Ft=d.convert(Ce[0]),xr=d.convert(Ce[1]);m?(B=Math.min(Ft.y,gt.y),J=Math.max(Ft.y,gt.y),U=(bt.x+xr.x)/2,pe=(gt.x+Ft.x)/2):(B=Math.min((bt.y+xr.y)/2,(gt.y+Ft.y)/2),J=Math.max((bt.y+xr.y)/2,(gt.y+Ft.y)/2),U=xr.x,pe=gt.x)}else B=Math.min(O.y,T.y),J=Math.max(O.y,T.y),U=O.x,pe=T.x}else B=Math.min(O.y,T.y),J=Math.max(O.y,T.y),U=O.x,pe=T.x;switch(f){case"right":t.x=U,t.y=(B+J)/2,t.textAlign=(0,b.U2)(t,"textAlign",D>0?"left":"right");break;case"left":t.x=pe,t.y=(B+J)/2,t.textAlign=(0,b.U2)(t,"textAlign",D>0?"left":"right");break;case"bottom":m&&(t.x=(U+pe)/2),t.y=J,t.textAlign=(0,b.U2)(t,"textAlign","center"),t.textBaseline=(0,b.U2)(t,"textBaseline",D>0?"bottom":"top");break;case"middle":m&&(t.x=(U+pe)/2),t.y=(B+J)/2,t.textAlign=(0,b.U2)(t,"textAlign","center"),t.textBaseline=(0,b.U2)(t,"textBaseline","middle");break;case"top":m&&(t.x=(U+pe)/2),t.y=B,t.textAlign=(0,b.U2)(t,"textAlign","center"),t.textBaseline=(0,b.U2)(t,"textBaseline",D>0?"bottom":"top");break;default:break}},i}(Eo),H3=j3,j_=Math.PI/2,av=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getLabelOffset=function(t){var s=this.getCoordinate(),l=0;if((0,b.hj)(t))l=t;else if((0,b.HD)(t)&&t.indexOf("%")!==-1){var f=s.getRadius();s.innerRadius>0&&(f=f*(1-s.innerRadius)),l=parseFloat(t)*.01*f}return l},i.prototype.getLabelItems=function(t){var s=a.prototype.getLabelItems.call(this,t),l=this.geometry.getYScale();return(0,b.UI)(s,function(f){if(f&&l){var d=l.scale((0,b.U2)(f.data,l.field));return(0,A.pi)((0,A.pi)({},f),{percent:d})}return f})},i.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l;if(t.labelEmit)l=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!s.isTransposed)l="center";else{var f=s.getCenter(),d=t.offset;Math.abs(t.x-f.x)<1?l="center":t.angle>Math.PI||t.angle<=0?l=d>0?"left":"right":l=d>0?"right":"left"}return l},i.prototype.getLabelPoint=function(t,s,l){var f=1,d,m=t.content[l];this.isToMiddle(s)?d=this.getMiddlePoint(s.points):(t.content.length===1&&l===0?l=1:l===0&&(f=-1),d=this.getArcPoint(s,l));var x=t.offset*f,T=this.getPointAngle(d),O=t.labelEmit,D=this.getCirclePoint(T,x,d,O);return D.r===0?D.content="":(D.content=m,D.angle=T,D.color=s.color),D.rotate=t.autoRotate?this.getLabelRotate(T,x,O):t.rotate,D.start={x:d.x,y:d.y},D},i.prototype.getArcPoint=function(t,s){return s===void 0&&(s=0),!(0,b.kJ)(t.x)&&!(0,b.kJ)(t.y)?{x:t.x,y:t.y}:{x:(0,b.kJ)(t.x)?t.x[s]:t.x,y:(0,b.kJ)(t.y)?t.y[s]:t.y}},i.prototype.getPointAngle=function(t){return Xd(this.getCoordinate(),t)},i.prototype.getCirclePoint=function(t,s,l,f){var d=this.getCoordinate(),m=d.getCenter(),x=Wh(d,l);if(x===0)return(0,A.pi)((0,A.pi)({},m),{r:x});var T=t;if(d.isTransposed&&x>s&&!f){var O=Math.asin(s/(2*x));T=t+O*2}else x=x+s;return{x:m.x+x*Math.cos(T),y:m.y+x*Math.sin(T),r:x}},i.prototype.getLabelRotate=function(t,s,l){var f=t+j_;return l&&(f-=j_),f&&(f>j_?f=f-Math.PI:f<-j_&&(f=f+Math.PI)),f},i.prototype.getMiddlePoint=function(t){var s=this.getCoordinate(),l=t.length,f={x:0,y:0};return(0,b.S6)(t,function(d){f.x+=d.x,f.y+=d.y}),f.x/=l,f.y/=l,f=s.convert(f),f},i.prototype.isToMiddle=function(t){return t.x.length>2},i}(Eo),db=av,Y2=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return i.prototype.getDefaultLabelCfg=function(t,s){var l=a.prototype.getDefaultLabelCfg.call(this,t,s);return(0,b.b$)({},l,(0,b.U2)(this.geometry.theme,"pieLabels",{}))},i.prototype.getLabelOffset=function(t){return a.prototype.getLabelOffset.call(this,t)||0},i.prototype.getLabelRotate=function(t,s,l){var f;return s<0&&(f=t,f>Math.PI/2&&(f=f-Math.PI),f<-Math.PI/2&&(f=f+Math.PI)),f},i.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l=s.getCenter(),f;return t.angle<=Math.PI/2&&t.x>=l.x?f="left":f="right",t.offset<=0&&(f==="right"?f="left":f="right"),f},i.prototype.getArcPoint=function(t){return t},i.prototype.getPointAngle=function(t){var s=this.getCoordinate(),l={x:(0,b.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},f={x:(0,b.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},d,m=Xd(s,l);if(t.points&&t.points[0].y===t.points[1].y)d=m;else{var x=Xd(s,f);m>=x&&(x=x+Math.PI*2),d=m+(x-m)/2}return d},i.prototype.getCirclePoint=function(t,s){var l=this.getCoordinate(),f=l.getCenter(),d=l.getRadius()+s;return(0,A.pi)((0,A.pi)({},js(f.x,f.y,d,t)),{angle:t,r:d})},i}(db),W3=Y2,q2=4;function G3(a,i,t,s,l,f){var d,m,x=!0,T=s.start,O=s.end,D=Math.min(T.y,O.y),B=Math.abs(T.y-O.y),U,J=0,pe=Number.MIN_VALUE,Ee=i.map(function(Fr){return Fr.y>J&&(J=Fr.y),Fr.y<pe&&(pe=Fr.y),{size:t,targets:[Fr.y-D]}});for(pe-=D,J-D>B&&(B=J-D);x;)for(Ee.forEach(function(Fr){var $r=(Math.min.apply(pe,Fr.targets)+Math.max.apply(pe,Fr.targets))/2;Fr.pos=Math.min(Math.max(pe,$r-Fr.size/2),B-Fr.size)}),x=!1,U=Ee.length;U--;)if(U>0){var Ce=Ee[U-1],st=Ee[U];Ce.pos+Ce.size>st.pos&&(Ce.size+=st.size,Ce.targets=Ce.targets.concat(st.targets),Ce.pos+Ce.size>B&&(Ce.pos=B-Ce.size),Ee.splice(U,1),x=!0)}U=0,Ee.forEach(function(Fr){var $r=D+t/2;Fr.targets.forEach(function(){i[U].y=Fr.pos+$r,$r+=t,U++})});var gt={};try{for(var bt=(0,A.XA)(a),Ft=bt.next();!Ft.done;Ft=bt.next()){var xr=Ft.value;gt[xr.get("id")]=xr}}catch(Fr){d={error:Fr}}finally{try{Ft&&!Ft.done&&(m=bt.return)&&m.call(bt)}finally{if(d)throw d.error}}i.forEach(function(Fr){var $r=Fr.r*Fr.r,yn=Math.pow(Math.abs(Fr.y-l.y),2);if($r<yn)Fr.x=l.x;else{var cn=Math.sqrt($r-yn);f?Fr.x=l.x+cn:Fr.x=l.x-cn}var Bn=gt[Fr.id];Bn.attr("x",Fr.x),Bn.attr("y",Fr.y);var hi=(0,b.sE)(Bn.getChildren(),function(Hi){return Hi.get("type")==="text"});hi&&(hi.attr("y",Fr.y),hi.attr("x",Fr.x))})}function $3(a,i,t,s){if(!(!a.length||!i.length)){var l=a[0]?a[0].offset:0,f=i[0].get("coordinate"),d=f.getRadius(),m=f.getCenter();if(l>0){var x=14,T=d+l,O=T*2+x*2,D={start:f.start,end:f.end},B=[[],[]];a.forEach(function(U){U&&(U.textAlign==="right"?B[0].push(U):B[1].push(U))}),B.forEach(function(U,J){var pe=O/x;U.length>pe&&(U.sort(function(Ee,Ce){return Ce["..percent"]-Ee["..percent"]}),U.splice(pe,U.length-pe)),U.sort(function(Ee,Ce){return Ee.y-Ce.y}),G3(i,U,x,D,m,J)})}(0,b.S6)(a,function(U){if(U&&U.labelLine){var J=U.offset,pe=U.angle,Ee=js(m.x,m.y,d,pe),Ce=js(m.x,m.y,d+J/2,pe),st=U.x+(0,b.U2)(U,"offsetX",0),gt=U.y+(0,b.U2)(U,"offsetY",0),bt={x:st-Math.cos(pe)*q2,y:gt-Math.sin(pe)*q2};(0,b.Kn)(U.labelLine)||(U.labelLine={}),U.labelLine.path=["M ".concat(Ee.x),"".concat(Ee.y," Q").concat(Ce.x),"".concat(Ce.y," ").concat(bt.x),bt.y].join(",")}})}}function H_(a,i,t){var s=a.filter(function(J){return!J.invisible});s.sort(function(J,pe){return J.y-pe.y});var l=!0,f=t.minY,d=t.maxY,m=Math.abs(f-d),x,T=0,O=Number.MIN_VALUE,D=s.map(function(J){return J.y>T&&(T=J.y),J.y<O&&(O=J.y),{content:J.content,size:i,targets:[J.y-f],pos:null}});for(O-=f,T-f>m&&(m=T-f);l;)for(D.forEach(function(J){var pe=(Math.min.apply(O,J.targets)+Math.max.apply(O,J.targets))/2;J.pos=Math.min(Math.max(O,pe-J.size/2),m-J.size),J.pos=Math.max(0,J.pos)}),l=!1,x=D.length;x--;)if(x>0){var B=D[x-1],U=D[x];B.pos+B.size>U.pos&&(B.size+=U.size,B.targets=B.targets.concat(U.targets),B.pos+B.size>m&&(B.pos=m-B.size),D.splice(x,1),l=!0)}x=0,D.forEach(function(J){var pe=f+i/2;J.targets.forEach(function(){s[x].y=J.pos+pe,pe+=i,x++})})}var K2=4;function Q2(a,i){var t=i.getCenter(),s=i.getRadius();if(a&&a.labelLine){var l=a.angle,f=a.offset,d=js(t.x,t.y,s,l),m=a.x+(0,b.U2)(a,"offsetX",0)*(Math.cos(l)>0?1:-1),x=a.y+(0,b.U2)(a,"offsetY",0)*(Math.sin(l)>0?1:-1),T={x:m-Math.cos(l)*K2,y:x-Math.sin(l)*K2},O=a.labelLine.smooth,D=[],B=T.x-t.x,U=T.y-t.y,J=Math.atan(U/B);if(B<0&&(J+=Math.PI),O===!1){(0,b.Kn)(a.labelLine)||(a.labelLine={});var pe=0;(l<0&&l>-Math.PI/2||l>Math.PI*1.5)&&T.y>d.y&&(pe=1),l>=0&&l<Math.PI/2&&T.y>d.y&&(pe=1),l>=Math.PI/2&&l<Math.PI&&d.y>T.y&&(pe=1),(l<-Math.PI/2||l>=Math.PI&&l<Math.PI*1.5)&&d.y>T.y&&(pe=1);var Ee=f/2>4?4:Math.max(f/2-1,0),Ce=js(t.x,t.y,s+Ee,l),st=js(t.x,t.y,s+f/2,J),gt=0;D.push("M ".concat(d.x," ").concat(d.y)),D.push("L ".concat(Ce.x," ").concat(Ce.y)),D.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(gt," ").concat(pe," ").concat(st.x," ").concat(st.y)),D.push("L ".concat(T.x," ").concat(T.y))}else{var Ce=js(t.x,t.y,s+(f/2>4?4:Math.max(f/2-1,0)),l),bt=d.x<t.x?1:-1;D.push("M ".concat(T.x," ").concat(T.y));var Ft=(d.y-t.y)/(d.x-t.x),xr=(T.y-t.y)/(T.x-t.x);Math.abs(Ft-xr)>Math.pow(Math.E,-16)&&D.push.apply(D,["C",T.x+bt*4,T.y,2*Ce.x-d.x,2*Ce.y-d.y,d.x,d.y]),D.push("L ".concat(d.x," ").concat(d.y))}a.labelLine.path=D.join(" ")}}function J2(a,i,t,s){var l,f,d=(0,b.hX)(a,function($r){return!(0,b.UM)($r)}),m=i[0]&&i[0].get("coordinate");if(m){var x=m.getCenter(),T=m.getRadius(),O={};try{for(var D=(0,A.XA)(i),B=D.next();!B.done;B=D.next()){var U=B.value;O[U.get("id")]=U}}catch($r){l={error:$r}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(l)throw l.error}}var J=(0,b.U2)(d[0],"labelHeight",14),pe=(0,b.U2)(d[0],"offset",0);if(!(pe<=0)){var Ee="left",Ce="right",st=(0,b.vM)(d,function($r){return $r.x<x.x?Ee:Ce}),gt=m.start,bt=m.end,Ft=Math.min((T+pe+J)*2,m.getHeight()),xr=Ft/2,Fr={minX:gt.x,maxX:bt.x,minY:x.y-xr,maxY:x.y+xr};(0,b.S6)(st,function($r,yn){var cn=Math.floor(Ft/J);$r.length>cn&&($r.sort(function(Bn,hi){return hi.percent-Bn.percent}),(0,b.S6)($r,function(Bn,hi){hi+1>cn&&(O[Bn.id].set("visible",!1),Bn.invisible=!0)})),H_($r,J,Fr)}),(0,b.S6)(st,function($r,yn){(0,b.S6)($r,function(cn){var Bn=yn===Ce,hi=O[cn.id],Hi=hi.getChildByIndex(0);if(Hi){var aa=T+pe,Qa=cn.y-x.y,Hn=Math.pow(aa,2),Fi=Math.pow(Qa,2),na=Hn-Fi>0?Hn-Fi:0,zi=Math.sqrt(na),gi=Math.abs(Math.cos(cn.angle)*aa);Bn?cn.x=x.x+Math.max(zi,gi):cn.x=x.x-Math.max(zi,gi)}Hi&&(Hi.attr("y",cn.y),Hi.attr("x",cn.x)),Q2(cn,m)})})}}}var vb=4,X3=4,ew=4;function Y3(a,i,t){var s=i.getCenter(),l=i.getRadius(),f={x:a.x-(t?ew:-ew),y:a.y},d=js(s.x,s.y,l+vb,a.angle),m={x:f.x,y:f.y},x={x:d.x,y:d.y},T=js(s.x,s.y,l,a.angle),O="";if(f.y!==d.y){var D=t?4:-4;m.y=f.y,a.angle<0&&a.angle>=-Math.PI/2&&(m.x=Math.max(d.x,f.x-D),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-D))),a.angle>0&&a.angle<Math.PI/2&&(m.x=Math.max(d.x,f.x-D),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-D))),a.angle>Math.PI/2&&(m.x=Math.min(d.x,f.x-D),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-D))),a.angle<-Math.PI/2&&(m.x=Math.min(d.x,f.x-D),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-D)))}O=["M ".concat(f.x,",").concat(f.y),"L ".concat(m.x,",").concat(m.y),"L ".concat(x.x,",").concat(x.y),"L ".concat(d.x,",").concat(d.y),"L ".concat(T.x,",").concat(T.y)].join(" "),a.labelLine=(0,b.b$)({},a.labelLine,{path:O})}function q3(a,i,t,s){var l,f,d=i[0]&&i[0].get("coordinate");if(d){var m=d.getCenter(),x=d.getRadius(),T={};try{for(var O=(0,A.XA)(i),D=O.next();!D.done;D=O.next()){var B=D.value;T[B.get("id")]=B}}catch($r){l={error:$r}}finally{try{D&&!D.done&&(f=O.return)&&f.call(O)}finally{if(l)throw l.error}}var U=(0,b.U2)(a[0],"labelHeight",14),J=Math.max((0,b.U2)(a[0],"offset",0),vb);(0,b.S6)(a,function($r){if($r){var yn=(0,b.U2)(T,[$r.id]);if(yn){var cn=$r.x>m.x||$r.x===m.x&&$r.y>m.y,Bn=(0,b.UM)($r.offsetX)?X3:$r.offsetX,hi=js(m.x,m.y,x+vb,$r.angle),Hi=J+Bn;$r.x=m.x+(cn?1:-1)*(x+Hi),$r.y=hi.y}}});var pe=d.start,Ee=d.end,Ce="left",st="right",gt=(0,b.vM)(a,function($r){return $r.x<m.x?Ce:st}),bt=(x+J)*2+U;(0,b.S6)(gt,function($r){var yn=$r.length*U;yn>bt&&(bt=Math.min(yn,Math.abs(pe.y-Ee.y)))});var Ft={minX:pe.x,maxX:Ee.x,minY:m.y-bt/2,maxY:m.y+bt/2};(0,b.S6)(gt,function($r,yn){var cn=bt/U;$r.length>cn&&($r.sort(function(Bn,hi){return hi.percent-Bn.percent}),(0,b.S6)($r,function(Bn,hi){hi>cn&&(T[Bn.id].set("visible",!1),Bn.invisible=!0)})),H_($r,U,Ft)});var xr=Ft.minY,Fr=Ft.maxY;(0,b.S6)(gt,function($r,yn){var cn=yn===st;(0,b.S6)($r,function(Bn){var hi=(0,b.U2)(T,Bn&&[Bn.id]);if(hi){if(Bn.y<xr||Bn.y>Fr){hi.set("visible",!1);return}var Hi=hi.getChildByIndex(0),aa=Hi.getCanvasBBox(),Qa={x:cn?aa.x:aa.maxX,y:aa.y+aa.height/2};Qu(Hi,Bn.x-Qa.x,Bn.y-Qa.y),Bn.labelLine&&Y3(Bn,d,cn)}})})}}function K3(a,i,t,s){(0,b.S6)(i,function(l){var f=s.minX,d=s.minY,m=s.maxX,x=s.maxY,T=l.getCanvasBBox(),O=T.minX,D=T.minY,B=T.maxX,U=T.maxY,J=T.x,pe=T.y,Ee=T.width,Ce=T.height,st=J,gt=pe;(O<f||B<f)&&(st=f),(D<d||U<d)&&(gt=d),O>m?st=m-Ee:B>m&&(st=st-(B-m)),D>x?gt=x-Ce:U>x&&(gt=gt-(U-x)),(st!==J||gt!==pe)&&Qu(l,st-J,gt-pe)})}function tw(a,i,t,s){(0,b.S6)(i,function(l,f){var d=l.getCanvasBBox(),m=t[f].getBBox();(d.minX<m.minX||d.minY<m.minY||d.maxX>m.maxX||d.maxY>m.maxY)&&l.remove(!0)})}var rw=100,nw=function(){function a(i){i===void 0&&(i={}),this.bitmap={};var t=i.xGap,s=t===void 0?1:t,l=i.yGap,f=l===void 0?8:l;this.xGap=s,this.yGap=f}return a.prototype.hasGap=function(i){for(var t=!0,s=this.bitmap,l=Math.round(i.minX),f=Math.round(i.maxX),d=Math.round(i.minY),m=Math.round(i.maxY),x=l;x<=f;x+=1){if(!s[x]){s[x]={};continue}if(x===l||x===f){for(var T=d;T<=m;T++)if(s[x][T]){t=!1;break}}else if(s[x][d]||s[x][m]){t=!1;break}}return t},a.prototype.fillGap=function(i){for(var t=this.bitmap,s=Math.round(i.minX),l=Math.round(i.maxX),f=Math.round(i.minY),d=Math.round(i.maxY),m=s;m<=l;m+=1)t[m]||(t[m]={});for(var m=s;m<=l;m+=this.xGap){for(var x=f;x<=d;x+=this.yGap)t[m][x]=!0;t[m][d]=!0}if(this.yGap!==1)for(var m=f;m<=d;m+=1)t[s][m]=!0,t[l][m]=!0;if(this.xGap!==1)for(var m=s;m<=l;m+=1)t[m][f]=!0,t[m][d]=!0},a.prototype.destroy=function(){this.bitmap={}},a}();function Q3(a,i,t){t===void 0&&(t=rw);var s=-1,l=a.attr(),f=l.x,d=l.y,m=a.getCanvasBBox(),x=Math.sqrt(m.width*m.width+m.height*m.height),T,O=-s,D=0,B=0,U=function(Ce){var st=Ce*.1;return[st*Math.cos(st),st*Math.sin(st)]};if(i.hasGap(m))return i.fillGap(m),!0;for(var J=!1,pe=0,Ee={};Math.min(Math.abs(D),Math.abs(B))<x&&pe<t;)if(T=U(O+=s),D=~~T[0],B=~~T[1],!(!D&&!B||Ee["".concat(D,"-").concat(B)])&&(a.attr({x:f+D,y:d+B}),D+B<0&&a.attr("textAlign","right"),pe++,i.hasGap(a.getCanvasBBox()))){i.fillGap(a.getCanvasBBox()),J=!0,Ee["".concat(D,"-").concat(B)]=!0;break}return J}function J3(a,i,t,s){var l=a.getCanvasBBox(),f=l.width,d=l.height,m={x:i,y:t,textAlign:"center"};switch(s){case 0:m.y-=d+1,m.x+=1,m.textAlign="left";break;case 1:m.y-=d+1,m.x-=1,m.textAlign="right";break;case 2:m.y+=d+1,m.x-=1,m.textAlign="right";break;case 3:m.y+=d+1,m.x+=1,m.textAlign="left";break;case 5:m.y-=d*2+2;break;case 6:m.y+=d*2+2;break;case 7:m.x+=f+1,m.textAlign="left";break;case 8:m.x-=f+1,m.textAlign="right";break;default:break}return a.attr(m),a.getCanvasBBox()}function eI(a,i,t,s){var l=new nw;(0,b.S6)(i,function(f){var d=f.find(function(m){return m.get("type")==="text"});Q3(d,l)||f.remove(!0)}),l.destroy()}function tI(a,i,t,s){var l=new nw;(0,b.S6)(i,function(f){for(var d=f.find(function(U){return U.get("type")==="text"}),m=d.attr(),x=m.x,T=m.y,O=!1,D=0;D<=8;D++){var B=J3(d,x,T,D);if(l.hasGap(B)){l.fillGap(B),O=!0;break}}O||f.remove(!0)}),l.destroy()}function rI(a,i){return(a[0]||0)*(i[0]||0)+(a[1]||0)*(i[1]||0)+(a[2]||0)*(i[2]||0)}function gb(a){if(a.length>4)return[];var i=function(l,f){return[f.x-l.x,f.y-l.y]},t=i(a[0],a[1]),s=i(a[1],a[2]);return[t,s]}function ny(a,i,t){i===void 0&&(i=0),t===void 0&&(t={x:0,y:0});var s=a.x,l=a.y;return{x:(s-t.x)*Math.cos(-i)+(l-t.y)*Math.sin(-i)+t.x,y:(t.x-s)*Math.sin(-i)+(l-t.y)*Math.cos(-i)+t.y}}function iw(a){var i=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}],t=a.rotation;return t?[ny(i[0],t,i[0]),ny(i[1],t,i[0]),ny(i[2],t,i[0]),ny(i[3],t,i[0])]:i}function aw(a,i){if(a.length>4)return{min:0,max:0};var t=[];return a.forEach(function(s){t.push(rI([s.x,s.y],i))}),{min:Math.min.apply(Math,(0,A.ev)([],(0,A.CR)(t),!1)),max:Math.max.apply(Math,(0,A.ev)([],(0,A.CR)(t),!1))}}function nI(a,i){return a.max>i.min&&a.min<i.max}function iI(a){return typeof a=="number"&&!Number.isNaN(a)&&a!==1/0&&a!==-1/0}function ow(a){return["x","y","width","height"].every(function(i){return iI(a[i])})}function sw(a,i,t){return t===void 0&&(t=0),!(i.x>a.x+a.width+t||i.x+i.width<a.x-t||i.y>a.y+a.height+t||i.y+i.height<a.y-t)}function uw(a,i,t){if(t===void 0&&(t=0),!ow(a)||!ow(i))return!1;if(!a.rotation&&!i.rotation)return sw(a,i,t);for(var s=iw(a),l=iw(i),f=gb(s).concat(gb(l)),d=0;d<f.length;d++){var m=f[d],x=aw(s,m),T=aw(l,m);if(!nI(x,T))return!1}return!0}var aI=function(){function a(i){var t=this;this.queue=[],this.worker=new Worker(i),this.worker.onmessage=function(s){var l;(l=t.queue.shift())===null||l===void 0||l.resolve(s)},this.worker.onmessageerror=function(s){var l;console.warn("[AntV G2] Web worker is not available"),(l=t.queue.shift())===null||l===void 0||l.reject(s)}}return a.prototype.post=function(i,t){var s=this;return new Promise(function(l,f){s.queue.push({resolve:l,reject:f});try{s.worker.postMessage(i)}catch(d){console.warn("[AntV G2] Web worker is not available"),(0,b.mf)(t)&&t()}})},a.prototype.destroy=function(){this.worker.terminate()},a}();function oI(a){if(typeof window!="undefined"){var i;try{i=new Blob([a.toString()],{type:"application/javascript"})}catch(t){i=new window.BlobBuilder,i.append(a.toString()),i=i.getBlob()}return new aI(URL.createObjectURL(i))}}var sI=function(a){function i(){function T(gt,bt){return(gt[0]||0)*(bt[0]||0)+(gt[1]||0)*(bt[1]||0)+(gt[2]||0)*(bt[2]||0)}function O(gt){if(gt.length>4)return[];var bt=function(Fr,$r){return[$r.x-Fr.x,$r.y-Fr.y]},Ft=bt(gt[0],gt[1]),xr=bt(gt[1],gt[2]);return[Ft,xr]}function D(gt,bt,Ft){bt===void 0&&(bt=0),Ft===void 0&&(Ft={x:0,y:0});var xr=gt.x,Fr=gt.y;return{x:(xr-Ft.x)*Math.cos(-bt)+(Fr-Ft.y)*Math.sin(-bt)+Ft.x,y:(Ft.x-xr)*Math.sin(-bt)+(Fr-Ft.y)*Math.cos(-bt)+Ft.y}}function B(gt){var bt=[{x:gt.x,y:gt.y},{x:gt.x+gt.width,y:gt.y},{x:gt.x+gt.width,y:gt.y+gt.height},{x:gt.x,y:gt.y+gt.height}],Ft=gt.rotation;return Ft?[D(bt[0],Ft,bt[0]),D(bt[1],Ft,bt[0]),D(bt[2],Ft,bt[0]),D(bt[3],Ft,bt[0])]:bt}function U(gt,bt){if(gt.length>4)return{min:0,max:0};var Ft=[];return gt.forEach(function(xr){Ft.push(T([xr.x,xr.y],bt))}),{min:Math.min.apply(null,Ft),max:Math.max.apply(null,Ft)}}function J(gt,bt){return gt.max>bt.min&&gt.min<bt.max}function pe(gt){return typeof gt=="number"&&!Number.isNaN(gt)&&gt!==1/0&&gt!==-1/0}function Ee(gt){return["x","y","width","height"].every(function(bt){return pe(gt[bt])})}function Ce(gt,bt,Ft){return Ft===void 0&&(Ft=0),!(bt.x>gt.x+gt.width+Ft||bt.x+bt.width<gt.x-Ft||bt.y>gt.y+gt.height+Ft||bt.y+bt.height<gt.y-Ft)}function st(gt,bt,Ft){if(Ft===void 0&&(Ft=0),!Ee(gt)||!Ee(bt))return!1;if(!gt.rotation&&!bt.rotation)return Ce(gt,bt,Ft);for(var xr=B(gt),Fr=B(bt),$r=O(xr).concat(O(Fr)),yn=0;yn<$r.length;yn++){var cn=$r[yn],Bn=U(xr,cn),hi=U(Fr,cn);if(!J(Bn,hi))return!1}return!0}return{intersect:st}}var t=i().intersect;function s(T){for(var O=T.slice(),D=0;D<O.length;D++){var B=O[D];if(B.visible)for(var U=D+1;U<O.length;U++){var J=O[U];B!==J&&J.visible&&t(B,J)&&(J.visible=!1)}}return O}var l={"hide-overlap":s};try{var f=JSON.parse(a.data);if(!f||!f.type||!l[f.type])return;var d=f.type,m=f.items,x=l[d](m);self.postMessage(x)}catch(T){throw T}},uI=`
   self.onmessage = `.concat(sI.toString(),`
`),mb=function(a){for(var i=a.slice(),t=0;t<i.length;t++){var s=i[t];if(s.visible)for(var l=t+1;l<i.length;l++){var f=i[l];s!==f&&f.visible&&uw(s,f)&&(f.visible=!1)}}return i},W_=new Map,yb=oI(uI);function lI(a,i,t,s){return(0,A.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T;return(0,A.Jh)(this,function(O){switch(O.label){case 0:return l=i.map(function(D,B){return(0,A.pi)((0,A.pi)({},rs(D,a[B],(0,b.U2)(a[B],"background.padding"))),{visible:!0})}),f=JSON.stringify(l),d=function(D){return W_.set(f,D),(0,b.S6)(D,function(B,U){var J=B.visible,pe=i[U];J?pe==null||pe.show():pe==null||pe.hide()}),D},W_.get(f)?(d(W_.get(f)),[3,7]):[3,1];case 1:if(!yb)return[3,6];O.label=2;case 2:return O.trys.push([2,4,,5]),m=JSON.stringify({type:"hide-overlap",items:l}),[4,yb.post(m,function(){return d(mb(l))})];case 3:return x=O.sent(),d(Array.isArray(x.data)?x.data:[]),[3,5];case 4:return T=O.sent(),console.error(T),d(mb(l)),[3,5];case 5:return[3,7];case 6:d(mb(l)),O.label=7;case 7:return[2]}})})}var lw={"#5B8FF9":!0},cI=function(a){var i=Sa.toRGB(a).toUpperCase();if(lw[i])return lw[i];var t=(0,A.CR)(Sa.rgb2arr(i),3),s=t[0],l=t[1],f=t[2],d=(s*299+l*587+f*114)/1e3<128;return d};function fI(a,i,t){if(t.length!==0){var s=t[0].get("element"),l=s.geometry.theme,f=l.labels||{},d=f.fillColorLight,m=f.fillColorDark;t.forEach(function(x,T){var O=i[T],D=O.find(function(Ce){return Ce.get("type")==="text"}),B=ls.fromObject(x.getBBox()),U=ls.fromObject(D.getCanvasBBox()),J=!B.contains(U),pe=x.attr("fill"),Ee=cI(pe);J?D.attr(l.overflowLabels.style):Ee?d&&D.attr("fill",d):m&&D.attr("fill",m)})}}function hI(a,i,t){var s=a.coordinate,l=qa(i),f=ls.fromObject(l.getCanvasBBox()),d=ls.fromObject(t.getBBox());return s.isTransposed?d.height>=f.height:d.width>=f.width}function cw(a,i,t){var s=!!a.getAdjust("stack");return s||i.every(function(l,f){var d=t[f];return hI(a,l,d)})}function fw(a,i,t){var s=a.coordinate,l=ls.fromObject(t.getBBox()),f=qa(i);s.isTransposed?f.attr({x:l.minX+l.width/2,textAlign:"center"}):f.attr({y:l.minY+l.height/2,textBaseline:"middle"})}function pI(a,i,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=cw(f,i,t);d&&t.forEach(function(m,x){var T=i[x];fw(f,T,m)})}}}function dI(a){var i=500,t=[],s=Math.max(Math.floor(a.length/i),1);return(0,b.S6)(a,function(l,f){f%s===0?t.push(l):l.set("visible",!1)}),t}function vI(a,i,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=dI(i),m=(0,A.CR)(f.getXYFields(),1),x=m[0],T=[],O=[],D=(0,b.vM)(d,function(Ee){return Ee.get("data")[x]}),B=(0,b.jj)((0,b.UI)(d,function(Ee){return Ee.get("data")[x]})),U;d.forEach(function(Ee){Ee.set("visible",!0)});var J=function(Ee){Ee&&(Ee.length&&O.push(Ee.pop()),O.push.apply(O,(0,A.ev)([],(0,A.CR)(Ee),!1)))};for((0,b.dp)(B)>0&&(U=B.shift(),J(D[U])),(0,b.dp)(B)>0&&(U=B.pop(),J(D[U])),(0,b.S6)(B.reverse(),function(Ee){J(D[Ee])});O.length>0;){var pe=O.shift();pe.get("visible")&&(yo(pe,T)?pe.set("visible",!1):T.push(pe))}}}}function gI(a,i){var t=a.getXYFields()[1],s=[],l=i.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,A.ev)([],(0,A.CR)(l),!1)),s}function hw(a,i,t){return a.some(function(s){return t(s,i)})}function pw(a,i,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,i.x+i.width+t)-Math.max(a.x-t,i.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,i.y+i.height+t)-Math.max(a.y-t,i.y-t));return s*l}function _b(a,i){return hw(a,i,function(t,s){var l=qa(t),f=qa(s);return pw(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function mI(a,i,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||x.type!=="point")){var T=(0,A.CR)(x.getXYFields(),2),O=T[0],D=T[1],B=(0,b.vM)(i,function(pe){return pe.get("data")[O]}),U=[],J=l&&l.offset||((d=a[0])===null||d===void 0?void 0:d.offset)||12;(0,b.UI)((0,b.XP)(B).reverse(),function(pe){for(var Ee=gI(x,B[pe]);Ee.length;){var Ce=Ee.shift(),st=qa(Ce);if(hw(U,Ce,function(Ft,xr){return Ft.get("data")[O]===xr.get("data")[O]&&Ft.get("data")[D]===xr.get("data")[D]})){st.set("visible",!1);continue}var gt=_b(U,Ce),bt=!1;if(gt&&(st.attr("y",st.attr("y")+2*J),bt=_b(U,Ce)),bt){st.set("visible",!1);continue}U.push(Ce)}})}}}function yI(a,i){var t=a.getXYFields()[1],s=[],l=i.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,A.ev)([],(0,A.CR)(l),!1)),s}function dw(a,i,t){return a.some(function(s){return t(s,i)})}function _I(a,i,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,i.x+i.width+t)-Math.max(a.x-t,i.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,i.y+i.height+t)-Math.max(a.y-t,i.y-t));return s*l}function vw(a,i){return dw(a,i,function(t,s){var l=qa(t),f=qa(s);return _I(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function gw(a,i,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||["path","line","area"].indexOf(x.type)<0)){var T=(0,A.CR)(x.getXYFields(),2),O=T[0],D=T[1],B=(0,b.vM)(i,function(pe){return pe.get("data")[O]}),U=[],J=l&&l.offset||((d=a[0])===null||d===void 0?void 0:d.offset)||12;(0,b.UI)((0,b.XP)(B).reverse(),function(pe){for(var Ee=yI(x,B[pe]);Ee.length;){var Ce=Ee.shift(),st=qa(Ce);if(dw(U,Ce,function(Ft,xr){return Ft.get("data")[O]===xr.get("data")[O]&&Ft.get("data")[D]===xr.get("data")[D]})){st.set("visible",!1);continue}var gt=vw(U,Ce),bt=!1;if(gt&&(st.attr("y",st.attr("y")+2*J),bt=vw(U,Ce)),bt){st.set("visible",!1);continue}U.push(Ce)}})}}}var G_;function xI(){return G_||(G_=document.createElement("canvas").getContext("2d")),G_}var $_=(0,b.HP)(function(a,i){i===void 0&&(i={});var t=i.fontSize,s=i.fontFamily,l=i.fontWeight,f=i.fontStyle,d=i.fontVariant,m=xI();return m.font=[f,d,l,"".concat(t,"px"),s].join(" "),m.measureText((0,b.HD)(a)?a:"").width},function(a,i){return i===void 0&&(i={}),(0,A.ev)([a],(0,A.CR)((0,b.VO)(i)),!1).join("")}),bI=function(a,i,t){var s=16,l=$_("...",t),f;(0,b.HD)(a)?f=a:f=(0,b.BB)(a);var d=i,m=[],x,T;if($_(a,t)<=i)return a;for(;x=f.substr(0,s),T=$_(x,t),!(T+l>d&&T>d);)if(m.push(x),d-=T,f=f.substr(s),!f)return m.join("");for(;x=f.substr(0,1),T=$_(x,t),!(T+l>d);)if(m.push(x),d-=T,f=f.substr(1),!f)return m.join("");return"".concat(m.join(""),"...")};function SI(a,i,t,s,l){if(!(i.length<=0)){var f=(l==null?void 0:l.direction)||["top","right","bottom","left"],d=(l==null?void 0:l.action)||"translate",m=(l==null?void 0:l.margin)||0,x=i[0].get("coordinate");if(x){var T=Iv(x,m),O=T.minX,D=T.minY,B=T.maxX,U=T.maxY;(0,b.S6)(i,function(J){var pe=J.getCanvasBBox(),Ee=pe.minX,Ce=pe.minY,st=pe.maxX,gt=pe.maxY,bt=pe.x,Ft=pe.y,xr=pe.width,Fr=pe.height,$r=bt,yn=Ft;if(f.indexOf("left")>=0&&(Ee<O||st<O)&&($r=O),f.indexOf("top")>=0&&(Ce<D||gt<D)&&(yn=D),f.indexOf("right")>=0&&(Ee>B?$r=B-xr:st>B&&($r=$r-(st-B))),f.indexOf("bottom")>=0&&(Ce>U?yn=U-Fr:gt>U&&(yn=yn-(gt-U))),$r!==bt||yn!==Ft){var cn=$r-bt;if(d==="translate")Qu(J,cn,yn-Ft);else if(d==="ellipsis"){var Bn=J.findAll(function(hi){return hi.get("type")==="text"});Bn.forEach(function(hi){var Hi=(0,b.ei)(hi.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),aa=hi.getCanvasBBox(),Qa=bI(hi.attr("text"),aa.width-Math.abs(cn),Hi);hi.attr("text",Qa)})}else J.hide()}})}}}function EI(a,i,t){var s={fillOpacity:(0,b.UM)(a.attr("fillOpacity"))?1:a.attr("fillOpacity"),strokeOpacity:(0,b.UM)(a.attr("strokeOpacity"))?1:a.attr("strokeOpacity"),opacity:(0,b.UM)(a.attr("opacity"))?1:a.attr("opacity")};a.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),a.animate(s,i)}function mw(a,i,t){var s={fillOpacity:0,strokeOpacity:0,opacity:0},l=i.easing,f=i.duration,d=i.delay;a.animate(s,f,l,function(){a.remove(!0)},d)}function yw(a,i,t){var s,l=(0,A.CR)(i,2),f=l[0],d=l[1];return a.applyToMatrix([f,d,1]),t==="x"?(a.setMatrix(eo.vs(a.getMatrix(),[["t",-f,-d],["s",.01,1],["t",f,d]])),s=eo.vs(a.getMatrix(),[["t",-f,-d],["s",100,1],["t",f,d]])):t==="y"?(a.setMatrix(eo.vs(a.getMatrix(),[["t",-f,-d],["s",1,.01],["t",f,d]])),s=eo.vs(a.getMatrix(),[["t",-f,-d],["s",1,100],["t",f,d]])):t==="xy"&&(a.setMatrix(eo.vs(a.getMatrix(),[["t",-f,-d],["s",.01,.01],["t",f,d]])),s=eo.vs(a.getMatrix(),[["t",-f,-d],["s",100,100],["t",f,d]])),s}function X_(a,i,t,s,l){var f=t.start,d=t.end,m=t.getWidth(),x=t.getHeight(),T,O;l==="y"?(T=f.x+m/2,O=s.y<f.y?s.y:f.y):l==="x"?(T=s.x>f.x?s.x:f.x,O=f.y+x/2):l==="xy"&&(t.isPolar?(T=t.getCenter().x,O=t.getCenter().y):(T=(f.x+d.x)/2,O=(f.y+d.y)/2));var D=yw(a,[T,O],l);a.animate({matrix:D},i)}function _w(a,i,t){var s=t.coordinate,l=t.minYPoint;X_(a,i,s,l,"x")}function Bm(a,i,t){var s=t.coordinate,l=t.minYPoint;X_(a,i,s,l,"y")}function xw(a,i,t){var s=t.coordinate,l=t.minYPoint;X_(a,i,s,l,"xy")}function wI(a,i,t){var s=a.getTotalLength();a.attr("lineDash",[s]),a.animate(function(l){return{lineDashOffset:(1-l)*s}},i)}function bw(a,i,t){var s=t.toAttrs,l=s.x,f=s.y;delete s.x,delete s.y,a.attr(s),a.animate({x:l,y:f},i)}function Sw(a,i,t){var s=a.getBBox(),l=a.get("origin").mappingData,f=l.points,d=f[0].y-f[1].y>0?s.maxX:s.minX,m=(s.minY+s.maxY)/2;a.applyToMatrix([d,m,1]);var x=eo.vs(a.getMatrix(),[["t",-d,-m],["s",.01,1],["t",d,m]]);a.setMatrix(x),a.animate({matrix:eo.vs(a.getMatrix(),[["t",-d,-m],["s",100,1],["t",d,m]])},i)}function CI(a,i,t){var s=a.getBBox(),l=a.get("origin").mappingData,f=(s.minX+s.maxX)/2,d=l.points,m=d[0].y-d[1].y<=0?s.maxY:s.minY;a.applyToMatrix([f,m,1]);var x=eo.vs(a.getMatrix(),[["t",-f,-m],["s",1,.01],["t",f,m]]);a.setMatrix(x),a.animate({matrix:eo.vs(a.getMatrix(),[["t",-f,-m],["s",1,100],["t",f,m]])},i)}function Ew(a,i){var t,s=pd(a,i),l=s.startAngle,f=s.endAngle;return!(0,b.vQ)(l,-Math.PI*.5)&&l<-Math.PI*.5&&(l+=Math.PI*2),!(0,b.vQ)(f,-Math.PI*.5)&&f<-Math.PI*.5&&(f+=Math.PI*2),i[5]===0&&(t=(0,A.CR)([f,l],2),l=t[0],f=t[1]),(0,b.vQ)(l,Math.PI*1.5)&&(l=Math.PI*-.5),(0,b.vQ)(f,Math.PI*-.5)&&!(0,b.vQ)(l,f)&&(f=Math.PI*1.5),{startAngle:l,endAngle:f}}function ww(a){var i;return a[0]==="M"||a[0]==="L"?i=[a[1],a[2]]:(a[0]==="a"||a[0]==="A"||a[0]==="C")&&(i=[a[a.length-2],a[a.length-1]]),i}function xb(a){var i,t,s,l=a.filter(function(gt){return gt[0]==="A"||gt[0]==="a"});if(l.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var f=l[0],d=l.length>1?l[1]:l[0],m=a.indexOf(f),x=a.indexOf(d),T=ww(a[m-1]),O=ww(a[x-1]),D=Ew(T,f),B=D.startAngle,U=D.endAngle,J=Ew(O,d),pe=J.startAngle,Ee=J.endAngle;(0,b.vQ)(B,pe)&&(0,b.vQ)(U,Ee)?(t=B,s=U):(t=Math.min(B,pe),s=Math.max(U,Ee));var Ce=f[1],st=l[l.length-1][1];return Ce<st?(i=(0,A.CR)([st,Ce],2),Ce=i[0],st=i[1]):Ce===st&&(st=0),{startAngle:t,endAngle:s,radius:Ce,innerRadius:st}}function Cw(a,i,t){var s=t.toAttrs,l=t.coordinate,f=s.path||[],d=f.map(function(st){return st[0]});if(!(f.length<1)){var m=xb(f),x=m.startAngle,T=m.endAngle,O=m.radius,D=m.innerRadius,B=xb(a.attr("path")),U=B.startAngle,J=B.endAngle,pe=l.getCenter(),Ee=x-U,Ce=T-J;if(Ee===0&&Ce===0){a.attr("path",f);return}a.animate(function(st){var gt=U+st*Ee,bt=J+st*Ce;return(0,A.pi)((0,A.pi)({},s),{path:(0,b.Xy)(d,["M","A","A","Z"])?rf(pe.x,pe.y,O,gt,bt):Zf(pe.x,pe.y,O,gt,bt,D)})},(0,A.pi)((0,A.pi)({},i),{callback:function(){a.attr("path",f),(0,b.mf)(i.callback)&&i.callback()}}))}}function Tw(a,i,t){var s=Rv(t.coordinate,20),l=s.type,f=s.startState,d=s.endState,m=a.setClip({type:l,attrs:f});t.toAttrs&&a.attr(t.toAttrs),m.animate(d,(0,A.pi)((0,A.pi)({},i),{callback:function(){a&&!a.get("destroyed")&&a.set("clipShape",null),m.remove(!0),(0,b.mf)(i.callback)&&i.callback()}}))}function iy(a,i,t){if(a.isGroup())(0,b.S6)(a.getChildren(),function(m){iy(m,i,t)});else{var s=a.getBBox(),l=(s.minX+s.maxX)/2,f=(s.minY+s.maxY)/2;if(a.applyToMatrix([l,f,1]),t==="zoomIn"){var d=eo.vs(a.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]]);a.setMatrix(d),a.animate({matrix:eo.vs(a.getMatrix(),[["t",-l,-f],["s",100,100],["t",l,f]])},i)}else a.animate({matrix:eo.vs(a.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]])},(0,A.pi)((0,A.pi)({},i),{callback:function(){a.remove(!0),(0,b.mf)(i.callback)&&i.callback()}}))}}function Aw(a,i,t){iy(a,i,"zoomIn")}function TI(a,i,t){iy(a,i,"zoomOut")}function ov(a){return[le.TOP,le.BOTTOM].includes(a)?{offsetX:0,offsetY:a===le.TOP?-8:8,style:{textAlign:"center",textBaseline:a===le.TOP?"bottom":"top"}}:[le.LEFT,le.RIGHT].includes(a)?{offsetX:a===le.LEFT?-8:8,offsetY:0,style:{textAlign:a===le.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function bb(a,i,t){return{x:a.x+i*Math.cos(t),y:a.y+i*Math.sin(t)}}var Mw=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.getRegion=function(t,s){var l=.5,f={x:.5,y:.5},d=Math.PI*2/t,m=-1*Math.PI/2+d*s,x=l/(1+1/Math.sin(d/2)),T=bb(f,l-x,m),O=Math.PI*5/4,D=Math.PI*1/4;return{start:bb(T,x,O),end:bb(T,x,D)}},i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.beforeEachView=function(t,s){},i.prototype.generateFacets=function(t){var s=this,l=this.cfg,f=l.fields,d=l.type,m=(0,A.CR)(f,1),x=m[0];if(!x)throw new Error("No `fields` specified!");var T=this.getFieldValues(t,x),O=T.length,D=[];return T.forEach(function(B,U){var J=[{field:x,value:B,values:T}],pe=(0,b.hX)(t,s.getFacetDataFilter(J)),Ee={type:d,data:pe,region:s.getRegion(O,U),columnValue:B,columnField:x,columnIndex:U,columnValuesLength:O,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};D.push(Ee)}),D},i.prototype.getXAxisOption=function(t,s,l,f){return l},i.prototype.getYAxisOption=function(t,s,l,f){return l},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,b.U2)(t.cfg.title,"formatter"),m=(0,b.b$)({position:["50%","0%"],content:d?d(l):l},ov(le.TOP),t.cfg.title);f.annotation().text(m)})},i}(Wn),AI=Mw,Rw=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.beforeEachView=function(t,s){},i.prototype.generateFacets=function(t){var s=this,l=this.cfg.fields,f=this.cfg.cols,d=(0,A.CR)(l,1),m=d[0];if(!m)throw new Error("No `fields` specified!");var x=this.getFieldValues(t,m),T=x.length;f=f||T;var O=this.getPageCount(T,f),D=[];return x.forEach(function(B,U){var J=s.getRowCol(U,f),pe=J.row,Ee=J.col,Ce=[{field:m,value:B,values:x}],st=(0,b.hX)(t,s.getFacetDataFilter(Ce)),gt={type:s.cfg.type,data:st,region:s.getRegion(O,f,Ee,pe),columnValue:B,rowValue:B,columnField:m,rowField:null,columnIndex:Ee,rowIndex:pe,columnValuesLength:f,rowValuesLength:O,total:T};D.push(gt)}),D},i.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1&&f.columnValuesLength*f.rowIndex+f.columnIndex+1+f.columnValuesLength<=f.total?(0,A.pi)((0,A.pi)({},l),{label:null,title:null}):l},i.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):l},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,b.U2)(t.cfg.title,"formatter"),m=(0,b.b$)({position:["50%","0%"],content:d?d(l):l},ov(le.TOP),t.cfg.title);f.annotation().text(m)})},i.prototype.getPageCount=function(t,s){return Math.floor((t+s-1)/s)},i.prototype.getRowCol=function(t,s){var l=Math.floor(t/s),f=t%s;return{row:l,col:f}},i}(Wn),MI=Rw,RI=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,A.pi)({},a.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,A.pi)({},a.prototype.getDefaultTitleCfg.call(this))})},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.beforeEachView=function(t,s){},i.prototype.generateFacets=function(t){for(var s=this.cfg,l=s.fields,f=s.type,d=l.length,m=d,x=[],T=0;T<m;T++)for(var O=l[T],D=0;D<d;D++){var B=l[D],U={type:f,data:t,region:this.getRegion(d,m,T,D),columnValue:O,rowValue:B,columnField:O,rowField:B,columnIndex:T,rowIndex:D,columnValuesLength:m,rowValuesLength:d};x.push(U)}return x},i.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,A.pi)((0,A.pi)({},l),{label:null,title:null}):l},i.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):l},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.rowValuesLength,T=s.columnValue,O=s.rowValue,D=s.view;if(d===0){var B=(0,b.U2)(t.cfg.columnTitle,"formatter"),U=(0,b.b$)({position:["50%","0%"],content:B?B(T):T},ov(le.TOP),t.cfg.columnTitle);D.annotation().text(U)}if(f===m-1){var B=(0,b.U2)(t.cfg.rowTitle,"formatter"),U=(0,b.b$)({position:["100%","50%"],content:B?B(O):O},ov(le.RIGHT),t.cfg.rowTitle);D.annotation().text(U)}})},i}(Wn),ay=RI,Iw=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this),transpose:!1})},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.beforeEachView=function(t,s){this.cfg.transpose?s.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():s.rowIndex%2!==0&&t.coordinate().reflect("y")},i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.generateFacets=function(t){var s=this,l=(0,A.CR)(this.cfg.fields,1),f=l[0],d=[],m=1,x=1,T=[""],O=[""],D,B;return this.cfg.transpose?(D=f,T=this.getFieldValues(t,D).slice(0,2),m=T.length):(B=f,O=this.getFieldValues(t,B).slice(0,2),x=O.length),T.forEach(function(U,J){O.forEach(function(pe,Ee){var Ce=[{field:D,value:U,values:T},{field:B,value:pe,values:O}],st=(0,b.hX)(t,s.getFacetDataFilter(Ce)),gt={type:s.cfg.type,data:st,region:s.getRegion(x,m,J,Ee),columnValue:U,rowValue:pe,columnField:D,rowField:B,columnIndex:J,rowIndex:Ee,columnValuesLength:m,rowValuesLength:x};d.push(gt)})}),d},i.prototype.getXAxisOption=function(t,s,l,f){return f.columnIndex===1||f.rowIndex===1?(0,A.pi)((0,A.pi)({},l),{label:null,title:null}):l},i.prototype.getYAxisOption=function(t,s,l,f){return l},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s,l){var f=s.columnValue,d=s.rowValue,m=s.view,x=(0,b.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var T=(0,b.b$)({position:["50%","0%"],content:x?x(f):f},ov(le.TOP),t.cfg.title);m.annotation().text(T)}else{var T=(0,b.b$)({position:["100%","50%"],content:x?x(d):d},ov(le.RIGHT),t.cfg.title);m.annotation().text(T)}})},i}(Wn),Sb=Iw,kB=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.beforeEachView=function(t,s){},i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,A.pi)({},a.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,A.pi)({},a.prototype.getDefaultTitleCfg.call(this))})},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.generateFacets=function(t){var s=this,l=(0,A.CR)(this.cfg.fields,2),f=l[0],d=l[1],m=[],x=1,T=1,O=[""],D=[""];return f&&(O=this.getFieldValues(t,f),x=O.length),d&&(D=this.getFieldValues(t,d),T=D.length),O.forEach(function(B,U){D.forEach(function(J,pe){var Ee=[{field:f,value:B,values:O},{field:d,value:J,values:D}],Ce=(0,b.hX)(t,s.getFacetDataFilter(Ee)),st={type:s.cfg.type,data:Ce,region:s.getRegion(T,x,U,pe),columnValue:B,rowValue:J,columnField:f,rowField:d,columnIndex:U,rowIndex:pe,columnValuesLength:x,rowValuesLength:T};m.push(st)})}),m},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.columnValue,T=s.rowValue,O=s.view;if(d===0){var D=(0,b.U2)(t.cfg.columnTitle,"formatter"),B=(0,b.b$)({position:["50%","0%"],content:D?D(x):x},ov(le.TOP),t.cfg.columnTitle);O.annotation().text(B)}if(f===m-1){var D=(0,b.U2)(t.cfg.rowTitle,"formatter"),B=(0,b.b$)({position:["100%","50%"],content:D?D(T):T},ov(le.RIGHT),t.cfg.rowTitle);O.annotation().text(B)}})},i.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):f.columnIndex!==Math.floor((f.columnValuesLength-1)/2)?(0,A.pi)((0,A.pi)({},l),{title:null}):l},i.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):f.rowIndex!==Math.floor((f.rowValuesLength-1)/2)?(0,A.pi)((0,A.pi)({},l),{title:null}):l},i}(Wn),Gf=kB,II=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return i.prototype.afterEachView=function(t,s){this.processAxis(t,s)},i.prototype.beforeEachView=function(t,s){},i.prototype.init=function(){a.prototype.init.call(this),this.view.on(Ne.AFTER_RENDER,this.afterChartRender)},i.prototype.getDefaultCfg=function(){return(0,b.b$)({},a.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},i.prototype.generateFacets=function(t){var s=this.cfg.fields;if(!s.length)throw new Error("Please specify for the fields for rootFacet!");var l=[],f={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return l.push(f),f.children=this.getChildFacets(t,1,l),this.setRegion(l),l},i.prototype.setRegion=function(t){var s=this;this.forceColIndex(t),t.forEach(function(l){l.region=s.getRegion(l.rowValuesLength,l.columnValuesLength,l.columnIndex,l.rowIndex)})},i.prototype.getRegion=function(t,s,l,f){var d=1/s,m=1/t,x={x:d*l,y:m*f},T={x:x.x+d,y:x.y+m*2/3};return{start:x,end:T}},i.prototype.forceColIndex=function(t){var s,l,f=this,d=[],m=0;t.forEach(function(J){f.isLeaf(J)&&(d.push(J),J.columnIndex=m,m++)}),d.forEach(function(J){J.columnValuesLength=d.length});for(var x=this.cfg.fields.length,T=x-1;T>=0;T--){var O=this.getFacetsByLevel(t,T);try{for(var D=(s=void 0,(0,A.XA)(O)),B=D.next();!B.done;B=D.next()){var U=B.value;this.isLeaf(U)||(U.originColIndex=U.columnIndex,U.columnIndex=this.getRegionIndex(U.children),U.columnValuesLength=d.length)}}catch(J){s={error:J}}finally{try{B&&!B.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}}},i.prototype.getFacetsByLevel=function(t,s){var l=[];return t.forEach(function(f){f.rowIndex===s&&l.push(f)}),l},i.prototype.getRegionIndex=function(t){var s=t[0],l=t[t.length-1];return(l.columnIndex-s.columnIndex)/2+s.columnIndex},i.prototype.isLeaf=function(t){return!t.children||!t.children.length},i.prototype.getRows=function(){return this.cfg.fields.length+1},i.prototype.getChildFacets=function(t,s,l){var f=this,d=this.cfg.fields,m=d.length;if(!(m<s)){var x=[],T=d[s-1],O=this.getFieldValues(t,T);return O.forEach(function(D,B){var U=[{field:T,value:D,values:O}],J=t.filter(f.getFacetDataFilter(U));if(J.length){var pe={type:f.cfg.type,data:J,region:null,columnValue:D,rowValue:"",columnField:T,rowField:"",columnIndex:B,rowValuesLength:f.getRows(),columnValuesLength:1,rowIndex:s,children:f.getChildFacets(J,s+1,l)};x.push(pe),l.push(pe)}}),x}},i.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.renderTitle=function(){var t=this;(0,b.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,b.U2)(t.cfg.title,"formatter"),m=(0,b.b$)({position:["50%","0%"],content:d?d(l):l},ov(le.TOP),t.cfg.title);f.annotation().text(m)})},i.prototype.drawLines=function(t){var s=this;t.forEach(function(l){if(!s.isLeaf(l)){var f=l.children;s.addFacetLines(l,f)}})},i.prototype.addFacetLines=function(t,s){var l=this,f=t.view,d=f.coordinateBBox,m={x:d.x+d.width/2,y:d.y+d.height};s.forEach(function(x){var T=x.view.coordinateBBox,O={x:T.bl.x+(T.tr.x-T.bl.x)/2,y:T.tr.y},D={x:m.x,y:m.y+(O.y-m.y)/2},B={x:O.x,y:D.y};l.drawLine([m,D,B,O])})},i.prototype.getPath=function(t){var s=[],l=this.cfg.line.smooth;return l?(s.push(["M",t[0].x,t[0].y]),s.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(f,d){d===0?s.push(["M",f.x,f.y]):s.push(["L",f.x,f.y])}),s},i.prototype.drawLine=function(t){var s=this.getPath(t),l=this.cfg.line.style;this.container.addShape("path",{attrs:(0,b.f0)({path:s},l)})},i.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):l},i.prototype.getYAxisOption=function(t,s,l,f){return f.originColIndex!==0&&f.columnIndex!==0?(0,A.pi)((0,A.pi)({},l),{title:null,label:null}):l},i}(Wn),OI=II;function Nm(a){var i=(0,A.ev)([],(0,A.CR)(a),!1);i.sort(function(s,l){return s-l});var t=i.length;return t===0?0:t%2===1?i[(t-1)/2]:(i[t/2]+i[t/2-1])/2}function PI(a){var i=(0,b.u4)(a,function(t,s){return t+=isNaN(s)||!(0,b.hj)(s)?0:s},0);return a.length===0?0:i/a.length}function Eb(a,i){if(!i)return null;var t;switch(a){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=i.isCategory?Nm(i.values.map(function(s,l){return l})):Nm(i.values);break}case"mean":{t=i.isCategory?(i.values.length-1)/2:PI(i.values);break}case"min":t=i.isCategory?0:i[a];break;case"max":t=i.isCategory?i.values.length-1:i[a];break;default:t=a;break}return i.scale(t)}var oy=["regionFilter","shape"],kI=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.cache=new Map,s.foregroundContainer=s.view.getLayer(te.FORE).addGroup(),s.backgroundContainer=s.view.getLayer(te.BG).addGroup(),s.option=[],s}return Object.defineProperty(i.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.layout=function(){this.update()},i.prototype.render=function(){},i.prototype.update=function(){var t=this;this.onAfterRender(function(){var l=new Map;(0,b.S6)(t.option,function(f){if((0,b.q9)(oy,f.type)){var d=t.updateOrCreate(f);d&&l.set(t.getCacheKey(f),d)}}),t.cache=t.syncCache(l)});var s=new Map;(0,b.S6)(this.option,function(l){if(!(0,b.q9)(oy,l.type)){var f=t.updateOrCreate(l);f&&s.set(t.getCacheKey(l),f)}}),this.cache=this.syncCache(s)},i.prototype.clear=function(t){t===void 0&&(t=!1),a.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},i.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},i.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},i.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},i.prototype.onAfterRender=function(t){var s=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(l){l.animateOption&&(l.once(Te.AFTER_DRAW_ANIMATE,function(){t()}),s=!0)}),s||this.view.getRootView().once(Ne.AFTER_RENDER,function(){t()})},i.prototype.createAnnotation=function(t){var s=t.type,l=W[(0,b.jC)(s)];if(l){var f=this.getAnnotationTheme(s),d=this.getAnnotationCfg(s,t,f);if(!d)return null;var m=new l(d);return{component:m,layer:this.isTop(d)?te.FORE:te.BG,direction:le.NONE,type:Ae.ANNOTATION,extra:t}}},i.prototype.annotation=function(t){this.option.push(t)},i.prototype.arc=function(t){return this.annotation((0,A.pi)({type:"arc"},t)),this},i.prototype.image=function(t){return this.annotation((0,A.pi)({type:"image"},t)),this},i.prototype.line=function(t){return this.annotation((0,A.pi)({type:"line"},t)),this},i.prototype.region=function(t){return this.annotation((0,A.pi)({type:"region"},t)),this},i.prototype.text=function(t){return this.annotation((0,A.pi)({type:"text"},t)),this},i.prototype.dataMarker=function(t){return this.annotation((0,A.pi)({type:"dataMarker"},t)),this},i.prototype.dataRegion=function(t){this.annotation((0,A.pi)({type:"dataRegion"},t))},i.prototype.regionFilter=function(t){this.annotation((0,A.pi)({type:"regionFilter"},t))},i.prototype.shape=function(t){this.annotation((0,A.pi)({type:"shape"},t))},i.prototype.html=function(t){this.annotation((0,A.pi)({type:"html"},t))},i.prototype.parsePosition=function(t){var s,l,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=(0,b.mf)(t)?t.call(null,f,d):t,x=0,T=0;if((0,b.kJ)(m)){var O=(0,A.CR)(m,2),D=O[0],B=O[1];if((0,b.HD)(D)&&D.indexOf("%")!==-1&&!isNaN(D.slice(0,-1)))return this.parsePercentPosition(m);x=Eb(D,f),T=Eb(B,Object.values(d)[0])}else if(!(0,b.UM)(m))try{for(var U=(0,A.XA)((0,b.XP)(m)),J=U.next();!J.done;J=U.next()){var pe=J.value,Ee=m[pe];pe===f.field&&(x=Eb(Ee,f)),d[pe]&&(T=Eb(Ee,d[pe]))}}catch(Ce){s={error:Ce}}finally{try{J&&!J.done&&(l=U.return)&&l.call(U)}finally{if(s)throw s.error}}return isNaN(x)||isNaN(T)?null:this.view.getCoordinate().convert({x,y:T})},i.prototype.getRegionPoints=function(t,s){var l=this,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=Object.values(d)[0],x=f.field,T=this.view.getData(),O=(0,b.kJ)(t)?t[0]:t[x],D=(0,b.kJ)(s)?s[0]:s[x],B=[],U;return(0,b.S6)(T,function(J,pe){if(J[x]===O&&(U=pe),pe>=U){var Ee=l.parsePosition([J[x],J[m.field]]);Ee&&B.push(Ee)}if(J[x]===D)return!1}),B},i.prototype.parsePercentPosition=function(t){var s=parseFloat(t[0])/100,l=parseFloat(t[1])/100,f=this.view.getCoordinate(),d=f.start,m=f.end,x={x:Math.min(d.x,m.x),y:Math.min(d.y,m.y)},T=f.getWidth()*s+x.x,O=f.getHeight()*l+x.y;return{x:T,y:O}},i.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),s=t.start,l=t.end,f=t.getWidth(),d=t.getHeight(),m={x:Math.min(s.x,l.x),y:Math.min(s.y,l.y)};return{x:m.x,y:m.y,minX:m.x,minY:m.y,maxX:m.x+f,maxY:m.y+d,width:f,height:d}},i.prototype.getAnnotationCfg=function(t,s,l){var f=this,d=this.view.getCoordinate(),m=this.view.getCanvas(),x={};if((0,b.UM)(s))return null;var T=s.start,O=s.end,D=s.position,B=this.parsePosition(T),U=this.parsePosition(O),J=this.parsePosition(D);if(["arc","image","line","region","regionFilter"].includes(t)&&(!B||!U))return null;if(["text","dataMarker","html"].includes(t)&&!J)return null;if(t==="arc"){var pe=s,Ee=pe.start,Ce=pe.end,st=(0,A._T)(pe,["start","end"]),gt=Xd(d,B),bt=Xd(d,U);gt>bt&&(bt=Math.PI*2+bt),x=(0,A.pi)((0,A.pi)({},st),{center:d.getCenter(),radius:Wh(d,B),startAngle:gt,endAngle:bt})}else if(t==="image"){var Ft=s,xr=Ft.start,Fr=Ft.end,st=(0,A._T)(Ft,["start","end"]);x=(0,A.pi)((0,A.pi)({},st),{start:B,end:U,src:s.src})}else if(t==="line"){var $r=s,yn=$r.start,cn=$r.end,st=(0,A._T)($r,["start","end"]);x=(0,A.pi)((0,A.pi)({},st),{start:B,end:U,text:(0,b.U2)(s,"text",null)})}else if(t==="region"){var Bn=s,hi=Bn.start,Hi=Bn.end,st=(0,A._T)(Bn,["start","end"]);x=(0,A.pi)((0,A.pi)({},st),{start:B,end:U})}else if(t==="text"){var aa=this.view.getData(),Qa=s,Hn=Qa.position,Fi=Qa.content,st=(0,A._T)(Qa,["position","content"]),na=Fi;(0,b.mf)(Fi)&&(na=Fi(aa)),x=(0,A.pi)((0,A.pi)((0,A.pi)({},J),st),{content:na})}else if(t==="dataMarker"){var zi=s,gi=zi.position,La=zi.point,So=zi.line,ao=zi.text,lo=zi.autoAdjust,Po=zi.direction,st=(0,A._T)(zi,["position","point","line","text","autoAdjust","direction"]);x=(0,A.pi)((0,A.pi)((0,A.pi)({},st),J),{coordinateBBox:this.getCoordinateBBox(),point:La,line:So,text:ao,autoAdjust:lo,direction:Po})}else if(t==="dataRegion"){var ms=s,pl=ms.start,ys=ms.end,Du=ms.region,ao=ms.text,Th=ms.lineLength,st=(0,A._T)(ms,["start","end","region","text","lineLength"]);x=(0,A.pi)((0,A.pi)({},st),{points:this.getRegionPoints(pl,ys),region:Du,text:ao,lineLength:Th})}else if(t==="regionFilter"){var Rd=s,Id=Rd.start,um=Rd.end,tR=Rd.apply,cx=Rd.color,st=(0,A._T)(Rd,["start","end","apply","color"]),fx=this.view.geometries,SE=[],EE=function(Od){Od&&(Od.isGroup()?Od.getChildren().forEach(function(n_){return EE(n_)}):SE.push(Od))};(0,b.S6)(fx,function(Od){tR?(0,b.FX)(tR,Od.type)&&(0,b.S6)(Od.elements,function(n_){EE(n_.shape)}):(0,b.S6)(Od.elements,function(n_){EE(n_.shape)})}),x=(0,A.pi)((0,A.pi)({},st),{color:cx,shapes:SE,start:B,end:U})}else if(t==="shape"){var rR=s,R5=rR.render,Vp=(0,A._T)(rR,["render"]),I5=function(P5){if((0,b.mf)(s.render))return R5(P5,f.view,{parsePosition:f.parsePosition.bind(f)})};x=(0,A.pi)((0,A.pi)({},Vp),{render:I5})}else if(t==="html"){var wE=s,f0=wE.html,t6=wE.position,Vp=(0,A._T)(wE,["html","position"]),O5=function(Od){return(0,b.mf)(f0)?f0(Od,f.view):f0};x=(0,A.pi)((0,A.pi)((0,A.pi)({},Vp),J),{parent:m.get("el").parentNode,html:O5})}var og=(0,b.b$)({},l,(0,A.pi)((0,A.pi)({},x),{top:s.top,style:s.style,offsetX:s.offsetX,offsetY:s.offsetY}));return t!=="html"&&(og.container=this.getComponentContainer(og)),og.animate=this.view.getOptions().animate&&og.animate&&(0,b.U2)(s,"animate",og.animate),og.animateOption=(0,b.b$)({},pr,og.animateOption,s.animateOption),og},i.prototype.isTop=function(t){return(0,b.U2)(t,"top",!0)},i.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},i.prototype.getAnnotationTheme=function(t){return(0,b.U2)(this.view.getTheme(),["components","annotation",t],{})},i.prototype.updateOrCreate=function(t){var s=this.cache.get(this.getCacheKey(t));if(s){var l=t.type,f=this.getAnnotationTheme(l),d=this.getAnnotationCfg(l,t,f);d&&Yl(d,["container"]),s.component.update((0,A.pi)((0,A.pi)({},d||{}),{visible:!!d})),(0,b.q9)(oy,t.type)&&s.component.render()}else s=this.createAnnotation(t),s&&(s.component.init(),(0,b.q9)(oy,t.type)&&s.component.render());return s},i.prototype.syncCache=function(t){var s=this,l=new Map(this.cache);return t.forEach(function(f,d){l.set(d,f)}),l.forEach(function(f,d){(0,b.sE)(s.option,function(m){return d===s.getCacheKey(m)})||(f.component.destroy(),l.delete(d))}),l},i.prototype.getCacheKey=function(t){return t},i}(Be),DB=kI;function Ow(a,i){var t=(0,b.b$)({},(0,b.U2)(a,["components","axis","common"]),(0,b.U2)(a,["components","axis",i]));return(0,b.U2)(t,["grid"],{})}function wb(a,i,t,s){var l=[],f=i.getTicks();return a.isPolar&&f.push({value:1,text:"",tickValue:""}),f.reduce(function(d,m,x){var T=m.value;if(s)l.push({points:[a.convert(t==="y"?{x:0,y:T}:{x:T,y:0}),a.convert(t==="y"?{x:1,y:T}:{x:T,y:1})]});else if(x){var O=d.value,D=(O+T)/2;l.push({points:[a.convert(t==="y"?{x:0,y:D}:{x:D,y:0}),a.convert(t==="y"?{x:1,y:D}:{x:D,y:1})]})}return m},f[0]),l}function Cb(a,i,t,s,l){var f=i.values.length,d=[],m=t.getTicks();return m.reduce(function(x,T){var O=x?x.value:T.value,D=T.value,B=(O+D)/2;return l==="x"?d.push({points:[a.convert({x:s?D:B,y:0}),a.convert({x:s?D:B,y:1})]}):d.push({points:(0,b.UI)(Array(f+1),function(U,J){return a.convert({x:J/f,y:s?D:B})})}),T},m[0]),d}function Pw(a,i){var t=(0,b.U2)(i,"grid");if(t===null)return!1;var s=(0,b.U2)(a,"grid");return!(t===void 0&&s===null)}var Ug=["container"],DI=(0,A.pi)((0,A.pi)({},pr),{appear:null}),LB=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.cache=new Map,s.gridContainer=s.view.getLayer(te.BG).addGroup(),s.gridForeContainer=s.view.getLayer(te.FORE).addGroup(),s.axisContainer=s.view.getLayer(te.BG).addGroup(),s.axisForeContainer=s.view.getLayer(te.FORE).addGroup(),s}return Object.defineProperty(i.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.render=function(){this.update()},i.prototype.layout=function(){var t=this,s=this.view.getCoordinate();(0,b.S6)(this.getComponents(),function(l){var f=l.component,d=l.direction,m=l.type,x=l.extra,T=x.dim,O=x.scale,D=x.alignTick,B;if(m===Ae.AXIS)s.isPolar?T==="x"?B=s.isTransposed?Yd(s,d):kn(s):T==="y"&&(B=s.isTransposed?kn(s):Yd(s,d)):B=Yd(s,d);else if(m===Ae.GRID)if(s.isPolar){var U=void 0;s.isTransposed?U=T==="x"?Cb(s,t.view.getYScales()[0],O,D,T):wb(s,O,T,D):U=T==="x"?wb(s,O,T,D):Cb(s,t.view.getXScale(),O,D,T),B={items:U,center:t.view.getCoordinate().getCenter()}}else B={items:wb(s,O,T,D)};f.update(B)})},i.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var s=new Map;this.cache.forEach(function(l,f){t.has(f)?s.set(f,l):l.component.destroy()}),this.cache=s},i.prototype.clear=function(){a.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},i.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},i.prototype.updateXAxes=function(t){var s=this.view.getXScale();if(!(!s||s.isIdentity)){var l=fn(this.option,s.field);if(l!==!1){var f=un(l,le.BOTTOM),d=te.BG,m="x",x=this.view.getCoordinate(),T=this.getId("axis",s.field),O=this.getId("grid",s.field);if(x.isRect){var D=this.cache.get(T);if(D){var B=this.getLineAxisCfg(s,l,f);Yl(B,Ug),D.component.update(B),t.set(T,D)}else D=this.createLineAxis(s,l,d,f,m),this.cache.set(T,D),t.set(T,D);var U=this.cache.get(O);if(U){var B=this.getLineGridCfg(s,l,f,m);Yl(B,Ug),U.component.update(B),t.set(O,U)}else U=this.createLineGrid(s,l,d,f,m),U&&(this.cache.set(O,U),t.set(O,U))}else if(x.isPolar){var D=this.cache.get(T);if(D){var B=x.isTransposed?this.getLineAxisCfg(s,l,le.RADIUS):this.getCircleAxisCfg(s,l,f);Yl(B,Ug),D.component.update(B),t.set(T,D)}else{if(x.isTransposed){if((0,b.o8)(l))return;D=this.createLineAxis(s,l,d,le.RADIUS,m)}else D=this.createCircleAxis(s,l,d,f,m);this.cache.set(T,D),t.set(T,D)}var U=this.cache.get(O);if(U){var B=x.isTransposed?this.getCircleGridCfg(s,l,le.RADIUS,m):this.getLineGridCfg(s,l,le.CIRCLE,m);Yl(B,Ug),U.component.update(B),t.set(O,U)}else{if(x.isTransposed){if((0,b.o8)(l))return;U=this.createCircleGrid(s,l,d,le.RADIUS,m)}else U=this.createLineGrid(s,l,d,le.CIRCLE,m);U&&(this.cache.set(O,U),t.set(O,U))}}}}},i.prototype.updateYAxes=function(t){var s=this,l=this.view.getYScales();(0,b.S6)(l,function(f,d){if(!(!f||f.isIdentity)){var m=f.field,x=fn(s.option,m);if(x!==!1){var T=te.BG,O="y",D=s.getId("axis",m),B=s.getId("grid",m),U=s.view.getCoordinate();if(U.isRect){var J=un(x,d===0?le.LEFT:le.RIGHT),pe=s.cache.get(D);if(pe){var Ee=s.getLineAxisCfg(f,x,J);Yl(Ee,Ug),pe.component.update(Ee),t.set(D,pe)}else pe=s.createLineAxis(f,x,T,J,O),s.cache.set(D,pe),t.set(D,pe);var Ce=s.cache.get(B);if(Ce){var Ee=s.getLineGridCfg(f,x,J,O);Yl(Ee,Ug),Ce.component.update(Ee),t.set(B,Ce)}else Ce=s.createLineGrid(f,x,T,J,O),Ce&&(s.cache.set(B,Ce),t.set(B,Ce))}else if(U.isPolar){var pe=s.cache.get(D);if(pe){var Ee=U.isTransposed?s.getCircleAxisCfg(f,x,le.CIRCLE):s.getLineAxisCfg(f,x,le.RADIUS);Yl(Ee,Ug),pe.component.update(Ee),t.set(D,pe)}else{if(U.isTransposed){if((0,b.o8)(x))return;pe=s.createCircleAxis(f,x,T,le.CIRCLE,O)}else pe=s.createLineAxis(f,x,T,le.RADIUS,O);s.cache.set(D,pe),t.set(D,pe)}var Ce=s.cache.get(B);if(Ce){var Ee=U.isTransposed?s.getLineGridCfg(f,x,le.CIRCLE,O):s.getCircleGridCfg(f,x,le.RADIUS,O);Yl(Ee,Ug),Ce.component.update(Ee),t.set(B,Ce)}else{if(U.isTransposed){if((0,b.o8)(x))return;Ce=s.createLineGrid(f,x,T,le.CIRCLE,O)}else Ce=s.createCircleGrid(f,x,T,le.RADIUS,O);Ce&&(s.cache.set(B,Ce),t.set(B,Ce))}}}}})},i.prototype.createLineAxis=function(t,s,l,f,d){var m={component:new xg(this.getLineAxisCfg(t,s,f)),layer:l,direction:f===le.RADIUS?le.NONE:f,type:Ae.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},i.prototype.createLineGrid=function(t,s,l,f,d){var m=this.getLineGridCfg(t,s,f,d);if(m){var x={component:new Gd(m),layer:l,direction:le.NONE,type:Ae.GRID,extra:{dim:d,scale:t,alignTick:(0,b.U2)(m,"alignTick",!0)}};return x.component.init(),x}},i.prototype.createCircleAxis=function(t,s,l,f,d){var m={component:new bg(this.getCircleAxisCfg(t,s,f)),layer:l,direction:f,type:Ae.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},i.prototype.createCircleGrid=function(t,s,l,f,d){var m=this.getCircleGridCfg(t,s,f,d);if(m){var x={component:new ad(m),layer:l,direction:le.NONE,type:Ae.GRID,extra:{dim:d,scale:t,alignTick:(0,b.U2)(m,"alignTick",!0)}};return x.component.init(),x}},i.prototype.getLineAxisCfg=function(t,s,l){var f=(0,b.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=Yd(d,l),x=ai(t,s),T=Ar(this.view.getTheme(),l),O=(0,b.U2)(s,["title"])?(0,b.b$)({title:{style:{text:x}}},{title:vn(this.view.getTheme(),l,s.title)},s):s,D=(0,b.b$)((0,A.pi)((0,A.pi)({container:f},m),{ticks:t.getTicks().map(function(gt){return{id:"".concat(gt.tickValue),name:gt.text,value:gt.value}}),verticalFactor:d.isPolar?tr(m,d.getCenter())*-1:tr(m,d.getCenter()),theme:T}),T,O),B=this.getAnimateCfg(D),U=B.animate,J=B.animateOption;D.animateOption=J,D.animate=U;var pe=ot(m),Ee=(0,b.U2)(D,"verticalLimitLength",pe?1/3:1/2);if(Ee<=1){var Ce=this.view.getCanvas().get("width"),st=this.view.getCanvas().get("height");D.verticalLimitLength=Ee*(pe?Ce:st)}return D},i.prototype.getLineGridCfg=function(t,s,l,f){if(Pw(Ar(this.view.getTheme(),l),s)){var d=Ow(this.view.getTheme(),l),m=(0,b.b$)({container:(0,b.U2)(s,["top"])?this.gridForeContainer:this.gridContainer},d,(0,b.U2)(s,"grid"),this.getAnimateCfg(s));return m.items=wb(this.view.getCoordinate(),t,f,(0,b.U2)(m,"alignTick",!0)),m}},i.prototype.getCircleAxisCfg=function(t,s,l){var f=(0,b.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=t.getTicks().map(function(pe){return{id:"".concat(pe.tickValue),name:pe.text,value:pe.value}});!t.isCategory&&Math.abs(d.endAngle-d.startAngle)===Math.PI*2&&m.length&&(m[m.length-1].name="");var x=ai(t,s),T=Ar(this.view.getTheme(),le.CIRCLE),O=(0,b.U2)(s,["title"])?(0,b.b$)({title:{style:{text:x}}},{title:vn(this.view.getTheme(),l,s.title)},s):s,D=(0,b.b$)((0,A.pi)((0,A.pi)({container:f},kn(this.view.getCoordinate())),{ticks:m,verticalFactor:1,theme:T}),T,O),B=this.getAnimateCfg(D),U=B.animate,J=B.animateOption;return D.animate=U,D.animateOption=J,D},i.prototype.getCircleGridCfg=function(t,s,l,f){if(Pw(Ar(this.view.getTheme(),l),s)){var d=Ow(this.view.getTheme(),le.RADIUS),m=(0,b.b$)({container:(0,b.U2)(s,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},d,(0,b.U2)(s,"grid"),this.getAnimateCfg(s)),x=(0,b.U2)(m,"alignTick",!0),T=f==="x"?this.view.getYScales()[0]:this.view.getXScale();return m.items=Cb(this.view.getCoordinate(),T,t,x,f),m}},i.prototype.getId=function(t,s){var l=this.view.getCoordinate();return"".concat(t,"-").concat(s,"-").concat(l.type)},i.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,b.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,b.b$)({},DI,t.animateOption):DI}},i}(Be),LI=LB;function sv(a,i,t){return t===le.TOP?[a.minX+a.width/2-i.width/2,a.minY]:t===le.BOTTOM?[a.minX+a.width/2-i.width/2,a.maxY-i.height]:t===le.LEFT?[a.minX,a.minY+a.height/2-i.height/2]:t===le.RIGHT?[a.maxX-i.width,a.minY+a.height/2-i.height/2]:t===le.TOP_LEFT||t===le.LEFT_TOP?[a.tl.x,a.tl.y]:t===le.TOP_RIGHT||t===le.RIGHT_TOP?[a.tr.x-i.width,a.tr.y]:t===le.BOTTOM_LEFT||t===le.LEFT_BOTTOM?[a.bl.x,a.bl.y-i.height]:t===le.BOTTOM_RIGHT||t===le.RIGHT_BOTTOM?[a.br.x-i.width,a.br.y-i.height]:[0,0]}function FB(a,i){if(i.isTransposed)switch(a){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return a}function kw(a){return a===DIRECTION.LEFT?DIRECTION.RIGHT:a===DIRECTION.RIGHT?DIRECTION.LEFT:a}function FI(a){return a===DIRECTION.TOP?DIRECTION.BOTTOM:a===DIRECTION.BOTTOM?DIRECTION.TOP:a}function BI(a,i){var t=i.matrix[0],s=i.matrix[4],l=a;return t<0&&(l=kw(l)),s<0&&(l=FI(l)),l}function BB(a,i){var t=a;return i.isReflect("x")&&(t=kw(t)),i.isReflect("y")&&(t=FI(t)),t}function NB(a,i){var t=a;return t=FB(t,i),t=BI(t,i),t=BB(t,i),t}function Dw(a,i){return(0,b.jn)(a)?a===!1?!1:{}:(0,b.U2)(a,[i],a)}function Y_(a){return(0,b.U2)(a,"position",le.BOTTOM)}var q_=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.container=s.view.getLayer(te.FORE).addGroup(),s}return Object.defineProperty(i.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.render=function(){this.update()},i.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,b.S6)(this.components,function(s){var l=s.component,f=s.direction,d=Pp(f),m=l.get("maxWidthRatio"),x=l.get("maxHeightRatio"),T=t.getCategoryLegendSizeCfg(d,m,x),O=l.get("maxWidth"),D=l.get("maxHeight");l.update({maxWidth:Math.min(T.maxWidth,O||0),maxHeight:Math.min(T.maxHeight,D||0)});var B=l.get("padding"),U=l.getLayoutBBox(),J=new ls(U.x,U.y,U.width,U.height).expand(B),pe=(0,A.CR)(sv(t.view.viewBBox,J,f),2),Ee=pe[0],Ce=pe[1],st=(0,A.CR)(sv(t.layoutBBox,J,f),2),gt=st[0],bt=st[1],Ft=0,xr=0;f.startsWith("top")||f.startsWith("bottom")?(Ft=Ee,xr=bt):(Ft=gt,xr=Ce),l.setLocation({x:Ft+B[3],y:xr+B[0]}),t.layoutBBox=t.layoutBBox.cut(J,f)})},i.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var s={},l=function(B,U,J){var pe=t.getId(J.field),Ee=t.getComponentById(pe);if(Ee){var Ce=void 0,st=Dw(t.option,J.field);st!==!1&&((0,b.U2)(st,"custom")?Ce=t.getCategoryCfg(B,U,J,st,!0):J.isLinear?Ce=t.getContinuousCfg(B,U,J,st):J.isCategory&&(Ce=t.getCategoryCfg(B,U,J,st))),Ce&&(Yl(Ce,["container"]),Ee.direction=Y_(st),Ee.component.update(Ce),s[pe]=!0)}else{var gt=t.createFieldLegend(B,U,J);gt&&(gt.component.init(),t.components.push(gt),s[pe]=!0)}};if((0,b.U2)(this.option,"custom")){var f="global-custom",d=this.getComponentById(f);if(d){var m=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Yl(m,["container"]),d.component.update(m),s[f]=!0}else{var x=this.createCustomLegend(void 0,void 0,void 0,this.option);if(x){x.init();var T=te.FORE,O=Y_(this.option);this.components.push({id:f,component:x,layer:T,direction:O,type:Ae.LEGEND,extra:void 0}),s[f]=!0}}}else this.loopLegends(l);var D=[];(0,b.S6)(this.getComponents(),function(B){s[B.id]?D.push(B):B.component.destroy()}),this.components=D},i.prototype.clear=function(){a.prototype.clear.call(this),this.container.clear()},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.container.remove(!0)},i.prototype.getGeometries=function(t){var s=this,l=t.geometries;return(0,b.S6)(t.views,function(f){l=l.concat(s.getGeometries(f))}),l},i.prototype.loopLegends=function(t){var s=this.view.getRootView()===this.view;if(s){var l=this.getGeometries(this.view),f={};(0,b.S6)(l,function(d){var m=d.getGroupAttributes();(0,b.S6)(m,function(x){var T=x.getScale(x.type);!T||T.type==="identity"||f[T.field]||(t(d,x,T),f[T.field]=!0)})})}},i.prototype.createFieldLegend=function(t,s,l){var f,d=Dw(this.option,l.field),m=te.FORE,x=Y_(d);if(d!==!1&&((0,b.U2)(d,"custom")?f=this.createCustomLegend(t,s,l,d):l.isLinear?f=this.createContinuousLegend(t,s,l,d):l.isCategory&&(f=this.createCategoryLegend(t,s,l,d))),f)return f.set("field",l.field),{id:this.getId(l.field),component:f,layer:m,direction:x,type:Ae.LEGEND,extra:{scale:l}}},i.prototype.createCustomLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f,!0);return new Bc(d)},i.prototype.createContinuousLegend=function(t,s,l,f){var d=this.getContinuousCfg(t,s,l,Yl(f,["value"]));return new jh(d)},i.prototype.createCategoryLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f);return new Bc(d)},i.prototype.getContinuousCfg=function(t,s,l,f){var d=l.getTicks(),m=(0,b.sE)(d,function(pe){return pe.value===0}),x=(0,b.sE)(d,function(pe){return pe.value===1}),T=d.map(function(pe){var Ee=pe.value,Ce=pe.tickValue,st=s.mapping(l.invert(Ee)).join("");return{value:Ce,attrValue:st,color:st,scaleValue:Ee}});m||T.push({value:l.min,attrValue:s.mapping(l.invert(0)).join(""),color:s.mapping(l.invert(0)).join(""),scaleValue:0}),x||T.push({value:l.max,attrValue:s.mapping(l.invert(1)).join(""),color:s.mapping(l.invert(1)).join(""),scaleValue:1}),T.sort(function(pe,Ee){return pe.value-Ee.value});var O={min:(0,b.YM)(T).value,max:(0,b.Z$)(T).value,colors:[],rail:{type:s.type},track:{}};s.type==="size"&&(O.track={style:{fill:s.type==="size"?this.view.getTheme().defaultColor:void 0}}),s.type==="color"&&(O.colors=T.map(function(pe){return pe.attrValue}));var D=this.container,B=Y_(f),U=Pp(B),J=(0,b.U2)(f,"title");return J&&(J=(0,b.b$)({text:yh(l)},J)),O.container=D,O.layout=U,O.title=J,O.animateOption=pr,this.mergeLegendCfg(O,f,"continuous")},i.prototype.getCategoryCfg=function(t,s,l,f,d){var m=this.container,x=(0,b.U2)(f,"position",le.BOTTOM),T=kp(this.view.getTheme(),x),O=(0,b.U2)(T,["marker"]),D=(0,b.U2)(f,"marker"),B=Pp(x),U=(0,b.U2)(T,["pageNavigator"]),J=(0,b.U2)(f,"pageNavigator"),pe=d?Qd(O,D,f.items):Kd(this.view,t,s,O,D),Ee=(0,b.U2)(f,"title");Ee&&(Ee=(0,b.b$)({text:l?yh(l):""},Ee));var Ce=(0,b.U2)(f,"maxWidthRatio"),st=(0,b.U2)(f,"maxHeightRatio"),gt=this.getCategoryLegendSizeCfg(B,Ce,st);gt.container=m,gt.layout=B,gt.items=pe,gt.title=Ee,gt.animateOption=pr,gt.pageNavigator=(0,b.b$)({},U,J);var bt=this.mergeLegendCfg(gt,f,x);bt.reversed&&bt.items.reverse();var Ft=(0,b.U2)(bt,"maxItemWidth");return Ft&&Ft<=1&&(bt.maxItemWidth=this.view.viewBBox.width*Ft),bt},i.prototype.mergeLegendCfg=function(t,s,l){var f=l.split("-")[0],d=kp(this.view.getTheme(),f);return(0,b.b$)({},d,t,s)},i.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},i.prototype.getComponentById=function(t){return(0,b.sE)(this.components,function(s){return s.id===t})},i.prototype.getCategoryLegendSizeCfg=function(t,s,l){s===void 0&&(s=yt),l===void 0&&(l=yt);var f=this.view.viewBBox,d=f.width,m=f.height;return t==="vertical"?{maxWidth:d*s,maxHeight:m}:{maxWidth:d,maxHeight:m*l}},i}(Be),zB=q_,UB=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.onChangeFn=b.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=(0,A.CR)(l,2),d=f[0],m=f[1];s.start=d,s.end=m,s.changeViewData(d,m)},s.container=s.view.getLayer(te.FORE).addGroup(),s.onChangeFn=(0,b.P2)(s.onValueChange,20,{leading:!0}),s.width=0,s.view.on(Ne.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ne.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(i.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),i.prototype.destroy=function(){a.prototype.destroy.call(this),this.view.off(Ne.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ne.BEFORE_CHANGE_SIZE,this.resetMeasure)},i.prototype.init=function(){},i.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),s=t.start,l=t.end;(0,b.UM)(this.start)&&(this.start=s,this.end=l);var f=this.view.getOptions().data;this.option&&!(0,b.xb)(f)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},i.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var s=this.view.coordinateBBox.width,l=this.slider.component.get("padding"),f=(0,A.CR)(l,4),d=f[0],m=f[1],x=f[2],T=f[3],O=this.slider.component.getLayoutBBox(),D=new ls(O.x,O.y,Math.min(O.width,s),O.height).expand(l),B=this.getMinMaxText(this.start,this.end),U=B.minText,J=B.maxText,pe=(0,A.CR)(sv(this.view.viewBBox,D,le.BOTTOM),2),Ee=pe[0],Ce=pe[1],st=(0,A.CR)(sv(this.view.coordinateBBox,D,le.BOTTOM),2),gt=st[0],bt=st[1];this.slider.component.update((0,A.pi)((0,A.pi)({},this.getSliderCfg()),{x:gt+T,y:Ce+d,width:this.width,start:this.start,end:this.end,minText:U,maxText:J})),this.view.viewBBox=this.view.viewBBox.cut(D,le.BOTTOM)}},i.prototype.update=function(){this.render()},i.prototype.createSlider=function(){var t=this.getSliderCfg(),s=new $l((0,A.pi)({container:this.container},t));return s.init(),{component:s,layer:te.FORE,direction:le.BOTTOM,type:Ae.SLIDER}},i.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var s=this.getMinMaxText(this.start,this.end),l=s.minText,f=s.maxText;t=(0,A.pi)((0,A.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:l,maxText:f})}return this.slider.component.update(t),this.slider},i.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},i.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,b.Kn)(this.option)){var s=(0,A.pi)({data:this.getData()},(0,b.U2)(this.option,"trendCfg",{}));t=(0,b.b$)({},t,this.getThemeOptions(),this.option),t=(0,A.pi)((0,A.pi)({},t),{trendCfg:s})}return t.start=(0,b.uZ)(Math.min((0,b.UM)(t.start)?0:t.start,(0,b.UM)(t.end)?1:t.end),0,1),t.end=(0,b.uZ)(Math.max((0,b.UM)(t.start)?0:t.start,(0,b.UM)(t.end)?1:t.end),0,1),t},i.prototype.getData=function(){var t=this.view.getOptions().data,s=(0,A.CR)(this.view.getYScales(),1),l=s[0],f=this.view.getGroupScales();if(f.length){var d=f[0],m=d.field,x=d.ticks;return t.reduce(function(T,O){return O[m]===x[0]&&T.push(O[l.field]),T},[])}return t.map(function(T){return T[l.field]||0})},i.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,b.U2)(t,["components","slider","common"],{})},i.prototype.getMinMaxText=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=!0,m=(0,b.I)(l,f.field);f.isLinear&&(m=m.sort());var x=d?m:m.reverse(),T=(0,b.dp)(l);if(!f||!T)return{};var O=(0,b.dp)(x),D=Math.round(t*(O-1)),B=Math.round(s*(O-1)),U=(0,b.U2)(x,[D]),J=(0,b.U2)(x,[B]),pe=this.getSliderCfg().formatter;return pe&&(U=pe(U,l[D],D),J=pe(J,l[B],B)),{minText:U,maxText:J}},i.prototype.changeViewData=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=(0,b.dp)(l);if(!(!f||!d)){var m=!0,x=(0,b.I)(l,f.field),T=this.view.getXScale().isLinear?x.sort(function(J,pe){return Number(J)-Number(pe)}):x,O=m?T:T.reverse(),D=(0,b.dp)(O),B=Math.round(t*(D-1)),U=Math.round(s*(D-1));this.view.filter(f.field,function(J,pe){var Ee=O.indexOf(J);return Ee>-1?Rp(Ee,B,U):!0}),this.view.render(!0)}},i.prototype.getComponents=function(){return this.slider?[this.slider]:[]},i.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},i}(Be),Zg=UB,tl=0,Bs=8,zm=32,ma=20,Tb=function(a){(0,A.ZT)(i,a);function i(t){var s=a.call(this,t)||this;return s.onChangeFn=b.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=l.ratio,d=s.getValidScrollbarCfg().animate;s.ratio=(0,b.uZ)(f,0,1);var m=s.view.getOptions().animate;d||s.view.animate(!1),s.changeViewData(s.getScrollRange(),!0),s.view.animate(m)},s.container=s.view.getLayer(te.FORE).addGroup(),s.onChangeFn=(0,b.P2)(s.onValueChange,20,{leading:!0}),s.trackLen=0,s.thumbLen=0,s.ratio=0,s.view.on(Ne.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ne.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(i.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),i.prototype.destroy=function(){a.prototype.destroy.call(this),this.view.off(Ne.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ne.BEFORE_CHANGE_SIZE,this.resetMeasure)},i.prototype.init=function(){},i.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},i.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var s=this.view.coordinateBBox.width,l=this.scrollbar.component.get("padding"),f=this.scrollbar.component.getLayoutBBox(),d=new ls(f.x,f.y,Math.min(f.width,s),f.height).expand(l),m=this.getScrollbarComponentCfg(),x=void 0,T=void 0;if(m.isHorizontal){var O=(0,A.CR)(sv(this.view.viewBBox,d,le.BOTTOM),2),D=O[0],B=O[1],U=(0,A.CR)(sv(this.view.coordinateBBox,d,le.BOTTOM),2),J=U[0],pe=U[1];x=J,T=B}else{var Ee=(0,A.CR)(sv(this.view.viewBBox,d,le.RIGHT),2),D=Ee[0],B=Ee[1],Ce=(0,A.CR)(sv(this.view.viewBBox,d,le.RIGHT),2),J=Ce[0],pe=Ce[1];x=J,T=B}x+=l[3],T+=l[0],this.trackLen?this.scrollbar.component.update((0,A.pi)((0,A.pi)({},m),{x,y:T,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,A.pi)((0,A.pi)({},m),{x,y:T})),this.view.viewBBox=this.view.viewBBox.cut(d,m.isHorizontal?le.BOTTOM:le.RIGHT)}},i.prototype.update=function(){this.render()},i.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},i.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},i.prototype.setValue=function(t){this.onValueChange({ratio:t})},i.prototype.getValue=function(){return this.ratio},i.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,b.U2)(t,["components","scrollbar","common"],{})},i.prototype.getScrollbarTheme=function(t){var s=(0,b.U2)(this.view.getTheme(),["components","scrollbar"]),l=t||{},f=l.thumbHighlightColor,d=(0,A._T)(l,["thumbHighlightColor"]);return{default:(0,b.b$)({},(0,b.U2)(s,["default","style"],{}),d),hover:(0,b.b$)({},(0,b.U2)(s,["hover","style"],{}),{thumbColor:f})}},i.prototype.measureScrollbar=function(){var t=this.view.getXScale(),s=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var l=this.getScrollbarComponentCfg(),f=l.trackLen,d=l.thumbLen;this.trackLen=f,this.thumbLen=d,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=s},i.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,b.uZ)(this.ratio,0,1)),s=Math.min(t+this.step-1,this.cnt-1);return[t,s]},i.prototype.changeViewData=function(t,s){var l=this,f=(0,A.CR)(t,2),d=f[0],m=f[1],x=this.getValidScrollbarCfg().type,T=x!=="vertical",O=(0,b.I)(this.data,this.xScaleCfg.field),D=this.view.getXScale().isLinear?O.sort(function(U,J){return Number(U)-Number(J)}):O,B=T?D:D.reverse();this.yScalesCfg.forEach(function(U){l.view.scale(U.field,{formatter:U.formatter,type:U.type,min:U.min,max:U.max,tickMethod:U.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(U){var J=B.indexOf(U);return J>-1?Rp(J,d,m):!0}),this.view.render(!0)},i.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,s=t!=="vertical",l=new mh((0,A.pi)((0,A.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return l.init(),{component:l,layer:te.FORE,direction:s?le.BOTTOM:le.RIGHT,type:Ae.SCROLLBAR}},i.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),s=this.trackLen?(0,A.pi)((0,A.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,A.pi)({},t);return this.scrollbar.component.update(s),this.scrollbar},i.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,s=this.getValidScrollbarCfg(),l=s.type,f=s.categorySize,d=l!=="vertical";return Math.floor((d?t.width:t.height)/f)},i.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),s=this.getScrollbarData(),l=(0,b.I)(s,t.field);return(0,b.dp)(l)},i.prototype.getScrollbarComponentCfg=function(){var t=this.view,s=t.coordinateBBox,l=t.viewBBox,f=this.getValidScrollbarCfg(),d=f.type,m=f.padding,x=f.width,T=f.height,O=f.style,D=d!=="vertical",B=(0,A.CR)(m,4),U=B[0],J=B[1],pe=B[2],Ee=B[3],Ce=D?{x:s.minX+Ee,y:l.maxY-T-pe}:{x:l.maxX-x-J,y:s.minY+U},st=this.getStep(),gt=this.getCnt(),bt=D?s.width-Ee-J:s.height-U-pe,Ft=Math.max(bt*(0,b.uZ)(st/gt,0,1),ma);return(0,A.pi)((0,A.pi)({},this.getThemeOptions()),{x:Ce.x,y:Ce.y,size:D?T:x,isHorizontal:D,trackLen:bt,thumbLen:Ft,thumbOffset:0,theme:this.getScrollbarTheme(O)})},i.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:zm,width:Bs,height:Bs,padding:[0,0,0,0],animate:!0,style:{}};return(0,b.Kn)(this.option)&&(t=(0,A.pi)((0,A.pi)({},t),this.option)),(!(0,b.Kn)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[tl,0,tl,0]:[0,tl,0,tl]),t},i.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),s=this.getValidScrollbarCfg(),l=this.view.getOptions().data||[];return t.isReflect("y")&&s.type==="vertical"&&(l=(0,A.ev)([],(0,A.CR)(l),!1).reverse()),l},i}(Be),K_=Tb,jc={fill:"#CCD6EC",opacity:.3};function NI(a,i,t){var s,l,f,d,m,x,T=Iu(a,i,t);if(T.length){T=(0,b.xH)(T);try{for(var O=(0,A.XA)(T),D=O.next();!D.done;D=O.next()){var B=D.value;try{for(var U=(f=void 0,(0,A.XA)(B)),J=U.next();!J.done;J=U.next()){var pe=J.value,Ee=pe.mappingData,Ce=Ee.x,st=Ee.y;pe.x=(0,b.kJ)(Ce)?Ce[Ce.length-1]:Ce,pe.y=(0,b.kJ)(st)?st[st.length-1]:st}}catch(cn){f={error:cn}}finally{try{J&&!J.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(cn){s={error:cn}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}var gt=t.shared;if(gt===!1&&T.length>1){var bt=T[0],Ft=Math.abs(i.y-bt[0].y);try{for(var xr=(0,A.XA)(T),Fr=xr.next();!Fr.done;Fr=xr.next()){var $r=Fr.value,yn=Math.abs(i.y-$r[0].y);yn<=Ft&&(bt=$r,Ft=yn)}}catch(cn){m={error:cn}}finally{try{Fr&&!Fr.done&&(x=xr.return)&&x.call(xr)}finally{if(m)throw m.error}}T=[bt]}return(0,b.jj)((0,b.xH)(T))}return[]}var zI=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.show=function(t){var s=this.context.view,l=this.context.event,f=s.getController("tooltip").getTooltipCfg(),d=NI(s,{x:l.x,y:l.y},f);if(!(0,b.Xy)(d,this.items)&&(this.items=d,d.length)){var m=s.getXScale().field,x=d[0].data[m],T=[],O=s.geometries;if((0,b.S6)(O,function(na){if(na.type==="interval"||na.type==="schema"){var zi=na.getElementsBy(function(gi){var La=gi.getData();return La[m]===x});T=T.concat(zi)}}),T.length){var D=s.getCoordinate(),B=T[0].shape.getCanvasBBox(),U=T[0].shape.getCanvasBBox(),J=B;(0,b.S6)(T,function(na){var zi=na.shape.getCanvasBBox();D.isTransposed?(zi.minY<B.minY&&(B=zi),zi.maxY>U.maxY&&(U=zi)):(zi.minX<B.minX&&(B=zi),zi.maxX>U.maxX&&(U=zi)),J.x=Math.min(zi.minX,J.minX),J.y=Math.min(zi.minY,J.minY),J.width=Math.max(zi.maxX,J.maxX)-J.x,J.height=Math.max(zi.maxY,J.maxY)-J.y});var pe=s.backgroundGroup,Ee=s.coordinateBBox,Ce=void 0;if(D.isRect){var st=s.getXScale(),gt=t||{},bt=gt.appendRatio,Ft=gt.appendWidth;(0,b.UM)(Ft)&&(bt=(0,b.UM)(bt)?st.isLinear?0:.25:bt,Ft=D.isTransposed?bt*U.height:bt*B.width);var xr=void 0,Fr=void 0,$r=void 0,yn=void 0;D.isTransposed?(xr=Ee.minX,Fr=Math.min(U.minY,B.minY)-Ft,$r=Ee.width,yn=J.height+Ft*2):(xr=Math.min(B.minX,U.minX)-Ft,Fr=Ee.minY,$r=J.width+Ft*2,yn=Ee.height),Ce=[["M",xr,Fr],["L",xr+$r,Fr],["L",xr+$r,Fr+yn],["L",xr,Fr+yn],["Z"]]}else{var cn=(0,b.YM)(T),Bn=(0,b.Z$)(T),hi=od(cn.getModel(),D).startAngle,Hi=od(Bn.getModel(),D).endAngle,aa=D.getCenter(),Qa=D.getRadius(),Hn=D.innerRadius*Qa;Ce=Zf(aa.x,aa.y,Qa,hi,Hi,Hn)}if(this.regionPath)this.regionPath.attr("path",Ce),this.regionPath.show();else{var Fi=(0,b.U2)(t,"style",jc);this.regionPath=pe.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,A.pi)((0,A.pi)({},Fi),{path:Ce})})}}}},i.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},i.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),a.prototype.destroy.call(this)},i}(Mn),UI=zI,ZI=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.show=function(){var t=this.context,s=t.event,l=t.view,f=l.isTooltipLocked();if(!f){var d=this.timeStamp,m=+new Date,x=(0,b.U2)(t.view.getOptions(),"tooltip.showDelay",16);if(m-d>x){var T=this.location,O={x:s.x,y:s.y};(!T||!(0,b.Xy)(T,O))&&this.showTooltip(l,O),this.timeStamp=m,this.location=O}}},i.prototype.hide=function(){var t=this.context.view,s=t.getController("tooltip"),l=this.context.event,f=l.clientX,d=l.clientY;s.isCursorEntered({x:f,y:d})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},i.prototype.showTooltip=function(t,s){t.showTooltip(s)},i.prototype.hideTooltip=function(t){t.hideTooltip()},i}(Mn),Ab=ZI,VI=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.showTooltip=function(t,s){var l=wr(t);(0,b.S6)(l,function(f){var d=sn(t,f,s);f.showTooltip(d)})},i.prototype.hideTooltip=function(t){var s=wr(t);(0,b.S6)(s,function(l){l.hideTooltip()})},i}(Ab),jI=VI,Mb=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.show=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date;if(f-l>16){var d=this.location,m={x:s.x,y:s.y};(!d||!(0,b.Xy)(d,m))&&this.showTooltip(m),this.timeStamp=f,this.location=m}},i.prototype.hide=function(){this.hideTooltip(),this.location=null},i.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=f.get("tip");this.tooltip.update((0,A.pi)({title:d},t)),this.tooltip.show()}},i.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=s.getTheme(),m=(0,b.U2)(d,["components","tooltip","domStyles"],{}),x=new $d({parent:l.get("el").parentNode,region:f,visible:!1,crosshairs:null,domStyles:(0,A.pi)({},(0,b.b$)({},m,(t={},t[Hl]={"max-width":"50%"},t[Pl]={"word-break":"break-all"},t)))});x.init(),x.setCapture(!1),this.tooltip=x},i}(Mn),HI=Mb,Lw=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="",t}return i.prototype.hasState=function(t){return t.hasState(this.stateName)},i.prototype.setElementState=function(t,s){t.setState(this.stateName,s)},i.prototype.setState=function(){this.setStateEnable(!0)},i.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},i.prototype.clearViewState=function(t){var s=this,l=Ts(t,this.stateName);(0,b.S6)(l,function(f){s.setElementState(f,!1)})},i}(Mn),Q_=Lw;function Fw(a){return(0,b.U2)(a.get("delegateObject"),"item")}var ZB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return i.prototype.isItemIgnore=function(t,s){var l=this.ignoreListItemStates,f=l.filter(function(d){return s.hasState(t,d)});return!!f.length},i.prototype.setStateByComponent=function(t,s,l){var f=this.context.view,d=t.get("field"),m=ba(f);this.setElementsStateByItem(m,d,s,l)},i.prototype.setStateByElement=function(t,s){this.setElementState(t,s)},i.prototype.isMathItem=function(t,s,l){var f=this.context.view,d=Zr(f,s),m=mu(t,s);return!(0,b.UM)(m)&&l.name===d.getText(m)},i.prototype.setElementsStateByItem=function(t,s,l,f){var d=this;(0,b.S6)(t,function(m){d.isMathItem(m,s,l)&&m.setState(d.stateName,f)})},i.prototype.setStateEnable=function(t){var s=ds(this.context);if(s)lu(this.context)&&this.setStateByElement(s,t);else{var l=Wo(this.context);if(Ys(l)){var f=l.item,d=l.component;if(f&&d&&!this.isItemIgnore(f,d)){var m=this.context.event.gEvent;if(m&&m.fromShape&&m.toShape&&Fw(m.fromShape)===Fw(m.toShape))return;this.setStateByComponent(d,f,t)}}}},i.prototype.toggle=function(){var t=ds(this.context);if(t){var s=t.hasState(this.stateName);this.setElementState(t,!s)}},i.prototype.reset=function(){this.setStateEnable(!1)},i}(Q_),Rb=ZB,WI=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(Rb),GI=WI,$I=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.cache={},t}return i.prototype.getColorScale=function(t,s){var l=s.geometry.getAttribute("color");if(!l)return null;var f=t.getScaleByField(l.getFields()[0]);return f},i.prototype.getLinkPath=function(t,s){var l=this.context.view,f=l.getCoordinate().isTransposed,d=t.shape.getCanvasBBox(),m=s.shape.getCanvasBBox(),x=f?[["M",d.minX,d.minY],["L",m.minX,m.maxY],["L",m.maxX,m.maxY],["L",d.maxX,d.minY],["Z"]]:[["M",d.maxX,d.minY],["L",m.minX,m.minY],["L",m.minX,m.maxY],["L",d.maxX,d.maxY],["Z"]];return x},i.prototype.addLinkShape=function(t,s,l,f){var d={opacity:.4,fill:s.shape.attr("fill")};t.addShape({type:"path",attrs:(0,A.pi)((0,A.pi)({},(0,b.b$)({},d,(0,b.mf)(f)?f(d,s):f)),{path:this.getLinkPath(s,l)})})},i.prototype.linkByElement=function(t,s){var l=this,f=this.context.view,d=this.getColorScale(f,t);if(d){var m=mu(t,d.field);if(!this.cache[m]){var x=Io(f,d.field,m),T=this.linkGroup,O=T.addGroup();this.cache[m]=O;var D=x.length;(0,b.S6)(x,function(B,U){if(U<D-1){var J=x[U+1];l.addLinkShape(O,B,J,s)}})}}},i.prototype.removeLink=function(t){var s=this.getColorScale(this.context.view,t);if(s){var l=mu(t,s.field);this.cache[l]&&(this.cache[l].remove(),this.cache[l]=null)}},i.prototype.link=function(t){var s=this.context;this.linkGroup||(this.linkGroup=s.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var l=ds(s);l&&this.linkByElement(l,t==null?void 0:t.style)},i.prototype.unlink=function(){var t=ds(this.context);t&&this.removeLink(t)},i.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},i}(Mn),XI=$I,YI=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return i.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},i.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},i.prototype.getIntersectElements=function(){var t=null;if(tu(this.context))t=cu(this.context,10);else{var s=this.startPoint,l=this.isStarted?this.getCurrentPoint():this.endPoint;if(!s||!l)return;var f={minX:Math.min(s.x,l.x),minY:Math.min(s.y,l.y),maxX:Math.max(s.x,l.x),maxY:Math.max(s.y,l.y)},d=this.context.view;t=_n(d,f)}return t},i.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var s=ba(this.context.view),l=this.getIntersectElements();l&&l.length?this.effectByRecord?this.setSiblingsStateByRecord(l,t):this.setElementsState(l,t,s):this.clear()}},i.prototype.setSiblingsStateByRecord=function(t,s){var l=this,f=this.context.view,d=wr(f),m=t.map(function(O){return O.getModel().data}),x=f.getXScale().field,T=f.getYScales()[0].field;(0,b.S6)(d,function(O){var D=ba(O),B=D.filter(function(U){var J=U.getModel().data;return Lr(m,J,x,T)});l.setElementsState(B,s,D)})},i.prototype.setSiblingsState=function(t){var s=this,l=this.context.view,f=wr(l);tu(this.context)&&(0,b.S6)(f,function(d){var m=ba(d),x=Zu(s.context,d,10);x&&x.length?s.setElementsState(x,t,m):s.clearViewState(d)})},i.prototype.setElementsState=function(t,s,l){var f=this;(0,b.S6)(l,function(d){t.includes(d)?f.setElementState(d,s):f.setElementState(d,!1)})},i.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},i.prototype.clear=function(){var t=this,s=this.context.view;if(this.effectSiblings){var l=wr(s);(0,b.S6)(l,function(f){t.clearViewState(f)})}else this.clearViewState(s)},i}(Q_),Ib=YI,qI=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(Ib),KI=qI,QI=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.setStateEnable=function(t){var s=ds(this.context);if(s){if(!lu(this.context))return;t?(this.clear(),this.setElementState(s,!0)):this.hasState(s)&&this.setElementState(s,!1)}},i.prototype.toggle=function(){var t=ds(this.context);if(t){var s=this.hasState(t);s||this.clear(),this.setElementState(t,!s)}},i.prototype.reset=function(){this.setStateEnable(!1)},i}(Q_),Ob=QI,JI=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(Ob),eO=JI,Um="inactive",sy="active";function Pb(a){var i=ba(a);(0,b.S6)(i,function(t){t.hasState(sy)&&t.setState(sy,!1),t.hasState(Um)&&t.setState(Um,!1)})}function Bw(a,i,t){(0,b.S6)(a,function(s){i(s)?(s.hasState(Um)&&s.setState(Um,!1),s.setState(sy,t)):(s.hasState(sy)&&s.setState(sy,!1),s.setState(Um,t))})}var Gv=_e.INACTIVE,uv=_e.ACTIVE,tO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=uv,t}return i.prototype.setElementsStateByItem=function(t,s,l,f){var d=this,m=function(x){return d.isMathItem(x,s,l)};this.setHighlightBy(t,m,f)},i.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Gv)&&t.setState(Gv,!1),t.setState(uv,!0)):t.hasState(uv)||t.setState(Gv,!0)},i.prototype.setHighlightBy=function(t,s,l){var f=this;if(l)(0,b.S6)(t,function(x){f.setElementHighlight(x,s)});else{var d=Ts(this.context.view,uv),m=!0;(0,b.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,b.S6)(t,function(x){s(x)&&(x.hasState(uv)&&x.setState(uv,!1),x.setState(Gv,!0))})}},i.prototype.setElementState=function(t,s){var l=this.context.view,f=ba(l);this.setHighlightBy(f,function(d){return t===d},s)},i.prototype.highlight=function(){this.setState()},i.prototype.clear=function(){var t=this.context.view;Pb(t)},i}(Rb),kb=tO,rO=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.setStateByElement=function(t,s){var l=this.context.view,f=t.geometry.getAttribute("color");if(f){var d=l.getScaleByField(f.getFields()[0]),m=mu(t,d.field),x=ba(l),T=x.filter(function(O){return mu(O,d.field)===m});this.setHighlightBy(x,function(O){return T.includes(O)},s)}},i}(kb),nO=rO,Nw=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Gv)&&t.setState(Gv,!1),t.setState(uv,!0)):(t.setState(Gv,!0),t.hasState(uv)&&t.setState(uv,!1))},i.prototype.setStateByElement=function(t,s){var l=this.context.view,f=l.getXScale(),d=mu(t,f.field),m=ba(l),x=m.filter(function(T){return mu(T,f.field)===d});this.setHighlightBy(m,function(T){return x.includes(T)},s)},i.prototype.toggle=function(){var t=ds(this.context);if(t){var s=t.hasState(this.stateName);this.setStateByElement(t,!s)}},i}(kb),iO=Nw,Ed;(function(a){a.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",a.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",a.BEFORE_CLEAR="element-range-highlight:beforeclear",a.AFTER_CLEAR="element-range-highlight:afterclear"})(Ed||(Ed={}));var aO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.clearViewState=function(t){Pb(t)},i.prototype.highlight=function(){var t=this.context,s=t.view,l=t.event,f=this.getIntersectElements(),d={view:s,event:l,highlightElements:f};s.emit(Ed.BEFORE_HIGHLIGHT,Xa.fromData(s,Ed.BEFORE_HIGHLIGHT,d)),this.setState(),s.emit(Ed.AFTER_HIGHLIGHT,Xa.fromData(s,Ed.AFTER_HIGHLIGHT,d))},i.prototype.clear=function(){var t=this.context.view;t.emit(Ed.BEFORE_CLEAR,Xa.fromData(t,Ed.BEFORE_CLEAR,{})),a.prototype.clear.call(this),t.emit(Ed.AFTER_CLEAR,Xa.fromData(t,Ed.AFTER_CLEAR,{}))},i.prototype.setElementsState=function(t,s,l){Bw(l,function(f){return t.indexOf(f)>=0},s)},i}(Ib),zw=aO,oO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.highlight=function(){this.setState()},i.prototype.setElementState=function(t,s){var l=this.context.view,f=ba(l);Bw(f,function(d){return t===d},s)},i.prototype.clear=function(){var t=this.context.view;Pb(t)},i}(Ob),Uw=oO,sO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(Ib),Zw=sO,Db=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(Rb),uO=Db,lO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(Ob),cO=lO,fO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return i.prototype.getTriggerListInfo=function(){var t=Wo(this.context),s=null;return Ys(t)&&(s={item:t.item,list:t.component}),s},i.prototype.getAllowComponents=function(){var t=this,s=this.context.view,l=$a(s),f=[];return(0,b.S6)(l,function(d){d.isList()&&t.allowSetStateByElement(d)&&f.push(d)}),f},i.prototype.hasState=function(t,s){return t.hasState(s,this.stateName)},i.prototype.clearAllComponentsState=function(){var t=this,s=this.getAllowComponents();(0,b.S6)(s,function(l){l.clearItemsState(t.stateName)})},i.prototype.allowSetStateByElement=function(t){var s=t.get("field");if(!s)return!1;if(this.cfg&&this.cfg.componentNames){var l=t.get("name");if(this.cfg.componentNames.indexOf(l)===-1)return!1}var f=this.context.view,d=Zr(f,s);return d&&d.isCategory},i.prototype.allowSetStateByItem=function(t,s){var l=this.ignoreItemStates;if(l.length){var f=l.filter(function(d){return s.hasState(t,d)});return f.length===0}return!0},i.prototype.setStateByElement=function(t,s,l){var f=t.get("field"),d=this.context.view,m=Zr(d,f),x=mu(s,f),T=m.getText(x);this.setItemsState(t,T,l)},i.prototype.setStateEnable=function(t){var s=this,l=ds(this.context);if(l){var f=this.getAllowComponents();(0,b.S6)(f,function(T){s.setStateByElement(T,l,t)})}else{var d=Wo(this.context);if(Ys(d)){var m=d.item,x=d.component;this.allowSetStateByElement(x)&&this.allowSetStateByItem(m,x)&&this.setItemState(x,m,t)}}},i.prototype.setItemsState=function(t,s,l){var f=this,d=t.getItems();(0,b.S6)(d,function(m){m.name===s&&f.setItemState(t,m,l)})},i.prototype.setItemState=function(t,s,l){t.setItemState(s,this.stateName,l)},i.prototype.setState=function(){this.setStateEnable(!0)},i.prototype.reset=function(){this.setStateEnable(!1)},i.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=this.hasState(s,l);this.setItemState(s,l,!f)}},i.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},i}(Mn),Vg=fO,hO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(Vg),Zm=hO,Vw="inactive",jw="active";function pO(a){var i=a.getItems();(0,b.S6)(i,function(t){a.hasState(t,jw)&&a.setItemState(t,jw,!1),a.hasState(t,Vw)&&a.setItemState(t,Vw,!1)})}var uy="inactive",jg="active",dO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=jg,t.ignoreItemStates=["unchecked"],t}return i.prototype.setItemsState=function(t,s,l){this.setHighlightBy(t,function(f){return f.name===s},l)},i.prototype.setItemState=function(t,s,l){var f=t.getItems();this.setHighlightBy(t,function(d){return d===s},l)},i.prototype.setHighlightBy=function(t,s,l){var f=t.getItems();if(l)(0,b.S6)(f,function(x){s(x)?(t.hasState(x,uy)&&t.setItemState(x,uy,!1),t.setItemState(x,jg,!0)):t.hasState(x,jg)||t.setItemState(x,uy,!0)});else{var d=t.getItemsByState(jg),m=!0;(0,b.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,b.S6)(f,function(x){s(x)&&(t.hasState(x,jg)&&t.setItemState(x,jg,!1),t.setItemState(x,uy,!0))})}},i.prototype.highlight=function(){this.setState()},i.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)pO(t.list);else{var s=this.getAllowComponents();(0,b.S6)(s,function(l){l.clearItemsState(jg),l.clearItemsState(uy)})}},i}(Vg),Lb=dO,vO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(Vg),J_=vO,gO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="unchecked",t}return i.prototype.unchecked=function(){this.setState()},i}(Vg),mO=gO,Hg="unchecked",Fb="checked",yO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=Fb,t}return i.prototype.setItemState=function(t,s,l){this.setCheckedBy(t,function(f){return f===s},l)},i.prototype.setCheckedBy=function(t,s,l){var f=t.getItems();l&&(0,b.S6)(f,function(d){s(d)?(t.hasState(d,Hg)&&t.setItemState(d,Hg,!1),t.setItemState(d,Fb,!0)):t.hasState(d,Fb)||t.setItemState(d,Hg,!0)})},i.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=!(0,b.G)(s.getItems(),function(d){return s.hasState(d,Hg)});f||s.hasState(l,Hg)?this.setItemState(s,l,!0):this.reset()}},i.prototype.checked=function(){this.setState()},i.prototype.reset=function(){var t=this.getAllowComponents();(0,b.S6)(t,function(s){s.clearItemsState(Fb),s.clearItemsState(Hg)})},i}(Vg),VB=yO,ly="unchecked",jB=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.toggle=function(){var t,s,l,f,d,m,x,T,O=this.getTriggerListInfo();if(O!=null&&O.item){var D=O.list,B=O.item,U=D.getItems(),J=U.filter(function(cn){return!D.hasState(cn,ly)}),pe=U.filter(function(cn){return D.hasState(cn,ly)}),Ee=J[0];if(U.length===J.length)try{for(var Ce=(0,A.XA)(U),st=Ce.next();!st.done;st=Ce.next()){var gt=st.value;D.setItemState(gt,ly,gt.id!==B.id)}}catch(cn){t={error:cn}}finally{try{st&&!st.done&&(s=Ce.return)&&s.call(Ce)}finally{if(t)throw t.error}}else if(U.length-pe.length===1)if(Ee.id===B.id)try{for(var bt=(0,A.XA)(U),Ft=bt.next();!Ft.done;Ft=bt.next()){var gt=Ft.value;D.setItemState(gt,ly,!1)}}catch(cn){l={error:cn}}finally{try{Ft&&!Ft.done&&(f=bt.return)&&f.call(bt)}finally{if(l)throw l.error}}else try{for(var xr=(0,A.XA)(U),Fr=xr.next();!Fr.done;Fr=xr.next()){var gt=Fr.value;D.setItemState(gt,ly,gt.id!==B.id)}}catch(cn){d={error:cn}}finally{try{Fr&&!Fr.done&&(m=xr.return)&&m.call(xr)}finally{if(d)throw d.error}}else try{for(var $r=(0,A.XA)(U),yn=$r.next();!yn.done;yn=$r.next()){var gt=yn.value;D.setItemState(gt,ly,gt.id!==B.id)}}catch(cn){x={error:cn}}finally{try{yn&&!yn.done&&(T=$r.return)&&T.call($r)}finally{if(x)throw x.error}}}},i}(Vg),_O=jB,Hw="showRadio",Wg="legend-radio-tip",HB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,Hw,!0)}},i.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,Hw,!1)}},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.showTip=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date,d=this.context.event.target;if(f-l>16&&d.get("name")==="legend-item-radio"){var m=this.location,x={x:s.x,y:s.y};this.timeStamp=f,this.location=x,(!m||!(0,b.Xy)(m,x))&&this.showTooltip(x)}},i.prototype.hideTip=function(){this.hideTooltip(),this.location=null},i.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=s.view.getCanvas().get("el").getBoundingClientRect(),m=d.x,x=d.y;this.tooltip.update((0,A.pi)((0,A.pi)({title:f.get("tip")},t),{x:t.x+m,y:t.y+x})),this.tooltip.show()}},i.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,s=(t={},t[Hl]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Pl]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(Wg)&&document.body.removeChild(document.getElementById(Wg));var l=new $d({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:s,containerId:Wg});l.init(),l.setCapture(!1),this.tooltip=l},i}(Vg),xO=HB,WB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return i.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},i.prototype.emitEvent=function(t){var s="mask:".concat(t),l=this.context.view,f=this.context.event;l.emit(s,{target:this.maskShape,shape:this.maskShape,points:this.points,x:f.x,y:f.y})},i.prototype.createMask=function(){var t=this.context.view,s=this.getMaskAttrs(),l=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,A.pi)({fill:"#C5D4EB",opacity:.3},s)});return l},i.prototype.getMaskPath=function(){return[]},i.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},i.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},i.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},i.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.points;(0,b.S6)(d,function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},i.prototype.updateMask=function(t){var s=(0,b.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(s)},i.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},i.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},i.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},i.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},i.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,a.prototype.destroy.call(this)},i}(Mn),Bb=WB;function Ww(a){var i=(0,b.Z$)(a),t=0,s=0,l=0;if(a.length){var f=a[0];t=$o(f,i)/2,s=(i.x+f.x)/2,l=(i.y+f.y)/2}return{x:s,y:l,r:t}}var bO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="circle",t}return i.prototype.getMaskAttrs=function(){return Ww(this.points)},i}(Bb),GB=bO;function Gw(a){return{start:(0,b.YM)(a),end:(0,b.Z$)(a)}}function SO(a,i){var t=Math.min(a.x,i.x),s=Math.min(a.y,i.y),l=Math.abs(i.x-a.x),f=Math.abs(i.y-a.y);return{x:t,y:s,width:l,height:f}}var $B=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="rect",t}return i.prototype.getRegion=function(){return Gw(this.points)},i.prototype.getMaskAttrs=function(){var t=this.getRegion(),s=t.start,l=t.end;return SO(s,l)},i}(Bb),EO=$B;function $w(a){a.x=(0,b.uZ)(a.x,0,1),a.y=(0,b.uZ)(a.y,0,1)}function Xw(a,i,t,s){var l=null,f=null,d=s.invert((0,b.YM)(a)),m=s.invert((0,b.Z$)(a));return t&&($w(d),$w(m)),i==="x"?(l=s.convert({x:d.x,y:0}),f=s.convert({x:m.x,y:1})):(l=s.convert({x:0,y:d.y}),f=s.convert({x:1,y:m.y})),{start:l,end:f}}var XB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return i.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return Xw(this.points,this.dim,this.inPlot,t)},i}(EO),Nb=XB;function Yw(a){var i=[];return a.length&&((0,b.S6)(a,function(t,s){s===0?i.push(["M",t.x,t.y]):i.push(["L",t.x,t.y])}),i.push(["L",a[0].x,a[0].y])),i}function qw(a){return{path:Yw(a)}}var YB=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getMaskPath=function(){return Yw(this.points)},i.prototype.getMaskAttrs=function(){return qw(this.points)},i.prototype.addPoint=function(){this.resize()},i}(Bb),Kw=YB;function zb(a){return Vt(a,!0)}function Ub(a){return{path:zb(a)}}var Qw=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getMaskPath=function(){return zb(this.points)},i.prototype.getMaskAttrs=function(){return Ub(this.points)},i}(Kw),lv=Qw,Jw=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return i.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},i.prototype.emitEvent=function(t){var s="".concat(this.maskType,":").concat(t),l=this.context.view,f=this.context.event,d={type:this.shapeType,name:this.maskType,get:function(m){return d.hasOwnProperty(m)?d[m]:void 0}};l.emit(s,{target:d,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:f.x,y:f.y})},i.prototype.createMask=function(t){var s=this.context.view,l=this.recordPoints[t],f=this.getMaskAttrs(l),d=s.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,A.pi)({fill:"#C5D4EB",opacity:.3},f)});this.maskShapes.push(d)},i.prototype.getMaskPath=function(t){return[]},i.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},i.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var s=this.recordPoints.length-1;this.createMask(s),this.updateShapesCapture(!1),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},i.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},i.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.getCurMaskShapeIndex();d>-1&&(this.recordPoints[d].forEach(function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},i.prototype.updateMask=function(t){var s=this;this.recordPoints.forEach(function(l,f){var d=(0,b.b$)({},s.getMaskAttrs(l),t);s.maskShapes[f].attr(d)})},i.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},i.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},i.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},i.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},i.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},i.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},i.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(s){return s.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},i.prototype.destroy=function(){this.clear(),a.prototype.destroy.call(this)},i.prototype.getRecordPoints=function(){var t;return(0,A.ev)([],(0,A.CR)((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},i.prototype.recordPointStart=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint();this.recordPoints=(0,A.ev)((0,A.ev)([],(0,A.CR)(t),!1),[[s]],!1)},i.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint(),l=t.splice(-1,1)[0]||[];l.push(s),this.recordPoints=(0,A.ev)((0,A.ev)([],(0,A.CR)(t),!1),[l],!1)},i.prototype.recordPointClear=function(){this.recordPoints=[]},i.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(s){return s.set("capture",t)})},i.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(s){var l=s.attrs,f=l.width,d=l.height,m=l.r,x=f===0||d===0||m===0;return!x&&s.isHit(t.x,t.y)})},i}(Mn),$f=Jw,qB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="rect",t}return i.prototype.getRegion=function(t){return Gw(t)},i.prototype.getMaskAttrs=function(t){var s=this.getRegion(t),l=s.start,f=s.end;return SO(l,f)},i}($f),wO=qB,CO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return i.prototype.getRegion=function(t){var s=this.context.view.getCoordinate();return Xw(t,this.dim,this.inPlot,s)},i}(wO),TO=CO,KB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=Ww,t}return i}($f),AO=KB,QB=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.getMaskPath=Yw,t.getMaskAttrs=qw,t}return i.prototype.addPoint=function(){this.resize()},i}($f),MO=QB,RO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.getMaskPath=zb,t.getMaskAttrs=Ub,t}return i}(MO),JB=RO,e4=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.setCursor=function(t){var s=this.context.view;s.getCanvas().setCursor(t)},i.prototype.default=function(){this.setCursor("default")},i.prototype.pointer=function(){this.setCursor("pointer")},i.prototype.move=function(){this.setCursor("move")},i.prototype.crosshair=function(){this.setCursor("crosshair")},i.prototype.wait=function(){this.setCursor("wait")},i.prototype.help=function(){this.setCursor("help")},i.prototype.text=function(){this.setCursor("text")},i.prototype.eResize=function(){this.setCursor("e-resize")},i.prototype.wResize=function(){this.setCursor("w-resize")},i.prototype.nResize=function(){this.setCursor("n-resize")},i.prototype.sResize=function(){this.setCursor("s-resize")},i.prototype.neResize=function(){this.setCursor("ne-resize")},i.prototype.nwResize=function(){this.setCursor("nw-resize")},i.prototype.seResize=function(){this.setCursor("se-resize")},i.prototype.swResize=function(){this.setCursor("sw-resize")},i.prototype.nsResize=function(){this.setCursor("ns-resize")},i.prototype.ewResize=function(){this.setCursor("ew-resize")},i.prototype.zoomIn=function(){this.setCursor("zoom-in")},i.prototype.zoomOut=function(){this.setCursor("zoom-out")},i}(Mn),IO=e4,OO=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.filterView=function(t,s,l){var f=this;t.getScaleByField(s)&&t.filter(s,l),t.views&&t.views.length&&(0,b.S6)(t.views,function(d){f.filterView(d,s,l)})},i.prototype.filter=function(){var t=Wo(this.context);if(t){var s=this.context.view,l=t.component,f=l.get("field");if(Ys(t)){if(f){var d=l.getItemsByState("unchecked"),m=Zr(s,f),x=d.map(function(U){return U.name});x.length?this.filterView(s,f,function(U){var J=m.getText(U);return!x.includes(J)}):this.filterView(s,f,null),s.render(!0)}}else if(Hs(t)){var T=l.getValue(),O=(0,A.CR)(T,2),D=O[0],B=O[1];this.filterView(s,f,function(U){return U>=D&&U<=B}),s.render(!0)}}},i}(Mn),PO=OO;function kO(a,i,t,s){var l=Math.min(t[i],s[i]),f=Math.max(t[i],s[i]),d=(0,A.CR)(a.range,2),m=d[0],x=d[1];if(l<m&&(l=m),f>x&&(f=x),l===x&&f===x)return null;var T=a.invert(l),O=a.invert(f);if(a.isCategory){var D=a.values.indexOf(T),B=a.values.indexOf(O),U=a.values.slice(D,B+1);return function(J){return U.includes(J)}}else return function(J){return J>=T&&J<=O}}var Sh;(function(a){a.FILTER="brush-filter-processing",a.RESET="brush-filter-reset",a.BEFORE_FILTER="brush-filter:beforefilter",a.AFTER_FILTER="brush-filter:afterfilter",a.BEFORE_RESET="brush-filter:beforereset",a.AFTER_RESET="brush-filter:afterreset"})(Sh||(Sh={}));var t4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return i.prototype.hasDim=function(t){return this.dims.includes(t)},i.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},i.prototype.filter=function(){var t,s;if(tu(this.context)){var l=this.context.event.target,f=l.getCanvasBBox();t={x:f.x,y:f.y},s={x:f.maxX,y:f.maxY}}else{if(!this.isStarted)return;t=this.startPoint,s=this.context.getCurrentPoint()}if(!(Math.abs(t.x-s.x)<5||Math.abs(t.x-s.y)<5)){var d=this.context,m=d.view,x=d.event,T={view:m,event:x,dims:this.dims};m.emit(Sh.BEFORE_FILTER,Xa.fromData(m,Sh.BEFORE_FILTER,T));var O=m.getCoordinate(),D=O.invert(s),B=O.invert(t);if(this.hasDim("x")){var U=m.getXScale(),J=kO(U,"x",D,B);this.filterView(m,U.field,J)}if(this.hasDim("y")){var pe=m.getYScales()[0],J=kO(pe,"y",D,B);this.filterView(m,pe.field,J)}this.reRender(m,{source:Sh.FILTER}),m.emit(Sh.AFTER_FILTER,Xa.fromData(m,Sh.AFTER_FILTER,T))}},i.prototype.end=function(){this.isStarted=!1},i.prototype.reset=function(){var t=this.context.view;if(t.emit(Sh.BEFORE_RESET,Xa.fromData(t,Sh.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var s=t.getXScale();this.filterView(t,s.field,null)}if(this.hasDim("y")){var l=t.getYScales()[0];this.filterView(t,l.field,null)}this.reRender(t,{source:Sh.RESET}),t.emit(Sh.AFTER_RESET,Xa.fromData(t,Sh.AFTER_RESET,{}))},i.prototype.filterView=function(t,s,l){t.filter(s,l)},i.prototype.reRender=function(t,s){t.render(!0,s)},i}(Mn),e1=t4,r4=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.filterView=function(t,s,l){var f=wr(t);(0,b.S6)(f,function(d){d.filter(s,l)})},i.prototype.reRender=function(t){var s=wr(t);(0,b.S6)(s,function(l){l.render(!0)})},i}(e1),eC=r4,DO=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.filter=function(){var t=Wo(this.context),s=this.context.view,l=ba(s);if(tu(this.context)){var f=cu(this.context,10);f&&(0,b.S6)(l,function(pe){f.includes(pe)?pe.show():pe.hide()})}else if(t){var d=t.component,m=d.get("field");if(Ys(t)){if(m){var x=d.getItemsByState("unchecked"),T=Zr(s,m),O=x.map(function(pe){return pe.name});(0,b.S6)(l,function(pe){var Ee=mu(pe,m),Ce=T.getText(Ee);O.indexOf(Ce)>=0?pe.hide():pe.show()})}}else if(Hs(t)){var D=d.getValue(),B=(0,A.CR)(D,2),U=B[0],J=B[1];(0,b.S6)(l,function(pe){var Ee=mu(pe,m);Ee>=U&&Ee<=J?pe.show():pe.hide()})}}},i.prototype.clear=function(){var t=ba(this.context.view);(0,b.S6)(t,function(s){s.show()})},i.prototype.reset=function(){this.clear()},i}(Mn),n4=DO,LO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.byRecord=!1,t}return i.prototype.filter=function(){tu(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},i.prototype.filterByRecord=function(){var t=this.context.view,s=cu(this.context,10);if(s){var l=t.getXScale().field,f=t.getYScales()[0].field,d=s.map(function(x){return x.getModel().data}),m=wr(t);(0,b.S6)(m,function(x){var T=ba(x);(0,b.S6)(T,function(O){var D=O.getModel().data;Lr(d,D,l,f)?O.show():O.hide()})})}},i.prototype.filterByBBox=function(){var t=this,s=this.context.view,l=wr(s);(0,b.S6)(l,function(f){var d=Zu(t.context,f,10),m=ba(f);d&&(0,b.S6)(m,function(x){d.includes(x)?x.show():x.hide()})})},i.prototype.reset=function(){var t=wr(this.context.view);(0,b.S6)(t,function(s){var l=ba(s);(0,b.S6)(l,function(f){f.show()})})},i}(Mn),tC=LO,FO=10,$v=5,rC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return i.prototype.getButtonCfg=function(){return(0,b.b$)(this.buttonCfg,this.cfg)},i.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=s.addShape({type:"text",name:"button-text",attrs:(0,A.pi)({text:t.text},t.textStyle)}),f=l.getBBox(),d=Vf(t.padding),m=s.addShape({type:"rect",name:"button-rect",attrs:(0,A.pi)({x:f.x-d[3],y:f.y-d[0],width:f.width+d[1]+d[3],height:f.height+d[0]+d[2]},t.style)});m.toBack(),s.on("mouseenter",function(){m.attr(t.activeStyle)}),s.on("mouseleave",function(){m.attr(t.style)}),this.buttonGroup=s},i.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=eo.vs(null,[["t",l.x-d.width-FO,l.y+d.height+$v]]);f.setMatrix(m)},i.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},i.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},i.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),a.prototype.destroy.call(this)},i}(Mn),nC=rC,iC=4,BO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return i.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},i.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),s=this.context.view,l=this.context.event;this.dragStart?s.emit("drag",{target:l.target,x:l.x,y:l.y}):$o(t,this.startPoint)>iC&&(s.emit("dragstart",{target:l.target,x:l.x,y:l.y}),this.dragStart=!0)}},i.prototype.end=function(){if(this.dragStart){var t=this.context.view,s=this.context.event;t.emit("dragend",{target:s.target,x:s.x,y:s.y})}this.starting=!1,this.dragStart=!1},i}(Mn),NO=BO,zO=5,UO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return i.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},i.prototype.move=function(){if(this.starting){var t=this.startPoint,s=this.context.getCurrentPoint(),l=$o(t,s);if(l>zO&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var f=this.context.view,d=eo.vs(this.startMatrix,[["t",s.x-t.x,s.y-t.y]]);f.backgroundGroup.setMatrix(d),f.foregroundGroup.setMatrix(d),f.middleGroup.setMatrix(d)}}},i.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},i.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},i}(Mn),aC=UO,t1="x",Zb="y",ZO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.dims=[t1,Zb],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return i.prototype.hasDim=function(t){return this.dims.includes(t)},i.prototype.getScale=function(t){var s=this.context.view;return t==="x"?s.getXScale():s.getYScales()[0]},i.prototype.resetDim=function(t){var s=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var l=this.getScale(t);s.scale(l.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},i.prototype.reset=function(){this.resetDim(t1),this.resetDim(Zb);var t=this.context.view;t.render(!0)},i}(Mn),oC=ZO,sC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return i.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var s=this.dims;(0,b.S6)(s,function(l){var f=t.getScale(l),d=f.min,m=f.max,x=f.values;t.startCache[l]={min:d,max:m,values:x}})},i.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},i.prototype.translate=function(){var t=this;if(this.starting){var s=this.startPoint,l=this.context.view.getCoordinate(),f=this.context.getCurrentPoint(),d=l.invert(s),m=l.invert(f),x=m.x-d.x,T=m.y-d.y,O=this.context.view,D=this.dims;(0,b.S6)(D,function(B){t.translateDim(B,{x:x*-1,y:T*-1})}),O.render(!0)}},i.prototype.translateDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.translateLinear(t,l,s)}},i.prototype.translateLinear=function(t,s,l){var f=this.context.view,d=this.startCache[t],m=d.min,x=d.max,T=x-m,O=l[t]*T;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:m,max:x}),f.scale(s.field,{nice:!1,min:m+O,max:x+O})},i.prototype.reset=function(){a.prototype.reset.call(this),this.startPoint=null,this.starting=!1},i}(oC),VO=sC,jO=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.zoomRatio=.05,t}return i.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},i.prototype.zoom=function(t){var s=this,l=this.dims;(0,b.S6)(l,function(f){s.zoomDim(f,t)}),this.context.view.render(!0)},i.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},i.prototype.zoomDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.zoomLinear(t,l,s)}},i.prototype.zoomLinear=function(t,s,l){var f=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:s.min,max:s.max});var d=this.cacheScaleDefs[t],m=d.max-d.min,x=s.min,T=s.max,O=l*m,D=x-O,B=T+O,U=B-D,J=U/m;B>D&&J<100&&J>.01&&f.scale(s.field,{nice:!1,min:x-O,max:T+O})},i}(oC),Vb=jO;function uC(a){var i=a.gEvent.originalEvent;return i.deltaY>0}var lC=1,Hc=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.scroll=function(t){var s=this.context,l=s.view,f=s.event;if(l.getOptions().scrollbar){var d=(t==null?void 0:t.wheelDelta)||lC,m=l.getController("scrollbar"),x=l.getXScale(),T=l.getOptions().data,O=(0,b.dp)((0,b.I)(T,x.field)),D=(0,b.dp)(x.values),B=m.getValue(),U=Math.floor((O-D)*B),J=U+(uC(f)?d:-d),pe=d/(O-D)/1e4,Ee=(0,b.uZ)(J/(O-D)+pe,0,1);m.setValue(Ee)}},i}(Mn),HO=Hc,WO="aixs-description-tooltip",cC=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.show=function(){var t=this.context,s=Wo(t).axis,l=s.cfg.title,f=l.description,d=l.text,m=l.descriptionTooltipStyle,x=t.event,T=x.x,O=x.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:d||"",customContent:function(){return`
          <div class="`.concat(Hl,'" style={').concat(m,`}>
            <div class="`).concat(Pl,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(f,`
            </div>
          </div>
        `)},x:T,y:O}),this.tooltip.show()},i.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=new $d({parent:l.get("el").parentNode,region:f,visible:!1,containerId:WO,domStyles:(0,A.pi)({},(0,b.b$)({},(t={},t[Hl]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Pl]={"word-break":"break-all","margin-bottom":"3px"},t)))});d.init(),d.setCapture(!1),this.tooltip=d},i}(Mn),Vm=cC;ld("dark",zo(Nv)),ae("canvas",ye),ae("svg",ne),F("Polygon",P3),F("Interval",T3),F("Schema",z2),F("Path",F_),F("Point",B2),F("Line",M3),F("Area",T2),F("Edge",M2),F("Heatmap",E3),F("Violin",F3),Oi("base",Eo),Oi("interval",H3),Oi("pie",W3),Oi("polar",db),Yi("overlap",tI),Yi("distribute",$3),Yi("fixed-overlap",eI),Yi("hide-overlap",lI),Yi("limit-in-shape",tw),Yi("limit-in-canvas",K3),Yi("limit-in-plot",SI),Yi("pie-outer",J2),Yi("adjust-color",fI),Yi("interval-adjust-position",pI),Yi("interval-hide-overlap",vI),Yi("point-adjust-position",mI),Yi("pie-spider",q3),Yi("path-adjust-position",gw),ur("fade-in",EI),ur("fade-out",mw),ur("grow-in-x",_w),ur("grow-in-xy",xw),ur("grow-in-y",Bm),ur("scale-in-x",Sw),ur("scale-in-y",CI),ur("wave-in",Tw),ur("zoom-in",Aw),ur("zoom-out",TI),ur("position-update",bw),ur("sector-path-update",Cw),ur("path-in",wI),fi("rect",Gf),fi("mirror",Sb),fi("list",MI),fi("matrix",ay),fi("circle",AI),fi("tree",OI),af("axis",LI),af("legend",zB),af("tooltip",xt),af("annotation",DB),af("slider",Zg),af("scrollbar",K_),Kr("tooltip",Ab),Kr("sibling-tooltip",jI),Kr("ellipsis-text",HI),Kr("element-active",GI),Kr("element-single-active",eO),Kr("element-range-active",KI),Kr("element-highlight",kb),Kr("element-highlight-by-x",iO),Kr("element-highlight-by-color",nO),Kr("element-single-highlight",Uw),Kr("element-range-highlight",zw),Kr("element-sibling-highlight",zw,{effectSiblings:!0,effectByRecord:!0}),Kr("element-selected",uO),Kr("element-single-selected",cO),Kr("element-range-selected",Zw),Kr("element-link-by-color",XI),Kr("active-region",UI),Kr("list-active",Zm),Kr("list-selected",J_),Kr("list-highlight",Lb),Kr("list-unchecked",mO),Kr("list-checked",VB),Kr("list-focus",_O),Kr("list-radio",xO),Kr("legend-item-highlight",Lb,{componentNames:["legend"]}),Kr("axis-label-highlight",Lb,{componentNames:["axis"]}),Kr("axis-description",Vm),Kr("rect-mask",EO),Kr("x-rect-mask",Nb,{dim:"x"}),Kr("y-rect-mask",Nb,{dim:"y"}),Kr("circle-mask",GB),Kr("path-mask",Kw),Kr("smooth-path-mask",lv),Kr("rect-multi-mask",wO),Kr("x-rect-multi-mask",TO,{dim:"x"}),Kr("y-rect-multi-mask",TO,{dim:"y"}),Kr("circle-multi-mask",AO),Kr("path-multi-mask",MO),Kr("smooth-path-multi-mask",JB),Kr("cursor",IO),Kr("data-filter",PO),Kr("brush",e1),Kr("brush-x",e1,{dims:["x"]}),Kr("brush-y",e1,{dims:["y"]}),Kr("sibling-filter",eC),Kr("sibling-x-filter",eC,{dims:"x"}),Kr("sibling-y-filter",eC,{dims:"y"}),Kr("element-filter",n4),Kr("element-sibling-filter",tC),Kr("element-sibling-filter-record",tC,{byRecord:!0}),Kr("view-drag",NO),Kr("view-move",aC),Kr("scale-translate",VO),Kr("scale-zoom",Vb),Kr("reset-button",nC,{name:"reset-button",text:"reset"}),Kr("mousewheel-scroll",HO);function cv(a){return a.isInPlot()}Fn("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Fn("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Fn("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Fn("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Fn("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Fn("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Fn("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Fn("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Fn("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Fn("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Fn("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Fn("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(a){return!a.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(a){return!a.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Fn("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:cv,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:cv,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:cv,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Fn("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Fn("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:cv,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:cv,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:cv,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Fn("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:cv,action:"path-mask:start"},{trigger:"mousedown",isEnable:cv,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Fn("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:cv,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(a){return!vs(a)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),Fn("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Fn("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(a){return!a.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),Fn("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Fn("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Fn("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),Fn("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Fn("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function jb(a){return a.gEvent.preventDefault(),a.gEvent.originalEvent.deltaY>0}Fn("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(a){return jb(a.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(a){return!jb(a.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Fn("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Fn("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var fa=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],Bp;(function(a){a.ERROR="error",a.WARN="warn",a.INFO="log"})(Bp||(Bp={}));var fC="AntV/G2Plot";function cy(a){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var s=0;return"".concat(fC,": ").concat(a.replace(/%s/g,function(){return"".concat(i[s++])}))}function w8(a,i){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];if(!a){var l=new Error(cy.apply(void 0,__spreadArray([i],t,!1)));throw l.name=fC,l}}function wd(a,i,t){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];i||console[a](cy.apply(void 0,(0,A.ev)([t],s,!1)))}function cs(a,i){var t={};return a!==null&&typeof a=="object"&&i.forEach(function(s){var l=a[s];l!==void 0&&(t[s]=l)}),t}function fy(a,i){if(!a)return{};var t=a.filter(function(f){var d=(0,b.U2)(f,[i]);return(0,b.hj)(d)&&!isNaN(d)}),s=t.every(function(f){return(0,b.U2)(f,[i])>=0}),l=t.every(function(f){return(0,b.U2)(f,[i])<=0});return s?{min:0}:l?{max:0}:{}}function Hb(a,i,t,s,l){if(l===void 0&&(l=[]),!Array.isArray(a))return{nodes:[],links:[]};var f=[],d={},m=-1;return a.forEach(function(x){var T=x[i],O=x[t],D=x[s],B=cs(x,l);d[T]||(d[T]=(0,A.pi)({id:++m,name:T},B)),d[O]||(d[O]=(0,A.pi)({id:++m,name:O},B)),f.push((0,A.pi)({source:d[T].id,target:d[O].id,value:D},B))}),{nodes:Object.values(d).sort(function(x,T){return x.id-T.id}),links:f}}function Xv(a,i){var t=(0,b.hX)(a,function(s){var l=s[i];return l===null||typeof l=="number"&&!isNaN(l)});return wd(Bp.WARN,t.length===a.length,"illegal data existed in chart data."),t}var Eu=5,hC={}.toString,GO=function(a,i){return hC.call(a)==="[object "+i+"]"},i4=function(a){return GO(a,"Array")},pC=function(a){return typeof a=="object"&&a!==null},Wb=function(a){if(!pC(a)||!GO(a,"Object"))return!1;for(var i=a;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(a)===i},$O=function(a,i,t,s){t=t||0,s=s||Eu;for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var f=i[l];f?Wb(f)?(Wb(a[l])||(a[l]={}),t<s?$O(a[l],f,t+1,s):a[l]=i[l]):i4(f)?(a[l]=[],a[l]=a[l].concat(f)):a[l]=f:a[l]=f}},mn=function(a){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];for(var s=0;s<i.length;s+=1)$O(a,i[s]);return a};function dC(a){if(!a)return{width:0,height:0};var i=getComputedStyle(a);return{width:(a.clientWidth||parseInt(i.width,10))-parseInt(i.paddingLeft,10)-parseInt(i.paddingRight,10),height:(a.clientHeight||parseInt(i.height,10))-parseInt(i.paddingTop,10)-parseInt(i.paddingBottom,10)}}function qi(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return function(t){return a.reduce(function(s,l){return l(s)},t)}}function rl(a,i){return a.geometries.find(function(t){return t.type===i})}function fv(a){return(0,b.u4)(a.geometries,function(i,t){return i.concat(t.elements)},[])}function Gg(a){return(0,b.U2)(a,["views","length"],0)<=0?fv(a):(0,b.u4)(a.views,function(i,t){return i.concat(Gg(t))},fv(a))}function Yv(a){return(0,b.U2)(a,["views","length"],0)<=0?a.geometries:(0,b.u4)(a.views,function(i,t){return i.concat(t.geometries)},a.geometries)}function nl(a){if(!(0,b.P9)(a,"Object"))return a;var i=(0,A.pi)({},a);return i.formatter&&!i.content&&(i.content=i.formatter),i}var hy;function a4(){return hy||(hy=document.createElement("canvas").getContext("2d")),hy}var o4=(0,b.HP)(function(a,i){i===void 0&&(i={});var t=i.fontSize,s=i.fontFamily,l=s===void 0?"sans-serif":s,f=i.fontWeight,d=i.fontStyle,m=i.fontVariant,x=a4();x.font=[d,f,m,"".concat(t,"px"),l].join(" ");var T=x.measureText((0,b.HD)(a)?a:"");return T.width},function(a,i){return i===void 0&&(i={}),(0,A.ev)([a],(0,b.VO)(i),!0).join("")});function ja(a){return typeof a=="number"&&!isNaN(a)}function s4(a,i,t){var s=Math.min(i,t),l=Math.max(i,t);return a>=s&&a<=l}function $g(a){if((0,b.hj)(a))return[a,a,a,a];if((0,b.kJ)(a)){var i=a.length;if(i===1)return[a[0],a[0],a[0],a[0]];if(i===2)return[a[0],a[1],a[0],a[1]];if(i===3)return[a[0],a[1],a[2],a[1]];if(i===4)return a}return[0,0,0,0]}function py(a,i,t){i===void 0&&(i="bottom"),t===void 0&&(t=25);var s=$g(a),l=[i.startsWith("top")?t:0,i.startsWith("right")?t:0,i.startsWith("bottom")?t:0,i.startsWith("left")?t:0];return[s[0]+l[0],s[1]+l[1],s[2]+l[2],s[3]+l[3]]}function Gb(a){var i=a.map(function(s){return $g(s)}),t=[0,0,0,0];return i.length>0&&(t=t.map(function(s,l){return i.forEach(function(f,d){s+=i[d][l]}),s})),t}function Jh(a,i){var t=[];if(a.length){t.push(["M",a[0].x,a[0].y]);for(var s=1,l=a.length;s<l;s+=1){var f=a[s];t.push(["L",f.x,f.y])}i&&t.push(["Z"])}return t}var dy=function(a,i,t,s){var l=[],f,d,m=!!s,x,T;if(m){x=[1/0,1/0],T=[-1/0,-1/0];for(var O=0,D=a.length;O<D;O++){var B=a[O];x=wa.VV([0,0],x,B),T=wa.Fp([0,0],T,B)}x=wa.VV([0,0],x,s[0]),T=wa.Fp([0,0],T,s[1])}for(var O=0,U=a.length;O<U;O++){var B=a[O];if(t)f=a[O?O-1:U-1],d=a[(O+1)%U];else if(O===0||O===U-1){l.push(B);continue}else f=a[O-1],d=a[O+1];var J=[0,0];J=wa.lu(J,d,f),J=wa.bA(J,J,i);var pe=wa.TE(B,f),Ee=wa.TE(B,d),Ce=pe+Ee;Ce!==0&&(pe/=Ce,Ee/=Ce);var st=wa.bA([0,0],J,-pe),gt=wa.bA([0,0],J,Ee),bt=wa.IH([0,0],B,st),Ft=wa.IH([0,0],B,gt);m&&(bt=wa.Fp([0,0],bt,x),bt=wa.VV([0,0],bt,T),Ft=wa.Fp([0,0],Ft,x),Ft=wa.VV([0,0],Ft,T)),l.push(bt),l.push(Ft)}return t&&l.push(l.shift()),l};function vy(a,i,t){for(var s=!!i,l=[],f=0,d=a.length;f<d;f+=2)l.push([a[f],a[f+1]]);for(var m=dy(l,.4,s,t),x=l.length,T=[],O,D,B,f=0;f<x-1;f++)O=m[f*2],D=m[f*2+1],B=l[f+1],T.push(["C",O[0],O[1],D[0],D[1],B[0],B[1]]);return s&&(O=m[x],D=m[x+1],B=l[0],T.push(["C",O[0],O[1],D[0],D[1],B[0],B[1]])),T}function gy(a,i,t){var s=[],l=a[0],f=null;if(a.length<=2)return Jh(a,i);for(var d=0,m=a.length;d<m;d++){var x=a[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var T=t||[[0,0],[1,1]],O=vy(s,i,T);return O.unshift(["M",l.x,l.y]),O}function r1(a){if(!a)return a;var i=a.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return i.map(function(t){return t.toLowerCase()}).join("-")}function $b(a){var i={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,b.U2)(a,"fill")&&(i.color=a.fill);var s=cs(a,t),l=s.shadowColor,f=s.shadowBlur,d=f===void 0?0:f,m=s.shadowOffsetX,x=m===void 0?0:m,T=s.shadowOffsetY,O=T===void 0?0:T;i["text-shadow"]="".concat([l,"".concat(x,"px"),"".concat(O,"px"),"".concat(d,"px")].join(" "));var D=cs(a,t),B=D.stroke,U=D.lineWidth,J=U===void 0?0:U;return i["-webkit-text-stroke"]="".concat(["".concat(J,"px"),B].join(" ")),(0,b.S6)(a,function(pe,Ee){["fontSize"].includes(Ee)&&(0,b.hj)(pe)?i[r1(Ee)]="".concat(pe,"px"):Ee&&!t.includes(Ee)&&(i[r1(Ee)]="".concat(pe))}),i}function Xb(a,i){a.style["pointer-events"]="none",(0,b.S6)(i,function(t,s){s&&t&&(a.style[s]=t)})}var yy=function(a,i,t){var s=i.statistic,l=i.plotType,f=s.title,d=s.content;[f,d].forEach(function(m,x){if(m){var T="";x===0?T=d?"translate(-50%, -100%)":"translate(-50%, -50%)":T=f?"translate(-50%, 0)":"translate(-50%, -50%)";var O=(0,b.mf)(m.style)?m.style(t):m.style;a.annotation().html((0,A.pi)({position:["50%","50%"],html:function(D,B){var U=B.getCoordinate(),J=0;if(l==="pie"||l==="ring-progress")J=U.getRadius()*U.innerRadius*2;else if(l==="liquid"){var pe=(0,b.U2)(B.geometries,[0,"elements",0,"shape"]);if(pe){var Ee=pe.find(function(bt){return bt.get("name")==="wrap"}),Ce=Ee.getCanvasBBox().width;J=Ce}}else J||(J=U.getWidth());Xb(D,(0,A.pi)({width:"".concat(J,"px"),transform:T},$b(O)));var st=B.getData();if(m.customHtml)return m.customHtml(D,B,t,st);var gt=m.content;return m.formatter&&(gt=m.formatter(t,st)),gt?(0,b.HD)(gt)?gt:"".concat(gt):"<div></div>"},key:"".concat(x===0?"top":"bottom","-statistic")},cs(m,["offsetX","offsetY","rotate","style","formatter"])))}})},vC=function(a,i,t){var s=i.statistic,l=s.title,f=s.content;[l,f].forEach(function(d){if(d){var m=(0,b.mf)(d.style)?d.style(t):d.style;a.annotation().html((0,A.pi)({position:["50%","100%"],html:function(x,T){var O=T.getCoordinate(),D=T.views[0].getCoordinate(),B=D.getCenter(),U=D.getRadius(),J=Math.max(Math.sin(D.startAngle),Math.sin(D.endAngle))*U,pe=B.y+J-O.y.start-parseFloat((0,b.U2)(m,"fontSize",0)),Ee=O.getRadius()*O.innerRadius*2;Xb(x,(0,A.pi)({width:"".concat(Ee,"px"),transform:"translate(-50%, ".concat(pe,"px)")},$b(m)));var Ce=T.getData();if(d.customHtml)return d.customHtml(x,T,t,Ce);var st=d.content;return d.formatter&&(st=d.formatter(t,Ce)),st?(0,b.HD)(st)?st:"".concat(st):"<div></div>"}},cs(d,["offsetX","offsetY","rotate","style","formatter"])))}})};function n1(a,i){return i?(0,b.u4)(i,function(t,s,l){return t.replace(new RegExp("{\\s*".concat(l,"\\s*}"),"g"),s)},a):a}function po(a,i){return a.views.find(function(t){return t.id===i})}function qv(a){var i=a.parent;return i?i.views:[]}function Yb(a){return qv(a).filter(function(i){return i!==a})}function jm(a,i,t){t===void 0&&(t=a.geometries),typeof i=="boolean"?a.animate(i):a.animate(!0),(0,b.S6)(t,function(s){var l;(0,b.mf)(i)?l=i(s.type||s.shapeType,s)||!0:l=i,s.animate(l)})}function i1(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function qb(a,i){i===void 0&&(i=a);var t=document.createElement("canvas"),s=i1();t.width=a*s,t.height=i*s,t.style.width="".concat(a,"px"),t.style.height="".concat(i,"px");var l=t.getContext("2d");return l.scale(s,s),t}function gC(a,i,t,s){s===void 0&&(s=t);var l=i.backgroundColor,f=i.opacity;a.globalAlpha=f,a.fillStyle=l,a.beginPath(),a.fillRect(0,0,t,s),a.closePath()}function mC(a,i,t){var s=a+i;return t?s*2:s}function XO(a,i){var t=i?[[a*.25,a*.25],[a*.75,a*.75]]:[[a*.5,a*.5]];return t}function a1(a,i){var t=i*Math.PI/180,s={a:Math.cos(t)*(1/a),b:Math.sin(t)*(1/a),c:-Math.sin(t)*(1/a),d:Math.cos(t)*(1/a),e:0,f:0};return s}var Hm={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function YO(a,i,t,s){var l=i.size,f=i.fill,d=i.lineWidth,m=i.stroke,x=i.fillOpacity;a.beginPath(),a.globalAlpha=x,a.fillStyle=f,a.strokeStyle=m,a.lineWidth=d,a.arc(t,s,l/2,0,2*Math.PI,!1),a.fill(),d&&a.stroke(),a.closePath()}function qO(a){var i=mn({},Hm,a),t=i.size,s=i.padding,l=i.isStagger,f=i.rotation,d=mC(t,s,l),m=XO(d,l),x=qb(d,d),T=x.getContext("2d");gC(T,i,d);for(var O=0,D=m;O<D.length;O++){var B=D[O],U=B[0],J=B[1];YO(T,i,U,J)}var pe=T.createPattern(x,"repeat");if(pe){var Ee=i1(),Ce=a1(Ee,f);pe.setTransform(Ce)}return pe}var Kb={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function KO(a,i,t){var s=i.stroke,l=i.lineWidth,f=i.strokeOpacity,d=new Path2D(t);a.globalAlpha=f,a.lineCap="square",a.strokeStyle=l?s:"transparent",a.lineWidth=l,a.stroke(d)}function QO(a){var i=mn({},Kb,a),t=i.spacing,s=i.rotation,l=i.lineWidth,f=t+l||1,d=t+l||1,m=`
            M 0 0 L `.concat(f,` 0
            M 0 `).concat(d," L ").concat(f," ").concat(d,`
            `),x=qb(f,d),T=x.getContext("2d");gC(T,i,f,d),KO(T,i,m);var O=T.createPattern(x,"repeat");if(O){var D=i1(),B=a1(D,s);O.setTransform(B)}return O}var yC={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function u4(a,i,t,s){var l=i.stroke,f=i.size,d=i.fill,m=i.lineWidth,x=i.fillOpacity;a.globalAlpha=x,a.strokeStyle=l,a.lineWidth=m,a.fillStyle=d,a.strokeRect(t-f/2,s-f/2,f,f),a.fillRect(t-f/2,s-f/2,f,f)}function o1(a){var i=mn({},yC,a),t=i.size,s=i.padding,l=i.isStagger,f=i.rotation,d=mC(t,s,l),m=XO(d,l),x=qb(d,d),T=x.getContext("2d");gC(T,i,d);for(var O=0,D=m;O<D.length;O++){var B=D[O],U=B[0],J=B[1];u4(T,i,U,J)}var pe=T.createPattern(x,"repeat");if(pe){var Ee=i1(),Ce=a1(Ee,f);pe.setTransform(Ce)}return pe}function Qb(a){var i=a.type,t=a.cfg,s;switch(i){case"dot":s=qO(t);break;case"line":s=QO(t);break;case"square":s=o1(t);break;default:break}return s}function ep(a){var i=this;return function(t){var s,l=t.options,f=t.chart,d=l.pattern;if(!d)return t;var m=function(x){for(var T,O,D,B=[],U=1;U<arguments.length;U++)B[U-1]=arguments[U];var J=f.getTheme().defaultColor,pe=J,Ee=(O=(T=f.geometries)===null||T===void 0?void 0:T[0])===null||O===void 0?void 0:O.getAttribute("color");if(Ee){var Ce=Ee.getFields()[0],st=(0,b.U2)(x,Ce);pe=uc.getMappingValue(Ee,st,((D=Ee.values)===null||D===void 0?void 0:D[0])||J)}var gt=d;typeof d=="function"&&(gt=d.call(i,x,pe)),gt instanceof CanvasPattern||(gt=Qb(mn({},{cfg:{backgroundColor:pe}},gt)));var bt=l[a];return(0,A.pi)((0,A.pi)({},typeof bt=="function"?bt.call.apply(bt,(0,A.ev)([i,x],B,!1)):bt||{}),{fill:gt||pe})};return mn({},t,{options:(s={},s[a]=m,s)})}}function Xg(a){var i=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.seriesField;return s===!1?i.legend(!1):(l||f)&&i.legend(l||f,s),a}function Kl(a){var i=a.chart,t=a.options,s=t.tooltip;return s!==void 0&&i.tooltip(s),a}function hu(a){var i=a.chart,t=a.options,s=t.interactions;return(0,b.S6)(s,function(l){l.enable===!1?i.removeInteraction(l.type):i.interaction(l.type,l.cfg||{})}),a}function As(a){var i=a.chart,t=a.options,s=t.animation;return jm(i,s),a}function qo(a){var i=a.chart,t=a.options,s=t.theme;return s&&i.theme(s),a}function Np(a){var i=a.chart,t=a.options,s=t.state;return s&&(0,b.S6)(i.geometries,function(l){l.state(s)}),a}function s1(a){var i=a.chart,t=a.options,s=t.slider;return i.option("slider",s),a}function _C(a){var i=a.chart,t=a.options,s=t.scrollbar;return i.option("scrollbar",s),a}function Hu(a,i){return function(t){var s=t.chart,l=t.options,f={};return(0,b.S6)(a,function(d,m){f[m]=cs(d,fa)}),f=mn({},i,l.meta,f),s.scale(f),t}}function wu(a){return function(i){var t=i.chart,s=i.options,l=t.getController("annotation");return(0,b.S6)((0,A.ev)((0,A.ev)([],s.annotations||[],!0),a||[],!0),function(f){l.annotation(f)}),i}}function Yg(a){var i=a.chart,t=a.options,s=t.yAxis,l=t.limitInPlot,f=l;return(0,b.Kn)(s)&&(0,b.UM)(l)&&(Object.values(cs(s,["min","max","minLimit","maxLimit"])).some(function(d){return!(0,b.UM)(d)})?f=!0:f=!1),i.limitInPlot=f,a}function xC(a){return a===void 0&&(a="rect"),function(i){var t=i.chart,s=i.options,l=s.coordinate,f=Array.from(l||[]).map(function(d){return d.type==="reflectX"?["reflect","x"]:d.type==="reflectY"?["reflect","y"]:d.type==="transpose"?["transpose"]:null}).filter(function(d){return!!d});return f.length!==0&&t.coordinate({type:a,actions:f}),i}}var bC={locale:"en-US"};function C8(a){each(a,function(i,t){return bC[t]=i})}var u1={};function SC(a,i){u1[a]=i}function l1(a){return{get:function(i,t){return n1((0,b.U2)(u1[a],i)||(0,b.U2)(u1[bC.locale],i)||(0,b.U2)(u1["en-US"],i)||i,t)}}}var JO={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},eP={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}};function tp(a,i){if(a===!1)return{fields:!1};var t=(0,b.U2)(a,"fields"),s=(0,b.U2)(a,"formatter");return s&&!t&&(t=i),{fields:t,formatter:s}}function _y(a,i){var t=a.type,s=a.xField,l=a.yField,f=a.colorField,d=a.shapeField,m=a.sizeField,x=a.styleField,T=a.rawFields,O=[];if(T=((0,b.mf)(T)?T(t,i):T)||[],i==="color")O=(0,A.ev)([f||s],T,!0);else if(i==="shape")O=(0,A.ev)([d||s],T,!0);else if(i==="size")O=(0,A.ev)([m||s],T,!0);else{O=(0,A.ev)([s,l,f,d,m,x],T,!0);var D=["x","y","color","shape","size","style"].indexOf(i),B=O[D];O.splice(D,1),O.unshift(B)}var U=(0,b.jj)(O.filter(function(pe){return!!pe})),J=t==="line"&&[s,l].includes(U.join("*"))?"":U.join("*");return{mappingFields:U,tileMappingField:J}}function qg(a,i){if(i)return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l={};return a.forEach(function(f,d){l[f]=t[d]}),delete l.undefined,i(l)}}function Cu(a){var i=a.chart,t=a.options,s=t.type,l=t.args,f=t.mapping,d=t.xField,m=t.yField,x=t.colorField,T=t.shapeField,O=t.sizeField,D=t.tooltipFields,B=t.label,U=t.state,J=t.customInfo;if(!f)return a;var pe=f.color,Ee=f.shape,Ce=f.size,st=f.style,gt=f.tooltip,bt=i[s](l).position("".concat(d,"*").concat(m));if((0,b.HD)(pe))x?bt.color(x,pe):bt.color(pe);else if((0,b.mf)(pe)){var Ft=_y(t,"color"),xr=Ft.mappingFields,Fr=Ft.tileMappingField;bt.color(Fr,qg(xr,pe))}else x&&bt.color(x,pe);if((0,b.HD)(Ee))T?bt.shape(T,[Ee]):bt.shape(Ee);else if((0,b.mf)(Ee)){var $r=_y(t,"shape"),xr=$r.mappingFields,Fr=$r.tileMappingField;bt.shape(Fr,qg(xr,Ee))}else T&&bt.shape(T,Ee);if((0,b.hj)(Ce))O?bt.size(O,Ce):bt.size(Ce);else if((0,b.mf)(Ce)){var yn=_y(t,"size"),xr=yn.mappingFields,Fr=yn.tileMappingField;bt.size(Fr,qg(xr,Ce))}else O&&bt.size(O,Ce);if((0,b.mf)(st)){var cn=_y(t,"style"),xr=cn.mappingFields,Fr=cn.tileMappingField;bt.style(Fr,qg(xr,st))}else(0,b.Kn)(st)&&bt.style(st);if(D===!1?bt.tooltip(!1):(0,b.xb)(D)||bt.tooltip(D.join("*"),qg(D,gt)),B===!1)bt.label(!1);else if(B){var Bn=B.callback,hi=B.fields,Hi=(0,A._T)(B,["callback","fields"]);bt.label({fields:hi||[m],callback:Bn,cfg:nl(Hi)})}return U&&bt.state(U),J&&bt.customInfo(J),[d,m].filter(function(aa){return aa!==x}).forEach(function(aa){i.legend(aa,!1)}),(0,A.pi)((0,A.pi)({},a),{ext:{geometry:bt}})}function c1(a){var i=a.options,t=i.area,s=i.xField,l=i.yField,f=i.seriesField,d=i.smooth,m=i.tooltip,x=i.useDeferredLabel,T=tp(m,[s,l,f]),O=T.fields,D=T.formatter;return t?Cu(mn({},a,{options:{type:"area",colorField:f,tooltipFields:O,mapping:(0,b.b$)({shape:d?"smooth":"area",tooltip:D},t),args:{useDeferredLabel:x}}})):a}function EC(a){var i=a.options,t=i.edge,s=i.xField,l=i.yField,f=i.seriesField,d=i.tooltip,m=i.useDeferredLabel,x=tp(d,[s,l,f]),T=x.fields,O=x.formatter;return t?Cu(mn({},a,{options:{type:"edge",colorField:f,tooltipFields:T,mapping:(0,A.pi)({tooltip:O},t),args:{useDeferredLabel:m}}})):a}function tP(a){var i=a.chart,t=a.options,s=a.ext,l=t.seriesField,f=t.isGroup,d=t.isStack,m=t.marginRatio,x=t.widthRatio,T=t.groupField,O=t.theme,D=[];if(l&&(f&&D.push({type:"dodge",dodgeBy:T||l,marginRatio:m}),d&&D.push({type:"stack",marginRatio:m})),D.length&&(s!=null&&s.geometry)){var B=s==null?void 0:s.geometry;B.adjust(D)}return(0,b.UM)(x)||i.theme(mn({},(0,b.Kn)(O)?O:ud(O),{columnWidthRatio:x})),a}function Wc(a){var i=a.options,t=i.xField,s=i.yField,l=i.interval,f=i.seriesField,d=i.tooltip,m=i.minColumnWidth,x=i.maxColumnWidth,T=i.columnBackground,O=i.dodgePadding,D=i.intervalPadding,B=i.useDeferredLabel,U=tp(d,[t,s,f]),J=U.fields,pe=U.formatter,Ee=(l?Cu(mn({},a,{options:{type:"interval",colorField:f,tooltipFields:J,mapping:(0,A.pi)({tooltip:pe},l),args:{dodgePadding:O,intervalPadding:D,minColumnWidth:m,maxColumnWidth:x,background:T,useDeferredLabel:B}}})):a).ext;return tP((0,A.pi)((0,A.pi)({},a),{ext:Ee}))}function Wm(a){var i=a.options,t=i.line,s=i.stepType,l=i.xField,f=i.yField,d=i.seriesField,m=i.smooth,x=i.connectNulls,T=i.tooltip,O=i.useDeferredLabel,D=tp(T,[l,f,d]),B=D.fields,U=D.formatter;return t?Cu(mn({},a,{options:{type:"line",colorField:d,tooltipFields:B,mapping:(0,b.b$)({shape:s||(m?"smooth":"line"),tooltip:U},t),args:{connectNulls:x,useDeferredLabel:O}}})):a}function Eh(a){var i=a.options,t=i.point,s=i.xField,l=i.yField,f=i.seriesField,d=i.sizeField,m=i.shapeField,x=i.tooltip,T=i.useDeferredLabel,O=tp(x,[s,l,f,d,m]),D=O.fields,B=O.formatter;return t?Cu(mn({},a,{options:{type:"point",colorField:f,shapeField:m,tooltipFields:D,mapping:(0,A.pi)({tooltip:B},t),args:{useDeferredLabel:T}}})):a}function f1(a){var i=a.options,t=i.polygon,s=i.xField,l=i.yField,f=i.seriesField,d=i.tooltip,m=i.useDeferredLabel,x=tp(d,[s,l,f]),T=x.fields,O=x.formatter;return t?Cu(mn({},a,{options:{type:"polygon",colorField:f,tooltipFields:T,mapping:(0,A.pi)({tooltip:O},t),args:{useDeferredLabel:m}}})):a}function h1(a){var i=a.options,t=i.schema,s=i.xField,l=i.yField,f=i.seriesField,d=i.tooltip,m=i.useDeferredLabel,x=tp(d,[s,l,f]),T=x.fields,O=x.formatter;return t?Cu(mn({},a,{options:{type:"schema",colorField:f,tooltipFields:T,mapping:(0,A.pi)({tooltip:O},t),args:{useDeferredLabel:m}}})):a}function rP(a){var i=a.options,t=i.violin,s=i.xField,l=i.yField,f=i.seriesField,d=i.sizeField,m=i.tooltip,x=tp(m,[s,l,f,d]),T=x.fields,O=x.formatter;return t?Cu(mn({},a,{options:{type:"violin",colorField:f,tooltipFields:T,mapping:(0,A.pi)({tooltip:O},t)}})):a}var nP=k(18587),wC="data-chart-source-type",Jb=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],io=function(a){(0,A.ZT)(i,a);function i(t,s){var l=a.call(this)||this;return l.container=typeof t=="string"?document.getElementById(t):t,l.options=mn({},l.getDefaultOptions(),s),l.createG2(),l.bindEvents(),l}return i.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},i.prototype.createG2=function(){var t=this.options,s=t.width,l=t.height,f=t.defaultInteractions;this.chart=new de((0,A.pi)((0,A.pi)((0,A.pi)((0,A.pi)({container:this.container,autoFit:!1},this.getChartSize(s,l)),{localRefresh:!1}),cs(this.options,Jb)),{defaultInteractions:f})),this.container.setAttribute(wC,"G2Plot")},i.prototype.getChartSize=function(t,s){var l=dC(this.container);return{width:t||l.width||400,height:s||l.height||400}},i.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(s){s!=null&&s.type&&t.emit(s.type,s)})},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},i.prototype.update=function(t){this.updateOption(t),this.render()},i.prototype.updateOption=function(t){this.options=mn({},this.options,t)},i.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=Gg(this.chart);(0,b.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},i.prototype.getStates=function(){var t=Gg(this.chart),s=[];return(0,b.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,b.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},i.prototype.changeData=function(t){this.update({data:t})},i.prototype.changeSize=function(t,s){this.chart.changeSize(t,s)},i.prototype.addAnnotations=function(t,s){s=s||this.chart;var l=(0,A.ev)([],t,!0),f=s.getController("annotation"),d=f.getComponents().map(function(T){return T.extra});f.clear(!0);for(var m=function(T){var O=d[T],D=l.findIndex(function(B){return B.id&&B.id===O.id});D!==-1&&(O=mn({},O,l[D]),l.splice(D,1)),f.annotation(O)},x=0;x<d.length;x++)m(x);l.forEach(function(T){return f.annotation(T)}),s.render(!0)},i.prototype.removeAnnotations=function(t){var s=this.chart.getController("annotation"),l=s.getComponents().map(function(m){return m.extra});s.clear(!0);for(var f=function(m){var x=l[m];t.find(function(T){return T.id&&T.id===x.id})||s.annotation(x)},d=0;d<l.length;d++)f(d);this.chart.render(!0)},i.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(wC)},i.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),s=this.options,l=s.padding,f=s.appendPadding;this.chart.padding=l,this.chart.appendPadding=f,t({chart:this.chart,options:this.options})},i.prototype.triggerResize=function(){this.chart.forceFit()},i.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var s=this.options.autoFit,l=s===void 0?!0:s;l&&(this.unbind=(0,nP.ak)(this.container,function(){var f=dC(t.container),d=f.width,m=f.height;(d!==t.chart.width||m!==t.chart.height)&&t.triggerResize()}))}},i.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},i}(Qe.Z);function CC(a,i,t,s){var l=(0,b.u4)(a,function(f,d){var m=d[t],x=f.has(m)?f.get(m):0,T=d[i];return x=ja(T)?x+T:x,f.set(m,x),f},new Map);return(0,b.UI)(a,function(f){var d,m=f[i],x=f[t],T=ja(m)&&l.get(x)!==0?m/l.get(x):0;return(0,A.pi)((0,A.pi)({},f),(d={},d[s]=T,d))})}function iP(a,i,t,s){var l=(0,b.u4)(a,function(f,d){var m=(0,b.u4)(t,function(O,D){return"".concat(O).concat(d[D])},""),x=f.has(m)?f.get(m):0,T=d[i];return x=ja(T)?x+T:x,f.set(m,x),f},new Map);return(0,b.UI)(a,function(f){var d,m=f[i],x=(0,b.u4)(t,function(O,D){return"".concat(O).concat(f[D])},""),T=ja(m)&&l.get(x)!==0?m/l.get(x):0;return(0,A.pi)((0,A.pi)({},f),(d={},d[s]=T,d))})}function xy(a,i,t,s,l){return l?CC(a,i,t,s):a}function aP(a){var i=a.chart,t=a.options,s=t.data,l=t.color,f=t.lineStyle,d=t.lineShape,m=t.point,x=t.area,T=t.seriesField,O=m==null?void 0:m.state,D=x==null?void 0:x.state;i.data(s);var B=mn({},a,{options:{shapeField:T,line:{color:l,style:f,shape:d},point:m&&(0,A.pi)({color:l,shape:"circle"},m),area:x&&(0,A.pi)({color:l},x),label:void 0}}),U=mn({},B,{options:{tooltip:!1,state:O}}),J=mn({},B,{options:{tooltip:!1,state:D}});return Wm(B),Eh(U),c1(J),a}function p1(a){var i,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data;return qi(Hu((i={},i[d]=l,i[m]=f,i),(t={},t[d]={type:"cat"},t[m]=fy(x,m),t)))(a)}function oP(a){var i=a.chart,t=a.options,s=t.reflect;if(s){var l=s;(0,b.kJ)(l)||(l=[l]);var f=l.map(function(d){return["reflect",d]});i.coordinate({type:"rect",actions:f})}return a}function TC(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?i.axis(d,!1):i.axis(d,l),a}function AC(a){var i=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s&&l?i.legend(l,s):s===!1&&i.legend(!1),a}function sP(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=rl(i,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,A._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,A.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},nl(m))})}return a}function uP(a){var i=a.chart,t=a.options,s=t.isStack;return s&&(0,b.S6)(i.geometries,function(l){l.adjust("stack")}),a}function lP(a){return qi(aP,p1,uP,qo,oP,TC,AC,Kl,sP,s1,_C,hu,As,wu(),Yg)(a)}function MC(a){var i=a.chart,t=a.options,s=t.data,l=t.areaStyle,f=t.areaShape,d=t.color,m=t.point,x=t.line,T=t.isPercent,O=t.xField,D=t.yField,B=t.tooltip,U=t.seriesField,J=t.startOnZero,pe=m==null?void 0:m.state,Ee=xy(s,D,O,D,T);i.data(Ee);var Ce=T?(0,A.pi)({formatter:function(Ft){return{name:Ft[U]||Ft[O],value:(Number(Ft[D])*100).toFixed(2)+"%"}}},B):B,st=mn({},a,{options:{area:{color:d,style:l,shape:f},point:m&&(0,A.pi)({color:d},m),tooltip:Ce,label:void 0,args:{startOnZero:J}}}),gt={chart:i,options:mn({line:{size:2}},(0,b.CE)(t,["state"]),{line:x&&(0,A.pi)({color:d},x),sizeField:U,state:x==null?void 0:x.state,tooltip:!1,label:void 0,args:{startOnZero:J}})},bt=mn({},st,{options:{tooltip:!1,state:pe}});return c1(st),Wm(gt),Eh(bt),a}function cP(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=rl(i,"area");if(!s)f.label(!1);else{var d=s.callback,m=(0,A._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,A.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},nl(m))})}return a}function eS(a){var i=a.chart,t=a.options,s=t.isStack,l=t.isPercent,f=t.seriesField;return(l||s)&&f&&(0,b.S6)(i.geometries,function(d){d.adjust("stack")}),a}function fP(a){return qi(qo,ep("areaStyle"),xC("rect"),MC,p1,eS,TC,AC,Kl,cP,s1,wu(),hu,As,Yg)(a)}var hP=mn({},io.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),pP=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="area",t}return i.getDefaultOptions=function(){return hP},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.isPercent,f=s.xField,d=s.yField,m=this,x=m.chart,T=m.options;p1({chart:x,options:T}),this.chart.changeData(xy(t,d,f,d,l))},i.prototype.getSchemaAdaptor=function(){return fP},i}(io),dP=10,vP=5,l4={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},RC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=(0,A.pi)({name:"button"},l4),t}return i.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,b.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return mn(this.buttonCfg,s,this.cfg)},i.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=this.drawText(s);this.drawBackground(s,l.getBBox()),this.buttonGroup=s},i.prototype.drawText=function(t){var s,l=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,A.pi)({text:l.text},(s=l.textStyle)===null||s===void 0?void 0:s.default)})},i.prototype.drawBackground=function(t,s){var l,f=this.getButtonCfg(),d=$g(f.padding),m=t.addShape({type:"rect",name:"button-rect",attrs:(0,A.pi)({x:s.x-d[3],y:s.y-d[0],width:s.width+d[1]+d[3],height:s.height+d[0]+d[2]},(l=f.buttonStyle)===null||l===void 0?void 0:l.default)});return m.toBack(),t.on("mouseenter",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.active)}),t.on("mouseleave",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.default)}),m},i.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=uc.transform(null,[["t",l.x-d.width-dP,l.y+d.height+vP]]);f.setMatrix(m)},i.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},i.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},i.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),a.prototype.destroy.call(this)},i}(Mn);Kr("brush-reset-button",RC,{name:"brush-reset-button"}),Fn("filter-action",{});function hv(a){return a.isInPlot()}function Kg(a,i,t){var s=t||{},l=s.mask,f=s.isStartEnable,d=i||"rect";switch(a){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||hv,action:["brush:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:hv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:hv,action:["brush:filter","brush:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(m){return f?!f(m):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||hv,action:["brush-x:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:hv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:hv,action:["brush-x:filter","brush-x:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||hv,action:["brush-y:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:hv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:hv,action:["brush-y:filter","brush-y:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};default:return{}}}Fn("brush",Kg("brush")),Fn("brush-highlight",Kg("brush-highlight")),Fn("brush-x",Kg("brush-x","x-rect")),Fn("brush-y",Kg("brush-y","y-rect")),Fn("brush-x-highlight",Kg("brush-x-highlight","x-rect")),Fn("brush-y-highlight",Kg("brush-y-highlight","y-rect"));var IC=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function OC(a){var i=a.options,t=i.brush,s=(0,b.hX)(i.interactions||[],function(l){return IC.indexOf(l.type)===-1});return t!=null&&t.enabled&&(IC.forEach(function(l){var f=!1;switch(t.type){case"x-rect":f=l===(t.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":f=l===(t.action==="highlight"?"brush-y-highlight":"brush-y");break;default:f=l===(t.action==="highlight"?"brush-highlight":"brush");break}var d={type:l,enable:f};t&&(d.cfg=Kg(l,t.type,t)),s.push(d)}),(t==null?void 0:t.action)!=="highlight"&&s.push({type:"filter-action",cfg:{buttonConfig:t.button}})),mn({},a,{options:{interactions:s}})}var Gm={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},tS=function(a,i){return a==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:i}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:i}]}]};Fn(Gm.hover,{start:tS(Gm.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Fn(Gm.click,{start:tS(Gm.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function gP(a){return a===void 0&&(a=!1),function(i){var t=i.chart,s=i.options,l=s.connectedArea,f=function(){t.removeInteraction(Gm.hover),t.removeInteraction(Gm.click)};if(!a&&l){var d=l.trigger||"hover";f(),t.interaction(Gm[d],{start:tS(d,l.style)})}else f();return i}}function PC(a,i){return!(0,b.hj)(a)||!(0,b.hj)(i)||a===0&&i===0?"-":a===i?"100%":a===0?"\u221E":"".concat((100*i/a).toFixed(2),"%")}function mP(a,i){return mn({size:i?32:80,spacing:i?8:12,offset:i?32:0,arrow:a.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:a.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:PC}},a)}function d1(a,i){return(0,b.UI)(i.getModel().points,function(t){return a.convertPoint(t)})}function yP(a,i,t){var s=a.view,l=a.geometry,f=a.group,d=a.options,m=a.horizontal,x=d.offset,T=d.size,O=d.arrow,D=s.getCoordinate(),B=d1(D,i)[3],U=d1(D,t)[0],J=U.y-B.y,pe=U.x-B.x;if(typeof O!="boolean"){var Ee=O.headSize,Ce=d.spacing,st;m?(pe-Ee)/2<Ce?(Ce=Math.max(1,(pe-Ee)/2),st=[[B.x+Ce,B.y-x],[B.x+Ce,B.y-x-T],[U.x-Ce,U.y-x-T/2]]):st=[[B.x+Ce,B.y-x],[B.x+Ce,B.y-x-T],[U.x-Ce-Ee,U.y-x-T],[U.x-Ce,U.y-x-T/2],[U.x-Ce-Ee,U.y-x]]:(J-Ee)/2<Ce?(Ce=Math.max(1,(J-Ee)/2),st=[[B.x+x,B.y+Ce],[B.x+x+T,B.y+Ce],[U.x+x+T/2,U.y-Ce]]):st=[[B.x+x,B.y+Ce],[B.x+x+T,B.y+Ce],[U.x+x+T,U.y-Ce-Ee],[U.x+x+T/2,U.y-Ce],[U.x+x,U.y-Ce-Ee]],f.addShape("polygon",{id:"".concat(s.id,"-conversion-tag-arrow-").concat(l.getElementId(i.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:i,nextElement:t},attrs:(0,A.pi)((0,A.pi)({},O.style||{}),{points:st})})}}function _P(a,i,t){var s,l,f,d=a.view,m=a.geometry,x=a.group,T=a.options,O=a.field,D=a.horizontal,B=T.offset,U=T.size;if(typeof T.text!="boolean"){var J=d.getCoordinate(),pe=((s=T.text)===null||s===void 0?void 0:s.formatter)&&((l=T.text)===null||l===void 0?void 0:l.formatter(i.getData()[O],t.getData()[O])),Ee=d1(J,i)[D?3:0],Ce=d1(J,t)[D?0:3],st=x.addShape("text",{id:"".concat(d.id,"-conversion-tag-text-").concat(m.getElementId(i.getModel().mappingData)),name:"conversion-tag-text",origin:{element:i,nextElement:t},attrs:(0,A.pi)((0,A.pi)({},((f=T.text)===null||f===void 0?void 0:f.style)||{}),{text:pe,x:D?(Ee.x+Ce.x)/2:Ee.x+B+U/2,y:D?Ee.y-B-U/2:(Ee.y+Ce.y)/2})});if(D){var gt=Ce.x-Ee.x,bt=st.getBBox().width;if(bt>gt){var Ft=bt/pe.length,xr=Math.max(1,Math.ceil(gt/Ft)-1),Fr="".concat(pe.slice(0,xr),"...");st.attr("text",Fr)}}}}function xP(a,i,t){yP(a,i,t),_P(a,i,t)}function bP(a,i,t){return i===void 0&&(i=!0),t===void 0&&(t=!1),function(s){var l=s.options,f=s.chart,d=l.conversionTag,m=l.theme;return d&&!t&&(f.theme(mn({},(0,b.Kn)(m)?m:ud(m),{columnWidthRatio:1/3})),f.annotation().shape({render:function(x,T){var O=x.addGroup({id:"".concat(f.id,"-conversion-tag-group"),name:"conversion-tag-group"}),D=(0,b.sE)(f.geometries,function(J){return J.type==="interval"}),B={view:T,geometry:D,group:O,field:a,horizontal:i,options:mP(d,i)},U=D.elements;(0,b.S6)(U,function(J,pe){pe>0&&xP(B,U[pe-1],J)})}})),s}}function SP(a){var i=a.options,t=i.legend,s=i.seriesField,l=i.isStack;return s?t!==!1&&(t=(0,A.pi)({position:l?"right-top":"top-left"},t)):t=!1,a.options.legend=t,a}function by(a){var i=a.chart,t=a.options,s=t.data,l=t.columnStyle,f=t.color,d=t.columnWidthRatio,m=t.isPercent,x=t.isGroup,T=t.isStack,O=t.xField,D=t.yField,B=t.seriesField,U=t.groupField,J=t.tooltip,pe=t.shape,Ee=m&&x&&T?iP(s,D,[O,U],D):xy(s,D,O,D,m),Ce=[];T&&B&&!x?Ee.forEach(function(bt){var Ft=Ce.find(function(xr){return xr[O]===bt[O]&&xr[B]===bt[B]});Ft?Ft[D]+=bt[D]||0:Ce.push((0,A.pi)({},bt))}):Ce=Ee,i.data(Ce);var st=m?(0,A.pi)({formatter:function(bt){var Ft;return{name:x&&T?"".concat(bt[B]," - ").concat(bt[U]):(Ft=bt[B])!==null&&Ft!==void 0?Ft:bt[O],value:(Number(bt[D])*100).toFixed(2)+"%"}}},J):J,gt=mn({},a,{options:{data:Ce,widthRatio:d,tooltip:st,interval:{shape:pe,style:l,color:f}}});return Wc(gt),gt}function rS(a){var i,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data,T=s.isPercent,O=T?{max:1,min:0,minLimit:0,maxLimit:1}:{};return qi(Hu((i={},i[d]=l,i[m]=f,i),(t={},t[d]={type:"cat"},t[m]=(0,A.pi)((0,A.pi)({},fy(x,m)),O),t)))(a)}function EP(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?i.axis(d,!1):i.axis(d,l),a}function wP(a){var i=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s&&l?i.legend(l,s):s===!1&&i.legend(!1),a}function CP(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=t.isRange,d=rl(i,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,A._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:(0,A.pi)({layout:x!=null&&x.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},nl(f?(0,A.pi)({content:function(T){var O;return(O=T[l])===null||O===void 0?void 0:O.join("-")}},x):x))})}return a}function kC(a){var i=a.chart,t=a.options,s=t.tooltip,l=t.isGroup,f=t.isStack,d=t.groupField,m=t.data,x=t.xField,T=t.yField,O=t.seriesField;if(s===!1)i.tooltip(!1);else{var D=s;if(l&&f){var B=D.customItems,U=(D==null?void 0:D.formatter)||function(J){return{name:"".concat(J[O]," - ").concat(J[d]),value:J[T]}};D=(0,A.pi)((0,A.pi)({},D),{customItems:function(J){var pe=[];return(0,b.S6)(J,function(Ee){var Ce=(0,b.hX)(m,function(st){return(0,b.BD)(st,cs(Ee.data,[x,O]))});Ce.forEach(function(st){pe.push((0,A.pi)((0,A.pi)((0,A.pi)({},Ee),{value:st[T],data:st,mappingData:{_origin:st}}),U(st)))})}),B?B(pe):pe}})}i.tooltip(D)}return a}function v1(a,i){i===void 0&&(i=!1);var t=a.options,s=t.seriesField;return qi(SP,qo,ep("columnStyle"),Np,xC("rect"),by,rS,EP,wP,kC,s1,_C,CP,OC,hu,As,wu(),bP(t.yField,!i,!!s),gP(!t.isStack),Yg)(a)}function TP(a){var i=a.options,t=i.xField,s=i.yField,l=i.xAxis,f=i.yAxis,d={left:"bottom",right:"top",top:"left",bottom:"right"},m=f!==!1?(0,A.pi)({position:d[(f==null?void 0:f.position)||"left"]},f):!1,x=l!==!1?(0,A.pi)({position:d[(l==null?void 0:l.position)||"bottom"]},l):!1;return(0,A.pi)((0,A.pi)({},a),{options:(0,A.pi)((0,A.pi)({},i),{xField:s,yField:t,xAxis:m,yAxis:x})})}function AP(a){var i=a.options,t=i.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),mn({},a,{options:{label:t}})}function MP(a){var i=a.options,t=i.seriesField,s=i.isStack,l=i.legend;return t?l!==!1&&(l=(0,A.pi)({position:s?"top-left":"right-top"},l||{})):l=!1,mn({},a,{options:{legend:l}})}function RP(a){var i=a.options,t=[{type:"transpose"},{type:"reflectY"}].concat(i.coordinate||[]);return mn({},a,{options:{coordinate:t}})}function IP(a){var i=a.chart,t=a.options,s=t.barStyle,l=t.barWidthRatio,f=t.minBarWidth,d=t.maxBarWidth,m=t.barBackground;return v1({chart:i,options:(0,A.pi)((0,A.pi)({},t),{columnStyle:s,columnWidthRatio:l,minColumnWidth:f,maxColumnWidth:d,columnBackground:m})},!0)}function DC(a){return qi(TP,AP,MP,Kl,RP,IP)(a)}var OP=mn({},io.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),LC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bar",t}return i.getDefaultOptions=function(){return OP},i.prototype.changeData=function(t){var s,l;this.updateOption({data:t});var f=this,d=f.chart,m=f.options,x=m.isPercent,T=m.xField,O=m.yField,D=m.xAxis,B=m.yAxis;s=[O,T],T=s[0],O=s[1],l=[B,D],D=l[0],B=l[1];var U=(0,A.pi)((0,A.pi)({},m),{xField:T,yField:O,yAxis:B,xAxis:D});rS({chart:d,options:U}),d.changeData(xy(t,T,O,T,x))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return DC},i}(io),PP=mn({},io.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),FC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="column",t}return i.getDefaultOptions=function(){return PP},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.yField,f=s.xField,d=s.isPercent,m=this,x=m.chart,T=m.options;rS({chart:x,options:T}),this.chart.changeData(xy(t,l,f,l,d))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return v1},i}(io),nS,Kv="$$percentage$$",Qv="$$mappingValue$$",pv="$$conversion$$",iS="$$totalPercentage$$",$m="$$x$$",Sy="$$y$$",kP={appendPadding:[0,80],minSize:0,maxSize:1,meta:(nS={},nS[Qv]={min:0,max:1,nice:!1},nS),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},BC="CONVERSION_TAG_NAME";function aS(a,i,t){var s=[],l=t.yField,f=t.maxSize,d=t.minSize,m=(0,b.U2)((0,b.UT)(i,l),[l]),x=(0,b.hj)(f)?f:1,T=(0,b.hj)(d)?d:0;return s=(0,b.UI)(a,function(O,D){var B=(O[l]||0)/m;return O[Kv]=B,O[Qv]=(x-T)*B+T,O[pv]=[(0,b.U2)(a,[D-1,l]),O[l]],O}),s}function g1(a){return function(i){var t=i.chart,s=i.options,l=s.conversionTag,f=s.filteredData,d=f||t.getOptions().data;if(l){var m=l.formatter;d.forEach(function(x,T){if(!(T<=0||Number.isNaN(x[Qv]))){var O=a(x,T,d,{top:!0,name:BC,text:{content:(0,b.mf)(m)?m(x,d):m,offsetX:l.offsetX,offsetY:l.offsetY,position:"end",autoRotate:!1,style:(0,A.pi)({textAlign:"start",textBaseline:"middle"},l.style)}});t.annotation().line(O)}})}return i}}function DP(a){var i=a.chart,t=a.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=t.maxSize,m=t.minSize,x=aS(l,l,{yField:f,maxSize:d,minSize:m});return i.data(x),a}function LP(a){var i=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.shape,T=x===void 0?"funnel":x,O=t.funnelStyle,D=t.state,B=tp(d,[s,l]),U=B.fields,J=B.formatter;Cu({chart:i,options:{type:"interval",xField:s,yField:Qv,colorField:s,tooltipFields:(0,b.kJ)(U)&&U.concat([Kv,pv]),mapping:{shape:T,tooltip:J,color:f,style:O},label:m,state:D}});var pe=rl(a.chart,"interval");return pe.adjust("symmetric"),a}function FP(a){var i=a.chart,t=a.options,s=t.isTransposed;return i.coordinate({type:"rect",actions:s?[]:[["transpose"],["scale",1,-1]]}),a}function NC(a){var i=a.options,t=a.chart,s=i.maxSize,l=(0,b.U2)(t,["geometries","0","dataArray"],[]),f=(0,b.U2)(t,["options","data","length"]),d=(0,b.UI)(l,function(x){return(0,b.U2)(x,["0","nextPoints","0","x"])*f-.5}),m=function(x,T,O,D){var B=s-(s-x[Qv])/2;return(0,A.pi)((0,A.pi)({},D),{start:[d[T-1]||T-.5,B],end:[d[T-1]||T-.5,B+.05]})};return g1(m)(a),a}function zC(a){return qi(DP,LP,FP,NC)(a)}function BP(a){var i,t=a.chart,s=a.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((i={},i[d]={sync:!0},i)),a}function NP(a){var i=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.compareField,x=t.isTransposed,T=t.tooltip,O=t.maxSize,D=t.minSize,B=t.label,U=t.funnelStyle,J=t.state,pe=t.showFacetTitle;return i.facet("mirror",{fields:[m],transpose:!x,padding:x?0:[32,0,0,0],showTitle:pe,eachView:function(Ee,Ce){var st=x?Ce.rowIndex:Ce.columnIndex;x||Ee.coordinate({type:"rect",actions:[["transpose"],["scale",st===0?-1:1,-1]]});var gt=aS(Ce.data,s,{yField:f,maxSize:O,minSize:D});Ee.data(gt);var bt=tp(T,[l,f,m]),Ft=bt.fields,xr=bt.formatter,Fr=x?{offset:st===0?10:-23,position:st===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:st===0?"end":"start"}};Cu({chart:Ee,options:{type:"interval",xField:l,yField:Qv,colorField:l,tooltipFields:(0,b.kJ)(Ft)&&Ft.concat([Kv,pv]),mapping:{shape:"funnel",tooltip:xr,color:d,style:U},label:B===!1?!1:mn({},Fr,B),state:J}})}}),a}function UC(a){var i=a.chart,t=a.index,s=a.options,l=s.conversionTag,f=s.isTransposed;((0,b.hj)(t)?[i]:i.views).forEach(function(d,m){var x=(0,b.U2)(d,["geometries","0","dataArray"],[]),T=(0,b.U2)(d,["options","data","length"]),O=(0,b.UI)(x,function(B){return(0,b.U2)(B,["0","nextPoints","0","x"])*T-.5}),D=function(B,U,J,pe){var Ee=(t||m)===0?-1:1;return mn({},pe,{start:[O[U-1]||U-.5,B[Qv]],end:[O[U-1]||U-.5,B[Qv]+.05],text:f?{style:{textAlign:"start"}}:{offsetX:l!==!1?Ee*l.offsetX:0,style:{textAlign:(t||m)===0?"end":"start"}}})};g1(D)(mn({},{chart:d,options:s}))})}function zP(a){var i=a.chart;return i.once("beforepaint",function(){return UC(a)}),a}function ZC(a){return qi(BP,NP,zP)(a)}function UP(a){var i=a.chart,t=a.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=(0,b.u4)(l,function(T,O){return T+(O[f]||0)},0),m=(0,b.UT)(l,f)[f],x=(0,b.UI)(l,function(T,O){var D=[],B=[];if(T[iS]=(T[f]||0)/d,O){var U=l[O-1][$m],J=l[O-1][Sy];D[0]=U[3],B[0]=J[3],D[1]=U[2],B[1]=J[2]}else D[0]=-.5,B[0]=1,D[1]=.5,B[1]=1;return B[2]=B[1]-T[iS],D[2]=(B[2]+1)/4,B[3]=B[2],D[3]=-D[2],T[$m]=D,T[Sy]=B,T[Kv]=(T[f]||0)/m,T[pv]=[(0,b.U2)(l,[O-1,f]),T[f]],T});return i.data(x),a}function ZP(a){var i=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.funnelStyle,T=t.state,O=tp(d,[s,l]),D=O.fields,B=O.formatter;return Cu({chart:i,options:{type:"polygon",xField:$m,yField:Sy,colorField:s,tooltipFields:(0,b.kJ)(D)&&D.concat([Kv,pv]),label:m,state:T,mapping:{tooltip:B,color:f,style:x}}}),a}function VP(a){var i=a.chart,t=a.options,s=t.isTransposed;return i.coordinate({type:"rect",actions:s?[["transpose"],["reflect","x"]]:[]}),a}function jP(a){var i=function(t,s,l,f){return(0,A.pi)((0,A.pi)({},f),{start:[t[$m][1],t[Sy][1]],end:[t[$m][1]+.05,t[Sy][1]]})};return g1(i)(a),a}function VC(a){return qi(UP,ZP,VP,jP)(a)}function jC(a){var i,t=a.chart,s=a.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((i={},i[d]={sync:!0},i)),a}function HP(a){var i=a.chart,t=a.options,s=t.seriesField,l=t.isTransposed,f=t.showFacetTitle;return i.facet("rect",{fields:[s],padding:[l?0:32,10,0,10],showTitle:f,eachView:function(d,m){zC(mn({},a,{chart:d,options:{data:m.data}}))}}),a}function WP(a){return qi(jC,HP)(a)}var GP=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.rendering=!1,t}return i.prototype.change=function(t){var s=this;if(!this.rendering){var l=t.seriesField,f=t.compareField,d=f?UC:NC,m=this.context.view,x=l||f?m.views:[m];(0,b.UI)(x,function(T,O){var D=T.getController("annotation"),B=(0,b.hX)((0,b.U2)(D,["option"],[]),function(J){var pe=J.name;return pe!==BC});D.clear(!0),(0,b.S6)(B,function(J){typeof J=="object"&&T.annotation()[J.type](J)});var U=(0,b.U2)(T,["filteredData"],T.getOptions().data);d({chart:T,index:O,options:(0,A.pi)((0,A.pi)({},t),{filteredData:aS(U,U,t)})}),T.filterData(U),s.rendering=!0,T.render(!0)})}this.rendering=!1},i}(Mn),HC="funnel-conversion-tag",oS="funnel-afterrender",WC={trigger:"afterrender",action:"".concat(HC,":change")};Kr(HC,GP),Fn(oS,{start:[WC]});function $P(a){var i=a.options,t=i.compareField,s=i.xField,l=i.yField,f=i.locale,d=i.funnelStyle,m=i.data,x=l1(f),T={label:t?{fields:[s,l,t,Kv,pv],formatter:function(D){return"".concat(D[l])}}:{fields:[s,l,Kv,pv],offset:0,position:"middle",formatter:function(D){return"".concat(D[s]," ").concat(D[l])}},tooltip:{title:s,formatter:function(D){return{name:D[s],value:D[l]}}},conversionTag:{formatter:function(D){return"".concat(x.get(["conversionTag","label"]),": ").concat(PC.apply(void 0,D[pv]))}}},O;return(t||d)&&(O=function(D){return mn({},t&&{lineWidth:1,stroke:"#fff"},(0,b.mf)(d)?d(D):d)}),mn({options:T},a,{options:{funnelStyle:O,data:(0,b.d9)(m)}})}function GC(a){var i=a.options,t=i.compareField,s=i.dynamicHeight,l=i.seriesField;return l?WP(a):t?ZC(a):s?VC(a):zC(a)}function XP(a){var i,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return qi(Hu((i={},i[f]=s,i[d]=l,i)))(a)}function YP(a){var i=a.chart;return i.axis(!1),a}function qP(a){var i=a.chart,t=a.options,s=t.legend;return s===!1?i.legend(!1):i.legend(s),a}function $C(a){var i=a.chart,t=a.options,s=t.interactions,l=t.dynamicHeight;return(0,b.S6)(s,function(f){f.enable===!1?i.removeInteraction(f.type):i.interaction(f.type,f.cfg||{})}),l?i.removeInteraction(oS):i.interaction(oS,{start:[(0,A.pi)((0,A.pi)({},WC),{arg:t})]}),a}function XC(a){return qi($P,GC,XP,YP,Kl,$C,qP,As,qo,wu())(a)}var YC=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="funnel",t}return i.getDefaultOptions=function(){return kP},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return XC},i.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=Gg(this.chart);(0,b.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},i.prototype.getStates=function(){var t=Gg(this.chart),s=[];return(0,b.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,b.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},i.CONVERSATION_FIELD=pv,i.PERCENT_FIELD=Kv,i.TOTAL_PERCENT_FIELD=iS,i}(io),Ey,m1="range",sS="type",dv="percent",KP="#f0f0f0",qC="indicator-view",KC="range-view",QP={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(Ey={},Ey[m1]={sync:"v"},Ey[dv]={sync:"v",tickCount:5,tickInterval:.2},Ey),animation:!1};function JP(a,i){return a.map(function(t,s){var l;return l={},l[m1]=t-(a[s-1]||0),l[sS]="".concat(s),l[dv]=i,l})}function uS(a){var i;return[(i={},i[dv]=(0,b.uZ)(a,0,1),i)]}function QC(a,i){var t=(0,b.U2)(i,["ticks"],[]),s=(0,b.dp)(t)?(0,b.jj)(t):[0,(0,b.uZ)(a,0,1),1];return s[0]||s.shift(),JP(s,a)}function ek(a){var i=a.chart,t=a.options,s=t.percent,l=t.range,f=t.radius,d=t.innerRadius,m=t.startAngle,x=t.endAngle,T=t.axis,O=t.indicator,D=t.gaugeStyle,B=t.type,U=t.meter,J=l.color,pe=l.width;if(O){var Ee=uS(s),Ce=i.createView({id:qC});Ce.data(Ee),Ce.point().position("".concat(dv,"*1")).shape(O.shape||"gauge-indicator").customInfo({defaultColor:i.getTheme().defaultColor,indicator:O}),Ce.coordinate("polar",{startAngle:m,endAngle:x,radius:d*f}),Ce.axis(dv,T),Ce.scale(dv,cs(T,fa))}var st=QC(s,t.range),gt=i.createView({id:KC});gt.data(st);var bt=(0,b.HD)(J)?[J,KP]:J,Ft=Wc({chart:gt,options:{xField:"1",yField:m1,seriesField:sS,rawFields:[dv],isStack:!0,interval:{color:bt,style:D,shape:B==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:pe,maxColumnWidth:pe}}).ext,xr=Ft.geometry;return xr.customInfo({meter:U}),gt.coordinate("polar",{innerRadius:d,radius:f,startAngle:m,endAngle:x}).transpose(),a}function JC(a){var i;return qi(Hu((i={range:{min:0,max:1,maxLimit:1,minLimit:0}},i[dv]={},i)))(a)}function lS(a,i){var t=a.chart,s=a.options,l=s.statistic,f=s.percent;if(t.getController("annotation").clear(!0),l){var d=l.content,m=void 0;d&&(m=mn({},{content:"".concat((f*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},d)),vC(t,{statistic:(0,A.pi)((0,A.pi)({},l),{content:m})},{percent:f})}return i&&t.render(!0),a}function wy(a){var i=a.chart,t=a.options,s=t.tooltip;return s?i.tooltip(mn({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(l,f){var d=(0,b.U2)(f,[0,"data",dv],0);return"".concat((d*100).toFixed(2),"%")}},s)):i.tooltip(!1),a}function eT(a){var i=a.chart;return i.legend(!1),a}function cS(a){return qi(qo,As,ek,JC,wy,lS,hu,wu(),eT)(a)}xi("point","gauge-indicator",{draw:function(a,i){var t=a.customInfo,s=t.indicator,l=t.defaultColor,f=s,d=f.pointer,m=f.pin,x=i.addGroup(),T=this.parsePoint({x:0,y:0});return d&&x.addShape("line",{name:"pointer",attrs:(0,A.pi)({x1:T.x,y1:T.y,x2:a.x,y2:a.y,stroke:l},d.style)}),m&&x.addShape("circle",{name:"pin",attrs:(0,A.pi)({x:T.x,y:T.y,stroke:l},m.style)}),x}}),xi("interval","meter-gauge",{draw:function(a,i){var t=a.customInfo.meter,s=t===void 0?{}:t,l=s.steps,f=l===void 0?50:l,d=s.stepRatio,m=d===void 0?.5:d;f=f<1?1:f,m=(0,b.uZ)(m,0,1);var x=this.coordinate,T=x.startAngle,O=x.endAngle,D=0;if(m>0&&m<1){var B=O-T;D=B/f/(m/(1-m)+1-1/f)}for(var U=D/(1-m)*m,J=i.addGroup(),pe=this.coordinate.getCenter(),Ee=this.coordinate.getRadius(),Ce=uc.getAngle(a,this.coordinate),st=Ce.startAngle,gt=Ce.endAngle,bt=st;bt<gt;){var Ft=void 0,xr=(bt-T)%(U+D);xr<U?Ft=bt+(U-xr):(bt+=U+D-xr,Ft=bt+U);var Fr=uc.getSectorPath(pe.x,pe.y,Ee,bt,Math.min(Ft,gt),Ee*this.coordinate.innerRadius);J.addShape("path",{name:"meter-gauge",attrs:{path:Fr,fill:a.color,stroke:a.color,lineWidth:.5}}),bt=Ft+D}return J}});var tk=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="gauge",t}return i.getDefaultOptions=function(){return QP},i.prototype.changeData=function(t){this.chart.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this.chart,Ne.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var s=this.chart.views.find(function(f){return f.id===qC});s&&s.data(uS(t));var l=this.chart.views.find(function(f){return f.id===KC});l&&l.data(QC(t,this.options.range)),lS({chart:this.chart,options:this.options},!0),this.chart.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this.chart,Ne.AFTER_CHANGE_DATA,null))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return cS},i}(io);function tT(a,i,t){if(t===1)return[0,i];var s=Math.floor(a/i);return[i*s,i*(s+1)]}function rk(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function rT(a,i,t,s,l){var f=(0,b.d9)(a);(0,b.MR)(f,i);var d=(0,b.I)(f,i),m=(0,b.rx)(d),x=m.max-m.min,T=t;if(!t&&s&&(T=s>1?x/(s-1):m.max),!t&&!s){var O=rk(d);T=x/O}var D={},B=(0,b.vM)(f,l);(0,b.xb)(B)?(0,b.S6)(f,function(J){var pe=J[i],Ee=tT(pe,T,s),Ce="".concat(Ee[0],"-").concat(Ee[1]);(0,b.wH)(D,Ce)||(D[Ce]={range:Ee,count:0}),D[Ce].count+=1}):Object.keys(B).forEach(function(J){(0,b.S6)(B[J],function(pe){var Ee=pe[i],Ce=tT(Ee,T,s),st="".concat(Ce[0],"-").concat(Ce[1]),gt="".concat(st,"-").concat(J);(0,b.wH)(D,gt)||(D[gt]={range:Ce,count:0},D[gt][l]=J),D[gt].count+=1})});var U=[];return(0,b.S6)(D,function(J){U.push(J)}),U}var Cy="range",Ty="count",nk=mn({},io.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function y1(a){var i=a.chart,t=a.options,s=t.data,l=t.binField,f=t.binNumber,d=t.binWidth,m=t.color,x=t.stackField,T=t.legend,O=t.columnStyle,D=rT(s,l,d,f,x);i.data(D);var B=mn({},a,{options:{xField:Cy,yField:Ty,seriesField:x,isStack:!0,interval:{color:m,style:O}}});return Wc(B),T&&x?i.legend(x,T):i.legend(!1),a}function ik(a){var i,t=a.options,s=t.xAxis,l=t.yAxis;return qi(Hu((i={},i[Cy]=s,i[Ty]=l,i)))(a)}function fS(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis;return s===!1?i.axis(Cy,!1):i.axis(Cy,s),l===!1?i.axis(Ty,!1):i.axis(Ty,l),a}function ak(a){var i=a.chart,t=a.options,s=t.label,l=rl(i,"interval");if(!s)l.label(!1);else{var f=s.callback,d=(0,A._T)(s,["callback"]);l.label({fields:[Ty],callback:f,cfg:nl(d)})}return a}function nT(a){return qi(qo,ep("columnStyle"),y1,ik,fS,Np,ak,Kl,hu,As)(a)}var ok=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="histogram",t}return i.getDefaultOptions=function(){return nk},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.binField,f=s.binNumber,d=s.binWidth,m=s.stackField;this.chart.changeData(rT(t,l,d,f,m))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return nT},i}(io),sk=mn({},io.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),uk=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.active=function(){var t=this.getView(),s=this.context.event;if(s.data){var l=s.data.items,f=t.geometries.filter(function(d){return d.type==="point"});(0,b.S6)(f,function(d){(0,b.S6)(d.elements,function(m){var x=(0,b.cx)(l,function(T){return T.data===m.data})!==-1;m.setState("active",x)})})}},i.prototype.reset=function(){var t=this.getView(),s=t.geometries.filter(function(l){return l.type==="point"});(0,b.S6)(s,function(l){(0,b.S6)(l.elements,function(f){f.setState("active",!1)})})},i.prototype.getView=function(){return this.context.view},i}(Mn);Kr("marker-active",uk),Fn("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var iT=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t}return i.getDefaultOptions=function(){return sk},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;p1({chart:l,options:f}),this.chart.changeData(t)},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return lP},i}(io),aT=mn({},io.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),lk=[1,0,0,0,1,0,0,0,1];function hS(a,i){var t=i?(0,A.ev)([],i,!0):(0,A.ev)([],lk,!0);return uc.transform(t,a)}var ck=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getActiveElements=function(){var t=uc.getDelegationObject(this.context);if(t){var s=this.context.view,l=t.component,f=t.item,d=l.get("field");if(d){var m=s.geometries[0].elements;return m.filter(function(x){return x.getModel().data[d]===f.value})}}return[]},i.prototype.getActiveElementLabels=function(){var t=this.context.view,s=this.getActiveElements(),l=t.geometries[0].labelsContainer.getChildren();return l.filter(function(f){return s.find(function(d){return(0,b.Xy)(d.getData(),f.get("data"))})})},i.prototype.transfrom=function(t){t===void 0&&(t=7.5);var s=this.getActiveElements(),l=this.getActiveElementLabels();s.forEach(function(f,d){var m=l[d],x=f.geometry.coordinate;if(x.isPolar&&x.isTransposed){var T=uc.getAngle(f.getModel(),x),O=T.startAngle,D=T.endAngle,B=(O+D)/2,U=t,J=U*Math.cos(B),pe=U*Math.sin(B);f.shape.setMatrix(hS([["t",J,pe]])),m.setMatrix(hS([["t",J,pe]]))}})},i.prototype.active=function(){this.transfrom()},i.prototype.reset=function(){this.transfrom(0)},i}(Mn);function fk(a){var i=a.event,t,s=i.target;return s&&(t=s.get("element")),t}var hk=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getAnnotations=function(t){var s=t||this.context.view;return s.getController("annotation").option},i.prototype.getInitialAnnotation=function(){return this.initialAnnotation},i.prototype.init=function(){var t=this,s=this.context.view;s.removeInteraction("tooltip"),s.on("afterchangesize",function(){var l=t.getAnnotations(s);t.initialAnnotation=l})},i.prototype.change=function(t){var s=this.context,l=s.view,f=s.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var d=(0,b.U2)(f,["data","data"]);if(f.type.match("legend-item")){var m=uc.getDelegationObject(this.context),x=l.getGroupedFields()[0];if(m&&x){var T=m.item;d=l.getData().find(function(U){return U[x]===T.value})}}if(d){var O=(0,b.U2)(t,"annotations",[]),D=(0,b.U2)(t,"statistic",{});l.getController("annotation").clear(!0),(0,b.S6)(O,function(U){typeof U=="object"&&l.annotation()[U.type](U)}),yy(l,{statistic:D,plotType:"pie"},d),l.render(!0)}var B=fk(this.context);B&&B.shape.toFront()},i.prototype.reset=function(){var t=this.context.view,s=t.getController("annotation");s.clear(!0);var l=this.getInitialAnnotation();(0,b.S6)(l,function(f){t.annotation()[f.type](f)}),t.render(!0)},i}(Mn),oT="pie-statistic";Kr(oT,hk),Fn("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Kr("pie-legend",ck),Fn("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function pk(a,i){var t=null;return(0,b.S6)(a,function(s){typeof s[i]=="number"&&(t+=s[i])}),t}function dk(a,i){var t;switch(a){case"inner":return t="-30%",(0,b.HD)(i)&&i.endsWith("%")?parseFloat(i)*.01>0?t:i:i<0?i:t;case"outer":return t=12,(0,b.HD)(i)&&i.endsWith("%")?parseFloat(i)*.01<0?t:i:i>0?i:t;default:return i}}function _1(a,i){return(0,b.yW)(Xv(a,i),function(t){return t[i]===0})}function vk(a){var i=a.chart,t=a.options,s=t.data,l=t.angleField,f=t.colorField,d=t.color,m=t.pieStyle,x=t.shape,T=Xv(s,l);if(_1(T,l)){var O="$$percentage$$";T=T.map(function(B){var U;return(0,A.pi)((0,A.pi)({},B),(U={},U[O]=1/T.length,U))}),i.data(T);var D=mn({},a,{options:{xField:"1",yField:O,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});Wc(D)}else{i.data(T);var D=mn({},a,{options:{xField:"1",yField:l,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});Wc(D)}return a}function gk(a){var i,t=a.chart,s=a.options,l=s.meta,f=s.colorField,d=mn({},l);return t.scale(d,(i={},i[f]={type:"cat"},i)),a}function mk(a){var i=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return i.coordinate({type:"theta",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),a}function yk(a){var i=a.chart,t=a.options,s=t.label,l=t.colorField,f=t.angleField,d=i.geometries[0];if(!s)d.label(!1);else{var m=s.callback,x=(0,A._T)(s,["callback"]),T=nl(x);if(T.content){var O=T.content;T.content=function(J,pe,Ee){var Ce=J[l],st=J[f],gt=i.getScaleByField(f),bt=gt==null?void 0:gt.scale(st);return(0,b.mf)(O)?O((0,A.pi)((0,A.pi)({},J),{percent:bt}),pe,Ee):(0,b.HD)(O)?n1(O,{value:st,name:Ce,percentage:(0,b.hj)(bt)&&!(0,b.UM)(st)?"".concat((bt*100).toFixed(2),"%"):null}):O}}var D={inner:"",outer:"pie-outer",spider:"pie-spider"},B=T.type?D[T.type]:"pie-outer",U=T.layout?(0,b.kJ)(T.layout)?T.layout:[T.layout]:[];T.layout=(B?[{type:B}]:[]).concat(U),d.label({fields:l?[f,l]:[f],callback:m,cfg:(0,A.pi)((0,A.pi)({},T),{offset:dk(T.type,T.offset),type:"pie"})})}return a}function sT(a){var i=a.innerRadius,t=a.statistic,s=a.angleField,l=a.colorField,f=a.meta,d=a.locale,m=l1(d);if(i&&t){var x=mn({},aT.statistic,t),T=x.title,O=x.content;return T!==!1&&(T=mn({},{formatter:function(D){var B=D?D[l]:(0,b.UM)(T.content)?m.get(["statistic","total"]):T.content,U=(0,b.U2)(f,[l,"formatter"])||function(J){return J};return U(B)}},T)),O!==!1&&(O=mn({},{formatter:function(D,B){var U=D?D[s]:pk(B,s),J=(0,b.U2)(f,[s,"formatter"])||function(pe){return pe};return D||(0,b.UM)(O.content)?J(U):O.content}},O)),mn({},{statistic:{title:T,content:O}},a)}return a}function uT(a){var i=a.chart,t=a.options,s=sT(t),l=s.innerRadius,f=s.statistic;return i.getController("annotation").clear(!0),qi(wu())(a),l&&f&&yy(i,{statistic:f,plotType:"pie"}),a}function _k(a){var i=a.chart,t=a.options,s=t.tooltip,l=t.colorField,f=t.angleField,d=t.data;if(s===!1)i.tooltip(s);else if(i.tooltip(mn({},s,{shared:!1})),_1(d,f)){var m=(0,b.U2)(s,"fields"),x=(0,b.U2)(s,"formatter");(0,b.xb)((0,b.U2)(s,"fields"))&&(m=[l,f],x=x||function(T){return{name:T[l],value:(0,b.BB)(T[f])}}),i.geometries[0].tooltip(m.join("*"),qg(m,x))}return a}function xk(a){var i=a.chart,t=a.options,s=sT(t),l=s.interactions,f=s.statistic,d=s.annotations;return(0,b.S6)(l,function(m){var x,T;if(m.enable===!1)i.removeInteraction(m.type);else if(m.type==="pie-statistic-active"){var O=[];!((x=m.cfg)===null||x===void 0)&&x.start||(O=[{trigger:"element:mouseenter",action:"".concat(oT,":change"),arg:{statistic:f,annotations:d}}]),(0,b.S6)((T=m.cfg)===null||T===void 0?void 0:T.start,function(D){O.push((0,A.pi)((0,A.pi)({},D),{arg:{statistic:f,annotations:d}}))}),i.interaction(m.type,mn({},m.cfg,{start:O}))}else i.interaction(m.type,m.cfg||{})}),a}function lT(a){return qi(ep("pieStyle"),vk,gk,qo,mk,Xg,_k,yk,Np,uT,xk,As)(a)}var bk=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pie",t}return i.getDefaultOptions=function(){return aT},i.prototype.changeData=function(t){this.chart.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this.chart,Ne.BEFORE_CHANGE_DATA,null));var s=this.options,l=this.options.angleField,f=Xv(s.data,l),d=Xv(t,l);_1(f,l)||_1(d,l)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(d),uT({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this.chart,Ne.AFTER_CHANGE_DATA,null))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return lT},i}(io),cT=["#FAAD14","#E8EDF3"],Sk={percent:.2,color:cT,animation:{}};function pS(a){var i=(0,b.uZ)(ja(a)?a:0,0,1);return[{current:"".concat(i),type:"current",percent:i},{current:"".concat(i),type:"target",percent:1}]}function fT(a){var i=a.chart,t=a.options,s=t.percent,l=t.progressStyle,f=t.color,d=t.barWidthRatio;i.data(pS(s));var m=mn({},a,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:d,interval:{style:l,color:(0,b.HD)(f)?[f,cT[1]]:f},args:{zIndexReversed:!0,sortZIndex:!0}}});return Wc(m),i.tooltip(!1),i.axis(!1),i.legend(!1),a}function Ek(a){var i=a.chart;return i.coordinate("rect").transpose(),a}function wk(a){return qi(fT,Hu({}),Ek,As,qo,wu())(a)}var Ck=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="process",t}return i.getDefaultOptions=function(){return Sk},i.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(pS(t))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return wk},i}(io);function Tk(a){var i=a.chart,t=a.options,s=t.innerRadius,l=t.radius;return i.coordinate("theta",{innerRadius:s,radius:l}),a}function hT(a,i){var t=a.chart,s=a.options,l=s.innerRadius,f=s.statistic,d=s.percent,m=s.meta;if(t.getController("annotation").clear(!0),l&&f){var x=(0,b.U2)(m,["percent","formatter"])||function(O){return"".concat((O*100).toFixed(2),"%")},T=f.content;T&&(T=mn({},T,{content:(0,b.UM)(T.content)?x(d):T.content})),yy(t,{statistic:(0,A.pi)((0,A.pi)({},f),{content:T}),plotType:"ring-progress"},{percent:d})}return i&&t.render(!0),a}function pT(a){return qi(fT,Hu({}),Tk,hT,As,qo,wu())(a)}var Ak={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},x1=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ring-process",t}return i.getDefaultOptions=function(){return Ak},i.prototype.changeData=function(t){this.chart.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this.chart,Ne.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(pS(t)),hT({chart:this.chart,options:this.options},!0),this.chart.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this.chart,Ne.AFTER_CHANGE_DATA,null))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return pT},i}(io),Qg=k(56645),Mk={exp:Qg.regressionExp,linear:Qg.regressionLinear,loess:Qg.regressionLoess,log:Qg.regressionLog,poly:Qg.regressionPoly,pow:Qg.regressionPow,quad:Qg.regressionQuad};function Rk(a,i){var t=10,s={regionStyle:[{position:{start:[a,"max"],end:["max",i]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[a,i]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",i],end:[a,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[a,i],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",i],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",i],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",i],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",i],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return s}var Ik=function(a,i){var t=i.view,s=i.options,l=s.xField,f=s.yField,d=t.getScaleByField(l),m=t.getScaleByField(f),x=a.map(function(T){return t.getCoordinate().convert({x:d.scale(T[0]),y:m.scale(T[1])})});return gy(x,!1)},Ok=function(a){var i=a.options,t=i.xField,s=i.yField,l=i.data,f=i.regressionLine,d=f.type,m=d===void 0?"linear":d,x=f.algorithm,T=f.equation,O,D=null;if(x)O=(0,b.kJ)(x)?x:x(l),D=T;else{var B=Mk[m]().x(function(U){return U[t]}).y(function(U){return U[s]});O=B(l),D=kk(m,O)}return[Ik(O,a),D]},Pk=function(a){var i,t=a.meta,s=t===void 0?{}:t,l=a.xField,f=a.yField,d=a.data,m=d[0][l],x=d[0][f],T=m>0,O=x>0;function D(B,U){var J=(0,b.U2)(s,[B]);function pe(Ce){return(0,b.U2)(J,Ce)}var Ee={};return U==="x"?((0,b.hj)(m)&&((0,b.hj)(pe("min"))||(Ee.min=T?0:m*2),(0,b.hj)(pe("max"))||(Ee.max=T?m*2:0)),Ee):((0,b.hj)(x)&&((0,b.hj)(pe("min"))||(Ee.min=O?0:x*2),(0,b.hj)(pe("max"))||(Ee.max=O?x*2:0)),Ee)}return(0,A.pi)((0,A.pi)({},s),(i={},i[l]=(0,A.pi)((0,A.pi)({},s[l]),D(l,"x")),i[f]=(0,A.pi)((0,A.pi)({},s[f]),D(f,"y")),i))};function kk(a,i){var t,s,l,f=function(T,O){return O===void 0&&(O=4),Math.round(T*Math.pow(10,O))/Math.pow(10,O)},d=function(T){return Number.isFinite(T)?f(T):"?"};switch(a){case"linear":return"y = ".concat(d(i.a),"x + ").concat(d(i.b),", R^2 = ").concat(d(i.rSquared));case"exp":return"y = ".concat(d(i.a),"e^(").concat(d(i.b),"x), R^2 = ").concat(d(i.rSquared));case"log":return"y = ".concat(d(i.a),"ln(x) + ").concat(d(i.b),", R^2 = ").concat(d(i.rSquared));case"quad":return"y = ".concat(d(i.a),"x^2 + ").concat(d(i.b),"x + ").concat(d(i.c),", R^2 = ").concat(d(i.rSquared));case"poly":for(var m="y = ".concat(d((t=i.coefficients)===null||t===void 0?void 0:t[0])," + ").concat(d((s=i.coefficients)===null||s===void 0?void 0:s[1]),"x + ").concat(d((l=i.coefficients)===null||l===void 0?void 0:l[2]),"x^2"),x=3;x<i.coefficients.length;++x)m+=" + ".concat(d(i.coefficients[x]),"x^").concat(x);return"".concat(m,", R^2 = ").concat(d(i.rSquared));case"pow":return"y = ".concat(d(i.a),"x^").concat(d(i.b),", R^2 = ").concat(d(i.rSquared))}return null}function dT(a){var i=a.data,t=i===void 0?[]:i,s=a.xField,l=a.yField;if(t.length){for(var f=!0,d=!0,m=t[0],x=void 0,T=1;T<t.length&&(x=t[T],m[s]!==x[s]&&(f=!1),m[l]!==x[l]&&(d=!1),!(!f&&!d));T++)m=x;var O=[];f&&O.push(s),d&&O.push(l);var D=cs(Pk(a),O);return mn({},a,{meta:D})}return a}function Dk(a){var i=a.chart,t=a.options,s=t.data,l=t.type,f=t.color,d=t.shape,m=t.pointStyle,x=t.shapeField,T=t.colorField,O=t.xField,D=t.yField,B=t.sizeField,U=t.size,J=t.tooltip;B&&(U||(U=[2,8]),(0,b.hj)(U)&&(U=[U,U])),J&&!J.fields&&(J=(0,A.pi)((0,A.pi)({},J),{fields:[O,D,T,B,x]})),i.data(s),Eh(mn({},a,{options:{seriesField:T,point:{color:f,shape:d,size:U,style:m},tooltip:J}}));var pe=rl(i,"point");return l&&pe.adjust(l),a}function Ay(a){var i,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=dT(t);return qi(Hu((i={},i[f]=s,i[d]=l,i)))(mn({},a,{options:m}))}function c4(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return i.axis(f,s),i.axis(d,l),a}function vT(a){var i=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.shapeField,d=t.sizeField,m=t.shapeLegend,x=t.sizeLegend,T=s!==!1;return l&&i.legend(l,T?s:!1),f&&(m?i.legend(f,m):i.legend(f,m===!1?!1:s)),d&&i.legend(d,x||!1),!T&&!m&&!x&&i.legend(!1),a}function gT(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=rl(i,"point");if(!s)f.label(!1);else{var d=s.callback,m=(0,A._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:nl(m)})}return a}function mT(a){var i=a.options,t=i.quadrant,s=[];if(t){var l=t.xBaseline,f=l===void 0?0:l,d=t.yBaseline,m=d===void 0?0:d,x=t.labels,T=t.regionStyle,O=t.lineStyle,D=Rk(f,m),B=new Array(4).join(",").split(",");B.forEach(function(U,J){s.push((0,A.pi)((0,A.pi)({type:"region",top:!1},D.regionStyle[J].position),{style:mn({},D.regionStyle[J].style,T==null?void 0:T[J])}),(0,A.pi)({type:"text",top:!0},mn({},D.labelStyle[J],x==null?void 0:x[J])))}),s.push({type:"line",top:!1,start:["min",m],end:["max",m],style:mn({},D.lineStyle,O)},{type:"line",top:!1,start:[f,"min"],end:[f,"max"],style:mn({},D.lineStyle,O)})}return qi(wu(s))(a)}function yT(a){var i=a.options,t=a.chart,s=i.regressionLine;if(s){var l=s.style,f=s.equationStyle,d=f===void 0?{}:f,m=s.top,x=m===void 0?!1:m,T=s.showEquation,O=T===void 0?!1:T,D={stroke:"#9ba29a",lineWidth:2,opacity:.5},B={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};t.annotation().shape({top:x,render:function(U,J){var pe=U.addGroup({id:"".concat(t.id,"-regression-line"),name:"regression-line-group"}),Ee=Ok({view:J,options:i}),Ce=Ee[0],st=Ee[1];pe.addShape("path",{name:"regression-line",attrs:(0,A.pi)((0,A.pi)({path:Ce},D),l)}),O&&pe.addShape("text",{name:"regression-equation",attrs:(0,A.pi)((0,A.pi)((0,A.pi)({},B),d),{text:st})})}})}return a}function b1(a){var i=a.chart,t=a.options,s=t.tooltip;return s?i.tooltip(s):s===!1&&i.tooltip(!1),a}function dS(a){return qi(Dk,Ay,c4,vT,b1,gT,OC,s1,_C,hu,mT,As,qo,yT)(a)}var _T=mn({},io.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Fn("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Lk=function(a){(0,A.ZT)(i,a);function i(t,s){var l=a.call(this,t,s)||this;return l.type="scatter",l.on(Ne.BEFORE_RENDER,function(f){var d,m,x=l,T=x.options,O=x.chart;if(((d=f.data)===null||d===void 0?void 0:d.source)===Sh.FILTER){var D=l.chart.filterData(l.chart.getData());Ay({chart:O,options:(0,A.pi)((0,A.pi)({},T),{data:D})})}((m=f.data)===null||m===void 0?void 0:m.source)===Sh.RESET&&Ay({chart:O,options:T})}),l}return i.getDefaultOptions=function(){return _T},i.prototype.changeData=function(t){this.updateOption(dT(mn({},this.options,{data:t})));var s=this,l=s.options,f=s.chart;Ay({chart:f,options:l}),this.chart.changeData(t)},i.prototype.getSchemaAdaptor=function(){return dS},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i}(io),My="$$stock-range$$",Ry="trend",vS="up",xT="down",gS={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(a,i,t){var s;if(a==="x"){var l=t[0];s=l?l.title:i}else s=i;return{position:a==="y"?"start":"end",content:s,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},bT=mn({},io.getDefaultOptions(),{tooltip:gS,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function ST(a,i){return(0,b.UI)(a,function(t){var s=t&&(0,A.pi)({},t);if((0,b.kJ)(i)&&s){var l=i[0],f=i[1],d=i[2],m=i[3];s[Ry]=s[l]<=s[f]?vS:xT,s[My]=[s[l],s[f],s[d],s[m]]}return s})}function ET(a){var i=a.chart,t=a.options,s=t.yField,l=t.data,f=t.risingFill,d=t.fallingFill,m=t.tooltip,x=t.stockStyle;i.data(ST(l,s));var T=m;return T!==!1&&(T=mn({},{fields:s},T)),h1(mn({},a,{options:{schema:{shape:"candle",color:[f,d],style:x},yField:My,seriesField:Ry,rawFields:s,tooltip:T}})),a}function Fk(a){var i,t,s=a.chart,l=a.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,T=(i={},i[x]={type:"timeCat",tickCount:6},i[Ry]={values:[vS,xT]},i),O=mn(T,f,(t={},t[x]=cs(d,fa),t[My]=cs(m,fa),t));return s.scale(O),a}function f4(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?i.axis(My,!1):i.axis(My,l),a}function S1(a){var i=a.chart,t=a.options,s=t.tooltip;return s!==!1?i.tooltip(s):i.tooltip(!1),a}function wT(a){var i=a.chart,t=a.options,s=t.legend;return s?i.legend(Ry,s):s===!1&&i.legend(!1),a}function mS(a){qi(qo,ET,Fk,f4,S1,wT,hu,As,wu(),s1)(a)}var h4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="stock",t}return i.getDefaultOptions=function(){return bT},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return mS},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField;this.chart.changeData(ST(t,s))},i}(io);function Xm(a){return(0,b.UI)(a||[],function(i,t){return{x:"".concat(t),y:i}})}var Jg="x",Jv="y",E1={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(a,i){return"".concat((0,b.U2)(i,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},CT={appendPadding:2,tooltip:(0,A.pi)({},E1),animation:{}};function w1(a){var i=a.chart,t=a.options,s=t.data,l=t.color,f=t.areaStyle,d=t.point,m=t.line,x=d==null?void 0:d.state,T=Xm(s);i.data(T);var O=mn({},a,{options:{xField:Jg,yField:Jv,area:{color:l,style:f},line:m,point:d}}),D=mn({},O,{options:{tooltip:!1}}),B=mn({},O,{options:{tooltip:!1,state:x}});return c1(O),Wm(D),Eh(B),i.axis(!1),i.legend(!1),a}function eg(a){var i,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.data,m=Xm(d);return qi(Hu((i={},i[Jg]=l,i[Jv]=f,i),(t={},t[Jg]={type:"cat"},t[Jv]=fy(m,Jv),t)))(a)}function Bk(a){return qi(ep("areaStyle"),w1,eg,Kl,qo,As,wu())(a)}var p4={appendPadding:2,tooltip:(0,A.pi)({},E1),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Nk=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-area",t}return i.getDefaultOptions=function(){return p4},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;eg({chart:l,options:f}),l.changeData(Xm(t))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return Bk},i}(io);function zk(a){var i=a.chart,t=a.options,s=t.data,l=t.color,f=t.columnStyle,d=t.columnWidthRatio,m=Xm(s);i.data(m);var x=mn({},a,{options:{xField:Jg,yField:Jv,widthRatio:d,interval:{style:f,color:l}}});return Wc(x),i.axis(!1),i.legend(!1),i.interaction("element-active"),a}function yS(a){return qi(qo,ep("columnStyle"),zk,eg,Kl,As,wu())(a)}var Uk={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(a,i){return"".concat((0,b.U2)(i,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},Zk={appendPadding:2,tooltip:(0,A.pi)({},Uk),animation:{}},_S=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-column",t}return i.getDefaultOptions=function(){return Zk},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;eg({chart:l,options:f}),l.changeData(Xm(t))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return yS},i}(io);function TT(a){var i=a.chart,t=a.options,s=t.data,l=t.color,f=t.lineStyle,d=t.point,m=d==null?void 0:d.state,x=Xm(s);i.data(x);var T=mn({},a,{options:{xField:Jg,yField:Jv,line:{color:l,style:f},point:d}}),O=mn({},T,{options:{tooltip:!1,state:m}});return Wm(T),Eh(O),i.axis(!1),i.legend(!1),a}function AT(a){return qi(TT,eg,qo,Kl,As,wu())(a)}var d4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-line",t}return i.getDefaultOptions=function(){return CT},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;eg({chart:l,options:f}),l.changeData(Xm(t))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return AT},i}(io),Vk={line:lP,pie:lT,column:v1,bar:DC,area:fP,gauge:cS,"tiny-line":AT,"tiny-column":yS,"tiny-area":Bk,"ring-progress":pT,progress:wk,scatter:dS,histogram:nT,funnel:XC,stock:mS},MT={line:iT,pie:bk,column:FC,bar:LC,area:pP,gauge:tk,"tiny-line":d4,"tiny-column":_S,"tiny-area":Nk,"ring-progress":x1,progress:Ck,scatter:Lk,histogram:ok,funnel:YC,stock:h4},RT={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function C1(a,i,t){var s=MT[a];if(!s){console.error("could not find ".concat(a," plot"));return}var l=Vk[a];l({chart:i,options:mn({},s.getDefaultOptions(),(0,b.U2)(RT,a,{}),t)})}function jk(a){var i=a.chart,t=a.options,s=t.views,l=t.legend;return(0,b.S6)(s,function(f){var d=f.region,m=f.data,x=f.meta,T=f.axes,O=f.coordinate,D=f.interactions,B=f.annotations,U=f.tooltip,J=f.geometries,pe=i.createView({region:d});pe.data(m);var Ee={};T&&(0,b.S6)(T,function(Ce,st){Ee[st]=cs(Ce,fa)}),Ee=mn({},x,Ee),pe.scale(Ee),T?(0,b.S6)(T,function(Ce,st){pe.axis(st,Ce)}):pe.axis(!1),pe.coordinate(O),(0,b.S6)(J,function(Ce){var st=Cu({chart:pe,options:Ce}).ext,gt=Ce.adjust;gt&&st.geometry.adjust(gt)}),(0,b.S6)(D,function(Ce){Ce.enable===!1?pe.removeInteraction(Ce.type):pe.interaction(Ce.type,Ce.cfg)}),(0,b.S6)(B,function(Ce){pe.annotation()[Ce.type]((0,A.pi)({},Ce))}),typeof f.animation=="boolean"?pe.animate(!1):(pe.animate(!0),(0,b.S6)(pe.geometries,function(Ce){Ce.animate(f.animation)})),U&&(pe.interaction("tooltip"),pe.tooltip(U))}),l?(0,b.S6)(l,function(f,d){i.legend(d,f)}):i.legend(!1),i.tooltip(t.tooltip),a}function v4(a){var i=a.chart,t=a.options,s=t.plots,l=t.data,f=l===void 0?[]:l;return(0,b.S6)(s,function(d){var m=d.type,x=d.region,T=d.options,O=T===void 0?{}:T,D=d.top,B=O.tooltip;if(D){C1(m,i,(0,A.pi)((0,A.pi)({},O),{data:f}));return}var U=i.createView((0,A.pi)({region:x},cs(O,Jb)));B&&U.interaction("tooltip"),C1(m,U,(0,A.pi)({data:f},O))}),a}function rp(a){var i=a.chart,t=a.options;return i.option("slider",t.slider),a}function T1(a){return qi(As,jk,v4,hu,As,qo,Kl,rp,wu())(a)}function IT(a,i){var t=a.getModel(),s=t.data,l;return(0,b.kJ)(s)?l=s[0][i]:l=s[i],l}function xS(a){var i=fv(a);(0,b.S6)(i,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var g4=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getAssociationItems=function(t,s){var l,f=this.context.event,d=s||{},m=d.linkField,x=d.dim,T=[];if(!((l=f.data)===null||l===void 0)&&l.data){var O=f.data.data;(0,b.S6)(t,function(D){var B,U,J=m;if(x==="x"?J=D.getXScale().field:x==="y"?J=(B=D.getYScales().find(function(Ee){return Ee.field===J}))===null||B===void 0?void 0:B.field:J||(J=(U=D.getGroupScales()[0])===null||U===void 0?void 0:U.field),!!J){var pe=(0,b.UI)(fv(D),function(Ee){var Ce=!1,st=!1,gt=(0,b.kJ)(O)?(0,b.U2)(O[0],J):(0,b.U2)(O,J);return IT(Ee,J)===gt?Ce=!0:st=!0,{element:Ee,view:D,active:Ce,inactive:st}});T.push.apply(T,pe)}})}return T},i.prototype.showTooltip=function(t){var s=Yb(this.context.view),l=this.getAssociationItems(s,t);(0,b.S6)(l,function(f){if(f.active){var d=f.element.shape.getCanvasBBox();f.view.showTooltip({x:d.minX+d.width/2,y:d.minY+d.height/2})}})},i.prototype.hideTooltip=function(){var t=Yb(this.context.view);(0,b.S6)(t,function(s){s.hideTooltip()})},i.prototype.active=function(t){var s=qv(this.context.view),l=this.getAssociationItems(s,t);(0,b.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("active",!0)})},i.prototype.selected=function(t){var s=qv(this.context.view),l=this.getAssociationItems(s,t);(0,b.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("selected",!0)})},i.prototype.highlight=function(t){var s=qv(this.context.view),l=this.getAssociationItems(s,t);(0,b.S6)(l,function(f){var d=f.inactive,m=f.element;d&&m.setState("inactive",!0)})},i.prototype.reset=function(){var t=qv(this.context.view);(0,b.S6)(t,function(s){xS(s)})},i}(Mn);Kr("association",g4),Fn("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var Hk=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="mix",t}return i.prototype.getSchemaAdaptor=function(){return T1},i}(io),Ym;(function(a){a.DEV="DEV",a.BETA="BETA",a.STABLE="STABLE"})(Ym||(Ym={}));function OT(a,i){console.warn(a===Ym.DEV?"Plot '".concat(i,"' is in DEV stage, just give us issues."):a===Ym.BETA?"Plot '".concat(i,"' is in BETA stage, DO NOT use it in production env."):a===Ym.STABLE?"Plot '".concat(i,`' is in STABLE stage, import it by "import { `).concat(i,` } from '@antv/g2plot'".`):"invalid Stage type.")}var Wk=function(){function a(){}return Object.defineProperty(a,"MultiView",{get:function(){return OT(Ym.STABLE,"MultiView"),Hk},enumerable:!1,configurable:!0}),a}(),wh="first-axes-view",uf="second-axes-view",em="series-field-key";function Gk(a,i,t,s,l){var f=[];i.forEach(function(D){s.forEach(function(B){var U,J=(U={},U[a]=B[a],U[t]=D,U[D]=B[D],U);f.push(J)})});var d=Object.values((0,b.vM)(f,t)),m=d[0],x=m===void 0?[]:m,T=d[1],O=T===void 0?[]:T;return l?[x.reverse(),O.reverse()]:[x,O]}function Cd(a){return a!=="vertical"}function PT(a,i,t){var s=i[0],l=i[1],f=s.autoPadding,d=l.autoPadding,m=a.__axisPosition,x=m.layout,T=m.position;if(Cd(x)&&T==="top"&&(s.autoPadding=t.instance(f.top,0,f.bottom,f.left),l.autoPadding=t.instance(d.top,f.left,d.bottom,0)),Cd(x)&&T==="bottom"&&(s.autoPadding=t.instance(f.top,f.right/2+5,f.bottom,f.left),l.autoPadding=t.instance(d.top,d.right,d.bottom,f.right/2+5)),!Cd(x)&&T==="bottom"){var O=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,f.bottom/2+5,O),l.autoPadding=t.instance(f.bottom/2+5,d.right,d.bottom,O)}if(!Cd(x)&&T==="top"){var O=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,0,O),l.autoPadding=t.instance(0,d.right,f.top,O)}}function tm(a){var i=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.barStyle,x=t.widthRatio,T=t.legend,O=t.layout,D=Gk(l,f,em,s,Cd(O));T?i.legend(em,T):T===!1&&i.legend(!1);var B,U,J=D[0],pe=D[1];Cd(O)?(B=i.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:wh}),B.coordinate().transpose().reflect("x"),U=i.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:uf}),U.coordinate().transpose(),B.data(J),U.data(pe)):(B=i.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:wh}),U=i.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:uf}),U.coordinate().reflect("y"),B.data(J),U.data(pe));var Ee=mn({},a,{chart:B,options:{widthRatio:x,xField:l,yField:f[0],seriesField:em,interval:{color:d,style:m}}});Wc(Ee);var Ce=mn({},a,{chart:U,options:{xField:l,yField:f[1],seriesField:em,widthRatio:x,interval:{color:d,style:m}}});return Wc(Ce),a}function tg(a){var i,t,s,l=a.options,f=a.chart,d=l.xAxis,m=l.yAxis,x=l.xField,T=l.yField,O=po(f,wh),D=po(f,uf),B={};return(0,b.XP)((l==null?void 0:l.meta)||{}).map(function(U){(0,b.U2)(l==null?void 0:l.meta,[U,"alias"])&&(B[U]=l.meta[U].alias)}),f.scale((i={},i[em]={sync:!0,formatter:function(U){return(0,b.U2)(B,U,U)}},i)),Hu((t={},t[x]=d,t[T[0]]=m[T[0]],t))(mn({},a,{chart:O})),Hu((s={},s[x]=d,s[T[1]]=m[T[1]],s))(mn({},a,{chart:D})),a}function kT(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=t.layout,x=po(i,wh),T=po(i,uf);return(s==null?void 0:s.position)==="bottom"?T.axis(f,(0,A.pi)((0,A.pi)({},s),{label:{formatter:function(){return""}}})):T.axis(f,!1),s===!1?x.axis(f,!1):x.axis(f,(0,A.pi)({position:Cd(m)?"top":"bottom"},s)),l===!1?(x.axis(d[0],!1),T.axis(d[1],!1)):(x.axis(d[0],l[d[0]]),T.axis(d[1],l[d[1]])),i.__axisPosition={position:x.getOptions().axes[f].position,layout:m},a}function DT(a){var i=a.chart;return hu(mn({},a,{chart:po(i,wh)})),hu(mn({},a,{chart:po(i,uf)})),a}function A1(a){var i=a.chart,t=a.options,s=t.yField,l=t.yAxis;return Yg(mn({},a,{chart:po(i,wh),options:{yAxis:l[s[0]]}})),Yg(mn({},a,{chart:po(i,uf),options:{yAxis:l[s[1]]}})),a}function LT(a){var i=a.chart;return qo(mn({},a,{chart:po(i,wh)})),qo(mn({},a,{chart:po(i,uf)})),qo(a),a}function FT(a){var i=a.chart;return As(mn({},a,{chart:po(i,wh)})),As(mn({},a,{chart:po(i,uf)})),a}function m4(a){var i=this,t,s,l=a.chart,f=a.options,d=f.label,m=f.yField,x=f.layout,T=po(l,wh),O=po(l,uf),D=rl(T,"interval"),B=rl(O,"interval");if(!d)D.label(!1),B.label(!1);else{var U=d.callback,J=(0,A._T)(d,["callback"]);J.position||(J.position="middle"),J.offset===void 0&&(J.offset=2);var pe=(0,A.pi)({},J);if(Cd(x)){var Ee=((t=pe.style)===null||t===void 0?void 0:t.textAlign)||(J.position==="middle"?"center":"left");J.style=mn({},J.style,{textAlign:Ee});var Ce={left:"right",right:"left",center:"center"};pe.style=mn({},pe.style,{textAlign:Ce[Ee]})}else{var st={top:"bottom",bottom:"top",middle:"middle"};typeof J.position=="string"?J.position=st[J.position]:typeof J.position=="function"&&(J.position=function(){for(var Ft=[],xr=0;xr<arguments.length;xr++)Ft[xr]=arguments[xr];return st[J.position.apply(i,Ft)]});var gt=((s=pe.style)===null||s===void 0?void 0:s.textBaseline)||"bottom";pe.style=mn({},pe.style,{textBaseline:gt});var bt={top:"bottom",bottom:"top",middle:"middle"};J.style=mn({},J.style,{textBaseline:bt[gt]})}D.label({fields:[m[0]],callback:U,cfg:nl(pe)}),B.label({fields:[m[1]],callback:U,cfg:nl(J)})}return a}function y4(a){return qi(tm,tg,kT,A1,LT,m4,Kl,DT,FT)(a)}var $k=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return i.getDefaultOptions=function(){return mn({},a.getDefaultOptions.call(this),{syncViewPadding:PT})},i.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this.chart,Ne.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var s=this.options,l=s.xField,f=s.yField,d=s.layout,m=Gk(l,f,em,t,Cd(d)),x=m[0],T=m[1],O=po(this.chart,wh),D=po(this.chart,uf);O.data(x),D.data(T),this.chart.render(!0),this.chart.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this.chart,Ne.AFTER_CHANGE_DATA,null))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return y4},i.SERIES_FIELD_KEY=em,i}(io),bS,vv="$$range$$",Xk="low-q1-median-q3-high",SS="$$y_outliers$$",M1="outliers_view",Yk=mn({},io.getDefaultOptions(),{meta:(bS={},bS[vv]={min:0,alias:Xk},bS),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),BT=function(a,i){var t=a;if(Array.isArray(i)){var s=i[0],l=i[1],f=i[2],d=i[3],m=i[4];t=(0,b.UI)(a,function(x){return x[vv]=[x[s],x[l],x[f],x[d],x[m]],x})}return t};function qk(a){var i=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.groupField,d=t.color,m=t.tooltip,x=t.boxStyle;i.data(BT(t.data,l));var T=(0,b.kJ)(l)?vv:l,O=l?(0,b.kJ)(l)?l:[l]:[],D=m;D!==!1&&(D=mn({},{fields:(0,b.kJ)(l)?l:[]},D));var B=h1(mn({},a,{options:{xField:s,yField:T,seriesField:f,tooltip:D,rawFields:O,label:!1,schema:{shape:"box",color:d,style:x}}})).ext;return f&&B.geometry.adjust("dodge"),a}function Kk(a){var i=a.chart,t=a.options,s=t.xField,l=t.data,f=t.outliersField,d=t.outliersStyle,m=t.padding,x=t.label;if(!f)return a;var T=i.createView({padding:m,id:M1}),O=l.reduce(function(D,B){var U=B[f];return U.forEach(function(J){var pe;return D.push((0,A.pi)((0,A.pi)({},B),(pe={},pe[f]=J,pe)))}),D},[]);return T.data(O),Eh({chart:T,options:{xField:s,yField:f,point:{shape:"circle",style:d},label:x}}),T.axis(!1),a}function Qk(a){var i,t,s=a.chart,l=a.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,T=l.yField,O=l.outliersField,D=Array.isArray(T)?vv:T,B={};if(O){var U=SS;B=(i={},i[O]={sync:U,nice:!0},i[D]={sync:U,nice:!0},i)}var J=mn(B,f,(t={},t[x]=cs(d,fa),t[D]=cs(m,fa),t));return s.scale(J),a}function ES(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=Array.isArray(d)?vv:d;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?i.axis(vv,!1):i.axis(m,l),a}function Jk(a){var i=a.chart,t=a.options,s=t.legend,l=t.groupField;return l?s?i.legend(l,s):i.legend(l,{position:"bottom"}):i.legend(!1),a}function eD(a){return qi(qk,Kk,Qk,ES,Jk,Kl,wu(),hu,As,qo)(a)}var _4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="box",t}return i.getDefaultOptions=function(){return Yk},i.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField,l=this.chart.views.find(function(f){return f.id===M1});l&&l.data(t),this.chart.changeData(BT(t,s))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return eD},i}(io);function wS(a,i,t){return a.length>1?"".concat(i,"_").concat(t):"".concat(i)}function Gc(a){var i=a.data,t=a.xField,s=a.measureField,l=a.rangeField,f=a.targetField,d=a.layout,m=[],x=[];i.forEach(function(D,B){var U=[D[l]].flat();U.sort(function(Ee,Ce){return Ee-Ce}),U.forEach(function(Ee,Ce){var st,gt=Ce===0?Ee:U[Ce]-U[Ce-1];m.push((st={rKey:"".concat(l,"_").concat(Ce)},st[t]=t?D[t]:String(B),st[l]=gt,st))});var J=[D[s]].flat();J.forEach(function(Ee,Ce){var st;m.push((st={mKey:wS(J,s,Ce)},st[t]=t?D[t]:String(B),st[s]=Ee,st))});var pe=[D[f]].flat();pe.forEach(function(Ee,Ce){var st;m.push((st={tKey:wS(pe,f,Ce)},st[t]=t?D[t]:String(B),st[f]=Ee,st))}),x.push(D[l],D[s],D[f])});var T=Math.min.apply(Math,x.flat(1/0)),O=Math.max.apply(Math,x.flat(1/0));return T=T>0?0:T,d==="vertical"&&m.reverse(),{min:T,max:O,ds:m}}function CS(a){var i=a.chart,t=a.options,s=t.bulletStyle,l=t.targetField,f=t.rangeField,d=t.measureField,m=t.xField,x=t.color,T=t.layout,O=t.size,D=t.label,B=Gc(t),U=B.min,J=B.max,pe=B.ds;i.data(pe);var Ee=mn({},a,{options:{xField:m,yField:f,seriesField:"rKey",isStack:!0,label:(0,b.U2)(D,"range"),interval:{color:(0,b.U2)(x,"range"),style:(0,b.U2)(s,"range"),size:(0,b.U2)(O,"range")}}});Wc(Ee),i.geometries[0].tooltip(!1);var Ce=mn({},a,{options:{xField:m,yField:d,seriesField:"mKey",isStack:!0,label:(0,b.U2)(D,"measure"),interval:{color:(0,b.U2)(x,"measure"),style:(0,b.U2)(s,"measure"),size:(0,b.U2)(O,"measure")}}});Wc(Ce);var st=mn({},a,{options:{xField:m,yField:l,seriesField:"tKey",label:(0,b.U2)(D,"target"),point:{color:(0,b.U2)(x,"target"),style:(0,b.U2)(s,"target"),size:(0,b.mf)((0,b.U2)(O,"target"))?function(gt){return(0,b.U2)(O,"target")(gt)/2}:(0,b.U2)(O,"target")/2,shape:T==="horizontal"?"line":"hyphen"}}});return Eh(st),T==="horizontal"&&i.coordinate().transpose(),(0,A.pi)((0,A.pi)({},a),{ext:{data:{min:U,max:J}}})}function TS(a){var i,t,s=a.options,l=a.ext,f=s.xAxis,d=s.yAxis,m=s.targetField,x=s.rangeField,T=s.measureField,O=s.xField,D=l.data;return qi(Hu((i={},i[O]=f,i[T]=d,i),(t={},t[T]={min:D==null?void 0:D.min,max:D==null?void 0:D.max,sync:!0},t[m]={sync:"".concat(T)},t[x]={sync:"".concat(T)},t)))(a)}function tD(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.measureField,m=t.rangeField,x=t.targetField;return i.axis("".concat(m),!1),i.axis("".concat(x),!1),s===!1?i.axis("".concat(f),!1):i.axis("".concat(f),s),l===!1?i.axis("".concat(d),!1):i.axis("".concat(d),l),a}function rD(a){var i=a.chart,t=a.options,s=t.legend;return i.removeInteraction("legend-filter"),i.legend(s),i.legend("rKey",!1),i.legend("mKey",!1),i.legend("tKey",!1),a}function R1(a){var i=a.chart,t=a.options,s=t.label,l=t.measureField,f=t.targetField,d=t.rangeField,m=i.geometries,x=m[0],T=m[1],O=m[2];return(0,b.U2)(s,"range")?x.label("".concat(d),(0,A.pi)({layout:[{type:"limit-in-plot"}]},nl(s.range))):x.label(!1),(0,b.U2)(s,"measure")?T.label("".concat(l),(0,A.pi)({layout:[{type:"limit-in-plot"}]},nl(s.measure))):T.label(!1),(0,b.U2)(s,"target")?O.label("".concat(f),(0,A.pi)({layout:[{type:"limit-in-plot"}]},nl(s.target))):O.label(!1),a}function AS(a){qi(CS,TS,tD,rD,qo,R1,Kl,hu,As)(a)}var NT=mn({},io.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),x4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bullet",t}return i.getDefaultOptions=function(){return NT},i.prototype.changeData=function(t){this.updateOption({data:t});var s=Gc(this.options),l=s.min,f=s.max,d=s.ds;TS({options:this.options,ext:{data:{min:l,max:f}},chart:this.chart}),this.chart.changeData(d)},i.prototype.getSchemaAdaptor=function(){return AS},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i}(io),I1={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(a){return a.id},source:function(a){return a.source},target:function(a){return a.target},sourceWeight:function(a){return a.value||1},targetWeight:function(a){return a.value||1},sortBy:null};function MS(a,i,t){(0,b.U5)(a,function(s,l){s.inEdges=i.filter(function(f){return"".concat(t.target(f))==="".concat(l)}),s.outEdges=i.filter(function(f){return"".concat(t.source(f))==="".concat(l)}),s.edges=s.outEdges.concat(s.inEdges),s.frequency=s.edges.length,s.value=0,s.inEdges.forEach(function(f){s.value+=t.targetWeight(f)}),s.outEdges.forEach(function(f){s.value+=t.sourceWeight(f)})})}function nD(a,i){var t={weight:function(l,f){return f.value-l.value},frequency:function(l,f){return f.frequency-l.frequency},id:function(l,f){return"".concat(i.id(l)).localeCompare("".concat(i.id(f)))}},s=t[i.sortBy];!s&&(0,b.mf)(i.sortBy)&&(s=i.sortBy),s&&a.sort(s)}function O1(a,i){var t=a.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(i.weight){var s=i.nodePaddingRatio;if(s<0||s>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var l=s/(2*t),f=i.nodeWidthRatio;if(f<=0||f>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var d=0;a.forEach(function(x){d+=x.value}),a.forEach(function(x){x.weight=x.value/d,x.width=x.weight*(1-s),x.height=f}),a.forEach(function(x,T){for(var O=0,D=T-1;D>=0;D--)O+=a[D].width+2*l;var B=x.minX=l+O,U=x.maxX=x.minX+x.width,J=x.minY=i.y-f/2,pe=x.maxY=J+f;x.x=[B,U,U,B],x.y=[J,J,pe,pe]})}else{var m=1/t;a.forEach(function(x,T){x.x=(T+.5)*m,x.y=i.y})}return a}function qm(a,i,t){if(t.weight){var s={};(0,b.U5)(a,function(l,f){s[f]=l.value}),i.forEach(function(l){var f=t.source(l),d=t.target(l),m=a[f],x=a[d];if(m&&x){var T=s[f],O=t.sourceWeight(l),D=m.minX+(m.value-T)/m.value*m.width,B=D+O/m.value*m.width;s[f]-=O;var U=s[d],J=t.targetWeight(l),pe=x.minX+(x.value-U)/x.value*x.width,Ee=pe+J/x.value*x.width;s[d]-=J;var Ce=t.y;l.x=[D,B,pe,Ee],l.y=[Ce,Ce,Ce,Ce],l.source=m,l.target=x}})}else i.forEach(function(l){var f=a[t.source(l)],d=a[t.target(l)];f&&d&&(l.x=[f.x,d.x],l.y=[f.y,d.y],l.source=f,l.target=d)});return i}function iD(a){return(0,b.f0)({},I1,a)}function aD(a,i){var t=iD(a),s={},l=i.nodes,f=i.links;l.forEach(function(x){var T=t.id(x);s[T]=x}),MS(s,f,t),nD(l,t);var d=O1(l,t),m=qm(s,f,t);return{nodes:d,links:m}}var zT="x",UT="y",RS="name",ZT="source",VT={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(a,i){var t=(a[0]+a[1])/2,s=t>.5?-4:4;return{offsetX:s,content:i}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(a){return!(0,b.U2)(a,[0,"data","isNode"])},formatter:function(a){var i=a.source,t=a.target,s=a.value;return{name:"".concat(i," -> ").concat(t),value:s}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function jT(a){var i=a.options,t=i.data,s=i.sourceField,l=i.targetField,f=i.weightField,d=i.nodePaddingRatio,m=i.nodeWidthRatio,x=i.rawFields,T=x===void 0?[]:x,O=Hb(t,s,l,f),D=aD({weight:!0,nodePaddingRatio:d,nodeWidthRatio:m},O),B=D.nodes,U=D.links,J=B.map(function(Ee){return(0,A.pi)((0,A.pi)({},cs(Ee,(0,A.ev)(["id","x","y","name"],T,!0))),{isNode:!0})}),pe=U.map(function(Ee){return(0,A.pi)((0,A.pi)({source:Ee.source.name,target:Ee.target.name,name:Ee.source.name||Ee.target.name},cs(Ee,(0,A.ev)(["x","y","value"],T,!0))),{isNode:!1})});return(0,A.pi)((0,A.pi)({},a),{ext:(0,A.pi)((0,A.pi)({},a.ext),{chordData:{nodesData:J,edgesData:pe}})})}function HT(a){var i,t=a.chart;return t.scale((i={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},i[RS]={sync:"color"},i[ZT]={sync:"color"},i)),a}function WT(a){var i=a.chart;return i.axis(!1),a}function GT(a){var i=a.chart;return i.legend(!1),a}function oD(a){var i=a.chart,t=a.options,s=t.tooltip;return i.tooltip(s),a}function P1(a){var i=a.chart;return i.coordinate("polar").reflect("y"),a}function IS(a){var i=a.chart,t=a.options,s=a.ext.chordData.nodesData,l=t.nodeStyle,f=t.label,d=t.tooltip,m=i.createView();return m.data(s),f1({chart:m,options:{xField:zT,yField:UT,seriesField:RS,polygon:{style:l},label:f,tooltip:d}}),a}function $T(a){var i=a.chart,t=a.options,s=a.ext.chordData.edgesData,l=t.edgeStyle,f=t.tooltip,d=i.createView();d.data(s);var m={xField:zT,yField:UT,seriesField:ZT,edge:{style:l,shape:"arc"},tooltip:f};return EC({chart:d,options:m}),a}function sD(a){var i=a.chart,t=a.options,s=t.animation;return jm(i,s,Yv(i)),a}function uD(a){return qi(qo,jT,P1,HT,WT,GT,oD,$T,IS,hu,Np,sD)(a)}var b4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="chord",t}return i.getDefaultOptions=function(){return VT},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return uD},i}(io),lD=["x","y","r","name","value","path","depth"],Iy={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},OS=4,cD=0,PS=5,kS="drilldown-bread-crumb",XT={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Oy="hierarchy-data-transform-params",fD=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=XT,t}return i.prototype.click=function(){var t=(0,b.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},i.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),s=this.breadCrumbGroup,l=s.getBBox(),f=this.getButtonCfg().position,d={x:t.start.x,y:t.end.y-(l.height+PS*2)};t.isPolar&&(d={x:0,y:0}),f==="bottom-left"&&(d={x:t.start.x,y:t.start.y});var m=uc.transform(null,[["t",d.x+cD,d.y+l.height+PS]]);s.setMatrix(m)}},i.prototype.back=function(){(0,b.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},i.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},i.prototype.drill=function(t){var s=this.context.view,l=(0,b.U2)(s,["interactions","drill-down","cfg","transformData"],function(T){return T}),f=l((0,A.pi)({data:t.data},t[Oy]));s.changeData(f);for(var d=[],m=t;m;){var x=m.data;d.unshift({id:"".concat(x.name,"_").concat(m.height,"_").concat(m.depth),name:x.name,children:l((0,A.pi)({data:x},t[Oy]))}),m=m.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(d)},i.prototype.backTo=function(t){if(!(!t||t.length<=0)){var s=this.context.view,l=(0,b.Z$)(t).children;s.changeData(l),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},i.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,b.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return mn(this.breadCrumbCfg,s==null?void 0:s.breadCrumb,this.cfg)},i.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},i.prototype.drawBreadCrumbGroup=function(){var t=this,s=this.getButtonCfg(),l=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:kS});var f=0;l.forEach(function(d,m){var x=t.breadCrumbGroup.addShape({type:"text",id:d.id,name:"".concat(kS,"_").concat(d.name,"_text"),attrs:(0,A.pi)((0,A.pi)({text:m===0&&!(0,b.UM)(s.rootText)?s.rootText:d.name},s.textStyle),{x:f,y:0})}),T=x.getBBox();if(f+=T.width+OS,x.on("click",function(B){var U,J=B.target.get("id");if(J!==((U=(0,b.Z$)(l))===null||U===void 0?void 0:U.id)){var pe=l.slice(0,l.findIndex(function(Ee){return Ee.id===J})+1);t.backTo(pe)}}),x.on("mouseenter",function(B){var U,J=B.target.get("id");J!==((U=(0,b.Z$)(l))===null||U===void 0?void 0:U.id)?x.attr(s.activeTextStyle):x.attr({cursor:"default"})}),x.on("mouseleave",function(){x.attr(s.textStyle)}),m<l.length-1){var O=t.breadCrumbGroup.addShape({type:"text",name:"".concat(s.name,"_").concat(d.name,"_divider"),attrs:(0,A.pi)((0,A.pi)({text:s.dividerText},s.textStyle),{x:f,y:0})}),D=O.getBBox();f+=D.width+OS}})},i.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},i.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),a.prototype.destroy.call(this)},i}(Mn);function hD(a){return _t()(a)==="object"&&"length"in a?a:Array.from(a)}function pD(a){for(var i=a.length,t,s;i;)s=Math.random()*i--|0,t=a[i],a[i]=a[s],a[s]=t;return a}function YT(a){for(var i=0,t=(a=pD(Array.from(a))).length,s=[],l,f;i<t;)l=a[i],f&&DS(f,l)?++i:(f=KT(s=qT(s,l)),i=0);return f}function qT(a,i){var t,s;if(D1(i,a))return[i];for(t=0;t<a.length;++t)if(k1(i,a[t])&&D1(Py(a[t],i),a))return[a[t],i];for(t=0;t<a.length-1;++t)for(s=t+1;s<a.length;++s)if(k1(Py(a[t],a[s]),i)&&k1(Py(a[t],i),a[s])&&k1(Py(a[s],i),a[t])&&D1(LS(a[t],a[s],i),a))return[a[t],a[s],i];throw new Error}function k1(a,i){var t=a.r-i.r,s=i.x-a.x,l=i.y-a.y;return t<0||t*t<s*s+l*l}function DS(a,i){var t=a.r-i.r+Math.max(a.r,i.r,1)*1e-9,s=i.x-a.x,l=i.y-a.y;return t>0&&t*t>s*s+l*l}function D1(a,i){for(var t=0;t<i.length;++t)if(!DS(a,i[t]))return!1;return!0}function KT(a){switch(a.length){case 1:return dD(a[0]);case 2:return Py(a[0],a[1]);case 3:return LS(a[0],a[1],a[2])}}function dD(a){return{x:a.x,y:a.y,r:a.r}}function Py(a,i){var t=a.x,s=a.y,l=a.r,f=i.x,d=i.y,m=i.r,x=f-t,T=d-s,O=m-l,D=Math.sqrt(x*x+T*T);return{x:(t+f+x/D*O)/2,y:(s+d+T/D*O)/2,r:(D+l+m)/2}}function LS(a,i,t){var s=a.x,l=a.y,f=a.r,d=i.x,m=i.y,x=i.r,T=t.x,O=t.y,D=t.r,B=s-d,U=s-T,J=l-m,pe=l-O,Ee=x-f,Ce=D-f,st=s*s+l*l-f*f,gt=st-d*d-m*m+x*x,bt=st-T*T-O*O+D*D,Ft=U*J-B*pe,xr=(J*bt-pe*gt)/(Ft*2)-s,Fr=(pe*Ee-J*Ce)/Ft,$r=(U*gt-B*bt)/(Ft*2)-l,yn=(B*Ce-U*Ee)/Ft,cn=Fr*Fr+yn*yn-1,Bn=2*(f+xr*Fr+$r*yn),hi=xr*xr+$r*$r-f*f,Hi=-(cn?(Bn+Math.sqrt(Bn*Bn-4*cn*hi))/(2*cn):hi/Bn);return{x:s+xr+Fr*Hi,y:l+$r+yn*Hi,r:Hi}}function QT(a,i,t){var s=a.x-i.x,l,f,d=a.y-i.y,m,x,T=s*s+d*d;T?(f=i.r+t.r,f*=f,x=a.r+t.r,x*=x,f>x?(l=(T+x-f)/(2*T),m=Math.sqrt(Math.max(0,x/T-l*l)),t.x=a.x-l*s-m*d,t.y=a.y-l*d+m*s):(l=(T+f-x)/(2*T),m=Math.sqrt(Math.max(0,f/T-l*l)),t.x=i.x+l*s-m*d,t.y=i.y+l*d+m*s)):(t.x=i.x+t.r,t.y=i.y)}function JT(a,i){var t=a.r+i.r-1e-6,s=i.x-a.x,l=i.y-a.y;return t>0&&t*t>s*s+l*l}function eA(a){var i=a._,t=a.next._,s=i.r+t.r,l=(i.x*t.r+t.x*i.r)/s,f=(i.y*t.r+t.y*i.r)/s;return l*l+f*f}function Km(a){this._=a,this.next=null,this.previous=null}function vD(a){if(!(l=(a=hD(a)).length))return 0;var i,t,s,l,f,d,m,x,T,O,D;if(i=a[0],i.x=0,i.y=0,!(l>1))return i.r;if(t=a[1],i.x=-t.r,t.x=i.r,t.y=0,!(l>2))return i.r+t.r;QT(t,i,s=a[2]),i=new Km(i),t=new Km(t),s=new Km(s),i.next=s.previous=t,t.next=i.previous=s,s.next=t.previous=i;e:for(m=3;m<l;++m){QT(i._,t._,s=a[m]),s=new Km(s),x=t.next,T=i.previous,O=t._.r,D=i._.r;do if(O<=D){if(JT(x._,s._)){t=x,i.next=t,t.previous=i,--m;continue e}O+=x._.r,x=x.next}else{if(JT(T._,s._)){i=T,i.next=t,t.previous=i,--m;continue e}D+=T._.r,T=T.previous}while(x!==T.next);for(s.previous=i,s.next=t,i.next=t.previous=t=s,f=eA(i);(s=s.next)!==t;)(d=eA(s))<f&&(i=s,f=d);t=i.next}for(i=[t._],s=t;(s=s.next)!==t;)i.push(s._);for(s=YT(i),m=0;m<l;++m)i=a[m],i.x-=s.x,i.y-=s.y;return s.r}function tA(a){return vD(a),a}function rA(a){return a==null?null:ky(a)}function ky(a){if(typeof a!="function")throw new Error;return a}function gv(){return 0}function rg(a){return function(){return a}}function Tf(a){return Math.sqrt(a.value)}function L1(){var a=null,i=1,t=1,s=gv;function l(f){return f.x=i/2,f.y=t/2,a?f.eachBefore(rm(a)).eachAfter(nA(s,.5)).eachBefore(FS(1)):f.eachBefore(rm(Tf)).eachAfter(nA(gv,1)).eachAfter(nA(s,f.r/Math.min(i,t))).eachBefore(FS(Math.min(i,t)/(2*f.r))),f}return l.radius=function(f){return arguments.length?(a=rA(f),l):a},l.size=function(f){return arguments.length?(i=+f[0],t=+f[1],l):[i,t]},l.padding=function(f){return arguments.length?(s=typeof f=="function"?f:rg(+f),l):s},l}function rm(a){return function(i){i.children||(i.r=Math.max(0,+a(i)||0))}}function nA(a,i){return function(t){if(s=t.children){var s,l,f=s.length,d=a(t)*i||0,m;if(d)for(l=0;l<f;++l)s[l].r+=d;if(m=vD(s),d)for(l=0;l<f;++l)s[l].r-=d;t.r=m+d}}}function FS(a){return function(i){var t=i.parent;i.r*=a,t&&(i.x=t.x+a*i.x,i.y=t.y+a*i.y)}}var gD=k(9783),S4=k.n(gD);function F1(a){var i=0,t=a.children,s=t&&t.length;if(!s)i=1;else for(;--s>=0;)i+=t[s].value;a.value=i}function Dy(){return this.eachAfter(F1)}var iA=k(64599),BS=k.n(iA);function aA(a,i){var t=-1,s=BS()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;a.call(i,f,++t,this)}}catch(d){s.e(d)}finally{s.f()}return this}function nm(a,i){for(var t=this,s=[t],l,f,d=-1;t=s.pop();)if(a.call(i,t,++d,this),l=t.children)for(f=l.length-1;f>=0;--f)s.push(l[f]);return this}function NS(a,i){for(var t=this,s=[t],l=[],f,d,m,x=-1;t=s.pop();)if(l.push(t),f=t.children)for(d=0,m=f.length;d<m;++d)s.push(f[d]);for(;t=l.pop();)a.call(i,t,++x,this);return this}function B1(a,i){var t=-1,s=BS()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;if(a.call(i,f,++t,this))return f}}catch(d){s.e(d)}finally{s.f()}}function mD(a){return this.eachAfter(function(i){for(var t=+a(i.data)||0,s=i.children,l=s&&s.length;--l>=0;)t+=s[l].value;i.value=t})}function yD(a){return this.eachBefore(function(i){i.children&&i.children.sort(a)})}function Qm(a){for(var i=this,t=_D(i,a),s=[i];i!==t;)i=i.parent,s.push(i);for(var l=s.length;a!==t;)s.splice(l,0,a),a=a.parent;return s}function _D(a,i){if(a===i)return a;var t=a.ancestors(),s=i.ancestors(),l=null;for(a=t.pop(),i=s.pop();a===i;)l=a,a=t.pop(),i=s.pop();return l}function xD(){for(var a=this,i=[a];a=a.parent;)i.push(a);return i}function E4(){return Array.from(this)}function w4(){var a=[];return this.eachBefore(function(i){i.children||a.push(i)}),a}function C4(){var a=this,i=[];return a.each(function(t){t!==a&&i.push({source:t.parent,target:t})}),i}var T4=k(15009),bD=k.n(T4),A4=bD()().mark(SD);function SD(){var a,i,t,s,l,f;return bD()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:a=this,t=[a];case 1:i=t.reverse(),t=[];case 2:if(!(a=i.pop())){m.next=8;break}return m.next=5,a;case 5:if(s=a.children)for(l=0,f=s.length;l<f;++l)t.push(s[l]);m.next=2;break;case 8:if(t.length){m.next=1;break}case 9:case"end":return m.stop()}},A4,this)}function im(a,i){a instanceof Map?(a=[void 0,a],i===void 0&&(i=oA)):i===void 0&&(i=M4);for(var t=new am(a),s,l=[t],f,d,m,x;s=l.pop();)if((d=i(s.data))&&(x=(d=Array.from(d)).length))for(s.children=d,m=x-1;m>=0;--m)l.push(f=d[m]=new am(d[m])),f.parent=s,f.depth=s.depth+1;return t.eachBefore(wD)}function zS(){return im(this).eachBefore(ED)}function M4(a){return a.children}function oA(a){return Array.isArray(a)?a[1]:null}function ED(a){a.data.value!==void 0&&(a.value=a.data.value),a.data=a.data.data}function wD(a){var i=0;do a.height=i;while((a=a.parent)&&a.height<++i)}function am(a){this.data=a,this.depth=this.height=0,this.parent=null}am.prototype=im.prototype=S4()({constructor:am,count:Dy,each:aA,eachAfter:NS,eachBefore:nm,find:B1,sum:mD,sort:yD,path:Qm,ancestors:xD,descendants:E4,leaves:w4,links:C4,copy:zS},Symbol.iterator,SD);var sA="nodeIndex",CD="childNodeCount",N1="nodeAncestor",US="Invalid field: it must be a string!";function uA(a,i){var t=a.field,s=a.fields;if((0,b.HD)(t))return t;if((0,b.kJ)(t))return console.warn(US),t[0];if(console.warn("".concat(US," will try to get fields instead.")),(0,b.HD)(s))return s;if((0,b.kJ)(s)&&s.length)return s[0];if(i)return i;throw new TypeError(US)}function Jm(a){var i=[];if(a&&a.each){var t,s;a.each(function(l){var f,d;l.parent!==t?(t=l.parent,s=0):s+=1;var m=(0,b.hX)((((f=l.ancestors)===null||f===void 0?void 0:f.call(l))||[]).map(function(x){return i.find(function(T){return T.name===x.name})||x}),function(x){var T=x.depth;return T>0&&T<l.depth});l[N1]=m,l[CD]=((d=l.children)===null||d===void 0?void 0:d.length)||0,l[sA]=s,i.push(l)})}else a&&a.eachNode&&a.eachNode(function(l){i.push(l)});return i}var TD={field:"value",as:["x","y","r"],sort:function(a,i){return i.value-a.value}};function R4(a,i){i=(0,b.f0)({},TD,i);var t=i.as;if(!(0,b.kJ)(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var s;try{s=uA(i)}catch(T){console.warn(T)}var l=function(T){return L1().size(i.size).padding(i.padding)(im(T).sum(function(O){return O[s]}).sort(i.sort))},f=l(a),d=t[0],m=t[1],x=t[2];return f.each(function(T){T[d]=T.x,T[m]=T.y,T[x]=T.r}),Jm(f)}function ng(a){var i=a.data,t=a.hierarchyConfig,s=a.rawFields,l=s===void 0?[]:s,f=a.enableDrillDown,d=R4(i,(0,A.pi)((0,A.pi)({},t),{field:"value",as:["x","y","r"]})),m=[];return d.forEach(function(x){for(var T,O=x.data.name,D=(0,A.pi)({},x);D.depth>1;)O="".concat((T=D.parent.data)===null||T===void 0?void 0:T.name," / ").concat(O),D=D.parent;if(f&&x.depth>2)return null;var B=mn({},x.data,(0,A.pi)((0,A.pi)((0,A.pi)({},cs(x.data,l)),{path:O}),x));B.ext=t,B[Oy]={hierarchyConfig:t,rawFields:l,enableDrillDown:f},m.push(B)}),m}function ZS(a,i,t){var s=Gb([a,i]),l=s[0],f=s[1],d=s[2],m=s[3],x=t.width,T=t.height,O=x-(m+f),D=T-(l+d),B=Math.min(O,D),U=(O-B)/2,J=(D-B)/2,pe=l+J,Ee=f+U,Ce=d+J,st=m+U,gt=[pe,Ee,Ce,st],bt=B<0?0:B;return{finalPadding:gt,finalSize:bt}}function z1(a){var i=a.chart,t=Math.min(i.viewBBox.width,i.viewBBox.height);return mn({options:{size:function(s){var l=s.r;return l*t}}},a)}function AD(a){var i=a.options,t=a.chart,s=t.viewBBox,l=i.padding,f=i.appendPadding,d=i.drilldown,m=f;if(d!=null&&d.enabled){var x=py(t.appendPadding,(0,b.U2)(d,["breadCrumb","position"]));m=Gb([x,f])}var T=ZS(l,m,s).finalPadding;return t.padding=T,t.appendPadding=0,a}function MD(a){var i=a.chart,t=a.options,s=i.padding,l=i.appendPadding,f=t.color,d=t.colorField,m=t.pointStyle,x=t.hierarchyConfig,T=t.sizeField,O=t.rawFields,D=O===void 0?[]:O,B=t.drilldown,U=ng({data:t.data,hierarchyConfig:x,enableDrillDown:B==null?void 0:B.enabled,rawFields:D});i.data(U);var J=i.viewBBox,pe=ZS(s,l,J).finalSize,Ee=function(Ce){var st=Ce.r;return st*pe};return T&&(Ee=function(Ce){return Ce[T]*pe}),Eh(mn({},a,{options:{xField:"x",yField:"y",seriesField:d,sizeField:T,rawFields:(0,A.ev)((0,A.ev)([],lD,!0),D,!0),point:{color:f,style:m,shape:"circle",size:Ee}}})),a}function e0(a){return qi(Hu({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(a)}function RD(a){var i=a.chart,t=a.options,s=t.tooltip;if(s===!1)i.tooltip(!1);else{var l=s;(0,b.U2)(s,"fields")||(l=mn({},{customItems:function(f){return f.map(function(d){var m=(0,b.U2)(i.getOptions(),"scales"),x=(0,b.U2)(m,["name","formatter"],function(O){return O}),T=(0,b.U2)(m,["value","formatter"],function(O){return O});return(0,A.pi)((0,A.pi)({},d),{name:x(d.data.name),value:T(d.data.value)})})}},l)),i.tooltip(l)}return a}function ID(a){var i=a.chart;return i.axis(!1),a}function I4(a){var i=a.drilldown,t=a.interactions,s=t===void 0?[]:t;return i!=null&&i.enabled?mn({},a,{interactions:(0,A.ev)((0,A.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:i,transformData:ng,enableDrillDown:!0}}],!1)}):a}function O4(a){var i=a.chart,t=a.options;return hu({chart:i,options:I4(t)}),a}function P4(a){return qi(ep("pointStyle"),z1,AD,qo,e0,MD,ID,Xg,RD,O4,As,wu())(a)}function OD(a){var i=(0,b.U2)(a,["event","data","data"],{});return(0,b.kJ)(i.children)&&i.children.length>0}function PD(a){var i=a.view.getCoordinate(),t=i.innerRadius;if(t){var s=a.event,l=s.x,f=s.y,d=i.center,m=d.x,x=d.y,T=i.getRadius()*t,O=Math.sqrt(Math.pow(m-l,2)+Math.pow(x-f,2));return O<T}return!1}Kr("drill-down-action",fD),Fn("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:OD},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:PD}],start:[{trigger:"element:click",isEnable:OD,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:PD,action:["drill-down-action:back"]}]});var T8=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle-packing",t}return i.getDefaultOptions=function(){return Iy},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return P4},i.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},i}(io),np="left-axes-view",Xf="right-axes-view",VS={nice:!0,label:{autoHide:!0,autoRotate:!1}},k4=(0,A.pi)((0,A.pi)({},VS),{position:"left"}),jS=(0,A.pi)((0,A.pi)({},VS),{position:"right",grid:null}),Td;(function(a){a.Left="Left",a.Right="Right"})(Td||(Td={}));var t0;(function(a){a.Line="line",a.Column="column"})(t0||(t0={}));function Ly(a){return(0,b.U2)(a,"geometry")===t0.Line}function Fy(a){return(0,b.U2)(a,"geometry")===t0.Column}function r0(a,i,t){return Fy(t)?mn({},{geometry:t0.Column,label:t.label&&t.isRange?{content:function(s){var l;return(l=s[i])===null||l===void 0?void 0:l.join("-")}}:void 0},t):(0,A.pi)({geometry:t0.Line},t)}function lA(a,i){var t=a[0],s=a[1];if((0,b.kJ)(i)){var l=i[0],f=i[1];return[l,f]}var d=(0,b.U2)(i,t),m=(0,b.U2)(i,s);return[d,m]}function HS(a,i){return i===Td.Left?a===!1?!1:mn({},k4,a):i===Td.Right?a===!1?!1:mn({},jS,a):a}function Cc(a){var i=a.options,t=a.chart,s=i.geometryOption,l=s.isStack,f=s.color,d=s.seriesField,m=s.groupField,x=s.isGroup,T=["xField","yField"];if(Ly(s)){Wm(mn({},a,{options:(0,A.pi)((0,A.pi)((0,A.pi)({},cs(i,T)),s),{line:{color:s.color,style:s.lineStyle}})})),Eh(mn({},a,{options:(0,A.pi)((0,A.pi)((0,A.pi)({},cs(i,T)),s),{point:s.point&&(0,A.pi)({color:f,shape:"circle"},s.point)})}));var O=[];x&&O.push({type:"dodge",dodgeBy:m||d,customOffset:0}),l&&O.push({type:"stack"}),O.length&&(0,b.S6)(t.geometries,function(D){D.adjust(O)})}return Fy(s)&&v1(mn({},a,{options:(0,A.pi)((0,A.pi)((0,A.pi)({},cs(i,T)),s),{widthRatio:s.columnWidthRatio,interval:(0,A.pi)((0,A.pi)({},cs(s,["color"])),{style:s.columnStyle})})})),a}function cA(a){var i=a.view,t=a.geometryOption,s=a.yField,l=a.legend,f=(0,b.U2)(l,"marker"),d=rl(i,Ly(t)?"line":"interval");if(!t.seriesField){var m=(0,b.U2)(i,"options.scales.".concat(s,".alias"))||s,x=d.getAttribute("color"),T=i.getTheme().defaultColor;x&&(T=uc.getMappingValue(x,m,(0,b.U2)(x,["values",0],T)));var O=((0,b.mf)(f)?f:!(0,b.xb)(f)&&mn({},{style:{stroke:T,fill:T}},f))||(Ly(t)?{symbol:function(B,U,J){return[["M",B-J,U],["L",B+J,U]]},style:{lineWidth:2,r:6,stroke:T}}:{symbol:"square",style:{fill:T}});return[{value:s,name:m,marker:O,isGeometry:!0,viewId:i.id}]}var D=d.getGroupAttributes();return(0,b.u4)(D,function(B,U){var J=uc.getLegendItems(i,d,U,i.getTheme(),f);return B.concat(J)},[])}var fA=function(a,i){var t=i[0],s=i[1],l=a.getOptions().data,f=a.getXScale(),d=(0,b.dp)(l);if(!(!f||!d)){var m=!0,x=(0,b.I)(l,f.field),T=m?x:x.reverse(),O=(0,b.dp)(T),D=Math.floor(t*(O-1)),B=Math.floor(s*(O-1));a.filter(f.field,function(U){var J=T.indexOf(U);return J>-1?s4(J,D,B):!0}),a.getRootView().render(!0)}};function Ns(a){var i,t=a.options,s=t.geometryOptions,l=s===void 0?[]:s,f=t.xField,d=t.yField,m=(0,b.yW)(l,function(x){var T=x.geometry;return T===t0.Line||T===void 0});return mn({},{options:{geometryOptions:[],meta:(i={},i[f]={type:"cat",sync:!0,range:m?[0,1]:void 0},i),tooltip:{showMarkers:m,showCrosshairs:m,shared:!0,crosshairs:{type:"x"}},interactions:m?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},a,{options:{yAxis:lA(d,t.yAxis),geometryOptions:[r0(f,d[0],l[0]),r0(f,d[1],l[1])],annotations:lA(d,t.annotations)}})}function kD(a){var i,t,s=a.chart,l=a.options,f=l.geometryOptions,d={line:0,column:1},m=[{type:(i=f[0])===null||i===void 0?void 0:i.geometry,id:np},{type:(t=f[1])===null||t===void 0?void 0:t.geometry,id:Xf}];return m.sort(function(x,T){return-d[x.type]+d[T.type]}).forEach(function(x){return s.createView({id:x.id})}),a}function By(a){var i=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.geometryOptions,d=t.data,m=t.tooltip,x=[(0,A.pi)((0,A.pi)({},f[0]),{id:np,data:d[0],yField:l[0]}),(0,A.pi)((0,A.pi)({},f[1]),{id:Xf,data:d[1],yField:l[1]})];return x.forEach(function(T){var O=T.id,D=T.data,B=T.yField,U=Fy(T)&&T.isPercent,J=U?CC(D,B,s,B):D,pe=po(i,O).data(J),Ee=U?(0,A.pi)({formatter:function(Ce){return{name:Ce[T.seriesField]||B,value:(Number(Ce[B])*100).toFixed(2)+"%"}}},m):m;Cc({chart:pe,options:{xField:s,yField:B,tooltip:Ee,geometryOption:T}})}),a}function Ny(a){var i,t=a.chart,s=a.options,l=s.geometryOptions,f=((i=t.getTheme())===null||i===void 0?void 0:i.colors10)||[],d=0;return t.once("beforepaint",function(){(0,b.S6)(l,function(m,x){var T=po(t,x===0?np:Xf);if(!m.color){var O=T.getGroupScales(),D=(0,b.U2)(O,[0,"values","length"],1),B=f.slice(d,d+D).concat(x===0?[]:f);T.geometries.forEach(function(U){m.seriesField?U.color(m.seriesField,B):U.color(B[0])}),d+=D}}),t.render(!0)}),a}function DD(a){var i,t,s=a.chart,l=a.options,f=l.xAxis,d=l.yAxis,m=l.xField,x=l.yField;return Hu((i={},i[m]=f,i[x[0]]=d[0],i))(mn({},a,{chart:po(s,np)})),Hu((t={},t[m]=f,t[x[1]]=d[1],t))(mn({},a,{chart:po(s,Xf)})),a}function LD(a){var i=a.chart,t=a.options,s=po(i,np),l=po(i,Xf),f=t.xField,d=t.yField,m=t.xAxis,x=t.yAxis;return i.axis(f,!1),i.axis(d[0],!1),i.axis(d[1],!1),s.axis(f,m),s.axis(d[0],HS(x[0],Td.Left)),l.axis(f,!1),l.axis(d[1],HS(x[1],Td.Right)),a}function FD(a){var i=a.chart,t=a.options,s=t.tooltip,l=po(i,np),f=po(i,Xf);return i.tooltip(s),l.tooltip({shared:!0}),f.tooltip({shared:!0}),a}function BD(a){var i=a.chart;return hu(mn({},a,{chart:po(i,np)})),hu(mn({},a,{chart:po(i,Xf)})),a}function ND(a){var i=a.chart,t=a.options,s=t.annotations,l=(0,b.U2)(s,[0]),f=(0,b.U2)(s,[1]);return wu(l)(mn({},a,{chart:po(i,np),options:{annotations:l}})),wu(f)(mn({},a,{chart:po(i,Xf),options:{annotations:f}})),a}function hA(a){var i=a.chart;return qo(mn({},a,{chart:po(i,np)})),qo(mn({},a,{chart:po(i,Xf)})),qo(a),a}function pA(a){var i=a.chart;return As(mn({},a,{chart:po(i,np)})),As(mn({},a,{chart:po(i,Xf)})),a}function zD(a){var i=a.chart,t=a.options,s=t.yAxis;return Yg(mn({},a,{chart:po(i,np),options:{yAxis:s[0]}})),Yg(mn({},a,{chart:po(i,Xf),options:{yAxis:s[1]}})),a}function UD(a){var i=a.chart,t=a.options,s=t.legend,l=t.geometryOptions,f=t.yField,d=t.data,m=po(i,np),x=po(i,Xf);if(s===!1)i.legend(!1);else if((0,b.Kn)(s)&&s.custom===!0)i.legend(s);else{var T=(0,b.U2)(l,[0,"legend"],s),O=(0,b.U2)(l,[1,"legend"],s);i.once("beforepaint",function(){var D=d[0].length?cA({view:m,geometryOption:l[0],yField:f[0],legend:T}):[],B=d[1].length?cA({view:x,geometryOption:l[1],yField:f[1],legend:O}):[];i.legend(mn({},s,{custom:!0,items:D.concat(B)}))}),l[0].seriesField&&m.legend(l[0].seriesField,T),l[1].seriesField&&x.legend(l[1].seriesField,O),i.on("legend-item:click",function(D){var B=(0,b.U2)(D,"gEvent.delegateObject",{});if(B&&B.item){var U=B.item,J=U.value,pe=U.isGeometry,Ee=U.viewId;if(pe){var Ce=(0,b.cx)(f,function(bt){return bt===J});if(Ce>-1){var st=(0,b.U2)(po(i,Ee),"geometries");(0,b.S6)(st,function(bt){bt.changeVisible(!B.item.unchecked)})}}else{var gt=(0,b.U2)(i.getController("legend"),"option.items",[]);(0,b.S6)(i.views,function(bt){var Ft=bt.getGroupScales();(0,b.S6)(Ft,function(xr){xr.values&&xr.values.indexOf(J)>-1&&bt.filter(xr.field,function(Fr){var $r=(0,b.sE)(gt,function(yn){return yn.value===Fr});return!$r.unchecked})}),i.render(!0)})}}})}return a}function ZD(a){var i=a.chart,t=a.options,s=t.slider,l=po(i,np),f=po(i,Xf);return s&&(l.option("slider",s),l.on("slider:valuechanged",function(d){var m=d.event,x=m.value,T=m.originValue;(0,b.Xy)(x,T)||fA(f,x)}),i.once("afterpaint",function(){if(!(0,b.jn)(s)){var d=s.start,m=s.end;(d||m)&&fA(f,[d,m])}})),a}function dA(a){return qi(Ns,kD,hA,By,DD,LD,zD,FD,BD,ND,pA,Ny,UD,ZD)(a)}var D4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dual-axes",t}return i.prototype.getDefaultOptions=function(){return mn({},a.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},i.prototype.getSchemaAdaptor=function(){return dA},i}(io);function vA(a,i){var t=i.data,s=i.coordinate,l=i.interactions,f=i.annotations,d=i.animation,m=i.tooltip,x=i.axes,T=i.meta,O=i.geometries;t&&a.data(t);var D={};x&&(0,b.S6)(x,function(B,U){D[U]=cs(B,fa)}),D=mn({},T,D),a.scale(D),s&&a.coordinate(s),x===!1?a.axis(!1):(0,b.S6)(x,function(B,U){a.axis(U,B)}),(0,b.S6)(O,function(B){var U=Cu({chart:a,options:B}).ext,J=B.adjust;J&&U.geometry.adjust(J)}),(0,b.S6)(l,function(B){B.enable===!1?a.removeInteraction(B.type):a.interaction(B.type,B.cfg)}),(0,b.S6)(f,function(B){a.annotation()[B.type]((0,A.pi)({},B))}),jm(a,d),m?(a.interaction("tooltip"),a.tooltip(m)):m===!1&&a.removeInteraction("tooltip")}function VD(a){var i=a.chart,t=a.options,s=t.type,l=t.data,f=t.fields,d=t.eachView,m=(0,b.CE)(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return i.data(l),i.facet(s,(0,A.pi)((0,A.pi)({},m),{fields:f,eachView:function(x,T){var O=d(x,T);if(O.geometries)vA(x,O);else{var D=O,B=D.options;B.tooltip&&x.interaction("tooltip"),C1(D.type,x,B)}}})),a}function jD(a){var i=a.chart,t=a.options,s=t.axes,l=t.meta,f=t.tooltip,d=t.coordinate,m=t.theme,x=t.legend,T=t.interactions,O=t.annotations,D={};return s&&(0,b.S6)(s,function(B,U){D[U]=cs(B,fa)}),D=mn({},l,D),i.scale(D),i.coordinate(d),s?(0,b.S6)(s,function(B,U){i.axis(U,B)}):i.axis(!1),f?(i.interaction("tooltip"),i.tooltip(f)):f===!1&&i.removeInteraction("tooltip"),i.legend(x),m&&i.theme(m),(0,b.S6)(T,function(B){B.enable===!1?i.removeInteraction(B.type):i.interaction(B.type,B.cfg)}),(0,b.S6)(O,function(B){i.annotation()[B.type]((0,A.pi)({},B))}),a}function HD(a){return qi(qo,VD,jD)(a)}var WD={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}},L4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="area",t}return i.getDefaultOptions=function(){return WD},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return HD},i}(io);function GD(a){var i=a.chart,t=a.options,s=t.data,l=t.type,f=t.xField,d=t.yField,m=t.colorField,x=t.sizeField,T=t.sizeRatio,O=t.shape,D=t.color,B=t.tooltip,U=t.heatmapStyle,J=t.meta;i.data(s);var pe="polygon";l==="density"&&(pe="heatmap");var Ee=tp(B,[f,d,m]),Ce=Ee.fields,st=Ee.formatter,gt=1;return(T||T===0)&&(!O&&!x?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):T<0||T>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):gt=T),Cu(mn({},a,{options:{type:pe,colorField:m,tooltipFields:Ce,shapeField:x||"",label:void 0,mapping:{tooltip:st,shape:O&&(x?function(bt){var Ft=s.map(function(yn){return yn[x]}),xr=(J==null?void 0:J[x])||{},Fr=xr.min,$r=xr.max;return Fr=(0,b.hj)(Fr)?Fr:Math.min.apply(Math,Ft),$r=(0,b.hj)($r)?$r:Math.max.apply(Math,Ft),[O,((0,b.U2)(bt,x)-Fr)/($r-Fr),gt]}:function(){return[O,1,gt]}),color:D||m&&i.getTheme().sequenceColors.join("-"),style:U}}})),a}function $D(a){var i,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return qi(Hu((i={},i[f]=s,i[d]=l,i)))(a)}function gA(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?i.axis(d,!1):i.axis(d,l),a}function XD(a){var i=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.sizeField,d=t.sizeLegend,m=s!==!1;return l&&i.legend(l,m?s:!1),f&&i.legend(f,d===void 0?s:d),!m&&!d&&i.legend(!1),a}function YD(a){var i=a.chart,t=a.options,s=t.label,l=t.colorField,f=t.type,d=rl(i,f==="density"?"heatmap":"polygon");if(!s)d.label(!1);else if(l){var m=s.callback,x=(0,A._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:nl(x)})}return a}function qD(a){var i,t,s=a.chart,l=a.options,f=l.coordinate,d=l.reflect,m=mn({actions:[]},f!=null?f:{type:"rect"});return d&&((t=(i=m.actions)===null||i===void 0?void 0:i.push)===null||t===void 0||t.call(i,["reflect",d])),s.coordinate(m),a}function mA(a){return qi(qo,ep("heatmapStyle"),$D,qD,GD,gA,XD,Kl,YD,wu(),hu,As,Np)(a)}var KD=mn({},io.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});xi("polygon","circle",{draw:function(a,i){var t,s,l=a.x,f=a.y,d=this.parsePoints(a.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),T=Math.min(m,x)/2,O=Number(a.shape[1]),D=Number(a.shape[2]),B=Math.sqrt(D),U=T*B*Math.sqrt(O),J=((t=a.style)===null||t===void 0?void 0:t.fill)||a.color||((s=a.defaultStyle)===null||s===void 0?void 0:s.fill),pe=i.addShape("circle",{attrs:(0,A.pi)((0,A.pi)((0,A.pi)({x:l,y:f,r:U},a.defaultStyle),a.style),{fill:J})});return pe}}),xi("polygon","square",{draw:function(a,i){var t,s,l=a.x,f=a.y,d=this.parsePoints(a.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),T=Math.min(m,x),O=Number(a.shape[1]),D=Number(a.shape[2]),B=Math.sqrt(D),U=T*B*Math.sqrt(O),J=((t=a.style)===null||t===void 0?void 0:t.fill)||a.color||((s=a.defaultStyle)===null||s===void 0?void 0:s.fill),pe=i.addShape("rect",{attrs:(0,A.pi)((0,A.pi)((0,A.pi)({x:l-U/2,y:f-U/2,width:U,height:U},a.defaultStyle),a.style),{fill:J})});return pe}});var F4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="heatmap",t}return i.getDefaultOptions=function(){return KD},i.prototype.getSchemaAdaptor=function(){return mA},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i}(io),QD="liquid";function yA(a){return[{percent:a,type:QD}]}function JD(a){var i=a.chart,t=a.options,s=t.percent,l=t.liquidStyle,f=t.radius,d=t.outline,m=t.wave,x=t.shape,T=t.shapeStyle,O=t.animation;i.scale({percent:{min:0,max:1}}),i.data(yA(s));var D=t.color||i.getTheme().defaultColor,B=mn({},a,{options:{xField:"type",yField:"percent",widthRatio:f,interval:{color:D,style:l,shape:"liquid-fill-gauge"}}}),U=Wc(B).ext,J=U.geometry,pe=i.getTheme().background,Ee={percent:s,radius:f,outline:d,wave:m,shape:x,shapeStyle:T,background:pe,animation:O};return J.customInfo(Ee),i.legend(!1),i.axis(!1),i.tooltip(!1),a}function _A(a,i){var t=a.chart,s=a.options,l=s.statistic,f=s.percent,d=s.meta;t.getController("annotation").clear(!0);var m=(0,b.U2)(d,["percent","formatter"])||function(T){return"".concat((T*100).toFixed(2),"%")},x=l.content;return x&&(x=mn({},x,{content:(0,b.UM)(x.content)?m(f):x.content})),yy(t,{statistic:(0,A.pi)((0,A.pi)({},l),{content:x}),plotType:"liquid"},{percent:f}),i&&t.render(!0),a}function xA(a){return qi(qo,ep("liquidStyle"),JD,_A,Hu({}),As,hu)(a)}var eL={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},bA=5e3;function SA(a,i,t){return a+(i-a)*t}function tL(a){var i=(0,A.pi)({opacity:1},a.style);return a.color&&!i.fill&&(i.fill=a.color),i}function rL(a){var i={fill:"#fff",fillOpacity:0,lineWidth:4},t=(0,b.CD)({},i,a.style);return a.color&&!t.stroke&&(t.stroke=a.color),(0,b.hj)(a.opacity)&&(t.opacity=t.strokeOpacity=a.opacity),t}function nL(a,i,t,s){return i===0?[[a+1/2*t/Math.PI/2,s/2],[a+1/2*t/Math.PI,s],[a+t/4,s]]:i===1?[[a+1/2*t/Math.PI/2*(Math.PI-2),s],[a+1/2*t/Math.PI/2*(Math.PI-1),s/2],[a+t/4,0]]:i===2?[[a+1/2*t/Math.PI/2,-s/2],[a+1/2*t/Math.PI,-s],[a+t/4,-s]]:[[a+1/2*t/Math.PI/2*(Math.PI-2),-s],[a+1/2*t/Math.PI/2*(Math.PI-1),-s/2],[a+t/4,0]]}function iL(a,i,t,s,l,f,d){for(var m=Math.ceil(2*a/t*4)*4,x=[],T=s;T<-Math.PI*2;)T+=Math.PI*2;for(;T>0;)T-=Math.PI*2;T=T/Math.PI/2*t;var O=f-a+T-a*2;x.push(["M",O,i]);for(var D=0,B=0;B<m;++B){var U=B%4,J=nL(B*t/4,U,t,l);x.push(["C",J[0][0]+O,-J[0][1]+i,J[1][0]+O,-J[1][1]+i,J[2][0]+O,-J[2][1]+i]),B===m-1&&(D=J[2][0])}return x.push(["L",D+O,d+a]),x.push(["L",O,d+a]),x.push(["Z"]),x}function aL(a,i,t,s,l,f,d,m,x,T){for(var O=l.fill,D=l.opacity,B=d.getBBox(),U=B.maxX-B.minX,J=B.maxY-B.minY,pe=0;pe<s;pe++){var Ee=s<=1?1:pe/(s-1),Ce=f.addShape("path",{name:"waterwave-path",attrs:{path:iL(m,B.minY+J*t,x,0,U/32,a,i),fill:O,opacity:SA(.2,.9,Ee)*D}});try{if(T===!1)return;var st=hS([["t",x,0]]);Ce.stopAnimate(),Ce.animate({matrix:st},{duration:SA(.5*bA,bA,Ee),repeat:!0})}catch(gt){console.warn("off-screen group animate error!")}}}function EA(a,i,t,s){var l=t*2/3,f=Math.max(l,s),d=l/2,m=a,x=d+i-f/2,T=Math.asin(d/((f-d)*.85)),O=Math.sin(T)*d,D=Math.cos(T)*d,B=m-D,U=x+O,J=a,pe=x+d/Math.sin(T);return`
      M `.concat(B," ").concat(U,`
      A `).concat(d," ").concat(d," 0 1 1 ").concat(B+D*2," ").concat(U,`
      Q `).concat(J," ").concat(pe," ").concat(a," ").concat(i+f/2,`
      Q `).concat(J," ").concat(pe," ").concat(B," ").concat(U,`
      Z 
    `)}function oL(a,i,t,s){var l=t/2,f=s/2;return`
      M `.concat(a," ").concat(i-f,` 
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(f*2,`
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(-f*2,`
      Z
    `)}function sL(a,i,t,s){var l=s/2,f=t/2;return`
      M `.concat(a," ").concat(i-l,`
      L `).concat(a+f," ").concat(i,`
      L `).concat(a," ").concat(i+l,`
      L `).concat(a-f," ").concat(i,`
      Z
    `)}function uL(a,i,t,s){var l=s/2,f=t/2;return`
      M `.concat(a," ").concat(i-l,`
      L `).concat(a+f," ").concat(i+l,`
      L `).concat(a-f," ").concat(i+l,`
      Z
    `)}function wA(a,i,t,s){var l=.618,f=s/2,d=t/2*l;return`
      M `.concat(a-d," ").concat(i-f,`
      L `).concat(a+d," ").concat(i-f,`
      L `).concat(a+d," ").concat(i+f,`
      L `).concat(a-d," ").concat(i+f,`
      Z
    `)}var CA={pin:EA,circle:oL,diamond:sL,triangle:uL,rect:wA};xi("interval","liquid-fill-gauge",{draw:function(a,i){var t=.5,s=.5,l=a.customInfo,f=l,d=f.percent,m=f.radius,x=f.shape,T=f.shapeStyle,O=f.background,D=f.animation,B=l.outline,U=l.wave,J=B.border,pe=B.distance,Ee=U.count,Ce=U.length,st=(0,b.u4)(a.points,function(aa,Qa){return Math.min(aa,Qa.x)},1/0),gt=this.parsePoint({x:t,y:s}),bt=this.parsePoint({x:st,y:s}),Ft=gt.x-bt.x,xr=Math.min(Ft,bt.y*m),Fr=tL(a),$r=rL((0,b.CD)({},a,B)),yn=xr-J/2,cn=typeof x=="function"?x:CA[x]||CA.circle,Bn=cn(gt.x,gt.y,yn*2,yn*2);if(T&&i.addShape("path",{name:"shape",attrs:(0,A.pi)({path:Bn},T)}),d>0){var hi=i.addGroup({name:"waves"}),Hi=hi.setClip({type:"path",attrs:{path:Bn}});aL(gt.x,gt.y,1-a.points[1].y,Ee,Fr,hi,Hi,xr*2,Ce,D)}return i.addShape("path",{name:"distance",attrs:{path:Bn,fill:"transparent",lineWidth:J+pe*2,stroke:O==="transparent"?"#fff":O}}),i.addShape("path",{name:"wrap",attrs:(0,b.CD)($r,{path:Bn,fill:"transparent",lineWidth:J})}),i}});var B4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="liquid",t}return i.getDefaultOptions=function(){return eL},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.changeData=function(t){this.chart.emit(Ne.BEFORE_CHANGE_DATA,Xa.fromData(this.chart,Ne.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(yA(t)),_A({chart:this.chart,options:this.options},!0),this.chart.emit(Ne.AFTER_CHANGE_DATA,Xa.fromData(this.chart,Ne.AFTER_CHANGE_DATA,null))},i.prototype.getSchemaAdaptor=function(){return xA},i}(io);function lL(a){var i=a.chart,t=a.options,s=t.data,l=t.lineStyle,f=t.color,d=t.point,m=t.area;i.data(s);var x=mn({},a,{options:{line:{style:l,color:f},point:d&&(0,A.pi)({color:f},d),area:m&&(0,A.pi)({color:f},m),label:void 0}}),T=mn({},x,{options:{tooltip:!1}}),O=(d==null?void 0:d.state)||t.state,D=mn({},x,{options:{tooltip:!1,state:O}});return Wm(x),Eh(D),c1(T),a}function cL(a){var i,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return qi(Hu((i={},i[f]=s,i[d]=l,i)))(a)}function fL(a){var i=a.chart,t=a.options,s=t.radius,l=t.startAngle,f=t.endAngle;return i.coordinate("polar",{radius:s,startAngle:l,endAngle:f}),a}function hL(a){var i=a.chart,t=a.options,s=t.xField,l=t.xAxis,f=t.yField,d=t.yAxis;return i.axis(s,l),i.axis(f,d),a}function TA(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=rl(i,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,A._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:nl(m)})}return a}function pL(a){return qi(lL,cL,qo,fL,hL,Xg,Kl,TA,hu,As,wu())(a)}var dL=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),i.prototype.getTooltipItems=function(t){var s=this.getTooltipCfg(),l=s.shared,f=s.title,d=a.prototype.getTooltipItems.call(this,t);if(d.length>0){var m=this.view.geometries[0],x=m.dataArray,T=d[0].name,O=[];return x.forEach(function(D){D.forEach(function(B){var U=uc.getTooltipItems(B,m),J=U[0];if(!l&&J&&J.name===T){var pe=(0,b.UM)(f)?T:f;O.push((0,A.pi)((0,A.pi)({},J),{name:J.title,title:pe}))}else if(l&&J){var pe=(0,b.UM)(f)?J.name||T:f;O.push((0,A.pi)((0,A.pi)({},J),{name:J.title,title:pe}))}})}),O}return[]},i}(xt);af("radar-tooltip",dL);var vL=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},i.prototype.show=function(){var t=this.context.event,s=this.getTooltipController();s.showTooltip({x:t.x,y:t.y})},i.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},i.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},i}(Mn);Kr("radar-tooltip",vL),Fn("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var N4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="radar",t}return i.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},i.prototype.getDefaultOptions=function(){return mn({},a.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},i.prototype.getSchemaAdaptor=function(){return pL},i}(io);function gL(a,i,t){var s=t.map(function(d){return d[i]}).filter(function(d){return d!==void 0}),l=s.length>0?Math.max.apply(Math,s):0,f=Math.abs(a)%360;return f?l*360/f:l}function mL(a,i,t){var s=[];return a.forEach(function(l){var f=s.find(function(d){return d[i]===l[i]});f?f[t]+=l[t]||null:s.push((0,A.pi)({},l))}),s}function yL(a){var i=a.chart,t=a.options,s=t.barStyle,l=t.color,f=t.tooltip,d=t.colorField,m=t.type,x=t.xField,T=t.yField,O=t.data,D=t.shape,B=Xv(O,T);i.data(B);var U=mn({},a,{options:{tooltip:f,seriesField:d,interval:{style:s,color:l,shape:D||(m==="line"?"line":"intervel")},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return Wc(U),m==="line"&&Eh({chart:i,options:{xField:x,yField:T,seriesField:d,point:{shape:"circle",color:l}}}),a}function AA(a){var i,t=a.options,s=t.yField,l=t.xField,f=t.data,d=t.isStack,m=t.isGroup,x=t.colorField,T=t.maxAngle,O=d&&!m&&x?mL(f,l,s):f,D=Xv(O,s);return qi(Hu((i={},i[s]={min:0,max:gL(T,s,D)},i)))(a)}function MA(a){var i=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return i.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}).transpose(),a}function RA(a){var i=a.chart,t=a.options,s=t.xField,l=t.xAxis;return i.axis(s,l),a}function IA(a){var i=a.chart,t=a.options,s=t.label,l=t.yField,f=rl(i,"interval");if(!s)f.label(!1);else{var d=s.callback,m=(0,A._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,A.pi)((0,A.pi)({},nl(m)),{type:"polar"})})}return a}function n0(a){return qi(ep("barStyle"),yL,AA,RA,MA,hu,As,qo,Kl,Xg,wu(),IA)(a)}var OA=mn({},io.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240}),z4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="radial-bar",t}return i.getDefaultOptions=function(){return OA},i.prototype.changeData=function(t){this.updateOption({data:t}),AA({chart:this.chart,options:this.options}),this.chart.changeData(t)},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return n0},i}(io);function _L(a){var i=a.chart,t=a.options,s=t.data,l=t.sectorStyle,f=t.shape,d=t.color;return i.data(s),qi(Wc)(mn({},a,{options:{marginRatio:1,interval:{style:l,color:d,shape:f}}})),a}function xL(a){var i=a.chart,t=a.options,s=t.label,l=t.xField,f=rl(i,"interval");if(s===!1)f.label(!1);else if((0,b.Kn)(s)){var d=s.callback,m=s.fields,x=(0,A._T)(s,["callback","fields"]),T=x.offset,O=x.layout;(T===void 0||T>=0)&&(O=O?(0,b.kJ)(O)?O:[O]:[],x.layout=(0,b.hX)(O,function(D){return D.type!=="limit-in-shape"}),x.layout.length||delete x.layout),f.label({fields:m||[l],callback:d,cfg:nl(x)})}else wd(Bp.WARN,s===null,"the label option must be an Object."),f.label({fields:[l]});return a}function bL(a){var i=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s===!1?i.legend(!1):l&&i.legend(l,s),a}function zy(a){var i=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return i.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),a}function Uy(a){var i,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return qi(Hu((i={},i[f]=s,i[d]=l,i)))(a)}function Zy(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s?i.axis(f,s):i.axis(f,!1),l?i.axis(d,l):i.axis(d,!1),a}function Vy(a){qi(ep("sectorStyle"),_L,Uy,xL,zy,Zy,bL,Kl,hu,As,qo,wu(),Np)(a)}var SL=mn({},io.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),EL=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rose",t}return i.getDefaultOptions=function(){return SL},i.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return Vy},i}(io),U1="x",PA="y",kA="name",jy="nodes",Z1="edges";function U4(a,i,t){var s=[];return a.forEach(function(l){var f=l[i],d=l[t];s.includes(f)||s.push(f),s.includes(d)||s.push(d)}),s}function V1(a,i,t,s){var l={};return i.forEach(function(f){l[f]={},i.forEach(function(d){l[f][d]=0})}),a.forEach(function(f){l[f[t]][f[s]]=1}),l}function Hy(a,i,t){if(!(0,b.kJ)(a))return[];var s=[],l=U4(a,i,t),f=V1(a,l,i,t),d={};l.forEach(function(x){d[x]=0});function m(x){d[x]=1,l.forEach(function(T){if(f[x][T]!=0)if(d[T]==1)s.push("".concat(x,"_").concat(T));else{if(d[T]==-1)return;m(T)}}),d[x]=-1}return l.forEach(function(x){d[x]!=-1&&m(x)}),s.length!==0&&console.warn("sankey data contains circle, ".concat(s.length," records removed."),s),a.filter(function(x){return s.findIndex(function(T){return T==="".concat(x[i],"_").concat(x[t])})<0})}function DA(a){return a.target.depth}function wL(a){return a.depth}function CL(a,i){return i-1-a.height}function j1(a,i){return a.sourceLinks.length?a.depth:i-1}function Z4(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?(0,b.F)(a.sourceLinks,DA)-1:0}function H1(a){return function(){return a}}function i0(a,i){for(var t=0,s=0;s<a.length;s++)t+=i(a[s]);return t}function W1(a,i){for(var t=-1/0,s=0;s<a.length;s++)t=Math.max(i(a[s]),t);return t}function TL(a,i){for(var t=1/0,s=0;s<a.length;s++)t=Math.min(i(a[s]),t);return t}function LA(a,i){return GS(a.source,i.source)||a.index-i.index}function WS(a,i){return GS(a.target,i.target)||a.index-i.index}function GS(a,i){return a.y0-i.y0}function G1(a){return a.value}function Ch(a){return a.index}function FA(a){return a.nodes}function BA(a){return a.links}function $1(a,i){var t=a.get(i);if(!t)throw new Error("missing: "+i);return t}function NA(a){for(var i=a.nodes,t=0,s=i;t<s.length;t++){for(var l=s[t],f=l.y0,d=f,m=0,x=l.sourceLinks;m<x.length;m++){var T=x[m];T.y0=f+T.width/2,f+=T.width}for(var O=0,D=l.targetLinks;O<D.length;O++){var T=D[O];T.y1=d+T.width/2,d+=T.width}}}function AL(){var a=0,i=0,t=1,s=1,l=24,f=8,d,m=Ch,x=j1,T,O,D,B=FA,U=BA,J=6;function pe(Hn){var Fi={nodes:B(Hn),links:U(Hn)};return Ee(Fi),Ce(Fi),st(Fi),gt(Fi),xr(Fi),NA(Fi),Fi}pe.update=function(Hn){return NA(Hn),Hn},pe.nodeId=function(Hn){return arguments.length?(m=typeof Hn=="function"?Hn:H1(Hn),pe):m},pe.nodeAlign=function(Hn){return arguments.length?(x=typeof Hn=="function"?Hn:H1(Hn),pe):x},pe.nodeDepth=function(Hn){return arguments.length?(T=Hn,pe):T},pe.nodeSort=function(Hn){return arguments.length?(O=Hn,pe):O},pe.nodeWidth=function(Hn){return arguments.length?(l=+Hn,pe):l},pe.nodePadding=function(Hn){return arguments.length?(f=d=+Hn,pe):f},pe.nodes=function(Hn){return arguments.length?(B=typeof Hn=="function"?Hn:H1(Hn),pe):B},pe.links=function(Hn){return arguments.length?(U=typeof Hn=="function"?Hn:H1(Hn),pe):U},pe.linkSort=function(Hn){return arguments.length?(D=Hn,pe):D},pe.size=function(Hn){return arguments.length?(a=i=0,t=+Hn[0],s=+Hn[1],pe):[t-a,s-i]},pe.extent=function(Hn){return arguments.length?(a=+Hn[0][0],t=+Hn[1][0],i=+Hn[0][1],s=+Hn[1][1],pe):[[a,i],[t,s]]},pe.iterations=function(Hn){return arguments.length?(J=+Hn,pe):J};function Ee(Hn){var Fi=Hn.nodes,na=Hn.links;Fi.forEach(function(Po,ms){Po.index=ms,Po.sourceLinks=[],Po.targetLinks=[]});var zi=new Map(Fi.map(function(Po){return[m(Po),Po]}));if(na.forEach(function(Po,ms){Po.index=ms;var pl=Po.source,ys=Po.target;typeof pl!="object"&&(pl=Po.source=$1(zi,pl)),typeof ys!="object"&&(ys=Po.target=$1(zi,ys)),pl.sourceLinks.push(Po),ys.targetLinks.push(Po)}),D!=null)for(var gi=0,La=Fi;gi<La.length;gi++){var So=La[gi],ao=So.sourceLinks,lo=So.targetLinks;ao.sort(D),lo.sort(D)}}function Ce(Hn){for(var Fi=Hn.nodes,na=0,zi=Fi;na<zi.length;na++){var gi=zi[na];gi.value=gi.fixedValue===void 0?Math.max(i0(gi.sourceLinks,G1),i0(gi.targetLinks,G1)):gi.fixedValue}}function st(Hn){for(var Fi=Hn.nodes,na=Fi.length,zi=new Set(Fi),gi=new Set,La=0;zi.size;){if(zi.forEach(function(Po){Po.depth=La;for(var ms=0,pl=Po.sourceLinks;ms<pl.length;ms++){var ys=pl[ms].target;gi.add(ys)}}),++La>na)throw new Error("circular link");zi=gi,gi=new Set}if(T)for(var So=Math.max(W1(Fi,function(Po){return Po.depth})+1,0),ao=void 0,lo=0;lo<Fi.length;lo++)ao=Fi[lo],ao.depth=T.call(null,ao,So)}function gt(Hn){for(var Fi=Hn.nodes,na=Fi.length,zi=new Set(Fi),gi=new Set,La=0;zi.size;){if(zi.forEach(function(So){So.height=La;for(var ao=0,lo=So.targetLinks;ao<lo.length;ao++){var Po=lo[ao].source;gi.add(Po)}}),++La>na)throw new Error("circular link");zi=gi,gi=new Set}}function bt(Hn){for(var Fi=Hn.nodes,na=Math.max(W1(Fi,function(ys){return ys.depth})+1,0),zi=(t-a-l)/(na-1),gi=new Array(na).fill(0).map(function(){return[]}),La=0,So=Fi;La<So.length;La++){var ao=So[La],lo=Math.max(0,Math.min(na-1,Math.floor(x.call(null,ao,na))));ao.layer=lo,ao.x0=a+lo*zi,ao.x1=ao.x0+l,gi[lo]?gi[lo].push(ao):gi[lo]=[ao]}if(O)for(var Po=0,ms=gi;Po<ms.length;Po++){var pl=ms[Po];pl.sort(O)}return gi}function Ft(Hn){for(var Fi=TL(Hn,function(Du){return(s-i-(Du.length-1)*d)/i0(Du,G1)}),na=0,zi=Hn;na<zi.length;na++){for(var gi=zi[na],La=i,So=0,ao=gi;So<ao.length;So++){var lo=ao[So];lo.y0=La,lo.y1=La+lo.value*Fi,La=lo.y1+d;for(var Po=0,ms=lo.sourceLinks;Po<ms.length;Po++){var pl=ms[Po];pl.width=pl.value*Fi}}La=(s-La+d)/(gi.length+1);for(var ys=0;ys<gi.length;++ys){var lo=gi[ys];lo.y0+=La*(ys+1),lo.y1+=La*(ys+1)}Hi(gi)}}function xr(Hn){var Fi=bt(Hn);d=Math.min(f,(s-i)/(W1(Fi,function(La){return La.length})-1)),Ft(Fi);for(var na=0;na<J;++na){var zi=Math.pow(.99,na),gi=Math.max(1-zi,(na+1)/J);$r(Fi,zi,gi),Fr(Fi,zi,gi)}}function Fr(Hn,Fi,na){for(var zi=1,gi=Hn.length;zi<gi;++zi){for(var La=Hn[zi],So=0,ao=La;So<ao.length;So++){for(var lo=ao[So],Po=0,ms=0,pl=0,ys=lo.targetLinks;pl<ys.length;pl++){var Du=ys[pl],Th=Du.source,Rd=Du.value,Id=Rd*(lo.layer-Th.layer);Po+=aa(Th,lo)*Id,ms+=Id}if(ms>0){var um=(Po/ms-lo.y0)*Fi;lo.y0+=um,lo.y1+=um,hi(lo)}}O===void 0&&La.sort(GS),La.length&&yn(La,na)}}function $r(Hn,Fi,na){for(var zi=Hn.length,gi=zi-2;gi>=0;--gi){for(var La=Hn[gi],So=0,ao=La;So<ao.length;So++){for(var lo=ao[So],Po=0,ms=0,pl=0,ys=lo.sourceLinks;pl<ys.length;pl++){var Du=ys[pl],Th=Du.target,Rd=Du.value,Id=Rd*(Th.layer-lo.layer);Po+=Qa(lo,Th)*Id,ms+=Id}if(ms>0){var um=(Po/ms-lo.y0)*Fi;lo.y0+=um,lo.y1+=um,hi(lo)}}O===void 0&&La.sort(GS),La.length&&yn(La,na)}}function yn(Hn,Fi){var na=Hn.length>>1,zi=Hn[na];Bn(Hn,zi.y0-d,na-1,Fi),cn(Hn,zi.y1+d,na+1,Fi),Bn(Hn,s,Hn.length-1,Fi),cn(Hn,i,0,Fi)}function cn(Hn,Fi,na,zi){for(;na<Hn.length;++na){var gi=Hn[na],La=(Fi-gi.y0)*zi;La>1e-6&&(gi.y0+=La,gi.y1+=La),Fi=gi.y1+d}}function Bn(Hn,Fi,na,zi){for(;na>=0;--na){var gi=Hn[na],La=(gi.y1-Fi)*zi;La>1e-6&&(gi.y0-=La,gi.y1-=La),Fi=gi.y0-d}}function hi(Hn){var Fi=Hn.sourceLinks,na=Hn.targetLinks;if(D===void 0){for(var zi=0,gi=na;zi<gi.length;zi++){var La=gi[zi].source.sourceLinks;La.sort(WS)}for(var So=0,ao=Fi;So<ao.length;So++){var lo=ao[So].target.targetLinks;lo.sort(LA)}}}function Hi(Hn){if(D===void 0)for(var Fi=0,na=Hn;Fi<na.length;Fi++){var zi=na[Fi],gi=zi.sourceLinks,La=zi.targetLinks;gi.sort(WS),La.sort(LA)}}function aa(Hn,Fi){for(var na=Hn.y0-(Hn.sourceLinks.length-1)*d/2,zi=0,gi=Hn.sourceLinks;zi<gi.length;zi++){var La=gi[zi],So=La.target,ao=La.width;if(So===Fi)break;na+=ao+d}for(var lo=0,Po=Fi.targetLinks;lo<Po.length;lo++){var ms=Po[lo],So=ms.source,ao=ms.width;if(So===Hn)break;na-=ao}return na}function Qa(Hn,Fi){for(var na=Fi.y0-(Fi.targetLinks.length-1)*d/2,zi=0,gi=Fi.targetLinks;zi<gi.length;zi++){var La=gi[zi],So=La.source,ao=La.width;if(So===Hn)break;na+=ao+d}for(var lo=0,Po=Hn.sourceLinks;lo<Po.length;lo++){var ms=Po[lo],So=ms.target,ao=ms.width;if(So===Fi)break;na-=ao}return na}return pe}var ML={left:wL,right:CL,center:Z4,justify:j1},RL={nodeId:function(a){return a.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function IL(a){var i=(0,b.HD)(a)?ML[a]:(0,b.mf)(a)?a:null;return i||j1}function zA(a){return(0,b.f0)({},RL,a)}function UA(a,i){var t=zA(a),s=t.nodeId,l=t.nodeSort,f=t.nodeAlign,d=t.nodeWidth,m=t.nodePadding,x=t.nodeDepth,T=AL().nodeSort(l).nodeWidth(d).nodePadding(m).nodeDepth(x).nodeAlign(IL(f)).extent([[0,0],[1,1]]).nodeId(s),O=T(i),D=O.nodes.map(function(U){var J=U.x0,pe=U.x1,Ee=U.y0,Ce=U.y1;return U.x=[J,pe,pe,J],U.y=[Ee,Ee,Ce,Ce],U}).filter(function(U){return U.name!==null}),B=O.links.map(function(U){var J=U.source,pe=U.target,Ee=J.x1,Ce=pe.x0;U.x=[Ee,Ee,Ce,Ce];var st=U.width/2;return U.y=[U.y0+st,U.y0-st,U.y1+st,U.y1-st],U}).filter(function(U){var J=U.source,pe=U.target;return J.name!==null&&pe.name!==null});return{nodes:D,links:B}}function OL(a){return a==="node-link"}function ZA(a,i,t){return ja(a)?a/t:i}function VA(a,i,t){return ja(a)?a/t:i}function jA(a,i,t){var s=a.dataType,l=a.data,f=a.sourceField,d=a.targetField,m=a.weightField,x=a.nodeAlign,T=a.nodeSort,O=a.nodePadding,D=a.nodePaddingRatio,B=a.nodeWidth,U=a.nodeWidthRatio,J=a.nodeDepth,pe=a.rawFields,Ee=pe===void 0?[]:pe,Ce;OL(s)?Ce=l:Ce=Hb(Hy(l,f,d),f,d,m,Ee);var st=UA({nodeAlign:x,nodePadding:VA(O,D,t),nodeWidth:ZA(B,U,i),nodeSort:T,nodeDepth:J},Ce),gt=st.nodes,bt=st.links;return{nodes:gt.map(function(Ft){return(0,A.pi)((0,A.pi)({},cs(Ft,(0,A.ev)(["x","y","name"],Ee,!0))),{isNode:!0})}),edges:bt.map(function(Ft){return(0,A.pi)((0,A.pi)({source:Ft.source.name,target:Ft.target.name,name:Ft.source.name||Ft.target.name},cs(Ft,(0,A.ev)(["x","y","value"],Ee,!0))),{isNode:!1})})}}function PL(a){var i=a.options,t=i.rawFields,s=t===void 0?[]:t;return mn({},{options:{tooltip:{fields:(0,b.jj)((0,A.ev)(["name","source","target","value","isNode"],s,!0))},label:{fields:(0,b.jj)((0,A.ev)(["x","name"],s,!0))}}},a)}function kL(a){var i=a.chart,t=a.options,s=t.color,l=t.nodeStyle,f=t.edgeStyle,d=t.label,m=t.tooltip,x=t.nodeState,T=t.edgeState,O=t.rawFields,D=O===void 0?[]:O;i.legend(!1),i.tooltip(m),i.axis(!1),i.coordinate().reflect("y");var B=jA(t,i.width,i.height),U=B.nodes,J=B.edges,pe=i.createView({id:Z1});pe.data(J),EC({chart:pe,options:{xField:U1,yField:PA,seriesField:kA,rawFields:(0,A.ev)(["source","target"],D,!0),edge:{color:s,style:f,shape:"arc"},tooltip:m,state:T}});var Ee=i.createView({id:jy});return Ee.data(U),f1({chart:Ee,options:{xField:U1,yField:PA,seriesField:kA,polygon:{color:s,style:l},label:d,tooltip:m,state:x}}),i.interaction("element-active"),i.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),a}function DL(a){var i=a.chart,t=a.options,s=t.animation,l=(0,A.ev)((0,A.ev)([],i.views[0].geometries,!0),i.views[1].geometries,!0);return jm(i,s,l),a}function LL(a){var i=a.chart,t=a.options,s=t.nodeDraggable,l="sankey-node-draggable";return s?i.interaction(l):i.removeInteraction(l),a}function FL(a){var i=a.chart,t=a.options,s=t.interactions,l=s===void 0?[]:s,f=[].concat(l,t.nodeInteractions||[]),d=[].concat(l,t.edgeInteractions||[]),m=po(i,jy),x=po(i,Z1);return f.forEach(function(T){(T==null?void 0:T.enable)===!1?m.removeInteraction(T.type):m.interaction(T.type,T.cfg||{})}),d.forEach(function(T){(T==null?void 0:T.enable)===!1?x.removeInteraction(T.type):x.interaction(T.type,T.cfg||{})}),a}function Wy(a){return qi(PL,kL,FL,LL,DL,qo)(a)}var Gy=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.isDragging=!1,t}return i.prototype.isNodeElement=function(){var t=(0,b.U2)(this.context,"event.target");if(t){var s=t.get("element");return s&&s.getModel().data.isNode}return!1},i.prototype.getNodeView=function(){return po(this.context.view,jy)},i.prototype.getEdgeView=function(){return po(this.context.view,Z1)},i.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},i.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,b.U2)(this.context,"event.x"),y:(0,b.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),s=this.getCurrentDatumIdx(t);if(s===-1)return;this.currentElementIdx=s,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},i.prototype.translate=function(){if(this.isDragging){var t=this.context.view,s={x:(0,b.U2)(this.context,"event.x"),y:(0,b.U2)(this.context,"event.y")},l=s.x-this.prevPoint.x,f=s.y-this.prevPoint.y,d=this.getNodeView(),m=d.geometries[0].elements[this.currentElementIdx];if(m&&m.getModel()){var x=m.getModel().data,T=d.getOptions().data,O=d.getCoordinate(),D={x:l/O.getWidth(),y:f/O.getHeight()},B=(0,A.pi)((0,A.pi)({},x),{x:x.x.map(function(Ce){return Ce+=D.x}),y:x.y.map(function(Ce){return Ce+=D.y})}),U=(0,A.ev)([],T,!0);U[this.currentElementIdx]=B,d.data(U);var J=x.name,pe=this.getEdgeView(),Ee=pe.getOptions().data;Ee.forEach(function(Ce){Ce.source===J&&(Ce.x[0]+=D.x,Ce.x[1]+=D.x,Ce.y[0]+=D.y,Ce.y[1]+=D.y),Ce.target===J&&(Ce.x[2]+=D.x,Ce.x[3]+=D.x,Ce.y[2]+=D.y,Ce.y[3]+=D.y)}),pe.data(Ee),this.prevPoint=s,t.render(!0)}}},i.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},i}(Mn);Kr("sankey-node-drag",Gy),Fn("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(a){return a.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});var V4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="sankey",t}return i.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){var s=t.name;return s},callback:function(t){var s=t[1]===1;return{style:{fill:"#545454",textAlign:s?"end":"start"},offsetX:s?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,b.U2)(t,[0,"data","isNode"])},formatter:function(t){var s=t.source,l=t.target,f=t.value;return{name:s+" -> "+l,value:f}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},i.prototype.changeData=function(t){this.updateOption({data:t});var s=jA(this.options,this.chart.width,this.chart.height),l=s.nodes,f=s.edges,d=po(this.chart,jy),m=po(this.chart,Z1);d.changeData(l),m.changeData(f)},i.prototype.getSchemaAdaptor=function(){return Wy},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i}(io),$S="ancestor-node",HA="value",$y="path",BL=[$y,sA,N1,CD,"name","depth","height"],om=mn({},io.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function WA(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function Xy(a,i,t,s,l){for(var f=a.children,d,m=-1,x=f.length,T=a.value&&(s-i)/a.value;++m<x;)d=f[m],d.y0=t,d.y1=l,d.x0=i,d.x1=i+=d.value*T}function GA(){var a=1,i=1,t=0,s=!1;function l(d){var m=d.height+1;return d.x0=d.y0=t,d.x1=a,d.y1=i/m,d.eachBefore(f(i,m)),s&&d.eachBefore(WA),d}function f(d,m){return function(x){x.children&&Xy(x,x.x0,d*(x.depth+1)/m,x.x1,d*(x.depth+2)/m);var T=x.x0,O=x.y0,D=x.x1-t,B=x.y1-t;D<T&&(T=D=(T+D)/2),B<O&&(O=B=(O+B)/2),x.x0=T,x.y0=O,x.x1=D,x.y1=B}}return l.round=function(d){return arguments.length?(s=!!d,l):s},l.size=function(d){return arguments.length?(a=+d[0],i=+d[1],l):[a,i]},l.padding=function(d){return arguments.length?(t=+d,l):t},l}var NL={field:"value",size:[1,1],round:!1,padding:0,sort:function(a,i){return i.value-a.value},as:["x","y"],ignoreParentValue:!0};function zL(a,i){i=(0,b.f0)({},NL,i);var t=i.as;if(!(0,b.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=uA(i)}catch(x){console.warn(x)}var l=function(x){return GA().size(i.size).round(i.round).padding(i.padding)(im(x).sum(function(T){return(0,b.dp)(T.children)?i.ignoreParentValue?0:T[s]-(0,b.u4)(T.children,function(O,D){return O+D[s]},0):T[s]}).sort(i.sort))},f=l(a),d=t[0],m=t[1];return f.each(function(x){var T,O;x[d]=[x.x0,x.x1,x.x1,x.x0],x[m]=[x.y1,x.y1,x.y0,x.y0],x.name=x.name||((T=x.data)===null||T===void 0?void 0:T.name)||((O=x.data)===null||O===void 0?void 0:O.label),x.data.name=x.name,["x0","x1","y0","y1"].forEach(function(D){t.indexOf(D)===-1&&delete x[D]})}),Jm(f)}function UL(a,i){return a.parent===i.parent?1:2}function ZL(a){return a.reduce(VL,0)/a.length}function VL(a,i){return a+i.x}function jL(a){return 1+a.reduce(HL,0)}function HL(a,i){return Math.max(a,i.y)}function WL(a){for(var i;i=a.children;)a=i[0];return a}function GL(a){for(var i;i=a.children;)a=i[i.length-1];return a}function $L(){var a=UL,i=1,t=1,s=!1;function l(f){var d,m=0;f.eachAfter(function(B){var U=B.children;U?(B.x=ZL(U),B.y=jL(U)):(B.x=d?m+=a(B,d):0,B.y=0,d=B)});var x=WL(f),T=GL(f),O=x.x-a(x,T)/2,D=T.x+a(T,x)/2;return f.eachAfter(s?function(B){B.x=(B.x-f.x)*i,B.y=(f.y-B.y)*t}:function(B){B.x=(B.x-O)/(D-O)*i,B.y=(1-(f.y?B.y/f.y:1))*t})}return l.separation=function(f){return arguments.length?(a=f,l):a},l.size=function(f){return arguments.length?(s=!1,i=+f[0],t=+f[1],l):s?null:[i,t]},l.nodeSize=function(f){return arguments.length?(s=!0,i=+f[0],t=+f[1],l):s?[i,t]:null},l}var XL={depth:-1},$A={};function YL(a){return a.id}function qL(a){return a.parentId}function KL(){var a=YL,i=qL;function t(s){var l=Array.from(s),f=l.length,d,m,x,T,O,D,B,U=new Map;for(m=0;m<f;++m)d=l[m],O=l[m]=new am(d),(D=a(d,m,s))!=null&&(D+="")&&(B=O.id=D,U.set(B,U.has(B)?$A:O)),(D=i(d,m,s))!=null&&(D+="")&&(O.parent=D);for(m=0;m<f;++m)if(O=l[m],D=O.parent){if(T=U.get(D),!T)throw new Error("missing: "+D);if(T===$A)throw new Error("ambiguous: "+D);T.children?T.children.push(O):T.children=[O],O.parent=T}else{if(x)throw new Error("multiple roots");x=O}if(!x)throw new Error("no root");if(x.parent=XL,x.eachBefore(function(J){J.depth=J.parent.depth+1,--f}).eachBefore(wD),x.parent=null,f>0)throw new Error("cycle");return x}return t.id=function(s){return arguments.length?(a=ky(s),t):a},t.parentId=function(s){return arguments.length?(i=ky(s),t):i},t}function QL(a,i){return a.parent===i.parent?1:2}function XS(a){var i=a.children;return i?i[0]:a.t}function YS(a){var i=a.children;return i?i[i.length-1]:a.t}function JL(a,i,t){var s=t/(i.i-a.i);i.c-=s,i.s+=t,a.c+=s,i.z+=t,i.m+=t}function eF(a){for(var i=0,t=0,s=a.children,l=s.length,f;--l>=0;)f=s[l],f.z+=i,f.m+=i,i+=f.s+(t+=f.c)}function XA(a,i,t){return a.a.parent===i.parent?a.a:t}function X1(a,i){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}X1.prototype=Object.create(am.prototype);function tF(a){for(var i=new X1(a,0),t,s=[i],l,f,d,m;t=s.pop();)if(f=t._.children)for(t.children=new Array(m=f.length),d=m-1;d>=0;--d)s.push(l=t.children[d]=new X1(f[d],d)),l.parent=t;return(i.parent=new X1(null,0)).children=[i],i}function rF(){var a=QL,i=1,t=1,s=null;function l(T){var O=tF(T);if(O.eachAfter(f),O.parent.m=-O.z,O.eachBefore(d),s)T.eachBefore(x);else{var D=T,B=T,U=T;T.eachBefore(function(st){st.x<D.x&&(D=st),st.x>B.x&&(B=st),st.depth>U.depth&&(U=st)});var J=D===B?1:a(D,B)/2,pe=J-D.x,Ee=i/(B.x+J+pe),Ce=t/(U.depth||1);T.eachBefore(function(st){st.x=(st.x+pe)*Ee,st.y=st.depth*Ce})}return T}function f(T){var O=T.children,D=T.parent.children,B=T.i?D[T.i-1]:null;if(O){eF(T);var U=(O[0].z+O[O.length-1].z)/2;B?(T.z=B.z+a(T._,B._),T.m=T.z-U):T.z=U}else B&&(T.z=B.z+a(T._,B._));T.parent.A=m(T,B,T.parent.A||D[0])}function d(T){T._.x=T.z+T.parent.m,T.m+=T.parent.m}function m(T,O,D){if(O){for(var B=T,U=T,J=O,pe=B.parent.children[0],Ee=B.m,Ce=U.m,st=J.m,gt=pe.m,bt;J=YS(J),B=XS(B),J&&B;)pe=XS(pe),U=YS(U),U.a=T,bt=J.z+st-B.z-Ee+a(J._,B._),bt>0&&(JL(XA(J,T,D),T,bt),Ee+=bt,Ce+=bt),st+=J.m,Ee+=B.m,gt+=pe.m,Ce+=U.m;J&&!YS(U)&&(U.t=J,U.m+=st-Ce),B&&!XS(pe)&&(pe.t=B,pe.m+=Ee-gt,D=T)}return D}function x(T){T.x*=i,T.y=T.depth*t}return l.separation=function(T){return arguments.length?(a=T,l):a},l.size=function(T){return arguments.length?(s=!1,i=+T[0],t=+T[1],l):s?null:[i,t]},l.nodeSize=function(T){return arguments.length?(s=!0,i=+T[0],t=+T[1],l):s?[i,t]:null},l}function Y1(a,i,t,s,l){for(var f=a.children,d,m=-1,x=f.length,T=a.value&&(l-t)/a.value;++m<x;)d=f[m],d.x0=i,d.x1=s,d.y0=t,d.y1=t+=d.value*T}var YA=(1+Math.sqrt(5))/2;function qA(a,i,t,s,l,f){for(var d=[],m=i.children,x,T,O=0,D=0,B=m.length,U,J,pe=i.value,Ee,Ce,st,gt,bt,Ft,xr;O<B;){U=l-t,J=f-s;do Ee=m[D++].value;while(!Ee&&D<B);for(Ce=st=Ee,Ft=Math.max(J/U,U/J)/(pe*a),xr=Ee*Ee*Ft,bt=Math.max(st/xr,xr/Ce);D<B;++D){if(Ee+=T=m[D].value,T<Ce&&(Ce=T),T>st&&(st=T),xr=Ee*Ee*Ft,gt=Math.max(st/xr,xr/Ce),gt>bt){Ee-=T;break}bt=gt}d.push(x={value:Ee,dice:U<J,children:m.slice(O,D)}),x.dice?Xy(x,t,s,l,pe?s+=J*Ee/pe:f):Y1(x,t,s,pe?t+=U*Ee/pe:l,f),pe-=Ee,O=D}return d}var KA=function a(i){function t(s,l,f,d,m){qA(i,s,l,f,d,m)}return t.ratio=function(s){return a((s=+s)>1?s:1)},t}(YA);function QA(){var a=KA,i=!1,t=1,s=1,l=[0],f=gv,d=gv,m=gv,x=gv,T=gv;function O(B){return B.x0=B.y0=0,B.x1=t,B.y1=s,B.eachBefore(D),l=[0],i&&B.eachBefore(WA),B}function D(B){var U=l[B.depth],J=B.x0+U,pe=B.y0+U,Ee=B.x1-U,Ce=B.y1-U;Ee<J&&(J=Ee=(J+Ee)/2),Ce<pe&&(pe=Ce=(pe+Ce)/2),B.x0=J,B.y0=pe,B.x1=Ee,B.y1=Ce,B.children&&(U=l[B.depth+1]=f(B)/2,J+=T(B)-U,pe+=d(B)-U,Ee-=m(B)-U,Ce-=x(B)-U,Ee<J&&(J=Ee=(J+Ee)/2),Ce<pe&&(pe=Ce=(pe+Ce)/2),a(B,J,pe,Ee,Ce))}return O.round=function(B){return arguments.length?(i=!!B,O):i},O.size=function(B){return arguments.length?(t=+B[0],s=+B[1],O):[t,s]},O.tile=function(B){return arguments.length?(a=ky(B),O):a},O.padding=function(B){return arguments.length?O.paddingInner(B).paddingOuter(B):O.paddingInner()},O.paddingInner=function(B){return arguments.length?(f=typeof B=="function"?B:rg(+B),O):f},O.paddingOuter=function(B){return arguments.length?O.paddingTop(B).paddingRight(B).paddingBottom(B).paddingLeft(B):O.paddingTop()},O.paddingTop=function(B){return arguments.length?(d=typeof B=="function"?B:rg(+B),O):d},O.paddingRight=function(B){return arguments.length?(m=typeof B=="function"?B:rg(+B),O):m},O.paddingBottom=function(B){return arguments.length?(x=typeof B=="function"?B:rg(+B),O):x},O.paddingLeft=function(B){return arguments.length?(T=typeof B=="function"?B:rg(+B),O):T},O}function nF(a,i,t,s,l){var f=a.children,d,m=f.length,x,T=new Array(m+1);for(T[0]=x=d=0;d<m;++d)T[d+1]=x+=f[d].value;O(0,m,a.value,i,t,s,l);function O(D,B,U,J,pe,Ee,Ce){if(D>=B-1){var st=f[D];st.x0=J,st.y0=pe,st.x1=Ee,st.y1=Ce;return}for(var gt=T[D],bt=U/2+gt,Ft=D+1,xr=B-1;Ft<xr;){var Fr=Ft+xr>>>1;T[Fr]<bt?Ft=Fr+1:xr=Fr}bt-T[Ft-1]<T[Ft]-bt&&D+1<Ft&&--Ft;var $r=T[Ft]-gt,yn=U-$r;if(Ee-J>Ce-pe){var cn=U?(J*yn+Ee*$r)/U:Ee;O(D,Ft,$r,J,pe,cn,Ce),O(Ft,B,yn,cn,pe,Ee,Ce)}else{var Bn=U?(pe*yn+Ce*$r)/U:Ce;O(D,Ft,$r,J,pe,Ee,Bn),O(Ft,B,yn,J,Bn,Ee,Ce)}}}function iF(a,i,t,s,l){(a.depth&1?Y1:Xy)(a,i,t,s,l)}var aF=function a(i){function t(s,l,f,d,m){if((x=s._squarify)&&x.ratio===i)for(var x,T,O,D,B=-1,U,J=x.length,pe=s.value;++B<J;){for(T=x[B],O=T.children,D=T.value=0,U=O.length;D<U;++D)T.value+=O[D].value;T.dice?Xy(T,l,f,d,pe?f+=(m-f)*T.value/pe:m):Y1(T,l,f,pe?l+=(d-l)*T.value/pe:d,m),pe-=T.value}else s._squarify=x=qA(i,s,l,f,d,m),x.ratio=i}return t.ratio=function(s){return a((s=+s)>1?s:1)},t}(YA),oF={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(a,i){return i.value-a.value},ratio:.5*(1+Math.sqrt(5))};function sF(a,i){return a==="treemapSquarify"?$[a].ratio(i):$[a]}function JA(a,i){i=(0,b.f0)({},oF,i);var t=i.as;if(!(0,b.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=uA(i)}catch(T){console.warn(T)}var l=sF(i.tile,i.ratio),f=function(T){return QA().tile(l).size(i.size).round(i.round).padding(i.padding).paddingInner(i.paddingInner).paddingOuter(i.paddingOuter).paddingTop(i.paddingTop).paddingRight(i.paddingRight).paddingBottom(i.paddingBottom).paddingLeft(i.paddingLeft)(im(T).sum(function(O){return i.ignoreParentValue&&O.children?0:O[s]}).sort(i.sort))},d=f(a),m=t[0],x=t[1];return d.each(function(T){T[m]=[T.x0,T.x1,T.x1,T.x0],T[x]=[T.y1,T.y1,T.y0,T.y0],["x0","x1","y0","y1"].forEach(function(O){t.indexOf(O)===-1&&delete T[O]})}),Jm(d)}function eM(a){var i=a.data,t=a.colorField,s=a.rawFields,l=a.hierarchyConfig,f=l===void 0?{}:l,d=f.activeDepth,m={partition:zL,treemap:JA},x=a.seriesField,T=a.type||"partition",O=m[T](i,(0,A.pi)((0,A.pi)({field:x||"value"},(0,b.CE)(f,["activeDepth"])),{type:"hierarchy.".concat(T),as:["x","y"]})),D=[];return O.forEach(function(B){var U,J,pe,Ee,Ce,st;if(B.depth===0||d>0&&B.depth>d)return null;for(var gt=B.data.name,bt=(0,A.pi)({},B);bt.depth>1;)gt="".concat((J=bt.parent.data)===null||J===void 0?void 0:J.name," / ").concat(gt),bt=bt.parent;var Ft=(0,A.pi)((0,A.pi)((0,A.pi)({},cs(B.data,(0,A.ev)((0,A.ev)([],s||[],!0),[f.field],!1))),(U={},U[$y]=gt,U[$S]=bt.data.name,U)),B);x&&(Ft[x]=B.data[x]||((Ee=(pe=B.parent)===null||pe===void 0?void 0:pe.data)===null||Ee===void 0?void 0:Ee[x])),t&&(Ft[t]=B.data[t]||((st=(Ce=B.parent)===null||Ce===void 0?void 0:Ce.data)===null||st===void 0?void 0:st[t])),Ft.ext=f,Ft[Oy]={hierarchyConfig:f,colorField:t,rawFields:s},D.push(Ft)}),D}function uF(a){var i=a.chart,t=a.options,s=t.color,l=t.colorField,f=l===void 0?$S:l,d=t.sunburstStyle,m=t.rawFields,x=m===void 0?[]:m,T=t.shape,O=eM(t);i.data(O);var D;return d&&(D=function(B){return mn({},{fillOpacity:Math.pow(.85,B.depth)},(0,b.mf)(d)?d(B):d)}),f1(mn({},a,{options:{xField:"x",yField:"y",seriesField:f,rawFields:(0,b.jj)((0,A.ev)((0,A.ev)([],BL,!0),x,!0)),polygon:{color:s,style:D,shape:T}}})),a}function lF(a){var i=a.chart;return i.axis(!1),a}function qS(a){var i=a.chart,t=a.options,s=t.label,l=rl(i,"polygon");if(!s)l.label(!1);else{var f=s.fields,d=f===void 0?["name"]:f,m=s.callback,x=(0,A._T)(s,["fields","callback"]);l.label({fields:d,callback:m,cfg:nl(x)})}return a}function cF(a){var i=a.chart,t=a.options,s=t.innerRadius,l=t.radius,f=t.reflect,d=i.coordinate({type:"polar",cfg:{innerRadius:s,radius:l}});return f&&d.reflect(f),a}function fF(a){var i,t=a.options,s=t.hierarchyConfig,l=t.meta;return qi(Hu({},(i={},i[HA]=(0,b.U2)(l,(0,b.U2)(s,["field"],"value")),i)))(a)}function hF(a){var i=a.chart,t=a.options,s=t.tooltip;if(s===!1)i.tooltip(!1);else{var l=s;(0,b.U2)(s,"fields")||(l=mn({},{customItems:function(f){return f.map(function(d){var m=(0,b.U2)(i.getOptions(),"scales"),x=(0,b.U2)(m,[$y,"formatter"],function(O){return O}),T=(0,b.U2)(m,[HA,"formatter"],function(O){return O});return(0,A.pi)((0,A.pi)({},d),{name:x(d.data[$y]),value:T(d.data.value)})})}},l)),i.tooltip(l)}return a}function pF(a){var i=a.drilldown,t=a.interactions,s=t===void 0?[]:t;return i!=null&&i.enabled?mn({},a,{interactions:(0,A.ev)((0,A.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:i,transformData:eM}}],!1)}):a}function dF(a){var i=a.chart,t=a.options,s=t.drilldown;return hu({chart:i,options:pF(t)}),s!=null&&s.enabled&&(i.appendPadding=py(i.appendPadding,(0,b.U2)(s,["breadCrumb","position"]))),a}function vF(a){return qi(qo,ep("sunburstStyle"),uF,lF,fF,Xg,cF,hF,qS,dF,As,wu())(a)}var j4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="sunburst",t}return i.getDefaultOptions=function(){return om},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return vF},i.SUNBURST_ANCESTOR_FIELD=$S,i.SUNBURST_PATH_FIELD=$y,i.NODE_ANCESTORS_FIELD=N1,i}(io);function tM(a,i){if((0,b.kJ)(a))return a.find(function(t){return t.type===i})}function rM(a,i){var t=tM(a,i);return t&&t.enable!==!1}function KS(a){var i=a.interactions,t=a.drilldown;return(0,b.U2)(t,"enabled")||rM(i,"treemap-drill-down")}function gF(a){var i=a.interactions["drill-down"];if(i){var t=i.context.actions.find(function(s){return s.name==="drill-down-action"});t.reset()}}function QS(a){var i=a.data,t=a.colorField,s=a.enableDrillDown,l=a.hierarchyConfig,f=JA(i,(0,A.pi)((0,A.pi)({},l),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),d=[];return f.forEach(function(m){if(m.depth===0||s&&m.depth!==1||!s&&m.children)return null;var x=m.ancestors().map(function(B){return{data:B.data,height:B.height,value:B.value}}),T=s&&(0,b.kJ)(i.path)?x.concat(i.path.slice(1)):x,O=Object.assign({},m.data,(0,A.pi)({x:m.x,y:m.y,depth:m.depth,value:m.value,path:T},m));if(!m.data[t]&&m.parent){var D=m.ancestors().find(function(B){return B.data[t]});O[t]=D==null?void 0:D.data[t]}else O[t]=m.data[t];O[Oy]={hierarchyConfig:l,colorField:t,enableDrillDown:s},d.push(O)}),d}function mF(a){var i=a.options,t=i.colorField;return mn({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(s){return{name:s.name,value:s.value}}}}},a)}function yF(a){var i=a.chart,t=a.options,s=t.color,l=t.colorField,f=t.rectStyle,d=t.hierarchyConfig,m=t.rawFields,x=QS({data:t.data,colorField:t.colorField,enableDrillDown:KS(t),hierarchyConfig:d});return i.data(x),f1(mn({},a,{options:{xField:"x",yField:"y",seriesField:l,rawFields:m,polygon:{color:s,style:f}}})),i.coordinate().reflect("y"),a}function q1(a){var i=a.chart;return i.axis(!1),a}function _F(a){var i=a.drilldown,t=a.interactions,s=t===void 0?[]:t,l=KS(a);return l?mn({},a,{interactions:(0,A.ev)((0,A.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:i,transformData:QS}}],!1)}):a}function xF(a){var i=a.chart,t=a.options,s=t.interactions,l=t.drilldown;hu({chart:i,options:_F(t)});var f=tM(s,"view-zoom");f&&(f.enable!==!1?i.getCanvas().on("mousewheel",function(m){m.preventDefault()}):i.getCanvas().off("mousewheel"));var d=KS(t);return d&&(i.appendPadding=py(i.appendPadding,(0,b.U2)(l,["breadCrumb","position"]))),a}function bF(a){return qi(mF,qo,ep("rectStyle"),yF,q1,Xg,Kl,xF,As,wu())(a)}var nM={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},SF=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="treemap",t}return i.getDefaultOptions=function(){return nM},i.prototype.changeData=function(t){var s=this.options,l=s.colorField,f=s.interactions,d=s.hierarchyConfig;this.updateOption({data:t});var m=QS({data:t,colorField:l,enableDrillDown:rM(f,"treemap-drill-down"),hierarchyConfig:d});this.chart.changeData(m),gF(this.chart)},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return bF},i}(io),Ad="id",JS="path",iM={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(a){return{name:a.id,value:a.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function Yy(a){if(a){var i=a.geometries[0].elements;i.forEach(function(t){t.shape.toFront()})}}var EF=Ti("element-active"),aM=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.syncElementsPos=function(){Yy(this.context.view)},i.prototype.active=function(){a.prototype.active.call(this),this.syncElementsPos()},i.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},i.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},i}(EF),oM=Ti("element-highlight"),wF=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.syncElementsPos=function(){Yy(this.context.view)},i.prototype.highlight=function(){a.prototype.highlight.call(this),this.syncElementsPos()},i.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},i.prototype.clear=function(){a.prototype.clear.call(this),this.syncElementsPos()},i.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},i}(oM),sM=Ti("element-selected"),CF=Ti("element-single-selected"),TF=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.syncElementsPos=function(){Yy(this.context.view)},i.prototype.selected=function(){a.prototype.selected.call(this),this.syncElementsPos()},i.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},i.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},i}(sM),AF=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.syncElementsPos=function(){Yy(this.context.view)},i.prototype.selected=function(){a.prototype.selected.call(this),this.syncElementsPos()},i.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},i.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},i}(CF);Kr("venn-element-active",aM),Kr("venn-element-highlight",wF),Kr("venn-element-selected",TF),Kr("venn-element-single-selected",AF),Fn("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Fn("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Fn("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Fn("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Fn("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Fn("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var MF=function(a){(0,A.ZT)(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.prototype.getLabelPoint=function(t,s,l){var f=t.data,d=f.x,m=f.y,x=t.customLabelInfo,T=x.offsetX,O=x.offsetY;return{content:t.content[l],x:d+T,y:m+O}},i}(Eo);Oi("venn",MF);var RF=k(27771),a0=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,uM=new RegExp("([a-z])["+a0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a0+"]*,?["+a0+"]*)+)","ig"),IF=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a0+"]*,?["+a0+"]*","ig");function lM(a){if(!a)return null;if((0,RF.Z)(a))return a;var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(uM,function(s,l,f){var d=[],m=l.toLowerCase();if(f.replace(IF,function(x,T){T&&d.push(+T)}),m==="m"&&d.length>2&&(t.push([l].concat(d.splice(0,2))),m="l",l=l==="m"?"l":"L"),m==="o"&&d.length===1&&t.push([l,d[0]]),m==="r")t.push([l].concat(d));else for(;d.length>=i[m]&&(t.push([l].concat(d.splice(0,i[m]))),!!i[m]););return""}),t}var cM=/[a-z]/;function fM(a,i){return[i[0]+(i[0]-a[0]),i[1]+(i[1]-a[1])]}function qy(a){var i=parsePathString(a);if(!i||!i.length)return[["M",0,0]];for(var t=!1,s=0;s<i.length;s++){var l=i[s][0];if(cM.test(l)||["V","H","T","S"].indexOf(l)>=0){t=!0;break}}if(!t)return i;var f=[],d=0,m=0,x=0,T=0,O=0,D,B,U=i[0];(U[0]==="M"||U[0]==="m")&&(d=+U[1],m=+U[2],x=d,T=m,O++,f[0]=["M",d,m]);for(var s=O,J=i.length;s<J;s++){var pe=i[s],Ee=f[s-1],Ce=[],l=pe[0],st=l.toUpperCase();if(l!==st)switch(Ce[0]=st,st){case"A":Ce[1]=pe[1],Ce[2]=pe[2],Ce[3]=pe[3],Ce[4]=pe[4],Ce[5]=pe[5],Ce[6]=+pe[6]+d,Ce[7]=+pe[7]+m;break;case"V":Ce[1]=+pe[1]+m;break;case"H":Ce[1]=+pe[1]+d;break;case"M":x=+pe[1]+d,T=+pe[2]+m,Ce[1]=x,Ce[2]=T;break;default:for(var gt=1,bt=pe.length;gt<bt;gt++)Ce[gt]=+pe[gt]+(gt%2?d:m)}else Ce=i[s];switch(st){case"Z":d=+x,m=+T;break;case"H":d=Ce[1],Ce=["L",d,m];break;case"V":m=Ce[1],Ce=["L",d,m];break;case"T":d=Ce[1],m=Ce[2];var Ft=fM([Ee[1],Ee[2]],[Ee[3],Ee[4]]);Ce=["Q",Ft[0],Ft[1],d,m];break;case"S":d=Ce[Ce.length-2],m=Ce[Ce.length-1];var xr=Ee.length,Fr=fM([Ee[xr-4],Ee[xr-3]],[Ee[xr-2],Ee[xr-1]]);Ce=["C",Fr[0],Fr[1],Ce[1],Ce[2],d,m];break;case"M":x=Ce[Ce.length-2],T=Ce[Ce.length-1];break;default:d=Ce[Ce.length-2],m=Ce[Ce.length-1]}f.push(Ce)}return f}var Ky=Math.PI*2,eE=function(a,i,t,s,l,f,d){var m=a.x,x=a.y;m*=i,x*=t;var T=s*m-l*x,O=l*m+s*x;return{x:T+f,y:O+d}},OF=function(a,i){var t=i===1.5707963267948966?.551915024494:i===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(i/4),s=Math.cos(a),l=Math.sin(a),f=Math.cos(a+i),d=Math.sin(a+i);return[{x:s-l*t,y:l+s*t},{x:f+d*t,y:d-f*t},{x:f,y:d}]},PF=function(a,i,t,s){var l=a*s-i*t<0?-1:1,f=a*t+i*s;return f>1&&(f=1),f<-1&&(f=-1),l*Math.acos(f)},hM=function(a,i,t,s,l,f,d,m,x,T,O,D){var B=Math.pow(l,2),U=Math.pow(f,2),J=Math.pow(O,2),pe=Math.pow(D,2),Ee=B*U-B*pe-U*J;Ee<0&&(Ee=0),Ee/=B*pe+U*J,Ee=Math.sqrt(Ee)*(d===m?-1:1);var Ce=Ee*l/f*D,st=Ee*-f/l*O,gt=T*Ce-x*st+(a+t)/2,bt=x*Ce+T*st+(i+s)/2,Ft=(O-Ce)/l,xr=(D-st)/f,Fr=(-O-Ce)/l,$r=(-D-st)/f,yn=PF(1,0,Ft,xr),cn=PF(Ft,xr,Fr,$r);return m===0&&cn>0&&(cn-=Ky),m===1&&cn<0&&(cn+=Ky),[gt,bt,yn,cn]},pM=function(a){var i=a.px,t=a.py,s=a.cx,l=a.cy,f=a.rx,d=a.ry,m=a.xAxisRotation,x=m===void 0?0:m,T=a.largeArcFlag,O=T===void 0?0:T,D=a.sweepFlag,B=D===void 0?0:D,U=[];if(f===0||d===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];var J=Math.sin(x*Ky/360),pe=Math.cos(x*Ky/360),Ee=pe*(i-s)/2+J*(t-l)/2,Ce=-J*(i-s)/2+pe*(t-l)/2;if(Ee===0&&Ce===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];f=Math.abs(f),d=Math.abs(d);var st=Math.pow(Ee,2)/Math.pow(f,2)+Math.pow(Ce,2)/Math.pow(d,2);st>1&&(f*=Math.sqrt(st),d*=Math.sqrt(st));var gt=hM(i,t,s,l,f,d,O,B,J,pe,Ee,Ce),bt=gt[0],Ft=gt[1],xr=gt[2],Fr=gt[3],$r=Math.abs(Fr)/(Ky/4);Math.abs(1-$r)<1e-7&&($r=1);var yn=Math.max(Math.ceil($r),1);Fr/=yn;for(var cn=0;cn<yn;cn++)U.push(OF(xr,Fr)),xr+=Fr;return U.map(function(Bn){var hi=eE(Bn[0],f,d,pe,J,bt,Ft),Hi=hi.x,aa=hi.y,Qa=eE(Bn[1],f,d,pe,J,bt,Ft),Hn=Qa.x,Fi=Qa.y,na=eE(Bn[2],f,d,pe,J,bt,Ft),zi=na.x,gi=na.y;return{x1:Hi,y1:aa,x2:Hn,y2:Fi,x:zi,y:gi}})};function H4(a,i,t,s,l,f,d,m,x){var T=pM({px:a,py:i,cx:m,cy:x,rx:t,ry:s,xAxisRotation:l,largeArcFlag:f,sweepFlag:d});return T.reduce(function(O,D){var B=D.x1,U=D.y1,J=D.x2,pe=D.y2,Ee=D.x,Ce=D.y;return O.push(B,U,J,pe,Ee,Ce),O},[])}function kF(a,i){"TQ".indexOf(a[0])<0&&(i.qx=null,i.qy=null);var t=a.slice(1),s=t[0],l=t[1];switch(a[0]){case"M":return i.x=s,i.y=l,a;case"A":return["C"].concat(arcToCubic.apply(0,[i.x1,i.y1].concat(a.slice(1))));case"Q":return i.qx=s,i.qy=l,["C"].concat(quadToCubic.apply(0,[i.x1,i.y1].concat(a.slice(1))));case"L":return["C"].concat(lineToCubic(i.x1,i.y1,a[1],a[2]));case"H":return["C"].concat(lineToCubic(i.x1,i.y1,a[1],i.y1));case"V":return["C"].concat(lineToCubic(i.x1,i.y1,i.x1,a[1]));case"Z":return["C"].concat(lineToCubic(i.x1,i.y1,i.x,i.y));default:}return a}function DF(a,i){i===void 0&&(i=!1);for(var t=path2Absolute(a),s={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},l=[],f="",d=t.length,m,x,T=[],O=0;O<d;O+=1)t[O]&&(f=t[O][0]),l[O]=f,t[O]=segmentToCubic(t[O],s),dM(t,l,O),d=t.length,f==="Z"&&T.push(O),m=t[O],x=m.length,s.x1=+m[x-2],s.y1=+m[x-1],s.x2=+m[x-4]||s.x1,s.y2=+m[x-3]||s.y1;return i?[t,T]:t}function dM(a,i,t){if(a[t].length>7){a[t].shift();for(var s=a[t],l=t;s.length;)i[t]="A",a.splice(l+=1,0,["C"].concat(s.splice(0,6)));a.splice(t,1)}}var tE=function(a,i,t,s,l){var f=-3*i+9*t-9*s+3*l,d=a*f+6*i-12*t+6*s;return a*d-3*i+3*t},rE=function(a,i,t,s,l,f,d,m,x){x===null&&(x=1),x=x>1?1:x<0?0:x;for(var T=x/2,O=12,D=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],B=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],U=0,J=0;J<O;J++){var pe=T*D[J]+T,Ee=tE(pe,a,t,l,d),Ce=tE(pe,i,s,f,m),st=Ee*Ee+Ce*Ce;U+=B[J]*Math.sqrt(st)}return T*U},vM=function(a,i,t,s,l,f,d,m){for(var x=[],T=[[],[]],O,D,B,U,J=0;J<2;++J){if(J===0?(D=6*a-12*t+6*l,O=-3*a+9*t-9*l+3*d,B=3*t-3*a):(D=6*i-12*s+6*f,O=-3*i+9*s-9*f+3*m,B=3*s-3*i),Math.abs(O)<1e-12){if(Math.abs(D)<1e-12)continue;U=-B/D,U>0&&U<1&&x.push(U);continue}var pe=D*D-4*B*O,Ee=Math.sqrt(pe);if(!(pe<0)){var Ce=(-D+Ee)/(2*O);Ce>0&&Ce<1&&x.push(Ce);var st=(-D-Ee)/(2*O);st>0&&st<1&&x.push(st)}}for(var gt=x.length,bt=gt,Ft;gt--;)U=x[gt],Ft=1-U,T[0][gt]=Ft*Ft*Ft*a+3*Ft*Ft*U*t+3*Ft*U*U*l+U*U*U*d,T[1][gt]=Ft*Ft*Ft*i+3*Ft*Ft*U*s+3*Ft*U*U*f+U*U*U*m;return T[0][bt]=a,T[1][bt]=i,T[0][bt+1]=d,T[1][bt+1]=m,T[0].length=T[1].length=bt+2,{min:{x:Math.min.apply(0,T[0]),y:Math.min.apply(0,T[1])},max:{x:Math.max.apply(0,T[0]),y:Math.max.apply(0,T[1])}}},gM=function(a,i,t,s,l,f,d,m){if(!(Math.max(a,t)<Math.min(l,d)||Math.min(a,t)>Math.max(l,d)||Math.max(i,s)<Math.min(f,m)||Math.min(i,s)>Math.max(f,m))){var x=(a*s-i*t)*(l-d)-(a-t)*(l*m-f*d),T=(a*s-i*t)*(f-m)-(i-s)*(l*m-f*d),O=(a-t)*(f-m)-(i-s)*(l-d);if(O){var D=x/O,B=T/O,U=+D.toFixed(2),J=+B.toFixed(2);if(!(U<+Math.min(a,t).toFixed(2)||U>+Math.max(a,t).toFixed(2)||U<+Math.min(l,d).toFixed(2)||U>+Math.max(l,d).toFixed(2)||J<+Math.min(i,s).toFixed(2)||J>+Math.max(i,s).toFixed(2)||J<+Math.min(f,m).toFixed(2)||J>+Math.max(f,m).toFixed(2)))return{x:D,y:B}}}},Yf=function(a,i,t){return i>=a.x&&i<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},K1=function(a,i,t,s){return a===null&&(a=i=t=s=0),i===null&&(i=a.y,t=a.width,s=a.height,a=a.x),{x:a,y:i,width:t,w:t,height:s,h:s,x2:a+t,y2:i+s,cx:a+t/2,cy:i+s/2,r1:Math.min(t,s)/2,r2:Math.max(t,s)/2,r0:Math.sqrt(t*t+s*s)/2,path:rectPath(a,i,t,s),vb:[a,i,t,s].join(" ")}},mM=function(a,i){return a=K1(a),i=K1(i),Yf(i,a.x,a.y)||Yf(i,a.x2,a.y)||Yf(i,a.x,a.y2)||Yf(i,a.x2,a.y2)||Yf(a,i.x,i.y)||Yf(a,i.x2,i.y)||Yf(a,i.x,i.y2)||Yf(a,i.x2,i.y2)||(a.x<i.x2&&a.x>i.x||i.x<a.x2&&i.x>a.x)&&(a.y<i.y2&&a.y>i.y||i.y<a.y2&&i.y>a.y)},nE=function(a,i,t,s,l,f,d,m){isArray(a)||(a=[a,i,t,s,l,f,d,m]);var x=vM.apply(null,a);return K1(x.min.x,x.min.y,x.max.x-x.min.x,x.max.y-x.min.y)},iE=function(a,i,t,s,l,f,d,m,x){var T=1-x,O=Math.pow(T,3),D=Math.pow(T,2),B=x*x,U=B*x,J=O*a+D*3*x*t+T*3*x*x*l+U*d,pe=O*i+D*3*x*s+T*3*x*x*f+U*m,Ee=a+2*x*(t-a)+B*(l-2*t+a),Ce=i+2*x*(s-i)+B*(f-2*s+i),st=t+2*x*(l-t)+B*(d-2*l+t),gt=s+2*x*(f-s)+B*(m-2*f+s),bt=T*a+x*t,Ft=T*i+x*s,xr=T*l+x*d,Fr=T*f+x*m,$r=90-Math.atan2(Ee-st,Ce-gt)*180/Math.PI;return{x:J,y:pe,m:{x:Ee,y:Ce},n:{x:st,y:gt},start:{x:bt,y:Ft},end:{x:xr,y:Fr},alpha:$r}},yM=function(a,i,t){var s=nE(a),l=nE(i);if(!mM(s,l))return t?0:[];for(var f=rE.apply(0,a),d=rE.apply(0,i),m=~~(f/8),x=~~(d/8),T=[],O=[],D={},B=t?0:[],U=0;U<m+1;U++){var J=iE.apply(0,a.concat(U/m));T.push({x:J.x,y:J.y,t:U/m})}for(var U=0;U<x+1;U++){var J=iE.apply(0,i.concat(U/x));O.push({x:J.x,y:J.y,t:U/x})}for(var U=0;U<m;U++)for(var pe=0;pe<x;pe++){var Ee=T[U],Ce=T[U+1],st=O[pe],gt=O[pe+1],bt=Math.abs(Ce.x-Ee.x)<.001?"y":"x",Ft=Math.abs(gt.x-st.x)<.001?"y":"x",xr=gM(Ee.x,Ee.y,Ce.x,Ce.y,st.x,st.y,gt.x,gt.y);if(xr){if(D[xr.x.toFixed(4)]===xr.y.toFixed(4))continue;D[xr.x.toFixed(4)]=xr.y.toFixed(4);var Fr=Ee.t+Math.abs((xr[bt]-Ee[bt])/(Ce[bt]-Ee[bt]))*(Ce.t-Ee.t),$r=st.t+Math.abs((xr[Ft]-st[Ft])/(gt[Ft]-st[Ft]))*(gt.t-st.t);Fr>=0&&Fr<=1&&$r>=0&&$r<=1&&(t?B++:B.push({x:xr.x,y:xr.y,t1:Fr,t2:$r}))}}return B},LF=function(a,i,t){a=path2Curve(a),i=path2Curve(i);for(var s,l,f,d,m,x,T,O,D,B,U=t?0:[],J=0,pe=a.length;J<pe;J++){var Ee=a[J];if(Ee[0]==="M")s=m=Ee[1],l=x=Ee[2];else{Ee[0]==="C"?(D=[s,l].concat(Ee.slice(1)),s=D[6],l=D[7]):(D=[s,l,s,l,m,x,m,x],s=m,l=x);for(var Ce=0,st=i.length;Ce<st;Ce++){var gt=i[Ce];if(gt[0]==="M")f=T=gt[1],d=O=gt[2];else{gt[0]==="C"?(B=[f,d].concat(gt.slice(1)),f=B[6],d=B[7]):(B=[f,d,f,d,T,O,T,O],f=T,d=O);var bt=yM(D,B,t);if(t)U+=bt;else{for(var Ft=0,xr=bt.length;Ft<xr;Ft++)bt[Ft].segment1=J,bt[Ft].segment2=Ce,bt[Ft].bez1=D,bt[Ft].bez2=B;U=U.concat(bt)}}}}}return U};function FF(a,i){return LF(a,i)}function _M(a){return mn({},a.defaultStyle,{fill:a.color},a.style)}xi("schema","venn",{draw:function(a,i){var t=a.data,s=lM(t[JS]),l=_M(a),f=i.addGroup({name:"venn-shape"});f.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},l),{path:s}),name:"venn-path"});var d=a.customInfo,m=d.offsetX,x=d.offsetY,T=uc.transform(null,[["t",m,x]]);return f.setMatrix(T),f},getMarker:function(a){var i=a.color;return{symbol:"circle",style:{lineWidth:0,stroke:i,fill:i,r:4}}}});var BF=function(a){return function(i,t){var s=[];return s[0]=a(i[0],t[0]),s[1]=a(i[1],t[1]),s[2]=a(i[2],t[2]),s}},aE={normal:function(a){return a},multiply:function(a,i){return a*i/255},screen:function(a,i){return 255*(1-(1-a/255)*(1-i/255))},overlay:function(a,i){return i<128?2*a*i/255:255*(1-2*(1-a/255)*(1-i/255))},darken:function(a,i){return a>i?i:a},lighten:function(a,i){return a>i?a:i},dodge:function(a,i){return a===255?255:(a=255*(i/255)/(1-a/255),a>255?255:a)},burn:function(a,i){return i===255?255:a===0?0:255*(1-Math.min(1,(1-i/255)/(a/255)))}},xM=function(a){if(!aE[a])throw new Error("unknown blend mode "+a);return aE[a]};function NF(a,i,t){t===void 0&&(t="normal");var s=BF(xM(t))(oE(a),oE(i)),l=oE(a),f=l[0],d=l[1],m=l[2],x=l[3],T=oE(i),O=T[0],D=T[1],B=T[2],U=T[3],J=Number((x+U*(1-x)).toFixed(2)),pe=Math.round((x*(1-U)*(f/255)+x*U*(s[0]/255)+(1-x)*U*(O/255))/J*255),Ee=Math.round((x*(1-U)*(d/255)+x*U*(s[1]/255)+(1-x)*U*(D/255))/J*255),Ce=Math.round((x*(1-U)*(m/255)+x*U*(s[2]/255)+(1-x)*U*(B/255))/J*255);return"rgba(".concat(pe,", ").concat(Ee,", ").concat(Ce,", ").concat(J,")")}function oE(a){var i=a.replace("/s+/g",""),t;return typeof i=="string"&&!i.startsWith("rgba")&&!i.startsWith("#")?t=Sa.rgb2arr(Sa.toRGB(i)).concat([1]):(i.startsWith("rgba")&&(t=i.replace("rgba(","").replace(")","").split(",")),i.startsWith("#")&&(t=Sa.rgb2arr(i).concat([1])),t.map(function(s,l){return l===3?Number(s):s|0}))}var Md=k(69916),zF=1e-10;function sE(a,i){var t=ZF(a),s=t.filter(function(Fr){return UF(Fr,a)}),l=0,f=0,d,m=[];if(s.length>1){var x=SM(s);for(d=0;d<s.length;++d){var T=s[d];T.angle=Math.atan2(T.x-x.x,T.y-x.y)}s.sort(function(Fr,$r){return $r.angle-Fr.angle});var O=s[s.length-1];for(d=0;d<s.length;++d){var D=s[d];f+=(O.x+D.x)*(D.y-O.y);for(var B={x:(D.x+O.x)/2,y:(D.y+O.y)/2},U=null,J=0;J<D.parentIndex.length;++J)if(O.parentIndex.indexOf(D.parentIndex[J])>-1){var pe=a[D.parentIndex[J]],Ee=Math.atan2(D.x-pe.x,D.y-pe.y),Ce=Math.atan2(O.x-pe.x,O.y-pe.y),st=Ce-Ee;st<0&&(st+=2*Math.PI);var gt=Ce-st/2,bt=zp(B,{x:pe.x+pe.radius*Math.sin(gt),y:pe.y+pe.radius*Math.cos(gt)});bt>pe.radius*2&&(bt=pe.radius*2),(U===null||U.width>bt)&&(U={circle:pe,width:bt,p1:D,p2:O})}U!==null&&(m.push(U),l+=bM(U.circle.radius,U.width),O=D)}}else{var Ft=a[0];for(d=1;d<a.length;++d)a[d].radius<Ft.radius&&(Ft=a[d]);var xr=!1;for(d=0;d<a.length;++d)if(zp(a[d],Ft)>Math.abs(Ft.radius-a[d].radius)){xr=!0;break}xr?l=f=0:(l=Ft.radius*Ft.radius*Math.PI,m.push({circle:Ft,p1:{x:Ft.x,y:Ft.y+Ft.radius},p2:{x:Ft.x-zF,y:Ft.y+Ft.radius},width:Ft.radius*2}))}return f/=2,i&&(i.area=l+f,i.arcArea=l,i.polygonArea=f,i.arcs=m,i.innerPoints=s,i.intersectionPoints=t),l+f}function UF(a,i){for(var t=0;t<i.length;++t)if(zp(a,i[t])>i[t].radius+zF)return!1;return!0}function ZF(a){for(var i=[],t=0;t<a.length;++t)for(var s=t+1;s<a.length;++s)for(var l=jF(a[t],a[s]),f=0;f<l.length;++f){var d=l[f];d.parentIndex=[t,s],i.push(d)}return i}function bM(a,i){return a*a*Math.acos(1-i/a)-(a-i)*Math.sqrt(i*(2*a-i))}function zp(a,i){return Math.sqrt((a.x-i.x)*(a.x-i.x)+(a.y-i.y)*(a.y-i.y))}function VF(a,i,t){if(t>=a+i)return 0;if(t<=Math.abs(a-i))return Math.PI*Math.min(a,i)*Math.min(a,i);var s=a-(t*t-i*i+a*a)/(2*t),l=i-(t*t-a*a+i*i)/(2*t);return bM(a,s)+bM(i,l)}function jF(a,i){var t=zp(a,i),s=a.radius,l=i.radius;if(t>=s+l||t<=Math.abs(s-l))return[];var f=(s*s-l*l+t*t)/(2*t),d=Math.sqrt(s*s-f*f),m=a.x+f*(i.x-a.x)/t,x=a.y+f*(i.y-a.y)/t,T=-(i.y-a.y)*(d/t),O=-(i.x-a.x)*(d/t);return[{x:m+T,y:x-O},{x:m-T,y:x+O}]}function SM(a){for(var i={x:0,y:0},t=0;t<a.length;++t)i.x+=a[t].x,i.y+=a[t].y;return i.x/=a.length,i.y/=a.length,i}function EM(a,i,t){var s=i[0].radius-zp(i[0],a),l,f;for(l=1;l<i.length;++l)f=i[l].radius-zp(i[l],a),f<=s&&(s=f);for(l=0;l<t.length;++l)f=zp(t[l],a)-t[l].radius,f<=s&&(s=f);return s}function HF(a,i){var t=[],s;for(s=0;s<a.length;++s){var l=a[s];t.push({x:l.x,y:l.y}),t.push({x:l.x+l.radius/2,y:l.y}),t.push({x:l.x-l.radius/2,y:l.y}),t.push({x:l.x,y:l.y+l.radius/2}),t.push({x:l.x,y:l.y-l.radius/2})}var f=t[0],d=EM(t[0],a,i);for(s=1;s<t.length;++s){var m=EM(t[s],a,i);m>=d&&(f=t[s],d=m)}var x=(0,Md.nelderMead)(function(B){return-1*EM({x:B[0],y:B[1]},a,i)},[f.x,f.y],{maxIterations:500,minErrorDelta:1e-10}).x,T={x:x[0],y:x[1]},O=!0;for(s=0;s<a.length;++s)if(zp(T,a[s])>a[s].radius){O=!1;break}for(s=0;s<i.length;++s)if(zp(T,i[s])<i[s].radius){O=!1;break}if(!O)if(a.length==1)T={x:a[0].x,y:a[0].y};else{var D={};sE(a,D),D.arcs.length===0?T={x:0,y:-1e3,disjoint:!0}:D.arcs.length==1?T={x:D.arcs[0].circle.x,y:D.arcs[0].circle.y}:i.length?T=HF(a,[]):T=SM(D.arcs.map(function(B){return B.p1}))}return T}function WF(a){var i={},t=[];for(var s in a)t.push(s),i[s]=[];for(var l=0;l<t.length;l++)for(var f=a[t[l]],d=l+1;d<t.length;++d){var m=a[t[d]],x=zp(f,m);x+m.radius<=f.radius+1e-10?i[t[d]].push(t[l]):x+f.radius<=m.radius+1e-10&&i[t[l]].push(t[d])}return i}function wM(a,i){for(var t={},s=WF(a),l=0;l<i.length;++l){for(var f=i[l].sets,d={},m={},x=0;x<f.length;++x){d[f[x]]=!0;for(var T=s[f[x]],O=0;O<T.length;++O)m[T[O]]=!0}var D=[],B=[];for(var U in a)U in d?D.push(a[U]):U in m||B.push(a[U]);var J=HF(D,B);t[f]=J,J.disjoint&&i[l].size>0&&console.log("WARNING: area "+f+" not represented on screen")}return t}function uE(a,i,t){var s=[],l=a-t,f=i;return s.push("M",l,f),s.push("A",t,t,0,1,0,l+2*t,f),s.push("A",t,t,0,1,0,l,f),s.join(" ")}function GF(a){var i=a.split(" ");return{x:parseFloat(i[1]),y:parseFloat(i[2]),radius:-parseFloat(i[4])}}function Q1(a){var i={};sE(a,i);var t=i.arcs;if(t.length===0)return"M 0 0";if(t.length==1){var s=t[0].circle;return uE(s.x,s.y,s.radius)}else{for(var l=[`
M`,t[0].p2.x,t[0].p2.y],f=0;f<t.length;++f){var d=t[f],m=d.circle.radius,x=d.width>m;l.push(`
A`,m,m,0,x?1:0,1,d.p1.x,d.p1.y)}return l.join(" ")}}function W4(a,i){i=i||{},i.maxIterations=i.maxIterations||500;var t=i.initialLayout||$4,s=i.lossFunction||tx;a=Qy(a);var l=t(a,i),f=[],d=[],m;for(m in l)l.hasOwnProperty(m)&&(f.push(l[m].x),f.push(l[m].y),d.push(m));for(var x=(0,Md.nelderMead)(function(D){for(var B={},U=0;U<d.length;++U){var J=d[U];B[J]={x:D[2*U],y:D[2*U+1],radius:l[J].radius}}return s(B,a)},f,i),T=x.x,O=0;O<d.length;++O)m=d[O],l[m].x=T[2*O],l[m].y=T[2*O+1];return l}var CM=1e-10;function J1(a,i,t){return Math.min(a,i)*Math.min(a,i)*Math.PI<=t+CM?Math.abs(a-i):(0,Md.bisect)(function(s){return VF(a,i,s)-t},0,a+i)}function Qy(a){a=a.slice();var i=[],t={},s,l,f,d;for(s=0;s<a.length;++s){var m=a[s];m.sets.length==1?i.push(m.sets[0]):m.sets.length==2&&(f=m.sets[0],d=m.sets[1],t[[f,d]]=!0,t[[d,f]]=!0)}for(i.sort(function(x,T){return x>T?1:-1}),s=0;s<i.length;++s)for(f=i[s],l=s+1;l<i.length;++l)d=i[l],[f,d]in t||a.push({sets:[f,d],size:0});return a}function ex(a,i,t){var s=(0,Md.zerosM)(i.length,i.length),l=(0,Md.zerosM)(i.length,i.length);return a.filter(function(f){return f.sets.length==2}).map(function(f){var d=t[f.sets[0]],m=t[f.sets[1]],x=Math.sqrt(i[d].size/Math.PI),T=Math.sqrt(i[m].size/Math.PI),O=J1(x,T,f.size);s[d][m]=s[m][d]=O;var D=0;f.size+1e-10>=Math.min(i[d].size,i[m].size)?D=1:f.size<=1e-10&&(D=-1),l[d][m]=l[m][d]=D}),{distances:s,constraints:l}}function G4(a,i,t,s){var l=0,f;for(f=0;f<i.length;++f)i[f]=0;for(f=0;f<t.length;++f)for(var d=a[2*f],m=a[2*f+1],x=f+1;x<t.length;++x){var T=a[2*x],O=a[2*x+1],D=t[f][x],B=s[f][x],U=(T-d)*(T-d)+(O-m)*(O-m),J=Math.sqrt(U),pe=U-D*D;B>0&&J<=D||B<0&&J>=D||(l+=2*pe*pe,i[2*f]+=4*pe*(d-T),i[2*f+1]+=4*pe*(m-O),i[2*x]+=4*pe*(T-d),i[2*x+1]+=4*pe*(O-m))}return l}function $4(a,i){var t=Up(a,i),s=i.lossFunction||tx;if(a.length>=8){var l=sm(a,i),f=s(l,a),d=s(t,a);f+1e-8<d&&(t=l)}return t}function sm(a,i){i=i||{};var t=i.restarts||10,s=[],l={},f;for(f=0;f<a.length;++f){var d=a[f];d.sets.length==1&&(l[d.sets[0]]=s.length,s.push(d))}var m=ex(a,s,l),x=m.distances,T=m.constraints,O=(0,Md.norm2)(x.map(Md.norm2))/x.length;x=x.map(function(st){return st.map(function(gt){return gt/O})});var D=function(st,gt){return G4(st,gt,x,T)},B,U;for(f=0;f<t;++f){var J=(0,Md.zeros)(x.length*2).map(Math.random);U=(0,Md.conjugateGradient)(D,J,i),(!B||U.fx<B.fx)&&(B=U)}var pe=B.x,Ee={};for(f=0;f<s.length;++f){var Ce=s[f];Ee[Ce.sets[0]]={x:pe[2*f]*O,y:pe[2*f+1]*O,radius:Math.sqrt(Ce.size/Math.PI)}}if(i.history)for(f=0;f<i.history.length;++f)(0,Md.scale)(i.history[f].x,O);return Ee}function Up(a,i){for(var t=i&&i.lossFunction?i.lossFunction:tx,s={},l={},f,d=0;d<a.length;++d){var m=a[d];m.sets.length==1&&(f=m.sets[0],s[f]={x:1e10,y:1e10,rowid:Object.keys(s).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},l[f]=[])}a=a.filter(function(Hn){return Hn.sets.length==2});for(var d=0;d<a.length;++d){var x=a[d],T=x.hasOwnProperty("weight")?x.weight:1,O=x.sets[0],D=x.sets[1];x.size+CM>=Math.min(s[O].size,s[D].size)&&(T=0),l[O].push({set:D,size:x.size,weight:T}),l[D].push({set:O,size:x.size,weight:T})}var B=[];for(f in l)if(l.hasOwnProperty(f)){for(var U=0,d=0;d<l[f].length;++d)U+=l[f][d].size*l[f][d].weight;B.push({set:f,size:U})}function J(Hn,Fi){return Fi.size-Hn.size}B.sort(J);var pe={};function Ee(Hn){return Hn.set in pe}function Ce(Hn,Fi){s[Fi].x=Hn.x,s[Fi].y=Hn.y,pe[Fi]=!0}Ce({x:0,y:0},B[0].set);for(var d=1;d<B.length;++d){var st=B[d].set,gt=l[st].filter(Ee);if(f=s[st],gt.sort(J),gt.length===0)throw"ERROR: missing pairwise overlap information";for(var bt=[],Ft=0;Ft<gt.length;++Ft){var xr=s[gt[Ft].set],Fr=J1(f.radius,xr.radius,gt[Ft].size);bt.push({x:xr.x+Fr,y:xr.y}),bt.push({x:xr.x-Fr,y:xr.y}),bt.push({y:xr.y+Fr,x:xr.x}),bt.push({y:xr.y-Fr,x:xr.x});for(var $r=Ft+1;$r<gt.length;++$r)for(var yn=s[gt[$r].set],cn=J1(f.radius,yn.radius,gt[$r].size),Bn=jF({x:xr.x,y:xr.y,radius:Fr},{x:yn.x,y:yn.y,radius:cn}),hi=0;hi<Bn.length;++hi)bt.push(Bn[hi])}for(var Hi=1e50,aa=bt[0],Ft=0;Ft<bt.length;++Ft){s[st].x=bt[Ft].x,s[st].y=bt[Ft].y;var Qa=t(s,a);Qa<Hi&&(Hi=Qa,aa=bt[Ft])}Ce(aa,st)}return s}function tx(a,i){var t=0;function s(O){return O.map(function(D){return a[D]})}for(var l=0;l<i.length;++l){var f=i[l],d=void 0;if(f.sets.length!=1){if(f.sets.length==2){var m=a[f.sets[0]],x=a[f.sets[1]];d=VF(m.radius,x.radius,zp(m,x))}else d=sE(s(f.sets));var T=f.hasOwnProperty("weight")?f.weight:1;t+=T*(d-f.size)*(d-f.size)}}return t}function mv(a,i,t){t===null?a.sort(function(pe,Ee){return Ee.radius-pe.radius}):a.sort(t);var s;if(a.length>0){var l=a[0].x,f=a[0].y;for(s=0;s<a.length;++s)a[s].x-=l,a[s].y-=f}if(a.length==2){var d=distance(a[0],a[1]);d<Math.abs(a[1].radius-a[0].radius)&&(a[1].x=a[0].x+a[0].radius-a[1].radius-1e-10,a[1].y=a[0].y)}if(a.length>1){var m=Math.atan2(a[1].x,a[1].y)-i,x=void 0,T=void 0,O=Math.cos(m),D=Math.sin(m);for(s=0;s<a.length;++s)x=a[s].x,T=a[s].y,a[s].x=O*x-D*T,a[s].y=D*x+O*T}if(a.length>2){for(var B=Math.atan2(a[2].x,a[2].y)-i;B<0;)B+=2*Math.PI;for(;B>2*Math.PI;)B-=2*Math.PI;if(B>Math.PI){var U=a[1].y/(1e-10+a[1].x);for(s=0;s<a.length;++s){var J=(a[s].x+U*a[s].y)/(1+U*U);a[s].x=2*J-a[s].x,a[s].y=2*J*U-a[s].y}}}}function TM(a){a.map(function(T){T.parent=T});function i(T){return T.parent!==T&&(T.parent=i(T.parent)),T.parent}function t(T,O){var D=i(T),B=i(O);D.parent=B}for(var s=0;s<a.length;++s)for(var l=s+1;l<a.length;++l){var f=a[s].radius+a[l].radius;distance(a[s],a[l])+1e-10<f&&t(a[l],a[s])}for(var d={},m,s=0;s<a.length;++s)m=i(a[s]).parent.setid,m in d||(d[m]=[]),d[m].push(a[s]);a.map(function(T){delete T.parent});var x=[];for(m in d)d.hasOwnProperty(m)&&x.push(d[m]);return x}function Jy(a){var i=function(t){var s=Math.max.apply(null,a.map(function(f){return f[t]+f.radius})),l=Math.min.apply(null,a.map(function(f){return f[t]-f.radius}));return{max:s,min:l}};return{xRange:i("x"),yRange:i("y")}}function AM(a,i,t){i===null&&(i=Math.PI/2);var s=[],l,f;for(f in a)if(a.hasOwnProperty(f)){var d=a[f];s.push({x:d.x,y:d.y,radius:d.radius,setid:f})}var m=TM(s);for(l=0;l<m.length;++l){mv(m[l],i,t);var x=Jy(m[l]);m[l].size=(x.xRange.max-x.xRange.min)*(x.yRange.max-x.yRange.min),m[l].bounds=x}m.sort(function(J,pe){return pe.size-J.size}),s=m[0];var T=s.bounds,O=(T.xRange.max-T.xRange.min)/50;function D(J,pe,Ee){if(J){var Ce=J.bounds,st,gt,bt;pe?st=T.xRange.max-Ce.xRange.min+O:(st=T.xRange.max-Ce.xRange.max,bt=(Ce.xRange.max-Ce.xRange.min)/2-(T.xRange.max-T.xRange.min)/2,bt<0&&(st+=bt)),Ee?gt=T.yRange.max-Ce.yRange.min+O:(gt=T.yRange.max-Ce.yRange.max,bt=(Ce.yRange.max-Ce.yRange.min)/2-(T.yRange.max-T.yRange.min)/2,bt<0&&(gt+=bt));for(var Ft=0;Ft<J.length;++Ft)J[Ft].x+=st,J[Ft].y+=gt,s.push(J[Ft])}}for(var B=1;B<m.length;)D(m[B],!0,!1),D(m[B+1],!1,!0),D(m[B+2],!0,!0),B+=3,T=Jy(s);var U={};for(l=0;l<s.length;++l)U[s[l].setid]=s[l];return U}function $F(a,i,t,s){var l=[],f=[];for(var d in a)a.hasOwnProperty(d)&&(f.push(d),l.push(a[d]));i-=2*s,t-=2*s;var m=Jy(l),x=m.xRange,T=m.yRange;if(x.max==x.min||T.max==T.min)return console.log("not scaling solution: zero size detected"),a;for(var O=i/(x.max-x.min),D=t/(T.max-T.min),B=Math.min(D,O),U=(i-(x.max-x.min)*B)/2,J=(t-(T.max-T.min)*B)/2,pe={},Ee=0;Ee<l.length;++Ee){var Ce=l[Ee];pe[f[Ee]]={radius:B*Ce.radius,x:s+U+(Ce.x-x.min)*B,y:s+J+(Ce.y-T.min)*B}}return pe}var MM=(0,b.HP)(function(a,i,t,s){var l=new Map,f=a.length;return i.forEach(function(d,m){if(d[s].length===1)l.set(d[Ad],a[(m+f)%f]);else{var x=d[s].map(function(T){return l.get(T)});l.set(d[Ad],x.slice(1).reduce(function(T,O){return NF(T,O,t)},x[0]))}}),l},function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return JSON.stringify(a)});function XF(a,i,t,s){s===void 0&&(s=0);var l=a.data,f=a.setsField,d=a.sizeField;if(l.length===0)return wd(Bp.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var m=l.map(function(D){var B;return(0,A.pi)((0,A.pi)({},D),(B={sets:D[f]||[],size:D[d]},B[JS]="",B[Ad]="",B))});m.sort(function(D,B){return D.sets.length-B.sets.length});var x=W4(m),T=$F(x,i,t,s),O=wM(T,m);return m.forEach(function(D){var B=D.sets,U=B.join(",");D[Ad]=U;var J=B.map(function(Ce){return T[Ce]}),pe=Q1(J);/[zZ]$/.test(pe)||(pe+=" Z"),D[JS]=pe;var Ee=O[U]||{x:0,y:0};(0,b.f0)(D,Ee)}),m}function rx(a,i){for(var t=0;t<i.length;t++)if(!a.includes(i[t]))return!1;return!0}var lE=40;function YF(a,i,t){var s=a.chart,l=a.options,f=l.blendMode,d=l.setsField,m=s.getTheme(),x=m.colors10,T=m.colors20,O=t;(0,b.kJ)(O)||(O=i.filter(function(B){return B[d].length===1}).length<=10?x:T);var D=MM(O,i,f,d);return function(B){return D.get(B)||O[0]}}function RM(a,i){var t=a.options,s=t.color;if(typeof s!="function"){var l=typeof s=="string"?[s]:s,f=YF(a,i,l);return function(d){return f(d[Ad])}}return s}function X4(a){var i=a.chart,t=a.options,s=t.legend,l=t.appendPadding,f=t.padding,d=$g(l);return s!==!1&&(d=py(l,(0,b.U2)(s,"position"),lE)),i.appendPadding=Gb([d,f]),a}function qF(a){var i=a.options,t=i.data;t||(wd(Bp.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),t=[]);var s=t.filter(function(f){return f.sets.length===1}).map(function(f){return f.sets[0]}),l=t.filter(function(f){var d=f.sets;return rx(s,d)});return(0,b.Xy)(l,t)||wd(Bp.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),(0,b.b$)({},a,{options:{data:l}})}function KF(a){var i=a.chart,t=a.options,s=t.pointStyle,l=t.setsField,f=t.sizeField,d=$g(i.appendPadding),m=d[0],x=d[1],T=d[2],O=d[3],D={offsetX:O,offsetY:m},B=i.viewBBox,U=B.width,J=B.height,pe=XF(t,Math.max(U-(x+O),0),Math.max(J-(m+T),0),0);i.data(pe);var Ee=h1(mn({},a,{options:{xField:"x",yField:"y",sizeField:f,seriesField:Ad,rawFields:[l,f],schema:{shape:"venn",style:s}}})).ext,Ce=Ee.geometry;Ce.customInfo(D);var st=RM(a,pe);return typeof st=="function"&&Ce.color(Ad,function(gt){var bt=pe.find(function(xr){return xr[Ad]===gt}),Ft=YF(a,pe)(gt);return st(bt,Ft)}),a}function QF(a){var i=a.chart,t=a.options,s=t.label,l=$g(i.appendPadding),f=l[0],d=l[3],m={offsetX:d,offsetY:f},x=rl(i,"schema");if(!s)x.label(!1);else{var T=s.callback,O=(0,A._T)(s,["callback"]);x.label({fields:["id"],callback:T,cfg:(0,b.b$)({},nl(O),{type:"venn",customLabelInfo:m})})}return a}function JF(a){var i=a.chart,t=a.options,s=t.legend,l=t.sizeField;return i.legend(Ad,s),i.legend(l,!1),a}function IM(a){var i=a.chart;return i.axis(!1),a}function OM(a){var i=a.options,t=a.chart,s=i.interactions;if(s){var l={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};hu(mn({},a,{options:{interactions:s.map(function(f){return(0,A.pi)((0,A.pi)({},f),{type:l[f.type]||f.type})})}}))}return t.removeInteraction("legend-active"),t.removeInteraction("legend-highlight"),a}function e5(a){return qi(X4,qo,qF,KF,QF,Hu({}),JF,IM,Kl,OM,As)(a)}var Y4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="venn",t}return i.getDefaultOptions=function(){return iM},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return e5},i.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},i}(io),qf="x",ig="violinY",PM="violinSize",cE="minMax",kM="quantile",DM="median",nx="violin_view",LM="min_max_view",FM="quantile_view",BM="median_view",NM=mn({},io.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),zM=k(53843),o0=k.n(zM);function fE(a,i){var t=a.length*i;if(a.length===0)throw new Error("quantile requires at least one data point.");if(i<0||i>1)throw new Error("quantiles must be between 0 and 1");return i===1?a[a.length-1]:i===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function s0(a,i,t){var s=a[i];a[i]=a[t],a[t]=s}function e_(a,i,t,s){for(t=t||0,s=s||a.length-1;s>t;){if(s-t>600){var l=s-t+1,f=i-t+1,d=Math.log(l),m=.5*Math.exp(2*d/3),x=.5*Math.sqrt(d*m*(l-m)/l);f-l/2<0&&(x*=-1);var T=Math.max(t,Math.floor(i-f*m/l+x)),O=Math.min(s,Math.floor(i+(l-f)*m/l+x));e_(a,i,T,O)}var D=a[i],B=t,U=s;for(s0(a,t,i),a[s]>D&&s0(a,t,s);B<U;){for(s0(a,B,U),B++,U--;a[B]<D;)B++;for(;a[U]>D;)U--}a[t]===D?s0(a,t,U):(U++,s0(a,U,s)),U<=i&&(t=U+1),i<=U&&(s=U-1)}}function u0(a,i){var t=a.slice();if(Array.isArray(i)){t5(t,i);for(var s=[],l=0;l<i.length;l++)s[l]=fE(t,i[l]);return s}else{var f=hE(t.length,i);return UM(t,f,0,t.length-1),fE(t,i)}}function UM(a,i,t,s){i%1===0?e_(a,i,t,s):(i=Math.floor(i),e_(a,i,t,s),e_(a,i+1,i+1,s))}function t5(a,i){for(var t=[0],s=0;s<i.length;s++)t.push(hE(a.length,i[s]));t.push(a.length-1),t.sort(r5);for(var l=[0,t.length-1];l.length;){var f=Math.ceil(l.pop()),d=Math.floor(l.pop());if(!(f-d<=1)){var m=Math.floor((d+f)/2);UM(a,t[m],Math.floor(t[d]),Math.ceil(t[f])),l.push(d,m,m,f)}}}function r5(a,i){return a-i}function hE(a,i){var t=a*i;return i===1?a-1:i===0?0:t%1!==0?Math.ceil(t)-1:a%2===0?t-.5:t}var ZM=function(a){return{low:(0,b.VV)(a),high:(0,b.Fp)(a),q1:u0(a,.25),q3:u0(a,.75),median:u0(a,[.5]),minMax:[(0,b.VV)(a),(0,b.Fp)(a)],quantile:[u0(a,.25),u0(a,.75)]}},pE=function(a,i){var t=o0().create(a,i);return{violinSize:t.map(function(s){return s.y}),violinY:t.map(function(s){return s.x})}},VM=function(a){var i=a.xField,t=a.yField,s=a.seriesField,l=a.data,f=a.kde,d={min:f.min,max:f.max,size:f.sampleSize,width:f.width};if(!s){var m=(0,b.vM)(l,i);return Object.keys(m).map(function(O){var D=m[O],B=D.map(function(U){return U[t]});return(0,A.pi)((0,A.pi)({x:O},pE(B,d)),ZM(B))})}var x=[],T=(0,b.vM)(l,s);return Object.keys(T).forEach(function(O){var D=(0,b.vM)(T[O],i);return Object.keys(D).forEach(function(B){var U,J=D[B],pe=J.map(function(Ee){return Ee[t]});x.push((0,A.pi)((0,A.pi)((U={x:B},U[s]=O,U),pE(pe,d)),ZM(pe)))})}),x},ix=["low","high","q1","q3","median"],l0=[{type:"dodge",marginRatio:1/32}];function ax(a){var i=a.chart,t=a.options;return i.data(VM(t)),a}function n5(a){var i=a.chart,t=a.options,s=t.seriesField,l=t.color,f=t.shape,d=f===void 0?"violin":f,m=t.violinStyle,x=t.tooltip,T=t.state,O=i.createView({id:nx});return rP({chart:O,options:{xField:qf,yField:ig,seriesField:s||qf,sizeField:PM,tooltip:(0,A.pi)({fields:ix},x),violin:{style:m,color:l,shape:d},state:T}}),O.geometries[0].adjust(l0),a}function jM(a){var i=a.chart,t=a.options,s=t.seriesField,l=t.color,f=t.tooltip,d=t.box;if(d===!1)return a;var m=i.createView({id:LM});Wc({chart:m,options:{xField:qf,yField:cE,seriesField:s||qf,tooltip:(0,A.pi)({fields:ix},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:1,style:{lineWidth:0}}}}),m.geometries[0].adjust(l0);var x=i.createView({id:FM});Wc({chart:x,options:{xField:qf,yField:kM,seriesField:s||qf,tooltip:(0,A.pi)({fields:ix},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:8,style:{fillOpacity:1}}}}),x.geometries[0].adjust(l0);var T=i.createView({id:BM});return Eh({chart:T,options:{xField:qf,yField:DM,seriesField:s||qf,tooltip:(0,A.pi)({fields:ix},f),state:typeof d=="object"?d.state:{},point:{color:l,size:1,style:{fill:"white",lineWidth:0}}}}),T.geometries[0].adjust(l0),x.axis(!1),m.axis(!1),T.axis(!1),T.legend(!1),m.legend(!1),x.legend(!1),a}function Zp(a){var i,t=a.chart,s=a.options,l=s.meta,f=s.xAxis,d=s.yAxis,m={},x=mn(m,l,(i={},i[qf]=(0,A.pi)((0,A.pi)({sync:!0},cs(f,fa)),{type:"cat"}),i[ig]=(0,A.pi)({sync:!0},cs(d,fa)),i[cE]=(0,A.pi)({sync:ig},cs(d,fa)),i[kM]=(0,A.pi)({sync:ig},cs(d,fa)),i[DM]=(0,A.pi)({sync:ig},cs(d,fa)),i));return t.scale(x),a}function Kf(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=po(i,nx);return s===!1?f.axis(qf,!1):f.axis(qf,s),l===!1?f.axis(ig,!1):f.axis(ig,l),i.axis(!1),a}function yv(a){var i=a.chart,t=a.options,s=t.legend,l=t.seriesField,f=t.shape;if(s===!1)i.legend(!1);else{var d=l||qf,m=(0,b.CE)(s,["selected"]);(!f||!f.startsWith("hollow"))&&((0,b.U2)(m,["marker","style","lineWidth"])||(0,b.t8)(m,["marker","style","lineWidth"],0)),i.legend(d,m),(0,b.U2)(s,"selected")&&(0,b.S6)(i.views,function(x){return x.legend(d,s)})}return a}function i5(a){var i=a.chart,t=po(i,nx);return wu()((0,A.pi)((0,A.pi)({},a),{chart:t})),a}function a5(a){var i=a.chart,t=a.options,s=t.animation;return(0,b.S6)(i.views,function(l){jm(l,s)}),a}function o5(a){return qi(qo,ax,n5,jM,Zp,Kl,Kf,yv,hu,i5,a5)(a)}var q4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="violin",t}return i.getDefaultOptions=function(){return NM},i.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(VM(this.options))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.getSchemaAdaptor=function(){return o5},i}(io),ip="$$yField$$",t_="$$diffField$$",dE="$$absoluteField$$",vE="$$isTotal$$",HM={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function WM(a){for(var i=[],t=0;t<a.length;t++){var s=a[t];if(s){var l=t===0?"M":"L";i.push([l,s.x,s.y])}}var f=a[0];return i.push(["L",f.x,f.y]),i.push(["z"]),i}function s5(a){return mn({},a.defaultStyle,a.style,{fill:a.color})}xi("interval","waterfall",{draw:function(a,i){var t=a.customInfo,s=a.points,l=a.nextPoints,f=i.addGroup(),d=this.parsePath(WM(s)),m=s5(a);f.addShape("path",{attrs:(0,A.pi)((0,A.pi)({},m),{path:d})});var x=(0,b.U2)(t,"leaderLine");if(x&&l){var T=[["M",s[2].x,s[2].y],["L",l[0].x,l[0].y]];s[2].y===l[1].y&&(T[1]=["L",l[1].x,l[1].y]),T=this.parsePath(T),f.addShape("path",{attrs:(0,A.pi)({path:T},x.style||{})})}return f}});function u5(a,i,t,s,l){var f,d=[];if((0,b.u4)(a,function(x,T){var O;wd(Bp.WARN,(0,b.hj)(T[t]),"".concat(T[t]," is not a valid number"));var D=(0,b.o8)(T[t])?null:T[t];return d.push((0,A.pi)((0,A.pi)({},T),(O={},O[s]=[x,x+D],O))),x+D},0),d.length&&l){var m=(0,b.U2)(d,[[a.length-1],s,[1]]);d.push((f={},f[i]=l.label,f[t]=m,f[s]=[0,m],f))}return d}function gE(a,i,t,s){var l=u5(a,i,t,ip,s);return l.map(function(f,d){var m;return(0,b.Kn)(f)?(0,A.pi)((0,A.pi)({},f),(m={},m[dE]=f[ip][1],m[t_]=f[ip][1]-f[ip][0],m[vE]=d===a.length,m)):f})}function l5(a){var i=a.options,t=i.locale,s=i.total,l=l1(t).get(["waterfall","total"]);return s&&typeof s.label!="string"&&l&&(a.options.total.label=l),a}function mE(a){var i=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.total,m=t.leaderLine,x=t.columnWidthRatio,T=t.waterfallStyle,O=t.risingFill,D=t.fallingFill,B=t.color,U=t.shape,J=t.customInfo;i.data(gE(s,l,f,d));var pe=B||function(gt){return(0,b.U2)(gt,[vE])?(0,b.U2)(d,["style","fill"],""):(0,b.U2)(gt,[ip,1])-(0,b.U2)(gt,[ip,0])>0?O:D},Ee=mn({},a,{options:{xField:l,yField:ip,seriesField:l,rawFields:[f,t_,vE,ip],widthRatio:x,interval:{style:T,shape:U||"waterfall",color:pe}}}),Ce=Wc(Ee).ext,st=Ce.geometry;return st.customInfo((0,A.pi)((0,A.pi)({},J),{leaderLine:m})),a}function ox(a){var i,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.meta,T=mn({},{alias:m},(0,b.U2)(x,m));return qi(Hu((i={},i[d]=l,i[m]=f,i[ip]=f,i),mn({},x,(t={},t[ip]=T,t[t_]=T,t[dE]=T,t))))(a)}function c5(a){var i=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?i.axis(f,!1):i.axis(f,s),l===!1?(i.axis(d,!1),i.axis(ip,!1)):(i.axis(d,l),i.axis(ip,l)),a}function f5(a){var i=a.chart,t=a.options,s=t.legend,l=t.total,f=t.risingFill,d=t.fallingFill,m=t.locale,x=l1(m);if(s===!1)i.legend(!1);else{var T=[{name:x.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:f}}},{name:x.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:d}}}];l&&T.push({name:l.label||"",value:"total",marker:{symbol:"square",style:mn({},{r:5},(0,b.U2)(l,"style"))}}),i.legend(mn({},{custom:!0,position:"top",items:T},s)),i.removeInteraction("legend-filter")}return a}function h5(a){var i=a.chart,t=a.options,s=t.label,l=t.labelMode,f=t.xField,d=rl(i,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,A._T)(s,["callback"]);d.label({fields:l==="absolute"?[dE,f]:[t_,f],callback:m,cfg:nl(x)})}return a}function p5(a){var i=a.chart,t=a.options,s=t.tooltip,l=t.xField,f=t.yField;if(s!==!1){i.tooltip((0,A.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[f]},s));var d=i.geometries[0];s!=null&&s.formatter?d.tooltip("".concat(l,"*").concat(f),s.formatter):d.tooltip(f)}else i.tooltip(!1);return a}function d5(a){return qi(l5,qo,mE,ox,c5,f5,p5,h5,Np,hu,As,wu())(a)}var K4=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="waterfall",t}return i.getDefaultOptions=function(){return HM},i.prototype.changeData=function(t){var s=this.options,l=s.xField,f=s.yField,d=s.total;this.updateOption({data:t}),this.chart.changeData(gE(t,l,f,d))},i.prototype.getSchemaAdaptor=function(){return d5},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i}(io),yE="color",GM=mn({},io.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",yE],formatter:function(a){return{name:a.text,value:a.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),$M={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function v5(a,i){return i=(0,b.f0)({},$M,i),g5(a,i)}function g5(a,i){var t=bE();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(x){(0,b.UM)(i[x])||t[x](i[x])}),t.words(a),i.imageMask&&t.createMask(i.imageMask);var s=t.start(),l=s._tags;l.forEach(function(x){x.x+=i.size[0]/2,x.y+=i.size[1]/2});var f=i.size,d=f[0],m=f[1];return l.push({text:"",value:0,x:0,y:0,opacity:0}),l.push({text:"",value:0,x:d,y:m,opacity:0}),l}var _E=Math.PI/180,c0=64,r_=2048;function XM(a){return a.text}function Q4(){return"serif"}function m5(){return"normal"}function y5(a){return a.value}function _5(){return~~(Math.random()*2)*90}function x5(){return 1}function YM(a,i,t,s){if(!i.sprite){var l=a.context,f=a.ratio;l.clearRect(0,0,(c0<<5)/f,r_/f);var d=0,m=0,x=0,T=t.length;for(--s;++s<T;){i=t[s],l.save(),l.font=i.style+" "+i.weight+" "+~~((i.size+1)/f)+"px "+i.font;var O=l.measureText(i.text+"m").width*f,D=i.size<<1;if(i.rotate){var B=Math.sin(i.rotate*_E),U=Math.cos(i.rotate*_E),J=O*U,pe=O*B,Ee=D*U,Ce=D*B;O=Math.max(Math.abs(J+Ce),Math.abs(J-Ce))+31>>5<<5,D=~~Math.max(Math.abs(pe+Ee),Math.abs(pe-Ee))}else O=O+31>>5<<5;if(D>x&&(x=D),d+O>=c0<<5&&(d=0,m+=x,x=0),m+D>=r_)break;l.translate((d+(O>>1))/f,(m+(D>>1))/f),i.rotate&&l.rotate(i.rotate*_E),l.fillText(i.text,0,0),i.padding&&(l.lineWidth=2*i.padding,l.strokeText(i.text,0,0)),l.restore(),i.width=O,i.height=D,i.xoff=d,i.yoff=m,i.x1=O>>1,i.y1=D>>1,i.x0=-i.x1,i.y0=-i.y1,i.hasText=!0,d+=O}for(var st=l.getImageData(0,0,(c0<<5)/f,r_/f).data,gt=[];--s>=0;)if(i=t[s],!!i.hasText){for(var O=i.width,bt=O>>5,D=i.y1-i.y0,Ft=0;Ft<D*bt;Ft++)gt[Ft]=0;if(d=i.xoff,d==null)return;m=i.yoff;for(var xr=0,Fr=-1,$r=0;$r<D;$r++){for(var Ft=0;Ft<O;Ft++){var yn=bt*$r+(Ft>>5),cn=st[(m+$r)*(c0<<5)+(d+Ft)<<2]?1<<31-Ft%32:0;gt[yn]|=cn,xr|=cn}xr?Fr=$r:(i.y0++,D--,$r--,m++)}i.y1=i.y0+Fr,i.sprite=gt.slice(0,(i.y1-i.y0)*bt)}}}function b5(a,i,t){t>>=5;for(var s=a.sprite,l=a.width>>5,f=a.x-(l<<4),d=f&127,m=32-d,x=a.y1-a.y0,T=(a.y+a.y0)*t+(f>>5),O,D=0;D<x;D++){O=0;for(var B=0;B<=l;B++)if((O<<m|(B<l?(O=s[D*l+B])>>>d:0))&i[T+B])return!0;T+=t}return!1}function S5(a,i){var t=a[0],s=a[1];i.x+i.x0<t.x&&(t.x=i.x+i.x0),i.y+i.y0<t.y&&(t.y=i.y+i.y0),i.x+i.x1>s.x&&(s.x=i.x+i.x1),i.y+i.y1>s.y&&(s.y=i.y+i.y1)}function E5(a,i){return a.x+a.x1>i[0].x&&a.x+a.x0<i[1].x&&a.y+a.y1>i[0].y&&a.y+a.y0<i[1].y}function qM(a){var i=a[0]/a[1];return function(t){return[i*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function KM(a){var i=4,t=i*a[0]/a[1],s=0,l=0;return function(f){var d=f<0?-1:1;switch(Math.sqrt(1+4*d*f)-d&3){case 0:s+=t;break;case 1:l+=i;break;case 2:s-=t;break;default:l-=i;break}return[s,l]}}function sx(a){for(var i=[],t=-1;++t<a;)i[t]=0;return i}function xE(){return document.createElement("canvas")}function Tc(a){return(0,b.mf)(a)?a:function(){return a}}var ap={archimedean:qM,rectangular:KM};function bE(){var a=[256,256],i=Q4,t=y5,s=m5,l=_5,f=x5,d=qM,m=Math.random,x=[],T=1/0,O=XM,D=m5,B=xE,U={};U.start=function(){var Ee=a[0],Ce=a[1],st=J(B()),gt=U.board?U.board:sx((a[0]>>5)*a[1]),bt=x.length,Ft=[],xr=x.map(function(cn,Bn,hi){return cn.text=O.call(this,cn,Bn,hi),cn.font=i.call(this,cn,Bn,hi),cn.style=D.call(this,cn,Bn,hi),cn.weight=s.call(this,cn,Bn,hi),cn.rotate=l.call(this,cn,Bn,hi),cn.size=~~t.call(this,cn,Bn,hi),cn.padding=f.call(this,cn,Bn,hi),cn}).sort(function(cn,Bn){return Bn.size-cn.size}),Fr=-1,$r=U.board?[{x:0,y:0},{x:Ee,y:Ce}]:null;yn();function yn(){for(var cn=Date.now();Date.now()-cn<T&&++Fr<bt;){var Bn=xr[Fr];Bn.x=Ee*(m()+.5)>>1,Bn.y=Ce*(m()+.5)>>1,YM(st,Bn,xr,Fr),Bn.hasText&&pe(gt,Bn,$r)&&(Ft.push(Bn),$r?U.hasImage||S5($r,Bn):$r=[{x:Bn.x+Bn.x0,y:Bn.y+Bn.y0},{x:Bn.x+Bn.x1,y:Bn.y+Bn.y1}],Bn.x-=a[0]>>1,Bn.y-=a[1]>>1)}U._tags=Ft,U._bounds=$r}return U};function J(Ee){Ee.width=Ee.height=1;var Ce=Math.sqrt(Ee.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);Ee.width=(c0<<5)/Ce,Ee.height=r_/Ce;var st=Ee.getContext("2d",{willReadFrequently:!0});return st.fillStyle=st.strokeStyle="red",st.textAlign="center",{context:st,ratio:Ce}}function pe(Ee,Ce,st){for(var gt=Ce.x,bt=Ce.y,Ft=Math.sqrt(a[0]*a[0]+a[1]*a[1]),xr=d(a),Fr=m()<.5?1:-1,$r,yn=-Fr,cn,Bn;($r=xr(yn+=Fr))&&(cn=~~$r[0],Bn=~~$r[1],!(Math.min(Math.abs(cn),Math.abs(Bn))>=Ft));)if(Ce.x=gt+cn,Ce.y=bt+Bn,!(Ce.x+Ce.x0<0||Ce.y+Ce.y0<0||Ce.x+Ce.x1>a[0]||Ce.y+Ce.y1>a[1])&&(!st||!b5(Ce,Ee,a[0]))&&(!st||E5(Ce,st))){for(var hi=Ce.sprite,Hi=Ce.width>>5,aa=a[0]>>5,Qa=Ce.x-(Hi<<4),Hn=Qa&127,Fi=32-Hn,na=Ce.y1-Ce.y0,zi=void 0,gi=(Ce.y+Ce.y0)*aa+(Qa>>5),La=0;La<na;La++){zi=0;for(var So=0;So<=Hi;So++)Ee[gi+So]|=zi<<Fi|(So<Hi?(zi=hi[La*Hi+So])>>>Hn:0);gi+=aa}return delete Ce.sprite,!0}return!1}return U.createMask=function(Ee){var Ce=document.createElement("canvas"),st=a[0],gt=a[1];if(!(!st||!gt)){var bt=st>>5,Ft=sx((st>>5)*gt);Ce.width=st,Ce.height=gt;var xr=Ce.getContext("2d");xr.drawImage(Ee,0,0,Ee.width,Ee.height,0,0,st,gt);for(var Fr=xr.getImageData(0,0,st,gt).data,$r=0;$r<gt;$r++)for(var yn=0;yn<st;yn++){var cn=bt*$r+(yn>>5),Bn=$r*st+yn<<2,hi=Fr[Bn]>=250&&Fr[Bn+1]>=250&&Fr[Bn+2]>=250,Hi=hi?1<<31-yn%32:0;Ft[cn]|=Hi}U.board=Ft,U.hasImage=!0}},U.timeInterval=function(Ee){T=Ee==null?1/0:Ee},U.words=function(Ee){x=Ee},U.size=function(Ee){a=[+Ee[0],+Ee[1]]},U.font=function(Ee){i=Tc(Ee)},U.fontWeight=function(Ee){s=Tc(Ee)},U.rotate=function(Ee){l=Tc(Ee)},U.spiral=function(Ee){d=ap[Ee]||Ee},U.fontSize=function(Ee){t=Tc(Ee)},U.padding=function(Ee){f=Tc(Ee)},U.random=function(Ee){m=Tc(Ee)},U}function ux(a){var i=a.options,t=a.chart,s=t,l=s.width,f=s.height,d=s.padding,m=s.appendPadding,x=s.ele,T=i.data,O=i.imageMask,D=i.wordField,B=i.weightField,U=i.colorField,J=i.wordStyle,pe=i.timeInterval,Ee=i.random,Ce=i.spiral,st=i.autoFit,gt=st===void 0?!0:st,bt=i.placementStrategy;if(!T||!T.length)return[];var Ft=J.fontFamily,xr=J.fontWeight,Fr=J.padding,$r=J.fontSize,yn=T5(T,B),cn=[eR(yn),ku(yn)],Bn=T.map(function(aa){return{text:aa[D],value:aa[B],color:aa[U],datum:aa}}),hi={imageMask:O,font:Ft,fontSize:C5($r,cn),fontWeight:xr,size:QM({width:l,height:f,padding:d,appendPadding:m,autoFit:gt,container:x}),padding:Fr,timeInterval:pe,random:Ee,spiral:Ce,rotate:JM(i)};if((0,b.mf)(bt)){var Hi=Bn.map(function(aa,Qa,Hn){return(0,A.pi)((0,A.pi)((0,A.pi)({},aa),{hasText:!!aa.text,font:Tc(hi.font)(aa,Qa,Hn),weight:Tc(hi.fontWeight)(aa,Qa,Hn),rotate:Tc(hi.rotate)(aa,Qa,Hn),size:Tc(hi.fontSize)(aa,Qa,Hn),style:"normal"}),bt.call(t,aa,Qa,Hn))});return Hi.push({text:"",value:0,x:0,y:0,opacity:0}),Hi.push({text:"",value:0,x:hi.size[0],y:hi.size[1],opacity:0}),Hi}return v5(Bn,hi)}function QM(a){var i=a.width,t=a.height,s=a.container,l=a.autoFit,f=a.padding,d=a.appendPadding;if(l){var m=dC(s);i=m.width,t=m.height}i=i||400,t=t||400;var x=w5({padding:f,appendPadding:d}),T=x[0],O=x[1],D=x[2],B=x[3],U=[i-(B+O),t-(T+D)];return U}function w5(a){var i=$g(a.padding),t=$g(a.appendPadding),s=i[0]+t[0],l=i[1]+t[1],f=i[2]+t[2],d=i[3]+t[3];return[s,l,f,d]}function ag(a){return new Promise(function(i,t){if(a instanceof HTMLImageElement){i(a);return}if((0,b.HD)(a)){var s=new Image;s.crossOrigin="anonymous",s.src=a,s.onload=function(){i(s)},s.onerror=function(){wd(Bp.ERROR,!1,"image %s load failed !!!",a),t()};return}wd(Bp.WARN,a===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function C5(a,i){if((0,b.mf)(a))return a;if((0,b.kJ)(a)){var t=a[0],s=a[1];if(!i)return function(){return(s+t)/2};var l=i[0],f=i[1];return f===l?function(){return(s+t)/2}:function(m){var x=m.value;return(s-t)/(f-l)*(x-l)+t}}return function(){return a}}function T5(a,i){return a.map(function(t){return t[i]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function JM(a){var i=A5(a),t=i.rotation,s=i.rotationSteps;if(!(0,b.kJ)(t))return t;var l=t[0],f=t[1],d=s===1?0:(f-l)/(s-1);return function(){return f===l?f:Math.floor(Math.random()*s)*d}}function A5(a){var i=a.wordStyle.rotationSteps;return i<1&&(wd(Bp.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),i=1),{rotation:a.wordStyle.rotation,rotationSteps:i}}function eR(a){return Math.min.apply(Math,a)}function ku(a){return Math.max.apply(Math,a)}function lx(a){var i=a.chart,t=a.options,s=t.colorField,l=t.color,f=ux(a);i.data(f);var d=mn({},a,{options:{xField:"x",yField:"y",seriesField:s&&yE,rawFields:(0,b.mf)(l)&&(0,A.ev)((0,A.ev)([],(0,b.U2)(t,"rawFields",[]),!0),["datum"],!1),point:{color:l,shape:"word-cloud"}}}),m=Eh(d).ext;return m.geometry.label(!1),i.coordinate().reflect("y"),i.axis(!1),a}function is(a){return qi(Hu({x:{nice:!1},y:{nice:!1}}))(a)}function M5(a){var i=a.chart,t=a.options,s=t.legend,l=t.colorField;return s===!1?i.legend(!1):l&&i.legend(yE,s),a}function J4(a){qi(lx,is,Kl,M5,hu,As,qo,Np)(a)}xi("point","word-cloud",{draw:function(a,i){var t=a.x,s=a.y,l=i.addShape("text",{attrs:(0,A.pi)((0,A.pi)({},e6(a)),{x:t,y:s})}),f=a.data.rotate;return typeof f=="number"&&uc.rotate(l,f*Math.PI/180),l}});function e6(a){return{fontSize:a.data.size,text:a.data.text,textAlign:"center",fontFamily:a.data.font,fontWeight:a.data.weight,fill:a.color||a.defaultStyle.stroke,textBaseline:"alphabetic"}}var A8=function(a){(0,A.ZT)(i,a);function i(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="word-cloud",t}return i.getDefaultOptions=function(){return GM},i.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(ux({chart:this.chart,options:this.options}))},i.prototype.getDefaultOptions=function(){return i.getDefaultOptions()},i.prototype.render=function(){var t=this;return new Promise(function(s){var l=t.options.imageMask;if(!l){a.prototype.render.call(t),s();return}var f=function(d){t.options=(0,A.pi)((0,A.pi)({},t.options),{imageMask:d||null}),a.prototype.render.call(t),s()};ag(l).then(f).catch(f)})},i.prototype.getSchemaAdaptor=function(){return J4},i.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){a.prototype.triggerResize.call(t)}))},i}(io),M8=function(a){(0,A.ZT)(i,a);function i(t,s,l,f){var d=a.call(this,t,mn({},f,s))||this;return d.type="g2-plot",d.defaultOptions=f,d.adaptor=l,d}return i.prototype.getDefaultOptions=function(){return this.defaultOptions},i.prototype.getSchemaAdaptor=function(){return this.adaptor},i}(io),R8="2.4.31";SC("en-US",JO),SC("zh-CN",eP);var I8={scale:Hu,legend:Xg,tooltip:Kl,annotation:wu,interaction:hu,theme:qo,animation:As}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(vt){try{let Q=function(){j||(j=!0,w())},ye=function(){try{X.documentElement.doScroll("left")}catch(se){return void setTimeout(ye,50)}Q()};var Y=Q,re=ye,k=(k=document.getElementsByTagName("script"))[k.length-1],N=k.getAttribute("data-injectcss"),k=k.getAttribute("data-disable-injectsvg");if(!k){var H,W,w,X,j,ee=function(ne,$){$.parentNode.insertBefore(ne,$)};if(N&&!vt.__iconfont__svg__cssinject__){vt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(se){console&&console.log(se)}}H=function(){var ne,$=document.createElement("div");$.innerHTML=vt._iconfont_svg_string_3580659,($=$.getElementsByTagName("svg")[0])&&($.setAttribute("aria-hidden","true"),$.style.position="absolute",$.style.width=0,$.style.height=0,$.style.overflow="hidden",$=$,(ne=document.body).firstChild?ee($,ne.firstChild):ne.appendChild($))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(H,0):(W=function(){document.removeEventListener("DOMContentLoaded",W,!1),H()},document.addEventListener("DOMContentLoaded",W,!1)):document.attachEvent&&(w=H,X=vt.document,j=!1,ye(),X.onreadystatechange=function(){X.readyState=="complete"&&(X.onreadystatechange=null,Q())})}}catch(Q){}}(window)},36556:function(vt){(function(N,k){vt.exports=k()})(this,function(){"use strict";var N=function(ot){return ot instanceof Uint8Array||ot instanceof Uint16Array||ot instanceof Uint32Array||ot instanceof Int8Array||ot instanceof Int16Array||ot instanceof Int32Array||ot instanceof Float32Array||ot instanceof Float64Array||ot instanceof Uint8ClampedArray},k=function(ot,tr){for(var Ar=Object.keys(tr),vn=0;vn<Ar.length;++vn)ot[Ar[vn]]=tr[Ar[vn]];return ot},H=`
`;function W(ot){return typeof atob!="undefined"?atob(ot):"base64:"+ot}function w(ot){var tr=new Error("(regl) "+ot);throw console.error(tr),tr}function X(ot,tr){ot||w(tr)}function j(ot){return ot?": "+ot:""}function ee(ot,tr,Ar){ot in tr||w("unknown parameter ("+ot+")"+j(Ar)+". possible values: "+Object.keys(tr).join())}function Y(ot,tr){N(ot)||w("invalid parameter type"+j(tr)+". must be a typed array")}function re(ot,tr){switch(tr){case"number":return typeof ot=="number";case"object":return typeof ot=="object";case"string":return typeof ot=="string";case"boolean":return typeof ot=="boolean";case"function":return typeof ot=="function";case"undefined":return typeof ot=="undefined";case"symbol":return typeof ot=="symbol"}}function Q(ot,tr,Ar){re(ot,tr)||w("invalid parameter type"+j(Ar)+". expected "+tr+", got "+typeof ot)}function ye(ot,tr){ot>=0&&(ot|0)===ot||w("invalid parameter type, ("+ot+")"+j(tr)+". must be a nonnegative integer")}function se(ot,tr,Ar){tr.indexOf(ot)<0&&w("invalid value"+j(Ar)+". must be one of: "+tr)}var ne=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function $(ot){Object.keys(ot).forEach(function(tr){ne.indexOf(tr)<0&&w('invalid regl constructor argument "'+tr+'". must be one of '+ne)})}function A(ot,tr){for(ot=ot+"";ot.length<tr;)ot=" "+ot;return ot}function b(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function te(ot,tr){this.number=ot,this.line=tr,this.errors=[]}function le(ot,tr,Ar){this.file=ot,this.line=tr,this.message=Ar}function Ae(){var ot=new Error,tr=(ot.stack||ot).toString(),Ar=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(tr);if(Ar)return Ar[1];var vn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(tr);return vn?vn[1]:"unknown"}function De(){var ot=new Error,tr=(ot.stack||ot).toString(),Ar=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(tr);if(Ar)return Ar[1];var vn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(tr);return vn?vn[1]:"unknown"}function Ne(ot,tr){var Ar=ot.split(`
`),vn=1,kn=0,fn={unknown:new b,0:new b};fn.unknown.name=fn[0].name=tr||Ae(),fn.unknown.lines.push(new te(0,""));for(var un=0;un<Ar.length;++un){var ai=Ar[un],Wn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ai);if(Wn)switch(Wn[1]){case"line":var vi=/(\d+)(\s+\d+)?/.exec(Wn[2]);vi&&(vn=vi[1]|0,vi[2]&&(kn=vi[2]|0,kn in fn||(fn[kn]=new b)));break;case"define":var oi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Wn[2]);oi&&(fn[kn].name=oi[1]?W(oi[2]):oi[2]);break}fn[kn].lines.push(new te(vn++,ai))}return Object.keys(fn).forEach(function(fi){var bi=fn[fi];bi.lines.forEach(function(Mn){bi.index[Mn.number]=Mn})}),fn}function Te(ot){var tr=[];return ot.split(`
`).forEach(function(Ar){if(!(Ar.length<5)){var vn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ar);vn?tr.push(new le(vn[1]|0,vn[2]|0,vn[3].trim())):Ar.length>0&&tr.push(new le("unknown",0,Ar))}}),tr}function We(ot,tr){tr.forEach(function(Ar){var vn=ot[Ar.file];if(vn){var kn=vn.index[Ar.line];if(kn){kn.errors.push(Ar),vn.hasErrors=!0;return}}ot.unknown.hasErrors=!0,ot.unknown.lines[0].errors.push(Ar)})}function _e(ot,tr,Ar,vn,kn){if(!ot.getShaderParameter(tr,ot.COMPILE_STATUS)){var fn=ot.getShaderInfoLog(tr),un=vn===ot.FRAGMENT_SHADER?"fragment":"vertex";tt(Ar,"string",un+" shader source must be a string",kn);var ai=Ne(Ar,kn),Wn=Te(fn);We(ai,Wn),Object.keys(ai).forEach(function(vi){var oi=ai[vi];if(!oi.hasErrors)return;var fi=[""],bi=[""];function Mn(mi,Qr){fi.push(mi),bi.push(Qr||"")}Mn("file number "+vi+": "+oi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),oi.lines.forEach(function(mi){if(mi.errors.length>0){Mn(A(mi.number,4)+"|  ","background-color:yellow; font-weight:bold"),Mn(mi.line+H,"color:red; background-color:yellow; font-weight:bold");var Qr=0;mi.errors.forEach(function(En){var si=En.message,Ti=/^\s*'(.*)'\s*:\s*(.*)$/.exec(si);if(Ti){var Kr=Ti[1];switch(si=Ti[2],Kr){case"assign":Kr="=";break}Qr=Math.max(mi.line.indexOf(Kr,Qr),0)}else Qr=0;Mn(A("| ",6)),Mn(A("^^^",Qr+3)+H,"font-weight:bold"),Mn(A("| ",6)),Mn(si+H,"font-weight:bold")}),Mn(A("| ",6)+H)}else Mn(A(mi.number,4)+"|  "),Mn(mi.line+H,"color:red")}),typeof document!="undefined"&&!window.chrome?(bi[0]=fi.join("%c"),console.log.apply(console,bi)):console.log(fi.join(""))}),X.raise("Error compiling "+un+" shader, "+ai[0].name)}}function we(ot,tr,Ar,vn,kn){if(!ot.getProgramParameter(tr,ot.LINK_STATUS)){var fn=ot.getProgramInfoLog(tr),un=Ne(Ar,kn),ai=Ne(vn,kn),Wn='Error linking program with vertex shader, "'+ai[0].name+'", and fragment shader "'+un[0].name+'"';typeof document!="undefined"?console.log("%c"+Wn+H+"%c"+fn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Wn+H+fn),X.raise(Wn)}}function Re(ot){ot._commandRef=Ae()}function ze(ot,tr,Ar,vn){Re(ot);function kn(Wn){return Wn?vn.id(Wn):0}ot._fragId=kn(ot.static.frag),ot._vertId=kn(ot.static.vert);function fn(Wn,vi){Object.keys(vi).forEach(function(oi){Wn[vn.id(oi)]=!0})}var un=ot._uniformSet={};fn(un,tr.static),fn(un,tr.dynamic);var ai=ot._attributeSet={};fn(ai,Ar.static),fn(ai,Ar.dynamic),ot._hasCount="count"in ot.static||"count"in ot.dynamic||"elements"in ot.static||"elements"in ot.dynamic}function Ge(ot,tr){var Ar=De();w(ot+" in command "+(tr||Ae())+(Ar==="unknown"?"":" called from "+Ar))}function yt(ot,tr,Ar){ot||Ge(tr,Ar||Ae())}function ke(ot,tr,Ar,vn){ot in tr||Ge("unknown parameter ("+ot+")"+j(Ar)+". possible values: "+Object.keys(tr).join(),vn||Ae())}function tt(ot,tr,Ar,vn){re(ot,tr)||Ge("invalid parameter type"+j(Ar)+". expected "+tr+", got "+typeof ot,vn||Ae())}function ae(ot){ot()}function Ke(ot,tr,Ar){ot.texture?se(ot.texture._texture.internalformat,tr,"unsupported texture format for attachment"):se(ot.renderbuffer._renderbuffer.format,Ar,"unsupported renderbuffer format for attachment")}var he=33071,Pe=9728,lt=9984,He=9985,Ue=9986,Qe=9987,Se=5120,xe=5121,rt=5122,Je=5123,dt=5124,Bt=5125,Ye=5126,Xe=32819,Le=32820,je=33635,at=34042,Me=36193,Ze={};Ze[Se]=Ze[xe]=1,Ze[rt]=Ze[Je]=Ze[Me]=Ze[je]=Ze[Xe]=Ze[Le]=2,Ze[dt]=Ze[Bt]=Ze[Ye]=Ze[at]=4;function _t(ot,tr){return ot===Le||ot===Xe||ot===je?2:ot===at?4:Ze[ot]*tr}function Mt(ot){return!(ot&ot-1)&&!!ot}function ir(ot,tr,Ar){var vn,kn=tr.width,fn=tr.height,un=tr.channels;X(kn>0&&kn<=Ar.maxTextureSize&&fn>0&&fn<=Ar.maxTextureSize,"invalid texture shape"),(ot.wrapS!==he||ot.wrapT!==he)&&X(Mt(kn)&&Mt(fn),"incompatible wrap mode for texture, both width and height must be power of 2"),tr.mipmask===1?kn!==1&&fn!==1&&X(ot.minFilter!==lt&&ot.minFilter!==Ue&&ot.minFilter!==He&&ot.minFilter!==Qe,"min filter requires mipmap"):(X(Mt(kn)&&Mt(fn),"texture must be a square power of 2 to support mipmapping"),X(tr.mipmask===(kn<<1)-1,"missing or incomplete mipmap data")),tr.type===Ye&&(Ar.extensions.indexOf("oes_texture_float_linear")<0&&X(ot.minFilter===Pe&&ot.magFilter===Pe,"filter not supported, must enable oes_texture_float_linear"),X(!ot.genMipmaps,"mipmap generation not supported with float textures"));var ai=tr.images;for(vn=0;vn<16;++vn)if(ai[vn]){var Wn=kn>>vn,vi=fn>>vn;X(tr.mipmask&1<<vn,"missing mipmap data");var oi=ai[vn];if(X(oi.width===Wn&&oi.height===vi,"invalid shape for mip images"),X(oi.format===tr.format&&oi.internalformat===tr.internalformat&&oi.type===tr.type,"incompatible type for mip image"),!oi.compressed)if(oi.data){var fi=Math.ceil(_t(oi.type,un)*Wn/oi.unpackAlignment)*oi.unpackAlignment;X(oi.data.byteLength===fi*vi,"invalid data for image, buffer size is inconsistent with image format")}else oi.element||oi.copy}else ot.genMipmaps||X((tr.mipmask&1<<vn)===0,"extra mipmap data");tr.compressed&&X(!ot.genMipmaps,"mipmap generation for compressed images not supported")}function Tr(ot,tr,Ar,vn){var kn=ot.width,fn=ot.height,un=ot.channels;X(kn>0&&kn<=vn.maxTextureSize&&fn>0&&fn<=vn.maxTextureSize,"invalid texture shape"),X(kn===fn,"cube map must be square"),X(tr.wrapS===he&&tr.wrapT===he,"wrap mode not supported by cube map");for(var ai=0;ai<Ar.length;++ai){var Wn=Ar[ai];X(Wn.width===kn&&Wn.height===fn,"inconsistent cube map face shape"),tr.genMipmaps&&(X(!Wn.compressed,"can not generate mipmap for compressed textures"),X(Wn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var vi=Wn.images,oi=0;oi<16;++oi){var fi=vi[oi];if(fi){var bi=kn>>oi,Mn=fn>>oi;X(Wn.mipmask&1<<oi,"missing mipmap data"),X(fi.width===bi&&fi.height===Mn,"invalid shape for mip images"),X(fi.format===ot.format&&fi.internalformat===ot.internalformat&&fi.type===ot.type,"incompatible type for mip image"),fi.compressed||(fi.data?X(fi.data.byteLength===bi*Mn*Math.max(_t(fi.type,un),fi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):fi.element||fi.copy)}}}}var et=k(X,{optional:ae,raise:w,commandRaise:Ge,command:yt,parameter:ee,commandParameter:ke,constructor:$,type:Q,commandType:tt,isTypedArray:Y,nni:ye,oneOf:se,shaderError:_e,linkError:we,callSite:De,saveCommandRef:Re,saveDrawInfo:ze,framebufferFormat:Ke,guessCommand:Ae,texture2D:ir,textureCube:Tr}),en=0,Xr=0;function Sr(ot,tr){this.id=en++,this.type=ot,this.data=tr}function pt(ot){return ot.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ut(ot){if(ot.length===0)return[];var tr=ot.charAt(0),Ar=ot.charAt(ot.length-1);if(ot.length>1&&tr===Ar&&(tr==='"'||tr==="'"))return['"'+pt(ot.substr(1,ot.length-2))+'"'];var vn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ot);if(vn)return Ut(ot.substr(0,vn.index)).concat(Ut(vn[1])).concat(Ut(ot.substr(vn.index+vn[0].length)));var kn=ot.split(".");if(kn.length===1)return['"'+pt(ot)+'"'];for(var fn=[],un=0;un<kn.length;++un)fn=fn.concat(Ut(kn[un]));return fn}function Gt(ot){return"["+Ut(ot).join("][")+"]"}function Tt(ot,tr){return new Sr(ot,Gt(tr+""))}function qt(ot){return typeof ot=="function"&&!ot._reglType||ot instanceof Sr}function fr(ot,tr){return typeof ot=="function"?new Sr(Xr,ot):ot}var hr={DynamicVariable:Sr,define:Tt,isDynamic:qt,unbox:fr,accessor:Gt},Er={next:typeof requestAnimationFrame=="function"?function(ot){return requestAnimationFrame(ot)}:function(ot){return setTimeout(ot,16)},cancel:typeof cancelAnimationFrame=="function"?function(ot){return cancelAnimationFrame(ot)}:clearTimeout},Ir=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ue(){var ot={"":0},tr=[""];return{id:function(Ar){var vn=ot[Ar];return vn||(vn=ot[Ar]=tr.length,tr.push(Ar),vn)},str:function(Ar){return tr[Ar]}}}function G(ot,tr,Ar){var vn=document.createElement("canvas");k(vn.style,{border:0,margin:0,padding:0,top:0,left:0}),ot.appendChild(vn),ot===document.body&&(vn.style.position="absolute",k(ot.style,{margin:0,padding:0}));function kn(){var ai=window.innerWidth,Wn=window.innerHeight;if(ot!==document.body){var vi=ot.getBoundingClientRect();ai=vi.right-vi.left,Wn=vi.bottom-vi.top}vn.width=Ar*ai,vn.height=Ar*Wn,k(vn.style,{width:ai+"px",height:Wn+"px"})}var fn;ot!==document.body&&typeof ResizeObserver=="function"?(fn=new ResizeObserver(function(){setTimeout(kn)}),fn.observe(ot)):window.addEventListener("resize",kn,!1);function un(){fn?fn.disconnect():window.removeEventListener("resize",kn),ot.removeChild(vn)}return kn(),{canvas:vn,onDestroy:un}}function oe(ot,tr){function Ar(vn){try{return ot.getContext(vn,tr)}catch(kn){return null}}return Ar("webgl")||Ar("experimental-webgl")||Ar("webgl-experimental")}function Ie(ot){return typeof ot.nodeName=="string"&&typeof ot.appendChild=="function"&&typeof ot.getBoundingClientRect=="function"}function qe(ot){return typeof ot.drawArrays=="function"||typeof ot.drawElements=="function"}function At(ot){return typeof ot=="string"?ot.split():(et(Array.isArray(ot),"invalid extension array"),ot)}function rr(ot){return typeof ot=="string"?(et(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ot)):ot}function Zt(ot){var tr=ot||{},Ar,vn,kn,fn,un={},ai=[],Wn=[],vi=typeof window=="undefined"?1:window.devicePixelRatio,oi=!1,fi=function(mi){mi&&et.raise(mi)},bi=function(){};if(typeof tr=="string"?(et(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ar=document.querySelector(tr),et(Ar,"invalid query string for element")):typeof tr=="object"?Ie(tr)?Ar=tr:qe(tr)?(fn=tr,kn=fn.canvas):(et.constructor(tr),"gl"in tr?fn=tr.gl:"canvas"in tr?kn=rr(tr.canvas):"container"in tr&&(vn=rr(tr.container)),"attributes"in tr&&(un=tr.attributes,et.type(un,"object","invalid context attributes")),"extensions"in tr&&(ai=At(tr.extensions)),"optionalExtensions"in tr&&(Wn=At(tr.optionalExtensions)),"onDone"in tr&&(et.type(tr.onDone,"function","invalid or missing onDone callback"),fi=tr.onDone),"profile"in tr&&(oi=!!tr.profile),"pixelRatio"in tr&&(vi=+tr.pixelRatio,et(vi>0,"invalid pixel ratio"))):et.raise("invalid arguments to regl"),Ar&&(Ar.nodeName.toLowerCase()==="canvas"?kn=Ar:vn=Ar),!fn){if(!kn){et(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Mn=G(vn||document.body,fi,vi);if(!Mn)return null;kn=Mn.canvas,bi=Mn.onDestroy}un.premultipliedAlpha===void 0&&(un.premultipliedAlpha=!0),fn=oe(kn,un)}return fn?{gl:fn,canvas:kn,container:vn,extensions:ai,optionalExtensions:Wn,pixelRatio:vi,profile:oi,onDone:fi,onDestroy:bi}:(bi(),fi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function wt(ot,tr){var Ar={};function vn(un){et.type(un,"string","extension name must be string");var ai=un.toLowerCase(),Wn;try{Wn=Ar[ai]=ot.getExtension(ai)}catch(vi){}return!!Wn}for(var kn=0;kn<tr.extensions.length;++kn){var fn=tr.extensions[kn];if(!vn(fn))return tr.onDestroy(),tr.onDone('"'+fn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return tr.optionalExtensions.forEach(vn),{extensions:Ar,restore:function(){Object.keys(Ar).forEach(function(un){if(Ar[un]&&!vn(un))throw new Error("(regl): error restoring extension "+un)})}}}function Pt(ot,tr){for(var Ar=Array(ot),vn=0;vn<ot;++vn)Ar[vn]=tr(vn);return Ar}var ge=5120,ve=5121,Fe=5122,nt=5123,St=5124,$t=5125,vr=5126;function Rt(ot){for(var tr=16;tr<=1<<28;tr*=16)if(ot<=tr)return tr;return 0}function ct(ot){var tr,Ar;return tr=(ot>65535)<<4,ot>>>=tr,Ar=(ot>255)<<3,ot>>>=Ar,tr|=Ar,Ar=(ot>15)<<2,ot>>>=Ar,tr|=Ar,Ar=(ot>3)<<1,ot>>>=Ar,tr|=Ar,tr|ot>>1}function It(){var ot=Pt(8,function(){return[]});function tr(fn){var un=Rt(fn),ai=ot[ct(un)>>2];return ai.length>0?ai.pop():new ArrayBuffer(un)}function Ar(fn){ot[ct(fn.byteLength)>>2].push(fn)}function vn(fn,un){var ai=null;switch(fn){case ge:ai=new Int8Array(tr(un),0,un);break;case ve:ai=new Uint8Array(tr(un),0,un);break;case Fe:ai=new Int16Array(tr(2*un),0,un);break;case nt:ai=new Uint16Array(tr(2*un),0,un);break;case St:ai=new Int32Array(tr(4*un),0,un);break;case $t:ai=new Uint32Array(tr(4*un),0,un);break;case vr:ai=new Float32Array(tr(4*un),0,un);break;default:return null}return ai.length!==un?ai.subarray(0,un):ai}function kn(fn){Ar(fn.buffer)}return{alloc:tr,free:Ar,allocType:vn,freeType:kn}}var gr=It();gr.zero=It();var Br=3408,Nt=3410,wn=3411,ei=3412,ci=3413,ln=3414,ti=3415,$n=33901,ri=33902,oa=3379,yi=3386,ya=34921,Ya=36347,ha=36348,Fa=35661,Sa=35660,xs=34930,co=36349,Lo=34076,Za=34024,Kn=7936,Ci=7937,Ga=7938,Jo=35724,fo=34047,To=36063,lr=34852,Dt=3553,er=34067,kr=34069,tn=33984,In=6408,zn=5126,On=5121,Vi=36160,Bi=36053,Ja=36064,Ao=16384,fs=function(ot,tr){var Ar=1;tr.ext_texture_filter_anisotropic&&(Ar=ot.getParameter(fo));var vn=1,kn=1;tr.webgl_draw_buffers&&(vn=ot.getParameter(lr),kn=ot.getParameter(To));var fn=!!tr.oes_texture_float;if(fn){var un=ot.createTexture();ot.bindTexture(Dt,un),ot.texImage2D(Dt,0,In,1,1,0,In,zn,null);var ai=ot.createFramebuffer();if(ot.bindFramebuffer(Vi,ai),ot.framebufferTexture2D(Vi,Ja,Dt,un,0),ot.bindTexture(Dt,null),ot.checkFramebufferStatus(Vi)!==Bi)fn=!1;else{ot.viewport(0,0,1,1),ot.clearColor(1,0,0,1),ot.clear(Ao);var Wn=gr.allocType(zn,4);ot.readPixels(0,0,1,1,In,zn,Wn),ot.getError()?fn=!1:(ot.deleteFramebuffer(ai),ot.deleteTexture(un),fn=Wn[0]===1),gr.freeType(Wn)}}var vi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),oi=!0;if(!vi){var fi=ot.createTexture(),bi=gr.allocType(On,36);ot.activeTexture(tn),ot.bindTexture(er,fi),ot.texImage2D(kr,0,In,3,3,0,In,On,bi),gr.freeType(bi),ot.bindTexture(er,null),ot.deleteTexture(fi),oi=!ot.getError()}return{colorBits:[ot.getParameter(Nt),ot.getParameter(wn),ot.getParameter(ei),ot.getParameter(ci)],depthBits:ot.getParameter(ln),stencilBits:ot.getParameter(ti),subpixelBits:ot.getParameter(Br),extensions:Object.keys(tr).filter(function(Mn){return!!tr[Mn]}),maxAnisotropic:Ar,maxDrawbuffers:vn,maxColorAttachments:kn,pointSizeDims:ot.getParameter($n),lineWidthDims:ot.getParameter(ri),maxViewportDims:ot.getParameter(yi),maxCombinedTextureUnits:ot.getParameter(Fa),maxCubeMapSize:ot.getParameter(Lo),maxRenderbufferSize:ot.getParameter(Za),maxTextureUnits:ot.getParameter(xs),maxTextureSize:ot.getParameter(oa),maxAttributes:ot.getParameter(ya),maxVertexUniforms:ot.getParameter(Ya),maxVertexTextureUnits:ot.getParameter(Sa),maxVaryingVectors:ot.getParameter(ha),maxFragmentUniforms:ot.getParameter(co),glsl:ot.getParameter(Jo),renderer:ot.getParameter(Ci),vendor:ot.getParameter(Kn),version:ot.getParameter(Ga),readFloat:fn,npotTextureCube:oi}};function ko(ot){return!!ot&&typeof ot=="object"&&Array.isArray(ot.shape)&&Array.isArray(ot.stride)&&typeof ot.offset=="number"&&ot.shape.length===ot.stride.length&&(Array.isArray(ot.data)||N(ot.data))}var oo=function(ot){return Object.keys(ot).map(function(tr){return ot[tr]})},iu={shape:Yn,flatten:Cn};function Ko(ot,tr,Ar){for(var vn=0;vn<tr;++vn)Ar[vn]=ot[vn]}function jt(ot,tr,Ar,vn){for(var kn=0,fn=0;fn<tr;++fn)for(var un=ot[fn],ai=0;ai<Ar;++ai)vn[kn++]=un[ai]}function sr(ot,tr,Ar,vn,kn,fn){for(var un=fn,ai=0;ai<tr;++ai)for(var Wn=ot[ai],vi=0;vi<Ar;++vi)for(var oi=Wn[vi],fi=0;fi<vn;++fi)kn[un++]=oi[fi]}function Vr(ot,tr,Ar,vn,kn){for(var fn=1,un=Ar+1;un<tr.length;++un)fn*=tr[un];var ai=tr[Ar];if(tr.length-Ar===4){var Wn=tr[Ar+1],vi=tr[Ar+2],oi=tr[Ar+3];for(un=0;un<ai;++un)sr(ot[un],Wn,vi,oi,vn,kn),kn+=fn}else for(un=0;un<ai;++un)Vr(ot[un],tr,Ar+1,vn,kn),kn+=fn}function Cn(ot,tr,Ar,vn){var kn=1;if(tr.length)for(var fn=0;fn<tr.length;++fn)kn*=tr[fn];else kn=0;var un=vn||gr.allocType(Ar,kn);switch(tr.length){case 0:break;case 1:Ko(ot,tr[0],un);break;case 2:jt(ot,tr[0],tr[1],un);break;case 3:sr(ot,tr[0],tr[1],tr[2],un,0);break;default:Vr(ot,tr,0,un,0)}return un}function Yn(ot){for(var tr=[],Ar=ot;Ar.length;Ar=Ar[0])tr.push(Ar.length);return tr}var Wi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ho=5120,Gs=5122,Mo=5124,Fo=5121,Wu=5123,ff=5125,Jf=5126,eh=5126,du={int8:ho,int16:Gs,int32:Mo,uint8:Fo,uint16:Wu,uint32:ff,float:Jf,float32:eh},lc=35048,au=35040,Rl={dynamic:lc,stream:au,static:35044},cc=iu.flatten,bo=iu.shape,ec=35044,Ms=35040,Rs=5121,Rc=5126,Ic=[];Ic[5120]=1,Ic[5122]=2,Ic[5124]=4,Ic[5121]=1,Ic[5123]=2,Ic[5125]=4,Ic[5126]=4;function If(ot){return Wi[Object.prototype.toString.call(ot)]|0}function Ll(ot,tr){for(var Ar=0;Ar<tr.length;++Ar)ot[Ar]=tr[Ar]}function Fl(ot,tr,Ar,vn,kn,fn,un){for(var ai=0,Wn=0;Wn<Ar;++Wn)for(var vi=0;vi<vn;++vi)ot[ai++]=tr[kn*Wn+fn*vi+un]}function tc(ot,tr,Ar,vn){var kn=0,fn={};function un(Qr){this.id=kn++,this.buffer=ot.createBuffer(),this.type=Qr,this.usage=ec,this.byteLength=0,this.dimension=1,this.dtype=Rs,this.persistentData=null,Ar.profile&&(this.stats={size:0})}un.prototype.bind=function(){ot.bindBuffer(this.type,this.buffer)},un.prototype.destroy=function(){bi(this)};var ai=[];function Wn(Qr,En){var si=ai.pop();return si||(si=new un(Qr)),si.bind(),fi(si,En,Ms,0,1,!1),si}function vi(Qr){ai.push(Qr)}function oi(Qr,En,si){Qr.byteLength=En.byteLength,ot.bufferData(Qr.type,En,si)}function fi(Qr,En,si,Ti,Kr,Pi){var ni;if(Qr.usage=si,Array.isArray(En)){if(Qr.dtype=Ti||Rc,En.length>0){var Mi;if(Array.isArray(En[0])){ni=bo(En);for(var Un=1,Si=1;Si<ni.length;++Si)Un*=ni[Si];Qr.dimension=Un,Mi=cc(En,ni,Qr.dtype),oi(Qr,Mi,si),Pi?Qr.persistentData=Mi:gr.freeType(Mi)}else if(typeof En[0]=="number"){Qr.dimension=Kr;var ca=gr.allocType(Qr.dtype,En.length);Ll(ca,En),oi(Qr,ca,si),Pi?Qr.persistentData=ca:gr.freeType(ca)}else N(En[0])?(Qr.dimension=En[0].length,Qr.dtype=Ti||If(En[0])||Rc,Mi=cc(En,[En.length,En[0].length],Qr.dtype),oi(Qr,Mi,si),Pi?Qr.persistentData=Mi:gr.freeType(Mi)):et.raise("invalid buffer data")}}else if(N(En))Qr.dtype=Ti||If(En),Qr.dimension=Kr,oi(Qr,En,si),Pi&&(Qr.persistentData=new Uint8Array(new Uint8Array(En.buffer)));else if(ko(En)){ni=En.shape;var Ra=En.stride,Ai=En.offset,ii=0,Dn=0,ta=0,to=0;ni.length===1?(ii=ni[0],Dn=1,ta=Ra[0],to=0):ni.length===2?(ii=ni[0],Dn=ni[1],ta=Ra[0],to=Ra[1]):et.raise("invalid shape"),Qr.dtype=Ti||If(En.data)||Rc,Qr.dimension=Dn;var ki=gr.allocType(Qr.dtype,ii*Dn);Fl(ki,En.data,ii,Dn,ta,to,Ai),oi(Qr,ki,si),Pi?Qr.persistentData=ki:gr.freeType(ki)}else En instanceof ArrayBuffer?(Qr.dtype=Rs,Qr.dimension=Kr,oi(Qr,En,si),Pi&&(Qr.persistentData=new Uint8Array(new Uint8Array(En)))):et.raise("invalid buffer data")}function bi(Qr){tr.bufferCount--,vn(Qr);var En=Qr.buffer;et(En,"buffer must not be deleted already"),ot.deleteBuffer(En),Qr.buffer=null,delete fn[Qr.id]}function Mn(Qr,En,si,Ti){tr.bufferCount++;var Kr=new un(En);fn[Kr.id]=Kr;function Pi(Un){var Si=ec,ca=null,Ra=0,Ai=0,ii=1;return Array.isArray(Un)||N(Un)||ko(Un)||Un instanceof ArrayBuffer?ca=Un:typeof Un=="number"?Ra=Un|0:Un&&(et.type(Un,"object","buffer arguments must be an object, a number or an array"),"data"in Un&&(et(ca===null||Array.isArray(ca)||N(ca)||ko(ca),"invalid data for buffer"),ca=Un.data),"usage"in Un&&(et.parameter(Un.usage,Rl,"invalid buffer usage"),Si=Rl[Un.usage]),"type"in Un&&(et.parameter(Un.type,du,"invalid buffer type"),Ai=du[Un.type]),"dimension"in Un&&(et.type(Un.dimension,"number","invalid dimension"),ii=Un.dimension|0),"length"in Un&&(et.nni(Ra,"buffer length must be a nonnegative integer"),Ra=Un.length|0)),Kr.bind(),ca?fi(Kr,ca,Si,Ai,ii,Ti):(Ra&&ot.bufferData(Kr.type,Ra,Si),Kr.dtype=Ai||Rs,Kr.usage=Si,Kr.dimension=ii,Kr.byteLength=Ra),Ar.profile&&(Kr.stats.size=Kr.byteLength*Ic[Kr.dtype]),Pi}function ni(Un,Si){et(Si+Un.byteLength<=Kr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Un.byteLength+" starting from offset "+Si+" to a buffer of size "+Kr.byteLength),ot.bufferSubData(Kr.type,Si,Un)}function Mi(Un,Si){var ca=(Si||0)|0,Ra;if(Kr.bind(),N(Un)||Un instanceof ArrayBuffer)ni(Un,ca);else if(Array.isArray(Un)){if(Un.length>0)if(typeof Un[0]=="number"){var Ai=gr.allocType(Kr.dtype,Un.length);Ll(Ai,Un),ni(Ai,ca),gr.freeType(Ai)}else if(Array.isArray(Un[0])||N(Un[0])){Ra=bo(Un);var ii=cc(Un,Ra,Kr.dtype);ni(ii,ca),gr.freeType(ii)}else et.raise("invalid buffer data")}else if(ko(Un)){Ra=Un.shape;var Dn=Un.stride,ta=0,to=0,ki=0,Ka=0;Ra.length===1?(ta=Ra[0],to=1,ki=Dn[0],Ka=0):Ra.length===2?(ta=Ra[0],to=Ra[1],ki=Dn[0],Ka=Dn[1]):et.raise("invalid shape");var ka=Array.isArray(Un.data)?Kr.dtype:If(Un.data),_a=gr.allocType(ka,ta*to);Fl(_a,Un.data,ta,to,ki,Ka,Un.offset),ni(_a,ca),gr.freeType(_a)}else et.raise("invalid data for buffer subdata");return Pi}return si||Pi(Qr),Pi._reglType="buffer",Pi._buffer=Kr,Pi.subdata=Mi,Ar.profile&&(Pi.stats=Kr.stats),Pi.destroy=function(){bi(Kr)},Pi}function mi(){oo(fn).forEach(function(Qr){Qr.buffer=ot.createBuffer(),ot.bindBuffer(Qr.type,Qr.buffer),ot.bufferData(Qr.type,Qr.persistentData||Qr.byteLength,Qr.usage)})}return Ar.profile&&(tr.getTotalBufferSize=function(){var Qr=0;return Object.keys(fn).forEach(function(En){Qr+=fn[En].stats.size}),Qr}),{create:Mn,createStream:Wn,destroyStream:vi,clear:function(){oo(fn).forEach(bi),ai.forEach(bi)},getBuffer:function(Qr){return Qr&&Qr._buffer instanceof un?Qr._buffer:null},restore:mi,_initBuffer:fi}}var Lu=0,Oc=0,Rn=1,ji=1,Sv=4,th=4,fc={points:Lu,point:Oc,lines:Rn,line:ji,triangles:Sv,triangle:th,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},$p=0,Qs=1,Pc=4,Bl=5120,ou=5121,vu=5122,Il=5123,hc=5124,Nl=5125,kc=34963,Yc=35040,rh=35044;function Xp(ot,tr,Ar,vn){var kn={},fn=0,un={uint8:ou,uint16:Il};tr.oes_element_index_uint&&(un.uint32=Nl);function ai(mi){this.id=fn++,kn[this.id]=this,this.buffer=mi,this.primType=Pc,this.vertCount=0,this.type=0}ai.prototype.bind=function(){this.buffer.bind()};var Wn=[];function vi(mi){var Qr=Wn.pop();return Qr||(Qr=new ai(Ar.create(null,kc,!0,!1)._buffer)),fi(Qr,mi,Yc,-1,-1,0,0),Qr}function oi(mi){Wn.push(mi)}function fi(mi,Qr,En,si,Ti,Kr,Pi){mi.buffer.bind();var ni;if(Qr){var Mi=Pi;!Pi&&(!N(Qr)||ko(Qr)&&!N(Qr.data))&&(Mi=tr.oes_element_index_uint?Nl:Il),Ar._initBuffer(mi.buffer,Qr,En,Mi,3)}else ot.bufferData(kc,Kr,En),mi.buffer.dtype=ni||ou,mi.buffer.usage=En,mi.buffer.dimension=3,mi.buffer.byteLength=Kr;if(ni=Pi,!Pi){switch(mi.buffer.dtype){case ou:case Bl:ni=ou;break;case Il:case vu:ni=Il;break;case Nl:case hc:ni=Nl;break;default:et.raise("unsupported type for element array")}mi.buffer.dtype=ni}mi.type=ni,et(ni!==Nl||!!tr.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Un=Ti;Un<0&&(Un=mi.buffer.byteLength,ni===Il?Un>>=1:ni===Nl&&(Un>>=2)),mi.vertCount=Un;var Si=si;if(si<0){Si=Pc;var ca=mi.buffer.dimension;ca===1&&(Si=$p),ca===2&&(Si=Qs),ca===3&&(Si=Pc)}mi.primType=Si}function bi(mi){vn.elementsCount--,et(mi.buffer!==null,"must not double destroy elements"),delete kn[mi.id],mi.buffer.destroy(),mi.buffer=null}function Mn(mi,Qr){var En=Ar.create(null,kc,!0),si=new ai(En._buffer);vn.elementsCount++;function Ti(Kr){if(!Kr)En(),si.primType=Pc,si.vertCount=0,si.type=ou;else if(typeof Kr=="number")En(Kr),si.primType=Pc,si.vertCount=Kr|0,si.type=ou;else{var Pi=null,ni=rh,Mi=-1,Un=-1,Si=0,ca=0;Array.isArray(Kr)||N(Kr)||ko(Kr)?Pi=Kr:(et.type(Kr,"object","invalid arguments for elements"),"data"in Kr&&(Pi=Kr.data,et(Array.isArray(Pi)||N(Pi)||ko(Pi),"invalid data for element buffer")),"usage"in Kr&&(et.parameter(Kr.usage,Rl,"invalid element buffer usage"),ni=Rl[Kr.usage]),"primitive"in Kr&&(et.parameter(Kr.primitive,fc,"invalid element buffer primitive"),Mi=fc[Kr.primitive]),"count"in Kr&&(et(typeof Kr.count=="number"&&Kr.count>=0,"invalid vertex count for elements"),Un=Kr.count|0),"type"in Kr&&(et.parameter(Kr.type,un,"invalid buffer type"),ca=un[Kr.type]),"length"in Kr?Si=Kr.length|0:(Si=Un,ca===Il||ca===vu?Si*=2:(ca===Nl||ca===hc)&&(Si*=4))),fi(si,Pi,ni,Mi,Un,Si,ca)}return Ti}return Ti(mi),Ti._reglType="elements",Ti._elements=si,Ti.subdata=function(Kr,Pi){return En.subdata(Kr,Pi),Ti},Ti.destroy=function(){bi(si)},Ti}return{create:Mn,createStream:vi,destroyStream:oi,getElements:function(mi){return typeof mi=="function"&&mi._elements instanceof ai?mi._elements:null},clear:function(){oo(kn).forEach(bi)}}}var jo=new Float32Array(1),Ld=new Uint32Array(jo.buffer),Ih=5123;function hf(ot){for(var tr=gr.allocType(Ih,ot.length),Ar=0;Ar<ot.length;++Ar)if(isNaN(ot[Ar]))tr[Ar]=65535;else if(ot[Ar]===1/0)tr[Ar]=31744;else if(ot[Ar]===-1/0)tr[Ar]=64512;else{jo[0]=ot[Ar];var vn=Ld[0],kn=vn>>>31<<15,fn=(vn<<1>>>24)-127,un=vn>>13&1024-1;if(fn<-24)tr[Ar]=kn;else if(fn<-14){var ai=-14-fn;tr[Ar]=kn+(un+1024>>ai)}else fn>15?tr[Ar]=kn+31744:tr[Ar]=kn+(fn+15<<10)+un}return tr}function ss(ot){return Array.isArray(ot)||N(ot)}var cp=function(ot){return!(ot&ot-1)&&!!ot},fp=34467,Fu=3553,Ot=34067,br=34069,Hr=6408,Jr=6406,Pn=6407,_i=6409,sa=6410,xo=32854,Us=32855,yl=36194,al=32819,Bo=32820,hp=33635,Fd=34042,qc=6402,pp=34041,pf=35904,Yp=35906,Aa=36193,df=33776,nh=33777,ih=33778,Of=33779,ah=35986,$s=35987,pc=34798,Bu=35840,oh=35841,qp=35842,Kp=35843,sh=36196,dc=5121,Oh=5123,dp=5125,Pf=5126,pm=10242,Bd=10243,Nd=10497,Is=33071,Ph=33648,vp=10240,Qp=10241,gp=9728,zd=9729,kh=9984,Dh=9985,kf=9986,hs=9987,mp=33170,rc=4352,vc=4353,so=4354,ps=34046,eo=3317,Jp=37440,uh=37441,yp=37443,Ud=37444,wa=33984,lh=[kh,kf,Dh,hs],Df=[0,_i,sa,Pn,Hr],su={};su[_i]=su[Jr]=su[qc]=1,su[pp]=su[sa]=2,su[Pn]=su[pf]=3,su[Hr]=su[Yp]=4;function us(ot){return"[object "+ot+"]"}var ch=us("HTMLCanvasElement"),Zd=us("OffscreenCanvas"),bs=us("CanvasRenderingContext2D"),Ni=us("ImageBitmap"),ol=us("HTMLImageElement"),nc=us("HTMLVideoElement"),fh=Object.keys(Wi).concat([ch,Zd,bs,Ni,ol,nc]),_l=[];_l[dc]=1,_l[Pf]=4,_l[Aa]=2,_l[Oh]=2,_l[dp]=4;var Ho=[];Ho[xo]=2,Ho[Us]=2,Ho[yl]=2,Ho[pp]=4,Ho[df]=.5,Ho[nh]=.5,Ho[ih]=1,Ho[Of]=1,Ho[ah]=.5,Ho[$s]=1,Ho[pc]=1,Ho[Bu]=.5,Ho[oh]=.25,Ho[qp]=.5,Ho[Kp]=.25,Ho[sh]=.5;function ed(ot){return Array.isArray(ot)&&(ot.length===0||typeof ot[0]=="number")}function Qn(ot){if(!Array.isArray(ot))return!1;var tr=ot.length;return!(tr===0||!ss(ot[0]))}function Kc(ot){return Object.prototype.toString.call(ot)}function Dc(ot){return Kc(ot)===ch}function _p(ot){return Kc(ot)===Zd}function gc(ot){return Kc(ot)===bs}function sl(ot){return Kc(ot)===Ni}function Lh(ot){return Kc(ot)===ol}function vf(ot){return Kc(ot)===nc}function Zs(ot){if(!ot)return!1;var tr=Kc(ot);return fh.indexOf(tr)>=0?!0:ed(ot)||Qn(ot)||ko(ot)}function Ol(ot){return Wi[Object.prototype.toString.call(ot)]|0}function Vd(ot,tr){var Ar=tr.length;switch(ot.type){case dc:case Oh:case dp:case Pf:var vn=gr.allocType(ot.type,Ar);vn.set(tr),ot.data=vn;break;case Aa:ot.data=hf(tr);break;default:et.raise("unsupported texture type, must specify a typed array")}}function xp(ot,tr){return gr.allocType(ot.type===Aa?Pf:ot.type,tr)}function Lf(ot,tr){ot.type===Aa?(ot.data=hf(tr),gr.freeType(tr)):ot.data=tr}function Ev(ot,tr,Ar,vn,kn,fn){for(var un=ot.width,ai=ot.height,Wn=ot.channels,vi=un*ai*Wn,oi=xp(ot,vi),fi=0,bi=0;bi<ai;++bi)for(var Mn=0;Mn<un;++Mn)for(var mi=0;mi<Wn;++mi)oi[fi++]=tr[Ar*Mn+vn*bi+kn*mi+fn];Lf(ot,oi)}function ic(ot,tr,Ar,vn,kn,fn){var un;if(typeof Ho[ot]!="undefined"?un=Ho[ot]:un=su[ot]*_l[tr],fn&&(un*=6),kn){for(var ai=0,Wn=Ar;Wn>=1;)ai+=un*Wn*Wn,Wn/=2;return ai}else return un*Ar*vn}function ac(ot,tr,Ar,vn,kn,fn,un){var ai={"don't care":rc,"dont care":rc,nice:so,fast:vc},Wn={repeat:Nd,clamp:Is,mirror:Ph},vi={nearest:gp,linear:zd},oi=k({mipmap:hs,"nearest mipmap nearest":kh,"linear mipmap nearest":Dh,"nearest mipmap linear":kf,"linear mipmap linear":hs},vi),fi={none:0,browser:Ud},bi={uint8:dc,rgba4:al,rgb565:hp,"rgb5 a1":Bo},Mn={alpha:Jr,luminance:_i,"luminance alpha":sa,rgb:Pn,rgba:Hr,rgba4:xo,"rgb5 a1":Us,rgb565:yl},mi={};tr.ext_srgb&&(Mn.srgb=pf,Mn.srgba=Yp),tr.oes_texture_float&&(bi.float32=bi.float=Pf),tr.oes_texture_half_float&&(bi.float16=bi["half float"]=Aa),tr.webgl_depth_texture&&(k(Mn,{depth:qc,"depth stencil":pp}),k(bi,{uint16:Oh,uint32:dp,"depth stencil":Fd})),tr.webgl_compressed_texture_s3tc&&k(mi,{"rgb s3tc dxt1":df,"rgba s3tc dxt1":nh,"rgba s3tc dxt3":ih,"rgba s3tc dxt5":Of}),tr.webgl_compressed_texture_atc&&k(mi,{"rgb atc":ah,"rgba atc explicit alpha":$s,"rgba atc interpolated alpha":pc}),tr.webgl_compressed_texture_pvrtc&&k(mi,{"rgb pvrtc 4bppv1":Bu,"rgb pvrtc 2bppv1":oh,"rgba pvrtc 4bppv1":qp,"rgba pvrtc 2bppv1":Kp}),tr.webgl_compressed_texture_etc1&&(mi["rgb etc1"]=sh);var Qr=Array.prototype.slice.call(ot.getParameter(fp));Object.keys(mi).forEach(function(mr){var _n=mi[mr];Qr.indexOf(_n)>=0&&(Mn[mr]=_n)});var En=Object.keys(Mn);Ar.textureFormats=En;var si=[];Object.keys(Mn).forEach(function(mr){var _n=Mn[mr];si[_n]=mr});var Ti=[];Object.keys(bi).forEach(function(mr){var _n=bi[mr];Ti[_n]=mr});var Kr=[];Object.keys(vi).forEach(function(mr){var _n=vi[mr];Kr[_n]=mr});var Pi=[];Object.keys(oi).forEach(function(mr){var _n=oi[mr];Pi[_n]=mr});var ni=[];Object.keys(Wn).forEach(function(mr){var _n=Wn[mr];ni[_n]=mr});var Mi=En.reduce(function(mr,_n){var hn=Mn[_n];return hn===_i||hn===Jr||hn===_i||hn===sa||hn===qc||hn===pp||tr.ext_srgb&&(hn===pf||hn===Yp)?mr[hn]=hn:hn===Us||_n.indexOf("rgba")>=0?mr[hn]=Hr:mr[hn]=Pn,mr},{});function Un(){this.internalformat=Hr,this.format=Hr,this.type=dc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Ud,this.width=0,this.height=0,this.channels=0}function Si(mr,_n){mr.internalformat=_n.internalformat,mr.format=_n.format,mr.type=_n.type,mr.compressed=_n.compressed,mr.premultiplyAlpha=_n.premultiplyAlpha,mr.flipY=_n.flipY,mr.unpackAlignment=_n.unpackAlignment,mr.colorSpace=_n.colorSpace,mr.width=_n.width,mr.height=_n.height,mr.channels=_n.channels}function ca(mr,_n){if(!(typeof _n!="object"||!_n)){if("premultiplyAlpha"in _n&&(et.type(_n.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),mr.premultiplyAlpha=_n.premultiplyAlpha),"flipY"in _n&&(et.type(_n.flipY,"boolean","invalid texture flip"),mr.flipY=_n.flipY),"alignment"in _n&&(et.oneOf(_n.alignment,[1,2,4,8],"invalid texture unpack alignment"),mr.unpackAlignment=_n.alignment),"colorSpace"in _n&&(et.parameter(_n.colorSpace,fi,"invalid colorSpace"),mr.colorSpace=fi[_n.colorSpace]),"type"in _n){var hn=_n.type;et(tr.oes_texture_float||!(hn==="float"||hn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),et(tr.oes_texture_half_float||!(hn==="half float"||hn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),et(tr.webgl_depth_texture||!(hn==="uint16"||hn==="uint32"||hn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),et.parameter(hn,bi,"invalid texture type"),mr.type=bi[hn]}var Ii=mr.width,$a=mr.height,$o=mr.channels,Vt=!1;"shape"in _n?(et(Array.isArray(_n.shape)&&_n.shape.length>=2,"shape must be an array"),Ii=_n.shape[0],$a=_n.shape[1],_n.shape.length===3&&($o=_n.shape[2],et($o>0&&$o<=4,"invalid number of channels"),Vt=!0),et(Ii>=0&&Ii<=Ar.maxTextureSize,"invalid width"),et($a>=0&&$a<=Ar.maxTextureSize,"invalid height")):("radius"in _n&&(Ii=$a=_n.radius,et(Ii>=0&&Ii<=Ar.maxTextureSize,"invalid radius")),"width"in _n&&(Ii=_n.width,et(Ii>=0&&Ii<=Ar.maxTextureSize,"invalid width")),"height"in _n&&($a=_n.height,et($a>=0&&$a<=Ar.maxTextureSize,"invalid height")),"channels"in _n&&($o=_n.channels,et($o>0&&$o<=4,"invalid number of channels"),Vt=!0)),mr.width=Ii|0,mr.height=$a|0,mr.channels=$o|0;var kt=!1;if("format"in _n){var wr=_n.format;et(tr.webgl_depth_texture||!(wr==="depth"||wr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),et.parameter(wr,Mn,"invalid texture format");var Qt=mr.internalformat=Mn[wr];mr.format=Mi[Qt],wr in bi&&("type"in _n||(mr.type=bi[wr])),wr in mi&&(mr.compressed=!0),kt=!0}!Vt&&kt?mr.channels=su[mr.format]:Vt&&!kt?mr.channels!==Df[mr.format]&&(mr.format=mr.internalformat=Df[mr.channels]):kt&&Vt&&et(mr.channels===su[mr.format],"number of channels inconsistent with specified format")}}function Ra(mr){ot.pixelStorei(Jp,mr.flipY),ot.pixelStorei(uh,mr.premultiplyAlpha),ot.pixelStorei(yp,mr.colorSpace),ot.pixelStorei(eo,mr.unpackAlignment)}function Ai(){Un.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ii(mr,_n){var hn=null;if(Zs(_n)?hn=_n:_n&&(et.type(_n,"object","invalid pixel data type"),ca(mr,_n),"x"in _n&&(mr.xOffset=_n.x|0),"y"in _n&&(mr.yOffset=_n.y|0),Zs(_n.data)&&(hn=_n.data)),et(!mr.compressed||hn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),_n.copy){et(!hn,"can not specify copy and data field for the same texture");var Ii=kn.viewportWidth,$a=kn.viewportHeight;mr.width=mr.width||Ii-mr.xOffset,mr.height=mr.height||$a-mr.yOffset,mr.needsCopy=!0,et(mr.xOffset>=0&&mr.xOffset<Ii&&mr.yOffset>=0&&mr.yOffset<$a&&mr.width>0&&mr.width<=Ii&&mr.height>0&&mr.height<=$a,"copy texture read out of bounds")}else if(!hn)mr.width=mr.width||1,mr.height=mr.height||1,mr.channels=mr.channels||4;else if(N(hn))mr.channels=mr.channels||4,mr.data=hn,!("type"in _n)&&mr.type===dc&&(mr.type=Ol(hn));else if(ed(hn))mr.channels=mr.channels||4,Vd(mr,hn),mr.alignment=1,mr.needsFree=!0;else if(ko(hn)){var $o=hn.data;!Array.isArray($o)&&mr.type===dc&&(mr.type=Ol($o));var Vt=hn.shape,kt=hn.stride,wr,Qt,sn,Lr,Zr,Gr;Vt.length===3?(sn=Vt[2],Gr=kt[2]):(et(Vt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),sn=1,Gr=1),wr=Vt[0],Qt=Vt[1],Lr=kt[0],Zr=kt[1],mr.alignment=1,mr.width=wr,mr.height=Qt,mr.channels=sn,mr.format=mr.internalformat=Df[sn],mr.needsFree=!0,Ev(mr,$o,Lr,Zr,Gr,hn.offset)}else if(Dc(hn)||_p(hn)||gc(hn))Dc(hn)||_p(hn)?mr.element=hn:mr.element=hn.canvas,mr.width=mr.element.width,mr.height=mr.element.height,mr.channels=4;else if(sl(hn))mr.element=hn,mr.width=hn.width,mr.height=hn.height,mr.channels=4;else if(Lh(hn))mr.element=hn,mr.width=hn.naturalWidth,mr.height=hn.naturalHeight,mr.channels=4;else if(vf(hn))mr.element=hn,mr.width=hn.videoWidth,mr.height=hn.videoHeight,mr.channels=4;else if(Qn(hn)){var yr=mr.width||hn[0].length,Ur=mr.height||hn.length,or=mr.channels;ss(hn[0][0])?or=or||hn[0][0].length:or=or||1;for(var jr=iu.shape(hn),bn=1,Sn=0;Sn<jr.length;++Sn)bn*=jr[Sn];var Xn=xp(mr,bn);iu.flatten(hn,jr,"",Xn),Lf(mr,Xn),mr.alignment=1,mr.width=yr,mr.height=Ur,mr.channels=or,mr.format=mr.internalformat=Df[or],mr.needsFree=!0}mr.type===Pf?et(Ar.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):mr.type===Aa&&et(Ar.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Dn(mr,_n,hn){var Ii=mr.element,$a=mr.data,$o=mr.internalformat,Vt=mr.format,kt=mr.type,wr=mr.width,Qt=mr.height;Ra(mr),Ii?ot.texImage2D(_n,hn,Vt,Vt,kt,Ii):mr.compressed?ot.compressedTexImage2D(_n,hn,$o,wr,Qt,0,$a):mr.needsCopy?(vn(),ot.copyTexImage2D(_n,hn,Vt,mr.xOffset,mr.yOffset,wr,Qt,0)):ot.texImage2D(_n,hn,Vt,wr,Qt,0,Vt,kt,$a||null)}function ta(mr,_n,hn,Ii,$a){var $o=mr.element,Vt=mr.data,kt=mr.internalformat,wr=mr.format,Qt=mr.type,sn=mr.width,Lr=mr.height;Ra(mr),$o?ot.texSubImage2D(_n,$a,hn,Ii,wr,Qt,$o):mr.compressed?ot.compressedTexSubImage2D(_n,$a,hn,Ii,kt,sn,Lr,Vt):mr.needsCopy?(vn(),ot.copyTexSubImage2D(_n,$a,hn,Ii,mr.xOffset,mr.yOffset,sn,Lr)):ot.texSubImage2D(_n,$a,hn,Ii,sn,Lr,wr,Qt,Vt)}var to=[];function ki(){return to.pop()||new Ai}function Ka(mr){mr.needsFree&&gr.freeType(mr.data),Ai.call(mr),to.push(mr)}function ka(){Un.call(this),this.genMipmaps=!1,this.mipmapHint=rc,this.mipmask=0,this.images=Array(16)}function _a(mr,_n,hn){var Ii=mr.images[0]=ki();mr.mipmask=1,Ii.width=mr.width=_n,Ii.height=mr.height=hn,Ii.channels=mr.channels=4}function Ro(mr,_n){var hn=null;if(Zs(_n))hn=mr.images[0]=ki(),Si(hn,mr),ii(hn,_n),mr.mipmask=1;else if(ca(mr,_n),Array.isArray(_n.mipmap))for(var Ii=_n.mipmap,$a=0;$a<Ii.length;++$a)hn=mr.images[$a]=ki(),Si(hn,mr),hn.width>>=$a,hn.height>>=$a,ii(hn,Ii[$a]),mr.mipmask|=1<<$a;else hn=mr.images[0]=ki(),Si(hn,mr),ii(hn,_n),mr.mipmask=1;Si(mr,mr.images[0]),mr.compressed&&(mr.internalformat===df||mr.internalformat===nh||mr.internalformat===ih||mr.internalformat===Of)&&et(mr.width%4===0&&mr.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function gu(mr,_n){for(var hn=mr.images,Ii=0;Ii<hn.length;++Ii){if(!hn[Ii])return;Dn(hn[Ii],_n,Ii)}}var Uu=[];function go(){var mr=Uu.pop()||new ka;Un.call(mr),mr.mipmask=0;for(var _n=0;_n<16;++_n)mr.images[_n]=null;return mr}function ds(mr){for(var _n=mr.images,hn=0;hn<_n.length;++hn)_n[hn]&&Ka(_n[hn]),_n[hn]=null;Uu.push(mr)}function Wo(){this.minFilter=gp,this.magFilter=gp,this.wrapS=Is,this.wrapT=Is,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=rc}function lu(mr,_n){if("min"in _n){var hn=_n.min;et.parameter(hn,oi),mr.minFilter=oi[hn],lh.indexOf(mr.minFilter)>=0&&!("faces"in _n)&&(mr.genMipmaps=!0)}if("mag"in _n){var Ii=_n.mag;et.parameter(Ii,vi),mr.magFilter=vi[Ii]}var $a=mr.wrapS,$o=mr.wrapT;if("wrap"in _n){var Vt=_n.wrap;typeof Vt=="string"?(et.parameter(Vt,Wn),$a=$o=Wn[Vt]):Array.isArray(Vt)&&(et.parameter(Vt[0],Wn),et.parameter(Vt[1],Wn),$a=Wn[Vt[0]],$o=Wn[Vt[1]])}else{if("wrapS"in _n){var kt=_n.wrapS;et.parameter(kt,Wn),$a=Wn[kt]}if("wrapT"in _n){var wr=_n.wrapT;et.parameter(wr,Wn),$o=Wn[wr]}}if(mr.wrapS=$a,mr.wrapT=$o,"anisotropic"in _n){var Qt=_n.anisotropic;et(typeof Qt=="number"&&Qt>=1&&Qt<=Ar.maxAnisotropic,"aniso samples must be between 1 and "),mr.anisotropic=_n.anisotropic}if("mipmap"in _n){var sn=!1;switch(typeof _n.mipmap){case"string":et.parameter(_n.mipmap,ai,"invalid mipmap hint"),mr.mipmapHint=ai[_n.mipmap],mr.genMipmaps=!0,sn=!0;break;case"boolean":sn=mr.genMipmaps=_n.mipmap;break;case"object":et(Array.isArray(_n.mipmap),"invalid mipmap type"),mr.genMipmaps=!1,sn=!0;break;default:et.raise("invalid mipmap type")}sn&&!("min"in _n)&&(mr.minFilter=kh)}}function Ys(mr,_n){ot.texParameteri(_n,Qp,mr.minFilter),ot.texParameteri(_n,vp,mr.magFilter),ot.texParameteri(_n,pm,mr.wrapS),ot.texParameteri(_n,Bd,mr.wrapT),tr.ext_texture_filter_anisotropic&&ot.texParameteri(_n,ps,mr.anisotropic),mr.genMipmaps&&(ot.hint(mp,mr.mipmapHint),ot.generateMipmap(_n))}var Hs=0,tu={},vs=Ar.maxTextureUnits,cu=Array(vs).map(function(){return null});function Va(mr){Un.call(this),this.mipmask=0,this.internalformat=Hr,this.id=Hs++,this.refCount=1,this.target=mr,this.texture=ot.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wo,un.profile&&(this.stats={size:0})}function Zu(mr){ot.activeTexture(wa),ot.bindTexture(mr.target,mr.texture)}function No(){var mr=cu[0];mr?ot.bindTexture(mr.target,mr.texture):ot.bindTexture(Fu,null)}function da(mr){var _n=mr.texture;et(_n,"must not double destroy texture");var hn=mr.unit,Ii=mr.target;hn>=0&&(ot.activeTexture(wa+hn),ot.bindTexture(Ii,null),cu[hn]=null),ot.deleteTexture(_n),mr.texture=null,mr.params=null,mr.pixels=null,mr.refCount=0,delete tu[mr.id],fn.textureCount--}k(Va.prototype,{bind:function(){var mr=this;mr.bindCount+=1;var _n=mr.unit;if(_n<0){for(var hn=0;hn<vs;++hn){var Ii=cu[hn];if(Ii){if(Ii.bindCount>0)continue;Ii.unit=-1}cu[hn]=mr,_n=hn;break}_n>=vs&&et.raise("insufficient number of texture units"),un.profile&&fn.maxTextureUnits<_n+1&&(fn.maxTextureUnits=_n+1),mr.unit=_n,ot.activeTexture(wa+_n),ot.bindTexture(mr.target,mr.texture)}return _n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&da(this)}});function ba(mr,_n){var hn=new Va(Fu);tu[hn.id]=hn,fn.textureCount++;function Ii(Vt,kt){var wr=hn.texInfo;Wo.call(wr);var Qt=go();return typeof Vt=="number"?typeof kt=="number"?_a(Qt,Vt|0,kt|0):_a(Qt,Vt|0,Vt|0):Vt?(et.type(Vt,"object","invalid arguments to regl.texture"),lu(wr,Vt),Ro(Qt,Vt)):_a(Qt,1,1),wr.genMipmaps&&(Qt.mipmask=(Qt.width<<1)-1),hn.mipmask=Qt.mipmask,Si(hn,Qt),et.texture2D(wr,Qt,Ar),hn.internalformat=Qt.internalformat,Ii.width=Qt.width,Ii.height=Qt.height,Zu(hn),gu(Qt,Fu),Ys(wr,Fu),No(),ds(Qt),un.profile&&(hn.stats.size=ic(hn.internalformat,hn.type,Qt.width,Qt.height,wr.genMipmaps,!1)),Ii.format=si[hn.internalformat],Ii.type=Ti[hn.type],Ii.mag=Kr[wr.magFilter],Ii.min=Pi[wr.minFilter],Ii.wrapS=ni[wr.wrapS],Ii.wrapT=ni[wr.wrapT],Ii}function $a(Vt,kt,wr,Qt){et(!!Vt,"must specify image data");var sn=kt|0,Lr=wr|0,Zr=Qt|0,Gr=ki();return Si(Gr,hn),Gr.width=0,Gr.height=0,ii(Gr,Vt),Gr.width=Gr.width||(hn.width>>Zr)-sn,Gr.height=Gr.height||(hn.height>>Zr)-Lr,et(hn.type===Gr.type&&hn.format===Gr.format&&hn.internalformat===Gr.internalformat,"incompatible format for texture.subimage"),et(sn>=0&&Lr>=0&&sn+Gr.width<=hn.width&&Lr+Gr.height<=hn.height,"texture.subimage write out of bounds"),et(hn.mipmask&1<<Zr,"missing mipmap data"),et(Gr.data||Gr.element||Gr.needsCopy,"missing image data"),Zu(hn),ta(Gr,Fu,sn,Lr,Zr),No(),Ka(Gr),Ii}function $o(Vt,kt){var wr=Vt|0,Qt=kt|0||wr;if(wr===hn.width&&Qt===hn.height)return Ii;Ii.width=hn.width=wr,Ii.height=hn.height=Qt,Zu(hn);for(var sn=0;hn.mipmask>>sn;++sn){var Lr=wr>>sn,Zr=Qt>>sn;if(!Lr||!Zr)break;ot.texImage2D(Fu,sn,hn.format,Lr,Zr,0,hn.format,hn.type,null)}return No(),un.profile&&(hn.stats.size=ic(hn.internalformat,hn.type,wr,Qt,!1,!1)),Ii}return Ii(mr,_n),Ii.subimage=$a,Ii.resize=$o,Ii._reglType="texture2d",Ii._texture=hn,un.profile&&(Ii.stats=hn.stats),Ii.destroy=function(){hn.decRef()},Ii}function Io(mr,_n,hn,Ii,$a,$o){var Vt=new Va(Ot);tu[Vt.id]=Vt,fn.cubeCount++;var kt=new Array(6);function wr(Lr,Zr,Gr,yr,Ur,or){var jr,bn=Vt.texInfo;for(Wo.call(bn),jr=0;jr<6;++jr)kt[jr]=go();if(typeof Lr=="number"||!Lr){var Sn=Lr|0||1;for(jr=0;jr<6;++jr)_a(kt[jr],Sn,Sn)}else if(typeof Lr=="object")if(Zr)Ro(kt[0],Lr),Ro(kt[1],Zr),Ro(kt[2],Gr),Ro(kt[3],yr),Ro(kt[4],Ur),Ro(kt[5],or);else if(lu(bn,Lr),ca(Vt,Lr),"faces"in Lr){var Xn=Lr.faces;for(et(Array.isArray(Xn)&&Xn.length===6,"cube faces must be a length 6 array"),jr=0;jr<6;++jr)et(typeof Xn[jr]=="object"&&!!Xn[jr],"invalid input for cube map face"),Si(kt[jr],Vt),Ro(kt[jr],Xn[jr])}else for(jr=0;jr<6;++jr)Ro(kt[jr],Lr);else et.raise("invalid arguments to cube map");for(Si(Vt,kt[0]),Ar.npotTextureCube||et(cp(Vt.width)&&cp(Vt.height),"your browser does not support non power or two texture dimensions"),bn.genMipmaps?Vt.mipmask=(kt[0].width<<1)-1:Vt.mipmask=kt[0].mipmask,et.textureCube(Vt,bn,kt,Ar),Vt.internalformat=kt[0].internalformat,wr.width=kt[0].width,wr.height=kt[0].height,Zu(Vt),jr=0;jr<6;++jr)gu(kt[jr],br+jr);for(Ys(bn,Ot),No(),un.profile&&(Vt.stats.size=ic(Vt.internalformat,Vt.type,wr.width,wr.height,bn.genMipmaps,!0)),wr.format=si[Vt.internalformat],wr.type=Ti[Vt.type],wr.mag=Kr[bn.magFilter],wr.min=Pi[bn.minFilter],wr.wrapS=ni[bn.wrapS],wr.wrapT=ni[bn.wrapT],jr=0;jr<6;++jr)ds(kt[jr]);return wr}function Qt(Lr,Zr,Gr,yr,Ur){et(!!Zr,"must specify image data"),et(typeof Lr=="number"&&Lr===(Lr|0)&&Lr>=0&&Lr<6,"invalid face");var or=Gr|0,jr=yr|0,bn=Ur|0,Sn=ki();return Si(Sn,Vt),Sn.width=0,Sn.height=0,ii(Sn,Zr),Sn.width=Sn.width||(Vt.width>>bn)-or,Sn.height=Sn.height||(Vt.height>>bn)-jr,et(Vt.type===Sn.type&&Vt.format===Sn.format&&Vt.internalformat===Sn.internalformat,"incompatible format for texture.subimage"),et(or>=0&&jr>=0&&or+Sn.width<=Vt.width&&jr+Sn.height<=Vt.height,"texture.subimage write out of bounds"),et(Vt.mipmask&1<<bn,"missing mipmap data"),et(Sn.data||Sn.element||Sn.needsCopy,"missing image data"),Zu(Vt),ta(Sn,br+Lr,or,jr,bn),No(),Ka(Sn),wr}function sn(Lr){var Zr=Lr|0;if(Zr!==Vt.width){wr.width=Vt.width=Zr,wr.height=Vt.height=Zr,Zu(Vt);for(var Gr=0;Gr<6;++Gr)for(var yr=0;Vt.mipmask>>yr;++yr)ot.texImage2D(br+Gr,yr,Vt.format,Zr>>yr,Zr>>yr,0,Vt.format,Vt.type,null);return No(),un.profile&&(Vt.stats.size=ic(Vt.internalformat,Vt.type,wr.width,wr.height,!1,!0)),wr}}return wr(mr,_n,hn,Ii,$a,$o),wr.subimage=Qt,wr.resize=sn,wr._reglType="textureCube",wr._texture=Vt,un.profile&&(wr.stats=Vt.stats),wr.destroy=function(){Vt.decRef()},wr}function Ts(){for(var mr=0;mr<vs;++mr)ot.activeTexture(wa+mr),ot.bindTexture(Fu,null),cu[mr]=null;oo(tu).forEach(da),fn.cubeCount=0,fn.textureCount=0}un.profile&&(fn.getTotalTextureSize=function(){var mr=0;return Object.keys(tu).forEach(function(_n){mr+=tu[_n].stats.size}),mr});function mu(){for(var mr=0;mr<vs;++mr){var _n=cu[mr];_n&&(_n.bindCount=0,_n.unit=-1,cu[mr]=null)}oo(tu).forEach(function(hn){hn.texture=ot.createTexture(),ot.bindTexture(hn.target,hn.texture);for(var Ii=0;Ii<32;++Ii)if(hn.mipmask&1<<Ii)if(hn.target===Fu)ot.texImage2D(Fu,Ii,hn.internalformat,hn.width>>Ii,hn.height>>Ii,0,hn.internalformat,hn.type,null);else for(var $a=0;$a<6;++$a)ot.texImage2D(br+$a,Ii,hn.internalformat,hn.width>>Ii,hn.height>>Ii,0,hn.internalformat,hn.type,null);Ys(hn.texInfo,hn.target)})}return{create2D:ba,createCube:Io,clear:Ts,getTexture:function(mr){return null},restore:mu}}var Ca=36161,Os=32854,zl=32855,Gu=36194,hh=33189,Qc=36168,Nu=34041,xl=35907,gf=34836,Ji=34842,wi=34843,ul=[];ul[Os]=2,ul[zl]=2,ul[Gu]=2,ul[hh]=2,ul[Qc]=1,ul[Nu]=4,ul[xl]=4,ul[gf]=16,ul[Ji]=8,ul[wi]=6;function bl(ot,tr,Ar){return ul[ot]*tr*Ar}var ll=function(ot,tr,Ar,vn,kn){var fn={rgba4:Os,rgb565:Gu,"rgb5 a1":zl,depth:hh,stencil:Qc,"depth stencil":Nu};tr.ext_srgb&&(fn.srgba=xl),tr.ext_color_buffer_half_float&&(fn.rgba16f=Ji,fn.rgb16f=wi),tr.webgl_color_buffer_float&&(fn.rgba32f=gf);var un=[];Object.keys(fn).forEach(function(Mn){var mi=fn[Mn];un[mi]=Mn});var ai=0,Wn={};function vi(Mn){this.id=ai++,this.refCount=1,this.renderbuffer=Mn,this.format=Os,this.width=0,this.height=0,kn.profile&&(this.stats={size:0})}vi.prototype.decRef=function(){--this.refCount<=0&&oi(this)};function oi(Mn){var mi=Mn.renderbuffer;et(mi,"must not double destroy renderbuffer"),ot.bindRenderbuffer(Ca,null),ot.deleteRenderbuffer(mi),Mn.renderbuffer=null,Mn.refCount=0,delete Wn[Mn.id],vn.renderbufferCount--}function fi(Mn,mi){var Qr=new vi(ot.createRenderbuffer());Wn[Qr.id]=Qr,vn.renderbufferCount++;function En(Ti,Kr){var Pi=0,ni=0,Mi=Os;if(typeof Ti=="object"&&Ti){var Un=Ti;if("shape"in Un){var Si=Un.shape;et(Array.isArray(Si)&&Si.length>=2,"invalid renderbuffer shape"),Pi=Si[0]|0,ni=Si[1]|0}else"radius"in Un&&(Pi=ni=Un.radius|0),"width"in Un&&(Pi=Un.width|0),"height"in Un&&(ni=Un.height|0);"format"in Un&&(et.parameter(Un.format,fn,"invalid renderbuffer format"),Mi=fn[Un.format])}else typeof Ti=="number"?(Pi=Ti|0,typeof Kr=="number"?ni=Kr|0:ni=Pi):Ti?et.raise("invalid arguments to renderbuffer constructor"):Pi=ni=1;if(et(Pi>0&&ni>0&&Pi<=Ar.maxRenderbufferSize&&ni<=Ar.maxRenderbufferSize,"invalid renderbuffer size"),!(Pi===Qr.width&&ni===Qr.height&&Mi===Qr.format))return En.width=Qr.width=Pi,En.height=Qr.height=ni,Qr.format=Mi,ot.bindRenderbuffer(Ca,Qr.renderbuffer),ot.renderbufferStorage(Ca,Mi,Pi,ni),et(ot.getError()===0,"invalid render buffer format"),kn.profile&&(Qr.stats.size=bl(Qr.format,Qr.width,Qr.height)),En.format=un[Qr.format],En}function si(Ti,Kr){var Pi=Ti|0,ni=Kr|0||Pi;return Pi===Qr.width&&ni===Qr.height||(et(Pi>0&&ni>0&&Pi<=Ar.maxRenderbufferSize&&ni<=Ar.maxRenderbufferSize,"invalid renderbuffer size"),En.width=Qr.width=Pi,En.height=Qr.height=ni,ot.bindRenderbuffer(Ca,Qr.renderbuffer),ot.renderbufferStorage(Ca,Qr.format,Pi,ni),et(ot.getError()===0,"invalid render buffer format"),kn.profile&&(Qr.stats.size=bl(Qr.format,Qr.width,Qr.height))),En}return En(Mn,mi),En.resize=si,En._reglType="renderbuffer",En._renderbuffer=Qr,kn.profile&&(En.stats=Qr.stats),En.destroy=function(){Qr.decRef()},En}kn.profile&&(vn.getTotalRenderbufferSize=function(){var Mn=0;return Object.keys(Wn).forEach(function(mi){Mn+=Wn[mi].stats.size}),Mn});function bi(){oo(Wn).forEach(function(Mn){Mn.renderbuffer=ot.createRenderbuffer(),ot.bindRenderbuffer(Ca,Mn.renderbuffer),ot.renderbufferStorage(Ca,Mn.format,Mn.width,Mn.height)}),ot.bindRenderbuffer(Ca,null)}return{create:fi,clear:function(){oo(Wn).forEach(oi)},restore:bi}},Ss=36160,mc=36161,mf=3553,Fh=34069,Vo=36064,uu=36096,td=36128,Bh=33306,Ff=36053,yc=36054,Ma=36055,Nh=36057,Lc=36061,rd=36193,zh=5121,ph=5126,bp=6407,Uh=6408,pn=6402,Mr=[bp,Uh],Ve=[];Ve[Uh]=4,Ve[bp]=3;var Fc=[];Fc[zh]=1,Fc[ph]=4,Fc[rd]=2;var Jt=32854,Bf=32855,Es=36194,Sp=33189,Nf=36168,Ul=34041,Ep=35907,E=34836,M=34842,C=34843,I=[Jt,Bf,Es,Ep,M,C,E],V={};V[Ff]="complete",V[yc]="incomplete attachment",V[Nh]="incomplete dimensions",V[Ma]="incomplete, missing attachment",V[Lc]="unsupported";function ie(ot,tr,Ar,vn,kn,fn){var un={cur:null,next:null,dirty:!1,setFBO:null},ai=["rgba"],Wn=["rgba4","rgb565","rgb5 a1"];tr.ext_srgb&&Wn.push("srgba"),tr.ext_color_buffer_half_float&&Wn.push("rgba16f","rgb16f"),tr.webgl_color_buffer_float&&Wn.push("rgba32f");var vi=["uint8"];tr.oes_texture_half_float&&vi.push("half float","float16"),tr.oes_texture_float&&vi.push("float","float32");function oi(Ai,ii,Dn){this.target=Ai,this.texture=ii,this.renderbuffer=Dn;var ta=0,to=0;ii?(ta=ii.width,to=ii.height):Dn&&(ta=Dn.width,to=Dn.height),this.width=ta,this.height=to}function fi(Ai){Ai&&(Ai.texture&&Ai.texture._texture.decRef(),Ai.renderbuffer&&Ai.renderbuffer._renderbuffer.decRef())}function bi(Ai,ii,Dn){if(Ai)if(Ai.texture){var ta=Ai.texture._texture,to=Math.max(1,ta.width),ki=Math.max(1,ta.height);et(to===ii&&ki===Dn,"inconsistent width/height for supplied texture"),ta.refCount+=1}else{var Ka=Ai.renderbuffer._renderbuffer;et(Ka.width===ii&&Ka.height===Dn,"inconsistent width/height for renderbuffer"),Ka.refCount+=1}}function Mn(Ai,ii){ii&&(ii.texture?ot.framebufferTexture2D(Ss,Ai,ii.target,ii.texture._texture.texture,0):ot.framebufferRenderbuffer(Ss,Ai,mc,ii.renderbuffer._renderbuffer.renderbuffer))}function mi(Ai){var ii=mf,Dn=null,ta=null,to=Ai;typeof Ai=="object"&&(to=Ai.data,"target"in Ai&&(ii=Ai.target|0)),et.type(to,"function","invalid attachment data");var ki=to._reglType;return ki==="texture2d"?(Dn=to,et(ii===mf)):ki==="textureCube"?(Dn=to,et(ii>=Fh&&ii<Fh+6,"invalid cube map target")):ki==="renderbuffer"?(ta=to,ii=mc):et.raise("invalid regl object for attachment"),new oi(ii,Dn,ta)}function Qr(Ai,ii,Dn,ta,to){if(Dn){var ki=vn.create2D({width:Ai,height:ii,format:ta,type:to});return ki._texture.refCount=0,new oi(mf,ki,null)}else{var Ka=kn.create({width:Ai,height:ii,format:ta});return Ka._renderbuffer.refCount=0,new oi(mc,null,Ka)}}function En(Ai){return Ai&&(Ai.texture||Ai.renderbuffer)}function si(Ai,ii,Dn){Ai&&(Ai.texture?Ai.texture.resize(ii,Dn):Ai.renderbuffer&&Ai.renderbuffer.resize(ii,Dn),Ai.width=ii,Ai.height=Dn)}var Ti=0,Kr={};function Pi(){this.id=Ti++,Kr[this.id]=this,this.framebuffer=ot.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ni(Ai){Ai.colorAttachments.forEach(fi),fi(Ai.depthAttachment),fi(Ai.stencilAttachment),fi(Ai.depthStencilAttachment)}function Mi(Ai){var ii=Ai.framebuffer;et(ii,"must not double destroy framebuffer"),ot.deleteFramebuffer(ii),Ai.framebuffer=null,fn.framebufferCount--,delete Kr[Ai.id]}function Un(Ai){var ii;ot.bindFramebuffer(Ss,Ai.framebuffer);var Dn=Ai.colorAttachments;for(ii=0;ii<Dn.length;++ii)Mn(Vo+ii,Dn[ii]);for(ii=Dn.length;ii<Ar.maxColorAttachments;++ii)ot.framebufferTexture2D(Ss,Vo+ii,mf,null,0);ot.framebufferTexture2D(Ss,Bh,mf,null,0),ot.framebufferTexture2D(Ss,uu,mf,null,0),ot.framebufferTexture2D(Ss,td,mf,null,0),Mn(uu,Ai.depthAttachment),Mn(td,Ai.stencilAttachment),Mn(Bh,Ai.depthStencilAttachment);var ta=ot.checkFramebufferStatus(Ss);!ot.isContextLost()&&ta!==Ff&&et.raise("framebuffer configuration not supported, status = "+V[ta]),ot.bindFramebuffer(Ss,un.next?un.next.framebuffer:null),un.cur=un.next,ot.getError()}function Si(Ai,ii){var Dn=new Pi;fn.framebufferCount++;function ta(ki,Ka){var ka;et(un.next!==Dn,"can not update framebuffer which is currently in use");var _a=0,Ro=0,gu=!0,Uu=!0,go=null,ds=!0,Wo="rgba",lu="uint8",Ys=1,Hs=null,tu=null,vs=null,cu=!1;if(typeof ki=="number")_a=ki|0,Ro=Ka|0||_a;else if(!ki)_a=Ro=1;else{et.type(ki,"object","invalid arguments for framebuffer");var Va=ki;if("shape"in Va){var Zu=Va.shape;et(Array.isArray(Zu)&&Zu.length>=2,"invalid shape for framebuffer"),_a=Zu[0],Ro=Zu[1]}else"radius"in Va&&(_a=Ro=Va.radius),"width"in Va&&(_a=Va.width),"height"in Va&&(Ro=Va.height);("color"in Va||"colors"in Va)&&(go=Va.color||Va.colors,Array.isArray(go)&&et(go.length===1||tr.webgl_draw_buffers,"multiple render targets not supported")),go||("colorCount"in Va&&(Ys=Va.colorCount|0,et(Ys>0,"invalid color buffer count")),"colorTexture"in Va&&(ds=!!Va.colorTexture,Wo="rgba4"),"colorType"in Va&&(lu=Va.colorType,ds?(et(tr.oes_texture_float||!(lu==="float"||lu==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),et(tr.oes_texture_half_float||!(lu==="half float"||lu==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):lu==="half float"||lu==="float16"?(et(tr.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wo="rgba16f"):(lu==="float"||lu==="float32")&&(et(tr.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wo="rgba32f"),et.oneOf(lu,vi,"invalid color type")),"colorFormat"in Va&&(Wo=Va.colorFormat,ai.indexOf(Wo)>=0?ds=!0:Wn.indexOf(Wo)>=0?ds=!1:ds?et.oneOf(Va.colorFormat,ai,"invalid color format for texture"):et.oneOf(Va.colorFormat,Wn,"invalid color format for renderbuffer"))),("depthTexture"in Va||"depthStencilTexture"in Va)&&(cu=!!(Va.depthTexture||Va.depthStencilTexture),et(!cu||tr.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Va&&(typeof Va.depth=="boolean"?gu=Va.depth:(Hs=Va.depth,Uu=!1)),"stencil"in Va&&(typeof Va.stencil=="boolean"?Uu=Va.stencil:(tu=Va.stencil,gu=!1)),"depthStencil"in Va&&(typeof Va.depthStencil=="boolean"?gu=Uu=Va.depthStencil:(vs=Va.depthStencil,gu=!1,Uu=!1))}var No=null,da=null,ba=null,Io=null;if(Array.isArray(go))No=go.map(mi);else if(go)No=[mi(go)];else for(No=new Array(Ys),ka=0;ka<Ys;++ka)No[ka]=Qr(_a,Ro,ds,Wo,lu);et(tr.webgl_draw_buffers||No.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),et(No.length<=Ar.maxColorAttachments,"too many color attachments, not supported"),_a=_a||No[0].width,Ro=Ro||No[0].height,Hs?da=mi(Hs):gu&&!Uu&&(da=Qr(_a,Ro,cu,"depth","uint32")),tu?ba=mi(tu):Uu&&!gu&&(ba=Qr(_a,Ro,!1,"stencil","uint8")),vs?Io=mi(vs):!Hs&&!tu&&Uu&&gu&&(Io=Qr(_a,Ro,cu,"depth stencil","depth stencil")),et(!!Hs+!!tu+!!vs<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ts=null;for(ka=0;ka<No.length;++ka)if(bi(No[ka],_a,Ro),et(!No[ka]||No[ka].texture&&Mr.indexOf(No[ka].texture._texture.format)>=0||No[ka].renderbuffer&&I.indexOf(No[ka].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ka+" is invalid"),No[ka]&&No[ka].texture){var mu=Ve[No[ka].texture._texture.format]*Fc[No[ka].texture._texture.type];Ts===null?Ts=mu:et(Ts===mu,"all color attachments much have the same number of bits per pixel.")}return bi(da,_a,Ro),et(!da||da.texture&&da.texture._texture.format===pn||da.renderbuffer&&da.renderbuffer._renderbuffer.format===Sp,"invalid depth attachment for framebuffer object"),bi(ba,_a,Ro),et(!ba||ba.renderbuffer&&ba.renderbuffer._renderbuffer.format===Nf,"invalid stencil attachment for framebuffer object"),bi(Io,_a,Ro),et(!Io||Io.texture&&Io.texture._texture.format===Ul||Io.renderbuffer&&Io.renderbuffer._renderbuffer.format===Ul,"invalid depth-stencil attachment for framebuffer object"),ni(Dn),Dn.width=_a,Dn.height=Ro,Dn.colorAttachments=No,Dn.depthAttachment=da,Dn.stencilAttachment=ba,Dn.depthStencilAttachment=Io,ta.color=No.map(En),ta.depth=En(da),ta.stencil=En(ba),ta.depthStencil=En(Io),ta.width=Dn.width,ta.height=Dn.height,Un(Dn),ta}function to(ki,Ka){et(un.next!==Dn,"can not resize a framebuffer which is currently in use");var ka=Math.max(ki|0,1),_a=Math.max(Ka|0||ka,1);if(ka===Dn.width&&_a===Dn.height)return ta;for(var Ro=Dn.colorAttachments,gu=0;gu<Ro.length;++gu)si(Ro[gu],ka,_a);return si(Dn.depthAttachment,ka,_a),si(Dn.stencilAttachment,ka,_a),si(Dn.depthStencilAttachment,ka,_a),Dn.width=ta.width=ka,Dn.height=ta.height=_a,Un(Dn),ta}return ta(Ai,ii),k(ta,{resize:to,_reglType:"framebuffer",_framebuffer:Dn,destroy:function(){Mi(Dn),ni(Dn)},use:function(ki){un.setFBO({framebuffer:ta},ki)}})}function ca(Ai){var ii=Array(6);function Dn(to){var ki;et(ii.indexOf(un.next)<0,"can not update framebuffer which is currently in use");var Ka={color:null},ka=0,_a=null,Ro="rgba",gu="uint8",Uu=1;if(typeof to=="number")ka=to|0;else if(!to)ka=1;else{et.type(to,"object","invalid arguments for framebuffer");var go=to;if("shape"in go){var ds=go.shape;et(Array.isArray(ds)&&ds.length>=2,"invalid shape for framebuffer"),et(ds[0]===ds[1],"cube framebuffer must be square"),ka=ds[0]}else"radius"in go&&(ka=go.radius|0),"width"in go?(ka=go.width|0,"height"in go&&et(go.height===ka,"must be square")):"height"in go&&(ka=go.height|0);("color"in go||"colors"in go)&&(_a=go.color||go.colors,Array.isArray(_a)&&et(_a.length===1||tr.webgl_draw_buffers,"multiple render targets not supported")),_a||("colorCount"in go&&(Uu=go.colorCount|0,et(Uu>0,"invalid color buffer count")),"colorType"in go&&(et.oneOf(go.colorType,vi,"invalid color type"),gu=go.colorType),"colorFormat"in go&&(Ro=go.colorFormat,et.oneOf(go.colorFormat,ai,"invalid color format for texture"))),"depth"in go&&(Ka.depth=go.depth),"stencil"in go&&(Ka.stencil=go.stencil),"depthStencil"in go&&(Ka.depthStencil=go.depthStencil)}var Wo;if(_a)if(Array.isArray(_a))for(Wo=[],ki=0;ki<_a.length;++ki)Wo[ki]=_a[ki];else Wo=[_a];else{Wo=Array(Uu);var lu={radius:ka,format:Ro,type:gu};for(ki=0;ki<Uu;++ki)Wo[ki]=vn.createCube(lu)}for(Ka.color=Array(Wo.length),ki=0;ki<Wo.length;++ki){var Ys=Wo[ki];et(typeof Ys=="function"&&Ys._reglType==="textureCube","invalid cube map"),ka=ka||Ys.width,et(Ys.width===ka&&Ys.height===ka,"invalid cube map shape"),Ka.color[ki]={target:Fh,data:Wo[ki]}}for(ki=0;ki<6;++ki){for(var Hs=0;Hs<Wo.length;++Hs)Ka.color[Hs].target=Fh+ki;ki>0&&(Ka.depth=ii[0].depth,Ka.stencil=ii[0].stencil,Ka.depthStencil=ii[0].depthStencil),ii[ki]?ii[ki](Ka):ii[ki]=Si(Ka)}return k(Dn,{width:ka,height:ka,color:Wo})}function ta(to){var ki,Ka=to|0;if(et(Ka>0&&Ka<=Ar.maxCubeMapSize,"invalid radius for cube fbo"),Ka===Dn.width)return Dn;var ka=Dn.color;for(ki=0;ki<ka.length;++ki)ka[ki].resize(Ka);for(ki=0;ki<6;++ki)ii[ki].resize(Ka);return Dn.width=Dn.height=Ka,Dn}return Dn(Ai),k(Dn,{faces:ii,resize:ta,_reglType:"framebufferCube",destroy:function(){ii.forEach(function(to){to.destroy()})}})}function Ra(){un.cur=null,un.next=null,un.dirty=!0,oo(Kr).forEach(function(Ai){Ai.framebuffer=ot.createFramebuffer(),Un(Ai)})}return k(un,{getFramebuffer:function(Ai){if(typeof Ai=="function"&&Ai._reglType==="framebuffer"){var ii=Ai._framebuffer;if(ii instanceof Pi)return ii}return null},create:Si,createCube:ca,clear:function(){oo(Kr).forEach(Mi)},restore:Ra})}var fe=5126,Oe=34962;function ut(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=fe,this.offset=0,this.stride=0,this.divisor=0}function Et(ot,tr,Ar,vn,kn){for(var fn=Ar.maxAttributes,un=new Array(fn),ai=0;ai<fn;++ai)un[ai]=new ut;var Wn=0,vi={},oi={Record:ut,scope:{},state:un,currentVAO:null,targetVAO:null,restore:bi()?Kr:function(){},createVAO:Pi,getVAO:mi,destroyBuffer:fi,setVAO:bi()?Qr:En,clear:bi()?si:function(){}};function fi(ni){for(var Mi=0;Mi<un.length;++Mi){var Un=un[Mi];Un.buffer===ni&&(ot.disableVertexAttribArray(Mi),Un.buffer=null)}}function bi(){return tr.oes_vertex_array_object}function Mn(){return tr.angle_instanced_arrays}function mi(ni){return typeof ni=="function"&&ni._vao?ni._vao:null}function Qr(ni){if(ni!==oi.currentVAO){var Mi=bi();ni?Mi.bindVertexArrayOES(ni.vao):Mi.bindVertexArrayOES(null),oi.currentVAO=ni}}function En(ni){if(ni!==oi.currentVAO){if(ni)ni.bindAttrs();else for(var Mi=Mn(),Un=0;Un<un.length;++Un){var Si=un[Un];Si.buffer?(ot.enableVertexAttribArray(Un),ot.vertexAttribPointer(Un,Si.size,Si.type,Si.normalized,Si.stride,Si.offfset),Mi&&Mi.vertexAttribDivisorANGLE(Un,Si.divisor)):(ot.disableVertexAttribArray(Un),ot.vertexAttrib4f(Un,Si.x,Si.y,Si.z,Si.w))}oi.currentVAO=ni}}function si(){oo(vi).forEach(function(ni){ni.destroy()})}function Ti(){this.id=++Wn,this.attributes=[];var ni=bi();ni?this.vao=ni.createVertexArrayOES():this.vao=null,vi[this.id]=this,this.buffers=[]}Ti.prototype.bindAttrs=function(){for(var ni=Mn(),Mi=this.attributes,Un=0;Un<Mi.length;++Un){var Si=Mi[Un];Si.buffer?(ot.enableVertexAttribArray(Un),ot.bindBuffer(Oe,Si.buffer.buffer),ot.vertexAttribPointer(Un,Si.size,Si.type,Si.normalized,Si.stride,Si.offset),ni&&ni.vertexAttribDivisorANGLE(Un,Si.divisor)):(ot.disableVertexAttribArray(Un),ot.vertexAttrib4f(Un,Si.x,Si.y,Si.z,Si.w))}for(var ca=Mi.length;ca<fn;++ca)ot.disableVertexAttribArray(ca)},Ti.prototype.refresh=function(){var ni=bi();ni&&(ni.bindVertexArrayOES(this.vao),this.bindAttrs(),oi.currentVAO=this)},Ti.prototype.destroy=function(){if(this.vao){var ni=bi();this===oi.currentVAO&&(oi.currentVAO=null,ni.bindVertexArrayOES(null)),ni.deleteVertexArrayOES(this.vao),this.vao=null}vi[this.id]&&(delete vi[this.id],vn.vaoCount-=1)};function Kr(){var ni=bi();ni&&oo(vi).forEach(function(Mi){Mi.refresh()})}function Pi(ni){var Mi=new Ti;vn.vaoCount+=1;function Un(Si){et(Array.isArray(Si),"arguments to vertex array constructor must be an array"),et(Si.length<fn,"too many attributes"),et(Si.length>0,"must specify at least one attribute");for(var ca=0;ca<Mi.buffers.length;++ca)Mi.buffers[ca].destroy();Mi.buffers.length=0;var Ra=Mi.attributes;Ra.length=Si.length;for(var Ai=0;Ai<Si.length;++Ai){var ii=Si[Ai],Dn=Ra[Ai]=new ut;if(Array.isArray(ii)||N(ii)||ko(ii)){var ta=kn.create(ii,Oe,!1,!0);Dn.buffer=kn.getBuffer(ta),Dn.size=Dn.buffer.dimension|0,Dn.normalized=!1,Dn.type=Dn.buffer.dtype,Dn.offset=0,Dn.stride=0,Dn.divisor=0,Dn.state=1,Mi.buffers.push(ta)}else kn.getBuffer(ii)?(Dn.buffer=kn.getBuffer(ii),Dn.size=Dn.buffer.dimension|0,Dn.normalized=!1,Dn.type=Dn.buffer.dtype,Dn.offset=0,Dn.stride=0,Dn.divisor=0,Dn.state=1):kn.getBuffer(ii.buffer)?(Dn.buffer=kn.getBuffer(ii.buffer),Dn.size=(+ii.size||Dn.buffer.dimension)|0,Dn.normalized=!!ii.normalized||!1,"type"in ii?(et.parameter(ii.type,du,"invalid buffer type"),Dn.type=du[ii.type]):Dn.type=Dn.buffer.dtype,Dn.offset=(ii.offset||0)|0,Dn.stride=(ii.stride||0)|0,Dn.divisor=(ii.divisor||0)|0,Dn.state=1,et(Dn.size>=1&&Dn.size<=4,"size must be between 1 and 4"),et(Dn.offset>=0,"invalid offset"),et(Dn.stride>=0&&Dn.stride<=255,"stride must be between 0 and 255"),et(Dn.divisor>=0,"divisor must be positive"),et(!Dn.divisor||!!tr.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ii?(et(Ai>0,"first attribute must not be a constant"),Dn.x=+ii.x||0,Dn.y=+ii.y||0,Dn.z=+ii.z||0,Dn.w=+ii.w||0,Dn.state=2):et(!1,"invalid attribute spec for location "+Ai)}return Mi.refresh(),Un}return Un.destroy=function(){Mi.destroy()},Un._vao=Mi,Un._reglType="vao",Un(ni)}return oi}var Wt=35632,Xt=35633,Kt=35718,_r=35721;function dr(ot,tr,Ar,vn){var kn={},fn={};function un(Qr,En,si,Ti){this.name=Qr,this.id=En,this.location=si,this.info=Ti}function ai(Qr,En){for(var si=0;si<Qr.length;++si)if(Qr[si].id===En.id){Qr[si].location=En.location;return}Qr.push(En)}function Wn(Qr,En,si){var Ti=Qr===Wt?kn:fn,Kr=Ti[En];if(!Kr){var Pi=tr.str(En);Kr=ot.createShader(Qr),ot.shaderSource(Kr,Pi),ot.compileShader(Kr),et.shaderError(ot,Kr,Pi,Qr,si),Ti[En]=Kr}return Kr}var vi={},oi=[],fi=0;function bi(Qr,En){this.id=fi++,this.fragId=Qr,this.vertId=En,this.program=null,this.uniforms=[],this.attributes=[],vn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Mn(Qr,En,si){var Ti,Kr,Pi=Wn(Wt,Qr.fragId),ni=Wn(Xt,Qr.vertId),Mi=Qr.program=ot.createProgram();if(ot.attachShader(Mi,Pi),ot.attachShader(Mi,ni),si)for(Ti=0;Ti<si.length;++Ti){var Un=si[Ti];ot.bindAttribLocation(Mi,Un[0],Un[1])}ot.linkProgram(Mi),et.linkError(ot,Mi,tr.str(Qr.fragId),tr.str(Qr.vertId),En);var Si=ot.getProgramParameter(Mi,Kt);vn.profile&&(Qr.stats.uniformsCount=Si);var ca=Qr.uniforms;for(Ti=0;Ti<Si;++Ti)if(Kr=ot.getActiveUniform(Mi,Ti),Kr)if(Kr.size>1)for(var Ra=0;Ra<Kr.size;++Ra){var Ai=Kr.name.replace("[0]","["+Ra+"]");ai(ca,new un(Ai,tr.id(Ai),ot.getUniformLocation(Mi,Ai),Kr))}else ai(ca,new un(Kr.name,tr.id(Kr.name),ot.getUniformLocation(Mi,Kr.name),Kr));var ii=ot.getProgramParameter(Mi,_r);vn.profile&&(Qr.stats.attributesCount=ii);var Dn=Qr.attributes;for(Ti=0;Ti<ii;++Ti)Kr=ot.getActiveAttrib(Mi,Ti),Kr&&ai(Dn,new un(Kr.name,tr.id(Kr.name),ot.getAttribLocation(Mi,Kr.name),Kr))}vn.profile&&(Ar.getMaxUniformsCount=function(){var Qr=0;return oi.forEach(function(En){En.stats.uniformsCount>Qr&&(Qr=En.stats.uniformsCount)}),Qr},Ar.getMaxAttributesCount=function(){var Qr=0;return oi.forEach(function(En){En.stats.attributesCount>Qr&&(Qr=En.stats.attributesCount)}),Qr});function mi(){kn={},fn={};for(var Qr=0;Qr<oi.length;++Qr)Mn(oi[Qr],null,oi[Qr].attributes.map(function(En){return[En.location,En.name]}))}return{clear:function(){var Qr=ot.deleteShader.bind(ot);oo(kn).forEach(Qr),kn={},oo(fn).forEach(Qr),fn={},oi.forEach(function(En){ot.deleteProgram(En.program)}),oi.length=0,vi={},Ar.shaderCount=0},program:function(Qr,En,si,Ti){et.command(Qr>=0,"missing vertex shader",si),et.command(En>=0,"missing fragment shader",si);var Kr=vi[En];Kr||(Kr=vi[En]={});var Pi=Kr[Qr];if(Pi&&!Ti)return Pi;var ni=new bi(En,Qr);return Ar.shaderCount++,Mn(ni,si,Ti),Pi||(Kr[Qr]=ni),oi.push(ni),ni},restore:mi,shader:Wn,frag:-1,vert:-1}}var Pr=6408,cr=5121,Dr=3333,Wr=5126;function rn(ot,tr,Ar,vn,kn,fn,un){function ai(oi){var fi;tr.next===null?(et(kn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),fi=cr):(et(tr.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),fi=tr.next.colorAttachments[0].texture._texture.type,fn.oes_texture_float?(et(fi===cr||fi===Wr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),fi===Wr&&et(un.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):et(fi===cr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var bi=0,Mn=0,mi=vn.framebufferWidth,Qr=vn.framebufferHeight,En=null;N(oi)?En=oi:oi&&(et.type(oi,"object","invalid arguments to regl.read()"),bi=oi.x|0,Mn=oi.y|0,et(bi>=0&&bi<vn.framebufferWidth,"invalid x offset for regl.read"),et(Mn>=0&&Mn<vn.framebufferHeight,"invalid y offset for regl.read"),mi=(oi.width||vn.framebufferWidth-bi)|0,Qr=(oi.height||vn.framebufferHeight-Mn)|0,En=oi.data||null),En&&(fi===cr?et(En instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):fi===Wr&&et(En instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),et(mi>0&&mi+bi<=vn.framebufferWidth,"invalid width for read pixels"),et(Qr>0&&Qr+Mn<=vn.framebufferHeight,"invalid height for read pixels"),Ar();var si=mi*Qr*4;return En||(fi===cr?En=new Uint8Array(si):fi===Wr&&(En=En||new Float32Array(si))),et.isTypedArray(En,"data buffer for regl.read() must be a typedarray"),et(En.byteLength>=si,"data buffer for regl.read() too small"),ot.pixelStorei(Dr,4),ot.readPixels(bi,Mn,mi,Qr,Pr,fi,En),En}function Wn(oi){var fi;return tr.setFBO({framebuffer:oi.framebuffer},function(){fi=ai(oi)}),fi}function vi(oi){return!oi||!("framebuffer"in oi)?ai(oi):Wn(oi)}return vi}function xn(ot){return Array.prototype.slice.call(ot)}function dn(ot){return xn(ot).join("")}function An(){var ot=0,tr=[],Ar=[];function vn(fi){for(var bi=0;bi<Ar.length;++bi)if(Ar[bi]===fi)return tr[bi];var Mn="g"+ot++;return tr.push(Mn),Ar.push(fi),Mn}function kn(){var fi=[];function bi(){fi.push.apply(fi,xn(arguments))}var Mn=[];function mi(){var Qr="v"+ot++;return Mn.push(Qr),arguments.length>0&&(fi.push(Qr,"="),fi.push.apply(fi,xn(arguments)),fi.push(";")),Qr}return k(bi,{def:mi,toString:function(){return dn([Mn.length>0?"var "+Mn.join(",")+";":"",dn(fi)])}})}function fn(){var fi=kn(),bi=kn(),Mn=fi.toString,mi=bi.toString;function Qr(En,si){bi(En,si,"=",fi.def(En,si),";")}return k(function(){fi.apply(fi,xn(arguments))},{def:fi.def,entry:fi,exit:bi,save:Qr,set:function(En,si,Ti){Qr(En,si),fi(En,si,"=",Ti,";")},toString:function(){return Mn()+mi()}})}function un(){var fi=dn(arguments),bi=fn(),Mn=fn(),mi=bi.toString,Qr=Mn.toString;return k(bi,{then:function(){return bi.apply(bi,xn(arguments)),this},else:function(){return Mn.apply(Mn,xn(arguments)),this},toString:function(){var En=Qr();return En&&(En="else{"+En+"}"),dn(["if(",fi,"){",mi(),"}",En])}})}var ai=kn(),Wn={};function vi(fi,bi){var Mn=[];function mi(){var Kr="a"+Mn.length;return Mn.push(Kr),Kr}bi=bi||0;for(var Qr=0;Qr<bi;++Qr)mi();var En=fn(),si=En.toString,Ti=Wn[fi]=k(En,{arg:mi,toString:function(){return dn(["function(",Mn.join(),"){",si(),"}"])}});return Ti}function oi(){var fi=['"use strict";',ai,"return {"];Object.keys(Wn).forEach(function(mi){fi.push('"',mi,'":',Wn[mi].toString(),",")}),fi.push("}");var bi=dn(fi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mn=Function.apply(null,tr.concat(bi));return Mn.apply(null,Ar)}return{global:ai,link:vn,block:kn,proc:vi,scope:fn,cond:un,compile:oi}}var Vn="xyzw".split(""),ui=5121,li=1,Ri=2,ea=0,ua=1,ra=2,uo=3,Li=4,Oa="dither",Ha="blend.enable",va="blend.color",Ea="blend.equation",Pa="blend.func",la="depth.enable",ga="depth.func",Tu="depth.range",Vs="depth.mask",$u="colorMask",zu="cull.enable",es="cull.face",ws="frontFace",Xu="lineWidth",Js="polygonOffset.enable",Jc="polygonOffset.offset",Sl="sample.alpha",oc="sample.enable",Zl="sample.coverage",yf="stencil.enable",zf="stencil.mask",_c="stencil.func",Uf="stencil.opFront",ef="stencil.opBack",Vl="scissor.enable",_f="scissor.box",Au="viewport",Ps="profile",Yu="framebuffer",qu="vert",jl="frag",vo="elements",Ku="primitive",Mu="count",xc="offset",nd="instances",dh="vao",id="Width",Hl="Height",Pl=Yu+id,Wl=Yu+Hl,Zh=Au+id,wp=Au+Hl,tf="drawingBuffer",kl=tf+id,vg=tf+Hl,wv=[Pa,Ea,_c,Uf,ef,Zl,Au,_f,Jc],bc=34962,g_=34963,b0=35632,S0=35633,Cv=3553,E0=34067,Cp=2884,gg=3042,Tp=3024,jd=2960,dm=2929,Ap=3089,mg=32823,w0=32926,C0=32928,yg=5126,Tv=35664,Hd=35665,_g=35666,vh=5124,Mp=35667,Cs=35668,Vh=35669,Av=35670,Gl=35671,Jn=35672,xf=35673,Wd=35674,eu=35675,$l=35676,bf=35678,Sc=35680,gh=4,Xl=1028,mh=1029,xg=2304,bg=2305,Gd=32775,ad=32776,Bc=519,jh=7680,$d=0,vm=1,Sg=32774,Mv=513,js=36160,Zf=36064,rf={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},od=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],sd={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Nc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Rp={frag:b0,vert:S0},Hh={cw:xg,ccw:bg};function Yl(ot){return Array.isArray(ot)||N(ot)||ko(ot)}function Sf(ot){return ot.sort(function(tr,Ar){return tr===Au?-1:Ar===Au?1:tr<Ar?-1:1})}function ls(ot,tr,Ar,vn){this.thisDep=ot,this.contextDep=tr,this.propDep=Ar,this.append=vn}function cl(ot){return ot&&!(ot.thisDep||ot.contextDep||ot.propDep)}function Xs(ot){return new ls(!1,!1,!1,ot)}function El(ot,tr){var Ar=ot.type;if(Ar===ea){var vn=ot.data.length;return new ls(!0,vn>=1,vn>=2,tr)}else if(Ar===Li){var kn=ot.data;return new ls(kn.thisDep,kn.contextDep,kn.propDep,tr)}else return new ls(Ar===uo,Ar===ra,Ar===ua,tr)}var gm=new ls(!1,!1,!1,function(){});function Wh(ot,tr,Ar,vn,kn,fn,un,ai,Wn,vi,oi,fi,bi,Mn,mi){var Qr=vi.Record,En={add:32774,subtract:32778,"reverse subtract":32779};Ar.ext_blend_minmax&&(En.min=Gd,En.max=ad);var si=Ar.angle_instanced_arrays,Ti=Ar.webgl_draw_buffers,Kr={dirty:!0,profile:mi.profile},Pi={},ni=[],Mi={},Un={};function Si(Vt){return Vt.replace(".","_")}function ca(Vt,kt,wr){var Qt=Si(Vt);ni.push(Vt),Pi[Qt]=Kr[Qt]=!!wr,Mi[Qt]=kt}function Ra(Vt,kt,wr){var Qt=Si(Vt);ni.push(Vt),Array.isArray(wr)?(Kr[Qt]=wr.slice(),Pi[Qt]=wr.slice()):Kr[Qt]=Pi[Qt]=wr,Un[Qt]=kt}ca(Oa,Tp),ca(Ha,gg),Ra(va,"blendColor",[0,0,0,0]),Ra(Ea,"blendEquationSeparate",[Sg,Sg]),Ra(Pa,"blendFuncSeparate",[vm,$d,vm,$d]),ca(la,dm,!0),Ra(ga,"depthFunc",Mv),Ra(Tu,"depthRange",[0,1]),Ra(Vs,"depthMask",!0),Ra($u,$u,[!0,!0,!0,!0]),ca(zu,Cp),Ra(es,"cullFace",mh),Ra(ws,ws,bg),Ra(Xu,Xu,1),ca(Js,mg),Ra(Jc,"polygonOffset",[0,0]),ca(Sl,w0),ca(oc,C0),Ra(Zl,"sampleCoverage",[1,!1]),ca(yf,jd),Ra(zf,"stencilMask",-1),Ra(_c,"stencilFunc",[Bc,0,-1]),Ra(Uf,"stencilOpSeparate",[Xl,jh,jh,jh]),Ra(ef,"stencilOpSeparate",[mh,jh,jh,jh]),ca(Vl,Ap),Ra(_f,"scissor",[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]),Ra(Au,Au,[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]);var Ai={gl:ot,context:bi,strings:tr,next:Pi,current:Kr,draw:fi,elements:fn,buffer:kn,shader:oi,attributes:vi.state,vao:vi,uniforms:Wn,framebuffer:ai,extensions:Ar,timer:Mn,isBufferArgs:Yl},ii={primTypes:fc,compareFuncs:sd,blendFuncs:rf,blendEquations:En,stencilOps:Nc,glTypes:du,orientationType:Hh};et.optional(function(){Ai.isArrayLike=ss}),Ti&&(ii.backBuffer=[mh],ii.drawBuffer=Pt(vn.maxDrawbuffers,function(Vt){return Vt===0?[0]:Pt(Vt,function(kt){return Zf+kt})}));var Dn=0;function ta(){var Vt=An(),kt=Vt.link,wr=Vt.global;Vt.id=Dn++,Vt.batchId="0";var Qt=kt(Ai),sn=Vt.shared={props:"a0"};Object.keys(Ai).forEach(function(Ur){sn[Ur]=wr.def(Qt,".",Ur)}),et.optional(function(){Vt.CHECK=kt(et),Vt.commandStr=et.guessCommand(),Vt.command=kt(Vt.commandStr),Vt.assert=function(Ur,or,jr){Ur("if(!(",or,"))",this.CHECK,".commandRaise(",kt(jr),",",this.command,");")},ii.invalidBlendCombinations=od});var Lr=Vt.next={},Zr=Vt.current={};Object.keys(Un).forEach(function(Ur){Array.isArray(Kr[Ur])&&(Lr[Ur]=wr.def(sn.next,".",Ur),Zr[Ur]=wr.def(sn.current,".",Ur))});var Gr=Vt.constants={};Object.keys(ii).forEach(function(Ur){Gr[Ur]=wr.def(JSON.stringify(ii[Ur]))}),Vt.invoke=function(Ur,or){switch(or.type){case ea:var jr=["this",sn.context,sn.props,Vt.batchId];return Ur.def(kt(or.data),".call(",jr.slice(0,Math.max(or.data.length+1,4)),")");case ua:return Ur.def(sn.props,or.data);case ra:return Ur.def(sn.context,or.data);case uo:return Ur.def("this",or.data);case Li:return or.data.append(Vt,Ur),or.data.ref}},Vt.attribCache={};var yr={};return Vt.scopeAttrib=function(Ur){var or=tr.id(Ur);if(or in yr)return yr[or];var jr=vi.scope[or];jr||(jr=vi.scope[or]=new Qr);var bn=yr[or]=kt(jr);return bn},Vt}function to(Vt){var kt=Vt.static,wr=Vt.dynamic,Qt;if(Ps in kt){var sn=!!kt[Ps];Qt=Xs(function(Zr,Gr){return sn}),Qt.enable=sn}else if(Ps in wr){var Lr=wr[Ps];Qt=El(Lr,function(Zr,Gr){return Zr.invoke(Gr,Lr)})}return Qt}function ki(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic;if(Yu in wr){var sn=wr[Yu];return sn?(sn=ai.getFramebuffer(sn),et.command(sn,"invalid framebuffer object"),Xs(function(Zr,Gr){var yr=Zr.link(sn),Ur=Zr.shared;Gr.set(Ur.framebuffer,".next",yr);var or=Ur.context;return Gr.set(or,"."+Pl,yr+".width"),Gr.set(or,"."+Wl,yr+".height"),yr})):Xs(function(Zr,Gr){var yr=Zr.shared;Gr.set(yr.framebuffer,".next","null");var Ur=yr.context;return Gr.set(Ur,"."+Pl,Ur+"."+kl),Gr.set(Ur,"."+Wl,Ur+"."+vg),"null"})}else if(Yu in Qt){var Lr=Qt[Yu];return El(Lr,function(Zr,Gr){var yr=Zr.invoke(Gr,Lr),Ur=Zr.shared,or=Ur.framebuffer,jr=Gr.def(or,".getFramebuffer(",yr,")");et.optional(function(){Zr.assert(Gr,"!"+yr+"||"+jr,"invalid framebuffer object")}),Gr.set(or,".next",jr);var bn=Ur.context;return Gr.set(bn,"."+Pl,jr+"?"+jr+".width:"+bn+"."+kl),Gr.set(bn,"."+Wl,jr+"?"+jr+".height:"+bn+"."+vg),jr})}else return null}function Ka(Vt,kt,wr){var Qt=Vt.static,sn=Vt.dynamic;function Lr(yr){if(yr in Qt){var Ur=Qt[yr];et.commandType(Ur,"object","invalid "+yr,wr.commandStr);var or=!0,jr=Ur.x|0,bn=Ur.y|0,Sn,Xn;return"width"in Ur?(Sn=Ur.width|0,et.command(Sn>=0,"invalid "+yr,wr.commandStr)):or=!1,"height"in Ur?(Xn=Ur.height|0,et.command(Xn>=0,"invalid "+yr,wr.commandStr)):or=!1,new ls(!or&&kt&&kt.thisDep,!or&&kt&&kt.contextDep,!or&&kt&&kt.propDep,function(Xi,Fn){var Gi=Xi.shared.context,xa=Sn;"width"in Ur||(xa=Fn.def(Gi,".",Pl,"-",jr));var Da=Xn;return"height"in Ur||(Da=Fn.def(Gi,".",Wl,"-",bn)),[jr,bn,xa,Da]})}else if(yr in sn){var Zn=sn[yr],qn=El(Zn,function(Xi,Fn){var Gi=Xi.invoke(Fn,Zn);et.optional(function(){Xi.assert(Fn,Gi+"&&typeof "+Gi+'==="object"',"invalid "+yr)});var xa=Xi.shared.context,Da=Fn.def(Gi,".x|0"),zo=Fn.def(Gi,".y|0"),za=Fn.def('"width" in ',Gi,"?",Gi,".width|0:","(",xa,".",Pl,"-",Da,")"),ql=Fn.def('"height" in ',Gi,"?",Gi,".height|0:","(",xa,".",Wl,"-",zo,")");return et.optional(function(){Xi.assert(Fn,za+">=0&&"+ql+">=0","invalid "+yr)}),[Da,zo,za,ql]});return kt&&(qn.thisDep=qn.thisDep||kt.thisDep,qn.contextDep=qn.contextDep||kt.contextDep,qn.propDep=qn.propDep||kt.propDep),qn}else return kt?new ls(kt.thisDep,kt.contextDep,kt.propDep,function(Xi,Fn){var Gi=Xi.shared.context;return[0,0,Fn.def(Gi,".",Pl),Fn.def(Gi,".",Wl)]}):null}var Zr=Lr(Au);if(Zr){var Gr=Zr;Zr=new ls(Zr.thisDep,Zr.contextDep,Zr.propDep,function(yr,Ur){var or=Gr.append(yr,Ur),jr=yr.shared.context;return Ur.set(jr,"."+Zh,or[2]),Ur.set(jr,"."+wp,or[3]),or})}return{viewport:Zr,scissor_box:Lr(_f)}}function ka(Vt,kt){var wr=Vt.static,Qt=typeof wr[jl]=="string"&&typeof wr[qu]=="string";if(Qt){if(Object.keys(kt.dynamic).length>0)return null;var sn=kt.static,Lr=Object.keys(sn);if(Lr.length>0&&typeof sn[Lr[0]]=="number"){for(var Zr=[],Gr=0;Gr<Lr.length;++Gr)et(typeof sn[Lr[Gr]]=="number","must specify all vertex attribute locations when using vaos"),Zr.push([sn[Lr[Gr]]|0,Lr[Gr]]);return Zr}}return null}function _a(Vt,kt,wr){var Qt=Vt.static,sn=Vt.dynamic;function Lr(or){if(or in Qt){var jr=tr.id(Qt[or]);et.optional(function(){oi.shader(Rp[or],jr,et.guessCommand())});var bn=Xs(function(){return jr});return bn.id=jr,bn}else if(or in sn){var Sn=sn[or];return El(Sn,function(Xn,Zn){var qn=Xn.invoke(Zn,Sn),Xi=Zn.def(Xn.shared.strings,".id(",qn,")");return et.optional(function(){Zn(Xn.shared.shader,".shader(",Rp[or],",",Xi,",",Xn.command,");")}),Xi})}return null}var Zr=Lr(jl),Gr=Lr(qu),yr=null,Ur;return cl(Zr)&&cl(Gr)?(yr=oi.program(Gr.id,Zr.id,null,wr),Ur=Xs(function(or,jr){return or.link(yr)})):Ur=new ls(Zr&&Zr.thisDep||Gr&&Gr.thisDep,Zr&&Zr.contextDep||Gr&&Gr.contextDep,Zr&&Zr.propDep||Gr&&Gr.propDep,function(or,jr){var bn=or.shared.shader,Sn;Zr?Sn=Zr.append(or,jr):Sn=jr.def(bn,".",jl);var Xn;Gr?Xn=Gr.append(or,jr):Xn=jr.def(bn,".",qu);var Zn=bn+".program("+Xn+","+Sn;return et.optional(function(){Zn+=","+or.command}),jr.def(Zn+")")}),{frag:Zr,vert:Gr,progVar:Ur,program:yr}}function Ro(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic;function sn(){if(vo in wr){var or=wr[vo];Yl(or)?or=fn.getElements(fn.create(or,!0)):or&&(or=fn.getElements(or),et.command(or,"invalid elements",kt.commandStr));var jr=Xs(function(Sn,Xn){if(or){var Zn=Sn.link(or);return Sn.ELEMENTS=Zn,Zn}return Sn.ELEMENTS=null,null});return jr.value=or,jr}else if(vo in Qt){var bn=Qt[vo];return El(bn,function(Sn,Xn){var Zn=Sn.shared,qn=Zn.isBufferArgs,Xi=Zn.elements,Fn=Sn.invoke(Xn,bn),Gi=Xn.def("null"),xa=Xn.def(qn,"(",Fn,")"),Da=Sn.cond(xa).then(Gi,"=",Xi,".createStream(",Fn,");").else(Gi,"=",Xi,".getElements(",Fn,");");return et.optional(function(){Sn.assert(Da.else,"!"+Fn+"||"+Gi,"invalid elements")}),Xn.entry(Da),Xn.exit(Sn.cond(xa).then(Xi,".destroyStream(",Gi,");")),Sn.ELEMENTS=Gi,Gi})}return null}var Lr=sn();function Zr(){if(Ku in wr){var or=wr[Ku];return et.commandParameter(or,fc,"invalid primitve",kt.commandStr),Xs(function(bn,Sn){return fc[or]})}else if(Ku in Qt){var jr=Qt[Ku];return El(jr,function(bn,Sn){var Xn=bn.constants.primTypes,Zn=bn.invoke(Sn,jr);return et.optional(function(){bn.assert(Sn,Zn+" in "+Xn,"invalid primitive, must be one of "+Object.keys(fc))}),Sn.def(Xn,"[",Zn,"]")})}else if(Lr)return cl(Lr)?Lr.value?Xs(function(bn,Sn){return Sn.def(bn.ELEMENTS,".primType")}):Xs(function(){return gh}):new ls(Lr.thisDep,Lr.contextDep,Lr.propDep,function(bn,Sn){var Xn=bn.ELEMENTS;return Sn.def(Xn,"?",Xn,".primType:",gh)});return null}function Gr(or,jr){if(or in wr){var bn=wr[or]|0;return et.command(!jr||bn>=0,"invalid "+or,kt.commandStr),Xs(function(Xn,Zn){return jr&&(Xn.OFFSET=bn),bn})}else if(or in Qt){var Sn=Qt[or];return El(Sn,function(Xn,Zn){var qn=Xn.invoke(Zn,Sn);return jr&&(Xn.OFFSET=qn,et.optional(function(){Xn.assert(Zn,qn+">=0","invalid "+or)})),qn})}else if(jr&&Lr)return Xs(function(Xn,Zn){return Xn.OFFSET="0",0});return null}var yr=Gr(xc,!0);function Ur(){if(Mu in wr){var or=wr[Mu]|0;return et.command(typeof or=="number"&&or>=0,"invalid vertex count",kt.commandStr),Xs(function(){return or})}else if(Mu in Qt){var jr=Qt[Mu];return El(jr,function(Xn,Zn){var qn=Xn.invoke(Zn,jr);return et.optional(function(){Xn.assert(Zn,"typeof "+qn+'==="number"&&'+qn+">=0&&"+qn+"===("+qn+"|0)","invalid vertex count")}),qn})}else if(Lr)if(cl(Lr)){if(Lr)return yr?new ls(yr.thisDep,yr.contextDep,yr.propDep,function(Xn,Zn){var qn=Zn.def(Xn.ELEMENTS,".vertCount-",Xn.OFFSET);return et.optional(function(){Xn.assert(Zn,qn+">=0","invalid vertex offset/element buffer too small")}),qn}):Xs(function(Xn,Zn){return Zn.def(Xn.ELEMENTS,".vertCount")});var bn=Xs(function(){return-1});return et.optional(function(){bn.MISSING=!0}),bn}else{var Sn=new ls(Lr.thisDep||yr.thisDep,Lr.contextDep||yr.contextDep,Lr.propDep||yr.propDep,function(Xn,Zn){var qn=Xn.ELEMENTS;return Xn.OFFSET?Zn.def(qn,"?",qn,".vertCount-",Xn.OFFSET,":-1"):Zn.def(qn,"?",qn,".vertCount:-1")});return et.optional(function(){Sn.DYNAMIC=!0}),Sn}return null}return{elements:Lr,primitive:Zr(),count:Ur(),instances:Gr(nd,!1),offset:yr}}function gu(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic,sn={};return ni.forEach(function(Lr){var Zr=Si(Lr);function Gr(yr,Ur){if(Lr in wr){var or=yr(wr[Lr]);sn[Zr]=Xs(function(){return or})}else if(Lr in Qt){var jr=Qt[Lr];sn[Zr]=El(jr,function(bn,Sn){return Ur(bn,Sn,bn.invoke(Sn,jr))})}}switch(Lr){case zu:case Ha:case Oa:case yf:case la:case Vl:case Js:case Sl:case oc:case Vs:return Gr(function(yr){return et.commandType(yr,"boolean",Lr,kt.commandStr),yr},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,"typeof "+or+'==="boolean"',"invalid flag "+Lr,yr.commandStr)}),or});case ga:return Gr(function(yr){return et.commandParameter(yr,sd,"invalid "+Lr,kt.commandStr),sd[yr]},function(yr,Ur,or){var jr=yr.constants.compareFuncs;return et.optional(function(){yr.assert(Ur,or+" in "+jr,"invalid "+Lr+", must be one of "+Object.keys(sd))}),Ur.def(jr,"[",or,"]")});case Tu:return Gr(function(yr){return et.command(ss(yr)&&yr.length===2&&typeof yr[0]=="number"&&typeof yr[1]=="number"&&yr[0]<=yr[1],"depth range is 2d array",kt.commandStr),yr},function(yr,Ur,or){et.optional(function(){yr.assert(Ur,yr.shared.isArrayLike+"("+or+")&&"+or+".length===2&&typeof "+or+'[0]==="number"&&typeof '+or+'[1]==="number"&&'+or+"[0]<="+or+"[1]","depth range must be a 2d array")});var jr=Ur.def("+",or,"[0]"),bn=Ur.def("+",or,"[1]");return[jr,bn]});case Pa:return Gr(function(yr){et.commandType(yr,"object","blend.func",kt.commandStr);var Ur="srcRGB"in yr?yr.srcRGB:yr.src,or="srcAlpha"in yr?yr.srcAlpha:yr.src,jr="dstRGB"in yr?yr.dstRGB:yr.dst,bn="dstAlpha"in yr?yr.dstAlpha:yr.dst;return et.commandParameter(Ur,rf,Zr+".srcRGB",kt.commandStr),et.commandParameter(or,rf,Zr+".srcAlpha",kt.commandStr),et.commandParameter(jr,rf,Zr+".dstRGB",kt.commandStr),et.commandParameter(bn,rf,Zr+".dstAlpha",kt.commandStr),et.command(od.indexOf(Ur+", "+jr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ur+", "+jr+")",kt.commandStr),[rf[Ur],rf[jr],rf[or],rf[bn]]},function(yr,Ur,or){var jr=yr.constants.blendFuncs;et.optional(function(){yr.assert(Ur,or+"&&typeof "+or+'==="object"',"invalid blend func, must be an object")});function bn(Gi,xa){var Da=Ur.def('"',Gi,xa,'" in ',or,"?",or,".",Gi,xa,":",or,".",Gi);return et.optional(function(){yr.assert(Ur,Da+" in "+jr,"invalid "+Lr+"."+Gi+xa+", must be one of "+Object.keys(rf))}),Da}var Sn=bn("src","RGB"),Xn=bn("dst","RGB");et.optional(function(){var Gi=yr.constants.invalidBlendCombinations;yr.assert(Ur,Gi+".indexOf("+Sn+'+", "+'+Xn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Zn=Ur.def(jr,"[",Sn,"]"),qn=Ur.def(jr,"[",bn("src","Alpha"),"]"),Xi=Ur.def(jr,"[",Xn,"]"),Fn=Ur.def(jr,"[",bn("dst","Alpha"),"]");return[Zn,Xi,qn,Fn]});case Ea:return Gr(function(yr){if(typeof yr=="string")return et.commandParameter(yr,En,"invalid "+Lr,kt.commandStr),[En[yr],En[yr]];if(typeof yr=="object")return et.commandParameter(yr.rgb,En,Lr+".rgb",kt.commandStr),et.commandParameter(yr.alpha,En,Lr+".alpha",kt.commandStr),[En[yr.rgb],En[yr.alpha]];et.commandRaise("invalid blend.equation",kt.commandStr)},function(yr,Ur,or){var jr=yr.constants.blendEquations,bn=Ur.def(),Sn=Ur.def(),Xn=yr.cond("typeof ",or,'==="string"');return et.optional(function(){function Zn(qn,Xi,Fn){yr.assert(qn,Fn+" in "+jr,"invalid "+Xi+", must be one of "+Object.keys(En))}Zn(Xn.then,Lr,or),yr.assert(Xn.else,or+"&&typeof "+or+'==="object"',"invalid "+Lr),Zn(Xn.else,Lr+".rgb",or+".rgb"),Zn(Xn.else,Lr+".alpha",or+".alpha")}),Xn.then(bn,"=",Sn,"=",jr,"[",or,"];"),Xn.else(bn,"=",jr,"[",or,".rgb];",Sn,"=",jr,"[",or,".alpha];"),Ur(Xn),[bn,Sn]});case va:return Gr(function(yr){return et.command(ss(yr)&&yr.length===4,"blend.color must be a 4d array",kt.commandStr),Pt(4,function(Ur){return+yr[Ur]})},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,yr.shared.isArrayLike+"("+or+")&&"+or+".length===4","blend.color must be a 4d array")}),Pt(4,function(jr){return Ur.def("+",or,"[",jr,"]")})});case zf:return Gr(function(yr){return et.commandType(yr,"number",Zr,kt.commandStr),yr|0},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,"typeof "+or+'==="number"',"invalid stencil.mask")}),Ur.def(or,"|0")});case _c:return Gr(function(yr){et.commandType(yr,"object",Zr,kt.commandStr);var Ur=yr.cmp||"keep",or=yr.ref||0,jr="mask"in yr?yr.mask:-1;return et.commandParameter(Ur,sd,Lr+".cmp",kt.commandStr),et.commandType(or,"number",Lr+".ref",kt.commandStr),et.commandType(jr,"number",Lr+".mask",kt.commandStr),[sd[Ur],or,jr]},function(yr,Ur,or){var jr=yr.constants.compareFuncs;et.optional(function(){function Zn(){yr.assert(Ur,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Zn(or+"&&typeof ",or,'==="object"'),Zn('!("cmp" in ',or,")||(",or,".cmp in ",jr,")")});var bn=Ur.def('"cmp" in ',or,"?",jr,"[",or,".cmp]",":",jh),Sn=Ur.def(or,".ref|0"),Xn=Ur.def('"mask" in ',or,"?",or,".mask|0:-1");return[bn,Sn,Xn]});case Uf:case ef:return Gr(function(yr){et.commandType(yr,"object",Zr,kt.commandStr);var Ur=yr.fail||"keep",or=yr.zfail||"keep",jr=yr.zpass||"keep";return et.commandParameter(Ur,Nc,Lr+".fail",kt.commandStr),et.commandParameter(or,Nc,Lr+".zfail",kt.commandStr),et.commandParameter(jr,Nc,Lr+".zpass",kt.commandStr),[Lr===ef?mh:Xl,Nc[Ur],Nc[or],Nc[jr]]},function(yr,Ur,or){var jr=yr.constants.stencilOps;et.optional(function(){yr.assert(Ur,or+"&&typeof "+or+'==="object"',"invalid "+Lr)});function bn(Sn){return et.optional(function(){yr.assert(Ur,'!("'+Sn+'" in '+or+")||("+or+"."+Sn+" in "+jr+")","invalid "+Lr+"."+Sn+", must be one of "+Object.keys(Nc))}),Ur.def('"',Sn,'" in ',or,"?",jr,"[",or,".",Sn,"]:",jh)}return[Lr===ef?mh:Xl,bn("fail"),bn("zfail"),bn("zpass")]});case Jc:return Gr(function(yr){et.commandType(yr,"object",Zr,kt.commandStr);var Ur=yr.factor|0,or=yr.units|0;return et.commandType(Ur,"number",Zr+".factor",kt.commandStr),et.commandType(or,"number",Zr+".units",kt.commandStr),[Ur,or]},function(yr,Ur,or){et.optional(function(){yr.assert(Ur,or+"&&typeof "+or+'==="object"',"invalid "+Lr)});var jr=Ur.def(or,".factor|0"),bn=Ur.def(or,".units|0");return[jr,bn]});case es:return Gr(function(yr){var Ur=0;return yr==="front"?Ur=Xl:yr==="back"&&(Ur=mh),et.command(!!Ur,Zr,kt.commandStr),Ur},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,or+'==="front"||'+or+'==="back"',"invalid cull.face")}),Ur.def(or,'==="front"?',Xl,":",mh)});case Xu:return Gr(function(yr){return et.command(typeof yr=="number"&&yr>=vn.lineWidthDims[0]&&yr<=vn.lineWidthDims[1],"invalid line width, must be a positive number between "+vn.lineWidthDims[0]+" and "+vn.lineWidthDims[1],kt.commandStr),yr},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,"typeof "+or+'==="number"&&'+or+">="+vn.lineWidthDims[0]+"&&"+or+"<="+vn.lineWidthDims[1],"invalid line width")}),or});case ws:return Gr(function(yr){return et.commandParameter(yr,Hh,Zr,kt.commandStr),Hh[yr]},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,or+'==="cw"||'+or+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ur.def(or+'==="cw"?'+xg+":"+bg)});case $u:return Gr(function(yr){return et.command(ss(yr)&&yr.length===4,"color.mask must be length 4 array",kt.commandStr),yr.map(function(Ur){return!!Ur})},function(yr,Ur,or){return et.optional(function(){yr.assert(Ur,yr.shared.isArrayLike+"("+or+")&&"+or+".length===4","invalid color.mask")}),Pt(4,function(jr){return"!!"+or+"["+jr+"]"})});case Zl:return Gr(function(yr){et.command(typeof yr=="object"&&yr,Zr,kt.commandStr);var Ur="value"in yr?yr.value:1,or=!!yr.invert;return et.command(typeof Ur=="number"&&Ur>=0&&Ur<=1,"sample.coverage.value must be a number between 0 and 1",kt.commandStr),[Ur,or]},function(yr,Ur,or){et.optional(function(){yr.assert(Ur,or+"&&typeof "+or+'==="object"',"invalid sample.coverage")});var jr=Ur.def('"value" in ',or,"?+",or,".value:1"),bn=Ur.def("!!",or,".invert");return[jr,bn]})}}),sn}function Uu(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic,sn={};return Object.keys(wr).forEach(function(Lr){var Zr=wr[Lr],Gr;if(typeof Zr=="number"||typeof Zr=="boolean")Gr=Xs(function(){return Zr});else if(typeof Zr=="function"){var yr=Zr._reglType;yr==="texture2d"||yr==="textureCube"?Gr=Xs(function(Ur){return Ur.link(Zr)}):yr==="framebuffer"||yr==="framebufferCube"?(et.command(Zr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Lr+'"',kt.commandStr),Gr=Xs(function(Ur){return Ur.link(Zr.color[0])})):et.commandRaise('invalid data for uniform "'+Lr+'"',kt.commandStr)}else ss(Zr)?Gr=Xs(function(Ur){var or=Ur.global.def("[",Pt(Zr.length,function(jr){return et.command(typeof Zr[jr]=="number"||typeof Zr[jr]=="boolean","invalid uniform "+Lr,Ur.commandStr),Zr[jr]}),"]");return or}):et.commandRaise('invalid or missing data for uniform "'+Lr+'"',kt.commandStr);Gr.value=Zr,sn[Lr]=Gr}),Object.keys(Qt).forEach(function(Lr){var Zr=Qt[Lr];sn[Lr]=El(Zr,function(Gr,yr){return Gr.invoke(yr,Zr)})}),sn}function go(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic,sn={};return Object.keys(wr).forEach(function(Lr){var Zr=wr[Lr],Gr=tr.id(Lr),yr=new Qr;if(Yl(Zr))yr.state=li,yr.buffer=kn.getBuffer(kn.create(Zr,bc,!1,!0)),yr.type=0;else{var Ur=kn.getBuffer(Zr);if(Ur)yr.state=li,yr.buffer=Ur,yr.type=0;else if(et.command(typeof Zr=="object"&&Zr,"invalid data for attribute "+Lr,kt.commandStr),"constant"in Zr){var or=Zr.constant;yr.buffer="null",yr.state=Ri,typeof or=="number"?yr.x=or:(et.command(ss(or)&&or.length>0&&or.length<=4,"invalid constant for attribute "+Lr,kt.commandStr),Vn.forEach(function(Xi,Fn){Fn<or.length&&(yr[Xi]=or[Fn])}))}else{Yl(Zr.buffer)?Ur=kn.getBuffer(kn.create(Zr.buffer,bc,!1,!0)):Ur=kn.getBuffer(Zr.buffer),et.command(!!Ur,'missing buffer for attribute "'+Lr+'"',kt.commandStr);var jr=Zr.offset|0;et.command(jr>=0,'invalid offset for attribute "'+Lr+'"',kt.commandStr);var bn=Zr.stride|0;et.command(bn>=0&&bn<256,'invalid stride for attribute "'+Lr+'", must be integer betweeen [0, 255]',kt.commandStr);var Sn=Zr.size|0;et.command(!("size"in Zr)||Sn>0&&Sn<=4,'invalid size for attribute "'+Lr+'", must be 1,2,3,4',kt.commandStr);var Xn=!!Zr.normalized,Zn=0;"type"in Zr&&(et.commandParameter(Zr.type,du,"invalid type for attribute "+Lr,kt.commandStr),Zn=du[Zr.type]);var qn=Zr.divisor|0;"divisor"in Zr&&(et.command(qn===0||si,'cannot specify divisor for attribute "'+Lr+'", instancing not supported',kt.commandStr),et.command(qn>=0,'invalid divisor for attribute "'+Lr+'"',kt.commandStr)),et.optional(function(){var Xi=kt.commandStr,Fn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Zr).forEach(function(Gi){et.command(Fn.indexOf(Gi)>=0,'unknown parameter "'+Gi+'" for attribute pointer "'+Lr+'" (valid parameters are '+Fn+")",Xi)})}),yr.buffer=Ur,yr.state=li,yr.size=Sn,yr.normalized=Xn,yr.type=Zn||Ur.dtype,yr.offset=jr,yr.stride=bn,yr.divisor=qn}}sn[Lr]=Xs(function(Xi,Fn){var Gi=Xi.attribCache;if(Gr in Gi)return Gi[Gr];var xa={isStream:!1};return Object.keys(yr).forEach(function(Da){xa[Da]=yr[Da]}),yr.buffer&&(xa.buffer=Xi.link(yr.buffer),xa.type=xa.type||xa.buffer+".dtype"),Gi[Gr]=xa,xa})}),Object.keys(Qt).forEach(function(Lr){var Zr=Qt[Lr];function Gr(yr,Ur){var or=yr.invoke(Ur,Zr),jr=yr.shared,bn=yr.constants,Sn=jr.isBufferArgs,Xn=jr.buffer;et.optional(function(){yr.assert(Ur,or+"&&(typeof "+or+'==="object"||typeof '+or+'==="function")&&('+Sn+"("+or+")||"+Xn+".getBuffer("+or+")||"+Xn+".getBuffer("+or+".buffer)||"+Sn+"("+or+'.buffer)||("constant" in '+or+"&&(typeof "+or+'.constant==="number"||'+jr.isArrayLike+"("+or+".constant))))",'invalid dynamic attribute "'+Lr+'"')});var Zn={isStream:Ur.def(!1)},qn=new Qr;qn.state=li,Object.keys(qn).forEach(function(xa){Zn[xa]=Ur.def(""+qn[xa])});var Xi=Zn.buffer,Fn=Zn.type;Ur("if(",Sn,"(",or,")){",Zn.isStream,"=true;",Xi,"=",Xn,".createStream(",bc,",",or,");",Fn,"=",Xi,".dtype;","}else{",Xi,"=",Xn,".getBuffer(",or,");","if(",Xi,"){",Fn,"=",Xi,".dtype;",'}else if("constant" in ',or,"){",Zn.state,"=",Ri,";","if(typeof "+or+'.constant === "number"){',Zn[Vn[0]],"=",or,".constant;",Vn.slice(1).map(function(xa){return Zn[xa]}).join("="),"=0;","}else{",Vn.map(function(xa,Da){return Zn[xa]+"="+or+".constant.length>"+Da+"?"+or+".constant["+Da+"]:0;"}).join(""),"}}else{","if(",Sn,"(",or,".buffer)){",Xi,"=",Xn,".createStream(",bc,",",or,".buffer);","}else{",Xi,"=",Xn,".getBuffer(",or,".buffer);","}",Fn,'="type" in ',or,"?",bn.glTypes,"[",or,".type]:",Xi,".dtype;",Zn.normalized,"=!!",or,".normalized;");function Gi(xa){Ur(Zn[xa],"=",or,".",xa,"|0;")}return Gi("size"),Gi("offset"),Gi("stride"),Gi("divisor"),Ur("}}"),Ur.exit("if(",Zn.isStream,"){",Xn,".destroyStream(",Xi,");","}"),Zn}sn[Lr]=El(Zr,Gr)}),sn}function ds(Vt,kt){var wr=Vt.static,Qt=Vt.dynamic;if(dh in wr){var sn=wr[dh];return sn!==null&&vi.getVAO(sn)===null&&(sn=vi.createVAO(sn)),Xs(function(Zr){return Zr.link(vi.getVAO(sn))})}else if(dh in Qt){var Lr=Qt[dh];return El(Lr,function(Zr,Gr){var yr=Zr.invoke(Gr,Lr);return Gr.def(Zr.shared.vao+".getVAO("+yr+")")})}return null}function Wo(Vt){var kt=Vt.static,wr=Vt.dynamic,Qt={};return Object.keys(kt).forEach(function(sn){var Lr=kt[sn];Qt[sn]=Xs(function(Zr,Gr){return typeof Lr=="number"||typeof Lr=="boolean"?""+Lr:Zr.link(Lr)})}),Object.keys(wr).forEach(function(sn){var Lr=wr[sn];Qt[sn]=El(Lr,function(Zr,Gr){return Zr.invoke(Gr,Lr)})}),Qt}function lu(Vt,kt,wr,Qt,sn){var Lr=Vt.static,Zr=Vt.dynamic;et.optional(function(){var Gi=[Yu,qu,jl,vo,Ku,xc,Mu,nd,Ps,dh].concat(ni);function xa(Da){Object.keys(Da).forEach(function(zo){et.command(Gi.indexOf(zo)>=0,'unknown parameter "'+zo+'"',sn.commandStr)})}xa(Lr),xa(Zr)});var Gr=ka(Vt,kt),yr=ki(Vt,sn),Ur=Ka(Vt,yr,sn),or=Ro(Vt,sn),jr=gu(Vt,sn),bn=_a(Vt,sn,Gr);function Sn(Gi){var xa=Ur[Gi];xa&&(jr[Gi]=xa)}Sn(Au),Sn(Si(_f));var Xn=Object.keys(jr).length>0,Zn={framebuffer:yr,draw:or,shader:bn,state:jr,dirty:Xn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Zn.profile=to(Vt,sn),Zn.uniforms=Uu(wr,sn),Zn.drawVAO=Zn.scopeVAO=ds(Vt,sn),!Zn.drawVAO&&bn.program&&!Gr&&Ar.angle_instanced_arrays){var qn=!0,Xi=bn.program.attributes.map(function(Gi){var xa=kt.static[Gi];return qn=qn&&!!xa,xa});if(qn&&Xi.length>0){var Fn=vi.getVAO(vi.createVAO(Xi));Zn.drawVAO=new ls(null,null,null,function(Gi,xa){return Gi.link(Fn)}),Zn.useVAO=!0}}return Gr?Zn.useVAO=!0:Zn.attributes=go(kt,sn),Zn.context=Wo(Qt,sn),Zn}function Ys(Vt,kt,wr){var Qt=Vt.shared,sn=Qt.context,Lr=Vt.scope();Object.keys(wr).forEach(function(Zr){kt.save(sn,"."+Zr);var Gr=wr[Zr];Lr(sn,".",Zr,"=",Gr.append(Vt,kt),";")}),kt(Lr)}function Hs(Vt,kt,wr,Qt){var sn=Vt.shared,Lr=sn.gl,Zr=sn.framebuffer,Gr;Ti&&(Gr=kt.def(sn.extensions,".webgl_draw_buffers"));var yr=Vt.constants,Ur=yr.drawBuffer,or=yr.backBuffer,jr;wr?jr=wr.append(Vt,kt):jr=kt.def(Zr,".next"),Qt||kt("if(",jr,"!==",Zr,".cur){"),kt("if(",jr,"){",Lr,".bindFramebuffer(",js,",",jr,".framebuffer);"),Ti&&kt(Gr,".drawBuffersWEBGL(",Ur,"[",jr,".colorAttachments.length]);"),kt("}else{",Lr,".bindFramebuffer(",js,",null);"),Ti&&kt(Gr,".drawBuffersWEBGL(",or,");"),kt("}",Zr,".cur=",jr,";"),Qt||kt("}")}function tu(Vt,kt,wr){var Qt=Vt.shared,sn=Qt.gl,Lr=Vt.current,Zr=Vt.next,Gr=Qt.current,yr=Qt.next,Ur=Vt.cond(Gr,".dirty");ni.forEach(function(or){var jr=Si(or);if(!(jr in wr.state)){var bn,Sn;if(jr in Zr){bn=Zr[jr],Sn=Lr[jr];var Xn=Pt(Kr[jr].length,function(qn){return Ur.def(bn,"[",qn,"]")});Ur(Vt.cond(Xn.map(function(qn,Xi){return qn+"!=="+Sn+"["+Xi+"]"}).join("||")).then(sn,".",Un[jr],"(",Xn,");",Xn.map(function(qn,Xi){return Sn+"["+Xi+"]="+qn}).join(";"),";"))}else{bn=Ur.def(yr,".",jr);var Zn=Vt.cond(bn,"!==",Gr,".",jr);Ur(Zn),jr in Mi?Zn(Vt.cond(bn).then(sn,".enable(",Mi[jr],");").else(sn,".disable(",Mi[jr],");"),Gr,".",jr,"=",bn,";"):Zn(sn,".",Un[jr],"(",bn,");",Gr,".",jr,"=",bn,";")}}}),Object.keys(wr.state).length===0&&Ur(Gr,".dirty=false;"),kt(Ur)}function vs(Vt,kt,wr,Qt){var sn=Vt.shared,Lr=Vt.current,Zr=sn.current,Gr=sn.gl;Sf(Object.keys(wr)).forEach(function(yr){var Ur=wr[yr];if(!(Qt&&!Qt(Ur))){var or=Ur.append(Vt,kt);if(Mi[yr]){var jr=Mi[yr];cl(Ur)?or?kt(Gr,".enable(",jr,");"):kt(Gr,".disable(",jr,");"):kt(Vt.cond(or).then(Gr,".enable(",jr,");").else(Gr,".disable(",jr,");")),kt(Zr,".",yr,"=",or,";")}else if(ss(or)){var bn=Lr[yr];kt(Gr,".",Un[yr],"(",or,");",or.map(function(Sn,Xn){return bn+"["+Xn+"]="+Sn}).join(";"),";")}else kt(Gr,".",Un[yr],"(",or,");",Zr,".",yr,"=",or,";")}})}function cu(Vt,kt){si&&(Vt.instancing=kt.def(Vt.shared.extensions,".angle_instanced_arrays"))}function Va(Vt,kt,wr,Qt,sn){var Lr=Vt.shared,Zr=Vt.stats,Gr=Lr.current,yr=Lr.timer,Ur=wr.profile;function or(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var jr,bn;function Sn(Gi){jr=kt.def(),Gi(jr,"=",or(),";"),typeof sn=="string"?Gi(Zr,".count+=",sn,";"):Gi(Zr,".count++;"),Mn&&(Qt?(bn=kt.def(),Gi(bn,"=",yr,".getNumPendingQueries();")):Gi(yr,".beginQuery(",Zr,");"))}function Xn(Gi){Gi(Zr,".cpuTime+=",or(),"-",jr,";"),Mn&&(Qt?Gi(yr,".pushScopeStats(",bn,",",yr,".getNumPendingQueries(),",Zr,");"):Gi(yr,".endQuery();"))}function Zn(Gi){var xa=kt.def(Gr,".profile");kt(Gr,".profile=",Gi,";"),kt.exit(Gr,".profile=",xa,";")}var qn;if(Ur){if(cl(Ur)){Ur.enable?(Sn(kt),Xn(kt.exit),Zn("true")):Zn("false");return}qn=Ur.append(Vt,kt),Zn(qn)}else qn=kt.def(Gr,".profile");var Xi=Vt.block();Sn(Xi),kt("if(",qn,"){",Xi,"}");var Fn=Vt.block();Xn(Fn),kt.exit("if(",qn,"){",Fn,"}")}function Zu(Vt,kt,wr,Qt,sn){var Lr=Vt.shared;function Zr(yr){switch(yr){case Tv:case Mp:case Gl:return 2;case Hd:case Cs:case Jn:return 3;case _g:case Vh:case xf:return 4;default:return 1}}function Gr(yr,Ur,or){var jr=Lr.gl,bn=kt.def(yr,".location"),Sn=kt.def(Lr.attributes,"[",bn,"]"),Xn=or.state,Zn=or.buffer,qn=[or.x,or.y,or.z,or.w],Xi=["buffer","normalized","offset","stride"];function Fn(){kt("if(!",Sn,".buffer){",jr,".enableVertexAttribArray(",bn,");}");var xa=or.type,Da;if(or.size?Da=kt.def(or.size,"||",Ur):Da=Ur,kt("if(",Sn,".type!==",xa,"||",Sn,".size!==",Da,"||",Xi.map(function(za){return Sn+"."+za+"!=="+or[za]}).join("||"),"){",jr,".bindBuffer(",bc,",",Zn,".buffer);",jr,".vertexAttribPointer(",[bn,Da,xa,or.normalized,or.stride,or.offset],");",Sn,".type=",xa,";",Sn,".size=",Da,";",Xi.map(function(za){return Sn+"."+za+"="+or[za]+";"}).join(""),"}"),si){var zo=or.divisor;kt("if(",Sn,".divisor!==",zo,"){",Vt.instancing,".vertexAttribDivisorANGLE(",[bn,zo],");",Sn,".divisor=",zo,";}")}}function Gi(){kt("if(",Sn,".buffer){",jr,".disableVertexAttribArray(",bn,");",Sn,".buffer=null;","}if(",Vn.map(function(xa,Da){return Sn+"."+xa+"!=="+qn[Da]}).join("||"),"){",jr,".vertexAttrib4f(",bn,",",qn,");",Vn.map(function(xa,Da){return Sn+"."+xa+"="+qn[Da]+";"}).join(""),"}")}Xn===li?Fn():Xn===Ri?Gi():(kt("if(",Xn,"===",li,"){"),Fn(),kt("}else{"),Gi(),kt("}"))}Qt.forEach(function(yr){var Ur=yr.name,or=wr.attributes[Ur],jr;if(or){if(!sn(or))return;jr=or.append(Vt,kt)}else{if(!sn(gm))return;var bn=Vt.scopeAttrib(Ur);et.optional(function(){Vt.assert(kt,bn+".state","missing attribute "+Ur)}),jr={},Object.keys(new Qr).forEach(function(Sn){jr[Sn]=kt.def(bn,".",Sn)})}Gr(Vt.link(yr),Zr(yr.info.type),jr)})}function No(Vt,kt,wr,Qt,sn){for(var Lr=Vt.shared,Zr=Lr.gl,Gr,yr=0;yr<Qt.length;++yr){var Ur=Qt[yr],or=Ur.name,jr=Ur.info.type,bn=wr.uniforms[or],Sn=Vt.link(Ur),Xn=Sn+".location",Zn;if(bn){if(!sn(bn))continue;if(cl(bn)){var qn=bn.value;if(et.command(qn!==null&&typeof qn!="undefined",'missing uniform "'+or+'"',Vt.commandStr),jr===bf||jr===Sc){et.command(typeof qn=="function"&&(jr===bf&&(qn._reglType==="texture2d"||qn._reglType==="framebuffer")||jr===Sc&&(qn._reglType==="textureCube"||qn._reglType==="framebufferCube")),"invalid texture for uniform "+or,Vt.commandStr);var Xi=Vt.link(qn._texture||qn.color[0]._texture);kt(Zr,".uniform1i(",Xn,",",Xi+".bind());"),kt.exit(Xi,".unbind();")}else if(jr===Wd||jr===eu||jr===$l){et.optional(function(){et.command(ss(qn),"invalid matrix for uniform "+or,Vt.commandStr),et.command(jr===Wd&&qn.length===4||jr===eu&&qn.length===9||jr===$l&&qn.length===16,"invalid length for matrix uniform "+or,Vt.commandStr)});var Fn=Vt.global.def("new Float32Array(["+Array.prototype.slice.call(qn)+"])"),Gi=2;jr===eu?Gi=3:jr===$l&&(Gi=4),kt(Zr,".uniformMatrix",Gi,"fv(",Xn,",false,",Fn,");")}else{switch(jr){case yg:et.commandType(qn,"number","uniform "+or,Vt.commandStr),Gr="1f";break;case Tv:et.command(ss(qn)&&qn.length===2,"uniform "+or,Vt.commandStr),Gr="2f";break;case Hd:et.command(ss(qn)&&qn.length===3,"uniform "+or,Vt.commandStr),Gr="3f";break;case _g:et.command(ss(qn)&&qn.length===4,"uniform "+or,Vt.commandStr),Gr="4f";break;case Av:et.commandType(qn,"boolean","uniform "+or,Vt.commandStr),Gr="1i";break;case vh:et.commandType(qn,"number","uniform "+or,Vt.commandStr),Gr="1i";break;case Gl:et.command(ss(qn)&&qn.length===2,"uniform "+or,Vt.commandStr),Gr="2i";break;case Mp:et.command(ss(qn)&&qn.length===2,"uniform "+or,Vt.commandStr),Gr="2i";break;case Jn:et.command(ss(qn)&&qn.length===3,"uniform "+or,Vt.commandStr),Gr="3i";break;case Cs:et.command(ss(qn)&&qn.length===3,"uniform "+or,Vt.commandStr),Gr="3i";break;case xf:et.command(ss(qn)&&qn.length===4,"uniform "+or,Vt.commandStr),Gr="4i";break;case Vh:et.command(ss(qn)&&qn.length===4,"uniform "+or,Vt.commandStr),Gr="4i";break}kt(Zr,".uniform",Gr,"(",Xn,",",ss(qn)?Array.prototype.slice.call(qn):qn,");")}continue}else Zn=bn.append(Vt,kt)}else{if(!sn(gm))continue;Zn=kt.def(Lr.uniforms,"[",tr.id(or),"]")}jr===bf?kt("if(",Zn,"&&",Zn,'._reglType==="framebuffer"){',Zn,"=",Zn,".color[0];","}"):jr===Sc&&kt("if(",Zn,"&&",Zn,'._reglType==="framebufferCube"){',Zn,"=",Zn,".color[0];","}"),et.optional(function(){function ql(Ef,Sm){Vt.assert(kt,Ef,'bad data or missing for uniform "'+or+'".  '+Sm)}function Cg(Ef){ql("typeof "+Zn+'==="'+Ef+'"',"invalid type, expected "+Ef)}function nf(Ef,Sm){ql(Lr.isArrayLike+"("+Zn+")&&"+Zn+".length==="+Ef,"invalid vector, should have length "+Ef,Vt.commandStr)}function bm(Ef){ql("typeof "+Zn+'==="function"&&'+Zn+'._reglType==="texture'+(Ef===Cv?"2d":"Cube")+'"',"invalid texture type",Vt.commandStr)}switch(jr){case vh:Cg("number");break;case Mp:nf(2,"number");break;case Cs:nf(3,"number");break;case Vh:nf(4,"number");break;case yg:Cg("number");break;case Tv:nf(2,"number");break;case Hd:nf(3,"number");break;case _g:nf(4,"number");break;case Av:Cg("boolean");break;case Gl:nf(2,"boolean");break;case Jn:nf(3,"boolean");break;case xf:nf(4,"boolean");break;case Wd:nf(4,"number");break;case eu:nf(9,"number");break;case $l:nf(16,"number");break;case bf:bm(Cv);break;case Sc:bm(E0);break}});var xa=1;switch(jr){case bf:case Sc:var Da=kt.def(Zn,"._texture");kt(Zr,".uniform1i(",Xn,",",Da,".bind());"),kt.exit(Da,".unbind();");continue;case vh:case Av:Gr="1i";break;case Mp:case Gl:Gr="2i",xa=2;break;case Cs:case Jn:Gr="3i",xa=3;break;case Vh:case xf:Gr="4i",xa=4;break;case yg:Gr="1f";break;case Tv:Gr="2f",xa=2;break;case Hd:Gr="3f",xa=3;break;case _g:Gr="4f",xa=4;break;case Wd:Gr="Matrix2fv";break;case eu:Gr="Matrix3fv";break;case $l:Gr="Matrix4fv";break}if(kt(Zr,".uniform",Gr,"(",Xn,","),Gr.charAt(0)==="M"){var zo=Math.pow(jr-Wd+2,2),za=Vt.global.def("new Float32Array(",zo,")");kt("false,(Array.isArray(",Zn,")||",Zn," instanceof Float32Array)?",Zn,":(",Pt(zo,function(ql){return za+"["+ql+"]="+Zn+"["+ql+"]"}),",",za,")")}else xa>1?kt(Pt(xa,function(ql){return Zn+"["+ql+"]"})):kt(Zn);kt(");")}}function da(Vt,kt,wr,Qt){var sn=Vt.shared,Lr=sn.gl,Zr=sn.draw,Gr=Qt.draw;function yr(){var Da=Gr.elements,zo,za=kt;return Da?((Da.contextDep&&Qt.contextDynamic||Da.propDep)&&(za=wr),zo=Da.append(Vt,za)):zo=za.def(Zr,".",vo),zo&&za("if("+zo+")"+Lr+".bindBuffer("+g_+","+zo+".buffer.buffer);"),zo}function Ur(){var Da=Gr.count,zo,za=kt;return Da?((Da.contextDep&&Qt.contextDynamic||Da.propDep)&&(za=wr),zo=Da.append(Vt,za),et.optional(function(){Da.MISSING&&Vt.assert(kt,"false","missing vertex count"),Da.DYNAMIC&&Vt.assert(za,zo+">=0","missing vertex count")})):(zo=za.def(Zr,".",Mu),et.optional(function(){Vt.assert(za,zo+">=0","missing vertex count")})),zo}var or=yr();function jr(Da){var zo=Gr[Da];return zo?zo.contextDep&&Qt.contextDynamic||zo.propDep?zo.append(Vt,wr):zo.append(Vt,kt):kt.def(Zr,".",Da)}var bn=jr(Ku),Sn=jr(xc),Xn=Ur();if(typeof Xn=="number"){if(Xn===0)return}else wr("if(",Xn,"){"),wr.exit("}");var Zn,qn;si&&(Zn=jr(nd),qn=Vt.instancing);var Xi=or+".type",Fn=Gr.elements&&cl(Gr.elements);function Gi(){function Da(){wr(qn,".drawElementsInstancedANGLE(",[bn,Xn,Xi,Sn+"<<(("+Xi+"-"+ui+")>>1)",Zn],");")}function zo(){wr(qn,".drawArraysInstancedANGLE(",[bn,Sn,Xn,Zn],");")}or?Fn?Da():(wr("if(",or,"){"),Da(),wr("}else{"),zo(),wr("}")):zo()}function xa(){function Da(){wr(Lr+".drawElements("+[bn,Xn,Xi,Sn+"<<(("+Xi+"-"+ui+")>>1)"]+");")}function zo(){wr(Lr+".drawArrays("+[bn,Sn,Xn]+");")}or?Fn?Da():(wr("if(",or,"){"),Da(),wr("}else{"),zo(),wr("}")):zo()}si&&(typeof Zn!="number"||Zn>=0)?typeof Zn=="string"?(wr("if(",Zn,">0){"),Gi(),wr("}else if(",Zn,"<0){"),xa(),wr("}")):Gi():xa()}function ba(Vt,kt,wr,Qt,sn){var Lr=ta(),Zr=Lr.proc("body",sn);return et.optional(function(){Lr.commandStr=kt.commandStr,Lr.command=Lr.link(kt.commandStr)}),si&&(Lr.instancing=Zr.def(Lr.shared.extensions,".angle_instanced_arrays")),Vt(Lr,Zr,wr,Qt),Lr.compile().body}function Io(Vt,kt,wr,Qt){cu(Vt,kt),wr.useVAO?wr.drawVAO?kt(Vt.shared.vao,".setVAO(",wr.drawVAO.append(Vt,kt),");"):kt(Vt.shared.vao,".setVAO(",Vt.shared.vao,".targetVAO);"):(kt(Vt.shared.vao,".setVAO(null);"),Zu(Vt,kt,wr,Qt.attributes,function(){return!0})),No(Vt,kt,wr,Qt.uniforms,function(){return!0}),da(Vt,kt,kt,wr)}function Ts(Vt,kt){var wr=Vt.proc("draw",1);cu(Vt,wr),Ys(Vt,wr,kt.context),Hs(Vt,wr,kt.framebuffer),tu(Vt,wr,kt),vs(Vt,wr,kt.state),Va(Vt,wr,kt,!1,!0);var Qt=kt.shader.progVar.append(Vt,wr);if(wr(Vt.shared.gl,".useProgram(",Qt,".program);"),kt.shader.program)Io(Vt,wr,kt,kt.shader.program);else{wr(Vt.shared.vao,".setVAO(null);");var sn=Vt.global.def("{}"),Lr=wr.def(Qt,".id"),Zr=wr.def(sn,"[",Lr,"]");wr(Vt.cond(Zr).then(Zr,".call(this,a0);").else(Zr,"=",sn,"[",Lr,"]=",Vt.link(function(Gr){return ba(Io,Vt,kt,Gr,1)}),"(",Qt,");",Zr,".call(this,a0);"))}Object.keys(kt.state).length>0&&wr(Vt.shared.current,".dirty=true;")}function mu(Vt,kt,wr,Qt){Vt.batchId="a1",cu(Vt,kt);function sn(){return!0}Zu(Vt,kt,wr,Qt.attributes,sn),No(Vt,kt,wr,Qt.uniforms,sn),da(Vt,kt,kt,wr)}function mr(Vt,kt,wr,Qt){cu(Vt,kt);var sn=wr.contextDep,Lr=kt.def(),Zr="a0",Gr="a1",yr=kt.def();Vt.shared.props=yr,Vt.batchId=Lr;var Ur=Vt.scope(),or=Vt.scope();kt(Ur.entry,"for(",Lr,"=0;",Lr,"<",Gr,";++",Lr,"){",yr,"=",Zr,"[",Lr,"];",or,"}",Ur.exit);function jr(Xi){return Xi.contextDep&&sn||Xi.propDep}function bn(Xi){return!jr(Xi)}if(wr.needsContext&&Ys(Vt,or,wr.context),wr.needsFramebuffer&&Hs(Vt,or,wr.framebuffer),vs(Vt,or,wr.state,jr),wr.profile&&jr(wr.profile)&&Va(Vt,or,wr,!1,!0),Qt)wr.useVAO?wr.drawVAO?jr(wr.drawVAO)?or(Vt.shared.vao,".setVAO(",wr.drawVAO.append(Vt,or),");"):Ur(Vt.shared.vao,".setVAO(",wr.drawVAO.append(Vt,Ur),");"):Ur(Vt.shared.vao,".setVAO(",Vt.shared.vao,".targetVAO);"):(Ur(Vt.shared.vao,".setVAO(null);"),Zu(Vt,Ur,wr,Qt.attributes,bn),Zu(Vt,or,wr,Qt.attributes,jr)),No(Vt,Ur,wr,Qt.uniforms,bn),No(Vt,or,wr,Qt.uniforms,jr),da(Vt,Ur,or,wr);else{var Sn=Vt.global.def("{}"),Xn=wr.shader.progVar.append(Vt,or),Zn=or.def(Xn,".id"),qn=or.def(Sn,"[",Zn,"]");or(Vt.shared.gl,".useProgram(",Xn,".program);","if(!",qn,"){",qn,"=",Sn,"[",Zn,"]=",Vt.link(function(Xi){return ba(mu,Vt,wr,Xi,2)}),"(",Xn,");}",qn,".call(this,a0[",Lr,"],",Lr,");")}}function _n(Vt,kt){var wr=Vt.proc("batch",2);Vt.batchId="0",cu(Vt,wr);var Qt=!1,sn=!0;Object.keys(kt.context).forEach(function(Sn){Qt=Qt||kt.context[Sn].propDep}),Qt||(Ys(Vt,wr,kt.context),sn=!1);var Lr=kt.framebuffer,Zr=!1;Lr?(Lr.propDep?Qt=Zr=!0:Lr.contextDep&&Qt&&(Zr=!0),Zr||Hs(Vt,wr,Lr)):Hs(Vt,wr,null),kt.state.viewport&&kt.state.viewport.propDep&&(Qt=!0);function Gr(Sn){return Sn.contextDep&&Qt||Sn.propDep}tu(Vt,wr,kt),vs(Vt,wr,kt.state,function(Sn){return!Gr(Sn)}),(!kt.profile||!Gr(kt.profile))&&Va(Vt,wr,kt,!1,"a1"),kt.contextDep=Qt,kt.needsContext=sn,kt.needsFramebuffer=Zr;var yr=kt.shader.progVar;if(yr.contextDep&&Qt||yr.propDep)mr(Vt,wr,kt,null);else{var Ur=yr.append(Vt,wr);if(wr(Vt.shared.gl,".useProgram(",Ur,".program);"),kt.shader.program)mr(Vt,wr,kt,kt.shader.program);else{wr(Vt.shared.vao,".setVAO(null);");var or=Vt.global.def("{}"),jr=wr.def(Ur,".id"),bn=wr.def(or,"[",jr,"]");wr(Vt.cond(bn).then(bn,".call(this,a0,a1);").else(bn,"=",or,"[",jr,"]=",Vt.link(function(Sn){return ba(mr,Vt,kt,Sn,2)}),"(",Ur,");",bn,".call(this,a0,a1);"))}}Object.keys(kt.state).length>0&&wr(Vt.shared.current,".dirty=true;")}function hn(Vt,kt){var wr=Vt.proc("scope",3);Vt.batchId="a2";var Qt=Vt.shared,sn=Qt.current;Ys(Vt,wr,kt.context),kt.framebuffer&&kt.framebuffer.append(Vt,wr),Sf(Object.keys(kt.state)).forEach(function(Zr){var Gr=kt.state[Zr],yr=Gr.append(Vt,wr);ss(yr)?yr.forEach(function(Ur,or){wr.set(Vt.next[Zr],"["+or+"]",Ur)}):wr.set(Qt.next,"."+Zr,yr)}),Va(Vt,wr,kt,!0,!0),[vo,xc,Mu,nd,Ku].forEach(function(Zr){var Gr=kt.draw[Zr];Gr&&wr.set(Qt.draw,"."+Zr,""+Gr.append(Vt,wr))}),Object.keys(kt.uniforms).forEach(function(Zr){wr.set(Qt.uniforms,"["+tr.id(Zr)+"]",kt.uniforms[Zr].append(Vt,wr))}),Object.keys(kt.attributes).forEach(function(Zr){var Gr=kt.attributes[Zr].append(Vt,wr),yr=Vt.scopeAttrib(Zr);Object.keys(new Qr).forEach(function(Ur){wr.set(yr,"."+Ur,Gr[Ur])})}),kt.scopeVAO&&wr.set(Qt.vao,".targetVAO",kt.scopeVAO.append(Vt,wr));function Lr(Zr){var Gr=kt.shader[Zr];Gr&&wr.set(Qt.shader,"."+Zr,Gr.append(Vt,wr))}Lr(qu),Lr(jl),Object.keys(kt.state).length>0&&(wr(sn,".dirty=true;"),wr.exit(sn,".dirty=true;")),wr("a1(",Vt.shared.context,",a0,",Vt.batchId,");")}function Ii(Vt){if(!(typeof Vt!="object"||ss(Vt))){for(var kt=Object.keys(Vt),wr=0;wr<kt.length;++wr)if(hr.isDynamic(Vt[kt[wr]]))return!0;return!1}}function $a(Vt,kt,wr){var Qt=kt.static[wr];if(!Qt||!Ii(Qt))return;var sn=Vt.global,Lr=Object.keys(Qt),Zr=!1,Gr=!1,yr=!1,Ur=Vt.global.def("{}");Lr.forEach(function(jr){var bn=Qt[jr];if(hr.isDynamic(bn)){typeof bn=="function"&&(bn=Qt[jr]=hr.unbox(bn));var Sn=El(bn,null);Zr=Zr||Sn.thisDep,yr=yr||Sn.propDep,Gr=Gr||Sn.contextDep}else{switch(sn(Ur,".",jr,"="),typeof bn){case"number":sn(bn);break;case"string":sn('"',bn,'"');break;case"object":Array.isArray(bn)&&sn("[",bn.join(),"]");break;default:sn(Vt.link(bn));break}sn(";")}});function or(jr,bn){Lr.forEach(function(Sn){var Xn=Qt[Sn];if(hr.isDynamic(Xn)){var Zn=jr.invoke(bn,Xn);bn(Ur,".",Sn,"=",Zn,";")}})}kt.dynamic[wr]=new hr.DynamicVariable(Li,{thisDep:Zr,contextDep:Gr,propDep:yr,ref:Ur,append:or}),delete kt.static[wr]}function $o(Vt,kt,wr,Qt,sn){var Lr=ta();Lr.stats=Lr.link(sn),Object.keys(kt.static).forEach(function(Gr){$a(Lr,kt,Gr)}),wv.forEach(function(Gr){$a(Lr,Vt,Gr)});var Zr=lu(Vt,kt,wr,Qt,Lr);return Ts(Lr,Zr),hn(Lr,Zr),_n(Lr,Zr),Lr.compile()}return{next:Pi,current:Kr,procs:function(){var Vt=ta(),kt=Vt.proc("poll"),wr=Vt.proc("refresh"),Qt=Vt.block();kt(Qt),wr(Qt);var sn=Vt.shared,Lr=sn.gl,Zr=sn.next,Gr=sn.current;Qt(Gr,".dirty=false;"),Hs(Vt,kt),Hs(Vt,wr,null,!0);var yr;si&&(yr=Vt.link(si)),Ar.oes_vertex_array_object&&wr(Vt.link(Ar.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ur=0;Ur<vn.maxAttributes;++Ur){var or=wr.def(sn.attributes,"[",Ur,"]"),jr=Vt.cond(or,".buffer");jr.then(Lr,".enableVertexAttribArray(",Ur,");",Lr,".bindBuffer(",bc,",",or,".buffer.buffer);",Lr,".vertexAttribPointer(",Ur,",",or,".size,",or,".type,",or,".normalized,",or,".stride,",or,".offset);").else(Lr,".disableVertexAttribArray(",Ur,");",Lr,".vertexAttrib4f(",Ur,",",or,".x,",or,".y,",or,".z,",or,".w);",or,".buffer=null;"),wr(jr),si&&wr(yr,".vertexAttribDivisorANGLE(",Ur,",",or,".divisor);")}return wr(Vt.shared.vao,".currentVAO=null;",Vt.shared.vao,".setVAO(",Vt.shared.vao,".targetVAO);"),Object.keys(Mi).forEach(function(bn){var Sn=Mi[bn],Xn=Qt.def(Zr,".",bn),Zn=Vt.block();Zn("if(",Xn,"){",Lr,".enable(",Sn,")}else{",Lr,".disable(",Sn,")}",Gr,".",bn,"=",Xn,";"),wr(Zn),kt("if(",Xn,"!==",Gr,".",bn,"){",Zn,"}")}),Object.keys(Un).forEach(function(bn){var Sn=Un[bn],Xn=Kr[bn],Zn,qn,Xi=Vt.block();if(Xi(Lr,".",Sn,"("),ss(Xn)){var Fn=Xn.length;Zn=Vt.global.def(Zr,".",bn),qn=Vt.global.def(Gr,".",bn),Xi(Pt(Fn,function(Gi){return Zn+"["+Gi+"]"}),");",Pt(Fn,function(Gi){return qn+"["+Gi+"]="+Zn+"["+Gi+"];"}).join("")),kt("if(",Pt(Fn,function(Gi){return Zn+"["+Gi+"]!=="+qn+"["+Gi+"]"}).join("||"),"){",Xi,"}")}else Zn=Qt.def(Zr,".",bn),qn=Qt.def(Gr,".",bn),Xi(Zn,");",Gr,".",bn,"=",Zn,";"),kt("if(",Zn,"!==",qn,"){",Xi,"}");wr(Xi)}),Vt.compile()}(),compile:$o}}function mm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Xd=34918,Rv=34919,Iv=35007,ym=function(ot,tr){if(!tr.ext_disjoint_timer_query)return null;var Ar=[];function vn(){return Ar.pop()||tr.ext_disjoint_timer_query.createQueryEXT()}function kn(si){Ar.push(si)}var fn=[];function un(si){var Ti=vn();tr.ext_disjoint_timer_query.beginQueryEXT(Iv,Ti),fn.push(Ti),Mn(fn.length-1,fn.length,si)}function ai(){tr.ext_disjoint_timer_query.endQueryEXT(Iv)}function Wn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var vi=[];function oi(){return vi.pop()||new Wn}function fi(si){vi.push(si)}var bi=[];function Mn(si,Ti,Kr){var Pi=oi();Pi.startQueryIndex=si,Pi.endQueryIndex=Ti,Pi.sum=0,Pi.stats=Kr,bi.push(Pi)}var mi=[],Qr=[];function En(){var si,Ti,Kr=fn.length;if(Kr!==0){Qr.length=Math.max(Qr.length,Kr+1),mi.length=Math.max(mi.length,Kr+1),mi[0]=0,Qr[0]=0;var Pi=0;for(si=0,Ti=0;Ti<fn.length;++Ti){var ni=fn[Ti];tr.ext_disjoint_timer_query.getQueryObjectEXT(ni,Rv)?(Pi+=tr.ext_disjoint_timer_query.getQueryObjectEXT(ni,Xd),kn(ni)):fn[si++]=ni,mi[Ti+1]=Pi,Qr[Ti+1]=si}for(fn.length=si,si=0,Ti=0;Ti<bi.length;++Ti){var Mi=bi[Ti],Un=Mi.startQueryIndex,Si=Mi.endQueryIndex;Mi.sum+=mi[Si]-mi[Un];var ca=Qr[Un],Ra=Qr[Si];Ra===ca?(Mi.stats.gpuTime+=Mi.sum/1e6,fi(Mi)):(Mi.startQueryIndex=ca,Mi.endQueryIndex=Ra,bi[si++]=Mi)}bi.length=si}}return{beginQuery:un,endQuery:ai,pushScopeStats:Mn,update:En,getNumPendingQueries:function(){return fn.length},clear:function(){Ar.push.apply(Ar,fn);for(var si=0;si<Ar.length;si++)tr.ext_disjoint_timer_query.deleteQueryEXT(Ar[si]);fn.length=0,Ar.length=0},restore:function(){fn.length=0,Ar.length=0}}},_m=16384,wl=256,T0=1024,xm=34962,yh="webglcontextlost",Eg="webglcontextrestored",Ip=1,A0=2,wg=3;function Yd(ot,tr){for(var Ar=0;Ar<ot.length;++Ar)if(ot[Ar]===tr)return Ar;return-1}function Ov(ot){var tr=Zt(ot);if(!tr)return null;var Ar=tr.gl,vn=Ar.getContextAttributes(),kn=Ar.isContextLost(),fn=wt(Ar,tr);if(!fn)return null;var un=ue(),ai=mm(),Wn=fn.extensions,vi=ym(Ar,Wn),oi=Ir(),fi=Ar.drawingBufferWidth,bi=Ar.drawingBufferHeight,Mn={tick:0,time:0,viewportWidth:fi,viewportHeight:bi,framebufferWidth:fi,framebufferHeight:bi,drawingBufferWidth:fi,drawingBufferHeight:bi,pixelRatio:tr.pixelRatio},mi={},Qr={elements:null,primitive:4,count:-1,offset:0,instances:-1},En=fs(Ar,Wn),si=tc(Ar,ai,tr,Kr),Ti=Et(Ar,Wn,En,ai,si);function Kr(da){return Ti.destroyBuffer(da)}var Pi=Xp(Ar,Wn,si,ai),ni=dr(Ar,un,ai,tr),Mi=ac(Ar,Wn,En,function(){ca.procs.poll()},Mn,ai,tr),Un=ll(Ar,Wn,En,ai,tr),Si=ie(Ar,Wn,En,Mi,Un,ai),ca=Wh(Ar,un,Wn,En,si,Pi,Mi,Si,mi,Ti,ni,Qr,Mn,vi,tr),Ra=rn(Ar,Si,ca.procs.poll,Mn,vn,Wn,En),Ai=ca.next,ii=Ar.canvas,Dn=[],ta=[],to=[],ki=[tr.onDestroy],Ka=null;function ka(){if(Dn.length===0){vi&&vi.update(),Ka=null;return}Ka=Er.next(ka),vs();for(var da=Dn.length-1;da>=0;--da){var ba=Dn[da];ba&&ba(Mn,null,0)}Ar.flush(),vi&&vi.update()}function _a(){!Ka&&Dn.length>0&&(Ka=Er.next(ka))}function Ro(){Ka&&(Er.cancel(ka),Ka=null)}function gu(da){da.preventDefault(),kn=!0,Ro(),ta.forEach(function(ba){ba()})}function Uu(da){Ar.getError(),kn=!1,fn.restore(),ni.restore(),si.restore(),Mi.restore(),Un.restore(),Si.restore(),Ti.restore(),vi&&vi.restore(),ca.procs.refresh(),_a(),to.forEach(function(ba){ba()})}ii&&(ii.addEventListener(yh,gu,!1),ii.addEventListener(Eg,Uu,!1));function go(){Dn.length=0,Ro(),ii&&(ii.removeEventListener(yh,gu),ii.removeEventListener(Eg,Uu)),ni.clear(),Si.clear(),Un.clear(),Mi.clear(),Pi.clear(),si.clear(),Ti.clear(),vi&&vi.clear(),ki.forEach(function(da){da()})}function ds(da){et(!!da,"invalid args to regl({...})"),et.type(da,"object","invalid args to regl({...})");function ba(sn){var Lr=k({},sn);delete Lr.uniforms,delete Lr.attributes,delete Lr.context,delete Lr.vao,"stencil"in Lr&&Lr.stencil.op&&(Lr.stencil.opBack=Lr.stencil.opFront=Lr.stencil.op,delete Lr.stencil.op);function Zr(Gr){if(Gr in Lr){var yr=Lr[Gr];delete Lr[Gr],Object.keys(yr).forEach(function(Ur){Lr[Gr+"."+Ur]=yr[Ur]})}}return Zr("blend"),Zr("depth"),Zr("cull"),Zr("stencil"),Zr("polygonOffset"),Zr("scissor"),Zr("sample"),"vao"in sn&&(Lr.vao=sn.vao),Lr}function Io(sn){var Lr={},Zr={};return Object.keys(sn).forEach(function(Gr){var yr=sn[Gr];hr.isDynamic(yr)?Zr[Gr]=hr.unbox(yr,Gr):Lr[Gr]=yr}),{dynamic:Zr,static:Lr}}var Ts=Io(da.context||{}),mu=Io(da.uniforms||{}),mr=Io(da.attributes||{}),_n=Io(ba(da)),hn={gpuTime:0,cpuTime:0,count:0},Ii=ca.compile(_n,mr,mu,Ts,hn),$a=Ii.draw,$o=Ii.batch,Vt=Ii.scope,kt=[];function wr(sn){for(;kt.length<sn;)kt.push(null);return kt}function Qt(sn,Lr){var Zr;if(kn&&et.raise("context lost"),typeof sn=="function")return Vt.call(this,null,sn,0);if(typeof Lr=="function")if(typeof sn=="number")for(Zr=0;Zr<sn;++Zr)Vt.call(this,null,Lr,Zr);else if(Array.isArray(sn))for(Zr=0;Zr<sn.length;++Zr)Vt.call(this,sn[Zr],Lr,Zr);else return Vt.call(this,sn,Lr,0);else if(typeof sn=="number"){if(sn>0)return $o.call(this,wr(sn|0),sn|0)}else if(Array.isArray(sn)){if(sn.length)return $o.call(this,sn,sn.length)}else return $a.call(this,sn)}return k(Qt,{stats:hn})}var Wo=Si.setFBO=ds({framebuffer:hr.define.call(null,Ip,"framebuffer")});function lu(da,ba){var Io=0;ca.procs.poll();var Ts=ba.color;Ts&&(Ar.clearColor(+Ts[0]||0,+Ts[1]||0,+Ts[2]||0,+Ts[3]||0),Io|=_m),"depth"in ba&&(Ar.clearDepth(+ba.depth),Io|=wl),"stencil"in ba&&(Ar.clearStencil(ba.stencil|0),Io|=T0),et(!!Io,"called regl.clear with no buffer specified"),Ar.clear(Io)}function Ys(da){if(et(typeof da=="object"&&da,"regl.clear() takes an object as input"),"framebuffer"in da)if(da.framebuffer&&da.framebuffer_reglType==="framebufferCube")for(var ba=0;ba<6;++ba)Wo(k({framebuffer:da.framebuffer.faces[ba]},da),lu);else Wo(da,lu);else lu(null,da)}function Hs(da){et.type(da,"function","regl.frame() callback must be a function"),Dn.push(da);function ba(){var Io=Yd(Dn,da);et(Io>=0,"cannot cancel a frame twice");function Ts(){var mu=Yd(Dn,Ts);Dn[mu]=Dn[Dn.length-1],Dn.length-=1,Dn.length<=0&&Ro()}Dn[Io]=Ts}return _a(),{cancel:ba}}function tu(){var da=Ai.viewport,ba=Ai.scissor_box;da[0]=da[1]=ba[0]=ba[1]=0,Mn.viewportWidth=Mn.framebufferWidth=Mn.drawingBufferWidth=da[2]=ba[2]=Ar.drawingBufferWidth,Mn.viewportHeight=Mn.framebufferHeight=Mn.drawingBufferHeight=da[3]=ba[3]=Ar.drawingBufferHeight}function vs(){Mn.tick+=1,Mn.time=Va(),tu(),ca.procs.poll()}function cu(){tu(),ca.procs.refresh(),vi&&vi.update()}function Va(){return(Ir()-oi)/1e3}cu();function Zu(da,ba){et.type(ba,"function","listener callback must be a function");var Io;switch(da){case"frame":return Hs(ba);case"lost":Io=ta;break;case"restore":Io=to;break;case"destroy":Io=ki;break;default:et.raise("invalid event, must be one of frame,lost,restore,destroy")}return Io.push(ba),{cancel:function(){for(var Ts=0;Ts<Io.length;++Ts)if(Io[Ts]===ba){Io[Ts]=Io[Io.length-1],Io.pop();return}}}}var No=k(ds,{clear:Ys,prop:hr.define.bind(null,Ip),context:hr.define.bind(null,A0),this:hr.define.bind(null,wg),draw:ds({}),buffer:function(da){return si.create(da,xm,!1,!1)},elements:function(da){return Pi.create(da,!1)},texture:Mi.create2D,cube:Mi.createCube,renderbuffer:Un.create,framebuffer:Si.create,framebufferCube:Si.createCube,vao:Ti.createVAO,attributes:vn,frame:Hs,on:Zu,limits:En,hasExtension:function(da){return En.extensions.indexOf(da.toLowerCase())>=0},read:Ra,destroy:go,_gl:Ar,_refresh:cu,poll:function(){vs(),vi&&vi.update()},now:Va,stats:ai});return tr.onDone(null,No),No}return Ov})},3876:function(vt,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.Bc=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__category",N.O6="l7plot-legend__title",N.fL="l7plot-legend__category-list",N.jp="l7plot-legend__list-item",N.Bc="l7plot-legend__category-marker",N.Tf="l7plot-legend__category-value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.Bc,`" style="background:{color}"></span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},56992:function(vt,N){"use strict";var k;k={value:!0},k=k=N.VI=N.bl=N.el=N.I8=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__continue",N.O6="l7plot-legend__title",N.I8="l7plot-legend__ribbon-container",N.el="l7plot-legend__ribbon",N.bl="l7plot-legend__gradient-bar",N.VI="l7plot-legend__value-range",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <div class="`).concat(N.I8,`"></div>
</div>`),k='<div class="'.concat(N.el,`">
  <span class="`).concat(N.VI,`">{min}</span>
  <div class="`).concat(N.bl,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(N.VI,`">{max}</span>
</div>`)},77972:function(vt,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.bX=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-tooltip",N.O6="l7plot-tooltip__title",N.fL="l7plot-tooltip__list",N.jp="l7plot-tooltip__list-item",N.bX="l7plot-tooltip__name",N.Tf="l7plot-tooltip__value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.bX,`">{name}</span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},31506:function(vt,N,k){"use strict";k.d(N,{Dg:function(){return Q},lh:function(){return j},m$:function(){return w},vs:function(){return Y},zu:function(){return X}});var H=k(35600),W=k(31437);function w(se,ne,$){var A=[0,0,0,0,0,0,0,0,0];return H.vc(A,$),H.Jp(se,A,ne)}function X(se,ne,$){var A=[0,0,0,0,0,0,0,0,0];return H.Us(A,$),H.Jp(se,A,ne)}function j(se,ne,$){var A=[0,0,0,0,0,0,0,0,0];return H.xJ(A,$),H.Jp(se,A,ne)}function ee(se,ne,$){return H.Jp(se,$,ne)}function Y(se,ne){for(var $=se?[].concat(se):[1,0,0,0,1,0,0,0,1],A=0,b=ne.length;A<b;A++){var te=ne[A];switch(te[0]){case"t":w($,$,[te[1],te[2]]);break;case"s":j($,$,[te[1],te[2]]);break;case"r":X($,$,te[1]);break;case"m":ee($,$,te[1]);break;default:break}}return $}function re(se,ne){return se[0]*ne[1]-ne[0]*se[1]}function Q(se,ne,$){var A=W.EU(se,ne),b=re(se,ne)>=0;return $?b?Math.PI*2-A:A:b?A:Math.PI*2-A}function ye(se,ne,$){return $?(se[0]=ne[1],se[1]=-1*ne[0]):(se[0]=-1*ne[1],se[1]=ne[0]),se}},39499:function(vt,N,k){"use strict";k.d(N,{e9:function(){return Q},Wq:function(){return Sr},tr:function(){return te},wb:function(){return De},zx:function(){return je}});var H=k(21030),W=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,w=/[^\s\,]+/ig;function X(pt){var Ut=pt||[];if((0,H.kJ)(Ut))return Ut;if((0,H.HD)(Ut))return Ut=Ut.match(W),(0,H.S6)(Ut,function(Gt,Tt){if(Gt=Gt.match(w),Gt[0].length>1){var qt=Gt[0].charAt(0);Gt.splice(1,0,Gt[0].substr(1)),Gt[0]=qt}(0,H.S6)(Gt,function(fr,hr){isNaN(fr)||(Gt[hr]=+fr)}),Ut[Tt]=Gt}),Ut}var j=X,ee=k(31437);function Y(pt,Ut,Gt,Tt){var qt=[],fr=!!Tt,hr,Er,Ir,ue,G,oe,Ie;if(fr){Ir=Tt[0],ue=Tt[1];for(var qe=0,At=pt.length;qe<At;qe+=1){var rr=pt[qe];Ir=ee.VV([0,0],Ir,rr),ue=ee.Fp([0,0],ue,rr)}}for(var qe=0,Zt=pt.length;qe<Zt;qe+=1){var rr=pt[qe];if(qe===0&&!Gt)Ie=rr;else if(qe===Zt-1&&!Gt)oe=rr,qt.push(Ie),qt.push(oe);else{var wt=[qe?qe-1:Zt-1,qe-1][Gt?0:1];hr=pt[wt],Er=pt[Gt?(qe+1)%Zt:qe+1];var Pt=[0,0];Pt=ee.lu(Pt,Er,hr),Pt=ee.bA(Pt,Pt,Ut);var ge=ee.TE(rr,hr),ve=ee.TE(rr,Er),Fe=ge+ve;Fe!==0&&(ge/=Fe,ve/=Fe);var nt=ee.bA([0,0],Pt,-ge),St=ee.bA([0,0],Pt,ve);oe=ee.IH([0,0],rr,nt),G=ee.IH([0,0],rr,St),G=ee.VV([0,0],G,ee.Fp([0,0],Er,rr)),G=ee.Fp([0,0],G,ee.VV([0,0],Er,rr)),nt=ee.lu([0,0],G,rr),nt=ee.bA([0,0],nt,-ge/ve),oe=ee.IH([0,0],rr,nt),oe=ee.VV([0,0],oe,ee.Fp([0,0],hr,rr)),oe=ee.Fp([0,0],oe,ee.VV([0,0],hr,rr)),St=ee.lu([0,0],rr,oe),St=ee.bA([0,0],St,ve/ge),G=ee.IH([0,0],rr,St),fr&&(oe=ee.Fp([0,0],oe,Ir),oe=ee.VV([0,0],oe,ue),G=ee.Fp([0,0],G,Ir),G=ee.VV([0,0],G,ue)),qt.push(Ie),qt.push(oe),Ie=G}}return Gt&&qt.push(qt.shift()),qt}function re(pt,Ut,Gt){Ut===void 0&&(Ut=!1),Gt===void 0&&(Gt=[[0,0],[1,1]]);for(var Tt=!!Ut,qt=[],fr=0,hr=pt.length;fr<hr;fr+=2)qt.push([pt[fr],pt[fr+1]]);for(var Er=Y(qt,.4,Tt,Gt),Ir=qt.length,ue=[],G,oe,Ie,fr=0;fr<Ir-1;fr+=1)G=Er[fr*2],oe=Er[fr*2+1],Ie=qt[fr+1],ue.push(["C",G[0],G[1],oe[0],oe[1],Ie[0],Ie[1]]);return Tt&&(G=Er[Ir],oe=Er[Ir+1],Ie=qt[0],ue.push(["C",G[0],G[1],oe[0],oe[1],Ie[0],Ie[1]])),ue}var Q=re;function ye(pt,Ut,Gt){var Tt=null,qt=Gt;return Ut<qt&&(qt=Ut,Tt="add"),pt<qt&&(qt=pt,Tt="del"),{type:Tt,min:qt}}var se=function(pt,Ut){var Gt=pt.length,Tt=Ut.length,qt,fr,hr=0;if(Gt===0||Tt===0)return null;for(var Er=[],Ir=0;Ir<=Gt;Ir++)Er[Ir]=[],Er[Ir][0]={min:Ir};for(var ue=0;ue<=Tt;ue++)Er[0][ue]={min:ue};for(var Ir=1;Ir<=Gt;Ir++){qt=pt[Ir-1];for(var ue=1;ue<=Tt;ue++){fr=Ut[ue-1],isEqual(qt,fr)?hr=0:hr=1;var G=Er[Ir-1][ue].min+1,oe=Er[Ir][ue-1].min+1,Ie=Er[Ir-1][ue-1].min+hr;Er[Ir][ue]=ye(G,oe,Ie)}}return Er};function ne(pt,Ut){var Gt=se(pt,Ut),Tt=pt.length,qt=Ut.length,fr=[],hr=1,Er=1;if(Gt[Tt][qt]!==Tt){for(var Ir=1;Ir<=Tt;Ir++){var ue=Gt[Ir][Ir].min;Er=Ir;for(var G=hr;G<=qt;G++)Gt[Ir][G].min<ue&&(ue=Gt[Ir][G].min,Er=G);hr=Er,Gt[Ir][hr].type&&fr.push({index:Ir-1,type:Gt[Ir][hr].type})}for(var Ir=fr.length-1;Ir>=0;Ir--)hr=fr[Ir].index,fr[Ir].type==="add"?pt.splice(hr,0,[].concat(pt[hr])):pt.splice(hr,1)}if(Tt=pt.length,Tt<qt)for(var Ir=0;Ir<qt-Tt;Ir++)pt[Tt-1][0]==="z"||pt[Tt-1][0]==="Z"?pt.splice(Tt-2,0,pt[Tt-2]):pt.push(pt[Tt-1]);return pt}var $=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,A=new RegExp("([a-z])["+$+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+$+"]*,?["+$+"]*)+)","ig"),b=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+$+"]*,?["+$+"]*","ig");function te(pt){if(!pt)return null;if((0,H.kJ)(pt))return pt;var Ut={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Gt=[];return String(pt).replace(A,function(Tt,qt,fr){var hr=[],Er=qt.toLowerCase();if(fr.replace(b,function(Ir,ue){ue&&hr.push(+ue)}),Er==="m"&&hr.length>2&&(Gt.push([qt].concat(hr.splice(0,2))),Er="l",qt=qt==="m"?"l":"L"),Er==="o"&&hr.length===1&&Gt.push([qt,hr[0]]),Er==="r")Gt.push([qt].concat(hr));else for(;hr.length>=Ut[Er]&&(Gt.push([qt].concat(hr.splice(0,Ut[Er]))),!!Ut[Er]););return""}),Gt}var le=/[a-z]/;function Ae(pt,Ut){return[Ut[0]+(Ut[0]-pt[0]),Ut[1]+(Ut[1]-pt[1])]}function De(pt){var Ut=te(pt);if(!Ut||!Ut.length)return[["M",0,0]];for(var Gt=!1,Tt=0;Tt<Ut.length;Tt++){var qt=Ut[Tt][0];if(le.test(qt)||["V","H","T","S"].indexOf(qt)>=0){Gt=!0;break}}if(!Gt)return Ut;var fr=[],hr=0,Er=0,Ir=0,ue=0,G=0,oe,Ie,qe=Ut[0];(qe[0]==="M"||qe[0]==="m")&&(hr=+qe[1],Er=+qe[2],Ir=hr,ue=Er,G++,fr[0]=["M",hr,Er]);for(var Tt=G,At=Ut.length;Tt<At;Tt++){var rr=Ut[Tt],Zt=fr[Tt-1],wt=[],qt=rr[0],Pt=qt.toUpperCase();if(qt!==Pt)switch(wt[0]=Pt,Pt){case"A":wt[1]=rr[1],wt[2]=rr[2],wt[3]=rr[3],wt[4]=rr[4],wt[5]=rr[5],wt[6]=+rr[6]+hr,wt[7]=+rr[7]+Er;break;case"V":wt[1]=+rr[1]+Er;break;case"H":wt[1]=+rr[1]+hr;break;case"M":Ir=+rr[1]+hr,ue=+rr[2]+Er,wt[1]=Ir,wt[2]=ue;break;default:for(var ge=1,ve=rr.length;ge<ve;ge++)wt[ge]=+rr[ge]+(ge%2?hr:Er)}else wt=Ut[Tt];switch(Pt){case"Z":hr=+Ir,Er=+ue;break;case"H":hr=wt[1],wt=["L",hr,Er];break;case"V":Er=wt[1],wt=["L",hr,Er];break;case"T":hr=wt[1],Er=wt[2];var Fe=Ae([Zt[1],Zt[2]],[Zt[3],Zt[4]]);wt=["Q",Fe[0],Fe[1],hr,Er];break;case"S":hr=wt[wt.length-2],Er=wt[wt.length-1];var nt=Zt.length,St=Ae([Zt[nt-4],Zt[nt-3]],[Zt[nt-2],Zt[nt-1]]);wt=["C",St[0],St[1],wt[1],wt[2],hr,Er];break;case"M":Ir=wt[wt.length-2],ue=wt[wt.length-1];break;default:hr=wt[wt.length-2],Er=wt[wt.length-1]}fr.push(wt)}return fr}var Ne=Math.PI*2,Te=function(pt,Ut,Gt,Tt,qt,fr,hr){var Er=pt.x,Ir=pt.y;Er*=Ut,Ir*=Gt;var ue=Tt*Er-qt*Ir,G=qt*Er+Tt*Ir;return{x:ue+fr,y:G+hr}},We=function(pt,Ut){var Gt=Ut===1.5707963267948966?.551915024494:Ut===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Ut/4),Tt=Math.cos(pt),qt=Math.sin(pt),fr=Math.cos(pt+Ut),hr=Math.sin(pt+Ut);return[{x:Tt-qt*Gt,y:qt+Tt*Gt},{x:fr+hr*Gt,y:hr-fr*Gt},{x:fr,y:hr}]},_e=function(pt,Ut,Gt,Tt){var qt=pt*Tt-Ut*Gt<0?-1:1,fr=pt*Gt+Ut*Tt;return fr>1&&(fr=1),fr<-1&&(fr=-1),qt*Math.acos(fr)},we=function(pt,Ut,Gt,Tt,qt,fr,hr,Er,Ir,ue,G,oe){var Ie=Math.pow(qt,2),qe=Math.pow(fr,2),At=Math.pow(G,2),rr=Math.pow(oe,2),Zt=Ie*qe-Ie*rr-qe*At;Zt<0&&(Zt=0),Zt/=Ie*rr+qe*At,Zt=Math.sqrt(Zt)*(hr===Er?-1:1);var wt=Zt*qt/fr*oe,Pt=Zt*-fr/qt*G,ge=ue*wt-Ir*Pt+(pt+Gt)/2,ve=Ir*wt+ue*Pt+(Ut+Tt)/2,Fe=(G-wt)/qt,nt=(oe-Pt)/fr,St=(-G-wt)/qt,$t=(-oe-Pt)/fr,vr=_e(1,0,Fe,nt),Rt=_e(Fe,nt,St,$t);return Er===0&&Rt>0&&(Rt-=Ne),Er===1&&Rt<0&&(Rt+=Ne),[ge,ve,vr,Rt]},Re=function(pt){var Ut=pt.px,Gt=pt.py,Tt=pt.cx,qt=pt.cy,fr=pt.rx,hr=pt.ry,Er=pt.xAxisRotation,Ir=Er===void 0?0:Er,ue=pt.largeArcFlag,G=ue===void 0?0:ue,oe=pt.sweepFlag,Ie=oe===void 0?0:oe,qe=[];if(fr===0||hr===0)return[{x1:0,y1:0,x2:0,y2:0,x:Tt,y:qt}];var At=Math.sin(Ir*Ne/360),rr=Math.cos(Ir*Ne/360),Zt=rr*(Ut-Tt)/2+At*(Gt-qt)/2,wt=-At*(Ut-Tt)/2+rr*(Gt-qt)/2;if(Zt===0&&wt===0)return[{x1:0,y1:0,x2:0,y2:0,x:Tt,y:qt}];fr=Math.abs(fr),hr=Math.abs(hr);var Pt=Math.pow(Zt,2)/Math.pow(fr,2)+Math.pow(wt,2)/Math.pow(hr,2);Pt>1&&(fr*=Math.sqrt(Pt),hr*=Math.sqrt(Pt));var ge=we(Ut,Gt,Tt,qt,fr,hr,G,Ie,At,rr,Zt,wt),ve=ge[0],Fe=ge[1],nt=ge[2],St=ge[3],$t=Math.abs(St)/(Ne/4);Math.abs(1-$t)<1e-7&&($t=1);var vr=Math.max(Math.ceil($t),1);St/=vr;for(var Rt=0;Rt<vr;Rt++)qe.push(We(nt,St)),nt+=St;return qe.map(function(ct){var It=Te(ct[0],fr,hr,rr,At,ve,Fe),gr=It.x,Br=It.y,Nt=Te(ct[1],fr,hr,rr,At,ve,Fe),wn=Nt.x,ei=Nt.y,ci=Te(ct[2],fr,hr,rr,At,ve,Fe),ln=ci.x,ti=ci.y;return{x1:gr,y1:Br,x2:wn,y2:ei,x:ln,y:ti}})};function ze(pt,Ut,Gt,Tt,qt,fr,hr,Er,Ir){var ue=Re({px:pt,py:Ut,cx:Er,cy:Ir,rx:Gt,ry:Tt,xAxisRotation:qt,largeArcFlag:fr,sweepFlag:hr});return ue.reduce(function(G,oe){var Ie=oe.x1,qe=oe.y1,At=oe.x2,rr=oe.y2,Zt=oe.x,wt=oe.y;return G.push(Ie,qe,At,rr,Zt,wt),G},[])}function Ge(pt,Ut){"TQ".indexOf(pt[0])<0&&(Ut.qx=null,Ut.qy=null);var Gt=pt.slice(1),Tt=Gt[0],qt=Gt[1];switch(pt[0]){case"M":return Ut.x=Tt,Ut.y=qt,pt;case"A":return["C"].concat(arcToCubic.apply(0,[Ut.x1,Ut.y1].concat(pt.slice(1))));case"Q":return Ut.qx=Tt,Ut.qy=qt,["C"].concat(quadToCubic.apply(0,[Ut.x1,Ut.y1].concat(pt.slice(1))));case"L":return["C"].concat(lineToCubic(Ut.x1,Ut.y1,pt[1],pt[2]));case"H":return["C"].concat(lineToCubic(Ut.x1,Ut.y1,pt[1],Ut.y1));case"V":return["C"].concat(lineToCubic(Ut.x1,Ut.y1,Ut.x1,pt[1]));case"Z":return["C"].concat(lineToCubic(Ut.x1,Ut.y1,Ut.x,Ut.y));default:}return pt}function yt(pt,Ut){Ut===void 0&&(Ut=!1);for(var Gt=path2Absolute(pt),Tt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},qt=[],fr="",hr=Gt.length,Er,Ir,ue=[],G=0;G<hr;G+=1)Gt[G]&&(fr=Gt[G][0]),qt[G]=fr,Gt[G]=segmentToCubic(Gt[G],Tt),ke(Gt,qt,G),hr=Gt.length,fr==="Z"&&ue.push(G),Er=Gt[G],Ir=Er.length,Tt.x1=+Er[Ir-2],Tt.y1=+Er[Ir-1],Tt.x2=+Er[Ir-4]||Tt.x1,Tt.y2=+Er[Ir-3]||Tt.y1;return Ut?[Gt,ue]:Gt}function ke(pt,Ut,Gt){if(pt[Gt].length>7){pt[Gt].shift();for(var Tt=pt[Gt],qt=Gt;Tt.length;)Ut[Gt]="A",pt.splice(qt+=1,0,["C"].concat(Tt.splice(0,6)));pt.splice(Gt,1)}}var tt=function(pt,Ut,Gt,Tt,qt){var fr=-3*Ut+9*Gt-9*Tt+3*qt,hr=pt*fr+6*Ut-12*Gt+6*Tt;return pt*hr-3*Ut+3*Gt},ae=function(pt,Ut,Gt,Tt,qt,fr,hr,Er,Ir){Ir===null&&(Ir=1),Ir=Ir>1?1:Ir<0?0:Ir;for(var ue=Ir/2,G=12,oe=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ie=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],qe=0,At=0;At<G;At++){var rr=ue*oe[At]+ue,Zt=tt(rr,pt,Gt,qt,hr),wt=tt(rr,Ut,Tt,fr,Er),Pt=Zt*Zt+wt*wt;qe+=Ie[At]*Math.sqrt(Pt)}return ue*qe},Ke=function(pt,Ut,Gt,Tt,qt,fr,hr,Er){for(var Ir=[],ue=[[],[]],G,oe,Ie,qe,At=0;At<2;++At){if(At===0?(oe=6*pt-12*Gt+6*qt,G=-3*pt+9*Gt-9*qt+3*hr,Ie=3*Gt-3*pt):(oe=6*Ut-12*Tt+6*fr,G=-3*Ut+9*Tt-9*fr+3*Er,Ie=3*Tt-3*Ut),Math.abs(G)<1e-12){if(Math.abs(oe)<1e-12)continue;qe=-Ie/oe,qe>0&&qe<1&&Ir.push(qe);continue}var rr=oe*oe-4*Ie*G,Zt=Math.sqrt(rr);if(!(rr<0)){var wt=(-oe+Zt)/(2*G);wt>0&&wt<1&&Ir.push(wt);var Pt=(-oe-Zt)/(2*G);Pt>0&&Pt<1&&Ir.push(Pt)}}for(var ge=Ir.length,ve=ge,Fe;ge--;)qe=Ir[ge],Fe=1-qe,ue[0][ge]=Fe*Fe*Fe*pt+3*Fe*Fe*qe*Gt+3*Fe*qe*qe*qt+qe*qe*qe*hr,ue[1][ge]=Fe*Fe*Fe*Ut+3*Fe*Fe*qe*Tt+3*Fe*qe*qe*fr+qe*qe*qe*Er;return ue[0][ve]=pt,ue[1][ve]=Ut,ue[0][ve+1]=hr,ue[1][ve+1]=Er,ue[0].length=ue[1].length=ve+2,{min:{x:Math.min.apply(0,ue[0]),y:Math.min.apply(0,ue[1])},max:{x:Math.max.apply(0,ue[0]),y:Math.max.apply(0,ue[1])}}},he=function(pt,Ut,Gt,Tt,qt,fr,hr,Er){if(!(Math.max(pt,Gt)<Math.min(qt,hr)||Math.min(pt,Gt)>Math.max(qt,hr)||Math.max(Ut,Tt)<Math.min(fr,Er)||Math.min(Ut,Tt)>Math.max(fr,Er))){var Ir=(pt*Tt-Ut*Gt)*(qt-hr)-(pt-Gt)*(qt*Er-fr*hr),ue=(pt*Tt-Ut*Gt)*(fr-Er)-(Ut-Tt)*(qt*Er-fr*hr),G=(pt-Gt)*(fr-Er)-(Ut-Tt)*(qt-hr);if(G){var oe=Ir/G,Ie=ue/G,qe=+oe.toFixed(2),At=+Ie.toFixed(2);if(!(qe<+Math.min(pt,Gt).toFixed(2)||qe>+Math.max(pt,Gt).toFixed(2)||qe<+Math.min(qt,hr).toFixed(2)||qe>+Math.max(qt,hr).toFixed(2)||At<+Math.min(Ut,Tt).toFixed(2)||At>+Math.max(Ut,Tt).toFixed(2)||At<+Math.min(fr,Er).toFixed(2)||At>+Math.max(fr,Er).toFixed(2)))return{x:oe,y:Ie}}}},Pe=function(pt,Ut,Gt){return Ut>=pt.x&&Ut<=pt.x+pt.width&&Gt>=pt.y&&Gt<=pt.y+pt.height},lt=function(pt,Ut,Gt,Tt){return pt===null&&(pt=Ut=Gt=Tt=0),Ut===null&&(Ut=pt.y,Gt=pt.width,Tt=pt.height,pt=pt.x),{x:pt,y:Ut,width:Gt,w:Gt,height:Tt,h:Tt,x2:pt+Gt,y2:Ut+Tt,cx:pt+Gt/2,cy:Ut+Tt/2,r1:Math.min(Gt,Tt)/2,r2:Math.max(Gt,Tt)/2,r0:Math.sqrt(Gt*Gt+Tt*Tt)/2,path:rectPath(pt,Ut,Gt,Tt),vb:[pt,Ut,Gt,Tt].join(" ")}},He=function(pt,Ut){return pt=lt(pt),Ut=lt(Ut),Pe(Ut,pt.x,pt.y)||Pe(Ut,pt.x2,pt.y)||Pe(Ut,pt.x,pt.y2)||Pe(Ut,pt.x2,pt.y2)||Pe(pt,Ut.x,Ut.y)||Pe(pt,Ut.x2,Ut.y)||Pe(pt,Ut.x,Ut.y2)||Pe(pt,Ut.x2,Ut.y2)||(pt.x<Ut.x2&&pt.x>Ut.x||Ut.x<pt.x2&&Ut.x>pt.x)&&(pt.y<Ut.y2&&pt.y>Ut.y||Ut.y<pt.y2&&Ut.y>pt.y)},Ue=function(pt,Ut,Gt,Tt,qt,fr,hr,Er){isArray(pt)||(pt=[pt,Ut,Gt,Tt,qt,fr,hr,Er]);var Ir=Ke.apply(null,pt);return lt(Ir.min.x,Ir.min.y,Ir.max.x-Ir.min.x,Ir.max.y-Ir.min.y)},Qe=function(pt,Ut,Gt,Tt,qt,fr,hr,Er,Ir){var ue=1-Ir,G=Math.pow(ue,3),oe=Math.pow(ue,2),Ie=Ir*Ir,qe=Ie*Ir,At=G*pt+oe*3*Ir*Gt+ue*3*Ir*Ir*qt+qe*hr,rr=G*Ut+oe*3*Ir*Tt+ue*3*Ir*Ir*fr+qe*Er,Zt=pt+2*Ir*(Gt-pt)+Ie*(qt-2*Gt+pt),wt=Ut+2*Ir*(Tt-Ut)+Ie*(fr-2*Tt+Ut),Pt=Gt+2*Ir*(qt-Gt)+Ie*(hr-2*qt+Gt),ge=Tt+2*Ir*(fr-Tt)+Ie*(Er-2*fr+Tt),ve=ue*pt+Ir*Gt,Fe=ue*Ut+Ir*Tt,nt=ue*qt+Ir*hr,St=ue*fr+Ir*Er,$t=90-Math.atan2(Zt-Pt,wt-ge)*180/Math.PI;return{x:At,y:rr,m:{x:Zt,y:wt},n:{x:Pt,y:ge},start:{x:ve,y:Fe},end:{x:nt,y:St},alpha:$t}},Se=function(pt,Ut,Gt){var Tt=Ue(pt),qt=Ue(Ut);if(!He(Tt,qt))return Gt?0:[];for(var fr=ae.apply(0,pt),hr=ae.apply(0,Ut),Er=~~(fr/8),Ir=~~(hr/8),ue=[],G=[],oe={},Ie=Gt?0:[],qe=0;qe<Er+1;qe++){var At=Qe.apply(0,pt.concat(qe/Er));ue.push({x:At.x,y:At.y,t:qe/Er})}for(var qe=0;qe<Ir+1;qe++){var At=Qe.apply(0,Ut.concat(qe/Ir));G.push({x:At.x,y:At.y,t:qe/Ir})}for(var qe=0;qe<Er;qe++)for(var rr=0;rr<Ir;rr++){var Zt=ue[qe],wt=ue[qe+1],Pt=G[rr],ge=G[rr+1],ve=Math.abs(wt.x-Zt.x)<.001?"y":"x",Fe=Math.abs(ge.x-Pt.x)<.001?"y":"x",nt=he(Zt.x,Zt.y,wt.x,wt.y,Pt.x,Pt.y,ge.x,ge.y);if(nt){if(oe[nt.x.toFixed(4)]===nt.y.toFixed(4))continue;oe[nt.x.toFixed(4)]=nt.y.toFixed(4);var St=Zt.t+Math.abs((nt[ve]-Zt[ve])/(wt[ve]-Zt[ve]))*(wt.t-Zt.t),$t=Pt.t+Math.abs((nt[Fe]-Pt[Fe])/(ge[Fe]-Pt[Fe]))*(ge.t-Pt.t);St>=0&&St<=1&&$t>=0&&$t<=1&&(Gt?Ie++:Ie.push({x:nt.x,y:nt.y,t1:St,t2:$t}))}}return Ie},xe=function(pt,Ut,Gt){pt=path2Curve(pt),Ut=path2Curve(Ut);for(var Tt,qt,fr,hr,Er,Ir,ue,G,oe,Ie,qe=Gt?0:[],At=0,rr=pt.length;At<rr;At++){var Zt=pt[At];if(Zt[0]==="M")Tt=Er=Zt[1],qt=Ir=Zt[2];else{Zt[0]==="C"?(oe=[Tt,qt].concat(Zt.slice(1)),Tt=oe[6],qt=oe[7]):(oe=[Tt,qt,Tt,qt,Er,Ir,Er,Ir],Tt=Er,qt=Ir);for(var wt=0,Pt=Ut.length;wt<Pt;wt++){var ge=Ut[wt];if(ge[0]==="M")fr=ue=ge[1],hr=G=ge[2];else{ge[0]==="C"?(Ie=[fr,hr].concat(ge.slice(1)),fr=Ie[6],hr=Ie[7]):(Ie=[fr,hr,fr,hr,ue,G,ue,G],fr=ue,hr=G);var ve=Se(oe,Ie,Gt);if(Gt)qe+=ve;else{for(var Fe=0,nt=ve.length;Fe<nt;Fe++)ve[Fe].segment1=At,ve[Fe].segment2=wt,ve[Fe].bez1=oe,ve[Fe].bez2=Ie;qe=qe.concat(ve)}}}}}return qe};function rt(pt,Ut){return xe(pt,Ut)}function Je(pt){return Math.sqrt(pt[0]*pt[0]+pt[1]*pt[1])}function dt(pt,Ut){return Je(pt)*Je(Ut)?(pt[0]*Ut[0]+pt[1]*Ut[1])/(Je(pt)*Je(Ut)):1}function Bt(pt,Ut){return(pt[0]*Ut[1]<pt[1]*Ut[0]?-1:1)*Math.acos(dt(pt,Ut))}function Ye(pt,Ut){return pt[0]===Ut[0]&&pt[1]===Ut[1]}function Xe(pt,Ut){var Gt=Ut[1],Tt=Ut[2],qt=(0,H.wQ)((0,H.c$)(Ut[3]),Math.PI*2),fr=Ut[4],hr=Ut[5],Er=pt[0],Ir=pt[1],ue=Ut[6],G=Ut[7],oe=Math.cos(qt)*(Er-ue)/2+Math.sin(qt)*(Ir-G)/2,Ie=-1*Math.sin(qt)*(Er-ue)/2+Math.cos(qt)*(Ir-G)/2,qe=oe*oe/(Gt*Gt)+Ie*Ie/(Tt*Tt);qe>1&&(Gt*=Math.sqrt(qe),Tt*=Math.sqrt(qe));var At=Gt*Gt*(Ie*Ie)+Tt*Tt*(oe*oe),rr=At?Math.sqrt((Gt*Gt*(Tt*Tt)-At)/At):1;fr===hr&&(rr*=-1),isNaN(rr)&&(rr=0);var Zt=Tt?rr*Gt*Ie/Tt:0,wt=Gt?rr*-Tt*oe/Gt:0,Pt=(Er+ue)/2+Math.cos(qt)*Zt-Math.sin(qt)*wt,ge=(Ir+G)/2+Math.sin(qt)*Zt+Math.cos(qt)*wt,ve=[(oe-Zt)/Gt,(Ie-wt)/Tt],Fe=[(-1*oe-Zt)/Gt,(-1*Ie-wt)/Tt],nt=Bt([1,0],ve),St=Bt(ve,Fe);return dt(ve,Fe)<=-1&&(St=Math.PI),dt(ve,Fe)>=1&&(St=0),hr===0&&St>0&&(St=St-2*Math.PI),hr===1&&St<0&&(St=St+2*Math.PI),{cx:Pt,cy:ge,rx:Ye(pt,[ue,G])?0:Gt,ry:Ye(pt,[ue,G])?0:Tt,startAngle:nt,endAngle:nt+St,xRotation:qt,arcFlag:fr,sweepFlag:hr}}function Le(pt,Ut){return[Ut[0]+(Ut[0]-pt[0]),Ut[1]+(Ut[1]-pt[1])]}function je(pt){pt=j(pt);for(var Ut=[],Gt=null,Tt=null,qt=null,fr=0,hr=pt.length,Er=0;Er<hr;Er++){var Ir=pt[Er];Tt=pt[Er+1];var ue=Ir[0],G={command:ue,prePoint:Gt,params:Ir,startTangent:null,endTangent:null};switch(ue){case"M":qt=[Ir[1],Ir[2]],fr=Er;break;case"A":var oe=Xe(Gt,Ir);G.arcParams=oe;break;default:break}if(ue==="Z")Gt=qt,Tt=pt[fr+1];else{var Ie=Ir.length;Gt=[Ir[Ie-2],Ir[Ie-1]]}Tt&&Tt[0]==="Z"&&(Tt=pt[fr],Ut[fr]&&(Ut[fr].prePoint=Gt)),G.currentPoint=Gt,Ut[fr]&&Ye(Gt,Ut[fr].currentPoint)&&(Ut[fr].prePoint=G.prePoint);var qe=Tt?[Tt[Tt.length-2],Tt[Tt.length-1]]:null;G.nextPoint=qe;var At=G.prePoint;if(["L","H","V"].includes(ue))G.startTangent=[At[0]-Gt[0],At[1]-Gt[1]],G.endTangent=[Gt[0]-At[0],Gt[1]-At[1]];else if(ue==="Q"){var rr=[Ir[1],Ir[2]];G.startTangent=[At[0]-rr[0],At[1]-rr[1]],G.endTangent=[Gt[0]-rr[0],Gt[1]-rr[1]]}else if(ue==="T"){var Zt=Ut[Er-1],rr=Le(Zt.currentPoint,At);Zt.command==="Q"?(G.command="Q",G.startTangent=[At[0]-rr[0],At[1]-rr[1]],G.endTangent=[Gt[0]-rr[0],Gt[1]-rr[1]]):(G.command="TL",G.startTangent=[At[0]-Gt[0],At[1]-Gt[1]],G.endTangent=[Gt[0]-At[0],Gt[1]-At[1]])}else if(ue==="C"){var wt=[Ir[1],Ir[2]],Pt=[Ir[3],Ir[4]];G.startTangent=[At[0]-wt[0],At[1]-wt[1]],G.endTangent=[Gt[0]-Pt[0],Gt[1]-Pt[1]],G.startTangent[0]===0&&G.startTangent[1]===0&&(G.startTangent=[wt[0]-Pt[0],wt[1]-Pt[1]]),G.endTangent[0]===0&&G.endTangent[1]===0&&(G.endTangent=[Pt[0]-wt[0],Pt[1]-wt[1]])}else if(ue==="S"){var Zt=Ut[Er-1],wt=Le(Zt.currentPoint,At),Pt=[Ir[1],Ir[2]];Zt.command==="C"?(G.command="C",G.startTangent=[At[0]-wt[0],At[1]-wt[1]],G.endTangent=[Gt[0]-Pt[0],Gt[1]-Pt[1]]):(G.command="SQ",G.startTangent=[At[0]-Pt[0],At[1]-Pt[1]],G.endTangent=[Gt[0]-Pt[0],Gt[1]-Pt[1]])}else if(ue==="A"){var ge=.001,ve=G.arcParams||{},Fe=ve.cx,nt=Fe===void 0?0:Fe,St=ve.cy,$t=St===void 0?0:St,vr=ve.rx,Rt=vr===void 0?0:vr,ct=ve.ry,It=ct===void 0?0:ct,gr=ve.sweepFlag,Br=gr===void 0?0:gr,Nt=ve.startAngle,wn=Nt===void 0?0:Nt,ei=ve.endAngle,ci=ei===void 0?0:ei;Br===0&&(ge*=-1);var ln=Rt*Math.cos(wn-ge)+nt,ti=It*Math.sin(wn-ge)+$t;G.startTangent=[ln-qt[0],ti-qt[1]];var $n=Rt*Math.cos(wn+ci+ge)+nt,ri=It*Math.sin(wn+ci-ge)+$t;G.endTangent=[At[0]-$n,At[1]-ri]}Ut.push(G)}return Ut}var at=1e-6;function Me(pt){return Math.abs(pt)<at?0:pt<0?-1:1}function Ze(pt,Ut,Gt){return(Gt[0]-pt[0])*(Ut[1]-pt[1])===(Ut[0]-pt[0])*(Gt[1]-pt[1])&&Math.min(pt[0],Ut[0])<=Gt[0]&&Gt[0]<=Math.max(pt[0],Ut[0])&&Math.min(pt[1],Ut[1])<=Gt[1]&&Gt[1]<=Math.max(pt[1],Ut[1])}function _t(pt,Ut,Gt){var Tt=!1,qt=pt.length;if(qt<=2)return!1;for(var fr=0;fr<qt;fr++){var hr=pt[fr],Er=pt[(fr+1)%qt];if(Ze(hr,Er,[Ut,Gt]))return!0;Me(hr[1]-Gt)>0!=Me(Er[1]-Gt)>0&&Me(Ut-(Gt-hr[1])*(hr[0]-Er[0])/(hr[1]-Er[1])-hr[0])<0&&(Tt=!Tt)}return Tt}var Mt=function(pt,Ut,Gt){return pt>=Ut&&pt<=Gt};function ir(pt,Ut,Gt,Tt){var qt=.001,fr={x:Gt.x-pt.x,y:Gt.y-pt.y},hr={x:Ut.x-pt.x,y:Ut.y-pt.y},Er={x:Tt.x-Gt.x,y:Tt.y-Gt.y},Ir=hr.x*Er.y-hr.y*Er.x,ue=Ir*Ir,G=hr.x*hr.x+hr.y*hr.y,oe=Er.x*Er.x+Er.y*Er.y,Ie=null;if(ue>qt*G*oe){var qe=(fr.x*Er.y-fr.y*Er.x)/Ir,At=(fr.x*hr.y-fr.y*hr.x)/Ir;Mt(qe,0,1)&&Mt(At,0,1)&&(Ie={x:pt.x+qe*hr.x,y:pt.y+qe*hr.y})}return Ie}function Tr(pt){for(var Ut=[],Gt=pt.length,Tt=0;Tt<Gt-1;Tt++){var qt=pt[Tt],fr=pt[Tt+1];Ut.push({from:{x:qt[0],y:qt[1]},to:{x:fr[0],y:fr[1]}})}if(Ut.length>1){var hr=pt[0],Er=pt[Gt-1];Ut.push({from:{x:Er[0],y:Er[1]},to:{x:hr[0],y:hr[1]}})}return Ut}function et(pt,Ut){var Gt=!1;return(0,H.S6)(pt,function(Tt){if(ir(Tt.from,Tt.to,Ut.from,Ut.to))return Gt=!0,!1}),Gt}function en(pt){var Ut=pt.map(function(Tt){return Tt[0]}),Gt=pt.map(function(Tt){return Tt[1]});return{minX:Math.min.apply(null,Ut),maxX:Math.max.apply(null,Ut),minY:Math.min.apply(null,Gt),maxY:Math.max.apply(null,Gt)}}function Xr(pt,Ut){return!(Ut.minX>pt.maxX||Ut.maxX<pt.minX||Ut.minY>pt.maxY||Ut.maxY<pt.minY)}function Sr(pt,Ut){if(pt.length<2||Ut.length<2)return!1;var Gt=en(pt),Tt=en(Ut);if(!Xr(Gt,Tt))return!1;var qt=!1;if((0,H.S6)(Ut,function(Ir){if(_t(pt,Ir[0],Ir[1]))return qt=!0,!1}),qt||((0,H.S6)(pt,function(Ir){if(_t(Ut,Ir[0],Ir[1]))return qt=!0,!1}),qt))return!0;var fr=Tr(pt),hr=Tr(Ut),Er=!1;return(0,H.S6)(hr,function(Ir){if(et(fr,Ir))return Er=!0,!1}),Er}},21030:function(vt,N,k){"use strict";k.d(N,{Ct:function(){return Fu},f0:function(){return Bl},uZ:function(){return ge},VS:function(){return Jf},d9:function(){return au},FX:function(){return X},Ds:function(){return cc},b$:function(){return Rc},e5:function(){return re},S6:function(){return Ae},yW:function(){return fr},hX:function(){return ee},sE:function(){return yt},cx:function(){return tt},Wx:function(){return Ke},ri:function(){return Fe},xH:function(){return Pe},U5:function(){return Lo},U2:function(){return ou},Lo:function(){return cp},rx:function(){return xe},ru:function(){return Ie},vM:function(){return G},Ms:function(){return oe},wH:function(){return Kn},YM:function(){return Xr},q9:function(){return X},cq:function(){return Fl},kJ:function(){return b},jn:function(){return Ao},J_:function(){return ko},kK:function(){return Wu},xb:function(){return Oc},Xy:function(){return ji},mf:function(){return ne},BD:function(){return We},UM:function(){return A},Ft:function(){return sr},hj:function(){return St},vQ:function(){return ei},Kn:function(){return te},PO:function(){return ze},HD:function(){return Mt},P9:function(){return se},o8:function(){return Mo},XP:function(){return Ne},Z$:function(){return Sr},vl:function(){return lr},UI:function(){return fc},Q8:function(){return Qs},Fp:function(){return Ue},UT:function(){return ri},HP:function(){return bo},VV:function(){return Qe},F:function(){return oa},CD:function(){return Bl},wQ:function(){return ya},ZT:function(){return jo},CE:function(){return Nl},ei:function(){return hc},u4:function(){return Me},Od:function(){return _t},U7:function(){return ff},t8:function(){return vu},dp:function(){return Ld},G:function(){return Er},MR:function(){return Tr},ng:function(){return er},P2:function(){return kc},qo:function(){return Yc},c$:function(){return co},BB:function(){return fo},jj:function(){return et},EL:function(){return Xp},jC:function(){return tn},VO:function(){return Ga},I:function(){return en}});var H=function(Ot){return Ot!==null&&typeof Ot!="function"&&isFinite(Ot.length)},W=H,w=function(Ot,br){return W(Ot)?Ot.indexOf(br)>-1:!1},X=w,j=function(Ot,br){if(!W(Ot))return Ot;for(var Hr=[],Jr=0;Jr<Ot.length;Jr++){var Pn=Ot[Jr];br(Pn,Jr)&&Hr.push(Pn)}return Hr},ee=j,Y=function(Ot,br){return br===void 0&&(br=[]),ee(Ot,function(Hr){return!X(br,Hr)})},re=Y,Q={}.toString,ye=function(Ot,br){return Q.call(Ot)==="[object "+br+"]"},se=ye,ne=function(Ot){return se(Ot,"Function")},$=function(Ot){return Ot==null},A=$,b=function(Ot){return Array.isArray?Array.isArray(Ot):se(Ot,"Array")},te=function(Ot){var br=typeof Ot;return Ot!==null&&br==="object"||br==="function"};function le(Ot,br){if(Ot){var Hr;if(b(Ot))for(var Jr=0,Pn=Ot.length;Jr<Pn&&(Hr=br(Ot[Jr],Jr),Hr!==!1);Jr++);else if(te(Ot)){for(var _i in Ot)if(Ot.hasOwnProperty(_i)&&(Hr=br(Ot[_i],_i),Hr===!1))break}}}var Ae=le,De=Object.keys?function(Ot){return Object.keys(Ot)}:function(Ot){var br=[];return Ae(Ot,function(Hr,Jr){ne(Ot)&&Jr==="prototype"||br.push(Jr)}),br},Ne=De;function Te(Ot,br){var Hr=Ne(br),Jr=Hr.length;if(A(Ot))return!Jr;for(var Pn=0;Pn<Jr;Pn+=1){var _i=Hr[Pn];if(br[_i]!==Ot[_i]||!(_i in Ot))return!1}return!0}var We=Te,_e=function(Ot){return typeof Ot=="object"&&Ot!==null},we=_e,Re=function(Ot){if(!we(Ot)||!se(Ot,"Object"))return!1;if(Object.getPrototypeOf(Ot)===null)return!0;for(var br=Ot;Object.getPrototypeOf(br)!==null;)br=Object.getPrototypeOf(br);return Object.getPrototypeOf(Ot)===br},ze=Re;function Ge(Ot,br){if(!b(Ot))return null;var Hr;if(ne(br)&&(Hr=br),ze(br)&&(Hr=function(Pn){return We(Pn,br)}),Hr){for(var Jr=0;Jr<Ot.length;Jr+=1)if(Hr(Ot[Jr]))return Ot[Jr]}return null}var yt=Ge;function ke(Ot,br,Hr){Hr===void 0&&(Hr=0);for(var Jr=Hr;Jr<Ot.length;Jr++)if(br(Ot[Jr],Jr))return Jr;return-1}var tt=ke,ae=function(Ot,br){for(var Hr=null,Jr=0;Jr<Ot.length;Jr++){var Pn=Ot[Jr],_i=Pn[br];if(!A(_i)){b(_i)?Hr=_i[0]:Hr=_i;break}}return Hr},Ke=ae,he=function(Ot){if(!b(Ot))return[];for(var br=[],Hr=0;Hr<Ot.length;Hr++)br=br.concat(Ot[Hr]);return br},Pe=he,lt=function(Ot,br){if(br===void 0&&(br=[]),!isArray(Ot))br.push(Ot);else for(var Hr=0;Hr<Ot.length;Hr+=1)lt(Ot[Hr],br);return br},He=null,Ue=function(Ot){if(b(Ot))return Ot.reduce(function(br,Hr){return Math.max(br,Hr)},Ot[0])},Qe=function(Ot){if(b(Ot))return Ot.reduce(function(br,Hr){return Math.min(br,Hr)},Ot[0])},Se=function(Ot){var br=Ot.filter(function(sa){return!isNaN(sa)});if(!br.length)return{min:0,max:0};if(b(Ot[0])){for(var Hr=[],Jr=0;Jr<Ot.length;Jr++)Hr=Hr.concat(Ot[Jr]);br=Hr}var Pn=Ue(br),_i=Qe(br);return{min:_i,max:Pn}},xe=Se,rt=Array.prototype,Je=rt.splice,dt=rt.indexOf,Bt=function(Ot){for(var br=[],Hr=1;Hr<arguments.length;Hr++)br[Hr-1]=arguments[Hr];for(var Jr=0;Jr<br.length;Jr++)for(var Pn=br[Jr],_i=-1;(_i=dt.call(Ot,Pn))>-1;)Je.call(Ot,_i,1);return Ot},Ye=null,Xe=Array.prototype.splice,Le=function(br,Hr){if(!W(br))return[];for(var Jr=br?Hr.length:0,Pn=Jr-1;Jr--;){var _i=void 0,sa=Hr[Jr];(Jr===Pn||sa!==_i)&&(_i=sa,Xe.call(br,sa,1))}return br},je=Le,at=function(Ot,br,Hr){if(!b(Ot)&&!ze(Ot))return Ot;var Jr=Hr;return Ae(Ot,function(Pn,_i){Jr=br(Jr,Pn,_i)}),Jr},Me=at,Ze=function(Ot,br){var Hr=[];if(!W(Ot))return Hr;for(var Jr=-1,Pn=[],_i=Ot.length;++Jr<_i;){var sa=Ot[Jr];br(sa,Jr,Ot)&&(Hr.push(sa),Pn.push(Jr))}return je(Ot,Pn),Hr},_t=Ze,Mt=function(Ot){return se(Ot,"String")};function ir(Ot,br){var Hr;if(ne(br))Hr=function(Pn,_i){return br(Pn)-br(_i)};else{var Jr=[];Mt(br)?Jr.push(br):b(br)&&(Jr=br),Hr=function(Pn,_i){for(var sa=0;sa<Jr.length;sa+=1){var xo=Jr[sa];if(Pn[xo]>_i[xo])return 1;if(Pn[xo]<_i[xo])return-1}return 0}}return Ot.sort(Hr),Ot}var Tr=ir;function et(Ot,br){br===void 0&&(br=new Map);var Hr=[];if(Array.isArray(Ot))for(var Jr=0,Pn=Ot.length;Jr<Pn;Jr++){var _i=Ot[Jr];br.has(_i)||(Hr.push(_i),br.set(_i,!0))}return Hr}var en=function(Ot,br){for(var Hr=[],Jr={},Pn=0;Pn<Ot.length;Pn++){var _i=Ot[Pn],sa=_i[br];if(!A(sa)){b(sa)||(sa=[sa]);for(var xo=0;xo<sa.length;xo++){var Us=sa[xo];Jr[Us]||(Hr.push(Us),Jr[Us]=!0)}}}return Hr};function Xr(Ot){if(W(Ot))return Ot[0]}function Sr(Ot){if(W(Ot)){var br=Ot;return br[br.length-1]}}function pt(Ot,br){return isArray(Ot)||isString(Ot)?Ot[0]===br:!1}var Ut=null;function Gt(Ot,br){return isArray(Ot)||isString(Ot)?Ot[Ot.length-1]===br:!1}var Tt=null,qt=function(Ot,br){for(var Hr=0;Hr<Ot.length;Hr++)if(!br(Ot[Hr],Hr))return!1;return!0},fr=qt,hr=function(Ot,br){for(var Hr=0;Hr<Ot.length;Hr++)if(br(Ot[Hr],Hr))return!0;return!1},Er=hr,Ir=Object.prototype.hasOwnProperty;function ue(Ot,br){if(!br||!b(Ot))return{};for(var Hr={},Jr=ne(br)?br:function(xo){return xo[br]},Pn,_i=0;_i<Ot.length;_i++){var sa=Ot[_i];Pn=Jr(sa),Ir.call(Hr,Pn)?Hr[Pn].push(sa):Hr[Pn]=[sa]}return Hr}var G=ue;function oe(Ot,br){if(!br)return{0:Ot};if(!ne(br)){var Hr=b(br)?br:br.replace(/\s+/g,"").split("*");br=function(Jr){for(var Pn="_",_i=0,sa=Hr.length;_i<sa;_i++)Pn+=Jr[Hr[_i]]&&Jr[Hr[_i]].toString();return Pn}}return G(Ot,br)}var Ie=function(Ot,br){if(!br)return[Ot];var Hr=oe(Ot,br),Jr=[];for(var Pn in Hr)Jr.push(Hr[Pn]);return Jr},qe={};function At(Ot){var br=qe[Ot];if(!br){for(var Hr=Ot.toString(16),Jr=Hr.length;Jr<6;Jr++)Hr="0"+Hr;br="#"+Hr,qe[Ot]=br}return br}var rr=null;function Zt(Ot){var br=0,Hr=0,Jr=0,Pn=0;return isArray(Ot)?Ot.length===1?br=Hr=Jr=Pn=Ot[0]:Ot.length===2?(br=Jr=Ot[0],Hr=Pn=Ot[1]):Ot.length===3?(br=Ot[0],Hr=Pn=Ot[1],Jr=Ot[2]):(br=Ot[0],Hr=Ot[1],Jr=Ot[2],Pn=Ot[3]):br=Hr=Jr=Pn=Ot,{r1:br,r2:Hr,r3:Jr,r4:Pn}}var wt=null,Pt=function(Ot,br,Hr){return Ot<br?br:Ot>Hr?Hr:Ot},ge=Pt,ve=function(Ot,br){var Hr=br.toString(),Jr=Hr.indexOf(".");if(Jr===-1)return Math.round(Ot);var Pn=Hr.substr(Jr+1).length;return Pn>20&&(Pn=20),parseFloat(Ot.toFixed(Pn))},Fe=ve,nt=function(Ot){return se(Ot,"Number")},St=nt,$t=function(Ot){return isNumber(Ot)&&Ot%1!==0},vr=null,Rt=function(Ot){return isNumber(Ot)&&Ot%2===0},ct=null,It=Number.isInteger?Number.isInteger:function(Ot){return St(Ot)&&Ot%1===0},gr=null,Br=function(Ot){return isNumber(Ot)&&Ot<0},Nt=null,wn=1e-5;function ei(Ot,br,Hr){return Hr===void 0&&(Hr=wn),Math.abs(Ot-br)<Hr}var ci=function(Ot){return isNumber(Ot)&&Ot%2!==0},ln=null,ti=function(Ot){return isNumber(Ot)&&Ot>0},$n=null,ri=function(Ot,br){if(b(Ot)){for(var Hr,Jr=-1/0,Pn=0;Pn<Ot.length;Pn++){var _i=Ot[Pn],sa=ne(br)?br(_i):_i[br];sa>Jr&&(Hr=_i,Jr=sa)}return Hr}},oa=function(Ot,br){if(b(Ot)){for(var Hr,Jr=1/0,Pn=0;Pn<Ot.length;Pn++){var _i=Ot[Pn],sa=ne(br)?br(_i):_i[br];sa<Jr&&(Hr=_i,Jr=sa)}return Hr}},yi=function(Ot,br){return(Ot%br+br)%br},ya=yi,Ya=180/Math.PI,ha=function(Ot){return Ya*Ot},Fa=null,Sa=Math.PI/180,xs=function(Ot){return Sa*Ot},co=xs,Lo=Ae,Za=function(Ot,br){return Ot.hasOwnProperty(br)},Kn=Za,Ci=Object.values?function(Ot){return Object.values(Ot)}:function(Ot){var br=[];return Ae(Ot,function(Hr,Jr){ne(Ot)&&Jr==="prototype"||br.push(Hr)}),br},Ga=Ci,Jo=function(Ot,br){return contains(values(Ot),br)},fo=function(Ot){return A(Ot)?"":Ot.toString()},To=function(Ot){return fo(Ot).toLowerCase()},lr=To;function Dt(Ot,br){return!Ot||!br?Ot:Ot.replace(/\\?\{([^{}]+)\}/g,function(Hr,Jr){return Hr.charAt(0)==="\\"?Hr.slice(1):br[Jr]===void 0?"":br[Jr]})}var er=Dt,kr=function(Ot){var br=fo(Ot);return br.charAt(0).toUpperCase()+br.substring(1)},tn=kr,In={}.toString,zn=function(Ot){return In.call(Ot).replace(/^\[object /,"").replace(/]$/,"")},On=zn,Vi=function(Ot){return isType(Ot,"Arguments")},Bi=null,Ja=function(Ot){return se(Ot,"Boolean")},Ao=Ja,fs=function(Ot){return se(Ot,"Date")},ko=fs,oo=function(Ot){return isType(Ot,"Error")},iu=null;function Ko(Ot){return isNumber(Ot)&&isFinite(Ot)}var jt=function(Ot){return Ot===null},sr=jt,Vr=Object.prototype,Cn=function(Ot){var br=Ot&&Ot.constructor,Hr=typeof br=="function"&&br.prototype||Vr;return Ot===Hr},Yn=Cn,Wi=function(Ot){return isType(Ot,"RegExp")},ho=null,Gs=function(Ot){return Ot===void 0},Mo=Gs,Fo=function(Ot){return Ot instanceof Element||Ot instanceof HTMLDocument},Wu=Fo;function ff(Ot){var br=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Hr){return setTimeout(Hr,16)};return br(Ot)}function Jf(Ot){var br=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;br(Ot)}var eh=function(){for(var Ot=[],br=0;br<arguments.length;br++)Ot[br]=arguments[br];for(var Hr=Ot[0],Jr=1;Jr<Ot.length;Jr++){var Pn=Ot[Jr];isFunction(Pn)&&(Pn=Pn.prototype),mix(Hr.prototype,Pn)}},du=null,lc=function(Ot){if(typeof Ot!="object"||Ot===null)return Ot;var br;if(b(Ot)){br=[];for(var Hr=0,Jr=Ot.length;Hr<Jr;Hr++)typeof Ot[Hr]=="object"&&Ot[Hr]!=null?br[Hr]=lc(Ot[Hr]):br[Hr]=Ot[Hr]}else{br={};for(var Pn in Ot)typeof Ot[Pn]=="object"&&Ot[Pn]!=null?br[Pn]=lc(Ot[Pn]):br[Pn]=Ot[Pn]}return br},au=lc;function Rl(Ot,br,Hr){var Jr;return function(){var Pn=this,_i=arguments,sa=function(){Jr=null,Hr||Ot.apply(Pn,_i)},xo=Hr&&!Jr;clearTimeout(Jr),Jr=setTimeout(sa,br),xo&&Ot.apply(Pn,_i)}}var cc=Rl,bo=function(Ot,br){if(!ne(Ot))throw new TypeError("Expected a function");var Hr=function(){for(var Jr=[],Pn=0;Pn<arguments.length;Pn++)Jr[Pn]=arguments[Pn];var _i=br?br.apply(this,Jr):Jr[0],sa=Hr.cache;if(sa.has(_i))return sa.get(_i);var xo=Ot.apply(this,Jr);return sa.set(_i,xo),xo};return Hr.cache=new Map,Hr},ec=5;function Ms(Ot,br,Hr,Jr){Hr=Hr||0,Jr=Jr||ec;for(var Pn in br)if(br.hasOwnProperty(Pn)){var _i=br[Pn];_i!==null&&ze(_i)?(ze(Ot[Pn])||(Ot[Pn]={}),Hr<Jr?Ms(Ot[Pn],_i,Hr+1,Jr):Ot[Pn]=br[Pn]):b(_i)?(Ot[Pn]=[],Ot[Pn]=Ot[Pn].concat(_i)):_i!==void 0&&(Ot[Pn]=_i)}}var Rs=function(Ot){for(var br=[],Hr=1;Hr<arguments.length;Hr++)br[Hr-1]=arguments[Hr];for(var Jr=0;Jr<br.length;Jr+=1)Ms(Ot,br[Jr]);return Ot},Rc=Rs,Ic=function(Ot,br,Hr,Jr){isFunction(br)||(Hr=br,br=Ot,Ot=function(){});var Pn=Object.create?function(sa,xo){return Object.create(sa,{constructor:{value:xo}})}:function(sa,xo){function Us(){}Us.prototype=sa;var yl=new Us;return yl.constructor=xo,yl},_i=Pn(br.prototype,Ot);return Ot.prototype=mix(_i,Ot.prototype),Ot.superclass=Pn(br.prototype,br),mix(_i,Hr),mix(Ot,Jr),Ot},If=null,Ll=function(Ot,br){if(!W(Ot))return-1;var Hr=Array.prototype.indexOf;if(Hr)return Hr.call(Ot,br);for(var Jr=-1,Pn=0;Pn<Ot.length;Pn++)if(Ot[Pn]===br){Jr=Pn;break}return Jr},Fl=Ll,tc=Object.prototype.hasOwnProperty;function Lu(Ot){if(A(Ot))return!0;if(W(Ot))return!Ot.length;var br=On(Ot);if(br==="Map"||br==="Set")return!Ot.size;if(Yn(Ot))return!Object.keys(Ot).length;for(var Hr in Ot)if(tc.call(Ot,Hr))return!1;return!0}var Oc=Lu,Rn=function(Ot,br){if(Ot===br)return!0;if(!Ot||!br||Mt(Ot)||Mt(br))return!1;if(W(Ot)||W(br)){if(Ot.length!==br.length)return!1;for(var Hr=!0,Jr=0;Jr<Ot.length&&(Hr=Rn(Ot[Jr],br[Jr]),!!Hr);Jr++);return Hr}if(we(Ot)||we(br)){var Pn=Object.keys(Ot),_i=Object.keys(br);if(Pn.length!==_i.length)return!1;for(var Hr=!0,Jr=0;Jr<Pn.length&&(Hr=Rn(Ot[Pn[Jr]],br[Pn[Jr]]),!!Hr);Jr++);return Hr}return!1},ji=Rn,Sv=function(Ot,br,Hr){return isFunction(Hr)?!!Hr(Ot,br):isEqual(Ot,br)},th=function(Ot,br){if(!W(Ot))return Ot;for(var Hr=[],Jr=0;Jr<Ot.length;Jr++){var Pn=Ot[Jr];Hr.push(br(Pn,Jr))}return Hr},fc=th,$p=function(Ot){return Ot},Qs=function(Ot,br){br===void 0&&(br=$p);var Hr={};return te(Ot)&&!A(Ot)&&Object.keys(Ot).forEach(function(Jr){Hr[Jr]=br(Ot[Jr],Jr)}),Hr};function Pc(Ot,br){for(var Hr in br)br.hasOwnProperty(Hr)&&Hr!=="constructor"&&br[Hr]!==void 0&&(Ot[Hr]=br[Hr])}function Bl(Ot,br,Hr,Jr){return br&&Pc(Ot,br),Hr&&Pc(Ot,Hr),Jr&&Pc(Ot,Jr),Ot}var ou=function(Ot,br,Hr){for(var Jr=0,Pn=Mt(br)?br.split("."):br;Ot&&Jr<Pn.length;)Ot=Ot[Pn[Jr++]];return Ot===void 0||Jr<Pn.length?Hr:Ot},vu=function(Ot,br,Hr){var Jr=Ot,Pn=Mt(br)?br.split("."):br;return Pn.forEach(function(_i,sa){sa<Pn.length-1?(te(Jr[_i])||(Jr[_i]=St(Pn[sa+1])?[]:{}),Jr=Jr[_i]):Jr[_i]=Hr}),Ot},Il=Object.prototype.hasOwnProperty,hc=function(Ot,br){if(Ot===null||!ze(Ot))return{};var Hr={};return Ae(br,function(Jr){Il.call(Ot,Jr)&&(Hr[Jr]=Ot[Jr])}),Hr},Nl=function(Ot,br){return Me(Ot,function(Hr,Jr,Pn){return br.includes(Pn)||(Hr[Pn]=Jr),Hr},{})},kc=function(Ot,br,Hr){var Jr,Pn,_i,sa,xo=0;Hr||(Hr={});var Us=function(){xo=Hr.leading===!1?0:Date.now(),Jr=null,sa=Ot.apply(Pn,_i),Jr||(Pn=_i=null)},yl=function(){var al=Date.now();!xo&&Hr.leading===!1&&(xo=al);var Bo=br-(al-xo);return Pn=this,_i=arguments,Bo<=0||Bo>br?(Jr&&(clearTimeout(Jr),Jr=null),xo=al,sa=Ot.apply(Pn,_i),Jr||(Pn=_i=null)):!Jr&&Hr.trailing!==!1&&(Jr=setTimeout(Us,Bo)),sa};return yl.cancel=function(){clearTimeout(Jr),xo=0,Jr=Pn=_i=null},yl},Yc=function(Ot){return W(Ot)?Array.prototype.slice.call(Ot):[]},rh={},Xp=function(Ot){return Ot=Ot||"g",rh[Ot]?rh[Ot]+=1:rh[Ot]=1,Ot+rh[Ot]},jo=function(){};function Ld(Ot){return A(Ot)?0:W(Ot)?Ot.length:Object.keys(Ot).length}var Ih=k(97582),hf,ss=bo(function(Ot,br){br===void 0&&(br={});var Hr=br.fontSize,Jr=br.fontFamily,Pn=br.fontWeight,_i=br.fontStyle,sa=br.fontVariant;return hf||(hf=document.createElement("canvas").getContext("2d")),hf.font=[_i,sa,Pn,Hr+"px",Jr].join(" "),hf.measureText(Mt(Ot)?Ot:"").width},function(Ot,br){return br===void 0&&(br={}),(0,Ih.pr)([Ot],Ga(br)).join("")}),cp=function(Ot,br,Hr,Jr){Jr===void 0&&(Jr="...");var Pn=16,_i=ss(Jr,Hr),sa=Mt(Ot)?Ot:fo(Ot),xo=br,Us=[],yl,al;if(ss(Ot,Hr)<=br)return Ot;for(;yl=sa.substr(0,Pn),al=ss(yl,Hr),!(al+_i>xo&&al>xo);)if(Us.push(yl),xo-=al,sa=sa.substr(Pn),!sa)return Us.join("");for(;yl=sa.substr(0,1),al=ss(yl,Hr),!(al+_i>xo);)if(Us.push(yl),xo-=al,sa=sa.substr(1),!sa)return Us.join("");return""+Us.join("")+Jr},fp=function(){function Ot(){this.map={}}return Ot.prototype.has=function(br){return this.map[br]!==void 0},Ot.prototype.get=function(br,Hr){var Jr=this.map[br];return Jr===void 0?Hr:Jr},Ot.prototype.set=function(br,Hr){this.map[br]=Hr},Ot.prototype.clear=function(){this.map={}},Ot.prototype.delete=function(br){delete this.map[br]},Ot.prototype.size=function(){return Object.keys(this.map).length},Ot}(),Fu=fp},131:function(vt,N,k){"use strict";k.r(N),k.d(N,{TinyColor:function(){return H.C},bounds:function(){return Te},convertDecimalToHex:function(){return ee.Wl},convertHexToDecimal:function(){return ee.T6},default:function(){return We},fromRatio:function(){return Q},hslToRgb:function(){return ee.ve},hsvToRgb:function(){return ee.WE},inputToRGB:function(){return se.uA},isReadable:function(){return X},isValidCSSUnit:function(){return se.ky},legacyRandom:function(){return ye},mostReadable:function(){return j},names:function(){return W.R},numberInputToObject:function(){return ee.Yt},parseIntFromHex:function(){return ee.VD},random:function(){return ne},readability:function(){return w},rgbToHex:function(){return ee.vq},rgbToHsl:function(){return ee.lC},rgbToHsv:function(){return ee.py},rgbToRgb:function(){return ee.rW},rgbaToArgbHex:function(){return ee.GC},rgbaToHex:function(){return ee.s},stringInputToObject:function(){return se.uz},tinycolor:function(){return H.H},toMsFilter:function(){return Y}});var H=k(10274),W=k(48701);function w(_e,we){var Re=new H.C(_e),ze=new H.C(we);return(Math.max(Re.getLuminance(),ze.getLuminance())+.05)/(Math.min(Re.getLuminance(),ze.getLuminance())+.05)}function X(_e,we,Re){var ze,Ge;Re===void 0&&(Re={level:"AA",size:"small"});var yt=w(_e,we);switch(((ze=Re.level)!==null&&ze!==void 0?ze:"AA")+((Ge=Re.size)!==null&&Ge!==void 0?Ge:"small")){case"AAsmall":case"AAAlarge":return yt>=4.5;case"AAlarge":return yt>=3;case"AAAsmall":return yt>=7;default:return!1}}function j(_e,we,Re){Re===void 0&&(Re={includeFallbackColors:!1,level:"AA",size:"small"});for(var ze=null,Ge=0,yt=Re.includeFallbackColors,ke=Re.level,tt=Re.size,ae=0,Ke=we;ae<Ke.length;ae++){var he=Ke[ae],Pe=w(_e,he);Pe>Ge&&(Ge=Pe,ze=new H.C(he))}return X(_e,ze,{level:ke,size:tt})||!yt?ze:(Re.includeFallbackColors=!1,j(_e,["#fff","#000"],Re))}var ee=k(86500);function Y(_e,we){var Re=new H.C(_e),ze="#"+(0,ee.GC)(Re.r,Re.g,Re.b,Re.a),Ge=ze,yt=Re.gradientType?"GradientType = 1, ":"";if(we){var ke=new H.C(we);Ge="#"+(0,ee.GC)(ke.r,ke.g,ke.b,ke.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(yt,"startColorstr=").concat(ze,",endColorstr=").concat(Ge,")")}var re=k(90279);function Q(_e,we){var Re={r:(0,re.JX)(_e.r),g:(0,re.JX)(_e.g),b:(0,re.JX)(_e.b)};return _e.a!==void 0&&(Re.a=Number(_e.a)),new H.C(Re,we)}function ye(){return new H.C({r:Math.random(),g:Math.random(),b:Math.random()})}var se=k(1350);function ne(_e){if(_e===void 0&&(_e={}),_e.count!==void 0&&_e.count!==null){var we=_e.count,Re=[];for(_e.count=void 0;we>Re.length;)_e.count=null,_e.seed&&(_e.seed+=1),Re.push(ne(_e));return _e.count=we,Re}var ze=$(_e.hue,_e.seed),Ge=A(ze,_e),yt=b(ze,Ge,_e),ke={h:ze,s:Ge,v:yt};return _e.alpha!==void 0&&(ke.a=_e.alpha),new H.C(ke)}function $(_e,we){var Re=le(_e),ze=De(Re,we);return ze<0&&(ze=360+ze),ze}function A(_e,we){if(we.hue==="monochrome")return 0;if(we.luminosity==="random")return De([0,100],we.seed);var Re=Ae(_e).saturationRange,ze=Re[0],Ge=Re[1];switch(we.luminosity){case"bright":ze=55;break;case"dark":ze=Ge-10;break;case"light":Ge=55;break;default:break}return De([ze,Ge],we.seed)}function b(_e,we,Re){var ze=te(_e,we),Ge=100;switch(Re.luminosity){case"dark":Ge=ze+20;break;case"light":ze=(Ge+ze)/2;break;case"random":ze=0,Ge=100;break;default:break}return De([ze,Ge],Re.seed)}function te(_e,we){for(var Re=Ae(_e).lowerBounds,ze=0;ze<Re.length-1;ze++){var Ge=Re[ze][0],yt=Re[ze][1],ke=Re[ze+1][0],tt=Re[ze+1][1];if(we>=Ge&&we<=ke){var ae=(tt-yt)/(ke-Ge),Ke=yt-ae*Ge;return ae*we+Ke}}return 0}function le(_e){var we=parseInt(_e,10);if(!Number.isNaN(we)&&we<360&&we>0)return[we,we];if(typeof _e=="string"){var Re=Te.find(function(ke){return ke.name===_e});if(Re){var ze=Ne(Re);if(ze.hueRange)return ze.hueRange}var Ge=new H.C(_e);if(Ge.isValid){var yt=Ge.toHsv().h;return[yt,yt]}}return[0,360]}function Ae(_e){_e>=334&&_e<=360&&(_e-=360);for(var we=0,Re=Te;we<Re.length;we++){var ze=Re[we],Ge=Ne(ze);if(Ge.hueRange&&_e>=Ge.hueRange[0]&&_e<=Ge.hueRange[1])return Ge}throw Error("Color not found")}function De(_e,we){if(we===void 0)return Math.floor(_e[0]+Math.random()*(_e[1]+1-_e[0]));var Re=_e[1]||1,ze=_e[0]||0;we=(we*9301+49297)%233280;var Ge=we/233280;return Math.floor(ze+Ge*(Re-ze))}function Ne(_e){var we=_e.lowerBounds[0][0],Re=_e.lowerBounds[_e.lowerBounds.length-1][0],ze=_e.lowerBounds[_e.lowerBounds.length-1][1],Ge=_e.lowerBounds[0][1];return{name:_e.name,hueRange:_e.hueRange,lowerBounds:_e.lowerBounds,saturationRange:[we,Re],brightnessRange:[ze,Ge]}}var Te=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],We=H.H},38163:function(vt){vt.exports=N;function N(W,w){var X=W&&W.type,j;if(X==="FeatureCollection")for(j=0;j<W.features.length;j++)N(W.features[j],w);else if(X==="GeometryCollection")for(j=0;j<W.geometries.length;j++)N(W.geometries[j],w);else if(X==="Feature")N(W.geometry,w);else if(X==="Polygon")k(W.coordinates,w);else if(X==="MultiPolygon")for(j=0;j<W.coordinates.length;j++)k(W.coordinates[j],w);return W}function k(W,w){if(W.length!==0){H(W[0],w);for(var X=1;X<W.length;X++)H(W[X],!w)}}function H(W,w){for(var X=0,j=0,ee=0,Y=W.length,re=Y-1;ee<Y;re=ee++){var Q=(W[ee][0]-W[re][0])*(W[re][1]+W[ee][1]),ye=X+Q;j+=Math.abs(X)>=Math.abs(Q)?X-ye+Q:Q-ye+X,X=ye}X+j>=0!=!!w&&W.reverse()}},75550:function(vt){"use strict";vt.exports=N;function N(k,H){this.x=k,this.y=H}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,H){return this.clone()._rotateAround(k,H)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var H=k.x-this.x,W=k.y-this.y;return H*H+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,H){return Math.atan2(this.x*H-this.y*k,this.x*k+this.y*H)},_matMult:function(k){var H=k[0]*this.x+k[1]*this.y,W=k[2]*this.x+k[3]*this.y;return this.x=H,this.y=W,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var H=Math.cos(k),W=Math.sin(k),w=H*this.x-W*this.y,X=W*this.x+H*this.y;return this.x=w,this.y=X,this},_rotateAround:function(k,H){var W=Math.cos(k),w=Math.sin(k),X=H.x+W*(this.x-H.x)-w*(this.y-H.y),j=H.y+w*(this.x-H.x)+W*(this.y-H.y);return this.x=X,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(k){return k instanceof N?k:Array.isArray(k)?new N(k[0],k[1]):k}},49296:function(vt){"use strict";vt.exports=k,vt.exports.default=k;var N=1e20;function k(j,ee,Y,re,Q,ye){this.fontSize=j||24,this.buffer=ee===void 0?3:ee,this.cutoff=re||.25,this.fontFamily=Q||"sans-serif",this.fontWeight=ye||"normal",this.radius=Y||8;var se=this.size=this.fontSize+this.buffer*2,ne=se+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=se,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Uint16Array(ne),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(se/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function H(j,ee,Y,re,Q,ye,se){ye.fill(N,0,ee*Y),se.fill(0,0,ee*Y);for(var ne=(ee-re)/2,$=0;$<Q;$++)for(var A=0;A<re;A++){var b=($+ne)*ee+A+ne,te=j.data[4*($*re+A)+3]/255;if(te===1)ye[b]=0,se[b]=N;else if(te===0)ye[b]=N,se[b]=0;else{var le=Math.max(0,.5-te),Ae=Math.max(0,te-.5);ye[b]=le*le,se[b]=Ae*Ae}}}function W(j,ee,Y,re,Q,ye,se){for(var ne=0;ne<ee*Y;ne++){var $=Math.sqrt(re[ne])-Math.sqrt(Q[ne]);j[ne]=Math.round(255-255*($/ye+se))}}k.prototype._draw=function(j,ee){var Y=this.ctx.measureText(j),re=Y.width,Q=2*this.buffer,ye,se,ne,$,A,b,te,le;ee&&this.useMetrics?(A=Math.floor(Y.actualBoundingBoxAscent),le=this.buffer+Math.ceil(Y.actualBoundingBoxAscent),b=this.buffer,te=this.buffer,se=Math.min(this.size,Math.ceil(Y.actualBoundingBoxRight-Y.actualBoundingBoxLeft)),$=Math.min(this.size-b,Math.ceil(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent)),ye=se+Q,ne=$+Q,this.ctx.textBaseline="alphabetic"):(ye=se=this.size,ne=$=this.size,A=19*this.fontSize/24,b=te=0,le=this.middle,this.ctx.textBaseline="middle");var Ae;se&&$&&(this.ctx.clearRect(te,b,se,$),this.ctx.fillText(j,this.buffer,le),Ae=this.ctx.getImageData(te,b,se,$));var De=new Uint8ClampedArray(ye*ne);return H(Ae,ye,ne,se,$,this.gridOuter,this.gridInner),w(this.gridOuter,ye,ne,this.f,this.v,this.z),w(this.gridInner,ye,ne,this.f,this.v,this.z),W(De,ye,ne,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:De,metrics:{width:se,height:$,sdfWidth:ye,sdfHeight:ne,top:A,left:0,advance:re}}},k.prototype.draw=function(j){return this._draw(j,!1).data},k.prototype.drawWithMetrics=function(j){return this._draw(j,!0)};function w(j,ee,Y,re,Q,ye){for(var se=0;se<ee;se++)X(j,se,ee,Y,re,Q,ye);for(var ne=0;ne<Y;ne++)X(j,ne*ee,1,ee,re,Q,ye)}function X(j,ee,Y,re,Q,ye,se){var ne,$,A,b;for(ye[0]=0,se[0]=-N,se[1]=N,ne=0;ne<re;ne++)Q[ne]=j[ee+ne*Y];for(ne=1,$=0,A=0;ne<re;ne++){do b=ye[$],A=(Q[ne]-Q[b]+ne*ne-b*b)/(ne-b)/2;while(A<=se[$]&&--$>-1);$++,ye[$]=ne,se[$]=A,se[$+1]=N}for(ne=0,$=0;ne<re;ne++){for(;se[$+1]<ne;)$++;b=ye[$],j[ee+ne*Y]=Q[b]+(ne-b)*(ne-b)}}},99874:function(vt){vt.exports=N;function N(k,H,W,w){this.cx=3*k,this.bx=3*(W-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*H,this.by=3*(w-H)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=w,this.p2x=W,this.p2y=w}N.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},N.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},N.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},N.prototype.solveCurveX=function(k,H){typeof H=="undefined"&&(H=1e-6);var W,w,X,j,ee;for(X=k,ee=0;ee<8;ee++){if(j=this.sampleCurveX(X)-k,Math.abs(j)<H)return X;var Y=this.sampleCurveDerivativeX(X);if(Math.abs(Y)<1e-6)break;X=X-j/Y}if(W=0,w=1,X=k,X<W)return W;if(X>w)return w;for(;W<w;){if(j=this.sampleCurveX(X),Math.abs(j-k)<H)return X;k>j?W=X:w=X,X=(w-W)*.5+W}return X},N.prototype.solve=function(k,H){return this.sampleCurveY(this.solveCurveX(k,H))}},38929:function(vt,N,k){vt.exports.VectorTile=k(22779),k(66024),k(59701)},22779:function(vt,N,k){"use strict";var H=k(59701);vt.exports=W;function W(X,j){this.layers=X.readFields(w,{},j)}function w(X,j,ee){if(X===3){var Y=new H(ee,ee.readVarint()+ee.pos);Y.length&&(j[Y.name]=Y)}}},66024:function(vt,N,k){"use strict";var H=k(75550);vt.exports=W;function W(Y,re,Q,ye,se){this.properties={},this.extent=Q,this.type=0,this._pbf=Y,this._geometry=-1,this._keys=ye,this._values=se,Y.readFields(w,this,re)}function w(Y,re,Q){Y==1?re.id=Q.readVarint():Y==2?X(Q,re):Y==3?re.type=Q.readVarint():Y==4&&(re._geometry=Q.pos)}function X(Y,re){for(var Q=Y.readVarint()+Y.pos;Y.pos<Q;){var ye=re._keys[Y.readVarint()],se=re._values[Y.readVarint()];re.properties[ye]=se}}W.types=["Unknown","Point","LineString","Polygon"],W.prototype.loadGeometry=function(){var Y=this._pbf;Y.pos=this._geometry;for(var re=Y.readVarint()+Y.pos,Q=1,ye=0,se=0,ne=0,$=[],A;Y.pos<re;){if(ye<=0){var b=Y.readVarint();Q=b&7,ye=b>>3}if(ye--,Q===1||Q===2)se+=Y.readSVarint(),ne+=Y.readSVarint(),Q===1&&(A&&$.push(A),A=[]),A.push(new H(se,ne));else if(Q===7)A&&A.push(A[0].clone());else throw new Error("unknown command "+Q)}return A&&$.push(A),$},W.prototype.bbox=function(){var Y=this._pbf;Y.pos=this._geometry;for(var re=Y.readVarint()+Y.pos,Q=1,ye=0,se=0,ne=0,$=1/0,A=-1/0,b=1/0,te=-1/0;Y.pos<re;){if(ye<=0){var le=Y.readVarint();Q=le&7,ye=le>>3}if(ye--,Q===1||Q===2)se+=Y.readSVarint(),ne+=Y.readSVarint(),se<$&&($=se),se>A&&(A=se),ne<b&&(b=ne),ne>te&&(te=ne);else if(Q!==7)throw new Error("unknown command "+Q)}return[$,b,A,te]},W.prototype.toGeoJSON=function(Y,re,Q){var ye=this.extent*Math.pow(2,Q),se=this.extent*Y,ne=this.extent*re,$=this.loadGeometry(),A=W.types[this.type],b,te;function le(Ne){for(var Te=0;Te<Ne.length;Te++){var We=Ne[Te],_e=180-(We.y+ne)*360/ye;Ne[Te]=[(We.x+se)*360/ye-180,360/Math.PI*Math.atan(Math.exp(_e*Math.PI/180))-90]}}switch(this.type){case 1:var Ae=[];for(b=0;b<$.length;b++)Ae[b]=$[b][0];$=Ae,le($);break;case 2:for(b=0;b<$.length;b++)le($[b]);break;case 3:for($=j($),b=0;b<$.length;b++)for(te=0;te<$[b].length;te++)le($[b][te]);break}$.length===1?$=$[0]:A="Multi"+A;var De={type:"Feature",geometry:{type:A,coordinates:$},properties:this.properties};return"id"in this&&(De.id=this.id),De};function j(Y){var re=Y.length;if(re<=1)return[Y];for(var Q=[],ye,se,ne=0;ne<re;ne++){var $=ee(Y[ne]);$!==0&&(se===void 0&&(se=$<0),se===$<0?(ye&&Q.push(ye),ye=[Y[ne]]):ye.push(Y[ne]))}return ye&&Q.push(ye),Q}function ee(Y){for(var re=0,Q=0,ye=Y.length,se=ye-1,ne,$;Q<ye;se=Q++)ne=Y[Q],$=Y[se],re+=($.x-ne.x)*(ne.y+$.y);return re}},59701:function(vt,N,k){"use strict";var H=k(66024);vt.exports=W;function W(j,ee){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(w,this,ee),this.length=this._features.length}function w(j,ee,Y){j===15?ee.version=Y.readVarint():j===1?ee.name=Y.readString():j===5?ee.extent=Y.readVarint():j===2?ee._features.push(Y.pos):j===3?ee._keys.push(Y.readString()):j===4&&ee._values.push(X(Y))}function X(j){for(var ee=null,Y=j.readVarint()+j.pos;j.pos<Y;){var re=j.readVarint()>>3;ee=re===1?j.readString():re===2?j.readFloat():re===3?j.readDouble():re===4?j.readVarint64():re===5?j.readVarint():re===6?j.readSVarint():re===7?j.readBoolean():null}return ee}W.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var ee=this._pbf.readVarint()+this._pbf.pos;return new H(this._pbf,ee,this.extent,this._keys,this._values)}},45471:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.PresetStatusColorTypes=void 0,N.isPresetColor=ee,N.isPresetStatusColor=Y;var W=H(k(861)),w=k(36496);const X=w.PresetColors.map(re=>`${re}-inverse`),j=N.PresetStatusColorTypes=["success","processing","error","default","warning"];function ee(re){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,W.default)(X),(0,W.default)(w.PresetColors)).includes(re):w.PresetColors.includes(re)}function Y(re){return j.includes(re)}},49314:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(67294)),w=H(k(43273));const X=ee=>{let Y;return typeof ee=="object"&&(ee!=null&&ee.clearIcon)?Y=ee:ee&&(Y={clearIcon:W.default.createElement(w.default,null)}),Y};var j=N.default=X},56333:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.containerBaseZIndexOffset=N.consumerBaseZIndexOffset=N.CONTAINER_MAX_OFFSET=void 0,N.useZIndex=se;var W=H(k(67294)),w=H(k(41401)),X=H(k(96877));const j=100,ee=10,Y=N.CONTAINER_MAX_OFFSET=j*ee,re=N.containerBaseZIndexOffset={Modal:j,Drawer:j,Popover:j,Popconfirm:j,Tooltip:j,Tour:j},Q=N.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function ye(ne){return ne in re}function se(ne,$){const[,A]=(0,w.default)(),b=W.default.useContext(X.default),te=ye(ne);if($!==void 0)return[$,$];let le=b!=null?b:0;return te?(le+=(b?0:A.zIndexPopupBase)+re[ne],le=Math.min(le,A.zIndexPopupBase+Y)):le+=Q[ne],[b===void 0?$:le,le]}},53683:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTransitionName=N.default=void 0;const k=()=>({height:0,opacity:0}),H=re=>{const{scrollHeight:Q}=re;return{height:Q,opacity:1}},W=re=>({height:re?re.offsetHeight:0}),w=(re,Q)=>(Q==null?void 0:Q.deadline)===!0||Q.propertyName==="height",X=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:k,onEnterStart:k,onAppearActive:H,onEnterActive:H,onLeaveStart:W,onLeaveActive:k,onAppearEnd:w,onEnterEnd:w,onLeaveEnd:w,motionDeadline:500}},j=null,ee=(re,Q,ye)=>ye!==void 0?ye:`${re}-${Q}`;N.getTransitionName=ee;var Y=N.default=X},74132:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=ee,N.getOverflowOptions=W;var H=k(9064);function W(Y,re,Q,ye){if(ye===!1)return{adjustX:!1,adjustY:!1};const se=ye&&typeof ye=="object"?ye:{},ne={};switch(Y){case"top":case"bottom":ne.shiftX=re.arrowOffsetHorizontal*2+Q,ne.shiftY=!0,ne.adjustY=!0;break;case"left":case"right":ne.shiftY=re.arrowOffsetVertical*2+Q,ne.shiftX=!0,ne.adjustX=!0;break}const $=Object.assign(Object.assign({},ne),se);return $.shiftX||($.adjustX=!0),$.shiftY||($.adjustY=!0),$}const w={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},X={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},j=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function ee(Y){const{arrowWidth:re,autoAdjustOverflow:Q,arrowPointAtCenter:ye,offset:se,borderRadius:ne,visibleFirst:$}=Y,A=re/2,b={};return Object.keys(w).forEach(te=>{const le=ye&&X[te]||w[te],Ae=Object.assign(Object.assign({},le),{offset:[0,0],dynamicInset:!0});switch(b[te]=Ae,j.has(te)&&(Ae.autoArrow=!1),te){case"top":case"topLeft":case"topRight":Ae.offset[1]=-A-se;break;case"bottom":case"bottomLeft":case"bottomRight":Ae.offset[1]=A+se;break;case"left":case"leftTop":case"leftBottom":Ae.offset[0]=-A-se;break;case"right":case"rightTop":case"rightBottom":Ae.offset[0]=A+se;break}const De=(0,H.getArrowOffsetToken)({contentRadius:ne,limitVerticalRadius:!0});if(ye)switch(te){case"topLeft":case"bottomLeft":Ae.offset[0]=-De.arrowOffsetHorizontal-A;break;case"topRight":case"bottomRight":Ae.offset[0]=De.arrowOffsetHorizontal+A;break;case"leftTop":case"rightTop":Ae.offset[1]=-De.arrowOffsetHorizontal-A;break;case"leftBottom":case"rightBottom":Ae.offset[1]=De.arrowOffsetHorizontal+A;break}Ae.overflow=W(te,De,re,Q),$&&(Ae.htmlRegion="visibleFirst")}),b}},47419:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.cloneElement=Y,N.isFragment=j,N.isValidElement=void 0,N.replaceElement=ee;var H=w(k(67294));function W(re){if(typeof WeakMap!="function")return null;var Q=new WeakMap,ye=new WeakMap;return(W=function(se){return se?ye:Q})(re)}function w(re,Q){if(!Q&&re&&re.__esModule)return re;if(re===null||typeof re!="object"&&typeof re!="function")return{default:re};var ye=W(Q);if(ye&&ye.has(re))return ye.get(re);var se={__proto__:null},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in re)if($!=="default"&&Object.prototype.hasOwnProperty.call(re,$)){var A=ne?Object.getOwnPropertyDescriptor(re,$):null;A&&(A.get||A.set)?Object.defineProperty(se,$,A):se[$]=re[$]}return se.default=re,ye&&ye.set(re,se),se}const{isValidElement:X}=H;N.isValidElement=X;function j(re){return re&&X(re)&&re.type===H.Fragment}function ee(re,Q,ye){return X(re)?H.cloneElement(re,typeof ye=="function"?ye(re.props||{}):ye):Q}function Y(re,Q){return ee(re,re,Q)}},71434:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.getMergedStatus=void 0,N.getStatusClassNames=X;var W=H(k(93967));const w=null;function X(ee,Y,re){return(0,W.default)({[`${ee}-status-success`]:Y==="success",[`${ee}-status-warning`]:Y==="warning",[`${ee}-status-error`]:Y==="error",[`${ee}-status-validating`]:Y==="validating",[`${ee}-has-feedback`]:re})}const j=(ee,Y)=>Y||ee;N.getMergedStatus=j},38882:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.canUseDocElement=void 0,Object.defineProperty(N,"isStyleSupport",{enumerable:!0,get:function(){return w.isStyleSupport}});var W=H(k(19158)),w=k(3481);const X=()=>(0,W.default)()&&window.document.documentElement;N.canUseDocElement=X},60938:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(27712)),w=j(k(67294));function X(ye){if(typeof WeakMap!="function")return null;var se=new WeakMap,ne=new WeakMap;return(X=function($){return $?ne:se})(ye)}function j(ye,se){if(!se&&ye&&ye.__esModule)return ye;if(ye===null||typeof ye!="object"&&typeof ye!="function")return{default:ye};var ne=X(se);if(ne&&ne.has(ye))return ne.get(ye);var $={__proto__:null},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in ye)if(b!=="default"&&Object.prototype.hasOwnProperty.call(ye,b)){var te=A?Object.getOwnPropertyDescriptor(ye,b):null;te&&(te.get||te.set)?Object.defineProperty($,b,te):$[b]=ye[b]}return $.default=ye,ne&&ne.set(ye,$),$}var ee=function(ye,se){var ne={};for(var $ in ye)Object.prototype.hasOwnProperty.call(ye,$)&&se.indexOf($)<0&&(ne[$]=ye[$]);if(ye!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,$=Object.getOwnPropertySymbols(ye);A<$.length;A++)se.indexOf($[A])<0&&Object.prototype.propertyIsEnumerable.call(ye,$[A])&&(ne[$[A]]=ye[$[A]]);return ne};const Y={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},re=w.forwardRef((ye,se)=>{const ne=De=>{const{keyCode:Ne}=De;Ne===W.default.ENTER&&De.preventDefault()},$=De=>{const{keyCode:Ne}=De,{onClick:Te}=ye;Ne===W.default.ENTER&&Te&&Te()},{style:A,noStyle:b,disabled:te}=ye,le=ee(ye,["style","noStyle","disabled"]);let Ae={};return b||(Ae=Object.assign({},Y)),te&&(Ae.pointerEvents="none"),Ae=Object.assign(Object.assign({},Ae),A),w.createElement("div",Object.assign({role:"button",tabIndex:0,ref:se},le,{onKeyDown:ne,onKeyUp:$,style:Ae}))});var Q=N.default=re},13594:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.devUseWarning=N.default=N.WarningContext=void 0,N.noop=j,N.resetWarned=Y;var H=X(k(67294)),W=X(k(45520));function w(ne){if(typeof WeakMap!="function")return null;var $=new WeakMap,A=new WeakMap;return(w=function(b){return b?A:$})(ne)}function X(ne,$){if(!$&&ne&&ne.__esModule)return ne;if(ne===null||typeof ne!="object"&&typeof ne!="function")return{default:ne};var A=w($);if(A&&A.has(ne))return A.get(ne);var b={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in ne)if(le!=="default"&&Object.prototype.hasOwnProperty.call(ne,le)){var Ae=te?Object.getOwnPropertyDescriptor(ne,le):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(b,le,Ae):b[le]=ne[le]}return b.default=ne,A&&A.set(ne,b),b}function j(){}let ee=null;function Y(){ee=null,(0,W.resetWarned)()}let re=j;const Q=N.WarningContext=H.createContext({}),ye=N.devUseWarning=()=>{const ne=()=>{};return ne.deprecated=j,ne};var se=N.default=re},96877:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(67294));const w=W.default.createContext(void 0);var X=N.default=w},1028:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(25633)),w=N.default=W.default},93319:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.DisabledContextProvider=void 0;var H=w(k(67294));function W(Y){if(typeof WeakMap!="function")return null;var re=new WeakMap,Q=new WeakMap;return(W=function(ye){return ye?Q:re})(Y)}function w(Y,re){if(!re&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var Q=W(re);if(Q&&Q.has(Y))return Q.get(Y);var ye={__proto__:null},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in Y)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(Y,ne)){var $=se?Object.getOwnPropertyDescriptor(Y,ne):null;$&&($.get||$.set)?Object.defineProperty(ye,ne,$):ye[ne]=Y[ne]}return ye.default=Y,Q&&Q.set(Y,ye),ye}const X=H.createContext(!1),j=Y=>{let{children:re,disabled:Q}=Y;const ye=H.useContext(X);return H.createElement(X.Provider,{value:Q!=null?Q:ye},re)};N.DisabledContextProvider=j;var ee=N.default=X},16722:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=ee;var H=k(82225),W=j(k(67294)),w=k(3184);function X(Y){if(typeof WeakMap!="function")return null;var re=new WeakMap,Q=new WeakMap;return(X=function(ye){return ye?Q:re})(Y)}function j(Y,re){if(!re&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var Q=X(re);if(Q&&Q.has(Y))return Q.get(Y);var ye={__proto__:null},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in Y)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(Y,ne)){var $=se?Object.getOwnPropertyDescriptor(Y,ne):null;$&&($.get||$.set)?Object.defineProperty(ye,ne,$):ye[ne]=Y[ne]}return ye.default=Y,Q&&Q.set(Y,ye),ye}function ee(Y){const{children:re}=Y,[,Q]=(0,w.useToken)(),{motion:ye}=Q,se=W.useRef(!1);return se.current=se.current||ye===!1,se.current?W.createElement(H.Provider,{motion:ye},re):re}},11380:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=X(k(67294)),W=k(13594);function w(Y){if(typeof WeakMap!="function")return null;var re=new WeakMap,Q=new WeakMap;return(w=function(ye){return ye?Q:re})(Y)}function X(Y,re){if(!re&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var Q=w(re);if(Q&&Q.has(Y))return Q.get(Y);var ye={__proto__:null},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in Y)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(Y,ne)){var $=se?Object.getOwnPropertyDescriptor(Y,ne):null;$&&($.get||$.set)?Object.defineProperty(ye,ne,$):ye[ne]=Y[ne]}return ye.default=Y,Q&&Q.set(Y,ye),ye}const j=null;var ee=N.default=()=>null},3236:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.SizeContextProvider=void 0;var H=w(k(67294));function W(Y){if(typeof WeakMap!="function")return null;var re=new WeakMap,Q=new WeakMap;return(W=function(ye){return ye?Q:re})(Y)}function w(Y,re){if(!re&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var Q=W(re);if(Q&&Q.has(Y))return Q.get(Y);var ye={__proto__:null},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in Y)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(Y,ne)){var $=se?Object.getOwnPropertyDescriptor(Y,ne):null;$&&($.get||$.set)?Object.defineProperty(ye,ne,$):ye[ne]=Y[ne]}return ye.default=Y,Q&&Q.set(Y,ye),ye}const X=H.createContext(void 0),j=Y=>{let{children:re,size:Q}=Y;const ye=H.useContext(X);return H.createElement(X.Provider,{value:Q||ye},re)};N.SizeContextProvider=j;var ee=N.default=X},7177:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.defaultIconPrefixCls=N.ConfigContext=N.ConfigConsumer=void 0;var H=w(k(67294));function W(re){if(typeof WeakMap!="function")return null;var Q=new WeakMap,ye=new WeakMap;return(W=function(se){return se?ye:Q})(re)}function w(re,Q){if(!Q&&re&&re.__esModule)return re;if(re===null||typeof re!="object"&&typeof re!="function")return{default:re};var ye=W(Q);if(ye&&ye.has(re))return ye.get(re);var se={__proto__:null},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in re)if($!=="default"&&Object.prototype.hasOwnProperty.call(re,$)){var A=ne?Object.getOwnPropertyDescriptor(re,$):null;A&&(A.get||A.set)?Object.defineProperty(se,$,A):se[$]=re[$]}return se.default=re,ye&&ye.set(re,se),se}const X=N.defaultIconPrefixCls="anticon",j=(re,Q)=>Q||(re?`ant-${re}`:"ant"),ee=N.ConfigContext=H.createContext({getPrefixCls:j,iconPrefixCls:X}),{Consumer:Y}=ee;N.ConfigConsumer=Y},56301:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.getStyle=re,N.registerTheme=Q;var W=k(78589),w=k(131),X=H(k(19158)),j=k(93399),ee=H(k(13594));const Y=`-ant-${Date.now()}-${Math.random()}`;function re(ye,se){const ne={},$=(te,le)=>{let Ae=te.clone();return Ae=(le==null?void 0:le(Ae))||Ae,Ae.toRgbString()},A=(te,le)=>{const Ae=new w.TinyColor(te),De=(0,W.generate)(Ae.toRgbString());ne[`${le}-color`]=$(Ae),ne[`${le}-color-disabled`]=De[1],ne[`${le}-color-hover`]=De[4],ne[`${le}-color-active`]=De[6],ne[`${le}-color-outline`]=Ae.clone().setAlpha(.2).toRgbString(),ne[`${le}-color-deprecated-bg`]=De[0],ne[`${le}-color-deprecated-border`]=De[2]};if(se.primaryColor){A(se.primaryColor,"primary");const te=new w.TinyColor(se.primaryColor),le=(0,W.generate)(te.toRgbString());le.forEach((De,Ne)=>{ne[`primary-${Ne+1}`]=De}),ne["primary-color-deprecated-l-35"]=$(te,De=>De.lighten(35)),ne["primary-color-deprecated-l-20"]=$(te,De=>De.lighten(20)),ne["primary-color-deprecated-t-20"]=$(te,De=>De.tint(20)),ne["primary-color-deprecated-t-50"]=$(te,De=>De.tint(50)),ne["primary-color-deprecated-f-12"]=$(te,De=>De.setAlpha(De.getAlpha()*.12));const Ae=new w.TinyColor(le[0]);ne["primary-color-active-deprecated-f-30"]=$(Ae,De=>De.setAlpha(De.getAlpha()*.3)),ne["primary-color-active-deprecated-d-02"]=$(Ae,De=>De.darken(2))}return se.successColor&&A(se.successColor,"success"),se.warningColor&&A(se.warningColor,"warning"),se.errorColor&&A(se.errorColor,"error"),se.infoColor&&A(se.infoColor,"info"),`
  :root {
    ${Object.keys(ne).map(te=>`--${ye}-${te}: ${ne[te]};`).join(`
`)}
  }
  `.trim()}function Q(ye,se){const ne=re(ye,se);(0,X.default)()&&(0,j.updateCSS)(ne,`${Y}-dynamic-theme`)}},14893:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=k(3184);const W=X=>{const[,,,,j]=(0,H.useToken)();return j?`${X}-css-var`:""};var w=N.default=W},5819:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(67294),w=H(k(93319)),X=H(k(3236));function j(){const Y=(0,W.useContext)(w.default),re=(0,W.useContext)(X.default);return{componentDisabled:Y,componentSize:re}}var ee=N.default=j},65693:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(67294)),w=H(k(3236));const X=ee=>{const Y=W.default.useContext(w.default);return W.default.useMemo(()=>ee?typeof ee=="string"?ee!=null?ee:Y:ee instanceof Function?ee(Y):Y:Y,[ee,Y])};var j=N.default=X},25494:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=Y;var W=H(k(67265)),w=H(k(11102)),X=k(3184),j=H(k(78459)),ee=k(13594);function Y(re,Q){var ye,se;const ne=(0,ee.devUseWarning)("ConfigProvider"),$=re||{},A=$.inherit===!1||!Q?Object.assign(Object.assign({},X.defaultConfig),{hashed:(ye=Q==null?void 0:Q.hashed)!==null&&ye!==void 0?ye:X.defaultConfig.hashed,cssVar:Q==null?void 0:Q.cssVar}):Q,b=(0,j.default)();return(0,W.default)(()=>{var te,le;if(!re)return Q;const Ae=Object.assign({},A.components);Object.keys(re.components||{}).forEach(Te=>{Ae[Te]=Object.assign(Object.assign({},Ae[Te]),re.components[Te])});const De=`css-var-${b.replace(/:/g,"")}`,Ne=((te=$.cssVar)!==null&&te!==void 0?te:A.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},typeof A.cssVar=="object"?A.cssVar:{}),typeof $.cssVar=="object"?$.cssVar:{}),{key:typeof $.cssVar=="object"&&((le=$.cssVar)===null||le===void 0?void 0:le.key)||De});return Object.assign(Object.assign(Object.assign({},A),$),{token:Object.assign(Object.assign({},A.token),$.token),components:Ae,cssVar:Ne})},[$,A],(te,le)=>te.some((Ae,De)=>{const Ne=le[De];return!(0,w.default)(Ae,Ne,!0)}))}},78459:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=w(k(67294));function W(Q){if(typeof WeakMap!="function")return null;var ye=new WeakMap,se=new WeakMap;return(W=function(ne){return ne?se:ye})(Q)}function w(Q,ye){if(!ye&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var se=W(ye);if(se&&se.has(Q))return se.get(Q);var ne={__proto__:null},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in Q)if(A!=="default"&&Object.prototype.hasOwnProperty.call(Q,A)){var b=$?Object.getOwnPropertyDescriptor(Q,A):null;b&&(b.get||b.set)?Object.defineProperty(ne,A,b):ne[A]=Q[A]}return ne.default=Q,se&&se.set(Q,ne),ne}const X=Object.assign({},H),{useId:j}=X,Y=typeof j=="undefined"?()=>"":j;var re=N.default=Y},31929:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"ConfigConsumer",{enumerable:!0,get:function(){return A.ConfigConsumer}}),Object.defineProperty(N,"ConfigContext",{enumerable:!0,get:function(){return A.ConfigContext}}),N.default=N.configConsumerProps=void 0,Object.defineProperty(N,"defaultIconPrefixCls",{enumerable:!0,get:function(){return A.defaultIconPrefixCls}}),N.warnContext=N.globalConfig=N.defaultPrefixCls=void 0;var W=we(k(67294)),w=k(36939),X=H(k(13357)),j=H(k(67265)),ee=k(20059),Y=we(k(13594)),re=H(k(2197)),Q=we(k(24522)),ye=H(k(44805)),se=H(k(18253)),ne=k(89329),$=H(k(98411)),A=k(7177),b=k(56301),te=k(93319),le=H(k(5819)),Ae=H(k(25494)),De=H(k(16722)),Ne=H(k(11380)),Te=we(k(3236)),We=H(k(82932));function _e(dt){if(typeof WeakMap!="function")return null;var Bt=new WeakMap,Ye=new WeakMap;return(_e=function(Xe){return Xe?Ye:Bt})(dt)}function we(dt,Bt){if(!Bt&&dt&&dt.__esModule)return dt;if(dt===null||typeof dt!="object"&&typeof dt!="function")return{default:dt};var Ye=_e(Bt);if(Ye&&Ye.has(dt))return Ye.get(dt);var Xe={__proto__:null},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var je in dt)if(je!=="default"&&Object.prototype.hasOwnProperty.call(dt,je)){var at=Le?Object.getOwnPropertyDescriptor(dt,je):null;at&&(at.get||at.set)?Object.defineProperty(Xe,je,at):Xe[je]=dt[je]}return Xe.default=dt,Ye&&Ye.set(dt,Xe),Xe}var Re=function(dt,Bt){var Ye={};for(var Xe in dt)Object.prototype.hasOwnProperty.call(dt,Xe)&&Bt.indexOf(Xe)<0&&(Ye[Xe]=dt[Xe]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Le=0,Xe=Object.getOwnPropertySymbols(dt);Le<Xe.length;Le++)Bt.indexOf(Xe[Le])<0&&Object.prototype.propertyIsEnumerable.call(dt,Xe[Le])&&(Ye[Xe[Le]]=dt[Xe[Le]]);return Ye};let ze=!1;const Ge=N.warnContext=null,yt=N.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],ke=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],tt=N.defaultPrefixCls="ant";let ae,Ke,he,Pe;function lt(){return ae||tt}function He(){return Ke||A.defaultIconPrefixCls}function Ue(dt){return Object.keys(dt).some(Bt=>Bt.endsWith("Color"))}const Qe=dt=>{const{prefixCls:Bt,iconPrefixCls:Ye,theme:Xe,holderRender:Le}=dt;Bt!==void 0&&(ae=Bt),Ye!==void 0&&(Ke=Ye),"holderRender"in dt&&(Pe=Le),Xe&&(Ue(Xe)?(0,b.registerTheme)(lt(),Xe):he=Xe)},Se=()=>({getPrefixCls:(dt,Bt)=>Bt||(dt?`${lt()}-${dt}`:lt()),getIconPrefixCls:He,getRootPrefixCls:()=>ae||lt(),getTheme:()=>he,holderRender:Pe});N.globalConfig=Se;const xe=dt=>{const{children:Bt,csp:Ye,autoInsertSpaceInButton:Xe,alert:Le,anchor:je,form:at,locale:Me,componentSize:Ze,direction:_t,space:Mt,virtual:ir,dropdownMatchSelectWidth:Tr,popupMatchSelectWidth:et,popupOverflow:en,legacyLocale:Xr,parentContext:Sr,iconPrefixCls:pt,theme:Ut,componentDisabled:Gt,segmented:Tt,statistic:qt,spin:fr,calendar:hr,carousel:Er,cascader:Ir,collapse:ue,typography:G,checkbox:oe,descriptions:Ie,divider:qe,drawer:At,skeleton:rr,steps:Zt,image:wt,layout:Pt,list:ge,mentions:ve,modal:Fe,progress:nt,result:St,slider:$t,breadcrumb:vr,menu:Rt,pagination:ct,input:It,empty:gr,badge:Br,radio:Nt,rate:wn,switch:ei,transfer:ci,avatar:ln,message:ti,tag:$n,table:ri,card:oa,tabs:yi,timeline:ya,timePicker:Ya,upload:ha,notification:Fa,tree:Sa,colorPicker:xs,datePicker:co,rangePicker:Lo,flex:Za,wave:Kn,dropdown:Ci,warning:Ga,tour:Jo}=dt,fo=W.useCallback((Bi,Ja)=>{const{prefixCls:Ao}=dt;if(Ja)return Ja;const fs=Ao||Sr.getPrefixCls("");return Bi?`${fs}-${Bi}`:fs},[Sr.getPrefixCls,dt.prefixCls]),To=pt||Sr.iconPrefixCls||A.defaultIconPrefixCls,lr=Ye||Sr.csp;(0,We.default)(To,lr);const Dt=(0,Ae.default)(Ut,Sr.theme),er={csp:lr,autoInsertSpaceInButton:Xe,alert:Le,anchor:je,locale:Me||Xr,direction:_t,space:Mt,virtual:ir,popupMatchSelectWidth:et!=null?et:Tr,popupOverflow:en,getPrefixCls:fo,iconPrefixCls:To,theme:Dt,segmented:Tt,statistic:qt,spin:fr,calendar:hr,carousel:Er,cascader:Ir,collapse:ue,typography:G,checkbox:oe,descriptions:Ie,divider:qe,drawer:At,skeleton:rr,steps:Zt,image:wt,input:It,layout:Pt,list:ge,mentions:ve,modal:Fe,progress:nt,result:St,slider:$t,breadcrumb:vr,menu:Rt,pagination:ct,empty:gr,badge:Br,radio:Nt,rate:wn,switch:ei,transfer:ci,avatar:ln,message:ti,tag:$n,table:ri,card:oa,tabs:yi,timeline:ya,timePicker:Ya,upload:ha,notification:Fa,tree:Sa,colorPicker:xs,datePicker:co,rangePicker:Lo,flex:Za,wave:Kn,dropdown:Ci,warning:Ga,tour:Jo},kr=Object.assign({},Sr);Object.keys(er).forEach(Bi=>{er[Bi]!==void 0&&(kr[Bi]=er[Bi])}),ke.forEach(Bi=>{const Ja=dt[Bi];Ja&&(kr[Bi]=Ja)});const tn=(0,j.default)(()=>kr,kr,(Bi,Ja)=>{const Ao=Object.keys(Bi),fs=Object.keys(Ja);return Ao.length!==fs.length||Ao.some(ko=>Bi[ko]!==Ja[ko])}),In=W.useMemo(()=>({prefixCls:To,csp:lr}),[To,lr]);let zn=W.createElement(W.Fragment,null,W.createElement(Ne.default,{dropdownMatchSelectWidth:Tr}),Bt);const On=W.useMemo(()=>{var Bi,Ja,Ao,fs;return(0,ee.merge)(((Bi=se.default.Form)===null||Bi===void 0?void 0:Bi.defaultValidateMessages)||{},((Ao=(Ja=tn.locale)===null||Ja===void 0?void 0:Ja.Form)===null||Ao===void 0?void 0:Ao.defaultValidateMessages)||{},((fs=tn.form)===null||fs===void 0?void 0:fs.validateMessages)||{},(at==null?void 0:at.validateMessages)||{})},[tn,at==null?void 0:at.validateMessages]);Object.keys(On).length>0&&(zn=W.createElement(re.default.Provider,{value:On},zn)),Me&&(zn=W.createElement(Q.default,{locale:Me,_ANT_MARK__:Q.ANT_MARK},zn)),(To||lr)&&(zn=W.createElement(X.default.Provider,{value:In},zn)),Ze&&(zn=W.createElement(Te.SizeContextProvider,{size:Ze},zn)),zn=W.createElement(De.default,null,zn);const Vi=W.useMemo(()=>{const Bi=Dt||{},{algorithm:Ja,token:Ao,components:fs,cssVar:ko}=Bi,oo=Re(Bi,["algorithm","token","components","cssVar"]),iu=Ja&&(!Array.isArray(Ja)||Ja.length>0)?(0,w.createTheme)(Ja):ne.defaultTheme,Ko={};Object.entries(fs||{}).forEach(sr=>{let[Vr,Cn]=sr;const Yn=Object.assign({},Cn);"algorithm"in Yn&&(Yn.algorithm===!0?Yn.theme=iu:(Array.isArray(Yn.algorithm)||typeof Yn.algorithm=="function")&&(Yn.theme=(0,w.createTheme)(Yn.algorithm)),delete Yn.algorithm),Ko[Vr]=Yn});const jt=Object.assign(Object.assign({},$.default),Ao);return Object.assign(Object.assign({},oo),{theme:iu,token:jt,components:Ko,override:Object.assign({override:jt},Ko),cssVar:ko})},[Dt]);return Ut&&(zn=W.createElement(ne.DesignTokenContext.Provider,{value:Vi},zn)),tn.warning&&(zn=W.createElement(Y.WarningContext.Provider,{value:tn.warning},zn)),Gt!==void 0&&(zn=W.createElement(te.DisabledContextProvider,{disabled:Gt},zn)),W.createElement(A.ConfigContext.Provider,{value:tn},zn)},rt=dt=>{const Bt=W.useContext(A.ConfigContext),Ye=W.useContext(ye.default);return W.createElement(xe,Object.assign({parentContext:Bt,legacyLocale:Ye},dt))};rt.ConfigContext=A.ConfigContext,rt.SizeContext=Te.default,rt.config=Qe,rt.useConfig=le.default,Object.defineProperty(rt,"SizeContext",{get:()=>Te.default});var Je=N.default=rt},82932:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return H.useResetIconStyle}});var H=k(3184)},25633:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(27590)),w=H(k(52040));const X={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},W.default),timePickerLocale:Object.assign({},w.default)};var j=N.default=X},51130:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.VariantContext=N.NoStyleItemContext=N.NoFormStyle=N.FormProvider=N.FormItemPrefixContext=N.FormItemInputContext=N.FormContext=void 0;var W=Y(k(67294)),w=W,X=k(43589),j=H(k(18475));function ee(b){if(typeof WeakMap!="function")return null;var te=new WeakMap,le=new WeakMap;return(ee=function(Ae){return Ae?le:te})(b)}function Y(b,te){if(!te&&b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var le=ee(te);if(le&&le.has(b))return le.get(b);var Ae={__proto__:null},De=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ne in b)if(Ne!=="default"&&Object.prototype.hasOwnProperty.call(b,Ne)){var Te=De?Object.getOwnPropertyDescriptor(b,Ne):null;Te&&(Te.get||Te.set)?Object.defineProperty(Ae,Ne,Te):Ae[Ne]=b[Ne]}return Ae.default=b,le&&le.set(b,Ae),Ae}const re=N.FormContext=w.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Q=N.NoStyleItemContext=w.createContext(null),ye=b=>{const te=(0,j.default)(b,["prefixCls"]);return w.createElement(X.FormProvider,Object.assign({},te))};N.FormProvider=ye;const se=N.FormItemPrefixContext=w.createContext({prefixCls:""}),ne=N.FormItemInputContext=w.createContext({}),$=b=>{let{children:te,status:le,override:Ae}=b;const De=(0,W.useContext)(ne),Ne=(0,W.useMemo)(()=>{const Te=Object.assign({},De);return Ae&&delete Te.isFormItemInput,le&&(delete Te.status,delete Te.hasFeedback,delete Te.feedbackIcon),Te},[le,Ae,De]);return w.createElement(ne.Provider,{value:Ne},te)};N.NoFormStyle=$;const A=N.VariantContext=(0,W.createContext)(void 0)},96424:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.Variants=void 0;var H=k(67294),W=k(51130);const w=N.Variants=["outlined","borderless","filled"],X=function(ee){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const re=(0,H.useContext)(W.VariantContext);let Q;typeof ee!="undefined"?Q=ee:Y===!1?Q="borderless":Q=re!=null?re:"outlined";const ye=w.includes(Q);return[Q,ye]};var j=N.default=X},2197:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=k(67294),W=N.default=(0,H.createContext)(void 0)},10815:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.triggerFocus=We;var W=Ne(k(67294)),w=H(k(93967)),X=H(k(67656)),j=k(75531),ee=k(71434),Y=k(13594),re=k(31929),Q=H(k(93319)),ye=H(k(65693)),se=k(51130),ne=k(46549),$=H(k(81722)),A=H(k(89858)),b=k(36714),te=H(k(14893)),le=H(k(96424)),Ae=H(k(49314));function De(Re){if(typeof WeakMap!="function")return null;var ze=new WeakMap,Ge=new WeakMap;return(De=function(yt){return yt?Ge:ze})(Re)}function Ne(Re,ze){if(!ze&&Re&&Re.__esModule)return Re;if(Re===null||typeof Re!="object"&&typeof Re!="function")return{default:Re};var Ge=De(ze);if(Ge&&Ge.has(Re))return Ge.get(Re);var yt={__proto__:null},ke=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Re)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Re,tt)){var ae=ke?Object.getOwnPropertyDescriptor(Re,tt):null;ae&&(ae.get||ae.set)?Object.defineProperty(yt,tt,ae):yt[tt]=Re[tt]}return yt.default=Re,Ge&&Ge.set(Re,yt),yt}var Te=function(Re,ze){var Ge={};for(var yt in Re)Object.prototype.hasOwnProperty.call(Re,yt)&&ze.indexOf(yt)<0&&(Ge[yt]=Re[yt]);if(Re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ke=0,yt=Object.getOwnPropertySymbols(Re);ke<yt.length;ke++)ze.indexOf(yt[ke])<0&&Object.prototype.propertyIsEnumerable.call(Re,yt[ke])&&(Ge[yt[ke]]=Re[yt[ke]]);return Ge};function We(Re,ze){if(!Re)return;Re.focus(ze);const{cursor:Ge}=ze||{};if(Ge){const yt=Re.value.length;switch(Ge){case"start":Re.setSelectionRange(0,0);break;case"end":Re.setSelectionRange(yt,yt);break;default:Re.setSelectionRange(0,yt);break}}}const _e=(0,W.forwardRef)((Re,ze)=>{var Ge;const{prefixCls:yt,bordered:ke=!0,status:tt,size:ae,disabled:Ke,onBlur:he,onFocus:Pe,suffix:lt,allowClear:He,addonAfter:Ue,addonBefore:Qe,className:Se,style:xe,styles:rt,rootClassName:Je,onChange:dt,classNames:Bt,variant:Ye}=Re,Xe=Te(Re,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Le,direction:je,input:at}=W.default.useContext(re.ConfigContext),Me=Le("input",yt),Ze=(0,W.useRef)(null),_t=(0,te.default)(Me),[Mt,ir,Tr]=(0,A.default)(Me,_t),{compactSize:et,compactItemClassnames:en}=(0,ne.useCompactItemContext)(Me,je),Xr=(0,ye.default)(rr=>{var Zt;return(Zt=ae!=null?ae:et)!==null&&Zt!==void 0?Zt:rr}),Sr=W.default.useContext(Q.default),pt=Ke!=null?Ke:Sr,{status:Ut,hasFeedback:Gt,feedbackIcon:Tt}=(0,W.useContext)(se.FormItemInputContext),qt=(0,ee.getMergedStatus)(Ut,tt),fr=(0,b.hasPrefixSuffix)(Re)||!!Gt,hr=(0,W.useRef)(fr),Er=(0,$.default)(Ze,!0),Ir=rr=>{Er(),he==null||he(rr)},ue=rr=>{Er(),Pe==null||Pe(rr)},G=rr=>{Er(),dt==null||dt(rr)},oe=(Gt||lt)&&W.default.createElement(W.default.Fragment,null,lt,Gt&&Tt),Ie=(0,Ae.default)(He),[qe,At]=(0,le.default)(Ye,ke);return Mt(W.default.createElement(X.default,Object.assign({ref:(0,j.composeRef)(ze,Ze),prefixCls:Me,autoComplete:at==null?void 0:at.autoComplete},Xe,{disabled:pt,onBlur:Ir,onFocus:ue,style:Object.assign(Object.assign({},at==null?void 0:at.style),xe),styles:Object.assign(Object.assign({},at==null?void 0:at.styles),rt),suffix:oe,allowClear:Ie,className:(0,w.default)(Se,Je,Tr,_t,en,at==null?void 0:at.className),onChange:G,addonAfter:Ue&&W.default.createElement(ne.NoCompactStyle,null,W.default.createElement(se.NoFormStyle,{override:!0,status:!0},Ue)),addonBefore:Qe&&W.default.createElement(ne.NoCompactStyle,null,W.default.createElement(se.NoFormStyle,{override:!0,status:!0},Qe)),classNames:Object.assign(Object.assign(Object.assign({},Bt),at==null?void 0:at.classNames),{input:(0,w.default)({[`${Me}-sm`]:Xr==="small",[`${Me}-lg`]:Xr==="large",[`${Me}-rtl`]:je==="rtl"},Bt==null?void 0:Bt.input,(Ge=at==null?void 0:at.classNames)===null||Ge===void 0?void 0:Ge.input,ir),variant:(0,w.default)({[`${Me}-${qe}`]:At},(0,ee.getStatusClassNames)(Me,qt)),affixWrapper:(0,w.default)({[`${Me}-affix-wrapper-sm`]:Xr==="small",[`${Me}-affix-wrapper-lg`]:Xr==="large",[`${Me}-affix-wrapper-rtl`]:je==="rtl"},ir),wrapper:(0,w.default)({[`${Me}-group-rtl`]:je==="rtl"},ir),groupWrapper:(0,w.default)({[`${Me}-group-wrapper-sm`]:Xr==="small",[`${Me}-group-wrapper-lg`]:Xr==="large",[`${Me}-group-wrapper-rtl`]:je==="rtl",[`${Me}-group-wrapper-${qe}`]:At},(0,ee.getStatusClassNames)(`${Me}-group-wrapper`,qt,Gt),ir)})})))});var we=N.default=_e},14104:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=Ae(k(67294)),w=W,X=H(k(43273)),j=H(k(93967)),ee=H(k(43961)),Y=k(71434),re=k(31929),Q=H(k(93319)),ye=H(k(65693)),se=k(51130),ne=k(10815),$=H(k(89858)),A=H(k(14893)),b=H(k(96424)),te=k(13594);function le(We){if(typeof WeakMap!="function")return null;var _e=new WeakMap,we=new WeakMap;return(le=function(Re){return Re?we:_e})(We)}function Ae(We,_e){if(!_e&&We&&We.__esModule)return We;if(We===null||typeof We!="object"&&typeof We!="function")return{default:We};var we=le(_e);if(we&&we.has(We))return we.get(We);var Re={__proto__:null},ze=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ge in We)if(Ge!=="default"&&Object.prototype.hasOwnProperty.call(We,Ge)){var yt=ze?Object.getOwnPropertyDescriptor(We,Ge):null;yt&&(yt.get||yt.set)?Object.defineProperty(Re,Ge,yt):Re[Ge]=We[Ge]}return Re.default=We,we&&we.set(We,Re),Re}var De=function(We,_e){var we={};for(var Re in We)Object.prototype.hasOwnProperty.call(We,Re)&&_e.indexOf(Re)<0&&(we[Re]=We[Re]);if(We!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,Re=Object.getOwnPropertySymbols(We);ze<Re.length;ze++)_e.indexOf(Re[ze])<0&&Object.prototype.propertyIsEnumerable.call(We,Re[ze])&&(we[Re[ze]]=We[Re[ze]]);return we};const Ne=(0,W.forwardRef)((We,_e)=>{var we;const{prefixCls:Re,bordered:ze=!0,size:Ge,disabled:yt,status:ke,allowClear:tt,classNames:ae,rootClassName:Ke,className:he,variant:Pe}=We,lt=De(We,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","variant"]),{getPrefixCls:He,direction:Ue}=w.useContext(re.ConfigContext),Qe=(0,ye.default)(Ge),Se=w.useContext(Q.default),xe=yt!=null?yt:Se,{status:rt,hasFeedback:Je,feedbackIcon:dt}=w.useContext(se.FormItemInputContext),Bt=(0,Y.getMergedStatus)(rt,ke),Ye=w.useRef(null);w.useImperativeHandle(_e,()=>{var ir;return{resizableTextArea:(ir=Ye.current)===null||ir===void 0?void 0:ir.resizableTextArea,focus:Tr=>{var et,en;(0,ne.triggerFocus)((en=(et=Ye.current)===null||et===void 0?void 0:et.resizableTextArea)===null||en===void 0?void 0:en.textArea,Tr)},blur:()=>{var Tr;return(Tr=Ye.current)===null||Tr===void 0?void 0:Tr.blur()}}});const Xe=He("input",Re);let Le;typeof tt=="object"&&(tt!=null&&tt.clearIcon)?Le=tt:tt&&(Le={clearIcon:w.createElement(X.default,null)});const je=(0,A.default)(Xe),[at,Me,Ze]=(0,$.default)(Xe,je),[_t,Mt]=(0,b.default)(Pe,ze);return at(w.createElement(ee.default,Object.assign({},lt,{disabled:xe,allowClear:Le,className:(0,j.default)(Ze,je,he,Ke),classNames:Object.assign(Object.assign({},ae),{textarea:(0,j.default)({[`${Xe}-sm`]:Qe==="small",[`${Xe}-lg`]:Qe==="large"},Me,ae==null?void 0:ae.textarea),variant:(0,j.default)({[`${Xe}-${_t}`]:Mt},(0,Y.getStatusClassNames)(Xe,Bt)),affixWrapper:(0,j.default)(`${Xe}-textarea-affix-wrapper`,{[`${Xe}-affix-wrapper-rtl`]:Ue==="rtl",[`${Xe}-affix-wrapper-sm`]:Qe==="small",[`${Xe}-affix-wrapper-lg`]:Qe==="large",[`${Xe}-textarea-show-count`]:We.showCount||((we=We.count)===null||we===void 0?void 0:we.show)},Me)}),prefixCls:Xe,suffix:Je&&w.createElement("span",{className:`${Xe}-textarea-suffix`},dt),ref:Ye})))});var Te=N.default=Ne},81722:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=W;var H=k(67294);function W(w,X){const j=(0,H.useRef)([]),ee=()=>{j.current.push(setTimeout(()=>{var Y,re,Q,ye;!((Y=w.current)===null||Y===void 0)&&Y.input&&((re=w.current)===null||re===void 0?void 0:re.input.getAttribute("type"))==="password"&&(!((Q=w.current)===null||Q===void 0)&&Q.input.hasAttribute("value"))&&((ye=w.current)===null||ye===void 0||ye.input.removeAttribute("value"))}))};return(0,H.useEffect)(()=>(X&&ee(),()=>j.current.forEach(Y=>{Y&&clearTimeout(Y)})),[]),ee}},89858:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genPlaceholderStyle=N.genInputSmallStyle=N.genInputGroupStyle=N.genBasicInputStyle=N.genActiveStyle=N.default=void 0,Object.defineProperty(N,"initComponentToken",{enumerable:!0,get:function(){return j.initComponentToken}}),Object.defineProperty(N,"initInputToken",{enumerable:!0,get:function(){return j.initInputToken}});var H=k(36939),W=k(98078),w=k(78793),X=k(3184),j=k(25735),ee=k(58594);const Y=Te=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:Te,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});N.genPlaceholderStyle=Y;const re=Te=>({borderColor:Te.activeBorderColor,boxShadow:Te.activeShadow,outline:0,backgroundColor:Te.activeBg});N.genActiveStyle=re;const Q=Te=>{const{paddingBlockLG:We,lineHeightLG:_e,borderRadiusLG:we,paddingInlineLG:Re}=Te;return{padding:`${(0,H.unit)(We)} ${(0,H.unit)(Re)}`,fontSize:Te.inputFontSizeLG,lineHeight:_e,borderRadius:we}},ye=Te=>({padding:`${(0,H.unit)(Te.paddingBlockSM)} ${(0,H.unit)(Te.paddingInlineSM)}`,fontSize:Te.inputFontSizeSM,borderRadius:Te.borderRadiusSM});N.genInputSmallStyle=ye;const se=Te=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,H.unit)(Te.paddingBlock)} ${(0,H.unit)(Te.paddingInline)}`,color:Te.colorText,fontSize:Te.inputFontSize,lineHeight:Te.lineHeight,borderRadius:Te.borderRadius,transition:`all ${Te.motionDurationMid}`},Y(Te.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:Te.controlHeight,lineHeight:Te.lineHeight,verticalAlign:"bottom",transition:`all ${Te.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},Q(Te)),"&-sm":Object.assign({},ye(Te)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});N.genBasicInputStyle=se;const ne=Te=>{const{componentCls:We,antCls:_e}=Te;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:Te.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${We}, &-lg > ${We}-group-addon`]:Object.assign({},Q(Te)),[`&-sm ${We}, &-sm > ${We}-group-addon`]:Object.assign({},ye(Te)),[`&-lg ${_e}-select-single ${_e}-select-selector`]:{height:Te.controlHeightLG},[`&-sm ${_e}-select-single ${_e}-select-selector`]:{height:Te.controlHeightSM},[`> ${We}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${We}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,H.unit)(Te.paddingInline)}`,color:Te.colorText,fontWeight:"normal",fontSize:Te.inputFontSize,textAlign:"center",borderRadius:Te.borderRadius,transition:`all ${Te.motionDurationSlow}`,lineHeight:1,[`${_e}-select`]:{margin:`${(0,H.unit)(Te.calc(Te.paddingBlock).add(1).mul(-1).equal())} ${(0,H.unit)(Te.calc(Te.paddingInline).mul(-1).equal())}`,[`&${_e}-select-single:not(${_e}-select-customize-input):not(${_e}-pagination-size-changer)`]:{[`${_e}-select-selector`]:{backgroundColor:"inherit",border:`${(0,H.unit)(Te.lineWidth)} ${Te.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${_e}-select-selector`]:{color:Te.colorPrimary}}},[`${_e}-cascader-picker`]:{margin:`-9px ${(0,H.unit)(Te.calc(Te.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${_e}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${We}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${We}-search-with-button &`]:{zIndex:0}}},[`> ${We}:first-child, ${We}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${_e}-select ${_e}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${We}-affix-wrapper`]:{[`&:not(:first-child) ${We}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${We}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${We}:last-child, ${We}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${_e}-select ${_e}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${We}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${We}-search &`]:{borderStartStartRadius:Te.borderRadius,borderEndStartRadius:Te.borderRadius}},[`&:not(:first-child), ${We}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${We}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,W.clearFix)()),{[`${We}-group-addon, ${We}-group-wrap, > ${We}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:Te.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${We}-affix-wrapper,
        & > ${We}-number-affix-wrapper,
        & > ${_e}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:Te.calc(Te.lineWidth).mul(-1).equal(),borderInlineEndWidth:Te.lineWidth},[`${We}`]:{float:"none"},[`& > ${_e}-select > ${_e}-select-selector,
      & > ${_e}-select-auto-complete ${We},
      & > ${_e}-cascader-picker ${We},
      & > ${We}-group-wrapper ${We}`]:{borderInlineEndWidth:Te.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${_e}-select-focused`]:{zIndex:1},[`& > ${_e}-select > ${_e}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${_e}-select:first-child > ${_e}-select-selector,
      & > ${_e}-select-auto-complete:first-child ${We},
      & > ${_e}-cascader-picker:first-child ${We}`]:{borderStartStartRadius:Te.borderRadius,borderEndStartRadius:Te.borderRadius},[`& > *:last-child,
      & > ${_e}-select:last-child > ${_e}-select-selector,
      & > ${_e}-cascader-picker:last-child ${We},
      & > ${_e}-cascader-picker-focused:last-child ${We}`]:{borderInlineEndWidth:Te.lineWidth,borderStartEndRadius:Te.borderRadius,borderEndEndRadius:Te.borderRadius},[`& > ${_e}-select-auto-complete ${We}`]:{verticalAlign:"top"},[`${We}-group-wrapper + ${We}-group-wrapper`]:{marginInlineStart:Te.calc(Te.lineWidth).mul(-1).equal(),[`${We}-affix-wrapper`]:{borderRadius:0}},[`${We}-group-wrapper:not(:last-child)`]:{[`&${We}-search > ${We}-group`]:{[`& > ${We}-group-addon > ${We}-search-button`]:{borderRadius:0},[`& > ${We}`]:{borderStartStartRadius:Te.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:Te.borderRadius}}}})}};N.genInputGroupStyle=ne;const $=Te=>{const{componentCls:We,controlHeightSM:_e,lineWidth:we,calc:Re}=Te,ze=16,Ge=Re(_e).sub(Re(we).mul(2)).sub(ze).div(2).equal();return{[We]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(Te)),se(Te)),(0,ee.genOutlinedStyle)(Te)),(0,ee.genFilledStyle)(Te)),(0,ee.genBorderlessStyle)(Te)),{'&[type="color"]':{height:Te.controlHeight,[`&${We}-lg`]:{height:Te.controlHeightLG},[`&${We}-sm`]:{height:_e,paddingTop:Ge,paddingBottom:Ge}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},A=Te=>{const{componentCls:We}=Te;return{[`${We}-clear-icon`]:{margin:0,color:Te.colorTextQuaternary,fontSize:Te.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${Te.motionDurationSlow}`,"&:hover":{color:Te.colorTextTertiary},"&:active":{color:Te.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,H.unit)(Te.inputAffixPadding)}`}}}},b=Te=>{const{componentCls:We,inputAffixPadding:_e,colorTextDescription:we,motionDurationSlow:Re,colorIcon:ze,colorIconHover:Ge,iconCls:yt}=Te;return{[`${We}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},se(Te)),{display:"inline-flex",[`&:not(${We}-disabled):hover`]:{zIndex:1,[`${We}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${We}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${We}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:Te.paddingXS}},"&-show-count-suffix":{color:we},"&-show-count-has-suffix":{marginInlineEnd:Te.paddingXXS},"&-prefix":{marginInlineEnd:_e},"&-suffix":{marginInlineStart:_e}}}),A(Te)),{[`${yt}${We}-password-icon`]:{color:ze,cursor:"pointer",transition:`all ${Re}`,"&:hover":{color:Ge}}})}},te=Te=>{const{componentCls:We,borderRadiusLG:_e,borderRadiusSM:we}=Te;return{[`${We}-group`]:Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(Te)),ne(Te)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${We}-group-addon`]:{borderRadius:_e,fontSize:Te.inputFontSizeLG}},"&-sm":{[`${We}-group-addon`]:{borderRadius:we}}},(0,ee.genOutlinedGroupStyle)(Te)),(0,ee.genFilledGroupStyle)(Te)),{[`&:not(${We}-compact-first-item):not(${We}-compact-last-item)${We}-compact-item`]:{[`${We}, ${We}-group-addon`]:{borderRadius:0}},[`&:not(${We}-compact-last-item)${We}-compact-first-item`]:{[`${We}, ${We}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${We}-compact-first-item)${We}-compact-last-item`]:{[`${We}, ${We}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${We}-compact-last-item)${We}-compact-item`]:{[`${We}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},le=Te=>{const{componentCls:We,antCls:_e}=Te,we=`${We}-search`;return{[we]:{[`${We}`]:{"&:hover, &:focus":{borderColor:Te.colorPrimaryHover,[`+ ${We}-group-addon ${we}-button:not(${_e}-btn-primary)`]:{borderInlineStartColor:Te.colorPrimaryHover}}},[`${We}-affix-wrapper`]:{borderRadius:0},[`${We}-lg`]:{lineHeight:Te.calc(Te.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${We}-group`]:{[`> ${We}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${we}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:Te.borderRadius,borderEndEndRadius:Te.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${we}-button:not(${_e}-btn-primary)`]:{color:Te.colorTextDescription,"&:hover":{color:Te.colorPrimaryHover},"&:active":{color:Te.colorPrimaryActive},[`&${_e}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${we}-button`]:{height:Te.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${we}-button`]:{height:Te.controlHeightLG},[`&-small ${we}-button`]:{height:Te.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${We}-compact-item`]:{[`&:not(${We}-compact-last-item)`]:{[`${We}-group-addon`]:{[`${We}-search-button`]:{marginInlineEnd:Te.calc(Te.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${We}-compact-first-item)`]:{[`${We},${We}-affix-wrapper`]:{borderRadius:0}},[`> ${We}-group-addon ${We}-search-button,
        > ${We},
        ${We}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${We}-affix-wrapper-focused`]:{zIndex:2}}}}},Ae=Te=>{const{componentCls:We,paddingLG:_e}=Te,we=`${We}-textarea`;return{[we]:{position:"relative","&-show-count":{[`> ${We}`]:{height:"100%"},[`${We}-data-count`]:{position:"absolute",bottom:Te.calc(Te.fontSize).mul(Te.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:Te.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${We}`]:{paddingInlineEnd:_e}},[`&-affix-wrapper${we}-has-feedback`]:{[`${We}`]:{paddingInlineEnd:_e}},[`&-affix-wrapper${We}-affix-wrapper`]:{padding:0,[`> textarea${We}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${We}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${We}-clear-icon`]:{position:"absolute",insetInlineEnd:Te.paddingXS,insetBlockStart:Te.paddingXS},[`${we}-suffix`]:{position:"absolute",top:0,insetInlineEnd:Te.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},De=Te=>{const{componentCls:We}=Te;return{[`${We}-out-of-range`]:{[`&, & input, & textarea, ${We}-show-count-suffix, ${We}-data-count`]:{color:Te.colorError}}}};var Ne=N.default=(0,X.genStyleHooks)("Input",Te=>{const We=(0,X.mergeToken)(Te,(0,j.initInputToken)(Te));return[$(We),Ae(We),b(We),te(We),le(We),De(We),(0,w.genCompactItemStyle)(We)]},j.initComponentToken)},25735:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initComponentToken=void 0,N.initInputToken=W;var H=k(3184);function W(X){return(0,H.mergeToken)(X,{inputAffixPadding:X.paddingXXS})}const w=X=>{const{controlHeight:j,fontSize:ee,lineHeight:Y,lineWidth:re,controlHeightSM:Q,controlHeightLG:ye,fontSizeLG:se,lineHeightLG:ne,paddingSM:$,controlPaddingHorizontalSM:A,controlPaddingHorizontal:b,colorFillAlter:te,colorPrimaryHover:le,colorPrimary:Ae,controlOutlineWidth:De,controlOutline:Ne,colorErrorOutline:Te,colorWarningOutline:We,colorBgContainer:_e}=X;return{paddingBlock:Math.max(Math.round((j-ee*Y)/2*10)/10-re,0),paddingBlockSM:Math.max(Math.round((Q-ee*Y)/2*10)/10-re,0),paddingBlockLG:Math.ceil((ye-se*ne)/2*10)/10-re,paddingInline:$-re,paddingInlineSM:A-re,paddingInlineLG:b-re,addonBg:te,activeBorderColor:Ae,hoverBorderColor:le,activeShadow:`0 0 0 ${De}px ${Ne}`,errorActiveShadow:`0 0 0 ${De}px ${Te}`,warningActiveShadow:`0 0 0 ${De}px ${We}`,hoverBg:_e,activeBg:_e,inputFontSize:ee,inputFontSizeLG:se,inputFontSizeSM:ee}};N.initComponentToken=w},58594:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genOutlinedStyle=N.genOutlinedGroupStyle=N.genHoverStyle=N.genFilledStyle=N.genFilledGroupStyle=N.genDisabledStyle=N.genBorderlessStyle=N.genBaseOutlinedStyle=void 0;var H=k(36939),W=k(3184);const w=te=>({borderColor:te.hoverBorderColor,backgroundColor:te.hoverBg});N.genHoverStyle=w;const X=te=>({color:te.colorTextDisabled,backgroundColor:te.colorBgContainerDisabled,borderColor:te.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},w((0,W.mergeToken)(te,{hoverBorderColor:te.colorBorder,hoverBg:te.colorBgContainerDisabled})))});N.genDisabledStyle=X;const j=(te,le)=>({background:te.colorBgContainer,borderWidth:te.lineWidth,borderStyle:te.lineType,borderColor:le.borderColor,"&:hover":{borderColor:le.hoverBorderColor,backgroundColor:te.hoverBg},"&:focus, &:focus-within":{borderColor:le.activeBorderColor,boxShadow:le.activeShadow,outline:0,backgroundColor:te.activeBg}});N.genBaseOutlinedStyle=j;const ee=(te,le)=>({[`&${te.componentCls}-status-${le.status}:not(${te.componentCls}-disabled)`]:Object.assign(Object.assign({},j(te,le)),{[`${te.componentCls}-prefix, ${te.componentCls}-suffix`]:{color:le.affixColor}})}),Y=(te,le)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},j(te,{borderColor:te.colorBorder,hoverBorderColor:te.hoverBorderColor,activeBorderColor:te.activeBorderColor,activeShadow:te.activeShadow})),{[`&${te.componentCls}-disabled, &[disabled]`]:Object.assign({},X(te))}),ee(te,{status:"error",borderColor:te.colorError,hoverBorderColor:te.colorErrorBorderHover,activeBorderColor:te.colorError,activeShadow:te.errorActiveShadow,affixColor:te.colorError})),ee(te,{status:"warning",borderColor:te.colorWarning,hoverBorderColor:te.colorWarningBorderHover,activeBorderColor:te.colorWarning,activeShadow:te.warningActiveShadow,affixColor:te.colorWarning})),le)});N.genOutlinedStyle=Y;const re=(te,le)=>({[`&${te.componentCls}-group-wrapper-status-${le.status}`]:{[`${te.componentCls}-group-addon`]:{borderColor:le.addonBorderColor,color:le.addonColor}}}),Q=te=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${te.componentCls}-group`]:{"&-addon":{background:te.addonBg,border:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},re(te,{status:"error",addonBorderColor:te.colorError,addonColor:te.colorErrorText})),re(te,{status:"warning",addonBorderColor:te.colorWarning,addonColor:te.colorWarningText})),{[`&${te.componentCls}-group-wrapper-disabled`]:{[`${te.componentCls}-group-addon`]:Object.assign({},X(te))}})});N.genOutlinedGroupStyle=Q;const ye=(te,le)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${te.componentCls}-disabled, &[disabled]`]:{color:te.colorTextDisabled}},le)});N.genBorderlessStyle=ye;const se=(te,le)=>({background:le.bg,borderWidth:te.lineWidth,borderStyle:te.lineType,borderColor:"transparent",["input&, & input, textarea&, & textarea"]:{color:le==null?void 0:le.inputColor},"&:hover":{background:le.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:le.activeBorderColor,backgroundColor:te.activeBg}}),ne=(te,le)=>({[`&${te.componentCls}-status-${le.status}:not(${te.componentCls}-disabled)`]:Object.assign(Object.assign({},se(te,le)),{[`${te.componentCls}-prefix, ${te.componentCls}-suffix`]:{color:le.affixColor}})}),$=(te,le)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},se(te,{bg:te.colorFillTertiary,hoverBg:te.colorFillSecondary,activeBorderColor:te.colorPrimary})),{[`&${te.componentCls}-disabled, &[disabled]`]:Object.assign({},X(te))}),ne(te,{status:"error",bg:te.colorErrorBg,hoverBg:te.colorErrorBgHover,activeBorderColor:te.colorError,inputColor:te.colorErrorText,affixColor:te.colorError})),ne(te,{status:"warning",bg:te.colorWarningBg,hoverBg:te.colorWarningBgHover,activeBorderColor:te.colorWarning,inputColor:te.colorWarningText,affixColor:te.colorWarning})),le)});N.genFilledStyle=$;const A=(te,le)=>({[`&${te.componentCls}-group-wrapper-status-${le.status}`]:{[`${te.componentCls}-group-addon`]:{background:le.addonBg,color:le.addonColor}}}),b=te=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${te.componentCls}-group`]:{"&-addon":{background:te.colorFillTertiary},[`${te.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorSplit}`}}}},A(te,{status:"error",addonBg:te.colorErrorBg,addonColor:te.colorErrorText})),A(te,{status:"warning",addonBg:te.colorWarningBg,addonColor:te.colorWarningText})),{[`&${te.componentCls}-group-wrapper-disabled`]:{[`${te.componentCls}-group`]:{"&-addon":{background:te.colorFillTertiary,color:te.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`,borderTop:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`,borderBottom:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`,borderTop:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`,borderBottom:`${(0,H.unit)(te.lineWidth)} ${te.lineType} ${te.colorBorder}`}}}})});N.genFilledGroupStyle=b},36714:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.hasPrefixSuffix=k;function k(H){return!!(H.prefix||H.suffix||H.allowClear||H.showCount)}},44805:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=k(67294);const W=(0,H.createContext)(void 0);var w=N.default=W},18253:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(62273)),w=H(k(1028)),X=H(k(25633)),j=H(k(52040));const ee="${label} is not a valid ${type}",Y={locale:"en",Pagination:W.default,DatePicker:X.default,TimePicker:j.default,Calendar:w.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ee,method:ee,array:ee,object:ee,number:ee,date:ee,boolean:ee,integer:ee,float:ee,regexp:ee,email:ee,url:ee,hex:ee},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};var re=N.default=Y},24522:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.ANT_MARK=void 0,Object.defineProperty(N,"useLocale",{enumerable:!0,get:function(){return ee.default}});var W=re(k(67294)),w=k(13594),X=k(10625),j=H(k(44805)),ee=H(k(76647));function Y(ne){if(typeof WeakMap!="function")return null;var $=new WeakMap,A=new WeakMap;return(Y=function(b){return b?A:$})(ne)}function re(ne,$){if(!$&&ne&&ne.__esModule)return ne;if(ne===null||typeof ne!="object"&&typeof ne!="function")return{default:ne};var A=Y($);if(A&&A.has(ne))return A.get(ne);var b={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in ne)if(le!=="default"&&Object.prototype.hasOwnProperty.call(ne,le)){var Ae=te?Object.getOwnPropertyDescriptor(ne,le):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(b,le,Ae):b[le]=ne[le]}return b.default=ne,A&&A.set(ne,b),b}const Q=N.ANT_MARK="internalMark",ye=ne=>{const{locale:$={},children:A,_ANT_MARK__:b}=ne;W.useEffect(()=>(0,X.changeConfirmLocale)($&&$.Modal),[$]);const te=W.useMemo(()=>Object.assign(Object.assign({},$),{exist:!0}),[$]);return W.createElement(j.default.Provider,{value:te},A)};var se=N.default=ye},76647:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=ee(k(67294)),w=H(k(44805)),X=H(k(18253));function j(Q){if(typeof WeakMap!="function")return null;var ye=new WeakMap,se=new WeakMap;return(j=function(ne){return ne?se:ye})(Q)}function ee(Q,ye){if(!ye&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var se=j(ye);if(se&&se.has(Q))return se.get(Q);var ne={__proto__:null},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in Q)if(A!=="default"&&Object.prototype.hasOwnProperty.call(Q,A)){var b=$?Object.getOwnPropertyDescriptor(Q,A):null;b&&(b.get||b.set)?Object.defineProperty(ne,A,b):ne[A]=Q[A]}return ne.default=Q,se&&se.set(Q,ne),ne}const Y=(Q,ye)=>{const se=W.useContext(w.default),ne=W.useMemo(()=>{var A;const b=ye||X.default[Q],te=(A=se==null?void 0:se[Q])!==null&&A!==void 0?A:{};return Object.assign(Object.assign({},typeof b=="function"?b():b),te||{})},[Q,ye,se]),$=W.useMemo(()=>{const A=se==null?void 0:se.locale;return se!=null&&se.exist&&!A?X.default.locale:A},[se]);return[ne,$]};var re=N.default=Y},10625:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.changeConfirmLocale=ee,N.getConfirmLocale=Y;var W=H(k(18253));let w=Object.assign({},W.default.Modal),X=[];const j=()=>X.reduce((re,Q)=>Object.assign(Object.assign({},re),Q),W.default.Modal);function ee(re){if(re){const Q=Object.assign({},re);return X.push(Q),w=j(),()=>{X=X.filter(ye=>ye!==Q),w=j()}}w=Object.assign({},W.default.Modal)}function Y(){return w}},46549:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.useCompactItemContext=N.default=N.SpaceCompactItemContext=N.NoCompactStyle=void 0;var W=H(k(93967)),w=H(k(45598)),X=Q(k(67294)),j=k(31929),ee=H(k(65693)),Y=H(k(54277));function re(le){if(typeof WeakMap!="function")return null;var Ae=new WeakMap,De=new WeakMap;return(re=function(Ne){return Ne?De:Ae})(le)}function Q(le,Ae){if(!Ae&&le&&le.__esModule)return le;if(le===null||typeof le!="object"&&typeof le!="function")return{default:le};var De=re(Ae);if(De&&De.has(le))return De.get(le);var Ne={__proto__:null},Te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var We in le)if(We!=="default"&&Object.prototype.hasOwnProperty.call(le,We)){var _e=Te?Object.getOwnPropertyDescriptor(le,We):null;_e&&(_e.get||_e.set)?Object.defineProperty(Ne,We,_e):Ne[We]=le[We]}return Ne.default=le,De&&De.set(le,Ne),Ne}var ye=function(le,Ae){var De={};for(var Ne in le)Object.prototype.hasOwnProperty.call(le,Ne)&&Ae.indexOf(Ne)<0&&(De[Ne]=le[Ne]);if(le!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Te=0,Ne=Object.getOwnPropertySymbols(le);Te<Ne.length;Te++)Ae.indexOf(Ne[Te])<0&&Object.prototype.propertyIsEnumerable.call(le,Ne[Te])&&(De[Ne[Te]]=le[Ne[Te]]);return De};const se=N.SpaceCompactItemContext=X.createContext(null),ne=(le,Ae)=>{const De=X.useContext(se),Ne=X.useMemo(()=>{if(!De)return"";const{compactDirection:Te,isFirstItem:We,isLastItem:_e}=De,we=Te==="vertical"?"-vertical-":"-";return(0,W.default)(`${le}-compact${we}item`,{[`${le}-compact${we}first-item`]:We,[`${le}-compact${we}last-item`]:_e,[`${le}-compact${we}item-rtl`]:Ae==="rtl"})},[le,Ae,De]);return{compactSize:De==null?void 0:De.compactSize,compactDirection:De==null?void 0:De.compactDirection,compactItemClassnames:Ne}};N.useCompactItemContext=ne;const $=le=>{let{children:Ae}=le;return X.createElement(se.Provider,{value:null},Ae)};N.NoCompactStyle=$;const A=le=>{var{children:Ae}=le,De=ye(le,["children"]);return X.createElement(se.Provider,{value:De},Ae)},b=le=>{const{getPrefixCls:Ae,direction:De}=X.useContext(j.ConfigContext),{size:Ne,direction:Te,block:We,prefixCls:_e,className:we,rootClassName:Re,children:ze}=le,Ge=ye(le,["size","direction","block","prefixCls","className","rootClassName","children"]),yt=(0,ee.default)(He=>Ne!=null?Ne:He),ke=Ae("space-compact",_e),[tt,ae]=(0,Y.default)(ke),Ke=(0,W.default)(ke,ae,{[`${ke}-rtl`]:De==="rtl",[`${ke}-block`]:We,[`${ke}-vertical`]:Te==="vertical"},we,Re),he=X.useContext(se),Pe=(0,w.default)(ze),lt=X.useMemo(()=>Pe.map((He,Ue)=>{const Qe=He&&He.key||`${ke}-item-${Ue}`;return X.createElement(A,{key:Qe,compactSize:yt,compactDirection:Te,isFirstItem:Ue===0&&(!he||(he==null?void 0:he.isFirstItem)),isLastItem:Ue===Pe.length-1&&(!he||(he==null?void 0:he.isLastItem))},He)}),[Ne,Pe,he]);return Pe.length===0?null:tt(X.createElement("div",Object.assign({className:Ke},Ge),lt))};var te=N.default=b},35969:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=W=>{const{componentCls:w}=W;return{[w]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var H=N.default=k},54277:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var W=k(3184),w=H(k(35969));const X=re=>{const{componentCls:Q}=re;return{[Q]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${Q}-item:empty`]:{display:"none"}}}},j=re=>{const{componentCls:Q}=re;return{[Q]:{"&-gap-row-small":{rowGap:re.spaceGapSmallSize},"&-gap-row-middle":{rowGap:re.spaceGapMiddleSize},"&-gap-row-large":{rowGap:re.spaceGapLargeSize},"&-gap-col-small":{columnGap:re.spaceGapSmallSize},"&-gap-col-middle":{columnGap:re.spaceGapMiddleSize},"&-gap-col-large":{columnGap:re.spaceGapLargeSize}}}},ee=()=>({});N.prepareComponentToken=ee;var Y=N.default=(0,W.genStyleHooks)("Space",re=>{const Q=(0,W.mergeToken)(re,{spaceGapSmallSize:re.paddingXS,spaceGapMiddleSize:re.padding,spaceGapLargeSize:re.paddingLG});return[X(Q),j(Q),(0,w.default)(Q)]},()=>({}),{resetStyle:!1})},78793:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genCompactItemStyle=W;function k(w,X,j){const{focusElCls:ee,focus:Y,borderElCls:re}=j,Q=re?"> *":"",ye=["hover",Y?"focus":null,"active"].filter(Boolean).map(se=>`&:${se} ${Q}`).join(",");return{[`&-item:not(${X}-last-item)`]:{marginInlineEnd:w.calc(w.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[ye]:{zIndex:2}},ee?{[`&${ee}`]:{zIndex:2}}:{}),{[`&[disabled] ${Q}`]:{zIndex:0}})}}function H(w,X,j){const{borderElCls:ee}=j,Y=ee?`> ${ee}`:"";return{[`&-item:not(${X}-first-item):not(${X}-last-item) ${Y}`]:{borderRadius:0},[`&-item:not(${X}-last-item)${X}-first-item`]:{[`& ${Y}, &${w}-sm ${Y}, &${w}-lg ${Y}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${X}-first-item)${X}-last-item`]:{[`& ${Y}, &${w}-sm ${Y}, &${w}-lg ${Y}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function W(w){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:j}=w,ee=`${j}-compact`;return{[ee]:Object.assign(Object.assign({},k(w,ee,X)),H(j,ee,X))}}},98078:function(vt,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.genLinkStyle=N.genFocusStyle=N.genFocusOutline=N.genCommonStyle=N.clearFix=void 0,Object.defineProperty(N,"operationUnit",{enumerable:!0,get:function(){return W.operationUnit}}),N.textEllipsis=N.resetIcon=N.resetComponent=void 0;var H=k(36939),W=k(22548);const w=N.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},X=function(se){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:se.colorText,fontSize:se.fontSize,lineHeight:se.lineHeight,listStyle:"none",fontFamily:ne?"inherit":se.fontFamily}};N.resetComponent=X;const j=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});N.resetIcon=j;const ee=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});N.clearFix=ee;const Y=se=>({a:{color:se.colorLink,textDecoration:se.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${se.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:se.colorLinkHover},"&:active":{color:se.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:se.linkHoverDecoration,outline:0},"&:focus":{textDecoration:se.linkFocusDecoration,outline:0},"&[disabled]":{color:se.colorTextDisabled,cursor:"not-allowed"}}});N.genLinkStyle=Y;const re=(se,ne,$)=>{const{fontFamily:A,fontSize:b}=se,te=`[class^="${ne}"], [class*=" ${ne}"]`;return{[$?`.${$}`:te]:{fontFamily:A,fontSize:b,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[te]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};N.genCommonStyle=re;const Q=se=>({outline:`${(0,H.unit)(se.lineWidthFocus)} solid ${se.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});N.genFocusOutline=Q;const ye=se=>({"&:focus-visible":Object.assign({},Q(se))});N.genFocusStyle=ye},57253:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=W=>({[W.componentCls]:{[`${W.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}},[`${W.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}}});var H=N.default=k},84460:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initFadeMotion=N.fadeOut=N.fadeIn=void 0;var H=k(36939),W=k(94631);const w=N.fadeIn=new H.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),X=N.fadeOut=new H.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),j=function(ee){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:re}=ee,Q=`${re}-fade`,ye=Y?"&":"";return[(0,W.initMotion)(Q,w,X,ee.motionDurationMid,Y),{[`
        ${ye}${Q}-enter,
        ${ye}${Q}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${ye}${Q}-leave`]:{animationTimingFunction:"linear"}}]};N.initFadeMotion=j},42836:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"fadeIn",{enumerable:!0,get:function(){return W.fadeIn}}),Object.defineProperty(N,"fadeOut",{enumerable:!0,get:function(){return W.fadeOut}}),Object.defineProperty(N,"genCollapseMotion",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(N,"initFadeMotion",{enumerable:!0,get:function(){return W.initFadeMotion}}),Object.defineProperty(N,"initMoveMotion",{enumerable:!0,get:function(){return w.initMoveMotion}}),Object.defineProperty(N,"initSlideMotion",{enumerable:!0,get:function(){return X.initSlideMotion}}),Object.defineProperty(N,"initZoomMotion",{enumerable:!0,get:function(){return j.initZoomMotion}}),Object.defineProperty(N,"moveDownIn",{enumerable:!0,get:function(){return w.moveDownIn}}),Object.defineProperty(N,"moveDownOut",{enumerable:!0,get:function(){return w.moveDownOut}}),Object.defineProperty(N,"moveLeftIn",{enumerable:!0,get:function(){return w.moveLeftIn}}),Object.defineProperty(N,"moveLeftOut",{enumerable:!0,get:function(){return w.moveLeftOut}}),Object.defineProperty(N,"moveRightIn",{enumerable:!0,get:function(){return w.moveRightIn}}),Object.defineProperty(N,"moveRightOut",{enumerable:!0,get:function(){return w.moveRightOut}}),Object.defineProperty(N,"moveUpIn",{enumerable:!0,get:function(){return w.moveUpIn}}),Object.defineProperty(N,"moveUpOut",{enumerable:!0,get:function(){return w.moveUpOut}}),Object.defineProperty(N,"slideDownIn",{enumerable:!0,get:function(){return X.slideDownIn}}),Object.defineProperty(N,"slideDownOut",{enumerable:!0,get:function(){return X.slideDownOut}}),Object.defineProperty(N,"slideLeftIn",{enumerable:!0,get:function(){return X.slideLeftIn}}),Object.defineProperty(N,"slideLeftOut",{enumerable:!0,get:function(){return X.slideLeftOut}}),Object.defineProperty(N,"slideRightIn",{enumerable:!0,get:function(){return X.slideRightIn}}),Object.defineProperty(N,"slideRightOut",{enumerable:!0,get:function(){return X.slideRightOut}}),Object.defineProperty(N,"slideUpIn",{enumerable:!0,get:function(){return X.slideUpIn}}),Object.defineProperty(N,"slideUpOut",{enumerable:!0,get:function(){return X.slideUpOut}}),Object.defineProperty(N,"zoomBigIn",{enumerable:!0,get:function(){return j.zoomBigIn}}),Object.defineProperty(N,"zoomBigOut",{enumerable:!0,get:function(){return j.zoomBigOut}}),Object.defineProperty(N,"zoomDownIn",{enumerable:!0,get:function(){return j.zoomDownIn}}),Object.defineProperty(N,"zoomDownOut",{enumerable:!0,get:function(){return j.zoomDownOut}}),Object.defineProperty(N,"zoomIn",{enumerable:!0,get:function(){return j.zoomIn}}),Object.defineProperty(N,"zoomLeftIn",{enumerable:!0,get:function(){return j.zoomLeftIn}}),Object.defineProperty(N,"zoomLeftOut",{enumerable:!0,get:function(){return j.zoomLeftOut}}),Object.defineProperty(N,"zoomOut",{enumerable:!0,get:function(){return j.zoomOut}}),Object.defineProperty(N,"zoomRightIn",{enumerable:!0,get:function(){return j.zoomRightIn}}),Object.defineProperty(N,"zoomRightOut",{enumerable:!0,get:function(){return j.zoomRightOut}}),Object.defineProperty(N,"zoomUpIn",{enumerable:!0,get:function(){return j.zoomUpIn}}),Object.defineProperty(N,"zoomUpOut",{enumerable:!0,get:function(){return j.zoomUpOut}});var W=k(84460),w=k(17060),X=k(17581),j=k(99269),ee=H(k(57253))},94631:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initMotion=void 0;const k=w=>({animationDuration:w,animationFillMode:"both"}),H=w=>({animationDuration:w,animationFillMode:"both"}),W=function(w,X,j,ee){const re=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${re}${w}-enter,
      ${re}${w}-appear
    `]:Object.assign(Object.assign({},k(ee)),{animationPlayState:"paused"}),[`${re}${w}-leave`]:Object.assign(Object.assign({},H(ee)),{animationPlayState:"paused"}),[`
      ${re}${w}-enter${w}-enter-active,
      ${re}${w}-appear${w}-appear-active
    `]:{animationName:X,animationPlayState:"running"},[`${re}${w}-leave${w}-leave-active`]:{animationName:j,animationPlayState:"running",pointerEvents:"none"}}};N.initMotion=W},17060:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.moveUpOut=N.moveUpIn=N.moveRightOut=N.moveRightIn=N.moveLeftOut=N.moveLeftIn=N.moveDownOut=N.moveDownIn=N.initMoveMotion=void 0;var H=k(36939),W=k(94631);const w=N.moveDownIn=new H.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),X=N.moveDownOut=new H.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),j=N.moveLeftIn=new H.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ee=N.moveLeftOut=new H.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Y=N.moveRightIn=new H.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),re=N.moveRightOut=new H.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Q=N.moveUpIn=new H.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ye=N.moveUpOut=new H.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),se={"move-up":{inKeyframes:Q,outKeyframes:ye},"move-down":{inKeyframes:w,outKeyframes:X},"move-left":{inKeyframes:j,outKeyframes:ee},"move-right":{inKeyframes:Y,outKeyframes:re}},ne=($,A)=>{const{antCls:b}=$,te=`${b}-${A}`,{inKeyframes:le,outKeyframes:Ae}=se[A];return[(0,W.initMotion)(te,le,Ae,$.motionDurationMid),{[`
        ${te}-enter,
        ${te}-appear
      `]:{opacity:0,animationTimingFunction:$.motionEaseOutCirc},[`${te}-leave`]:{animationTimingFunction:$.motionEaseInOutCirc}}]};N.initMoveMotion=ne},17581:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.slideUpOut=N.slideUpIn=N.slideRightOut=N.slideRightIn=N.slideLeftOut=N.slideLeftIn=N.slideDownOut=N.slideDownIn=N.initSlideMotion=void 0;var H=k(36939),W=k(94631);const w=N.slideUpIn=new H.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),X=N.slideUpOut=new H.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),j=N.slideDownIn=new H.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),ee=N.slideDownOut=new H.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Y=N.slideLeftIn=new H.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),re=N.slideLeftOut=new H.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Q=N.slideRightIn=new H.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),ye=N.slideRightOut=new H.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),se={"slide-up":{inKeyframes:w,outKeyframes:X},"slide-down":{inKeyframes:j,outKeyframes:ee},"slide-left":{inKeyframes:Y,outKeyframes:re},"slide-right":{inKeyframes:Q,outKeyframes:ye}},ne=($,A)=>{const{antCls:b}=$,te=`${b}-${A}`,{inKeyframes:le,outKeyframes:Ae}=se[A];return[(0,W.initMotion)(te,le,Ae,$.motionDurationMid),{[`
      ${te}-enter,
      ${te}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:$.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${te}-leave`]:{animationTimingFunction:$.motionEaseInQuint}}]};N.initSlideMotion=ne},99269:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.zoomUpOut=N.zoomUpIn=N.zoomRightOut=N.zoomRightIn=N.zoomOut=N.zoomLeftOut=N.zoomLeftIn=N.zoomIn=N.zoomDownOut=N.zoomDownIn=N.zoomBigOut=N.zoomBigIn=N.initZoomMotion=void 0;var H=k(36939),W=k(94631);const w=N.zoomIn=new H.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),X=N.zoomOut=new H.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),j=N.zoomBigIn=new H.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ee=N.zoomBigOut=new H.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Y=N.zoomUpIn=new H.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),re=N.zoomUpOut=new H.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Q=N.zoomLeftIn=new H.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),ye=N.zoomLeftOut=new H.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),se=N.zoomRightIn=new H.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ne=N.zoomRightOut=new H.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),$=N.zoomDownIn=new H.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),A=N.zoomDownOut=new H.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),b={zoom:{inKeyframes:w,outKeyframes:X},"zoom-big":{inKeyframes:j,outKeyframes:ee},"zoom-big-fast":{inKeyframes:j,outKeyframes:ee},"zoom-left":{inKeyframes:Q,outKeyframes:ye},"zoom-right":{inKeyframes:se,outKeyframes:ne},"zoom-up":{inKeyframes:Y,outKeyframes:re},"zoom-down":{inKeyframes:$,outKeyframes:A}},te=(le,Ae)=>{const{antCls:De}=le,Ne=`${De}-${Ae}`,{inKeyframes:Te,outKeyframes:We}=b[Ae];return[(0,W.initMotion)(Ne,Te,We,Ae==="zoom-big-fast"?le.motionDurationFast:le.motionDurationMid),{[`
        ${Ne}-enter,
        ${Ne}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:le.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Ne}-leave`]:{animationTimingFunction:le.motionEaseInOutCirc}}]};N.initZoomMotion=te},22548:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.operationUnit=void 0;const k=H=>({color:H.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${H.motionDurationSlow}`,"&:focus, &:hover":{color:H.colorLinkHover},"&:active":{color:H.colorLinkActive}});N.operationUnit=k},9064:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_VERTICAL_CONTENT_RADIUS=void 0,N.default=j,N.getArrowOffsetToken=w;var H=k(51337);const W=N.MAX_VERTICAL_CONTENT_RADIUS=8;function w(ee){const{contentRadius:Y,limitVerticalRadius:re}=ee,Q=Y>12?Y+2:12;return{arrowOffsetHorizontal:Q,arrowOffsetVertical:re?W:Q}}function X(ee,Y){return ee?Y:{}}function j(ee,Y,re){const{componentCls:Q,boxShadowPopoverArrow:ye,arrowOffsetVertical:se,arrowOffsetHorizontal:ne}=ee,{arrowDistance:$=0,arrowPlacement:A={left:!0,right:!0,top:!0,bottom:!0}}=re||{};return{[Q]:Object.assign(Object.assign(Object.assign(Object.assign({[`${Q}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,H.genRoundedArrow)(ee,Y,ye)),{"&:before":{background:Y}})]},X(!!A.top,{[[`&-placement-top > ${Q}-arrow`,`&-placement-topLeft > ${Q}-arrow`,`&-placement-topRight > ${Q}-arrow`].join(",")]:{bottom:$,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${Q}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${Q}-arrow`]:{left:{_skip_check_:!0,value:ne}},[`&-placement-topRight > ${Q}-arrow`]:{right:{_skip_check_:!0,value:ne}}})),X(!!A.bottom,{[[`&-placement-bottom > ${Q}-arrow`,`&-placement-bottomLeft > ${Q}-arrow`,`&-placement-bottomRight > ${Q}-arrow`].join(",")]:{top:$,transform:"translateY(-100%)"},[`&-placement-bottom > ${Q}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${Q}-arrow`]:{left:{_skip_check_:!0,value:ne}},[`&-placement-bottomRight > ${Q}-arrow`]:{right:{_skip_check_:!0,value:ne}}})),X(!!A.left,{[[`&-placement-left > ${Q}-arrow`,`&-placement-leftTop > ${Q}-arrow`,`&-placement-leftBottom > ${Q}-arrow`].join(",")]:{right:{_skip_check_:!0,value:$},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${Q}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${Q}-arrow`]:{top:se},[`&-placement-leftBottom > ${Q}-arrow`]:{bottom:se}})),X(!!A.right,{[[`&-placement-right > ${Q}-arrow`,`&-placement-rightTop > ${Q}-arrow`,`&-placement-rightBottom > ${Q}-arrow`].join(",")]:{left:{_skip_check_:!0,value:$},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${Q}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${Q}-arrow`]:{top:se},[`&-placement-rightBottom > ${Q}-arrow`]:{bottom:se}}))}}},51337:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genRoundedArrow=void 0,N.getArrowToken=W;var H=k(36939);function W(X){const{sizePopupArrow:j,borderRadiusXS:ee,borderRadiusOuter:Y}=X,re=j/2,Q=0,ye=re,se=Y*1/Math.sqrt(2),ne=re-Y*(1-1/Math.sqrt(2)),$=re-ee*(1/Math.sqrt(2)),A=Y*(Math.sqrt(2)-1)+ee*(1/Math.sqrt(2)),b=2*re-$,te=A,le=2*re-se,Ae=ne,De=2*re-Q,Ne=ye,Te=re*Math.sqrt(2)+Y*(Math.sqrt(2)-2),We=Y*(Math.sqrt(2)-1),_e=`polygon(${We}px 100%, 50% ${We}px, ${2*re-We}px 100%, ${We}px 100%)`,we=`path('M ${Q} ${ye} A ${Y} ${Y} 0 0 0 ${se} ${ne} L ${$} ${A} A ${ee} ${ee} 0 0 1 ${b} ${te} L ${le} ${Ae} A ${Y} ${Y} 0 0 0 ${De} ${Ne} Z')`;return{arrowShadowWidth:Te,arrowPath:we,arrowPolygon:_e}}const w=(X,j,ee)=>{const{sizePopupArrow:Y,arrowPolygon:re,arrowPath:Q,arrowShadowWidth:ye,borderRadiusXS:se,calc:ne}=X;return{pointerEvents:"none",width:Y,height:Y,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:Y,height:ne(Y).div(2).equal(),background:j,clipPath:{_multi_value_:!0,value:[re,Q]},content:'""'},"&::after":{content:'""',position:"absolute",width:ye,height:ye,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,H.unit)(se)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:ee,zIndex:0,background:"transparent"}}};N.genRoundedArrow=w},89329:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.defaultTheme=N.defaultConfig=N.DesignTokenContext=void 0;var W=H(k(67294)),w=k(36939),X=H(k(9924)),j=H(k(98411));const ee=N.defaultTheme=(0,w.createTheme)(X.default),Y=N.defaultConfig={token:j.default,override:{override:j.default},hashed:!0},re=N.DesignTokenContext=W.default.createContext(Y)},36496:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return H.PresetColors}});var H=k(81342)},81342:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PresetColors=void 0;const k=N.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"DesignTokenContext",{enumerable:!0,get:function(){return se.DesignTokenContext}}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return w.PresetColors}}),Object.defineProperty(N,"calc",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(N,"defaultConfig",{enumerable:!0,get:function(){return se.defaultConfig}}),Object.defineProperty(N,"genComponentStyleHook",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(N,"genPresetColor",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(N,"genStyleHooks",{enumerable:!0,get:function(){return j.genStyleHooks}}),Object.defineProperty(N,"genSubStyleComponent",{enumerable:!0,get:function(){return j.genSubStyleComponent}}),Object.defineProperty(N,"getLineHeight",{enumerable:!0,get:function(){return ye.getLineHeight}}),Object.defineProperty(N,"mergeToken",{enumerable:!0,get:function(){return Y.merge}}),Object.defineProperty(N,"statisticToken",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(N,"useResetIconStyle",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(N,"useStyleRegister",{enumerable:!0,get:function(){return W.useStyleRegister}}),Object.defineProperty(N,"useToken",{enumerable:!0,get:function(){return X.default}});var W=k(36939),w=k(36496),X=H(k(41401)),j=$(k(3737)),ee=H(k(36219)),Y=$(k(99636)),re=H(k(54894)),Q=H(k(22996)),ye=k(62231),se=k(89329);function ne(A){if(typeof WeakMap!="function")return null;var b=new WeakMap,te=new WeakMap;return(ne=function(le){return le?te:b})(A)}function $(A,b){if(!b&&A&&A.__esModule)return A;if(A===null||typeof A!="object"&&typeof A!="function")return{default:A};var te=ne(b);if(te&&te.has(A))return te.get(A);var le={__proto__:null},Ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var De in A)if(De!=="default"&&Object.prototype.hasOwnProperty.call(A,De)){var Ne=Ae?Object.getOwnPropertyDescriptor(A,De):null;Ne&&(Ne.get||Ne.set)?Object.defineProperty(le,De,Ne):le[De]=A[De]}return le.default=A,te&&te.set(A,le),le}},26162:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getSolidColor=N.getAlphaColor=void 0;var H=k(131);const W=(X,j)=>new H.TinyColor(X).setAlpha(j).toRgbString();N.getAlphaColor=W;const w=(X,j)=>new H.TinyColor(X).darken(j).toHexString();N.getSolidColor=w},80373:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.generateNeutralColorPalettes=N.generateColorPalettes=void 0;var H=k(78589),W=k(26162);const w=j=>{const ee=(0,H.generate)(j);return{1:ee[0],2:ee[1],3:ee[2],4:ee[3],5:ee[4],6:ee[5],7:ee[6],8:ee[4],9:ee[5],10:ee[6]}};N.generateColorPalettes=w;const X=(j,ee)=>{const Y=j||"#fff",re=ee||"#000";return{colorBgBase:Y,colorTextBase:re,colorText:(0,W.getAlphaColor)(re,.88),colorTextSecondary:(0,W.getAlphaColor)(re,.65),colorTextTertiary:(0,W.getAlphaColor)(re,.45),colorTextQuaternary:(0,W.getAlphaColor)(re,.25),colorFill:(0,W.getAlphaColor)(re,.15),colorFillSecondary:(0,W.getAlphaColor)(re,.06),colorFillTertiary:(0,W.getAlphaColor)(re,.04),colorFillQuaternary:(0,W.getAlphaColor)(re,.02),colorBgLayout:(0,W.getSolidColor)(Y,4),colorBgContainer:(0,W.getSolidColor)(Y,0),colorBgElevated:(0,W.getSolidColor)(Y,0),colorBgSpotlight:(0,W.getAlphaColor)(re,.85),colorBgBlur:"transparent",colorBorder:(0,W.getSolidColor)(Y,15),colorBorderSecondary:(0,W.getSolidColor)(Y,6)}};N.generateNeutralColorPalettes=X},9924:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=ye;var W=k(78589),w=H(k(54730)),X=H(k(19216)),j=k(98411),ee=H(k(10805)),Y=H(k(81594)),re=k(80373),Q=H(k(69853));function ye(se){const ne=Object.keys(j.defaultPresetColors).map($=>{const A=(0,W.generate)(se[$]);return new Array(10).fill(1).reduce((b,te,le)=>(b[`${$}-${le+1}`]=A[le],b[`${$}${le+1}`]=A[le],b),{})}).reduce(($,A)=>($=Object.assign(Object.assign({},$),A),$),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},se),ne),(0,ee.default)(se,{generateColorPalettes:re.generateColorPalettes,generateNeutralColorPalettes:re.generateNeutralColorPalettes})),(0,Q.default)(se.fontSize)),(0,X.default)(se)),(0,w.default)(se)),(0,Y.default)(se))}},98411:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.defaultPresetColors=N.default=void 0;const k=N.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},H=Object.assign(Object.assign({},k),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var W=N.default=H},10805:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=W;var H=k(131);function W(w,X){let{generateColorPalettes:j,generateNeutralColorPalettes:ee}=X;const{colorSuccess:Y,colorWarning:re,colorError:Q,colorInfo:ye,colorPrimary:se,colorBgBase:ne,colorTextBase:$}=w,A=j(se),b=j(Y),te=j(re),le=j(Q),Ae=j(ye),De=ee(ne,$),Ne=w.colorLink||w.colorInfo,Te=j(Ne);return Object.assign(Object.assign({},De),{colorPrimaryBg:A[1],colorPrimaryBgHover:A[2],colorPrimaryBorder:A[3],colorPrimaryBorderHover:A[4],colorPrimaryHover:A[5],colorPrimary:A[6],colorPrimaryActive:A[7],colorPrimaryTextHover:A[8],colorPrimaryText:A[9],colorPrimaryTextActive:A[10],colorSuccessBg:b[1],colorSuccessBgHover:b[2],colorSuccessBorder:b[3],colorSuccessBorderHover:b[4],colorSuccessHover:b[4],colorSuccess:b[6],colorSuccessActive:b[7],colorSuccessTextHover:b[8],colorSuccessText:b[9],colorSuccessTextActive:b[10],colorErrorBg:le[1],colorErrorBgHover:le[2],colorErrorBorder:le[3],colorErrorBorderHover:le[4],colorErrorHover:le[5],colorError:le[6],colorErrorActive:le[7],colorErrorTextHover:le[8],colorErrorText:le[9],colorErrorTextActive:le[10],colorWarningBg:te[1],colorWarningBgHover:te[2],colorWarningBorder:te[3],colorWarningBorderHover:te[4],colorWarningHover:te[4],colorWarning:te[6],colorWarningActive:te[7],colorWarningTextHover:te[8],colorWarningText:te[9],colorWarningTextActive:te[10],colorInfoBg:Ae[1],colorInfoBgHover:Ae[2],colorInfoBorder:Ae[3],colorInfoBorderHover:Ae[4],colorInfoHover:Ae[4],colorInfo:Ae[6],colorInfoActive:Ae[7],colorInfoTextHover:Ae[8],colorInfoText:Ae[9],colorInfoTextActive:Ae[10],colorLinkHover:Te[4],colorLink:Te[6],colorLinkActive:Te[7],colorBgMask:new H.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var W=H(k(78117));function w(X){const{motionUnit:j,motionBase:ee,borderRadius:Y,lineWidth:re}=X;return Object.assign({motionDurationFast:`${(ee+j).toFixed(1)}s`,motionDurationMid:`${(ee+j*2).toFixed(1)}s`,motionDurationSlow:`${(ee+j*3).toFixed(1)}s`,lineWidthBold:re+1},(0,W.default)(Y))}},54730:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=W=>{const{controlHeight:w}=W;return{controlHeightSM:w*.75,controlHeightXS:w*.5,controlHeightLG:w*1.25}};var H=N.default=k},69853:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(62231));const w=j=>{const ee=(0,W.default)(j),Y=ee.map(b=>b.size),re=ee.map(b=>b.lineHeight),Q=Y[1],ye=Y[0],se=Y[2],ne=re[1],$=re[0],A=re[2];return{fontSizeSM:ye,fontSize:Q,fontSizeLG:se,fontSizeXL:Y[3],fontSizeHeading1:Y[6],fontSizeHeading2:Y[5],fontSizeHeading3:Y[4],fontSizeHeading4:Y[3],fontSizeHeading5:Y[2],lineHeight:ne,lineHeightLG:A,lineHeightSM:$,fontHeight:Math.round(ne*Q),fontHeightLG:Math.round(A*se),fontHeightSM:Math.round($*ye),lineHeightHeading1:re[6],lineHeightHeading2:re[5],lineHeightHeading3:re[4],lineHeightHeading4:re[3],lineHeightHeading5:re[2]}};var X=N.default=w},62231:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=H,N.getLineHeight=k;function k(W){return(W+8)/W}function H(W){const w=new Array(10).fill(null).map((X,j)=>{const ee=j-1,Y=W*Math.pow(2.71828,ee/5),re=j>1?Math.floor(Y):Math.ceil(Y);return Math.floor(re/2)*2});return w[1]=W,w.map(X=>({size:X,lineHeight:k(X)}))}},78117:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=W=>{let w=W,X=W,j=W,ee=W;return W<6&&W>=5?w=W+1:W<16&&W>=6?w=W+2:W>=16&&(w=16),W<7&&W>=5?X=4:W<8&&W>=7?X=5:W<14&&W>=8?X=6:W<16&&W>=14?X=7:W>=16&&(X=8),W<6&&W>=2?j=1:W>=6&&(j=2),W>4&&W<8?ee=4:W>=8&&(ee=6),{borderRadius:W,borderRadiusXS:j,borderRadiusSM:X,borderRadiusLG:w,borderRadiusOuter:ee}};var H=N.default=k},19216:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k(H){const{sizeUnit:W,sizeStep:w}=H;return{sizeXXL:W*(w+8),sizeXL:W*(w+4),sizeLG:W*(w+2),sizeMD:W*(w+1),sizeMS:W*w,size:W*w,sizeSM:W*(w-1),sizeXS:W*(w-2),sizeXXS:W*(w-3)}}},41401:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=$,N.unitless=N.ignore=N.getComputedToken=void 0;var W=H(k(67294)),w=k(36939),X=H(k(87629)),j=k(89329),ee=H(k(98411)),Y=H(k(27722)),re=function(A,b){var te={};for(var le in A)Object.prototype.hasOwnProperty.call(A,le)&&b.indexOf(le)<0&&(te[le]=A[le]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ae=0,le=Object.getOwnPropertySymbols(A);Ae<le.length;Ae++)b.indexOf(le[Ae])<0&&Object.prototype.propertyIsEnumerable.call(A,le[Ae])&&(te[le[Ae]]=A[le[Ae]]);return te};const Q=N.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},ye=N.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},se={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},ne=(A,b,te)=>{const le=te.getDerivativeToken(A),{override:Ae}=b,De=re(b,["override"]);let Ne=Object.assign(Object.assign({},le),{override:Ae});return Ne=(0,Y.default)(Ne),De&&Object.entries(De).forEach(Te=>{let[We,_e]=Te;const{theme:we}=_e,Re=re(_e,["theme"]);let ze=Re;we&&(ze=ne(Object.assign(Object.assign({},Ne),Re),{override:Re},we)),Ne[We]=ze}),Ne};N.getComputedToken=ne;function $(){const{token:A,hashed:b,theme:te,override:le,cssVar:Ae}=W.default.useContext(j.DesignTokenContext),De=`${X.default}-${b||""}`,Ne=te||j.defaultTheme,[Te,We,_e]=(0,w.useCacheToken)(Ne,[ee.default,A],{salt:De,override:le,getComputedToken:ne,formatToken:Y.default,cssVar:Ae&&{prefix:Ae.prefix,key:Ae.key,unitless:Q,ignore:ye,preserve:se}});return[Ne,_e,b?We:"",Te,Ae]}},27722:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=ee;var W=k(131),w=H(k(98411)),X=H(k(83609)),j=function(Y,re){var Q={};for(var ye in Y)Object.prototype.hasOwnProperty.call(Y,ye)&&re.indexOf(ye)<0&&(Q[ye]=Y[ye]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var se=0,ye=Object.getOwnPropertySymbols(Y);se<ye.length;se++)re.indexOf(ye[se])<0&&Object.prototype.propertyIsEnumerable.call(Y,ye[se])&&(Q[ye[se]]=Y[ye[se]]);return Q};function ee(Y){const{override:re}=Y,Q=j(Y,["override"]),ye=Object.assign({},re);Object.keys(w.default).forEach(De=>{delete ye[De]});const se=Object.assign(Object.assign({},Q),ye),ne=480,$=576,A=768,b=992,te=1200,le=1600;if(se.motion===!1){const De="0s";se.motionDurationFast=De,se.motionDurationMid=De,se.motionDurationSlow=De}return Object.assign(Object.assign(Object.assign({},se),{colorFillContent:se.colorFillSecondary,colorFillContentHover:se.colorFill,colorFillAlter:se.colorFillQuaternary,colorBgContainerDisabled:se.colorFillTertiary,colorBorderBg:se.colorBgContainer,colorSplit:(0,X.default)(se.colorBorderSecondary,se.colorBgContainer),colorTextPlaceholder:se.colorTextQuaternary,colorTextDisabled:se.colorTextQuaternary,colorTextHeading:se.colorText,colorTextLabel:se.colorTextSecondary,colorTextDescription:se.colorTextTertiary,colorTextLightSolid:se.colorWhite,colorHighlight:se.colorError,colorBgTextHover:se.colorFillSecondary,colorBgTextActive:se.colorFill,colorIcon:se.colorTextTertiary,colorIconHover:se.colorText,colorErrorOutline:(0,X.default)(se.colorErrorBg,se.colorBgContainer),colorWarningOutline:(0,X.default)(se.colorWarningBg,se.colorBgContainer),fontSizeIcon:se.fontSizeSM,lineWidthFocus:se.lineWidth*4,lineWidth:se.lineWidth,controlOutlineWidth:se.lineWidth*2,controlInteractiveSize:se.controlHeight/2,controlItemBgHover:se.colorFillTertiary,controlItemBgActive:se.colorPrimaryBg,controlItemBgActiveHover:se.colorPrimaryBgHover,controlItemBgActiveDisabled:se.colorFill,controlTmpOutline:se.colorFillQuaternary,controlOutline:(0,X.default)(se.colorPrimaryBg,se.colorBgContainer),lineType:se.lineType,borderRadius:se.borderRadius,borderRadiusXS:se.borderRadiusXS,borderRadiusSM:se.borderRadiusSM,borderRadiusLG:se.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:se.sizeXXS,paddingXS:se.sizeXS,paddingSM:se.sizeSM,padding:se.size,paddingMD:se.sizeMD,paddingLG:se.sizeLG,paddingXL:se.sizeXL,paddingContentHorizontalLG:se.sizeLG,paddingContentVerticalLG:se.sizeMS,paddingContentHorizontal:se.sizeMS,paddingContentVertical:se.sizeSM,paddingContentHorizontalSM:se.size,paddingContentVerticalSM:se.sizeXS,marginXXS:se.sizeXXS,marginXS:se.sizeXS,marginSM:se.sizeSM,margin:se.size,marginMD:se.sizeMD,marginLG:se.sizeLG,marginXL:se.sizeXL,marginXXL:se.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:ne,screenXSMin:ne,screenXSMax:$-1,screenSM:$,screenSMMin:$,screenSMMax:A-1,screenMD:A,screenMDMin:A,screenMDMax:b-1,screenLG:b,screenLGMin:b,screenLGMax:te-1,screenXL:te,screenXLMin:te,screenXLMax:le-1,screenXXL:le,screenXXLMin:le,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new W.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new W.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new W.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),ye)}},24312:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(56690)),w=H(k(89728)),X=H(k(94993)),j=H(k(69617)),ee=H(k(73808)),Y=H(k(61655)),re=H(k(38194));function Q($,A,b){return A=(0,ee.default)(A),(0,X.default)($,(0,j.default)()?Reflect.construct(A,b||[],(0,ee.default)($).constructor):A.apply($,b))}const ye="CALC_UNIT";function se($){return typeof $=="number"?`${$}${ye}`:$}let ne=N.default=function($){(0,Y.default)(A,$);function A(b){var te;return(0,W.default)(this,A),te=Q(this,A),te.result="",b instanceof A?te.result=`(${b.result})`:typeof b=="number"?te.result=se(b):typeof b=="string"&&(te.result=b),te}return(0,w.default)(A,[{key:"add",value:function(te){return te instanceof A?this.result=`${this.result} + ${te.getResult()}`:(typeof te=="number"||typeof te=="string")&&(this.result=`${this.result} + ${se(te)}`),this.lowPriority=!0,this}},{key:"sub",value:function(te){return te instanceof A?this.result=`${this.result} - ${te.getResult()}`:(typeof te=="number"||typeof te=="string")&&(this.result=`${this.result} - ${se(te)}`),this.lowPriority=!0,this}},{key:"mul",value:function(te){return this.lowPriority&&(this.result=`(${this.result})`),te instanceof A?this.result=`${this.result} * ${te.getResult(!0)}`:(typeof te=="number"||typeof te=="string")&&(this.result=`${this.result} * ${te}`),this.lowPriority=!1,this}},{key:"div",value:function(te){return this.lowPriority&&(this.result=`(${this.result})`),te instanceof A?this.result=`${this.result} / ${te.getResult(!0)}`:(typeof te=="number"||typeof te=="string")&&(this.result=`${this.result} / ${te}`),this.lowPriority=!1,this}},{key:"getResult",value:function(te){return this.lowPriority||te?`(${this.result})`:this.result}},{key:"equal",value:function(te){const{unit:le=!0}=te||{},Ae=new RegExp(`${ye}`,"g");return this.result=this.result.replace(Ae,le?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}]),A}(re.default)},14774:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(56690)),w=H(k(89728)),X=H(k(94993)),j=H(k(69617)),ee=H(k(73808)),Y=H(k(61655)),re=H(k(38194));function Q(se,ne,$){return ne=(0,ee.default)(ne),(0,X.default)(se,(0,j.default)()?Reflect.construct(ne,$||[],(0,ee.default)(se).constructor):ne.apply(se,$))}let ye=N.default=function(se){(0,Y.default)(ne,se);function ne($){var A;return(0,W.default)(this,ne),A=Q(this,ne),A.result=0,$ instanceof ne?A.result=$.result:typeof $=="number"&&(A.result=$),A}return(0,w.default)(ne,[{key:"add",value:function(A){return A instanceof ne?this.result+=A.result:typeof A=="number"&&(this.result+=A),this}},{key:"sub",value:function(A){return A instanceof ne?this.result-=A.result:typeof A=="number"&&(this.result-=A),this}},{key:"mul",value:function(A){return A instanceof ne?this.result*=A.result:typeof A=="number"&&(this.result*=A),this}},{key:"div",value:function(A){return A instanceof ne?this.result/=A.result:typeof A=="number"&&(this.result/=A),this}},{key:"equal",value:function(){return this.result}}]),ne}(re.default)},38194:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(89728)),w=H(k(56690));let X=(0,W.default)(function ee(){(0,w.default)(this,ee)});var j=N.default=X},22996:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(14774)),w=H(k(24312));const X=ee=>{const Y=ee==="css"?w.default:W.default;return re=>new Y(re)};var j=N.default=X},3737:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=le,N.genSubStyleComponent=N.genStyleHooks=void 0;var W=$(k(67294)),w=k(36939),X=k(56790),j=k(7177),ee=k(98078),Y=$(k(41401)),re=H(k(22996)),Q=H(k(1657)),ye=$(k(99636)),se=H(k(54894));function ne(Te){if(typeof WeakMap!="function")return null;var We=new WeakMap,_e=new WeakMap;return(ne=function(we){return we?_e:We})(Te)}function $(Te,We){if(!We&&Te&&Te.__esModule)return Te;if(Te===null||typeof Te!="object"&&typeof Te!="function")return{default:Te};var _e=ne(We);if(_e&&_e.has(Te))return _e.get(Te);var we={__proto__:null},Re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in Te)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(Te,ze)){var Ge=Re?Object.getOwnPropertyDescriptor(Te,ze):null;Ge&&(Ge.get||Ge.set)?Object.defineProperty(we,ze,Ge):we[ze]=Te[ze]}return we.default=Te,_e&&_e.set(Te,we),we}const A=(Te,We,_e)=>{var we;return typeof _e=="function"?_e((0,ye.merge)(We,(we=We[Te])!==null&&we!==void 0?we:{})):_e!=null?_e:{}},b=(Te,We,_e,we)=>{const Re=Object.assign({},We[Te]);if(we!=null&&we.deprecatedTokens){const{deprecatedTokens:Ge}=we;Ge.forEach(yt=>{let[ke,tt]=yt;var ae;(Re!=null&&Re[ke]||Re!=null&&Re[tt])&&((ae=Re[tt])!==null&&ae!==void 0||(Re[tt]=Re==null?void 0:Re[ke]))})}const ze=Object.assign(Object.assign({},_e),Re);return Object.keys(ze).forEach(Ge=>{ze[Ge]===We[Ge]&&delete ze[Ge]}),ze},te=(Te,We)=>`${[We,Te.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function le(Te,We,_e){let we=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Re=Array.isArray(Te)?Te:[Te,Te],[ze]=Re,Ge=Re.join("-");return function(yt){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yt;const[tt,ae,Ke,he,Pe]=(0,Y.default)(),{getPrefixCls:lt,iconPrefixCls:He,csp:Ue}=(0,W.useContext)(j.ConfigContext),Qe=lt(),Se=Pe?"css":"js",xe=(0,re.default)(Se),{max:rt,min:Je}=(0,Q.default)(Se),dt={theme:tt,token:he,hashId:Ke,nonce:()=>Ue==null?void 0:Ue.nonce,clientOnly:we.clientOnly,order:we.order||-999};return(0,w.useStyleRegister)(Object.assign(Object.assign({},dt),{clientOnly:!1,path:["Shared",Qe]}),()=>[{"&":(0,ee.genLinkStyle)(he)}]),(0,se.default)(He,Ue),[(0,w.useStyleRegister)(Object.assign(Object.assign({},dt),{path:[Ge,yt,He]}),()=>{if(we.injectStyle===!1)return[];const{token:Ye,flush:Xe}=(0,ye.default)(he),Le=A(ze,ae,_e),je=`.${yt}`,at=b(ze,ae,Le,{deprecatedTokens:we.deprecatedTokens});Pe&&Object.keys(Le).forEach(_t=>{Le[_t]=`var(${(0,w.token2CSSVar)(_t,te(ze,Pe.prefix))})`});const Me=(0,ye.merge)(Ye,{componentCls:je,prefixCls:yt,iconCls:`.${He}`,antCls:`.${Qe}`,calc:xe,max:rt,min:Je},Pe?Le:at),Ze=We(Me,{hashId:Ke,prefixCls:yt,rootPrefixCls:Qe,iconPrefixCls:He});return Xe(ze,at),[we.resetStyle===!1?null:(0,ee.genCommonStyle)(Me,yt,ke),Ze]}),Ke]}}const Ae=(Te,We,_e,we)=>{const Re=le(Te,We,_e,Object.assign({resetStyle:!1,order:-998},we));return Ge=>{let{prefixCls:yt,rootCls:ke=yt}=Ge;return Re(yt,ke),null}};N.genSubStyleComponent=Ae;const De=(Te,We,_e)=>{function we(tt){return`${Te}${tt.slice(0,1).toUpperCase()}${tt.slice(1)}`}const{unitless:Re={},injectStyle:ze=!0}=_e!=null?_e:{},Ge={[we("zIndexPopup")]:!0};Object.keys(Re).forEach(tt=>{Ge[we(tt)]=Re[tt]});const yt=tt=>{let{rootCls:ae,cssVar:Ke}=tt;const[,he]=(0,Y.default)();return(0,w.useCSSVarRegister)({path:[Te],prefix:Ke.prefix,key:Ke==null?void 0:Ke.key,unitless:Object.assign(Object.assign({},Y.unitless),Ge),ignore:Y.ignore,token:he,scope:ae},()=>{const Pe=A(Te,he,We),lt=b(Te,he,Pe,{deprecatedTokens:_e==null?void 0:_e.deprecatedTokens});return Object.keys(Pe).forEach(He=>{lt[we(He)]=lt[He],delete lt[He]}),lt}),null};return tt=>{const[,,,,ae]=(0,Y.default)();return[Ke=>ze&&ae?W.default.createElement(W.default.Fragment,null,W.default.createElement(yt,{rootCls:tt,cssVar:ae,component:Te}),Ke):Ke,ae==null?void 0:ae.key]}},Ne=(Te,We,_e,we)=>{const Re=le(Te,We,_e,we),ze=De(Array.isArray(Te)?Te[0]:Te,_e,we);return function(Ge){let yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ge;const[,ke]=Re(Ge,yt),[tt,ae]=ze(yt);return[tt,ke,ae]}};N.genStyleHooks=Ne},36219:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=W;var H=k(36496);function W(w,X){return H.PresetColors.reduce((j,ee)=>{const Y=w[`${ee}1`],re=w[`${ee}3`],Q=w[`${ee}6`],ye=w[`${ee}7`];return Object.assign(Object.assign({},j),X(ee,{lightColor:Y,lightBorderColor:re,darkColor:Q,textColor:ye}))},{})}},83609:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=k(131);function W(j){return j>=0&&j<=255}function w(j,ee){const{r:Y,g:re,b:Q,a:ye}=new H.TinyColor(j).toRgb();if(ye<1)return j;const{r:se,g:ne,b:$}=new H.TinyColor(ee).toRgb();for(let A=.01;A<=1;A+=.01){const b=Math.round((Y-se*(1-A))/A),te=Math.round((re-ne*(1-A))/A),le=Math.round((Q-$*(1-A))/A);if(W(b)&&W(te)&&W(le))return new H.TinyColor({r:b,g:te,b:le,a:Math.round(A*100)/100}).toRgbString()}return new H.TinyColor({r:Y,g:re,b:Q,a:1}).toRgbString()}var X=N.default=w},1657:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=W;var H=k(36939);function W(w){return w==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var X=arguments.length,j=new Array(X),ee=0;ee<X;ee++)j[ee]=arguments[ee];return`max(${j.map(Y=>(0,H.unit)(Y)).join(",")})`},min:function(){for(var X=arguments.length,j=new Array(X),ee=0;ee<X;ee++)j[ee]=arguments[ee];return`min(${j.map(Y=>(0,H.unit)(Y)).join(",")})`}}}},99636:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=N._statistic_build_=void 0,N.merge=W,N.statistic=void 0;const k=typeof CSSINJS_STATISTIC!="undefined";let H=!0;function W(){for(var re=arguments.length,Q=new Array(re),ye=0;ye<re;ye++)Q[ye]=arguments[ye];if(!k)return Object.assign.apply(Object,[{}].concat(Q));H=!1;const se={};return Q.forEach(ne=>{Object.keys(ne).forEach(A=>{Object.defineProperty(se,A,{configurable:!0,enumerable:!0,get:()=>ne[A]})})}),H=!0,se}const w=N.statistic={},X=N._statistic_build_={};function j(){}const ee=re=>{let Q,ye=re,se=j;return k&&typeof Proxy!="undefined"&&(Q=new Set,ye=new Proxy(re,{get(ne,$){return H&&Q.add($),ne[$]}}),se=(ne,$)=>{var A;w[ne]={global:Array.from(Q),component:Object.assign(Object.assign({},(A=w[ne])===null||A===void 0?void 0:A.component),$)}}),{token:ye,keys:Q,flush:se}};var Y=N.default=ee},54894:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(36939),w=k(98078),X=H(k(41401));const j=(Y,re)=>{const[Q,ye]=(0,X.default)();return(0,W.useStyleRegister)({theme:Q,token:ye,hashId:"",path:["ant-design-icons",Y],nonce:()=>re==null?void 0:re.nonce},()=>[{[`.${Y}`]:Object.assign(Object.assign({},(0,w.resetIcon)()),{[`.${Y} .${Y}-icon`]:{display:"block"}})}])};var ee=N.default=j},52040:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var H=N.default=k},92125:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(93967)),w=k(92419),X=Q(k(67294)),j=k(31929),ee=H(k(15086)),Y=k(48125);function re(ne){if(typeof WeakMap!="function")return null;var $=new WeakMap,A=new WeakMap;return(re=function(b){return b?A:$})(ne)}function Q(ne,$){if(!$&&ne&&ne.__esModule)return ne;if(ne===null||typeof ne!="object"&&typeof ne!="function")return{default:ne};var A=re($);if(A&&A.has(ne))return A.get(ne);var b={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in ne)if(le!=="default"&&Object.prototype.hasOwnProperty.call(ne,le)){var Ae=te?Object.getOwnPropertyDescriptor(ne,le):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(b,le,Ae):b[le]=ne[le]}return b.default=ne,A&&A.set(ne,b),b}const ye=ne=>{const{prefixCls:$,className:A,placement:b="top",title:te,color:le,overlayInnerStyle:Ae}=ne,{getPrefixCls:De}=X.useContext(j.ConfigContext),Ne=De("tooltip",$),[Te,We,_e]=(0,ee.default)(Ne),we=(0,Y.parseColor)(Ne,le),Re=we.arrowStyle,ze=Object.assign(Object.assign({},Ae),we.overlayStyle),Ge=(0,W.default)(We,_e,Ne,`${Ne}-pure`,`${Ne}-placement-${b}`,A,we.className);return Te(X.createElement("div",{className:Ge,style:Re},X.createElement("div",{className:`${Ne}-arrow`}),X.createElement(w.Popup,Object.assign({},ne,{className:We,prefixCls:Ne,overlayInnerStyle:ze}),te)))};var se=N.default=ye},94055:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=De(k(67294)),w=H(k(93967)),X=H(k(92419)),j=H(k(60869)),ee=k(56333),Y=k(53683),re=H(k(74132)),Q=k(47419),ye=k(13594),se=H(k(96877)),ne=k(31929),$=k(46549),A=k(3184),b=H(k(92125)),te=H(k(15086)),le=k(48125);function Ae(_e){if(typeof WeakMap!="function")return null;var we=new WeakMap,Re=new WeakMap;return(Ae=function(ze){return ze?Re:we})(_e)}function De(_e,we){if(!we&&_e&&_e.__esModule)return _e;if(_e===null||typeof _e!="object"&&typeof _e!="function")return{default:_e};var Re=Ae(we);if(Re&&Re.has(_e))return Re.get(_e);var ze={__proto__:null},Ge=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var yt in _e)if(yt!=="default"&&Object.prototype.hasOwnProperty.call(_e,yt)){var ke=Ge?Object.getOwnPropertyDescriptor(_e,yt):null;ke&&(ke.get||ke.set)?Object.defineProperty(ze,yt,ke):ze[yt]=_e[yt]}return ze.default=_e,Re&&Re.set(_e,ze),ze}var Ne=function(_e,we){var Re={};for(var ze in _e)Object.prototype.hasOwnProperty.call(_e,ze)&&we.indexOf(ze)<0&&(Re[ze]=_e[ze]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ge=0,ze=Object.getOwnPropertySymbols(_e);Ge<ze.length;Ge++)we.indexOf(ze[Ge])<0&&Object.prototype.propertyIsEnumerable.call(_e,ze[Ge])&&(Re[ze[Ge]]=_e[ze[Ge]]);return Re};const Te=W.forwardRef((_e,we)=>{var Re,ze;const{prefixCls:Ge,openClassName:yt,getTooltipContainer:ke,overlayClassName:tt,color:ae,overlayInnerStyle:Ke,children:he,afterOpenChange:Pe,afterVisibleChange:lt,destroyTooltipOnHide:He,arrow:Ue=!0,title:Qe,overlay:Se,builtinPlacements:xe,arrowPointAtCenter:rt=!1,autoAdjustOverflow:Je=!0}=_e,dt=!!Ue,[,Bt]=(0,A.useToken)(),{getPopupContainer:Ye,getPrefixCls:Xe,direction:Le}=W.useContext(ne.ConfigContext),je=(0,ye.devUseWarning)("Tooltip"),at=W.useRef(null),Me=()=>{var nt;(nt=at.current)===null||nt===void 0||nt.forceAlign()};W.useImperativeHandle(we,()=>({forceAlign:Me,forcePopupAlign:()=>{je.deprecated(!1,"forcePopupAlign","forceAlign"),Me()}}));const[Ze,_t]=(0,j.default)(!1,{value:(Re=_e.open)!==null&&Re!==void 0?Re:_e.visible,defaultValue:(ze=_e.defaultOpen)!==null&&ze!==void 0?ze:_e.defaultVisible}),Mt=!Qe&&!Se&&Qe!==0,ir=nt=>{var St,$t;_t(Mt?!1:nt),Mt||((St=_e.onOpenChange)===null||St===void 0||St.call(_e,nt),($t=_e.onVisibleChange)===null||$t===void 0||$t.call(_e,nt))},Tr=W.useMemo(()=>{var nt,St;let $t=rt;return typeof Ue=="object"&&($t=(St=(nt=Ue.pointAtCenter)!==null&&nt!==void 0?nt:Ue.arrowPointAtCenter)!==null&&St!==void 0?St:rt),xe||(0,re.default)({arrowPointAtCenter:$t,autoAdjustOverflow:Je,arrowWidth:dt?Bt.sizePopupArrow:0,borderRadius:Bt.borderRadius,offset:Bt.marginXXS,visibleFirst:!0})},[rt,Ue,xe,Bt]),et=W.useMemo(()=>Qe===0?Qe:Se||Qe||"",[Se,Qe]),en=W.createElement($.NoCompactStyle,null,typeof et=="function"?et():et),{getPopupContainer:Xr,placement:Sr="top",mouseEnterDelay:pt=.1,mouseLeaveDelay:Ut=.1,overlayStyle:Gt,rootClassName:Tt}=_e,qt=Ne(_e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),fr=Xe("tooltip",Ge),hr=Xe(),Er=_e["data-popover-inject"];let Ir=Ze;!("open"in _e)&&!("visible"in _e)&&Mt&&(Ir=!1);const ue=(0,Q.isValidElement)(he)&&!(0,Q.isFragment)(he)?he:W.createElement("span",null,he),G=ue.props,oe=!G.className||typeof G.className=="string"?(0,w.default)(G.className,yt||`${fr}-open`):G.className,[Ie,qe,At]=(0,te.default)(fr,!Er),rr=(0,le.parseColor)(fr,ae),Zt=rr.arrowStyle,wt=Object.assign(Object.assign({},Ke),rr.overlayStyle),Pt=(0,w.default)(tt,{[`${fr}-rtl`]:Le==="rtl"},rr.className,Tt,qe,At),[ge,ve]=(0,ee.useZIndex)("Tooltip",qt.zIndex),Fe=W.createElement(X.default,Object.assign({},qt,{zIndex:ge,showArrow:dt,placement:Sr,mouseEnterDelay:pt,mouseLeaveDelay:Ut,prefixCls:fr,overlayClassName:Pt,overlayStyle:Object.assign(Object.assign({},Zt),Gt),getTooltipContainer:Xr||ke||Ye,ref:at,builtinPlacements:Tr,overlay:en,visible:Ir,onVisibleChange:ir,afterVisibleChange:Pe!=null?Pe:lt,overlayInnerStyle:wt,arrowContent:W.createElement("span",{className:`${fr}-arrow-content`}),motion:{motionName:(0,Y.getTransitionName)(hr,"zoom-big-fast",_e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!He}),Ir?(0,Q.cloneElement)(ue,{className:oe}):ue);return Ie(W.createElement(se.default.Provider,{value:ve},Fe))});Te._InternalPanelDoNotUseOrYouWillBeFired=b.default;var We=N.default=Te},15086:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var H=k(98078),W=k(42836),w=re(k(9064)),X=k(3184),j=k(36939),ee=k(51337);function Y(ne){if(typeof WeakMap!="function")return null;var $=new WeakMap,A=new WeakMap;return(Y=function(b){return b?A:$})(ne)}function re(ne,$){if(!$&&ne&&ne.__esModule)return ne;if(ne===null||typeof ne!="object"&&typeof ne!="function")return{default:ne};var A=Y($);if(A&&A.has(ne))return A.get(ne);var b={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in ne)if(le!=="default"&&Object.prototype.hasOwnProperty.call(ne,le)){var Ae=te?Object.getOwnPropertyDescriptor(ne,le):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(b,le,Ae):b[le]=ne[le]}return b.default=ne,A&&A.set(ne,b),b}const Q=ne=>{const{componentCls:$,tooltipMaxWidth:A,tooltipColor:b,tooltipBg:te,tooltipBorderRadius:le,zIndexPopup:Ae,controlHeight:De,boxShadowSecondary:Ne,paddingSM:Te,paddingXS:We}=ne;return[{[$]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,H.resetComponent)(ne)),{position:"absolute",zIndex:Ae,display:"block",width:"max-content",maxWidth:A,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":te,[`${$}-inner`]:{minWidth:De,minHeight:De,padding:`${(0,j.unit)(ne.calc(Te).div(2).equal())} ${(0,j.unit)(We)}`,color:b,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:te,borderRadius:le,boxShadow:Ne,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${$}-inner`]:{borderRadius:ne.min(le,w.MAX_VERTICAL_CONTENT_RADIUS)}},[`${$}-content`]:{position:"relative"}}),(0,X.genPresetColor)(ne,(_e,we)=>{let{darkColor:Re}=we;return{[`&${$}-${_e}`]:{[`${$}-inner`]:{backgroundColor:Re},[`${$}-arrow`]:{"--antd-arrow-background-color":Re}}}})),{"&-rtl":{direction:"rtl"}})},(0,w.default)(ne,"var(--antd-arrow-background-color)"),{[`${$}-pure`]:{position:"relative",maxWidth:"none",margin:ne.sizePopupArrow}}]},ye=ne=>Object.assign(Object.assign({zIndexPopup:ne.zIndexPopupBase+70},(0,w.getArrowOffsetToken)({contentRadius:ne.borderRadius,limitVerticalRadius:!0})),(0,ee.getArrowToken)((0,X.mergeToken)(ne,{borderRadiusOuter:Math.min(ne.borderRadiusOuter,4)})));N.prepareComponentToken=ye;var se=N.default=function($){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,X.genStyleHooks)("Tooltip",te=>{const{borderRadius:le,colorTextLightSolid:Ae,colorBgSpotlight:De}=te,Ne=(0,X.mergeToken)(te,{tooltipMaxWidth:250,tooltipColor:Ae,tooltipBorderRadius:le,tooltipBg:De});return[Q(Ne),(0,W.initZoomMotion)(te,"zoom-big-fast")]},ye,{resetStyle:!1,injectStyle:A})($)}},48125:function(vt,N,k){"use strict";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.parseColor=X;var W=H(k(93967)),w=k(45471);function X(j,ee){const Y=(0,w.isPresetColor)(ee),re=(0,W.default)({[`${j}-${ee}`]:ee&&Y}),Q={},ye={};return ee&&!Y&&(Q.background=ee,ye["--antd-arrow-background-color"]=ee),{className:re,overlayStyle:Q,arrowStyle:ye}}},12385:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=ee(k(67294)),w=H(k(45598)),X=H(k(82546));function j(le){if(typeof WeakMap!="function")return null;var Ae=new WeakMap,De=new WeakMap;return(j=function(Ne){return Ne?De:Ae})(le)}function ee(le,Ae){if(!Ae&&le&&le.__esModule)return le;if(le===null||typeof le!="object"&&typeof le!="function")return{default:le};var De=j(Ae);if(De&&De.has(le))return De.get(le);var Ne={__proto__:null},Te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var We in le)if(We!=="default"&&Object.prototype.hasOwnProperty.call(le,We)){var _e=Te?Object.getOwnPropertyDescriptor(le,We):null;_e&&(_e.get||_e.set)?Object.defineProperty(Ne,We,_e):Ne[We]=le[We]}return Ne.default=le,De&&De.set(le,Ne),Ne}function Y(le){const Ae=typeof le;return Ae==="string"||Ae==="number"}function re(le){let Ae=0;return le.forEach(De=>{Y(De)?Ae+=String(De).length:Ae+=1}),Ae}function Q(le,Ae){let De=0;const Ne=[];for(let Te=0;Te<le.length;Te+=1){if(De===Ae)return Ne;const We=le[Te],we=Y(We)?String(We).length:1,Re=De+we;if(Re>Ae){const ze=Ae-De;return Ne.push(String(We).slice(0,ze)),Ne}Ne.push(We),De=Re}return le}const ye=0,se=1,ne=2,$=3,A=4,b=le=>{let{enabledMeasure:Ae,children:De,text:Ne,width:Te,fontSize:We,rows:_e,onEllipsis:we}=le;const[[Re,ze,Ge],yt]=W.useState([0,0,0]),[ke,tt]=W.useState(0),[ae,Ke]=W.useState(ye),[he,Pe]=W.useState(0),lt=W.useRef(null),He=W.useRef(null),Ue=W.useMemo(()=>(0,w.default)(Ne),[Ne]),Qe=W.useMemo(()=>re(Ue),[Ue]),Se=W.useMemo(()=>!Ae||ae!==$?ke&&ae!==A&&Ae?De(Q(Ue,ke),ke<Qe):De(Ue,!1):De(Q(Ue,ze),ze<Qe),[Ae,ae,De,Ue,ze,Qe]);(0,X.default)(()=>{Ae&&Te&&We&&Qe&&(Ke(se),yt([0,Math.ceil(Qe/2),Qe]))},[Ae,Te,We,Ne,Qe,_e]),(0,X.default)(()=>{var dt;ae===se&&Pe(((dt=lt.current)===null||dt===void 0?void 0:dt.offsetHeight)||0)},[ae]),(0,X.default)(()=>{var dt,Bt;if(he){if(ae===se){const Ye=((dt=He.current)===null||dt===void 0?void 0:dt.offsetHeight)||0,Xe=_e*he;Ye<=Xe?(Ke(A),we(!1)):Ke(ne)}else if(ae===ne)if(Re!==Ge){const Ye=((Bt=He.current)===null||Bt===void 0?void 0:Bt.offsetHeight)||0,Xe=_e*he;let Le=Re,je=Ge;Re===Ge-1?je=Re:Ye<=Xe?Le=ze:je=ze;const at=Math.ceil((Le+je)/2);yt([Le,at,je])}else Ke($),tt(ze),we(!0)}},[ae,Re,Ge,_e,he]);const xe={width:Te,whiteSpace:"normal",margin:0,padding:0},rt=(dt,Bt,Ye)=>W.createElement("span",{"aria-hidden":!0,ref:Bt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(We/2)*2},Ye)},dt),Je=(dt,Bt)=>{const Ye=Q(Ue,dt);return rt(De(Ye,!0),Bt,xe)};return W.createElement(W.Fragment,null,Se,Ae&&ae!==$&&ae!==A&&W.createElement(W.Fragment,null,rt("lg",lt,{wordBreak:"keep-all",whiteSpace:"nowrap"}),ae===se?rt(De(Ue,!1),He,xe):Je(ze,He)))};var te=N.default=b},69274:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=j(k(67294)),w=H(k(94055));function X(re){if(typeof WeakMap!="function")return null;var Q=new WeakMap,ye=new WeakMap;return(X=function(se){return se?ye:Q})(re)}function j(re,Q){if(!Q&&re&&re.__esModule)return re;if(re===null||typeof re!="object"&&typeof re!="function")return{default:re};var ye=X(Q);if(ye&&ye.has(re))return ye.get(re);var se={__proto__:null},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in re)if($!=="default"&&Object.prototype.hasOwnProperty.call(re,$)){var A=ne?Object.getOwnPropertyDescriptor(re,$):null;A&&(A.get||A.set)?Object.defineProperty(se,$,A):se[$]=re[$]}return se.default=re,ye&&ye.set(re,se),se}const ee=re=>{let{enabledEllipsis:Q,isEllipsis:ye,children:se,tooltipProps:ne}=re;return!(ne!=null&&ne.title)||!Q?se:W.createElement(w.default,Object.assign({open:ye?void 0:!1},ne),se)};var Y=N.default=ee},28460:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=ze(k(67294)),w=H(k(83874)),X=H(k(90091)),j=H(k(10875)),ee=H(k(93967)),Y=H(k(20640)),re=H(k(9220)),Q=H(k(45598)),ye=H(k(82546)),se=H(k(60869)),ne=H(k(18475)),$=k(75531),A=k(38882),b=H(k(60938)),te=k(31929),le=H(k(76647)),Ae=H(k(94055)),De=H(k(69425)),Ne=H(k(92759)),Te=H(k(67312)),We=H(k(89652)),_e=H(k(12385)),we=H(k(69274));function Re(Pe){if(typeof WeakMap!="function")return null;var lt=new WeakMap,He=new WeakMap;return(Re=function(Ue){return Ue?He:lt})(Pe)}function ze(Pe,lt){if(!lt&&Pe&&Pe.__esModule)return Pe;if(Pe===null||typeof Pe!="object"&&typeof Pe!="function")return{default:Pe};var He=Re(lt);if(He&&He.has(Pe))return He.get(Pe);var Ue={__proto__:null},Qe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Se in Pe)if(Se!=="default"&&Object.prototype.hasOwnProperty.call(Pe,Se)){var xe=Qe?Object.getOwnPropertyDescriptor(Pe,Se):null;xe&&(xe.get||xe.set)?Object.defineProperty(Ue,Se,xe):Ue[Se]=Pe[Se]}return Ue.default=Pe,He&&He.set(Pe,Ue),Ue}var Ge=function(Pe,lt){var He={};for(var Ue in Pe)Object.prototype.hasOwnProperty.call(Pe,Ue)&&lt.indexOf(Ue)<0&&(He[Ue]=Pe[Ue]);if(Pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Qe=0,Ue=Object.getOwnPropertySymbols(Pe);Qe<Ue.length;Qe++)lt.indexOf(Ue[Qe])<0&&Object.prototype.propertyIsEnumerable.call(Pe,Ue[Qe])&&(He[Ue[Qe]]=Pe[Ue[Qe]]);return He};function yt(Pe,lt){let{mark:He,code:Ue,underline:Qe,delete:Se,strong:xe,keyboard:rt,italic:Je}=Pe,dt=lt;function Bt(Ye,Xe){Xe&&(dt=W.createElement(Ye,{},dt))}return Bt("strong",xe),Bt("u",Qe),Bt("del",Se),Bt("code",Ue),Bt("mark",He),Bt("kbd",rt),Bt("i",Je),dt}function ke(Pe,lt,He){return Pe===!0||Pe===void 0?lt:Pe||He&&lt}function tt(Pe){return Pe===!1?[!1,!1]:Array.isArray(Pe)?Pe:[Pe]}const ae="...",Ke=W.forwardRef((Pe,lt)=>{var He,Ue,Qe;const{prefixCls:Se,className:xe,style:rt,type:Je,disabled:dt,children:Bt,ellipsis:Ye,editable:Xe,copyable:Le,component:je,title:at}=Pe,Me=Ge(Pe,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:Ze,direction:_t}=W.useContext(te.ConfigContext),[Mt]=(0,le.default)("Text"),ir=W.useRef(null),Tr=W.useRef(null),et=Ze("typography",Se),en=(0,ne.default)(Me,["mark","code","delete","underline","strong","keyboard","italic"]),[Xr,Sr]=(0,Ne.default)(Xe),[pt,Ut]=(0,se.default)(!1,{value:Sr.editing}),{triggerType:Gt=["icon"]}=Sr,Tt=Kn=>{var Ci;Kn&&((Ci=Sr.onStart)===null||Ci===void 0||Ci.call(Sr)),Ut(Kn)};(0,Te.default)(()=>{var Kn;pt||(Kn=Tr.current)===null||Kn===void 0||Kn.focus()},[pt]);const qt=Kn=>{Kn==null||Kn.preventDefault(),Tt(!0)},fr=Kn=>{var Ci;(Ci=Sr.onChange)===null||Ci===void 0||Ci.call(Sr,Kn),Tt(!1)},hr=()=>{var Kn;(Kn=Sr.onCancel)===null||Kn===void 0||Kn.call(Sr),Tt(!1)},[Er,Ir]=(0,Ne.default)(Le),[ue,G]=W.useState(!1),oe=W.useRef(null),Ie={};Ir.format&&(Ie.format=Ir.format);const qe=()=>{oe.current&&clearTimeout(oe.current)},At=Kn=>{var Ci;Kn==null||Kn.preventDefault(),Kn==null||Kn.stopPropagation(),(0,Y.default)(Ir.text||String(Bt)||"",Ie),G(!0),qe(),oe.current=setTimeout(()=>{G(!1)},3e3),(Ci=Ir.onCopy)===null||Ci===void 0||Ci.call(Ir,Kn)};W.useEffect(()=>qe,[]);const[rr,Zt]=W.useState(!1),[wt,Pt]=W.useState(!1),[ge,ve]=W.useState(!1),[Fe,nt]=W.useState(!1),[St,$t]=W.useState(!1),[vr,Rt]=W.useState(!0),[ct,It]=(0,Ne.default)(Ye,{expandable:!1}),gr=ct&&!ge,{rows:Br=1}=It,Nt=W.useMemo(()=>!gr||It.suffix!==void 0||It.onEllipsis||It.expandable||Xr||Er,[gr,It,Xr,Er]);(0,ye.default)(()=>{ct&&!Nt&&(Zt((0,A.isStyleSupport)("webkitLineClamp")),Pt((0,A.isStyleSupport)("textOverflow")))},[Nt,ct]);const wn=W.useMemo(()=>Nt?!1:Br===1?wt:rr,[Nt,wt,rr]),ei=gr&&(wn?St:Fe),ci=gr&&Br===1&&wn,ln=gr&&Br>1&&wn,ti=Kn=>{var Ci;ve(!0),(Ci=It.onExpand)===null||Ci===void 0||Ci.call(It,Kn)},[$n,ri]=W.useState(0),[oa,yi]=W.useState(0),ya=(Kn,Ci)=>{let{offsetWidth:Ga}=Kn;var Jo;ri(Ga),yi(parseInt((Jo=window.getComputedStyle)===null||Jo===void 0?void 0:Jo.call(window,Ci).fontSize,10)||0)},Ya=Kn=>{var Ci;nt(Kn),Fe!==Kn&&((Ci=It.onEllipsis)===null||Ci===void 0||Ci.call(It,Kn))};W.useEffect(()=>{const Kn=ir.current;if(ct&&wn&&Kn){const Ci=ln?Kn.offsetHeight<Kn.scrollHeight:Kn.offsetWidth<Kn.scrollWidth;St!==Ci&&$t(Ci)}},[ct,wn,Bt,ln,vr,$n]),W.useEffect(()=>{const Kn=ir.current;if(typeof IntersectionObserver=="undefined"||!Kn||!wn||!gr)return;const Ci=new IntersectionObserver(()=>{Rt(!!Kn.offsetParent)});return Ci.observe(Kn),()=>{Ci.disconnect()}},[wn,gr]);let ha={};It.tooltip===!0?ha={title:(He=Sr.text)!==null&&He!==void 0?He:Bt}:W.isValidElement(It.tooltip)?ha={title:It.tooltip}:typeof It.tooltip=="object"?ha=Object.assign({title:(Ue=Sr.text)!==null&&Ue!==void 0?Ue:Bt},It.tooltip):ha={title:It.tooltip};const Fa=W.useMemo(()=>{const Kn=Ci=>["string","number"].includes(typeof Ci);if(!(!ct||wn)){if(Kn(Sr.text))return Sr.text;if(Kn(Bt))return Bt;if(Kn(at))return at;if(Kn(ha.title))return ha.title}},[ct,wn,at,ha.title,ei]);if(pt)return W.createElement(De.default,{value:(Qe=Sr.text)!==null&&Qe!==void 0?Qe:typeof Bt=="string"?Bt:"",onSave:fr,onCancel:hr,onEnd:Sr.onEnd,prefixCls:et,className:xe,style:rt,direction:_t,component:je,maxLength:Sr.maxLength,autoSize:Sr.autoSize,enterIcon:Sr.enterIcon});const Sa=()=>{const{expandable:Kn,symbol:Ci}=It;if(!Kn)return null;let Ga;return Ci?Ga=Ci:Ga=Mt==null?void 0:Mt.expand,W.createElement("a",{key:"expand",className:`${et}-expand`,onClick:ti,"aria-label":Mt==null?void 0:Mt.expand},Ga)},xs=()=>{if(!Xr)return;const{icon:Kn,tooltip:Ci}=Sr,Ga=(0,Q.default)(Ci)[0]||(Mt==null?void 0:Mt.edit),Jo=typeof Ga=="string"?Ga:"";return Gt.includes("icon")?W.createElement(Ae.default,{key:"edit",title:Ci===!1?"":Ga},W.createElement(b.default,{ref:Tr,className:`${et}-edit`,onClick:qt,"aria-label":Jo},Kn||W.createElement(j.default,{role:"button"}))):null},co=()=>{if(!Er)return null;const{tooltips:Kn,icon:Ci}=Ir,Ga=tt(Kn),Jo=tt(Ci),fo=ue?ke(Ga[1],Mt==null?void 0:Mt.copied):ke(Ga[0],Mt==null?void 0:Mt.copy),To=ue?Mt==null?void 0:Mt.copied:Mt==null?void 0:Mt.copy,lr=typeof fo=="string"?fo:To;return W.createElement(Ae.default,{key:"copy",title:fo},W.createElement(b.default,{className:(0,ee.default)(`${et}-copy`,{[`${et}-copy-success`]:ue,[`${et}-copy-icon-only`]:Bt==null}),onClick:At,"aria-label":lr},ue?ke(Jo[1],W.createElement(w.default,null),!0):ke(Jo[0],W.createElement(X.default,null),!0)))},Lo=Kn=>[Kn&&Sa(),xs(),co()],Za=Kn=>[Kn&&W.createElement("span",{"aria-hidden":!0,key:"ellipsis"},ae),It.suffix,Lo(Kn)];return W.createElement(re.default,{onResize:ya,disabled:!gr},Kn=>W.createElement(we.default,{tooltipProps:ha,enabledEllipsis:gr,isEllipsis:ei},W.createElement(We.default,Object.assign({className:(0,ee.default)({[`${et}-${Je}`]:Je,[`${et}-disabled`]:dt,[`${et}-ellipsis`]:ct,[`${et}-single-line`]:gr&&Br===1,[`${et}-ellipsis-single-line`]:ci,[`${et}-ellipsis-multiple-line`]:ln},xe),prefixCls:Se,style:Object.assign(Object.assign({},rt),{WebkitLineClamp:ln?Br:void 0}),component:je,ref:(0,$.composeRef)(Kn,ir,lt),direction:_t,onClick:Gt.includes("text")?qt:void 0,"aria-label":Fa==null?void 0:Fa.toString(),title:at},en),W.createElement(_e.default,{enabledMeasure:gr&&!wn,text:Bt,rows:Br,width:$n,fontSize:oa,onEllipsis:Ya},(Ci,Ga)=>{let Jo=Ci;return Ci.length&&Ga&&Fa&&(Jo=W.createElement("span",{key:"show-content","aria-hidden":!0},Jo)),yt(Pe,W.createElement(W.Fragment,null,Jo,Za(Ga)))}))))});var he=N.default=Ke},69425:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(7224)),w=H(k(93967)),X=H(k(27712)),j=ye(k(67294)),ee=k(47419),Y=H(k(14104)),re=H(k(23461));function Q($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(Q=function(te){return te?b:A})($)}function ye($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=Q(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}const se=$=>{const{prefixCls:A,"aria-label":b,className:te,style:le,direction:Ae,maxLength:De,autoSize:Ne=!0,value:Te,onSave:We,onCancel:_e,onEnd:we,component:Re,enterIcon:ze=j.createElement(W.default,null)}=$,Ge=j.useRef(null),yt=j.useRef(!1),ke=j.useRef(),[tt,ae]=j.useState(Te);j.useEffect(()=>{ae(Te)},[Te]),j.useEffect(()=>{if(Ge.current&&Ge.current.resizableTextArea){const{textArea:Bt}=Ge.current.resizableTextArea;Bt.focus();const{length:Ye}=Bt.value;Bt.setSelectionRange(Ye,Ye)}},[]);const Ke=Bt=>{let{target:Ye}=Bt;ae(Ye.value.replace(/[\n\r]/g,""))},he=()=>{yt.current=!0},Pe=()=>{yt.current=!1},lt=Bt=>{let{keyCode:Ye}=Bt;yt.current||(ke.current=Ye)},He=()=>{We(tt.trim())},Ue=Bt=>{let{keyCode:Ye,ctrlKey:Xe,altKey:Le,metaKey:je,shiftKey:at}=Bt;ke.current===Ye&&!yt.current&&!Xe&&!Le&&!je&&!at&&(Ye===X.default.ENTER?(He(),we==null||we()):Ye===X.default.ESC&&_e())},Qe=()=>{He()},Se=Re?`${A}-${Re}`:"",[xe,rt,Je]=(0,re.default)(A),dt=(0,w.default)(A,`${A}-edit-content`,{[`${A}-rtl`]:Ae==="rtl"},te,Se,rt,Je);return xe(j.createElement("div",{className:dt,style:le},j.createElement(Y.default,{ref:Ge,maxLength:De,value:tt,onChange:Ke,onKeyDown:lt,onKeyUp:Ue,onCompositionStart:he,onCompositionEnd:Pe,onBlur:Qe,"aria-label":b,rows:1,autoSize:Ne}),ze!==null?(0,ee.cloneElement)(ze,{className:`${A}-edit-content-confirm`}):null))};var ne=N.default=se},34528:function(vt,N,k){"use strict";var H,W=k(64836);H={value:!0},N.Z=void 0;var w=Y(k(67294)),X=k(13594),j=W(k(28460));function ee(ne){if(typeof WeakMap!="function")return null;var $=new WeakMap,A=new WeakMap;return(ee=function(b){return b?A:$})(ne)}function Y(ne,$){if(!$&&ne&&ne.__esModule)return ne;if(ne===null||typeof ne!="object"&&typeof ne!="function")return{default:ne};var A=ee($);if(A&&A.has(ne))return A.get(ne);var b={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in ne)if(le!=="default"&&Object.prototype.hasOwnProperty.call(ne,le)){var Ae=te?Object.getOwnPropertyDescriptor(ne,le):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(b,le,Ae):b[le]=ne[le]}return b.default=ne,A&&A.set(ne,b),b}var re=function(ne,$){var A={};for(var b in ne)Object.prototype.hasOwnProperty.call(ne,b)&&$.indexOf(b)<0&&(A[b]=ne[b]);if(ne!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,b=Object.getOwnPropertySymbols(ne);te<b.length;te++)$.indexOf(b[te])<0&&Object.prototype.propertyIsEnumerable.call(ne,b[te])&&(A[b[te]]=ne[b[te]]);return A};const Q=[1,2,3,4,5],ye=w.forwardRef((ne,$)=>{const{level:A=1}=ne,b=re(ne,["level"]);let te;return Q.includes(A)?te=`h${A}`:te="h1",w.createElement(j.default,Object.assign({ref:$},b,{component:te}))});var se=N.Z=ye},89652:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=Q(k(67294)),w=H(k(93967)),X=k(75531),j=k(13594),ee=k(31929),Y=H(k(23461));function re($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(re=function(te){return te?b:A})($)}function Q($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=re(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}var ye=function($,A){var b={};for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&A.indexOf(te)<0&&(b[te]=$[te]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,te=Object.getOwnPropertySymbols($);le<te.length;le++)A.indexOf(te[le])<0&&Object.prototype.propertyIsEnumerable.call($,te[le])&&(b[te[le]]=$[te[le]]);return b};const se=W.forwardRef(($,A)=>{const{prefixCls:b,component:te="article",className:le,rootClassName:Ae,setContentRef:De,children:Ne,direction:Te,style:We}=$,_e=ye($,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:we,direction:Re,typography:ze}=W.useContext(ee.ConfigContext),Ge=Te!=null?Te:Re;let yt=A;De&&(yt=(0,X.composeRef)(A,De));const ke=we("typography",b),[tt,ae,Ke]=(0,Y.default)(ke),he=(0,w.default)(ke,ze==null?void 0:ze.className,{[`${ke}-rtl`]:Ge==="rtl"},le,Ae,ae,Ke),Pe=Object.assign(Object.assign({},ze==null?void 0:ze.style),We);return tt(W.createElement(te,Object.assign({className:he,style:Pe,ref:yt},_e),Ne))});var ne=N.default=se},92759:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=X;var H=w(k(67294));function W(j){if(typeof WeakMap!="function")return null;var ee=new WeakMap,Y=new WeakMap;return(W=function(re){return re?Y:ee})(j)}function w(j,ee){if(!ee&&j&&j.__esModule)return j;if(j===null||typeof j!="object"&&typeof j!="function")return{default:j};var Y=W(ee);if(Y&&Y.has(j))return Y.get(j);var re={__proto__:null},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ye in j)if(ye!=="default"&&Object.prototype.hasOwnProperty.call(j,ye)){var se=Q?Object.getOwnPropertyDescriptor(j,ye):null;se&&(se.get||se.set)?Object.defineProperty(re,ye,se):re[ye]=j[ye]}return re.default=j,Y&&Y.set(j,re),re}function X(j,ee){return H.useMemo(()=>{const Y=!!j;return[Y,Object.assign(Object.assign({},ee),Y&&typeof j=="object"?j:null)]},[j])}},67312:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var H=w(k(67294));function W(ee){if(typeof WeakMap!="function")return null;var Y=new WeakMap,re=new WeakMap;return(W=function(Q){return Q?re:Y})(ee)}function w(ee,Y){if(!Y&&ee&&ee.__esModule)return ee;if(ee===null||typeof ee!="object"&&typeof ee!="function")return{default:ee};var re=W(Y);if(re&&re.has(ee))return re.get(ee);var Q={__proto__:null},ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var se in ee)if(se!=="default"&&Object.prototype.hasOwnProperty.call(ee,se)){var ne=ye?Object.getOwnPropertyDescriptor(ee,se):null;ne&&(ne.get||ne.set)?Object.defineProperty(Q,se,ne):Q[se]=ee[se]}return Q.default=ee,re&&re.set(ee,Q),Q}const X=(ee,Y)=>{const re=H.useRef(!1);H.useEffect(()=>{re.current?ee():re.current=!0},Y)};var j=N.default=X},23461:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var H=k(98078),W=k(3184),w=k(48385);const X=Y=>{const{componentCls:re,titleMarginTop:Q}=Y;return{[re]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:Y.colorText,wordBreak:"break-word",lineHeight:Y.lineHeight,[`&${re}-secondary`]:{color:Y.colorTextDescription},[`&${re}-success`]:{color:Y.colorSuccess},[`&${re}-warning`]:{color:Y.colorWarning},[`&${re}-danger`]:{color:Y.colorError,"a&:active, a&:focus":{color:Y.colorErrorActive},"a&:hover":{color:Y.colorErrorHover}},[`&${re}-disabled`]:{color:Y.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,w.getTitleStyles)(Y)),{[`
      & + h1${re},
      & + h2${re},
      & + h3${re},
      & + h4${re},
      & + h5${re}
      `]:{marginTop:Q},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:Q}}}),(0,w.getResetStyles)(Y)),(0,w.getLinkStyles)(Y)),{[`
        ${re}-expand,
        ${re}-edit,
        ${re}-copy
      `]:Object.assign(Object.assign({},(0,H.operationUnit)(Y)),{marginInlineStart:Y.marginXXS})}),(0,w.getEditableStyles)(Y)),(0,w.getCopyableStyles)(Y)),(0,w.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},j=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});N.prepareComponentToken=j;var ee=N.default=(0,W.genStyleHooks)("Typography",Y=>[X(Y)],j)},48385:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTitleStyles=N.getResetStyles=N.getLinkStyles=N.getEllipsisStyles=N.getEditableStyles=N.getCopyableStyles=void 0;var H=k(78589),W=k(36939),w=k(98078);const X=(se,ne,$,A)=>{const{titleMarginBottom:b,fontWeightStrong:te}=A;return{marginBottom:b,color:$,fontWeight:te,fontSize:se,lineHeight:ne}},j=se=>{const ne=[1,2,3,4,5],$={};return ne.forEach(A=>{$[`
      h${A}&,
      div&-h${A},
      div&-h${A} > textarea,
      h${A}
    `]=X(se[`fontSizeHeading${A}`],se[`lineHeightHeading${A}`],se.colorTextHeading,se)}),$};N.getTitleStyles=j;const ee=se=>{const{componentCls:ne}=se;return{"a&, a":Object.assign(Object.assign({},(0,w.operationUnit)(se)),{textDecoration:se.linkDecoration,"&:active, &:hover":{textDecoration:se.linkHoverDecoration},[`&[disabled], &${ne}-disabled`]:{color:se.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:se.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};N.getLinkStyles=ee;const Y=se=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:se.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:se.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:H.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:se.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});N.getResetStyles=Y;const re=se=>{const{componentCls:ne,paddingSM:$}=se,A=$;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:se.calc(se.paddingSM).mul(-1).equal(),marginTop:se.calc(A).mul(-1).equal(),marginBottom:`calc(1em - ${(0,W.unit)(A)})`},[`${ne}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:se.calc(se.marginXS).add(2).equal(),insetBlockEnd:se.marginXS,color:se.colorTextDescription,fontWeight:"normal",fontSize:se.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};N.getEditableStyles=re;const Q=se=>({[`${se.componentCls}-copy-success`]:{[`
    &,
    &:hover,
    &:focus`]:{color:se.colorSuccess}},[`${se.componentCls}-copy-icon-only`]:{marginInlineStart:0}});N.getCopyableStyles=Q;const ye=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});N.getEllipsisStyles=ye},87629:function(vt,N,k){"use strict";"use client";var H=k(64836);Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(36245)),w=N.default=W.default},36245:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=N.default="5.14.2"},83874:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const H=W(k(71079));function W(X){return X&&X.__esModule?X:{default:X}}const w=H;N.default=w,vt.exports=w},43273:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const H=W(k(72225));function W(X){return X&&X.__esModule?X:{default:X}}const w=H;N.default=w,vt.exports=w},90091:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const H=W(k(29539));function W(X){return X&&X.__esModule?X:{default:X}}const w=H;N.default=w,vt.exports=w},10875:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const H=W(k(54825));function W(X){return X&&X.__esModule?X:{default:X}}const w=H;N.default=w,vt.exports=w},7224:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const H=W(k(43552));function W(X){return X&&X.__esModule?X:{default:X}}const w=H;N.default=w,vt.exports=w},26545:function(vt,N,k){"use client";"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return we}});var H=$(k(67294)),W=se(k(93967)),w=k(78589),X=se(k(13357)),j=se(k(46648)),ee=k(46338),Y=k(49458);function re(Re,ze){(ze==null||ze>Re.length)&&(ze=Re.length);for(var Ge=0,yt=new Array(ze);Ge<ze;Ge++)yt[Ge]=Re[Ge];return yt}function Q(Re){if(Array.isArray(Re))return Re}function ye(Re,ze,Ge){return ze in Re?Object.defineProperty(Re,ze,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):Re[ze]=Ge,Re}function se(Re){return Re&&Re.__esModule?Re:{default:Re}}function ne(Re){if(typeof WeakMap!="function")return null;var ze=new WeakMap,Ge=new WeakMap;return(ne=function(yt){return yt?Ge:ze})(Re)}function $(Re,ze){if(!ze&&Re&&Re.__esModule)return Re;if(Re===null||typeof Re!="object"&&typeof Re!="function")return{default:Re};var Ge=ne(ze);if(Ge&&Ge.has(Re))return Ge.get(Re);var yt={__proto__:null},ke=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Re)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Re,tt)){var ae=ke?Object.getOwnPropertyDescriptor(Re,tt):null;ae&&(ae.get||ae.set)?Object.defineProperty(yt,tt,ae):yt[tt]=Re[tt]}return yt.default=Re,Ge&&Ge.set(Re,yt),yt}function A(Re,ze){var Ge=Re==null?null:typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(Ge!=null){var yt=[],ke=!0,tt=!1,ae,Ke;try{for(Ge=Ge.call(Re);!(ke=(ae=Ge.next()).done)&&(yt.push(ae.value),!(ze&&yt.length===ze));ke=!0);}catch(he){tt=!0,Ke=he}finally{try{!ke&&Ge.return!=null&&Ge.return()}finally{if(tt)throw Ke}}return yt}}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(Re){for(var ze=1;ze<arguments.length;ze++){var Ge=arguments[ze]!=null?arguments[ze]:{},yt=Object.keys(Ge);typeof Object.getOwnPropertySymbols=="function"&&(yt=yt.concat(Object.getOwnPropertySymbols(Ge).filter(function(ke){return Object.getOwnPropertyDescriptor(Ge,ke).enumerable}))),yt.forEach(function(ke){ye(Re,ke,Ge[ke])})}return Re}function le(Re,ze){var Ge=Object.keys(Re);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(Re);ze&&(yt=yt.filter(function(ke){return Object.getOwnPropertyDescriptor(Re,ke).enumerable})),Ge.push.apply(Ge,yt)}return Ge}function Ae(Re,ze){return ze=ze!=null?ze:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(ze)):le(Object(ze)).forEach(function(Ge){Object.defineProperty(Re,Ge,Object.getOwnPropertyDescriptor(ze,Ge))}),Re}function De(Re,ze){if(Re==null)return{};var Ge=Ne(Re,ze),yt,ke;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(Re);for(ke=0;ke<tt.length;ke++)yt=tt[ke],!(ze.indexOf(yt)>=0)&&Object.prototype.propertyIsEnumerable.call(Re,yt)&&(Ge[yt]=Re[yt])}return Ge}function Ne(Re,ze){if(Re==null)return{};var Ge={},yt=Object.keys(Re),ke,tt;for(tt=0;tt<yt.length;tt++)ke=yt[tt],!(ze.indexOf(ke)>=0)&&(Ge[ke]=Re[ke]);return Ge}function Te(Re,ze){return Q(Re)||A(Re,ze)||We(Re,ze)||b()}function We(Re,ze){if(Re){if(typeof Re=="string")return re(Re,ze);var Ge=Object.prototype.toString.call(Re).slice(8,-1);if(Ge==="Object"&&Re.constructor&&(Ge=Re.constructor.name),Ge==="Map"||Ge==="Set")return Array.from(Ge);if(Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge))return re(Re,ze)}}(0,ee.setTwoToneColor)(w.blue.primary);var _e=H.forwardRef(function(Re,ze){var Ge=Re.className,yt=Re.icon,ke=Re.spin,tt=Re.rotate,ae=Re.tabIndex,Ke=Re.onClick,he=Re.twoToneColor,Pe=De(Re,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),lt=H.useContext(X.default),He=lt.prefixCls,Ue=He===void 0?"anticon":He,Qe=lt.rootClassName,Se,xe=(0,W.default)(Qe,Ue,(Se={},ye(Se,"".concat(Ue,"-").concat(yt.name),!!yt.name),ye(Se,"".concat(Ue,"-spin"),!!ke||yt.name==="loading"),Se),Ge),rt=ae;rt===void 0&&Ke&&(rt=-1);var Je=tt?{msTransform:"rotate(".concat(tt,"deg)"),transform:"rotate(".concat(tt,"deg)")}:void 0,dt=Te((0,Y.normalizeTwoToneColors)(he),2),Bt=dt[0],Ye=dt[1];return H.createElement("span",Ae(te({role:"img","aria-label":yt.name},Pe),{ref:ze,tabIndex:rt,onClick:Ke,className:xe}),H.createElement(j.default,{icon:yt,primaryColor:Bt,secondaryColor:Ye,style:Je}))});_e.displayName="AntdIcon",_e.getTwoToneColor=ee.getTwoToneColor,_e.setTwoToneColor=ee.setTwoToneColor;var we=_e},13357:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return w}});var H=k(67294),W=(0,H.createContext)({}),w=W},46648:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return b}});var H=j(k(67294)),W=k(49458);function w(te,le,Ae){return le in te?Object.defineProperty(te,le,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):te[le]=Ae,te}function X(te){if(typeof WeakMap!="function")return null;var le=new WeakMap,Ae=new WeakMap;return(X=function(De){return De?Ae:le})(te)}function j(te,le){if(!le&&te&&te.__esModule)return te;if(te===null||typeof te!="object"&&typeof te!="function")return{default:te};var Ae=X(le);if(Ae&&Ae.has(te))return Ae.get(te);var De={__proto__:null},Ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Te in te)if(Te!=="default"&&Object.prototype.hasOwnProperty.call(te,Te)){var We=Ne?Object.getOwnPropertyDescriptor(te,Te):null;We&&(We.get||We.set)?Object.defineProperty(De,Te,We):De[Te]=te[Te]}return De.default=te,Ae&&Ae.set(te,De),De}function ee(te){for(var le=1;le<arguments.length;le++){var Ae=arguments[le]!=null?arguments[le]:{},De=Object.keys(Ae);typeof Object.getOwnPropertySymbols=="function"&&(De=De.concat(Object.getOwnPropertySymbols(Ae).filter(function(Ne){return Object.getOwnPropertyDescriptor(Ae,Ne).enumerable}))),De.forEach(function(Ne){w(te,Ne,Ae[Ne])})}return te}function Y(te,le){var Ae=Object.keys(te);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(te);le&&(De=De.filter(function(Ne){return Object.getOwnPropertyDescriptor(te,Ne).enumerable})),Ae.push.apply(Ae,De)}return Ae}function re(te,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(le)):Y(Object(le)).forEach(function(Ae){Object.defineProperty(te,Ae,Object.getOwnPropertyDescriptor(le,Ae))}),te}function Q(te,le){if(te==null)return{};var Ae=ye(te,le),De,Ne;if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols(te);for(Ne=0;Ne<Te.length;Ne++)De=Te[Ne],!(le.indexOf(De)>=0)&&Object.prototype.propertyIsEnumerable.call(te,De)&&(Ae[De]=te[De])}return Ae}function ye(te,le){if(te==null)return{};var Ae={},De=Object.keys(te),Ne,Te;for(Te=0;Te<De.length;Te++)Ne=De[Te],!(le.indexOf(Ne)>=0)&&(Ae[Ne]=te[Ne]);return Ae}var se={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function ne(te){var le=te.primaryColor,Ae=te.secondaryColor;se.primaryColor=le,se.secondaryColor=Ae||(0,W.getSecondaryColor)(le),se.calculated=!!Ae}function $(){return ee({},se)}var A=function(te){var le=te.icon,Ae=te.className,De=te.onClick,Ne=te.style,Te=te.primaryColor,We=te.secondaryColor,_e=Q(te,["icon","className","onClick","style","primaryColor","secondaryColor"]),we=H.useRef(),Re=se;if(Te&&(Re={primaryColor:Te,secondaryColor:We||(0,W.getSecondaryColor)(Te)}),(0,W.useInsertStyles)(we),(0,W.warning)((0,W.isIconDefinition)(le),"icon should be icon definiton, but got ".concat(le)),!(0,W.isIconDefinition)(le))return null;var ze=le;return ze&&typeof ze.icon=="function"&&(ze=re(ee({},ze),{icon:ze.icon(Re.primaryColor,Re.secondaryColor)})),(0,W.generate)(ze.icon,"svg-".concat(ze.name),re(ee({className:Ae,onClick:De,style:Ne,"data-icon":ze.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},_e),{ref:we}))};A.displayName="IconReact",A.getTwoToneColors=$,A.setTwoToneColors=ne;var b=A},46338:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function H($,A){for(var b in A)Object.defineProperty($,b,{enumerable:!0,get:A[b]})}H(N,{getTwoToneColor:function(){return ne},setTwoToneColor:function(){return se}});var W=ee(k(46648)),w=k(49458);function X($,A){(A==null||A>$.length)&&(A=$.length);for(var b=0,te=new Array(A);b<A;b++)te[b]=$[b];return te}function j($){if(Array.isArray($))return $}function ee($){return $&&$.__esModule?$:{default:$}}function Y($,A){var b=$==null?null:typeof Symbol!="undefined"&&$[Symbol.iterator]||$["@@iterator"];if(b!=null){var te=[],le=!0,Ae=!1,De,Ne;try{for(b=b.call($);!(le=(De=b.next()).done)&&(te.push(De.value),!(A&&te.length===A));le=!0);}catch(Te){Ae=!0,Ne=Te}finally{try{!le&&b.return!=null&&b.return()}finally{if(Ae)throw Ne}}return te}}function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Q($,A){return j($)||Y($,A)||ye($,A)||re()}function ye($,A){if($){if(typeof $=="string")return X($,A);var b=Object.prototype.toString.call($).slice(8,-1);if(b==="Object"&&$.constructor&&(b=$.constructor.name),b==="Map"||b==="Set")return Array.from(b);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return X($,A)}}function se($){var A=Q((0,w.normalizeTwoToneColors)($),2),b=A[0],te=A[1];return W.default.setTwoToneColors({primaryColor:b,secondaryColor:te})}function ne(){var $=W.default.getTwoToneColors();return $.calculated?[$.primaryColor,$.secondaryColor]:$.primaryColor}},71079:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ne}});var H=Y(k(67294)),W=j(k(25330)),w=j(k(26545));function X($,A,b){return A in $?Object.defineProperty($,A,{value:b,enumerable:!0,configurable:!0,writable:!0}):$[A]=b,$}function j($){return $&&$.__esModule?$:{default:$}}function ee($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(ee=function(te){return te?b:A})($)}function Y($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=ee(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}function re($){for(var A=1;A<arguments.length;A++){var b=arguments[A]!=null?arguments[A]:{},te=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(b).filter(function(le){return Object.getOwnPropertyDescriptor(b,le).enumerable}))),te.forEach(function(le){X($,le,b[le])})}return $}function Q($,A){var b=Object.keys($);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols($);A&&(te=te.filter(function(le){return Object.getOwnPropertyDescriptor($,le).enumerable})),b.push.apply(b,te)}return b}function ye($,A){return A=A!=null?A:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):Q(Object(A)).forEach(function(b){Object.defineProperty($,b,Object.getOwnPropertyDescriptor(A,b))}),$}var se=function($,A){return H.createElement(w.default,ye(re({},$),{ref:A,icon:W.default}))},ne=H.forwardRef(se)},72225:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ne}});var H=Y(k(67294)),W=j(k(67303)),w=j(k(26545));function X($,A,b){return A in $?Object.defineProperty($,A,{value:b,enumerable:!0,configurable:!0,writable:!0}):$[A]=b,$}function j($){return $&&$.__esModule?$:{default:$}}function ee($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(ee=function(te){return te?b:A})($)}function Y($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=ee(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}function re($){for(var A=1;A<arguments.length;A++){var b=arguments[A]!=null?arguments[A]:{},te=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(b).filter(function(le){return Object.getOwnPropertyDescriptor(b,le).enumerable}))),te.forEach(function(le){X($,le,b[le])})}return $}function Q($,A){var b=Object.keys($);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols($);A&&(te=te.filter(function(le){return Object.getOwnPropertyDescriptor($,le).enumerable})),b.push.apply(b,te)}return b}function ye($,A){return A=A!=null?A:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):Q(Object(A)).forEach(function(b){Object.defineProperty($,b,Object.getOwnPropertyDescriptor(A,b))}),$}var se=function($,A){return H.createElement(w.default,ye(re({},$),{ref:A,icon:W.default}))},ne=H.forwardRef(se)},29539:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ne}});var H=Y(k(67294)),W=j(k(83647)),w=j(k(26545));function X($,A,b){return A in $?Object.defineProperty($,A,{value:b,enumerable:!0,configurable:!0,writable:!0}):$[A]=b,$}function j($){return $&&$.__esModule?$:{default:$}}function ee($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(ee=function(te){return te?b:A})($)}function Y($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=ee(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}function re($){for(var A=1;A<arguments.length;A++){var b=arguments[A]!=null?arguments[A]:{},te=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(b).filter(function(le){return Object.getOwnPropertyDescriptor(b,le).enumerable}))),te.forEach(function(le){X($,le,b[le])})}return $}function Q($,A){var b=Object.keys($);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols($);A&&(te=te.filter(function(le){return Object.getOwnPropertyDescriptor($,le).enumerable})),b.push.apply(b,te)}return b}function ye($,A){return A=A!=null?A:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):Q(Object(A)).forEach(function(b){Object.defineProperty($,b,Object.getOwnPropertyDescriptor(A,b))}),$}var se=function($,A){return H.createElement(w.default,ye(re({},$),{ref:A,icon:W.default}))},ne=H.forwardRef(se)},54825:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ne}});var H=Y(k(67294)),W=j(k(57583)),w=j(k(26545));function X($,A,b){return A in $?Object.defineProperty($,A,{value:b,enumerable:!0,configurable:!0,writable:!0}):$[A]=b,$}function j($){return $&&$.__esModule?$:{default:$}}function ee($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(ee=function(te){return te?b:A})($)}function Y($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=ee(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}function re($){for(var A=1;A<arguments.length;A++){var b=arguments[A]!=null?arguments[A]:{},te=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(b).filter(function(le){return Object.getOwnPropertyDescriptor(b,le).enumerable}))),te.forEach(function(le){X($,le,b[le])})}return $}function Q($,A){var b=Object.keys($);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols($);A&&(te=te.filter(function(le){return Object.getOwnPropertyDescriptor($,le).enumerable})),b.push.apply(b,te)}return b}function ye($,A){return A=A!=null?A:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):Q(Object(A)).forEach(function(b){Object.defineProperty($,b,Object.getOwnPropertyDescriptor(A,b))}),$}var se=function($,A){return H.createElement(w.default,ye(re({},$),{ref:A,icon:W.default}))},ne=H.forwardRef(se)},43552:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ne}});var H=Y(k(67294)),W=j(k(29260)),w=j(k(26545));function X($,A,b){return A in $?Object.defineProperty($,A,{value:b,enumerable:!0,configurable:!0,writable:!0}):$[A]=b,$}function j($){return $&&$.__esModule?$:{default:$}}function ee($){if(typeof WeakMap!="function")return null;var A=new WeakMap,b=new WeakMap;return(ee=function(te){return te?b:A})($)}function Y($,A){if(!A&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var b=ee(A);if(b&&b.has($))return b.get($);var te={__proto__:null},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in $)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call($,Ae)){var De=le?Object.getOwnPropertyDescriptor($,Ae):null;De&&(De.get||De.set)?Object.defineProperty(te,Ae,De):te[Ae]=$[Ae]}return te.default=$,b&&b.set($,te),te}function re($){for(var A=1;A<arguments.length;A++){var b=arguments[A]!=null?arguments[A]:{},te=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(b).filter(function(le){return Object.getOwnPropertyDescriptor(b,le).enumerable}))),te.forEach(function(le){X($,le,b[le])})}return $}function Q($,A){var b=Object.keys($);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols($);A&&(te=te.filter(function(le){return Object.getOwnPropertyDescriptor($,le).enumerable})),b.push.apply(b,te)}return b}function ye($,A){return A=A!=null?A:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):Q(Object(A)).forEach(function(b){Object.defineProperty($,b,Object.getOwnPropertyDescriptor(A,b))}),$}var se=function($,A){return H.createElement(w.default,ye(re({},$),{ref:A,icon:W.default}))},ne=H.forwardRef(se)},49458:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function H(_e,we){for(var Re in we)Object.defineProperty(_e,Re,{enumerable:!0,get:we[Re]})}H(N,{generate:function(){return le},getSecondaryColor:function(){return Ae},iconStyles:function(){return Te},isIconDefinition:function(){return b},normalizeAttrs:function(){return te},normalizeTwoToneColors:function(){return De},svgBaseProps:function(){return Ne},useInsertStyles:function(){return We},warning:function(){return A}});var W=k(78589),w=k(93399),X=k(63298),j=Q(k(45520)),ee=se(k(67294)),Y=Q(k(13357));function re(_e,we,Re){return we in _e?Object.defineProperty(_e,we,{value:Re,enumerable:!0,configurable:!0,writable:!0}):_e[we]=Re,_e}function Q(_e){return _e&&_e.__esModule?_e:{default:_e}}function ye(_e){if(typeof WeakMap!="function")return null;var we=new WeakMap,Re=new WeakMap;return(ye=function(ze){return ze?Re:we})(_e)}function se(_e,we){if(!we&&_e&&_e.__esModule)return _e;if(_e===null||typeof _e!="object"&&typeof _e!="function")return{default:_e};var Re=ye(we);if(Re&&Re.has(_e))return Re.get(_e);var ze={__proto__:null},Ge=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var yt in _e)if(yt!=="default"&&Object.prototype.hasOwnProperty.call(_e,yt)){var ke=Ge?Object.getOwnPropertyDescriptor(_e,yt):null;ke&&(ke.get||ke.set)?Object.defineProperty(ze,yt,ke):ze[yt]=_e[yt]}return ze.default=_e,Re&&Re.set(_e,ze),ze}function ne(_e){for(var we=1;we<arguments.length;we++){var Re=arguments[we]!=null?arguments[we]:{},ze=Object.keys(Re);typeof Object.getOwnPropertySymbols=="function"&&(ze=ze.concat(Object.getOwnPropertySymbols(Re).filter(function(Ge){return Object.getOwnPropertyDescriptor(Re,Ge).enumerable}))),ze.forEach(function(Ge){re(_e,Ge,Re[Ge])})}return _e}function $(_e){return _e.replace(/-(.)/g,function(we,Re){return Re.toUpperCase()})}function A(_e,we){(0,j.default)(_e,"[@ant-design/icons] ".concat(we))}function b(_e){return typeof _e=="object"&&typeof _e.name=="string"&&typeof _e.theme=="string"&&(typeof _e.icon=="object"||typeof _e.icon=="function")}function te(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(_e).reduce(function(we,Re){var ze=_e[Re];switch(Re){case"class":we.className=ze,delete we.class;break;default:delete we[Re],we[$(Re)]=ze}return we},{})}function le(_e,we,Re){return Re?ee.default.createElement(_e.tag,ne({key:we},te(_e.attrs),Re),(_e.children||[]).map(function(ze,Ge){return le(ze,"".concat(we,"-").concat(_e.tag,"-").concat(Ge))})):ee.default.createElement(_e.tag,ne({key:we},te(_e.attrs)),(_e.children||[]).map(function(ze,Ge){return le(ze,"".concat(we,"-").concat(_e.tag,"-").concat(Ge))}))}function Ae(_e){return(0,W.generate)(_e)[0]}function De(_e){return _e?Array.isArray(_e)?_e:[_e]:[]}var Ne={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Te=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,We=function(_e){var we=(0,ee.useContext)(Y.default),Re=we.csp,ze=we.prefixCls,Ge=Te;ze&&(Ge=Ge.replace(/anticon/g,ze)),(0,ee.useEffect)(function(){var yt=_e.current,ke=(0,X.getShadowRoot)(yt);(0,w.updateCSS)(Ge,"@ant-design-icons",{prepend:!0,csp:Re,attachTo:ke})},[])}},98129:function(vt,N,k){"use strict";var H=k(60690);vt.exports=function(X){X=X||{};var j=X.reporter,ee=H.getOption(X,"async",!0),Y=H.getOption(X,"auto",!0);Y&&!ee&&(j&&j.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),ee=!0);var re=W(),Q,ye=!1;function se(Ae,De){!ye&&Y&&ee&&re.size()===0&&A(),re.add(Ae,De)}function ne(){for(ye=!0;re.size();){var Ae=re;re=W(),Ae.process()}ye=!1}function $(Ae){ye||(Ae===void 0&&(Ae=ee),Q&&(te(Q),Q=null),Ae?A():ne())}function A(){Q=le(ne)}function b(){re={},batchSize=0,topLevel=0,bottomLevel=0}function te(Ae){var De=clearTimeout;return De(Ae)}function le(Ae){var De=function(Ne){return setTimeout(Ne,0)};return De(Ae)}return{add:se,force:$}};function W(){var w={},X=0,j=0,ee=0;function Y(ye,se){se||(se=ye,ye=0),ye>j?j=ye:ye<ee&&(ee=ye),w[ye]||(w[ye]=[]),w[ye].push(se),X++}function re(){for(var ye=ee;ye<=j;ye++)for(var se=w[ye],ne=0;ne<se.length;ne++){var $=se[ne];$()}}function Q(){return X}return{add:Y,process:re,size:Q}}},60690:function(vt){"use strict";var N=vt.exports={};N.getOption=k;function k(H,W,w){var X=H[W];return X==null&&w!==void 0?w:X}},56645:function(vt,N){(function(k,H){H(N)})(this,function(k){"use strict";function H(Ge,yt){return W(Ge)||w(Ge,yt)||X()}function W(Ge){if(Array.isArray(Ge))return Ge}function w(Ge,yt){var ke=[],tt=!0,ae=!1,Ke=void 0;try{for(var he=Ge[Symbol.iterator](),Pe;!(tt=(Pe=he.next()).done)&&(ke.push(Pe.value),!(yt&&ke.length===yt));tt=!0);}catch(lt){ae=!0,Ke=lt}finally{try{!tt&&he.return!=null&&he.return()}finally{if(ae)throw Ke}}return ke}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function j(Ge,yt,ke,tt){Ge=Ge.filter(function(rt,Je){var dt=yt(rt,Je),Bt=ke(rt,Je);return dt!=null&&isFinite(dt)&&Bt!=null&&isFinite(Bt)}),tt&&Ge.sort(function(rt,Je){return yt(rt)-yt(Je)});for(var ae=Ge.length,Ke=new Float64Array(ae),he=new Float64Array(ae),Pe=0,lt=0,He,Ue,Qe,Se=0;Se<ae;)Qe=Ge[Se],Ke[Se]=He=+yt(Qe,Se,Ge),he[Se]=Ue=+ke(Qe,Se,Ge),++Se,Pe+=(He-Pe)/Se,lt+=(Ue-lt)/Se;for(var xe=0;xe<ae;++xe)Ke[xe]-=Pe,he[xe]-=lt;return[Ke,he,Pe,lt]}function ee(Ge,yt,ke,tt){for(var ae=0,Ke=0,he=Ge.length;Ke<he;Ke++){var Pe=Ge[Ke],lt=+yt(Pe,Ke,Ge),He=+ke(Pe,Ke,Ge);lt!=null&&isFinite(lt)&&He!=null&&isFinite(He)&&tt(lt,He,ae++)}}function Y(Ge,yt,ke,tt,ae){var Ke=0,he=0;return ee(Ge,yt,ke,function(Pe,lt){var He=lt-ae(Pe),Ue=lt-tt;Ke+=He*He,he+=Ue*Ue}),1-Ke/he}function re(Ge){return Math.atan2(Ge[1][1]-Ge[0][1],Ge[1][0]-Ge[0][0])*180/Math.PI}function Q(Ge){return[(Ge[0][0]+Ge[1][0])/2,(Ge[0][1]+Ge[1][1])/2]}function ye(Ge,yt,ke){for(var tt=Math.log(yt-Ge)*Math.LOG10E+1|0,ae=1*Math.pow(10,-tt/2-1),Ke=1e4,he=[lt(Ge),lt(yt)],Pe=0;He(he)&&Pe<Ke;);return he;function lt(Ue){return[Ue,ke(Ue)]}function He(Ue){Pe++;for(var Qe=Ue.length,Se=!1,xe=0;xe<Qe-1;xe++){var rt=Ue[xe],Je=Ue[xe+1],dt=Q([rt,Je]),Bt=lt(dt[0]),Ye=re([rt,dt]),Xe=re([rt,Bt]),Le=Math.abs(Ye-Xe);Le>ae&&(Ue.splice(xe+1,0,Bt),Se=!0)}return Se}}function se(Ge,yt,ke,tt){var ae=tt-Ge*Ge,Ke=Math.abs(ae)<1e-24?0:(ke-Ge*yt)/ae,he=yt-Ke*Ge;return[he,Ke]}function ne(){var Ge=function(Ke){return Ke[0]},yt=function(Ke){return Ke[1]},ke;function tt(ae){var Ke=0,he=0,Pe=0,lt=0,He=0,Ue=0,Qe=ke?+ke[0]:1/0,Se=ke?+ke[1]:-1/0;ee(ae,Ge,yt,function(Xe,Le){var je=Math.log(Le),at=Xe*Le;++Ke,he+=(Le-he)/Ke,lt+=(at-lt)/Ke,Ue+=(Xe*at-Ue)/Ke,Pe+=(Le*je-Pe)/Ke,He+=(at*je-He)/Ke,ke||(Xe<Qe&&(Qe=Xe),Xe>Se&&(Se=Xe))});var xe=se(lt/he,Pe/he,He/he,Ue/he),rt=H(xe,2),Je=rt[0],dt=rt[1];Je=Math.exp(Je);var Bt=function(Le){return Je*Math.exp(dt*Le)},Ye=ye(Qe,Se,Bt);return Ye.a=Je,Ye.b=dt,Ye.predict=Bt,Ye.rSquared=Y(ae,Ge,yt,he,Bt),Ye}return tt.domain=function(ae){return arguments.length?(ke=ae,tt):ke},tt.x=function(ae){return arguments.length?(Ge=ae,tt):Ge},tt.y=function(ae){return arguments.length?(yt=ae,tt):yt},tt}function $(){var Ge=function(Ke){return Ke[0]},yt=function(Ke){return Ke[1]},ke;function tt(ae){var Ke=0,he=0,Pe=0,lt=0,He=0,Ue=ke?+ke[0]:1/0,Qe=ke?+ke[1]:-1/0;ee(ae,Ge,yt,function(Ye,Xe){++Ke,he+=(Ye-he)/Ke,Pe+=(Xe-Pe)/Ke,lt+=(Ye*Xe-lt)/Ke,He+=(Ye*Ye-He)/Ke,ke||(Ye<Ue&&(Ue=Ye),Ye>Qe&&(Qe=Ye))});var Se=se(he,Pe,lt,He),xe=H(Se,2),rt=xe[0],Je=xe[1],dt=function(Xe){return Je*Xe+rt},Bt=[[Ue,dt(Ue)],[Qe,dt(Qe)]];return Bt.a=Je,Bt.b=rt,Bt.predict=dt,Bt.rSquared=Y(ae,Ge,yt,Pe,dt),Bt}return tt.domain=function(ae){return arguments.length?(ke=ae,tt):ke},tt.x=function(ae){return arguments.length?(Ge=ae,tt):Ge},tt.y=function(ae){return arguments.length?(yt=ae,tt):yt},tt}function A(Ge){Ge.sort(function(ke,tt){return ke-tt});var yt=Ge.length/2;return yt%1===0?(Ge[yt-1]+Ge[yt])/2:Ge[Math.floor(yt)]}var b=2,te=1e-12;function le(){var Ge=function(Ke){return Ke[0]},yt=function(Ke){return Ke[1]},ke=.3;function tt(ae){for(var Ke=j(ae,Ge,yt,!0),he=H(Ke,4),Pe=he[0],lt=he[1],He=he[2],Ue=he[3],Qe=Pe.length,Se=Math.max(2,~~(ke*Qe)),xe=new Float64Array(Qe),rt=new Float64Array(Qe),Je=new Float64Array(Qe).fill(1),dt=-1;++dt<=b;){for(var Bt=[0,Se-1],Ye=0;Ye<Qe;++Ye){for(var Xe=Pe[Ye],Le=Bt[0],je=Bt[1],at=Xe-Pe[Le]>Pe[je]-Xe?Le:je,Me=0,Ze=0,_t=0,Mt=0,ir=0,Tr=1/Math.abs(Pe[at]-Xe||1),et=Le;et<=je;++et){var en=Pe[et],Xr=lt[et],Sr=Ae(Math.abs(Xe-en)*Tr)*Je[et],pt=en*Sr;Me+=Sr,Ze+=pt,_t+=Xr*Sr,Mt+=Xr*pt,ir+=en*pt}var Ut=se(Ze/Me,_t/Me,Mt/Me,ir/Me),Gt=H(Ut,2),Tt=Gt[0],qt=Gt[1];xe[Ye]=Tt+qt*Xe,rt[Ye]=Math.abs(lt[Ye]-xe[Ye]),De(Pe,Ye+1,Bt)}if(dt===b)break;var fr=A(rt);if(Math.abs(fr)<te)break;for(var hr=0,Er,Ir;hr<Qe;++hr)Er=rt[hr]/(6*fr),Je[hr]=Er>=1?te:(Ir=1-Er*Er)*Ir}return Ne(Pe,xe,He,Ue)}return tt.bandwidth=function(ae){return arguments.length?(ke=ae,tt):ke},tt.x=function(ae){return arguments.length?(Ge=ae,tt):Ge},tt.y=function(ae){return arguments.length?(yt=ae,tt):yt},tt}function Ae(Ge){return(Ge=1-Ge*Ge*Ge)*Ge*Ge}function De(Ge,yt,ke){var tt=Ge[yt],ae=ke[0],Ke=ke[1]+1;if(!(Ke>=Ge.length))for(;yt>ae&&Ge[Ke]-tt<=tt-Ge[ae];)ke[0]=++ae,ke[1]=Ke,++Ke}function Ne(Ge,yt,ke,tt){for(var ae=Ge.length,Ke=[],he=0,Pe=0,lt=[],He;he<ae;++he)He=Ge[he]+ke,lt[0]===He?lt[1]+=(yt[he]-lt[1])/++Pe:(Pe=0,lt[1]+=tt,lt=[He,yt[he]],Ke.push(lt));return lt[1]+=tt,Ke}function Te(){var Ge=function(he){return he[0]},yt=function(he){return he[1]},ke=Math.E,tt;function ae(Ke){var he=0,Pe=0,lt=0,He=0,Ue=0,Qe=tt?+tt[0]:1/0,Se=tt?+tt[1]:-1/0,xe=Math.log(ke);ee(Ke,Ge,yt,function(Le,je){var at=Math.log(Le)/xe;++he,Pe+=(at-Pe)/he,lt+=(je-lt)/he,He+=(at*je-He)/he,Ue+=(at*at-Ue)/he,tt||(Le<Qe&&(Qe=Le),Le>Se&&(Se=Le))});var rt=se(Pe,lt,He,Ue),Je=H(rt,2),dt=Je[0],Bt=Je[1],Ye=function(je){return Bt*Math.log(je)/xe+dt},Xe=ye(Qe,Se,Ye);return Xe.a=Bt,Xe.b=dt,Xe.predict=Ye,Xe.rSquared=Y(Ke,Ge,yt,lt,Ye),Xe}return ae.domain=function(Ke){return arguments.length?(tt=Ke,ae):tt},ae.x=function(Ke){return arguments.length?(Ge=Ke,ae):Ge},ae.y=function(Ke){return arguments.length?(yt=Ke,ae):yt},ae.base=function(Ke){return arguments.length?(ke=Ke,ae):ke},ae}function We(){var Ge=function(Ke){return Ke[0]},yt=function(Ke){return Ke[1]},ke;function tt(ae){var Ke=j(ae,Ge,yt),he=H(Ke,4),Pe=he[0],lt=he[1],He=he[2],Ue=he[3],Qe=Pe.length,Se=0,xe=0,rt=0,Je=0,dt=0,Bt,Ye,Xe,Le;for(Bt=0;Bt<Qe;)Ye=Pe[Bt],Xe=lt[Bt++],Le=Ye*Ye,Se+=(Le-Se)/Bt,xe+=(Le*Ye-xe)/Bt,rt+=(Le*Le-rt)/Bt,Je+=(Ye*Xe-Je)/Bt,dt+=(Le*Xe-dt)/Bt;var je=0,at=0,Me=ke?+ke[0]:1/0,Ze=ke?+ke[1]:-1/0;ee(ae,Ge,yt,function(Sr,pt){at++,je+=(pt-je)/at,ke||(Sr<Me&&(Me=Sr),Sr>Ze&&(Ze=Sr))});var _t=rt-Se*Se,Mt=Se*_t-xe*xe,ir=(dt*Se-Je*xe)/Mt,Tr=(Je*_t-dt*xe)/Mt,et=-ir*Se,en=function(pt){return pt=pt-He,ir*pt*pt+Tr*pt+et+Ue},Xr=ye(Me,Ze,en);return Xr.a=ir,Xr.b=Tr-2*ir*He,Xr.c=et-Tr*He+ir*He*He+Ue,Xr.predict=en,Xr.rSquared=Y(ae,Ge,yt,je,en),Xr}return tt.domain=function(ae){return arguments.length?(ke=ae,tt):ke},tt.x=function(ae){return arguments.length?(Ge=ae,tt):Ge},tt.y=function(ae){return arguments.length?(yt=ae,tt):yt},tt}function _e(){var Ge=function(he){return he[0]},yt=function(he){return he[1]},ke=3,tt;function ae(Ke){if(ke===1){var he=$().x(Ge).y(yt).domain(tt)(Ke);return he.coefficients=[he.b,he.a],delete he.a,delete he.b,he}if(ke===2){var Pe=We().x(Ge).y(yt).domain(tt)(Ke);return Pe.coefficients=[Pe.c,Pe.b,Pe.a],delete Pe.a,delete Pe.b,delete Pe.c,Pe}var lt=j(Ke,Ge,yt),He=H(lt,4),Ue=He[0],Qe=He[1],Se=He[2],xe=He[3],rt=Ue.length,Je=[],dt=[],Bt=ke+1,Ye=0,Xe=0,Le=tt?+tt[0]:1/0,je=tt?+tt[1]:-1/0;ee(Ke,Ge,yt,function(en,Xr){++Xe,Ye+=(Xr-Ye)/Xe,tt||(en<Le&&(Le=en),en>je&&(je=en))});var at,Me,Ze,_t,Mt;for(at=0;at<Bt;++at){for(Ze=0,_t=0;Ze<rt;++Ze)_t+=Math.pow(Ue[Ze],at)*Qe[Ze];for(Je.push(_t),Mt=new Float64Array(Bt),Me=0;Me<Bt;++Me){for(Ze=0,_t=0;Ze<rt;++Ze)_t+=Math.pow(Ue[Ze],at+Me);Mt[Me]=_t}dt.push(Mt)}dt.push(Je);var ir=Re(dt),Tr=function(Xr){Xr-=Se;var Sr=xe+ir[0]+ir[1]*Xr+ir[2]*Xr*Xr;for(at=3;at<Bt;++at)Sr+=ir[at]*Math.pow(Xr,at);return Sr},et=ye(Le,je,Tr);return et.coefficients=we(Bt,ir,-Se,xe),et.predict=Tr,et.rSquared=Y(Ke,Ge,yt,Ye,Tr),et}return ae.domain=function(Ke){return arguments.length?(tt=Ke,ae):tt},ae.x=function(Ke){return arguments.length?(Ge=Ke,ae):Ge},ae.y=function(Ke){return arguments.length?(yt=Ke,ae):yt},ae.order=function(Ke){return arguments.length?(ke=Ke,ae):ke},ae}function we(Ge,yt,ke,tt){var ae=Array(Ge),Ke,he,Pe,lt;for(Ke=0;Ke<Ge;++Ke)ae[Ke]=0;for(Ke=Ge-1;Ke>=0;--Ke)for(Pe=yt[Ke],lt=1,ae[Ke]+=Pe,he=1;he<=Ke;++he)lt*=(Ke+1-he)/he,ae[Ke-he]+=Pe*Math.pow(ke,he)*lt;return ae[0]+=tt,ae}function Re(Ge){var yt=Ge.length-1,ke=[],tt,ae,Ke,he,Pe;for(tt=0;tt<yt;++tt){for(he=tt,ae=tt+1;ae<yt;++ae)Math.abs(Ge[tt][ae])>Math.abs(Ge[tt][he])&&(he=ae);for(Ke=tt;Ke<yt+1;++Ke)Pe=Ge[Ke][tt],Ge[Ke][tt]=Ge[Ke][he],Ge[Ke][he]=Pe;for(ae=tt+1;ae<yt;++ae)for(Ke=yt;Ke>=tt;Ke--)Ge[Ke][ae]-=Ge[Ke][tt]*Ge[tt][ae]/Ge[tt][tt]}for(ae=yt-1;ae>=0;--ae){for(Pe=0,Ke=ae+1;Ke<yt;++Ke)Pe+=Ge[Ke][ae]*ke[Ke];ke[ae]=(Ge[yt][ae]-Pe)/Ge[ae][ae]}return ke}function ze(){var Ge=function(Ke){return Ke[0]},yt=function(Ke){return Ke[1]},ke;function tt(ae){var Ke=0,he=0,Pe=0,lt=0,He=0,Ue=0,Qe=ke?+ke[0]:1/0,Se=ke?+ke[1]:-1/0;ee(ae,Ge,yt,function(Xe,Le){var je=Math.log(Xe),at=Math.log(Le);++Ke,he+=(je-he)/Ke,Pe+=(at-Pe)/Ke,lt+=(je*at-lt)/Ke,He+=(je*je-He)/Ke,Ue+=(Le-Ue)/Ke,ke||(Xe<Qe&&(Qe=Xe),Xe>Se&&(Se=Xe))});var xe=se(he,Pe,lt,He),rt=H(xe,2),Je=rt[0],dt=rt[1];Je=Math.exp(Je);var Bt=function(Le){return Je*Math.pow(Le,dt)},Ye=ye(Qe,Se,Bt);return Ye.a=Je,Ye.b=dt,Ye.predict=Bt,Ye.rSquared=Y(ae,Ge,yt,Ue,Bt),Ye}return tt.domain=function(ae){return arguments.length?(ke=ae,tt):ke},tt.x=function(ae){return arguments.length?(Ge=ae,tt):Ge},tt.y=function(ae){return arguments.length?(yt=ae,tt):yt},tt}k.regressionExp=ne,k.regressionLinear=$,k.regressionLoess=le,k.regressionLog=Te,k.regressionPoly=_e,k.regressionPow=ze,k.regressionQuad=We,Object.defineProperty(k,"__esModule",{value:!0})})},43631:function(vt,N,k){"use strict";k.d(N,{qY:function(){return $}});var H=k(34155),W=function(Ne,Te,We){if(We||arguments.length===2)for(var _e=0,we=Te.length,Re;_e<we;_e++)(Re||!(_e in Te))&&(Re||(Re=Array.prototype.slice.call(Te,0,_e)),Re[_e]=Te[_e]);return Ne.concat(Re||Array.prototype.slice.call(Te))},w=function(){function Ne(Te,We,_e){this.name=Te,this.version=We,this.os=_e,this.type="browser"}return Ne}(),X=function(){function Ne(Te){this.version=Te,this.type="node",this.name="node",this.os=H.platform}return Ne}(),j=function(){function Ne(Te,We,_e,we){this.name=Te,this.version=We,this.os=_e,this.bot=we,this.type="bot-device"}return Ne}(),ee=function(){function Ne(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return Ne}(),Y=function(){function Ne(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return Ne}(),re=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Q=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ye=3,se=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",re]],ne=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $(Ne){return Ne?te(Ne):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Y:typeof navigator!="undefined"?te(navigator.userAgent):Ae()}function A(Ne){return Ne!==""&&se.reduce(function(Te,We){var _e=We[0],we=We[1];if(Te)return Te;var Re=we.exec(Ne);return!!Re&&[_e,Re]},!1)}function b(Ne){var Te=A(Ne);return Te?Te[0]:null}function te(Ne){var Te=A(Ne);if(!Te)return null;var We=Te[0],_e=Te[1];if(We==="searchbot")return new ee;var we=_e[1]&&_e[1].split(".").join("_").split("_").slice(0,3);we?we.length<ye&&(we=W(W([],we,!0),De(ye-we.length),!0)):we=[];var Re=we.join("."),ze=le(Ne),Ge=Q.exec(Ne);return Ge&&Ge[1]?new j(We,Re,ze,Ge[1]):new w(We,Re,ze)}function le(Ne){for(var Te=0,We=ne.length;Te<We;Te++){var _e=ne[Te],we=_e[0],Re=_e[1],ze=Re.exec(Ne);if(ze)return we}return null}function Ae(){var Ne=typeof H!="undefined"&&H.version;return Ne?new X(H.version.slice(1)):null}function De(Ne){for(var Te=[],We=0;We<Ne;We++)Te.push("0");return Te}},9187:function(vt){"use strict";vt.exports=N,vt.exports.default=N;function N(ae,Ke,he){he=he||2;var Pe=Ke&&Ke.length,lt=Pe?Ke[0]*he:ae.length,He=k(ae,0,lt,he,!0),Ue=[];if(!He||He.next===He.prev)return Ue;var Qe,Se,xe,rt,Je,dt,Bt;if(Pe&&(He=Y(ae,Ke,He,he)),ae.length>80*he){Qe=xe=ae[0],Se=rt=ae[1];for(var Ye=he;Ye<lt;Ye+=he)Je=ae[Ye],dt=ae[Ye+1],Je<Qe&&(Qe=Je),dt<Se&&(Se=dt),Je>xe&&(xe=Je),dt>rt&&(rt=dt);Bt=Math.max(xe-Qe,rt-Se),Bt=Bt!==0?32767/Bt:0}return W(He,Ue,he,Qe,Se,Bt,0),Ue}function k(ae,Ke,he,Pe,lt){var He,Ue;if(lt===tt(ae,Ke,he,Pe)>0)for(He=Ke;He<he;He+=Pe)Ue=Ge(He,ae[He],ae[He+1],Ue);else for(He=he-Pe;He>=Ke;He-=Pe)Ue=Ge(He,ae[He],ae[He+1],Ue);return Ue&&De(Ue,Ue.next)&&(yt(Ue),Ue=Ue.next),Ue}function H(ae,Ke){if(!ae)return ae;Ke||(Ke=ae);var he=ae,Pe;do if(Pe=!1,!he.steiner&&(De(he,he.next)||Ae(he.prev,he,he.next)===0)){if(yt(he),he=Ke=he.prev,he===he.next)break;Pe=!0}else he=he.next;while(Pe||he!==Ke);return Ke}function W(ae,Ke,he,Pe,lt,He,Ue){if(ae){!Ue&&He&&ne(ae,Pe,lt,He);for(var Qe=ae,Se,xe;ae.prev!==ae.next;){if(Se=ae.prev,xe=ae.next,He?X(ae,Pe,lt,He):w(ae)){Ke.push(Se.i/he|0),Ke.push(ae.i/he|0),Ke.push(xe.i/he|0),yt(ae),ae=xe.next,Qe=xe.next;continue}if(ae=xe,ae===Qe){Ue?Ue===1?(ae=j(H(ae),Ke,he),W(ae,Ke,he,Pe,lt,He,2)):Ue===2&&ee(ae,Ke,he,Pe,lt,He):W(H(ae),Ke,he,Pe,lt,He,1);break}}}}function w(ae){var Ke=ae.prev,he=ae,Pe=ae.next;if(Ae(Ke,he,Pe)>=0)return!1;for(var lt=Ke.x,He=he.x,Ue=Pe.x,Qe=Ke.y,Se=he.y,xe=Pe.y,rt=lt<He?lt<Ue?lt:Ue:He<Ue?He:Ue,Je=Qe<Se?Qe<xe?Qe:xe:Se<xe?Se:xe,dt=lt>He?lt>Ue?lt:Ue:He>Ue?He:Ue,Bt=Qe>Se?Qe>xe?Qe:xe:Se>xe?Se:xe,Ye=Pe.next;Ye!==Ke;){if(Ye.x>=rt&&Ye.x<=dt&&Ye.y>=Je&&Ye.y<=Bt&&te(lt,Qe,He,Se,Ue,xe,Ye.x,Ye.y)&&Ae(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.next}return!0}function X(ae,Ke,he,Pe){var lt=ae.prev,He=ae,Ue=ae.next;if(Ae(lt,He,Ue)>=0)return!1;for(var Qe=lt.x,Se=He.x,xe=Ue.x,rt=lt.y,Je=He.y,dt=Ue.y,Bt=Qe<Se?Qe<xe?Qe:xe:Se<xe?Se:xe,Ye=rt<Je?rt<dt?rt:dt:Je<dt?Je:dt,Xe=Qe>Se?Qe>xe?Qe:xe:Se>xe?Se:xe,Le=rt>Je?rt>dt?rt:dt:Je>dt?Je:dt,je=A(Bt,Ye,Ke,he,Pe),at=A(Xe,Le,Ke,he,Pe),Me=ae.prevZ,Ze=ae.nextZ;Me&&Me.z>=je&&Ze&&Ze.z<=at;){if(Me.x>=Bt&&Me.x<=Xe&&Me.y>=Ye&&Me.y<=Le&&Me!==lt&&Me!==Ue&&te(Qe,rt,Se,Je,xe,dt,Me.x,Me.y)&&Ae(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,Ze.x>=Bt&&Ze.x<=Xe&&Ze.y>=Ye&&Ze.y<=Le&&Ze!==lt&&Ze!==Ue&&te(Qe,rt,Se,Je,xe,dt,Ze.x,Ze.y)&&Ae(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Me&&Me.z>=je;){if(Me.x>=Bt&&Me.x<=Xe&&Me.y>=Ye&&Me.y<=Le&&Me!==lt&&Me!==Ue&&te(Qe,rt,Se,Je,xe,dt,Me.x,Me.y)&&Ae(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;Ze&&Ze.z<=at;){if(Ze.x>=Bt&&Ze.x<=Xe&&Ze.y>=Ye&&Ze.y<=Le&&Ze!==lt&&Ze!==Ue&&te(Qe,rt,Se,Je,xe,dt,Ze.x,Ze.y)&&Ae(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function j(ae,Ke,he){var Pe=ae;do{var lt=Pe.prev,He=Pe.next.next;!De(lt,He)&&Ne(lt,Pe,Pe.next,He)&&we(lt,He)&&we(He,lt)&&(Ke.push(lt.i/he|0),Ke.push(Pe.i/he|0),Ke.push(He.i/he|0),yt(Pe),yt(Pe.next),Pe=ae=He),Pe=Pe.next}while(Pe!==ae);return H(Pe)}function ee(ae,Ke,he,Pe,lt,He){var Ue=ae;do{for(var Qe=Ue.next.next;Qe!==Ue.prev;){if(Ue.i!==Qe.i&&le(Ue,Qe)){var Se=ze(Ue,Qe);Ue=H(Ue,Ue.next),Se=H(Se,Se.next),W(Ue,Ke,he,Pe,lt,He,0),W(Se,Ke,he,Pe,lt,He,0);return}Qe=Qe.next}Ue=Ue.next}while(Ue!==ae)}function Y(ae,Ke,he,Pe){var lt=[],He,Ue,Qe,Se,xe;for(He=0,Ue=Ke.length;He<Ue;He++)Qe=Ke[He]*Pe,Se=He<Ue-1?Ke[He+1]*Pe:ae.length,xe=k(ae,Qe,Se,Pe,!1),xe===xe.next&&(xe.steiner=!0),lt.push(b(xe));for(lt.sort(re),He=0;He<lt.length;He++)he=Q(lt[He],he);return he}function re(ae,Ke){return ae.x-Ke.x}function Q(ae,Ke){var he=ye(ae,Ke);if(!he)return Ke;var Pe=ze(he,ae);return H(Pe,Pe.next),H(he,he.next)}function ye(ae,Ke){var he=Ke,Pe=ae.x,lt=ae.y,He=-1/0,Ue;do{if(lt<=he.y&&lt>=he.next.y&&he.next.y!==he.y){var Qe=he.x+(lt-he.y)*(he.next.x-he.x)/(he.next.y-he.y);if(Qe<=Pe&&Qe>He&&(He=Qe,Ue=he.x<he.next.x?he:he.next,Qe===Pe))return Ue}he=he.next}while(he!==Ke);if(!Ue)return null;var Se=Ue,xe=Ue.x,rt=Ue.y,Je=1/0,dt;he=Ue;do Pe>=he.x&&he.x>=xe&&Pe!==he.x&&te(lt<rt?Pe:He,lt,xe,rt,lt<rt?He:Pe,lt,he.x,he.y)&&(dt=Math.abs(lt-he.y)/(Pe-he.x),we(he,ae)&&(dt<Je||dt===Je&&(he.x>Ue.x||he.x===Ue.x&&se(Ue,he)))&&(Ue=he,Je=dt)),he=he.next;while(he!==Se);return Ue}function se(ae,Ke){return Ae(ae.prev,ae,Ke.prev)<0&&Ae(Ke.next,ae,ae.next)<0}function ne(ae,Ke,he,Pe){var lt=ae;do lt.z===0&&(lt.z=A(lt.x,lt.y,Ke,he,Pe)),lt.prevZ=lt.prev,lt.nextZ=lt.next,lt=lt.next;while(lt!==ae);lt.prevZ.nextZ=null,lt.prevZ=null,$(lt)}function $(ae){var Ke,he,Pe,lt,He,Ue,Qe,Se,xe=1;do{for(he=ae,ae=null,He=null,Ue=0;he;){for(Ue++,Pe=he,Qe=0,Ke=0;Ke<xe&&(Qe++,Pe=Pe.nextZ,!!Pe);Ke++);for(Se=xe;Qe>0||Se>0&&Pe;)Qe!==0&&(Se===0||!Pe||he.z<=Pe.z)?(lt=he,he=he.nextZ,Qe--):(lt=Pe,Pe=Pe.nextZ,Se--),He?He.nextZ=lt:ae=lt,lt.prevZ=He,He=lt;he=Pe}He.nextZ=null,xe*=2}while(Ue>1);return ae}function A(ae,Ke,he,Pe,lt){return ae=(ae-he)*lt|0,Ke=(Ke-Pe)*lt|0,ae=(ae|ae<<8)&16711935,ae=(ae|ae<<4)&252645135,ae=(ae|ae<<2)&858993459,ae=(ae|ae<<1)&1431655765,Ke=(Ke|Ke<<8)&16711935,Ke=(Ke|Ke<<4)&252645135,Ke=(Ke|Ke<<2)&858993459,Ke=(Ke|Ke<<1)&1431655765,ae|Ke<<1}function b(ae){var Ke=ae,he=ae;do(Ke.x<he.x||Ke.x===he.x&&Ke.y<he.y)&&(he=Ke),Ke=Ke.next;while(Ke!==ae);return he}function te(ae,Ke,he,Pe,lt,He,Ue,Qe){return(lt-Ue)*(Ke-Qe)>=(ae-Ue)*(He-Qe)&&(ae-Ue)*(Pe-Qe)>=(he-Ue)*(Ke-Qe)&&(he-Ue)*(He-Qe)>=(lt-Ue)*(Pe-Qe)}function le(ae,Ke){return ae.next.i!==Ke.i&&ae.prev.i!==Ke.i&&!_e(ae,Ke)&&(we(ae,Ke)&&we(Ke,ae)&&Re(ae,Ke)&&(Ae(ae.prev,ae,Ke.prev)||Ae(ae,Ke.prev,Ke))||De(ae,Ke)&&Ae(ae.prev,ae,ae.next)>0&&Ae(Ke.prev,Ke,Ke.next)>0)}function Ae(ae,Ke,he){return(Ke.y-ae.y)*(he.x-Ke.x)-(Ke.x-ae.x)*(he.y-Ke.y)}function De(ae,Ke){return ae.x===Ke.x&&ae.y===Ke.y}function Ne(ae,Ke,he,Pe){var lt=We(Ae(ae,Ke,he)),He=We(Ae(ae,Ke,Pe)),Ue=We(Ae(he,Pe,ae)),Qe=We(Ae(he,Pe,Ke));return!!(lt!==He&&Ue!==Qe||lt===0&&Te(ae,he,Ke)||He===0&&Te(ae,Pe,Ke)||Ue===0&&Te(he,ae,Pe)||Qe===0&&Te(he,Ke,Pe))}function Te(ae,Ke,he){return Ke.x<=Math.max(ae.x,he.x)&&Ke.x>=Math.min(ae.x,he.x)&&Ke.y<=Math.max(ae.y,he.y)&&Ke.y>=Math.min(ae.y,he.y)}function We(ae){return ae>0?1:ae<0?-1:0}function _e(ae,Ke){var he=ae;do{if(he.i!==ae.i&&he.next.i!==ae.i&&he.i!==Ke.i&&he.next.i!==Ke.i&&Ne(he,he.next,ae,Ke))return!0;he=he.next}while(he!==ae);return!1}function we(ae,Ke){return Ae(ae.prev,ae,ae.next)<0?Ae(ae,Ke,ae.next)>=0&&Ae(ae,ae.prev,Ke)>=0:Ae(ae,Ke,ae.prev)<0||Ae(ae,ae.next,Ke)<0}function Re(ae,Ke){var he=ae,Pe=!1,lt=(ae.x+Ke.x)/2,He=(ae.y+Ke.y)/2;do he.y>He!=he.next.y>He&&he.next.y!==he.y&&lt<(he.next.x-he.x)*(He-he.y)/(he.next.y-he.y)+he.x&&(Pe=!Pe),he=he.next;while(he!==ae);return Pe}function ze(ae,Ke){var he=new ke(ae.i,ae.x,ae.y),Pe=new ke(Ke.i,Ke.x,Ke.y),lt=ae.next,He=Ke.prev;return ae.next=Ke,Ke.prev=ae,he.next=lt,lt.prev=he,Pe.next=he,he.prev=Pe,He.next=Pe,Pe.prev=He,Pe}function Ge(ae,Ke,he,Pe){var lt=new ke(ae,Ke,he);return Pe?(lt.next=Pe.next,lt.prev=Pe,Pe.next.prev=lt,Pe.next=lt):(lt.prev=lt,lt.next=lt),lt}function yt(ae){ae.next.prev=ae.prev,ae.prev.next=ae.next,ae.prevZ&&(ae.prevZ.nextZ=ae.nextZ),ae.nextZ&&(ae.nextZ.prevZ=ae.prevZ)}function ke(ae,Ke,he){this.i=ae,this.x=Ke,this.y=he,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}N.deviation=function(ae,Ke,he,Pe){var lt=Ke&&Ke.length,He=lt?Ke[0]*he:ae.length,Ue=Math.abs(tt(ae,0,He,he));if(lt)for(var Qe=0,Se=Ke.length;Qe<Se;Qe++){var xe=Ke[Qe]*he,rt=Qe<Se-1?Ke[Qe+1]*he:ae.length;Ue-=Math.abs(tt(ae,xe,rt,he))}var Je=0;for(Qe=0;Qe<Pe.length;Qe+=3){var dt=Pe[Qe]*he,Bt=Pe[Qe+1]*he,Ye=Pe[Qe+2]*he;Je+=Math.abs((ae[dt]-ae[Ye])*(ae[Bt+1]-ae[dt+1])-(ae[dt]-ae[Bt])*(ae[Ye+1]-ae[dt+1]))}return Ue===0&&Je===0?0:Math.abs((Je-Ue)/Ue)};function tt(ae,Ke,he,Pe){for(var lt=0,He=Ke,Ue=he-Pe;He<he;He+=Pe)lt+=(ae[Ue]-ae[He])*(ae[He+1]+ae[Ue+1]),Ue=He;return lt}N.flatten=function(ae){for(var Ke=ae[0][0].length,he={vertices:[],holes:[],dimensions:Ke},Pe=0,lt=0;lt<ae.length;lt++){for(var He=0;He<ae[lt].length;He++)for(var Ue=0;Ue<Ke;Ue++)he.vertices.push(ae[lt][He][Ue]);lt>0&&(Pe+=ae[lt-1].length,he.holes.push(Pe))}return he}},2268:function(vt){"use strict";var N=vt.exports={};N.isIE=function(k){function H(){var w=navigator.userAgent.toLowerCase();return w.indexOf("msie")!==-1||w.indexOf("trident")!==-1||w.indexOf(" edge/")!==-1}if(!H())return!1;if(!k)return!0;var W=function(){var w,X=3,j=document.createElement("div"),ee=j.getElementsByTagName("i");do j.innerHTML="<!--[if gt IE "+ ++X+"]><i></i><![endif]-->";while(ee[0]);return X>4?X:w}();return k===W},N.isLegacyOpera=function(){return!!window.opera}},17900:function(vt){"use strict";var N=vt.exports={};N.forEach=function(k,H){for(var W=0;W<k.length;W++){var w=H(k[W]);if(w)return w}}},58229:function(vt,N,k){"use strict";var H=k(2268);vt.exports=function(W){W=W||{};var w=W.reporter,X=W.batchProcessor,j=W.stateHandler.getState;if(!w)throw new Error("Missing required dependency: reporter.");function ee(se,ne){function $(){ne(se)}if(H.isIE(8))j(se).object={proxy:$},se.attachEvent("onresize",$);else{var A=Q(se);if(!A)throw new Error("Element is not detectable by this strategy.");A.contentDocument.defaultView.addEventListener("resize",$)}}function Y(se){var ne=W.important?" !important; ":"; ";return(se.join(ne)+ne).trim()}function re(se,ne,$){$||($=ne,ne=se,se=null),se=se||{};var A=se.debug;function b(te,le){var Ae=Y(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),De=!1,Ne=window.getComputedStyle(te),Te=te.offsetWidth,We=te.offsetHeight;j(te).startSize={width:Te,height:We};function _e(){function we(){if(Ne.position==="static"){te.style.setProperty("position","relative",se.important?"important":"");var Ge=function(yt,ke,tt,ae){function Ke(Pe){return Pe.replace(/[^-\d\.]/g,"")}var he=tt[ae];he!=="auto"&&Ke(he)!=="0"&&(yt.warn("An element that is positioned static has style."+ae+"="+he+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ae+" will be set to 0. Element: ",ke),ke.style.setProperty(ae,"0",se.important?"important":""))};Ge(w,te,Ne,"top"),Ge(w,te,Ne,"right"),Ge(w,te,Ne,"bottom"),Ge(w,te,Ne,"left")}}function Re(){De||we();function Ge(ke,tt){if(!ke.contentDocument){var ae=j(ke);ae.checkForObjectDocumentTimeoutId&&window.clearTimeout(ae.checkForObjectDocumentTimeoutId),ae.checkForObjectDocumentTimeoutId=setTimeout(function(){ae.checkForObjectDocumentTimeoutId=0,Ge(ke,tt)},100);return}tt(ke.contentDocument)}var yt=this;Ge(yt,function(tt){le(te)})}Ne.position!==""&&(we(Ne),De=!0);var ze=document.createElement("object");ze.style.cssText=Ae,ze.tabIndex=-1,ze.type="text/html",ze.setAttribute("aria-hidden","true"),ze.onload=Re,H.isIE()||(ze.data="about:blank"),j(te)&&(te.appendChild(ze),j(te).object=ze,H.isIE()&&(ze.data="about:blank"))}X?X.add(_e):_e()}H.isIE(8)?$(ne):b(ne,$)}function Q(se){return j(se).object}function ye(se){if(j(se)){var ne=Q(se);ne&&(H.isIE(8)?se.detachEvent("onresize",ne.proxy):se.removeChild(ne),j(se).checkForObjectDocumentTimeoutId&&window.clearTimeout(j(se).checkForObjectDocumentTimeoutId),delete j(se).object)}}return{makeDetectable:re,addListener:ee,uninstall:ye}}},60787:function(vt,N,k){"use strict";var H=k(17900).forEach;vt.exports=function(W){W=W||{};var w=W.reporter,X=W.batchProcessor,j=W.stateHandler.getState,ee=W.stateHandler.hasState,Y=W.idHandler;if(!X)throw new Error("Missing required dependency: batchProcessor");if(!w)throw new Error("Missing required dependency: reporter.");var re=$(),Q="erd_scroll_detection_scrollbar_style",ye="erd_scroll_detection_container";function se(_e){A(_e,Q,ye)}se(window.document);function ne(_e){var we=W.important?" !important; ":"; ";return(_e.join(we)+we).trim()}function $(){var _e=500,we=500,Re=document.createElement("div");Re.style.cssText=ne(["position: absolute","width: "+_e*2+"px","height: "+we*2+"px","visibility: hidden","margin: 0","padding: 0"]);var ze=document.createElement("div");ze.style.cssText=ne(["position: absolute","width: "+_e+"px","height: "+we+"px","overflow: scroll","visibility: none","top: "+-_e*3+"px","left: "+-we*3+"px","visibility: hidden","margin: 0","padding: 0"]),ze.appendChild(Re),document.body.insertBefore(ze,document.body.firstChild);var Ge=_e-ze.clientWidth,yt=we-ze.clientHeight;return document.body.removeChild(ze),{width:Ge,height:yt}}function A(_e,we,Re){function ze(tt,ae){ae=ae||function(he){_e.head.appendChild(he)};var Ke=_e.createElement("style");return Ke.innerHTML=tt,Ke.id=we,ae(Ke),Ke}if(!_e.getElementById(we)){var Ge=Re+"_animation",yt=Re+"_animation_active",ke=`/* Created by the element-resize-detector library. */
`;ke+="."+Re+" > div::-webkit-scrollbar { "+ne(["display: none"])+` }

`,ke+="."+yt+" { "+ne(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Ge,"animation-name: "+Ge])+` }
`,ke+="@-webkit-keyframes "+Ge+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,ke+="@keyframes "+Ge+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",ze(ke)}}function b(_e){_e.className+=" "+ye+"_animation_active"}function te(_e,we,Re){if(_e.addEventListener)_e.addEventListener(we,Re);else if(_e.attachEvent)_e.attachEvent("on"+we,Re);else return w.error("[scroll] Don't know how to add event listeners.")}function le(_e,we,Re){if(_e.removeEventListener)_e.removeEventListener(we,Re);else if(_e.detachEvent)_e.detachEvent("on"+we,Re);else return w.error("[scroll] Don't know how to remove event listeners.")}function Ae(_e){return j(_e).container.childNodes[0].childNodes[0].childNodes[0]}function De(_e){return j(_e).container.childNodes[0].childNodes[0].childNodes[1]}function Ne(_e,we){var Re=j(_e).listeners;if(!Re.push)throw new Error("Cannot add listener to an element that is not detectable.");j(_e).listeners.push(we)}function Te(_e,we,Re){Re||(Re=we,we=_e,_e=null),_e=_e||{};function ze(){if(_e.debug){var je=Array.prototype.slice.call(arguments);if(je.unshift(Y.get(we),"Scroll: "),w.log.apply)w.log.apply(null,je);else for(var at=0;at<je.length;at++)w.log(je[at])}}function Ge(je){function at(Me){var Ze=Me.getRootNode&&Me.getRootNode().contains(Me);return Me===Me.ownerDocument.body||Me.ownerDocument.body.contains(Me)||Ze}return!at(je)||window.getComputedStyle(je)===null}function yt(je){var at=j(je).container.childNodes[0],Me=window.getComputedStyle(at);return!Me.width||Me.width.indexOf("px")===-1}function ke(){var je=window.getComputedStyle(we),at={};return at.position=je.position,at.width=we.offsetWidth,at.height=we.offsetHeight,at.top=je.top,at.right=je.right,at.bottom=je.bottom,at.left=je.left,at.widthCSS=je.width,at.heightCSS=je.height,at}function tt(){var je=ke();j(we).startSize={width:je.width,height:je.height},ze("Element start size",j(we).startSize)}function ae(){j(we).listeners=[]}function Ke(){if(ze("storeStyle invoked."),!j(we)){ze("Aborting because element has been uninstalled");return}var je=ke();j(we).style=je}function he(je,at,Me){j(je).lastWidth=at,j(je).lastHeight=Me}function Pe(je){return Ae(je).childNodes[0]}function lt(){return 2*re.width+1}function He(){return 2*re.height+1}function Ue(je){return je+10+lt()}function Qe(je){return je+10+He()}function Se(je){return je*2+lt()}function xe(je){return je*2+He()}function rt(je,at,Me){var Ze=Ae(je),_t=De(je),Mt=Ue(at),ir=Qe(Me),Tr=Se(at),et=xe(Me);Ze.scrollLeft=Mt,Ze.scrollTop=ir,_t.scrollLeft=Tr,_t.scrollTop=et}function Je(){var je=j(we).container;if(!je){je=document.createElement("div"),je.className=ye,je.style.cssText=ne(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),j(we).container=je,b(je),we.appendChild(je);var at=function(){j(we).onRendered&&j(we).onRendered()};te(je,"animationstart",at),j(we).onAnimationStart=at}return je}function dt(){function je(){var Er=j(we).style;if(Er.position==="static"){we.style.setProperty("position","relative",_e.important?"important":"");var Ir=function(ue,G,oe,Ie){function qe(rr){return rr.replace(/[^-\d\.]/g,"")}var At=oe[Ie];At!=="auto"&&qe(At)!=="0"&&(ue.warn("An element that is positioned static has style."+Ie+"="+At+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Ie+" will be set to 0. Element: ",G),G.style[Ie]=0)};Ir(w,we,Er,"top"),Ir(w,we,Er,"right"),Ir(w,we,Er,"bottom"),Ir(w,we,Er,"left")}}function at(Er,Ir,ue,G){return Er=Er?Er+"px":"0",Ir=Ir?Ir+"px":"0",ue=ue?ue+"px":"0",G=G?G+"px":"0",["left: "+Er,"top: "+Ir,"right: "+G,"bottom: "+ue]}if(ze("Injecting elements"),!j(we)){ze("Aborting because element has been uninstalled");return}je();var Me=j(we).container;Me||(Me=Je());var Ze=re.width,_t=re.height,Mt=ne(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ir=ne(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(at(-(1+Ze),-(1+_t),-_t,-Ze))),Tr=ne(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),et=ne(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),en=ne(["position: absolute","left: 0","top: 0"]),Xr=ne(["position: absolute","width: 200%","height: 200%"]),Sr=document.createElement("div"),pt=document.createElement("div"),Ut=document.createElement("div"),Gt=document.createElement("div"),Tt=document.createElement("div"),qt=document.createElement("div");Sr.dir="ltr",Sr.style.cssText=Mt,Sr.className=ye,pt.className=ye,pt.style.cssText=ir,Ut.style.cssText=Tr,Gt.style.cssText=en,Tt.style.cssText=et,qt.style.cssText=Xr,Ut.appendChild(Gt),Tt.appendChild(qt),pt.appendChild(Ut),pt.appendChild(Tt),Sr.appendChild(pt),Me.appendChild(Sr);function fr(){var Er=j(we);Er&&Er.onExpand?Er.onExpand():ze("Aborting expand scroll handler: element has been uninstalled")}function hr(){var Er=j(we);Er&&Er.onShrink?Er.onShrink():ze("Aborting shrink scroll handler: element has been uninstalled")}te(Ut,"scroll",fr),te(Tt,"scroll",hr),j(we).onExpandScroll=fr,j(we).onShrinkScroll=hr}function Bt(){function je(Tr,et,en){var Xr=Pe(Tr),Sr=Ue(et),pt=Qe(en);Xr.style.setProperty("width",Sr+"px",_e.important?"important":""),Xr.style.setProperty("height",pt+"px",_e.important?"important":"")}function at(Tr){var et=we.offsetWidth,en=we.offsetHeight,Xr=et!==j(we).lastWidth||en!==j(we).lastHeight;ze("Storing current size",et,en),he(we,et,en),X.add(0,function(){if(Xr){if(!j(we)){ze("Aborting because element has been uninstalled");return}if(!Me()){ze("Aborting because element container has not been initialized");return}if(_e.debug){var pt=we.offsetWidth,Ut=we.offsetHeight;(pt!==et||Ut!==en)&&w.warn(Y.get(we),"Scroll: Size changed before updating detector elements.")}je(we,et,en)}}),X.add(1,function(){if(!j(we)){ze("Aborting because element has been uninstalled");return}if(!Me()){ze("Aborting because element container has not been initialized");return}rt(we,et,en)}),Xr&&Tr&&X.add(2,function(){if(!j(we)){ze("Aborting because element has been uninstalled");return}if(!Me()){ze("Aborting because element container has not been initialized");return}Tr()})}function Me(){return!!j(we).container}function Ze(){function Tr(){return j(we).lastNotifiedWidth===void 0}ze("notifyListenersIfNeeded invoked");var et=j(we);if(Tr()&&et.lastWidth===et.startSize.width&&et.lastHeight===et.startSize.height)return ze("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(et.lastWidth===et.lastNotifiedWidth&&et.lastHeight===et.lastNotifiedHeight)return ze("Not notifying: Size already notified");ze("Current size not notified, notifying..."),et.lastNotifiedWidth=et.lastWidth,et.lastNotifiedHeight=et.lastHeight,H(j(we).listeners,function(en){en(we)})}function _t(){if(ze("startanimation triggered."),yt(we)){ze("Ignoring since element is still unrendered...");return}ze("Element rendered.");var Tr=Ae(we),et=De(we);(Tr.scrollLeft===0||Tr.scrollTop===0||et.scrollLeft===0||et.scrollTop===0)&&(ze("Scrollbars out of sync. Updating detector elements..."),at(Ze))}function Mt(){if(ze("Scroll detected."),yt(we)){ze("Scroll event fired while unrendered. Ignoring...");return}at(Ze)}if(ze("registerListenersAndPositionElements invoked."),!j(we)){ze("Aborting because element has been uninstalled");return}j(we).onRendered=_t,j(we).onExpand=Mt,j(we).onShrink=Mt;var ir=j(we).style;je(we,ir.width,ir.height)}function Ye(){if(ze("finalizeDomMutation invoked."),!j(we)){ze("Aborting because element has been uninstalled");return}var je=j(we).style;he(we,je.width,je.height),rt(we,je.width,je.height)}function Xe(){Re(we)}function Le(){ze("Installing..."),ae(),tt(),X.add(0,Ke),X.add(1,dt),X.add(2,Bt),X.add(3,Ye),X.add(4,Xe)}ze("Making detectable..."),Ge(we)?(ze("Element is detached"),Je(),ze("Waiting until element is attached..."),j(we).onRendered=function(){ze("Element is now attached"),Le()}):Le()}function We(_e){var we=j(_e);we&&(we.onExpandScroll&&le(Ae(_e),"scroll",we.onExpandScroll),we.onShrinkScroll&&le(De(_e),"scroll",we.onShrinkScroll),we.onAnimationStart&&le(we.container,"animationstart",we.onAnimationStart),we.container&&_e.removeChild(we.container))}return{makeDetectable:Te,addListener:Ne,uninstall:We,initDocument:se}}},63844:function(vt,N,k){"use strict";var H=k(17900).forEach,W=k(68452),w=k(96199),X=k(75805),j=k(79799),ee=k(71724),Y=k(2268),re=k(98129),Q=k(21931),ye=k(58229),se=k(60787);function ne(te){return Array.isArray(te)||te.length!==void 0}function $(te){if(Array.isArray(te))return te;var le=[];return H(te,function(Ae){le.push(Ae)}),le}function A(te){return te&&te.nodeType===1}vt.exports=function(te){te=te||{};var le;if(te.idHandler)le={get:function(Pe){return te.idHandler.get(Pe,!0)},set:te.idHandler.set};else{var Ae=X(),De=j({idGenerator:Ae,stateHandler:Q});le=De}var Ne=te.reporter;if(!Ne){var Te=Ne===!1;Ne=ee(Te)}var We=b(te,"batchProcessor",re({reporter:Ne})),_e={};_e.callOnAdd=!!b(te,"callOnAdd",!0),_e.debug=!!b(te,"debug",!1);var we=w(le),Re=W({stateHandler:Q}),ze,Ge=b(te,"strategy","object"),yt=b(te,"important",!1),ke={reporter:Ne,batchProcessor:We,stateHandler:Q,idHandler:le,important:yt};if(Ge==="scroll"&&(Y.isLegacyOpera()?(Ne.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),Ge="object"):Y.isIE(9)&&(Ne.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),Ge="object")),Ge==="scroll")ze=se(ke);else if(Ge==="object")ze=ye(ke);else throw new Error("Invalid strategy name: "+Ge);var tt={};function ae(Pe,lt,He){function Ue(dt){var Bt=we.get(dt);H(Bt,function(Xe){Xe(dt)})}function Qe(dt,Bt,Ye){we.add(Bt,Ye),dt&&Ye(Bt)}if(He||(He=lt,lt=Pe,Pe={}),!lt)throw new Error("At least one element required.");if(!He)throw new Error("Listener required.");if(A(lt))lt=[lt];else if(ne(lt))lt=$(lt);else return Ne.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Se=0,xe=b(Pe,"callOnAdd",_e.callOnAdd),rt=b(Pe,"onReady",function(){}),Je=b(Pe,"debug",_e.debug);H(lt,function(Bt){Q.getState(Bt)||(Q.initState(Bt),le.set(Bt));var Ye=le.get(Bt);if(Je&&Ne.log("Attaching listener to element",Ye,Bt),!Re.isDetectable(Bt)){if(Je&&Ne.log(Ye,"Not detectable."),Re.isBusy(Bt)){Je&&Ne.log(Ye,"System busy making it detectable"),Qe(xe,Bt,He),tt[Ye]=tt[Ye]||[],tt[Ye].push(function(){Se++,Se===lt.length&&rt()});return}return Je&&Ne.log(Ye,"Making detectable..."),Re.markBusy(Bt,!0),ze.makeDetectable({debug:Je,important:yt},Bt,function(Le){if(Je&&Ne.log(Ye,"onElementDetectable"),Q.getState(Le)){Re.markAsDetectable(Le),Re.markBusy(Le,!1),ze.addListener(Le,Ue),Qe(xe,Le,He);var je=Q.getState(Le);if(je&&je.startSize){var at=Le.offsetWidth,Me=Le.offsetHeight;(je.startSize.width!==at||je.startSize.height!==Me)&&Ue(Le)}tt[Ye]&&H(tt[Ye],function(Ze){Ze()})}else Je&&Ne.log(Ye,"Element uninstalled before being detectable.");delete tt[Ye],Se++,Se===lt.length&&rt()})}Je&&Ne.log(Ye,"Already detecable, adding listener."),Qe(xe,Bt,He),Se++}),Se===lt.length&&rt()}function Ke(Pe){if(!Pe)return Ne.error("At least one element is required.");if(A(Pe))Pe=[Pe];else if(ne(Pe))Pe=$(Pe);else return Ne.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");H(Pe,function(lt){we.removeAllListeners(lt),ze.uninstall(lt),Q.cleanState(lt)})}function he(Pe){ze.initDocument&&ze.initDocument(Pe)}return{listenTo:ae,removeListener:we.removeListener,removeAllListeners:we.removeAllListeners,uninstall:Ke,initDocument:he}};function b(te,le,Ae){var De=te[le];return De==null&&Ae!==void 0?Ae:De}},68452:function(vt){"use strict";vt.exports=function(N){var k=N.stateHandler.getState;function H(j){var ee=k(j);return ee&&!!ee.isDetectable}function W(j){k(j).isDetectable=!0}function w(j){return!!k(j).busy}function X(j,ee){k(j).busy=!!ee}return{isDetectable:H,markAsDetectable:W,isBusy:w,markBusy:X}}},75805:function(vt){"use strict";vt.exports=function(){var N=1;function k(){return N++}return{generate:k}}},79799:function(vt){"use strict";vt.exports=function(N){var k=N.idGenerator,H=N.stateHandler.getState;function W(X){var j=H(X);return j&&j.id!==void 0?j.id:null}function w(X){var j=H(X);if(!j)throw new Error("setId required the element to have a resize detection state.");var ee=k.generate();return j.id=ee,ee}return{get:W,set:w}}},96199:function(vt){"use strict";vt.exports=function(N){var k={};function H(j){var ee=N.get(j);return ee===void 0?[]:k[ee]||[]}function W(j,ee){var Y=N.get(j);k[Y]||(k[Y]=[]),k[Y].push(ee)}function w(j,ee){for(var Y=H(j),re=0,Q=Y.length;re<Q;++re)if(Y[re]===ee){Y.splice(re,1);break}}function X(j){var ee=H(j);ee&&(ee.length=0)}return{get:H,add:W,removeListener:w,removeAllListeners:X}}},71724:function(vt){"use strict";vt.exports=function(N){function k(){}var H={log:k,warn:k,error:k};if(!N&&window.console){var W=function(w,X){w[X]=function(){var ee=console[X];if(ee.apply)ee.apply(console,arguments);else for(var Y=0;Y<arguments.length;Y++)ee(arguments[Y])}};W(H,"log"),W(H,"warn"),W(H,"error")}return H}},21931:function(vt){"use strict";var N="_erd";function k(w){return w[N]={},H(w)}function H(w){return w[N]}function W(w){delete w[N]}vt.exports={initState:k,getState:H,cleanState:W}},26729:function(vt){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function H(){}Object.create&&(H.prototype=Object.create(null),new H().__proto__||(k=!1));function W(ee,Y,re){this.fn=ee,this.context=Y,this.once=re||!1}function w(ee,Y,re,Q,ye){if(typeof re!="function")throw new TypeError("The listener must be a function");var se=new W(re,Q||ee,ye),ne=k?k+Y:Y;return ee._events[ne]?ee._events[ne].fn?ee._events[ne]=[ee._events[ne],se]:ee._events[ne].push(se):(ee._events[ne]=se,ee._eventsCount++),ee}function X(ee,Y){--ee._eventsCount===0?ee._events=new H:delete ee._events[Y]}function j(){this._events=new H,this._eventsCount=0}j.prototype.eventNames=function(){var Y=[],re,Q;if(this._eventsCount===0)return Y;for(Q in re=this._events)N.call(re,Q)&&Y.push(k?Q.slice(1):Q);return Object.getOwnPropertySymbols?Y.concat(Object.getOwnPropertySymbols(re)):Y},j.prototype.listeners=function(Y){var re=k?k+Y:Y,Q=this._events[re];if(!Q)return[];if(Q.fn)return[Q.fn];for(var ye=0,se=Q.length,ne=new Array(se);ye<se;ye++)ne[ye]=Q[ye].fn;return ne},j.prototype.listenerCount=function(Y){var re=k?k+Y:Y,Q=this._events[re];return Q?Q.fn?1:Q.length:0},j.prototype.emit=function(Y,re,Q,ye,se,ne){var $=k?k+Y:Y;if(!this._events[$])return!1;var A=this._events[$],b=arguments.length,te,le;if(A.fn){switch(A.once&&this.removeListener(Y,A.fn,void 0,!0),b){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,re),!0;case 3:return A.fn.call(A.context,re,Q),!0;case 4:return A.fn.call(A.context,re,Q,ye),!0;case 5:return A.fn.call(A.context,re,Q,ye,se),!0;case 6:return A.fn.call(A.context,re,Q,ye,se,ne),!0}for(le=1,te=new Array(b-1);le<b;le++)te[le-1]=arguments[le];A.fn.apply(A.context,te)}else{var Ae=A.length,De;for(le=0;le<Ae;le++)switch(A[le].once&&this.removeListener(Y,A[le].fn,void 0,!0),b){case 1:A[le].fn.call(A[le].context);break;case 2:A[le].fn.call(A[le].context,re);break;case 3:A[le].fn.call(A[le].context,re,Q);break;case 4:A[le].fn.call(A[le].context,re,Q,ye);break;default:if(!te)for(De=1,te=new Array(b-1);De<b;De++)te[De-1]=arguments[De];A[le].fn.apply(A[le].context,te)}}return!0},j.prototype.on=function(Y,re,Q){return w(this,Y,re,Q,!1)},j.prototype.once=function(Y,re,Q){return w(this,Y,re,Q,!0)},j.prototype.removeListener=function(Y,re,Q,ye){var se=k?k+Y:Y;if(!this._events[se])return this;if(!re)return X(this,se),this;var ne=this._events[se];if(ne.fn)ne.fn===re&&(!ye||ne.once)&&(!Q||ne.context===Q)&&X(this,se);else{for(var $=0,A=[],b=ne.length;$<b;$++)(ne[$].fn!==re||ye&&!ne[$].once||Q&&ne[$].context!==Q)&&A.push(ne[$]);A.length?this._events[se]=A.length===1?A[0]:A:X(this,se)}return this},j.prototype.removeAllListeners=function(Y){var re;return Y?(re=k?k+Y:Y,this._events[re]&&X(this,re)):(this._events=new H,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,vt.exports=j},69916:function(vt,N){(function(k,H){H(N)})(this,function(k){"use strict";function H($,A,b,te){te=te||{};var le=te.maxIterations||100,Ae=te.tolerance||1e-10,De=$(A),Ne=$(b),Te=b-A;if(De*Ne>0)throw"Initial bisect points must have opposite signs";if(De===0)return A;if(Ne===0)return b;for(var We=0;We<le;++We){Te/=2;var _e=A+Te,we=$(_e);if(we*De>=0&&(A=_e),Math.abs(Te)<Ae||we===0)return _e}return A+Te}function W($){for(var A=new Array($),b=0;b<$;++b)A[b]=0;return A}function w($,A){return W($).map(function(){return W(A)})}function X($,A){for(var b=0,te=0;te<$.length;++te)b+=$[te]*A[te];return b}function j($){return Math.sqrt(X($,$))}function ee($,A,b){for(var te=0;te<A.length;++te)$[te]=A[te]*b}function Y($,A,b,te,le){for(var Ae=0;Ae<$.length;++Ae)$[Ae]=A*b[Ae]+te*le[Ae]}function re($,A,b){b=b||{};var te=b.maxIterations||A.length*200,le=b.nonZeroDelta||1.05,Ae=b.zeroDelta||.001,De=b.minErrorDelta||1e-6,Ne=b.minErrorDelta||1e-5,Te=b.rho!==void 0?b.rho:1,We=b.chi!==void 0?b.chi:2,_e=b.psi!==void 0?b.psi:-.5,we=b.sigma!==void 0?b.sigma:.5,Re,ze=A.length,Ge=new Array(ze+1);Ge[0]=A,Ge[0].fx=$(A),Ge[0].id=0;for(var yt=0;yt<ze;++yt){var ke=A.slice();ke[yt]=ke[yt]?ke[yt]*le:Ae,Ge[yt+1]=ke,Ge[yt+1].fx=$(ke),Ge[yt+1].id=yt+1}function tt(rt){for(var Je=0;Je<rt.length;Je++)Ge[ze][Je]=rt[Je];Ge[ze].fx=rt.fx}for(var ae=function(rt,Je){return rt.fx-Je.fx},Ke=A.slice(),he=A.slice(),Pe=A.slice(),lt=A.slice(),He=0;He<te;++He){if(Ge.sort(ae),b.history){var Ue=Ge.map(function(rt){var Je=rt.slice();return Je.fx=rt.fx,Je.id=rt.id,Je});Ue.sort(function(rt,Je){return rt.id-Je.id}),b.history.push({x:Ge[0].slice(),fx:Ge[0].fx,simplex:Ue})}for(Re=0,yt=0;yt<ze;++yt)Re=Math.max(Re,Math.abs(Ge[0][yt]-Ge[1][yt]));if(Math.abs(Ge[0].fx-Ge[ze].fx)<De&&Re<Ne)break;for(yt=0;yt<ze;++yt){Ke[yt]=0;for(var Qe=0;Qe<ze;++Qe)Ke[yt]+=Ge[Qe][yt];Ke[yt]/=ze}var Se=Ge[ze];if(Y(he,1+Te,Ke,-Te,Se),he.fx=$(he),he.fx<Ge[0].fx)Y(lt,1+We,Ke,-We,Se),lt.fx=$(lt),lt.fx<he.fx?tt(lt):tt(he);else if(he.fx>=Ge[ze-1].fx){var xe=!1;if(he.fx>Se.fx?(Y(Pe,1+_e,Ke,-_e,Se),Pe.fx=$(Pe),Pe.fx<Se.fx?tt(Pe):xe=!0):(Y(Pe,1-_e*Te,Ke,_e*Te,Se),Pe.fx=$(Pe),Pe.fx<he.fx?tt(Pe):xe=!0),xe){if(we>=1)break;for(yt=1;yt<Ge.length;++yt)Y(Ge[yt],1-we,Ge[0],we,Ge[yt]),Ge[yt].fx=$(Ge[yt])}}else tt(he)}return Ge.sort(ae),{fx:Ge[0].fx,x:Ge[0]}}function Q($,A,b,te,le,Ae,De){var Ne=b.fx,Te=X(b.fxprime,A),We=Ne,_e=Ne,we=Te,Re=0;le=le||1,Ae=Ae||1e-6,De=De||.1;function ze(yt,ke,tt){for(var ae=0;ae<16;++ae)if(le=(yt+ke)/2,Y(te.x,1,b.x,le,A),We=te.fx=$(te.x,te.fxprime),we=X(te.fxprime,A),We>Ne+Ae*le*Te||We>=tt)ke=le;else{if(Math.abs(we)<=-De*Te)return le;we*(ke-yt)>=0&&(ke=yt),yt=le,tt=We}return 0}for(var Ge=0;Ge<10;++Ge){if(Y(te.x,1,b.x,le,A),We=te.fx=$(te.x,te.fxprime),we=X(te.fxprime,A),We>Ne+Ae*le*Te||Ge&&We>=_e)return ze(Re,le,_e);if(Math.abs(we)<=-De*Te)return le;if(we>=0)return ze(le,Re,We);_e=We,Re=le,le*=2}return le}function ye($,A,b){var te={x:A.slice(),fx:0,fxprime:A.slice()},le={x:A.slice(),fx:0,fxprime:A.slice()},Ae=A.slice(),De,Ne,Te=1,We;b=b||{},We=b.maxIterations||A.length*20,te.fx=$(te.x,te.fxprime),De=te.fxprime.slice(),ee(De,te.fxprime,-1);for(var _e=0;_e<We;++_e){if(Te=Q($,De,te,le,Te),b.history&&b.history.push({x:te.x.slice(),fx:te.fx,fxprime:te.fxprime.slice(),alpha:Te}),!Te)ee(De,te.fxprime,-1);else{Y(Ae,1,le.fxprime,-1,te.fxprime);var we=X(te.fxprime,te.fxprime),Re=Math.max(0,X(Ae,le.fxprime)/we);Y(De,Re,De,-1,le.fxprime),Ne=te,te=le,le=Ne}if(j(te.fxprime)<=1e-5)break}return b.history&&b.history.push({x:te.x.slice(),fx:te.fx,fxprime:te.fxprime.slice(),alpha:Te}),te}function se($,A,b){b=b||{};for(var te=b.maxIterations||A.length*100,le=b.learnRate||.001,Ae={x:A.slice(),fx:0,fxprime:A.slice()},De=0;De<te&&(Ae.fx=$(Ae.x,Ae.fxprime),b.history&&b.history.push({x:Ae.x.slice(),fx:Ae.fx,fxprime:Ae.fxprime.slice()}),Y(Ae.x,1,Ae.x,-le,Ae.fxprime),!(j(Ae.fxprime)<=1e-5));++De);return Ae}function ne($,A,b){b=b||{};var te={x:A.slice(),fx:0,fxprime:A.slice()},le={x:A.slice(),fx:0,fxprime:A.slice()},Ae=b.maxIterations||A.length*100,De=b.learnRate||1,Ne=A.slice(),Te=b.c1||.001,We=b.c2||.1,_e,we=[];if(b.history){var Re=$;$=function(Ge,yt){return we.push(Ge.slice()),Re(Ge,yt)}}te.fx=$(te.x,te.fxprime);for(var ze=0;ze<Ae&&(ee(Ne,te.fxprime,-1),De=Q($,Ne,te,le,De,Te,We),b.history&&(b.history.push({x:te.x.slice(),fx:te.fx,fxprime:te.fxprime.slice(),functionCalls:we,learnRate:De,alpha:De}),we=[]),_e=te,te=le,le=_e,!(De===0||j(te.fxprime)<1e-5));++ze);return te}k.bisect=H,k.nelderMead=re,k.conjugateGradient=ye,k.gradientDescent=se,k.gradientDescentLineSearch=ne,k.zeros=W,k.zerosM=w,k.norm2=j,k.weightedSum=Y,k.scale=ee})},49685:function(vt,N,k){"use strict";k.d(N,{FD:function(){return w},Ib:function(){return H},WT:function(){return W}});var H=1e-6,W=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function X(re){W=re}var j=Math.PI/180;function ee(re){return re*j}function Y(re,Q){return Math.abs(re-Q)<=H*Math.max(1,Math.abs(re),Math.abs(Q))}Math.hypot||(Math.hypot=function(){for(var re=0,Q=arguments.length;Q--;)re+=arguments[Q]*arguments[Q];return Math.sqrt(re)})},35600:function(vt,N,k){"use strict";k.d(N,{Jp:function(){return ne},U_:function(){return Q},Us:function(){return le},vc:function(){return te},xJ:function(){return Ae}});function H(){var he=new glMatrix.ARRAY_TYPE(9);return glMatrix.ARRAY_TYPE!=Float32Array&&(he[1]=0,he[2]=0,he[3]=0,he[5]=0,he[6]=0,he[7]=0),he[0]=1,he[4]=1,he[8]=1,he}function W(he,Pe){return he[0]=Pe[0],he[1]=Pe[1],he[2]=Pe[2],he[3]=Pe[4],he[4]=Pe[5],he[5]=Pe[6],he[6]=Pe[8],he[7]=Pe[9],he[8]=Pe[10],he}function w(he){var Pe=new glMatrix.ARRAY_TYPE(9);return Pe[0]=he[0],Pe[1]=he[1],Pe[2]=he[2],Pe[3]=he[3],Pe[4]=he[4],Pe[5]=he[5],Pe[6]=he[6],Pe[7]=he[7],Pe[8]=he[8],Pe}function X(he,Pe){return he[0]=Pe[0],he[1]=Pe[1],he[2]=Pe[2],he[3]=Pe[3],he[4]=Pe[4],he[5]=Pe[5],he[6]=Pe[6],he[7]=Pe[7],he[8]=Pe[8],he}function j(he,Pe,lt,He,Ue,Qe,Se,xe,rt){var Je=new glMatrix.ARRAY_TYPE(9);return Je[0]=he,Je[1]=Pe,Je[2]=lt,Je[3]=He,Je[4]=Ue,Je[5]=Qe,Je[6]=Se,Je[7]=xe,Je[8]=rt,Je}function ee(he,Pe,lt,He,Ue,Qe,Se,xe,rt,Je){return he[0]=Pe,he[1]=lt,he[2]=He,he[3]=Ue,he[4]=Qe,he[5]=Se,he[6]=xe,he[7]=rt,he[8]=Je,he}function Y(he){return he[0]=1,he[1]=0,he[2]=0,he[3]=0,he[4]=1,he[5]=0,he[6]=0,he[7]=0,he[8]=1,he}function re(he,Pe){if(he===Pe){var lt=Pe[1],He=Pe[2],Ue=Pe[5];he[1]=Pe[3],he[2]=Pe[6],he[3]=lt,he[5]=Pe[7],he[6]=He,he[7]=Ue}else he[0]=Pe[0],he[1]=Pe[3],he[2]=Pe[6],he[3]=Pe[1],he[4]=Pe[4],he[5]=Pe[7],he[6]=Pe[2],he[7]=Pe[5],he[8]=Pe[8];return he}function Q(he,Pe){var lt=Pe[0],He=Pe[1],Ue=Pe[2],Qe=Pe[3],Se=Pe[4],xe=Pe[5],rt=Pe[6],Je=Pe[7],dt=Pe[8],Bt=dt*Se-xe*Je,Ye=-dt*Qe+xe*rt,Xe=Je*Qe-Se*rt,Le=lt*Bt+He*Ye+Ue*Xe;return Le?(Le=1/Le,he[0]=Bt*Le,he[1]=(-dt*He+Ue*Je)*Le,he[2]=(xe*He-Ue*Se)*Le,he[3]=Ye*Le,he[4]=(dt*lt-Ue*rt)*Le,he[5]=(-xe*lt+Ue*Qe)*Le,he[6]=Xe*Le,he[7]=(-Je*lt+He*rt)*Le,he[8]=(Se*lt-He*Qe)*Le,he):null}function ye(he,Pe){var lt=Pe[0],He=Pe[1],Ue=Pe[2],Qe=Pe[3],Se=Pe[4],xe=Pe[5],rt=Pe[6],Je=Pe[7],dt=Pe[8];return he[0]=Se*dt-xe*Je,he[1]=Ue*Je-He*dt,he[2]=He*xe-Ue*Se,he[3]=xe*rt-Qe*dt,he[4]=lt*dt-Ue*rt,he[5]=Ue*Qe-lt*xe,he[6]=Qe*Je-Se*rt,he[7]=He*rt-lt*Je,he[8]=lt*Se-He*Qe,he}function se(he){var Pe=he[0],lt=he[1],He=he[2],Ue=he[3],Qe=he[4],Se=he[5],xe=he[6],rt=he[7],Je=he[8];return Pe*(Je*Qe-Se*rt)+lt*(-Je*Ue+Se*xe)+He*(rt*Ue-Qe*xe)}function ne(he,Pe,lt){var He=Pe[0],Ue=Pe[1],Qe=Pe[2],Se=Pe[3],xe=Pe[4],rt=Pe[5],Je=Pe[6],dt=Pe[7],Bt=Pe[8],Ye=lt[0],Xe=lt[1],Le=lt[2],je=lt[3],at=lt[4],Me=lt[5],Ze=lt[6],_t=lt[7],Mt=lt[8];return he[0]=Ye*He+Xe*Se+Le*Je,he[1]=Ye*Ue+Xe*xe+Le*dt,he[2]=Ye*Qe+Xe*rt+Le*Bt,he[3]=je*He+at*Se+Me*Je,he[4]=je*Ue+at*xe+Me*dt,he[5]=je*Qe+at*rt+Me*Bt,he[6]=Ze*He+_t*Se+Mt*Je,he[7]=Ze*Ue+_t*xe+Mt*dt,he[8]=Ze*Qe+_t*rt+Mt*Bt,he}function $(he,Pe,lt){var He=Pe[0],Ue=Pe[1],Qe=Pe[2],Se=Pe[3],xe=Pe[4],rt=Pe[5],Je=Pe[6],dt=Pe[7],Bt=Pe[8],Ye=lt[0],Xe=lt[1];return he[0]=He,he[1]=Ue,he[2]=Qe,he[3]=Se,he[4]=xe,he[5]=rt,he[6]=Ye*He+Xe*Se+Je,he[7]=Ye*Ue+Xe*xe+dt,he[8]=Ye*Qe+Xe*rt+Bt,he}function A(he,Pe,lt){var He=Pe[0],Ue=Pe[1],Qe=Pe[2],Se=Pe[3],xe=Pe[4],rt=Pe[5],Je=Pe[6],dt=Pe[7],Bt=Pe[8],Ye=Math.sin(lt),Xe=Math.cos(lt);return he[0]=Xe*He+Ye*Se,he[1]=Xe*Ue+Ye*xe,he[2]=Xe*Qe+Ye*rt,he[3]=Xe*Se-Ye*He,he[4]=Xe*xe-Ye*Ue,he[5]=Xe*rt-Ye*Qe,he[6]=Je,he[7]=dt,he[8]=Bt,he}function b(he,Pe,lt){var He=lt[0],Ue=lt[1];return he[0]=He*Pe[0],he[1]=He*Pe[1],he[2]=He*Pe[2],he[3]=Ue*Pe[3],he[4]=Ue*Pe[4],he[5]=Ue*Pe[5],he[6]=Pe[6],he[7]=Pe[7],he[8]=Pe[8],he}function te(he,Pe){return he[0]=1,he[1]=0,he[2]=0,he[3]=0,he[4]=1,he[5]=0,he[6]=Pe[0],he[7]=Pe[1],he[8]=1,he}function le(he,Pe){var lt=Math.sin(Pe),He=Math.cos(Pe);return he[0]=He,he[1]=lt,he[2]=0,he[3]=-lt,he[4]=He,he[5]=0,he[6]=0,he[7]=0,he[8]=1,he}function Ae(he,Pe){return he[0]=Pe[0],he[1]=0,he[2]=0,he[3]=0,he[4]=Pe[1],he[5]=0,he[6]=0,he[7]=0,he[8]=1,he}function De(he,Pe){return he[0]=Pe[0],he[1]=Pe[1],he[2]=0,he[3]=Pe[2],he[4]=Pe[3],he[5]=0,he[6]=Pe[4],he[7]=Pe[5],he[8]=1,he}function Ne(he,Pe){var lt=Pe[0],He=Pe[1],Ue=Pe[2],Qe=Pe[3],Se=lt+lt,xe=He+He,rt=Ue+Ue,Je=lt*Se,dt=He*Se,Bt=He*xe,Ye=Ue*Se,Xe=Ue*xe,Le=Ue*rt,je=Qe*Se,at=Qe*xe,Me=Qe*rt;return he[0]=1-Bt-Le,he[3]=dt-Me,he[6]=Ye+at,he[1]=dt+Me,he[4]=1-Je-Le,he[7]=Xe-je,he[2]=Ye-at,he[5]=Xe+je,he[8]=1-Je-Bt,he}function Te(he,Pe){var lt=Pe[0],He=Pe[1],Ue=Pe[2],Qe=Pe[3],Se=Pe[4],xe=Pe[5],rt=Pe[6],Je=Pe[7],dt=Pe[8],Bt=Pe[9],Ye=Pe[10],Xe=Pe[11],Le=Pe[12],je=Pe[13],at=Pe[14],Me=Pe[15],Ze=lt*xe-He*Se,_t=lt*rt-Ue*Se,Mt=lt*Je-Qe*Se,ir=He*rt-Ue*xe,Tr=He*Je-Qe*xe,et=Ue*Je-Qe*rt,en=dt*je-Bt*Le,Xr=dt*at-Ye*Le,Sr=dt*Me-Xe*Le,pt=Bt*at-Ye*je,Ut=Bt*Me-Xe*je,Gt=Ye*Me-Xe*at,Tt=Ze*Gt-_t*Ut+Mt*pt+ir*Sr-Tr*Xr+et*en;return Tt?(Tt=1/Tt,he[0]=(xe*Gt-rt*Ut+Je*pt)*Tt,he[1]=(rt*Sr-Se*Gt-Je*Xr)*Tt,he[2]=(Se*Ut-xe*Sr+Je*en)*Tt,he[3]=(Ue*Ut-He*Gt-Qe*pt)*Tt,he[4]=(lt*Gt-Ue*Sr+Qe*Xr)*Tt,he[5]=(He*Sr-lt*Ut-Qe*en)*Tt,he[6]=(je*et-at*Tr+Me*ir)*Tt,he[7]=(at*Mt-Le*et-Me*_t)*Tt,he[8]=(Le*Tr-je*Mt+Me*Ze)*Tt,he):null}function We(he,Pe,lt){return he[0]=2/Pe,he[1]=0,he[2]=0,he[3]=0,he[4]=-2/lt,he[5]=0,he[6]=-1,he[7]=1,he[8]=1,he}function _e(he){return"mat3("+he[0]+", "+he[1]+", "+he[2]+", "+he[3]+", "+he[4]+", "+he[5]+", "+he[6]+", "+he[7]+", "+he[8]+")"}function we(he){return Math.hypot(he[0],he[1],he[2],he[3],he[4],he[5],he[6],he[7],he[8])}function Re(he,Pe,lt){return he[0]=Pe[0]+lt[0],he[1]=Pe[1]+lt[1],he[2]=Pe[2]+lt[2],he[3]=Pe[3]+lt[3],he[4]=Pe[4]+lt[4],he[5]=Pe[5]+lt[5],he[6]=Pe[6]+lt[6],he[7]=Pe[7]+lt[7],he[8]=Pe[8]+lt[8],he}function ze(he,Pe,lt){return he[0]=Pe[0]-lt[0],he[1]=Pe[1]-lt[1],he[2]=Pe[2]-lt[2],he[3]=Pe[3]-lt[3],he[4]=Pe[4]-lt[4],he[5]=Pe[5]-lt[5],he[6]=Pe[6]-lt[6],he[7]=Pe[7]-lt[7],he[8]=Pe[8]-lt[8],he}function Ge(he,Pe,lt){return he[0]=Pe[0]*lt,he[1]=Pe[1]*lt,he[2]=Pe[2]*lt,he[3]=Pe[3]*lt,he[4]=Pe[4]*lt,he[5]=Pe[5]*lt,he[6]=Pe[6]*lt,he[7]=Pe[7]*lt,he[8]=Pe[8]*lt,he}function yt(he,Pe,lt,He){return he[0]=Pe[0]+lt[0]*He,he[1]=Pe[1]+lt[1]*He,he[2]=Pe[2]+lt[2]*He,he[3]=Pe[3]+lt[3]*He,he[4]=Pe[4]+lt[4]*He,he[5]=Pe[5]+lt[5]*He,he[6]=Pe[6]+lt[6]*He,he[7]=Pe[7]+lt[7]*He,he[8]=Pe[8]+lt[8]*He,he}function ke(he,Pe){return he[0]===Pe[0]&&he[1]===Pe[1]&&he[2]===Pe[2]&&he[3]===Pe[3]&&he[4]===Pe[4]&&he[5]===Pe[5]&&he[6]===Pe[6]&&he[7]===Pe[7]&&he[8]===Pe[8]}function tt(he,Pe){var lt=he[0],He=he[1],Ue=he[2],Qe=he[3],Se=he[4],xe=he[5],rt=he[6],Je=he[7],dt=he[8],Bt=Pe[0],Ye=Pe[1],Xe=Pe[2],Le=Pe[3],je=Pe[4],at=Pe[5],Me=Pe[6],Ze=Pe[7],_t=Pe[8];return Math.abs(lt-Bt)<=glMatrix.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Bt))&&Math.abs(He-Ye)<=glMatrix.EPSILON*Math.max(1,Math.abs(He),Math.abs(Ye))&&Math.abs(Ue-Xe)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(Xe))&&Math.abs(Qe-Le)<=glMatrix.EPSILON*Math.max(1,Math.abs(Qe),Math.abs(Le))&&Math.abs(Se-je)<=glMatrix.EPSILON*Math.max(1,Math.abs(Se),Math.abs(je))&&Math.abs(xe-at)<=glMatrix.EPSILON*Math.max(1,Math.abs(xe),Math.abs(at))&&Math.abs(rt-Me)<=glMatrix.EPSILON*Math.max(1,Math.abs(rt),Math.abs(Me))&&Math.abs(Je-Ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(Je),Math.abs(Ze))&&Math.abs(dt-_t)<=glMatrix.EPSILON*Math.max(1,Math.abs(dt),Math.abs(_t))}var ae=null,Ke=null},31437:function(vt,N,k){"use strict";k.d(N,{$X:function(){return re},AK:function(){return Re},EU:function(){return Pe},Fp:function(){return A},Fv:function(){return we},I6:function(){return Ue},IH:function(){return Y},JG:function(){return j},TE:function(){return Ae},Ue:function(){return W},VV:function(){return $},al:function(){return X},bA:function(){return te},kE:function(){return Ne},kK:function(){return ae},lu:function(){return xe},t7:function(){return Ge},t8:function(){return ee},tk:function(){return We}});var H=k(49685);function W(){var Le=new H.WT(2);return H.WT!=Float32Array&&(Le[0]=0,Le[1]=0),Le}function w(Le){var je=new glMatrix.ARRAY_TYPE(2);return je[0]=Le[0],je[1]=Le[1],je}function X(Le,je){var at=new H.WT(2);return at[0]=Le,at[1]=je,at}function j(Le,je){return Le[0]=je[0],Le[1]=je[1],Le}function ee(Le,je,at){return Le[0]=je,Le[1]=at,Le}function Y(Le,je,at){return Le[0]=je[0]+at[0],Le[1]=je[1]+at[1],Le}function re(Le,je,at){return Le[0]=je[0]-at[0],Le[1]=je[1]-at[1],Le}function Q(Le,je,at){return Le[0]=je[0]*at[0],Le[1]=je[1]*at[1],Le}function ye(Le,je,at){return Le[0]=je[0]/at[0],Le[1]=je[1]/at[1],Le}function se(Le,je){return Le[0]=Math.ceil(je[0]),Le[1]=Math.ceil(je[1]),Le}function ne(Le,je){return Le[0]=Math.floor(je[0]),Le[1]=Math.floor(je[1]),Le}function $(Le,je,at){return Le[0]=Math.min(je[0],at[0]),Le[1]=Math.min(je[1],at[1]),Le}function A(Le,je,at){return Le[0]=Math.max(je[0],at[0]),Le[1]=Math.max(je[1],at[1]),Le}function b(Le,je){return Le[0]=Math.round(je[0]),Le[1]=Math.round(je[1]),Le}function te(Le,je,at){return Le[0]=je[0]*at,Le[1]=je[1]*at,Le}function le(Le,je,at,Me){return Le[0]=je[0]+at[0]*Me,Le[1]=je[1]+at[1]*Me,Le}function Ae(Le,je){var at=je[0]-Le[0],Me=je[1]-Le[1];return Math.hypot(at,Me)}function De(Le,je){var at=je[0]-Le[0],Me=je[1]-Le[1];return at*at+Me*Me}function Ne(Le){var je=Le[0],at=Le[1];return Math.hypot(je,at)}function Te(Le){var je=Le[0],at=Le[1];return je*je+at*at}function We(Le,je){return Le[0]=-je[0],Le[1]=-je[1],Le}function _e(Le,je){return Le[0]=1/je[0],Le[1]=1/je[1],Le}function we(Le,je){var at=je[0],Me=je[1],Ze=at*at+Me*Me;return Ze>0&&(Ze=1/Math.sqrt(Ze)),Le[0]=je[0]*Ze,Le[1]=je[1]*Ze,Le}function Re(Le,je){return Le[0]*je[0]+Le[1]*je[1]}function ze(Le,je,at){var Me=je[0]*at[1]-je[1]*at[0];return Le[0]=Le[1]=0,Le[2]=Me,Le}function Ge(Le,je,at,Me){var Ze=je[0],_t=je[1];return Le[0]=Ze+Me*(at[0]-Ze),Le[1]=_t+Me*(at[1]-_t),Le}function yt(Le,je){je=je||1;var at=glMatrix.RANDOM()*2*Math.PI;return Le[0]=Math.cos(at)*je,Le[1]=Math.sin(at)*je,Le}function ke(Le,je,at){var Me=je[0],Ze=je[1];return Le[0]=at[0]*Me+at[2]*Ze,Le[1]=at[1]*Me+at[3]*Ze,Le}function tt(Le,je,at){var Me=je[0],Ze=je[1];return Le[0]=at[0]*Me+at[2]*Ze+at[4],Le[1]=at[1]*Me+at[3]*Ze+at[5],Le}function ae(Le,je,at){var Me=je[0],Ze=je[1];return Le[0]=at[0]*Me+at[3]*Ze+at[6],Le[1]=at[1]*Me+at[4]*Ze+at[7],Le}function Ke(Le,je,at){var Me=je[0],Ze=je[1];return Le[0]=at[0]*Me+at[4]*Ze+at[12],Le[1]=at[1]*Me+at[5]*Ze+at[13],Le}function he(Le,je,at,Me){var Ze=je[0]-at[0],_t=je[1]-at[1],Mt=Math.sin(Me),ir=Math.cos(Me);return Le[0]=Ze*ir-_t*Mt+at[0],Le[1]=Ze*Mt+_t*ir+at[1],Le}function Pe(Le,je){var at=Le[0],Me=Le[1],Ze=je[0],_t=je[1],Mt=Math.sqrt(at*at+Me*Me)*Math.sqrt(Ze*Ze+_t*_t),ir=Mt&&(at*Ze+Me*_t)/Mt;return Math.acos(Math.min(Math.max(ir,-1),1))}function lt(Le){return Le[0]=0,Le[1]=0,Le}function He(Le){return"vec2("+Le[0]+", "+Le[1]+")"}function Ue(Le,je){return Le[0]===je[0]&&Le[1]===je[1]}function Qe(Le,je){var at=Le[0],Me=Le[1],Ze=je[0],_t=je[1];return Math.abs(at-Ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(at),Math.abs(Ze))&&Math.abs(Me-_t)<=glMatrix.EPSILON*Math.max(1,Math.abs(Me),Math.abs(_t))}var Se=null,xe=re,rt=null,Je=null,dt=null,Bt=null,Ye=null,Xe=function(){var Le=W();return function(je,at,Me,Ze,_t,Mt){var ir,Tr;for(at||(at=2),Me||(Me=0),Ze?Tr=Math.min(Ze*at+Me,je.length):Tr=je.length,ir=Me;ir<Tr;ir+=at)Le[0]=je[ir],Le[1]=je[ir+1],_t(Le,Le,Mt),je[ir]=Le[0],je[ir+1]=Le[1];return je}}()},77160:function(vt,N,k){"use strict";k.r(N),k.d(N,{add:function(){return re},angle:function(){return Ue},bezier:function(){return ke},ceil:function(){return ne},clone:function(){return w},copy:function(){return ee},create:function(){return W},cross:function(){return ze},dist:function(){return Ye},distance:function(){return De},div:function(){return Bt},divide:function(){return se},dot:function(){return Re},equals:function(){return rt},exactEquals:function(){return xe},floor:function(){return $},forEach:function(){return at},fromValues:function(){return j},hermite:function(){return yt},inverse:function(){return _e},len:function(){return Le},length:function(){return X},lerp:function(){return Ge},max:function(){return b},min:function(){return A},mul:function(){return dt},multiply:function(){return ye},negate:function(){return We},normalize:function(){return we},random:function(){return tt},rotateX:function(){return Pe},rotateY:function(){return lt},rotateZ:function(){return He},round:function(){return te},scale:function(){return le},scaleAndAdd:function(){return Ae},set:function(){return Y},sqrDist:function(){return Xe},sqrLen:function(){return je},squaredDistance:function(){return Ne},squaredLength:function(){return Te},str:function(){return Se},sub:function(){return Je},subtract:function(){return Q},transformMat3:function(){return Ke},transformMat4:function(){return ae},transformQuat:function(){return he},zero:function(){return Qe}});var H=k(49685);function W(){var Me=new H.WT(3);return H.WT!=Float32Array&&(Me[0]=0,Me[1]=0,Me[2]=0),Me}function w(Me){var Ze=new H.WT(3);return Ze[0]=Me[0],Ze[1]=Me[1],Ze[2]=Me[2],Ze}function X(Me){var Ze=Me[0],_t=Me[1],Mt=Me[2];return Math.hypot(Ze,_t,Mt)}function j(Me,Ze,_t){var Mt=new H.WT(3);return Mt[0]=Me,Mt[1]=Ze,Mt[2]=_t,Mt}function ee(Me,Ze){return Me[0]=Ze[0],Me[1]=Ze[1],Me[2]=Ze[2],Me}function Y(Me,Ze,_t,Mt){return Me[0]=Ze,Me[1]=_t,Me[2]=Mt,Me}function re(Me,Ze,_t){return Me[0]=Ze[0]+_t[0],Me[1]=Ze[1]+_t[1],Me[2]=Ze[2]+_t[2],Me}function Q(Me,Ze,_t){return Me[0]=Ze[0]-_t[0],Me[1]=Ze[1]-_t[1],Me[2]=Ze[2]-_t[2],Me}function ye(Me,Ze,_t){return Me[0]=Ze[0]*_t[0],Me[1]=Ze[1]*_t[1],Me[2]=Ze[2]*_t[2],Me}function se(Me,Ze,_t){return Me[0]=Ze[0]/_t[0],Me[1]=Ze[1]/_t[1],Me[2]=Ze[2]/_t[2],Me}function ne(Me,Ze){return Me[0]=Math.ceil(Ze[0]),Me[1]=Math.ceil(Ze[1]),Me[2]=Math.ceil(Ze[2]),Me}function $(Me,Ze){return Me[0]=Math.floor(Ze[0]),Me[1]=Math.floor(Ze[1]),Me[2]=Math.floor(Ze[2]),Me}function A(Me,Ze,_t){return Me[0]=Math.min(Ze[0],_t[0]),Me[1]=Math.min(Ze[1],_t[1]),Me[2]=Math.min(Ze[2],_t[2]),Me}function b(Me,Ze,_t){return Me[0]=Math.max(Ze[0],_t[0]),Me[1]=Math.max(Ze[1],_t[1]),Me[2]=Math.max(Ze[2],_t[2]),Me}function te(Me,Ze){return Me[0]=Math.round(Ze[0]),Me[1]=Math.round(Ze[1]),Me[2]=Math.round(Ze[2]),Me}function le(Me,Ze,_t){return Me[0]=Ze[0]*_t,Me[1]=Ze[1]*_t,Me[2]=Ze[2]*_t,Me}function Ae(Me,Ze,_t,Mt){return Me[0]=Ze[0]+_t[0]*Mt,Me[1]=Ze[1]+_t[1]*Mt,Me[2]=Ze[2]+_t[2]*Mt,Me}function De(Me,Ze){var _t=Ze[0]-Me[0],Mt=Ze[1]-Me[1],ir=Ze[2]-Me[2];return Math.hypot(_t,Mt,ir)}function Ne(Me,Ze){var _t=Ze[0]-Me[0],Mt=Ze[1]-Me[1],ir=Ze[2]-Me[2];return _t*_t+Mt*Mt+ir*ir}function Te(Me){var Ze=Me[0],_t=Me[1],Mt=Me[2];return Ze*Ze+_t*_t+Mt*Mt}function We(Me,Ze){return Me[0]=-Ze[0],Me[1]=-Ze[1],Me[2]=-Ze[2],Me}function _e(Me,Ze){return Me[0]=1/Ze[0],Me[1]=1/Ze[1],Me[2]=1/Ze[2],Me}function we(Me,Ze){var _t=Ze[0],Mt=Ze[1],ir=Ze[2],Tr=_t*_t+Mt*Mt+ir*ir;return Tr>0&&(Tr=1/Math.sqrt(Tr)),Me[0]=Ze[0]*Tr,Me[1]=Ze[1]*Tr,Me[2]=Ze[2]*Tr,Me}function Re(Me,Ze){return Me[0]*Ze[0]+Me[1]*Ze[1]+Me[2]*Ze[2]}function ze(Me,Ze,_t){var Mt=Ze[0],ir=Ze[1],Tr=Ze[2],et=_t[0],en=_t[1],Xr=_t[2];return Me[0]=ir*Xr-Tr*en,Me[1]=Tr*et-Mt*Xr,Me[2]=Mt*en-ir*et,Me}function Ge(Me,Ze,_t,Mt){var ir=Ze[0],Tr=Ze[1],et=Ze[2];return Me[0]=ir+Mt*(_t[0]-ir),Me[1]=Tr+Mt*(_t[1]-Tr),Me[2]=et+Mt*(_t[2]-et),Me}function yt(Me,Ze,_t,Mt,ir,Tr){var et=Tr*Tr,en=et*(2*Tr-3)+1,Xr=et*(Tr-2)+Tr,Sr=et*(Tr-1),pt=et*(3-2*Tr);return Me[0]=Ze[0]*en+_t[0]*Xr+Mt[0]*Sr+ir[0]*pt,Me[1]=Ze[1]*en+_t[1]*Xr+Mt[1]*Sr+ir[1]*pt,Me[2]=Ze[2]*en+_t[2]*Xr+Mt[2]*Sr+ir[2]*pt,Me}function ke(Me,Ze,_t,Mt,ir,Tr){var et=1-Tr,en=et*et,Xr=Tr*Tr,Sr=en*et,pt=3*Tr*en,Ut=3*Xr*et,Gt=Xr*Tr;return Me[0]=Ze[0]*Sr+_t[0]*pt+Mt[0]*Ut+ir[0]*Gt,Me[1]=Ze[1]*Sr+_t[1]*pt+Mt[1]*Ut+ir[1]*Gt,Me[2]=Ze[2]*Sr+_t[2]*pt+Mt[2]*Ut+ir[2]*Gt,Me}function tt(Me,Ze){Ze=Ze||1;var _t=H.FD()*2*Math.PI,Mt=H.FD()*2-1,ir=Math.sqrt(1-Mt*Mt)*Ze;return Me[0]=Math.cos(_t)*ir,Me[1]=Math.sin(_t)*ir,Me[2]=Mt*Ze,Me}function ae(Me,Ze,_t){var Mt=Ze[0],ir=Ze[1],Tr=Ze[2],et=_t[3]*Mt+_t[7]*ir+_t[11]*Tr+_t[15];return et=et||1,Me[0]=(_t[0]*Mt+_t[4]*ir+_t[8]*Tr+_t[12])/et,Me[1]=(_t[1]*Mt+_t[5]*ir+_t[9]*Tr+_t[13])/et,Me[2]=(_t[2]*Mt+_t[6]*ir+_t[10]*Tr+_t[14])/et,Me}function Ke(Me,Ze,_t){var Mt=Ze[0],ir=Ze[1],Tr=Ze[2];return Me[0]=Mt*_t[0]+ir*_t[3]+Tr*_t[6],Me[1]=Mt*_t[1]+ir*_t[4]+Tr*_t[7],Me[2]=Mt*_t[2]+ir*_t[5]+Tr*_t[8],Me}function he(Me,Ze,_t){var Mt=_t[0],ir=_t[1],Tr=_t[2],et=_t[3],en=Ze[0],Xr=Ze[1],Sr=Ze[2],pt=ir*Sr-Tr*Xr,Ut=Tr*en-Mt*Sr,Gt=Mt*Xr-ir*en,Tt=ir*Gt-Tr*Ut,qt=Tr*pt-Mt*Gt,fr=Mt*Ut-ir*pt,hr=et*2;return pt*=hr,Ut*=hr,Gt*=hr,Tt*=2,qt*=2,fr*=2,Me[0]=en+pt+Tt,Me[1]=Xr+Ut+qt,Me[2]=Sr+Gt+fr,Me}function Pe(Me,Ze,_t,Mt){var ir=[],Tr=[];return ir[0]=Ze[0]-_t[0],ir[1]=Ze[1]-_t[1],ir[2]=Ze[2]-_t[2],Tr[0]=ir[0],Tr[1]=ir[1]*Math.cos(Mt)-ir[2]*Math.sin(Mt),Tr[2]=ir[1]*Math.sin(Mt)+ir[2]*Math.cos(Mt),Me[0]=Tr[0]+_t[0],Me[1]=Tr[1]+_t[1],Me[2]=Tr[2]+_t[2],Me}function lt(Me,Ze,_t,Mt){var ir=[],Tr=[];return ir[0]=Ze[0]-_t[0],ir[1]=Ze[1]-_t[1],ir[2]=Ze[2]-_t[2],Tr[0]=ir[2]*Math.sin(Mt)+ir[0]*Math.cos(Mt),Tr[1]=ir[1],Tr[2]=ir[2]*Math.cos(Mt)-ir[0]*Math.sin(Mt),Me[0]=Tr[0]+_t[0],Me[1]=Tr[1]+_t[1],Me[2]=Tr[2]+_t[2],Me}function He(Me,Ze,_t,Mt){var ir=[],Tr=[];return ir[0]=Ze[0]-_t[0],ir[1]=Ze[1]-_t[1],ir[2]=Ze[2]-_t[2],Tr[0]=ir[0]*Math.cos(Mt)-ir[1]*Math.sin(Mt),Tr[1]=ir[0]*Math.sin(Mt)+ir[1]*Math.cos(Mt),Tr[2]=ir[2],Me[0]=Tr[0]+_t[0],Me[1]=Tr[1]+_t[1],Me[2]=Tr[2]+_t[2],Me}function Ue(Me,Ze){var _t=Me[0],Mt=Me[1],ir=Me[2],Tr=Ze[0],et=Ze[1],en=Ze[2],Xr=Math.sqrt(_t*_t+Mt*Mt+ir*ir),Sr=Math.sqrt(Tr*Tr+et*et+en*en),pt=Xr*Sr,Ut=pt&&Re(Me,Ze)/pt;return Math.acos(Math.min(Math.max(Ut,-1),1))}function Qe(Me){return Me[0]=0,Me[1]=0,Me[2]=0,Me}function Se(Me){return"vec3("+Me[0]+", "+Me[1]+", "+Me[2]+")"}function xe(Me,Ze){return Me[0]===Ze[0]&&Me[1]===Ze[1]&&Me[2]===Ze[2]}function rt(Me,Ze){var _t=Me[0],Mt=Me[1],ir=Me[2],Tr=Ze[0],et=Ze[1],en=Ze[2];return Math.abs(_t-Tr)<=H.Ib*Math.max(1,Math.abs(_t),Math.abs(Tr))&&Math.abs(Mt-et)<=H.Ib*Math.max(1,Math.abs(Mt),Math.abs(et))&&Math.abs(ir-en)<=H.Ib*Math.max(1,Math.abs(ir),Math.abs(en))}var Je=Q,dt=ye,Bt=se,Ye=De,Xe=Ne,Le=X,je=Te,at=function(){var Me=W();return function(Ze,_t,Mt,ir,Tr,et){var en,Xr;for(_t||(_t=3),Mt||(Mt=0),ir?Xr=Math.min(ir*_t+Mt,Ze.length):Xr=Ze.length,en=Mt;en<Xr;en+=_t)Me[0]=Ze[en],Me[1]=Ze[en+1],Me[2]=Ze[en+2],Tr(Me,Me,et),Ze[en]=Me[0],Ze[en+1]=Me[1],Ze[en+2]=Me[2];return Ze}}()},50840:function(vt,N,k){var H;(function(W,w,X,j){"use strict";var ee=["","webkit","Moz","MS","ms","o"],Y=w.createElement("div"),re="function",Q=Math.round,ye=Math.abs,se=Date.now;function ne(jt,sr,Vr){return setTimeout(Ne(jt,Vr),sr)}function $(jt,sr,Vr){return Array.isArray(jt)?(A(jt,Vr[sr],Vr),!0):!1}function A(jt,sr,Vr){var Cn;if(jt)if(jt.forEach)jt.forEach(sr,Vr);else if(jt.length!==j)for(Cn=0;Cn<jt.length;)sr.call(Vr,jt[Cn],Cn,jt),Cn++;else for(Cn in jt)jt.hasOwnProperty(Cn)&&sr.call(Vr,jt[Cn],Cn,jt)}function b(jt,sr,Vr){var Cn="DEPRECATED METHOD: "+sr+`
`+Vr+` AT 
`;return function(){var Yn=new Error("get-stack-trace"),Wi=Yn&&Yn.stack?Yn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ho=W.console&&(W.console.warn||W.console.log);return ho&&ho.call(W.console,Cn,Wi),jt.apply(this,arguments)}}var te;typeof Object.assign!="function"?te=function(sr){if(sr===j||sr===null)throw new TypeError("Cannot convert undefined or null to object");for(var Vr=Object(sr),Cn=1;Cn<arguments.length;Cn++){var Yn=arguments[Cn];if(Yn!==j&&Yn!==null)for(var Wi in Yn)Yn.hasOwnProperty(Wi)&&(Vr[Wi]=Yn[Wi])}return Vr}:te=Object.assign;var le=b(function(sr,Vr,Cn){for(var Yn=Object.keys(Vr),Wi=0;Wi<Yn.length;)(!Cn||Cn&&sr[Yn[Wi]]===j)&&(sr[Yn[Wi]]=Vr[Yn[Wi]]),Wi++;return sr},"extend","Use `assign`."),Ae=b(function(sr,Vr){return le(sr,Vr,!0)},"merge","Use `assign`.");function De(jt,sr,Vr){var Cn=sr.prototype,Yn;Yn=jt.prototype=Object.create(Cn),Yn.constructor=jt,Yn._super=Cn,Vr&&te(Yn,Vr)}function Ne(jt,sr){return function(){return jt.apply(sr,arguments)}}function Te(jt,sr){return typeof jt==re?jt.apply(sr&&sr[0]||j,sr):jt}function We(jt,sr){return jt===j?sr:jt}function _e(jt,sr,Vr){A(Ge(sr),function(Cn){jt.addEventListener(Cn,Vr,!1)})}function we(jt,sr,Vr){A(Ge(sr),function(Cn){jt.removeEventListener(Cn,Vr,!1)})}function Re(jt,sr){for(;jt;){if(jt==sr)return!0;jt=jt.parentNode}return!1}function ze(jt,sr){return jt.indexOf(sr)>-1}function Ge(jt){return jt.trim().split(/\s+/g)}function yt(jt,sr,Vr){if(jt.indexOf&&!Vr)return jt.indexOf(sr);for(var Cn=0;Cn<jt.length;){if(Vr&&jt[Cn][Vr]==sr||!Vr&&jt[Cn]===sr)return Cn;Cn++}return-1}function ke(jt){return Array.prototype.slice.call(jt,0)}function tt(jt,sr,Vr){for(var Cn=[],Yn=[],Wi=0;Wi<jt.length;){var ho=sr?jt[Wi][sr]:jt[Wi];yt(Yn,ho)<0&&Cn.push(jt[Wi]),Yn[Wi]=ho,Wi++}return Vr&&(sr?Cn=Cn.sort(function(Mo,Fo){return Mo[sr]>Fo[sr]}):Cn=Cn.sort()),Cn}function ae(jt,sr){for(var Vr,Cn,Yn=sr[0].toUpperCase()+sr.slice(1),Wi=0;Wi<ee.length;){if(Vr=ee[Wi],Cn=Vr?Vr+Yn:sr,Cn in jt)return Cn;Wi++}return j}var Ke=1;function he(){return Ke++}function Pe(jt){var sr=jt.ownerDocument||jt;return sr.defaultView||sr.parentWindow||W}var lt=/mobile|tablet|ip(ad|hone|od)|android/i,He="ontouchstart"in W,Ue=ae(W,"PointerEvent")!==j,Qe=He&&lt.test(navigator.userAgent),Se="touch",xe="pen",rt="mouse",Je="kinect",dt=25,Bt=1,Ye=2,Xe=4,Le=8,je=1,at=2,Me=4,Ze=8,_t=16,Mt=at|Me,ir=Ze|_t,Tr=Mt|ir,et=["x","y"],en=["clientX","clientY"];function Xr(jt,sr){var Vr=this;this.manager=jt,this.callback=sr,this.element=jt.element,this.target=jt.options.inputTarget,this.domHandler=function(Cn){Te(jt.options.enable,[jt])&&Vr.handler(Cn)},this.init()}Xr.prototype={handler:function(){},init:function(){this.evEl&&_e(this.element,this.evEl,this.domHandler),this.evTarget&&_e(this.target,this.evTarget,this.domHandler),this.evWin&&_e(Pe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&we(this.element,this.evEl,this.domHandler),this.evTarget&&we(this.target,this.evTarget,this.domHandler),this.evWin&&we(Pe(this.element),this.evWin,this.domHandler)}};function Sr(jt){var sr,Vr=jt.options.inputClass;return Vr?sr=Vr:Ue?sr=ve:Qe?sr=It:He?sr=wn:sr=rr,new sr(jt,pt)}function pt(jt,sr,Vr){var Cn=Vr.pointers.length,Yn=Vr.changedPointers.length,Wi=sr&Bt&&Cn-Yn===0,ho=sr&(Xe|Le)&&Cn-Yn===0;Vr.isFirst=!!Wi,Vr.isFinal=!!ho,Wi&&(jt.session={}),Vr.eventType=sr,Ut(jt,Vr),jt.emit("hammer.input",Vr),jt.recognize(Vr),jt.session.prevInput=Vr}function Ut(jt,sr){var Vr=jt.session,Cn=sr.pointers,Yn=Cn.length;Vr.firstInput||(Vr.firstInput=qt(sr)),Yn>1&&!Vr.firstMultiple?Vr.firstMultiple=qt(sr):Yn===1&&(Vr.firstMultiple=!1);var Wi=Vr.firstInput,ho=Vr.firstMultiple,Gs=ho?ho.center:Wi.center,Mo=sr.center=fr(Cn);sr.timeStamp=se(),sr.deltaTime=sr.timeStamp-Wi.timeStamp,sr.angle=ue(Gs,Mo),sr.distance=Ir(Gs,Mo),Gt(Vr,sr),sr.offsetDirection=Er(sr.deltaX,sr.deltaY);var Fo=hr(sr.deltaTime,sr.deltaX,sr.deltaY);sr.overallVelocityX=Fo.x,sr.overallVelocityY=Fo.y,sr.overallVelocity=ye(Fo.x)>ye(Fo.y)?Fo.x:Fo.y,sr.scale=ho?oe(ho.pointers,Cn):1,sr.rotation=ho?G(ho.pointers,Cn):0,sr.maxPointers=Vr.prevInput?sr.pointers.length>Vr.prevInput.maxPointers?sr.pointers.length:Vr.prevInput.maxPointers:sr.pointers.length,Tt(Vr,sr);var Wu=jt.element;Re(sr.srcEvent.target,Wu)&&(Wu=sr.srcEvent.target),sr.target=Wu}function Gt(jt,sr){var Vr=sr.center,Cn=jt.offsetDelta||{},Yn=jt.prevDelta||{},Wi=jt.prevInput||{};(sr.eventType===Bt||Wi.eventType===Xe)&&(Yn=jt.prevDelta={x:Wi.deltaX||0,y:Wi.deltaY||0},Cn=jt.offsetDelta={x:Vr.x,y:Vr.y}),sr.deltaX=Yn.x+(Vr.x-Cn.x),sr.deltaY=Yn.y+(Vr.y-Cn.y)}function Tt(jt,sr){var Vr=jt.lastInterval||sr,Cn=sr.timeStamp-Vr.timeStamp,Yn,Wi,ho,Gs;if(sr.eventType!=Le&&(Cn>dt||Vr.velocity===j)){var Mo=sr.deltaX-Vr.deltaX,Fo=sr.deltaY-Vr.deltaY,Wu=hr(Cn,Mo,Fo);Wi=Wu.x,ho=Wu.y,Yn=ye(Wu.x)>ye(Wu.y)?Wu.x:Wu.y,Gs=Er(Mo,Fo),jt.lastInterval=sr}else Yn=Vr.velocity,Wi=Vr.velocityX,ho=Vr.velocityY,Gs=Vr.direction;sr.velocity=Yn,sr.velocityX=Wi,sr.velocityY=ho,sr.direction=Gs}function qt(jt){for(var sr=[],Vr=0;Vr<jt.pointers.length;)sr[Vr]={clientX:Q(jt.pointers[Vr].clientX),clientY:Q(jt.pointers[Vr].clientY)},Vr++;return{timeStamp:se(),pointers:sr,center:fr(sr),deltaX:jt.deltaX,deltaY:jt.deltaY}}function fr(jt){var sr=jt.length;if(sr===1)return{x:Q(jt[0].clientX),y:Q(jt[0].clientY)};for(var Vr=0,Cn=0,Yn=0;Yn<sr;)Vr+=jt[Yn].clientX,Cn+=jt[Yn].clientY,Yn++;return{x:Q(Vr/sr),y:Q(Cn/sr)}}function hr(jt,sr,Vr){return{x:sr/jt||0,y:Vr/jt||0}}function Er(jt,sr){return jt===sr?je:ye(jt)>=ye(sr)?jt<0?at:Me:sr<0?Ze:_t}function Ir(jt,sr,Vr){Vr||(Vr=et);var Cn=sr[Vr[0]]-jt[Vr[0]],Yn=sr[Vr[1]]-jt[Vr[1]];return Math.sqrt(Cn*Cn+Yn*Yn)}function ue(jt,sr,Vr){Vr||(Vr=et);var Cn=sr[Vr[0]]-jt[Vr[0]],Yn=sr[Vr[1]]-jt[Vr[1]];return Math.atan2(Yn,Cn)*180/Math.PI}function G(jt,sr){return ue(sr[1],sr[0],en)+ue(jt[1],jt[0],en)}function oe(jt,sr){return Ir(sr[0],sr[1],en)/Ir(jt[0],jt[1],en)}var Ie={mousedown:Bt,mousemove:Ye,mouseup:Xe},qe="mousedown",At="mousemove mouseup";function rr(){this.evEl=qe,this.evWin=At,this.pressed=!1,Xr.apply(this,arguments)}De(rr,Xr,{handler:function(sr){var Vr=Ie[sr.type];Vr&Bt&&sr.button===0&&(this.pressed=!0),Vr&Ye&&sr.which!==1&&(Vr=Xe),this.pressed&&(Vr&Xe&&(this.pressed=!1),this.callback(this.manager,Vr,{pointers:[sr],changedPointers:[sr],pointerType:rt,srcEvent:sr}))}});var Zt={pointerdown:Bt,pointermove:Ye,pointerup:Xe,pointercancel:Le,pointerout:Le},wt={2:Se,3:xe,4:rt,5:Je},Pt="pointerdown",ge="pointermove pointerup pointercancel";W.MSPointerEvent&&!W.PointerEvent&&(Pt="MSPointerDown",ge="MSPointerMove MSPointerUp MSPointerCancel");function ve(){this.evEl=Pt,this.evWin=ge,Xr.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}De(ve,Xr,{handler:function(sr){var Vr=this.store,Cn=!1,Yn=sr.type.toLowerCase().replace("ms",""),Wi=Zt[Yn],ho=wt[sr.pointerType]||sr.pointerType,Gs=ho==Se,Mo=yt(Vr,sr.pointerId,"pointerId");Wi&Bt&&(sr.button===0||Gs)?Mo<0&&(Vr.push(sr),Mo=Vr.length-1):Wi&(Xe|Le)&&(Cn=!0),!(Mo<0)&&(Vr[Mo]=sr,this.callback(this.manager,Wi,{pointers:Vr,changedPointers:[sr],pointerType:ho,srcEvent:sr}),Cn&&Vr.splice(Mo,1))}});var Fe={touchstart:Bt,touchmove:Ye,touchend:Xe,touchcancel:Le},nt="touchstart",St="touchstart touchmove touchend touchcancel";function $t(){this.evTarget=nt,this.evWin=St,this.started=!1,Xr.apply(this,arguments)}De($t,Xr,{handler:function(sr){var Vr=Fe[sr.type];if(Vr===Bt&&(this.started=!0),!!this.started){var Cn=vr.call(this,sr,Vr);Vr&(Xe|Le)&&Cn[0].length-Cn[1].length===0&&(this.started=!1),this.callback(this.manager,Vr,{pointers:Cn[0],changedPointers:Cn[1],pointerType:Se,srcEvent:sr})}}});function vr(jt,sr){var Vr=ke(jt.touches),Cn=ke(jt.changedTouches);return sr&(Xe|Le)&&(Vr=tt(Vr.concat(Cn),"identifier",!0)),[Vr,Cn]}var Rt={touchstart:Bt,touchmove:Ye,touchend:Xe,touchcancel:Le},ct="touchstart touchmove touchend touchcancel";function It(){this.evTarget=ct,this.targetIds={},Xr.apply(this,arguments)}De(It,Xr,{handler:function(sr){var Vr=Rt[sr.type],Cn=gr.call(this,sr,Vr);Cn&&this.callback(this.manager,Vr,{pointers:Cn[0],changedPointers:Cn[1],pointerType:Se,srcEvent:sr})}});function gr(jt,sr){var Vr=ke(jt.touches),Cn=this.targetIds;if(sr&(Bt|Ye)&&Vr.length===1)return Cn[Vr[0].identifier]=!0,[Vr,Vr];var Yn,Wi,ho=ke(jt.changedTouches),Gs=[],Mo=this.target;if(Wi=Vr.filter(function(Fo){return Re(Fo.target,Mo)}),sr===Bt)for(Yn=0;Yn<Wi.length;)Cn[Wi[Yn].identifier]=!0,Yn++;for(Yn=0;Yn<ho.length;)Cn[ho[Yn].identifier]&&Gs.push(ho[Yn]),sr&(Xe|Le)&&delete Cn[ho[Yn].identifier],Yn++;if(Gs.length)return[tt(Wi.concat(Gs),"identifier",!0),Gs]}var Br=2500,Nt=25;function wn(){Xr.apply(this,arguments);var jt=Ne(this.handler,this);this.touch=new It(this.manager,jt),this.mouse=new rr(this.manager,jt),this.primaryTouch=null,this.lastTouches=[]}De(wn,Xr,{handler:function(sr,Vr,Cn){var Yn=Cn.pointerType==Se,Wi=Cn.pointerType==rt;if(!(Wi&&Cn.sourceCapabilities&&Cn.sourceCapabilities.firesTouchEvents)){if(Yn)ei.call(this,Vr,Cn);else if(Wi&&ln.call(this,Cn))return;this.callback(sr,Vr,Cn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ei(jt,sr){jt&Bt?(this.primaryTouch=sr.changedPointers[0].identifier,ci.call(this,sr)):jt&(Xe|Le)&&ci.call(this,sr)}function ci(jt){var sr=jt.changedPointers[0];if(sr.identifier===this.primaryTouch){var Vr={x:sr.clientX,y:sr.clientY};this.lastTouches.push(Vr);var Cn=this.lastTouches,Yn=function(){var Wi=Cn.indexOf(Vr);Wi>-1&&Cn.splice(Wi,1)};setTimeout(Yn,Br)}}function ln(jt){for(var sr=jt.srcEvent.clientX,Vr=jt.srcEvent.clientY,Cn=0;Cn<this.lastTouches.length;Cn++){var Yn=this.lastTouches[Cn],Wi=Math.abs(sr-Yn.x),ho=Math.abs(Vr-Yn.y);if(Wi<=Nt&&ho<=Nt)return!0}return!1}var ti=ae(Y.style,"touchAction"),$n=ti!==j,ri="compute",oa="auto",yi="manipulation",ya="none",Ya="pan-x",ha="pan-y",Fa=co();function Sa(jt,sr){this.manager=jt,this.set(sr)}Sa.prototype={set:function(jt){jt==ri&&(jt=this.compute()),$n&&this.manager.element.style&&Fa[jt]&&(this.manager.element.style[ti]=jt),this.actions=jt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var jt=[];return A(this.manager.recognizers,function(sr){Te(sr.options.enable,[sr])&&(jt=jt.concat(sr.getTouchAction()))}),xs(jt.join(" "))},preventDefaults:function(jt){var sr=jt.srcEvent,Vr=jt.offsetDirection;if(this.manager.session.prevented){sr.preventDefault();return}var Cn=this.actions,Yn=ze(Cn,ya)&&!Fa[ya],Wi=ze(Cn,ha)&&!Fa[ha],ho=ze(Cn,Ya)&&!Fa[Ya];if(Yn){var Gs=jt.pointers.length===1,Mo=jt.distance<2,Fo=jt.deltaTime<250;if(Gs&&Mo&&Fo)return}if(!(ho&&Wi)&&(Yn||Wi&&Vr&Mt||ho&&Vr&ir))return this.preventSrc(sr)},preventSrc:function(jt){this.manager.session.prevented=!0,jt.preventDefault()}};function xs(jt){if(ze(jt,ya))return ya;var sr=ze(jt,Ya),Vr=ze(jt,ha);return sr&&Vr?ya:sr||Vr?sr?Ya:ha:ze(jt,yi)?yi:oa}function co(){if(!$n)return!1;var jt={},sr=W.CSS&&W.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Vr){jt[Vr]=sr?W.CSS.supports("touch-action",Vr):!0}),jt}var Lo=1,Za=2,Kn=4,Ci=8,Ga=Ci,Jo=16,fo=32;function To(jt){this.options=te({},this.defaults,jt||{}),this.id=he(),this.manager=null,this.options.enable=We(this.options.enable,!0),this.state=Lo,this.simultaneous={},this.requireFail=[]}To.prototype={defaults:{},set:function(jt){return te(this.options,jt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(jt){if($(jt,"recognizeWith",this))return this;var sr=this.simultaneous;return jt=er(jt,this),sr[jt.id]||(sr[jt.id]=jt,jt.recognizeWith(this)),this},dropRecognizeWith:function(jt){return $(jt,"dropRecognizeWith",this)?this:(jt=er(jt,this),delete this.simultaneous[jt.id],this)},requireFailure:function(jt){if($(jt,"requireFailure",this))return this;var sr=this.requireFail;return jt=er(jt,this),yt(sr,jt)===-1&&(sr.push(jt),jt.requireFailure(this)),this},dropRequireFailure:function(jt){if($(jt,"dropRequireFailure",this))return this;jt=er(jt,this);var sr=yt(this.requireFail,jt);return sr>-1&&this.requireFail.splice(sr,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(jt){return!!this.simultaneous[jt.id]},emit:function(jt){var sr=this,Vr=this.state;function Cn(Yn){sr.manager.emit(Yn,jt)}Vr<Ci&&Cn(sr.options.event+lr(Vr)),Cn(sr.options.event),jt.additionalEvent&&Cn(jt.additionalEvent),Vr>=Ci&&Cn(sr.options.event+lr(Vr))},tryEmit:function(jt){if(this.canEmit())return this.emit(jt);this.state=fo},canEmit:function(){for(var jt=0;jt<this.requireFail.length;){if(!(this.requireFail[jt].state&(fo|Lo)))return!1;jt++}return!0},recognize:function(jt){var sr=te({},jt);if(!Te(this.options.enable,[this,sr])){this.reset(),this.state=fo;return}this.state&(Ga|Jo|fo)&&(this.state=Lo),this.state=this.process(sr),this.state&(Za|Kn|Ci|Jo)&&this.tryEmit(sr)},process:function(jt){},getTouchAction:function(){},reset:function(){}};function lr(jt){return jt&Jo?"cancel":jt&Ci?"end":jt&Kn?"move":jt&Za?"start":""}function Dt(jt){return jt==_t?"down":jt==Ze?"up":jt==at?"left":jt==Me?"right":""}function er(jt,sr){var Vr=sr.manager;return Vr?Vr.get(jt):jt}function kr(){To.apply(this,arguments)}De(kr,To,{defaults:{pointers:1},attrTest:function(jt){var sr=this.options.pointers;return sr===0||jt.pointers.length===sr},process:function(jt){var sr=this.state,Vr=jt.eventType,Cn=sr&(Za|Kn),Yn=this.attrTest(jt);return Cn&&(Vr&Le||!Yn)?sr|Jo:Cn||Yn?Vr&Xe?sr|Ci:sr&Za?sr|Kn:Za:fo}});function tn(){kr.apply(this,arguments),this.pX=null,this.pY=null}De(tn,kr,{defaults:{event:"pan",threshold:10,pointers:1,direction:Tr},getTouchAction:function(){var jt=this.options.direction,sr=[];return jt&Mt&&sr.push(ha),jt&ir&&sr.push(Ya),sr},directionTest:function(jt){var sr=this.options,Vr=!0,Cn=jt.distance,Yn=jt.direction,Wi=jt.deltaX,ho=jt.deltaY;return Yn&sr.direction||(sr.direction&Mt?(Yn=Wi===0?je:Wi<0?at:Me,Vr=Wi!=this.pX,Cn=Math.abs(jt.deltaX)):(Yn=ho===0?je:ho<0?Ze:_t,Vr=ho!=this.pY,Cn=Math.abs(jt.deltaY))),jt.direction=Yn,Vr&&Cn>sr.threshold&&Yn&sr.direction},attrTest:function(jt){return kr.prototype.attrTest.call(this,jt)&&(this.state&Za||!(this.state&Za)&&this.directionTest(jt))},emit:function(jt){this.pX=jt.deltaX,this.pY=jt.deltaY;var sr=Dt(jt.direction);sr&&(jt.additionalEvent=this.options.event+sr),this._super.emit.call(this,jt)}});function In(){kr.apply(this,arguments)}De(In,kr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ya]},attrTest:function(jt){return this._super.attrTest.call(this,jt)&&(Math.abs(jt.scale-1)>this.options.threshold||this.state&Za)},emit:function(jt){if(jt.scale!==1){var sr=jt.scale<1?"in":"out";jt.additionalEvent=this.options.event+sr}this._super.emit.call(this,jt)}});function zn(){To.apply(this,arguments),this._timer=null,this._input=null}De(zn,To,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oa]},process:function(jt){var sr=this.options,Vr=jt.pointers.length===sr.pointers,Cn=jt.distance<sr.threshold,Yn=jt.deltaTime>sr.time;if(this._input=jt,!Cn||!Vr||jt.eventType&(Xe|Le)&&!Yn)this.reset();else if(jt.eventType&Bt)this.reset(),this._timer=ne(function(){this.state=Ga,this.tryEmit()},sr.time,this);else if(jt.eventType&Xe)return Ga;return fo},reset:function(){clearTimeout(this._timer)},emit:function(jt){this.state===Ga&&(jt&&jt.eventType&Xe?this.manager.emit(this.options.event+"up",jt):(this._input.timeStamp=se(),this.manager.emit(this.options.event,this._input)))}});function On(){kr.apply(this,arguments)}De(On,kr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ya]},attrTest:function(jt){return this._super.attrTest.call(this,jt)&&(Math.abs(jt.rotation)>this.options.threshold||this.state&Za)}});function Vi(){kr.apply(this,arguments)}De(Vi,kr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Mt|ir,pointers:1},getTouchAction:function(){return tn.prototype.getTouchAction.call(this)},attrTest:function(jt){var sr=this.options.direction,Vr;return sr&(Mt|ir)?Vr=jt.overallVelocity:sr&Mt?Vr=jt.overallVelocityX:sr&ir&&(Vr=jt.overallVelocityY),this._super.attrTest.call(this,jt)&&sr&jt.offsetDirection&&jt.distance>this.options.threshold&&jt.maxPointers==this.options.pointers&&ye(Vr)>this.options.velocity&&jt.eventType&Xe},emit:function(jt){var sr=Dt(jt.offsetDirection);sr&&this.manager.emit(this.options.event+sr,jt),this.manager.emit(this.options.event,jt)}});function Bi(){To.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}De(Bi,To,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yi]},process:function(jt){var sr=this.options,Vr=jt.pointers.length===sr.pointers,Cn=jt.distance<sr.threshold,Yn=jt.deltaTime<sr.time;if(this.reset(),jt.eventType&Bt&&this.count===0)return this.failTimeout();if(Cn&&Yn&&Vr){if(jt.eventType!=Xe)return this.failTimeout();var Wi=this.pTime?jt.timeStamp-this.pTime<sr.interval:!0,ho=!this.pCenter||Ir(this.pCenter,jt.center)<sr.posThreshold;this.pTime=jt.timeStamp,this.pCenter=jt.center,!ho||!Wi?this.count=1:this.count+=1,this._input=jt;var Gs=this.count%sr.taps;if(Gs===0)return this.hasRequireFailures()?(this._timer=ne(function(){this.state=Ga,this.tryEmit()},sr.interval,this),Za):Ga}return fo},failTimeout:function(){return this._timer=ne(function(){this.state=fo},this.options.interval,this),fo},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ga&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ja(jt,sr){return sr=sr||{},sr.recognizers=We(sr.recognizers,Ja.defaults.preset),new ko(jt,sr)}Ja.VERSION="2.0.7",Ja.defaults={domEvents:!1,touchAction:ri,enable:!0,inputTarget:null,inputClass:null,preset:[[On,{enable:!1}],[In,{enable:!1},["rotate"]],[Vi,{direction:Mt}],[tn,{direction:Mt},["swipe"]],[Bi],[Bi,{event:"doubletap",taps:2},["tap"]],[zn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ao=1,fs=2;function ko(jt,sr){this.options=te({},Ja.defaults,sr||{}),this.options.inputTarget=this.options.inputTarget||jt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=jt,this.input=Sr(this),this.touchAction=new Sa(this,this.options.touchAction),oo(this,!0),A(this.options.recognizers,function(Vr){var Cn=this.add(new Vr[0](Vr[1]));Vr[2]&&Cn.recognizeWith(Vr[2]),Vr[3]&&Cn.requireFailure(Vr[3])},this)}ko.prototype={set:function(jt){return te(this.options,jt),jt.touchAction&&this.touchAction.update(),jt.inputTarget&&(this.input.destroy(),this.input.target=jt.inputTarget,this.input.init()),this},stop:function(jt){this.session.stopped=jt?fs:Ao},recognize:function(jt){var sr=this.session;if(!sr.stopped){this.touchAction.preventDefaults(jt);var Vr,Cn=this.recognizers,Yn=sr.curRecognizer;(!Yn||Yn&&Yn.state&Ga)&&(Yn=sr.curRecognizer=null);for(var Wi=0;Wi<Cn.length;)Vr=Cn[Wi],sr.stopped!==fs&&(!Yn||Vr==Yn||Vr.canRecognizeWith(Yn))?Vr.recognize(jt):Vr.reset(),!Yn&&Vr.state&(Za|Kn|Ci)&&(Yn=sr.curRecognizer=Vr),Wi++}},get:function(jt){if(jt instanceof To)return jt;for(var sr=this.recognizers,Vr=0;Vr<sr.length;Vr++)if(sr[Vr].options.event==jt)return sr[Vr];return null},add:function(jt){if($(jt,"add",this))return this;var sr=this.get(jt.options.event);return sr&&this.remove(sr),this.recognizers.push(jt),jt.manager=this,this.touchAction.update(),jt},remove:function(jt){if($(jt,"remove",this))return this;if(jt=this.get(jt),jt){var sr=this.recognizers,Vr=yt(sr,jt);Vr!==-1&&(sr.splice(Vr,1),this.touchAction.update())}return this},on:function(jt,sr){if(jt!==j&&sr!==j){var Vr=this.handlers;return A(Ge(jt),function(Cn){Vr[Cn]=Vr[Cn]||[],Vr[Cn].push(sr)}),this}},off:function(jt,sr){if(jt!==j){var Vr=this.handlers;return A(Ge(jt),function(Cn){sr?Vr[Cn]&&Vr[Cn].splice(yt(Vr[Cn],sr),1):delete Vr[Cn]}),this}},emit:function(jt,sr){this.options.domEvents&&iu(jt,sr);var Vr=this.handlers[jt]&&this.handlers[jt].slice();if(!(!Vr||!Vr.length)){sr.type=jt,sr.preventDefault=function(){sr.srcEvent.preventDefault()};for(var Cn=0;Cn<Vr.length;)Vr[Cn](sr),Cn++}},destroy:function(){this.element&&oo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function oo(jt,sr){var Vr=jt.element;if(Vr.style){var Cn;A(jt.options.cssProps,function(Yn,Wi){Cn=ae(Vr.style,Wi),sr?(jt.oldCssProps[Cn]=Vr.style[Cn],Vr.style[Cn]=Yn):Vr.style[Cn]=jt.oldCssProps[Cn]||""}),sr||(jt.oldCssProps={})}}function iu(jt,sr){var Vr=w.createEvent("Event");Vr.initEvent(jt,!0,!0),Vr.gesture=sr,sr.target.dispatchEvent(Vr)}te(Ja,{INPUT_START:Bt,INPUT_MOVE:Ye,INPUT_END:Xe,INPUT_CANCEL:Le,STATE_POSSIBLE:Lo,STATE_BEGAN:Za,STATE_CHANGED:Kn,STATE_ENDED:Ci,STATE_RECOGNIZED:Ga,STATE_CANCELLED:Jo,STATE_FAILED:fo,DIRECTION_NONE:je,DIRECTION_LEFT:at,DIRECTION_RIGHT:Me,DIRECTION_UP:Ze,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:Mt,DIRECTION_VERTICAL:ir,DIRECTION_ALL:Tr,Manager:ko,Input:Xr,TouchAction:Sa,TouchInput:It,MouseInput:rr,PointerEventInput:ve,TouchMouseInput:wn,SingleTouchInput:$t,Recognizer:To,AttrRecognizer:kr,Tap:Bi,Pan:tn,Swipe:Vi,Pinch:In,Rotate:On,Press:zn,on:_e,off:we,each:A,merge:Ae,extend:le,assign:te,inherit:De,bindFn:Ne,prefixed:ae});var Ko=typeof W!="undefined"?W:typeof self!="undefined"?self:{};Ko.Hammer=Ja,H=function(){return Ja}.call(N,k,N,vt),H!==j&&(vt.exports=H)})(window,document,"Hammer")},7375:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=Symbol.for("INJECTION");function H(ee,Y,re,Q){function ye(){return Q&&!Reflect.hasMetadata(k,this,Y)&&Reflect.defineMetadata(k,re(),this,Y),Reflect.hasMetadata(k,this,Y)?Reflect.getMetadata(k,this,Y):re()}function se(ne){Reflect.defineMetadata(k,ne,this,Y)}Object.defineProperty(ee,Y,{configurable:!0,enumerable:!0,get:ye,set:se})}function W(ee,Y){return function(re){return function(Q,ye){var se=function(){return ee.get(re)};H(Q,ye,se,Y)}}}N.makePropertyInjectDecorator=W;function w(ee,Y){return function(re,Q){return function(ye,se){var ne=function(){return ee.getNamed(re,Q)};H(ye,se,ne,Y)}}}N.makePropertyInjectNamedDecorator=w;function X(ee,Y){return function(re,Q,ye){return function(se,ne){var $=function(){return ee.getTagged(re,Q,ye)};H(se,ne,$,Y)}}}N.makePropertyInjectTaggedDecorator=X;function j(ee,Y){return function(re){return function(Q,ye){var se=function(){return ee.getAll(re)};H(Q,ye,se,Y)}}}N.makePropertyMultiInjectDecorator=j},84879:function(vt,N,k){"use strict";var H;H={value:!0};var W=k(7375);function w(X,j){j===void 0&&(j=!0);var ee=W.makePropertyInjectDecorator(X,j),Y=W.makePropertyInjectNamedDecorator(X,j),re=W.makePropertyInjectTaggedDecorator(X,j),Q=W.makePropertyMultiInjectDecorator(X,j);return{lazyInject:ee,lazyInjectNamed:Y,lazyInjectTagged:re,lazyMultiInject:Q}}N.Z=w},99934:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagProperty=N.tagParameter=N.decorate=void 0;var H=k(16674),W=k(6867);function w(Q,ye,se,ne){var $=W.TAGGED;j($,Q,ye,ne,se)}N.tagParameter=w;function X(Q,ye,se){var ne=W.TAGGED_PROP;j(ne,Q.constructor,ye,se)}N.tagProperty=X;function j(Q,ye,se,ne,$){var A={},b=typeof $=="number",te=$!==void 0&&b?$.toString():se;if(b&&se!==void 0)throw new Error(H.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(Q,ye)&&(A=Reflect.getMetadata(Q,ye));var le=A[te];if(!Array.isArray(le))le=[];else for(var Ae=0,De=le;Ae<De.length;Ae++){var Ne=De[Ae];if(Ne.key===ne.key)throw new Error(H.DUPLICATED_METADATA+" "+Ne.key.toString())}le.push(ne),A[te]=le,Reflect.defineMetadata(Q,A,ye)}function ee(Q,ye){Reflect.decorate(Q,ye)}function Y(Q,ye){return function(se,ne){ye(se,ne,Q)}}function re(Q,ye,se){typeof se=="number"?ee([Y(se,Q)],ye):typeof se=="string"?Reflect.decorate([Q],ye,se):ee([Q],ye)}N.decorate=re},5744:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.inject=N.LazyServiceIdentifer=void 0;var H=k(16674),W=k(6867),w=k(47738),X=k(99934),j=function(){function Y(re){this._cb=re}return Y.prototype.unwrap=function(){return this._cb()},Y}();N.LazyServiceIdentifer=j;function ee(Y){return function(re,Q,ye){if(Y===void 0)throw new Error(H.UNDEFINED_INJECT_ANNOTATION(re.name));var se=new w.Metadata(W.INJECT_TAG,Y);typeof ye=="number"?X.tagParameter(re,Q,ye,se):X.tagProperty(re,Q,se)}}N.inject=ee},64315:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.injectable=void 0;var H=k(16674),W=k(6867);function w(){return function(X){if(Reflect.hasOwnMetadata(W.PARAM_TYPES,X))throw new Error(H.DUPLICATED_INJECTABLE_DECORATOR);var j=Reflect.getMetadata(W.DESIGN_PARAM_TYPES,X)||[];return Reflect.defineMetadata(W.PARAM_TYPES,j,X),X}}N.injectable=w},71693:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiInject=void 0;var H=k(6867),W=k(47738),w=k(99934);function X(j){return function(ee,Y,re){var Q=new W.Metadata(H.MULTI_INJECT_TAG,j);typeof re=="number"?w.tagParameter(ee,Y,re,Q):w.tagProperty(ee,Y,Q)}}N.multiInject=X},38085:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.named=void 0;var H=k(6867),W=k(47738),w=k(99934);function X(j){return function(ee,Y,re){var Q=new W.Metadata(H.NAMED_TAG,j);typeof re=="number"?w.tagParameter(ee,Y,re,Q):w.tagProperty(ee,Y,Q)}}N.named=X},6515:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.optional=void 0;var H=k(6867),W=k(47738),w=k(99934);function X(){return function(j,ee,Y){var re=new W.Metadata(H.OPTIONAL_TAG,!0);typeof Y=="number"?w.tagParameter(j,ee,Y,re):w.tagProperty(j,ee,re)}}N.optional=X},7014:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.postConstruct=void 0;var H=k(16674),W=k(6867),w=k(47738);function X(){return function(j,ee,Y){var re=new w.Metadata(W.POST_CONSTRUCT,ee);if(Reflect.hasOwnMetadata(W.POST_CONSTRUCT,j.constructor))throw new Error(H.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(W.POST_CONSTRUCT,re,j.constructor)}}N.postConstruct=X},32052:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagged=void 0;var H=k(47738),W=k(99934);function w(X,j){return function(ee,Y,re){var Q=new H.Metadata(X,j);typeof re=="number"?W.tagParameter(ee,Y,re,Q):W.tagProperty(ee,Y,Q)}}N.tagged=w},55638:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.targetName=void 0;var H=k(6867),W=k(47738),w=k(99934);function X(j){return function(ee,Y,re){var Q=new W.Metadata(H.NAME_TAG,j);w.tagParameter(ee,Y,re,Q)}}N.targetName=X},86757:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.unmanaged=void 0;var H=k(6867),W=k(47738),w=k(99934);function X(){return function(j,ee,Y){var re=new W.Metadata(H.UNMANAGED_TAG,!0);w.tagParameter(j,ee,Y,re)}}N.unmanaged=X},44290:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Binding=void 0;var H=k(28421),W=k(37791),w=function(){function X(j,ee){this.id=W.id(),this.activated=!1,this.serviceIdentifier=j,this.scope=ee,this.type=H.BindingTypeEnum.Invalid,this.constraint=function(Y){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return X.prototype.clone=function(){var j=new X(this.serviceIdentifier,this.scope);return j.activated=j.scope===H.BindingScopeEnum.Singleton?this.activated:!1,j.implementationType=this.implementationType,j.dynamicValue=this.dynamicValue,j.scope=this.scope,j.type=this.type,j.factory=this.factory,j.provider=this.provider,j.constraint=this.constraint,j.onActivation=this.onActivation,j.cache=this.cache,j},X}();N.Binding=w},23184:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingCount=void 0;var k={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};N.BindingCount=k},16674:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.STACK_OVERFLOW=N.CIRCULAR_DEPENDENCY_IN_FACTORY=N.POST_CONSTRUCT_ERROR=N.MULTIPLE_POST_CONSTRUCT_METHODS=N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=N.ARGUMENTS_LENGTH_MISMATCH=N.INVALID_DECORATOR_OPERATION=N.INVALID_TO_SELF_VALUE=N.INVALID_FUNCTION_BINDING=N.INVALID_MIDDLEWARE_RETURN=N.NO_MORE_SNAPSHOTS_AVAILABLE=N.INVALID_BINDING_TYPE=N.NOT_IMPLEMENTED=N.CIRCULAR_DEPENDENCY=N.UNDEFINED_INJECT_ANNOTATION=N.MISSING_INJECT_ANNOTATION=N.MISSING_INJECTABLE_ANNOTATION=N.NOT_REGISTERED=N.CANNOT_UNBIND=N.AMBIGUOUS_MATCH=N.KEY_NOT_FOUND=N.NULL_ARGUMENT=N.DUPLICATED_METADATA=N.DUPLICATED_INJECTABLE_DECORATOR=void 0,N.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",N.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",N.NULL_ARGUMENT="NULL argument",N.KEY_NOT_FOUND="Key Not Found",N.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",N.CANNOT_UNBIND="Could not unbind serviceIdentifier:",N.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",N.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",N.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var k=function(X){return"@inject called with undefined this could mean that the class "+X+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};N.UNDEFINED_INJECT_ANNOTATION=k,N.CIRCULAR_DEPENDENCY="Circular dependency found:",N.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",N.INVALID_BINDING_TYPE="Invalid binding type:",N.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",N.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",N.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",N.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",N.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var H=function(){for(var X=[],j=0;j<arguments.length;j++)X[j]=arguments[j];return"The number of constructor arguments in the derived class "+(X[0]+" must be >= than the number of constructor arguments of its base class.")};N.ARGUMENTS_LENGTH_MISMATCH=H,N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",N.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var W=function(){for(var X=[],j=0;j<arguments.length;j++)X[j]=arguments[j];return"@postConstruct error in class "+X[0]+": "+X[1]};N.POST_CONSTRUCT_ERROR=W;var w=function(){for(var X=[],j=0;j<arguments.length;j++)X[j]=arguments[j];return"It looks like there is a circular dependency "+("in one of the '"+X[0]+"' bindings. Please investigate bindings with")+("service identifier '"+X[1]+"'.")};N.CIRCULAR_DEPENDENCY_IN_FACTORY=w,N.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TargetTypeEnum=N.BindingTypeEnum=N.BindingScopeEnum=void 0;var k={Request:"Request",Singleton:"Singleton",Transient:"Transient"};N.BindingScopeEnum=k;var H={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};N.BindingTypeEnum=H;var W={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};N.TargetTypeEnum=W},6867:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.NON_CUSTOM_TAG_KEYS=N.POST_CONSTRUCT=N.DESIGN_PARAM_TYPES=N.PARAM_TYPES=N.TAGGED_PROP=N.TAGGED=N.MULTI_INJECT_TAG=N.INJECT_TAG=N.OPTIONAL_TAG=N.UNMANAGED_TAG=N.NAME_TAG=N.NAMED_TAG=void 0,N.NAMED_TAG="named",N.NAME_TAG="name",N.UNMANAGED_TAG="unmanaged",N.OPTIONAL_TAG="optional",N.INJECT_TAG="inject",N.MULTI_INJECT_TAG="multi_inject",N.TAGGED="inversify:tagged",N.TAGGED_PROP="inversify:tagged_props",N.PARAM_TYPES="inversify:paramtypes",N.DESIGN_PARAM_TYPES="design:paramtypes",N.POST_CONSTRUCT="post_construct";function k(){return[N.INJECT_TAG,N.MULTI_INJECT_TAG,N.NAME_TAG,N.UNMANAGED_TAG,N.NAMED_TAG,N.OPTIONAL_TAG]}N.NON_CUSTOM_TAG_KEYS=k()},51389:function(vt,N,k){"use strict";var H=this&&this.__awaiter||function(le,Ae,De,Ne){function Te(We){return We instanceof De?We:new De(function(_e){_e(We)})}return new(De||(De=Promise))(function(We,_e){function we(Ge){try{ze(Ne.next(Ge))}catch(yt){_e(yt)}}function Re(Ge){try{ze(Ne.throw(Ge))}catch(yt){_e(yt)}}function ze(Ge){Ge.done?We(Ge.value):Te(Ge.value).then(we,Re)}ze((Ne=Ne.apply(le,Ae||[])).next())})},W=this&&this.__generator||function(le,Ae){var De={label:0,sent:function(){if(We[0]&1)throw We[1];return We[1]},trys:[],ops:[]},Ne,Te,We,_e;return _e={next:we(0),throw:we(1),return:we(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e;function we(ze){return function(Ge){return Re([ze,Ge])}}function Re(ze){if(Ne)throw new TypeError("Generator is already executing.");for(;De;)try{if(Ne=1,Te&&(We=ze[0]&2?Te.return:ze[0]?Te.throw||((We=Te.return)&&We.call(Te),0):Te.next)&&!(We=We.call(Te,ze[1])).done)return We;switch(Te=0,We&&(ze=[ze[0]&2,We.value]),ze[0]){case 0:case 1:We=ze;break;case 4:return De.label++,{value:ze[1],done:!1};case 5:De.label++,Te=ze[1],ze=[0];continue;case 7:ze=De.ops.pop(),De.trys.pop();continue;default:if(We=De.trys,!(We=We.length>0&&We[We.length-1])&&(ze[0]===6||ze[0]===2)){De=0;continue}if(ze[0]===3&&(!We||ze[1]>We[0]&&ze[1]<We[3])){De.label=ze[1];break}if(ze[0]===6&&De.label<We[1]){De.label=We[1],We=ze;break}if(We&&De.label<We[2]){De.label=We[2],De.ops.push(ze);break}We[2]&&De.ops.pop(),De.trys.pop();continue}ze=Ae.call(le,De)}catch(Ge){ze=[6,Ge],Te=0}finally{Ne=We=0}if(ze[0]&5)throw ze[1];return{value:ze[0]?ze[1]:void 0,done:!0}}},w=this&&this.__spreadArray||function(le,Ae){for(var De=0,Ne=Ae.length,Te=le.length;De<Ne;De++,Te++)le[Te]=Ae[De];return le};Object.defineProperty(N,"__esModule",{value:!0}),N.Container=void 0;var X=k(44290),j=k(16674),ee=k(28421),Y=k(6867),re=k(51377),Q=k(86311),ye=k(7478),se=k(51860),ne=k(37791),$=k(55800),A=k(85700),b=k(80175),te=function(){function le(Ae){this._appliedMiddleware=[];var De=Ae||{};if(typeof De!="object")throw new Error(""+j.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(De.defaultScope===void 0)De.defaultScope=ee.BindingScopeEnum.Transient;else if(De.defaultScope!==ee.BindingScopeEnum.Singleton&&De.defaultScope!==ee.BindingScopeEnum.Transient&&De.defaultScope!==ee.BindingScopeEnum.Request)throw new Error(""+j.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(De.autoBindInjectable===void 0)De.autoBindInjectable=!1;else if(typeof De.autoBindInjectable!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(De.skipBaseClassChecks===void 0)De.skipBaseClassChecks=!1;else if(typeof De.skipBaseClassChecks!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:De.autoBindInjectable,defaultScope:De.defaultScope,skipBaseClassChecks:De.skipBaseClassChecks},this.id=ne.id(),this._bindingDictionary=new b.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new re.MetadataReader}return le.merge=function(Ae,De){for(var Ne=[],Te=2;Te<arguments.length;Te++)Ne[Te-2]=arguments[Te];var We=new le,_e=w([Ae,De],Ne).map(function(ze){return Q.getBindingDictionary(ze)}),we=Q.getBindingDictionary(We);function Re(ze,Ge){ze.traverse(function(yt,ke){ke.forEach(function(tt){Ge.add(tt.serviceIdentifier,tt.clone())})})}return _e.forEach(function(ze){Re(ze,we)}),We},le.prototype.load=function(){for(var Ae=[],De=0;De<arguments.length;De++)Ae[De]=arguments[De];for(var Ne=this._getContainerModuleHelpersFactory(),Te=0,We=Ae;Te<We.length;Te++){var _e=We[Te],we=Ne(_e.id);_e.registry(we.bindFunction,we.unbindFunction,we.isboundFunction,we.rebindFunction)}},le.prototype.loadAsync=function(){for(var Ae=[],De=0;De<arguments.length;De++)Ae[De]=arguments[De];return H(this,void 0,void 0,function(){var Ne,Te,We,_e,we;return W(this,function(Re){switch(Re.label){case 0:Ne=this._getContainerModuleHelpersFactory(),Te=0,We=Ae,Re.label=1;case 1:return Te<We.length?(_e=We[Te],we=Ne(_e.id),[4,_e.registry(we.bindFunction,we.unbindFunction,we.isboundFunction,we.rebindFunction)]):[3,4];case 2:Re.sent(),Re.label=3;case 3:return Te++,[3,1];case 4:return[2]}})})},le.prototype.unload=function(){for(var Ae=this,De=[],Ne=0;Ne<arguments.length;Ne++)De[Ne]=arguments[Ne];var Te=function(We){return function(_e){return _e.moduleId===We}};De.forEach(function(We){var _e=Te(We.id);Ae._bindingDictionary.removeByCondition(_e)})},le.prototype.bind=function(Ae){var De=this.options.defaultScope||ee.BindingScopeEnum.Transient,Ne=new X.Binding(Ae,De);return this._bindingDictionary.add(Ae,Ne),new se.BindingToSyntax(Ne)},le.prototype.rebind=function(Ae){return this.unbind(Ae),this.bind(Ae)},le.prototype.unbind=function(Ae){try{this._bindingDictionary.remove(Ae)}catch(De){throw new Error(j.CANNOT_UNBIND+" "+$.getServiceIdentifierAsString(Ae))}},le.prototype.unbindAll=function(){this._bindingDictionary=new b.Lookup},le.prototype.isBound=function(Ae){var De=this._bindingDictionary.hasKey(Ae);return!De&&this.parent&&(De=this.parent.isBound(Ae)),De},le.prototype.isBoundNamed=function(Ae,De){return this.isBoundTagged(Ae,Y.NAMED_TAG,De)},le.prototype.isBoundTagged=function(Ae,De,Ne){var Te=!1;if(this._bindingDictionary.hasKey(Ae)){var We=this._bindingDictionary.get(Ae),_e=Q.createMockRequest(this,Ae,De,Ne);Te=We.some(function(we){return we.constraint(_e)})}return!Te&&this.parent&&(Te=this.parent.isBoundTagged(Ae,De,Ne)),Te},le.prototype.snapshot=function(){this._snapshots.push(A.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},le.prototype.restore=function(){var Ae=this._snapshots.pop();if(Ae===void 0)throw new Error(j.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=Ae.bindings,this._middleware=Ae.middleware},le.prototype.createChild=function(Ae){var De=new le(Ae||this.options);return De.parent=this,De},le.prototype.applyMiddleware=function(){for(var Ae=[],De=0;De<arguments.length;De++)Ae[De]=arguments[De];this._appliedMiddleware=this._appliedMiddleware.concat(Ae);var Ne=this._middleware?this._middleware:this._planAndResolve();this._middleware=Ae.reduce(function(Te,We){return We(Te)},Ne)},le.prototype.applyCustomMetadataReader=function(Ae){this._metadataReader=Ae},le.prototype.get=function(Ae){return this._get(!1,!1,ee.TargetTypeEnum.Variable,Ae)},le.prototype.getTagged=function(Ae,De,Ne){return this._get(!1,!1,ee.TargetTypeEnum.Variable,Ae,De,Ne)},le.prototype.getNamed=function(Ae,De){return this.getTagged(Ae,Y.NAMED_TAG,De)},le.prototype.getAll=function(Ae){return this._get(!0,!0,ee.TargetTypeEnum.Variable,Ae)},le.prototype.getAllTagged=function(Ae,De,Ne){return this._get(!1,!0,ee.TargetTypeEnum.Variable,Ae,De,Ne)},le.prototype.getAllNamed=function(Ae,De){return this.getAllTagged(Ae,Y.NAMED_TAG,De)},le.prototype.resolve=function(Ae){var De=this.createChild();return De.bind(Ae).toSelf(),this._appliedMiddleware.forEach(function(Ne){De.applyMiddleware(Ne)}),De.get(Ae)},le.prototype._getContainerModuleHelpersFactory=function(){var Ae=this,De=function(we,Re){we._binding.moduleId=Re},Ne=function(we){return function(Re){var ze=Ae.bind.bind(Ae),Ge=ze(Re);return De(Ge,we),Ge}},Te=function(we){return function(Re){var ze=Ae.unbind.bind(Ae);ze(Re)}},We=function(we){return function(Re){var ze=Ae.isBound.bind(Ae);return ze(Re)}},_e=function(we){return function(Re){var ze=Ae.rebind.bind(Ae),Ge=ze(Re);return De(Ge,we),Ge}};return function(we){return{bindFunction:Ne(we),isboundFunction:We(we),rebindFunction:_e(we),unbindFunction:Te(we)}}},le.prototype._get=function(Ae,De,Ne,Te,We,_e){var we=null,Re={avoidConstraints:Ae,contextInterceptor:function(ze){return ze},isMultiInject:De,key:We,serviceIdentifier:Te,targetType:Ne,value:_e};if(this._middleware){if(we=this._middleware(Re),we==null)throw new Error(j.INVALID_MIDDLEWARE_RETURN)}else we=this._planAndResolve()(Re);return we},le.prototype._planAndResolve=function(){var Ae=this;return function(De){var Ne=Q.plan(Ae._metadataReader,Ae,De.isMultiInject,De.targetType,De.serviceIdentifier,De.key,De.value,De.avoidConstraints);Ne=De.contextInterceptor(Ne);var Te=ye.resolve(Ne);return Te}},le}();N.Container=te},33244:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AsyncContainerModule=N.ContainerModule=void 0;var H=k(37791),W=function(){function X(j){this.id=H.id(),this.registry=j}return X}();N.ContainerModule=W;var w=function(){function X(j){this.id=H.id(),this.registry=j}return X}();N.AsyncContainerModule=w},85700:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ContainerSnapshot=void 0;var k=function(){function H(){}return H.of=function(W,w){var X=new H;return X.bindings=W,X.middleware=w,X},H}();N.ContainerSnapshot=k},80175:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Lookup=void 0;var H=k(16674),W=function(){function w(){this._map=new Map}return w.prototype.getMap=function(){return this._map},w.prototype.add=function(X,j){if(X==null)throw new Error(H.NULL_ARGUMENT);if(j==null)throw new Error(H.NULL_ARGUMENT);var ee=this._map.get(X);ee!==void 0?(ee.push(j),this._map.set(X,ee)):this._map.set(X,[j])},w.prototype.get=function(X){if(X==null)throw new Error(H.NULL_ARGUMENT);var j=this._map.get(X);if(j!==void 0)return j;throw new Error(H.KEY_NOT_FOUND)},w.prototype.remove=function(X){if(X==null)throw new Error(H.NULL_ARGUMENT);if(!this._map.delete(X))throw new Error(H.KEY_NOT_FOUND)},w.prototype.removeByCondition=function(X){var j=this;this._map.forEach(function(ee,Y){var re=ee.filter(function(Q){return!X(Q)});re.length>0?j._map.set(Y,re):j._map.delete(Y)})},w.prototype.hasKey=function(X){if(X==null)throw new Error(H.NULL_ARGUMENT);return this._map.has(X)},w.prototype.clone=function(){var X=new w;return this._map.forEach(function(j,ee){j.forEach(function(Y){return X.add(ee,Y.clone())})}),X},w.prototype.traverse=function(X){this._map.forEach(function(j,ee){X(ee,j)})},w}();N.Lookup=W},86700:function(vt,N,k){"use strict";var H;H={value:!0},H=H=H=H=H=H=N.GW=H=H=N.zY=H=H=H=H=H=N.f3=H=H=N.b2=H=H=H=H=H=N.W2=H=void 0;var W=k(6867);H=W;var w=k(51389);Object.defineProperty(N,"W2",{enumerable:!0,get:function(){return w.Container}});var X=k(28421);H={enumerable:!0,get:function(){return X.BindingScopeEnum}},H={enumerable:!0,get:function(){return X.BindingTypeEnum}},H={enumerable:!0,get:function(){return X.TargetTypeEnum}};var j=k(33244);H={enumerable:!0,get:function(){return j.AsyncContainerModule}},H={enumerable:!0,get:function(){return j.ContainerModule}};var ee=k(64315);Object.defineProperty(N,"b2",{enumerable:!0,get:function(){return ee.injectable}});var Y=k(32052);H={enumerable:!0,get:function(){return Y.tagged}};var re=k(38085);H={enumerable:!0,get:function(){return re.named}};var Q=k(5744);Object.defineProperty(N,"f3",{enumerable:!0,get:function(){return Q.inject}}),H={enumerable:!0,get:function(){return Q.LazyServiceIdentifer}};var ye=k(6515);H={enumerable:!0,get:function(){return ye.optional}};var se=k(86757);H={enumerable:!0,get:function(){return se.unmanaged}};var ne=k(71693);H={enumerable:!0,get:function(){return ne.multiInject}};var $=k(55638);H={enumerable:!0,get:function(){return $.targetName}};var A=k(7014);Object.defineProperty(N,"zY",{enumerable:!0,get:function(){return A.postConstruct}});var b=k(51377);H={enumerable:!0,get:function(){return b.MetadataReader}};var te=k(37791);H={enumerable:!0,get:function(){return te.id}};var le=k(99934);Object.defineProperty(N,"GW",{enumerable:!0,get:function(){return le.decorate}});var Ae=k(80758);H={enumerable:!0,get:function(){return Ae.traverseAncerstors}},H={enumerable:!0,get:function(){return Ae.taggedConstraint}},H={enumerable:!0,get:function(){return Ae.namedConstraint}},H={enumerable:!0,get:function(){return Ae.typeConstraint}};var De=k(55800);H={enumerable:!0,get:function(){return De.getServiceIdentifierAsString}};var Ne=k(70600);H={enumerable:!0,get:function(){return Ne.multiBindToService}}},95228:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Context=void 0;var H=k(37791),W=function(){function w(X){this.id=H.id(),this.container=X}return w.prototype.addPlan=function(X){this.plan=X},w.prototype.setCurrentRequest=function(X){this.currentRequest=X},w}();N.Context=W},47738:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Metadata=void 0;var H=k(6867),W=function(){function w(X,j){this.key=X,this.value=j}return w.prototype.toString=function(){return this.key===H.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},w}();N.Metadata=W},51377:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MetadataReader=void 0;var H=k(6867),W=function(){function w(){}return w.prototype.getConstructorMetadata=function(X){var j=Reflect.getMetadata(H.PARAM_TYPES,X),ee=Reflect.getMetadata(H.TAGGED,X);return{compilerGeneratedMetadata:j,userGeneratedMetadata:ee||{}}},w.prototype.getPropertiesMetadata=function(X){var j=Reflect.getMetadata(H.TAGGED_PROP,X)||[];return j},w}();N.MetadataReader=W},55314:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Plan=void 0;var k=function(){function H(W,w){this.parentContext=W,this.rootRequest=w}return H}();N.Plan=k},86311:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getBindingDictionary=N.createMockRequest=N.plan=void 0;var H=k(23184),W=k(16674),w=k(28421),X=k(6867),j=k(54623),ee=k(55800),Y=k(95228),re=k(47738),Q=k(55314),ye=k(6e3),se=k(6748),ne=k(18924);function $(Te){return Te._bindingDictionary}N.getBindingDictionary=$;function A(Te,We,_e,we,Re,ze){var Ge=Te?X.MULTI_INJECT_TAG:X.INJECT_TAG,yt=new re.Metadata(Ge,_e),ke=new ne.Target(We,we,_e,yt);if(Re!==void 0){var tt=new re.Metadata(Re,ze);ke.metadata.push(tt)}return ke}function b(Te,We,_e,we,Re){var ze=Ae(_e.container,Re.serviceIdentifier),Ge=[];return ze.length===H.BindingCount.NoBindingsAvailable&&_e.container.options.autoBindInjectable&&typeof Re.serviceIdentifier=="function"&&Te.getConstructorMetadata(Re.serviceIdentifier).compilerGeneratedMetadata&&(_e.container.bind(Re.serviceIdentifier).toSelf(),ze=Ae(_e.container,Re.serviceIdentifier)),We?Ge=ze:Ge=ze.filter(function(yt){var ke=new se.Request(yt.serviceIdentifier,_e,we,yt,Re);return yt.constraint(ke)}),te(Re.serviceIdentifier,Ge,Re,_e.container),Ge}function te(Te,We,_e,we){switch(We.length){case H.BindingCount.NoBindingsAvailable:if(_e.isOptional())return We;var Re=ee.getServiceIdentifierAsString(Te),ze=W.NOT_REGISTERED;throw ze+=ee.listMetadataForTarget(Re,_e),ze+=ee.listRegisteredBindingsForServiceIdentifier(we,Re,Ae),new Error(ze);case H.BindingCount.OnlyOneBindingAvailable:if(!_e.isArray())return We;case H.BindingCount.MultipleBindingsAvailable:default:if(_e.isArray())return We;var Re=ee.getServiceIdentifierAsString(Te),ze=W.AMBIGUOUS_MATCH+" "+Re;throw ze+=ee.listRegisteredBindingsForServiceIdentifier(we,Re,Ae),new Error(ze)}}function le(Te,We,_e,we,Re,ze){var Ge,yt;if(Re===null){Ge=b(Te,We,we,null,ze),yt=new se.Request(_e,we,null,Ge,ze);var ke=new Q.Plan(we,yt);we.addPlan(ke)}else Ge=b(Te,We,we,Re,ze),yt=Re.addChildRequest(ze.serviceIdentifier,Ge,ze);Ge.forEach(function(tt){var ae=null;if(ze.isArray())ae=yt.addChildRequest(tt.serviceIdentifier,tt,ze);else{if(tt.cache)return;ae=yt}if(tt.type===w.BindingTypeEnum.Instance&&tt.implementationType!==null){var Ke=ye.getDependencies(Te,tt.implementationType);if(!we.container.options.skipBaseClassChecks){var he=ye.getBaseClassDependencyCount(Te,tt.implementationType);if(Ke.length<he){var Pe=W.ARGUMENTS_LENGTH_MISMATCH(ye.getFunctionName(tt.implementationType));throw new Error(Pe)}}Ke.forEach(function(lt){le(Te,!1,lt.serviceIdentifier,we,ae,lt)})}})}function Ae(Te,We){var _e=[],we=$(Te);return we.hasKey(We)?_e=we.get(We):Te.parent!==null&&(_e=Ae(Te.parent,We)),_e}function De(Te,We,_e,we,Re,ze,Ge,yt){yt===void 0&&(yt=!1);var ke=new Y.Context(We),tt=A(_e,we,Re,"",ze,Ge);try{return le(Te,yt,Re,ke,null,tt),ke}catch(ae){throw j.isStackOverflowExeption(ae)&&ke.plan&&ee.circularDependencyToException(ke.plan.rootRequest),ae}}N.plan=De;function Ne(Te,We,_e,we){var Re=new ne.Target(w.TargetTypeEnum.Variable,"",We,new re.Metadata(_e,we)),ze=new Y.Context(Te),Ge=new se.Request(We,ze,null,[],Re);return Ge}N.createMockRequest=Ne},88460:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.QueryableString=void 0;var k=function(){function H(W){this.str=W}return H.prototype.startsWith=function(W){return this.str.indexOf(W)===0},H.prototype.endsWith=function(W){var w="",X=W.split("").reverse().join("");return w=this.str.split("").reverse().join(""),this.startsWith.call({str:w},X)},H.prototype.contains=function(W){return this.str.indexOf(W)!==-1},H.prototype.equals=function(W){return this.str===W},H.prototype.value=function(){return this.str},H}();N.QueryableString=k},6e3:function(vt,N,k){"use strict";var H=this&&this.__spreadArray||function(b,te){for(var le=0,Ae=te.length,De=b.length;le<Ae;le++,De++)b[De]=te[le];return b};Object.defineProperty(N,"__esModule",{value:!0}),N.getFunctionName=N.getBaseClassDependencyCount=N.getDependencies=void 0;var W=k(5744),w=k(16674),X=k(28421),j=k(6867),ee=k(55800);Object.defineProperty(N,"getFunctionName",{enumerable:!0,get:function(){return ee.getFunctionName}});var Y=k(18924);function re(b,te){var le=ee.getFunctionName(te),Ae=Q(b,le,te,!1);return Ae}N.getDependencies=re;function Q(b,te,le,Ae){var De=b.getConstructorMetadata(le),Ne=De.compilerGeneratedMetadata;if(Ne===void 0){var Te=w.MISSING_INJECTABLE_ANNOTATION+" "+te+".";throw new Error(Te)}var We=De.userGeneratedMetadata,_e=Object.keys(We),we=le.length===0&&_e.length>0,Re=_e.length>le.length,ze=we||Re?_e.length:le.length,Ge=se(Ae,te,Ne,We,ze),yt=ne(b,le),ke=H(H([],Ge),yt);return ke}function ye(b,te,le,Ae,De){var Ne=De[b.toString()]||[],Te=A(Ne),We=Te.unmanaged!==!0,_e=Ae[b],we=Te.inject||Te.multiInject;if(_e=we||_e,_e instanceof W.LazyServiceIdentifer&&(_e=_e.unwrap()),We){var Re=_e===Object,ze=_e===Function,Ge=_e===void 0,yt=Re||ze||Ge;if(!te&&yt){var ke=w.MISSING_INJECT_ANNOTATION+" argument "+b+" in class "+le+".";throw new Error(ke)}var tt=new Y.Target(X.TargetTypeEnum.ConstructorArgument,Te.targetName,_e);return tt.metadata=Ne,tt}return null}function se(b,te,le,Ae,De){for(var Ne=[],Te=0;Te<De;Te++){var We=Te,_e=ye(We,b,te,le,Ae);_e!==null&&Ne.push(_e)}return Ne}function ne(b,te){for(var le=b.getPropertiesMetadata(te),Ae=[],De=Object.keys(le),Ne=0,Te=De;Ne<Te.length;Ne++){var We=Te[Ne],_e=le[We],we=A(le[We]),Re=we.targetName||We,ze=we.inject||we.multiInject,Ge=new Y.Target(X.TargetTypeEnum.ClassProperty,Re,ze);Ge.metadata=_e,Ae.push(Ge)}var yt=Object.getPrototypeOf(te.prototype).constructor;if(yt!==Object){var ke=ne(b,yt);Ae=H(H([],Ae),ke)}return Ae}function $(b,te){var le=Object.getPrototypeOf(te.prototype).constructor;if(le!==Object){var Ae=ee.getFunctionName(le),De=Q(b,Ae,le,!0),Ne=De.map(function(_e){return _e.metadata.filter(function(we){return we.key===j.UNMANAGED_TAG})}),Te=[].concat.apply([],Ne).length,We=De.length-Te;return We>0?We:$(b,le)}else return 0}N.getBaseClassDependencyCount=$;function A(b){var te={};return b.forEach(function(le){te[le.key.toString()]=le.value}),{inject:te[j.INJECT_TAG],multiInject:te[j.MULTI_INJECT_TAG],targetName:te[j.NAME_TAG],unmanaged:te[j.UNMANAGED_TAG]}}},6748:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Request=void 0;var H=k(37791),W=function(){function w(X,j,ee,Y,re){this.id=H.id(),this.serviceIdentifier=X,this.parentContext=j,this.parentRequest=ee,this.target=re,this.childRequests=[],this.bindings=Array.isArray(Y)?Y:[Y],this.requestScope=ee===null?new Map:null}return w.prototype.addChildRequest=function(X,j,ee){var Y=new w(X,this.parentContext,this,j,ee);return this.childRequests.push(Y),Y},w}();N.Request=W},18924:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Target=void 0;var H=k(6867),W=k(37791),w=k(47738),X=k(88460),j=function(){function ee(Y,re,Q,ye){this.id=W.id(),this.type=Y,this.serviceIdentifier=Q,this.name=new X.QueryableString(re||""),this.metadata=new Array;var se=null;typeof ye=="string"?se=new w.Metadata(H.NAMED_TAG,ye):ye instanceof w.Metadata&&(se=ye),se!==null&&this.metadata.push(se)}return ee.prototype.hasTag=function(Y){for(var re=0,Q=this.metadata;re<Q.length;re++){var ye=Q[re];if(ye.key===Y)return!0}return!1},ee.prototype.isArray=function(){return this.hasTag(H.MULTI_INJECT_TAG)},ee.prototype.matchesArray=function(Y){return this.matchesTag(H.MULTI_INJECT_TAG)(Y)},ee.prototype.isNamed=function(){return this.hasTag(H.NAMED_TAG)},ee.prototype.isTagged=function(){return this.metadata.some(function(Y){return H.NON_CUSTOM_TAG_KEYS.every(function(re){return Y.key!==re})})},ee.prototype.isOptional=function(){return this.matchesTag(H.OPTIONAL_TAG)(!0)},ee.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Y){return Y.key===H.NAMED_TAG})[0]:null},ee.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Y){return H.NON_CUSTOM_TAG_KEYS.every(function(re){return Y.key!==re})}):null},ee.prototype.matchesNamedTag=function(Y){return this.matchesTag(H.NAMED_TAG)(Y)},ee.prototype.matchesTag=function(Y){var re=this;return function(Q){for(var ye=0,se=re.metadata;ye<se.length;ye++){var ne=se[ye];if(ne.key===Y&&ne.value===Q)return!0}return!1}},ee}();N.Target=j},52279:function(vt,N,k){"use strict";var H=this&&this.__spreadArray||function(Q,ye){for(var se=0,ne=ye.length,$=Q.length;se<ne;se++,$++)Q[$]=ye[se];return Q};Object.defineProperty(N,"__esModule",{value:!0}),N.resolveInstance=void 0;var W=k(16674),w=k(28421),X=k(6867);function j(Q,ye,se){var ne=ye.filter(function(A){return A.target!==null&&A.target.type===w.TargetTypeEnum.ClassProperty}),$=ne.map(se);return ne.forEach(function(A,b){var te="";te=A.target.name.value();var le=$[b];Q[te]=le}),Q}function ee(Q,ye){return new(Q.bind.apply(Q,H([void 0],ye)))}function Y(Q,ye){if(Reflect.hasMetadata(X.POST_CONSTRUCT,Q)){var se=Reflect.getMetadata(X.POST_CONSTRUCT,Q);try{ye[se.value]()}catch(ne){throw new Error(W.POST_CONSTRUCT_ERROR(Q.name,ne.message))}}}function re(Q,ye,se){var ne=null;if(ye.length>0){var $=ye.filter(function(b){return b.target!==null&&b.target.type===w.TargetTypeEnum.ConstructorArgument}),A=$.map(se);ne=ee(Q,A),ne=j(ne,ye,se)}else ne=new Q;return Y(Q,ne),ne}N.resolveInstance=re},7478:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.resolve=void 0;var H=k(16674),W=k(28421),w=k(54623),X=k(55800),j=k(52279),ee=function(Q,ye,se){try{return se()}catch(ne){throw w.isStackOverflowExeption(ne)?new Error(H.CIRCULAR_DEPENDENCY_IN_FACTORY(Q,ye.toString())):ne}},Y=function(Q){return function(ye){ye.parentContext.setCurrentRequest(ye);var se=ye.bindings,ne=ye.childRequests,$=ye.target&&ye.target.isArray(),A=!ye.parentRequest||!ye.parentRequest.target||!ye.target||!ye.parentRequest.target.matchesArray(ye.target.serviceIdentifier);if($&&A)return ne.map(function(Ne){var Te=Y(Q);return Te(Ne)});var b=null;if(ye.target.isOptional()&&se.length===0)return;var te=se[0],le=te.scope===W.BindingScopeEnum.Singleton,Ae=te.scope===W.BindingScopeEnum.Request;if(le&&te.activated)return te.cache;if(Ae&&Q!==null&&Q.has(te.id))return Q.get(te.id);if(te.type===W.BindingTypeEnum.ConstantValue)b=te.cache,te.activated=!0;else if(te.type===W.BindingTypeEnum.Function)b=te.cache,te.activated=!0;else if(te.type===W.BindingTypeEnum.Constructor)b=te.implementationType;else if(te.type===W.BindingTypeEnum.DynamicValue&&te.dynamicValue!==null)b=ee("toDynamicValue",te.serviceIdentifier,function(){return te.dynamicValue(ye.parentContext)});else if(te.type===W.BindingTypeEnum.Factory&&te.factory!==null)b=ee("toFactory",te.serviceIdentifier,function(){return te.factory(ye.parentContext)});else if(te.type===W.BindingTypeEnum.Provider&&te.provider!==null)b=ee("toProvider",te.serviceIdentifier,function(){return te.provider(ye.parentContext)});else if(te.type===W.BindingTypeEnum.Instance&&te.implementationType!==null)b=j.resolveInstance(te.implementationType,ne,Y(Q));else{var De=X.getServiceIdentifierAsString(ye.serviceIdentifier);throw new Error(H.INVALID_BINDING_TYPE+" "+De)}return typeof te.onActivation=="function"&&(b=te.onActivation(ye.parentContext,b)),le&&(te.cache=b,te.activated=!0),Ae&&Q!==null&&!Q.has(te.id)&&Q.set(te.id,b),b}};function re(Q){var ye=Y(Q.plan.rootRequest.requestScope);return ye(Q.plan.rootRequest)}N.resolve=re},83366:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInSyntax=void 0;var H=k(28421),W=k(71325),w=function(){function X(j){this._binding=j}return X.prototype.inRequestScope=function(){return this._binding.scope=H.BindingScopeEnum.Request,new W.BindingWhenOnSyntax(this._binding)},X.prototype.inSingletonScope=function(){return this._binding.scope=H.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},X.prototype.inTransientScope=function(){return this._binding.scope=H.BindingScopeEnum.Transient,new W.BindingWhenOnSyntax(this._binding)},X}();N.BindingInSyntax=w},99812:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInWhenOnSyntax=void 0;var H=k(83366),W=k(51811),w=k(98370),X=function(){function j(ee){this._binding=ee,this._bindingWhenSyntax=new w.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new W.BindingOnSyntax(this._binding),this._bindingInSyntax=new H.BindingInSyntax(ee)}return j.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},j.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},j.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},j.prototype.when=function(ee){return this._bindingWhenSyntax.when(ee)},j.prototype.whenTargetNamed=function(ee){return this._bindingWhenSyntax.whenTargetNamed(ee)},j.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},j.prototype.whenTargetTagged=function(ee,Y){return this._bindingWhenSyntax.whenTargetTagged(ee,Y)},j.prototype.whenInjectedInto=function(ee){return this._bindingWhenSyntax.whenInjectedInto(ee)},j.prototype.whenParentNamed=function(ee){return this._bindingWhenSyntax.whenParentNamed(ee)},j.prototype.whenParentTagged=function(ee,Y){return this._bindingWhenSyntax.whenParentTagged(ee,Y)},j.prototype.whenAnyAncestorIs=function(ee){return this._bindingWhenSyntax.whenAnyAncestorIs(ee)},j.prototype.whenNoAncestorIs=function(ee){return this._bindingWhenSyntax.whenNoAncestorIs(ee)},j.prototype.whenAnyAncestorNamed=function(ee){return this._bindingWhenSyntax.whenAnyAncestorNamed(ee)},j.prototype.whenAnyAncestorTagged=function(ee,Y){return this._bindingWhenSyntax.whenAnyAncestorTagged(ee,Y)},j.prototype.whenNoAncestorNamed=function(ee){return this._bindingWhenSyntax.whenNoAncestorNamed(ee)},j.prototype.whenNoAncestorTagged=function(ee,Y){return this._bindingWhenSyntax.whenNoAncestorTagged(ee,Y)},j.prototype.whenAnyAncestorMatches=function(ee){return this._bindingWhenSyntax.whenAnyAncestorMatches(ee)},j.prototype.whenNoAncestorMatches=function(ee){return this._bindingWhenSyntax.whenNoAncestorMatches(ee)},j.prototype.onActivation=function(ee){return this._bindingOnSyntax.onActivation(ee)},j}();N.BindingInWhenOnSyntax=X},51811:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingOnSyntax=void 0;var H=k(98370),W=function(){function w(X){this._binding=X}return w.prototype.onActivation=function(X){return this._binding.onActivation=X,new H.BindingWhenSyntax(this._binding)},w}();N.BindingOnSyntax=W},51860:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingToSyntax=void 0;var H=k(16674),W=k(28421),w=k(99812),X=k(71325),j=function(){function ee(Y){this._binding=Y}return ee.prototype.to=function(Y){return this._binding.type=W.BindingTypeEnum.Instance,this._binding.implementationType=Y,new w.BindingInWhenOnSyntax(this._binding)},ee.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+H.INVALID_TO_SELF_VALUE);var Y=this._binding.serviceIdentifier;return this.to(Y)},ee.prototype.toConstantValue=function(Y){return this._binding.type=W.BindingTypeEnum.ConstantValue,this._binding.cache=Y,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=W.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},ee.prototype.toDynamicValue=function(Y){return this._binding.type=W.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Y,this._binding.implementationType=null,new w.BindingInWhenOnSyntax(this._binding)},ee.prototype.toConstructor=function(Y){return this._binding.type=W.BindingTypeEnum.Constructor,this._binding.implementationType=Y,this._binding.scope=W.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},ee.prototype.toFactory=function(Y){return this._binding.type=W.BindingTypeEnum.Factory,this._binding.factory=Y,this._binding.scope=W.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},ee.prototype.toFunction=function(Y){if(typeof Y!="function")throw new Error(H.INVALID_FUNCTION_BINDING);var re=this.toConstantValue(Y);return this._binding.type=W.BindingTypeEnum.Function,this._binding.scope=W.BindingScopeEnum.Singleton,re},ee.prototype.toAutoFactory=function(Y){return this._binding.type=W.BindingTypeEnum.Factory,this._binding.factory=function(re){var Q=function(){return re.container.get(Y)};return Q},this._binding.scope=W.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},ee.prototype.toProvider=function(Y){return this._binding.type=W.BindingTypeEnum.Provider,this._binding.provider=Y,this._binding.scope=W.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},ee.prototype.toService=function(Y){this.toDynamicValue(function(re){return re.container.get(Y)})},ee}();N.BindingToSyntax=j},71325:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenOnSyntax=void 0;var H=k(51811),W=k(98370),w=function(){function X(j){this._binding=j,this._bindingWhenSyntax=new W.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new H.BindingOnSyntax(this._binding)}return X.prototype.when=function(j){return this._bindingWhenSyntax.when(j)},X.prototype.whenTargetNamed=function(j){return this._bindingWhenSyntax.whenTargetNamed(j)},X.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},X.prototype.whenTargetTagged=function(j,ee){return this._bindingWhenSyntax.whenTargetTagged(j,ee)},X.prototype.whenInjectedInto=function(j){return this._bindingWhenSyntax.whenInjectedInto(j)},X.prototype.whenParentNamed=function(j){return this._bindingWhenSyntax.whenParentNamed(j)},X.prototype.whenParentTagged=function(j,ee){return this._bindingWhenSyntax.whenParentTagged(j,ee)},X.prototype.whenAnyAncestorIs=function(j){return this._bindingWhenSyntax.whenAnyAncestorIs(j)},X.prototype.whenNoAncestorIs=function(j){return this._bindingWhenSyntax.whenNoAncestorIs(j)},X.prototype.whenAnyAncestorNamed=function(j){return this._bindingWhenSyntax.whenAnyAncestorNamed(j)},X.prototype.whenAnyAncestorTagged=function(j,ee){return this._bindingWhenSyntax.whenAnyAncestorTagged(j,ee)},X.prototype.whenNoAncestorNamed=function(j){return this._bindingWhenSyntax.whenNoAncestorNamed(j)},X.prototype.whenNoAncestorTagged=function(j,ee){return this._bindingWhenSyntax.whenNoAncestorTagged(j,ee)},X.prototype.whenAnyAncestorMatches=function(j){return this._bindingWhenSyntax.whenAnyAncestorMatches(j)},X.prototype.whenNoAncestorMatches=function(j){return this._bindingWhenSyntax.whenNoAncestorMatches(j)},X.prototype.onActivation=function(j){return this._bindingOnSyntax.onActivation(j)},X}();N.BindingWhenOnSyntax=w},98370:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenSyntax=void 0;var H=k(51811),W=k(80758),w=function(){function X(j){this._binding=j}return X.prototype.when=function(j){return this._binding.constraint=j,new H.BindingOnSyntax(this._binding)},X.prototype.whenTargetNamed=function(j){return this._binding.constraint=W.namedConstraint(j),new H.BindingOnSyntax(this._binding)},X.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(j){var ee=j.target!==null&&!j.target.isNamed()&&!j.target.isTagged();return ee},new H.BindingOnSyntax(this._binding)},X.prototype.whenTargetTagged=function(j,ee){return this._binding.constraint=W.taggedConstraint(j)(ee),new H.BindingOnSyntax(this._binding)},X.prototype.whenInjectedInto=function(j){return this._binding.constraint=function(ee){return W.typeConstraint(j)(ee.parentRequest)},new H.BindingOnSyntax(this._binding)},X.prototype.whenParentNamed=function(j){return this._binding.constraint=function(ee){return W.namedConstraint(j)(ee.parentRequest)},new H.BindingOnSyntax(this._binding)},X.prototype.whenParentTagged=function(j,ee){return this._binding.constraint=function(Y){return W.taggedConstraint(j)(ee)(Y.parentRequest)},new H.BindingOnSyntax(this._binding)},X.prototype.whenAnyAncestorIs=function(j){return this._binding.constraint=function(ee){return W.traverseAncerstors(ee,W.typeConstraint(j))},new H.BindingOnSyntax(this._binding)},X.prototype.whenNoAncestorIs=function(j){return this._binding.constraint=function(ee){return!W.traverseAncerstors(ee,W.typeConstraint(j))},new H.BindingOnSyntax(this._binding)},X.prototype.whenAnyAncestorNamed=function(j){return this._binding.constraint=function(ee){return W.traverseAncerstors(ee,W.namedConstraint(j))},new H.BindingOnSyntax(this._binding)},X.prototype.whenNoAncestorNamed=function(j){return this._binding.constraint=function(ee){return!W.traverseAncerstors(ee,W.namedConstraint(j))},new H.BindingOnSyntax(this._binding)},X.prototype.whenAnyAncestorTagged=function(j,ee){return this._binding.constraint=function(Y){return W.traverseAncerstors(Y,W.taggedConstraint(j)(ee))},new H.BindingOnSyntax(this._binding)},X.prototype.whenNoAncestorTagged=function(j,ee){return this._binding.constraint=function(Y){return!W.traverseAncerstors(Y,W.taggedConstraint(j)(ee))},new H.BindingOnSyntax(this._binding)},X.prototype.whenAnyAncestorMatches=function(j){return this._binding.constraint=function(ee){return W.traverseAncerstors(ee,j)},new H.BindingOnSyntax(this._binding)},X.prototype.whenNoAncestorMatches=function(j){return this._binding.constraint=function(ee){return!W.traverseAncerstors(ee,j)},new H.BindingOnSyntax(this._binding)},X}();N.BindingWhenSyntax=w},80758:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.typeConstraint=N.namedConstraint=N.taggedConstraint=N.traverseAncerstors=void 0;var H=k(6867),W=k(47738),w=function(Y,re){var Q=Y.parentRequest;return Q!==null?re(Q)?!0:w(Q,re):!1};N.traverseAncerstors=w;var X=function(Y){return function(re){var Q=function(ye){return ye!==null&&ye.target!==null&&ye.target.matchesTag(Y)(re)};return Q.metaData=new W.Metadata(Y,re),Q}};N.taggedConstraint=X;var j=X(H.NAMED_TAG);N.namedConstraint=j;var ee=function(Y){return function(re){var Q=null;if(re!==null)if(Q=re.bindings[0],typeof Y=="string"){var ye=Q.serviceIdentifier;return ye===Y}else{var se=re.bindings[0].implementationType;return Y===se}return!1}};N.typeConstraint=ee},70600:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiBindToService=void 0;var k=function(H){return function(W){return function(){for(var w=[],X=0;X<arguments.length;X++)w[X]=arguments[X];return w.forEach(function(j){return H.bind(j).toService(W)})}}};N.multiBindToService=k},54623:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.isStackOverflowExeption=void 0;var H=k(16674);function W(w){return w instanceof RangeError||w.message===H.STACK_OVERFLOW}N.isStackOverflowExeption=W},37791:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.id=void 0;var k=0;function H(){return k++}N.id=H},55800:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.circularDependencyToException=N.listMetadataForTarget=N.listRegisteredBindingsForServiceIdentifier=N.getServiceIdentifierAsString=N.getFunctionName=void 0;var H=k(16674);function W(Q){if(typeof Q=="function"){var ye=Q;return ye.name}else{if(typeof Q=="symbol")return Q.toString();var ye=Q;return ye}}N.getServiceIdentifierAsString=W;function w(Q,ye,se){var ne="",$=se(Q,ye);return $.length!==0&&(ne=`
Registered bindings:`,$.forEach(function(A){var b="Object";A.implementationType!==null&&(b=re(A.implementationType)),ne=ne+`
 `+b,A.constraint.metaData&&(ne=ne+" - "+A.constraint.metaData)})),ne}N.listRegisteredBindingsForServiceIdentifier=w;function X(Q,ye){return Q.parentRequest===null?!1:Q.parentRequest.serviceIdentifier===ye?!0:X(Q.parentRequest,ye)}function j(Q){function ye(ne,$){$===void 0&&($=[]);var A=W(ne.serviceIdentifier);return $.push(A),ne.parentRequest!==null?ye(ne.parentRequest,$):$}var se=ye(Q);return se.reverse().join(" --> ")}function ee(Q){Q.childRequests.forEach(function(ye){if(X(ye,ye.serviceIdentifier)){var se=j(ye);throw new Error(H.CIRCULAR_DEPENDENCY+" "+se)}else ee(ye)})}N.circularDependencyToException=ee;function Y(Q,ye){if(ye.isTagged()||ye.isNamed()){var se="",ne=ye.getNamedTag(),$=ye.getCustomTags();return ne!==null&&(se+=ne.toString()+`
`),$!==null&&$.forEach(function(A){se+=A.toString()+`
`})," "+Q+`
 `+Q+" - "+se}else return" "+Q}N.listMetadataForTarget=Y;function re(Q){if(Q.name)return Q.name;var ye=Q.toString(),se=ye.match(/^function\s*([^\s(]+)/);return se?se[1]:"Anonymous function: "+ye}N.getFunctionName=re},47443:function(vt,N,k){var H=k(42118);function W(w,X){var j=w==null?0:w.length;return!!j&&H(w,X,0)>-1}vt.exports=W},1196:function(vt){function N(k,H,W){for(var w=-1,X=k==null?0:k.length;++w<X;)if(W(H,k[w]))return!0;return!1}vt.exports=N},29750:function(vt){function N(k,H,W){return k===k&&(W!==void 0&&(k=k<=W?k:W),H!==void 0&&(k=k>=H?k:H)),k}vt.exports=N},41848:function(vt){function N(k,H,W,w){for(var X=k.length,j=W+(w?1:-1);w?j--:++j<X;)if(H(k[j],j,k))return j;return-1}vt.exports=N},42118:function(vt,N,k){var H=k(41848),W=k(62722),w=k(39375);function X(j,ee,Y){return ee===ee?w(j,ee,Y):H(j,W,Y)}vt.exports=X},74221:function(vt){function N(k,H,W,w){for(var X=W-1,j=k.length;++X<j;)if(w(k[X],H))return X;return-1}vt.exports=N},62722:function(vt){function N(k){return k!==k}vt.exports=N},65464:function(vt,N,k){var H=k(29932),W=k(42118),w=k(74221),X=k(51717),j=k(6450),ee=Array.prototype,Y=ee.splice;function re(Q,ye,se,ne){var $=ne?w:W,A=-1,b=ye.length,te=Q;for(Q===ye&&(ye=j(ye)),se&&(te=H(Q,X(se)));++A<b;)for(var le=0,Ae=ye[A],De=se?se(Ae):Ae;(le=$(te,De,le,ne))>-1;)te!==Q&&Y.call(te,le,1),Y.call(Q,le,1);return Q}vt.exports=re},45652:function(vt,N,k){var H=k(88668),W=k(47443),w=k(1196),X=k(74757),j=k(23593),ee=k(21814),Y=200;function re(Q,ye,se){var ne=-1,$=W,A=Q.length,b=!0,te=[],le=te;if(se)b=!1,$=w;else if(A>=Y){var Ae=ye?null:j(Q);if(Ae)return ee(Ae);b=!1,$=X,le=new H}else le=ye?[]:te;e:for(;++ne<A;){var De=Q[ne],Ne=ye?ye(De):De;if(De=se||De!==0?De:0,b&&Ne===Ne){for(var Te=le.length;Te--;)if(le[Te]===Ne)continue e;ye&&le.push(Ne),te.push(De)}else $(le,Ne,se)||(le!==te&&le.push(Ne),te.push(De))}return te}vt.exports=re},23593:function(vt,N,k){var H=k(58525),W=k(28117),w=k(21814),X=1/0,j=H&&1/w(new H([,-0]))[1]==X?function(ee){return new H(ee)}:W;vt.exports=j},39375:function(vt){function N(k,H,W){for(var w=W-1,X=k.length;++w<X;)if(k[w]===H)return w;return-1}vt.exports=N},74691:function(vt,N,k){var H=k(29750),W=k(14841);function w(X,j,ee){return ee===void 0&&(ee=j,j=void 0),ee!==void 0&&(ee=W(ee),ee=ee===ee?ee:0),j!==void 0&&(j=W(j),j=j===j?j:0),H(W(X),j,ee)}vt.exports=w},51584:function(vt,N,k){var H=k(44239),W=k(37005),w="[object Boolean]";function X(j){return j===!0||j===!1||W(j)&&H(j)==w}vt.exports=X},18446:function(vt,N,k){var H=k(90939);function W(w,X){return H(w,X)}vt.exports=W},14293:function(vt){function N(k){return k==null}vt.exports=N},81763:function(vt,N,k){var H=k(44239),W=k(37005),w="[object Number]";function X(j){return typeof j=="number"||W(j)&&H(j)==w}vt.exports=X},52353:function(vt){function N(k){return k===void 0}vt.exports=N},30236:function(vt,N,k){var H=k(42980),W=k(21463),w=W(function(X,j,ee,Y){H(X,j,ee,Y)});vt.exports=w},28117:function(vt){function N(){}vt.exports=N},97019:function(vt,N,k){var H=k(5976),W=k(45604),w=H(W);vt.exports=w},45604:function(vt,N,k){var H=k(65464);function W(w,X){return w&&w.length&&X&&X.length?H(w,X):w}vt.exports=W},44908:function(vt,N,k){var H=k(45652);function W(w){return w&&w.length?H(w):[]}vt.exports=W},6158:function(vt){(function(N,k){vt.exports=k()})(this,function(){"use strict";var N,k,H;function W(w,X){if(!N)N=X;else if(!k)k=X;else{var j="var sharedChunk = {}; ("+N+")(sharedChunk); ("+k+")(sharedChunk);",ee={};N(ee),H=X(ee),typeof window!="undefined"&&(H.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}return W(["exports"],function(w){"use strict";function X(h,v){return h(v={exports:{}},v.exports),v.exports}var j=ee;function ee(h,v,_,R){this.cx=3*h,this.bx=3*(_-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(R-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=R,this.p2x=_,this.p2y=R}ee.prototype.sampleCurveX=function(h){return((this.ax*h+this.bx)*h+this.cx)*h},ee.prototype.sampleCurveY=function(h){return((this.ay*h+this.by)*h+this.cy)*h},ee.prototype.sampleCurveDerivativeX=function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},ee.prototype.solveCurveX=function(h,v){var _,R,F,z,K;for(v===void 0&&(v=1e-6),F=h,K=0;K<8;K++){if(z=this.sampleCurveX(F)-h,Math.abs(z)<v)return F;var de=this.sampleCurveDerivativeX(F);if(Math.abs(de)<1e-6)break;F-=z/de}if((F=h)<(_=0))return _;if(F>(R=1))return R;for(;_<R;){if(z=this.sampleCurveX(F),Math.abs(z-h)<v)return F;h>z?_=F:R=F,F=.5*(R-_)+_}return F},ee.prototype.solve=function(h,v){return this.sampleCurveY(this.solveCurveX(h,v))};var Y=re;function re(h,v){this.x=h,this.y=v}re.prototype={clone:function(){return new re(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,v){return this.clone()._rotateAround(h,v)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var v=h.x-this.x,_=h.y-this.y;return v*v+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,v){return Math.atan2(this.x*v-this.y*h,this.x*h+this.y*v)},_matMult:function(h){var v=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=v,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var v=Math.cos(h),_=Math.sin(h),R=_*this.x+v*this.y;return this.x=v*this.x-_*this.y,this.y=R,this},_rotateAround:function(h,v){var _=Math.cos(h),R=Math.sin(h),F=v.y+R*(this.x-v.x)+_*(this.y-v.y);return this.x=v.x+_*(this.x-v.x)-R*(this.y-v.y),this.y=F,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},re.convert=function(h){return h instanceof re?h:Array.isArray(h)?new re(h[0],h[1]):h};var Q=typeof self!="undefined"?self:{},ye=Math.pow(2,53)-1;function se(h,v,_,R){var F=new j(h,v,_,R);return function(z){return F.solve(z)}}var ne=se(.25,.1,.25,1);function $(h,v,_){return Math.min(_,Math.max(v,h))}function A(h,v,_){var R=_-v,F=((h-v)%R+R)%R+v;return F===v?_:F}function b(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var K in z)h[K]=z[K]}return h}var te=1;function le(){return te++}function Ae(){return function h(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()}function De(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)}function Ne(h,v){h.forEach(function(_){v[_]&&(v[_]=v[_].bind(v))})}function Te(h,v){return h.indexOf(v,h.length-v.length)!==-1}function We(h,v,_){var R={};for(var F in h)R[F]=v.call(_||this,h[F],F,h);return R}function _e(h,v,_){var R={};for(var F in h)v.call(_||this,h[F],F,h)&&(R[F]=h[F]);return R}function we(h){return Array.isArray(h)?h.map(we):typeof h=="object"&&h?We(h,we):h}var Re={};function ze(h){Re[h]||(typeof console!="undefined"&&console.warn(h),Re[h]=!0)}function Ge(h,v,_){return(_.y-h.y)*(v.x-h.x)>(v.y-h.y)*(_.x-h.x)}function yt(h){for(var v=0,_=0,R=h.length,F=R-1,z=void 0,K=void 0;_<R;F=_++)v+=((K=h[F]).x-(z=h[_]).x)*(z.y+K.y);return v}function ke(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function tt(h){var v={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(R,F,z,K){var de=z||K;return v[F]=!de||de.toLowerCase(),""}),v["max-age"]){var _=parseInt(v["max-age"],10);isNaN(_)?delete v["max-age"]:v["max-age"]=_}return v}var ae=null;function Ke(h){if(ae==null){var v=h.navigator?h.navigator.userAgent:null;ae=!!h.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return ae}function he(h){try{var v=Q[h];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(_){return!1}}var Pe,lt,He,Ue,Qe=Q.performance&&Q.performance.now?Q.performance.now.bind(Q.performance):Date.now.bind(Date),Se=Q.requestAnimationFrame||Q.mozRequestAnimationFrame||Q.webkitRequestAnimationFrame||Q.msRequestAnimationFrame,xe=Q.cancelAnimationFrame||Q.mozCancelAnimationFrame||Q.webkitCancelAnimationFrame||Q.msCancelAnimationFrame,rt={now:Qe,frame:function(h){var v=Se(h);return{cancel:function(){return xe(v)}}},getImageData:function(h,v){v===void 0&&(v=0);var _=Q.document.createElement("canvas"),R=_.getContext("2d");if(!R)throw new Error("failed to create canvas 2d context");return _.width=h.width,_.height=h.height,R.drawImage(h,0,0,h.width,h.height),R.getImageData(-v,-v,h.width+2*v,h.height+2*v)},resolveURL:function(h){return Pe||(Pe=Q.document.createElement("a")),Pe.href=h,Pe.href},hardwareConcurrency:Q.navigator&&Q.navigator.hardwareConcurrency||4,get devicePixelRatio(){return Q.devicePixelRatio},get prefersReducedMotion(){return!!Q.matchMedia&&(lt==null&&(lt=Q.matchMedia("(prefers-reduced-motion: reduce)")),lt.matches)}},Je={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},dt={supported:!1,testSupport:function(h){!Bt&&Ue&&(Ye?Xe(h):He=h)}},Bt=!1,Ye=!1;function Xe(h){var v=h.createTexture();h.bindTexture(h.TEXTURE_2D,v);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Ue),h.isContextLost())return;dt.supported=!0}catch(_){}h.deleteTexture(v),Bt=!0}Q.document&&((Ue=Q.document.createElement("img")).onload=function(){He&&Xe(He),He=null,Ye=!0},Ue.onerror=function(){Bt=!0,He=null},Ue.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Le="01",je=function(h,v){this._transformRequestFn=h,this._customAccessToken=v,this._createSkuToken()};function at(h){return h.indexOf("mapbox:")===0}je.prototype._createSkuToken=function(){var h=function(){for(var v="",_=0;_<10;_++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Le,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=h.token,this._skuTokenExpiresAt=h.tokenExpiresAt},je.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},je.prototype.transformRequest=function(h,v){return this._transformRequestFn&&this._transformRequestFn(h,v)||{url:h}},je.prototype.normalizeStyleURL=function(h,v){if(!at(h))return h;var _=Mt(h);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},je.prototype.normalizeGlyphsURL=function(h,v){if(!at(h))return h;var _=Mt(h);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},je.prototype.normalizeSourceURL=function(h,v){if(!at(h))return h;var _=Mt(h);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||v)},je.prototype.normalizeSpriteURL=function(h,v,_,R){var F=Mt(h);return at(h)?(F.path="/styles/v1"+F.path+"/sprite"+v+_,this._makeAPIURL(F,this._customAccessToken||R)):(F.path+=""+v+_,ir(F))},je.prototype.normalizeTileURL=function(h,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),h&&!at(h))return h;var _=Mt(h);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(rt.devicePixelRatio>=2||v===512?"@2x":"")+(dt.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var R=this._customAccessToken||function(F){for(var z=0,K=F;z<K.length;z+=1){var de=K[z].match(/^access_token=(.*)$/);if(de)return de[1]}return null}(_.params)||Je.ACCESS_TOKEN;return Je.REQUIRE_ACCESS_TOKEN&&R&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,R)},je.prototype.canonicalizeTileURL=function(h,v){var _=Mt(h);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return h;var R="mapbox://tiles/";R+=_.path.replace("/v4/","");var F=_.params;return v&&(F=F.filter(function(z){return!z.match(/^access_token=/)})),F.length&&(R+="?"+F.join("&")),R},je.prototype.canonicalizeTileset=function(h,v){for(var _=!!v&&at(v),R=[],F=0,z=h.tiles||[];F<z.length;F+=1){var K=z[F];Ze(K)?R.push(this.canonicalizeTileURL(K,_)):R.push(K)}return R},je.prototype._makeAPIURL=function(h,v){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",R=Mt(Je.API_URL);if(h.protocol=R.protocol,h.authority=R.authority,h.protocol==="http"){var F=h.params.indexOf("secure");F>=0&&h.params.splice(F,1)}if(R.path!=="/"&&(h.path=""+R.path+h.path),!Je.REQUIRE_ACCESS_TOKEN)return ir(h);if(!(v=v||Je.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return h.params=h.params.filter(function(z){return z.indexOf("access_token")===-1}),h.params.push("access_token="+v),ir(h)};var Me=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ze(h){return Me.test(h)}var _t=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mt(h){var v=h.match(_t);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function ir(h){var v=h.params.length?"?"+h.params.join("&"):"";return h.protocol+"://"+h.authority+h.path+v}function Tr(h){if(!h)return null;var v=h.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(Q.atob(v[1]).split("").map(function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(_){return null}}var et=function(h){this.type=h,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};et.prototype.getStorageKey=function(h){var v,_=Tr(Je.ACCESS_TOKEN);return v=_&&_.u?Q.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,function(R,F){return String.fromCharCode(+("0x"+F))})):Je.ACCESS_TOKEN||"",h?"mapbox.eventData."+h+":"+v:"mapbox.eventData:"+v},et.prototype.fetchEventData=function(){var h=he("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{var R=Q.localStorage.getItem(v);R&&(this.eventData=JSON.parse(R));var F=Q.localStorage.getItem(_);F&&(this.anonId=F)}catch(z){ze("Unable to read from LocalStorage")}},et.prototype.saveEventData=function(){var h=he("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{Q.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&Q.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(R){ze("Unable to write to LocalStorage")}},et.prototype.processRequests=function(h){},et.prototype.postEvent=function(h,v,_,R){var F=this;if(Je.EVENTS_URL){var z=Mt(Je.EVENTS_URL);z.params.push("access_token="+(R||Je.ACCESS_TOKEN||""));var K={event:this.type,created:new Date(h).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Le,userId:this.anonId},de=v?b(K,v):K,Be={url:ir(z),headers:{"Content-Type":"text/plain"},body:JSON.stringify([de])};this.pendingRequest=Pt(Be,function(it){F.pendingRequest=null,_(it),F.saveEventData(),F.processRequests(R)})}},et.prototype.queueRequest=function(h,v){this.queue.push(h),this.processRequests(v)};var en,Xr,Sr=function(h){function v(){h.call(this,"map.load"),this.success={},this.skuToken=""}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(_,R,F,z){this.skuToken=F;var K=!(!z&&!Je.ACCESS_TOKEN),de=Array.isArray(_)&&_.some(function(Be){return at(Be)||Ze(Be)});Je.EVENTS_URL&&K&&de&&this.queueRequest({id:R,timestamp:Date.now()},z)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){var F=this.queue.shift(),z=F.id,K=F.timestamp;z&&this.success[z]||(this.anonId||this.fetchEventData(),De(this.anonId)||(this.anonId=Ae()),this.postEvent(K,{skuToken:this.skuToken},function(de){de||z&&(R.success[z]=!0)},_))}},v}(et),pt=new(function(h){function v(_){h.call(this,"appUserTurnstile"),this._customAccessToken=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(_,R){Je.EVENTS_URL&&Je.ACCESS_TOKEN&&Array.isArray(_)&&_.some(function(F){return at(F)||Ze(F)})&&this.queueRequest(Date.now(),R)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var F=Tr(Je.ACCESS_TOKEN),z=F?F.u:Je.ACCESS_TOKEN,K=z!==this.eventData.tokenU;De(this.anonId)||(this.anonId=Ae(),K=!0);var de=this.queue.shift();if(this.eventData.lastSuccess){var Be=new Date(this.eventData.lastSuccess),it=new Date(de),ht=(de-this.eventData.lastSuccess)/864e5;K=K||ht>=1||ht<-1||Be.getDate()!==it.getDate()}else K=!0;if(!K)return this.processRequests();this.postEvent(de,{"enabled.telemetry":!1},function(xt){xt||(R.eventData.lastSuccess=de,R.eventData.tokenU=z)},_)}},v}(et)),Ut=pt.postTurnstileEvent.bind(pt),Gt=new Sr,Tt=Gt.postMapLoadEvent.bind(Gt),qt=500,fr=50;function hr(){Q.caches&&!en&&(en=Q.caches.open("mapbox-tiles"))}function Er(h){var v=h.indexOf("?");return v<0?h:h.slice(0,v)}var Ir,ue=1/0;function G(){return Ir==null&&(Ir=Q.OffscreenCanvas&&new Q.OffscreenCanvas(1,1).getContext("2d")&&typeof Q.createImageBitmap=="function"),Ir}var oe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(oe);var Ie=function(h){function v(_,R,F){R===401&&Ze(F)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),h.call(this,_),this.status=R,this.url=F,this.name=this.constructor.name,this.message=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),qe=ke()?function(){return self.worker&&self.worker.referrer}:function(){return(Q.location.protocol==="blob:"?Q.parent:Q).location.href},At,rr,Zt=function(h,v){if(!(/^file:/.test(_=h.url)||/^file:/.test(qe())&&!/^\w+:/.test(_))){if(Q.fetch&&Q.Request&&Q.AbortController&&Q.Request.prototype.hasOwnProperty("signal"))return function(R,F){var z,K=new Q.AbortController,de=new Q.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:qe(),signal:K.signal}),Be=!1,it=!1,ht=(z=de.url).indexOf("sku=")>0&&Ze(z);R.type==="json"&&de.headers.set("Accept","application/json");var xt=function(Ht,ur,pr){if(!it){if(Ht&&Ht.message!=="SecurityError"&&ze(Ht),ur&&pr)return Lt(ur);var zr=Date.now();Q.fetch(de).then(function(Or){if(Or.ok){var qr=ht?Or.clone():null;return Lt(Or,qr,zr)}return F(new Ie(Or.statusText,Or.status,R.url))}).catch(function(Or){Or.code!==20&&F(new Error(Or.message))})}},Lt=function(Ht,ur,pr){(R.type==="arrayBuffer"?Ht.arrayBuffer():R.type==="json"?Ht.json():Ht.text()).then(function(zr){it||(ur&&pr&&function(Or,qr,on){if(hr(),en){var gn={status:qr.status,statusText:qr.statusText,headers:new Q.Headers};qr.headers.forEach(function(Ln,pi){return gn.headers.set(pi,Ln)});var Tn=tt(qr.headers.get("Cache-Control")||"");Tn["no-store"]||(Tn["max-age"]&&gn.headers.set("Expires",new Date(on+1e3*Tn["max-age"]).toUTCString()),new Date(gn.headers.get("Expires")).getTime()-on<42e4||function(Ln,pi){if(Xr===void 0)try{new Response(new ReadableStream),Xr=!0}catch(Ei){Xr=!1}Xr?pi(Ln.body):Ln.blob().then(pi)}(qr,function(Ln){var pi=new Q.Response(Ln,gn);hr(),en&&en.then(function(Ei){return Ei.put(Er(Or.url),pi)}).catch(function(Ei){return ze(Ei.message)})}))}}(de,ur,pr),Be=!0,F(null,zr,Ht.headers.get("Cache-Control"),Ht.headers.get("Expires")))}).catch(function(zr){it||F(new Error(zr.message))})};return ht?function(Ht,ur){if(hr(),!en)return ur(null);var pr=Er(Ht.url);en.then(function(zr){zr.match(pr).then(function(Or){var qr=function(on){if(!on)return!1;var gn=new Date(on.headers.get("Expires")||0),Tn=tt(on.headers.get("Cache-Control")||"");return gn>Date.now()&&!Tn["no-cache"]}(Or);zr.delete(pr),qr&&zr.put(pr,Or.clone()),ur(null,Or,qr)}).catch(ur)}).catch(ur)}(de,xt):xt(null,null),{cancel:function(){it=!0,Be||K.abort()}}}(h,v);if(ke()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,v,void 0,!0)}var _;return function(R,F){var z=new Q.XMLHttpRequest;for(var K in z.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(z.responseType="arraybuffer"),R.headers)z.setRequestHeader(K,R.headers[K]);return R.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=R.credentials==="include",z.onerror=function(){F(new Error(z.statusText))},z.onload=function(){if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){var de=z.response;if(R.type==="json")try{de=JSON.parse(z.response)}catch(Be){return F(Be)}F(null,de,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else F(new Ie(z.statusText,z.status,R.url))},z.send(R.body),{cancel:function(){return z.abort()}}}(h,v)},wt=function(h,v){return Zt(b(h,{type:"arrayBuffer"}),v)},Pt=function(h,v){return Zt(b(h,{method:"POST"}),v)},ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";At=[],rr=0;var ve=function(h,v){if(dt.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),rr>=Je.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:h,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return At.push(_),_}rr++;var R=!1,F=function(){if(!R)for(R=!0,rr--;At.length&&rr<Je.MAX_PARALLEL_IMAGE_REQUESTS;){var K=At.shift();K.cancelled||(K.cancel=ve(K.requestParameters,K.callback).cancel)}},z=wt(h,function(K,de,Be,it){F(),K?v(K):de&&(G()?function(ht,xt){var Lt=new Q.Blob([new Uint8Array(ht)],{type:"image/png"});Q.createImageBitmap(Lt).then(function(Ht){xt(null,Ht)}).catch(function(Ht){xt(new Error("Could not load image because of "+Ht.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(de,v):function(ht,xt,Lt,Ht){var ur=new Q.Image,pr=Q.URL;ur.onload=function(){xt(null,ur),pr.revokeObjectURL(ur.src),ur.onload=null,Q.requestAnimationFrame(function(){ur.src=ge})},ur.onerror=function(){return xt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var zr=new Q.Blob([new Uint8Array(ht)],{type:"image/png"});ur.cacheControl=Lt,ur.expires=Ht,ur.src=ht.byteLength?pr.createObjectURL(zr):ge}(de,v,Be,it))});return{cancel:function(){z.cancel(),F()}}};function Fe(h,v,_){_[h]&&_[h].indexOf(v)!==-1||(_[h]=_[h]||[],_[h].push(v))}function nt(h,v,_){if(_&&_[h]){var R=_[h].indexOf(v);R!==-1&&_[h].splice(R,1)}}var St=function(h,v){v===void 0&&(v={}),b(this,v),this.type=h},$t=function(h){function v(_,R){R===void 0&&(R={}),h.call(this,"error",b({error:_},R))}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(St),vr=function(){};vr.prototype.on=function(h,v){return this._listeners=this._listeners||{},Fe(h,v,this._listeners),this},vr.prototype.off=function(h,v){return nt(h,v,this._listeners),nt(h,v,this._oneTimeListeners),this},vr.prototype.once=function(h,v){return this._oneTimeListeners=this._oneTimeListeners||{},Fe(h,v,this._oneTimeListeners),this},vr.prototype.fire=function(h,v){typeof h=="string"&&(h=new St(h,v||{}));var _=h.type;if(this.listens(_)){h.target=this;for(var R=0,F=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];R<F.length;R+=1)F[R].call(this,h);for(var z=0,K=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];z<K.length;z+=1){var de=K[z];nt(_,de,this._oneTimeListeners),de.call(this,h)}var Be=this._eventedParent;Be&&(b(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Be.fire(h))}else h instanceof $t&&console.error(h.error);return this},vr.prototype.listens=function(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)},vr.prototype.setEventedParent=function(h,v){return this._eventedParent=h,this._eventedParentData=v,this};var Rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ct=function(h,v,_,R){this.message=(h?h+": ":"")+_,R&&(this.identifier=R),v!=null&&v.__line__&&(this.line=v.__line__)};function It(h){var v=h.value;return v?[new ct(h.key,v,"constants have been deprecated as of v8")]:[]}function gr(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var K in z)h[K]=z[K]}return h}function Br(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Nt(h){if(Array.isArray(h))return h.map(Nt);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){var v={};for(var _ in h)v[_]=Nt(h[_]);return v}return Br(h)}var wn=function(h){function v(_,R){h.call(this,R),this.message=R,this.key=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(Error),ei=function(h,v){v===void 0&&(v=[]),this.parent=h,this.bindings={};for(var _=0,R=v;_<R.length;_+=1){var F=R[_];this.bindings[F[0]]=F[1]}};ei.prototype.concat=function(h){return new ei(this,h)},ei.prototype.get=function(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(h+" not found in scope.")},ei.prototype.has=function(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)};var ci={kind:"null"},ln={kind:"number"},ti={kind:"string"},$n={kind:"boolean"},ri={kind:"color"},oa={kind:"object"},yi={kind:"value"},ya={kind:"collator"},Ya={kind:"formatted"},ha={kind:"resolvedImage"};function Fa(h,v){return{kind:"array",itemType:h,N:v}}function Sa(h){if(h.kind==="array"){var v=Sa(h.itemType);return typeof h.N=="number"?"array<"+v+", "+h.N+">":h.itemType.kind==="value"?"array":"array<"+v+">"}return h.kind}var xs=[ci,ln,ti,$n,ri,Ya,oa,Fa(yi),ha];function co(h,v){if(v.kind==="error")return null;if(h.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!co(h.itemType,v.itemType))&&(typeof h.N!="number"||h.N===v.N))return null}else{if(h.kind===v.kind)return null;if(h.kind==="value"){for(var _=0,R=xs;_<R.length;_+=1)if(!co(R[_],v))return null}}return"Expected "+Sa(h)+" but found "+Sa(v)+" instead."}function Lo(h,v){return v.some(function(_){return _.kind===h.kind})}function Za(h,v){return v.some(function(_){return _==="null"?h===null:_==="array"?Array.isArray(h):_==="object"?h&&!Array.isArray(h)&&typeof h=="object":_===typeof h})}var Kn=X(function(h,v){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function R(de){return(de=Math.round(de))<0?0:de>255?255:de}function F(de){return R(de[de.length-1]==="%"?parseFloat(de)/100*255:parseInt(de))}function z(de){return(Be=de[de.length-1]==="%"?parseFloat(de)/100:parseFloat(de))<0?0:Be>1?1:Be;var Be}function K(de,Be,it){return it<0?it+=1:it>1&&(it-=1),6*it<1?de+(Be-de)*it*6:2*it<1?Be:3*it<2?de+(Be-de)*(2/3-it)*6:de}try{v.parseCSSColor=function(de){var Be,it=de.replace(/ /g,"").toLowerCase();if(it in _)return _[it].slice();if(it[0]==="#")return it.length===4?(Be=parseInt(it.substr(1),16))>=0&&Be<=4095?[(3840&Be)>>4|(3840&Be)>>8,240&Be|(240&Be)>>4,15&Be|(15&Be)<<4,1]:null:it.length===7&&(Be=parseInt(it.substr(1),16))>=0&&Be<=16777215?[(16711680&Be)>>16,(65280&Be)>>8,255&Be,1]:null;var ht=it.indexOf("("),xt=it.indexOf(")");if(ht!==-1&&xt+1===it.length){var Lt=it.substr(0,ht),Ht=it.substr(ht+1,xt-(ht+1)).split(","),ur=1;switch(Lt){case"rgba":if(Ht.length!==4)return null;ur=z(Ht.pop());case"rgb":return Ht.length!==3?null:[F(Ht[0]),F(Ht[1]),F(Ht[2]),ur];case"hsla":if(Ht.length!==4)return null;ur=z(Ht.pop());case"hsl":if(Ht.length!==3)return null;var pr=(parseFloat(Ht[0])%360+360)%360/360,zr=z(Ht[1]),Or=z(Ht[2]),qr=Or<=.5?Or*(zr+1):Or+zr-Or*zr,on=2*Or-qr;return[R(255*K(on,qr,pr+1/3)),R(255*K(on,qr,pr)),R(255*K(on,qr,pr-1/3)),ur];default:return null}}return null}}catch(de){}}).parseCSSColor,Ci=function(h,v,_,R){R===void 0&&(R=1),this.r=h,this.g=v,this.b=_,this.a=R};Ci.parse=function(h){if(h){if(h instanceof Ci)return h;if(typeof h=="string"){var v=Kn(h);if(v)return new Ci(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},Ci.prototype.toString=function(){var h=this.toArray(),v=h[1],_=h[2],R=h[3];return"rgba("+Math.round(h[0])+","+Math.round(v)+","+Math.round(_)+","+R+")"},Ci.prototype.toArray=function(){var h=this.a;return h===0?[0,0,0,0]:[255*this.r/h,255*this.g/h,255*this.b/h,h]},Ci.black=new Ci(0,0,0,1),Ci.white=new Ci(1,1,1,1),Ci.transparent=new Ci(0,0,0,0),Ci.red=new Ci(1,0,0,1);var Ga=function(h,v,_){this.sensitivity=h?v?"variant":"case":v?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ga.prototype.compare=function(h,v){return this.collator.compare(h,v)},Ga.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Jo=function(h,v,_,R,F){this.text=h,this.image=v,this.scale=_,this.fontStack=R,this.textColor=F},fo=function(h){this.sections=h};fo.fromString=function(h){return new fo([new Jo(h,null,null,null,null)])},fo.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(h){return h.text.length!==0||h.image&&h.image.name.length!==0})},fo.factory=function(h){return h instanceof fo?h:fo.fromString(h)},fo.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(h){return h.text}).join("")},fo.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];if(R.image)h.push(["image",R.image.name]);else{h.push(R.text);var F={};R.fontStack&&(F["text-font"]=["literal",R.fontStack.split(",")]),R.scale&&(F["font-scale"]=R.scale),R.textColor&&(F["text-color"]=["rgba"].concat(R.textColor.toArray())),h.push(F)}}return h};var To=function(h){this.name=h.name,this.available=h.available};function lr(h,v,_,R){return typeof h=="number"&&h>=0&&h<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof _=="number"&&_>=0&&_<=255?R===void 0||typeof R=="number"&&R>=0&&R<=1?null:"Invalid rgba value ["+[h,v,_,R].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof R=="number"?[h,v,_,R]:[h,v,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Dt(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Ci||h instanceof Ga||h instanceof fo||h instanceof To)return!0;if(Array.isArray(h)){for(var v=0,_=h;v<_.length;v+=1)if(!Dt(_[v]))return!1;return!0}if(typeof h=="object"){for(var R in h)if(!Dt(h[R]))return!1;return!0}return!1}function er(h){if(h===null)return ci;if(typeof h=="string")return ti;if(typeof h=="boolean")return $n;if(typeof h=="number")return ln;if(h instanceof Ci)return ri;if(h instanceof Ga)return ya;if(h instanceof fo)return Ya;if(h instanceof To)return ha;if(Array.isArray(h)){for(var v,_=h.length,R=0,F=h;R<F.length;R+=1){var z=er(F[R]);if(v){if(v===z)continue;v=yi;break}v=z}return Fa(v||yi,_)}return oa}function kr(h){var v=typeof h;return h===null?"":v==="string"||v==="number"||v==="boolean"?String(h):h instanceof Ci||h instanceof fo||h instanceof To?h.toString():JSON.stringify(h)}To.prototype.toString=function(){return this.name},To.fromString=function(h){return h?new To({name:h,available:!1}):null},To.prototype.serialize=function(){return["image",this.name]};var tn=function(h,v){this.type=h,this.value=v};tn.parse=function(h,v){if(h.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(!Dt(h[1]))return v.error("invalid value");var _=h[1],R=er(_),F=v.expectedType;return R.kind!=="array"||R.N!==0||!F||F.kind!=="array"||typeof F.N=="number"&&F.N!==0||(R=F),new tn(R,_)},tn.prototype.evaluate=function(){return this.value},tn.prototype.eachChild=function(){},tn.prototype.outputDefined=function(){return!0},tn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ci?["rgba"].concat(this.value.toArray()):this.value instanceof fo?this.value.serialize():this.value};var In=function(h){this.name="ExpressionEvaluationError",this.message=h};In.prototype.toJSON=function(){return this.message};var zn={string:ti,number:ln,boolean:$n,object:oa},On=function(h,v){this.type=h,this.args=v};On.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _,R=1,F=h[0];if(F==="array"){var z,K;if(h.length>2){var de=h[1];if(typeof de!="string"||!(de in zn)||de==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);z=zn[de],R++}else z=yi;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return v.error('The length argument to "array" must be a positive integer literal',2);K=h[2],R++}_=Fa(z,K)}else _=zn[F];for(var Be=[];R<h.length;R++){var it=v.parse(h[R],R,yi);if(!it)return null;Be.push(it)}return new On(_,Be)},On.prototype.evaluate=function(h){for(var v=0;v<this.args.length;v++){var _=this.args[v].evaluate(h);if(!co(this.type,er(_)))return _;if(v===this.args.length-1)throw new In("Expected value to be of type "+Sa(this.type)+", but found "+Sa(er(_))+" instead.")}return null},On.prototype.eachChild=function(h){this.args.forEach(h)},On.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},On.prototype.serialize=function(){var h=this.type,v=[h.kind];if(h.kind==="array"){var _=h.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){v.push(_.kind);var R=h.N;(typeof R=="number"||this.args.length>1)&&v.push(R)}}return v.concat(this.args.map(function(F){return F.serialize()}))};var Vi=function(h){this.type=Ya,this.sections=h};Vi.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[1];if(!Array.isArray(_)&&typeof _=="object")return v.error("First argument must be an image or text section.");for(var R=[],F=!1,z=1;z<=h.length-1;++z){var K=h[z];if(F&&typeof K=="object"&&!Array.isArray(K)){F=!1;var de=null;if(K["font-scale"]&&!(de=v.parse(K["font-scale"],1,ln)))return null;var Be=null;if(K["text-font"]&&!(Be=v.parse(K["text-font"],1,Fa(ti))))return null;var it=null;if(K["text-color"]&&!(it=v.parse(K["text-color"],1,ri)))return null;var ht=R[R.length-1];ht.scale=de,ht.font=Be,ht.textColor=it}else{var xt=v.parse(h[z],1,yi);if(!xt)return null;var Lt=xt.type.kind;if(Lt!=="string"&&Lt!=="value"&&Lt!=="null"&&Lt!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,R.push({content:xt,scale:null,font:null,textColor:null})}}return new Vi(R)},Vi.prototype.evaluate=function(h){return new fo(this.sections.map(function(v){var _=v.content.evaluate(h);return er(_)===ha?new Jo("",_,null,null,null):new Jo(kr(_),null,v.scale?v.scale.evaluate(h):null,v.font?v.font.evaluate(h).join(","):null,v.textColor?v.textColor.evaluate(h):null)}))},Vi.prototype.eachChild=function(h){for(var v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h(R.content),R.scale&&h(R.scale),R.font&&h(R.font),R.textColor&&h(R.textColor)}},Vi.prototype.outputDefined=function(){return!1},Vi.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h.push(R.content.serialize());var F={};R.scale&&(F["font-scale"]=R.scale.serialize()),R.font&&(F["text-font"]=R.font.serialize()),R.textColor&&(F["text-color"]=R.textColor.serialize()),h.push(F)}return h};var Bi=function(h){this.type=ha,this.input=h};Bi.parse=function(h,v){if(h.length!==2)return v.error("Expected two arguments.");var _=v.parse(h[1],1,ti);return _?new Bi(_):v.error("No image name provided.")},Bi.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=To.fromString(v);return _&&h.availableImages&&(_.available=h.availableImages.indexOf(v)>-1),_},Bi.prototype.eachChild=function(h){h(this.input)},Bi.prototype.outputDefined=function(){return!1},Bi.prototype.serialize=function(){return["image",this.input.serialize()]};var Ja={"to-boolean":$n,"to-color":ri,"to-number":ln,"to-string":ti},Ao=function(h,v){this.type=h,this.args=v};Ao.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[0];if((_==="to-boolean"||_==="to-string")&&h.length!==2)return v.error("Expected one argument.");for(var R=Ja[_],F=[],z=1;z<h.length;z++){var K=v.parse(h[z],z,yi);if(!K)return null;F.push(K)}return new Ao(R,F)},Ao.prototype.evaluate=function(h){if(this.type.kind==="boolean")return!!this.args[0].evaluate(h);if(this.type.kind==="color"){for(var v,_,R=0,F=this.args;R<F.length;R+=1){if(_=null,(v=F[R].evaluate(h))instanceof Ci)return v;if(typeof v=="string"){var z=h.parseColor(v);if(z)return z}else if(Array.isArray(v)&&!(_=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":lr(v[0],v[1],v[2],v[3])))return new Ci(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new In(_||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var K=null,de=0,Be=this.args;de<Be.length;de+=1){if((K=Be[de].evaluate(h))===null)return 0;var it=Number(K);if(!isNaN(it))return it}throw new In("Could not convert "+JSON.stringify(K)+" to number.")}return this.type.kind==="formatted"?fo.fromString(kr(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?To.fromString(kr(this.args[0].evaluate(h))):kr(this.args[0].evaluate(h))},Ao.prototype.eachChild=function(h){this.args.forEach(h)},Ao.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bi(this.args[0]).serialize();var h=["to-"+this.type.kind];return this.eachChild(function(v){h.push(v.serialize())}),h};var fs=["Unknown","Point","LineString","Polygon"],ko=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ko.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ko.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?fs[this.feature.type]:this.feature.type:null},ko.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ko.prototype.canonicalID=function(){return this.canonical},ko.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ko.prototype.parseColor=function(h){var v=this._parseColorCache[h];return v||(v=this._parseColorCache[h]=Ci.parse(h)),v};var oo=function(h,v,_,R){this.name=h,this.type=v,this._evaluate=_,this.args=R};oo.prototype.evaluate=function(h){return this._evaluate(h,this.args)},oo.prototype.eachChild=function(h){this.args.forEach(h)},oo.prototype.outputDefined=function(){return!1},oo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(h){return h.serialize()}))},oo.parse=function(h,v){var _,R=h[0],F=oo.definitions[R];if(!F)return v.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0);for(var z=Array.isArray(F)?F[0]:F.type,K=Array.isArray(F)?[[F[1],F[2]]]:F.overloads,de=K.filter(function(ia){var Oi=ia[0];return!Array.isArray(Oi)||Oi.length===h.length-1}),Be=null,it=0,ht=de;it<ht.length;it+=1){var xt=ht[it],Lt=xt[0],Ht=xt[1];Be=new bo(v.registry,v.path,null,v.scope);for(var ur=[],pr=!1,zr=1;zr<h.length;zr++){var Or=h[zr],qr=Array.isArray(Lt)?Lt[zr-1]:Lt.type,on=Be.parse(Or,1+ur.length,qr);if(!on){pr=!0;break}ur.push(on)}if(!pr)if(Array.isArray(Lt)&&Lt.length!==ur.length)Be.error("Expected "+Lt.length+" arguments, but found "+ur.length+" instead.");else{for(var gn=0;gn<ur.length;gn++){var Tn=Array.isArray(Lt)?Lt[gn]:Lt.type,Ln=ur[gn];Be.concat(gn+1).checkSubtype(Tn,Ln.type)}if(Be.errors.length===0)return new oo(R,z,Ht,ur)}}if(de.length===1)(_=v.errors).push.apply(_,Be.errors);else{for(var pi=(de.length?de:K).map(function(ia){var Oi;return Oi=ia[0],Array.isArray(Oi)?"("+Oi.map(Sa).join(", ")+")":"("+Sa(Oi.type)+"...)"}).join(" | "),Ei=[],Ki=1;Ki<h.length;Ki++){var Di=v.parse(h[Ki],1+Ei.length);if(!Di)return null;Ei.push(Sa(Di.type))}v.error("Expected arguments of type "+pi+", but found ("+Ei.join(", ")+") instead.")}return null},oo.register=function(h,v){for(var _ in oo.definitions=v,v)h[_]=oo};var iu=function(h,v,_){this.type=ya,this.locale=_,this.caseSensitive=h,this.diacriticSensitive=v};function Ko(h,v){h[0]=Math.min(h[0],v[0]),h[1]=Math.min(h[1],v[1]),h[2]=Math.max(h[2],v[0]),h[3]=Math.max(h[3],v[1])}function jt(h,v){return!(h[0]<=v[0]||h[2]>=v[2]||h[1]<=v[1]||h[3]>=v[3])}function sr(h,v){var _=(180+h[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,F=Math.pow(2,v.z);return[Math.round(_*F*8192),Math.round(R*F*8192)]}function Vr(h,v,_){return v[1]>h[1]!=_[1]>h[1]&&h[0]<(_[0]-v[0])*(h[1]-v[1])/(_[1]-v[1])+v[0]}function Cn(h,v){for(var _,R,F,z,K,de,Be,it=!1,ht=0,xt=v.length;ht<xt;ht++)for(var Lt=v[ht],Ht=0,ur=Lt.length;Ht<ur-1;Ht++){if((z=(_=h)[0]-(R=Lt[Ht])[0])*(Be=_[1]-(F=Lt[Ht+1])[1])-(de=_[0]-F[0])*(K=_[1]-R[1])==0&&z*de<=0&&K*Be<=0)return!1;Vr(h,Lt[Ht],Lt[Ht+1])&&(it=!it)}return it}function Yn(h,v){for(var _=0;_<v.length;_++)if(Cn(h,v[_]))return!0;return!1}function Wi(h,v,_,R){var F=R[0]-_[0],z=R[1]-_[1],K=(h[0]-_[0])*z-F*(h[1]-_[1]),de=(v[0]-_[0])*z-F*(v[1]-_[1]);return K>0&&de<0||K<0&&de>0}function ho(h,v,_){for(var R=0,F=_;R<F.length;R+=1)for(var z=F[R],K=0;K<z.length-1;++K)if((xt=[(ht=z[K+1])[0]-(it=z[K])[0],ht[1]-it[1]])[0]*(Lt=[(Be=v)[0]-(de=h)[0],Be[1]-de[1]])[1]-xt[1]*Lt[0]!=0&&Wi(de,Be,it,ht)&&Wi(it,ht,de,Be))return!0;var de,Be,it,ht,xt,Lt;return!1}function Gs(h,v){for(var _=0;_<h.length;++_)if(!Cn(h[_],v))return!1;for(var R=0;R<h.length-1;++R)if(ho(h[R],h[R+1],v))return!1;return!0}function Mo(h,v){for(var _=0;_<v.length;_++)if(Gs(h,v[_]))return!0;return!1}function Fo(h,v,_){for(var R=[],F=0;F<h.length;F++){for(var z=[],K=0;K<h[F].length;K++){var de=sr(h[F][K],_);Ko(v,de),z.push(de)}R.push(z)}return R}function Wu(h,v,_){for(var R=[],F=0;F<h.length;F++){var z=Fo(h[F],v,_);R.push(z)}return R}function ff(h,v,_,R){if(h[0]<_[0]||h[0]>_[2]){var F=.5*R,z=h[0]-_[0]>F?-R:_[0]-h[0]>F?R:0;z===0&&(z=h[0]-_[2]>F?-R:_[2]-h[0]>F?R:0),h[0]+=z}Ko(v,h)}function Jf(h,v,_,R){for(var F=8192*Math.pow(2,R.z),z=[8192*R.x,8192*R.y],K=[],de=0,Be=h;de<Be.length;de+=1)for(var it=0,ht=Be[de];it<ht.length;it+=1){var xt=ht[it],Lt=[xt.x+z[0],xt.y+z[1]];ff(Lt,v,_,F),K.push(Lt)}return K}function eh(h,v,_,R){for(var F,z=8192*Math.pow(2,R.z),K=[8192*R.x,8192*R.y],de=[],Be=0,it=h;Be<it.length;Be+=1){for(var ht=[],xt=0,Lt=it[Be];xt<Lt.length;xt+=1){var Ht=Lt[xt],ur=[Ht.x+K[0],Ht.y+K[1]];Ko(v,ur),ht.push(ur)}de.push(ht)}if(v[2]-v[0]<=z/2){(F=v)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(var pr=0,zr=de;pr<zr.length;pr+=1)for(var Or=0,qr=zr[pr];Or<qr.length;Or+=1)ff(qr[Or],v,_,z)}return de}iu.parse=function(h,v){if(h.length!==2)return v.error("Expected one argument.");var _=h[1];if(typeof _!="object"||Array.isArray(_))return v.error("Collator options argument must be an object.");var R=v.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,$n);if(!R)return null;var F=v.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,$n);if(!F)return null;var z=null;return _.locale&&!(z=v.parse(_.locale,1,ti))?null:new iu(R,F,z)},iu.prototype.evaluate=function(h){return new Ga(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)},iu.prototype.eachChild=function(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)},iu.prototype.outputDefined=function(){return!1},iu.prototype.serialize=function(){var h={};return h["case-sensitive"]=this.caseSensitive.serialize(),h["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(h.locale=this.locale.serialize()),["collator",h]};var du=function(h,v){this.type=$n,this.geojson=h,this.geometries=v};function lc(h){if(h instanceof oo&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof du)return!1;var v=!0;return h.eachChild(function(_){v&&!lc(_)&&(v=!1)}),v}function au(h){if(h instanceof oo&&h.name==="feature-state")return!1;var v=!0;return h.eachChild(function(_){v&&!au(_)&&(v=!1)}),v}function Rl(h,v){if(h instanceof oo&&v.indexOf(h.name)>=0)return!1;var _=!0;return h.eachChild(function(R){_&&!Rl(R,v)&&(_=!1)}),_}du.parse=function(h,v){if(h.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(Dt(h[1])){var _=h[1];if(_.type==="FeatureCollection")for(var R=0;R<_.features.length;++R){var F=_.features[R].geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new du(_,_.features[R].geometry)}else if(_.type==="Feature"){var z=_.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new du(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new du(_,_)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},du.prototype.evaluate=function(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var K=Fo(_.coordinates,F,z),de=Jf(v.geometry(),R,F,z);if(!jt(R,F))return!1;for(var Be=0,it=de;Be<it.length;Be+=1)if(!Cn(it[Be],K))return!1}if(_.type==="MultiPolygon"){var ht=Wu(_.coordinates,F,z),xt=Jf(v.geometry(),R,F,z);if(!jt(R,F))return!1;for(var Lt=0,Ht=xt;Lt<Ht.length;Lt+=1)if(!Yn(Ht[Lt],ht))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var K=Fo(_.coordinates,F,z),de=eh(v.geometry(),R,F,z);if(!jt(R,F))return!1;for(var Be=0,it=de;Be<it.length;Be+=1)if(!Gs(it[Be],K))return!1}if(_.type==="MultiPolygon"){var ht=Wu(_.coordinates,F,z),xt=eh(v.geometry(),R,F,z);if(!jt(R,F))return!1;for(var Lt=0,Ht=xt;Lt<Ht.length;Lt+=1)if(!Mo(Ht[Lt],ht))return!1}return!0}(h,this.geometries)}return!1},du.prototype.eachChild=function(){},du.prototype.outputDefined=function(){return!0},du.prototype.serialize=function(){return["within",this.geojson]};var cc=function(h,v){this.type=v.type,this.name=h,this.boundExpression=v};cc.parse=function(h,v){if(h.length!==2||typeof h[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var _=h[1];return v.scope.has(_)?new cc(_,v.scope.get(_)):v.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},cc.prototype.evaluate=function(h){return this.boundExpression.evaluate(h)},cc.prototype.eachChild=function(){},cc.prototype.outputDefined=function(){return!1},cc.prototype.serialize=function(){return["var",this.name]};var bo=function(h,v,_,R,F){v===void 0&&(v=[]),R===void 0&&(R=new ei),F===void 0&&(F=[]),this.registry=h,this.path=v,this.key=v.map(function(z){return"["+z+"]"}).join(""),this.scope=R,this.errors=F,this.expectedType=_};function ec(h,v){for(var _,R=h.length-1,F=0,z=R,K=0;F<=z;)if((_=h[K=Math.floor((F+z)/2)])<=v){if(K===R||v<h[K+1])return K;F=K+1}else{if(!(_>v))throw new In("Input is not a number.");z=K-1}return 0}bo.prototype.parse=function(h,v,_,R,F){return F===void 0&&(F={}),v?this.concat(v,_,R)._parse(h,F):this._parse(h,F)},bo.prototype._parse=function(h,v){function _(it,ht,xt){return xt==="assert"?new On(ht,[it]):xt==="coerce"?new Ao(ht,[it]):it}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var R=h[0];if(typeof R!="string")return this.error("Expression name must be a string, but found "+typeof R+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var F=this.registry[R];if(F){var z=F.parse(h,this);if(!z)return null;if(this.expectedType){var K=this.expectedType,de=z.type;if(K.kind!=="string"&&K.kind!=="number"&&K.kind!=="boolean"&&K.kind!=="object"&&K.kind!=="array"||de.kind!=="value")if(K.kind!=="color"&&K.kind!=="formatted"&&K.kind!=="resolvedImage"||de.kind!=="value"&&de.kind!=="string"){if(this.checkSubtype(K,de))return null}else z=_(z,K,v.typeAnnotation||"coerce");else z=_(z,K,v.typeAnnotation||"assert")}if(!(z instanceof tn)&&z.type.kind!=="resolvedImage"&&function it(ht){if(ht instanceof cc)return it(ht.boundExpression);if(ht instanceof oo&&ht.name==="error"||ht instanceof iu||ht instanceof du)return!1;var xt=ht instanceof Ao||ht instanceof On,Lt=!0;return ht.eachChild(function(Ht){Lt=xt?Lt&&it(Ht):Lt&&Ht instanceof tn}),!!Lt&&lc(ht)&&Rl(ht,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(z)){var Be=new ko;try{z=new tn(z.type,z.evaluate(Be))}catch(it){return this.error(it.message),null}}return z}return this.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof h+" instead.")},bo.prototype.concat=function(h,v,_){var R=typeof h=="number"?this.path.concat(h):this.path,F=_?this.scope.concat(_):this.scope;return new bo(this.registry,R,v||null,F,this.errors)},bo.prototype.error=function(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];var R=""+this.key+v.map(function(F){return"["+F+"]"}).join("");this.errors.push(new wn(R,h))},bo.prototype.checkSubtype=function(h,v){var _=co(h,v);return _&&this.error(_),_};var Ms=function(h,v,_){this.type=h,this.input=v,this.labels=[],this.outputs=[];for(var R=0,F=_;R<F.length;R+=1){var z=F[R],K=z[1];this.labels.push(z[0]),this.outputs.push(K)}};function Rs(h,v,_){return h*(1-_)+v*_}Ms.parse=function(h,v){if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");var _=v.parse(h[1],1,ln);if(!_)return null;var R=[],F=null;v.expectedType&&v.expectedType.kind!=="value"&&(F=v.expectedType);for(var z=1;z<h.length;z+=2){var K=z===1?-1/0:h[z],de=h[z+1],Be=z,it=z+1;if(typeof K!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Be);if(R.length&&R[R.length-1][0]>=K)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Be);var ht=v.parse(de,it,F);if(!ht)return null;F=F||ht.type,R.push([K,ht])}return new Ms(F,_,R)},Ms.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;return R>=v[F-1]?_[F-1].evaluate(h):_[ec(v,R)].evaluate(h)},Ms.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Ms.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Ms.prototype.serialize=function(){for(var h=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&h.push(this.labels[v]),h.push(this.outputs[v].serialize());return h};var Rc=Object.freeze({__proto__:null,number:Rs,color:function(h,v,_){return new Ci(Rs(h.r,v.r,_),Rs(h.g,v.g,_),Rs(h.b,v.b,_),Rs(h.a,v.a,_))},array:function(h,v,_){return h.map(function(R,F){return Rs(R,v[F],_)})}}),Ic=6/29*3*(6/29),If=Math.PI/180,Ll=180/Math.PI;function Fl(h){return h>.008856451679035631?Math.pow(h,1/3):h/Ic+4/29}function tc(h){return h>6/29?h*h*h:Ic*(h-4/29)}function Lu(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Oc(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Rn(h){var v=Oc(h.r),_=Oc(h.g),R=Oc(h.b),F=Fl((.4124564*v+.3575761*_+.1804375*R)/.95047),z=Fl((.2126729*v+.7151522*_+.072175*R)/1);return{l:116*z-16,a:500*(F-z),b:200*(z-Fl((.0193339*v+.119192*_+.9503041*R)/1.08883)),alpha:h.a}}function ji(h){var v=(h.l+16)/116,_=isNaN(h.a)?v:v+h.a/500,R=isNaN(h.b)?v:v-h.b/200;return v=1*tc(v),_=.95047*tc(_),R=1.08883*tc(R),new Ci(Lu(3.2404542*_-1.5371385*v-.4985314*R),Lu(-.969266*_+1.8760108*v+.041556*R),Lu(.0556434*_-.2040259*v+1.0572252*R),h.alpha)}function Sv(h,v,_){var R=v-h;return h+_*(R>180||R<-180?R-360*Math.round(R/360):R)}var th={forward:Rn,reverse:ji,interpolate:function(h,v,_){return{l:Rs(h.l,v.l,_),a:Rs(h.a,v.a,_),b:Rs(h.b,v.b,_),alpha:Rs(h.alpha,v.alpha,_)}}},fc={forward:function(h){var v=Rn(h),_=v.l,R=v.a,F=v.b,z=Math.atan2(F,R)*Ll;return{h:z<0?z+360:z,c:Math.sqrt(R*R+F*F),l:_,alpha:h.a}},reverse:function(h){var v=h.h*If,_=h.c;return ji({l:h.l,a:Math.cos(v)*_,b:Math.sin(v)*_,alpha:h.alpha})},interpolate:function(h,v,_){return{h:Sv(h.h,v.h,_),c:Rs(h.c,v.c,_),l:Rs(h.l,v.l,_),alpha:Rs(h.alpha,v.alpha,_)}}},$p=Object.freeze({__proto__:null,lab:th,hcl:fc}),Qs=function(h,v,_,R,F){this.type=h,this.operator=v,this.interpolation=_,this.input=R,this.labels=[],this.outputs=[];for(var z=0,K=F;z<K.length;z+=1){var de=K[z],Be=de[1];this.labels.push(de[0]),this.outputs.push(Be)}};function Pc(h,v,_,R){var F=R-_,z=h-_;return F===0?0:v===1?z/F:(Math.pow(v,z)-1)/(Math.pow(v,F)-1)}Qs.interpolationFactor=function(h,v,_,R){var F=0;if(h.name==="exponential")F=Pc(v,h.base,_,R);else if(h.name==="linear")F=Pc(v,1,_,R);else if(h.name==="cubic-bezier"){var z=h.controlPoints;F=new j(z[0],z[1],z[2],z[3]).solve(Pc(v,1,_,R))}return F},Qs.parse=function(h,v){var _=h[0],R=h[1],F=h[2],z=h.slice(3);if(!Array.isArray(R)||R.length===0)return v.error("Expected an interpolation type expression.",1);if(R[0]==="linear")R={name:"linear"};else if(R[0]==="exponential"){var K=R[1];if(typeof K!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);R={name:"exponential",base:K}}else{if(R[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(R[0]),1,0);var de=R.slice(1);if(de.length!==4||de.some(function(zr){return typeof zr!="number"||zr<0||zr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);R={name:"cubic-bezier",controlPoints:de}}if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!(F=v.parse(F,2,ln)))return null;var Be=[],it=null;_==="interpolate-hcl"||_==="interpolate-lab"?it=ri:v.expectedType&&v.expectedType.kind!=="value"&&(it=v.expectedType);for(var ht=0;ht<z.length;ht+=2){var xt=z[ht],Lt=z[ht+1],Ht=ht+3,ur=ht+4;if(typeof xt!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ht);if(Be.length&&Be[Be.length-1][0]>=xt)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ht);var pr=v.parse(Lt,ur,it);if(!pr)return null;it=it||pr.type,Be.push([xt,pr])}return it.kind==="number"||it.kind==="color"||it.kind==="array"&&it.itemType.kind==="number"&&typeof it.N=="number"?new Qs(it,_,R,F,Be):v.error("Type "+Sa(it)+" is not interpolatable.")},Qs.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;if(R>=v[F-1])return _[F-1].evaluate(h);var z=ec(v,R),K=Qs.interpolationFactor(this.interpolation,R,v[z],v[z+1]),de=_[z].evaluate(h),Be=_[z+1].evaluate(h);return this.operator==="interpolate"?Rc[this.type.kind.toLowerCase()](de,Be,K):this.operator==="interpolate-hcl"?fc.reverse(fc.interpolate(fc.forward(de),fc.forward(Be),K)):th.reverse(th.interpolate(th.forward(de),th.forward(Be),K))},Qs.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Qs.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Qs.prototype.serialize=function(){var h;h=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,h,this.input.serialize()],_=0;_<this.labels.length;_++)v.push(this.labels[_],this.outputs[_].serialize());return v};var Bl=function(h,v){this.type=h,this.args=v};Bl.parse=function(h,v){if(h.length<2)return v.error("Expectected at least one argument.");var _=null,R=v.expectedType;R&&R.kind!=="value"&&(_=R);for(var F=[],z=0,K=h.slice(1);z<K.length;z+=1){var de=v.parse(K[z],1+F.length,_,void 0,{typeAnnotation:"omit"});if(!de)return null;_=_||de.type,F.push(de)}var Be=R&&F.some(function(it){return co(R,it.type)});return new Bl(Be?yi:_,F)},Bl.prototype.evaluate=function(h){for(var v,_=null,R=0,F=0,z=this.args;F<z.length&&(R++,(_=z[F].evaluate(h))&&_ instanceof To&&!_.available&&(v||(v=_.name),_=null,R===this.args.length&&(_=v)),_===null);F+=1);return _},Bl.prototype.eachChild=function(h){this.args.forEach(h)},Bl.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Bl.prototype.serialize=function(){var h=["coalesce"];return this.eachChild(function(v){h.push(v.serialize())}),h};var ou=function(h,v){this.type=v.type,this.bindings=[].concat(h),this.result=v};ou.prototype.evaluate=function(h){return this.result.evaluate(h)},ou.prototype.eachChild=function(h){for(var v=0,_=this.bindings;v<_.length;v+=1)h(_[v][1]);h(this.result)},ou.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found "+(h.length-1)+" instead.");for(var _=[],R=1;R<h.length-1;R+=2){var F=h[R];if(typeof F!="string")return v.error("Expected string, but found "+typeof F+" instead.",R);if(/[^a-zA-Z0-9_]/.test(F))return v.error("Variable names must contain only alphanumeric characters or '_'.",R);var z=v.parse(h[R+1],R+1);if(!z)return null;_.push([F,z])}var K=v.parse(h[h.length-1],h.length-1,v.expectedType,_);return K?new ou(_,K):null},ou.prototype.outputDefined=function(){return this.result.outputDefined()},ou.prototype.serialize=function(){for(var h=["let"],v=0,_=this.bindings;v<_.length;v+=1){var R=_[v];h.push(R[0],R[1].serialize())}return h.push(this.result.serialize()),h};var vu=function(h,v,_){this.type=h,this.index=v,this.input=_};vu.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,ln),R=v.parse(h[2],2,Fa(v.expectedType||yi));return _&&R?new vu(R.type.itemType,_,R):null},vu.prototype.evaluate=function(h){var v=this.index.evaluate(h),_=this.input.evaluate(h);if(v<0)throw new In("Array index out of bounds: "+v+" < 0.");if(v>=_.length)throw new In("Array index out of bounds: "+v+" > "+(_.length-1)+".");if(v!==Math.floor(v))throw new In("Array index must be an integer, but found "+v+" instead.");return _[v]},vu.prototype.eachChild=function(h){h(this.index),h(this.input)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Il=function(h,v){this.type=$n,this.needle=h,this.haystack=v};Il.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,yi),R=v.parse(h[2],2,yi);return _&&R?Lo(_.type,[$n,ti,ln,ci,yi])?new Il(_,R):v.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa(_.type)+" instead"):null},Il.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!_)return!1;if(!Za(v,["boolean","string","number","null"]))throw new In("Expected first argument to be of type boolean, string, number or null, but found "+Sa(er(v))+" instead.");if(!Za(_,["string","array"]))throw new In("Expected second argument to be of type array or string, but found "+Sa(er(_))+" instead.");return _.indexOf(v)>=0},Il.prototype.eachChild=function(h){h(this.needle),h(this.haystack)},Il.prototype.outputDefined=function(){return!0},Il.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hc=function(h,v,_){this.type=ln,this.needle=h,this.haystack=v,this.fromIndex=_};hc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,yi),R=v.parse(h[2],2,yi);if(!_||!R)return null;if(!Lo(_.type,[$n,ti,ln,ci,yi]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,ln);return F?new hc(_,R,F):null}return new hc(_,R)},hc.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!Za(v,["boolean","string","number","null"]))throw new In("Expected first argument to be of type boolean, string, number or null, but found "+Sa(er(v))+" instead.");if(!Za(_,["string","array"]))throw new In("Expected second argument to be of type array or string, but found "+Sa(er(_))+" instead.");if(this.fromIndex){var R=this.fromIndex.evaluate(h);return _.indexOf(v,R)}return _.indexOf(v)},hc.prototype.eachChild=function(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)},hc.prototype.outputDefined=function(){return!1},hc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var h=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),h]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Nl=function(h,v,_,R,F,z){this.inputType=h,this.type=v,this.input=_,this.cases=R,this.outputs=F,this.otherwise=z};Nl.parse=function(h,v){if(h.length<5)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if(h.length%2!=1)return v.error("Expected an even number of arguments.");var _,R;v.expectedType&&v.expectedType.kind!=="value"&&(R=v.expectedType);for(var F={},z=[],K=2;K<h.length-1;K+=2){var de=h[K],Be=h[K+1];Array.isArray(de)||(de=[de]);var it=v.concat(K);if(de.length===0)return it.error("Expected at least one branch label.");for(var ht=0,xt=de;ht<xt.length;ht+=1){var Lt=xt[ht];if(typeof Lt!="number"&&typeof Lt!="string")return it.error("Branch labels must be numbers or strings.");if(typeof Lt=="number"&&Math.abs(Lt)>Number.MAX_SAFE_INTEGER)return it.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Lt=="number"&&Math.floor(Lt)!==Lt)return it.error("Numeric branch labels must be integer values.");if(_){if(it.checkSubtype(_,er(Lt)))return null}else _=er(Lt);if(F[String(Lt)]!==void 0)return it.error("Branch labels must be unique.");F[String(Lt)]=z.length}var Ht=v.parse(Be,K,R);if(!Ht)return null;R=R||Ht.type,z.push(Ht)}var ur=v.parse(h[1],1,yi);if(!ur)return null;var pr=v.parse(h[h.length-1],h.length-1,R);return pr?ur.type.kind!=="value"&&v.concat(1).checkSubtype(_,ur.type)?null:new Nl(_,R,ur,F,z,pr):null},Nl.prototype.evaluate=function(h){var v=this.input.evaluate(h);return(er(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(h)},Nl.prototype.eachChild=function(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)},Nl.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})&&this.otherwise.outputDefined()},Nl.prototype.serialize=function(){for(var h=this,v=["match",this.input.serialize()],_=[],R={},F=0,z=Object.keys(this.cases).sort();F<z.length;F+=1){var K=z[F];(xt=R[this.cases[K]])===void 0?(R[this.cases[K]]=_.length,_.push([this.cases[K],[K]])):_[xt][1].push(K)}for(var de=function(Ht){return h.inputType.kind==="number"?Number(Ht):Ht},Be=0,it=_;Be<it.length;Be+=1){var ht=it[Be],xt=ht[0],Lt=ht[1];v.push(Lt.length===1?de(Lt[0]):Lt.map(de)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var kc=function(h,v,_){this.type=h,this.branches=v,this.otherwise=_};kc.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found only "+(h.length-1)+".");if(h.length%2!=0)return v.error("Expected an odd number of arguments.");var _;v.expectedType&&v.expectedType.kind!=="value"&&(_=v.expectedType);for(var R=[],F=1;F<h.length-1;F+=2){var z=v.parse(h[F],F,$n);if(!z)return null;var K=v.parse(h[F+1],F+1,_);if(!K)return null;R.push([z,K]),_=_||K.type}var de=v.parse(h[h.length-1],h.length-1,_);return de?new kc(_,R,de):null},kc.prototype.evaluate=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];if(R[0].evaluate(h))return F.evaluate(h)}return this.otherwise.evaluate(h)},kc.prototype.eachChild=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];h(R[0]),h(F)}h(this.otherwise)},kc.prototype.outputDefined=function(){return this.branches.every(function(h){return h[1].outputDefined()})&&this.otherwise.outputDefined()},kc.prototype.serialize=function(){var h=["case"];return this.eachChild(function(v){h.push(v.serialize())}),h};var Yc=function(h,v,_,R){this.type=h,this.input=v,this.beginIndex=_,this.endIndex=R};function rh(h,v){return h==="=="||h==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function Xp(h,v,_,R){return R.compare(v,_)===0}function jo(h,v,_){var R=h!=="=="&&h!=="!=";return function(){function F(z,K,de){this.type=$n,this.lhs=z,this.rhs=K,this.collator=de,this.hasUntypedArgument=z.type.kind==="value"||K.type.kind==="value"}return F.parse=function(z,K){if(z.length!==3&&z.length!==4)return K.error("Expected two or three arguments.");var de=z[0],Be=K.parse(z[1],1,yi);if(!Be)return null;if(!rh(de,Be.type))return K.concat(1).error('"'+de+`" comparisons are not supported for type '`+Sa(Be.type)+"'.");var it=K.parse(z[2],2,yi);if(!it)return null;if(!rh(de,it.type))return K.concat(2).error('"'+de+`" comparisons are not supported for type '`+Sa(it.type)+"'.");if(Be.type.kind!==it.type.kind&&Be.type.kind!=="value"&&it.type.kind!=="value")return K.error("Cannot compare types '"+Sa(Be.type)+"' and '"+Sa(it.type)+"'.");R&&(Be.type.kind==="value"&&it.type.kind!=="value"?Be=new On(it.type,[Be]):Be.type.kind!=="value"&&it.type.kind==="value"&&(it=new On(Be.type,[it])));var ht=null;if(z.length===4){if(Be.type.kind!=="string"&&it.type.kind!=="string"&&Be.type.kind!=="value"&&it.type.kind!=="value")return K.error("Cannot use collator to compare non-string types.");if(!(ht=K.parse(z[3],3,ya)))return null}return new F(Be,it,ht)},F.prototype.evaluate=function(z){var K=this.lhs.evaluate(z),de=this.rhs.evaluate(z);if(R&&this.hasUntypedArgument){var Be=er(K),it=er(de);if(Be.kind!==it.kind||Be.kind!=="string"&&Be.kind!=="number")throw new In('Expected arguments for "'+h+'" to be (string, string) or (number, number), but found ('+Be.kind+", "+it.kind+") instead.")}if(this.collator&&!R&&this.hasUntypedArgument){var ht=er(K),xt=er(de);if(ht.kind!=="string"||xt.kind!=="string")return v(z,K,de)}return this.collator?_(z,K,de,this.collator.evaluate(z)):v(z,K,de)},F.prototype.eachChild=function(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)},F.prototype.outputDefined=function(){return!0},F.prototype.serialize=function(){var z=[h];return this.eachChild(function(K){z.push(K.serialize())}),z},F}()}Yc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,yi),R=v.parse(h[2],2,ln);if(!_||!R)return null;if(!Lo(_.type,[Fa(yi),ti,yi]))return v.error("Expected first argument to be of type array or string, but found "+Sa(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,ln);return F?new Yc(_.type,_,R,F):null}return new Yc(_.type,_,R)},Yc.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=this.beginIndex.evaluate(h);if(!Za(v,["string","array"]))throw new In("Expected first argument to be of type array or string, but found "+Sa(er(v))+" instead.");if(this.endIndex){var R=this.endIndex.evaluate(h);return v.slice(_,R)}return v.slice(_)},Yc.prototype.eachChild=function(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)},Yc.prototype.outputDefined=function(){return!1},Yc.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var h=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),h]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ld=jo("==",function(h,v,_){return v===_},Xp),Ih=jo("!=",function(h,v,_){return v!==_},function(h,v,_,R){return!Xp(0,v,_,R)}),hf=jo("<",function(h,v,_){return v<_},function(h,v,_,R){return R.compare(v,_)<0}),ss=jo(">",function(h,v,_){return v>_},function(h,v,_,R){return R.compare(v,_)>0}),cp=jo("<=",function(h,v,_){return v<=_},function(h,v,_,R){return R.compare(v,_)<=0}),fp=jo(">=",function(h,v,_){return v>=_},function(h,v,_,R){return R.compare(v,_)>=0}),Fu=function(h,v,_,R,F){this.type=ti,this.number=h,this.locale=v,this.currency=_,this.minFractionDigits=R,this.maxFractionDigits=F};Fu.parse=function(h,v){if(h.length!==3)return v.error("Expected two arguments.");var _=v.parse(h[1],1,ln);if(!_)return null;var R=h[2];if(typeof R!="object"||Array.isArray(R))return v.error("NumberFormat options argument must be an object.");var F=null;if(R.locale&&!(F=v.parse(R.locale,1,ti)))return null;var z=null;if(R.currency&&!(z=v.parse(R.currency,1,ti)))return null;var K=null;if(R["min-fraction-digits"]&&!(K=v.parse(R["min-fraction-digits"],1,ln)))return null;var de=null;return R["max-fraction-digits"]&&!(de=v.parse(R["max-fraction-digits"],1,ln))?null:new Fu(_,F,z,K,de)},Fu.prototype.evaluate=function(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))},Fu.prototype.eachChild=function(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)},Fu.prototype.outputDefined=function(){return!1},Fu.prototype.serialize=function(){var h={};return this.locale&&(h.locale=this.locale.serialize()),this.currency&&(h.currency=this.currency.serialize()),this.minFractionDigits&&(h["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(h["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),h]};var Ot=function(h){this.type=ln,this.input=h};Ot.parse=function(h,v){if(h.length!==2)return v.error("Expected 1 argument, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+Sa(_.type)+" instead."):new Ot(_):null},Ot.prototype.evaluate=function(h){var v=this.input.evaluate(h);if(typeof v=="string"||Array.isArray(v))return v.length;throw new In("Expected value to be of type string or array, but found "+Sa(er(v))+" instead.")},Ot.prototype.eachChild=function(h){h(this.input)},Ot.prototype.outputDefined=function(){return!1},Ot.prototype.serialize=function(){var h=["length"];return this.eachChild(function(v){h.push(v.serialize())}),h};var br={"==":Ld,"!=":Ih,">":ss,"<":hf,">=":fp,"<=":cp,array:On,at:vu,boolean:On,case:kc,coalesce:Bl,collator:iu,format:Vi,image:Bi,in:Il,"index-of":hc,interpolate:Qs,"interpolate-hcl":Qs,"interpolate-lab":Qs,length:Ot,let:ou,literal:tn,match:Nl,number:On,"number-format":Fu,object:On,slice:Yc,step:Ms,string:On,"to-boolean":Ao,"to-color":Ao,"to-number":Ao,"to-string":Ao,var:cc,within:du};function Hr(h,v){var _=v[0],R=v[1],F=v[2],z=v[3];_=_.evaluate(h),R=R.evaluate(h),F=F.evaluate(h);var K=z?z.evaluate(h):1,de=lr(_,R,F,K);if(de)throw new In(de);return new Ci(_/255*K,R/255*K,F/255*K,K)}function Jr(h,v){return h in v}function Pn(h,v){var _=v[h];return _===void 0?null:_}function _i(h){return{type:h}}function sa(h){return{result:"success",value:h}}function xo(h){return{result:"error",value:h}}function Us(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function yl(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function al(h){return!!h.expression&&h.expression.interpolated}function Bo(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function hp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Fd(h){return h}function qc(h,v,_){return h!==void 0?h:v!==void 0?v:_!==void 0?_:void 0}function pp(h,v,_,R,F){return qc(typeof _===F?R[_]:void 0,h.default,v.default)}function pf(h,v,_){if(Bo(_)!=="number")return qc(h.default,v.default);var R=h.stops.length;if(R===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[R-1][0])return h.stops[R-1][1];var F=ec(h.stops.map(function(z){return z[0]}),_);return h.stops[F][1]}function Yp(h,v,_){var R=h.base!==void 0?h.base:1;if(Bo(_)!=="number")return qc(h.default,v.default);var F=h.stops.length;if(F===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[F-1][0])return h.stops[F-1][1];var z=ec(h.stops.map(function(xt){return xt[0]}),_),K=function(xt,Lt,Ht,ur){var pr=ur-Ht,zr=xt-Ht;return pr===0?0:Lt===1?zr/pr:(Math.pow(Lt,zr)-1)/(Math.pow(Lt,pr)-1)}(_,R,h.stops[z][0],h.stops[z+1][0]),de=h.stops[z][1],Be=h.stops[z+1][1],it=Rc[v.type]||Fd;if(h.colorSpace&&h.colorSpace!=="rgb"){var ht=$p[h.colorSpace];it=function(xt,Lt){return ht.reverse(ht.interpolate(ht.forward(xt),ht.forward(Lt),K))}}return typeof de.evaluate=="function"?{evaluate:function(){for(var xt=[],Lt=arguments.length;Lt--;)xt[Lt]=arguments[Lt];var Ht=de.evaluate.apply(void 0,xt),ur=Be.evaluate.apply(void 0,xt);if(Ht!==void 0&&ur!==void 0)return it(Ht,ur,K)}}:it(de,Be,K)}function Aa(h,v,_){return v.type==="color"?_=Ci.parse(_):v.type==="formatted"?_=fo.fromString(_.toString()):v.type==="resolvedImage"?_=To.fromString(_.toString()):Bo(_)===v.type||v.type==="enum"&&v.values[_]||(_=void 0),qc(_,h.default,v.default)}oo.register(br,{error:[{kind:"error"},[ti],function(h,v){throw new In(v[0].evaluate(h))}],typeof:[ti,[yi],function(h,v){return Sa(er(v[0].evaluate(h)))}],"to-rgba":[Fa(ln,4),[ri],function(h,v){return v[0].evaluate(h).toArray()}],rgb:[ri,[ln,ln,ln],Hr],rgba:[ri,[ln,ln,ln,ln],Hr],has:{type:$n,overloads:[[[ti],function(h,v){return Jr(v[0].evaluate(h),h.properties())}],[[ti,oa],function(h,v){var _=v[1];return Jr(v[0].evaluate(h),_.evaluate(h))}]]},get:{type:yi,overloads:[[[ti],function(h,v){return Pn(v[0].evaluate(h),h.properties())}],[[ti,oa],function(h,v){var _=v[1];return Pn(v[0].evaluate(h),_.evaluate(h))}]]},"feature-state":[yi,[ti],function(h,v){return Pn(v[0].evaluate(h),h.featureState||{})}],properties:[oa,[],function(h){return h.properties()}],"geometry-type":[ti,[],function(h){return h.geometryType()}],id:[yi,[],function(h){return h.id()}],zoom:[ln,[],function(h){return h.globals.zoom}],"heatmap-density":[ln,[],function(h){return h.globals.heatmapDensity||0}],"line-progress":[ln,[],function(h){return h.globals.lineProgress||0}],accumulated:[yi,[],function(h){return h.globals.accumulated===void 0?null:h.globals.accumulated}],"+":[ln,_i(ln),function(h,v){for(var _=0,R=0,F=v;R<F.length;R+=1)_+=F[R].evaluate(h);return _}],"*":[ln,_i(ln),function(h,v){for(var _=1,R=0,F=v;R<F.length;R+=1)_*=F[R].evaluate(h);return _}],"-":{type:ln,overloads:[[[ln,ln],function(h,v){var _=v[1];return v[0].evaluate(h)-_.evaluate(h)}],[[ln],function(h,v){return-v[0].evaluate(h)}]]},"/":[ln,[ln,ln],function(h,v){var _=v[1];return v[0].evaluate(h)/_.evaluate(h)}],"%":[ln,[ln,ln],function(h,v){var _=v[1];return v[0].evaluate(h)%_.evaluate(h)}],ln2:[ln,[],function(){return Math.LN2}],pi:[ln,[],function(){return Math.PI}],e:[ln,[],function(){return Math.E}],"^":[ln,[ln,ln],function(h,v){var _=v[1];return Math.pow(v[0].evaluate(h),_.evaluate(h))}],sqrt:[ln,[ln],function(h,v){return Math.sqrt(v[0].evaluate(h))}],log10:[ln,[ln],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN10}],ln:[ln,[ln],function(h,v){return Math.log(v[0].evaluate(h))}],log2:[ln,[ln],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN2}],sin:[ln,[ln],function(h,v){return Math.sin(v[0].evaluate(h))}],cos:[ln,[ln],function(h,v){return Math.cos(v[0].evaluate(h))}],tan:[ln,[ln],function(h,v){return Math.tan(v[0].evaluate(h))}],asin:[ln,[ln],function(h,v){return Math.asin(v[0].evaluate(h))}],acos:[ln,[ln],function(h,v){return Math.acos(v[0].evaluate(h))}],atan:[ln,[ln],function(h,v){return Math.atan(v[0].evaluate(h))}],min:[ln,_i(ln),function(h,v){return Math.min.apply(Math,v.map(function(_){return _.evaluate(h)}))}],max:[ln,_i(ln),function(h,v){return Math.max.apply(Math,v.map(function(_){return _.evaluate(h)}))}],abs:[ln,[ln],function(h,v){return Math.abs(v[0].evaluate(h))}],round:[ln,[ln],function(h,v){var _=v[0].evaluate(h);return _<0?-Math.round(-_):Math.round(_)}],floor:[ln,[ln],function(h,v){return Math.floor(v[0].evaluate(h))}],ceil:[ln,[ln],function(h,v){return Math.ceil(v[0].evaluate(h))}],"filter-==":[$n,[ti,yi],function(h,v){var _=v[0],R=v[1];return h.properties()[_.value]===R.value}],"filter-id-==":[$n,[yi],function(h,v){var _=v[0];return h.id()===_.value}],"filter-type-==":[$n,[ti],function(h,v){var _=v[0];return h.geometryType()===_.value}],"filter-<":[$n,[ti,yi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<z}],"filter-id-<":[$n,[yi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<F}],"filter->":[$n,[ti,yi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>z}],"filter-id->":[$n,[yi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>F}],"filter-<=":[$n,[ti,yi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<=z}],"filter-id-<=":[$n,[yi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<=F}],"filter->=":[$n,[ti,yi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>=z}],"filter-id->=":[$n,[yi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>=F}],"filter-has":[$n,[yi],function(h,v){return v[0].value in h.properties()}],"filter-has-id":[$n,[],function(h){return h.id()!==null&&h.id()!==void 0}],"filter-type-in":[$n,[Fa(ti)],function(h,v){return v[0].value.indexOf(h.geometryType())>=0}],"filter-id-in":[$n,[Fa(yi)],function(h,v){return v[0].value.indexOf(h.id())>=0}],"filter-in-small":[$n,[ti,Fa(yi)],function(h,v){var _=v[0];return v[1].value.indexOf(h.properties()[_.value])>=0}],"filter-in-large":[$n,[ti,Fa(yi)],function(h,v){var _=v[0],R=v[1];return function(F,z,K,de){for(;K<=de;){var Be=K+de>>1;if(z[Be]===F)return!0;z[Be]>F?de=Be-1:K=Be+1}return!1}(h.properties()[_.value],R.value,0,R.value.length-1)}],all:{type:$n,overloads:[[[$n,$n],function(h,v){var _=v[1];return v[0].evaluate(h)&&_.evaluate(h)}],[_i($n),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(!R[_].evaluate(h))return!1;return!0}]]},any:{type:$n,overloads:[[[$n,$n],function(h,v){var _=v[1];return v[0].evaluate(h)||_.evaluate(h)}],[_i($n),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(R[_].evaluate(h))return!0;return!1}]]},"!":[$n,[$n],function(h,v){return!v[0].evaluate(h)}],"is-supported-script":[$n,[ti],function(h,v){var _=h.globals&&h.globals.isSupportedScript;return!_||_(v[0].evaluate(h))}],upcase:[ti,[ti],function(h,v){return v[0].evaluate(h).toUpperCase()}],downcase:[ti,[ti],function(h,v){return v[0].evaluate(h).toLowerCase()}],concat:[ti,_i(yi),function(h,v){return v.map(function(_){return kr(_.evaluate(h))}).join("")}],"resolved-locale":[ti,[ya],function(h,v){return v[0].evaluate(h).resolvedLocale()}]});var df=function(h,v){this.expression=h,this._warningHistory={},this._evaluator=new ko,this._defaultValue=v?function(_){return _.type==="color"&&hp(_.default)?new Ci(0,0,0,0):_.type==="color"?Ci.parse(_.default)||null:_.default===void 0?null:_.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function nh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in br}function ih(h,v){var _=new bo(br,[],v?function(F){var z={color:ri,string:ti,number:ln,enum:ti,boolean:$n,formatted:Ya,resolvedImage:ha};return F.type==="array"?Fa(z[F.value]||yi,F.length):z[F.type]}(v):void 0),R=_.parse(h,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return R?sa(new df(R,v)):xo(_.errors)}df.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._evaluator.globals=h,this._evaluator.feature=v,this._evaluator.featureState=_,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)},df.prototype.evaluate=function(h,v,_,R,F,z){this._evaluator.globals=h,this._evaluator.feature=v||null,this._evaluator.featureState=_||null,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z||null;try{var K=this.expression.evaluate(this._evaluator);if(K==null||typeof K=="number"&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new In("Expected value to be one of "+Object.keys(this._enumValues).map(function(de){return JSON.stringify(de)}).join(", ")+", but found "+JSON.stringify(K)+" instead.");return K}catch(de){return this._warningHistory[de.message]||(this._warningHistory[de.message]=!0,typeof console!="undefined"&&console.warn(de.message)),this._defaultValue}};var Of=function(h,v){this.kind=h,this._styleExpression=v,this.isStateDependent=h!=="constant"&&!au(v.expression)};Of.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},Of.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)};var ah=function(h,v,_,R){this.kind=h,this.zoomStops=_,this._styleExpression=v,this.isStateDependent=h!=="camera"&&!au(v.expression),this.interpolationType=R};function $s(h,v){if((h=ih(h,v)).result==="error")return h;var _=h.value.expression,R=lc(_);if(!R&&!Us(v))return xo([new wn("","data expressions not supported")]);var F=Rl(_,["zoom"]);if(!F&&!yl(v))return xo([new wn("","zoom expressions not supported")]);var z=function K(de){var Be=null;if(de instanceof ou)Be=K(de.result);else if(de instanceof Bl)for(var it=0,ht=de.args;it<ht.length&&!(Be=K(ht[it]));it+=1);else(de instanceof Ms||de instanceof Qs)&&de.input instanceof oo&&de.input.name==="zoom"&&(Be=de);return Be instanceof wn||de.eachChild(function(xt){var Lt=K(xt);Lt instanceof wn?Be=Lt:!Be&&Lt?Be=new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Be&&Lt&&Be!==Lt&&(Be=new wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Be}(_);return z||F?z instanceof wn?xo([z]):z instanceof Qs&&!al(v)?xo([new wn("",'"interpolate" expressions cannot be used with this property')]):sa(z?new ah(R?"camera":"composite",h.value,z.labels,z instanceof Qs?z.interpolation:void 0):new Of(R?"constant":"source",h.value)):xo([new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ah.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},ah.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)},ah.prototype.interpolationFactor=function(h,v,_){return this.interpolationType?Qs.interpolationFactor(this.interpolationType,h,v,_):0};var pc=function(h,v){this._parameters=h,this._specification=v,gr(this,function _(R,F){var z,K,de,Be=F.type==="color",it=R.stops&&typeof R.stops[0][0]=="object",ht=it||!(it||R.property!==void 0),xt=R.type||(al(F)?"exponential":"interval");if(Be&&((R=gr({},R)).stops&&(R.stops=R.stops.map(function(Di){return[Di[0],Ci.parse(Di[1])]})),R.default=Ci.parse(R.default?R.default:F.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!$p[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);if(xt==="exponential")z=Yp;else if(xt==="interval")z=pf;else if(xt==="categorical"){z=pp,K=Object.create(null);for(var Lt=0,Ht=R.stops;Lt<Ht.length;Lt+=1){var ur=Ht[Lt];K[ur[0]]=ur[1]}de=typeof R.stops[0][0]}else{if(xt!=="identity")throw new Error('Unknown function type "'+xt+'"');z=Aa}if(it){for(var pr={},zr=[],Or=0;Or<R.stops.length;Or++){var qr=R.stops[Or],on=qr[0].zoom;pr[on]===void 0&&(pr[on]={zoom:on,type:R.type,property:R.property,default:R.default,stops:[]},zr.push(on)),pr[on].stops.push([qr[0].value,qr[1]])}for(var gn=[],Tn=0,Ln=zr;Tn<Ln.length;Tn+=1){var pi=Ln[Tn];gn.push([pr[pi].zoom,_(pr[pi],F)])}var Ei={name:"linear"};return{kind:"composite",interpolationType:Ei,interpolationFactor:Qs.interpolationFactor.bind(void 0,Ei),zoomStops:gn.map(function(Di){return Di[0]}),evaluate:function(Di,ia){var Oi=Di.zoom;return Yp({stops:gn,base:R.base},F,Oi).evaluate(Oi,ia)}}}if(ht){var Ki=xt==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:Ki,interpolationFactor:Qs.interpolationFactor.bind(void 0,Ki),zoomStops:R.stops.map(function(Di){return Di[0]}),evaluate:function(Di){return z(R,F,Di.zoom,K,de)}}}return{kind:"source",evaluate:function(Di,ia){var Oi=ia&&ia.properties?ia.properties[R.property]:void 0;return Oi===void 0?qc(R.default,F.default):z(R,F,Oi,K,de)}}}(this._parameters,this._specification))};function Bu(h){var v=h.key,_=h.value,R=h.valueSpec||{},F=h.objectElementValidators||{},z=h.style,K=h.styleSpec,de=[],Be=Bo(_);if(Be!=="object")return[new ct(v,_,"object expected, "+Be+" found")];for(var it in _){var ht=it.split(".")[0],xt=R[ht]||R["*"],Lt=void 0;if(F[ht])Lt=F[ht];else if(R[ht])Lt=so;else if(F["*"])Lt=F["*"];else{if(!R["*"]){de.push(new ct(v,_[it],'unknown property "'+it+'"'));continue}Lt=so}de=de.concat(Lt({key:(v&&v+".")+it,value:_[it],valueSpec:xt,style:z,styleSpec:K,object:_,objectKey:it},_))}for(var Ht in R)F[Ht]||R[Ht].required&&R[Ht].default===void 0&&_[Ht]===void 0&&de.push(new ct(v,_,'missing required property "'+Ht+'"'));return de}function oh(h){var v=h.value,_=h.valueSpec,R=h.style,F=h.styleSpec,z=h.key,K=h.arrayElementValidator||so;if(Bo(v)!=="array")return[new ct(z,v,"array expected, "+Bo(v)+" found")];if(_.length&&v.length!==_.length)return[new ct(z,v,"array length "+_.length+" expected, length "+v.length+" found")];if(_["min-length"]&&v.length<_["min-length"])return[new ct(z,v,"array length at least "+_["min-length"]+" expected, length "+v.length+" found")];var de={type:_.value,values:_.values};F.$version<7&&(de.function=_.function),Bo(_.value)==="object"&&(de=_.value);for(var Be=[],it=0;it<v.length;it++)Be=Be.concat(K({array:v,arrayIndex:it,value:v[it],valueSpec:de,style:R,styleSpec:F,key:z+"["+it+"]"}));return Be}function qp(h){var v=h.key,_=h.value,R=h.valueSpec,F=Bo(_);return F==="number"&&_!=_&&(F="NaN"),F!=="number"?[new ct(v,_,"number expected, "+F+" found")]:"minimum"in R&&_<R.minimum?[new ct(v,_,_+" is less than the minimum value "+R.minimum)]:"maximum"in R&&_>R.maximum?[new ct(v,_,_+" is greater than the maximum value "+R.maximum)]:[]}function Kp(h){var v,_,R,F=h.valueSpec,z=Br(h.value.type),K={},de=z!=="categorical"&&h.value.property===void 0,Be=!de,it=Bo(h.value.stops)==="array"&&Bo(h.value.stops[0])==="array"&&Bo(h.value.stops[0][0])==="object",ht=Bu({key:h.key,value:h.value,valueSpec:h.styleSpec.function,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Ht){if(z==="identity")return[new ct(Ht.key,Ht.value,'identity function may not have a "stops" property')];var ur=[],pr=Ht.value;return ur=ur.concat(oh({key:Ht.key,value:pr,valueSpec:Ht.valueSpec,style:Ht.style,styleSpec:Ht.styleSpec,arrayElementValidator:xt})),Bo(pr)==="array"&&pr.length===0&&ur.push(new ct(Ht.key,pr,"array must have at least one stop")),ur},default:function(Ht){return so({key:Ht.key,value:Ht.value,valueSpec:F,style:Ht.style,styleSpec:Ht.styleSpec})}}});return z==="identity"&&de&&ht.push(new ct(h.key,h.value,'missing required property "property"')),z==="identity"||h.value.stops||ht.push(new ct(h.key,h.value,'missing required property "stops"')),z==="exponential"&&h.valueSpec.expression&&!al(h.valueSpec)&&ht.push(new ct(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(Be&&!Us(h.valueSpec)?ht.push(new ct(h.key,h.value,"property functions not supported")):de&&!yl(h.valueSpec)&&ht.push(new ct(h.key,h.value,"zoom functions not supported"))),z!=="categorical"&&!it||h.value.property!==void 0||ht.push(new ct(h.key,h.value,'"property" property is required')),ht;function xt(Ht){var ur=[],pr=Ht.value,zr=Ht.key;if(Bo(pr)!=="array")return[new ct(zr,pr,"array expected, "+Bo(pr)+" found")];if(pr.length!==2)return[new ct(zr,pr,"array length 2 expected, length "+pr.length+" found")];if(it){if(Bo(pr[0])!=="object")return[new ct(zr,pr,"object expected, "+Bo(pr[0])+" found")];if(pr[0].zoom===void 0)return[new ct(zr,pr,"object stop key must have zoom")];if(pr[0].value===void 0)return[new ct(zr,pr,"object stop key must have value")];if(R&&R>Br(pr[0].zoom))return[new ct(zr,pr[0].zoom,"stop zoom values must appear in ascending order")];Br(pr[0].zoom)!==R&&(R=Br(pr[0].zoom),_=void 0,K={}),ur=ur.concat(Bu({key:zr+"[0]",value:pr[0],valueSpec:{zoom:{}},style:Ht.style,styleSpec:Ht.styleSpec,objectElementValidators:{zoom:qp,value:Lt}}))}else ur=ur.concat(Lt({key:zr+"[0]",value:pr[0],valueSpec:{},style:Ht.style,styleSpec:Ht.styleSpec},pr));return nh(Nt(pr[1]))?ur.concat([new ct(zr+"[1]",pr[1],"expressions are not allowed in function stops.")]):ur.concat(so({key:zr+"[1]",value:pr[1],valueSpec:F,style:Ht.style,styleSpec:Ht.styleSpec}))}function Lt(Ht,ur){var pr=Bo(Ht.value),zr=Br(Ht.value),Or=Ht.value!==null?Ht.value:ur;if(v){if(pr!==v)return[new ct(Ht.key,Or,pr+" stop domain type must match previous stop domain type "+v)]}else v=pr;if(pr!=="number"&&pr!=="string"&&pr!=="boolean")return[new ct(Ht.key,Or,"stop domain value must be a number, string, or boolean")];if(pr!=="number"&&z!=="categorical"){var qr="number expected, "+pr+" found";return Us(F)&&z===void 0&&(qr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ct(Ht.key,Or,qr)]}return z!=="categorical"||pr!=="number"||isFinite(zr)&&Math.floor(zr)===zr?z!=="categorical"&&pr==="number"&&_!==void 0&&zr<_?[new ct(Ht.key,Or,"stop domain values must appear in ascending order")]:(_=zr,z==="categorical"&&zr in K?[new ct(Ht.key,Or,"stop domain values must be unique")]:(K[zr]=!0,[])):[new ct(Ht.key,Or,"integer expected, found "+zr)]}}function sh(h){var v=(h.expressionContext==="property"?$s:ih)(Nt(h.value),h.valueSpec);if(v.result==="error")return v.value.map(function(R){return new ct(""+h.key+R.key,h.value,R.message)});var _=v.value.expression||v.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!_.outputDefined())return[new ct(h.key,h.value,'Invalid data expression for "'+h.propertyKey+'". Output values must be contained as literals within the expression.')];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!au(_))return[new ct(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!au(_))return[new ct(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Rl(_,["zoom","feature-state"]))return[new ct(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!lc(_))return[new ct(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dc(h){var v=h.key,_=h.value,R=h.valueSpec,F=[];return Array.isArray(R.values)?R.values.indexOf(Br(_))===-1&&F.push(new ct(v,_,"expected one of ["+R.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(R.values).indexOf(Br(_))===-1&&F.push(new ct(v,_,"expected one of ["+Object.keys(R.values).join(", ")+"], "+JSON.stringify(_)+" found")),F}function Oh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(var v=0,_=h.slice(1);v<_.length;v+=1){var R=_[v];if(!Oh(R)&&typeof R!="boolean")return!1}return!0;default:return!0}}pc.deserialize=function(h){return new pc(h._parameters,h._specification)},pc.serialize=function(h){return{_parameters:h._parameters,_specification:h._specification}};var dp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pf(h){if(h==null)return{filter:function(){return!0},needGeometry:!1};Oh(h)||(h=Bd(h));var v=ih(h,dp);if(v.result==="error")throw new Error(v.value.map(function(_){return _.key+": "+_.message}).join(", "));return{filter:function(_,R,F){return v.value.evaluate(_,R,{},F)},needGeometry:function _(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var F=1;F<R.length;F++)if(_(R[F]))return!0;return!1}(h)}}function pm(h,v){return h<v?-1:h>v?1:0}function Bd(h){if(!h)return!0;var v,_=h[0];return h.length<=1?_!=="any":_==="=="?Nd(h[1],h[2],"=="):_==="!="?vp(Nd(h[1],h[2],"==")):_==="<"||_===">"||_==="<="||_===">="?Nd(h[1],h[2],_):_==="any"?(v=h.slice(1),["any"].concat(v.map(Bd))):_==="all"?["all"].concat(h.slice(1).map(Bd)):_==="none"?["all"].concat(h.slice(1).map(Bd).map(vp)):_==="in"?Is(h[1],h.slice(2)):_==="!in"?vp(Is(h[1],h.slice(2))):_==="has"?Ph(h[1]):_==="!has"?vp(Ph(h[1])):_!=="within"||h}function Nd(h,v,_){switch(h){case"$type":return["filter-type-"+_,v];case"$id":return["filter-id-"+_,v];default:return["filter-"+_,h,v]}}function Is(h,v){if(v.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(_){return typeof _!=typeof v[0]})?["filter-in-large",h,["literal",v.sort(pm)]]:["filter-in-small",h,["literal",v]]}}function Ph(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function vp(h){return["!",h]}function Qp(h){return Oh(Nt(h.value))?sh(gr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(_){var R=_.value,F=_.key;if(Bo(R)!=="array")return[new ct(F,R,"array expected, "+Bo(R)+" found")];var z,K=_.styleSpec,de=[];if(R.length<1)return[new ct(F,R,"filter array must have at least 1 element")];switch(de=de.concat(dc({key:F+"[0]",value:R[0],valueSpec:K.filter_operator,style:_.style,styleSpec:_.styleSpec})),Br(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&Br(R[1])==="$type"&&de.push(new ct(F,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&de.push(new ct(F,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(z=Bo(R[1]))!=="string"&&de.push(new ct(F+"[1]",R[1],"string expected, "+z+" found"));for(var Be=2;Be<R.length;Be++)z=Bo(R[Be]),Br(R[1])==="$type"?de=de.concat(dc({key:F+"["+Be+"]",value:R[Be],valueSpec:K.geometry_type,style:_.style,styleSpec:_.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&de.push(new ct(F+"["+Be+"]",R[Be],"string, number, or boolean expected, "+z+" found"));break;case"any":case"all":case"none":for(var it=1;it<R.length;it++)de=de.concat(v({key:F+"["+it+"]",value:R[it],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":z=Bo(R[1]),R.length!==2?de.push(new ct(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="string"&&de.push(new ct(F+"[1]",R[1],"string expected, "+z+" found"));break;case"within":z=Bo(R[1]),R.length!==2?de.push(new ct(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="object"&&de.push(new ct(F+"[1]",R[1],"object expected, "+z+" found"))}return de}(h)}function gp(h,v){var _=h.key,R=h.style,F=h.styleSpec,z=h.value,K=h.objectKey,de=F[v+"_"+h.layerType];if(!de)return[];var Be=K.match(/^(.*)-transition$/);if(v==="paint"&&Be&&de[Be[1]]&&de[Be[1]].transition)return so({key:_,value:z,valueSpec:F.transition,style:R,styleSpec:F});var it,ht=h.valueSpec||de[K];if(!ht)return[new ct(_,z,'unknown property "'+K+'"')];if(Bo(z)==="string"&&Us(ht)&&!ht.tokens&&(it=/^{([^}]+)}$/.exec(z)))return[new ct(_,z,'"'+K+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(it[1])+" }`.")];var xt=[];return h.layerType==="symbol"&&(K==="text-field"&&R&&!R.glyphs&&xt.push(new ct(_,z,'use of "text-field" requires a style "glyphs" property')),K==="text-font"&&hp(Nt(z))&&Br(z.type)==="identity"&&xt.push(new ct(_,z,'"text-font" does not support identity functions'))),xt.concat(so({key:h.key,value:z,valueSpec:ht,style:R,styleSpec:F,expressionContext:"property",propertyType:v,propertyKey:K}))}function zd(h){return gp(h,"paint")}function kh(h){return gp(h,"layout")}function Dh(h){var v=[],_=h.value,R=h.key,F=h.style,z=h.styleSpec;_.type||_.ref||v.push(new ct(R,_,'either "type" or "ref" is required'));var K,de=Br(_.type),Be=Br(_.ref);if(_.id)for(var it=Br(_.id),ht=0;ht<h.arrayIndex;ht++){var xt=F.layers[ht];Br(xt.id)===it&&v.push(new ct(R,_.id,'duplicate layer id "'+_.id+'", previously used at line '+xt.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(ur){ur in _&&v.push(new ct(R,_[ur],'"'+ur+'" is prohibited for ref layers'))}),F.layers.forEach(function(ur){Br(ur.id)===Be&&(K=ur)}),K?K.ref?v.push(new ct(R,_.ref,"ref cannot reference another ref layer")):de=Br(K.type):v.push(new ct(R,_.ref,'ref layer "'+Be+'" not found'));else if(de!=="background")if(_.source){var Lt=F.sources&&F.sources[_.source],Ht=Lt&&Br(Lt.type);Lt?Ht==="vector"&&de==="raster"?v.push(new ct(R,_.source,'layer "'+_.id+'" requires a raster source')):Ht==="raster"&&de!=="raster"?v.push(new ct(R,_.source,'layer "'+_.id+'" requires a vector source')):Ht!=="vector"||_["source-layer"]?Ht==="raster-dem"&&de!=="hillshade"?v.push(new ct(R,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):de!=="line"||!_.paint||!_.paint["line-gradient"]||Ht==="geojson"&&Lt.lineMetrics||v.push(new ct(R,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new ct(R,_,'layer "'+_.id+'" must specify a "source-layer"')):v.push(new ct(R,_.source,'source "'+_.source+'" not found'))}else v.push(new ct(R,_,'missing required property "source"'));return v=v.concat(Bu({key:R,value:_,valueSpec:z.layer,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return so({key:R+".type",value:_.type,valueSpec:z.layer.type,style:h.style,styleSpec:h.styleSpec,object:_,objectKey:"type"})},filter:Qp,layout:function(ur){return Bu({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(pr){return kh(gr({layerType:de},pr))}}})},paint:function(ur){return Bu({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(pr){return zd(gr({layerType:de},pr))}}})}}}))}function kf(h){var v=h.value,_=h.key,R=Bo(v);return R!=="string"?[new ct(_,v,"string expected, "+R+" found")]:[]}var hs={promoteId:function(h){var v=h.key,_=h.value;if(Bo(_)==="string")return kf({key:v,value:_});var R=[];for(var F in _)R.push.apply(R,kf({key:v+"."+F,value:_[F]}));return R}};function mp(h){var v=h.value,_=h.key,R=h.styleSpec,F=h.style;if(!v.type)return[new ct(_,v,'"type" is required')];var z,K=Br(v.type);switch(K){case"vector":case"raster":case"raster-dem":return Bu({key:_,value:v,valueSpec:R["source_"+K.replace("-","_")],style:h.style,styleSpec:R,objectElementValidators:hs});case"geojson":if(z=Bu({key:_,value:v,valueSpec:R.source_geojson,style:F,styleSpec:R,objectElementValidators:hs}),v.cluster)for(var de in v.clusterProperties){var Be=v.clusterProperties[de],it=Be[0],ht=typeof it=="string"?[it,["accumulated"],["get",de]]:it;z.push.apply(z,sh({key:_+"."+de+".map",value:Be[1],expressionContext:"cluster-map"})),z.push.apply(z,sh({key:_+"."+de+".reduce",value:ht,expressionContext:"cluster-reduce"}))}return z;case"video":return Bu({key:_,value:v,valueSpec:R.source_video,style:F,styleSpec:R});case"image":return Bu({key:_,value:v,valueSpec:R.source_image,style:F,styleSpec:R});case"canvas":return[new ct(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dc({key:_+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:F,styleSpec:R})}}function rc(h){var v=h.value,_=h.styleSpec,R=_.light,F=h.style,z=[],K=Bo(v);if(v===void 0)return z;if(K!=="object")return z.concat([new ct("light",v,"object expected, "+K+" found")]);for(var de in v){var Be=de.match(/^(.*)-transition$/);z=z.concat(Be&&R[Be[1]]&&R[Be[1]].transition?so({key:de,value:v[de],valueSpec:_.transition,style:F,styleSpec:_}):R[de]?so({key:de,value:v[de],valueSpec:R[de],style:F,styleSpec:_}):[new ct(de,v[de],'unknown property "'+de+'"')])}return z}var vc={"*":function(){return[]},array:oh,boolean:function(h){var v=h.value,_=h.key,R=Bo(v);return R!=="boolean"?[new ct(_,v,"boolean expected, "+R+" found")]:[]},number:qp,color:function(h){var v=h.key,_=h.value,R=Bo(_);return R!=="string"?[new ct(v,_,"color expected, "+R+" found")]:Kn(_)===null?[new ct(v,_,'color expected, "'+_+'" found')]:[]},constants:It,enum:dc,filter:Qp,function:Kp,layer:Dh,object:Bu,source:mp,light:rc,string:kf,formatted:function(h){return kf(h).length===0?[]:sh(h)},resolvedImage:function(h){return kf(h).length===0?[]:sh(h)}};function so(h){var v=h.value,_=h.valueSpec,R=h.styleSpec;return _.expression&&hp(Br(v))?Kp(h):_.expression&&nh(Nt(v))?sh(h):_.type&&vc[_.type]?vc[_.type](h):Bu(gr({},h,{valueSpec:_.type?R[_.type]:_}))}function ps(h){var v=h.value,_=h.key,R=kf(h);return R.length||(v.indexOf("{fontstack}")===-1&&R.push(new ct(_,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&R.push(new ct(_,v,'"glyphs" url must include a "{range}" token'))),R}function eo(h,v){v===void 0&&(v=Rt);var _=[];return _=_.concat(so({key:"",value:h,valueSpec:v.$root,styleSpec:v,style:h,objectElementValidators:{glyphs:ps,"*":function(){return[]}}})),h.constants&&(_=_.concat(It({key:"constants",value:h.constants,style:h,styleSpec:v}))),Jp(_)}function Jp(h){return[].concat(h).sort(function(v,_){return v.line-_.line})}function uh(h){return function(){for(var v=[],_=arguments.length;_--;)v[_]=arguments[_];return Jp(h.apply(this,v))}}eo.source=uh(mp),eo.light=uh(rc),eo.layer=uh(Dh),eo.filter=uh(Qp),eo.paintProperty=uh(zd),eo.layoutProperty=uh(kh);var yp=eo,Ud=yp.light,wa=yp.paintProperty,lh=yp.layoutProperty;function Df(h,v){var _=!1;if(v&&v.length)for(var R=0,F=v;R<F.length;R+=1)h.fire(new $t(new Error(F[R].message))),_=!0;return _}var su=us;function us(h,v,_){var R=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;var F=new Int32Array(this.arrayBuffer);h=F[0],this.d=(v=F[1])+2*(_=F[2]);for(var z=0;z<this.d*this.d;z++){var K=F[3+z],de=F[3+z+1];R.push(K===de?null:F.subarray(K,de))}var Be=F[3+R.length+1];this.keys=F.subarray(F[3+R.length],Be),this.bboxes=F.subarray(Be),this.insert=this._insertReadonly}else{this.d=v+2*_;for(var it=0;it<this.d*this.d;it++)R.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=h,this.padding=_,this.scale=v/h,this.uid=0;var ht=_/v*h;this.min=-ht,this.max=h+ht}us.prototype.insert=function(h,v,_,R,F){this._forEachCell(v,_,R,F,this._insertCell,this.uid++),this.keys.push(h),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(R),this.bboxes.push(F)},us.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},us.prototype._insertCell=function(h,v,_,R,F,z){this.cells[F].push(z)},us.prototype.query=function(h,v,_,R,F){var z=this.min,K=this.max;if(h<=z&&v<=z&&K<=_&&K<=R&&!F)return Array.prototype.slice.call(this.keys);var de=[];return this._forEachCell(h,v,_,R,this._queryCell,de,{},F),de},us.prototype._queryCell=function(h,v,_,R,F,z,K,de){var Be=this.cells[F];if(Be!==null)for(var it=this.keys,ht=this.bboxes,xt=0;xt<Be.length;xt++){var Lt=Be[xt];if(K[Lt]===void 0){var Ht=4*Lt;(de?de(ht[Ht+0],ht[Ht+1],ht[Ht+2],ht[Ht+3]):h<=ht[Ht+2]&&v<=ht[Ht+3]&&_>=ht[Ht+0]&&R>=ht[Ht+1])?(K[Lt]=!0,z.push(it[Lt])):K[Lt]=!1}}},us.prototype._forEachCell=function(h,v,_,R,F,z,K,de){for(var Be=this._convertToCellCoord(h),it=this._convertToCellCoord(v),ht=this._convertToCellCoord(_),xt=this._convertToCellCoord(R),Lt=Be;Lt<=ht;Lt++)for(var Ht=it;Ht<=xt;Ht++){var ur=this.d*Ht+Lt;if((!de||de(this._convertFromCellCoord(Lt),this._convertFromCellCoord(Ht),this._convertFromCellCoord(Lt+1),this._convertFromCellCoord(Ht+1)))&&F.call(this,h,v,_,R,ur,z,K,de))return}},us.prototype._convertFromCellCoord=function(h){return(h-this.padding)/this.scale},us.prototype._convertToCellCoord=function(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))},us.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var h=this.cells,v=3+this.cells.length+1+1,_=0,R=0;R<this.cells.length;R++)_+=this.cells[R].length;var F=new Int32Array(v+_+this.keys.length+this.bboxes.length);F[0]=this.extent,F[1]=this.n,F[2]=this.padding;for(var z=v,K=0;K<h.length;K++){var de=h[K];F[3+K]=z,F.set(de,z),z+=de.length}return F[3+h.length]=z,F.set(this.keys,z),F[3+h.length+1]=z+=this.keys.length,F.set(this.bboxes,z),z+=this.bboxes.length,F.buffer};var ch=Q.ImageData,Zd=Q.ImageBitmap,bs={};function Ni(h,v,_){_===void 0&&(_={}),Object.defineProperty(v,"_classRegistryKey",{value:h,writeable:!1}),bs[h]={klass:v,omit:_.omit||[],shallow:_.shallow||[]}}for(var ol in Ni("Object",Object),su.serialize=function(h,v){var _=h.toArrayBuffer();return v&&v.push(_),{buffer:_}},su.deserialize=function(h){return new su(h.buffer)},Ni("Grid",su),Ni("Color",Ci),Ni("Error",Error),Ni("ResolvedImage",To),Ni("StylePropertyFunction",pc),Ni("StyleExpression",df,{omit:["_evaluator"]}),Ni("ZoomDependentExpression",ah),Ni("ZoomConstantExpression",Of),Ni("CompoundExpression",oo,{omit:["_evaluate"]}),br)br[ol]._classRegistryKey||Ni("Expression_"+ol,br[ol]);function nc(h){return h&&typeof ArrayBuffer!="undefined"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function fh(h){return Zd&&h instanceof Zd}function _l(h,v){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(nc(h)||fh(h))return v&&v.push(h),h;if(ArrayBuffer.isView(h)){var _=h;return v&&v.push(_.buffer),_}if(h instanceof ch)return v&&v.push(h.data.buffer),h;if(Array.isArray(h)){for(var R=[],F=0,z=h;F<z.length;F+=1)R.push(_l(z[F],v));return R}if(typeof h=="object"){var K=h.constructor,de=K._classRegistryKey;if(!de)throw new Error("can't serialize object of unregistered class");var Be=K.serialize?K.serialize(h,v):{};if(!K.serialize){for(var it in h)if(h.hasOwnProperty(it)&&!(bs[de].omit.indexOf(it)>=0)){var ht=h[it];Be[it]=bs[de].shallow.indexOf(it)>=0?ht:_l(ht,v)}h instanceof Error&&(Be.message=h.message)}if(Be.$name)throw new Error("$name property is reserved for worker serialization logic.");return de!=="Object"&&(Be.$name=de),Be}throw new Error("can't serialize object of type "+typeof h)}function Ho(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||nc(h)||fh(h)||ArrayBuffer.isView(h)||h instanceof ch)return h;if(Array.isArray(h))return h.map(Ho);if(typeof h=="object"){var v=h.$name||"Object",_=bs[v].klass;if(!_)throw new Error("can't deserialize unregistered class "+v);if(_.deserialize)return _.deserialize(h);for(var R=Object.create(_.prototype),F=0,z=Object.keys(h);F<z.length;F+=1){var K=z[F];if(K!=="$name"){var de=h[K];R[K]=bs[v].shallow.indexOf(K)>=0?de:Ho(de)}}return R}throw new Error("can't deserialize object of type "+typeof h)}var ed=function(){this.first=!0};ed.prototype.update=function(h,v){var _=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=v),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=_,!0))};var Qn={"Latin-1 Supplement":function(h){return h>=128&&h<=255},Arabic:function(h){return h>=1536&&h<=1791},"Arabic Supplement":function(h){return h>=1872&&h<=1919},"Arabic Extended-A":function(h){return h>=2208&&h<=2303},"Hangul Jamo":function(h){return h>=4352&&h<=4607},"Unified Canadian Aboriginal Syllabics":function(h){return h>=5120&&h<=5759},Khmer:function(h){return h>=6016&&h<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(h){return h>=6320&&h<=6399},"General Punctuation":function(h){return h>=8192&&h<=8303},"Letterlike Symbols":function(h){return h>=8448&&h<=8527},"Number Forms":function(h){return h>=8528&&h<=8591},"Miscellaneous Technical":function(h){return h>=8960&&h<=9215},"Control Pictures":function(h){return h>=9216&&h<=9279},"Optical Character Recognition":function(h){return h>=9280&&h<=9311},"Enclosed Alphanumerics":function(h){return h>=9312&&h<=9471},"Geometric Shapes":function(h){return h>=9632&&h<=9727},"Miscellaneous Symbols":function(h){return h>=9728&&h<=9983},"Miscellaneous Symbols and Arrows":function(h){return h>=11008&&h<=11263},"CJK Radicals Supplement":function(h){return h>=11904&&h<=12031},"Kangxi Radicals":function(h){return h>=12032&&h<=12255},"Ideographic Description Characters":function(h){return h>=12272&&h<=12287},"CJK Symbols and Punctuation":function(h){return h>=12288&&h<=12351},Hiragana:function(h){return h>=12352&&h<=12447},Katakana:function(h){return h>=12448&&h<=12543},Bopomofo:function(h){return h>=12544&&h<=12591},"Hangul Compatibility Jamo":function(h){return h>=12592&&h<=12687},Kanbun:function(h){return h>=12688&&h<=12703},"Bopomofo Extended":function(h){return h>=12704&&h<=12735},"CJK Strokes":function(h){return h>=12736&&h<=12783},"Katakana Phonetic Extensions":function(h){return h>=12784&&h<=12799},"Enclosed CJK Letters and Months":function(h){return h>=12800&&h<=13055},"CJK Compatibility":function(h){return h>=13056&&h<=13311},"CJK Unified Ideographs Extension A":function(h){return h>=13312&&h<=19903},"Yijing Hexagram Symbols":function(h){return h>=19904&&h<=19967},"CJK Unified Ideographs":function(h){return h>=19968&&h<=40959},"Yi Syllables":function(h){return h>=40960&&h<=42127},"Yi Radicals":function(h){return h>=42128&&h<=42191},"Hangul Jamo Extended-A":function(h){return h>=43360&&h<=43391},"Hangul Syllables":function(h){return h>=44032&&h<=55215},"Hangul Jamo Extended-B":function(h){return h>=55216&&h<=55295},"Private Use Area":function(h){return h>=57344&&h<=63743},"CJK Compatibility Ideographs":function(h){return h>=63744&&h<=64255},"Arabic Presentation Forms-A":function(h){return h>=64336&&h<=65023},"Vertical Forms":function(h){return h>=65040&&h<=65055},"CJK Compatibility Forms":function(h){return h>=65072&&h<=65103},"Small Form Variants":function(h){return h>=65104&&h<=65135},"Arabic Presentation Forms-B":function(h){return h>=65136&&h<=65279},"Halfwidth and Fullwidth Forms":function(h){return h>=65280&&h<=65519}};function Kc(h){for(var v=0,_=h;v<_.length;v+=1)if(Dc(_[v].charCodeAt(0)))return!0;return!1}function Dc(h){return!(h!==746&&h!==747&&(h<4352||!(Qn["Bopomofo Extended"](h)||Qn.Bopomofo(h)||Qn["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Qn["CJK Compatibility Ideographs"](h)||Qn["CJK Compatibility"](h)||Qn["CJK Radicals Supplement"](h)||Qn["CJK Strokes"](h)||!(!Qn["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Qn["CJK Unified Ideographs Extension A"](h)||Qn["CJK Unified Ideographs"](h)||Qn["Enclosed CJK Letters and Months"](h)||Qn["Hangul Compatibility Jamo"](h)||Qn["Hangul Jamo Extended-A"](h)||Qn["Hangul Jamo Extended-B"](h)||Qn["Hangul Jamo"](h)||Qn["Hangul Syllables"](h)||Qn.Hiragana(h)||Qn["Ideographic Description Characters"](h)||Qn.Kanbun(h)||Qn["Kangxi Radicals"](h)||Qn["Katakana Phonetic Extensions"](h)||Qn.Katakana(h)&&h!==12540||!(!Qn["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Qn["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Qn["Unified Canadian Aboriginal Syllabics"](h)||Qn["Unified Canadian Aboriginal Syllabics Extended"](h)||Qn["Vertical Forms"](h)||Qn["Yijing Hexagram Symbols"](h)||Qn["Yi Syllables"](h)||Qn["Yi Radicals"](h))))}function _p(h){return!(Dc(h)||function(v){return!!(Qn["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Qn["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Qn["Letterlike Symbols"](v)||Qn["Number Forms"](v)||Qn["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Qn["Control Pictures"](v)&&v!==9251||Qn["Optical Character Recognition"](v)||Qn["Enclosed Alphanumerics"](v)||Qn["Geometric Shapes"](v)||Qn["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Qn["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Qn["CJK Symbols and Punctuation"](v)||Qn.Katakana(v)||Qn["Private Use Area"](v)||Qn["CJK Compatibility Forms"](v)||Qn["Small Form Variants"](v)||Qn["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(h))}function gc(h){return h>=1424&&h<=2303||Qn["Arabic Presentation Forms-A"](h)||Qn["Arabic Presentation Forms-B"](h)}function sl(h,v){return!(!v&&gc(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Qn.Khmer(h))}function Lh(h){for(var v=0,_=h;v<_.length;v+=1)if(gc(_[v].charCodeAt(0)))return!0;return!1}var vf=null,Zs="unavailable",Ol=null,Vd=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(Zs="error"),vf&&vf(h)};function xp(){Lf.fire(new St("pluginStateChange",{pluginStatus:Zs,pluginURL:Ol}))}var Lf=new vr,Ev=function(){return Zs},ic=function(){if(Zs!=="deferred"||!Ol)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zs="loading",xp(),Ol&&wt({url:Ol},function(h){h?Vd(h):(Zs="loaded",xp())})},ac={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Zs==="loaded"||ac.applyArabicShaping!=null},isLoading:function(){return Zs==="loading"},setState:function(h){Zs=h.pluginStatus,Ol=h.pluginURL},isParsed:function(){return ac.applyArabicShaping!=null&&ac.processBidirectionalText!=null&&ac.processStyledBidirectionalText!=null},getPluginURL:function(){return Ol}},Ca=function(h,v){this.zoom=h,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ed,this.transition={})};Ca.prototype.isSupportedScript=function(h){return function(v,_){for(var R=0,F=v;R<F.length;R+=1)if(!sl(F[R].charCodeAt(0),_))return!1;return!0}(h,ac.isLoaded())},Ca.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ca.prototype.getCrossfadeParameters=function(){var h=this.zoom,v=h-Math.floor(h),_=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*v}};var Os=function(h,v){this.property=h,this.value=v,this.expression=function(_,R){if(hp(_))return new pc(_,R);if(nh(_)){var F=$s(_,R);if(F.result==="error")throw new Error(F.value.map(function(K){return K.key+": "+K.message}).join(", "));return F.value}var z=_;return typeof _=="string"&&R.type==="color"&&(z=Ci.parse(_)),{kind:"constant",evaluate:function(){return z}}}(v===void 0?h.specification.default:v,h.specification)};Os.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Os.prototype.possiblyEvaluate=function(h,v,_){return this.property.possiblyEvaluate(this,h,v,_)};var zl=function(h){this.property=h,this.value=new Os(h,void 0)};zl.prototype.transitioned=function(h,v){return new hh(this.property,this.value,v,b({},h.transition,this.transition),h.now)},zl.prototype.untransitioned=function(){return new hh(this.property,this.value,null,{},0)};var Gu=function(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)};Gu.prototype.getValue=function(h){return we(this._values[h].value.value)},Gu.prototype.setValue=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new zl(this._values[h].property)),this._values[h].value=new Os(this._values[h].property,v===null?void 0:we(v))},Gu.prototype.getTransition=function(h){return we(this._values[h].transition)},Gu.prototype.setTransition=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new zl(this._values[h].property)),this._values[h].transition=we(v)||void 0},Gu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F);var z=this.getTransition(R);z!==void 0&&(h[R+"-transition"]=z)}return h},Gu.prototype.transitioned=function(h,v){for(var _=new Qc(this._properties),R=0,F=Object.keys(this._values);R<F.length;R+=1){var z=F[R];_._values[z]=this._values[z].transitioned(h,v._values[z])}return _},Gu.prototype.untransitioned=function(){for(var h=new Qc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v];h._values[R]=this._values[R].untransitioned()}return h};var hh=function(h,v,_,R,F){this.property=h,this.value=v,this.begin=F+R.delay||0,this.end=this.begin+R.duration||0,h.specification.transition&&(R.delay||R.duration)&&(this.prior=_)};hh.prototype.possiblyEvaluate=function(h,v,_){var R=h.now||0,F=this.value.possiblyEvaluate(h,v,_),z=this.prior;if(z){if(R>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(R<this.begin)return z.possiblyEvaluate(h,v,_);var K=(R-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(h,v,_),F,function(de){if(de<=0)return 0;if(de>=1)return 1;var Be=de*de,it=Be*de;return 4*(de<.5?it:3*(de-Be)+it-.75)}(K))}return F};var Qc=function(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)};Qc.prototype.possiblyEvaluate=function(h,v,_){for(var R=new gf(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var K=z[F];R._values[K]=this._values[K].possiblyEvaluate(h,v,_)}return R},Qc.prototype.hasTransition=function(){for(var h=0,v=Object.keys(this._values);h<v.length;h+=1)if(this._values[v[h]].prior)return!0;return!1};var Nu=function(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)};Nu.prototype.getValue=function(h){return we(this._values[h].value)},Nu.prototype.setValue=function(h,v){this._values[h]=new Os(this._values[h].property,v===null?void 0:we(v))},Nu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F)}return h},Nu.prototype.possiblyEvaluate=function(h,v,_){for(var R=new gf(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var K=z[F];R._values[K]=this._values[K].possiblyEvaluate(h,v,_)}return R};var xl=function(h,v,_){this.property=h,this.value=v,this.parameters=_};xl.prototype.isConstant=function(){return this.value.kind==="constant"},xl.prototype.constantOr=function(h){return this.value.kind==="constant"?this.value.value:h},xl.prototype.evaluate=function(h,v,_,R){return this.property.evaluate(this.value,this.parameters,h,v,_,R)};var gf=function(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)};gf.prototype.get=function(h){return this._values[h]};var Ji=function(h){this.specification=h};Ji.prototype.possiblyEvaluate=function(h,v){return h.expression.evaluate(v)},Ji.prototype.interpolate=function(h,v,_){var R=Rc[this.specification.type];return R?R(h,v,_):h};var wi=function(h,v){this.specification=h,this.overrides=v};wi.prototype.possiblyEvaluate=function(h,v,_,R){return new xl(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(v,null,{},_,R)}:h.expression,v)},wi.prototype.interpolate=function(h,v,_){if(h.value.kind!=="constant"||v.value.kind!=="constant")return h;if(h.value.value===void 0||v.value.value===void 0)return new xl(this,{kind:"constant",value:void 0},h.parameters);var R=Rc[this.specification.type];return R?new xl(this,{kind:"constant",value:R(h.value.value,v.value.value,_)},h.parameters):h},wi.prototype.evaluate=function(h,v,_,R,F,z){return h.kind==="constant"?h.value:h.evaluate(v,_,R,F,z)};var ul=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R,F,z){if(_.value===void 0)return new xl(this,{kind:"constant",value:void 0},R);if(_.expression.kind==="constant"){var K=_.expression.evaluate(R,null,{},F,z),de=_.property.specification.type==="resolvedImage"&&typeof K!="string"?K.name:K,Be=this._calculate(de,de,de,R);return new xl(this,{kind:"constant",value:Be},R)}if(_.expression.kind==="camera"){var it=this._calculate(_.expression.evaluate({zoom:R.zoom-1}),_.expression.evaluate({zoom:R.zoom}),_.expression.evaluate({zoom:R.zoom+1}),R);return new xl(this,{kind:"constant",value:it},R)}return new xl(this,_.expression,R)},v.prototype.evaluate=function(_,R,F,z,K,de){if(_.kind==="source"){var Be=_.evaluate(R,F,z,K,de);return this._calculate(Be,Be,Be,R)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(R.zoom)-1},F,z),_.evaluate({zoom:Math.floor(R.zoom)},F,z),_.evaluate({zoom:Math.floor(R.zoom)+1},F,z),R):_.value},v.prototype._calculate=function(_,R,F,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:_,to:R}:{from:F,to:R}},v.prototype.interpolate=function(_){return _},v}(wi),bl=function(h){this.specification=h};bl.prototype.possiblyEvaluate=function(h,v,_,R){if(h.value!==void 0){if(h.expression.kind==="constant"){var F=h.expression.evaluate(v,null,{},_,R);return this._calculate(F,F,F,v)}return this._calculate(h.expression.evaluate(new Ca(Math.floor(v.zoom-1),v)),h.expression.evaluate(new Ca(Math.floor(v.zoom),v)),h.expression.evaluate(new Ca(Math.floor(v.zoom+1),v)),v)}},bl.prototype._calculate=function(h,v,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:h,to:v}:{from:_,to:v}},bl.prototype.interpolate=function(h){return h};var ll=function(h){this.specification=h};ll.prototype.possiblyEvaluate=function(h,v,_,R){return!!h.expression.evaluate(v,null,{},_,R)},ll.prototype.interpolate=function(){return!1};var Ss=function(h){for(var v in this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],h){var _=h[v];_.specification.overridable&&this.overridableProperties.push(v);var R=this.defaultPropertyValues[v]=new Os(_,void 0),F=this.defaultTransitionablePropertyValues[v]=new zl(_);this.defaultTransitioningPropertyValues[v]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=R.possiblyEvaluate({})}};Ni("DataDrivenProperty",wi),Ni("DataConstantProperty",Ji),Ni("CrossFadedDataDrivenProperty",ul),Ni("CrossFadedProperty",bl),Ni("ColorRampProperty",ll);var mc=function(h){function v(_,R){if(h.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),R.layout&&(this._unevaluatedLayout=new Nu(R.layout)),R.paint)){for(var F in this._transitionablePaint=new Gu(R.paint),_.paint)this.setPaintProperty(F,_.paint[F],{validate:!1});for(var z in _.layout)this.setLayoutProperty(z,_.layout[z],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new gf(R.paint)}}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},v.prototype.setLayoutProperty=function(_,R,F){F===void 0&&(F={}),R!=null&&this._validate(lh,"layers."+this.id+".layout."+_,_,R,F)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,R):this.visibility=R)},v.prototype.getPaintProperty=function(_){return Te(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},v.prototype.setPaintProperty=function(_,R,F){if(F===void 0&&(F={}),R!=null&&this._validate(wa,"layers."+this.id+".paint."+_,_,R,F))return!1;if(Te(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),R||void 0),!1;var z=this._transitionablePaint._values[_],K=z.property.specification["property-type"]==="cross-faded-data-driven",de=z.value.isDataDriven(),Be=z.value;this._transitionablePaint.setValue(_,R),this._handleSpecialPaintPropertyUpdate(_);var it=this._transitionablePaint._values[_].value;return it.isDataDriven()||de||K||this._handleOverridablePaintPropertyUpdate(_,Be,it)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!1},v.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(_,R){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,R)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,R)},v.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),_e(_,function(R,F){return!(R===void 0||F==="layout"&&!Object.keys(R).length||F==="paint"&&!Object.keys(R).length)})},v.prototype._validate=function(_,R,F,z,K){return K===void 0&&(K={}),(!K||K.validate!==!1)&&Df(this,_.call(yp,{key:R,layerType:this.type,objectKey:F,value:z,styleSpec:Rt,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var _ in this.paint._values){var R=this.paint.get(_);if(R instanceof xl&&Us(R.property.specification)&&(R.value.kind==="source"||R.value.kind==="composite")&&R.value.isStateDependent)return!0}return!1},v}(vr),mf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Fh=function(h,v){this._structArray=h,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Vo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function uu(h,v){v===void 0&&(v=1);var _=0,R=0;return{members:h.map(function(F){var z=mf[F.type].BYTES_PER_ELEMENT,K=_=td(_,Math.max(v,z)),de=F.components||1;return R=Math.max(R,z),_+=z*de,{name:F.name,type:F.type,components:de,offset:K}}),size:td(_,Math.max(R,v)),alignment:v}}function td(h,v){return Math.ceil(h/v)*v}Vo.serialize=function(h,v){return h._trim(),v&&(h.isTransferred=!0,v.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}},Vo.deserialize=function(h){var v=Object.create(this.prototype);return v.arrayBuffer=h.arrayBuffer,v.length=h.length,v.capacity=h.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},Vo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vo.prototype.clear=function(){this.length=0},Vo.prototype.resize=function(h){this.reserve(h),this.length=h},Vo.prototype.reserve=function(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},Vo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Bh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.int16[z+0]=R,this.int16[z+1]=F,_},v}(Vo);Bh.prototype.bytesPerElement=4,Ni("StructArrayLayout2i4",Bh);var Ff=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var K=this.length;return this.resize(K+1),this.emplace(K,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,K){var de=4*_;return this.int16[de+0]=R,this.int16[de+1]=F,this.int16[de+2]=z,this.int16[de+3]=K,_},v}(Vo);Ff.prototype.bytesPerElement=8,Ni("StructArrayLayout4i8",Ff);var yc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de){var Be=this.length;return this.resize(Be+1),this.emplace(Be,_,R,F,z,K,de)},v.prototype.emplace=function(_,R,F,z,K,de,Be){var it=6*_;return this.int16[it+0]=R,this.int16[it+1]=F,this.int16[it+2]=z,this.int16[it+3]=K,this.int16[it+4]=de,this.int16[it+5]=Be,_},v}(Vo);yc.prototype.bytesPerElement=12,Ni("StructArrayLayout2i4i12",yc);var Ma=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de){var Be=this.length;return this.resize(Be+1),this.emplace(Be,_,R,F,z,K,de)},v.prototype.emplace=function(_,R,F,z,K,de,Be){var it=4*_,ht=8*_;return this.int16[it+0]=R,this.int16[it+1]=F,this.uint8[ht+4]=z,this.uint8[ht+5]=K,this.uint8[ht+6]=de,this.uint8[ht+7]=Be,_},v}(Vo);Ma.prototype.bytesPerElement=8,Ni("StructArrayLayout2i4ub8",Ma);var Nh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.float32[z+0]=R,this.float32[z+1]=F,_},v}(Vo);Nh.prototype.bytesPerElement=8,Ni("StructArrayLayout2f8",Nh);var Lc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de,Be,it,ht,xt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,_,R,F,z,K,de,Be,it,ht,xt)},v.prototype.emplace=function(_,R,F,z,K,de,Be,it,ht,xt,Lt){var Ht=10*_;return this.uint16[Ht+0]=R,this.uint16[Ht+1]=F,this.uint16[Ht+2]=z,this.uint16[Ht+3]=K,this.uint16[Ht+4]=de,this.uint16[Ht+5]=Be,this.uint16[Ht+6]=it,this.uint16[Ht+7]=ht,this.uint16[Ht+8]=xt,this.uint16[Ht+9]=Lt,_},v}(Vo);Lc.prototype.bytesPerElement=20,Ni("StructArrayLayout10ui20",Lc);var rd=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht){var ur=this.length;return this.resize(ur+1),this.emplace(ur,_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht)},v.prototype.emplace=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur){var pr=12*_;return this.int16[pr+0]=R,this.int16[pr+1]=F,this.int16[pr+2]=z,this.int16[pr+3]=K,this.uint16[pr+4]=de,this.uint16[pr+5]=Be,this.uint16[pr+6]=it,this.uint16[pr+7]=ht,this.int16[pr+8]=xt,this.int16[pr+9]=Lt,this.int16[pr+10]=Ht,this.int16[pr+11]=ur,_},v}(Vo);rd.prototype.bytesPerElement=24,Ni("StructArrayLayout4i4ui4i24",rd);var zh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var K=3*_;return this.float32[K+0]=R,this.float32[K+1]=F,this.float32[K+2]=z,_},v}(Vo);zh.prototype.bytesPerElement=12,Ni("StructArrayLayout3f12",zh);var ph=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint32[1*_+0]=R,_},v}(Vo);ph.prototype.bytesPerElement=4,Ni("StructArrayLayout1ul4",ph);var bp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de,Be,it,ht){var xt=this.length;return this.resize(xt+1),this.emplace(xt,_,R,F,z,K,de,Be,it,ht)},v.prototype.emplace=function(_,R,F,z,K,de,Be,it,ht,xt){var Lt=10*_,Ht=5*_;return this.int16[Lt+0]=R,this.int16[Lt+1]=F,this.int16[Lt+2]=z,this.int16[Lt+3]=K,this.int16[Lt+4]=de,this.int16[Lt+5]=Be,this.uint32[Ht+3]=it,this.uint16[Lt+8]=ht,this.uint16[Lt+9]=xt,_},v}(Vo);bp.prototype.bytesPerElement=20,Ni("StructArrayLayout6i1ul2ui20",bp);var Uh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de){var Be=this.length;return this.resize(Be+1),this.emplace(Be,_,R,F,z,K,de)},v.prototype.emplace=function(_,R,F,z,K,de,Be){var it=6*_;return this.int16[it+0]=R,this.int16[it+1]=F,this.int16[it+2]=z,this.int16[it+3]=K,this.int16[it+4]=de,this.int16[it+5]=Be,_},v}(Vo);Uh.prototype.bytesPerElement=12,Ni("StructArrayLayout2i2i2i12",Uh);var pn=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K){var de=this.length;return this.resize(de+1),this.emplace(de,_,R,F,z,K)},v.prototype.emplace=function(_,R,F,z,K,de){var Be=4*_,it=8*_;return this.float32[Be+0]=R,this.float32[Be+1]=F,this.float32[Be+2]=z,this.int16[it+6]=K,this.int16[it+7]=de,_},v}(Vo);pn.prototype.bytesPerElement=16,Ni("StructArrayLayout2f1f2i16",pn);var Mr=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var K=this.length;return this.resize(K+1),this.emplace(K,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,K){var de=12*_,Be=3*_;return this.uint8[de+0]=R,this.uint8[de+1]=F,this.float32[Be+1]=z,this.float32[Be+2]=K,_},v}(Vo);Mr.prototype.bytesPerElement=12,Ni("StructArrayLayout2ub2f12",Mr);var Ve=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var K=3*_;return this.uint16[K+0]=R,this.uint16[K+1]=F,this.uint16[K+2]=z,_},v}(Vo);Ve.prototype.bytesPerElement=6,Ni("StructArrayLayout3ui6",Ve);var Fc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr){var on=this.length;return this.resize(on+1),this.emplace(on,_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr)},v.prototype.emplace=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr,on){var gn=24*_,Tn=12*_,Ln=48*_;return this.int16[gn+0]=R,this.int16[gn+1]=F,this.uint16[gn+2]=z,this.uint16[gn+3]=K,this.uint32[Tn+2]=de,this.uint32[Tn+3]=Be,this.uint32[Tn+4]=it,this.uint16[gn+10]=ht,this.uint16[gn+11]=xt,this.uint16[gn+12]=Lt,this.float32[Tn+7]=Ht,this.float32[Tn+8]=ur,this.uint8[Ln+36]=pr,this.uint8[Ln+37]=zr,this.uint8[Ln+38]=Or,this.uint32[Tn+10]=qr,this.int16[gn+22]=on,_},v}(Vo);Fc.prototype.bytesPerElement=48,Ni("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Fc);var Jt=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr,on,gn,Tn,Ln,pi,Ei,Ki,Di,ia,Oi,ro){var Yi=this.length;return this.resize(Yi+1),this.emplace(Yi,_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr,on,gn,Tn,Ln,pi,Ei,Ki,Di,ia,Oi,ro)},v.prototype.emplace=function(_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr,zr,Or,qr,on,gn,Tn,Ln,pi,Ei,Ki,Di,ia,Oi,ro,Yi){var $i=34*_,mo=17*_;return this.int16[$i+0]=R,this.int16[$i+1]=F,this.int16[$i+2]=z,this.int16[$i+3]=K,this.int16[$i+4]=de,this.int16[$i+5]=Be,this.int16[$i+6]=it,this.int16[$i+7]=ht,this.uint16[$i+8]=xt,this.uint16[$i+9]=Lt,this.uint16[$i+10]=Ht,this.uint16[$i+11]=ur,this.uint16[$i+12]=pr,this.uint16[$i+13]=zr,this.uint16[$i+14]=Or,this.uint16[$i+15]=qr,this.uint16[$i+16]=on,this.uint16[$i+17]=gn,this.uint16[$i+18]=Tn,this.uint16[$i+19]=Ln,this.uint16[$i+20]=pi,this.uint16[$i+21]=Ei,this.uint16[$i+22]=Ki,this.uint32[mo+12]=Di,this.float32[mo+13]=ia,this.float32[mo+14]=Oi,this.float32[mo+15]=ro,this.float32[mo+16]=Yi,_},v}(Vo);Jt.prototype.bytesPerElement=68,Ni("StructArrayLayout8i15ui1ul4f68",Jt);var Bf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.float32[1*_+0]=R,_},v}(Vo);Bf.prototype.bytesPerElement=4,Ni("StructArrayLayout1f4",Bf);var Es=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var K=3*_;return this.int16[K+0]=R,this.int16[K+1]=F,this.int16[K+2]=z,_},v}(Vo);Es.prototype.bytesPerElement=6,Ni("StructArrayLayout3i6",Es);var Sp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var K=4*_;return this.uint32[2*_+0]=R,this.uint16[K+2]=F,this.uint16[K+3]=z,_},v}(Vo);Sp.prototype.bytesPerElement=8,Ni("StructArrayLayout1ul2ui8",Sp);var Nf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.uint16[z+0]=R,this.uint16[z+1]=F,_},v}(Vo);Nf.prototype.bytesPerElement=4,Ni("StructArrayLayout2ui4",Nf);var Ul=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint16[1*_+0]=R,_},v}(Vo);Ul.prototype.bytesPerElement=2,Ni("StructArrayLayout1ui2",Ul);var Ep=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var K=this.length;return this.resize(K+1),this.emplace(K,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,K){var de=4*_;return this.float32[de+0]=R,this.float32[de+1]=F,this.float32[de+2]=z,this.float32[de+3]=K,_},v}(Vo);Ep.prototype.bytesPerElement=16,Ni("StructArrayLayout4f16",Ep);var E=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new Y(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,_),v}(Fh);E.prototype.size=20;var M=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new E(this,_)},v}(bp);Ni("CollisionBoxArray",M);var C=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(R){this._structArray.uint8[this._pos1+37]=R},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(R){this._structArray.uint8[this._pos1+38]=R},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+10]=R},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,_),v}(Fh);C.prototype.size=48;var I=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new C(this,_)},v}(Fc);Ni("PlacedSymbolArray",I);var V=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+12]=R},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,_),v}(Fh);V.prototype.size=68;var ie=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new V(this,_)},v}(Jt);Ni("SymbolInstanceArray",ie);var fe=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getoffsetX=function(_){return this.float32[1*_+0]},v}(Bf);Ni("GlyphOffsetArray",fe);var Oe=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getx=function(_){return this.int16[3*_+0]},v.prototype.gety=function(_){return this.int16[3*_+1]},v.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},v}(Es);Ni("SymbolLineVertexArray",Oe);var ut=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,_),v}(Fh);ut.prototype.size=8;var Et=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new ut(this,_)},v}(Sp);Ni("FeatureIndexArray",Et);var Wt=uu([{name:"a_pos",components:2,type:"Int16"}],4).members,Xt=function(h){h===void 0&&(h=[]),this.segments=h};function Kt(h,v){return 256*(h=$(Math.floor(h),0,255))+$(Math.floor(v),0,255)}Xt.prototype.prepareSegment=function(h,v,_,R){var F=this.segments[this.segments.length-1];return h>Xt.MAX_VERTEX_ARRAY_LENGTH&&ze("Max vertices per segment is "+Xt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+h),(!F||F.vertexLength+h>Xt.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==R)&&(F={vertexOffset:v.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},R!==void 0&&(F.sortKey=R),this.segments.push(F)),F},Xt.prototype.get=function(){return this.segments},Xt.prototype.destroy=function(){for(var h=0,v=this.segments;h<v.length;h+=1){var _=v[h];for(var R in _.vaos)_.vaos[R].destroy()}},Xt.simpleSegment=function(h,v,_,R){return new Xt([{vertexOffset:h,primitiveOffset:v,vertexLength:_,primitiveLength:R,vaos:{},sortKey:0}])},Xt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ni("SegmentVector",Xt);var _r=uu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),dr=X(function(h){h.exports=function(v,_){var R,F,z,K,de,Be,it,ht;for(F=v.length-(R=3&v.length),z=_,de=3432918353,Be=461845907,ht=0;ht<F;)it=255&v.charCodeAt(ht)|(255&v.charCodeAt(++ht))<<8|(255&v.charCodeAt(++ht))<<16|(255&v.charCodeAt(++ht))<<24,++ht,z=27492+(65535&(K=5*(65535&(z=(z^=it=(65535&(it=(it=(65535&it)*de+(((it>>>16)*de&65535)<<16)&4294967295)<<15|it>>>17))*Be+(((it>>>16)*Be&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+(K>>>16)&65535)<<16);switch(it=0,R){case 3:it^=(255&v.charCodeAt(ht+2))<<16;case 2:it^=(255&v.charCodeAt(ht+1))<<8;case 1:z^=it=(65535&(it=(it=(65535&(it^=255&v.charCodeAt(ht)))*de+(((it>>>16)*de&65535)<<16)&4294967295)<<15|it>>>17))*Be+(((it>>>16)*Be&65535)<<16)&4294967295}return z^=v.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0}}),Pr=X(function(h){h.exports=function(v,_){for(var R,F=v.length,z=_^F,K=0;F>=4;)R=1540483477*(65535&(R=255&v.charCodeAt(K)|(255&v.charCodeAt(++K))<<8|(255&v.charCodeAt(++K))<<16|(255&v.charCodeAt(++K))<<24))+((1540483477*(R>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(R=1540483477*(65535&(R^=R>>>24))+((1540483477*(R>>>16)&65535)<<16)),F-=4,++K;switch(F){case 3:z^=(255&v.charCodeAt(K+2))<<16;case 2:z^=(255&v.charCodeAt(K+1))<<8;case 1:z=1540483477*(65535&(z^=255&v.charCodeAt(K)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0}}),cr=dr,Dr=Pr;cr.murmur3=dr,cr.murmur2=Dr;var Wr=function(){this.ids=[],this.positions=[],this.indexed=!1};Wr.prototype.add=function(h,v,_,R){this.ids.push(xn(h)),this.positions.push(v,_,R)},Wr.prototype.getPositions=function(h){for(var v=xn(h),_=0,R=this.ids.length-1;_<R;){var F=_+R>>1;this.ids[F]>=v?R=F:_=F+1}for(var z=[];this.ids[_]===v;)z.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return z},Wr.serialize=function(h,v){var _=new Float64Array(h.ids),R=new Uint32Array(h.positions);return function F(z,K,de,Be){for(;de<Be;){for(var it=z[de+Be>>1],ht=de-1,xt=Be+1;;){do ht++;while(z[ht]<it);do xt--;while(z[xt]>it);if(ht>=xt)break;dn(z,ht,xt),dn(K,3*ht,3*xt),dn(K,3*ht+1,3*xt+1),dn(K,3*ht+2,3*xt+2)}xt-de<Be-xt?(F(z,K,de,xt),de=xt+1):(F(z,K,xt+1,Be),Be=xt)}}(_,R,0,_.length-1),v&&v.push(_.buffer,R.buffer),{ids:_,positions:R}},Wr.deserialize=function(h){var v=new Wr;return v.ids=h.ids,v.positions=h.positions,v.indexed=!0,v};var rn=Math.pow(2,53)-1;function xn(h){var v=+h;return!isNaN(v)&&v<=rn?v:cr(String(h))}function dn(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}Ni("FeaturePositionMap",Wr);var An=function(h,v){this.gl=h.gl,this.location=v},Vn=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},v}(An),ui=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},v}(An),li=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},v}(An),Ri=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},v}(An),ea=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},v}(An),ua=function(h){function v(_,R){h.call(this,_,R),this.current=Ci.transparent}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},v}(An),ra=new Float32Array(16),uo=function(h){function v(_,R){h.call(this,_,R),this.current=ra}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var R=1;R<16;R++)if(_[R]!==this.current[R]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},v}(An);function Li(h){return[Kt(255*h.r,255*h.g),Kt(255*h.b,255*h.a)]}var Oa=function(h,v,_){this.value=h,this.uniformNames=v.map(function(R){return"u_"+R}),this.type=_};Oa.prototype.setUniform=function(h,v,_){h.set(_.constantOr(this.value))},Oa.prototype.getBinding=function(h,v,_){return this.type==="color"?new ua(h,v):new ui(h,v)};var Ha=function(h,v){this.uniformNames=v.map(function(_){return"u_"+_}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ha.prototype.setConstantPatternPositions=function(h,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=h.tlbr},Ha.prototype.setUniform=function(h,v,_,R){var F=R==="u_pattern_to"?this.patternTo:R==="u_pattern_from"?this.patternFrom:R==="u_pixel_ratio_to"?this.pixelRatioTo:R==="u_pixel_ratio_from"?this.pixelRatioFrom:null;F&&h.set(F)},Ha.prototype.getBinding=function(h,v,_){return _.substr(0,9)==="u_pattern"?new ea(h,v):new ui(h,v)};var va=function(h,v,_,R){this.expression=h,this.type=_,this.maxValue=0,this.paintVertexAttributes=v.map(function(F){return{name:"a_"+F,type:"Float32",components:_==="color"?2:1,offset:0}}),this.paintVertexArray=new R};va.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.paintVertexArray.length,K=this.expression.evaluate(new Ca(0),v,{},R,[],F);this.paintVertexArray.resize(h),this._setPaintValue(z,h,K)},va.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:0},_,R);this._setPaintValue(h,v,F)},va.prototype._setPaintValue=function(h,v,_){if(this.type==="color")for(var R=Li(_),F=h;F<v;F++)this.paintVertexArray.emplace(F,R[0],R[1]);else{for(var z=h;z<v;z++)this.paintVertexArray.emplace(z,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},va.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},va.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ea=function(h,v,_,R,F,z){this.expression=h,this.uniformNames=v.map(function(K){return"u_"+K+"_t"}),this.type=_,this.useIntegerZoom=R,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=v.map(function(K){return{name:"a_"+K,type:"Float32",components:_==="color"?4:2,offset:0}}),this.paintVertexArray=new z};Ea.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.expression.evaluate(new Ca(this.zoom),v,{},R,[],F),K=this.expression.evaluate(new Ca(this.zoom+1),v,{},R,[],F),de=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(de,h,z,K)},Ea.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:this.zoom},_,R),z=this.expression.evaluate({zoom:this.zoom+1},_,R);this._setPaintValue(h,v,F,z)},Ea.prototype._setPaintValue=function(h,v,_,R){if(this.type==="color")for(var F=Li(_),z=Li(R),K=h;K<v;K++)this.paintVertexArray.emplace(K,F[0],F[1],z[0],z[1]);else{for(var de=h;de<v;de++)this.paintVertexArray.emplace(de,_,R);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(R))}},Ea.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ea.prototype.setUniform=function(h,v){var _=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,R=$(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);h.set(R)},Ea.prototype.getBinding=function(h,v,_){return new ui(h,v)};var Pa=function(h,v,_,R,F,z){this.expression=h,this.type=v,this.useIntegerZoom=_,this.zoom=R,this.layerId=z,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F};Pa.prototype.populatePaintArray=function(h,v,_){var R=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(R,h,v.patterns&&v.patterns[this.layerId],_)},Pa.prototype.updatePaintArray=function(h,v,_,R,F){this._setPaintValues(h,v,_.patterns&&_.patterns[this.layerId],F)},Pa.prototype._setPaintValues=function(h,v,_,R){if(R&&_){var F=R[_.min],z=R[_.mid],K=R[_.max];if(F&&z&&K)for(var de=h;de<v;de++)this.zoomInPaintVertexArray.emplace(de,z.tl[0],z.tl[1],z.br[0],z.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],z.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(de,z.tl[0],z.tl[1],z.br[0],z.br[1],K.tl[0],K.tl[1],K.br[0],K.br[1],z.pixelRatio,K.pixelRatio)}},Pa.prototype.upload=function(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,_r.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,_r.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var la=function(h,v,_){this.binders={},this._buffers=[];var R=[];for(var F in h.paint._values)if(_(F)){var z=h.paint.get(F);if(z instanceof xl&&Us(z.property.specification)){var K=Tu(F,h.type),de=z.value,Be=z.property.specification.type,it=z.property.useIntegerZoom,ht=z.property.specification["property-type"],xt=ht==="cross-faded"||ht==="cross-faded-data-driven";if(de.kind==="constant")this.binders[F]=xt?new Ha(de.value,K):new Oa(de.value,K,Be),R.push("/u_"+F);else if(de.kind==="source"||xt){var Lt=Vs(F,Be,"source");this.binders[F]=xt?new Pa(de,Be,it,v,Lt,h.id):new va(de,K,Be,Lt),R.push("/a_"+F)}else{var Ht=Vs(F,Be,"composite");this.binders[F]=new Ea(de,K,Be,it,v,Ht),R.push("/z_"+F)}}}this.cacheKey=R.sort().join("")};la.prototype.getMaxValue=function(h){var v=this.binders[h];return v instanceof va||v instanceof Ea?v.maxValue:0},la.prototype.populatePaintArrays=function(h,v,_,R,F){for(var z in this.binders){var K=this.binders[z];(K instanceof va||K instanceof Ea||K instanceof Pa)&&K.populatePaintArray(h,v,_,R,F)}},la.prototype.setConstantPatternPositions=function(h,v){for(var _ in this.binders){var R=this.binders[_];R instanceof Ha&&R.setConstantPatternPositions(h,v)}},la.prototype.updatePaintArrays=function(h,v,_,R,F){var z=!1;for(var K in h)for(var de=0,Be=v.getPositions(K);de<Be.length;de+=1){var it=Be[de],ht=_.feature(it.index);for(var xt in this.binders){var Lt=this.binders[xt];if((Lt instanceof va||Lt instanceof Ea||Lt instanceof Pa)&&Lt.expression.isStateDependent===!0){var Ht=R.paint.get(xt);Lt.expression=Ht.value,Lt.updatePaintArray(it.start,it.end,ht,h[K],F),z=!0}}}return z},la.prototype.defines=function(){var h=[];for(var v in this.binders){var _=this.binders[v];(_ instanceof Oa||_ instanceof Ha)&&h.push.apply(h,_.uniformNames.map(function(R){return"#define HAS_UNIFORM_"+R}))}return h},la.prototype.getBinderAttributes=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof va||_ instanceof Ea)for(var R=0;R<_.paintVertexAttributes.length;R++)h.push(_.paintVertexAttributes[R].name);else if(_ instanceof Pa)for(var F=0;F<_r.members.length;F++)h.push(_r.members[F].name)}return h},la.prototype.getBinderUniforms=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Oa||_ instanceof Ha||_ instanceof Ea)for(var R=0,F=_.uniformNames;R<F.length;R+=1)h.push(F[R])}return h},la.prototype.getPaintVertexBuffers=function(){return this._buffers},la.prototype.getUniforms=function(h,v){var _=[];for(var R in this.binders){var F=this.binders[R];if(F instanceof Oa||F instanceof Ha||F instanceof Ea)for(var z=0,K=F.uniformNames;z<K.length;z+=1){var de=K[z];if(v[de]){var Be=F.getBinding(h,v[de],de);_.push({name:de,property:R,binding:Be})}}}return _},la.prototype.setUniforms=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1){var K=z[F],de=K.name,Be=K.property;this.binders[Be].setUniform(K.binding,R,_.get(Be),de)}},la.prototype.updatePaintBuffers=function(h){for(var v in this._buffers=[],this.binders){var _=this.binders[v];if(h&&_ instanceof Pa){var R=h.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;R&&this._buffers.push(R)}else(_ instanceof va||_ instanceof Ea)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},la.prototype.upload=function(h){for(var v in this.binders){var _=this.binders[v];(_ instanceof va||_ instanceof Ea||_ instanceof Pa)&&_.upload(h)}this.updatePaintBuffers()},la.prototype.destroy=function(){for(var h in this.binders){var v=this.binders[h];(v instanceof va||v instanceof Ea||v instanceof Pa)&&v.destroy()}};var ga=function(h,v,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var R=0,F=h;R<F.length;R+=1){var z=F[R];this.programConfigurations[z.id]=new la(z,v,_)}this.needsUpload=!1,this._featureMap=new Wr,this._bufferOffset=0};function Tu(h,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(v+"-","").replace(/-/g,"_")]}function Vs(h,v,_){var R={color:{source:Nh,composite:Ep},number:{source:Bf,composite:Nh}},F=function(z){return{"line-pattern":{source:Lc,composite:Lc},"fill-pattern":{source:Lc,composite:Lc},"fill-extrusion-pattern":{source:Lc,composite:Lc}}[z]}(h);return F&&F[_]||R[v][_]}ga.prototype.populatePaintArrays=function(h,v,_,R,F,z){for(var K in this.programConfigurations)this.programConfigurations[K].populatePaintArrays(h,v,R,F,z);v.id!==void 0&&this._featureMap.add(v.id,_,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0},ga.prototype.updatePaintArrays=function(h,v,_,R){for(var F=0,z=_;F<z.length;F+=1){var K=z[F];this.needsUpload=this.programConfigurations[K.id].updatePaintArrays(h,this._featureMap,v,K,R)||this.needsUpload}},ga.prototype.get=function(h){return this.programConfigurations[h]},ga.prototype.upload=function(h){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(h);this.needsUpload=!1}},ga.prototype.destroy=function(){for(var h in this.programConfigurations)this.programConfigurations[h].destroy()},Ni("ConstantBinder",Oa),Ni("CrossFadedConstantBinder",Ha),Ni("SourceExpressionBinder",va),Ni("CrossFadedCompositeBinder",Pa),Ni("CompositeExpressionBinder",Ea),Ni("ProgramConfiguration",la,{omit:["_buffers"]}),Ni("ProgramConfigurationSet",ga);var $u=Math.pow(2,14)-1,zu=-$u-1;function es(h){for(var v=8192/h.extent,_=h.loadGeometry(),R=0;R<_.length;R++)for(var F=_[R],z=0;z<F.length;z++){var K=F[z],de=Math.round(K.x*v),Be=Math.round(K.y*v);K.x=$(de,zu,$u),K.y=$(Be,zu,$u),(de<K.x||de>K.x+1||Be<K.y||Be>K.y+1)&&ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function ws(h,v){return{type:h.type,id:h.id,properties:h.properties,geometry:v?es(h):[]}}function Xu(h,v,_,R,F){h.emplaceBack(2*v+(R+1)/2,2*_+(F+1)/2)}var Js=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new Bh,this.indexArray=new Ve,this.segments=new Xt,this.programConfigurations=new ga(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Jc(h,v){for(var _=0;_<h.length;_++)if(Vl(v,h[_]))return!0;for(var R=0;R<v.length;R++)if(Vl(h,v[R]))return!0;return!!yf(h,v)}function Sl(h,v,_){return!!Vl(h,v)||!!_c(v,h,_)}function oc(h,v){if(h.length===1)return ef(v,h[0]);for(var _=0;_<v.length;_++)for(var R=v[_],F=0;F<R.length;F++)if(Vl(h,R[F]))return!0;for(var z=0;z<h.length;z++)if(ef(v,h[z]))return!0;for(var K=0;K<v.length;K++)if(yf(h,v[K]))return!0;return!1}function Zl(h,v,_){if(h.length>1){if(yf(h,v))return!0;for(var R=0;R<v.length;R++)if(_c(v[R],h,_))return!0}for(var F=0;F<h.length;F++)if(_c(h[F],v,_))return!0;return!1}function yf(h,v){if(h.length===0||v.length===0)return!1;for(var _=0;_<h.length-1;_++)for(var R=h[_],F=h[_+1],z=0;z<v.length-1;z++)if(zf(R,F,v[z],v[z+1]))return!0;return!1}function zf(h,v,_,R){return Ge(h,_,R)!==Ge(v,_,R)&&Ge(h,v,_)!==Ge(h,v,R)}function _c(h,v,_){var R=_*_;if(v.length===1)return h.distSqr(v[0])<R;for(var F=1;F<v.length;F++)if(Uf(h,v[F-1],v[F])<R)return!0;return!1}function Uf(h,v,_){var R=v.distSqr(_);if(R===0)return h.distSqr(v);var F=((h.x-v.x)*(_.x-v.x)+(h.y-v.y)*(_.y-v.y))/R;return h.distSqr(F<0?v:F>1?_:_.sub(v)._mult(F)._add(v))}function ef(h,v){for(var _,R,F,z=!1,K=0;K<h.length;K++)for(var de=0,Be=(_=h[K]).length-1;de<_.length;Be=de++)(R=_[de]).y>v.y!=(F=_[Be]).y>v.y&&v.x<(F.x-R.x)*(v.y-R.y)/(F.y-R.y)+R.x&&(z=!z);return z}function Vl(h,v){for(var _=!1,R=0,F=h.length-1;R<h.length;F=R++){var z=h[R],K=h[F];z.y>v.y!=K.y>v.y&&v.x<(K.x-z.x)*(v.y-z.y)/(K.y-z.y)+z.x&&(_=!_)}return _}function _f(h,v,_){var R=_[0],F=_[2];if(h.x<R.x&&v.x<R.x||h.x>F.x&&v.x>F.x||h.y<R.y&&v.y<R.y||h.y>F.y&&v.y>F.y)return!1;var z=Ge(h,v,_[0]);return z!==Ge(h,v,_[1])||z!==Ge(h,v,_[2])||z!==Ge(h,v,_[3])}function Au(h,v,_){var R=v.paint.get(h).value;return R.kind==="constant"?R.value:_.programConfigurations.get(v.id).getMaxValue(h)}function Ps(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Yu(h,v,_,R,F){if(!v[0]&&!v[1])return h;var z=Y.convert(v)._mult(F);_==="viewport"&&z._rotate(-R);for(var K=[],de=0;de<h.length;de++)K.push(h[de].sub(z));return K}Js.prototype.populate=function(h,v,_){var R=this.layers[0],F=[],z=null;R.type==="circle"&&(z=R.layout.get("circle-sort-key"));for(var K=0,de=h;K<de.length;K+=1){var Be=de[K],it=Be.feature,ht=Be.id,xt=Be.index,Lt=Be.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,ur=ws(it,Ht);if(this.layers[0]._featureFilter.filter(new Ca(this.zoom),ur,_)){var pr=z?z.evaluate(ur,{},_):void 0,zr={id:ht,properties:it.properties,type:it.type,sourceLayerIndex:Lt,index:xt,geometry:Ht?ur.geometry:es(it),patterns:{},sortKey:pr};F.push(zr)}}z&&F.sort(function(Ei,Ki){return Ei.sortKey-Ki.sortKey});for(var Or=0,qr=F;Or<qr.length;Or+=1){var on=qr[Or],gn=on.geometry,Tn=on.index,Ln=on.sourceLayerIndex,pi=h[Tn].feature;this.addFeature(on,gn,Tn,_),v.featureIndex.insert(pi,gn,Tn,Ln,this.index)}},Js.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Js.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Js.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Js.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Wt),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},Js.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Js.prototype.addFeature=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1)for(var K=0,de=z[F];K<de.length;K+=1){var Be=de[K],it=Be.x,ht=Be.y;if(!(it<0||it>=8192||ht<0||ht>=8192)){var xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Lt=xt.vertexLength;Xu(this.layoutVertexArray,it,ht,-1,-1),Xu(this.layoutVertexArray,it,ht,1,-1),Xu(this.layoutVertexArray,it,ht,1,1),Xu(this.layoutVertexArray,it,ht,-1,1),this.indexArray.emplaceBack(Lt,Lt+1,Lt+2),this.indexArray.emplaceBack(Lt,Lt+3,Lt+2),xt.vertexLength+=4,xt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,{},R)},Ni("CircleBucket",Js,{omit:["layers"]});var qu=new Ss({"circle-sort-key":new wi(Rt.layout_circle["circle-sort-key"])}),jl={paint:new Ss({"circle-radius":new wi(Rt.paint_circle["circle-radius"]),"circle-color":new wi(Rt.paint_circle["circle-color"]),"circle-blur":new wi(Rt.paint_circle["circle-blur"]),"circle-opacity":new wi(Rt.paint_circle["circle-opacity"]),"circle-translate":new Ji(Rt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ji(Rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ji(Rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ji(Rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wi(Rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wi(Rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wi(Rt.paint_circle["circle-stroke-opacity"])}),layout:qu},vo=typeof Float32Array!="undefined"?Float32Array:Array;function Ku(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Mu(h,v,_){var R=v[0],F=v[1],z=v[2],K=v[3],de=v[4],Be=v[5],it=v[6],ht=v[7],xt=v[8],Lt=v[9],Ht=v[10],ur=v[11],pr=v[12],zr=v[13],Or=v[14],qr=v[15],on=_[0],gn=_[1],Tn=_[2],Ln=_[3];return h[0]=on*R+gn*de+Tn*xt+Ln*pr,h[1]=on*F+gn*Be+Tn*Lt+Ln*zr,h[2]=on*z+gn*it+Tn*Ht+Ln*Or,h[3]=on*K+gn*ht+Tn*ur+Ln*qr,h[4]=(on=_[4])*R+(gn=_[5])*de+(Tn=_[6])*xt+(Ln=_[7])*pr,h[5]=on*F+gn*Be+Tn*Lt+Ln*zr,h[6]=on*z+gn*it+Tn*Ht+Ln*Or,h[7]=on*K+gn*ht+Tn*ur+Ln*qr,h[8]=(on=_[8])*R+(gn=_[9])*de+(Tn=_[10])*xt+(Ln=_[11])*pr,h[9]=on*F+gn*Be+Tn*Lt+Ln*zr,h[10]=on*z+gn*it+Tn*Ht+Ln*Or,h[11]=on*K+gn*ht+Tn*ur+Ln*qr,h[12]=(on=_[12])*R+(gn=_[13])*de+(Tn=_[14])*xt+(Ln=_[15])*pr,h[13]=on*F+gn*Be+Tn*Lt+Ln*zr,h[14]=on*z+gn*it+Tn*Ht+Ln*Or,h[15]=on*K+gn*ht+Tn*ur+Ln*qr,h}Math.hypot||(Math.hypot=function(){for(var h=arguments,v=0,_=arguments.length;_--;)v+=h[_]*h[_];return Math.sqrt(v)});var xc,nd=Mu;function dh(h,v,_){var R=v[0],F=v[1],z=v[2],K=v[3];return h[0]=_[0]*R+_[4]*F+_[8]*z+_[12]*K,h[1]=_[1]*R+_[5]*F+_[9]*z+_[13]*K,h[2]=_[2]*R+_[6]*F+_[10]*z+_[14]*K,h[3]=_[3]*R+_[7]*F+_[11]*z+_[15]*K,h}xc=new vo(3),vo!=Float32Array&&(xc[0]=0,xc[1]=0,xc[2]=0),function(){var h=new vo(4);vo!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0)}();var id=(function(){var h=new vo(2);vo!=Float32Array&&(h[0]=0,h[1]=0)}(),function(h){function v(_){h.call(this,_,jl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Js(_)},v.prototype.queryRadius=function(_){var R=_;return Au("circle-radius",this,R)+Au("circle-stroke-width",this,R)+Ps(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,K,de,Be,it){for(var ht=Yu(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),de.angle,Be),xt=this.paint.get("circle-radius").evaluate(R,F)+this.paint.get("circle-stroke-width").evaluate(R,F),Lt=this.paint.get("circle-pitch-alignment")==="map",Ht=Lt?ht:function(pi,Ei){return pi.map(function(Ki){return Hl(Ki,Ei)})}(ht,it),ur=Lt?xt*Be:xt,pr=0,zr=z;pr<zr.length;pr+=1)for(var Or=0,qr=zr[pr];Or<qr.length;Or+=1){var on=qr[Or],gn=Lt?on:Hl(on,it),Tn=ur,Ln=dh([],[on.x,on.y,0,1],it);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Tn*=Ln[3]/de.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Tn*=de.cameraToCenterDistance/Ln[3]),Sl(Ht,gn,Tn))return!0}return!1},v}(mc));function Hl(h,v){var _=dh([],[h.x,h.y,0,1],v);return new Y(_[0]/_[3],_[1]/_[3])}var Pl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(Js);function Wl(h,v,_,R){var F=v.width,z=v.height;if(R){if(R instanceof Uint8ClampedArray)R=new Uint8Array(R.buffer);else if(R.length!==F*z*_)throw new RangeError("mismatched image size")}else R=new Uint8Array(F*z*_);return h.width=F,h.height=z,h.data=R,h}function Zh(h,v,_){var R=v.width,F=v.height;if(R!==h.width||F!==h.height){var z=Wl({},{width:R,height:F},_);wp(h,z,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,R),height:Math.min(h.height,F)},_),h.width=R,h.height=F,h.data=z.data}}function wp(h,v,_,R,F,z){if(F.width===0||F.height===0)return v;if(F.width>h.width||F.height>h.height||_.x>h.width-F.width||_.y>h.height-F.height)throw new RangeError("out of range source coordinates for image copy");if(F.width>v.width||F.height>v.height||R.x>v.width-F.width||R.y>v.height-F.height)throw new RangeError("out of range destination coordinates for image copy");for(var K=h.data,de=v.data,Be=0;Be<F.height;Be++)for(var it=((_.y+Be)*h.width+_.x)*z,ht=((R.y+Be)*v.width+R.x)*z,xt=0;xt<F.width*z;xt++)de[ht+xt]=K[it+xt];return v}Ni("HeatmapBucket",Pl,{omit:["layers"]});var tf=function(h,v){Wl(this,h,1,v)};tf.prototype.resize=function(h){Zh(this,h,1)},tf.prototype.clone=function(){return new tf({width:this.width,height:this.height},new Uint8Array(this.data))},tf.copy=function(h,v,_,R,F){wp(h,v,_,R,F,1)};var kl=function(h,v){Wl(this,h,4,v)};kl.prototype.resize=function(h){Zh(this,h,4)},kl.prototype.replace=function(h,v){v?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h},kl.prototype.clone=function(){return new kl({width:this.width,height:this.height},new Uint8Array(this.data))},kl.copy=function(h,v,_,R,F){wp(h,v,_,R,F,4)},Ni("AlphaImage",tf),Ni("RGBAImage",kl);var vg={paint:new Ss({"heatmap-radius":new wi(Rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wi(Rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ji(Rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ll(Rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ji(Rt.paint_heatmap["heatmap-opacity"])})};function wv(h){var v={},_=h.resolution||256,R=h.clips?h.clips.length:1,F=h.image||new kl({width:_,height:R}),z=function(ur,pr,zr){v[h.evaluationKey]=zr;var Or=h.expression.evaluate(v);F.data[ur+pr+0]=Math.floor(255*Or.r/Or.a),F.data[ur+pr+1]=Math.floor(255*Or.g/Or.a),F.data[ur+pr+2]=Math.floor(255*Or.b/Or.a),F.data[ur+pr+3]=Math.floor(255*Or.a)};if(h.clips)for(var K=0,de=0;K<R;++K,de+=4*_)for(var Be=0,it=0;Be<_;Be++,it+=4){var ht=Be/(_-1),xt=h.clips[K];z(de,it,xt.start*(1-ht)+xt.end*ht)}else for(var Lt=0,Ht=0;Lt<_;Lt++,Ht+=4)z(0,Ht,Lt/(_-1));return F}var bc=function(h){function v(_){h.call(this,_,vg),this._updateColorRamp()}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Pl(_)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=wv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(mc),g_={paint:new Ss({"hillshade-illumination-direction":new Ji(Rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ji(Rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ji(Rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ji(Rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ji(Rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ji(Rt.paint_hillshade["hillshade-accent-color"])})},b0=function(h){function v(_){h.call(this,_,g_)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(mc),S0=uu([{name:"a_pos",components:2,type:"Int16"}],4).members,Cv=Cp,E0=Cp;function Cp(h,v,_){_=_||2;var R,F,z,K,de,Be,it,ht=v&&v.length,xt=ht?v[0]*_:h.length,Lt=gg(h,0,xt,_,!0),Ht=[];if(!Lt||Lt.next===Lt.prev)return Ht;if(ht&&(Lt=function(pr,zr,Or,qr){var on,gn,Tn,Ln=[];for(on=0,gn=zr.length;on<gn;on++)(Tn=gg(pr,zr[on]*qr,on<gn-1?zr[on+1]*qr:pr.length,qr,!1))===Tn.next&&(Tn.steiner=!0),Ln.push(_g(Tn));for(Ln.sort(C0),on=0;on<Ln.length;on++)yg(Ln[on],Or),Or=Tp(Or,Or.next);return Or}(h,v,Lt,_)),h.length>80*_){R=z=h[0],F=K=h[1];for(var ur=_;ur<xt;ur+=_)(de=h[ur])<R&&(R=de),(Be=h[ur+1])<F&&(F=Be),de>z&&(z=de),Be>K&&(K=Be);it=(it=Math.max(z-R,K-F))!==0?1/it:0}return jd(Lt,Ht,_,R,F,it),Ht}function gg(h,v,_,R,F){var z,K;if(F===Sc(h,v,_,R)>0)for(z=v;z<_;z+=R)K=eu(z,h[z],h[z+1],K);else for(z=_-R;z>=v;z-=R)K=eu(z,h[z],h[z+1],K);return K&&Vh(K,K.next)&&($l(K),K=K.next),K}function Tp(h,v){if(!h)return h;v||(v=h);var _,R=h;do if(_=!1,R.steiner||!Vh(R,R.next)&&Cs(R.prev,R,R.next)!==0)R=R.next;else{if($l(R),(R=v=R.prev)===R.next)break;_=!0}while(_||R!==v);return v}function jd(h,v,_,R,F,z,K){if(h){!K&&z&&function(ht,xt,Lt,Ht){var ur=ht;do ur.z===null&&(ur.z=Hd(ur.x,ur.y,xt,Lt,Ht)),ur.prevZ=ur.prev,ur.nextZ=ur.next,ur=ur.next;while(ur!==ht);ur.prevZ.nextZ=null,ur.prevZ=null,function(pr){var zr,Or,qr,on,gn,Tn,Ln,pi,Ei=1;do{for(Or=pr,pr=null,gn=null,Tn=0;Or;){for(Tn++,qr=Or,Ln=0,zr=0;zr<Ei&&(Ln++,qr=qr.nextZ);zr++);for(pi=Ei;Ln>0||pi>0&&qr;)Ln!==0&&(pi===0||!qr||Or.z<=qr.z)?(on=Or,Or=Or.nextZ,Ln--):(on=qr,qr=qr.nextZ,pi--),gn?gn.nextZ=on:pr=on,on.prevZ=gn,gn=on;Or=qr}gn.nextZ=null,Ei*=2}while(Tn>1)}(ur)}(h,R,F,z);for(var de,Be,it=h;h.prev!==h.next;)if(de=h.prev,Be=h.next,z?Ap(h,R,F,z):dm(h))v.push(de.i/_),v.push(h.i/_),v.push(Be.i/_),$l(h),h=Be.next,it=Be.next;else if((h=Be)===it){K?K===1?jd(h=mg(Tp(h),v,_),v,_,R,F,z,2):K===2&&w0(h,v,_,R,F,z):jd(Tp(h),v,_,R,F,z,1);break}}}function dm(h){var v=h.prev,_=h,R=h.next;if(Cs(v,_,R)>=0)return!1;for(var F=h.next.next;F!==h.prev;){if(vh(v.x,v.y,_.x,_.y,R.x,R.y,F.x,F.y)&&Cs(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Ap(h,v,_,R){var F=h.prev,z=h,K=h.next;if(Cs(F,z,K)>=0)return!1;for(var de=F.x>z.x?F.x>K.x?F.x:K.x:z.x>K.x?z.x:K.x,Be=F.y>z.y?F.y>K.y?F.y:K.y:z.y>K.y?z.y:K.y,it=Hd(F.x<z.x?F.x<K.x?F.x:K.x:z.x<K.x?z.x:K.x,F.y<z.y?F.y<K.y?F.y:K.y:z.y<K.y?z.y:K.y,v,_,R),ht=Hd(de,Be,v,_,R),xt=h.prevZ,Lt=h.nextZ;xt&&xt.z>=it&&Lt&&Lt.z<=ht;){if(xt!==h.prev&&xt!==h.next&&vh(F.x,F.y,z.x,z.y,K.x,K.y,xt.x,xt.y)&&Cs(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Lt!==h.prev&&Lt!==h.next&&vh(F.x,F.y,z.x,z.y,K.x,K.y,Lt.x,Lt.y)&&Cs(Lt.prev,Lt,Lt.next)>=0))return!1;Lt=Lt.nextZ}for(;xt&&xt.z>=it;){if(xt!==h.prev&&xt!==h.next&&vh(F.x,F.y,z.x,z.y,K.x,K.y,xt.x,xt.y)&&Cs(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Lt&&Lt.z<=ht;){if(Lt!==h.prev&&Lt!==h.next&&vh(F.x,F.y,z.x,z.y,K.x,K.y,Lt.x,Lt.y)&&Cs(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.nextZ}return!0}function mg(h,v,_){var R=h;do{var F=R.prev,z=R.next.next;!Vh(F,z)&&Av(F,R,R.next,z)&&xf(F,z)&&xf(z,F)&&(v.push(F.i/_),v.push(R.i/_),v.push(z.i/_),$l(R),$l(R.next),R=h=z),R=R.next}while(R!==h);return Tp(R)}function w0(h,v,_,R,F,z){var K=h;do{for(var de=K.next.next;de!==K.prev;){if(K.i!==de.i&&Mp(K,de)){var Be=Wd(K,de);return K=Tp(K,K.next),Be=Tp(Be,Be.next),jd(K,v,_,R,F,z),void jd(Be,v,_,R,F,z)}de=de.next}K=K.next}while(K!==h)}function C0(h,v){return h.x-v.x}function yg(h,v){if(v=function(R,F){var z,K=F,de=R.x,Be=R.y,it=-1/0;do{if(Be<=K.y&&Be>=K.next.y&&K.next.y!==K.y){var ht=K.x+(Be-K.y)*(K.next.x-K.x)/(K.next.y-K.y);if(ht<=de&&ht>it){if(it=ht,ht===de){if(Be===K.y)return K;if(Be===K.next.y)return K.next}z=K.x<K.next.x?K:K.next}}K=K.next}while(K!==F);if(!z)return null;if(de===it)return z;var xt,Lt=z,Ht=z.x,ur=z.y,pr=1/0;K=z;do de>=K.x&&K.x>=Ht&&de!==K.x&&vh(Be<ur?de:it,Be,Ht,ur,Be<ur?it:de,Be,K.x,K.y)&&(xt=Math.abs(Be-K.y)/(de-K.x),xf(K,R)&&(xt<pr||xt===pr&&(K.x>z.x||K.x===z.x&&Tv(z,K)))&&(z=K,pr=xt)),K=K.next;while(K!==Lt);return z}(h,v)){var _=Wd(v,h);Tp(v,v.next),Tp(_,_.next)}}function Tv(h,v){return Cs(h.prev,h,v.prev)<0&&Cs(v.next,h,h.next)<0}function Hd(h,v,_,R,F){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-_)*F)|h<<8))|h<<4))|h<<2))|h<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-R)*F)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function _g(h){var v=h,_=h;do(v.x<_.x||v.x===_.x&&v.y<_.y)&&(_=v),v=v.next;while(v!==h);return _}function vh(h,v,_,R,F,z,K,de){return(F-K)*(v-de)-(h-K)*(z-de)>=0&&(h-K)*(R-de)-(_-K)*(v-de)>=0&&(_-K)*(z-de)-(F-K)*(R-de)>=0}function Mp(h,v){return h.next.i!==v.i&&h.prev.i!==v.i&&!function(_,R){var F=_;do{if(F.i!==_.i&&F.next.i!==_.i&&F.i!==R.i&&F.next.i!==R.i&&Av(F,F.next,_,R))return!0;F=F.next}while(F!==_);return!1}(h,v)&&(xf(h,v)&&xf(v,h)&&function(_,R){var F=_,z=!1,K=(_.x+R.x)/2,de=(_.y+R.y)/2;do F.y>de!=F.next.y>de&&F.next.y!==F.y&&K<(F.next.x-F.x)*(de-F.y)/(F.next.y-F.y)+F.x&&(z=!z),F=F.next;while(F!==_);return z}(h,v)&&(Cs(h.prev,h,v.prev)||Cs(h,v.prev,v))||Vh(h,v)&&Cs(h.prev,h,h.next)>0&&Cs(v.prev,v,v.next)>0)}function Cs(h,v,_){return(v.y-h.y)*(_.x-v.x)-(v.x-h.x)*(_.y-v.y)}function Vh(h,v){return h.x===v.x&&h.y===v.y}function Av(h,v,_,R){var F=Jn(Cs(h,v,_)),z=Jn(Cs(h,v,R)),K=Jn(Cs(_,R,h)),de=Jn(Cs(_,R,v));return F!==z&&K!==de||!(F!==0||!Gl(h,_,v))||!(z!==0||!Gl(h,R,v))||!(K!==0||!Gl(_,h,R))||!(de!==0||!Gl(_,v,R))}function Gl(h,v,_){return v.x<=Math.max(h.x,_.x)&&v.x>=Math.min(h.x,_.x)&&v.y<=Math.max(h.y,_.y)&&v.y>=Math.min(h.y,_.y)}function Jn(h){return h>0?1:h<0?-1:0}function xf(h,v){return Cs(h.prev,h,h.next)<0?Cs(h,v,h.next)>=0&&Cs(h,h.prev,v)>=0:Cs(h,v,h.prev)<0||Cs(h,h.next,v)<0}function Wd(h,v){var _=new bf(h.i,h.x,h.y),R=new bf(v.i,v.x,v.y),F=h.next,z=v.prev;return h.next=v,v.prev=h,_.next=F,F.prev=_,R.next=_,_.prev=R,z.next=R,R.prev=z,R}function eu(h,v,_,R){var F=new bf(h,v,_);return R?(F.next=R.next,F.prev=R,R.next.prev=F,R.next=F):(F.prev=F,F.next=F),F}function $l(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function bf(h,v,_){this.i=h,this.x=v,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sc(h,v,_,R){for(var F=0,z=v,K=_-R;z<_;z+=R)F+=(h[K]-h[z])*(h[z+1]+h[K+1]),K=z;return F}function gh(h,v,_,R,F){(function z(K,de,Be,it,ht){for(;it>Be;){if(it-Be>600){var xt=it-Be+1,Lt=de-Be+1,Ht=Math.log(xt),ur=.5*Math.exp(2*Ht/3),pr=.5*Math.sqrt(Ht*ur*(xt-ur)/xt)*(Lt-xt/2<0?-1:1);z(K,de,Math.max(Be,Math.floor(de-Lt*ur/xt+pr)),Math.min(it,Math.floor(de+(xt-Lt)*ur/xt+pr)),ht)}var zr=K[de],Or=Be,qr=it;for(Xl(K,Be,de),ht(K[it],zr)>0&&Xl(K,Be,it);Or<qr;){for(Xl(K,Or,qr),Or++,qr--;ht(K[Or],zr)<0;)Or++;for(;ht(K[qr],zr)>0;)qr--}ht(K[Be],zr)===0?Xl(K,Be,qr):Xl(K,++qr,it),qr<=de&&(Be=qr+1),de<=qr&&(it=qr-1)}})(h,v,_||0,R||h.length-1,F||mh)}function Xl(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}function mh(h,v){return h<v?-1:h>v?1:0}function xg(h,v){var _=h.length;if(_<=1)return[h];for(var R,F,z=[],K=0;K<_;K++){var de=yt(h[K]);de!==0&&(h[K].area=Math.abs(de),F===void 0&&(F=de<0),F===de<0?(R&&z.push(R),R=[h[K]]):R.push(h[K]))}if(R&&z.push(R),v>1)for(var Be=0;Be<z.length;Be++)z[Be].length<=v||(gh(z[Be],v,1,z[Be].length-1,bg),z[Be]=z[Be].slice(0,v));return z}function bg(h,v){return v.area-h.area}function Gd(h,v,_){for(var R=_.patternDependencies,F=!1,z=0,K=v;z<K.length;z+=1){var de=K[z].paint.get(h+"-pattern");de.isConstant()||(F=!0);var Be=de.constantOr(null);Be&&(F=!0,R[Be.to]=!0,R[Be.from]=!0)}return F}function ad(h,v,_,R,F){for(var z=F.patternDependencies,K=0,de=v;K<de.length;K+=1){var Be=de[K],it=Be.paint.get(h+"-pattern").value;if(it.kind!=="constant"){var ht=it.evaluate({zoom:R-1},_,{},F.availableImages),xt=it.evaluate({zoom:R},_,{},F.availableImages),Lt=it.evaluate({zoom:R+1},_,{},F.availableImages);xt=xt&&xt.name?xt.name:xt,Lt=Lt&&Lt.name?Lt.name:Lt,z[ht=ht&&ht.name?ht.name:ht]=!0,z[xt]=!0,z[Lt]=!0,_.patterns[Be.id]={min:ht,mid:xt,max:Lt}}}return _}Cp.deviation=function(h,v,_,R){var F=v&&v.length,z=Math.abs(Sc(h,0,F?v[0]*_:h.length,_));if(F)for(var K=0,de=v.length;K<de;K++)z-=Math.abs(Sc(h,v[K]*_,K<de-1?v[K+1]*_:h.length,_));var Be=0;for(K=0;K<R.length;K+=3){var it=R[K]*_,ht=R[K+1]*_,xt=R[K+2]*_;Be+=Math.abs((h[it]-h[xt])*(h[ht+1]-h[it+1])-(h[it]-h[ht])*(h[xt+1]-h[it+1]))}return z===0&&Be===0?0:Math.abs((Be-z)/z)},Cp.flatten=function(h){for(var v=h[0][0].length,_={vertices:[],holes:[],dimensions:v},R=0,F=0;F<h.length;F++){for(var z=0;z<h[F].length;z++)for(var K=0;K<v;K++)_.vertices.push(h[F][z][K]);F>0&&_.holes.push(R+=h[F-1].length)}return _},Cv.default=E0;var Bc=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bh,this.indexArray=new Ve,this.indexArray2=new Nf,this.programConfigurations=new ga(h.layers,h.zoom),this.segments=new Xt,this.segments2=new Xt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};Bc.prototype.populate=function(h,v,_){this.hasPattern=Gd("fill",this.layers,v);for(var R=this.layers[0].layout.get("fill-sort-key"),F=[],z=0,K=h;z<K.length;z+=1){var de=K[z],Be=de.feature,it=de.id,ht=de.index,xt=de.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ht=ws(Be,Lt);if(this.layers[0]._featureFilter.filter(new Ca(this.zoom),Ht,_)){var ur=R?R.evaluate(Ht,{},_,v.availableImages):void 0,pr={id:it,properties:Be.properties,type:Be.type,sourceLayerIndex:xt,index:ht,geometry:Lt?Ht.geometry:es(Be),patterns:{},sortKey:ur};F.push(pr)}}R&&F.sort(function(pi,Ei){return pi.sortKey-Ei.sortKey});for(var zr=0,Or=F;zr<Or.length;zr+=1){var qr=Or[zr],on=qr.geometry,gn=qr.index,Tn=qr.sourceLayerIndex;if(this.hasPattern){var Ln=ad("fill",this.layers,qr,this.zoom,v);this.patternFeatures.push(Ln)}else this.addFeature(qr,on,gn,_,{});v.featureIndex.insert(h[gn].feature,on,gn,Tn,this.index)}},Bc.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Bc.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},Bc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bc.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,S0),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0},Bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bc.prototype.addFeature=function(h,v,_,R,F){for(var z=0,K=xg(v,500);z<K.length;z+=1){for(var de=K[z],Be=0,it=0,ht=de;it<ht.length;it+=1)Be+=ht[it].length;for(var xt=this.segments.prepareSegment(Be,this.layoutVertexArray,this.indexArray),Lt=xt.vertexLength,Ht=[],ur=[],pr=0,zr=de;pr<zr.length;pr+=1){var Or=zr[pr];if(Or.length!==0){Or!==de[0]&&ur.push(Ht.length/2);var qr=this.segments2.prepareSegment(Or.length,this.layoutVertexArray,this.indexArray2),on=qr.vertexLength;this.layoutVertexArray.emplaceBack(Or[0].x,Or[0].y),this.indexArray2.emplaceBack(on+Or.length-1,on),Ht.push(Or[0].x),Ht.push(Or[0].y);for(var gn=1;gn<Or.length;gn++)this.layoutVertexArray.emplaceBack(Or[gn].x,Or[gn].y),this.indexArray2.emplaceBack(on+gn-1,on+gn),Ht.push(Or[gn].x),Ht.push(Or[gn].y);qr.vertexLength+=Or.length,qr.primitiveLength+=Or.length}}for(var Tn=Cv(Ht,ur),Ln=0;Ln<Tn.length;Ln+=3)this.indexArray.emplaceBack(Lt+Tn[Ln],Lt+Tn[Ln+1],Lt+Tn[Ln+2]);xt.vertexLength+=Be,xt.primitiveLength+=Tn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},Ni("FillBucket",Bc,{omit:["layers","patternFeatures"]});var jh=new Ss({"fill-sort-key":new wi(Rt.layout_fill["fill-sort-key"])}),$d={paint:new Ss({"fill-antialias":new Ji(Rt.paint_fill["fill-antialias"]),"fill-opacity":new wi(Rt.paint_fill["fill-opacity"]),"fill-color":new wi(Rt.paint_fill["fill-color"]),"fill-outline-color":new wi(Rt.paint_fill["fill-outline-color"]),"fill-translate":new Ji(Rt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ji(Rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ul(Rt.paint_fill["fill-pattern"])}),layout:jh},vm=function(h){function v(_){h.call(this,_,$d)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R);var F=this.paint._values["fill-outline-color"];F.value.kind==="constant"&&F.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(_){return new Bc(_)},v.prototype.queryRadius=function(){return Ps(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,K,de,Be){return oc(Yu(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),de.angle,Be),z)},v.prototype.isTileClipped=function(){return!0},v}(mc),Sg=uu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Mv=js;function js(h,v,_,R,F){this.properties={},this.extent=_,this.type=0,this._pbf=h,this._geometry=-1,this._keys=R,this._values=F,h.readFields(Zf,this,v)}function Zf(h,v,_){h==1?v.id=_.readVarint():h==2?function(R,F){for(var z=R.readVarint()+R.pos;R.pos<z;){var K=F._keys[R.readVarint()],de=F._values[R.readVarint()];F.properties[K]=de}}(_,v):h==3?v.type=_.readVarint():h==4&&(v._geometry=_.pos)}function rf(h){for(var v,_,R=0,F=0,z=h.length,K=z-1;F<z;K=F++)R+=((_=h[K]).x-(v=h[F]).x)*(v.y+_.y);return R}js.types=["Unknown","Point","LineString","Polygon"],js.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var v,_=h.readVarint()+h.pos,R=1,F=0,z=0,K=0,de=[];h.pos<_;){if(F<=0){var Be=h.readVarint();R=7&Be,F=Be>>3}if(F--,R===1||R===2)z+=h.readSVarint(),K+=h.readSVarint(),R===1&&(v&&de.push(v),v=[]),v.push(new Y(z,K));else{if(R!==7)throw new Error("unknown command "+R);v&&v.push(v[0].clone())}}return v&&de.push(v),de},js.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var v=h.readVarint()+h.pos,_=1,R=0,F=0,z=0,K=1/0,de=-1/0,Be=1/0,it=-1/0;h.pos<v;){if(R<=0){var ht=h.readVarint();_=7&ht,R=ht>>3}if(R--,_===1||_===2)(F+=h.readSVarint())<K&&(K=F),F>de&&(de=F),(z+=h.readSVarint())<Be&&(Be=z),z>it&&(it=z);else if(_!==7)throw new Error("unknown command "+_)}return[K,Be,de,it]},js.prototype.toGeoJSON=function(h,v,_){var R,F,z=this.extent*Math.pow(2,_),K=this.extent*h,de=this.extent*v,Be=this.loadGeometry(),it=js.types[this.type];function ht(Ht){for(var ur=0;ur<Ht.length;ur++){var pr=Ht[ur];Ht[ur]=[360*(pr.x+K)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(pr.y+de)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var xt=[];for(R=0;R<Be.length;R++)xt[R]=Be[R][0];ht(Be=xt);break;case 2:for(R=0;R<Be.length;R++)ht(Be[R]);break;case 3:for(Be=function(Ht){var ur=Ht.length;if(ur<=1)return[Ht];for(var pr,zr,Or=[],qr=0;qr<ur;qr++){var on=rf(Ht[qr]);on!==0&&(zr===void 0&&(zr=on<0),zr===on<0?(pr&&Or.push(pr),pr=[Ht[qr]]):pr.push(Ht[qr]))}return pr&&Or.push(pr),Or}(Be),R=0;R<Be.length;R++)for(F=0;F<Be[R].length;F++)ht(Be[R][F])}Be.length===1?Be=Be[0]:it="Multi"+it;var Lt={type:"Feature",geometry:{type:it,coordinates:Be},properties:this.properties};return"id"in this&&(Lt.id=this.id),Lt};var od=sd;function sd(h,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(Nc,this,v),this.length=this._features.length}function Nc(h,v,_){h===15?v.version=_.readVarint():h===1?v.name=_.readString():h===5?v.extent=_.readVarint():h===2?v._features.push(_.pos):h===3?v._keys.push(_.readString()):h===4&&v._values.push(function(R){for(var F=null,z=R.readVarint()+R.pos;R.pos<z;){var K=R.readVarint()>>3;F=K===1?R.readString():K===2?R.readFloat():K===3?R.readDouble():K===4?R.readVarint64():K===5?R.readVarint():K===6?R.readSVarint():K===7?R.readBoolean():null}return F}(_))}function Rp(h,v,_){if(h===3){var R=new od(_,_.readVarint()+_.pos);R.length&&(v[R.name]=R)}}sd.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var v=this._pbf.readVarint()+this._pbf.pos;return new Mv(this._pbf,v,this.extent,this._keys,this._values)};var Hh={VectorTile:function(h,v){this.layers=h.readFields(Rp,{},v)},VectorTileFeature:Mv,VectorTileLayer:od},Yl=Hh.VectorTileFeature.types,Sf=Math.pow(2,13);function ls(h,v,_,R,F,z,K,de){h.emplaceBack(v,_,2*Math.floor(R*Sf)+K,F*Sf*2,z*Sf*2,Math.round(de))}var cl=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new yc,this.indexArray=new Ve,this.programConfigurations=new ga(h.layers,h.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Xs(h,v){return h.x===v.x&&(h.x<0||h.x>8192)||h.y===v.y&&(h.y<0||h.y>8192)}cl.prototype.populate=function(h,v,_){this.features=[],this.hasPattern=Gd("fill-extrusion",this.layers,v);for(var R=0,F=h;R<F.length;R+=1){var z=F[R],K=z.feature,de=z.id,Be=z.index,it=z.sourceLayerIndex,ht=this.layers[0]._featureFilter.needGeometry,xt=ws(K,ht);if(this.layers[0]._featureFilter.filter(new Ca(this.zoom),xt,_)){var Lt={id:de,sourceLayerIndex:it,index:Be,geometry:ht?xt.geometry:es(K),properties:K.properties,type:K.type,patterns:{}};this.hasPattern?this.features.push(ad("fill-extrusion",this.layers,Lt,this.zoom,v)):this.addFeature(Lt,Lt.geometry,Be,_,{}),v.featureIndex.insert(K,Lt.geometry,Be,it,this.index,!0)}}},cl.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.features;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},cl.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},cl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},cl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cl.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Sg),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cl.prototype.addFeature=function(h,v,_,R,F){for(var z=0,K=xg(v,500);z<K.length;z+=1){for(var de=K[z],Be=0,it=0,ht=de;it<ht.length;it+=1)Be+=ht[it].length;for(var xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Lt=0,Ht=de;Lt<Ht.length;Lt+=1){var ur=Ht[Lt];if(ur.length!==0&&!((mo=ur).every(function(Wa){return Wa.x<0})||mo.every(function(Wa){return Wa.x>8192})||mo.every(function(Wa){return Wa.y<0})||mo.every(function(Wa){return Wa.y>8192})))for(var pr=0,zr=0;zr<ur.length;zr++){var Or=ur[zr];if(zr>=1){var qr=ur[zr-1];if(!Xs(Or,qr)){xt.vertexLength+4>Xt.MAX_VERTEX_ARRAY_LENGTH&&(xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var on=Or.sub(qr)._perp()._unit(),gn=qr.dist(Or);pr+gn>32768&&(pr=0),ls(this.layoutVertexArray,Or.x,Or.y,on.x,on.y,0,0,pr),ls(this.layoutVertexArray,Or.x,Or.y,on.x,on.y,0,1,pr),ls(this.layoutVertexArray,qr.x,qr.y,on.x,on.y,0,0,pr+=gn),ls(this.layoutVertexArray,qr.x,qr.y,on.x,on.y,0,1,pr);var Tn=xt.vertexLength;this.indexArray.emplaceBack(Tn,Tn+2,Tn+1),this.indexArray.emplaceBack(Tn+1,Tn+2,Tn+3),xt.vertexLength+=4,xt.primitiveLength+=2}}}}if(xt.vertexLength+Be>Xt.MAX_VERTEX_ARRAY_LENGTH&&(xt=this.segments.prepareSegment(Be,this.layoutVertexArray,this.indexArray)),Yl[h.type]==="Polygon"){for(var Ln=[],pi=[],Ei=xt.vertexLength,Ki=0,Di=de;Ki<Di.length;Ki+=1){var ia=Di[Ki];if(ia.length!==0){ia!==de[0]&&pi.push(Ln.length/2);for(var Oi=0;Oi<ia.length;Oi++){var ro=ia[Oi];ls(this.layoutVertexArray,ro.x,ro.y,0,0,1,1,0),Ln.push(ro.x),Ln.push(ro.y)}}}for(var Yi=Cv(Ln,pi),$i=0;$i<Yi.length;$i+=3)this.indexArray.emplaceBack(Ei+Yi[$i],Ei+Yi[$i+2],Ei+Yi[$i+1]);xt.primitiveLength+=Yi.length/3,xt.vertexLength+=Be}}var mo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},Ni("FillExtrusionBucket",cl,{omit:["layers","features"]});var El={paint:new Ss({"fill-extrusion-opacity":new Ji(Rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wi(Rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ji(Rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ji(Rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ul(Rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wi(Rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wi(Rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ji(Rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},gm=function(h){function v(_){h.call(this,_,El)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new cl(_)},v.prototype.queryRadius=function(){return Ps(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(_,R,F,z,K,de,Be,it){var ht=Yu(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),de.angle,Be),xt=this.paint.get("fill-extrusion-height").evaluate(R,F),Lt=this.paint.get("fill-extrusion-base").evaluate(R,F),Ht=function(pr,zr,Or,qr){for(var on=[],gn=0,Tn=pr;gn<Tn.length;gn+=1){var Ln=Tn[gn],pi=[Ln.x,Ln.y,0,1];dh(pi,pi,zr),on.push(new Y(pi[0]/pi[3],pi[1]/pi[3]))}return on}(ht,it),ur=function(pr,zr,Or,qr){for(var on=[],gn=[],Tn=qr[8]*zr,Ln=qr[9]*zr,pi=qr[10]*zr,Ei=qr[11]*zr,Ki=qr[8]*Or,Di=qr[9]*Or,ia=qr[10]*Or,Oi=qr[11]*Or,ro=0,Yi=pr;ro<Yi.length;ro+=1){for(var $i=[],mo=[],Wa=0,no=Yi[ro];Wa<no.length;Wa+=1){var xi=no[Wa],Uo=xi.x,ts=xi.y,qs=qr[0]*Uo+qr[4]*ts+qr[12],gs=qr[1]*Uo+qr[5]*ts+qr[13],Ds=qr[2]*Uo+qr[6]*ts+qr[14],fu=qr[3]*Uo+qr[7]*ts+qr[15],Ls=Ds+pi,yu=fu+Ei,Qu=qs+Ki,Ju=gs+Di,fl=Ds+ia,Ou=fu+Oi,el=new Y((qs+Tn)/yu,(gs+Ln)/yu);el.z=Ls/yu,$i.push(el);var qa=new Y(Qu/Ou,Ju/Ou);qa.z=fl/Ou,mo.push(qa)}on.push($i),gn.push(mo)}return[on,gn]}(z,Lt,xt,it);return function(pr,zr,Or){var qr=1/0;oc(Or,zr)&&(qr=mm(Or,zr[0]));for(var on=0;on<zr.length;on++)for(var gn=zr[on],Tn=pr[on],Ln=0;Ln<gn.length-1;Ln++){var pi=gn[Ln],Ei=[pi,gn[Ln+1],Tn[Ln+1],Tn[Ln],pi];Jc(Or,Ei)&&(qr=Math.min(qr,mm(Or,Ei)))}return qr!==1/0&&qr}(ur[0],ur[1],Ht)},v}(mc);function Wh(h,v){return h.x*v.x+h.y*v.y}function mm(h,v){if(h.length===1){for(var _,R=0,F=v[R++];!_||F.equals(_);)if(!(_=v[R++]))return 1/0;for(;R<v.length;R++){var z=v[R],K=h[0],de=_.sub(F),Be=z.sub(F),it=K.sub(F),ht=Wh(de,de),xt=Wh(de,Be),Lt=Wh(Be,Be),Ht=Wh(it,de),ur=Wh(it,Be),pr=ht*Lt-xt*xt,zr=(Lt*Ht-xt*ur)/pr,Or=(ht*ur-xt*Ht)/pr,qr=F.z*(1-zr-Or)+_.z*zr+z.z*Or;if(isFinite(qr))return qr}return 1/0}for(var on=1/0,gn=0,Tn=v;gn<Tn.length;gn+=1)on=Math.min(on,Tn[gn].z);return on}var Xd=uu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Rv=uu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Iv=Hh.VectorTileFeature.types,ym=Math.cos(Math.PI/180*37.5),_m=Math.pow(2,14)/.5,wl=function(h){var v=this;this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(_){v.gradients[_.id]={}}),this.layoutVertexArray=new Ma,this.layoutVertexArray2=new Nh,this.indexArray=new Ve,this.programConfigurations=new ga(h.layers,h.zoom),this.segments=new Xt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id})};wl.prototype.populate=function(h,v,_){this.hasPattern=Gd("line",this.layers,v);for(var R=this.layers[0].layout.get("line-sort-key"),F=[],z=0,K=h;z<K.length;z+=1){var de=K[z],Be=de.feature,it=de.id,ht=de.index,xt=de.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ht=ws(Be,Lt);if(this.layers[0]._featureFilter.filter(new Ca(this.zoom),Ht,_)){var ur=R?R.evaluate(Ht,{},_):void 0,pr={id:it,properties:Be.properties,type:Be.type,sourceLayerIndex:xt,index:ht,geometry:Lt?Ht.geometry:es(Be),patterns:{},sortKey:ur};F.push(pr)}}R&&F.sort(function(pi,Ei){return pi.sortKey-Ei.sortKey});for(var zr=0,Or=F;zr<Or.length;zr+=1){var qr=Or[zr],on=qr.geometry,gn=qr.index,Tn=qr.sourceLayerIndex;if(this.hasPattern){var Ln=ad("line",this.layers,qr,this.zoom,v);this.patternFeatures.push(Ln)}else this.addFeature(qr,on,gn,_,{});v.featureIndex.insert(h[gn].feature,on,gn,Tn,this.index)}},wl.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},wl.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},wl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wl.prototype.upload=function(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,Rv)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Xd),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},wl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wl.prototype.lineFeatureClips=function(h){if(h.properties&&h.properties.hasOwnProperty("mapbox_clip_start")&&h.properties.hasOwnProperty("mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}},wl.prototype.addFeature=function(h,v,_,R,F){var z=this.layers[0].layout,K=z.get("line-join").evaluate(h,{}),de=z.get("line-cap"),Be=z.get("line-miter-limit"),it=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(var ht=0,xt=v;ht<xt.length;ht+=1)this.addLine(xt[ht],h,K,de,Be,it);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},wl.prototype.addLine=function(h,v,_,R,F,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var K=0;K<h.length-1;K++)this.totalDistance+=h[K].dist(h[K+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var de=Iv[v.type]==="Polygon",Be=h.length;Be>=2&&h[Be-1].equals(h[Be-2]);)Be--;for(var it=0;it<Be-1&&h[it].equals(h[it+1]);)it++;if(!(Be<(de?3:2))){_==="bevel"&&(F=1.05);var ht,xt=this.overscaling<=16?122880/(512*this.overscaling):0,Lt=this.segments.prepareSegment(10*Be,this.layoutVertexArray,this.indexArray),Ht=void 0,ur=void 0,pr=void 0,zr=void 0;this.e1=this.e2=-1,de&&(zr=h[it].sub(ht=h[Be-2])._unit()._perp());for(var Or=it;Or<Be;Or++)if(!(ur=Or===Be-1?de?h[it+1]:void 0:h[Or+1])||!h[Or].equals(ur)){zr&&(pr=zr),ht&&(Ht=ht),ht=h[Or],zr=ur?ur.sub(ht)._unit()._perp():pr;var qr=(pr=pr||zr).add(zr);qr.x===0&&qr.y===0||qr._unit();var on=pr.x*zr.x+pr.y*zr.y,gn=qr.x*zr.x+qr.y*zr.y,Tn=gn!==0?1/gn:1/0,Ln=2*Math.sqrt(2-2*gn),pi=gn<ym&&Ht&&ur,Ei=pr.x*zr.y-pr.y*zr.x>0;if(pi&&Or>it){var Ki=ht.dist(Ht);if(Ki>2*xt){var Di=ht.sub(ht.sub(Ht)._mult(xt/Ki)._round());this.updateDistance(Ht,Di),this.addCurrentVertex(Di,pr,0,0,Lt),Ht=Di}}var ia=Ht&&ur,Oi=ia?_:de?"butt":R;if(ia&&Oi==="round"&&(Tn<z?Oi="miter":Tn<=2&&(Oi="fakeround")),Oi==="miter"&&Tn>F&&(Oi="bevel"),Oi==="bevel"&&(Tn>2&&(Oi="flipbevel"),Tn<F&&(Oi="miter")),Ht&&this.updateDistance(Ht,ht),Oi==="miter")qr._mult(Tn),this.addCurrentVertex(ht,qr,0,0,Lt);else if(Oi==="flipbevel"){if(Tn>100)qr=zr.mult(-1);else{var ro=Tn*pr.add(zr).mag()/pr.sub(zr).mag();qr._perp()._mult(ro*(Ei?-1:1))}this.addCurrentVertex(ht,qr,0,0,Lt),this.addCurrentVertex(ht,qr.mult(-1),0,0,Lt)}else if(Oi==="bevel"||Oi==="fakeround"){var Yi=-Math.sqrt(Tn*Tn-1),$i=Ei?Yi:0,mo=Ei?0:Yi;if(Ht&&this.addCurrentVertex(ht,pr,$i,mo,Lt),Oi==="fakeround")for(var Wa=Math.round(180*Ln/Math.PI/20),no=1;no<Wa;no++){var xi=no/Wa;if(xi!==.5){var Uo=xi-.5;xi+=xi*Uo*(xi-1)*((1.0904+on*(on*(3.55645-1.43519*on)-3.2452))*Uo*Uo+(.848013+on*(.215638*on-1.06021)))}var ts=zr.sub(pr)._mult(xi)._add(pr)._unit()._mult(Ei?-1:1);this.addHalfVertex(ht,ts.x,ts.y,!1,Ei,0,Lt)}ur&&this.addCurrentVertex(ht,zr,-$i,-mo,Lt)}else if(Oi==="butt")this.addCurrentVertex(ht,qr,0,0,Lt);else if(Oi==="square"){var qs=Ht?1:-1;this.addCurrentVertex(ht,qr,qs,qs,Lt)}else Oi==="round"&&(Ht&&(this.addCurrentVertex(ht,pr,0,0,Lt),this.addCurrentVertex(ht,pr,1,1,Lt,!0)),ur&&(this.addCurrentVertex(ht,zr,-1,-1,Lt,!0),this.addCurrentVertex(ht,zr,0,0,Lt)));if(pi&&Or<Be-1){var gs=ht.dist(ur);if(gs>2*xt){var Ds=ht.add(ur.sub(ht)._mult(xt/gs)._round());this.updateDistance(ht,Ds),this.addCurrentVertex(Ds,zr,0,0,Lt),ht=Ds}}}}},wl.prototype.addCurrentVertex=function(h,v,_,R,F,z){z===void 0&&(z=!1);var K=v.y*R-v.x,de=-v.y-v.x*R;this.addHalfVertex(h,v.x+v.y*_,v.y-v.x*_,z,!1,_,F),this.addHalfVertex(h,K,de,z,!0,-R,F),this.distance>_m/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,v,_,R,F,z))},wl.prototype.addHalfVertex=function(h,v,_,R,F,z,K){var de=.5*(this.lineClips?this.scaledDistance*(_m-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h.x<<1)+(R?1:0),(h.y<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*_)+128,1+(z===0?0:z<0?-1:1)|(63&de)<<2,de>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Be=K.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Be),K.primitiveLength++),F?this.e2=Be:this.e1=Be},wl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},wl.prototype.updateDistance=function(h,v){this.distance+=h.dist(v),this.updateScaledDistance()},Ni("LineBucket",wl,{omit:["layers","patternFeatures"]});var T0=new Ss({"line-cap":new Ji(Rt.layout_line["line-cap"]),"line-join":new wi(Rt.layout_line["line-join"]),"line-miter-limit":new Ji(Rt.layout_line["line-miter-limit"]),"line-round-limit":new Ji(Rt.layout_line["line-round-limit"]),"line-sort-key":new wi(Rt.layout_line["line-sort-key"])}),xm={paint:new Ss({"line-opacity":new wi(Rt.paint_line["line-opacity"]),"line-color":new wi(Rt.paint_line["line-color"]),"line-translate":new Ji(Rt.paint_line["line-translate"]),"line-translate-anchor":new Ji(Rt.paint_line["line-translate-anchor"]),"line-width":new wi(Rt.paint_line["line-width"]),"line-gap-width":new wi(Rt.paint_line["line-gap-width"]),"line-offset":new wi(Rt.paint_line["line-offset"]),"line-blur":new wi(Rt.paint_line["line-blur"]),"line-dasharray":new bl(Rt.paint_line["line-dasharray"]),"line-pattern":new ul(Rt.paint_line["line-pattern"]),"line-gradient":new ll(Rt.paint_line["line-gradient"])}),layout:T0},yh=new(function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R){return R=new Ca(Math.floor(R.zoom),{now:R.now,fadeDuration:R.fadeDuration,zoomHistory:R.zoomHistory,transition:R.transition}),h.prototype.possiblyEvaluate.call(this,_,R)},v.prototype.evaluate=function(_,R,F,z){return R=b({},R,{zoom:Math.floor(R.zoom)}),h.prototype.evaluate.call(this,_,R,F,z)},v}(wi))(xm.paint.properties["line-width"].specification);yh.useIntegerZoom=!0;var Eg=function(h){function v(_){h.call(this,_,xm),this.gradientVersion=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ms,this.gradientVersion=(this.gradientVersion+1)%ye)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R),this.paint._values["line-floorwidth"]=yh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},v.prototype.createBucket=function(_){return new wl(_)},v.prototype.queryRadius=function(_){var R=_,F=Ip(Au("line-width",this,R),Au("line-gap-width",this,R)),z=Au("line-offset",this,R);return F/2+Math.abs(z)+Ps(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,K,de,Be){var it=Yu(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),de.angle,Be),ht=Be/2*Ip(this.paint.get("line-width").evaluate(R,F),this.paint.get("line-gap-width").evaluate(R,F)),xt=this.paint.get("line-offset").evaluate(R,F);return xt&&(z=function(Lt,Ht){for(var ur=[],pr=new Y(0,0),zr=0;zr<Lt.length;zr++){for(var Or=Lt[zr],qr=[],on=0;on<Or.length;on++){var gn=Or[on],Tn=Or[on+1],Ln=on===0?pr:gn.sub(Or[on-1])._unit()._perp(),pi=on===Or.length-1?pr:Tn.sub(gn)._unit()._perp(),Ei=Ln._add(pi)._unit();Ei._mult(1/(Ei.x*pi.x+Ei.y*pi.y)),qr.push(Ei._mult(Ht)._add(gn))}ur.push(qr)}return ur}(z,xt*Be)),function(Lt,Ht,ur){for(var pr=0;pr<Ht.length;pr++){var zr=Ht[pr];if(Lt.length>=3){for(var Or=0;Or<zr.length;Or++)if(Vl(Lt,zr[Or]))return!0}if(Zl(Lt,zr,ur))return!0}return!1}(it,z,ht)},v.prototype.isTileClipped=function(){return!0},v}(mc);function Ip(h,v){return v>0?v+2*h:h}var A0=uu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wg=uu([{name:"a_projected_pos",components:3,type:"Float32"}],4),Yd=(uu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),uu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ov=(uu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),uu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ot=uu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tr(h,v,_){return h.sections.forEach(function(R){R.text=function(F,z,K){var de=z.layout.get("text-transform").evaluate(K,{});return de==="uppercase"?F=F.toLocaleUpperCase():de==="lowercase"&&(F=F.toLocaleLowerCase()),ac.applyArabicShaping&&(F=ac.applyArabicShaping(F)),F}(R.text,v,_)}),h}uu([{name:"triangle",components:3,type:"Uint16"}]),uu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),uu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),uu([{type:"Float32",name:"offsetX"}]),uu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ar={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},vn=function(h,v,_,R,F){var z,K,de=8*F-R-1,Be=(1<<de)-1,it=Be>>1,ht=-7,xt=_?F-1:0,Lt=_?-1:1,Ht=h[v+xt];for(xt+=Lt,z=Ht&(1<<-ht)-1,Ht>>=-ht,ht+=de;ht>0;z=256*z+h[v+xt],xt+=Lt,ht-=8);for(K=z&(1<<-ht)-1,z>>=-ht,ht+=R;ht>0;K=256*K+h[v+xt],xt+=Lt,ht-=8);if(z===0)z=1-it;else{if(z===Be)return K?NaN:1/0*(Ht?-1:1);K+=Math.pow(2,R),z-=it}return(Ht?-1:1)*K*Math.pow(2,z-R)},kn=function(h,v,_,R,F,z){var K,de,Be,it=8*z-F-1,ht=(1<<it)-1,xt=ht>>1,Lt=F===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ht=R?0:z-1,ur=R?1:-1,pr=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(de=isNaN(v)?1:0,K=ht):(K=Math.floor(Math.log(v)/Math.LN2),v*(Be=Math.pow(2,-K))<1&&(K--,Be*=2),(v+=K+xt>=1?Lt/Be:Lt*Math.pow(2,1-xt))*Be>=2&&(K++,Be/=2),K+xt>=ht?(de=0,K=ht):K+xt>=1?(de=(v*Be-1)*Math.pow(2,F),K+=xt):(de=v*Math.pow(2,xt-1)*Math.pow(2,F),K=0));F>=8;h[_+Ht]=255&de,Ht+=ur,de/=256,F-=8);for(K=K<<F|de,it+=F;it>0;h[_+Ht]=255&K,Ht+=ur,K/=256,it-=8);h[_+Ht-ur]|=128*pr},fn=un;function un(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}un.Varint=0,un.Fixed64=1,un.Bytes=2,un.Fixed32=5;var ai=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Wn(h){return h.type===un.Bytes?h.readVarint()+h.pos:h.pos+1}function vi(h,v,_){return _?4294967296*v+(h>>>0):4294967296*(v>>>0)+(h>>>0)}function oi(h,v,_){var R=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));_.realloc(R);for(var F=_.pos-1;F>=h;F--)_.buf[F+R]=_.buf[F]}function fi(h,v){for(var _=0;_<h.length;_++)v.writeVarint(h[_])}function bi(h,v){for(var _=0;_<h.length;_++)v.writeSVarint(h[_])}function Mn(h,v){for(var _=0;_<h.length;_++)v.writeFloat(h[_])}function mi(h,v){for(var _=0;_<h.length;_++)v.writeDouble(h[_])}function Qr(h,v){for(var _=0;_<h.length;_++)v.writeBoolean(h[_])}function En(h,v){for(var _=0;_<h.length;_++)v.writeFixed32(h[_])}function si(h,v){for(var _=0;_<h.length;_++)v.writeSFixed32(h[_])}function Ti(h,v){for(var _=0;_<h.length;_++)v.writeFixed64(h[_])}function Kr(h,v){for(var _=0;_<h.length;_++)v.writeSFixed64(h[_])}function Pi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+16777216*h[v+3]}function ni(h,v,_){h[_]=v,h[_+1]=v>>>8,h[_+2]=v>>>16,h[_+3]=v>>>24}function Mi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+(h[v+3]<<24)}function Un(h,v,_){h===1&&_.readMessage(Si,v)}function Si(h,v,_){if(h===3){var R=_.readMessage(ca,{}),F=R.width,z=R.height,K=R.left,de=R.top,Be=R.advance;v.push({id:R.id,bitmap:new tf({width:F+6,height:z+6},R.bitmap),metrics:{width:F,height:z,left:K,top:de,advance:Be}})}}function ca(h,v,_){h===1?v.id=_.readVarint():h===2?v.bitmap=_.readBytes():h===3?v.width=_.readVarint():h===4?v.height=_.readVarint():h===5?v.left=_.readSVarint():h===6?v.top=_.readSVarint():h===7&&(v.advance=_.readVarint())}function Ra(h){for(var v=0,_=0,R=0,F=h;R<F.length;R+=1){var z=F[R];v+=z.w*z.h,_=Math.max(_,z.w)}h.sort(function(pr,zr){return zr.h-pr.h});for(var K=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),_),h:1/0}],de=0,Be=0,it=0,ht=h;it<ht.length;it+=1)for(var xt=ht[it],Lt=K.length-1;Lt>=0;Lt--){var Ht=K[Lt];if(!(xt.w>Ht.w||xt.h>Ht.h)){if(xt.x=Ht.x,xt.y=Ht.y,Be=Math.max(Be,xt.y+xt.h),de=Math.max(de,xt.x+xt.w),xt.w===Ht.w&&xt.h===Ht.h){var ur=K.pop();Lt<K.length&&(K[Lt]=ur)}else xt.h===Ht.h?(Ht.x+=xt.w,Ht.w-=xt.w):xt.w===Ht.w?(Ht.y+=xt.h,Ht.h-=xt.h):(K.push({x:Ht.x+xt.w,y:Ht.y,w:Ht.w-xt.w,h:xt.h}),Ht.y+=xt.h,Ht.h-=xt.h);break}}return{w:de,h:Be,fill:v/(de*Be)||0}}un.prototype={destroy:function(){this.buf=null},readFields:function(h,v,_){for(_=_||this.length;this.pos<_;){var R=this.readVarint(),F=R>>3,z=this.pos;this.type=7&R,h(F,v,this),this.pos===z&&this.skip(R)}return v},readMessage:function(h,v){return this.readFields(h,v,this.readVarint()+this.pos)},readFixed32:function(){var h=Pi(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=Mi(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Pi(this.buf,this.pos)+4294967296*Pi(this.buf,this.pos+4);return this.pos+=8,h},readSFixed64:function(){var h=Pi(this.buf,this.pos)+4294967296*Mi(this.buf,this.pos+4);return this.pos+=8,h},readFloat:function(){var h=vn(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=vn(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var v,_,R=this.buf;return v=127&(_=R[this.pos++]),_<128?v:(v|=(127&(_=R[this.pos++]))<<7,_<128?v:(v|=(127&(_=R[this.pos++]))<<14,_<128?v:(v|=(127&(_=R[this.pos++]))<<21,_<128?v:function(F,z,K){var de,Be,it=K.buf;if(de=(112&(Be=it[K.pos++]))>>4,Be<128||(de|=(127&(Be=it[K.pos++]))<<3,Be<128)||(de|=(127&(Be=it[K.pos++]))<<10,Be<128)||(de|=(127&(Be=it[K.pos++]))<<17,Be<128)||(de|=(127&(Be=it[K.pos++]))<<24,Be<128)||(de|=(1&(Be=it[K.pos++]))<<31,Be<128))return vi(F,de,z);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(_=R[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,v=this.pos;return this.pos=h,h-v>=12&&ai?function(_,R,F){return ai.decode(_.subarray(R,F))}(this.buf,v,h):function(_,R,F){for(var z="",K=R;K<F;){var de,Be,it,ht=_[K],xt=null,Lt=ht>239?4:ht>223?3:ht>191?2:1;if(K+Lt>F)break;Lt===1?ht<128&&(xt=ht):Lt===2?(192&(de=_[K+1]))==128&&(xt=(31&ht)<<6|63&de)<=127&&(xt=null):Lt===3?(Be=_[K+2],(192&(de=_[K+1]))==128&&(192&Be)==128&&((xt=(15&ht)<<12|(63&de)<<6|63&Be)<=2047||xt>=55296&&xt<=57343)&&(xt=null)):Lt===4&&(Be=_[K+2],it=_[K+3],(192&(de=_[K+1]))==128&&(192&Be)==128&&(192&it)==128&&((xt=(15&ht)<<18|(63&de)<<12|(63&Be)<<6|63&it)<=65535||xt>=1114112)&&(xt=null)),xt===null?(xt=65533,Lt=1):xt>65535&&(xt-=65536,z+=String.fromCharCode(xt>>>10&1023|55296),xt=56320|1023&xt),z+=String.fromCharCode(xt),K+=Lt}return z}(this.buf,v,h)},readBytes:function(){var h=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,h);return this.pos=h,v},readPackedVarint:function(h,v){if(this.type!==un.Bytes)return h.push(this.readVarint(v));var _=Wn(this);for(h=h||[];this.pos<_;)h.push(this.readVarint(v));return h},readPackedSVarint:function(h){if(this.type!==un.Bytes)return h.push(this.readSVarint());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==un.Bytes)return h.push(this.readBoolean());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==un.Bytes)return h.push(this.readFloat());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==un.Bytes)return h.push(this.readDouble());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==un.Bytes)return h.push(this.readFixed32());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==un.Bytes)return h.push(this.readSFixed32());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==un.Bytes)return h.push(this.readFixed64());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==un.Bytes)return h.push(this.readSFixed64());var v=Wn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed64());return h},skip:function(h){var v=7&h;if(v===un.Varint)for(;this.buf[this.pos++]>127;);else if(v===un.Bytes)this.pos=this.readVarint()+this.pos;else if(v===un.Fixed32)this.pos+=4;else{if(v!==un.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(h,v){this.writeVarint(h<<3|v)},realloc:function(h){for(var v=this.length||16;v<this.pos+h;)v*=2;if(v!==this.length){var _=new Uint8Array(v);_.set(this.buf),this.buf=_,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),ni(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),ni(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),ni(this.buf,-1&h,this.pos),ni(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),ni(this.buf,-1&h,this.pos),ni(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(v,_){var R,F;if(v>=0?(R=v%4294967296|0,F=v/4294967296|0):(F=~(-v/4294967296),4294967295^(R=~(-v%4294967296))?R=R+1|0:(R=0,F=F+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(z,K,de){de.buf[de.pos++]=127&z|128,z>>>=7,de.buf[de.pos++]=127&z|128,z>>>=7,de.buf[de.pos++]=127&z|128,z>>>=7,de.buf[de.pos++]=127&z|128,de.buf[de.pos]=127&(z>>>=7)}(R,0,_),function(z,K){var de=(7&z)<<4;K.buf[K.pos++]|=de|((z>>>=3)?128:0),z&&(K.buf[K.pos++]=127&z|((z>>>=7)?128:0),z&&(K.buf[K.pos++]=127&z|((z>>>=7)?128:0),z&&(K.buf[K.pos++]=127&z|((z>>>=7)?128:0),z&&(K.buf[K.pos++]=127&z|((z>>>=7)?128:0),z&&(K.buf[K.pos++]=127&z)))))}(F,_)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var v=this.pos;this.pos=function(R,F,z){for(var K,de,Be=0;Be<F.length;Be++){if((K=F.charCodeAt(Be))>55295&&K<57344){if(!de){K>56319||Be+1===F.length?(R[z++]=239,R[z++]=191,R[z++]=189):de=K;continue}if(K<56320){R[z++]=239,R[z++]=191,R[z++]=189,de=K;continue}K=de-55296<<10|K-56320|65536,de=null}else de&&(R[z++]=239,R[z++]=191,R[z++]=189,de=null);K<128?R[z++]=K:(K<2048?R[z++]=K>>6|192:(K<65536?R[z++]=K>>12|224:(R[z++]=K>>18|240,R[z++]=K>>12&63|128),R[z++]=K>>6&63|128),R[z++]=63&K|128)}return z}(this.buf,h,this.pos);var _=this.pos-v;_>=128&&oi(v,_,this),this.pos=v-1,this.writeVarint(_),this.pos+=_},writeFloat:function(h){this.realloc(4),kn(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),kn(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var v=h.length;this.writeVarint(v),this.realloc(v);for(var _=0;_<v;_++)this.buf[this.pos++]=h[_]},writeRawMessage:function(h,v){this.pos++;var _=this.pos;h(v,this);var R=this.pos-_;R>=128&&oi(_,R,this),this.pos=_-1,this.writeVarint(R),this.pos+=R},writeMessage:function(h,v,_){this.writeTag(h,un.Bytes),this.writeRawMessage(v,_)},writePackedVarint:function(h,v){v.length&&this.writeMessage(h,fi,v)},writePackedSVarint:function(h,v){v.length&&this.writeMessage(h,bi,v)},writePackedBoolean:function(h,v){v.length&&this.writeMessage(h,Qr,v)},writePackedFloat:function(h,v){v.length&&this.writeMessage(h,Mn,v)},writePackedDouble:function(h,v){v.length&&this.writeMessage(h,mi,v)},writePackedFixed32:function(h,v){v.length&&this.writeMessage(h,En,v)},writePackedSFixed32:function(h,v){v.length&&this.writeMessage(h,si,v)},writePackedFixed64:function(h,v){v.length&&this.writeMessage(h,Ti,v)},writePackedSFixed64:function(h,v){v.length&&this.writeMessage(h,Kr,v)},writeBytesField:function(h,v){this.writeTag(h,un.Bytes),this.writeBytes(v)},writeFixed32Field:function(h,v){this.writeTag(h,un.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(h,v){this.writeTag(h,un.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(h,v){this.writeTag(h,un.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(h,v){this.writeTag(h,un.Fixed64),this.writeSFixed64(v)},writeVarintField:function(h,v){this.writeTag(h,un.Varint),this.writeVarint(v)},writeSVarintField:function(h,v){this.writeTag(h,un.Varint),this.writeSVarint(v)},writeStringField:function(h,v){this.writeTag(h,un.Bytes),this.writeString(v)},writeFloatField:function(h,v){this.writeTag(h,un.Fixed32),this.writeFloat(v)},writeDoubleField:function(h,v){this.writeTag(h,un.Fixed64),this.writeDouble(v)},writeBooleanField:function(h,v){this.writeVarintField(h,!!v)}};var Ai=function(h,v){var _=v.pixelRatio,R=v.version,F=v.stretchX,z=v.stretchY,K=v.content;this.paddedRect=h,this.pixelRatio=_,this.stretchX=F,this.stretchY=z,this.content=K,this.version=R},ii={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ii.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ii.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ii.tlbr.get=function(){return this.tl.concat(this.br)},ii.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ai.prototype,ii);var Dn=function(h,v){var _={},R={};this.haveRenderCallbacks=[];var F=[];this.addImages(h,_,F),this.addImages(v,R,F);var z=Ra(F),K=new kl({width:z.w||1,height:z.h||1});for(var de in h){var Be=h[de],it=_[de].paddedRect;kl.copy(Be.data,K,{x:0,y:0},{x:it.x+1,y:it.y+1},Be.data)}for(var ht in v){var xt=v[ht],Lt=R[ht].paddedRect,Ht=Lt.x+1,ur=Lt.y+1,pr=xt.data.width,zr=xt.data.height;kl.copy(xt.data,K,{x:0,y:0},{x:Ht,y:ur},xt.data),kl.copy(xt.data,K,{x:0,y:zr-1},{x:Ht,y:ur-1},{width:pr,height:1}),kl.copy(xt.data,K,{x:0,y:0},{x:Ht,y:ur+zr},{width:pr,height:1}),kl.copy(xt.data,K,{x:pr-1,y:0},{x:Ht-1,y:ur},{width:1,height:zr}),kl.copy(xt.data,K,{x:0,y:0},{x:Ht+pr,y:ur},{width:1,height:zr})}this.image=K,this.iconPositions=_,this.patternPositions=R};Dn.prototype.addImages=function(h,v,_){for(var R in h){var F=h[R],z={x:0,y:0,w:F.data.width+2,h:F.data.height+2};_.push(z),v[R]=new Ai(z,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(R)}},Dn.prototype.patchUpdatedImages=function(h,v){for(var _ in h.dispatchRenderCallbacks(this.haveRenderCallbacks),h.updatedImages)this.patchUpdatedImage(this.iconPositions[_],h.getImage(_),v),this.patchUpdatedImage(this.patternPositions[_],h.getImage(_),v)},Dn.prototype.patchUpdatedImage=function(h,v,_){if(h&&v&&h.version!==v.version){h.version=v.version;var R=h.tl;_.update(v.data,void 0,{x:R[0],y:R[1]})}},Ni("ImagePosition",Ai),Ni("ImageAtlas",Dn);var ta={horizontal:1,vertical:2,horizontalOnly:3},to=function(){this.scale=1,this.fontStack="",this.imageName=null};to.forText=function(h,v){var _=new to;return _.scale=h||1,_.fontStack=v,_},to.forImage=function(h){var v=new to;return v.imageName=h,v};var ki=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ka(h,v,_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr){var zr,Or=ki.fromFeature(h,F);xt===ta.vertical&&Or.verticalizePunctuation();var qr=ac.processBidirectionalText,on=ac.processStyledBidirectionalText;if(qr&&Or.sections.length===1){zr=[];for(var gn=0,Tn=qr(Or.toString(),ds(Or,it,z,v,R,Ht,ur));gn<Tn.length;gn+=1){var Ln=Tn[gn],pi=new ki;pi.text=Ln,pi.sections=Or.sections;for(var Ei=0;Ei<Ln.length;Ei++)pi.sectionIndex.push(0);zr.push(pi)}}else if(on){zr=[];for(var Ki=0,Di=on(Or.text,Or.sectionIndex,ds(Or,it,z,v,R,Ht,ur));Ki<Di.length;Ki+=1){var ia=Di[Ki],Oi=new ki;Oi.text=ia[0],Oi.sectionIndex=ia[1],Oi.sections=Or.sections,zr.push(Oi)}}else zr=function($i,mo){for(var Wa=[],no=$i.text,xi=0,Uo=0,ts=mo;Uo<ts.length;Uo+=1){var qs=ts[Uo];Wa.push($i.substring(xi,qs)),xi=qs}return xi<no.length&&Wa.push($i.substring(xi,no.length)),Wa}(Or,ds(Or,it,z,v,R,Ht,ur));var ro=[],Yi={positionedLines:ro,text:Or.toString(),top:ht[1],bottom:ht[1],left:ht[0],right:ht[0],writingMode:xt,iconsInText:!1,verticalizable:!1};return function($i,mo,Wa,no,xi,Uo,ts,qs,gs,Ds,fu,Ls){for(var yu=0,Qu=-17,Ju=0,fl=0,Ou=qs==="right"?1:qs==="left"?0:.5,el=0,qa=0,rs=xi;qa<rs.length;qa+=1){var Oo=rs[qa];Oo.trim();var yo=Oo.getMaxScale(),hl=24*(yo-1),Xo={positionedGlyphs:[],lineOffset:0};$i.positionedLines[el]=Xo;var Fs=Xo.positionedGlyphs,_u=0;if(Oo.length()){for(var Cl=0;Cl<Oo.length();Cl++){var Eo=Oo.getSection(Cl),jf=Oo.getSectionIndex(Cl),Tl=Oo.getCharCode(Cl),$h=0,xu=null,Ba=null,Ia=null,Pp=24,Kd=!(gs===ta.horizontal||!fu&&!Dc(Tl)||fu&&(ka[Tl]||(Dp=Tl,Qn.Arabic(Dp)||Qn["Arabic Supplement"](Dp)||Qn["Arabic Extended-A"](Dp)||Qn["Arabic Presentation Forms-A"](Dp)||Qn["Arabic Presentation Forms-B"](Dp))));if(Eo.imageName){var Qd=no[Eo.imageName];if(!Qd)continue;Ia=Eo.imageName,$i.iconsInText=$i.iconsInText||!0,Ba=Qd.paddedRect;var kp=Qd.displaySize;Eo.scale=24*Eo.scale/Ls,$h=hl+(24-kp[1]*Eo.scale),Pp=(xu={width:kp[0],height:kp[1],left:1,top:-3,advance:Kd?kp[1]:kp[0]}).advance;var Jd=Kd?kp[0]*Eo.scale-24*yo:kp[1]*Eo.scale-24*yo;Jd>0&&Jd>_u&&(_u=Jd)}else{var Cm=Wa[Eo.fontStack],cd=Cm&&Cm[Tl];if(cd&&cd.rect)Ba=cd.rect,xu=cd.metrics;else{var Mg=mo[Eo.fontStack],Tm=Mg&&Mg[Tl];if(!Tm)continue;xu=Tm.metrics}$h=24*(yo-Eo.scale)}Kd?($i.verticalizable=!0,Fs.push({glyph:Tl,imageName:Ia,x:yu,y:Qu+$h,vertical:Kd,scale:Eo.scale,fontStack:Eo.fontStack,sectionIndex:jf,metrics:xu,rect:Ba}),yu+=Pp*Eo.scale+Ds):(Fs.push({glyph:Tl,imageName:Ia,x:yu,y:Qu+$h,vertical:Kd,scale:Eo.scale,fontStack:Eo.fontStack,sectionIndex:jf,metrics:xu,rect:Ba}),yu+=xu.advance*Eo.scale+Ds)}Fs.length!==0&&(Ju=Math.max(yu-Ds,Ju),lu(Fs,0,Fs.length-1,Ou,_u)),yu=0;var bu=Uo*yo+_u;Xo.lineOffset=Math.max(_u,hl),Qu+=bu,fl=Math.max(bu,fl),++el}else Qu+=Uo,++el}var Dp,Fv=Qu- -17,Rg=Wo(ts),fd=Rg.horizontalAlign,Bv=Rg.verticalAlign;(function(Ig,P0,Og,k0,x_,D0,uc,_h,ns){var zc,L0=(P0-Og)*x_;zc=D0!==uc?-_h*k0- -17:(-k0*ns+.5)*uc;for(var Pg=0,xh=Ig;Pg<xh.length;Pg+=1)for(var Nv=0,Am=xh[Pg].positionedGlyphs;Nv<Am.length;Nv+=1){var zv=Am[Nv];zv.x+=L0,zv.y+=zc}})($i.positionedLines,Ou,fd,Bv,Ju,fl,Uo,Fv,xi.length),$i.top+=-Bv*Fv,$i.bottom=$i.top+Fv,$i.left+=-fd*Ju,$i.right=$i.left+Ju}(Yi,v,_,R,zr,K,de,Be,xt,it,Lt,pr),!function($i){for(var mo=0,Wa=$i;mo<Wa.length;mo+=1)if(Wa[mo].positionedGlyphs.length!==0)return!1;return!0}(ro)&&Yi}ki.fromFeature=function(h,v){for(var _=new ki,R=0;R<h.sections.length;R++){var F=h.sections[R];F.image?_.addImageSection(F):_.addTextSection(F,v)}return _},ki.prototype.length=function(){return this.text.length},ki.prototype.getSection=function(h){return this.sections[this.sectionIndex[h]]},ki.prototype.getSectionIndex=function(h){return this.sectionIndex[h]},ki.prototype.getCharCode=function(h){return this.text.charCodeAt(h)},ki.prototype.verticalizePunctuation=function(){this.text=function(h){for(var v="",_=0;_<h.length;_++){var R=h.charCodeAt(_+1)||null,F=h.charCodeAt(_-1)||null;v+=R&&_p(R)&&!Ar[h[_+1]]||F&&_p(F)&&!Ar[h[_-1]]||!Ar[h[_]]?h[_]:Ar[h[_]]}return v}(this.text)},ki.prototype.trim=function(){for(var h=0,v=0;v<this.text.length&&ka[this.text.charCodeAt(v)];v++)h++;for(var _=this.text.length,R=this.text.length-1;R>=0&&R>=h&&ka[this.text.charCodeAt(R)];R--)_--;this.text=this.text.substring(h,_),this.sectionIndex=this.sectionIndex.slice(h,_)},ki.prototype.substring=function(h,v){var _=new ki;return _.text=this.text.substring(h,v),_.sectionIndex=this.sectionIndex.slice(h,v),_.sections=this.sections,_},ki.prototype.toString=function(){return this.text},ki.prototype.getMaxScale=function(){var h=this;return this.sectionIndex.reduce(function(v,_){return Math.max(v,h.sections[_].scale)},0)},ki.prototype.addTextSection=function(h,v){this.text+=h.text,this.sections.push(to.forText(h.scale,h.fontStack||v));for(var _=this.sections.length-1,R=0;R<h.text.length;++R)this.sectionIndex.push(_)},ki.prototype.addImageSection=function(h){var v=h.image?h.image.name:"";if(v.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(to.forImage(v)),this.sectionIndex.push(this.sections.length-1)):ze("Reached maximum number of images 6401")}else ze("Can't add FormattedSection with an empty image.")},ki.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ka={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_a={};function Ro(h,v,_,R,F,z){if(v.imageName){var K=R[v.imageName];return K?K.displaySize[0]*v.scale*24/z+F:0}var de=_[v.fontStack],Be=de&&de[h];return Be?Be.metrics.advance*v.scale+F:0}function gu(h,v,_,R){var F=Math.pow(h-v,2);return R?h<v?F/2:2*F:F+Math.abs(_)*_}function Uu(h,v,_){var R=0;return h===10&&(R-=1e4),_&&(R+=150),h!==40&&h!==65288||(R+=50),v!==41&&v!==65289||(R+=50),R}function go(h,v,_,R,F,z){for(var K=null,de=gu(v,_,F,z),Be=0,it=R;Be<it.length;Be+=1){var ht=it[Be],xt=gu(v-ht.x,_,F,z)+ht.badness;xt<=de&&(K=ht,de=xt)}return{index:h,x:v,priorBreak:K,badness:de}}function ds(h,v,_,R,F,z,K){if(z!=="point")return[];if(!h)return[];for(var de,Be=[],it=function(zr,Or,qr,on,gn,Tn){for(var Ln=0,pi=0;pi<zr.length();pi++){var Ei=zr.getSection(pi);Ln+=Ro(zr.getCharCode(pi),Ei,on,gn,Or,Tn)}return Ln/Math.max(1,Math.ceil(Ln/qr))}(h,v,_,R,F,K),ht=h.text.indexOf("\u200B")>=0,xt=0,Lt=0;Lt<h.length();Lt++){var Ht=h.getSection(Lt),ur=h.getCharCode(Lt);if(ka[ur]||(xt+=Ro(ur,Ht,R,F,v,K)),Lt<h.length()-1){var pr=!((de=ur)<11904||!(Qn["Bopomofo Extended"](de)||Qn.Bopomofo(de)||Qn["CJK Compatibility Forms"](de)||Qn["CJK Compatibility Ideographs"](de)||Qn["CJK Compatibility"](de)||Qn["CJK Radicals Supplement"](de)||Qn["CJK Strokes"](de)||Qn["CJK Symbols and Punctuation"](de)||Qn["CJK Unified Ideographs Extension A"](de)||Qn["CJK Unified Ideographs"](de)||Qn["Enclosed CJK Letters and Months"](de)||Qn["Halfwidth and Fullwidth Forms"](de)||Qn.Hiragana(de)||Qn["Ideographic Description Characters"](de)||Qn["Kangxi Radicals"](de)||Qn["Katakana Phonetic Extensions"](de)||Qn.Katakana(de)||Qn["Vertical Forms"](de)||Qn["Yi Radicals"](de)||Qn["Yi Syllables"](de)));(_a[ur]||pr||Ht.imageName)&&Be.push(go(Lt+1,xt,it,Be,Uu(ur,h.getCharCode(Lt+1),pr&&ht),!1))}}return function zr(Or){return Or?zr(Or.priorBreak).concat(Or.index):[]}(go(h.length(),xt,it,Be,0,!0))}function Wo(h){var v=.5,_=.5;switch(h){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:v,verticalAlign:_}}function lu(h,v,_,R,F){if(R||F)for(var z=h[_],K=(h[_].x+z.metrics.advance*z.scale)*R,de=v;de<=_;de++)h[de].x-=K,h[de].y+=F}function Ys(h,v,_,R,F,z){var K,de=h.image;if(de.content){var Be=de.content,it=de.pixelRatio||1;K=[Be[0]/it,Be[1]/it,de.displaySize[0]-Be[2]/it,de.displaySize[1]-Be[3]/it]}var ht,xt,Lt,Ht,ur=v.left*z,pr=v.right*z;_==="width"||_==="both"?(Ht=F[0]+ur-R[3],xt=F[0]+pr+R[1]):xt=(Ht=F[0]+(ur+pr-de.displaySize[0])/2)+de.displaySize[0];var zr=v.top*z,Or=v.bottom*z;return _==="height"||_==="both"?(ht=F[1]+zr-R[0],Lt=F[1]+Or+R[2]):Lt=(ht=F[1]+(zr+Or-de.displaySize[1])/2)+de.displaySize[1],{image:de,top:ht,right:xt,bottom:Lt,left:Ht,collisionPadding:K}}_a[10]=!0,_a[32]=!0,_a[38]=!0,_a[40]=!0,_a[41]=!0,_a[43]=!0,_a[45]=!0,_a[47]=!0,_a[173]=!0,_a[183]=!0,_a[8203]=!0,_a[8208]=!0,_a[8211]=!0,_a[8231]=!0;var Hs=function(h){function v(_,R,F,z){h.call(this,_,R),this.angle=F,z!==void 0&&(this.segment=z)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(Y);function tu(h,v){var _=v.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new Ca(h+1))};if(_.kind==="source")return{kind:"source"};for(var R=_.zoomStops,F=_.interpolationType,z=0;z<R.length&&R[z]<=h;)z++;for(var K=z=Math.max(0,z-1);K<R.length&&R[K]<h+1;)K++;K=Math.min(R.length-1,K);var de=R[z],Be=R[K];return _.kind==="composite"?{kind:"composite",minZoom:de,maxZoom:Be,interpolationType:F}:{kind:"camera",minZoom:de,maxZoom:Be,minSize:_.evaluate(new Ca(de)),maxSize:_.evaluate(new Ca(Be)),interpolationType:F}}function vs(h,v,_){var R=v.uSize,F=_.lowerSize;return h.kind==="source"?F/128:h.kind==="composite"?Rs(F/128,_.upperSize/128,v.uSizeT):R}function cu(h,v){var _=0,R=0;if(h.kind==="constant")R=h.layoutSize;else if(h.kind!=="source"){var F=h.interpolationType,z=F?$(Qs.interpolationFactor(F,v,h.minZoom,h.maxZoom),0,1):0;h.kind==="camera"?R=Rs(h.minSize,h.maxSize,z):_=z}return{uSizeT:_,uSize:R}}Ni("Anchor",Hs);var Va=Object.freeze({__proto__:null,getSizeData:tu,evaluateSizeForFeature:vs,evaluateSizeForZoom:cu,SIZE_PACK_FACTOR:128});function Zu(h,v,_,R,F){if(v.segment===void 0)return!0;for(var z=v,K=v.segment+1,de=0;de>-_/2;){if(--K<0)return!1;de-=h[K].dist(z),z=h[K]}de+=h[K].dist(h[K+1]),K++;for(var Be=[],it=0;de<_/2;){var ht=h[K],xt=h[K+1];if(!xt)return!1;var Lt=h[K-1].angleTo(ht)-ht.angleTo(xt);for(Lt=Math.abs((Lt+3*Math.PI)%(2*Math.PI)-Math.PI),Be.push({distance:de,angleDelta:Lt}),it+=Lt;de-Be[0].distance>R;)it-=Be.shift().angleDelta;if(it>F)return!1;K++,de+=ht.dist(xt)}return!0}function No(h){for(var v=0,_=0;_<h.length-1;_++)v+=h[_].dist(h[_+1]);return v}function da(h,v,_){return h?.6*v*_:0}function ba(h,v){return Math.max(h?h.right-h.left:0,v?v.right-v.left:0)}function Io(h,v,_,R,F,z){for(var K=da(_,F,z),de=ba(_,R)*z,Be=0,it=No(h)/2,ht=0;ht<h.length-1;ht++){var xt=h[ht],Lt=h[ht+1],Ht=xt.dist(Lt);if(Be+Ht>it){var ur=(it-Be)/Ht,pr=Rs(xt.x,Lt.x,ur),zr=Rs(xt.y,Lt.y,ur),Or=new Hs(pr,zr,Lt.angleTo(xt),ht);return Or._round(),!K||Zu(h,Or,de,K,v)?Or:void 0}Be+=Ht}}function Ts(h,v,_,R,F,z,K,de,Be){var it=da(R,z,K),ht=ba(R,F),xt=ht*K,Lt=h[0].x===0||h[0].x===Be||h[0].y===0||h[0].y===Be;return v-xt<v/4&&(v=xt+v/4),function Ht(ur,pr,zr,Or,qr,on,gn,Tn,Ln){for(var pi=on/2,Ei=No(ur),Ki=0,Di=pr-zr,ia=[],Oi=0;Oi<ur.length-1;Oi++){for(var ro=ur[Oi],Yi=ur[Oi+1],$i=ro.dist(Yi),mo=Yi.angleTo(ro);Di+zr<Ki+$i;){var Wa=((Di+=zr)-Ki)/$i,no=Rs(ro.x,Yi.x,Wa),xi=Rs(ro.y,Yi.y,Wa);if(no>=0&&no<Ln&&xi>=0&&xi<Ln&&Di-pi>=0&&Di+pi<=Ei){var Uo=new Hs(no,xi,mo,Oi);Uo._round(),Or&&!Zu(ur,Uo,on,Or,qr)||ia.push(Uo)}}Ki+=$i}return Tn||ia.length||gn||(ia=Ht(ur,Ki/2,zr,Or,qr,on,gn,!0,Ln)),ia}(h,Lt?v/2*de%v:(ht/2+2*z)*K*de%v,v,it,_,xt,Lt,!1,Be)}function mu(h,v,_,R,F){for(var z=[],K=0;K<h.length;K++)for(var de=h[K],Be=void 0,it=0;it<de.length-1;it++){var ht=de[it],xt=de[it+1];ht.x<v&&xt.x<v||(ht.x<v?ht=new Y(v,ht.y+(v-ht.x)/(xt.x-ht.x)*(xt.y-ht.y))._round():xt.x<v&&(xt=new Y(v,ht.y+(v-ht.x)/(xt.x-ht.x)*(xt.y-ht.y))._round()),ht.y<_&&xt.y<_||(ht.y<_?ht=new Y(ht.x+(_-ht.y)/(xt.y-ht.y)*(xt.x-ht.x),_)._round():xt.y<_&&(xt=new Y(ht.x+(_-ht.y)/(xt.y-ht.y)*(xt.x-ht.x),_)._round()),ht.x>=R&&xt.x>=R||(ht.x>=R?ht=new Y(R,ht.y+(R-ht.x)/(xt.x-ht.x)*(xt.y-ht.y))._round():xt.x>=R&&(xt=new Y(R,ht.y+(R-ht.x)/(xt.x-ht.x)*(xt.y-ht.y))._round()),ht.y>=F&&xt.y>=F||(ht.y>=F?ht=new Y(ht.x+(F-ht.y)/(xt.y-ht.y)*(xt.x-ht.x),F)._round():xt.y>=F&&(xt=new Y(ht.x+(F-ht.y)/(xt.y-ht.y)*(xt.x-ht.x),F)._round()),Be&&ht.equals(Be[Be.length-1])||z.push(Be=[ht]),Be.push(xt)))))}return z}function mr(h,v,_,R){var F=[],z=h.image,K=z.pixelRatio,de=z.paddedRect.w-2,Be=z.paddedRect.h-2,it=h.right-h.left,ht=h.bottom-h.top,xt=z.stretchX||[[0,de]],Lt=z.stretchY||[[0,Be]],Ht=function(no,xi){return no+xi[1]-xi[0]},ur=xt.reduce(Ht,0),pr=Lt.reduce(Ht,0),zr=de-ur,Or=Be-pr,qr=0,on=ur,gn=0,Tn=pr,Ln=0,pi=zr,Ei=0,Ki=Or;if(z.content&&R){var Di=z.content;qr=_n(xt,0,Di[0]),gn=_n(Lt,0,Di[1]),on=_n(xt,Di[0],Di[2]),Tn=_n(Lt,Di[1],Di[3]),Ln=Di[0]-qr,Ei=Di[1]-gn,pi=Di[2]-Di[0]-on,Ki=Di[3]-Di[1]-Tn}var ia=function(no,xi,Uo,ts){var qs=Ii(no.stretch-qr,on,it,h.left),gs=$a(no.fixed-Ln,pi,no.stretch,ur),Ds=Ii(xi.stretch-gn,Tn,ht,h.top),fu=$a(xi.fixed-Ei,Ki,xi.stretch,pr),Ls=Ii(Uo.stretch-qr,on,it,h.left),yu=$a(Uo.fixed-Ln,pi,Uo.stretch,ur),Qu=Ii(ts.stretch-gn,Tn,ht,h.top),Ju=$a(ts.fixed-Ei,Ki,ts.stretch,pr),fl=new Y(qs,Ds),Ou=new Y(Ls,Ds),el=new Y(Ls,Qu),qa=new Y(qs,Qu),rs=new Y(gs/K,fu/K),Oo=new Y(yu/K,Ju/K),yo=v*Math.PI/180;if(yo){var hl=Math.sin(yo),Xo=Math.cos(yo),Fs=[Xo,-hl,hl,Xo];fl._matMult(Fs),Ou._matMult(Fs),qa._matMult(Fs),el._matMult(Fs)}var _u=no.stretch+no.fixed,Cl=xi.stretch+xi.fixed;return{tl:fl,tr:Ou,bl:qa,br:el,tex:{x:z.paddedRect.x+1+_u,y:z.paddedRect.y+1+Cl,w:Uo.stretch+Uo.fixed-_u,h:ts.stretch+ts.fixed-Cl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:rs,pixelOffsetBR:Oo,minFontScaleX:pi/K/it,minFontScaleY:Ki/K/ht,isSDF:_}};if(R&&(z.stretchX||z.stretchY))for(var Oi=hn(xt,zr,ur),ro=hn(Lt,Or,pr),Yi=0;Yi<Oi.length-1;Yi++)for(var $i=Oi[Yi],mo=Oi[Yi+1],Wa=0;Wa<ro.length-1;Wa++)F.push(ia($i,ro[Wa],mo,ro[Wa+1]));else F.push(ia({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:de+1},{fixed:0,stretch:Be+1}));return F}function _n(h,v,_){for(var R=0,F=0,z=h;F<z.length;F+=1){var K=z[F];R+=Math.max(v,Math.min(_,K[1]))-Math.max(v,Math.min(_,K[0]))}return R}function hn(h,v,_){for(var R=[{fixed:-1,stretch:0}],F=0,z=h;F<z.length;F+=1){var K=z[F],de=K[0],Be=K[1],it=R[R.length-1];R.push({fixed:de-it.stretch,stretch:it.stretch}),R.push({fixed:de-it.stretch,stretch:it.stretch+(Be-de)})}return R.push({fixed:v+1,stretch:_}),R}function Ii(h,v,_,R){return h/v*_+R}function $a(h,v,_,R){return h-v*_/R}var $o=function(h,v,_,R,F,z,K,de,Be,it){if(this.boxStartIndex=h.length,Be){var ht=z.top,xt=z.bottom,Lt=z.collisionPadding;Lt&&(ht-=Lt[1],xt+=Lt[3]);var Ht=xt-ht;Ht>0&&(Ht=Math.max(10,Ht),this.circleDiameter=Ht)}else{var ur=z.top*K-de,pr=z.bottom*K+de,zr=z.left*K-de,Or=z.right*K+de,qr=z.collisionPadding;if(qr&&(zr-=qr[0]*K,ur-=qr[1]*K,Or+=qr[2]*K,pr+=qr[3]*K),it){var on=new Y(zr,ur),gn=new Y(Or,ur),Tn=new Y(zr,pr),Ln=new Y(Or,pr),pi=it*Math.PI/180;on._rotate(pi),gn._rotate(pi),Tn._rotate(pi),Ln._rotate(pi),zr=Math.min(on.x,gn.x,Tn.x,Ln.x),Or=Math.max(on.x,gn.x,Tn.x,Ln.x),ur=Math.min(on.y,gn.y,Tn.y,Ln.y),pr=Math.max(on.y,gn.y,Tn.y,Ln.y)}h.emplaceBack(v.x,v.y,zr,ur,Or,pr,_,R,F)}this.boxEndIndex=h.length},Vt=function(h,v){if(h===void 0&&(h=[]),v===void 0&&(v=kt),this.data=h,this.length=this.data.length,this.compare=v,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function kt(h,v){return h<v?-1:h>v?1:0}function wr(h,v,_){v===void 0&&(v=1),_===void 0&&(_=!1);for(var R=1/0,F=1/0,z=-1/0,K=-1/0,de=h[0],Be=0;Be<de.length;Be++){var it=de[Be];(!Be||it.x<R)&&(R=it.x),(!Be||it.y<F)&&(F=it.y),(!Be||it.x>z)&&(z=it.x),(!Be||it.y>K)&&(K=it.y)}var ht=Math.min(z-R,K-F),xt=ht/2,Lt=new Vt([],Qt);if(ht===0)return new Y(R,F);for(var Ht=R;Ht<z;Ht+=ht)for(var ur=F;ur<K;ur+=ht)Lt.push(new sn(Ht+xt,ur+xt,xt,h));for(var pr=function(qr){for(var on=0,gn=0,Tn=0,Ln=qr[0],pi=0,Ei=Ln.length,Ki=Ei-1;pi<Ei;Ki=pi++){var Di=Ln[pi],ia=Ln[Ki],Oi=Di.x*ia.y-ia.x*Di.y;gn+=(Di.x+ia.x)*Oi,Tn+=(Di.y+ia.y)*Oi,on+=3*Oi}return new sn(gn/on,Tn/on,0,qr)}(h),zr=Lt.length;Lt.length;){var Or=Lt.pop();(Or.d>pr.d||!pr.d)&&(pr=Or,_&&console.log("found best %d after %d probes",Math.round(1e4*Or.d)/1e4,zr)),Or.max-pr.d<=v||(Lt.push(new sn(Or.p.x-(xt=Or.h/2),Or.p.y-xt,xt,h)),Lt.push(new sn(Or.p.x+xt,Or.p.y-xt,xt,h)),Lt.push(new sn(Or.p.x-xt,Or.p.y+xt,xt,h)),Lt.push(new sn(Or.p.x+xt,Or.p.y+xt,xt,h)),zr+=4)}return _&&(console.log("num probes: "+zr),console.log("best distance: "+pr.d)),pr.p}function Qt(h,v){return v.max-h.max}function sn(h,v,_,R){this.p=new Y(h,v),this.h=_,this.d=function(F,z){for(var K=!1,de=1/0,Be=0;Be<z.length;Be++)for(var it=z[Be],ht=0,xt=it.length,Lt=xt-1;ht<xt;Lt=ht++){var Ht=it[ht],ur=it[Lt];Ht.y>F.y!=ur.y>F.y&&F.x<(ur.x-Ht.x)*(F.y-Ht.y)/(ur.y-Ht.y)+Ht.x&&(K=!K),de=Math.min(de,Uf(F,Ht,ur))}return(K?1:-1)*Math.sqrt(de)}(this.p,R),this.max=this.d+this.h*Math.SQRT2}Vt.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},Vt.prototype.pop=function(){if(this.length!==0){var h=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),h}},Vt.prototype.peek=function(){return this.data[0]},Vt.prototype._up=function(h){for(var v=this.data,_=this.compare,R=v[h];h>0;){var F=h-1>>1,z=v[F];if(_(R,z)>=0)break;v[h]=z,h=F}v[h]=R},Vt.prototype._down=function(h){for(var v=this.data,_=this.compare,R=this.length>>1,F=v[h];h<R;){var z=1+(h<<1),K=v[z],de=z+1;if(de<this.length&&_(v[de],K)<0&&(z=de,K=v[de]),_(K,F)>=0)break;v[h]=K,h=z}v[h]=F};var Lr=Number.POSITIVE_INFINITY;function Zr(h,v){return v[1]!==Lr?function(_,R,F){var z=0,K=0;switch(R=Math.abs(R),F=Math.abs(F),_){case"top-right":case"top-left":case"top":K=F-7;break;case"bottom-right":case"bottom-left":case"bottom":K=7-F}switch(_){case"top-right":case"bottom-right":case"right":z=-R;break;case"top-left":case"bottom-left":case"left":z=R}return[z,K]}(h,v[0],v[1]):function(_,R){var F=0,z=0;R<0&&(R=0);var K=R/Math.sqrt(2);switch(_){case"top-right":case"top-left":z=K-7;break;case"bottom-right":case"bottom-left":z=7-K;break;case"bottom":z=7-R;break;case"top":z=R-7}switch(_){case"top-right":case"bottom-right":F=-K;break;case"top-left":case"bottom-left":F=K;break;case"left":F=R;break;case"right":F=-R}return[F,z]}(h,v[0])}function Gr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yr(h,v,_,R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur){var pr=function(gn,Tn,Ln,pi,Ei,Ki,Di,ia){for(var Oi=pi.layout.get("text-rotate").evaluate(Ki,{})*Math.PI/180,ro=[],Yi=0,$i=Tn.positionedLines;Yi<$i.length;Yi+=1)for(var mo=$i[Yi],Wa=0,no=mo.positionedGlyphs;Wa<no.length;Wa+=1){var xi=no[Wa];if(xi.rect){var Uo=xi.rect||{},ts=4,qs=!0,gs=1,Ds=0,fu=(Ei||ia)&&xi.vertical,Ls=xi.metrics.advance*xi.scale/2;if(ia&&Tn.verticalizable&&(Ds=mo.lineOffset/2-(xi.imageName?-(24-xi.metrics.width*xi.scale)/2:24*(xi.scale-1))),xi.imageName){var yu=Di[xi.imageName];qs=yu.sdf,ts=1/(gs=yu.pixelRatio)}var Qu=Ei?[xi.x+Ls,xi.y]:[0,0],Ju=Ei?[0,0]:[xi.x+Ls+Ln[0],xi.y+Ln[1]-Ds],fl=[0,0];fu&&(fl=Ju,Ju=[0,0]);var Ou=(xi.metrics.left-ts)*xi.scale-Ls+Ju[0],el=(-xi.metrics.top-ts)*xi.scale+Ju[1],qa=Ou+Uo.w*xi.scale/gs,rs=el+Uo.h*xi.scale/gs,Oo=new Y(Ou,el),yo=new Y(qa,el),hl=new Y(Ou,rs),Xo=new Y(qa,rs);if(fu){var Fs=new Y(-Ls,Ls- -17),_u=-Math.PI/2,Cl=12-Ls,Eo=new Y(22-Cl,-(xi.imageName?Cl:0)),jf=new(Function.prototype.bind.apply(Y,[null].concat(fl)));Oo._rotateAround(_u,Fs)._add(Eo)._add(jf),yo._rotateAround(_u,Fs)._add(Eo)._add(jf),hl._rotateAround(_u,Fs)._add(Eo)._add(jf),Xo._rotateAround(_u,Fs)._add(Eo)._add(jf)}if(Oi){var Tl=Math.sin(Oi),$h=Math.cos(Oi),xu=[$h,-Tl,Tl,$h];Oo._matMult(xu),yo._matMult(xu),hl._matMult(xu),Xo._matMult(xu)}var Ba=new Y(0,0),Ia=new Y(0,0);ro.push({tl:Oo,tr:yo,bl:hl,br:Xo,tex:Uo,writingMode:Tn.writingMode,glyphOffset:Qu,sectionIndex:xi.sectionIndex,isSDF:qs,pixelOffsetTL:Ba,pixelOffsetBR:Ia,minFontScaleX:0,minFontScaleY:0})}}return ro}(0,_,de,F,z,K,R,h.allowVerticalPlacement),zr=h.textSizeData,Or=null;zr.kind==="source"?(Or=[128*F.layout.get("text-size").evaluate(K,{})])[0]>32640&&ze(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):zr.kind==="composite"&&((Or=[128*Ht.compositeTextSizes[0].evaluate(K,{},ur),128*Ht.compositeTextSizes[1].evaluate(K,{},ur)])[0]>32640||Or[1]>32640)&&ze(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),h.addSymbols(h.text,pr,Or,de,z,K,it,v,Be.lineStartIndex,Be.lineLength,Lt,ur);for(var qr=0,on=ht;qr<on.length;qr+=1)xt[on[qr]]=h.text.placedSymbolArray.length-1;return 4*pr.length}function Ur(h){for(var v in h)return h[v];return null}function or(h,v,_,R){var F=h.compareText;if(v in F){for(var z=F[v],K=z.length-1;K>=0;K--)if(R.dist(z[K])<_)return!0}else F[v]=[];return F[v].push(R),!1}var jr=Hh.VectorTileFeature.types,bn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sn(h,v,_,R,F,z,K,de,Be,it,ht,xt,Lt){var Ht=de?Math.min(32640,Math.round(de[0])):0,ur=de?Math.min(32640,Math.round(de[1])):0;h.emplaceBack(v,_,Math.round(32*R),Math.round(32*F),z,K,(Ht<<1)+(Be?1:0),ur,16*it,16*ht,256*xt,256*Lt)}function Xn(h,v,_){h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_)}function Zn(h){for(var v=0,_=h.sections;v<_.length;v+=1)if(Lh(_[v].text))return!0;return!1}var qn=function(h){this.layoutVertexArray=new rd,this.indexArray=new Ve,this.programConfigurations=h,this.segments=new Xt,this.dynamicLayoutVertexArray=new zh,this.opacityVertexArray=new ph,this.placedSymbolArray=new I};qn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},qn.prototype.upload=function(h,v,_,R){this.isEmpty()||(_&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,A0.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,wg.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,bn,!0),this.opacityVertexBuffer.itemSize=1),(_||R)&&this.programConfigurations.upload(h))},qn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ni("SymbolBuffers",qn);var Xi=function(h,v,_){this.layoutVertexArray=new h,this.layoutAttributes=v,this.indexArray=new _,this.segments=new Xt,this.collisionVertexArray=new Mr};Xi.prototype.upload=function(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,Yd.members,!0)},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ni("CollisionBuffers",Xi);var Fn=function(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ku([]),this.placementViewportMatrix=Ku([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tu(this.zoom,v["text-size"]),this.iconSizeData=tu(this.zoom,v["icon-size"]);var _=this.layers[0].layout,R=_.get("symbol-sort-key"),F=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=F!=="viewport-y"&&R.constantOr(1)!==void 0,this.sortFeaturesByY=(F==="viewport-y"||F==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(z){return ta[z]})),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id}),this.sourceID=h.sourceID};Fn.prototype.createArrays=function(){this.text=new qn(new ga(this.layers,this.zoom,function(h){return/^text/.test(h)})),this.icon=new qn(new ga(this.layers,this.zoom,function(h){return/^icon/.test(h)})),this.glyphOffsetArray=new fe,this.lineVertexArray=new Oe,this.symbolInstances=new ie},Fn.prototype.calculateGlyphDependencies=function(h,v,_,R,F){for(var z=0;z<h.length;z++)if(v[h.charCodeAt(z)]=!0,(_||R)&&F){var K=Ar[h.charAt(z)];K&&(v[K.charCodeAt(0)]=!0)}},Fn.prototype.populate=function(h,v,_){var R=this.layers[0],F=R.layout,z=F.get("text-font"),K=F.get("text-field"),de=F.get("icon-image"),Be=(K.value.kind!=="constant"||K.value.value instanceof fo&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),it=de.value.kind!=="constant"||!!de.value.value||Object.keys(de.parameters).length>0,ht=F.get("symbol-sort-key");if(this.features=[],Be||it){for(var xt=v.iconDependencies,Lt=v.glyphDependencies,Ht=v.availableImages,ur=new Ca(this.zoom),pr=0,zr=h;pr<zr.length;pr+=1){var Or=zr[pr],qr=Or.feature,on=Or.id,gn=Or.index,Tn=Or.sourceLayerIndex,Ln=R._featureFilter.needGeometry,pi=ws(qr,Ln);if(R._featureFilter.filter(ur,pi,_)){Ln||(pi.geometry=es(qr));var Ei=void 0;if(Be){var Ki=R.getValueAndResolveTokens("text-field",pi,_,Ht),Di=fo.factory(Ki);Zn(Di)&&(this.hasRTLText=!0),(!this.hasRTLText||Ev()==="unavailable"||this.hasRTLText&&ac.isParsed())&&(Ei=tr(Di,R,pi))}var ia=void 0;if(it){var Oi=R.getValueAndResolveTokens("icon-image",pi,_,Ht);ia=Oi instanceof To?Oi:To.fromString(Oi)}if(Ei||ia){var ro=this.sortFeaturesByKey?ht.evaluate(pi,{},_):void 0;if(this.features.push({id:on,text:Ei,icon:ia,index:gn,sourceLayerIndex:Tn,geometry:pi.geometry,properties:qr.properties,type:jr[qr.type],sortKey:ro}),ia&&(xt[ia.name]=!0),Ei){var Yi=z.evaluate(pi,{},_).join(","),$i=F.get("text-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ta.vertical)>=0;for(var mo=0,Wa=Ei.sections;mo<Wa.length;mo+=1){var no=Wa[mo];if(no.image)xt[no.image.name]=!0;else{var xi=Kc(Ei.toString()),Uo=no.fontStack||Yi,ts=Lt[Uo]=Lt[Uo]||{};this.calculateGlyphDependencies(no.text,ts,$i,this.allowVerticalPlacement,xi)}}}}}}F.get("symbol-placement")==="line"&&(this.features=function(qs){var gs={},Ds={},fu=[],Ls=0;function yu(Fs){fu.push(qs[Fs]),Ls++}function Qu(Fs,_u,Cl){var Eo=Ds[Fs];return delete Ds[Fs],Ds[_u]=Eo,fu[Eo].geometry[0].pop(),fu[Eo].geometry[0]=fu[Eo].geometry[0].concat(Cl[0]),Eo}function Ju(Fs,_u,Cl){var Eo=gs[_u];return delete gs[_u],gs[Fs]=Eo,fu[Eo].geometry[0].shift(),fu[Eo].geometry[0]=Cl[0].concat(fu[Eo].geometry[0]),Eo}function fl(Fs,_u,Cl){var Eo=Cl?_u[0][_u[0].length-1]:_u[0][0];return Fs+":"+Eo.x+":"+Eo.y}for(var Ou=0;Ou<qs.length;Ou++){var el=qs[Ou],qa=el.geometry,rs=el.text?el.text.toString():null;if(rs){var Oo=fl(rs,qa),yo=fl(rs,qa,!0);if(Oo in Ds&&yo in gs&&Ds[Oo]!==gs[yo]){var hl=Ju(Oo,yo,qa),Xo=Qu(Oo,yo,fu[hl].geometry);delete gs[Oo],delete Ds[yo],Ds[fl(rs,fu[Xo].geometry,!0)]=Xo,fu[hl].geometry=null}else Oo in Ds?Qu(Oo,yo,qa):yo in gs?Ju(Oo,yo,qa):(yu(Ou),gs[Oo]=Ls-1,Ds[yo]=Ls-1)}else yu(Ou)}return fu.filter(function(Fs){return Fs.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(qs,gs){return qs.sortKey-gs.sortKey})}},Fn.prototype.update=function(h,v,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,v,this.layers,_),this.icon.programConfigurations.updatePaintArrays(h,v,this.layers,_))},Fn.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Fn.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Fn.prototype.upload=function(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Fn.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Fn.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Fn.prototype.addToLineVertexArray=function(h,v){var _=this.lineVertexArray.length;if(h.segment!==void 0){for(var R=h.dist(v[h.segment+1]),F=h.dist(v[h.segment]),z={},K=h.segment+1;K<v.length;K++)z[K]={x:v[K].x,y:v[K].y,tileUnitDistanceFromAnchor:R},K<v.length-1&&(R+=v[K+1].dist(v[K]));for(var de=h.segment||0;de>=0;de--)z[de]={x:v[de].x,y:v[de].y,tileUnitDistanceFromAnchor:F},de>0&&(F+=v[de-1].dist(v[de]));for(var Be=0;Be<v.length;Be++){var it=z[Be];this.lineVertexArray.emplaceBack(it.x,it.y,it.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},Fn.prototype.addSymbols=function(h,v,_,R,F,z,K,de,Be,it,ht,xt){for(var Lt=h.indexArray,Ht=h.layoutVertexArray,ur=h.segments.prepareSegment(4*v.length,Ht,Lt,this.canOverlap?z.sortKey:void 0),pr=this.glyphOffsetArray.length,zr=ur.vertexLength,Or=this.allowVerticalPlacement&&K===ta.vertical?Math.PI/2:0,qr=z.text&&z.text.sections,on=0;on<v.length;on++){var gn=v[on],Tn=gn.tl,Ln=gn.tr,pi=gn.bl,Ei=gn.br,Ki=gn.tex,Di=gn.pixelOffsetTL,ia=gn.pixelOffsetBR,Oi=gn.minFontScaleX,ro=gn.minFontScaleY,Yi=gn.glyphOffset,$i=gn.isSDF,mo=gn.sectionIndex,Wa=ur.vertexLength,no=Yi[1];Sn(Ht,de.x,de.y,Tn.x,no+Tn.y,Ki.x,Ki.y,_,$i,Di.x,Di.y,Oi,ro),Sn(Ht,de.x,de.y,Ln.x,no+Ln.y,Ki.x+Ki.w,Ki.y,_,$i,ia.x,Di.y,Oi,ro),Sn(Ht,de.x,de.y,pi.x,no+pi.y,Ki.x,Ki.y+Ki.h,_,$i,Di.x,ia.y,Oi,ro),Sn(Ht,de.x,de.y,Ei.x,no+Ei.y,Ki.x+Ki.w,Ki.y+Ki.h,_,$i,ia.x,ia.y,Oi,ro),Xn(h.dynamicLayoutVertexArray,de,Or),Lt.emplaceBack(Wa,Wa+1,Wa+2),Lt.emplaceBack(Wa+1,Wa+2,Wa+3),ur.vertexLength+=4,ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yi[0]),on!==v.length-1&&mo===v[on+1].sectionIndex||h.programConfigurations.populatePaintArrays(Ht.length,z,z.index,{},xt,qr&&qr[mo])}h.placedSymbolArray.emplaceBack(de.x,de.y,pr,this.glyphOffsetArray.length-pr,zr,Be,it,de.segment,_?_[0]:0,_?_[1]:0,R[0],R[1],K,0,!1,0,ht)},Fn.prototype._addCollisionDebugVertex=function(h,v,_,R,F,z){return v.emplaceBack(0,0),h.emplaceBack(_.x,_.y,R,F,Math.round(z.x),Math.round(z.y))},Fn.prototype.addCollisionDebugVertices=function(h,v,_,R,F,z,K){var de=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),Be=de.vertexLength,it=F.layoutVertexArray,ht=F.collisionVertexArray,xt=K.anchorX,Lt=K.anchorY;this._addCollisionDebugVertex(it,ht,z,xt,Lt,new Y(h,v)),this._addCollisionDebugVertex(it,ht,z,xt,Lt,new Y(_,v)),this._addCollisionDebugVertex(it,ht,z,xt,Lt,new Y(_,R)),this._addCollisionDebugVertex(it,ht,z,xt,Lt,new Y(h,R)),de.vertexLength+=4;var Ht=F.indexArray;Ht.emplaceBack(Be,Be+1),Ht.emplaceBack(Be+1,Be+2),Ht.emplaceBack(Be+2,Be+3),Ht.emplaceBack(Be+3,Be),de.primitiveLength+=4},Fn.prototype.addDebugCollisionBoxes=function(h,v,_,R){for(var F=h;F<v;F++){var z=this.collisionBoxArray.get(F);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,R?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}},Fn.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xi(Uh,Ov.members,Nf),this.iconCollisionBox=new Xi(Uh,Ov.members,Nf);for(var h=0;h<this.symbolInstances.length;h++){var v=this.symbolInstances.get(h);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Fn.prototype._deserializeCollisionBoxesForSymbol=function(h,v,_,R,F,z,K,de,Be){for(var it={},ht=v;ht<_;ht++){var xt=h.get(ht);it.textBox={x1:xt.x1,y1:xt.y1,x2:xt.x2,y2:xt.y2,anchorPointX:xt.anchorPointX,anchorPointY:xt.anchorPointY},it.textFeatureIndex=xt.featureIndex;break}for(var Lt=R;Lt<F;Lt++){var Ht=h.get(Lt);it.verticalTextBox={x1:Ht.x1,y1:Ht.y1,x2:Ht.x2,y2:Ht.y2,anchorPointX:Ht.anchorPointX,anchorPointY:Ht.anchorPointY},it.verticalTextFeatureIndex=Ht.featureIndex;break}for(var ur=z;ur<K;ur++){var pr=h.get(ur);it.iconBox={x1:pr.x1,y1:pr.y1,x2:pr.x2,y2:pr.y2,anchorPointX:pr.anchorPointX,anchorPointY:pr.anchorPointY},it.iconFeatureIndex=pr.featureIndex;break}for(var zr=de;zr<Be;zr++){var Or=h.get(zr);it.verticalIconBox={x1:Or.x1,y1:Or.y1,x2:Or.x2,y2:Or.y2,anchorPointX:Or.anchorPointX,anchorPointY:Or.anchorPointY},it.verticalIconFeatureIndex=Or.featureIndex;break}return it},Fn.prototype.deserializeCollisionBoxes=function(h){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var _=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},Fn.prototype.hasTextData=function(){return this.text.segments.get().length>0},Fn.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Fn.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Fn.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Fn.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Fn.prototype.addIndicesForPlacedSymbol=function(h,v){for(var _=h.placedSymbolArray.get(v),R=_.vertexStartIndex+4*_.numGlyphs,F=_.vertexStartIndex;F<R;F+=4)h.indexArray.emplaceBack(F,F+1,F+2),h.indexArray.emplaceBack(F+1,F+2,F+3)},Fn.prototype.getSortedSymbolIndexes=function(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(h),_=Math.cos(h),R=[],F=[],z=[],K=0;K<this.symbolInstances.length;++K){z.push(K);var de=this.symbolInstances.get(K);R.push(0|Math.round(v*de.anchorX+_*de.anchorY)),F.push(de.featureIndex)}return z.sort(function(Be,it){return R[Be]-R[it]||F[it]-F[Be]}),z},Fn.prototype.addToSortKeyRanges=function(h,v){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===v?_.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:h,symbolInstanceEnd:h+1})},Fn.prototype.sortFeatures=function(h){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,R=this.symbolInstanceIndexes;_<R.length;_+=1){var F=this.symbolInstances.get(R[_]);this.featureSortOrder.push(F.featureIndex),[F.rightJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.leftJustifiedTextSymbolIndex].forEach(function(z,K,de){z>=0&&de.indexOf(z)===K&&v.addIndicesForPlacedSymbol(v.text,z)}),F.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,F.verticalPlacedTextSymbolIndex),F.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.placedIconSymbolIndex),F.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ni("SymbolBucket",Fn,{omit:["layers","collisionBoxArray","features","compareText"]}),Fn.MAX_GLYPHS=65535,Fn.addDynamicAttributes=Xn;var Gi=new Ss({"symbol-placement":new Ji(Rt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ji(Rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ji(Rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wi(Rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ji(Rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ji(Rt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ji(Rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ji(Rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ji(Rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new wi(Rt.layout_symbol["icon-size"]),"icon-text-fit":new Ji(Rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ji(Rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new wi(Rt.layout_symbol["icon-image"]),"icon-rotate":new wi(Rt.layout_symbol["icon-rotate"]),"icon-padding":new Ji(Rt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ji(Rt.layout_symbol["icon-keep-upright"]),"icon-offset":new wi(Rt.layout_symbol["icon-offset"]),"icon-anchor":new wi(Rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ji(Rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ji(Rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ji(Rt.layout_symbol["text-rotation-alignment"]),"text-field":new wi(Rt.layout_symbol["text-field"]),"text-font":new wi(Rt.layout_symbol["text-font"]),"text-size":new wi(Rt.layout_symbol["text-size"]),"text-max-width":new wi(Rt.layout_symbol["text-max-width"]),"text-line-height":new Ji(Rt.layout_symbol["text-line-height"]),"text-letter-spacing":new wi(Rt.layout_symbol["text-letter-spacing"]),"text-justify":new wi(Rt.layout_symbol["text-justify"]),"text-radial-offset":new wi(Rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ji(Rt.layout_symbol["text-variable-anchor"]),"text-anchor":new wi(Rt.layout_symbol["text-anchor"]),"text-max-angle":new Ji(Rt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ji(Rt.layout_symbol["text-writing-mode"]),"text-rotate":new wi(Rt.layout_symbol["text-rotate"]),"text-padding":new Ji(Rt.layout_symbol["text-padding"]),"text-keep-upright":new Ji(Rt.layout_symbol["text-keep-upright"]),"text-transform":new wi(Rt.layout_symbol["text-transform"]),"text-offset":new wi(Rt.layout_symbol["text-offset"]),"text-allow-overlap":new Ji(Rt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ji(Rt.layout_symbol["text-ignore-placement"]),"text-optional":new Ji(Rt.layout_symbol["text-optional"])}),xa={paint:new Ss({"icon-opacity":new wi(Rt.paint_symbol["icon-opacity"]),"icon-color":new wi(Rt.paint_symbol["icon-color"]),"icon-halo-color":new wi(Rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new wi(Rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wi(Rt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ji(Rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ji(Rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new wi(Rt.paint_symbol["text-opacity"]),"text-color":new wi(Rt.paint_symbol["text-color"],{runtimeType:ri,getOverride:function(h){return h.textColor},hasOverride:function(h){return!!h.textColor}}),"text-halo-color":new wi(Rt.paint_symbol["text-halo-color"]),"text-halo-width":new wi(Rt.paint_symbol["text-halo-width"]),"text-halo-blur":new wi(Rt.paint_symbol["text-halo-blur"]),"text-translate":new Ji(Rt.paint_symbol["text-translate"]),"text-translate-anchor":new Ji(Rt.paint_symbol["text-translate-anchor"])}),layout:Gi},Da=function(h){this.type=h.property.overrides?h.property.overrides.runtimeType:ci,this.defaultValue=h};Da.prototype.evaluate=function(h){if(h.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(h.formattedSection))return v.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default},Da.prototype.eachChild=function(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)},Da.prototype.outputDefined=function(){return!1},Da.prototype.serialize=function(){return null},Ni("FormatSectionOverride",Da,{omit:["defaultValue"]});var zo=function(h){function v(_){h.call(this,_,xa)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){if(h.prototype.recalculate.call(this,_,R),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var F=this.layout.get("text-writing-mode");if(F){for(var z=[],K=0,de=F;K<de.length;K+=1){var Be=de[K];z.indexOf(Be)<0&&z.push(Be)}this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(_,R,F,z){var K=this.layout.get(_).evaluate(R,{},F,z),de=this._unevaluatedLayout._values[_];return de.isDataDriven()||nh(de.value)||!K?K:function(Be,it){return it.replace(/{([^{}]+)}/g,function(ht,xt){return xt in Be?String(Be[xt]):""})}(R.properties,K)},v.prototype.createBucket=function(_){return new Fn(_)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var _=0,R=xa.paint.overridableProperties;_<R.length;_+=1){var F=R[_];if(v.hasPaintOverride(this.layout,F)){var z,K=this.paint.get(F),de=new Da(K),Be=new df(de,K.property.specification);z=K.value.kind==="constant"||K.value.kind==="source"?new Of("source",Be):new ah("composite",Be,K.value.zoomStops,K.value._interpolationType),this.paint._values[F]=new xl(K.property,z,K.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!(!this.layout||R.isDataDriven()||F.isDataDriven())&&v.hasPaintOverride(this.layout,_)},v.hasPaintOverride=function(_,R){var F=_.get("text-field"),z=xa.paint.properties[R],K=!1,de=function(ht){for(var xt=0,Lt=ht;xt<Lt.length;xt+=1)if(z.overrides&&z.overrides.hasOverride(Lt[xt]))return void(K=!0)};if(F.value.kind==="constant"&&F.value.value instanceof fo)de(F.value.value.sections);else if(F.value.kind==="source"){var Be=function(ht){K||(ht instanceof tn&&er(ht.value)===Ya?de(ht.value.sections):ht instanceof Vi?de(ht.sections):ht.eachChild(Be))},it=F.value;it._styleExpression&&Be(it._styleExpression.expression)}return K},v}(mc),za={paint:new Ss({"background-color":new Ji(Rt.paint_background["background-color"]),"background-pattern":new bl(Rt.paint_background["background-pattern"]),"background-opacity":new Ji(Rt.paint_background["background-opacity"])})},ql=function(h){function v(_){h.call(this,_,za)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(mc),Cg={paint:new Ss({"raster-opacity":new Ji(Rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ji(Rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ji(Rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ji(Rt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ji(Rt.paint_raster["raster-saturation"]),"raster-contrast":new Ji(Rt.paint_raster["raster-contrast"]),"raster-resampling":new Ji(Rt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ji(Rt.paint_raster["raster-fade-duration"])})},nf=function(h){function v(_){h.call(this,_,Cg)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(mc),bm=function(h){function v(_){h.call(this,_,{}),this.implementation=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},v.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},v}(mc),Ef={circle:id,heatmap:bc,hillshade:b0,fill:vm,"fill-extrusion":gm,line:Eg,symbol:zo,background:ql,raster:nf},Sm=Q.HTMLImageElement,Pv=Q.HTMLCanvasElement,m_=Q.HTMLVideoElement,M0=Q.ImageData,ud=Q.ImageBitmap,ld=function(h,v,_,R){this.context=h,this.format=_,this.texture=h.gl.createTexture(),this.update(v,R)};ld.prototype.update=function(h,v,_){var R=h.width,F=h.height,z=!(this.size&&this.size[0]===R&&this.size[1]===F||_),K=this.context,de=K.gl;if(this.useMipmap=!!(v&&v.useMipmap),de.bindTexture(de.TEXTURE_2D,this.texture),K.pixelStoreUnpackFlipY.set(!1),K.pixelStoreUnpack.set(1),K.pixelStoreUnpackPremultiplyAlpha.set(this.format===de.RGBA&&(!v||v.premultiply!==!1)),z)this.size=[R,F],h instanceof Sm||h instanceof Pv||h instanceof m_||h instanceof M0||ud&&h instanceof ud?de.texImage2D(de.TEXTURE_2D,0,this.format,this.format,de.UNSIGNED_BYTE,h):de.texImage2D(de.TEXTURE_2D,0,this.format,R,F,0,this.format,de.UNSIGNED_BYTE,h.data);else{var Be=_||{x:0,y:0},it=Be.x,ht=Be.y;h instanceof Sm||h instanceof Pv||h instanceof m_||h instanceof M0||ud&&h instanceof ud?de.texSubImage2D(de.TEXTURE_2D,0,it,ht,de.RGBA,de.UNSIGNED_BYTE,h):de.texSubImage2D(de.TEXTURE_2D,0,it,ht,R,F,de.RGBA,de.UNSIGNED_BYTE,h.data)}this.useMipmap&&this.isSizePowerOfTwo()&&de.generateMipmap(de.TEXTURE_2D)},ld.prototype.bind=function(h,v,_){var R=this.context.gl;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),h!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,h),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||h),this.filter=h),v!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,v),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,v),this.wrap=v)},ld.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ld.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Tg=function(h){var v=this;this._callback=h,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};Tg.prototype.trigger=function(){var h=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){h._triggered=!1,h._callback()},0))},Tg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var kv=function(h,v,_){this.target=h,this.parent=v,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ne(["receive","process"],this),this.invoker=new Tg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ke()?h:Q};function Em(h,v,_){var R=2*Math.PI*6378137/256/Math.pow(2,_);return[h*R-2*Math.PI*6378137/2,v*R-2*Math.PI*6378137/2]}kv.prototype.send=function(h,v,_,R,F){var z=this;F===void 0&&(F=!1);var K=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[K]=_);var de=Ke(this.globalScope)?void 0:[];return this.target.postMessage({id:K,type:h,hasCallback:!!_,targetMapId:R,mustQueue:F,sourceMapId:this.mapId,data:_l(v,de)},de),{cancel:function(){_&&delete z.callbacks[K],z.target.postMessage({id:K,type:"<cancel>",targetMapId:R,sourceMapId:z.mapId})}}},kv.prototype.receive=function(h){var v=h.data,_=v.id;if(_&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[_];var R=this.cancelCallbacks[_];delete this.cancelCallbacks[_],R&&R()}else ke()||v.mustQueue?(this.tasks[_]=v,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,v)},kv.prototype.process=function(){if(this.taskQueue.length){var h=this.taskQueue.shift(),v=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(h,v)}},kv.prototype.processTask=function(h,v){var _=this;if(v.type==="<response>"){var R=this.callbacks[h];delete this.callbacks[h],R&&(v.error?R(Ho(v.error)):R(null,Ho(v.data)))}else{var F=!1,z=Ke(this.globalScope)?void 0:[],K=v.hasCallback?function(ht,xt){F=!0,delete _.cancelCallbacks[h],_.target.postMessage({id:h,type:"<response>",sourceMapId:_.mapId,error:ht?_l(ht):null,data:_l(xt,z)},z)}:function(ht){F=!0},de=null,Be=Ho(v.data);if(this.parent[v.type])de=this.parent[v.type](v.sourceMapId,Be,K);else if(this.parent.getWorkerSource){var it=v.type.split(".");de=this.parent.getWorkerSource(v.sourceMapId,it[0],Be.source)[it[1]](Be,K)}else K(new Error("Could not find function "+v.type));!F&&de&&de.cancel&&(this.cancelCallbacks[h]=de.cancel)}},kv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ru=function(h,v){h&&(v?this.setSouthWest(h).setNorthEast(v):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))};Ru.prototype.setNorthEast=function(h){return this._ne=h instanceof Ws?new Ws(h.lng,h.lat):Ws.convert(h),this},Ru.prototype.setSouthWest=function(h){return this._sw=h instanceof Ws?new Ws(h.lng,h.lat):Ws.convert(h),this},Ru.prototype.extend=function(h){var v,_,R=this._sw,F=this._ne;if(h instanceof Ws)v=h,_=h;else{if(!(h instanceof Ru))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(Ru.convert(h)):this.extend(Ws.convert(h)):this;if(_=h._ne,!(v=h._sw)||!_)return this}return R||F?(R.lng=Math.min(v.lng,R.lng),R.lat=Math.min(v.lat,R.lat),F.lng=Math.max(_.lng,F.lng),F.lat=Math.max(_.lat,F.lat)):(this._sw=new Ws(v.lng,v.lat),this._ne=new Ws(_.lng,_.lat)),this},Ru.prototype.getCenter=function(){return new Ws((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ru.prototype.getSouthWest=function(){return this._sw},Ru.prototype.getNorthEast=function(){return this._ne},Ru.prototype.getNorthWest=function(){return new Ws(this.getWest(),this.getNorth())},Ru.prototype.getSouthEast=function(){return new Ws(this.getEast(),this.getSouth())},Ru.prototype.getWest=function(){return this._sw.lng},Ru.prototype.getSouth=function(){return this._sw.lat},Ru.prototype.getEast=function(){return this._ne.lng},Ru.prototype.getNorth=function(){return this._ne.lat},Ru.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ru.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ru.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ru.prototype.contains=function(h){var v=Ws.convert(h),_=v.lng,R=v.lat,F=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(F=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=R&&R<=this._ne.lat&&F},Ru.convert=function(h){return!h||h instanceof Ru?h:new Ru(h)};var Ws=function(h,v){if(isNaN(h)||isNaN(v))throw new Error("Invalid LngLat object: ("+h+", "+v+")");if(this.lng=+h,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ws.prototype.wrap=function(){return new Ws(A(this.lng,-180,180),this.lat)},Ws.prototype.toArray=function(){return[this.lng,this.lat]},Ws.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ws.prototype.distanceTo=function(h){var v=Math.PI/180,_=this.lat*v,R=h.lat*v,F=Math.sin(_)*Math.sin(R)+Math.cos(_)*Math.cos(R)*Math.cos((h.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min(F,1))},Ws.prototype.toBounds=function(h){h===void 0&&(h=0);var v=360*h/40075017,_=v/Math.cos(Math.PI/180*this.lat);return new Ru(new Ws(this.lng-_,this.lat-v),new Ws(this.lng+_,this.lat+v))},Ws.convert=function(h){if(h instanceof Ws)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Ws(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Ws(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var y_=2*Math.PI*63710088e-1;function R0(h){return y_*Math.cos(h*Math.PI/180)}function I0(h){return(180+h)/360}function Dv(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function O0(h,v){return h/R0(v)}function Qo(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}var ks=function(h,v,_){_===void 0&&(_=0),this.x=+h,this.y=+v,this.z=+_};ks.fromLngLat=function(h,v){v===void 0&&(v=0);var _=Ws.convert(h);return new ks(I0(_.lng),Dv(_.lat),O0(v,_.lat))},ks.prototype.toLngLat=function(){return new Ws(360*this.x-180,Qo(this.y))},ks.prototype.toAltitude=function(){return this.z*R0(Qo(this.y))},ks.prototype.meterInMercatorCoordinateUnits=function(){return 1/y_*(h=Qo(this.y),1/Math.cos(h*Math.PI/180));var h};var Gh=function(h,v,_){this.z=h,this.x=v,this.y=_,this.key=Ag(0,h,h,v,_)};Gh.prototype.equals=function(h){return this.z===h.z&&this.x===h.x&&this.y===h.y},Gh.prototype.url=function(h,v){var _,R,F,z,K,de=(R=this.y,F=this.z,z=Em(256*(_=this.x),256*(R=Math.pow(2,F)-R-1),F),K=Em(256*(_+1),256*(R+1),F),z[0]+","+z[1]+","+K[0]+","+K[1]),Be=function(it,ht,xt){for(var Lt,Ht="",ur=it;ur>0;ur--)Ht+=(ht&(Lt=1<<ur-1)?1:0)+(xt&Lt?2:0);return Ht}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Be).replace("{bbox-epsg-3857}",de)},Gh.prototype.getTilePoint=function(h){var v=Math.pow(2,this.z);return new Y(8192*(h.x*v-this.x),8192*(h.y*v-this.y))},Gh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var wm=function(h,v){this.wrap=h,this.canonical=v,this.key=Ag(h,v.z,v.z,v.x,v.y)},Iu=function(h,v,_,R,F){this.overscaledZ=h,this.wrap=v,this.canonical=new Gh(_,+R,+F),this.key=Ag(v,h,_,R,F)};function Ag(h,v,_,R,F){(h*=2)<0&&(h=-1*h-1);var z=1<<_;return(z*z*h+z*F+R).toString(36)+_.toString(36)+v.toString(36)}Iu.prototype.equals=function(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)},Iu.prototype.scaledTo=function(h){var v=this.canonical.z-h;return h>this.canonical.z?new Iu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Iu(h,this.wrap,h,this.canonical.x>>v,this.canonical.y>>v)},Iu.prototype.calculateScaledKey=function(h,v){var _=this.canonical.z-h;return h>this.canonical.z?Ag(this.wrap*+v,h,this.canonical.z,this.canonical.x,this.canonical.y):Ag(this.wrap*+v,h,h,this.canonical.x>>_,this.canonical.y>>_)},Iu.prototype.isChildOf=function(h){if(h.wrap!==this.wrap)return!1;var v=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>v&&h.canonical.y===this.canonical.y>>v},Iu.prototype.children=function(h){if(this.overscaledZ>=h)return[new Iu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,_=2*this.canonical.x,R=2*this.canonical.y;return[new Iu(v,this.wrap,v,_,R),new Iu(v,this.wrap,v,_+1,R),new Iu(v,this.wrap,v,_,R+1),new Iu(v,this.wrap,v,_+1,R+1)]},Iu.prototype.isLessThan=function(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))},Iu.prototype.wrapped=function(){return new Iu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Iu.prototype.unwrapTo=function(h){return new Iu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)},Iu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Iu.prototype.toUnwrapped=function(){return new wm(this.wrap,this.canonical)},Iu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Iu.prototype.getTilePoint=function(h){return this.canonical.getTilePoint(new ks(h.x-this.wrap,h.y))},Ni("CanonicalTileID",Gh),Ni("OverscaledTileID",Iu,{omit:["posMatrix"]});var Vf=function(h,v,_){if(this.uid=h,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return ze('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var R=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=_||"mapbox";for(var F=0;F<R;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(R,F)]=this.data[this._idx(R-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,R)]=this.data[this._idx(F,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)]};Vf.prototype.get=function(h,v){var _=new Uint8Array(this.data.buffer),R=4*this._idx(h,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[R],_[R+1],_[R+2])},Vf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Vf.prototype._idx=function(h,v){if(h<-1||h>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(h+1)},Vf.prototype._unpackMapbox=function(h,v,_){return(256*h*256+256*v+_)/10-1e4},Vf.prototype._unpackTerrarium=function(h,v,_){return 256*h+v+_/256-32768},Vf.prototype.getPixels=function(){return new kl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vf.prototype.backfillBorder=function(h,v,_){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");var R=v*this.dim,F=v*this.dim+this.dim,z=_*this.dim,K=_*this.dim+this.dim;switch(v){case-1:R=F-1;break;case 1:F=R+1}switch(_){case-1:z=K-1;break;case 1:K=z+1}for(var de=-v*this.dim,Be=-_*this.dim,it=z;it<K;it++)for(var ht=R;ht<F;ht++)this.data[this._idx(ht,it)]=h.data[this._idx(ht+de,it+Be)]},Ni("DEMData",Vf);var qd=function(h){this._stringToNumber={},this._numberToString=[];for(var v=0;v<h.length;v++){var _=h[v];this._stringToNumber[_]=v,this._numberToString[v]=_}};qd.prototype.encode=function(h){return this._stringToNumber[h]},qd.prototype.decode=function(h){return this._numberToString[h]};var af=function(h,v,_,R,F){this.type="Feature",this._vectorTileFeature=h,h._z=v,h._x=_,h._y=R,this.properties=h.properties,this.id=F},__={geometry:{configurable:!0}};__.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},__.geometry.set=function(h){this._geometry=h},af.prototype.toJSON=function(){var h={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(h[v]=this[v]);return h},Object.defineProperties(af.prototype,__);var Lv=function(){this.state={},this.stateChanges={},this.deletedStates={}};Lv.prototype.updateState=function(h,v,_){var R=String(v);if(this.stateChanges[h]=this.stateChanges[h]||{},this.stateChanges[h][R]=this.stateChanges[h][R]||{},b(this.stateChanges[h][R],_),this.deletedStates[h]===null)for(var F in this.deletedStates[h]={},this.state[h])F!==R&&(this.deletedStates[h][F]=null);else if(this.deletedStates[h]&&this.deletedStates[h][R]===null)for(var z in this.deletedStates[h][R]={},this.state[h][R])_[z]||(this.deletedStates[h][R][z]=null);else for(var K in _)this.deletedStates[h]&&this.deletedStates[h][R]&&this.deletedStates[h][R][K]===null&&delete this.deletedStates[h][R][K]},Lv.prototype.removeFeatureState=function(h,v,_){if(this.deletedStates[h]!==null){var R=String(v);if(this.deletedStates[h]=this.deletedStates[h]||{},_&&v!==void 0)this.deletedStates[h][R]!==null&&(this.deletedStates[h][R]=this.deletedStates[h][R]||{},this.deletedStates[h][R][_]=null);else if(v!==void 0)if(this.stateChanges[h]&&this.stateChanges[h][R])for(_ in this.deletedStates[h][R]={},this.stateChanges[h][R])this.deletedStates[h][R][_]=null;else this.deletedStates[h][R]=null;else this.deletedStates[h]=null}},Lv.prototype.getState=function(h,v){var _=String(v),R=b({},(this.state[h]||{})[_],(this.stateChanges[h]||{})[_]);if(this.deletedStates[h]===null)return{};if(this.deletedStates[h]){var F=this.deletedStates[h][v];if(F===null)return{};for(var z in F)delete R[z]}return R},Lv.prototype.initializeTileState=function(h,v){h.setFeatureState(this.state,v)},Lv.prototype.coalesceChanges=function(h,v){var _={};for(var R in this.stateChanges){this.state[R]=this.state[R]||{};var F={};for(var z in this.stateChanges[R])this.state[R][z]||(this.state[R][z]={}),b(this.state[R][z],this.stateChanges[R][z]),F[z]=this.state[R][z];_[R]=F}for(var K in this.deletedStates){this.state[K]=this.state[K]||{};var de={};if(this.deletedStates[K]===null)for(var Be in this.state[K])de[Be]={},this.state[K][Be]={};else for(var it in this.deletedStates[K]){if(this.deletedStates[K][it]===null)this.state[K][it]={};else for(var ht=0,xt=Object.keys(this.deletedStates[K][it]);ht<xt.length;ht+=1)delete this.state[K][it][xt[ht]];de[it]=this.state[K][it]}_[K]=_[K]||{},b(_[K],de)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var Lt in h)h[Lt].setFeatureState(_,v)};var Vu=function(h,v){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new su(8192,16,0),this.grid3D=new su(8192,16,0),this.featureIndexArray=new Et,this.promoteId=v};function sc(h,v,_,R,F){return We(h,function(z,K){var de=v instanceof gf?v.get(K):null;return de&&de.evaluate?de.evaluate(_,R,F):de})}function Ec(h){for(var v=1/0,_=1/0,R=-1/0,F=-1/0,z=0,K=h;z<K.length;z+=1){var de=K[z];v=Math.min(v,de.x),_=Math.min(_,de.y),R=Math.max(R,de.x),F=Math.max(F,de.y)}return{minX:v,minY:_,maxX:R,maxY:F}}function Ux(h,v){return v-h}Vu.prototype.insert=function(h,v,_,R,F,z){var K=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,R,F);for(var de=z?this.grid3D:this.grid,Be=0;Be<v.length;Be++){for(var it=v[Be],ht=[1/0,1/0,-1/0,-1/0],xt=0;xt<it.length;xt++){var Lt=it[xt];ht[0]=Math.min(ht[0],Lt.x),ht[1]=Math.min(ht[1],Lt.y),ht[2]=Math.max(ht[2],Lt.x),ht[3]=Math.max(ht[3],Lt.y)}ht[0]<8192&&ht[1]<8192&&ht[2]>=0&&ht[3]>=0&&de.insert(K,ht[0],ht[1],ht[2],ht[3])}},Vu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Hh.VectorTile(new fn(this.rawTileData)).layers,this.sourceLayerCoder=new qd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Vu.prototype.query=function(h,v,_,R){var F=this;this.loadVTLayers();for(var z=h.params||{},K=8192/h.tileSize/h.scale,de=Pf(z.filter),Be=h.queryGeometry,it=h.queryPadding*K,ht=Ec(Be),xt=this.grid.query(ht.minX-it,ht.minY-it,ht.maxX+it,ht.maxY+it),Lt=Ec(h.cameraQueryGeometry),Ht=this.grid3D.query(Lt.minX-it,Lt.minY-it,Lt.maxX+it,Lt.maxY+it,function(gn,Tn,Ln,pi){return function(Ei,Ki,Di,ia,Oi){for(var ro=0,Yi=Ei;ro<Yi.length;ro+=1){var $i=Yi[ro];if(Ki<=$i.x&&Di<=$i.y&&ia>=$i.x&&Oi>=$i.y)return!0}var mo=[new Y(Ki,Di),new Y(Ki,Oi),new Y(ia,Oi),new Y(ia,Di)];if(Ei.length>2){for(var Wa=0,no=mo;Wa<no.length;Wa+=1)if(Vl(Ei,no[Wa]))return!0}for(var xi=0;xi<Ei.length-1;xi++)if(_f(Ei[xi],Ei[xi+1],mo))return!0;return!1}(h.cameraQueryGeometry,gn-it,Tn-it,Ln+it,pi+it)}),ur=0,pr=Ht;ur<pr.length;ur+=1)xt.push(pr[ur]);xt.sort(Ux);for(var zr,Or={},qr=function(gn){var Tn=xt[gn];if(Tn!==zr){zr=Tn;var Ln=F.featureIndexArray.get(Tn),pi=null;F.loadMatchingFeature(Or,Ln.bucketIndex,Ln.sourceLayerIndex,Ln.featureIndex,de,z.layers,z.availableImages,v,_,R,function(Ei,Ki,Di){return pi||(pi=es(Ei)),Ki.queryIntersectsFeature(Be,Ei,Di,pi,F.z,h.transform,K,h.pixelPosMatrix)})}},on=0;on<xt.length;on++)qr(on);return Or},Vu.prototype.loadMatchingFeature=function(h,v,_,R,F,z,K,de,Be,it,ht){var xt=this.bucketLayerIDs[v];if(!z||function(Ei,Ki){for(var Di=0;Di<Ei.length;Di++)if(Ki.indexOf(Ei[Di])>=0)return!0;return!1}(z,xt)){var Lt=this.sourceLayerCoder.decode(_),Ht=this.vtLayers[Lt].feature(R);if(F.needGeometry){var ur=ws(Ht,!0);if(!F.filter(new Ca(this.tileID.overscaledZ),ur,this.tileID.canonical))return}else if(!F.filter(new Ca(this.tileID.overscaledZ),Ht))return;for(var pr=this.getId(Ht,Lt),zr=0;zr<xt.length;zr++){var Or=xt[zr];if(!(z&&z.indexOf(Or)<0)){var qr=de[Or];if(qr){var on={};pr!==void 0&&it&&(on=it.getState(qr.sourceLayer||"_geojsonTileLayer",pr));var gn=b({},Be[Or]);gn.paint=sc(gn.paint,qr.paint,Ht,on,K),gn.layout=sc(gn.layout,qr.layout,Ht,on,K);var Tn=!ht||ht(Ht,qr,on);if(Tn){var Ln=new af(Ht,this.z,this.x,this.y,pr);Ln.layer=gn;var pi=h[Or];pi===void 0&&(pi=h[Or]=[]),pi.push({featureIndex:R,feature:Ln,intersectionZ:Tn})}}}}}},Vu.prototype.lookupSymbolFeatures=function(h,v,_,R,F,z,K,de){var Be={};this.loadVTLayers();for(var it=Pf(F),ht=0,xt=h;ht<xt.length;ht+=1)this.loadMatchingFeature(Be,_,R,xt[ht],it,z,K,de,v);return Be},Vu.prototype.hasLayer=function(h){for(var v=0,_=this.bucketLayerIDs;v<_.length;v+=1)for(var R=0,F=_[v];R<F.length;R+=1)if(h===F[R])return!0;return!1},Vu.prototype.getId=function(h,v){var _=h.id;return this.promoteId&&typeof(_=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(_=Number(_)),_},Ni("FeatureIndex",Vu,{omit:["rawTileData","sourceLayerCoder"]});var Xa=function(h,v){this.tileID=h,this.uid=le(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xa.prototype.registerFadeDuration=function(h){var v=h+this.timeAdded;v<rt.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},Xa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Xa.prototype.loadVectorData=function(h,v,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",h){for(var R in h.featureIndex&&(this.latestFeatureIndex=h.featureIndex,h.rawTileData?(this.latestRawTileData=h.rawTileData,this.latestFeatureIndex.rawTileData=h.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=h.collisionBoxArray,this.buckets=function(it,ht){var xt={};if(!ht)return xt;for(var Lt=function(){var pr=ur[Ht],zr=pr.layerIds.map(function(on){return ht.getLayer(on)}).filter(Boolean);if(zr.length!==0){pr.layers=zr,pr.stateDependentLayerIds&&(pr.stateDependentLayers=pr.stateDependentLayerIds.map(function(on){return zr.filter(function(gn){return gn.id===on})[0]}));for(var Or=0,qr=zr;Or<qr.length;Or+=1)xt[qr[Or].id]=pr}},Ht=0,ur=it;Ht<ur.length;Ht+=1)Lt();return xt}(h.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var F=this.buckets[R];if(F instanceof Fn){if(this.hasSymbolBuckets=!0,!_)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var z in this.buckets){var K=this.buckets[z];if(K instanceof Fn&&K.hasRTLText){this.hasRTLText=!0,ac.isLoading()||ac.isLoaded()||Ev()!=="deferred"||ic();break}}for(var de in this.queryPadding=0,this.buckets){var Be=this.buckets[de];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(de).queryRadius(Be))}h.imageAtlas&&(this.imageAtlas=h.imageAtlas),h.glyphAtlasImage&&(this.glyphAtlasImage=h.glyphAtlasImage)}else this.collisionBoxArray=new M},Xa.prototype.unloadVectorData=function(){for(var h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xa.prototype.getBucket=function(h){return this.buckets[h.id]},Xa.prototype.upload=function(h){for(var v in this.buckets){var _=this.buckets[v];_.uploadPending()&&_.upload(h)}var R=h.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ld(h,this.imageAtlas.image,R.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ld(h,this.glyphAtlasImage,R.ALPHA),this.glyphAtlasImage=null)},Xa.prototype.prepare=function(h){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(h,this.imageAtlasTexture)},Xa.prototype.queryRenderedFeatures=function(h,v,_,R,F,z,K,de,Be,it){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:R,cameraQueryGeometry:F,scale:z,tileSize:this.tileSize,pixelPosMatrix:it,transform:de,params:K,queryPadding:this.queryPadding*Be},h,v,_):{}},Xa.prototype.querySourceFeatures=function(h,v){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var R=_.loadVTLayers(),F=v?v.sourceLayer:"",z=R._geojsonTileLayer||R[F];if(z)for(var K=Pf(v&&v.filter),de=this.tileID.canonical,Be=de.z,it=de.x,ht=de.y,xt={z:Be,x:it,y:ht},Lt=0;Lt<z.length;Lt++){var Ht=z.feature(Lt);if(K.needGeometry){var ur=ws(Ht,!0);if(!K.filter(new Ca(this.tileID.overscaledZ),ur,this.tileID.canonical))continue}else if(!K.filter(new Ca(this.tileID.overscaledZ),Ht))continue;var pr=_.getId(Ht,F),zr=new af(Ht,Be,it,ht,pr);zr.tile=xt,h.push(zr)}}},Xa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Xa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xa.prototype.setExpiryData=function(h){var v=this.expirationTime;if(h.cacheControl){var _=tt(h.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else h.expires&&(this.expirationTime=new Date(h.expires).getTime());if(this.expirationTime){var R=Date.now(),F=!1;if(this.expirationTime>R)F=!1;else if(v)if(this.expirationTime<v)F=!0;else{var z=this.expirationTime-v;z?this.expirationTime=R+Math.max(z,3e4):F=!0}else F=!0;F?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Xa.prototype.setFeatureState=function(h,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(h).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var R in this.buckets)if(v.style.hasLayer(R)){var F=this.buckets[R],z=F.layers[0].sourceLayer||"_geojsonTileLayer",K=_[z],de=h[z];if(K&&de&&Object.keys(de).length!==0){F.update(de,K,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Be=v&&v.style&&v.style.getLayer(R);Be&&(this.queryPadding=Math.max(this.queryPadding,Be.queryRadius(F)))}}}},Xa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Xa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<rt.now()},Xa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xa.prototype.setHoldDuration=function(h){this.symbolFadeHoldUntil=rt.now()+h},Xa.prototype.setDependencies=function(h,v){for(var _={},R=0,F=v;R<F.length;R+=1)_[F[R]]=!0;this.dependencies[h]=_},Xa.prototype.hasDependency=function(h,v){for(var _=0,R=h;_<R.length;_+=1){var F=this.dependencies[R[_]];if(F){for(var z=0,K=v;z<K.length;z+=1)if(F[K[z]])return!0}}return!1};var of=Q.performance,Op=function(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},of.mark(this._marks.start)};Op.prototype.finish=function(){of.mark(this._marks.end);var h=of.getEntriesByName(this._marks.measure);return h.length===0&&(of.measure(this._marks.measure,this._marks.start,this._marks.end),h=of.getEntriesByName(this._marks.measure),of.clearMarks(this._marks.start),of.clearMarks(this._marks.end),of.clearMeasures(this._marks.measure)),h},w.Actor=kv,w.AlphaImage=tf,w.CanonicalTileID=Gh,w.CollisionBoxArray=M,w.Color=Ci,w.DEMData=Vf,w.DataConstantProperty=Ji,w.DictionaryCoder=qd,w.EXTENT=8192,w.ErrorEvent=$t,w.EvaluationParameters=Ca,w.Event=St,w.Evented=vr,w.FeatureIndex=Vu,w.FillBucket=Bc,w.FillExtrusionBucket=cl,w.ImageAtlas=Dn,w.ImagePosition=Ai,w.LineBucket=wl,w.LngLat=Ws,w.LngLatBounds=Ru,w.MercatorCoordinate=ks,w.ONE_EM=24,w.OverscaledTileID=Iu,w.Point=Y,w.Point$1=Y,w.Properties=Ss,w.Protobuf=fn,w.RGBAImage=kl,w.RequestManager=je,w.RequestPerformance=Op,w.ResourceType=oe,w.SegmentVector=Xt,w.SourceFeatureState=Lv,w.StructArrayLayout1ui2=Ul,w.StructArrayLayout2f1f2i16=pn,w.StructArrayLayout2i4=Bh,w.StructArrayLayout3ui6=Ve,w.StructArrayLayout4i8=Ff,w.SymbolBucket=Fn,w.Texture=ld,w.Tile=Xa,w.Transitionable=Gu,w.Uniform1f=ui,w.Uniform1i=Vn,w.Uniform2f=li,w.Uniform3f=Ri,w.Uniform4f=ea,w.UniformColor=ua,w.UniformMatrix4f=uo,w.UnwrappedTileID=wm,w.ValidationError=ct,w.WritingMode=ta,w.ZoomHistory=ed,w.add=function(h,v,_){return h[0]=v[0]+_[0],h[1]=v[1]+_[1],h[2]=v[2]+_[2],h},w.addDynamicAttributes=Xn,w.asyncAll=function(h,v,_){if(!h.length)return _(null,[]);var R=h.length,F=new Array(h.length),z=null;h.forEach(function(K,de){v(K,function(Be,it){Be&&(z=Be),F[de]=it,--R==0&&_(z,F)})})},w.bezier=se,w.bindAll=Ne,w.browser=rt,w.cacheEntryPossiblyAdded=function(h){++ue>fr&&(h.getActor().send("enforceCacheSizeLimit",qt),ue=0)},w.clamp=$,w.clearTileCache=function(h){var v=Q.caches.delete("mapbox-tiles");h&&v.catch(h).then(function(){return h()})},w.clipLine=mu,w.clone=function(h){var v=new vo(16);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=h[6],v[7]=h[7],v[8]=h[8],v[9]=h[9],v[10]=h[10],v[11]=h[11],v[12]=h[12],v[13]=h[13],v[14]=h[14],v[15]=h[15],v},w.clone$1=we,w.clone$2=function(h){var v=new vo(3);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v},w.collisionCircleLayout=ot,w.config=Je,w.create=function(){var h=new vo(16);return vo!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},w.create$1=function(){var h=new vo(9);return vo!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h},w.create$2=function(){var h=new vo(4);return vo!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},w.createCommonjsModule=X,w.createExpression=ih,w.createLayout=uu,w.createStyleLayer=function(h){return h.type==="custom"?new bm(h):new Ef[h.type](h)},w.cross=function(h,v,_){var R=v[0],F=v[1],z=v[2],K=_[0],de=_[1],Be=_[2];return h[0]=F*Be-z*de,h[1]=z*K-R*Be,h[2]=R*de-F*K,h},w.deepEqual=function h(v,_){if(Array.isArray(v)){if(!Array.isArray(_)||v.length!==_.length)return!1;for(var R=0;R<v.length;R++)if(!h(v[R],_[R]))return!1;return!0}if(typeof v=="object"&&v!==null&&_!==null){if(typeof _!="object"||Object.keys(v).length!==Object.keys(_).length)return!1;for(var F in v)if(!h(v[F],_[F]))return!1;return!0}return v===_},w.dot=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]},w.dot$1=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]+h[3]*v[3]},w.ease=ne,w.emitValidationErrors=Df,w.endsWith=Te,w.enforceCacheSizeLimit=function(h){hr(),en&&en.then(function(v){v.keys().then(function(_){for(var R=0;R<_.length-h;R++)v.delete(_[R])})})},w.evaluateSizeForFeature=vs,w.evaluateSizeForZoom=cu,w.evaluateVariableOffset=Zr,w.evented=Lf,w.extend=b,w.featureFilter=Pf,w.filterObject=_e,w.fromRotation=function(h,v){var _=Math.sin(v),R=Math.cos(v);return h[0]=R,h[1]=_,h[2]=0,h[3]=-_,h[4]=R,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},w.getAnchorAlignment=Wo,w.getAnchorJustification=Gr,w.getArrayBuffer=wt,w.getImage=ve,w.getJSON=function(h,v){return Zt(b(h,{type:"json"}),v)},w.getRTLTextPluginStatus=Ev,w.getReferrer=qe,w.getVideo=function(h,v){var _,R,F=Q.document.createElement("video");F.muted=!0,F.onloadstart=function(){v(null,F)};for(var z=0;z<h.length;z++){var K=Q.document.createElement("source");_=h[z],R=void 0,(R=Q.document.createElement("a")).href=_,(R.protocol!==Q.document.location.protocol||R.host!==Q.document.location.host)&&(F.crossOrigin="Anonymous"),K.src=h[z],F.appendChild(K)}return{cancel:function(){}}},w.identity=Ku,w.invert=function(h,v){var _=v[0],R=v[1],F=v[2],z=v[3],K=v[4],de=v[5],Be=v[6],it=v[7],ht=v[8],xt=v[9],Lt=v[10],Ht=v[11],ur=v[12],pr=v[13],zr=v[14],Or=v[15],qr=_*de-R*K,on=_*Be-F*K,gn=_*it-z*K,Tn=R*Be-F*de,Ln=R*it-z*de,pi=F*it-z*Be,Ei=ht*pr-xt*ur,Ki=ht*zr-Lt*ur,Di=ht*Or-Ht*ur,ia=xt*zr-Lt*pr,Oi=xt*Or-Ht*pr,ro=Lt*Or-Ht*zr,Yi=qr*ro-on*Oi+gn*ia+Tn*Di-Ln*Ki+pi*Ei;return Yi?(h[0]=(de*ro-Be*Oi+it*ia)*(Yi=1/Yi),h[1]=(F*Oi-R*ro-z*ia)*Yi,h[2]=(pr*pi-zr*Ln+Or*Tn)*Yi,h[3]=(Lt*Ln-xt*pi-Ht*Tn)*Yi,h[4]=(Be*Di-K*ro-it*Ki)*Yi,h[5]=(_*ro-F*Di+z*Ki)*Yi,h[6]=(zr*gn-ur*pi-Or*on)*Yi,h[7]=(ht*pi-Lt*gn+Ht*on)*Yi,h[8]=(K*Oi-de*Di+it*Ei)*Yi,h[9]=(R*Di-_*Oi-z*Ei)*Yi,h[10]=(ur*Ln-pr*gn+Or*qr)*Yi,h[11]=(xt*gn-ht*Ln-Ht*qr)*Yi,h[12]=(de*Ki-K*ia-Be*Ei)*Yi,h[13]=(_*ia-R*Ki+F*Ei)*Yi,h[14]=(pr*on-ur*Tn-zr*qr)*Yi,h[15]=(ht*Tn-xt*on+Lt*qr)*Yi,h):null},w.isChar=Qn,w.isMapboxURL=at,w.keysDifference=function(h,v){var _=[];for(var R in h)R in v||_.push(R);return _},w.makeRequest=Zt,w.mapObject=We,w.mercatorXfromLng=I0,w.mercatorYfromLat=Dv,w.mercatorZfromAltitude=O0,w.mul=nd,w.multiply=Mu,w.mvt=Hh,w.nextPowerOfTwo=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},w.normalize=function(h,v){var _=v[0],R=v[1],F=v[2],z=_*_+R*R+F*F;return z>0&&(z=1/Math.sqrt(z)),h[0]=v[0]*z,h[1]=v[1]*z,h[2]=v[2]*z,h},w.number=Rs,w.offscreenCanvasSupported=G,w.ortho=function(h,v,_,R,F,z,K){var de=1/(v-_),Be=1/(R-F),it=1/(z-K);return h[0]=-2*de,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Be,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*it,h[11]=0,h[12]=(v+_)*de,h[13]=(F+R)*Be,h[14]=(K+z)*it,h[15]=1,h},w.parseGlyphPBF=function(h){return new fn(h).readFields(Un,[])},w.pbf=fn,w.performSymbolLayout=function(h,v,_,R,F,z,K){h.createArrays(),h.tilePixelRatio=8192/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;var de=h.layers[0].layout,Be=h.layers[0]._unevaluatedLayout._values,it={};if(h.textSizeData.kind==="composite"){var ht=h.textSizeData,xt=ht.maxZoom;it.compositeTextSizes=[Be["text-size"].possiblyEvaluate(new Ca(ht.minZoom),K),Be["text-size"].possiblyEvaluate(new Ca(xt),K)]}if(h.iconSizeData.kind==="composite"){var Lt=h.iconSizeData,Ht=Lt.maxZoom;it.compositeIconSizes=[Be["icon-size"].possiblyEvaluate(new Ca(Lt.minZoom),K),Be["icon-size"].possiblyEvaluate(new Ca(Ht),K)]}it.layoutTextSize=Be["text-size"].possiblyEvaluate(new Ca(h.zoom+1),K),it.layoutIconSize=Be["icon-size"].possiblyEvaluate(new Ca(h.zoom+1),K),it.textMaxSize=Be["text-size"].possiblyEvaluate(new Ca(18));for(var ur=24*de.get("text-line-height"),pr=de.get("text-rotation-alignment")==="map"&&de.get("symbol-placement")!=="point",zr=de.get("text-keep-upright"),Or=de.get("text-size"),qr=function(){var Tn=gn[on],Ln=de.get("text-font").evaluate(Tn,{},K).join(","),pi=Or.evaluate(Tn,{},K),Ei=it.layoutTextSize.evaluate(Tn,{},K),Ki=it.layoutIconSize.evaluate(Tn,{},K),Di={horizontal:{},vertical:void 0},ia=Tn.text,Oi=[0,0];if(ia){var ro=ia.toString(),Yi=24*de.get("text-letter-spacing").evaluate(Tn,{},K),$i=function(qa){for(var rs=0,Oo=qa;rs<Oo.length;rs+=1)if(yo=Oo[rs].charCodeAt(0),Qn.Arabic(yo)||Qn["Arabic Supplement"](yo)||Qn["Arabic Extended-A"](yo)||Qn["Arabic Presentation Forms-A"](yo)||Qn["Arabic Presentation Forms-B"](yo))return!1;var yo;return!0}(ro)?Yi:0,mo=de.get("text-anchor").evaluate(Tn,{},K),Wa=de.get("text-variable-anchor");if(!Wa){var no=de.get("text-radial-offset").evaluate(Tn,{},K);Oi=no?Zr(mo,[24*no,Lr]):de.get("text-offset").evaluate(Tn,{},K).map(function(qa){return 24*qa})}var xi=pr?"center":de.get("text-justify").evaluate(Tn,{},K),Uo=de.get("symbol-placement"),ts=Uo==="point"?24*de.get("text-max-width").evaluate(Tn,{},K):0,qs=function(){h.allowVerticalPlacement&&Kc(ro)&&(Di.vertical=Ka(ia,v,_,F,Ln,ts,ur,mo,"left",$i,Oi,ta.vertical,!0,Uo,Ei,pi))};if(!pr&&Wa){for(var gs=xi==="auto"?Wa.map(function(qa){return Gr(qa)}):[xi],Ds=!1,fu=0;fu<gs.length;fu++){var Ls=gs[fu];if(!Di.horizontal[Ls])if(Ds)Di.horizontal[Ls]=Di.horizontal[0];else{var yu=Ka(ia,v,_,F,Ln,ts,ur,"center",Ls,$i,Oi,ta.horizontal,!1,Uo,Ei,pi);yu&&(Di.horizontal[Ls]=yu,Ds=yu.positionedLines.length===1)}}qs()}else{xi==="auto"&&(xi=Gr(mo));var Qu=Ka(ia,v,_,F,Ln,ts,ur,mo,xi,$i,Oi,ta.horizontal,!1,Uo,Ei,pi);Qu&&(Di.horizontal[xi]=Qu),qs(),Kc(ro)&&pr&&zr&&(Di.vertical=Ka(ia,v,_,F,Ln,ts,ur,mo,xi,$i,Oi,ta.vertical,!1,Uo,Ei,pi))}}var Ju=void 0,fl=!1;if(Tn.icon&&Tn.icon.name){var Ou=R[Tn.icon.name];Ou&&(Ju=function(qa,rs,Oo){var yo=Wo(Oo),hl=rs[0]-qa.displaySize[0]*yo.horizontalAlign,Xo=rs[1]-qa.displaySize[1]*yo.verticalAlign;return{image:qa,top:Xo,bottom:Xo+qa.displaySize[1],left:hl,right:hl+qa.displaySize[0]}}(F[Tn.icon.name],de.get("icon-offset").evaluate(Tn,{},K),de.get("icon-anchor").evaluate(Tn,{},K)),fl=Ou.sdf,h.sdfIcons===void 0?h.sdfIcons=Ou.sdf:h.sdfIcons!==Ou.sdf&&ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ou.pixelRatio!==h.pixelRatio||de.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}var el=Ur(Di.horizontal)||Di.vertical;h.iconsInText=!!el&&el.iconsInText,(el||Ju)&&function(qa,rs,Oo,yo,hl,Xo,Fs,_u,Cl,Eo,jf){var Tl=Xo.textMaxSize.evaluate(rs,{});Tl===void 0&&(Tl=Fs);var $h,xu=qa.layers[0].layout,Ba=xu.get("icon-offset").evaluate(rs,{},jf),Ia=Ur(Oo.horizontal),Pp=Fs/24,Kd=qa.tilePixelRatio*Pp,Qd=qa.tilePixelRatio*Tl/24,kp=qa.tilePixelRatio*_u,Jd=qa.tilePixelRatio*xu.get("symbol-spacing"),Cm=xu.get("text-padding")*qa.tilePixelRatio,cd=xu.get("icon-padding")*qa.tilePixelRatio,Mg=xu.get("text-max-angle")/180*Math.PI,Tm=xu.get("text-rotation-alignment")==="map"&&xu.get("symbol-placement")!=="point",bu=xu.get("icon-rotation-alignment")==="map"&&xu.get("symbol-placement")!=="point",Dp=xu.get("symbol-placement"),Fv=Jd/2,Rg=xu.get("icon-text-fit");yo&&Rg!=="none"&&(qa.allowVerticalPlacement&&Oo.vertical&&($h=Ys(yo,Oo.vertical,Rg,xu.get("icon-text-fit-padding"),Ba,Pp)),Ia&&(yo=Ys(yo,Ia,Rg,xu.get("icon-text-fit-padding"),Ba,Pp)));var fd=function(XE,Mm){Mm.x<0||Mm.x>=8192||Mm.y<0||Mm.y>=8192||function(Su,bh,YE,Xh,F0,B0,Dg,Pu,Hf,ev,pd,dd,vd,Lg,gd,N0,Rm,Lp,Im,Om,Uc,Fp,md,ju,Pm){var km,Yh,yd,_d,tv,Uv=Su.addToLineVertexArray(bh,YE),w_=0,C_=0,T_=0,Dm=0,z0=-1,Zc=-1,qh={},U0=cr(""),rv=0,Lm=0;if(Pu._unevaluatedLayout.getValue("text-radial-offset")===void 0?(rv=(km=Pu.layout.get("text-offset").evaluate(Uc,{},ju).map(function(nv){return 24*nv}))[0],Lm=km[1]):(rv=24*Pu.layout.get("text-radial-offset").evaluate(Uc,{},ju),Lm=Lr),Su.allowVerticalPlacement&&Xh.vertical){var Z0=Pu.layout.get("text-rotate").evaluate(Uc,{},ju)+90;_d=new $o(Hf,bh,ev,pd,dd,Xh.vertical,vd,Lg,gd,Z0),Dg&&(tv=new $o(Hf,bh,ev,pd,dd,Dg,Rm,Lp,gd,Z0))}if(F0){var Fg=Pu.layout.get("icon-rotate").evaluate(Uc,{}),V0=Pu.layout.get("icon-text-fit")!=="none",xd=mr(F0,Fg,md,V0),Dl=Dg?mr(Dg,Fg,md,V0):void 0;yd=new $o(Hf,bh,ev,pd,dd,F0,Rm,Lp,!1,Fg),w_=4*xd.length;var Kh=Su.iconSizeData,Zv=null;Kh.kind==="source"?(Zv=[128*Pu.layout.get("icon-size").evaluate(Uc,{})])[0]>32640&&ze(Su.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Kh.kind==="composite"&&((Zv=[128*Fp.compositeIconSizes[0].evaluate(Uc,{},ju),128*Fp.compositeIconSizes[1].evaluate(Uc,{},ju)])[0]>32640||Zv[1]>32640)&&ze(Su.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Su.addSymbols(Su.icon,xd,Zv,Om,Im,Uc,!1,bh,Uv.lineStartIndex,Uv.lineLength,-1,ju),z0=Su.icon.placedSymbolArray.length-1,Dl&&(C_=4*Dl.length,Su.addSymbols(Su.icon,Dl,Zv,Om,Im,Uc,ta.vertical,bh,Uv.lineStartIndex,Uv.lineLength,-1,ju),Zc=Su.icon.placedSymbolArray.length-1)}for(var j0 in Xh.horizontal){var Bg=Xh.horizontal[j0];if(!Yh){U0=cr(Bg.text);var Zx=Pu.layout.get("text-rotate").evaluate(Uc,{},ju);Yh=new $o(Hf,bh,ev,pd,dd,Bg,vd,Lg,gd,Zx)}var A_=Bg.positionedLines.length===1;if(T_+=yr(Su,bh,Bg,B0,Pu,gd,Uc,N0,Uv,Xh.vertical?ta.horizontal:ta.horizontalOnly,A_?Object.keys(Xh.horizontal):[j0],qh,z0,Fp,ju),A_)break}Xh.vertical&&(Dm+=yr(Su,bh,Xh.vertical,B0,Pu,gd,Uc,N0,Uv,ta.vertical,["vertical"],qh,Zc,Fp,ju));var H0=Yh?Yh.boxStartIndex:Su.collisionBoxArray.length,Vx=Yh?Yh.boxEndIndex:Su.collisionBoxArray.length,W0=_d?_d.boxStartIndex:Su.collisionBoxArray.length,M_=_d?_d.boxEndIndex:Su.collisionBoxArray.length,G0=yd?yd.boxStartIndex:Su.collisionBoxArray.length,Vv=yd?yd.boxEndIndex:Su.collisionBoxArray.length,R_=tv?tv.boxStartIndex:Su.collisionBoxArray.length,I_=tv?tv.boxEndIndex:Su.collisionBoxArray.length,sf=-1,Ng=function(nv,zg){return nv&&nv.circleDiameter?Math.max(nv.circleDiameter,zg):zg};sf=Ng(Yh,sf),sf=Ng(_d,sf),sf=Ng(yd,sf);var jv=(sf=Ng(tv,sf))>-1?1:0;jv&&(sf*=Pm/24),Su.glyphOffsetArray.length>=Fn.MAX_GLYPHS&&ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Uc.sortKey!==void 0&&Su.addToSortKeyRanges(Su.symbolInstances.length,Uc.sortKey),Su.symbolInstances.emplaceBack(bh.x,bh.y,qh.right>=0?qh.right:-1,qh.center>=0?qh.center:-1,qh.left>=0?qh.left:-1,qh.vertical||-1,z0,Zc,U0,H0,Vx,W0,M_,G0,Vv,R_,I_,ev,T_,Dm,w_,C_,jv,0,vd,rv,Lm,sf)}(qa,Mm,XE,Oo,yo,hl,$h,qa.layers[0],qa.collisionBoxArray,rs.index,rs.sourceLayerIndex,qa.index,Kd,Cm,Tm,Cl,kp,cd,bu,Ba,rs,Xo,Eo,jf,Fs)};if(Dp==="line")for(var Bv=0,Ig=mu(rs.geometry,0,0,8192,8192);Bv<Ig.length;Bv+=1)for(var P0=Ig[Bv],Og=0,k0=Ts(P0,Jd,Mg,Oo.vertical||Ia,yo,24,Qd,qa.overscaling,8192);Og<k0.length;Og+=1){var x_=k0[Og];Ia&&or(qa,Ia.text,Fv,x_)||fd(P0,x_)}else if(Dp==="line-center")for(var D0=0,uc=rs.geometry;D0<uc.length;D0+=1){var _h=uc[D0];if(_h.length>1){var ns=Io(_h,Mg,Oo.vertical||Ia,yo,24,Qd);ns&&fd(_h,ns)}}else if(rs.type==="Polygon")for(var zc=0,L0=xg(rs.geometry,0);zc<L0.length;zc+=1){var Pg=L0[zc],xh=wr(Pg,16);fd(Pg[0],new Hs(xh.x,xh.y,0))}else if(rs.type==="LineString")for(var Nv=0,Am=rs.geometry;Nv<Am.length;Nv+=1){var zv=Am[Nv];fd(zv,new Hs(zv[0].x,zv[0].y,0))}else if(rs.type==="Point")for(var hd=0,kg=rs.geometry;hd<kg.length;hd+=1)for(var b_=0,S_=kg[hd];b_<S_.length;b_+=1){var E_=S_[b_];fd([E_],new Hs(E_.x,E_.y,0))}}(h,Tn,Di,Ju,R,it,Ei,Ki,Oi,fl,K)},on=0,gn=h.features;on<gn.length;on+=1)qr();z&&h.generateCollisionDebugBuffers()},w.perspective=function(h,v,_,R,F){var z,K=1/Math.tan(v/2);return h[0]=K/_,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=K,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,F!=null&&F!==1/0?(h[10]=(F+R)*(z=1/(R-F)),h[14]=2*F*R*z):(h[10]=-1,h[14]=-2*R),h},w.pick=function(h,v){for(var _={},R=0;R<v.length;R++){var F=v[R];F in h&&(_[F]=h[F])}return _},w.plugin=ac,w.polygonIntersectsPolygon=Jc,w.postMapLoadEvent=Tt,w.postTurnstileEvent=Ut,w.potpack=Ra,w.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],w.register=Ni,w.registerForPluginStateChange=function(h){return h({pluginStatus:Zs,pluginURL:Ol}),Lf.on("pluginStateChange",h),h},w.renderColorRamp=wv,w.rotate=function(h,v,_){var R=v[0],F=v[1],z=v[2],K=v[3],de=Math.sin(_),Be=Math.cos(_);return h[0]=R*Be+z*de,h[1]=F*Be+K*de,h[2]=R*-de+z*Be,h[3]=F*-de+K*Be,h},w.rotateX=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[4],K=v[5],de=v[6],Be=v[7],it=v[8],ht=v[9],xt=v[10],Lt=v[11];return v!==h&&(h[0]=v[0],h[1]=v[1],h[2]=v[2],h[3]=v[3],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[4]=z*F+it*R,h[5]=K*F+ht*R,h[6]=de*F+xt*R,h[7]=Be*F+Lt*R,h[8]=it*F-z*R,h[9]=ht*F-K*R,h[10]=xt*F-de*R,h[11]=Lt*F-Be*R,h},w.rotateZ=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[0],K=v[1],de=v[2],Be=v[3],it=v[4],ht=v[5],xt=v[6],Lt=v[7];return v!==h&&(h[8]=v[8],h[9]=v[9],h[10]=v[10],h[11]=v[11],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[0]=z*F+it*R,h[1]=K*F+ht*R,h[2]=de*F+xt*R,h[3]=Be*F+Lt*R,h[4]=it*F-z*R,h[5]=ht*F-K*R,h[6]=xt*F-de*R,h[7]=Lt*F-Be*R,h},w.scale=function(h,v,_){var R=_[0],F=_[1],z=_[2];return h[0]=v[0]*R,h[1]=v[1]*R,h[2]=v[2]*R,h[3]=v[3]*R,h[4]=v[4]*F,h[5]=v[5]*F,h[6]=v[6]*F,h[7]=v[7]*F,h[8]=v[8]*z,h[9]=v[9]*z,h[10]=v[10]*z,h[11]=v[11]*z,h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15],h},w.scale$1=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h[3]=v[3]*_,h},w.scale$2=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h},w.setCacheLimits=function(h,v){qt=h,fr=v},w.setRTLTextPlugin=function(h,v,_){if(_===void 0&&(_=!1),Zs==="deferred"||Zs==="loading"||Zs==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ol=rt.resolveURL(h),Zs="deferred",vf=v,xp(),_||ic()},w.sphericalToCartesian=function(h){var v=h[0],_=h[1],R=h[2];return _+=90,_*=Math.PI/180,R*=Math.PI/180,{x:v*Math.cos(_)*Math.sin(R),y:v*Math.sin(_)*Math.sin(R),z:v*Math.cos(R)}},w.sqrLen=function(h){var v=h[0],_=h[1];return v*v+_*_},w.styleSpec=Rt,w.sub=function(h,v,_){return h[0]=v[0]-_[0],h[1]=v[1]-_[1],h[2]=v[2]-_[2],h},w.symbolSize=Va,w.transformMat3=function(h,v,_){var R=v[0],F=v[1],z=v[2];return h[0]=R*_[0]+F*_[3]+z*_[6],h[1]=R*_[1]+F*_[4]+z*_[7],h[2]=R*_[2]+F*_[5]+z*_[8],h},w.transformMat4=dh,w.translate=function(h,v,_){var R,F,z,K,de,Be,it,ht,xt,Lt,Ht,ur,pr=_[0],zr=_[1],Or=_[2];return v===h?(h[12]=v[0]*pr+v[4]*zr+v[8]*Or+v[12],h[13]=v[1]*pr+v[5]*zr+v[9]*Or+v[13],h[14]=v[2]*pr+v[6]*zr+v[10]*Or+v[14],h[15]=v[3]*pr+v[7]*zr+v[11]*Or+v[15]):(F=v[1],z=v[2],K=v[3],de=v[4],Be=v[5],it=v[6],ht=v[7],xt=v[8],Lt=v[9],Ht=v[10],ur=v[11],h[0]=R=v[0],h[1]=F,h[2]=z,h[3]=K,h[4]=de,h[5]=Be,h[6]=it,h[7]=ht,h[8]=xt,h[9]=Lt,h[10]=Ht,h[11]=ur,h[12]=R*pr+de*zr+xt*Or+v[12],h[13]=F*pr+Be*zr+Lt*Or+v[13],h[14]=z*pr+it*zr+Ht*Or+v[14],h[15]=K*pr+ht*zr+ur*Or+v[15]),h},w.triggerPluginCompletionEvent=Vd,w.uniqueId=le,w.validateCustomStyleLayer=function(h){var v=[],_=h.id;return _===void 0&&v.push({message:"layers."+_+': missing required property "id"'}),h.render===void 0&&v.push({message:"layers."+_+': missing required method "render"'}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&v.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),v},w.validateLight=Ud,w.validateStyle=yp,w.values=function(h){var v=[];for(var _ in h)v.push(h[_]);return v},w.vectorTile=Hh,w.version="1.13.3",w.warnOnce=ze,w.webpSupported=dt,w.window=Q,w.wrap=A}),W(["./shared"],function(w){"use strict";function X(ge){var ve=typeof ge;if(ve==="number"||ve==="boolean"||ve==="string"||ge==null)return JSON.stringify(ge);if(Array.isArray(ge)){for(var Fe="[",nt=0,St=ge;nt<St.length;nt+=1)Fe+=X(St[nt])+",";return Fe+"]"}for(var $t=Object.keys(ge).sort(),vr="{",Rt=0;Rt<$t.length;Rt++)vr+=JSON.stringify($t[Rt])+":"+X(ge[$t[Rt]])+",";return vr+"}"}function j(ge){for(var ve="",Fe=0,nt=w.refProperties;Fe<nt.length;Fe+=1)ve+="/"+X(ge[nt[Fe]]);return ve}var ee=function(ge){this.keyCache={},ge&&this.replace(ge)};ee.prototype.replace=function(ge){this._layerConfigs={},this._layers={},this.update(ge,[])},ee.prototype.update=function(ge,ve){for(var Fe=this,nt=0,St=ge;nt<St.length;nt+=1){var $t=St[nt];this._layerConfigs[$t.id]=$t;var vr=this._layers[$t.id]=w.createStyleLayer($t);vr._featureFilter=w.featureFilter(vr.filter),this.keyCache[$t.id]&&delete this.keyCache[$t.id]}for(var Rt=0,ct=ve;Rt<ct.length;Rt+=1){var It=ct[Rt];delete this.keyCache[It],delete this._layerConfigs[It],delete this._layers[It]}this.familiesBySource={};for(var gr=0,Br=function($n,ri){for(var oa={},yi=0;yi<$n.length;yi++){var ya=ri&&ri[$n[yi].id]||j($n[yi]);ri&&(ri[$n[yi].id]=ya);var Ya=oa[ya];Ya||(Ya=oa[ya]=[]),Ya.push($n[yi])}var ha=[];for(var Fa in oa)ha.push(oa[Fa]);return ha}(w.values(this._layerConfigs),this.keyCache);gr<Br.length;gr+=1){var Nt=Br[gr].map(function($n){return Fe._layers[$n.id]}),wn=Nt[0];if(wn.visibility!=="none"){var ei=wn.source||"",ci=this.familiesBySource[ei];ci||(ci=this.familiesBySource[ei]={});var ln=wn.sourceLayer||"_geojsonTileLayer",ti=ci[ln];ti||(ti=ci[ln]=[]),ti.push(Nt)}}};var Y=function(ge){var ve={},Fe=[];for(var nt in ge){var St=ge[nt],$t=ve[nt]={};for(var vr in St){var Rt=St[+vr];if(Rt&&Rt.bitmap.width!==0&&Rt.bitmap.height!==0){var ct={x:0,y:0,w:Rt.bitmap.width+2,h:Rt.bitmap.height+2};Fe.push(ct),$t[vr]={rect:ct,metrics:Rt.metrics}}}}var It=w.potpack(Fe),gr=new w.AlphaImage({width:It.w||1,height:It.h||1});for(var Br in ge){var Nt=ge[Br];for(var wn in Nt){var ei=Nt[+wn];if(ei&&ei.bitmap.width!==0&&ei.bitmap.height!==0){var ci=ve[Br][wn].rect;w.AlphaImage.copy(ei.bitmap,gr,{x:0,y:0},{x:ci.x+1,y:ci.y+1},ei.bitmap)}}}this.image=gr,this.positions=ve};w.register("GlyphAtlas",Y);var re=function(ge){this.tileID=new w.OverscaledTileID(ge.tileID.overscaledZ,ge.tileID.wrap,ge.tileID.canonical.z,ge.tileID.canonical.x,ge.tileID.canonical.y),this.uid=ge.uid,this.zoom=ge.zoom,this.pixelRatio=ge.pixelRatio,this.tileSize=ge.tileSize,this.source=ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ge.showCollisionBoxes,this.collectResourceTiming=!!ge.collectResourceTiming,this.returnDependencies=!!ge.returnDependencies,this.promoteId=ge.promoteId};function Q(ge,ve,Fe){for(var nt=new w.EvaluationParameters(ve),St=0,$t=ge;St<$t.length;St+=1)$t[St].recalculate(nt,Fe)}function ye(ge,ve){var Fe=w.getArrayBuffer(ge.request,function(nt,St,$t,vr){nt?ve(nt):St&&ve(null,{vectorTile:new w.vectorTile.VectorTile(new w.pbf(St)),rawData:St,cacheControl:$t,expires:vr})});return function(){Fe.cancel(),ve()}}re.prototype.parse=function(ge,ve,Fe,nt,St){var $t=this;this.status="parsing",this.data=ge,this.collisionBoxArray=new w.CollisionBoxArray;var vr=new w.DictionaryCoder(Object.keys(ge.layers).sort()),Rt=new w.FeatureIndex(this.tileID,this.promoteId);Rt.bucketLayerIDs=[];var ct,It,gr,Br,Nt={},wn={featureIndex:Rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Fe},ei=ve.familiesBySource[this.source];for(var ci in ei){var ln=ge.layers[ci];if(ln){ln.version===1&&w.warnOnce('Vector tile source "'+this.source+'" layer "'+ci+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ti=vr.encode(ci),$n=[],ri=0;ri<ln.length;ri++){var oa=ln.feature(ri),yi=Rt.getId(oa,ci);$n.push({feature:oa,id:yi,index:ri,sourceLayerIndex:ti})}for(var ya=0,Ya=ei[ci];ya<Ya.length;ya+=1){var ha=Ya[ya],Fa=ha[0];Fa.minzoom&&this.zoom<Math.floor(Fa.minzoom)||Fa.maxzoom&&this.zoom>=Fa.maxzoom||Fa.visibility!=="none"&&(Q(ha,this.zoom,Fe),(Nt[Fa.id]=Fa.createBucket({index:Rt.bucketLayerIDs.length,layers:ha,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ti,sourceID:this.source})).populate($n,wn,this.tileID.canonical),Rt.bucketLayerIDs.push(ha.map(function(Za){return Za.id})))}}}var Sa=w.mapObject(wn.glyphDependencies,function(Za){return Object.keys(Za).map(Number)});Object.keys(Sa).length?nt.send("getGlyphs",{uid:this.uid,stacks:Sa},function(Za,Kn){ct||(ct=Za,It=Kn,Lo.call($t))}):It={};var xs=Object.keys(wn.iconDependencies);xs.length?nt.send("getImages",{icons:xs,source:this.source,tileID:this.tileID,type:"icons"},function(Za,Kn){ct||(ct=Za,gr=Kn,Lo.call($t))}):gr={};var co=Object.keys(wn.patternDependencies);function Lo(){if(ct)return St(ct);if(It&&gr&&Br){var Za=new Y(It),Kn=new w.ImageAtlas(gr,Br);for(var Ci in Nt){var Ga=Nt[Ci];Ga instanceof w.SymbolBucket?(Q(Ga.layers,this.zoom,Fe),w.performSymbolLayout(Ga,It,Za.positions,gr,Kn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ga.hasPattern&&(Ga instanceof w.LineBucket||Ga instanceof w.FillBucket||Ga instanceof w.FillExtrusionBucket)&&(Q(Ga.layers,this.zoom,Fe),Ga.addFeatures(wn,this.tileID.canonical,Kn.patternPositions))}this.status="done",St(null,{buckets:w.values(Nt).filter(function(Jo){return!Jo.isEmpty()}),featureIndex:Rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Za.image,imageAtlas:Kn,glyphMap:this.returnDependencies?It:null,iconMap:this.returnDependencies?gr:null,glyphPositions:this.returnDependencies?Za.positions:null})}}co.length?nt.send("getImages",{icons:co,source:this.source,tileID:this.tileID,type:"patterns"},function(Za,Kn){ct||(ct=Za,Br=Kn,Lo.call($t))}):Br={},Lo.call(this)};var se=function(ge,ve,Fe,nt){this.actor=ge,this.layerIndex=ve,this.availableImages=Fe,this.loadVectorData=nt||ye,this.loading={},this.loaded={}};se.prototype.loadTile=function(ge,ve){var Fe=this,nt=ge.uid;this.loading||(this.loading={});var St=!!(ge&&ge.request&&ge.request.collectResourceTiming)&&new w.RequestPerformance(ge.request),$t=this.loading[nt]=new re(ge);$t.abort=this.loadVectorData(ge,function(vr,Rt){if(delete Fe.loading[nt],vr||!Rt)return $t.status="done",Fe.loaded[nt]=$t,ve(vr);var ct=Rt.rawData,It={};Rt.expires&&(It.expires=Rt.expires),Rt.cacheControl&&(It.cacheControl=Rt.cacheControl);var gr={};if(St){var Br=St.finish();Br&&(gr.resourceTiming=JSON.parse(JSON.stringify(Br)))}$t.vectorTile=Rt.vectorTile,$t.parse(Rt.vectorTile,Fe.layerIndex,Fe.availableImages,Fe.actor,function(Nt,wn){if(Nt||!wn)return ve(Nt);ve(null,w.extend({rawTileData:ct.slice(0)},wn,It,gr))}),Fe.loaded=Fe.loaded||{},Fe.loaded[nt]=$t})},se.prototype.reloadTile=function(ge,ve){var Fe=this,nt=this.loaded,St=ge.uid,$t=this;if(nt&&nt[St]){var vr=nt[St];vr.showCollisionBoxes=ge.showCollisionBoxes;var Rt=function(ct,It){var gr=vr.reloadCallback;gr&&(delete vr.reloadCallback,vr.parse(vr.vectorTile,$t.layerIndex,Fe.availableImages,$t.actor,gr)),ve(ct,It)};vr.status==="parsing"?vr.reloadCallback=Rt:vr.status==="done"&&(vr.vectorTile?vr.parse(vr.vectorTile,this.layerIndex,this.availableImages,this.actor,Rt):Rt())}},se.prototype.abortTile=function(ge,ve){var Fe=this.loading,nt=ge.uid;Fe&&Fe[nt]&&Fe[nt].abort&&(Fe[nt].abort(),delete Fe[nt]),ve()},se.prototype.removeTile=function(ge,ve){var Fe=this.loaded,nt=ge.uid;Fe&&Fe[nt]&&delete Fe[nt],ve()};var ne=w.window.ImageBitmap,$=function(){this.loaded={}};function A(ge,ve){if(ge.length!==0){b(ge[0],ve);for(var Fe=1;Fe<ge.length;Fe++)b(ge[Fe],!ve)}}function b(ge,ve){for(var Fe=0,nt=0,St=0,$t=ge.length,vr=$t-1;St<$t;vr=St++){var Rt=(ge[St][0]-ge[vr][0])*(ge[vr][1]+ge[St][1]),ct=Fe+Rt;nt+=Math.abs(Fe)>=Math.abs(Rt)?Fe-ct+Rt:Rt-ct+Fe,Fe=ct}Fe+nt>=0!=!!ve&&ge.reverse()}$.prototype.loadTile=function(ge,ve){var Fe=ge.uid,nt=ge.encoding,St=ge.rawImageData,$t=ne&&St instanceof ne?this.getImageData(St):St,vr=new w.DEMData(Fe,$t,nt);this.loaded=this.loaded||{},this.loaded[Fe]=vr,ve(null,vr)},$.prototype.getImageData=function(ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ge.width,ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ge.width,this.offscreenCanvas.height=ge.height,this.offscreenCanvasContext.drawImage(ge,0,0,ge.width,ge.height);var ve=this.offscreenCanvasContext.getImageData(-1,-1,ge.width+2,ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new w.RGBAImage({width:ve.width,height:ve.height},ve.data)},$.prototype.removeTile=function(ge){var ve=this.loaded,Fe=ge.uid;ve&&ve[Fe]&&delete ve[Fe]};var te=w.vectorTile.VectorTileFeature.prototype.toGeoJSON,le=function(ge){this._feature=ge,this.extent=w.EXTENT,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))};le.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ge=[],ve=0,Fe=this._feature.geometry;ve<Fe.length;ve+=1){var nt=Fe[ve];ge.push([new w.Point$1(nt[0],nt[1])])}return ge}for(var St=[],$t=0,vr=this._feature.geometry;$t<vr.length;$t+=1){for(var Rt=[],ct=0,It=vr[$t];ct<It.length;ct+=1){var gr=It[ct];Rt.push(new w.Point$1(gr[0],gr[1]))}St.push(Rt)}return St},le.prototype.toGeoJSON=function(ge,ve,Fe){return te.call(this,ge,ve,Fe)};var Ae=function(ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=w.EXTENT,this.length=ge.length,this._features=ge};Ae.prototype.feature=function(ge){return new le(this._features[ge])};var De=w.vectorTile.VectorTileFeature,Ne=Te;function Te(ge,ve){this.options=ve||{},this.features=ge,this.length=ge.length}function We(ge,ve){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=ve||4096}Te.prototype.feature=function(ge){return new We(this.features[ge],this.options.extent)},We.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var ve=0;ve<ge.length;ve++){for(var Fe=ge[ve],nt=[],St=0;St<Fe.length;St++)nt.push(new w.Point$1(Fe[St][0],Fe[St][1]));this.geometry.push(nt)}return this.geometry},We.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,ve=1/0,Fe=-1/0,nt=1/0,St=-1/0,$t=0;$t<ge.length;$t++)for(var vr=ge[$t],Rt=0;Rt<vr.length;Rt++){var ct=vr[Rt];ve=Math.min(ve,ct.x),Fe=Math.max(Fe,ct.x),nt=Math.min(nt,ct.y),St=Math.max(St,ct.y)}return[ve,nt,Fe,St]},We.prototype.toGeoJSON=De.prototype.toGeoJSON;var _e=Re,we=Ne;function Re(ge){var ve=new w.pbf;return function(Fe,nt){for(var St in Fe.layers)nt.writeMessage(3,ze,Fe.layers[St])}(ge,ve),ve.finish()}function ze(ge,ve){var Fe;ve.writeVarintField(15,ge.version||1),ve.writeStringField(1,ge.name||""),ve.writeVarintField(5,ge.extent||4096);var nt={keys:[],values:[],keycache:{},valuecache:{}};for(Fe=0;Fe<ge.length;Fe++)nt.feature=ge.feature(Fe),ve.writeMessage(2,Ge,nt);var St=nt.keys;for(Fe=0;Fe<St.length;Fe++)ve.writeStringField(3,St[Fe]);var $t=nt.values;for(Fe=0;Fe<$t.length;Fe++)ve.writeMessage(4,Ke,$t[Fe])}function Ge(ge,ve){var Fe=ge.feature;Fe.id!==void 0&&ve.writeVarintField(1,Fe.id),ve.writeMessage(2,yt,ge),ve.writeVarintField(3,Fe.type),ve.writeMessage(4,ae,Fe)}function yt(ge,ve){var Fe=ge.feature,nt=ge.keys,St=ge.values,$t=ge.keycache,vr=ge.valuecache;for(var Rt in Fe.properties){var ct=$t[Rt];ct===void 0&&(nt.push(Rt),$t[Rt]=ct=nt.length-1),ve.writeVarint(ct);var It=Fe.properties[Rt],gr=typeof It;gr!=="string"&&gr!=="boolean"&&gr!=="number"&&(It=JSON.stringify(It));var Br=gr+":"+It,Nt=vr[Br];Nt===void 0&&(St.push(It),vr[Br]=Nt=St.length-1),ve.writeVarint(Nt)}}function ke(ge,ve){return(ve<<3)+(7&ge)}function tt(ge){return ge<<1^ge>>31}function ae(ge,ve){for(var Fe=ge.loadGeometry(),nt=ge.type,St=0,$t=0,vr=Fe.length,Rt=0;Rt<vr;Rt++){var ct=Fe[Rt],It=1;nt===1&&(It=ct.length),ve.writeVarint(ke(1,It));for(var gr=nt===3?ct.length-1:ct.length,Br=0;Br<gr;Br++){Br===1&&nt!==1&&ve.writeVarint(ke(2,gr-1));var Nt=ct[Br].x-St,wn=ct[Br].y-$t;ve.writeVarint(tt(Nt)),ve.writeVarint(tt(wn)),St+=Nt,$t+=wn}nt===3&&ve.writeVarint(ke(7,1))}}function Ke(ge,ve){var Fe=typeof ge;Fe==="string"?ve.writeStringField(1,ge):Fe==="boolean"?ve.writeBooleanField(7,ge):Fe==="number"&&(ge%1!=0?ve.writeDoubleField(3,ge):ge<0?ve.writeSVarintField(6,ge):ve.writeVarintField(5,ge))}function he(ge,ve,Fe,nt){Pe(ge,Fe,nt),Pe(ve,2*Fe,2*nt),Pe(ve,2*Fe+1,2*nt+1)}function Pe(ge,ve,Fe){var nt=ge[ve];ge[ve]=ge[Fe],ge[Fe]=nt}function lt(ge,ve,Fe,nt){var St=ge-Fe,$t=ve-nt;return St*St+$t*$t}_e.fromVectorTileJs=Re,_e.fromGeojsonVt=function(ge,ve){ve=ve||{};var Fe={};for(var nt in ge)Fe[nt]=new Ne(ge[nt].features,ve),Fe[nt].name=nt,Fe[nt].version=ve.version,Fe[nt].extent=ve.extent;return Re({layers:Fe})},_e.GeoJSONWrapper=we;var He=function(ge){return ge[0]},Ue=function(ge){return ge[1]},Qe=function(ge,ve,Fe,nt,St){ve===void 0&&(ve=He),Fe===void 0&&(Fe=Ue),nt===void 0&&(nt=64),St===void 0&&(St=Float64Array),this.nodeSize=nt,this.points=ge;for(var $t=ge.length<65536?Uint16Array:Uint32Array,vr=this.ids=new $t(ge.length),Rt=this.coords=new St(2*ge.length),ct=0;ct<ge.length;ct++)vr[ct]=ct,Rt[2*ct]=ve(ge[ct]),Rt[2*ct+1]=Fe(ge[ct]);(function It(gr,Br,Nt,wn,ei,ci){if(!(ei-wn<=Nt)){var ln=wn+ei>>1;(function ti($n,ri,oa,yi,ya,Ya){for(;ya>yi;){if(ya-yi>600){var ha=ya-yi+1,Fa=oa-yi+1,Sa=Math.log(ha),xs=.5*Math.exp(2*Sa/3),co=.5*Math.sqrt(Sa*xs*(ha-xs)/ha)*(Fa-ha/2<0?-1:1);ti($n,ri,oa,Math.max(yi,Math.floor(oa-Fa*xs/ha+co)),Math.min(ya,Math.floor(oa+(ha-Fa)*xs/ha+co)),Ya)}var Lo=ri[2*oa+Ya],Za=yi,Kn=ya;for(he($n,ri,yi,oa),ri[2*ya+Ya]>Lo&&he($n,ri,yi,ya);Za<Kn;){for(he($n,ri,Za,Kn),Za++,Kn--;ri[2*Za+Ya]<Lo;)Za++;for(;ri[2*Kn+Ya]>Lo;)Kn--}ri[2*yi+Ya]===Lo?he($n,ri,yi,Kn):he($n,ri,++Kn,ya),Kn<=oa&&(yi=Kn+1),oa<=Kn&&(ya=Kn-1)}})(gr,Br,ln,wn,ei,ci%2),It(gr,Br,Nt,wn,ln-1,ci+1),It(gr,Br,Nt,ln+1,ei,ci+1)}})(vr,Rt,nt,0,vr.length-1,0)};Qe.prototype.range=function(ge,ve,Fe,nt){return function(St,$t,vr,Rt,ct,It,gr){for(var Br,Nt,wn=[0,St.length-1,0],ei=[];wn.length;){var ci=wn.pop(),ln=wn.pop(),ti=wn.pop();if(ln-ti<=gr)for(var $n=ti;$n<=ln;$n++)Nt=$t[2*$n+1],(Br=$t[2*$n])>=vr&&Br<=ct&&Nt>=Rt&&Nt<=It&&ei.push(St[$n]);else{var ri=Math.floor((ti+ln)/2);Nt=$t[2*ri+1],(Br=$t[2*ri])>=vr&&Br<=ct&&Nt>=Rt&&Nt<=It&&ei.push(St[ri]);var oa=(ci+1)%2;(ci===0?vr<=Br:Rt<=Nt)&&(wn.push(ti),wn.push(ri-1),wn.push(oa)),(ci===0?ct>=Br:It>=Nt)&&(wn.push(ri+1),wn.push(ln),wn.push(oa))}}return ei}(this.ids,this.coords,ge,ve,Fe,nt,this.nodeSize)},Qe.prototype.within=function(ge,ve,Fe){return function(nt,St,$t,vr,Rt,ct){for(var It=[0,nt.length-1,0],gr=[],Br=Rt*Rt;It.length;){var Nt=It.pop(),wn=It.pop(),ei=It.pop();if(wn-ei<=ct)for(var ci=ei;ci<=wn;ci++)lt(St[2*ci],St[2*ci+1],$t,vr)<=Br&&gr.push(nt[ci]);else{var ln=Math.floor((ei+wn)/2),ti=St[2*ln],$n=St[2*ln+1];lt(ti,$n,$t,vr)<=Br&&gr.push(nt[ln]);var ri=(Nt+1)%2;(Nt===0?$t-Rt<=ti:vr-Rt<=$n)&&(It.push(ei),It.push(ln-1),It.push(ri)),(Nt===0?$t+Rt>=ti:vr+Rt>=$n)&&(It.push(ln+1),It.push(wn),It.push(ri))}}return gr}(this.ids,this.coords,ge,ve,Fe,this.nodeSize)};var Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ge){return ge}},xe=function(ge){this.options=Le(Object.create(Se),ge),this.trees=new Array(this.options.maxZoom+1)};function rt(ge,ve,Fe,nt,St){return{x:ge,y:ve,zoom:1/0,id:Fe,parentId:-1,numPoints:nt,properties:St}}function Je(ge,ve){var Fe=ge.geometry.coordinates,nt=Fe[1];return{x:Ye(Fe[0]),y:Xe(nt),zoom:1/0,index:ve,parentId:-1}}function dt(ge){return{type:"Feature",id:ge.id,properties:Bt(ge),geometry:{type:"Point",coordinates:[(nt=ge.x,360*(nt-.5)),(ve=ge.y,Fe=(180-360*ve)*Math.PI/180,360*Math.atan(Math.exp(Fe))/Math.PI-90)]}};var ve,Fe,nt}function Bt(ge){var ve=ge.numPoints,Fe=ve>=1e4?Math.round(ve/1e3)+"k":ve>=1e3?Math.round(ve/100)/10+"k":ve;return Le(Le({},ge.properties),{cluster:!0,cluster_id:ge.id,point_count:ve,point_count_abbreviated:Fe})}function Ye(ge){return ge/360+.5}function Xe(ge){var ve=Math.sin(ge*Math.PI/180),Fe=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Le(ge,ve){for(var Fe in ve)ge[Fe]=ve[Fe];return ge}function je(ge){return ge.x}function at(ge){return ge.y}function Me(ge,ve,Fe,nt,St,$t){var vr=St-Fe,Rt=$t-nt;if(vr!==0||Rt!==0){var ct=((ge-Fe)*vr+(ve-nt)*Rt)/(vr*vr+Rt*Rt);ct>1?(Fe=St,nt=$t):ct>0&&(Fe+=vr*ct,nt+=Rt*ct)}return(vr=ge-Fe)*vr+(Rt=ve-nt)*Rt}function Ze(ge,ve,Fe,nt){var St={id:ge===void 0?null:ge,type:ve,geometry:Fe,tags:nt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($t){var vr=$t.geometry,Rt=$t.type;if(Rt==="Point"||Rt==="MultiPoint"||Rt==="LineString")_t($t,vr);else if(Rt==="Polygon"||Rt==="MultiLineString")for(var ct=0;ct<vr.length;ct++)_t($t,vr[ct]);else if(Rt==="MultiPolygon")for(ct=0;ct<vr.length;ct++)for(var It=0;It<vr[ct].length;It++)_t($t,vr[ct][It])}(St),St}function _t(ge,ve){for(var Fe=0;Fe<ve.length;Fe+=3)ge.minX=Math.min(ge.minX,ve[Fe]),ge.minY=Math.min(ge.minY,ve[Fe+1]),ge.maxX=Math.max(ge.maxX,ve[Fe]),ge.maxY=Math.max(ge.maxY,ve[Fe+1])}function Mt(ge,ve,Fe,nt){if(ve.geometry){var St=ve.geometry.coordinates,$t=ve.geometry.type,vr=Math.pow(Fe.tolerance/((1<<Fe.maxZoom)*Fe.extent),2),Rt=[],ct=ve.id;if(Fe.promoteId?ct=ve.properties[Fe.promoteId]:Fe.generateId&&(ct=nt||0),$t==="Point")ir(St,Rt);else if($t==="MultiPoint")for(var It=0;It<St.length;It++)ir(St[It],Rt);else if($t==="LineString")Tr(St,Rt,vr,!1);else if($t==="MultiLineString"){if(Fe.lineMetrics){for(It=0;It<St.length;It++)Tr(St[It],Rt=[],vr,!1),ge.push(Ze(ct,"LineString",Rt,ve.properties));return}et(St,Rt,vr,!1)}else if($t==="Polygon")et(St,Rt,vr,!0);else{if($t!=="MultiPolygon"){if($t==="GeometryCollection"){for(It=0;It<ve.geometry.geometries.length;It++)Mt(ge,{id:ct,geometry:ve.geometry.geometries[It],properties:ve.properties},Fe,nt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(It=0;It<St.length;It++){var gr=[];et(St[It],gr,vr,!0),Rt.push(gr)}}ge.push(Ze(ct,$t,Rt,ve.properties))}}function ir(ge,ve){ve.push(en(ge[0])),ve.push(Xr(ge[1])),ve.push(0)}function Tr(ge,ve,Fe,nt){for(var St,$t,vr=0,Rt=0;Rt<ge.length;Rt++){var ct=en(ge[Rt][0]),It=Xr(ge[Rt][1]);ve.push(ct),ve.push(It),ve.push(0),Rt>0&&(vr+=nt?(St*It-ct*$t)/2:Math.sqrt(Math.pow(ct-St,2)+Math.pow(It-$t,2))),St=ct,$t=It}var gr=ve.length-3;ve[2]=1,function Br(Nt,wn,ei,ci){for(var ln,ti=ci,$n=ei-wn>>1,ri=ei-wn,oa=Nt[wn],yi=Nt[wn+1],ya=Nt[ei],Ya=Nt[ei+1],ha=wn+3;ha<ei;ha+=3){var Fa=Me(Nt[ha],Nt[ha+1],oa,yi,ya,Ya);if(Fa>ti)ln=ha,ti=Fa;else if(Fa===ti){var Sa=Math.abs(ha-$n);Sa<ri&&(ln=ha,ri=Sa)}}ti>ci&&(ln-wn>3&&Br(Nt,wn,ln,ci),Nt[ln+2]=ti,ei-ln>3&&Br(Nt,ln,ei,ci))}(ve,0,gr,Fe),ve[gr+2]=1,ve.size=Math.abs(vr),ve.start=0,ve.end=ve.size}function et(ge,ve,Fe,nt){for(var St=0;St<ge.length;St++){var $t=[];Tr(ge[St],$t,Fe,nt),ve.push($t)}}function en(ge){return ge/360+.5}function Xr(ge){var ve=Math.sin(ge*Math.PI/180),Fe=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Sr(ge,ve,Fe,nt,St,$t,vr,Rt){if(nt/=ve,$t>=(Fe/=ve)&&vr<nt)return ge;if(vr<Fe||$t>=nt)return null;for(var ct=[],It=0;It<ge.length;It++){var gr=ge[It],Br=gr.geometry,Nt=gr.type,wn=St===0?gr.minX:gr.minY,ei=St===0?gr.maxX:gr.maxY;if(wn>=Fe&&ei<nt)ct.push(gr);else if(!(ei<Fe||wn>=nt)){var ci=[];if(Nt==="Point"||Nt==="MultiPoint")pt(Br,ci,Fe,nt,St);else if(Nt==="LineString")Ut(Br,ci,Fe,nt,St,!1,Rt.lineMetrics);else if(Nt==="MultiLineString")Tt(Br,ci,Fe,nt,St,!1);else if(Nt==="Polygon")Tt(Br,ci,Fe,nt,St,!0);else if(Nt==="MultiPolygon")for(var ln=0;ln<Br.length;ln++){var ti=[];Tt(Br[ln],ti,Fe,nt,St,!0),ti.length&&ci.push(ti)}if(ci.length){if(Rt.lineMetrics&&Nt==="LineString"){for(ln=0;ln<ci.length;ln++)ct.push(Ze(gr.id,Nt,ci[ln],gr.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(ci.length===1?(Nt="LineString",ci=ci[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=ci.length===3?"Point":"MultiPoint"),ct.push(Ze(gr.id,Nt,ci,gr.tags))}}}return ct.length?ct:null}function pt(ge,ve,Fe,nt,St){for(var $t=0;$t<ge.length;$t+=3){var vr=ge[$t+St];vr>=Fe&&vr<=nt&&(ve.push(ge[$t]),ve.push(ge[$t+1]),ve.push(ge[$t+2]))}}function Ut(ge,ve,Fe,nt,St,$t,vr){for(var Rt,ct,It=Gt(ge),gr=St===0?fr:hr,Br=ge.start,Nt=0;Nt<ge.length-3;Nt+=3){var wn=ge[Nt],ei=ge[Nt+1],ci=ge[Nt+2],ln=ge[Nt+3],ti=ge[Nt+4],$n=St===0?wn:ei,ri=St===0?ln:ti,oa=!1;vr&&(Rt=Math.sqrt(Math.pow(wn-ln,2)+Math.pow(ei-ti,2))),$n<Fe?ri>Fe&&(ct=gr(It,wn,ei,ln,ti,Fe),vr&&(It.start=Br+Rt*ct)):$n>nt?ri<nt&&(ct=gr(It,wn,ei,ln,ti,nt),vr&&(It.start=Br+Rt*ct)):qt(It,wn,ei,ci),ri<Fe&&$n>=Fe&&(ct=gr(It,wn,ei,ln,ti,Fe),oa=!0),ri>nt&&$n<=nt&&(ct=gr(It,wn,ei,ln,ti,nt),oa=!0),!$t&&oa&&(vr&&(It.end=Br+Rt*ct),ve.push(It),It=Gt(ge)),vr&&(Br+=Rt)}var yi=ge.length-3;wn=ge[yi],ei=ge[yi+1],ci=ge[yi+2],($n=St===0?wn:ei)>=Fe&&$n<=nt&&qt(It,wn,ei,ci),yi=It.length-3,$t&&yi>=3&&(It[yi]!==It[0]||It[yi+1]!==It[1])&&qt(It,It[0],It[1],It[2]),It.length&&ve.push(It)}function Gt(ge){var ve=[];return ve.size=ge.size,ve.start=ge.start,ve.end=ge.end,ve}function Tt(ge,ve,Fe,nt,St,$t){for(var vr=0;vr<ge.length;vr++)Ut(ge[vr],ve,Fe,nt,St,$t,!1)}function qt(ge,ve,Fe,nt){ge.push(ve),ge.push(Fe),ge.push(nt)}function fr(ge,ve,Fe,nt,St,$t){var vr=($t-ve)/(nt-ve);return ge.push($t),ge.push(Fe+(St-Fe)*vr),ge.push(1),vr}function hr(ge,ve,Fe,nt,St,$t){var vr=($t-Fe)/(St-Fe);return ge.push(ve+(nt-ve)*vr),ge.push($t),ge.push(1),vr}function Er(ge,ve){for(var Fe=[],nt=0;nt<ge.length;nt++){var St,$t=ge[nt],vr=$t.type;if(vr==="Point"||vr==="MultiPoint"||vr==="LineString")St=Ir($t.geometry,ve);else if(vr==="MultiLineString"||vr==="Polygon"){St=[];for(var Rt=0;Rt<$t.geometry.length;Rt++)St.push(Ir($t.geometry[Rt],ve))}else if(vr==="MultiPolygon")for(St=[],Rt=0;Rt<$t.geometry.length;Rt++){for(var ct=[],It=0;It<$t.geometry[Rt].length;It++)ct.push(Ir($t.geometry[Rt][It],ve));St.push(ct)}Fe.push(Ze($t.id,vr,St,$t.tags))}return Fe}function Ir(ge,ve){var Fe=[];Fe.size=ge.size,ge.start!==void 0&&(Fe.start=ge.start,Fe.end=ge.end);for(var nt=0;nt<ge.length;nt+=3)Fe.push(ge[nt]+ve,ge[nt+1],ge[nt+2]);return Fe}function ue(ge,ve){if(ge.transformed)return ge;var Fe,nt,St,$t=1<<ge.z,vr=ge.x,Rt=ge.y;for(Fe=0;Fe<ge.features.length;Fe++){var ct=ge.features[Fe],It=ct.geometry,gr=ct.type;if(ct.geometry=[],gr===1)for(nt=0;nt<It.length;nt+=2)ct.geometry.push(G(It[nt],It[nt+1],ve,$t,vr,Rt));else for(nt=0;nt<It.length;nt++){var Br=[];for(St=0;St<It[nt].length;St+=2)Br.push(G(It[nt][St],It[nt][St+1],ve,$t,vr,Rt));ct.geometry.push(Br)}}return ge.transformed=!0,ge}function G(ge,ve,Fe,nt,St,$t){return[Math.round(Fe*(ge*nt-St)),Math.round(Fe*(ve*nt-$t))]}function oe(ge,ve,Fe,nt,St){for(var $t=ve===St.maxZoom?0:St.tolerance/((1<<ve)*St.extent),vr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Fe,y:nt,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Rt=0;Rt<ge.length;Rt++){vr.numFeatures++,Ie(vr,ge[Rt],$t,St);var ct=ge[Rt].minX,It=ge[Rt].minY,gr=ge[Rt].maxX,Br=ge[Rt].maxY;ct<vr.minX&&(vr.minX=ct),It<vr.minY&&(vr.minY=It),gr>vr.maxX&&(vr.maxX=gr),Br>vr.maxY&&(vr.maxY=Br)}return vr}function Ie(ge,ve,Fe,nt){var St=ve.geometry,$t=ve.type,vr=[];if($t==="Point"||$t==="MultiPoint")for(var Rt=0;Rt<St.length;Rt+=3)vr.push(St[Rt]),vr.push(St[Rt+1]),ge.numPoints++,ge.numSimplified++;else if($t==="LineString")qe(vr,St,ge,Fe,!1,!1);else if($t==="MultiLineString"||$t==="Polygon")for(Rt=0;Rt<St.length;Rt++)qe(vr,St[Rt],ge,Fe,$t==="Polygon",Rt===0);else if($t==="MultiPolygon")for(var ct=0;ct<St.length;ct++){var It=St[ct];for(Rt=0;Rt<It.length;Rt++)qe(vr,It[Rt],ge,Fe,!0,Rt===0)}if(vr.length){var gr=ve.tags||null;if($t==="LineString"&&nt.lineMetrics){for(var Br in gr={},ve.tags)gr[Br]=ve.tags[Br];gr.mapbox_clip_start=St.start/St.size,gr.mapbox_clip_end=St.end/St.size}var Nt={geometry:vr,type:$t==="Polygon"||$t==="MultiPolygon"?3:$t==="LineString"||$t==="MultiLineString"?2:1,tags:gr};ve.id!==null&&(Nt.id=ve.id),ge.features.push(Nt)}}function qe(ge,ve,Fe,nt,St,$t){var vr=nt*nt;if(nt>0&&ve.size<(St?vr:nt))Fe.numPoints+=ve.length/3;else{for(var Rt=[],ct=0;ct<ve.length;ct+=3)(nt===0||ve[ct+2]>vr)&&(Fe.numSimplified++,Rt.push(ve[ct]),Rt.push(ve[ct+1])),Fe.numPoints++;St&&function(It,gr){for(var Br=0,Nt=0,wn=It.length,ei=wn-2;Nt<wn;ei=Nt,Nt+=2)Br+=(It[Nt]-It[ei])*(It[Nt+1]+It[ei+1]);if(Br>0===gr)for(Nt=0,wn=It.length;Nt<wn/2;Nt+=2){var ci=It[Nt],ln=It[Nt+1];It[Nt]=It[wn-2-Nt],It[Nt+1]=It[wn-1-Nt],It[wn-2-Nt]=ci,It[wn-1-Nt]=ln}}(Rt,$t),ge.push(Rt)}}function At(ge,ve){var Fe=(ve=this.options=function(St,$t){for(var vr in $t)St[vr]=$t[vr];return St}(Object.create(this.options),ve)).debug;if(Fe&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");var nt=function(St,$t){var vr=[];if(St.type==="FeatureCollection")for(var Rt=0;Rt<St.features.length;Rt++)Mt(vr,St.features[Rt],$t,Rt);else Mt(vr,St.type==="Feature"?St:{geometry:St},$t);return vr}(ge,ve);this.tiles={},this.tileCoords=[],Fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(nt=function(St,$t){var vr=$t.buffer/$t.extent,Rt=St,ct=Sr(St,1,-1-vr,vr,0,-1,2,$t),It=Sr(St,1,1-vr,2+vr,0,-1,2,$t);return(ct||It)&&(Rt=Sr(St,1,-vr,1+vr,0,-1,2,$t)||[],ct&&(Rt=Er(ct,1).concat(Rt)),It&&(Rt=Rt.concat(Er(It,-1)))),Rt}(nt,ve)).length&&this.splitTile(nt,0,0,0),Fe&&(nt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function rr(ge,ve,Fe){return 32*((1<<ge)*Fe+ve)+ge}function Zt(ge,ve){var Fe=ge.tileID.canonical;if(!this._geoJSONIndex)return ve(null,null);var nt=this._geoJSONIndex.getTile(Fe.z,Fe.x,Fe.y);if(!nt)return ve(null,null);var St=new Ae(nt.features),$t=_e(St);$t.byteOffset===0&&$t.byteLength===$t.buffer.byteLength||($t=new Uint8Array($t)),ve(null,{vectorTile:St,rawData:$t.buffer})}xe.prototype.load=function(ge){var ve=this.options,Fe=ve.log,nt=ve.minZoom,St=ve.maxZoom,$t=ve.nodeSize;Fe&&console.time("total time");var vr="prepare "+ge.length+" points";Fe&&console.time(vr),this.points=ge;for(var Rt=[],ct=0;ct<ge.length;ct++)ge[ct].geometry&&Rt.push(Je(ge[ct],ct));this.trees[St+1]=new Qe(Rt,je,at,$t,Float32Array),Fe&&console.timeEnd(vr);for(var It=St;It>=nt;It--){var gr=+Date.now();Rt=this._cluster(Rt,It),this.trees[It]=new Qe(Rt,je,at,$t,Float32Array),Fe&&console.log("z%d: %d clusters in %dms",It,Rt.length,+Date.now()-gr)}return Fe&&console.timeEnd("total time"),this},xe.prototype.getClusters=function(ge,ve){var Fe=((ge[0]+180)%360+360)%360-180,nt=Math.max(-90,Math.min(90,ge[1])),St=ge[2]===180?180:((ge[2]+180)%360+360)%360-180,$t=Math.max(-90,Math.min(90,ge[3]));if(ge[2]-ge[0]>=360)Fe=-180,St=180;else if(Fe>St){var vr=this.getClusters([Fe,nt,180,$t],ve),Rt=this.getClusters([-180,nt,St,$t],ve);return vr.concat(Rt)}for(var ct=this.trees[this._limitZoom(ve)],It=[],gr=0,Br=ct.range(Ye(Fe),Xe($t),Ye(St),Xe(nt));gr<Br.length;gr+=1){var Nt=ct.points[Br[gr]];It.push(Nt.numPoints?dt(Nt):this.points[Nt.index])}return It},xe.prototype.getChildren=function(ge){var ve=this._getOriginId(ge),Fe=this._getOriginZoom(ge),nt="No cluster with the specified id.",St=this.trees[Fe];if(!St)throw new Error(nt);var $t=St.points[ve];if(!$t)throw new Error(nt);for(var vr=this.options.radius/(this.options.extent*Math.pow(2,Fe-1)),Rt=[],ct=0,It=St.within($t.x,$t.y,vr);ct<It.length;ct+=1){var gr=St.points[It[ct]];gr.parentId===ge&&Rt.push(gr.numPoints?dt(gr):this.points[gr.index])}if(Rt.length===0)throw new Error(nt);return Rt},xe.prototype.getLeaves=function(ge,ve,Fe){var nt=[];return this._appendLeaves(nt,ge,ve=ve||10,Fe=Fe||0,0),nt},xe.prototype.getTile=function(ge,ve,Fe){var nt=this.trees[this._limitZoom(ge)],St=Math.pow(2,ge),$t=this.options,vr=$t.radius/$t.extent,Rt=(Fe-vr)/St,ct=(Fe+1+vr)/St,It={features:[]};return this._addTileFeatures(nt.range((ve-vr)/St,Rt,(ve+1+vr)/St,ct),nt.points,ve,Fe,St,It),ve===0&&this._addTileFeatures(nt.range(1-vr/St,Rt,1,ct),nt.points,St,Fe,St,It),ve===St-1&&this._addTileFeatures(nt.range(0,Rt,vr/St,ct),nt.points,-1,Fe,St,It),It.features.length?It:null},xe.prototype.getClusterExpansionZoom=function(ge){for(var ve=this._getOriginZoom(ge)-1;ve<=this.options.maxZoom;){var Fe=this.getChildren(ge);if(ve++,Fe.length!==1)break;ge=Fe[0].properties.cluster_id}return ve},xe.prototype._appendLeaves=function(ge,ve,Fe,nt,St){for(var $t=0,vr=this.getChildren(ve);$t<vr.length;$t+=1){var Rt=vr[$t],ct=Rt.properties;if(ct&&ct.cluster?St+ct.point_count<=nt?St+=ct.point_count:St=this._appendLeaves(ge,ct.cluster_id,Fe,nt,St):St<nt?St++:ge.push(Rt),ge.length===Fe)break}return St},xe.prototype._addTileFeatures=function(ge,ve,Fe,nt,St,$t){for(var vr=0,Rt=ge;vr<Rt.length;vr+=1){var ct=ve[Rt[vr]],It=ct.numPoints,gr={type:1,geometry:[[Math.round(this.options.extent*(ct.x*St-Fe)),Math.round(this.options.extent*(ct.y*St-nt))]],tags:It?Bt(ct):this.points[ct.index].properties},Br=void 0;It?Br=ct.id:this.options.generateId?Br=ct.index:this.points[ct.index].id&&(Br=this.points[ct.index].id),Br!==void 0&&(gr.id=Br),$t.features.push(gr)}},xe.prototype._limitZoom=function(ge){return Math.max(this.options.minZoom,Math.min(+ge,this.options.maxZoom+1))},xe.prototype._cluster=function(ge,ve){for(var Fe=[],nt=this.options,St=nt.reduce,$t=nt.minPoints,vr=nt.radius/(nt.extent*Math.pow(2,ve)),Rt=0;Rt<ge.length;Rt++){var ct=ge[Rt];if(!(ct.zoom<=ve)){ct.zoom=ve;for(var It=this.trees[ve+1],gr=It.within(ct.x,ct.y,vr),Br=ct.numPoints||1,Nt=Br,wn=0,ei=gr;wn<ei.length;wn+=1){var ci=It.points[ei[wn]];ci.zoom>ve&&(Nt+=ci.numPoints||1)}if(Nt>=$t){for(var ln=ct.x*Br,ti=ct.y*Br,$n=St&&Br>1?this._map(ct,!0):null,ri=(Rt<<5)+(ve+1)+this.points.length,oa=0,yi=gr;oa<yi.length;oa+=1){var ya=It.points[yi[oa]];if(!(ya.zoom<=ve)){ya.zoom=ve;var Ya=ya.numPoints||1;ln+=ya.x*Ya,ti+=ya.y*Ya,ya.parentId=ri,St&&($n||($n=this._map(ct,!0)),St($n,this._map(ya)))}}ct.parentId=ri,Fe.push(rt(ln/Nt,ti/Nt,ri,Nt,$n))}else if(Fe.push(ct),Nt>1)for(var ha=0,Fa=gr;ha<Fa.length;ha+=1){var Sa=It.points[Fa[ha]];Sa.zoom<=ve||(Sa.zoom=ve,Fe.push(Sa))}}}return Fe},xe.prototype._getOriginId=function(ge){return ge-this.points.length>>5},xe.prototype._getOriginZoom=function(ge){return(ge-this.points.length)%32},xe.prototype._map=function(ge,ve){if(ge.numPoints)return ve?Le({},ge.properties):ge.properties;var Fe=this.points[ge.index].properties,nt=this.options.map(Fe);return ve&&nt===Fe?Le({},nt):nt},At.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},At.prototype.splitTile=function(ge,ve,Fe,nt,St,$t,vr){for(var Rt=[ge,ve,Fe,nt],ct=this.options,It=ct.debug;Rt.length;){nt=Rt.pop(),Fe=Rt.pop(),ve=Rt.pop(),ge=Rt.pop();var gr=1<<ve,Br=rr(ve,Fe,nt),Nt=this.tiles[Br];if(!Nt&&(It>1&&console.time("creation"),Nt=this.tiles[Br]=oe(ge,ve,Fe,nt,ct),this.tileCoords.push({z:ve,x:Fe,y:nt}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,Fe,nt,Nt.numFeatures,Nt.numPoints,Nt.numSimplified),console.timeEnd("creation"));var wn="z"+ve;this.stats[wn]=(this.stats[wn]||0)+1,this.total++}if(Nt.source=ge,St){if(ve===ct.maxZoom||ve===St)continue;var ei=1<<St-ve;if(Fe!==Math.floor($t/ei)||nt!==Math.floor(vr/ei))continue}else if(ve===ct.indexMaxZoom||Nt.numPoints<=ct.indexMaxPoints)continue;if(Nt.source=null,ge.length!==0){It>1&&console.time("clipping");var ci,ln,ti,$n,ri,oa,yi=.5*ct.buffer/ct.extent,ya=.5-yi,Ya=.5+yi,ha=1+yi;ci=ln=ti=$n=null,ri=Sr(ge,gr,Fe-yi,Fe+Ya,0,Nt.minX,Nt.maxX,ct),oa=Sr(ge,gr,Fe+ya,Fe+ha,0,Nt.minX,Nt.maxX,ct),ge=null,ri&&(ci=Sr(ri,gr,nt-yi,nt+Ya,1,Nt.minY,Nt.maxY,ct),ln=Sr(ri,gr,nt+ya,nt+ha,1,Nt.minY,Nt.maxY,ct),ri=null),oa&&(ti=Sr(oa,gr,nt-yi,nt+Ya,1,Nt.minY,Nt.maxY,ct),$n=Sr(oa,gr,nt+ya,nt+ha,1,Nt.minY,Nt.maxY,ct),oa=null),It>1&&console.timeEnd("clipping"),Rt.push(ci||[],ve+1,2*Fe,2*nt),Rt.push(ln||[],ve+1,2*Fe,2*nt+1),Rt.push(ti||[],ve+1,2*Fe+1,2*nt),Rt.push($n||[],ve+1,2*Fe+1,2*nt+1)}}},At.prototype.getTile=function(ge,ve,Fe){var nt=this.options,St=nt.extent,$t=nt.debug;if(ge<0||ge>24)return null;var vr=1<<ge,Rt=rr(ge,ve=(ve%vr+vr)%vr,Fe);if(this.tiles[Rt])return ue(this.tiles[Rt],St);$t>1&&console.log("drilling down to z%d-%d-%d",ge,ve,Fe);for(var ct,It=ge,gr=ve,Br=Fe;!ct&&It>0;)It--,gr=Math.floor(gr/2),Br=Math.floor(Br/2),ct=this.tiles[rr(It,gr,Br)];return ct&&ct.source?($t>1&&console.log("found parent tile z%d-%d-%d",It,gr,Br),$t>1&&console.time("drilling down"),this.splitTile(ct.source,It,gr,Br,ge,ve,Fe),$t>1&&console.timeEnd("drilling down"),this.tiles[Rt]?ue(this.tiles[Rt],St):null):null};var wt=function(ge){function ve(Fe,nt,St,$t){ge.call(this,Fe,nt,St,Zt),$t&&(this.loadGeoJSON=$t)}return ge&&(ve.__proto__=ge),(ve.prototype=Object.create(ge&&ge.prototype)).constructor=ve,ve.prototype.loadData=function(Fe,nt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=nt,this._pendingLoadDataParams=Fe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ve.prototype._loadData=function(){var Fe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var nt=this._pendingCallback,St=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $t=!!(St&&St.request&&St.request.collectResourceTiming)&&new w.RequestPerformance(St.request);this.loadGeoJSON(St,function(vr,Rt){if(vr||!Rt)return nt(vr);if(typeof Rt!="object")return nt(new Error("Input data given to '"+St.source+"' is not a valid GeoJSON object."));(function Nt(wn,ei){var ci,ln=wn&&wn.type;if(ln==="FeatureCollection")for(ci=0;ci<wn.features.length;ci++)Nt(wn.features[ci],ei);else if(ln==="GeometryCollection")for(ci=0;ci<wn.geometries.length;ci++)Nt(wn.geometries[ci],ei);else if(ln==="Feature")Nt(wn.geometry,ei);else if(ln==="Polygon")A(wn.coordinates,ei);else if(ln==="MultiPolygon")for(ci=0;ci<wn.coordinates.length;ci++)A(wn.coordinates[ci],ei);return wn})(Rt,!0);try{if(St.filter){var ct=w.createExpression(St.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ct.result==="error")throw new Error(ct.value.map(function(Nt){return Nt.key+": "+Nt.message}).join(", "));var It=Rt.features.filter(function(Nt){return ct.value.evaluate({zoom:0},Nt)});Rt={type:"FeatureCollection",features:It}}Fe._geoJSONIndex=St.cluster?new xe(function(Nt){var wn=Nt.superclusterOptions,ei=Nt.clusterProperties;if(!ei||!wn)return wn;for(var ci={},ln={},ti={accumulated:null,zoom:0},$n={properties:null},ri=Object.keys(ei),oa=0,yi=ri;oa<yi.length;oa+=1){var ya=yi[oa],Ya=ei[ya],ha=Ya[0],Fa=w.createExpression(Ya[1]),Sa=w.createExpression(typeof ha=="string"?[ha,["accumulated"],["get",ya]]:ha);ci[ya]=Fa.value,ln[ya]=Sa.value}return wn.map=function(xs){$n.properties=xs;for(var co={},Lo=0,Za=ri;Lo<Za.length;Lo+=1){var Kn=Za[Lo];co[Kn]=ci[Kn].evaluate(ti,$n)}return co},wn.reduce=function(xs,co){$n.properties=co;for(var Lo=0,Za=ri;Lo<Za.length;Lo+=1){var Kn=Za[Lo];ti.accumulated=xs[Kn],xs[Kn]=ln[Kn].evaluate(ti,$n)}},wn}(St)).load(Rt.features):function(Nt,wn){return new At(Nt,wn)}(Rt,St.geojsonVtOptions)}catch(Nt){return nt(Nt)}Fe.loaded={};var gr={};if($t){var Br=$t.finish();Br&&(gr.resourceTiming={},gr.resourceTiming[St.source]=JSON.parse(JSON.stringify(Br)))}nt(null,gr)})}},ve.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ve.prototype.reloadTile=function(Fe,nt){var St=this.loaded;return St&&St[Fe.uid]?ge.prototype.reloadTile.call(this,Fe,nt):this.loadTile(Fe,nt)},ve.prototype.loadGeoJSON=function(Fe,nt){if(Fe.request)w.getJSON(Fe.request,nt);else{if(typeof Fe.data!="string")return nt(new Error("Input data given to '"+Fe.source+"' is not a valid GeoJSON object."));try{return nt(null,JSON.parse(Fe.data))}catch(St){return nt(new Error("Input data given to '"+Fe.source+"' is not a valid GeoJSON object."))}}},ve.prototype.removeSource=function(Fe,nt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),nt()},ve.prototype.getClusterExpansionZoom=function(Fe,nt){try{nt(null,this._geoJSONIndex.getClusterExpansionZoom(Fe.clusterId))}catch(St){nt(St)}},ve.prototype.getClusterChildren=function(Fe,nt){try{nt(null,this._geoJSONIndex.getChildren(Fe.clusterId))}catch(St){nt(St)}},ve.prototype.getClusterLeaves=function(Fe,nt){try{nt(null,this._geoJSONIndex.getLeaves(Fe.clusterId,Fe.limit,Fe.offset))}catch(St){nt(St)}},ve}(se),Pt=function(ge){var ve=this;this.self=ge,this.actor=new w.Actor(ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:se,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Fe,nt){if(ve.workerSourceTypes[Fe])throw new Error('Worker source with name "'+Fe+'" already registered.');ve.workerSourceTypes[Fe]=nt},this.self.registerRTLTextPlugin=function(Fe){if(w.plugin.isParsed())throw new Error("RTL text plugin already registered.");w.plugin.applyArabicShaping=Fe.applyArabicShaping,w.plugin.processBidirectionalText=Fe.processBidirectionalText,w.plugin.processStyledBidirectionalText=Fe.processStyledBidirectionalText}};return Pt.prototype.setReferrer=function(ge,ve){this.referrer=ve},Pt.prototype.setImages=function(ge,ve,Fe){for(var nt in this.availableImages[ge]=ve,this.workerSources[ge]){var St=this.workerSources[ge][nt];for(var $t in St)St[$t].availableImages=ve}Fe()},Pt.prototype.setLayers=function(ge,ve,Fe){this.getLayerIndex(ge).replace(ve),Fe()},Pt.prototype.updateLayers=function(ge,ve,Fe){this.getLayerIndex(ge).update(ve.layers,ve.removedIds),Fe()},Pt.prototype.loadTile=function(ge,ve,Fe){this.getWorkerSource(ge,ve.type,ve.source).loadTile(ve,Fe)},Pt.prototype.loadDEMTile=function(ge,ve,Fe){this.getDEMWorkerSource(ge,ve.source).loadTile(ve,Fe)},Pt.prototype.reloadTile=function(ge,ve,Fe){this.getWorkerSource(ge,ve.type,ve.source).reloadTile(ve,Fe)},Pt.prototype.abortTile=function(ge,ve,Fe){this.getWorkerSource(ge,ve.type,ve.source).abortTile(ve,Fe)},Pt.prototype.removeTile=function(ge,ve,Fe){this.getWorkerSource(ge,ve.type,ve.source).removeTile(ve,Fe)},Pt.prototype.removeDEMTile=function(ge,ve){this.getDEMWorkerSource(ge,ve.source).removeTile(ve)},Pt.prototype.removeSource=function(ge,ve,Fe){if(this.workerSources[ge]&&this.workerSources[ge][ve.type]&&this.workerSources[ge][ve.type][ve.source]){var nt=this.workerSources[ge][ve.type][ve.source];delete this.workerSources[ge][ve.type][ve.source],nt.removeSource!==void 0?nt.removeSource(ve,Fe):Fe()}},Pt.prototype.loadWorkerSource=function(ge,ve,Fe){try{this.self.importScripts(ve.url),Fe()}catch(nt){Fe(nt.toString())}},Pt.prototype.syncRTLPluginState=function(ge,ve,Fe){try{w.plugin.setState(ve);var nt=w.plugin.getPluginURL();if(w.plugin.isLoaded()&&!w.plugin.isParsed()&&nt!=null){this.self.importScripts(nt);var St=w.plugin.isParsed();Fe(St?void 0:new Error("RTL Text Plugin failed to import scripts from "+nt),St)}}catch($t){Fe($t.toString())}},Pt.prototype.getAvailableImages=function(ge){var ve=this.availableImages[ge];return ve||(ve=[]),ve},Pt.prototype.getLayerIndex=function(ge){var ve=this.layerIndexes[ge];return ve||(ve=this.layerIndexes[ge]=new ee),ve},Pt.prototype.getWorkerSource=function(ge,ve,Fe){var nt=this;return this.workerSources[ge]||(this.workerSources[ge]={}),this.workerSources[ge][ve]||(this.workerSources[ge][ve]={}),this.workerSources[ge][ve][Fe]||(this.workerSources[ge][ve][Fe]=new this.workerSourceTypes[ve]({send:function(St,$t,vr){nt.actor.send(St,$t,vr,ge)}},this.getLayerIndex(ge),this.getAvailableImages(ge))),this.workerSources[ge][ve][Fe]},Pt.prototype.getDEMWorkerSource=function(ge,ve){return this.demWorkerSources[ge]||(this.demWorkerSources[ge]={}),this.demWorkerSources[ge][ve]||(this.demWorkerSources[ge][ve]=new $),this.demWorkerSources[ge][ve]},Pt.prototype.enforceCacheSizeLimit=function(ge,ve){w.enforceCacheSizeLimit(ve)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Pt(self)),Pt}),W(["./shared"],function(w){"use strict";var X=w.createCommonjsModule(function(E){function M(V){return!C(V)}function C(V){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var fe,Oe,ut=new Blob([""],{type:"text/javascript"}),Et=URL.createObjectURL(ut);try{Oe=new Worker(Et),fe=!0}catch(Wt){fe=!1}return Oe&&Oe.terminate(),URL.revokeObjectURL(Et),fe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var fe=document.createElement("canvas");fe.width=fe.height=1;var Oe=fe.getContext("2d");if(!Oe)return!1;var ut=Oe.getImageData(0,0,1,1);return ut&&ut.width===fe.width}()?(I[ie=V&&V.failIfMajorPerformanceCaveat]===void 0&&(I[ie]=function(fe){var Oe=function(Et){var Wt=document.createElement("canvas"),Xt=Object.create(M.webGLContextAttributes);return Xt.failIfMajorPerformanceCaveat=Et,Wt.probablySupportsContext?Wt.probablySupportsContext("webgl",Xt)||Wt.probablySupportsContext("experimental-webgl",Xt):Wt.supportsContext?Wt.supportsContext("webgl",Xt)||Wt.supportsContext("experimental-webgl",Xt):Wt.getContext("webgl",Xt)||Wt.getContext("experimental-webgl",Xt)}(fe);if(!Oe)return!1;var ut=Oe.createShader(Oe.VERTEX_SHADER);return!(!ut||Oe.isContextLost())&&(Oe.shaderSource(ut,"void main() {}"),Oe.compileShader(ut),Oe.getShaderParameter(ut,Oe.COMPILE_STATUS)===!0)}(ie)),I[ie]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ie}E.exports?E.exports=M:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=M,window.mapboxgl.notSupportedReason=C);var I={};M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),j={create:function(E,M,C){var I=w.window.document.createElement(E);return M!==void 0&&(I.className=M),C&&C.appendChild(I),I},createNS:function(E,M){return w.window.document.createElementNS(E,M)}},ee=w.window.document&&w.window.document.documentElement.style;function Y(E){if(!ee)return E[0];for(var M=0;M<E.length;M++)if(E[M]in ee)return E[M];return E[0]}var re,Q=Y(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){ee&&Q&&(re=ee[Q],ee[Q]="none")},j.enableDrag=function(){ee&&Q&&(ee[Q]=re)};var ye=Y(["transform","WebkitTransform"]);j.setTransform=function(E,M){E.style[ye]=M};var se=!1;try{var ne=Object.defineProperty({},"passive",{get:function(){se=!0}});w.window.addEventListener("test",ne,ne),w.window.removeEventListener("test",ne,ne)}catch(E){se=!1}j.addEventListener=function(E,M,C,I){I===void 0&&(I={}),E.addEventListener(M,C,"passive"in I&&se?I:I.capture)},j.removeEventListener=function(E,M,C,I){I===void 0&&(I={}),E.removeEventListener(M,C,"passive"in I&&se?I:I.capture)};var $=function(E){E.preventDefault(),E.stopPropagation(),w.window.removeEventListener("click",$,!0)};function A(E){var M=E.userImage;return!!(M&&M.render&&M.render())&&(E.data.replace(new Uint8Array(M.data.buffer)),!0)}j.suppressClick=function(){w.window.addEventListener("click",$,!0),w.window.setTimeout(function(){w.window.removeEventListener("click",$,!0)},0)},j.mousePos=function(E,M){var C=E.getBoundingClientRect();return new w.Point(M.clientX-C.left-E.clientLeft,M.clientY-C.top-E.clientTop)},j.touchPos=function(E,M){for(var C=E.getBoundingClientRect(),I=[],V=0;V<M.length;V++)I.push(new w.Point(M[V].clientX-C.left-E.clientLeft,M[V].clientY-C.top-E.clientTop));return I},j.mouseButton=function(E){return w.window.InstallTrigger!==void 0&&E.button===2&&E.ctrlKey&&w.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:E.button},j.remove=function(E){E.parentNode&&E.parentNode.removeChild(E)};var b=function(E){function M(){E.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new w.RGBAImage({width:1,height:1}),this.dirty=!0}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.isLoaded=function(){return this.loaded},M.prototype.setLoaded=function(C){if(this.loaded!==C&&(this.loaded=C,C)){for(var I=0,V=this.requestors;I<V.length;I+=1){var ie=V[I];this._notify(ie.ids,ie.callback)}this.requestors=[]}},M.prototype.getImage=function(C){return this.images[C]},M.prototype.addImage=function(C,I){this._validate(C,I)&&(this.images[C]=I)},M.prototype._validate=function(C,I){var V=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchX" value'))),V=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchY" value'))),V=!1),this._validateContent(I.content,I)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "content" value'))),V=!1),V},M.prototype._validateStretch=function(C,I){if(!C)return!0;for(var V=0,ie=0,fe=C;ie<fe.length;ie+=1){var Oe=fe[ie];if(Oe[0]<V||Oe[1]<Oe[0]||I<Oe[1])return!1;V=Oe[1]}return!0},M.prototype._validateContent=function(C,I){return!(C&&(C.length!==4||C[0]<0||I.data.width<C[0]||C[1]<0||I.data.height<C[1]||C[2]<0||I.data.width<C[2]||C[3]<0||I.data.height<C[3]||C[2]<C[0]||C[3]<C[1]))},M.prototype.updateImage=function(C,I){I.version=this.images[C].version+1,this.images[C]=I,this.updatedImages[C]=!0},M.prototype.removeImage=function(C){var I=this.images[C];delete this.images[C],delete this.patterns[C],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},M.prototype.listImages=function(){return Object.keys(this.images)},M.prototype.getImages=function(C,I){var V=!0;if(!this.isLoaded())for(var ie=0,fe=C;ie<fe.length;ie+=1)this.images[fe[ie]]||(V=!1);this.isLoaded()||V?this._notify(C,I):this.requestors.push({ids:C,callback:I})},M.prototype._notify=function(C,I){for(var V={},ie=0,fe=C;ie<fe.length;ie+=1){var Oe=fe[ie];this.images[Oe]||this.fire(new w.Event("styleimagemissing",{id:Oe}));var ut=this.images[Oe];ut?V[Oe]={data:ut.data.clone(),pixelRatio:ut.pixelRatio,sdf:ut.sdf,version:ut.version,stretchX:ut.stretchX,stretchY:ut.stretchY,content:ut.content,hasRenderCallback:!!(ut.userImage&&ut.userImage.render)}:w.warnOnce('Image "'+Oe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,V)},M.prototype.getPixelSize=function(){var C=this.atlasImage;return{width:C.width,height:C.height}},M.prototype.getPattern=function(C){var I=this.patterns[C],V=this.getImage(C);if(!V)return null;if(I&&I.position.version===V.version)return I.position;if(I)I.position.version=V.version;else{var ie={w:V.data.width+2,h:V.data.height+2,x:0,y:0},fe=new w.ImagePosition(ie,V);this.patterns[C]={bin:ie,position:fe}}return this._updatePatternAtlas(),this.patterns[C].position},M.prototype.bind=function(C){var I=C.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new w.Texture(C,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},M.prototype._updatePatternAtlas=function(){var C=[];for(var I in this.patterns)C.push(this.patterns[I].bin);var V=w.potpack(C),ie=V.w,fe=V.h,Oe=this.atlasImage;for(var ut in Oe.resize({width:ie||1,height:fe||1}),this.patterns){var Et=this.patterns[ut].bin,Wt=Et.x+1,Xt=Et.y+1,Kt=this.images[ut].data,_r=Kt.width,dr=Kt.height;w.RGBAImage.copy(Kt,Oe,{x:0,y:0},{x:Wt,y:Xt},{width:_r,height:dr}),w.RGBAImage.copy(Kt,Oe,{x:0,y:dr-1},{x:Wt,y:Xt-1},{width:_r,height:1}),w.RGBAImage.copy(Kt,Oe,{x:0,y:0},{x:Wt,y:Xt+dr},{width:_r,height:1}),w.RGBAImage.copy(Kt,Oe,{x:_r-1,y:0},{x:Wt-1,y:Xt},{width:1,height:dr}),w.RGBAImage.copy(Kt,Oe,{x:0,y:0},{x:Wt+_r,y:Xt},{width:1,height:dr})}this.dirty=!0},M.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},M.prototype.dispatchRenderCallbacks=function(C){for(var I=0,V=C;I<V.length;I+=1){var ie=V[I];if(!this.callbackDispatchedThisFrame[ie]){this.callbackDispatchedThisFrame[ie]=!0;var fe=this.images[ie];A(fe)&&this.updateImage(ie,fe)}}},M}(w.Evented),te=De,le=De,Ae=1e20;function De(E,M,C,I,V,ie){this.fontSize=E||24,this.buffer=M===void 0?3:M,this.cutoff=I||.25,this.fontFamily=V||"sans-serif",this.fontWeight=ie||"normal",this.radius=C||8;var fe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(fe*fe),this.gridInner=new Float64Array(fe*fe),this.f=new Float64Array(fe),this.d=new Float64Array(fe),this.z=new Float64Array(fe+1),this.v=new Int16Array(fe),this.middle=Math.round(fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ne(E,M,C,I,V,ie,fe){for(var Oe=0;Oe<M;Oe++){for(var ut=0;ut<C;ut++)I[ut]=E[ut*M+Oe];for(Te(I,V,ie,fe,C),ut=0;ut<C;ut++)E[ut*M+Oe]=V[ut]}for(ut=0;ut<C;ut++){for(Oe=0;Oe<M;Oe++)I[Oe]=E[ut*M+Oe];for(Te(I,V,ie,fe,M),Oe=0;Oe<M;Oe++)E[ut*M+Oe]=Math.sqrt(V[Oe])}}function Te(E,M,C,I,V){C[0]=0,I[0]=-Ae,I[1]=+Ae;for(var ie=1,fe=0;ie<V;ie++){for(var Oe=(E[ie]+ie*ie-(E[C[fe]]+C[fe]*C[fe]))/(2*ie-2*C[fe]);Oe<=I[fe];)fe--,Oe=(E[ie]+ie*ie-(E[C[fe]]+C[fe]*C[fe]))/(2*ie-2*C[fe]);C[++fe]=ie,I[fe]=Oe,I[fe+1]=+Ae}for(ie=0,fe=0;ie<V;ie++){for(;I[fe+1]<ie;)fe++;M[ie]=(ie-C[fe])*(ie-C[fe])+E[C[fe]]}}De.prototype.draw=function(E){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(E,this.buffer,this.middle);for(var M=this.ctx.getImageData(0,0,this.size,this.size),C=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var V=M.data[4*I+3]/255;this.gridOuter[I]=V===1?0:V===0?Ae:Math.pow(Math.max(0,.5-V),2),this.gridInner[I]=V===1?Ae:V===0?0:Math.pow(Math.max(0,V-.5),2)}for(Ne(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ne(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++)C[I]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[I]-this.gridInner[I])/this.radius+this.cutoff))));return C},te.default=le;var We=function(E,M){this.requestManager=E,this.localIdeographFontFamily=M,this.entries={}};We.prototype.setURL=function(E){this.url=E},We.prototype.getGlyphs=function(E,M){var C=this,I=[];for(var V in E)for(var ie=0,fe=E[V];ie<fe.length;ie+=1)I.push({stack:V,id:fe[ie]});w.asyncAll(I,function(Oe,ut){var Et=Oe.stack,Wt=Oe.id,Xt=C.entries[Et];Xt||(Xt=C.entries[Et]={glyphs:{},requests:{},ranges:{}});var Kt=Xt.glyphs[Wt];if(Kt===void 0){if(Kt=C._tinySDF(Xt,Et,Wt))return Xt.glyphs[Wt]=Kt,void ut(null,{stack:Et,id:Wt,glyph:Kt});var _r=Math.floor(Wt/256);if(256*_r>65535)ut(new Error("glyphs > 65535 not supported"));else if(Xt.ranges[_r])ut(null,{stack:Et,id:Wt,glyph:Kt});else{var dr=Xt.requests[_r];dr||(dr=Xt.requests[_r]=[],We.loadGlyphRange(Et,_r,C.url,C.requestManager,function(Pr,cr){if(cr){for(var Dr in cr)C._doesCharSupportLocalGlyph(+Dr)||(Xt.glyphs[+Dr]=cr[+Dr]);Xt.ranges[_r]=!0}for(var Wr=0,rn=dr;Wr<rn.length;Wr+=1)(0,rn[Wr])(Pr,cr);delete Xt.requests[_r]})),dr.push(function(Pr,cr){Pr?ut(Pr):cr&&ut(null,{stack:Et,id:Wt,glyph:cr[Wt]||null})})}}else ut(null,{stack:Et,id:Wt,glyph:Kt})},function(Oe,ut){if(Oe)M(Oe);else if(ut){for(var Et={},Wt=0,Xt=ut;Wt<Xt.length;Wt+=1){var Kt=Xt[Wt],_r=Kt.stack,dr=Kt.id,Pr=Kt.glyph;(Et[_r]||(Et[_r]={}))[dr]=Pr&&{id:Pr.id,bitmap:Pr.bitmap.clone(),metrics:Pr.metrics}}M(null,Et)}})},We.prototype._doesCharSupportLocalGlyph=function(E){return!!this.localIdeographFontFamily&&(w.isChar["CJK Unified Ideographs"](E)||w.isChar["Hangul Syllables"](E)||w.isChar.Hiragana(E)||w.isChar.Katakana(E))},We.prototype._tinySDF=function(E,M,C){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(C)){var V=E.tinySDF;if(!V){var ie="400";/bold/i.test(M)?ie="900":/medium/i.test(M)?ie="500":/light/i.test(M)&&(ie="200"),V=E.tinySDF=new We.TinySDF(24,3,8,.25,I,ie)}return{id:C,bitmap:new w.AlphaImage({width:30,height:30},V.draw(String.fromCharCode(C))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},We.loadGlyphRange=function(E,M,C,I,V){var ie=256*M,fe=ie+255,Oe=I.transformRequest(I.normalizeGlyphsURL(C).replace("{fontstack}",E).replace("{range}",ie+"-"+fe),w.ResourceType.Glyphs);w.getArrayBuffer(Oe,function(ut,Et){if(ut)V(ut);else if(Et){for(var Wt={},Xt=0,Kt=w.parseGlyphPBF(Et);Xt<Kt.length;Xt+=1){var _r=Kt[Xt];Wt[_r.id]=_r}V(null,Wt)}})},We.TinySDF=te;var _e=function(){this.specification=w.styleSpec.light.position};_e.prototype.possiblyEvaluate=function(E,M){return w.sphericalToCartesian(E.expression.evaluate(M))},_e.prototype.interpolate=function(E,M,C){return{x:w.number(E.x,M.x,C),y:w.number(E.y,M.y,C),z:w.number(E.z,M.z,C)}};var we=new w.Properties({anchor:new w.DataConstantProperty(w.styleSpec.light.anchor),position:new _e,color:new w.DataConstantProperty(w.styleSpec.light.color),intensity:new w.DataConstantProperty(w.styleSpec.light.intensity)}),Re=function(E){function M(C){E.call(this),this._transitionable=new w.Transitionable(we),this.setLight(C),this._transitioning=this._transitionable.untransitioned()}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getLight=function(){return this._transitionable.serialize()},M.prototype.setLight=function(C,I){if(I===void 0&&(I={}),!this._validate(w.validateLight,C,I))for(var V in C){var ie=C[V];w.endsWith(V,"-transition")?this._transitionable.setTransition(V.slice(0,-11),ie):this._transitionable.setValue(V,ie)}},M.prototype.updateTransitions=function(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)},M.prototype.hasTransition=function(){return this._transitioning.hasTransition()},M.prototype.recalculate=function(C){this.properties=this._transitioning.possiblyEvaluate(C)},M.prototype._validate=function(C,I,V){return(!V||V.validate!==!1)&&w.emitValidationErrors(this,C.call(w.validateStyle,w.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:w.styleSpec})))},M}(w.Evented),ze=function(E,M){this.width=E,this.height=M,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ze.prototype.getDash=function(E,M){var C=E.join(",")+String(M);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(E,M)),this.dashEntry[C]},ze.prototype.getDashRanges=function(E,M,C){var I=[],V=E.length%2==1?-E[E.length-1]*C:0,ie=E[0]*C,fe=!0;I.push({left:V,right:ie,isDash:fe,zeroLength:E[0]===0});for(var Oe=E[0],ut=1;ut<E.length;ut++){var Et=E[ut];I.push({left:V=Oe*C,right:ie=(Oe+=Et)*C,isDash:fe=!fe,zeroLength:Et===0})}return I},ze.prototype.addRoundDash=function(E,M,C){for(var I=M/2,V=-C;V<=C;V++)for(var ie=this.width*(this.nextRow+C+V),fe=0,Oe=E[fe],ut=0;ut<this.width;ut++){ut/Oe.right>1&&(Oe=E[++fe]);var Et=Math.abs(ut-Oe.left),Wt=Math.abs(ut-Oe.right),Xt=Math.min(Et,Wt),Kt=void 0,_r=V/C*(I+1);if(Oe.isDash){var dr=I-Math.abs(_r);Kt=Math.sqrt(Xt*Xt+dr*dr)}else Kt=I-Math.sqrt(Xt*Xt+_r*_r);this.data[ie+ut]=Math.max(0,Math.min(255,Kt+128))}},ze.prototype.addRegularDash=function(E){for(var M=E.length-1;M>=0;--M){var C=E[M],I=E[M+1];C.zeroLength?E.splice(M,1):I&&I.isDash===C.isDash&&(I.left=C.left,E.splice(M,1))}var V=E[0],ie=E[E.length-1];V.isDash===ie.isDash&&(V.left=ie.left-this.width,ie.right=V.right+this.width);for(var fe=this.width*this.nextRow,Oe=0,ut=E[Oe],Et=0;Et<this.width;Et++){Et/ut.right>1&&(ut=E[++Oe]);var Wt=Math.abs(Et-ut.left),Xt=Math.abs(Et-ut.right),Kt=Math.min(Wt,Xt);this.data[fe+Et]=Math.max(0,Math.min(255,(ut.isDash?Kt:-Kt)+128))}},ze.prototype.addDash=function(E,M){var C=M?7:0,I=2*C+1;if(this.nextRow+I>this.height)return w.warnOnce("LineAtlas out of space"),null;for(var V=0,ie=0;ie<E.length;ie++)V+=E[ie];if(V!==0){var fe=this.width/V,Oe=this.getDashRanges(E,this.width,fe);M?this.addRoundDash(Oe,fe,C):this.addRegularDash(Oe)}var ut={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:V};return this.nextRow+=I,this.dirty=!0,ut},ze.prototype.bind=function(E){var M=E.gl;this.texture?(M.bindTexture(M.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,M.texSubImage2D(M.TEXTURE_2D,0,0,0,this.width,this.height,M.ALPHA,M.UNSIGNED_BYTE,this.data))):(this.texture=M.createTexture(),M.bindTexture(M.TEXTURE_2D,this.texture),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.REPEAT),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.REPEAT),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.LINEAR),M.texImage2D(M.TEXTURE_2D,0,M.ALPHA,this.width,this.height,0,M.ALPHA,M.UNSIGNED_BYTE,this.data))};var Ge=function E(M,C){this.workerPool=M,this.actors=[],this.currentActor=0,this.id=w.uniqueId();for(var I=this.workerPool.acquire(this.id),V=0;V<I.length;V++){var ie=new E.Actor(I[V],C,this.id);ie.name="Worker "+V,this.actors.push(ie)}};function yt(E,M,C){var I=function(V,ie){if(V)return C(V);if(ie){var fe=w.pick(w.extend(ie,E),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ie.vector_layers&&(fe.vectorLayers=ie.vector_layers,fe.vectorLayerIds=fe.vectorLayers.map(function(Oe){return Oe.id})),fe.tiles=M.canonicalizeTileset(fe,E.url),C(null,fe)}};return E.url?w.getJSON(M.transformRequest(M.normalizeSourceURL(E.url),w.ResourceType.Source),I):w.browser.frame(function(){return I(null,E)})}Ge.prototype.broadcast=function(E,M,C){w.asyncAll(this.actors,function(I,V){I.send(E,M,V)},C=C||function(){})},Ge.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ge.prototype.remove=function(){this.actors.forEach(function(E){E.remove()}),this.actors=[],this.workerPool.release(this.id)},Ge.Actor=w.Actor;var ke=function(E,M,C){this.bounds=w.LngLatBounds.convert(this.validateBounds(E)),this.minzoom=M||0,this.maxzoom=C||24};ke.prototype.validateBounds=function(E){return Array.isArray(E)&&E.length===4?[Math.max(-180,E[0]),Math.max(-90,E[1]),Math.min(180,E[2]),Math.min(90,E[3])]:[-180,-90,180,90]},ke.prototype.contains=function(E){var M=Math.pow(2,E.z),C=Math.floor(w.mercatorXfromLng(this.bounds.getWest())*M),I=Math.floor(w.mercatorYfromLat(this.bounds.getNorth())*M),V=Math.ceil(w.mercatorXfromLng(this.bounds.getEast())*M),ie=Math.ceil(w.mercatorYfromLat(this.bounds.getSouth())*M);return E.x>=C&&E.x<V&&E.y>=I&&E.y<ie};var tt=function(E){function M(C,I,V,ie){if(E.call(this),this.id=C,this.dispatcher=V,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,w.extend(this,w.pick(I,["url","scheme","tileSize","promoteId"])),this._options=w.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ie)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=yt(this._options,this.map._requestManager,function(I,V){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):V&&(w.extend(C,V),V.bounds&&(C.tileBounds=new ke(V.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(V.tiles,C.map._requestManager._customAccessToken),w.postMapLoadEvent(V.tiles,C.map._getMapId(),C.map._requestManager._skuToken,C.map._requestManager._customAccessToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},M.prototype.loaded=function(){return this._loaded},M.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},M.prototype.onAdd=function(C){this.map=C,this.load()},M.prototype.setSourceProperty=function(C){this._tileJSONRequest&&this._tileJSONRequest.cancel(),C(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},M.prototype.setTiles=function(C){var I=this;return this.setSourceProperty(function(){I._options.tiles=C}),this},M.prototype.setUrl=function(C){var I=this;return this.setSourceProperty(function(){I.url=C,I._options.url=C}),this},M.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},M.prototype.serialize=function(){return w.extend({},this._options)},M.prototype.loadTile=function(C,I){var V=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),ie={request:this.map._requestManager.transformRequest(V,w.ResourceType.Tile),uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function fe(Oe,ut){return delete C.request,C.aborted?I(null):Oe&&Oe.status!==404?I(Oe):(ut&&ut.resourceTiming&&(C.resourceTiming=ut.resourceTiming),this.map._refreshExpiredTiles&&ut&&C.setExpiryData(ut),C.loadVectorData(ut,this.map.painter),w.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(C.reloadCallback&&(this.loadTile(C,C.reloadCallback),C.reloadCallback=null)))}ie.request.collectResourceTiming=this._collectResourceTiming,C.actor&&C.state!=="expired"?C.state==="loading"?C.reloadCallback=I:C.request=C.actor.send("reloadTile",ie,fe.bind(this)):(C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",ie,fe.bind(this)))},M.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.actor&&C.actor.send("abortTile",{uid:C.uid,type:this.type,source:this.id},void 0)},M.prototype.unloadTile=function(C){C.unloadVectorData(),C.actor&&C.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id},void 0)},M.prototype.hasTransition=function(){return!1},M}(w.Evented),ae=function(E){function M(C,I,V,ie){E.call(this),this.id=C,this.dispatcher=V,this.setEventedParent(ie),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=w.extend({type:"raster"},I),w.extend(this,w.pick(I,["url","scheme","tileSize"]))}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=yt(this._options,this.map._requestManager,function(I,V){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):V&&(w.extend(C,V),V.bounds&&(C.tileBounds=new ke(V.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(V.tiles),w.postMapLoadEvent(V.tiles,C.map._getMapId(),C.map._requestManager._skuToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},M.prototype.loaded=function(){return this._loaded},M.prototype.onAdd=function(C){this.map=C,this.load()},M.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},M.prototype.serialize=function(){return w.extend({},this._options)},M.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},M.prototype.loadTile=function(C,I){var V=this,ie=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);C.request=w.getImage(this.map._requestManager.transformRequest(ie,w.ResourceType.Tile),function(fe,Oe){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(fe)C.state="errored",I(fe);else if(Oe){V.map._refreshExpiredTiles&&C.setExpiryData(Oe),delete Oe.cacheControl,delete Oe.expires;var ut=V.map.painter.context,Et=ut.gl;C.texture=V.map.painter.getTileTexture(Oe.width),C.texture?C.texture.update(Oe,{useMipmap:!0}):(C.texture=new w.Texture(ut,Oe,Et.RGBA,{useMipmap:!0}),C.texture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE,Et.LINEAR_MIPMAP_NEAREST),ut.extTextureFilterAnisotropic&&Et.texParameterf(Et.TEXTURE_2D,ut.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ut.extTextureFilterAnisotropicMax)),C.state="loaded",w.cacheEntryPossiblyAdded(V.dispatcher),I(null)}})},M.prototype.abortTile=function(C,I){C.request&&(C.request.cancel(),delete C.request),I()},M.prototype.unloadTile=function(C,I){C.texture&&this.map.painter.saveTileTexture(C.texture),I()},M.prototype.hasTransition=function(){return!1},M}(w.Evented),Ke=function(E){function M(C,I,V,ie){E.call(this,C,I,V,ie),this.type="raster-dem",this.maxzoom=22,this._options=w.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},M.prototype.loadTile=function(C,I){var V=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ie(fe,Oe){fe&&(C.state="errored",I(fe)),Oe&&(C.dem=Oe,C.needsHillshadePrepare=!0,C.state="loaded",I(null))}C.request=w.getImage(this.map._requestManager.transformRequest(V,w.ResourceType.Tile),function(fe,Oe){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(fe)C.state="errored",I(fe);else if(Oe){this.map._refreshExpiredTiles&&C.setExpiryData(Oe),delete Oe.cacheControl,delete Oe.expires;var ut=w.window.ImageBitmap&&Oe instanceof w.window.ImageBitmap&&w.offscreenCanvasSupported()?Oe:w.browser.getImageData(Oe,1),Et={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:ut,encoding:this.encoding};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",Et,ie.bind(this)))}}.bind(this)),C.neighboringTiles=this._getNeighboringTiles(C.tileID)},M.prototype._getNeighboringTiles=function(C){var I=C.canonical,V=Math.pow(2,I.z),ie=(I.x-1+V)%V,fe=I.x===0?C.wrap-1:C.wrap,Oe=(I.x+1+V)%V,ut=I.x+1===V?C.wrap+1:C.wrap,Et={};return Et[new w.OverscaledTileID(C.overscaledZ,fe,I.z,ie,I.y).key]={backfilled:!1},Et[new w.OverscaledTileID(C.overscaledZ,ut,I.z,Oe,I.y).key]={backfilled:!1},I.y>0&&(Et[new w.OverscaledTileID(C.overscaledZ,fe,I.z,ie,I.y-1).key]={backfilled:!1},Et[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},Et[new w.OverscaledTileID(C.overscaledZ,ut,I.z,Oe,I.y-1).key]={backfilled:!1}),I.y+1<V&&(Et[new w.OverscaledTileID(C.overscaledZ,fe,I.z,ie,I.y+1).key]={backfilled:!1},Et[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},Et[new w.OverscaledTileID(C.overscaledZ,ut,I.z,Oe,I.y+1).key]={backfilled:!1}),Et},M.prototype.unloadTile=function(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded",C.actor&&C.actor.send("removeDEMTile",{uid:C.uid,source:this.id})},M}(ae),he=function(E){function M(C,I,V,ie){E.call(this),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=V.getActor(),this.setEventedParent(ie),this._data=I.data,this._options=w.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var fe=w.EXTENT/this.tileSize;this.workerOptions=w.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*fe,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*fe,extent:w.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:w.EXTENT,radius:(I.clusterRadius||50)*fe,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(){var C=this;this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)C.fire(new w.ErrorEvent(I));else{var V={dataType:"source",sourceDataType:"metadata"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(V.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new w.Event("data",V))}})},M.prototype.onAdd=function(C){this.map=C,this.load()},M.prototype.setData=function(C){var I=this;return this._data=C,this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(V){if(V)I.fire(new w.ErrorEvent(V));else{var ie={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(ie.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new w.Event("data",ie))}}),this},M.prototype.getClusterExpansionZoom=function(C,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},I),this},M.prototype.getClusterChildren=function(C,I){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},I),this},M.prototype.getClusterLeaves=function(C,I,V,ie){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:I,offset:V},ie),this},M.prototype._updateWorkerData=function(C){var I=this;this._loaded=!1;var V=w.extend({},this.workerOptions),ie=this._data;typeof ie=="string"?(V.request=this.map._requestManager.transformRequest(w.browser.resolveURL(ie),w.ResourceType.Source),V.request.collectResourceTiming=this._collectResourceTiming):V.data=JSON.stringify(ie),this.actor.send(this.type+".loadData",V,function(fe,Oe){I._removed||Oe&&Oe.abandoned||(I._loaded=!0,Oe&&Oe.resourceTiming&&Oe.resourceTiming[I.id]&&(I._resourceTiming=Oe.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:V.source},null),C(fe))})},M.prototype.loaded=function(){return this._loaded},M.prototype.loadTile=function(C,I){var V=this,ie=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(ie,{type:this.type,uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(fe,Oe){return delete C.request,C.unloadVectorData(),C.aborted?I(null):fe?I(fe):(C.loadVectorData(Oe,V.map.painter,ie==="reloadTile"),I(null))})},M.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0},M.prototype.unloadTile=function(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})},M.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},M.prototype.serialize=function(){return w.extend({},this._options,{type:this.type,data:this._data})},M.prototype.hasTransition=function(){return!1},M}(w.Evented),Pe=w.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),lt=function(E){function M(C,I,V,ie){E.call(this),this.id=C,this.dispatcher=V,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ie),this.options=I}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(C,I){var V=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this.url=this.options.url,w.getImage(this.map._requestManager.transformRequest(this.url,w.ResourceType.Image),function(ie,fe){V._loaded=!0,ie?V.fire(new w.ErrorEvent(ie)):fe&&(V.image=fe,C&&(V.coordinates=C),I&&I(),V._finishLoading())})},M.prototype.loaded=function(){return this._loaded},M.prototype.updateImage=function(C){var I=this;return this.image&&C.url?(this.options.url=C.url,this.load(C.coordinates,function(){I.texture=null}),this):this},M.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})))},M.prototype.onAdd=function(C){this.map=C,this.load()},M.prototype.setCoordinates=function(C){var I=this;this.coordinates=C;var V=C.map(w.MercatorCoordinate.fromLngLat);this.tileID=function(fe){for(var Oe=1/0,ut=1/0,Et=-1/0,Wt=-1/0,Xt=0,Kt=fe;Xt<Kt.length;Xt+=1){var _r=Kt[Xt];Oe=Math.min(Oe,_r.x),ut=Math.min(ut,_r.y),Et=Math.max(Et,_r.x),Wt=Math.max(Wt,_r.y)}var dr=Math.max(Et-Oe,Wt-ut),Pr=Math.max(0,Math.floor(-Math.log(dr)/Math.LN2)),cr=Math.pow(2,Pr);return new w.CanonicalTileID(Pr,Math.floor((Oe+Et)/2*cr),Math.floor((ut+Wt)/2*cr))}(V),this.minzoom=this.maxzoom=this.tileID.z;var ie=V.map(function(fe){return I.tileID.getTilePoint(fe)._round()});return this._boundsArray=new w.StructArrayLayout4i8,this._boundsArray.emplaceBack(ie[0].x,ie[0].y,0,0),this._boundsArray.emplaceBack(ie[1].x,ie[1].y,w.EXTENT,0),this._boundsArray.emplaceBack(ie[3].x,ie[3].y,0,w.EXTENT),this._boundsArray.emplaceBack(ie[2].x,ie[2].y,w.EXTENT,w.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})),this},M.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var C=this.map.painter.context,I=C.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new w.Texture(C,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ie=this.tiles[V];ie.state!=="loaded"&&(ie.state="loaded",ie.texture=this.texture)}}},M.prototype.loadTile=function(C,I){this.tileID&&this.tileID.equals(C.tileID.canonical)?(this.tiles[String(C.tileID.wrap)]=C,C.buckets={},I(null)):(C.state="errored",I(null))},M.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},M.prototype.hasTransition=function(){return!1},M}(w.Evented),He=function(E){function M(C,I,V,ie){E.call(this,C,I,V,ie),this.roundZoom=!0,this.type="video",this.options=I}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(){var C=this;this._loaded=!1;var I=this.options;this.urls=[];for(var V=0,ie=I.urls;V<ie.length;V+=1)this.urls.push(this.map._requestManager.transformRequest(ie[V],w.ResourceType.Source).url);w.getVideo(this.urls,function(fe,Oe){C._loaded=!0,fe?C.fire(new w.ErrorEvent(fe)):Oe&&(C.video=Oe,C.video.loop=!0,C.video.setAttribute("playsinline",""),C.video.addEventListener("playing",function(){C.map.triggerRepaint()}),C.map&&C.video.play(),C._finishLoading())})},M.prototype.pause=function(){this.video&&this.video.pause()},M.prototype.play=function(){this.video&&this.video.play()},M.prototype.seek=function(C){if(this.video){var I=this.video.seekable;C<I.start(0)||C>I.end(0)?this.fire(new w.ErrorEvent(new w.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=C}},M.prototype.getVideo=function(){return this.video},M.prototype.onAdd=function(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},M.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var C=this.map.painter.context,I=C.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new w.Texture(C,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ie=this.tiles[V];ie.state!=="loaded"&&(ie.state="loaded",ie.texture=this.texture)}}},M.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},M.prototype.hasTransition=function(){return this.video&&!this.video.paused},M}(lt),Ue=function(E){function M(C,I,V,ie){E.call(this,C,I,V,ie),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(function(fe){return!Array.isArray(fe)||fe.length!==2||fe.some(function(Oe){return typeof Oe!="number"})})||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof w.window.HTMLCanvasElement||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof w.window.HTMLCanvasElement?this.options.canvas:w.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new w.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},M.prototype.getCanvas=function(){return this.canvas},M.prototype.onAdd=function(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()},M.prototype.onRemove=function(){this.pause()},M.prototype.prepare=function(){var C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var I=this.map.painter.context,V=I.gl;for(var ie in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new w.Texture(I,this.canvas,V.RGBA,{premultiply:!0}),this.tiles){var fe=this.tiles[ie];fe.state!=="loaded"&&(fe.state="loaded",fe.texture=this.texture)}}},M.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},M.prototype.hasTransition=function(){return this._playing},M.prototype._hasInvalidDimensions=function(){for(var C=0,I=[this.canvas.width,this.canvas.height];C<I.length;C+=1){var V=I[C];if(isNaN(V)||V<=0)return!0}return!1},M}(lt),Qe={vector:tt,raster:ae,"raster-dem":Ke,geojson:he,video:He,image:lt,canvas:Ue};function Se(E,M){var C=w.identity([]);return w.translate(C,C,[1,1,0]),w.scale(C,C,[.5*E.width,.5*E.height,1]),w.multiply(C,C,E.calculatePosMatrix(M.toUnwrapped()))}function xe(E,M,C,I,V,ie){var fe=function(Pr,cr,Dr){if(Pr)for(var Wr=0,rn=Pr;Wr<rn.length;Wr+=1){var xn=cr[rn[Wr]];if(xn&&xn.source===Dr&&xn.type==="fill-extrusion")return!0}else for(var dn in cr){var An=cr[dn];if(An.source===Dr&&An.type==="fill-extrusion")return!0}return!1}(V&&V.layers,M,E.id),Oe=ie.maxPitchScaleFactor(),ut=E.tilesIn(I,Oe,fe);ut.sort(rt);for(var Et=[],Wt=0,Xt=ut;Wt<Xt.length;Wt+=1){var Kt=Xt[Wt];Et.push({wrappedTileID:Kt.tileID.wrapped().key,queryResults:Kt.tile.queryRenderedFeatures(M,C,E._state,Kt.queryGeometry,Kt.cameraQueryGeometry,Kt.scale,V,ie,Oe,Se(E.transform,Kt.tileID))})}var _r=function(Pr){for(var cr={},Dr={},Wr=0,rn=Pr;Wr<rn.length;Wr+=1){var xn=rn[Wr],dn=xn.queryResults,An=xn.wrappedTileID,Vn=Dr[An]=Dr[An]||{};for(var ui in dn)for(var li=dn[ui],Ri=Vn[ui]=Vn[ui]||{},ea=cr[ui]=cr[ui]||[],ua=0,ra=li;ua<ra.length;ua+=1){var uo=ra[ua];Ri[uo.featureIndex]||(Ri[uo.featureIndex]=!0,ea.push(uo))}}return cr}(Et);for(var dr in _r)_r[dr].forEach(function(Pr){var cr=Pr.feature,Dr=E.getFeatureState(cr.layer["source-layer"],cr.id);cr.source=cr.layer.source,cr.layer["source-layer"]&&(cr.sourceLayer=cr.layer["source-layer"]),cr.state=Dr});return _r}function rt(E,M){var C=E.tileID,I=M.tileID;return C.overscaledZ-I.overscaledZ||C.canonical.y-I.canonical.y||C.wrap-I.wrap||C.canonical.x-I.canonical.x}var Je=function(E,M){this.max=E,this.onRemove=M,this.reset()};Je.prototype.reset=function(){for(var E in this.data)for(var M=0,C=this.data[E];M<C.length;M+=1){var I=C[M];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},Je.prototype.add=function(E,M,C){var I=this,V=E.wrapped().key;this.data[V]===void 0&&(this.data[V]=[]);var ie={value:M,timeout:void 0};if(C!==void 0&&(ie.timeout=setTimeout(function(){I.remove(E,ie)},C)),this.data[V].push(ie),this.order.push(V),this.order.length>this.max){var fe=this._getAndRemoveByKey(this.order[0]);fe&&this.onRemove(fe)}return this},Je.prototype.has=function(E){return E.wrapped().key in this.data},Je.prototype.getAndRemove=function(E){return this.has(E)?this._getAndRemoveByKey(E.wrapped().key):null},Je.prototype._getAndRemoveByKey=function(E){var M=this.data[E].shift();return M.timeout&&clearTimeout(M.timeout),this.data[E].length===0&&delete this.data[E],this.order.splice(this.order.indexOf(E),1),M.value},Je.prototype.getByKey=function(E){var M=this.data[E];return M?M[0].value:null},Je.prototype.get=function(E){return this.has(E)?this.data[E.wrapped().key][0].value:null},Je.prototype.remove=function(E,M){if(!this.has(E))return this;var C=E.wrapped().key,I=M===void 0?0:this.data[C].indexOf(M),V=this.data[C][I];return this.data[C].splice(I,1),V.timeout&&clearTimeout(V.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(V.value),this.order.splice(this.order.indexOf(C),1),this},Je.prototype.setMaxSize=function(E){for(this.max=E;this.order.length>this.max;){var M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this},Je.prototype.filter=function(E){var M=[];for(var C in this.data)for(var I=0,V=this.data[C];I<V.length;I+=1){var ie=V[I];E(ie.value)||M.push(ie)}for(var fe=0,Oe=M;fe<Oe.length;fe+=1){var ut=Oe[fe];this.remove(ut.value.tileID,ut)}};var dt=function(E,M,C){this.context=E;var I=E.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),E.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,M.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete M.arrayBuffer};dt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},dt.prototype.updateData=function(E){var M=this.context.gl;this.context.unbindVAO(),this.bind(),M.bufferSubData(M.ELEMENT_ARRAY_BUFFER,0,E.arrayBuffer)},dt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Bt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ye=function(E,M,C,I){this.length=M.length,this.attributes=C,this.itemSize=M.bytesPerElement,this.dynamicDraw=I,this.context=E;var V=E.gl;this.buffer=V.createBuffer(),E.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,M.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||delete M.arrayBuffer};Ye.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ye.prototype.updateData=function(E){var M=this.context.gl;this.bind(),M.bufferSubData(M.ARRAY_BUFFER,0,E.arrayBuffer)},Ye.prototype.enableAttributes=function(E,M){for(var C=0;C<this.attributes.length;C++){var I=M.attributes[this.attributes[C].name];I!==void 0&&E.enableVertexAttribArray(I)}},Ye.prototype.setVertexAttribPointers=function(E,M,C){for(var I=0;I<this.attributes.length;I++){var V=this.attributes[I],ie=M.attributes[V.name];ie!==void 0&&E.vertexAttribPointer(ie,V.components,E[Bt[V.type]],!1,this.itemSize,V.offset+this.itemSize*(C||0))}},Ye.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Xe=function(E){this.gl=E.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Xe.prototype.get=function(){return this.current},Xe.prototype.set=function(E){},Xe.prototype.getDefault=function(){return this.default},Xe.prototype.setDefault=function(){this.set(this.default)};var Le=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return w.Color.transparent},M.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.clearColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},M}(Xe),je=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return 1},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearDepth(C),this.current=C,this.dirty=!1)},M}(Xe),at=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return 0},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearStencil(C),this.current=C,this.dirty=!1)},M}(Xe),Me=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return[!0,!0,!0,!0]},M.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.colorMask(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},M}(Xe),Ze=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!0},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthMask(C),this.current=C,this.dirty=!1)},M}(Xe),_t=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return 255},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.stencilMask(C),this.current=C,this.dirty=!1)},M}(Xe),Mt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},M.prototype.set=function(C){var I=this.current;(C.func!==I.func||C.ref!==I.ref||C.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(C.func,C.ref,C.mask),this.current=C,this.dirty=!1)},M}(Xe),ir=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){var C=this.gl;return[C.KEEP,C.KEEP,C.KEEP]},M.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(C[0],C[1],C[2]),this.current=C,this.dirty=!1)},M}(Xe),Tr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=C,this.dirty=!1}},M}(Xe),et=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return[0,1]},M.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.depthRange(C[0],C[1]),this.current=C,this.dirty=!1)},M}(Xe),en=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=C,this.dirty=!1}},M}(Xe),Xr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return this.gl.LESS},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthFunc(C),this.current=C,this.dirty=!1)},M}(Xe),Sr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.BLEND):I.disable(I.BLEND),this.current=C,this.dirty=!1}},M}(Xe),pt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){var C=this.gl;return[C.ONE,C.ZERO]},M.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(C[0],C[1]),this.current=C,this.dirty=!1)},M}(Xe),Ut=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return w.Color.transparent},M.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.blendColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},M}(Xe),Gt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return this.gl.FUNC_ADD},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.blendEquation(C),this.current=C,this.dirty=!1)},M}(Xe),Tt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=C,this.dirty=!1}},M}(Xe),qt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return this.gl.BACK},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.cullFace(C),this.current=C,this.dirty=!1)},M}(Xe),fr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return this.gl.CCW},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.frontFace(C),this.current=C,this.dirty=!1)},M}(Xe),hr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)},M}(Xe),Er=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return this.gl.TEXTURE0},M.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.activeTexture(C),this.current=C,this.dirty=!1)},M}(Xe),Ir=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){var C=this.gl;return[0,0,C.drawingBufferWidth,C.drawingBufferHeight]},M.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.viewport(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},M}(Xe),ue=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,C),this.current=C,this.dirty=!1}},M}(Xe),G=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},M}(Xe),oe=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,C),this.current=C,this.dirty=!1}},M}(Xe),Ie=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,C),this.current=C,this.dirty=!1}},M}(Xe),qe=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,C),this.current=C,this.dirty=!1},M}(Xe),At=function(E){function M(C){E.call(this,C),this.vao=C.extVertexArrayObject}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M.prototype.set=function(C){this.vao&&(C!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(C),this.current=C,this.dirty=!1)},M}(Xe),rr=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return 4},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,C),this.current=C,this.dirty=!1}},M}(Xe),Zt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),this.current=C,this.dirty=!1}},M}(Xe),wt=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return!1},M.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,C),this.current=C,this.dirty=!1}},M}(Xe),Pt=function(E){function M(C,I){E.call(this,C),this.context=C,this.parent=I}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getDefault=function(){return null},M}(Xe),ge=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.setDirty=function(){this.dirty=!0},M.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,C,0),this.current=C,this.dirty=!1}},M}(Pt),ve=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},M}(Pt),Fe=function(E,M,C,I){this.context=E,this.width=M,this.height=C;var V=this.framebuffer=E.gl.createFramebuffer();this.colorAttachment=new ge(E,V),I&&(this.depthAttachment=new ve(E,V))};Fe.prototype.destroy=function(){var E=this.context.gl,M=this.colorAttachment.get();if(M&&E.deleteTexture(M),this.depthAttachment){var C=this.depthAttachment.get();C&&E.deleteRenderbuffer(C)}E.deleteFramebuffer(this.framebuffer)};var nt=function(E,M,C){this.func=E,this.mask=M,this.range=C};nt.ReadOnly=!1,nt.ReadWrite=!0,nt.disabled=new nt(519,nt.ReadOnly,[0,1]);var St=function(E,M,C,I,V,ie){this.test=E,this.ref=M,this.mask=C,this.fail=I,this.depthFail=V,this.pass=ie};St.disabled=new St({func:519,mask:0},0,0,7680,7680,7680);var $t=function(E,M,C){this.blendFunction=E,this.blendColor=M,this.mask=C};$t.disabled=new $t($t.Replace=[1,0],w.Color.transparent,[!1,!1,!1,!1]),$t.unblended=new $t($t.Replace,w.Color.transparent,[!0,!0,!0,!0]),$t.alphaBlended=new $t([1,771],w.Color.transparent,[!0,!0,!0,!0]);var vr=function(E,M,C){this.enable=E,this.mode=M,this.frontFace=C};vr.disabled=new vr(!1,1029,2305),vr.backCCW=new vr(!0,1029,2305);var Rt=function(E){this.gl=E,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Le(this),this.clearDepth=new je(this),this.clearStencil=new at(this),this.colorMask=new Me(this),this.depthMask=new Ze(this),this.stencilMask=new _t(this),this.stencilFunc=new Mt(this),this.stencilOp=new ir(this),this.stencilTest=new Tr(this),this.depthRange=new et(this),this.depthTest=new en(this),this.depthFunc=new Xr(this),this.blend=new Sr(this),this.blendFunc=new pt(this),this.blendColor=new Ut(this),this.blendEquation=new Gt(this),this.cullFace=new Tt(this),this.cullFaceSide=new qt(this),this.frontFace=new fr(this),this.program=new hr(this),this.activeTexture=new Er(this),this.viewport=new Ir(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new G(this),this.bindTexture=new oe(this),this.bindVertexBuffer=new Ie(this),this.bindElementBuffer=new qe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new At(this),this.pixelStoreUnpack=new rr(this),this.pixelStoreUnpackPremultiplyAlpha=new Zt(this),this.pixelStoreUnpackFlipY=new wt(this),this.extTextureFilterAnisotropic=E.getExtension("EXT_texture_filter_anisotropic")||E.getExtension("MOZ_EXT_texture_filter_anisotropic")||E.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=E.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=E.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(E.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=E.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=E.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE)};Rt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Rt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Rt.prototype.createIndexBuffer=function(E,M){return new dt(this,E,M)},Rt.prototype.createVertexBuffer=function(E,M,C){return new Ye(this,E,M,C)},Rt.prototype.createRenderbuffer=function(E,M,C){var I=this.gl,V=I.createRenderbuffer();return this.bindRenderbuffer.set(V),I.renderbufferStorage(I.RENDERBUFFER,E,M,C),this.bindRenderbuffer.set(null),V},Rt.prototype.createFramebuffer=function(E,M,C){return new Fe(this,E,M,C)},Rt.prototype.clear=function(E){var M=E.color,C=E.depth,I=this.gl,V=0;M&&(V|=I.COLOR_BUFFER_BIT,this.clearColor.set(M),this.colorMask.set([!0,!0,!0,!0])),C!==void 0&&(V|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),I.clear(V)},Rt.prototype.setCullFace=function(E){E.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(E.mode),this.frontFace.set(E.frontFace))},Rt.prototype.setDepthMode=function(E){E.func!==this.gl.ALWAYS||E.mask?(this.depthTest.set(!0),this.depthFunc.set(E.func),this.depthMask.set(E.mask),this.depthRange.set(E.range)):this.depthTest.set(!1)},Rt.prototype.setStencilMode=function(E){E.test.func!==this.gl.ALWAYS||E.mask?(this.stencilTest.set(!0),this.stencilMask.set(E.mask),this.stencilOp.set([E.fail,E.depthFail,E.pass]),this.stencilFunc.set({func:E.test.func,ref:E.ref,mask:E.test.mask})):this.stencilTest.set(!1)},Rt.prototype.setColorMode=function(E){w.deepEqual(E.blendFunction,$t.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(E.blendFunction),this.blendColor.set(E.blendColor)),this.colorMask.set(E.mask)},Rt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ct=function(E){function M(C,I,V){var ie=this;E.call(this),this.id=C,this.dispatcher=V,this.on("data",function(fe){fe.dataType==="source"&&fe.sourceDataType==="metadata"&&(ie._sourceLoaded=!0),ie._sourceLoaded&&!ie._paused&&fe.dataType==="source"&&fe.sourceDataType==="content"&&(ie.reload(),ie.transform&&ie.update(ie.transform))}),this.on("error",function(){ie._sourceErrored=!0}),this._source=function(fe,Oe,ut,Et){var Wt=new Qe[Oe.type](fe,Oe,ut,Et);if(Wt.id!==fe)throw new Error("Expected Source id to be "+fe+" instead of "+Wt.id);return w.bindAll(["load","abort","unload","serialize","prepare"],Wt),Wt}(C,I,V,this),this._tiles={},this._cache=new Je(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new w.SourceFeatureState}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.onAdd=function(C){this.map=C,this._maxTileCacheSize=C?C._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(C)},M.prototype.onRemove=function(C){this._source&&this._source.onRemove&&this._source.onRemove(C)},M.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var C in this._tiles){var I=this._tiles[C];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0},M.prototype.getSource=function(){return this._source},M.prototype.pause=function(){this._paused=!0},M.prototype.resume=function(){if(this._paused){var C=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,C&&this.reload(),this.transform&&this.update(this.transform)}},M.prototype._loadTile=function(C,I){return this._source.loadTile(C,I)},M.prototype._unloadTile=function(C){if(this._source.unloadTile)return this._source.unloadTile(C,function(){})},M.prototype._abortTile=function(C){if(this._source.abortTile)return this._source.abortTile(C,function(){})},M.prototype.serialize=function(){return this._source.serialize()},M.prototype.prepare=function(C){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var V=this._tiles[I];V.upload(C),V.prepare(this.map.style.imageManager)}},M.prototype.getIds=function(){return w.values(this._tiles).map(function(C){return C.tileID}).sort(It).map(function(C){return C.key})},M.prototype.getRenderableIds=function(C){var I=this,V=[];for(var ie in this._tiles)this._isIdRenderable(ie,C)&&V.push(this._tiles[ie]);return C?V.sort(function(fe,Oe){var ut=fe.tileID,Et=Oe.tileID,Wt=new w.Point(ut.canonical.x,ut.canonical.y)._rotate(I.transform.angle),Xt=new w.Point(Et.canonical.x,Et.canonical.y)._rotate(I.transform.angle);return ut.overscaledZ-Et.overscaledZ||Xt.y-Wt.y||Xt.x-Wt.x}).map(function(fe){return fe.tileID.key}):V.map(function(fe){return fe.tileID}).sort(It).map(function(fe){return fe.key})},M.prototype.hasRenderableParent=function(C){var I=this.findLoadedParent(C,0);return!!I&&this._isIdRenderable(I.tileID.key)},M.prototype._isIdRenderable=function(C,I){return this._tiles[C]&&this._tiles[C].hasData()&&!this._coveredTiles[C]&&(I||!this._tiles[C].holdingForFade())},M.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var C in this._cache.reset(),this._tiles)this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading")},M.prototype._reloadTile=function(C,I){var V=this._tiles[C];V&&(V.state!=="loading"&&(V.state=I),this._loadTile(V,this._tileLoaded.bind(this,V,C,I)))},M.prototype._tileLoaded=function(C,I,V,ie){if(ie)return C.state="errored",void(ie.status!==404?this._source.fire(new w.ErrorEvent(ie,{tile:C})):this.update(this.transform));C.timeAdded=w.browser.now(),V==="expired"&&(C.refreshedUponExpiration=!0),this._setTileReloadTimer(I,C),this.getSource().type==="raster-dem"&&C.dem&&this._backfillDEM(C),this._state.initializeTileState(C,this.map?this.map.painter:null),this._source.fire(new w.Event("data",{dataType:"source",tile:C,coord:C.tileID}))},M.prototype._backfillDEM=function(C){for(var I=this.getRenderableIds(),V=0;V<I.length;V++){var ie=I[V];if(C.neighboringTiles&&C.neighboringTiles[ie]){var fe=this.getTileByID(ie);Oe(C,fe),Oe(fe,C)}}function Oe(ut,Et){ut.needsHillshadePrepare=!0;var Wt=Et.tileID.canonical.x-ut.tileID.canonical.x,Xt=Et.tileID.canonical.y-ut.tileID.canonical.y,Kt=Math.pow(2,ut.tileID.canonical.z),_r=Et.tileID.key;Wt===0&&Xt===0||Math.abs(Xt)>1||(Math.abs(Wt)>1&&(Math.abs(Wt+Kt)===1?Wt+=Kt:Math.abs(Wt-Kt)===1&&(Wt-=Kt)),Et.dem&&ut.dem&&(ut.dem.backfillBorder(Et.dem,Wt,Xt),ut.neighboringTiles&&ut.neighboringTiles[_r]&&(ut.neighboringTiles[_r].backfilled=!0)))}},M.prototype.getTile=function(C){return this.getTileByID(C.key)},M.prototype.getTileByID=function(C){return this._tiles[C]},M.prototype._retainLoadedChildren=function(C,I,V,ie){for(var fe in this._tiles){var Oe=this._tiles[fe];if(!(ie[fe]||!Oe.hasData()||Oe.tileID.overscaledZ<=I||Oe.tileID.overscaledZ>V)){for(var ut=Oe.tileID;Oe&&Oe.tileID.overscaledZ>I+1;){var Et=Oe.tileID.scaledTo(Oe.tileID.overscaledZ-1);(Oe=this._tiles[Et.key])&&Oe.hasData()&&(ut=Et)}for(var Wt=ut;Wt.overscaledZ>I;)if(C[(Wt=Wt.scaledTo(Wt.overscaledZ-1)).key]){ie[ut.key]=ut;break}}}},M.prototype.findLoadedParent=function(C,I){if(C.key in this._loadedParentTiles){var V=this._loadedParentTiles[C.key];return V&&V.tileID.overscaledZ>=I?V:null}for(var ie=C.overscaledZ-1;ie>=I;ie--){var fe=C.scaledTo(ie),Oe=this._getLoadedTile(fe);if(Oe)return Oe}},M.prototype._getLoadedTile=function(C){var I=this._tiles[C.key];return I&&I.hasData()?I:this._cache.getByKey(C.wrapped().key)},M.prototype.updateCacheSize=function(C){var I=Math.ceil(C.width/this._source.tileSize)+1,V=Math.ceil(C.height/this._source.tileSize)+1,ie=Math.floor(I*V*5),fe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ie):ie;this._cache.setMaxSize(fe)},M.prototype.handleWrapJump=function(C){var I=Math.round((C-(this._prevLng===void 0?C:this._prevLng))/360);if(this._prevLng=C,I){var V={};for(var ie in this._tiles){var fe=this._tiles[ie];fe.tileID=fe.tileID.unwrapTo(fe.tileID.wrap+I),V[fe.tileID.key]=fe}for(var Oe in this._tiles=V,this._timers)clearTimeout(this._timers[Oe]),delete this._timers[Oe];for(var ut in this._tiles)this._setTileReloadTimer(ut,this._tiles[ut])}},M.prototype.update=function(C){var I=this;if(this.transform=C,this._sourceLoaded&&!this._paused){var V;this.updateCacheSize(C),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?V=C.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vn){return new w.OverscaledTileID(Vn.canonical.z,Vn.wrap,Vn.canonical.z,Vn.canonical.x,Vn.canonical.y)}):(V=C.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(V=V.filter(function(Vn){return I._source.hasTile(Vn)}))):V=[];var ie=C.coveringZoomLevel(this._source),fe=Math.max(ie-M.maxOverzooming,this._source.minzoom),Oe=Math.max(ie+M.maxUnderzooming,this._source.minzoom),ut=this._updateRetainedTiles(V,ie);if(gr(this._source.type)){for(var Et={},Wt={},Xt=0,Kt=Object.keys(ut);Xt<Kt.length;Xt+=1){var _r=Kt[Xt],dr=ut[_r],Pr=this._tiles[_r];if(Pr&&!(Pr.fadeEndTime&&Pr.fadeEndTime<=w.browser.now())){var cr=this.findLoadedParent(dr,fe);cr&&(this._addTile(cr.tileID),Et[cr.tileID.key]=cr.tileID),Wt[_r]=dr}}for(var Dr in this._retainLoadedChildren(Wt,ie,Oe,ut),Et)ut[Dr]||(this._coveredTiles[Dr]=!0,ut[Dr]=Et[Dr])}for(var Wr in ut)this._tiles[Wr].clearFadeHold();for(var rn=0,xn=w.keysDifference(this._tiles,ut);rn<xn.length;rn+=1){var dn=xn[rn],An=this._tiles[dn];An.hasSymbolBuckets&&!An.holdingForFade()?An.setHoldDuration(this.map._fadeDuration):An.hasSymbolBuckets&&!An.symbolFadeFinished()||this._removeTile(dn)}this._updateLoadedParentTileCache()}},M.prototype.releaseSymbolFadeTiles=function(){for(var C in this._tiles)this._tiles[C].holdingForFade()&&this._removeTile(C)},M.prototype._updateRetainedTiles=function(C,I){for(var V={},ie={},fe=Math.max(I-M.maxOverzooming,this._source.minzoom),Oe=Math.max(I+M.maxUnderzooming,this._source.minzoom),ut={},Et=0,Wt=C;Et<Wt.length;Et+=1){var Xt=Wt[Et],Kt=this._addTile(Xt);V[Xt.key]=Xt,Kt.hasData()||I<this._source.maxzoom&&(ut[Xt.key]=Xt)}this._retainLoadedChildren(ut,I,Oe,V);for(var _r=0,dr=C;_r<dr.length;_r+=1){var Pr=dr[_r],cr=this._tiles[Pr.key];if(!cr.hasData()){if(I+1>this._source.maxzoom){var Dr=Pr.children(this._source.maxzoom)[0],Wr=this.getTile(Dr);if(Wr&&Wr.hasData()){V[Dr.key]=Dr;continue}}else{var rn=Pr.children(this._source.maxzoom);if(V[rn[0].key]&&V[rn[1].key]&&V[rn[2].key]&&V[rn[3].key])continue}for(var xn=cr.wasRequested(),dn=Pr.overscaledZ-1;dn>=fe;--dn){var An=Pr.scaledTo(dn);if(ie[An.key]||(ie[An.key]=!0,!(cr=this.getTile(An))&&xn&&(cr=this._addTile(An)),cr&&(V[An.key]=An,xn=cr.wasRequested(),cr.hasData())))break}}}return V},M.prototype._updateLoadedParentTileCache=function(){for(var C in this._loadedParentTiles={},this._tiles){for(var I=[],V=void 0,ie=this._tiles[C].tileID;ie.overscaledZ>0;){if(ie.key in this._loadedParentTiles){V=this._loadedParentTiles[ie.key];break}I.push(ie.key);var fe=ie.scaledTo(ie.overscaledZ-1);if(V=this._getLoadedTile(fe))break;ie=fe}for(var Oe=0,ut=I;Oe<ut.length;Oe+=1)this._loadedParentTiles[ut[Oe]]=V}},M.prototype._addTile=function(C){var I=this._tiles[C.key];if(I)return I;(I=this._cache.getAndRemove(C))&&(this._setTileReloadTimer(C.key,I),I.tileID=C,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[C.key]&&(clearTimeout(this._cacheTimers[C.key]),delete this._cacheTimers[C.key],this._setTileReloadTimer(C.key,I)));var V=!!I;return V||(I=new w.Tile(C,this._source.tileSize*C.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,C.key,I.state))),I?(I.uses++,this._tiles[C.key]=I,V||this._source.fire(new w.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},M.prototype._setTileReloadTimer=function(C,I){var V=this;C in this._timers&&(clearTimeout(this._timers[C]),delete this._timers[C]);var ie=I.getExpiryTimeout();ie&&(this._timers[C]=setTimeout(function(){V._reloadTile(C,"expired"),delete V._timers[C]},ie))},M.prototype._removeTile=function(C){var I=this._tiles[C];I&&(I.uses--,delete this._tiles[C],this._timers[C]&&(clearTimeout(this._timers[C]),delete this._timers[C]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},M.prototype.clearTiles=function(){for(var C in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(C);this._cache.reset()},M.prototype.tilesIn=function(C,I,V){var ie=this,fe=[],Oe=this.transform;if(!Oe)return fe;for(var ut=V?Oe.getCameraQueryGeometry(C):C,Et=C.map(function(dn){return Oe.pointCoordinate(dn)}),Wt=ut.map(function(dn){return Oe.pointCoordinate(dn)}),Xt=this.getIds(),Kt=1/0,_r=1/0,dr=-1/0,Pr=-1/0,cr=0,Dr=Wt;cr<Dr.length;cr+=1){var Wr=Dr[cr];Kt=Math.min(Kt,Wr.x),_r=Math.min(_r,Wr.y),dr=Math.max(dr,Wr.x),Pr=Math.max(Pr,Wr.y)}for(var rn=function(dn){var An=ie._tiles[Xt[dn]];if(!An.holdingForFade()){var Vn=An.tileID,ui=Math.pow(2,Oe.zoom-An.tileID.overscaledZ),li=I*An.queryPadding*w.EXTENT/An.tileSize/ui,Ri=[Vn.getTilePoint(new w.MercatorCoordinate(Kt,_r)),Vn.getTilePoint(new w.MercatorCoordinate(dr,Pr))];if(Ri[0].x-li<w.EXTENT&&Ri[0].y-li<w.EXTENT&&Ri[1].x+li>=0&&Ri[1].y+li>=0){var ea=Et.map(function(ra){return Vn.getTilePoint(ra)}),ua=Wt.map(function(ra){return Vn.getTilePoint(ra)});fe.push({tile:An,tileID:Vn,queryGeometry:ea,cameraQueryGeometry:ua,scale:ui})}}},xn=0;xn<Xt.length;xn++)rn(xn);return fe},M.prototype.getVisibleCoordinates=function(C){for(var I=this,V=this.getRenderableIds(C).map(function(ut){return I._tiles[ut].tileID}),ie=0,fe=V;ie<fe.length;ie+=1){var Oe=fe[ie];Oe.posMatrix=this.transform.calculatePosMatrix(Oe.toUnwrapped())}return V},M.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(gr(this._source.type))for(var C in this._tiles){var I=this._tiles[C];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=w.browser.now())return!0}return!1},M.prototype.setFeatureState=function(C,I,V){this._state.updateState(C=C||"_geojsonTileLayer",I,V)},M.prototype.removeFeatureState=function(C,I,V){this._state.removeFeatureState(C=C||"_geojsonTileLayer",I,V)},M.prototype.getFeatureState=function(C,I){return this._state.getState(C=C||"_geojsonTileLayer",I)},M.prototype.setDependencies=function(C,I,V){var ie=this._tiles[C];ie&&ie.setDependencies(I,V)},M.prototype.reloadTilesForDependencies=function(C,I){for(var V in this._tiles)this._tiles[V].hasDependency(C,I)&&this._reloadTile(V,"reloading");this._cache.filter(function(ie){return!ie.hasDependency(C,I)})},M}(w.Evented);function It(E,M){var C=Math.abs(2*E.wrap)-+(E.wrap<0),I=Math.abs(2*M.wrap)-+(M.wrap<0);return E.overscaledZ-M.overscaledZ||I-C||M.canonical.y-E.canonical.y||M.canonical.x-E.canonical.x}function gr(E){return E==="raster"||E==="image"||E==="video"}function Br(){return new w.window.Worker(Ep.workerUrl)}ct.maxOverzooming=10,ct.maxUnderzooming=3;var Nt="mapboxgl_preloaded_worker_pool",wn=function(){this.active={}};wn.prototype.acquire=function(E){if(!this.workers)for(this.workers=[];this.workers.length<wn.workerCount;)this.workers.push(new Br);return this.active[E]=!0,this.workers.slice()},wn.prototype.release=function(E){delete this.active[E],this.numActive()===0&&(this.workers.forEach(function(M){M.terminate()}),this.workers=null)},wn.prototype.isPreloaded=function(){return!!this.active[Nt]},wn.prototype.numActive=function(){return Object.keys(this.active).length};var ei,ci=Math.floor(w.browser.hardwareConcurrency/2);function ln(){return ei||(ei=new wn),ei}function ti(E,M){var C={};for(var I in E)I!=="ref"&&(C[I]=E[I]);return w.refProperties.forEach(function(V){V in M&&(C[V]=M[V])}),C}function $n(E){E=E.slice();for(var M=Object.create(null),C=0;C<E.length;C++)M[E[C].id]=E[C];for(var I=0;I<E.length;I++)"ref"in E[I]&&(E[I]=ti(E[I],M[E[I].ref]));return E}wn.workerCount=Math.max(Math.min(ci,6),1);var ri={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function oa(E,M,C){C.push({command:ri.addSource,args:[E,M[E]]})}function yi(E,M,C){M.push({command:ri.removeSource,args:[E]}),C[E]=!0}function ya(E,M,C,I){yi(E,C,I),oa(E,M,C)}function Ya(E,M,C){var I;for(I in E[C])if(E[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(E[C][I],M[C][I]))return!1;for(I in M[C])if(M[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(E[C][I],M[C][I]))return!1;return!0}function ha(E,M,C,I,V,ie){var fe;for(fe in M=M||{},E=E||{})E.hasOwnProperty(fe)&&(w.deepEqual(E[fe],M[fe])||C.push({command:ie,args:[I,fe,M[fe],V]}));for(fe in M)M.hasOwnProperty(fe)&&!E.hasOwnProperty(fe)&&(w.deepEqual(E[fe],M[fe])||C.push({command:ie,args:[I,fe,M[fe],V]}))}function Fa(E){return E.id}function Sa(E,M){return E[M.id]=M,E}var xs=function(E,M){this.reset(E,M)};xs.prototype.reset=function(E,M){this.points=E||[],this._distances=[0];for(var C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(M||0,.5*this.length),this.paddedLength=this.length-2*this.padding},xs.prototype.lerp=function(E){if(this.points.length===1)return this.points[0];E=w.clamp(E,0,1);for(var M=1,C=this._distances[M],I=E*this.paddedLength+this.padding;C<I&&M<this._distances.length;)C=this._distances[++M];var V=M-1,ie=this._distances[V],fe=C-ie,Oe=fe>0?(I-ie)/fe:0;return this.points[V].mult(1-Oe).add(this.points[M].mult(Oe))};var co=function(E,M,C){var I=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(E/C),this.yCellCount=Math.ceil(M/C);for(var ie=0;ie<this.xCellCount*this.yCellCount;ie++)I.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=E,this.height=M,this.xScale=this.xCellCount/E,this.yScale=this.yCellCount/M,this.boxUid=0,this.circleUid=0};function Lo(E,M,C,I,V){var ie=w.create();return M?(w.scale(ie,ie,[1/V,1/V,1]),C||w.rotateZ(ie,ie,I.angle)):w.multiply(ie,I.labelPlaneMatrix,E),ie}function Za(E,M,C,I,V){if(M){var ie=w.clone(E);return w.scale(ie,ie,[V,V,1]),C||w.rotateZ(ie,ie,-I.angle),ie}return I.glCoordMatrix}function Kn(E,M){var C=[E.x,E.y,0,1];In(C,C,M);var I=C[3];return{point:new w.Point(C[0]/I,C[1]/I),signedDistanceFromCamera:I}}function Ci(E,M){return .5+E/M*.5}function Ga(E,M){var C=E[0]/E[3],I=E[1]/E[3];return C>=-M[0]&&C<=M[0]&&I>=-M[1]&&I<=M[1]}function Jo(E,M,C,I,V,ie,fe,Oe){var ut=I?E.textSizeData:E.iconSizeData,Et=w.evaluateSizeForZoom(ut,C.transform.zoom),Wt=[256/C.width*2+1,256/C.height*2+1],Xt=I?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Xt.clear();for(var Kt=E.lineVertexArray,_r=I?E.text.placedSymbolArray:E.icon.placedSymbolArray,dr=C.transform.width/C.transform.height,Pr=!1,cr=0;cr<_r.length;cr++){var Dr=_r.get(cr);if(Dr.hidden||Dr.writingMode===w.WritingMode.vertical&&!Pr)tn(Dr.numGlyphs,Xt);else{Pr=!1;var Wr=[Dr.anchorX,Dr.anchorY,0,1];if(w.transformMat4(Wr,Wr,M),Ga(Wr,Wt)){var rn=Ci(C.transform.cameraToCenterDistance,Wr[3]),xn=w.evaluateSizeForFeature(ut,Et,Dr),dn=fe?xn/rn:xn*rn,An=new w.Point(Dr.anchorX,Dr.anchorY),Vn=Kn(An,V).point,ui={},li=lr(Dr,dn,!1,Oe,M,V,ie,E.glyphOffsetArray,Kt,Xt,Vn,An,ui,dr);Pr=li.useVertical,(li.notEnoughRoom||Pr||li.needsFlipping&&lr(Dr,dn,!0,Oe,M,V,ie,E.glyphOffsetArray,Kt,Xt,Vn,An,ui,dr).notEnoughRoom)&&tn(Dr.numGlyphs,Xt)}else tn(Dr.numGlyphs,Xt)}}I?E.text.dynamicLayoutVertexBuffer.updateData(Xt):E.icon.dynamicLayoutVertexBuffer.updateData(Xt)}function fo(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt){var Xt=Oe.glyphStartIndex+Oe.numGlyphs,Kt=Oe.lineStartIndex,_r=Oe.lineStartIndex+Oe.lineLength,dr=M.getoffsetX(Oe.glyphStartIndex),Pr=M.getoffsetX(Xt-1),cr=er(E*dr,C,I,V,ie,fe,Oe.segment,Kt,_r,ut,Et,Wt);if(!cr)return null;var Dr=er(E*Pr,C,I,V,ie,fe,Oe.segment,Kt,_r,ut,Et,Wt);return Dr?{first:cr,last:Dr}:null}function To(E,M,C,I){return E===w.WritingMode.horizontal&&Math.abs(C.y-M.y)>Math.abs(C.x-M.x)*I?{useVertical:!0}:(E===w.WritingMode.vertical?M.y<C.y:M.x>C.x)?{needsFlipping:!0}:null}function lr(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt,Kt,_r){var dr,Pr=M/24,cr=E.lineOffsetX*Pr,Dr=E.lineOffsetY*Pr;if(E.numGlyphs>1){var Wr=E.glyphStartIndex+E.numGlyphs,rn=E.lineStartIndex,xn=E.lineStartIndex+E.lineLength,dn=fo(Pr,Oe,cr,Dr,C,Wt,Xt,E,ut,ie,Kt);if(!dn)return{notEnoughRoom:!0};var An=Kn(dn.first.point,fe).point,Vn=Kn(dn.last.point,fe).point;if(I&&!C){var ui=To(E.writingMode,An,Vn,_r);if(ui)return ui}dr=[dn.first];for(var li=E.glyphStartIndex+1;li<Wr-1;li++)dr.push(er(Pr*Oe.getoffsetX(li),cr,Dr,C,Wt,Xt,E.segment,rn,xn,ut,ie,Kt));dr.push(dn.last)}else{if(I&&!C){var Ri=Kn(Xt,V).point,ea=E.lineStartIndex+E.segment+1,ua=new w.Point(ut.getx(ea),ut.gety(ea)),ra=Kn(ua,V),uo=ra.signedDistanceFromCamera>0?ra.point:Dt(Xt,ua,Ri,1,V),Li=To(E.writingMode,Ri,uo,_r);if(Li)return Li}var Oa=er(Pr*Oe.getoffsetX(E.glyphStartIndex),cr,Dr,C,Wt,Xt,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,ut,ie,Kt);if(!Oa)return{notEnoughRoom:!0};dr=[Oa]}for(var Ha=0,va=dr;Ha<va.length;Ha+=1){var Ea=va[Ha];w.addDynamicAttributes(Et,Ea.point,Ea.angle)}return{}}function Dt(E,M,C,I,V){var ie=Kn(E.add(E.sub(M)._unit()),V).point,fe=C.sub(ie);return C.add(fe._mult(I/fe.mag()))}function er(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt){var Kt=I?E-M:E+M,_r=Kt>0?1:-1,dr=0;I&&(_r*=-1,dr=Math.PI),_r<0&&(dr+=Math.PI);for(var Pr=_r>0?Oe+fe:Oe+fe+1,cr=V,Dr=V,Wr=0,rn=0,xn=Math.abs(Kt),dn=[];Wr+rn<=xn;){if((Pr+=_r)<Oe||Pr>=ut)return null;if(Dr=cr,dn.push(cr),(cr=Xt[Pr])===void 0){var An=new w.Point(Et.getx(Pr),Et.gety(Pr)),Vn=Kn(An,Wt);if(Vn.signedDistanceFromCamera>0)cr=Xt[Pr]=Vn.point;else{var ui=Pr-_r;cr=Dt(Wr===0?ie:new w.Point(Et.getx(ui),Et.gety(ui)),An,Dr,xn-Wr+1,Wt)}}Wr+=rn,rn=Dr.dist(cr)}var li=(xn-Wr)/rn,Ri=cr.sub(Dr),ea=Ri.mult(li)._add(Dr);ea._add(Ri._unit()._perp()._mult(C*_r));var ua=dr+Math.atan2(cr.y-Dr.y,cr.x-Dr.x);return dn.push(ea),{point:ea,angle:ua,path:dn}}co.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},co.prototype.insert=function(E,M,C,I,V){this._forEachCell(M,C,I,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(E),this.bboxes.push(M),this.bboxes.push(C),this.bboxes.push(I),this.bboxes.push(V)},co.prototype.insertCircle=function(E,M,C,I){this._forEachCell(M-I,C-I,M+I,C+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(E),this.circles.push(M),this.circles.push(C),this.circles.push(I)},co.prototype._insertBoxCell=function(E,M,C,I,V,ie){this.boxCells[V].push(ie)},co.prototype._insertCircleCell=function(E,M,C,I,V,ie){this.circleCells[V].push(ie)},co.prototype._query=function(E,M,C,I,V,ie){if(C<0||E>this.width||I<0||M>this.height)return!V&&[];var fe=[];if(E<=0&&M<=0&&this.width<=C&&this.height<=I){if(V)return!0;for(var Oe=0;Oe<this.boxKeys.length;Oe++)fe.push({key:this.boxKeys[Oe],x1:this.bboxes[4*Oe],y1:this.bboxes[4*Oe+1],x2:this.bboxes[4*Oe+2],y2:this.bboxes[4*Oe+3]});for(var ut=0;ut<this.circleKeys.length;ut++){var Et=this.circles[3*ut],Wt=this.circles[3*ut+1],Xt=this.circles[3*ut+2];fe.push({key:this.circleKeys[ut],x1:Et-Xt,y1:Wt-Xt,x2:Et+Xt,y2:Wt+Xt})}return ie?fe.filter(ie):fe}return this._forEachCell(E,M,C,I,this._queryCell,fe,{hitTest:V,seenUids:{box:{},circle:{}}},ie),V?fe.length>0:fe},co.prototype._queryCircle=function(E,M,C,I,V){var ie=E-C,fe=E+C,Oe=M-C,ut=M+C;if(fe<0||ie>this.width||ut<0||Oe>this.height)return!I&&[];var Et=[];return this._forEachCell(ie,Oe,fe,ut,this._queryCellCircle,Et,{hitTest:I,circle:{x:E,y:M,radius:C},seenUids:{box:{},circle:{}}},V),I?Et.length>0:Et},co.prototype.query=function(E,M,C,I,V){return this._query(E,M,C,I,!1,V)},co.prototype.hitTest=function(E,M,C,I,V){return this._query(E,M,C,I,!0,V)},co.prototype.hitTestCircle=function(E,M,C,I){return this._queryCircle(E,M,C,!0,I)},co.prototype._queryCell=function(E,M,C,I,V,ie,fe,Oe){var ut=fe.seenUids,Et=this.boxCells[V];if(Et!==null)for(var Wt=this.bboxes,Xt=0,Kt=Et;Xt<Kt.length;Xt+=1){var _r=Kt[Xt];if(!ut.box[_r]){ut.box[_r]=!0;var dr=4*_r;if(E<=Wt[dr+2]&&M<=Wt[dr+3]&&C>=Wt[dr+0]&&I>=Wt[dr+1]&&(!Oe||Oe(this.boxKeys[_r]))){if(fe.hitTest)return ie.push(!0),!0;ie.push({key:this.boxKeys[_r],x1:Wt[dr],y1:Wt[dr+1],x2:Wt[dr+2],y2:Wt[dr+3]})}}}var Pr=this.circleCells[V];if(Pr!==null)for(var cr=this.circles,Dr=0,Wr=Pr;Dr<Wr.length;Dr+=1){var rn=Wr[Dr];if(!ut.circle[rn]){ut.circle[rn]=!0;var xn=3*rn;if(this._circleAndRectCollide(cr[xn],cr[xn+1],cr[xn+2],E,M,C,I)&&(!Oe||Oe(this.circleKeys[rn]))){if(fe.hitTest)return ie.push(!0),!0;var dn=cr[xn],An=cr[xn+1],Vn=cr[xn+2];ie.push({key:this.circleKeys[rn],x1:dn-Vn,y1:An-Vn,x2:dn+Vn,y2:An+Vn})}}}},co.prototype._queryCellCircle=function(E,M,C,I,V,ie,fe,Oe){var ut=fe.circle,Et=fe.seenUids,Wt=this.boxCells[V];if(Wt!==null)for(var Xt=this.bboxes,Kt=0,_r=Wt;Kt<_r.length;Kt+=1){var dr=_r[Kt];if(!Et.box[dr]){Et.box[dr]=!0;var Pr=4*dr;if(this._circleAndRectCollide(ut.x,ut.y,ut.radius,Xt[Pr+0],Xt[Pr+1],Xt[Pr+2],Xt[Pr+3])&&(!Oe||Oe(this.boxKeys[dr])))return ie.push(!0),!0}}var cr=this.circleCells[V];if(cr!==null)for(var Dr=this.circles,Wr=0,rn=cr;Wr<rn.length;Wr+=1){var xn=rn[Wr];if(!Et.circle[xn]){Et.circle[xn]=!0;var dn=3*xn;if(this._circlesCollide(Dr[dn],Dr[dn+1],Dr[dn+2],ut.x,ut.y,ut.radius)&&(!Oe||Oe(this.circleKeys[xn])))return ie.push(!0),!0}}},co.prototype._forEachCell=function(E,M,C,I,V,ie,fe,Oe){for(var ut=this._convertToXCellCoord(E),Et=this._convertToYCellCoord(M),Wt=this._convertToXCellCoord(C),Xt=this._convertToYCellCoord(I),Kt=ut;Kt<=Wt;Kt++)for(var _r=Et;_r<=Xt;_r++)if(V.call(this,E,M,C,I,this.xCellCount*_r+Kt,ie,fe,Oe))return},co.prototype._convertToXCellCoord=function(E){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(E*this.xScale)))},co.prototype._convertToYCellCoord=function(E){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(E*this.yScale)))},co.prototype._circlesCollide=function(E,M,C,I,V,ie){var fe=I-E,Oe=V-M,ut=C+ie;return ut*ut>fe*fe+Oe*Oe},co.prototype._circleAndRectCollide=function(E,M,C,I,V,ie,fe){var Oe=(ie-I)/2,ut=Math.abs(E-(I+Oe));if(ut>Oe+C)return!1;var Et=(fe-V)/2,Wt=Math.abs(M-(V+Et));if(Wt>Et+C)return!1;if(ut<=Oe||Wt<=Et)return!0;var Xt=ut-Oe,Kt=Wt-Et;return Xt*Xt+Kt*Kt<=C*C};var kr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tn(E,M){for(var C=0;C<E;C++){var I=M.length;M.resize(I+4),M.float32.set(kr,3*I)}}function In(E,M,C){var I=M[0],V=M[1];return E[0]=C[0]*I+C[4]*V+C[12],E[1]=C[1]*I+C[5]*V+C[13],E[3]=C[3]*I+C[7]*V+C[15],E}var zn=function(E,M,C){M===void 0&&(M=new co(E.width+200,E.height+200,25)),C===void 0&&(C=new co(E.width+200,E.height+200,25)),this.transform=E,this.grid=M,this.ignoredGrid=C,this.pitchfactor=Math.cos(E._pitch)*E.cameraToCenterDistance,this.screenRightBoundary=E.width+100,this.screenBottomBoundary=E.height+100,this.gridRightBoundary=E.width+200,this.gridBottomBoundary=E.height+200};function On(E,M,C){return M*(w.EXTENT/(E.tileSize*Math.pow(2,C-E.tileID.overscaledZ)))}zn.prototype.placeCollisionBox=function(E,M,C,I,V){var ie=this.projectAndGetPerspectiveRatio(I,E.anchorPointX,E.anchorPointY),fe=C*ie.perspectiveRatio,Oe=E.x1*fe+ie.point.x,ut=E.y1*fe+ie.point.y,Et=E.x2*fe+ie.point.x,Wt=E.y2*fe+ie.point.y;return!this.isInsideGrid(Oe,ut,Et,Wt)||!M&&this.grid.hitTest(Oe,ut,Et,Wt,V)?{box:[],offscreen:!1}:{box:[Oe,ut,Et,Wt],offscreen:this.isOffscreen(Oe,ut,Et,Wt)}},zn.prototype.placeCollisionCircles=function(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt,Kt){var _r=[],dr=new w.Point(M.anchorX,M.anchorY),Pr=Kn(dr,ie),cr=Ci(this.transform.cameraToCenterDistance,Pr.signedDistanceFromCamera),Dr=(Et?V/cr:V*cr)/w.ONE_EM,Wr=Kn(dr,fe).point,rn=fo(Dr,I,M.lineOffsetX*Dr,M.lineOffsetY*Dr,!1,Wr,dr,M,C,fe,{}),xn=!1,dn=!1,An=!0;if(rn){for(var Vn=.5*Xt*cr+Kt,ui=new w.Point(-100,-100),li=new w.Point(this.screenRightBoundary,this.screenBottomBoundary),Ri=new xs,ea=rn.first,ua=rn.last,ra=[],uo=ea.path.length-1;uo>=1;uo--)ra.push(ea.path[uo]);for(var Li=1;Li<ua.path.length;Li++)ra.push(ua.path[Li]);var Oa=2.5*Vn;if(Oe){var Ha=ra.map(function(Zl){return Kn(Zl,Oe)});ra=Ha.some(function(Zl){return Zl.signedDistanceFromCamera<=0})?[]:Ha.map(function(Zl){return Zl.point})}var va=[];if(ra.length>0){for(var Ea=ra[0].clone(),Pa=ra[0].clone(),la=1;la<ra.length;la++)Ea.x=Math.min(Ea.x,ra[la].x),Ea.y=Math.min(Ea.y,ra[la].y),Pa.x=Math.max(Pa.x,ra[la].x),Pa.y=Math.max(Pa.y,ra[la].y);va=Ea.x>=ui.x&&Pa.x<=li.x&&Ea.y>=ui.y&&Pa.y<=li.y?[ra]:Pa.x<ui.x||Ea.x>li.x||Pa.y<ui.y||Ea.y>li.y?[]:w.clipLine([ra],ui.x,ui.y,li.x,li.y)}for(var ga=0,Tu=va;ga<Tu.length;ga+=1){var Vs;Ri.reset(Tu[ga],.25*Vn),Vs=Ri.length<=.5*Vn?1:Math.ceil(Ri.paddedLength/Oa)+1;for(var $u=0;$u<Vs;$u++){var zu=$u/Math.max(Vs-1,1),es=Ri.lerp(zu),ws=es.x+100,Xu=es.y+100;_r.push(ws,Xu,Vn,0);var Js=ws-Vn,Jc=Xu-Vn,Sl=ws+Vn,oc=Xu+Vn;if(An=An&&this.isOffscreen(Js,Jc,Sl,oc),dn=dn||this.isInsideGrid(Js,Jc,Sl,oc),!E&&this.grid.hitTestCircle(ws,Xu,Vn,Wt)&&(xn=!0,!ut))return{circles:[],offscreen:!1,collisionDetected:xn}}}}return{circles:!ut&&xn||!dn?[]:_r,offscreen:An,collisionDetected:xn}},zn.prototype.queryRenderedSymbols=function(E){if(E.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var M=[],C=1/0,I=1/0,V=-1/0,ie=-1/0,fe=0,Oe=E;fe<Oe.length;fe+=1){var ut=Oe[fe],Et=new w.Point(ut.x+100,ut.y+100);C=Math.min(C,Et.x),I=Math.min(I,Et.y),V=Math.max(V,Et.x),ie=Math.max(ie,Et.y),M.push(Et)}for(var Wt={},Xt={},Kt=0,_r=this.grid.query(C,I,V,ie).concat(this.ignoredGrid.query(C,I,V,ie));Kt<_r.length;Kt+=1){var dr=_r[Kt],Pr=dr.key;if(Wt[Pr.bucketInstanceId]===void 0&&(Wt[Pr.bucketInstanceId]={}),!Wt[Pr.bucketInstanceId][Pr.featureIndex]){var cr=[new w.Point(dr.x1,dr.y1),new w.Point(dr.x2,dr.y1),new w.Point(dr.x2,dr.y2),new w.Point(dr.x1,dr.y2)];w.polygonIntersectsPolygon(M,cr)&&(Wt[Pr.bucketInstanceId][Pr.featureIndex]=!0,Xt[Pr.bucketInstanceId]===void 0&&(Xt[Pr.bucketInstanceId]=[]),Xt[Pr.bucketInstanceId].push(Pr.featureIndex))}}return Xt},zn.prototype.insertCollisionBox=function(E,M,C,I,V){(M?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:V},E[0],E[1],E[2],E[3])},zn.prototype.insertCollisionCircles=function(E,M,C,I,V){for(var ie=M?this.ignoredGrid:this.grid,fe={bucketInstanceId:C,featureIndex:I,collisionGroupID:V},Oe=0;Oe<E.length;Oe+=4)ie.insertCircle(fe,E[Oe],E[Oe+1],E[Oe+2])},zn.prototype.projectAndGetPerspectiveRatio=function(E,M,C){var I=[M,C,0,1];return In(I,I,E),{point:new w.Point((I[0]/I[3]+1)/2*this.transform.width+100,(-I[1]/I[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},zn.prototype.isOffscreen=function(E,M,C,I){return C<100||E>=this.screenRightBoundary||I<100||M>this.screenBottomBoundary},zn.prototype.isInsideGrid=function(E,M,C,I){return C>=0&&E<this.gridRightBoundary&&I>=0&&M<this.gridBottomBoundary},zn.prototype.getViewportMatrix=function(){var E=w.identity([]);return w.translate(E,E,[-100,-100,0]),E};var Vi=function(E,M,C,I){this.opacity=E?Math.max(0,Math.min(1,E.opacity+(E.placed?M:-M))):I&&C?1:0,this.placed=C};Vi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bi=function(E,M,C,I,V){this.text=new Vi(E?E.text:null,M,C,V),this.icon=new Vi(E?E.icon:null,M,I,V)};Bi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ja=function(E,M,C){this.text=E,this.icon=M,this.skipFade=C},Ao=function(){this.invProjMatrix=w.create(),this.viewportMatrix=w.create(),this.circles=[]},fs=function(E,M,C,I,V){this.bucketInstanceId=E,this.featureIndex=M,this.sourceLayerIndex=C,this.bucketIndex=I,this.tileID=V},ko=function(E){this.crossSourceCollisions=E,this.maxGroupID=0,this.collisionGroups={}};function oo(E,M,C,I,V){var ie=w.getAnchorAlignment(E),fe=-(ie.horizontalAlign-.5)*M,Oe=-(ie.verticalAlign-.5)*C,ut=w.evaluateVariableOffset(E,I);return new w.Point(fe+ut[0]*V,Oe+ut[1]*V)}function iu(E,M,C,I,V,ie){var fe=E.x1,Oe=E.x2,ut=E.y1,Et=E.y2,Wt=E.anchorPointX,Xt=E.anchorPointY,Kt=new w.Point(M,C);return I&&Kt._rotate(V?ie:-ie),{x1:fe+Kt.x,y1:ut+Kt.y,x2:Oe+Kt.x,y2:Et+Kt.y,anchorPointX:Wt,anchorPointY:Xt}}ko.prototype.get=function(E){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[E]){var M=++this.maxGroupID;this.collisionGroups[E]={ID:M,predicate:function(C){return C.collisionGroupID===M}}}return this.collisionGroups[E]};var Ko=function(E,M,C,I){this.transform=E.clone(),this.collisionIndex=new zn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=M,this.retainedQueryData={},this.collisionGroups=new ko(C),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function jt(E,M,C,I,V){E.emplaceBack(M?1:0,C?1:0,I||0,V||0),E.emplaceBack(M?1:0,C?1:0,I||0,V||0),E.emplaceBack(M?1:0,C?1:0,I||0,V||0),E.emplaceBack(M?1:0,C?1:0,I||0,V||0)}Ko.prototype.getBucketParts=function(E,M,C,I){var V=C.getBucket(M),ie=C.latestFeatureIndex;if(V&&ie&&M.id===V.layerIds[0]){var fe=C.collisionBoxArray,Oe=V.layers[0].layout,ut=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Et=C.tileSize/w.EXTENT,Wt=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Xt=Oe.get("text-pitch-alignment")==="map",Kt=Oe.get("text-rotation-alignment")==="map",_r=On(C,1,this.transform.zoom),dr=Lo(Wt,Xt,Kt,this.transform,_r),Pr=null;if(Xt){var cr=Za(Wt,Xt,Kt,this.transform,_r);Pr=w.multiply([],this.transform.labelPlaneMatrix,cr)}this.retainedQueryData[V.bucketInstanceId]=new fs(V.bucketInstanceId,ie,V.sourceLayerIndex,V.index,C.tileID);var Dr={bucket:V,layout:Oe,posMatrix:Wt,textLabelPlaneMatrix:dr,labelToScreenMatrix:Pr,scale:ut,textPixelRatio:Et,holdingForFade:C.holdingForFade(),collisionBoxArray:fe,partiallyEvaluatedTextSize:w.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(I)for(var Wr=0,rn=V.sortKeyRanges;Wr<rn.length;Wr+=1){var xn=rn[Wr];E.push({sortKey:xn.sortKey,symbolInstanceStart:xn.symbolInstanceStart,symbolInstanceEnd:xn.symbolInstanceEnd,parameters:Dr})}else E.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:Dr})}},Ko.prototype.attemptAnchorPlacement=function(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt,Kt,_r,dr){var Pr,cr=[Xt.textOffset0,Xt.textOffset1],Dr=oo(E,C,I,cr,V),Wr=this.collisionIndex.placeCollisionBox(iu(M,Dr.x,Dr.y,ie,fe,this.transform.angle),Wt,Oe,ut,Et.predicate);if(!dr||this.collisionIndex.placeCollisionBox(iu(dr,Dr.x,Dr.y,ie,fe,this.transform.angle),Wt,Oe,ut,Et.predicate).box.length!==0)return Wr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Xt.crossTileID]&&this.prevPlacement.placements[Xt.crossTileID]&&this.prevPlacement.placements[Xt.crossTileID].text&&(Pr=this.prevPlacement.variableOffsets[Xt.crossTileID].anchor),this.variableOffsets[Xt.crossTileID]={textOffset:cr,width:C,height:I,anchor:E,textBoxScale:V,prevAnchor:Pr},this.markUsedJustification(Kt,E,Xt,_r),Kt.allowVerticalPlacement&&(this.markUsedOrientation(Kt,_r,Xt),this.placedOrientations[Xt.crossTileID]=_r),{shift:Dr,placedGlyphBoxes:Wr}):void 0},Ko.prototype.placeLayerBucketPart=function(E,M,C){var I=this,V=E.parameters,ie=V.bucket,fe=V.layout,Oe=V.posMatrix,ut=V.textLabelPlaneMatrix,Et=V.labelToScreenMatrix,Wt=V.textPixelRatio,Xt=V.holdingForFade,Kt=V.collisionBoxArray,_r=V.partiallyEvaluatedTextSize,dr=V.collisionGroup,Pr=fe.get("text-optional"),cr=fe.get("icon-optional"),Dr=fe.get("text-allow-overlap"),Wr=fe.get("icon-allow-overlap"),rn=fe.get("text-rotation-alignment")==="map",xn=fe.get("text-pitch-alignment")==="map",dn=fe.get("icon-text-fit")!=="none",An=fe.get("symbol-z-order")==="viewport-y",Vn=Dr&&(Wr||!ie.hasIconData()||cr),ui=Wr&&(Dr||!ie.hasTextData()||Pr);!ie.collisionArrays&&Kt&&ie.deserializeCollisionBoxes(Kt);var li=function(Li,Oa){if(!M[Li.crossTileID])if(Xt)I.placements[Li.crossTileID]=new Ja(!1,!1,!1);else{var Ha,va=!1,Ea=!1,Pa=!0,la=null,ga={box:null,offscreen:null},Tu={box:null,offscreen:null},Vs=null,$u=null,zu=0,es=0,ws=0;Oa.textFeatureIndex?zu=Oa.textFeatureIndex:Li.useRuntimeCollisionCircles&&(zu=Li.featureIndex),Oa.verticalTextFeatureIndex&&(es=Oa.verticalTextFeatureIndex);var Xu=Oa.textBox;if(Xu){var Js=function(vo){var Ku=w.WritingMode.horizontal;if(ie.allowVerticalPlacement&&!vo&&I.prevPlacement){var Mu=I.prevPlacement.placedOrientations[Li.crossTileID];Mu&&(I.placedOrientations[Li.crossTileID]=Mu,I.markUsedOrientation(ie,Ku=Mu,Li))}return Ku},Jc=function(vo,Ku){if(ie.allowVerticalPlacement&&Li.numVerticalGlyphVertices>0&&Oa.verticalTextBox)for(var Mu=0,xc=ie.writingModes;Mu<xc.length&&(xc[Mu]===w.WritingMode.vertical?(ga=Ku(),Tu=ga):ga=vo(),!(ga&&ga.box&&ga.box.length));Mu+=1);else ga=vo()};if(fe.get("text-variable-anchor")){var Sl=fe.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[Li.crossTileID]){var oc=I.prevPlacement.variableOffsets[Li.crossTileID];Sl.indexOf(oc.anchor)>0&&(Sl=Sl.filter(function(vo){return vo!==oc.anchor})).unshift(oc.anchor)}var Zl=function(vo,Ku,Mu){for(var xc=vo.x2-vo.x1,nd=vo.y2-vo.y1,dh=Li.textBoxScale,id=dn&&!Wr?Ku:null,Hl={box:[],offscreen:!1},Pl=Dr?2*Sl.length:Sl.length,Wl=0;Wl<Pl;++Wl){var Zh=I.attemptAnchorPlacement(Sl[Wl%Sl.length],vo,xc,nd,dh,rn,xn,Wt,Oe,dr,Wl>=Sl.length,Li,ie,Mu,id);if(Zh&&(Hl=Zh.placedGlyphBoxes)&&Hl.box&&Hl.box.length){va=!0,la=Zh.shift;break}}return Hl};Jc(function(){return Zl(Xu,Oa.iconBox,w.WritingMode.horizontal)},function(){var vo=Oa.verticalTextBox;return ie.allowVerticalPlacement&&!(ga&&ga.box&&ga.box.length)&&Li.numVerticalGlyphVertices>0&&vo?Zl(vo,Oa.verticalIconBox,w.WritingMode.vertical):{box:null,offscreen:null}}),ga&&(va=ga.box,Pa=ga.offscreen);var yf=Js(ga&&ga.box);if(!va&&I.prevPlacement){var zf=I.prevPlacement.variableOffsets[Li.crossTileID];zf&&(I.variableOffsets[Li.crossTileID]=zf,I.markUsedJustification(ie,zf.anchor,Li,yf))}}else{var _c=function(vo,Ku){var Mu=I.collisionIndex.placeCollisionBox(vo,Dr,Wt,Oe,dr.predicate);return Mu&&Mu.box&&Mu.box.length&&(I.markUsedOrientation(ie,Ku,Li),I.placedOrientations[Li.crossTileID]=Ku),Mu};Jc(function(){return _c(Xu,w.WritingMode.horizontal)},function(){var vo=Oa.verticalTextBox;return ie.allowVerticalPlacement&&Li.numVerticalGlyphVertices>0&&vo?_c(vo,w.WritingMode.vertical):{box:null,offscreen:null}}),Js(ga&&ga.box&&ga.box.length)}}if(va=(Ha=ga)&&Ha.box&&Ha.box.length>0,Pa=Ha&&Ha.offscreen,Li.useRuntimeCollisionCircles){var Uf=ie.text.placedSymbolArray.get(Li.centerJustifiedTextSymbolIndex),ef=w.evaluateSizeForFeature(ie.textSizeData,_r,Uf),Vl=fe.get("text-padding");Vs=I.collisionIndex.placeCollisionCircles(Dr,Uf,ie.lineVertexArray,ie.glyphOffsetArray,ef,Oe,ut,Et,C,xn,dr.predicate,Li.collisionCircleDiameter,Vl),va=Dr||Vs.circles.length>0&&!Vs.collisionDetected,Pa=Pa&&Vs.offscreen}if(Oa.iconFeatureIndex&&(ws=Oa.iconFeatureIndex),Oa.iconBox){var _f=function(vo){var Ku=dn&&la?iu(vo,la.x,la.y,rn,xn,I.transform.angle):vo;return I.collisionIndex.placeCollisionBox(Ku,Wr,Wt,Oe,dr.predicate)};Ea=Tu&&Tu.box&&Tu.box.length&&Oa.verticalIconBox?($u=_f(Oa.verticalIconBox)).box.length>0:($u=_f(Oa.iconBox)).box.length>0,Pa=Pa&&$u.offscreen}var Au=Pr||Li.numHorizontalGlyphVertices===0&&Li.numVerticalGlyphVertices===0,Ps=cr||Li.numIconVertices===0;if(Au||Ps?Ps?Au||(Ea=Ea&&va):va=Ea&&va:Ea=va=Ea&&va,va&&Ha&&Ha.box&&I.collisionIndex.insertCollisionBox(Ha.box,fe.get("text-ignore-placement"),ie.bucketInstanceId,Tu&&Tu.box&&es?es:zu,dr.ID),Ea&&$u&&I.collisionIndex.insertCollisionBox($u.box,fe.get("icon-ignore-placement"),ie.bucketInstanceId,ws,dr.ID),Vs&&(va&&I.collisionIndex.insertCollisionCircles(Vs.circles,fe.get("text-ignore-placement"),ie.bucketInstanceId,zu,dr.ID),C)){var Yu=ie.bucketInstanceId,qu=I.collisionCircleArrays[Yu];qu===void 0&&(qu=I.collisionCircleArrays[Yu]=new Ao);for(var jl=0;jl<Vs.circles.length;jl+=4)qu.circles.push(Vs.circles[jl+0]),qu.circles.push(Vs.circles[jl+1]),qu.circles.push(Vs.circles[jl+2]),qu.circles.push(Vs.collisionDetected?1:0)}I.placements[Li.crossTileID]=new Ja(va||Vn,Ea||ui,Pa||ie.justReloaded),M[Li.crossTileID]=!0}};if(An)for(var Ri=ie.getSortedSymbolIndexes(this.transform.angle),ea=Ri.length-1;ea>=0;--ea){var ua=Ri[ea];li(ie.symbolInstances.get(ua),ie.collisionArrays[ua])}else for(var ra=E.symbolInstanceStart;ra<E.symbolInstanceEnd;ra++)li(ie.symbolInstances.get(ra),ie.collisionArrays[ra]);if(C&&ie.bucketInstanceId in this.collisionCircleArrays){var uo=this.collisionCircleArrays[ie.bucketInstanceId];w.invert(uo.invProjMatrix,Oe),uo.viewportMatrix=this.collisionIndex.getViewportMatrix()}ie.justReloaded=!1},Ko.prototype.markUsedJustification=function(E,M,C,I){var V;V=I===w.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[w.getAnchorJustification(M)];for(var ie=0,fe=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];ie<fe.length;ie+=1){var Oe=fe[ie];Oe>=0&&(E.text.placedSymbolArray.get(Oe).crossTileID=V>=0&&Oe!==V?0:C.crossTileID)}},Ko.prototype.markUsedOrientation=function(E,M,C){for(var I=M===w.WritingMode.horizontal||M===w.WritingMode.horizontalOnly?M:0,V=M===w.WritingMode.vertical?M:0,ie=0,fe=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];ie<fe.length;ie+=1)E.text.placedSymbolArray.get(fe[ie]).placedOrientation=I;C.verticalPlacedTextSymbolIndex&&(E.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=V)},Ko.prototype.commit=function(E){this.commitTime=E,this.zoomAtLastRecencyCheck=this.transform.zoom;var M=this.prevPlacement,C=!1;this.prevZoomAdjustment=M?M.zoomAdjustment(this.transform.zoom):0;var I=M?M.symbolFadeChange(E):1,V=M?M.opacities:{},ie=M?M.variableOffsets:{},fe=M?M.placedOrientations:{};for(var Oe in this.placements){var ut=this.placements[Oe],Et=V[Oe];Et?(this.opacities[Oe]=new Bi(Et,I,ut.text,ut.icon),C=C||ut.text!==Et.text.placed||ut.icon!==Et.icon.placed):(this.opacities[Oe]=new Bi(null,I,ut.text,ut.icon,ut.skipFade),C=C||ut.text||ut.icon)}for(var Wt in V){var Xt=V[Wt];if(!this.opacities[Wt]){var Kt=new Bi(Xt,I,!1,!1);Kt.isHidden()||(this.opacities[Wt]=Kt,C=C||Xt.text.placed||Xt.icon.placed)}}for(var _r in ie)this.variableOffsets[_r]||!this.opacities[_r]||this.opacities[_r].isHidden()||(this.variableOffsets[_r]=ie[_r]);for(var dr in fe)this.placedOrientations[dr]||!this.opacities[dr]||this.opacities[dr].isHidden()||(this.placedOrientations[dr]=fe[dr]);C?this.lastPlacementChangeTime=E:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=M?M.lastPlacementChangeTime:E)},Ko.prototype.updateLayerOpacities=function(E,M){for(var C={},I=0,V=M;I<V.length;I+=1){var ie=V[I],fe=ie.getBucket(E);fe&&ie.latestFeatureIndex&&E.id===fe.layerIds[0]&&this.updateBucketOpacities(fe,C,ie.collisionBoxArray)}},Ko.prototype.updateBucketOpacities=function(E,M,C){var I=this;E.hasTextData()&&E.text.opacityVertexArray.clear(),E.hasIconData()&&E.icon.opacityVertexArray.clear(),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexArray.clear(),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexArray.clear();var V=E.layers[0].layout,ie=new Bi(null,0,!1,!1,!0),fe=V.get("text-allow-overlap"),Oe=V.get("icon-allow-overlap"),ut=V.get("text-variable-anchor"),Et=V.get("text-rotation-alignment")==="map",Wt=V.get("text-pitch-alignment")==="map",Xt=V.get("icon-text-fit")!=="none",Kt=new Bi(null,0,fe&&(Oe||!E.hasIconData()||V.get("icon-optional")),Oe&&(fe||!E.hasTextData()||V.get("text-optional")),!0);!E.collisionArrays&&C&&(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData())&&E.deserializeCollisionBoxes(C);for(var _r=function(Dr,Wr,rn){for(var xn=0;xn<Wr/4;xn++)Dr.opacityVertexArray.emplaceBack(rn)},dr=function(Dr){var Wr=E.symbolInstances.get(Dr),rn=Wr.numHorizontalGlyphVertices,xn=Wr.numVerticalGlyphVertices,dn=Wr.crossTileID,An=I.opacities[dn];M[dn]?An=ie:An||(I.opacities[dn]=An=Kt),M[dn]=!0;var Vn=Wr.numIconVertices>0,ui=I.placedOrientations[Wr.crossTileID],li=ui===w.WritingMode.vertical,Ri=ui===w.WritingMode.horizontal||ui===w.WritingMode.horizontalOnly;if(rn>0||xn>0){var ea=Mo(An.text);_r(E.text,rn,li?Fo:ea),_r(E.text,xn,Ri?Fo:ea);var ua=An.text.isHidden();[Wr.rightJustifiedTextSymbolIndex,Wr.centerJustifiedTextSymbolIndex,Wr.leftJustifiedTextSymbolIndex].forEach(function(ga){ga>=0&&(E.text.placedSymbolArray.get(ga).hidden=ua||li?1:0)}),Wr.verticalPlacedTextSymbolIndex>=0&&(E.text.placedSymbolArray.get(Wr.verticalPlacedTextSymbolIndex).hidden=ua||Ri?1:0);var ra=I.variableOffsets[Wr.crossTileID];ra&&I.markUsedJustification(E,ra.anchor,Wr,ui);var uo=I.placedOrientations[Wr.crossTileID];uo&&(I.markUsedJustification(E,"left",Wr,uo),I.markUsedOrientation(E,uo,Wr))}if(Vn){var Li=Mo(An.icon),Oa=!(Xt&&Wr.verticalPlacedIconSymbolIndex&&li);Wr.placedIconSymbolIndex>=0&&(_r(E.icon,Wr.numIconVertices,Oa?Li:Fo),E.icon.placedSymbolArray.get(Wr.placedIconSymbolIndex).hidden=An.icon.isHidden()),Wr.verticalPlacedIconSymbolIndex>=0&&(_r(E.icon,Wr.numVerticalIconVertices,Oa?Fo:Li),E.icon.placedSymbolArray.get(Wr.verticalPlacedIconSymbolIndex).hidden=An.icon.isHidden())}if(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData()){var Ha=E.collisionArrays[Dr];if(Ha){var va=new w.Point(0,0);if(Ha.textBox||Ha.verticalTextBox){var Ea=!0;if(ut){var Pa=I.variableOffsets[dn];Pa?(va=oo(Pa.anchor,Pa.width,Pa.height,Pa.textOffset,Pa.textBoxScale),Et&&va._rotate(Wt?I.transform.angle:-I.transform.angle)):Ea=!1}Ha.textBox&&jt(E.textCollisionBox.collisionVertexArray,An.text.placed,!Ea||li,va.x,va.y),Ha.verticalTextBox&&jt(E.textCollisionBox.collisionVertexArray,An.text.placed,!Ea||Ri,va.x,va.y)}var la=!!(!Ri&&Ha.verticalIconBox);Ha.iconBox&&jt(E.iconCollisionBox.collisionVertexArray,An.icon.placed,la,Xt?va.x:0,Xt?va.y:0),Ha.verticalIconBox&&jt(E.iconCollisionBox.collisionVertexArray,An.icon.placed,!la,Xt?va.x:0,Xt?va.y:0)}}},Pr=0;Pr<E.symbolInstances.length;Pr++)dr(Pr);if(E.sortFeatures(this.transform.angle),this.retainedQueryData[E.bucketInstanceId]&&(this.retainedQueryData[E.bucketInstanceId].featureSortOrder=E.featureSortOrder),E.hasTextData()&&E.text.opacityVertexBuffer&&E.text.opacityVertexBuffer.updateData(E.text.opacityVertexArray),E.hasIconData()&&E.icon.opacityVertexBuffer&&E.icon.opacityVertexBuffer.updateData(E.icon.opacityVertexArray),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexBuffer&&E.iconCollisionBox.collisionVertexBuffer.updateData(E.iconCollisionBox.collisionVertexArray),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexBuffer&&E.textCollisionBox.collisionVertexBuffer.updateData(E.textCollisionBox.collisionVertexArray),E.bucketInstanceId in this.collisionCircleArrays){var cr=this.collisionCircleArrays[E.bucketInstanceId];E.placementInvProjMatrix=cr.invProjMatrix,E.placementViewportMatrix=cr.viewportMatrix,E.collisionCircleArray=cr.circles,delete this.collisionCircleArrays[E.bucketInstanceId]}},Ko.prototype.symbolFadeChange=function(E){return this.fadeDuration===0?1:(E-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ko.prototype.zoomAdjustment=function(E){return Math.max(0,(this.transform.zoom-E)/1.5)},Ko.prototype.hasTransitions=function(E){return this.stale||E-this.lastPlacementChangeTime<this.fadeDuration},Ko.prototype.stillRecent=function(E,M){var C=this.zoomAtLastRecencyCheck===M?1-this.zoomAdjustment(M):1;return this.zoomAtLastRecencyCheck=M,this.commitTime+this.fadeDuration*C>E},Ko.prototype.setStale=function(){this.stale=!0};var sr=Math.pow(2,25),Vr=Math.pow(2,24),Cn=Math.pow(2,17),Yn=Math.pow(2,16),Wi=Math.pow(2,9),ho=Math.pow(2,8),Gs=Math.pow(2,1);function Mo(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;var M=E.placed?1:0,C=Math.floor(127*E.opacity);return C*sr+M*Vr+C*Cn+M*Yn+C*Wi+M*ho+C*Gs+M}var Fo=0,Wu=function(E){this._sortAcrossTiles=E.layout.get("symbol-z-order")!=="viewport-y"&&E.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Wu.prototype.continuePlacement=function(E,M,C,I,V){for(var ie=this._bucketParts;this._currentTileIndex<E.length;)if(M.getBucketParts(ie,I,E[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,V())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ie.sort(function(fe,Oe){return fe.sortKey-Oe.sortKey}));this._currentPartIndex<ie.length;)if(M.placeLayerBucketPart(ie[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,V())return!0;return!1};var ff=function(E,M,C,I,V,ie,fe){this.placement=new Ko(E,V,ie,fe),this._currentPlacementIndex=M.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1};ff.prototype.isDone=function(){return this._done},ff.prototype.continuePlacement=function(E,M,C){for(var I=this,V=w.browser.now(),ie=function(){var ut=w.browser.now()-V;return!I._forceFullPlacement&&ut>2};this._currentPlacementIndex>=0;){var fe=M[E[this._currentPlacementIndex]],Oe=this.placement.collisionIndex.transform.zoom;if(fe.type==="symbol"&&(!fe.minzoom||fe.minzoom<=Oe)&&(!fe.maxzoom||fe.maxzoom>Oe)){if(this._inProgressLayer||(this._inProgressLayer=new Wu(fe)),this._inProgressLayer.continuePlacement(C[fe.source],this.placement,this._showCollisionBoxes,fe,ie))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ff.prototype.commit=function(E){return this.placement.commit(E),this.placement};var Jf=512/w.EXTENT/2,eh=function(E,M,C){this.tileID=E,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(var I=0;I<M.length;I++){var V=M.get(I),ie=V.key;this.indexedSymbolInstances[ie]||(this.indexedSymbolInstances[ie]=[]),this.indexedSymbolInstances[ie].push({crossTileID:V.crossTileID,coord:this.getScaledCoordinates(V,E)})}};eh.prototype.getScaledCoordinates=function(E,M){var C=Jf/Math.pow(2,M.canonical.z-this.tileID.canonical.z);return{x:Math.floor((M.canonical.x*w.EXTENT+E.anchorX)*C),y:Math.floor((M.canonical.y*w.EXTENT+E.anchorY)*C)}},eh.prototype.findMatches=function(E,M,C){for(var I=this.tileID.canonical.z<M.canonical.z?1:Math.pow(2,this.tileID.canonical.z-M.canonical.z),V=0;V<E.length;V++){var ie=E.get(V);if(!ie.crossTileID){var fe=this.indexedSymbolInstances[ie.key];if(fe)for(var Oe=this.getScaledCoordinates(ie,M),ut=0,Et=fe;ut<Et.length;ut+=1){var Wt=Et[ut];if(Math.abs(Wt.coord.x-Oe.x)<=I&&Math.abs(Wt.coord.y-Oe.y)<=I&&!C[Wt.crossTileID]){C[Wt.crossTileID]=!0,ie.crossTileID=Wt.crossTileID;break}}}}};var du=function(){this.maxCrossTileID=0};du.prototype.generate=function(){return++this.maxCrossTileID};var lc=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};lc.prototype.handleWrapJump=function(E){var M=Math.round((E-this.lng)/360);if(M!==0)for(var C in this.indexes){var I=this.indexes[C],V={};for(var ie in I){var fe=I[ie];fe.tileID=fe.tileID.unwrapTo(fe.tileID.wrap+M),V[fe.tileID.key]=fe}this.indexes[C]=V}this.lng=E},lc.prototype.addBucket=function(E,M,C){if(this.indexes[E.overscaledZ]&&this.indexes[E.overscaledZ][E.key]){if(this.indexes[E.overscaledZ][E.key].bucketInstanceId===M.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(E.overscaledZ,this.indexes[E.overscaledZ][E.key])}for(var I=0;I<M.symbolInstances.length;I++)M.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[E.overscaledZ]||(this.usedCrossTileIDs[E.overscaledZ]={});var V=this.usedCrossTileIDs[E.overscaledZ];for(var ie in this.indexes){var fe=this.indexes[ie];if(Number(ie)>E.overscaledZ)for(var Oe in fe){var ut=fe[Oe];ut.tileID.isChildOf(E)&&ut.findMatches(M.symbolInstances,E,V)}else{var Et=fe[E.scaledTo(Number(ie)).key];Et&&Et.findMatches(M.symbolInstances,E,V)}}for(var Wt=0;Wt<M.symbolInstances.length;Wt++){var Xt=M.symbolInstances.get(Wt);Xt.crossTileID||(Xt.crossTileID=C.generate(),V[Xt.crossTileID]=!0)}return this.indexes[E.overscaledZ]===void 0&&(this.indexes[E.overscaledZ]={}),this.indexes[E.overscaledZ][E.key]=new eh(E,M.symbolInstances,M.bucketInstanceId),!0},lc.prototype.removeBucketCrossTileIDs=function(E,M){for(var C in M.indexedSymbolInstances)for(var I=0,V=M.indexedSymbolInstances[C];I<V.length;I+=1)delete this.usedCrossTileIDs[E][V[I].crossTileID]},lc.prototype.removeStaleBuckets=function(E){var M=!1;for(var C in this.indexes){var I=this.indexes[C];for(var V in I)E[I[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,I[V]),delete I[V],M=!0)}return M};var au=function(){this.layerIndexes={},this.crossTileIDs=new du,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};au.prototype.addLayer=function(E,M,C){var I=this.layerIndexes[E.id];I===void 0&&(I=this.layerIndexes[E.id]=new lc);var V=!1,ie={};I.handleWrapJump(C);for(var fe=0,Oe=M;fe<Oe.length;fe+=1){var ut=Oe[fe],Et=ut.getBucket(E);Et&&E.id===Et.layerIds[0]&&(Et.bucketInstanceId||(Et.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(ut.tileID,Et,this.crossTileIDs)&&(V=!0),ie[Et.bucketInstanceId]=!0)}return I.removeStaleBuckets(ie)&&(V=!0),V},au.prototype.pruneUnusedLayers=function(E){var M={};for(var C in E.forEach(function(I){M[I]=!0}),this.layerIndexes)M[C]||delete this.layerIndexes[C]};var Rl=function(E,M){return w.emitValidationErrors(E,M&&M.filter(function(C){return C.identifier!=="source.canvas"}))},cc=w.pick(ri,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),bo=w.pick(ri,["setCenter","setZoom","setBearing","setPitch"]),ec=function(){var E={},M=w.styleSpec.$version;for(var C in w.styleSpec.$root){var I,V=w.styleSpec.$root[C];V.required&&(I=C==="version"?M:V.type==="array"?[]:{})!=null&&(E[C]=I)}return E}(),Ms=function(E){function M(C,I){var V=this;I===void 0&&(I={}),E.call(this),this.map=C,this.dispatcher=new Ge(ln(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new We(C._requestManager,I.localIdeographFontFamily),this.lineAtlas=new ze(256,512),this.crossTileSymbolIndex=new au,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new w.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",w.getReferrer());var ie=this;this._rtlTextPluginCallback=M.registerForPluginStateChange(function(fe){ie.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:fe.pluginStatus,pluginURL:fe.pluginURL},function(Oe,ut){if(w.triggerPluginCompletionEvent(Oe),ut&&ut.every(function(Wt){return Wt}))for(var Et in ie.sourceCaches)ie.sourceCaches[Et].reload()})}),this.on("data",function(fe){if(fe.dataType==="source"&&fe.sourceDataType==="metadata"){var Oe=V.sourceCaches[fe.sourceId];if(Oe){var ut=Oe.getSource();if(ut&&ut.vectorLayerIds)for(var Et in V._layers){var Wt=V._layers[Et];Wt.source===ut.id&&V._validateLayer(Wt)}}}})}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.loadURL=function(C,I){var V=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"}));var ie=typeof I.validate=="boolean"?I.validate:!w.isMapboxURL(C);C=this.map._requestManager.normalizeStyleURL(C,I.accessToken);var fe=this.map._requestManager.transformRequest(C,w.ResourceType.Style);this._request=w.getJSON(fe,function(Oe,ut){V._request=null,Oe?V.fire(new w.ErrorEvent(Oe)):ut&&V._load(ut,ie)})},M.prototype.loadJSON=function(C,I){var V=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"})),this._request=w.browser.frame(function(){V._request=null,V._load(C,I.validate!==!1)})},M.prototype.loadEmpty=function(){this.fire(new w.Event("dataloading",{dataType:"style"})),this._load(ec,!1)},M.prototype._load=function(C,I){if(!I||!Rl(this,w.validateStyle(C))){for(var V in this._loaded=!0,this.stylesheet=C,C.sources)this.addSource(V,C.sources[V],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs);var ie=$n(this.stylesheet.layers);this._order=ie.map(function(Et){return Et.id}),this._layers={},this._serializedLayers={};for(var fe=0,Oe=ie;fe<Oe.length;fe+=1){var ut=Oe[fe];(ut=w.createStyleLayer(ut)).setEventedParent(this,{layer:{id:ut.id}}),this._layers[ut.id]=ut,this._serializedLayers[ut.id]=ut.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Re(this.stylesheet.light),this.fire(new w.Event("data",{dataType:"style"})),this.fire(new w.Event("style.load"))}},M.prototype._loadSprite=function(C){var I=this;this._spriteRequest=function(V,ie,fe){var Oe,ut,Et,Wt=w.browser.devicePixelRatio>1?"@2x":"",Xt=w.getJSON(ie.transformRequest(ie.normalizeSpriteURL(V,Wt,".json"),w.ResourceType.SpriteJSON),function(dr,Pr){Xt=null,Et||(Et=dr,Oe=Pr,_r())}),Kt=w.getImage(ie.transformRequest(ie.normalizeSpriteURL(V,Wt,".png"),w.ResourceType.SpriteImage),function(dr,Pr){Kt=null,Et||(Et=dr,ut=Pr,_r())});function _r(){if(Et)fe(Et);else if(Oe&&ut){var dr=w.browser.getImageData(ut),Pr={};for(var cr in Oe){var Dr=Oe[cr],Wr=Dr.width,rn=Dr.height,xn=Dr.x,dn=Dr.y,An=Dr.sdf,Vn=Dr.pixelRatio,ui=Dr.stretchX,li=Dr.stretchY,Ri=Dr.content,ea=new w.RGBAImage({width:Wr,height:rn});w.RGBAImage.copy(dr,ea,{x:xn,y:dn},{x:0,y:0},{width:Wr,height:rn}),Pr[cr]={data:ea,pixelRatio:Vn,sdf:An,stretchX:ui,stretchY:li,content:Ri}}fe(null,Pr)}}return{cancel:function(){Xt&&(Xt.cancel(),Xt=null),Kt&&(Kt.cancel(),Kt=null)}}}(C,this.map._requestManager,function(V,ie){if(I._spriteRequest=null,V)I.fire(new w.ErrorEvent(V));else if(ie)for(var fe in ie)I.imageManager.addImage(fe,ie[fe]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new w.Event("data",{dataType:"style"}))})},M.prototype._validateLayer=function(C){var I=this.sourceCaches[C.source];if(I){var V=C.sourceLayer;if(V){var ie=I.getSource();(ie.type==="geojson"||ie.vectorLayerIds&&ie.vectorLayerIds.indexOf(V)===-1)&&this.fire(new w.ErrorEvent(new Error('Source layer "'+V+'" does not exist on source "'+ie.id+'" as specified by style layer "'+C.id+'"')))}}},M.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var C in this.sourceCaches)if(!this.sourceCaches[C].loaded())return!1;return!!this.imageManager.isLoaded()},M.prototype._serializeLayers=function(C){for(var I=[],V=0,ie=C;V<ie.length;V+=1){var fe=this._layers[ie[V]];fe.type!=="custom"&&I.push(fe.serialize())}return I},M.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},M.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},M.prototype.update=function(C){if(this._loaded){var I=this._changed;if(this._changed){var V=Object.keys(this._updatedLayers),ie=Object.keys(this._removedLayers);for(var fe in(V.length||ie.length)&&this._updateWorkerLayers(V,ie),this._updatedSources){var Oe=this._updatedSources[fe];Oe==="reload"?this._reloadSource(fe):Oe==="clear"&&this._clearSource(fe)}for(var ut in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ut].updateTransitions(C);this.light.updateTransitions(C),this._resetUpdates()}var Et={};for(var Wt in this.sourceCaches){var Xt=this.sourceCaches[Wt];Et[Wt]=Xt.used,Xt.used=!1}for(var Kt=0,_r=this._order;Kt<_r.length;Kt+=1){var dr=this._layers[_r[Kt]];dr.recalculate(C,this._availableImages),!dr.isHidden(C.zoom)&&dr.source&&(this.sourceCaches[dr.source].used=!0)}for(var Pr in Et){var cr=this.sourceCaches[Pr];Et[Pr]!==cr.used&&cr.fire(new w.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Pr}))}this.light.recalculate(C),this.z=C.zoom,I&&this.fire(new w.Event("data",{dataType:"style"}))}},M.prototype._updateTilesForChangedImages=function(){var C=Object.keys(this._changedImages);if(C.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],C);this._changedImages={}}},M.prototype._updateWorkerLayers=function(C,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(C),removedIds:I})},M.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},M.prototype.setState=function(C){var I=this;if(this._checkLoaded(),Rl(this,w.validateStyle(C)))return!1;(C=w.clone$1(C)).layers=$n(C.layers);var V=function(fe,Oe){if(!fe)return[{command:ri.setStyle,args:[Oe]}];var ut=[];try{if(!w.deepEqual(fe.version,Oe.version))return[{command:ri.setStyle,args:[Oe]}];w.deepEqual(fe.center,Oe.center)||ut.push({command:ri.setCenter,args:[Oe.center]}),w.deepEqual(fe.zoom,Oe.zoom)||ut.push({command:ri.setZoom,args:[Oe.zoom]}),w.deepEqual(fe.bearing,Oe.bearing)||ut.push({command:ri.setBearing,args:[Oe.bearing]}),w.deepEqual(fe.pitch,Oe.pitch)||ut.push({command:ri.setPitch,args:[Oe.pitch]}),w.deepEqual(fe.sprite,Oe.sprite)||ut.push({command:ri.setSprite,args:[Oe.sprite]}),w.deepEqual(fe.glyphs,Oe.glyphs)||ut.push({command:ri.setGlyphs,args:[Oe.glyphs]}),w.deepEqual(fe.transition,Oe.transition)||ut.push({command:ri.setTransition,args:[Oe.transition]}),w.deepEqual(fe.light,Oe.light)||ut.push({command:ri.setLight,args:[Oe.light]});var Et={},Wt=[];(function(Kt,_r,dr,Pr){var cr;for(cr in _r=_r||{},Kt=Kt||{})Kt.hasOwnProperty(cr)&&(_r.hasOwnProperty(cr)||yi(cr,dr,Pr));for(cr in _r)_r.hasOwnProperty(cr)&&(Kt.hasOwnProperty(cr)?w.deepEqual(Kt[cr],_r[cr])||(Kt[cr].type==="geojson"&&_r[cr].type==="geojson"&&Ya(Kt,_r,cr)?dr.push({command:ri.setGeoJSONSourceData,args:[cr,_r[cr].data]}):ya(cr,_r,dr,Pr)):oa(cr,_r,dr))})(fe.sources,Oe.sources,Wt,Et);var Xt=[];fe.layers&&fe.layers.forEach(function(Kt){Et[Kt.source]?ut.push({command:ri.removeLayer,args:[Kt.id]}):Xt.push(Kt)}),ut=ut.concat(Wt),function(Kt,_r,dr){_r=_r||[];var Pr,cr,Dr,Wr,rn,xn,dn,An=(Kt=Kt||[]).map(Fa),Vn=_r.map(Fa),ui=Kt.reduce(Sa,{}),li=_r.reduce(Sa,{}),Ri=An.slice(),ea=Object.create(null);for(Pr=0,cr=0;Pr<An.length;Pr++)li.hasOwnProperty(Dr=An[Pr])?cr++:(dr.push({command:ri.removeLayer,args:[Dr]}),Ri.splice(Ri.indexOf(Dr,cr),1));for(Pr=0,cr=0;Pr<Vn.length;Pr++)Ri[Ri.length-1-Pr]!==(Dr=Vn[Vn.length-1-Pr])&&(ui.hasOwnProperty(Dr)?(dr.push({command:ri.removeLayer,args:[Dr]}),Ri.splice(Ri.lastIndexOf(Dr,Ri.length-cr),1)):cr++,dr.push({command:ri.addLayer,args:[li[Dr],xn=Ri[Ri.length-Pr]]}),Ri.splice(Ri.length-Pr,0,Dr),ea[Dr]=!0);for(Pr=0;Pr<Vn.length;Pr++)if(Wr=ui[Dr=Vn[Pr]],rn=li[Dr],!ea[Dr]&&!w.deepEqual(Wr,rn))if(w.deepEqual(Wr.source,rn.source)&&w.deepEqual(Wr["source-layer"],rn["source-layer"])&&w.deepEqual(Wr.type,rn.type)){for(dn in ha(Wr.layout,rn.layout,dr,Dr,null,ri.setLayoutProperty),ha(Wr.paint,rn.paint,dr,Dr,null,ri.setPaintProperty),w.deepEqual(Wr.filter,rn.filter)||dr.push({command:ri.setFilter,args:[Dr,rn.filter]}),w.deepEqual(Wr.minzoom,rn.minzoom)&&w.deepEqual(Wr.maxzoom,rn.maxzoom)||dr.push({command:ri.setLayerZoomRange,args:[Dr,rn.minzoom,rn.maxzoom]}),Wr)Wr.hasOwnProperty(dn)&&dn!=="layout"&&dn!=="paint"&&dn!=="filter"&&dn!=="metadata"&&dn!=="minzoom"&&dn!=="maxzoom"&&(dn.indexOf("paint.")===0?ha(Wr[dn],rn[dn],dr,Dr,dn.slice(6),ri.setPaintProperty):w.deepEqual(Wr[dn],rn[dn])||dr.push({command:ri.setLayerProperty,args:[Dr,dn,rn[dn]]}));for(dn in rn)rn.hasOwnProperty(dn)&&!Wr.hasOwnProperty(dn)&&dn!=="layout"&&dn!=="paint"&&dn!=="filter"&&dn!=="metadata"&&dn!=="minzoom"&&dn!=="maxzoom"&&(dn.indexOf("paint.")===0?ha(Wr[dn],rn[dn],dr,Dr,dn.slice(6),ri.setPaintProperty):w.deepEqual(Wr[dn],rn[dn])||dr.push({command:ri.setLayerProperty,args:[Dr,dn,rn[dn]]}))}else dr.push({command:ri.removeLayer,args:[Dr]}),xn=Ri[Ri.lastIndexOf(Dr)+1],dr.push({command:ri.addLayer,args:[rn,xn]})}(Xt,Oe.layers,ut)}catch(Kt){console.warn("Unable to compute style diff:",Kt),ut=[{command:ri.setStyle,args:[Oe]}]}return ut}(this.serialize(),C).filter(function(fe){return!(fe.command in bo)});if(V.length===0)return!1;var ie=V.filter(function(fe){return!(fe.command in cc)});if(ie.length>0)throw new Error("Unimplemented: "+ie.map(function(fe){return fe.command}).join(", ")+".");return V.forEach(function(fe){fe.command!=="setTransition"&&I[fe.command].apply(I,fe.args)}),this.stylesheet=C,!0},M.prototype.addImage=function(C,I){if(this.getImage(C))return this.fire(new w.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(C,I),this._afterImageUpdated(C)},M.prototype.updateImage=function(C,I){this.imageManager.updateImage(C,I)},M.prototype.getImage=function(C){return this.imageManager.getImage(C)},M.prototype.removeImage=function(C){if(!this.getImage(C))return this.fire(new w.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(C),this._afterImageUpdated(C)},M.prototype._afterImageUpdated=function(C){this._availableImages=this.imageManager.listImages(),this._changedImages[C]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new w.Event("data",{dataType:"style"}))},M.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},M.prototype.addSource=function(C,I,V){var ie=this;if(V===void 0&&(V={}),this._checkLoaded(),this.sourceCaches[C]!==void 0)throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(w.validateStyle.source,"sources."+C,I,null,V))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var fe=this.sourceCaches[C]=new ct(C,I,this.dispatcher);fe.style=this,fe.setEventedParent(this,function(){return{isSourceLoaded:ie.loaded(),source:fe.serialize(),sourceId:C}}),fe.onAdd(this.map),this._changed=!0}},M.prototype.removeSource=function(C){if(this._checkLoaded(),this.sourceCaches[C]===void 0)throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===C)return this.fire(new w.ErrorEvent(new Error('Source "'+C+'" cannot be removed while layer "'+I+'" is using it.')));var V=this.sourceCaches[C];delete this.sourceCaches[C],delete this._updatedSources[C],V.fire(new w.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C})),V.setEventedParent(null),V.clearTiles(),V.onRemove&&V.onRemove(this.map),this._changed=!0},M.prototype.setGeoJSONSourceData=function(C,I){this._checkLoaded(),this.sourceCaches[C].getSource().setData(I),this._changed=!0},M.prototype.getSource=function(C){return this.sourceCaches[C]&&this.sourceCaches[C].getSource()},M.prototype.addLayer=function(C,I,V){V===void 0&&(V={}),this._checkLoaded();var ie=C.id;if(this.getLayer(ie))this.fire(new w.ErrorEvent(new Error('Layer with id "'+ie+'" already exists on this map')));else{var fe;if(C.type==="custom"){if(Rl(this,w.validateCustomStyleLayer(C)))return;fe=w.createStyleLayer(C)}else{if(typeof C.source=="object"&&(this.addSource(ie,C.source),C=w.clone$1(C),C=w.extend(C,{source:ie})),this._validate(w.validateStyle.layer,"layers."+ie,C,{arrayIndex:-1},V))return;fe=w.createStyleLayer(C),this._validateLayer(fe),fe.setEventedParent(this,{layer:{id:ie}}),this._serializedLayers[fe.id]=fe.serialize()}var Oe=I?this._order.indexOf(I):this._order.length;if(I&&Oe===-1)this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(Oe,0,ie),this._layerOrderChanged=!0,this._layers[ie]=fe,this._removedLayers[ie]&&fe.source&&fe.type!=="custom"){var ut=this._removedLayers[ie];delete this._removedLayers[ie],ut.type!==fe.type?this._updatedSources[fe.source]="clear":(this._updatedSources[fe.source]="reload",this.sourceCaches[fe.source].pause())}this._updateLayer(fe),fe.onAdd&&fe.onAdd(this.map)}}},M.prototype.moveLayer=function(C,I){if(this._checkLoaded(),this._changed=!0,this._layers[C]){if(C!==I){var V=this._order.indexOf(C);this._order.splice(V,1);var ie=I?this._order.indexOf(I):this._order.length;I&&ie===-1?this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(ie,0,C),this._layerOrderChanged=!0)}}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be moved.")))},M.prototype.removeLayer=function(C){this._checkLoaded();var I=this._layers[C];if(I){I.setEventedParent(null);var V=this._order.indexOf(C);this._order.splice(V,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[C]=I,delete this._layers[C],delete this._serializedLayers[C],delete this._updatedLayers[C],delete this._updatedPaintProps[C],I.onRemove&&I.onRemove(this.map)}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be removed.")))},M.prototype.getLayer=function(C){return this._layers[C]},M.prototype.hasLayer=function(C){return C in this._layers},M.prototype.setLayerZoomRange=function(C,I,V){this._checkLoaded();var ie=this.getLayer(C);ie?ie.minzoom===I&&ie.maxzoom===V||(I!=null&&(ie.minzoom=I),V!=null&&(ie.maxzoom=V),this._updateLayer(ie)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot have zoom extent.")))},M.prototype.setFilter=function(C,I,V){V===void 0&&(V={}),this._checkLoaded();var ie=this.getLayer(C);if(ie){if(!w.deepEqual(ie.filter,I))return I==null?(ie.filter=void 0,void this._updateLayer(ie)):void(this._validate(w.validateStyle.filter,"layers."+ie.id+".filter",I,null,V)||(ie.filter=w.clone$1(I),this._updateLayer(ie)))}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be filtered.")))},M.prototype.getFilter=function(C){return w.clone$1(this.getLayer(C).filter)},M.prototype.setLayoutProperty=function(C,I,V,ie){ie===void 0&&(ie={}),this._checkLoaded();var fe=this.getLayer(C);fe?w.deepEqual(fe.getLayoutProperty(I),V)||(fe.setLayoutProperty(I,V,ie),this._updateLayer(fe)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},M.prototype.getLayoutProperty=function(C,I){var V=this.getLayer(C);if(V)return V.getLayoutProperty(I);this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style.")))},M.prototype.setPaintProperty=function(C,I,V,ie){ie===void 0&&(ie={}),this._checkLoaded();var fe=this.getLayer(C);fe?w.deepEqual(fe.getPaintProperty(I),V)||(fe.setPaintProperty(I,V,ie)&&this._updateLayer(fe),this._changed=!0,this._updatedPaintProps[C]=!0):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},M.prototype.getPaintProperty=function(C,I){return this.getLayer(C).getPaintProperty(I)},M.prototype.setFeatureState=function(C,I){this._checkLoaded();var V=C.source,ie=C.sourceLayer,fe=this.sourceCaches[V];if(fe!==void 0){var Oe=fe.getSource().type;Oe==="geojson"&&ie?this.fire(new w.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Oe!=="vector"||ie?(C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),fe.setFeatureState(ie,C.id,I)):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},M.prototype.removeFeatureState=function(C,I){this._checkLoaded();var V=C.source,ie=this.sourceCaches[V];if(ie!==void 0){var fe=ie.getSource().type,Oe=fe==="vector"?C.sourceLayer:void 0;fe!=="vector"||Oe?I&&typeof C.id!="string"&&typeof C.id!="number"?this.fire(new w.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):ie.removeFeatureState(Oe,C.id,I):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},M.prototype.getFeatureState=function(C){this._checkLoaded();var I=C.source,V=C.sourceLayer,ie=this.sourceCaches[I];if(ie!==void 0){if(ie.getSource().type!=="vector"||V)return C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),ie.getFeatureState(V,C.id);this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},M.prototype.getTransition=function(){return w.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},M.prototype.serialize=function(){return w.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:w.mapObject(this.sourceCaches,function(C){return C.serialize()}),layers:this._serializeLayers(this._order)},function(C){return C!==void 0})},M.prototype._updateLayer=function(C){this._updatedLayers[C.id]=!0,C.source&&!this._updatedSources[C.source]&&this.sourceCaches[C.source].getSource().type!=="raster"&&(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause()),this._changed=!0},M.prototype._flattenAndSortRenderedFeatures=function(C){for(var I=this,V=function(ui){return I._layers[ui].type==="fill-extrusion"},ie={},fe=[],Oe=this._order.length-1;Oe>=0;Oe--){var ut=this._order[Oe];if(V(ut)){ie[ut]=Oe;for(var Et=0,Wt=C;Et<Wt.length;Et+=1){var Xt=Wt[Et][ut];if(Xt)for(var Kt=0,_r=Xt;Kt<_r.length;Kt+=1)fe.push(_r[Kt])}}}fe.sort(function(ui,li){return li.intersectionZ-ui.intersectionZ});for(var dr=[],Pr=this._order.length-1;Pr>=0;Pr--){var cr=this._order[Pr];if(V(cr))for(var Dr=fe.length-1;Dr>=0;Dr--){var Wr=fe[Dr].feature;if(ie[Wr.layer.id]<Pr)break;dr.push(Wr),fe.pop()}else for(var rn=0,xn=C;rn<xn.length;rn+=1){var dn=xn[rn][cr];if(dn)for(var An=0,Vn=dn;An<Vn.length;An+=1)dr.push(Vn[An].feature)}}return dr},M.prototype.queryRenderedFeatures=function(C,I,V){I&&I.filter&&this._validate(w.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var ie={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new w.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var fe=0,Oe=I.layers;fe<Oe.length;fe+=1){var ut=Oe[fe],Et=this._layers[ut];if(!Et)return this.fire(new w.ErrorEvent(new Error("The layer '"+ut+"' does not exist in the map's style and cannot be queried for features."))),[];ie[Et.source]=!0}}var Wt=[];for(var Xt in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!ie[Xt]||Wt.push(xe(this.sourceCaches[Xt],this._layers,this._serializedLayers,C,I,V));return this.placement&&Wt.push(function(Kt,_r,dr,Pr,cr,Dr,Wr){for(var rn={},xn=Dr.queryRenderedSymbols(Pr),dn=[],An=0,Vn=Object.keys(xn).map(Number);An<Vn.length;An+=1)dn.push(Wr[Vn[An]]);dn.sort(rt);for(var ui=function(){var ra=Ri[li],uo=ra.featureIndex.lookupSymbolFeatures(xn[ra.bucketInstanceId],_r,ra.bucketIndex,ra.sourceLayerIndex,cr.filter,cr.layers,cr.availableImages,Kt);for(var Li in uo){var Oa=rn[Li]=rn[Li]||[],Ha=uo[Li];Ha.sort(function(Pa,la){var ga=ra.featureSortOrder;if(ga){var Tu=ga.indexOf(Pa.featureIndex);return ga.indexOf(la.featureIndex)-Tu}return la.featureIndex-Pa.featureIndex});for(var va=0,Ea=Ha;va<Ea.length;va+=1)Oa.push(Ea[va])}},li=0,Ri=dn;li<Ri.length;li+=1)ui();var ea=function(ra){rn[ra].forEach(function(uo){var Li=uo.feature,Oa=dr[Kt[ra].source].getFeatureState(Li.layer["source-layer"],Li.id);Li.source=Li.layer.source,Li.layer["source-layer"]&&(Li.sourceLayer=Li.layer["source-layer"]),Li.state=Oa})};for(var ua in rn)ea(ua);return rn}(this._layers,this._serializedLayers,this.sourceCaches,C,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Wt)},M.prototype.querySourceFeatures=function(C,I){I&&I.filter&&this._validate(w.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var V=this.sourceCaches[C];return V?function(ie,fe){for(var Oe=ie.getRenderableIds().map(function(_r){return ie.getTileByID(_r)}),ut=[],Et={},Wt=0;Wt<Oe.length;Wt++){var Xt=Oe[Wt],Kt=Xt.tileID.canonical.key;Et[Kt]||(Et[Kt]=!0,Xt.querySourceFeatures(ut,fe))}return ut}(V,I):[]},M.prototype.addSourceType=function(C,I,V){return M.getSourceType(C)?V(new Error('A source type called "'+C+'" already exists.')):(M.setSourceType(C,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:C,url:I.workerSourceURL},V):V(null,null))},M.prototype.getLight=function(){return this.light.getLight()},M.prototype.setLight=function(C,I){I===void 0&&(I={}),this._checkLoaded();var V=this.light.getLight(),ie=!1;for(var fe in C)if(!w.deepEqual(C[fe],V[fe])){ie=!0;break}if(ie){var Oe={now:w.browser.now(),transition:w.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(C,I),this.light.updateTransitions(Oe)}},M.prototype._validate=function(C,I,V,ie,fe){return fe===void 0&&(fe={}),(!fe||fe.validate!==!1)&&Rl(this,C.call(w.validateStyle,w.extend({key:I,style:this.serialize(),value:V,styleSpec:w.styleSpec},ie)))},M.prototype._remove=function(){for(var C in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),w.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[C].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},M.prototype._clearSource=function(C){this.sourceCaches[C].clearTiles()},M.prototype._reloadSource=function(C){this.sourceCaches[C].resume(),this.sourceCaches[C].reload()},M.prototype._updateSources=function(C){for(var I in this.sourceCaches)this.sourceCaches[I].update(C)},M.prototype._generateCollisionBoxes=function(){for(var C in this.sourceCaches)this._reloadSource(C)},M.prototype._updatePlacement=function(C,I,V,ie,fe){fe===void 0&&(fe=!1);for(var Oe=!1,ut=!1,Et={},Wt=0,Xt=this._order;Wt<Xt.length;Wt+=1){var Kt=this._layers[Xt[Wt]];if(Kt.type==="symbol"){if(!Et[Kt.source]){var _r=this.sourceCaches[Kt.source];Et[Kt.source]=_r.getRenderableIds(!0).map(function(Wr){return _r.getTileByID(Wr)}).sort(function(Wr,rn){return rn.tileID.overscaledZ-Wr.tileID.overscaledZ||(Wr.tileID.isLessThan(rn.tileID)?-1:1)})}var dr=this.crossTileSymbolIndex.addLayer(Kt,Et[Kt.source],C.center.lng);Oe=Oe||dr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((fe=fe||this._layerOrderChanged||V===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.browser.now(),C.zoom))&&(this.pauseablePlacement=new ff(C,this._order,fe,I,V,ie,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Et),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.browser.now()),ut=!0),Oe&&this.pauseablePlacement.placement.setStale()),ut||Oe)for(var Pr=0,cr=this._order;Pr<cr.length;Pr+=1){var Dr=this._layers[cr[Pr]];Dr.type==="symbol"&&this.placement.updateLayerOpacities(Dr,Et[Dr.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.browser.now())},M.prototype._releaseSymbolFadeTiles=function(){for(var C in this.sourceCaches)this.sourceCaches[C].releaseSymbolFadeTiles()},M.prototype.getImages=function(C,I,V){this.imageManager.getImages(I.icons,V),this._updateTilesForChangedImages();var ie=this.sourceCaches[I.source];ie&&ie.setDependencies(I.tileID.key,I.type,I.icons)},M.prototype.getGlyphs=function(C,I,V){this.glyphManager.getGlyphs(I.stacks,V)},M.prototype.getResource=function(C,I,V){return w.makeRequest(I,V)},M}(w.Evented);Ms.getSourceType=function(E){return Qe[E]},Ms.setSourceType=function(E,M){Qe[E]=M},Ms.registerForPluginStateChange=w.registerForPluginStateChange;var Rs=w.createLayout([{name:"a_pos",type:"Int16",components:2}]),Rc=jo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ic=jo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),If=jo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ll=jo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Fl=jo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tc=jo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Lu=jo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Oc=jo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Rn=jo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ji=jo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Sv=jo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),th=jo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fc=jo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),$p=jo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Qs=jo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Pc=jo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Bl=jo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ou=jo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),vu=jo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Il=jo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),hc=jo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Nl=jo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),kc=jo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Yc=jo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),rh=jo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Xp=jo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function jo(E,M){var C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=M.match(/attribute ([\w]+) ([\w]+)/g),V=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ie=M.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),fe=ie?ie.concat(V):V,Oe={};return{fragmentSource:E=E.replace(C,function(ut,Et,Wt,Xt,Kt){return Oe[Kt]=!0,Et==="define"?`
#ifndef HAS_UNIFORM_u_`+Kt+`
varying `+Wt+" "+Xt+" "+Kt+`;
#else
uniform `+Wt+" "+Xt+" u_"+Kt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Kt+`
    `+Wt+" "+Xt+" "+Kt+" = u_"+Kt+`;
#endif
`}),vertexSource:M=M.replace(C,function(ut,Et,Wt,Xt,Kt){var _r=Xt==="float"?"vec2":"vec4",dr=Kt.match(/color/)?"color":_r;return Oe[Kt]?Et==="define"?`
#ifndef HAS_UNIFORM_u_`+Kt+`
uniform lowp float u_`+Kt+`_t;
attribute `+Wt+" "+_r+" a_"+Kt+`;
varying `+Wt+" "+Xt+" "+Kt+`;
#else
uniform `+Wt+" "+Xt+" u_"+Kt+`;
#endif
`:dr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Kt+`
    `+Kt+" = a_"+Kt+`;
#else
    `+Wt+" "+Xt+" "+Kt+" = u_"+Kt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Kt+`
    `+Kt+" = unpack_mix_"+dr+"(a_"+Kt+", u_"+Kt+`_t);
#else
    `+Wt+" "+Xt+" "+Kt+" = u_"+Kt+`;
#endif
`:Et==="define"?`
#ifndef HAS_UNIFORM_u_`+Kt+`
uniform lowp float u_`+Kt+`_t;
attribute `+Wt+" "+_r+" a_"+Kt+`;
#else
uniform `+Wt+" "+Xt+" u_"+Kt+`;
#endif
`:dr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Kt+`
    `+Wt+" "+Xt+" "+Kt+" = a_"+Kt+`;
#else
    `+Wt+" "+Xt+" "+Kt+" = u_"+Kt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Kt+`
    `+Wt+" "+Xt+" "+Kt+" = unpack_mix_"+dr+"(a_"+Kt+", u_"+Kt+`_t);
#else
    `+Wt+" "+Xt+" "+Kt+" = u_"+Kt+`;
#endif
`}),staticAttributes:I,staticUniforms:fe}}var Ld=Object.freeze({__proto__:null,prelude:Rc,background:Ic,backgroundPattern:If,circle:Ll,clippingMask:Fl,heatmap:tc,heatmapTexture:Lu,collisionBox:Oc,collisionCircle:Rn,debug:ji,fill:Sv,fillOutline:th,fillOutlinePattern:fc,fillPattern:$p,fillExtrusion:Qs,fillExtrusionPattern:Pc,hillshadePrepare:Bl,hillshade:ou,line:vu,lineGradient:Il,linePattern:hc,lineSDF:Nl,raster:kc,symbolIcon:Yc,symbolSDF:rh,symbolTextAndIcon:Xp}),Ih=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function hf(E){for(var M=[],C=0;C<E.length;C++)if(E[C]!==null){var I=E[C].split(" ");M.push(I.pop())}return M}Ih.prototype.bind=function(E,M,C,I,V,ie,fe,Oe){this.context=E;for(var ut=this.boundPaintVertexBuffers.length!==I.length,Et=0;!ut&&Et<I.length;Et++)this.boundPaintVertexBuffers[Et]!==I[Et]&&(ut=!0);E.extVertexArrayObject&&this.vao&&this.boundProgram===M&&this.boundLayoutVertexBuffer===C&&!ut&&this.boundIndexBuffer===V&&this.boundVertexOffset===ie&&this.boundDynamicVertexBuffer===fe&&this.boundDynamicVertexBuffer2===Oe?(E.bindVertexArrayOES.set(this.vao),fe&&fe.bind(),V&&V.dynamicDraw&&V.bind(),Oe&&Oe.bind()):this.freshBind(M,C,I,V,ie,fe,Oe)},Ih.prototype.freshBind=function(E,M,C,I,V,ie,fe){var Oe,ut=E.numAttributes,Et=this.context,Wt=Et.gl;if(Et.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Et.extVertexArrayObject.createVertexArrayOES(),Et.bindVertexArrayOES.set(this.vao),Oe=0,this.boundProgram=E,this.boundLayoutVertexBuffer=M,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=I,this.boundVertexOffset=V,this.boundDynamicVertexBuffer=ie,this.boundDynamicVertexBuffer2=fe;else{Oe=Et.currentNumAttributes||0;for(var Xt=ut;Xt<Oe;Xt++)Wt.disableVertexAttribArray(Xt)}M.enableAttributes(Wt,E);for(var Kt=0,_r=C;Kt<_r.length;Kt+=1)_r[Kt].enableAttributes(Wt,E);ie&&ie.enableAttributes(Wt,E),fe&&fe.enableAttributes(Wt,E),M.bind(),M.setVertexAttribPointers(Wt,E,V);for(var dr=0,Pr=C;dr<Pr.length;dr+=1){var cr=Pr[dr];cr.bind(),cr.setVertexAttribPointers(Wt,E,V)}ie&&(ie.bind(),ie.setVertexAttribPointers(Wt,E,V)),I&&I.bind(),fe&&(fe.bind(),fe.setVertexAttribPointers(Wt,E,V)),Et.currentNumAttributes=ut},Ih.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ss=function(E,M,C,I,V,ie){var fe=E.gl;this.program=fe.createProgram();for(var Oe=hf(C.staticAttributes),ut=I?I.getBinderAttributes():[],Et=Oe.concat(ut),Wt=C.staticUniforms?hf(C.staticUniforms):[],Xt=I?I.getBinderUniforms():[],Kt=[],_r=0,dr=Wt.concat(Xt);_r<dr.length;_r+=1){var Pr=dr[_r];Kt.indexOf(Pr)<0&&Kt.push(Pr)}var cr=I?I.defines():[];ie&&cr.push("#define OVERDRAW_INSPECTOR;");var Dr=cr.concat(Rc.fragmentSource,C.fragmentSource).join(`
`),Wr=cr.concat(Rc.vertexSource,C.vertexSource).join(`
`),rn=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(rn,Dr),fe.compileShader(rn),fe.attachShader(this.program,rn);var xn=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(xn,Wr),fe.compileShader(xn),fe.attachShader(this.program,xn),this.attributes={};var dn={};this.numAttributes=Et.length;for(var An=0;An<this.numAttributes;An++)Et[An]&&(fe.bindAttribLocation(this.program,An,Et[An]),this.attributes[Et[An]]=An);fe.linkProgram(this.program),fe.deleteShader(xn),fe.deleteShader(rn);for(var Vn=0;Vn<Kt.length;Vn++){var ui=Kt[Vn];if(ui&&!dn[ui]){var li=fe.getUniformLocation(this.program,ui);li&&(dn[ui]=li)}}this.fixedUniforms=V(E,dn),this.binderUniforms=I?I.getUniforms(E,dn):[]}}};function cp(E,M,C){var I=1/On(C,1,M.transform.tileZoom),V=Math.pow(2,C.tileID.overscaledZ),ie=C.tileSize*Math.pow(2,M.transform.tileZoom)/V,fe=ie*(C.tileID.canonical.x+C.tileID.wrap*V),Oe=ie*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[I,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[fe>>16,Oe>>16],u_pixel_coord_lower:[65535&fe,65535&Oe]}}ss.prototype.draw=function(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt,Kt,_r,dr,Pr){var cr,Dr=E.gl;if(!this.failedToCreate){for(var Wr in E.program.set(this.program),E.setDepthMode(C),E.setStencilMode(I),E.setColorMode(V),E.setCullFace(ie),this.fixedUniforms)this.fixedUniforms[Wr].set(fe[Wr]);_r&&_r.setUniforms(E,this.binderUniforms,Xt,{zoom:Kt});for(var rn=(cr={},cr[Dr.LINES]=2,cr[Dr.TRIANGLES]=3,cr[Dr.LINE_STRIP]=1,cr)[M],xn=0,dn=Wt.get();xn<dn.length;xn+=1){var An=dn[xn],Vn=An.vaos||(An.vaos={});(Vn[Oe]||(Vn[Oe]=new Ih)).bind(E,this,ut,_r?_r.getPaintVertexBuffers():[],Et,An.vertexOffset,dr,Pr),Dr.drawElements(M,An.primitiveLength*rn,Dr.UNSIGNED_SHORT,An.primitiveOffset*rn*2)}}};var fp=function(E,M,C,I){var V=M.style.light,ie=V.properties.get("position"),fe=[ie.x,ie.y,ie.z],Oe=w.create$1();V.properties.get("anchor")==="viewport"&&w.fromRotation(Oe,-M.transform.angle),w.transformMat3(fe,fe,Oe);var ut=V.properties.get("color");return{u_matrix:E,u_lightpos:fe,u_lightintensity:V.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_vertical_gradient:+C,u_opacity:I}},Fu=function(E,M,C,I,V,ie,fe){return w.extend(fp(E,M,C,I),cp(ie,M,fe),{u_height_factor:-Math.pow(2,V.overscaledZ)/fe.tileSize/8})},Ot=function(E){return{u_matrix:E}},br=function(E,M,C,I){return w.extend(Ot(E),cp(C,M,I))},Hr=function(E,M){return{u_matrix:E,u_world:M}},Jr=function(E,M,C,I,V){return w.extend(br(E,M,C,I),{u_world:V})},Pn=function(E,M,C,I){var V,ie,fe=E.transform;if(I.paint.get("circle-pitch-alignment")==="map"){var Oe=On(C,1,fe.zoom);V=!0,ie=[Oe,Oe]}else V=!1,ie=fe.pixelsToGLUnits;return{u_camera_to_center_distance:fe.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(M.posMatrix,C,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+V,u_device_pixel_ratio:w.browser.devicePixelRatio,u_extrude_scale:ie}},_i=function(E,M,C){var I=On(C,1,M.zoom),V=Math.pow(2,M.zoom-C.tileID.overscaledZ),ie=C.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:M.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[M.pixelsToGLUnits[0]/(I*V),M.pixelsToGLUnits[1]/(I*V)],u_overscale_factor:ie}},sa=function(E,M,C){return{u_matrix:E,u_inv_matrix:M,u_camera_to_center_distance:C.cameraToCenterDistance,u_viewport_size:[C.width,C.height]}},xo=function(E,M,C){return C===void 0&&(C=1),{u_matrix:E,u_color:M,u_overlay:0,u_overlay_scale:C}},Us=function(E){return{u_matrix:E}},yl=function(E,M,C,I){return{u_matrix:E,u_extrude_scale:On(M,1,C),u_intensity:I}},al=function(E,M,C){var I=E.transform;return{u_matrix:pp(E,M,C),u_ratio:1/On(M,1,I.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Bo=function(E,M,C,I){return w.extend(al(E,M,C),{u_image:0,u_image_height:I})},hp=function(E,M,C,I){var V=E.transform,ie=qc(M,V);return{u_matrix:pp(E,M,C),u_texsize:M.imageAtlasTexture.size,u_ratio:1/On(M,1,V.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_image:0,u_scale:[ie,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]]}},Fd=function(E,M,C,I,V){var ie=E.lineAtlas,fe=qc(M,E.transform),Oe=C.layout.get("line-cap")==="round",ut=ie.getDash(I.from,Oe),Et=ie.getDash(I.to,Oe),Wt=ut.width*V.fromScale,Xt=Et.width*V.toScale;return w.extend(al(E,M,C),{u_patternscale_a:[fe/Wt,-ut.height/2],u_patternscale_b:[fe/Xt,-Et.height/2],u_sdfgamma:ie.width/(256*Math.min(Wt,Xt)*w.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ut.y,u_tex_y_b:Et.y,u_mix:V.t})};function qc(E,M){return 1/On(E,1,M.tileZoom)}function pp(E,M,C){return E.translatePosMatrix(M.tileID.posMatrix,M,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}var pf=function(E,M,C,I,V){return{u_matrix:E,u_tl_parent:M,u_scale_parent:C,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*V.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:V.paint.get("raster-brightness-min"),u_brightness_high:V.paint.get("raster-brightness-max"),u_saturation_factor:(fe=V.paint.get("raster-saturation"),fe>0?1-1/(1.001-fe):-fe),u_contrast_factor:(ie=V.paint.get("raster-contrast"),ie>0?1/(1-ie):1+ie),u_spin_weights:Yp(V.paint.get("raster-hue-rotate"))};var ie,fe};function Yp(E){E*=Math.PI/180;var M=Math.sin(E),C=Math.cos(E);return[(2*C+1)/3,(-Math.sqrt(3)*M-C+1)/3,(Math.sqrt(3)*M-C+1)/3]}var Aa,df=function(E,M,C,I,V,ie,fe,Oe,ut,Et){var Wt=V.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:M?M.uSizeT:0,u_size:M?M.uSize:0,u_camera_to_center_distance:Wt.cameraToCenterDistance,u_pitch:Wt.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Wt.width/Wt.height,u_fade_change:V.options.fadeDuration?V.symbolFadeChange:1,u_matrix:ie,u_label_plane_matrix:fe,u_coord_matrix:Oe,u_is_text:+ut,u_pitch_with_map:+I,u_texsize:Et,u_texture:0}},nh=function(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt){var Xt=V.transform;return w.extend(df(E,M,C,I,V,ie,fe,Oe,ut,Et),{u_gamma_scale:I?Math.cos(Xt._pitch)*Xt.cameraToCenterDistance:1,u_device_pixel_ratio:w.browser.devicePixelRatio,u_is_halo:+Wt})},ih=function(E,M,C,I,V,ie,fe,Oe,ut,Et){return w.extend(nh(E,M,C,I,V,ie,fe,Oe,!0,ut,!0),{u_texsize_icon:Et,u_texture_icon:1})},Of=function(E,M,C){return{u_matrix:E,u_opacity:M,u_color:C}},ah=function(E,M,C,I,V,ie){return w.extend(function(fe,Oe,ut,Et){var Wt=ut.imageManager.getPattern(fe.from.toString()),Xt=ut.imageManager.getPattern(fe.to.toString()),Kt=ut.imageManager.getPixelSize(),_r=Kt.width,dr=Kt.height,Pr=Math.pow(2,Et.tileID.overscaledZ),cr=Et.tileSize*Math.pow(2,ut.transform.tileZoom)/Pr,Dr=cr*(Et.tileID.canonical.x+Et.tileID.wrap*Pr),Wr=cr*Et.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Wt.tl,u_pattern_br_a:Wt.br,u_pattern_tl_b:Xt.tl,u_pattern_br_b:Xt.br,u_texsize:[_r,dr],u_mix:Oe.t,u_pattern_size_a:Wt.displaySize,u_pattern_size_b:Xt.displaySize,u_scale_a:Oe.fromScale,u_scale_b:Oe.toScale,u_tile_units_to_pixels:1/On(Et,1,ut.transform.tileZoom),u_pixel_coord_upper:[Dr>>16,Wr>>16],u_pixel_coord_lower:[65535&Dr,65535&Wr]}}(I,ie,C,V),{u_matrix:E,u_opacity:M})},$s={fillExtrusion:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_lightpos:new w.Uniform3f(E,M.u_lightpos),u_lightintensity:new w.Uniform1f(E,M.u_lightintensity),u_lightcolor:new w.Uniform3f(E,M.u_lightcolor),u_vertical_gradient:new w.Uniform1f(E,M.u_vertical_gradient),u_opacity:new w.Uniform1f(E,M.u_opacity)}},fillExtrusionPattern:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_lightpos:new w.Uniform3f(E,M.u_lightpos),u_lightintensity:new w.Uniform1f(E,M.u_lightintensity),u_lightcolor:new w.Uniform3f(E,M.u_lightcolor),u_vertical_gradient:new w.Uniform1f(E,M.u_vertical_gradient),u_height_factor:new w.Uniform1f(E,M.u_height_factor),u_image:new w.Uniform1i(E,M.u_image),u_texsize:new w.Uniform2f(E,M.u_texsize),u_pixel_coord_upper:new w.Uniform2f(E,M.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(E,M.u_pixel_coord_lower),u_scale:new w.Uniform3f(E,M.u_scale),u_fade:new w.Uniform1f(E,M.u_fade),u_opacity:new w.Uniform1f(E,M.u_opacity)}},fill:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix)}},fillPattern:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_image:new w.Uniform1i(E,M.u_image),u_texsize:new w.Uniform2f(E,M.u_texsize),u_pixel_coord_upper:new w.Uniform2f(E,M.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(E,M.u_pixel_coord_lower),u_scale:new w.Uniform3f(E,M.u_scale),u_fade:new w.Uniform1f(E,M.u_fade)}},fillOutline:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_world:new w.Uniform2f(E,M.u_world)}},fillOutlinePattern:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_world:new w.Uniform2f(E,M.u_world),u_image:new w.Uniform1i(E,M.u_image),u_texsize:new w.Uniform2f(E,M.u_texsize),u_pixel_coord_upper:new w.Uniform2f(E,M.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(E,M.u_pixel_coord_lower),u_scale:new w.Uniform3f(E,M.u_scale),u_fade:new w.Uniform1f(E,M.u_fade)}},circle:function(E,M){return{u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_scale_with_map:new w.Uniform1i(E,M.u_scale_with_map),u_pitch_with_map:new w.Uniform1i(E,M.u_pitch_with_map),u_extrude_scale:new w.Uniform2f(E,M.u_extrude_scale),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_matrix:new w.UniformMatrix4f(E,M.u_matrix)}},collisionBox:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_pixels_to_tile_units:new w.Uniform1f(E,M.u_pixels_to_tile_units),u_extrude_scale:new w.Uniform2f(E,M.u_extrude_scale),u_overscale_factor:new w.Uniform1f(E,M.u_overscale_factor)}},collisionCircle:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_inv_matrix:new w.UniformMatrix4f(E,M.u_inv_matrix),u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_viewport_size:new w.Uniform2f(E,M.u_viewport_size)}},debug:function(E,M){return{u_color:new w.UniformColor(E,M.u_color),u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_overlay:new w.Uniform1i(E,M.u_overlay),u_overlay_scale:new w.Uniform1f(E,M.u_overlay_scale)}},clippingMask:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix)}},heatmap:function(E,M){return{u_extrude_scale:new w.Uniform1f(E,M.u_extrude_scale),u_intensity:new w.Uniform1f(E,M.u_intensity),u_matrix:new w.UniformMatrix4f(E,M.u_matrix)}},heatmapTexture:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_world:new w.Uniform2f(E,M.u_world),u_image:new w.Uniform1i(E,M.u_image),u_color_ramp:new w.Uniform1i(E,M.u_color_ramp),u_opacity:new w.Uniform1f(E,M.u_opacity)}},hillshade:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_image:new w.Uniform1i(E,M.u_image),u_latrange:new w.Uniform2f(E,M.u_latrange),u_light:new w.Uniform2f(E,M.u_light),u_shadow:new w.UniformColor(E,M.u_shadow),u_highlight:new w.UniformColor(E,M.u_highlight),u_accent:new w.UniformColor(E,M.u_accent)}},hillshadePrepare:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_image:new w.Uniform1i(E,M.u_image),u_dimension:new w.Uniform2f(E,M.u_dimension),u_zoom:new w.Uniform1f(E,M.u_zoom),u_unpack:new w.Uniform4f(E,M.u_unpack)}},line:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_ratio:new w.Uniform1f(E,M.u_ratio),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(E,M.u_units_to_pixels)}},lineGradient:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_ratio:new w.Uniform1f(E,M.u_ratio),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(E,M.u_units_to_pixels),u_image:new w.Uniform1i(E,M.u_image),u_image_height:new w.Uniform1f(E,M.u_image_height)}},linePattern:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_texsize:new w.Uniform2f(E,M.u_texsize),u_ratio:new w.Uniform1f(E,M.u_ratio),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_image:new w.Uniform1i(E,M.u_image),u_units_to_pixels:new w.Uniform2f(E,M.u_units_to_pixels),u_scale:new w.Uniform3f(E,M.u_scale),u_fade:new w.Uniform1f(E,M.u_fade)}},lineSDF:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_ratio:new w.Uniform1f(E,M.u_ratio),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(E,M.u_units_to_pixels),u_patternscale_a:new w.Uniform2f(E,M.u_patternscale_a),u_patternscale_b:new w.Uniform2f(E,M.u_patternscale_b),u_sdfgamma:new w.Uniform1f(E,M.u_sdfgamma),u_image:new w.Uniform1i(E,M.u_image),u_tex_y_a:new w.Uniform1f(E,M.u_tex_y_a),u_tex_y_b:new w.Uniform1f(E,M.u_tex_y_b),u_mix:new w.Uniform1f(E,M.u_mix)}},raster:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_tl_parent:new w.Uniform2f(E,M.u_tl_parent),u_scale_parent:new w.Uniform1f(E,M.u_scale_parent),u_buffer_scale:new w.Uniform1f(E,M.u_buffer_scale),u_fade_t:new w.Uniform1f(E,M.u_fade_t),u_opacity:new w.Uniform1f(E,M.u_opacity),u_image0:new w.Uniform1i(E,M.u_image0),u_image1:new w.Uniform1i(E,M.u_image1),u_brightness_low:new w.Uniform1f(E,M.u_brightness_low),u_brightness_high:new w.Uniform1f(E,M.u_brightness_high),u_saturation_factor:new w.Uniform1f(E,M.u_saturation_factor),u_contrast_factor:new w.Uniform1f(E,M.u_contrast_factor),u_spin_weights:new w.Uniform3f(E,M.u_spin_weights)}},symbolIcon:function(E,M){return{u_is_size_zoom_constant:new w.Uniform1i(E,M.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(E,M.u_is_size_feature_constant),u_size_t:new w.Uniform1f(E,M.u_size_t),u_size:new w.Uniform1f(E,M.u_size),u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_pitch:new w.Uniform1f(E,M.u_pitch),u_rotate_symbol:new w.Uniform1i(E,M.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(E,M.u_aspect_ratio),u_fade_change:new w.Uniform1f(E,M.u_fade_change),u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(E,M.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(E,M.u_coord_matrix),u_is_text:new w.Uniform1i(E,M.u_is_text),u_pitch_with_map:new w.Uniform1i(E,M.u_pitch_with_map),u_texsize:new w.Uniform2f(E,M.u_texsize),u_texture:new w.Uniform1i(E,M.u_texture)}},symbolSDF:function(E,M){return{u_is_size_zoom_constant:new w.Uniform1i(E,M.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(E,M.u_is_size_feature_constant),u_size_t:new w.Uniform1f(E,M.u_size_t),u_size:new w.Uniform1f(E,M.u_size),u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_pitch:new w.Uniform1f(E,M.u_pitch),u_rotate_symbol:new w.Uniform1i(E,M.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(E,M.u_aspect_ratio),u_fade_change:new w.Uniform1f(E,M.u_fade_change),u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(E,M.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(E,M.u_coord_matrix),u_is_text:new w.Uniform1i(E,M.u_is_text),u_pitch_with_map:new w.Uniform1i(E,M.u_pitch_with_map),u_texsize:new w.Uniform2f(E,M.u_texsize),u_texture:new w.Uniform1i(E,M.u_texture),u_gamma_scale:new w.Uniform1f(E,M.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(E,M.u_is_halo)}},symbolTextAndIcon:function(E,M){return{u_is_size_zoom_constant:new w.Uniform1i(E,M.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(E,M.u_is_size_feature_constant),u_size_t:new w.Uniform1f(E,M.u_size_t),u_size:new w.Uniform1f(E,M.u_size),u_camera_to_center_distance:new w.Uniform1f(E,M.u_camera_to_center_distance),u_pitch:new w.Uniform1f(E,M.u_pitch),u_rotate_symbol:new w.Uniform1i(E,M.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(E,M.u_aspect_ratio),u_fade_change:new w.Uniform1f(E,M.u_fade_change),u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(E,M.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(E,M.u_coord_matrix),u_is_text:new w.Uniform1i(E,M.u_is_text),u_pitch_with_map:new w.Uniform1i(E,M.u_pitch_with_map),u_texsize:new w.Uniform2f(E,M.u_texsize),u_texsize_icon:new w.Uniform2f(E,M.u_texsize_icon),u_texture:new w.Uniform1i(E,M.u_texture),u_texture_icon:new w.Uniform1i(E,M.u_texture_icon),u_gamma_scale:new w.Uniform1f(E,M.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(E,M.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(E,M.u_is_halo)}},background:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_opacity:new w.Uniform1f(E,M.u_opacity),u_color:new w.UniformColor(E,M.u_color)}},backgroundPattern:function(E,M){return{u_matrix:new w.UniformMatrix4f(E,M.u_matrix),u_opacity:new w.Uniform1f(E,M.u_opacity),u_image:new w.Uniform1i(E,M.u_image),u_pattern_tl_a:new w.Uniform2f(E,M.u_pattern_tl_a),u_pattern_br_a:new w.Uniform2f(E,M.u_pattern_br_a),u_pattern_tl_b:new w.Uniform2f(E,M.u_pattern_tl_b),u_pattern_br_b:new w.Uniform2f(E,M.u_pattern_br_b),u_texsize:new w.Uniform2f(E,M.u_texsize),u_mix:new w.Uniform1f(E,M.u_mix),u_pattern_size_a:new w.Uniform2f(E,M.u_pattern_size_a),u_pattern_size_b:new w.Uniform2f(E,M.u_pattern_size_b),u_scale_a:new w.Uniform1f(E,M.u_scale_a),u_scale_b:new w.Uniform1f(E,M.u_scale_b),u_pixel_coord_upper:new w.Uniform2f(E,M.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(E,M.u_pixel_coord_lower),u_tile_units_to_pixels:new w.Uniform1f(E,M.u_tile_units_to_pixels)}}};function pc(E,M,C,I,V,ie,fe){for(var Oe=E.context,ut=Oe.gl,Et=E.useProgram("collisionBox"),Wt=[],Xt=0,Kt=0,_r=0;_r<I.length;_r++){var dr=I[_r],Pr=M.getTile(dr),cr=Pr.getBucket(C);if(cr){var Dr=dr.posMatrix;V[0]===0&&V[1]===0||(Dr=E.translatePosMatrix(dr.posMatrix,Pr,V,ie));var Wr=fe?cr.textCollisionBox:cr.iconCollisionBox,rn=cr.collisionCircleArray;if(rn.length>0){var xn=w.create(),dn=Dr;w.mul(xn,cr.placementInvProjMatrix,E.transform.glCoordMatrix),w.mul(xn,xn,cr.placementViewportMatrix),Wt.push({circleArray:rn,circleOffset:Kt,transform:dn,invTransform:xn}),Kt=Xt+=rn.length/4}Wr&&Et.draw(Oe,ut.LINES,nt.disabled,St.disabled,E.colorModeForRenderPass(),vr.disabled,_i(Dr,E.transform,Pr),C.id,Wr.layoutVertexBuffer,Wr.indexBuffer,Wr.segments,null,E.transform.zoom,null,null,Wr.collisionVertexBuffer)}}if(fe&&Wt.length){var An=E.useProgram("collisionCircle"),Vn=new w.StructArrayLayout2f1f2i16;Vn.resize(4*Xt),Vn._trim();for(var ui=0,li=0,Ri=Wt;li<Ri.length;li+=1)for(var ea=Ri[li],ua=0;ua<ea.circleArray.length/4;ua++){var ra=4*ua,uo=ea.circleArray[ra+0],Li=ea.circleArray[ra+1],Oa=ea.circleArray[ra+2],Ha=ea.circleArray[ra+3];Vn.emplace(ui++,uo,Li,Oa,Ha,0),Vn.emplace(ui++,uo,Li,Oa,Ha,1),Vn.emplace(ui++,uo,Li,Oa,Ha,2),Vn.emplace(ui++,uo,Li,Oa,Ha,3)}(!Aa||Aa.length<2*Xt)&&(Aa=function(Vs){var $u=2*Vs,zu=new w.StructArrayLayout3ui6;zu.resize($u),zu._trim();for(var es=0;es<$u;es++){var ws=6*es;zu.uint16[ws+0]=4*es+0,zu.uint16[ws+1]=4*es+1,zu.uint16[ws+2]=4*es+2,zu.uint16[ws+3]=4*es+2,zu.uint16[ws+4]=4*es+3,zu.uint16[ws+5]=4*es+0}return zu}(Xt));for(var va=Oe.createIndexBuffer(Aa,!0),Ea=Oe.createVertexBuffer(Vn,w.collisionCircleLayout.members,!0),Pa=0,la=Wt;Pa<la.length;Pa+=1){var ga=la[Pa],Tu=sa(ga.transform,ga.invTransform,E.transform);An.draw(Oe,ut.TRIANGLES,nt.disabled,St.disabled,E.colorModeForRenderPass(),vr.disabled,Tu,C.id,Ea,va,w.SegmentVector.simpleSegment(0,2*ga.circleOffset,ga.circleArray.length,ga.circleArray.length/2),null,E.transform.zoom,null,null,null)}Ea.destroy(),va.destroy()}}var Bu=w.identity(new Float32Array(16));function oh(E,M,C,I,V,ie){var fe=w.getAnchorAlignment(E),Oe=-(fe.horizontalAlign-.5)*M,ut=-(fe.verticalAlign-.5)*C,Et=w.evaluateVariableOffset(E,I);return new w.Point((Oe/V+Et[0])*ie,(ut/V+Et[1])*ie)}function qp(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt){var Xt=E.text.placedSymbolArray,Kt=E.text.dynamicLayoutVertexArray,_r=E.icon.dynamicLayoutVertexArray,dr={};Kt.clear();for(var Pr=0;Pr<Xt.length;Pr++){var cr=Xt.get(Pr),Dr=cr.hidden||!cr.crossTileID||E.allowVerticalPlacement&&!cr.placedOrientation?null:I[cr.crossTileID];if(Dr){var Wr=new w.Point(cr.anchorX,cr.anchorY),rn=Kn(Wr,C?Oe:fe),xn=Ci(ie.cameraToCenterDistance,rn.signedDistanceFromCamera),dn=V.evaluateSizeForFeature(E.textSizeData,Et,cr)*xn/w.ONE_EM;C&&(dn*=E.tilePixelRatio/ut);for(var An=oh(Dr.anchor,Dr.width,Dr.height,Dr.textOffset,Dr.textBoxScale,dn),Vn=C?Kn(Wr.add(An),fe).point:rn.point.add(M?An.rotate(-ie.angle):An),ui=E.allowVerticalPlacement&&cr.placedOrientation===w.WritingMode.vertical?Math.PI/2:0,li=0;li<cr.numGlyphs;li++)w.addDynamicAttributes(Kt,Vn,ui);Wt&&cr.associatedIconIndex>=0&&(dr[cr.associatedIconIndex]={shiftedAnchor:Vn,angle:ui})}else tn(cr.numGlyphs,Kt)}if(Wt){_r.clear();for(var Ri=E.icon.placedSymbolArray,ea=0;ea<Ri.length;ea++){var ua=Ri.get(ea);if(ua.hidden)tn(ua.numGlyphs,_r);else{var ra=dr[ea];if(ra)for(var uo=0;uo<ua.numGlyphs;uo++)w.addDynamicAttributes(_r,ra.shiftedAnchor,ra.angle);else tn(ua.numGlyphs,_r)}}E.icon.dynamicLayoutVertexBuffer.updateData(_r)}E.text.dynamicLayoutVertexBuffer.updateData(Kt)}function Kp(E,M,C){return C.iconsInText&&M?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function sh(E,M,C,I,V,ie,fe,Oe,ut,Et,Wt,Xt){for(var Kt=E.context,_r=Kt.gl,dr=E.transform,Pr=Oe==="map",cr=ut==="map",Dr=Pr&&C.layout.get("symbol-placement")!=="point",Wr=Pr&&!cr&&!Dr,rn=C.layout.get("symbol-sort-key").constantOr(1)!==void 0,xn=!1,dn=E.depthModeForSublayer(0,nt.ReadOnly),An=C.layout.get("text-variable-anchor"),Vn=[],ui=0,li=I;ui<li.length;ui+=1){var Ri=li[ui],ea=M.getTile(Ri),ua=ea.getBucket(C);if(ua){var ra=V?ua.text:ua.icon;if(ra&&ra.segments.get().length){var uo=ra.programConfigurations.get(C.id),Li=V||ua.sdfIcons,Oa=V?ua.textSizeData:ua.iconSizeData,Ha=cr||dr.pitch!==0,va=E.useProgram(Kp(Li,V,ua),uo),Ea=w.evaluateSizeForZoom(Oa,dr.zoom),Pa=void 0,la=[0,0],ga=void 0,Tu=void 0,Vs=null,$u=void 0;if(V)ga=ea.glyphAtlasTexture,Tu=_r.LINEAR,Pa=ea.glyphAtlasTexture.size,ua.iconsInText&&(la=ea.imageAtlasTexture.size,Vs=ea.imageAtlasTexture,$u=Ha||E.options.rotating||E.options.zooming||Oa.kind==="composite"||Oa.kind==="camera"?_r.LINEAR:_r.NEAREST);else{var zu=C.layout.get("icon-size").constantOr(0)!==1||ua.iconsNeedLinear;ga=ea.imageAtlasTexture,Tu=Li||E.options.rotating||E.options.zooming||zu||Ha?_r.LINEAR:_r.NEAREST,Pa=ea.imageAtlasTexture.size}var es=On(ea,1,E.transform.zoom),ws=Lo(Ri.posMatrix,cr,Pr,E.transform,es),Xu=Za(Ri.posMatrix,cr,Pr,E.transform,es),Js=An&&ua.hasTextData(),Jc=C.layout.get("icon-text-fit")!=="none"&&Js&&ua.hasIconData();Dr&&Jo(ua,Ri.posMatrix,E,V,ws,Xu,cr,Et);var Sl=E.translatePosMatrix(Ri.posMatrix,ea,ie,fe),oc=Dr||V&&An||Jc?Bu:ws,Zl=E.translatePosMatrix(Xu,ea,ie,fe,!0),yf=Li&&C.paint.get(V?"text-halo-width":"icon-halo-width").constantOr(1)!==0,zf={program:va,buffers:ra,uniformValues:Li?ua.iconsInText?ih(Oa.kind,Ea,Wr,cr,E,Sl,oc,Zl,Pa,la):nh(Oa.kind,Ea,Wr,cr,E,Sl,oc,Zl,V,Pa,!0):df(Oa.kind,Ea,Wr,cr,E,Sl,oc,Zl,V,Pa),atlasTexture:ga,atlasTextureIcon:Vs,atlasInterpolation:Tu,atlasInterpolationIcon:$u,isSDF:Li,hasHalo:yf};if(rn&&ua.canOverlap){xn=!0;for(var _c=0,Uf=ra.segments.get();_c<Uf.length;_c+=1){var ef=Uf[_c];Vn.push({segments:new w.SegmentVector([ef]),sortKey:ef.sortKey,state:zf})}}else Vn.push({segments:ra.segments,sortKey:0,state:zf})}}}xn&&Vn.sort(function(qu,jl){return qu.sortKey-jl.sortKey});for(var Vl=0,_f=Vn;Vl<_f.length;Vl+=1){var Au=_f[Vl],Ps=Au.state;if(Kt.activeTexture.set(_r.TEXTURE0),Ps.atlasTexture.bind(Ps.atlasInterpolation,_r.CLAMP_TO_EDGE),Ps.atlasTextureIcon&&(Kt.activeTexture.set(_r.TEXTURE1),Ps.atlasTextureIcon&&Ps.atlasTextureIcon.bind(Ps.atlasInterpolationIcon,_r.CLAMP_TO_EDGE)),Ps.isSDF){var Yu=Ps.uniformValues;Ps.hasHalo&&(Yu.u_is_halo=1,dc(Ps.buffers,Au.segments,C,E,Ps.program,dn,Wt,Xt,Yu)),Yu.u_is_halo=0}dc(Ps.buffers,Au.segments,C,E,Ps.program,dn,Wt,Xt,Ps.uniformValues)}}function dc(E,M,C,I,V,ie,fe,Oe,ut){var Et=I.context;V.draw(Et,Et.gl.TRIANGLES,ie,fe,Oe,vr.disabled,ut,C.id,E.layoutVertexBuffer,E.indexBuffer,M,C.paint,I.transform.zoom,E.programConfigurations.get(C.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Oh(E,M,C,I,V,ie,fe){var Oe,ut,Et,Wt,Xt,Kt=E.context.gl,_r=C.paint.get("fill-pattern"),dr=_r&&_r.constantOr(1),Pr=C.getCrossfadeParameters();fe?(ut=dr&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Oe=Kt.LINES):(ut=dr?"fillPattern":"fill",Oe=Kt.TRIANGLES);for(var cr=0,Dr=I;cr<Dr.length;cr+=1){var Wr=Dr[cr],rn=M.getTile(Wr);if(!dr||rn.patternsLoaded()){var xn=rn.getBucket(C);if(xn){var dn=xn.programConfigurations.get(C.id),An=E.useProgram(ut,dn);dr&&(E.context.activeTexture.set(Kt.TEXTURE0),rn.imageAtlasTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE),dn.updatePaintBuffers(Pr));var Vn=_r.constantOr(null);if(Vn&&rn.imageAtlas){var ui=rn.imageAtlas,li=ui.patternPositions[Vn.to.toString()],Ri=ui.patternPositions[Vn.from.toString()];li&&Ri&&dn.setConstantPatternPositions(li,Ri)}var ea=E.translatePosMatrix(Wr.posMatrix,rn,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(fe){Wt=xn.indexBuffer2,Xt=xn.segments2;var ua=[Kt.drawingBufferWidth,Kt.drawingBufferHeight];Et=ut==="fillOutlinePattern"&&dr?Jr(ea,E,Pr,rn,ua):Hr(ea,ua)}else Wt=xn.indexBuffer,Xt=xn.segments,Et=dr?br(ea,E,Pr,rn):Ot(ea);An.draw(E.context,Oe,V,E.stencilModeForClipping(Wr),ie,vr.disabled,Et,C.id,xn.layoutVertexBuffer,Wt,Xt,C.paint,E.transform.zoom,dn)}}}}function dp(E,M,C,I,V,ie,fe){for(var Oe=E.context,ut=Oe.gl,Et=C.paint.get("fill-extrusion-pattern"),Wt=Et.constantOr(1),Xt=C.getCrossfadeParameters(),Kt=C.paint.get("fill-extrusion-opacity"),_r=0,dr=I;_r<dr.length;_r+=1){var Pr=dr[_r],cr=M.getTile(Pr),Dr=cr.getBucket(C);if(Dr){var Wr=Dr.programConfigurations.get(C.id),rn=E.useProgram(Wt?"fillExtrusionPattern":"fillExtrusion",Wr);Wt&&(E.context.activeTexture.set(ut.TEXTURE0),cr.imageAtlasTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),Wr.updatePaintBuffers(Xt));var xn=Et.constantOr(null);if(xn&&cr.imageAtlas){var dn=cr.imageAtlas,An=dn.patternPositions[xn.to.toString()],Vn=dn.patternPositions[xn.from.toString()];An&&Vn&&Wr.setConstantPatternPositions(An,Vn)}var ui=E.translatePosMatrix(Pr.posMatrix,cr,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),li=C.paint.get("fill-extrusion-vertical-gradient"),Ri=Wt?Fu(ui,E,li,Kt,Pr,Xt,cr):fp(ui,E,li,Kt);rn.draw(Oe,Oe.gl.TRIANGLES,V,ie,fe,vr.backCCW,Ri,C.id,Dr.layoutVertexBuffer,Dr.indexBuffer,Dr.segments,C.paint,E.transform.zoom,Wr)}}}function Pf(E,M,C,I,V,ie){var fe=E.context,Oe=fe.gl,ut=M.fbo;if(ut){var Et=E.useProgram("hillshade");fe.activeTexture.set(Oe.TEXTURE0),Oe.bindTexture(Oe.TEXTURE_2D,ut.colorAttachment.get());var Wt=function(Xt,Kt,_r){var dr=_r.paint.get("hillshade-shadow-color"),Pr=_r.paint.get("hillshade-highlight-color"),cr=_r.paint.get("hillshade-accent-color"),Dr=_r.paint.get("hillshade-illumination-direction")*(Math.PI/180);_r.paint.get("hillshade-illumination-anchor")==="viewport"&&(Dr-=Xt.transform.angle);var Wr,rn,xn,dn=!Xt.options.moving;return{u_matrix:Xt.transform.calculatePosMatrix(Kt.tileID.toUnwrapped(),dn),u_image:0,u_latrange:(Wr=Kt.tileID,rn=Math.pow(2,Wr.canonical.z),xn=Wr.canonical.y,[new w.MercatorCoordinate(0,xn/rn).toLngLat().lat,new w.MercatorCoordinate(0,(xn+1)/rn).toLngLat().lat]),u_light:[_r.paint.get("hillshade-exaggeration"),Dr],u_shadow:dr,u_highlight:Pr,u_accent:cr}}(E,M,C);Et.draw(fe,Oe.TRIANGLES,I,V,ie,vr.disabled,Wt,C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}}function pm(E,M,C,I,V,ie){var fe=E.context,Oe=fe.gl,ut=M.dem;if(ut&&ut.data){var Et=ut.dim,Wt=ut.stride,Xt=ut.getPixels();if(fe.activeTexture.set(Oe.TEXTURE1),fe.pixelStoreUnpackPremultiplyAlpha.set(!1),M.demTexture=M.demTexture||E.getTileTexture(Wt),M.demTexture){var Kt=M.demTexture;Kt.update(Xt,{premultiply:!1}),Kt.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE)}else M.demTexture=new w.Texture(fe,Xt,Oe.RGBA,{premultiply:!1}),M.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE);fe.activeTexture.set(Oe.TEXTURE0);var _r=M.fbo;if(!_r){var dr=new w.Texture(fe,{width:Et,height:Et,data:null},Oe.RGBA);dr.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),(_r=M.fbo=fe.createFramebuffer(Et,Et,!0)).colorAttachment.set(dr.texture)}fe.bindFramebuffer.set(_r.framebuffer),fe.viewport.set([0,0,Et,Et]),E.useProgram("hillshadePrepare").draw(fe,Oe.TRIANGLES,I,V,ie,vr.disabled,function(Pr,cr){var Dr=cr.stride,Wr=w.create();return w.ortho(Wr,0,w.EXTENT,-w.EXTENT,0,0,1),w.translate(Wr,Wr,[0,-w.EXTENT,0]),{u_matrix:Wr,u_image:1,u_dimension:[Dr,Dr],u_zoom:Pr.overscaledZ,u_unpack:cr.getUnpackVector()}}(M.tileID,ut),C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),M.needsHillshadePrepare=!1}}function Bd(E,M,C,I,V){var ie=I.paint.get("raster-fade-duration");if(ie>0){var fe=w.browser.now(),Oe=(fe-E.timeAdded)/ie,ut=M?(fe-M.timeAdded)/ie:-1,Et=C.getSource(),Wt=V.coveringZoomLevel({tileSize:Et.tileSize,roundZoom:Et.roundZoom}),Xt=!M||Math.abs(M.tileID.overscaledZ-Wt)>Math.abs(E.tileID.overscaledZ-Wt),Kt=Xt&&E.refreshedUponExpiration?1:w.clamp(Xt?Oe:1-ut,0,1);return E.refreshedUponExpiration&&Oe>=1&&(E.refreshedUponExpiration=!1),M?{opacity:1,mix:1-Kt}:{opacity:Kt,mix:0}}return{opacity:1,mix:0}}var Nd=new w.Color(1,0,0,1),Is=new w.Color(0,1,0,1),Ph=new w.Color(0,0,1,1),vp=new w.Color(1,0,1,1),Qp=new w.Color(0,1,1,1);function gp(E,M,C,I){kh(E,0,M+C/2,E.transform.width,C,I)}function zd(E,M,C,I){kh(E,M-C/2,0,C,E.transform.height,I)}function kh(E,M,C,I,V,ie){var fe=E.context,Oe=fe.gl;Oe.enable(Oe.SCISSOR_TEST),Oe.scissor(M*w.browser.devicePixelRatio,C*w.browser.devicePixelRatio,I*w.browser.devicePixelRatio,V*w.browser.devicePixelRatio),fe.clear({color:ie}),Oe.disable(Oe.SCISSOR_TEST)}function Dh(E,M,C){var I=E.context,V=I.gl,ie=C.posMatrix,fe=E.useProgram("debug"),Oe=nt.disabled,ut=St.disabled,Et=E.colorModeForRenderPass();I.activeTexture.set(V.TEXTURE0),E.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),fe.draw(I,V.LINE_STRIP,Oe,ut,Et,vr.disabled,xo(ie,w.Color.red),"$debug",E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments);var Wt=M.getTileByID(C.key).latestRawTileData,Xt=Math.floor((Wt&&Wt.byteLength||0)/1024),Kt=M.getTile(C).tileSize,_r=512/Math.min(Kt,512)*(C.overscaledZ/E.transform.zoom)*.5,dr=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(dr+=" => "+C.overscaledZ),function(Pr,cr){Pr.initDebugOverlayCanvas();var Dr=Pr.debugOverlayCanvas,Wr=Pr.context.gl,rn=Pr.debugOverlayCanvas.getContext("2d");rn.clearRect(0,0,Dr.width,Dr.height),rn.shadowColor="white",rn.shadowBlur=2,rn.lineWidth=1.5,rn.strokeStyle="white",rn.textBaseline="top",rn.font="bold 36px Open Sans, sans-serif",rn.fillText(cr,5,5),rn.strokeText(cr,5,5),Pr.debugOverlayTexture.update(Dr),Pr.debugOverlayTexture.bind(Wr.LINEAR,Wr.CLAMP_TO_EDGE)}(E,dr+" "+Xt+"kb"),fe.draw(I,V.TRIANGLES,Oe,ut,$t.alphaBlended,vr.disabled,xo(ie,w.Color.transparent,_r),"$debug",E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments)}var kf={symbol:function(E,M,C,I,V){if(E.renderPass==="translucent"){var ie=St.disabled,fe=E.colorModeForRenderPass();C.layout.get("text-variable-anchor")&&function(Oe,ut,Et,Wt,Xt,Kt,_r){for(var dr=ut.transform,Pr=Xt==="map",cr=Kt==="map",Dr=0,Wr=Oe;Dr<Wr.length;Dr+=1){var rn=Wr[Dr],xn=Wt.getTile(rn),dn=xn.getBucket(Et);if(dn&&dn.text&&dn.text.segments.get().length){var An=w.evaluateSizeForZoom(dn.textSizeData,dr.zoom),Vn=On(xn,1,ut.transform.zoom),ui=Lo(rn.posMatrix,cr,Pr,ut.transform,Vn),li=Et.layout.get("icon-text-fit")!=="none"&&dn.hasIconData();if(An){var Ri=Math.pow(2,dr.zoom-xn.tileID.overscaledZ);qp(dn,Pr,cr,_r,w.symbolSize,dr,ui,rn.posMatrix,Ri,An,li)}}}}(I,E,C,M,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),V),C.paint.get("icon-opacity").constantOr(1)!==0&&sh(E,M,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),ie,fe),C.paint.get("text-opacity").constantOr(1)!==0&&sh(E,M,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),ie,fe),M.map.showCollisionBoxes&&(pc(E,M,C,I,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),pc(E,M,C,I,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))}},circle:function(E,M,C,I){if(E.renderPass==="translucent"){var V=C.paint.get("circle-opacity"),ie=C.paint.get("circle-stroke-width"),fe=C.paint.get("circle-stroke-opacity"),Oe=C.layout.get("circle-sort-key").constantOr(1)!==void 0;if(V.constantOr(1)!==0||ie.constantOr(1)!==0&&fe.constantOr(1)!==0){for(var ut=E.context,Et=ut.gl,Wt=E.depthModeForSublayer(0,nt.ReadOnly),Xt=St.disabled,Kt=E.colorModeForRenderPass(),_r=[],dr=0;dr<I.length;dr++){var Pr=I[dr],cr=M.getTile(Pr),Dr=cr.getBucket(C);if(Dr){var Wr=Dr.programConfigurations.get(C.id),rn={programConfiguration:Wr,program:E.useProgram("circle",Wr),layoutVertexBuffer:Dr.layoutVertexBuffer,indexBuffer:Dr.indexBuffer,uniformValues:Pn(E,Pr,cr,C)};if(Oe)for(var xn=0,dn=Dr.segments.get();xn<dn.length;xn+=1){var An=dn[xn];_r.push({segments:new w.SegmentVector([An]),sortKey:An.sortKey,state:rn})}else _r.push({segments:Dr.segments,sortKey:0,state:rn})}}Oe&&_r.sort(function(ea,ua){return ea.sortKey-ua.sortKey});for(var Vn=0,ui=_r;Vn<ui.length;Vn+=1){var li=ui[Vn],Ri=li.state;Ri.program.draw(ut,Et.TRIANGLES,Wt,Xt,Kt,vr.disabled,Ri.uniformValues,C.id,Ri.layoutVertexBuffer,Ri.indexBuffer,li.segments,C.paint,E.transform.zoom,Ri.programConfiguration)}}}},heatmap:function(E,M,C,I){if(C.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){var V=E.context,ie=V.gl,fe=St.disabled,Oe=new $t([ie.ONE,ie.ONE],w.Color.transparent,[!0,!0,!0,!0]);(function(_r,dr,Pr){var cr=_r.gl;_r.activeTexture.set(cr.TEXTURE1),_r.viewport.set([0,0,dr.width/4,dr.height/4]);var Dr=Pr.heatmapFbo;if(Dr)cr.bindTexture(cr.TEXTURE_2D,Dr.colorAttachment.get()),_r.bindFramebuffer.set(Dr.framebuffer);else{var Wr=cr.createTexture();cr.bindTexture(cr.TEXTURE_2D,Wr),cr.texParameteri(cr.TEXTURE_2D,cr.TEXTURE_WRAP_S,cr.CLAMP_TO_EDGE),cr.texParameteri(cr.TEXTURE_2D,cr.TEXTURE_WRAP_T,cr.CLAMP_TO_EDGE),cr.texParameteri(cr.TEXTURE_2D,cr.TEXTURE_MIN_FILTER,cr.LINEAR),cr.texParameteri(cr.TEXTURE_2D,cr.TEXTURE_MAG_FILTER,cr.LINEAR),Dr=Pr.heatmapFbo=_r.createFramebuffer(dr.width/4,dr.height/4,!1),function(rn,xn,dn,An){var Vn=rn.gl;Vn.texImage2D(Vn.TEXTURE_2D,0,Vn.RGBA,xn.width/4,xn.height/4,0,Vn.RGBA,rn.extRenderToTextureHalfFloat?rn.extTextureHalfFloat.HALF_FLOAT_OES:Vn.UNSIGNED_BYTE,null),An.colorAttachment.set(dn)}(_r,dr,Wr,Dr)}})(V,E,C),V.clear({color:w.Color.transparent});for(var ut=0;ut<I.length;ut++){var Et=I[ut];if(!M.hasRenderableParent(Et)){var Wt=M.getTile(Et),Xt=Wt.getBucket(C);if(Xt){var Kt=Xt.programConfigurations.get(C.id);E.useProgram("heatmap",Kt).draw(V,ie.TRIANGLES,nt.disabled,fe,Oe,vr.disabled,yl(Et.posMatrix,Wt,E.transform.zoom,C.paint.get("heatmap-intensity")),C.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,C.paint,E.transform.zoom,Kt)}}}V.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(_r,dr){var Pr=_r.context,cr=Pr.gl,Dr=dr.heatmapFbo;if(Dr){Pr.activeTexture.set(cr.TEXTURE0),cr.bindTexture(cr.TEXTURE_2D,Dr.colorAttachment.get()),Pr.activeTexture.set(cr.TEXTURE1);var Wr=dr.colorRampTexture;Wr||(Wr=dr.colorRampTexture=new w.Texture(Pr,dr.colorRamp,cr.RGBA)),Wr.bind(cr.LINEAR,cr.CLAMP_TO_EDGE),_r.useProgram("heatmapTexture").draw(Pr,cr.TRIANGLES,nt.disabled,St.disabled,_r.colorModeForRenderPass(),vr.disabled,function(rn,xn,dn,An){var Vn=w.create();w.ortho(Vn,0,rn.width,rn.height,0,0,1);var ui=rn.context.gl;return{u_matrix:Vn,u_world:[ui.drawingBufferWidth,ui.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:xn.paint.get("heatmap-opacity")}}(_r,dr),dr.id,_r.viewportBuffer,_r.quadTriangleIndexBuffer,_r.viewportSegments,dr.paint,_r.transform.zoom)}}(E,C))},line:function(E,M,C,I){if(E.renderPass==="translucent"){var V=C.paint.get("line-opacity"),ie=C.paint.get("line-width");if(V.constantOr(1)!==0&&ie.constantOr(1)!==0)for(var fe=E.depthModeForSublayer(0,nt.ReadOnly),Oe=E.colorModeForRenderPass(),ut=C.paint.get("line-dasharray"),Et=C.paint.get("line-pattern"),Wt=Et.constantOr(1),Xt=C.paint.get("line-gradient"),Kt=C.getCrossfadeParameters(),_r=Wt?"linePattern":ut?"lineSDF":Xt?"lineGradient":"line",dr=E.context,Pr=dr.gl,cr=!0,Dr=0,Wr=I;Dr<Wr.length;Dr+=1){var rn=Wr[Dr],xn=M.getTile(rn);if(!Wt||xn.patternsLoaded()){var dn=xn.getBucket(C);if(dn){var An=dn.programConfigurations.get(C.id),Vn=E.context.program.get(),ui=E.useProgram(_r,An),li=cr||ui.program!==Vn,Ri=Et.constantOr(null);if(Ri&&xn.imageAtlas){var ea=xn.imageAtlas,ua=ea.patternPositions[Ri.to.toString()],ra=ea.patternPositions[Ri.from.toString()];ua&&ra&&An.setConstantPatternPositions(ua,ra)}var uo=Wt?hp(E,xn,C,Kt):ut?Fd(E,xn,C,ut,Kt):Xt?Bo(E,xn,C,dn.lineClipsArray.length):al(E,xn,C);if(Wt)dr.activeTexture.set(Pr.TEXTURE0),xn.imageAtlasTexture.bind(Pr.LINEAR,Pr.CLAMP_TO_EDGE),An.updatePaintBuffers(Kt);else if(ut&&(li||E.lineAtlas.dirty))dr.activeTexture.set(Pr.TEXTURE0),E.lineAtlas.bind(dr);else if(Xt){var Li=dn.gradients[C.id],Oa=Li.texture;if(C.gradientVersion!==Li.version){var Ha=256;if(C.stepInterpolant){var va=M.getSource().maxzoom,Ea=rn.canonical.z===va?Math.ceil(1<<E.transform.maxZoom-rn.canonical.z):1;Ha=w.clamp(w.nextPowerOfTwo(dn.maxLineLength/w.EXTENT*1024*Ea),256,dr.maxTextureSize)}Li.gradient=w.renderColorRamp({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Ha,image:Li.gradient||void 0,clips:dn.lineClipsArray}),Li.texture?Li.texture.update(Li.gradient):Li.texture=new w.Texture(dr,Li.gradient,Pr.RGBA),Li.version=C.gradientVersion,Oa=Li.texture}dr.activeTexture.set(Pr.TEXTURE0),Oa.bind(C.stepInterpolant?Pr.NEAREST:Pr.LINEAR,Pr.CLAMP_TO_EDGE)}ui.draw(dr,Pr.TRIANGLES,fe,E.stencilModeForClipping(rn),Oe,vr.disabled,uo,C.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,C.paint,E.transform.zoom,An,dn.layoutVertexBuffer2),cr=!1}}}}},fill:function(E,M,C,I){var V=C.paint.get("fill-color"),ie=C.paint.get("fill-opacity");if(ie.constantOr(1)!==0){var fe=E.colorModeForRenderPass(),Oe=C.paint.get("fill-pattern"),ut=E.opaquePassEnabledForLayer()&&!Oe.constantOr(1)&&V.constantOr(w.Color.transparent).a===1&&ie.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===ut){var Et=E.depthModeForSublayer(1,E.renderPass==="opaque"?nt.ReadWrite:nt.ReadOnly);Oh(E,M,C,I,Et,fe,!1)}if(E.renderPass==="translucent"&&C.paint.get("fill-antialias")){var Wt=E.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,nt.ReadOnly);Oh(E,M,C,I,Wt,fe,!0)}}},"fill-extrusion":function(E,M,C,I){var V=C.paint.get("fill-extrusion-opacity");if(V!==0&&E.renderPass==="translucent"){var ie=new nt(E.context.gl.LEQUAL,nt.ReadWrite,E.depthRangeFor3D);if(V!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))dp(E,M,C,I,ie,St.disabled,$t.disabled),dp(E,M,C,I,ie,E.stencilModeFor3D(),E.colorModeForRenderPass());else{var fe=E.colorModeForRenderPass();dp(E,M,C,I,ie,St.disabled,fe)}}},hillshade:function(E,M,C,I){if(E.renderPass==="offscreen"||E.renderPass==="translucent"){for(var V=E.context,ie=E.depthModeForSublayer(0,nt.ReadOnly),fe=E.colorModeForRenderPass(),Oe=E.renderPass==="translucent"?E.stencilConfigForOverlap(I):[{},I],ut=Oe[0],Et=0,Wt=Oe[1];Et<Wt.length;Et+=1){var Xt=Wt[Et],Kt=M.getTile(Xt);Kt.needsHillshadePrepare&&E.renderPass==="offscreen"?pm(E,Kt,C,ie,St.disabled,fe):E.renderPass==="translucent"&&Pf(E,Kt,C,ie,ut[Xt.overscaledZ],fe)}V.viewport.set([0,0,E.width,E.height])}},raster:function(E,M,C,I){if(E.renderPass==="translucent"&&C.paint.get("raster-opacity")!==0&&I.length)for(var V=E.context,ie=V.gl,fe=M.getSource(),Oe=E.useProgram("raster"),ut=E.colorModeForRenderPass(),Et=fe instanceof lt?[{},I]:E.stencilConfigForOverlap(I),Wt=Et[0],Xt=Et[1],Kt=Xt[Xt.length-1].overscaledZ,_r=!E.options.moving,dr=0,Pr=Xt;dr<Pr.length;dr+=1){var cr=Pr[dr],Dr=E.depthModeForSublayer(cr.overscaledZ-Kt,C.paint.get("raster-opacity")===1?nt.ReadWrite:nt.ReadOnly,ie.LESS),Wr=M.getTile(cr),rn=E.transform.calculatePosMatrix(cr.toUnwrapped(),_r);Wr.registerFadeDuration(C.paint.get("raster-fade-duration"));var xn=M.findLoadedParent(cr,0),dn=Bd(Wr,xn,M,C,E.transform),An=void 0,Vn=void 0,ui=C.paint.get("raster-resampling")==="nearest"?ie.NEAREST:ie.LINEAR;V.activeTexture.set(ie.TEXTURE0),Wr.texture.bind(ui,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(ie.TEXTURE1),xn?(xn.texture.bind(ui,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST),An=Math.pow(2,xn.tileID.overscaledZ-Wr.tileID.overscaledZ),Vn=[Wr.tileID.canonical.x*An%1,Wr.tileID.canonical.y*An%1]):Wr.texture.bind(ui,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST);var li=pf(rn,Vn||[0,0],An||1,dn,C);fe instanceof lt?Oe.draw(V,ie.TRIANGLES,Dr,St.disabled,ut,vr.disabled,li,C.id,fe.boundsBuffer,E.quadTriangleIndexBuffer,fe.boundsSegments):Oe.draw(V,ie.TRIANGLES,Dr,Wt[cr.overscaledZ],ut,vr.disabled,li,C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,M,C){var I=C.paint.get("background-color"),V=C.paint.get("background-opacity");if(V!==0){var ie=E.context,fe=ie.gl,Oe=E.transform,ut=Oe.tileSize,Et=C.paint.get("background-pattern");if(!E.isPatternMissing(Et)){var Wt=!Et&&I.a===1&&V===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass===Wt){var Xt=St.disabled,Kt=E.depthModeForSublayer(0,Wt==="opaque"?nt.ReadWrite:nt.ReadOnly),_r=E.colorModeForRenderPass(),dr=E.useProgram(Et?"backgroundPattern":"background"),Pr=Oe.coveringTiles({tileSize:ut});Et&&(ie.activeTexture.set(fe.TEXTURE0),E.imageManager.bind(E.context));for(var cr=C.getCrossfadeParameters(),Dr=0,Wr=Pr;Dr<Wr.length;Dr+=1){var rn=Wr[Dr],xn=E.transform.calculatePosMatrix(rn.toUnwrapped()),dn=Et?ah(xn,V,E,Et,{tileID:rn,tileSize:ut},cr):Of(xn,V,I);dr.draw(ie,fe.TRIANGLES,Kt,Xt,_r,vr.disabled,dn,C.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}}}},debug:function(E,M,C){for(var I=0;I<C.length;I++)Dh(E,M,C[I])},custom:function(E,M,C){var I=E.context,V=C.implementation;if(E.renderPass==="offscreen"){var ie=V.prerender;ie&&(E.setCustomLayerDefaults(),I.setColorMode(E.colorModeForRenderPass()),ie.call(V,I.gl,E.transform.customLayerMatrix()),I.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),I.setColorMode(E.colorModeForRenderPass()),I.setStencilMode(St.disabled);var fe=V.renderingMode==="3d"?new nt(E.context.gl.LEQUAL,nt.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,nt.ReadOnly);I.setDepthMode(fe),V.render(I.gl,E.transform.customLayerMatrix()),I.setDirty(),E.setBaseState(),I.bindFramebuffer.set(null)}}},hs=function(E,M){this.context=new Rt(E),this.transform=M,this._tileTextures={},this.setup(),this.numSublayers=ct.maxUnderzooming+ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new au,this.gpuTimers={}};hs.prototype.resize=function(E,M){if(this.width=E*w.browser.devicePixelRatio,this.height=M*w.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var C=0,I=this.style._order;C<I.length;C+=1)this.style._layers[I[C]].resize()},hs.prototype.setup=function(){var E=this.context,M=new w.StructArrayLayout2i4;M.emplaceBack(0,0),M.emplaceBack(w.EXTENT,0),M.emplaceBack(0,w.EXTENT),M.emplaceBack(w.EXTENT,w.EXTENT),this.tileExtentBuffer=E.createVertexBuffer(M,Rs.members),this.tileExtentSegments=w.SegmentVector.simpleSegment(0,0,4,2);var C=new w.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(w.EXTENT,0),C.emplaceBack(0,w.EXTENT),C.emplaceBack(w.EXTENT,w.EXTENT),this.debugBuffer=E.createVertexBuffer(C,Rs.members),this.debugSegments=w.SegmentVector.simpleSegment(0,0,4,5);var I=new w.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(w.EXTENT,0,w.EXTENT,0),I.emplaceBack(0,w.EXTENT,0,w.EXTENT),I.emplaceBack(w.EXTENT,w.EXTENT,w.EXTENT,w.EXTENT),this.rasterBoundsBuffer=E.createVertexBuffer(I,Pe.members),this.rasterBoundsSegments=w.SegmentVector.simpleSegment(0,0,4,2);var V=new w.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(1,0),V.emplaceBack(0,1),V.emplaceBack(1,1),this.viewportBuffer=E.createVertexBuffer(V,Rs.members),this.viewportSegments=w.SegmentVector.simpleSegment(0,0,4,2);var ie=new w.StructArrayLayout1ui2;ie.emplaceBack(0),ie.emplaceBack(1),ie.emplaceBack(3),ie.emplaceBack(2),ie.emplaceBack(0),this.tileBorderIndexBuffer=E.createIndexBuffer(ie);var fe=new w.StructArrayLayout3ui6;fe.emplaceBack(0,1,2),fe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=E.createIndexBuffer(fe),this.emptyTexture=new w.Texture(E,{width:1,height:1,data:new Uint8Array([0,0,0,0])},E.gl.RGBA);var Oe=this.context.gl;this.stencilClearMode=new St({func:Oe.ALWAYS,mask:0},0,255,Oe.ZERO,Oe.ZERO,Oe.ZERO)},hs.prototype.clearStencil=function(){var E=this.context,M=E.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var C=w.create();w.ortho(C,0,this.width,this.height,0,0,1),w.scale(C,C,[M.drawingBufferWidth,M.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(E,M.TRIANGLES,nt.disabled,this.stencilClearMode,$t.disabled,vr.disabled,Us(C),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},hs.prototype._renderTileClippingMasks=function(E,M){if(this.currentStencilSource!==E.source&&E.isTileClipped()&&M&&M.length){this.currentStencilSource=E.source;var C=this.context,I=C.gl;this.nextStencilID+M.length>256&&this.clearStencil(),C.setColorMode($t.disabled),C.setDepthMode(nt.disabled);var V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ie=0,fe=M;ie<fe.length;ie+=1){var Oe=fe[ie],ut=this._tileClippingMaskIDs[Oe.key]=this.nextStencilID++;V.draw(C,I.TRIANGLES,nt.disabled,new St({func:I.ALWAYS,mask:0},ut,255,I.KEEP,I.KEEP,I.REPLACE),$t.disabled,vr.disabled,Us(Oe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},hs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var E=this.nextStencilID++,M=this.context.gl;return new St({func:M.NOTEQUAL,mask:255},E,255,M.KEEP,M.KEEP,M.REPLACE)},hs.prototype.stencilModeForClipping=function(E){var M=this.context.gl;return new St({func:M.EQUAL,mask:255},this._tileClippingMaskIDs[E.key],0,M.KEEP,M.KEEP,M.REPLACE)},hs.prototype.stencilConfigForOverlap=function(E){var M,C=this.context.gl,I=E.sort(function(ut,Et){return Et.overscaledZ-ut.overscaledZ}),V=I[I.length-1].overscaledZ,ie=I[0].overscaledZ-V+1;if(ie>1){this.currentStencilSource=void 0,this.nextStencilID+ie>256&&this.clearStencil();for(var fe={},Oe=0;Oe<ie;Oe++)fe[Oe+V]=new St({func:C.GEQUAL,mask:255},Oe+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=ie,[fe,I]}return[(M={},M[V]=St.disabled,M),I]},hs.prototype.colorModeForRenderPass=function(){var E=this.context.gl;return this._showOverdrawInspector?new $t([E.CONSTANT_COLOR,E.ONE],new w.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$t.unblended:$t.alphaBlended},hs.prototype.depthModeForSublayer=function(E,M,C){if(!this.opaquePassEnabledForLayer())return nt.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+E)*this.depthEpsilon;return new nt(C||this.context.gl.LEQUAL,M,[I,I])},hs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},hs.prototype.render=function(E,M){var C=this;this.style=E,this.options=M,this.lineAtlas=E.lineAtlas,this.imageManager=E.imageManager,this.glyphManager=E.glyphManager,this.symbolFadeChange=E.placement.symbolFadeChange(w.browser.now()),this.imageManager.beginFrame();var I=this.style._order,V=this.style.sourceCaches;for(var ie in V){var fe=V[ie];fe.used&&fe.prepare(this.context)}var Oe,ut,Et={},Wt={},Xt={};for(var Kt in V){var _r=V[Kt];Et[Kt]=_r.getVisibleCoordinates(),Wt[Kt]=Et[Kt].slice().reverse(),Xt[Kt]=_r.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var dr=0;dr<I.length;dr++)if(this.style._layers[I[dr]].is3D()){this.opaquePassCutoff=dr;break}this.renderPass="offscreen";for(var Pr=0,cr=I;Pr<cr.length;Pr+=1){var Dr=this.style._layers[cr[Pr]];if(Dr.hasOffscreenPass()&&!Dr.isHidden(this.transform.zoom)){var Wr=Wt[Dr.source];(Dr.type==="custom"||Wr.length)&&this.renderLayer(this,V[Dr.source],Dr,Wr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:M.showOverdrawInspector?w.Color.black:w.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=M.showOverdrawInspector,this.depthRangeFor3D=[0,1-(E._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var rn=this.style._layers[I[this.currentLayer]],xn=V[rn.source],dn=Et[rn.source];this._renderTileClippingMasks(rn,dn),this.renderLayer(this,xn,rn,dn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var An=this.style._layers[I[this.currentLayer]],Vn=V[An.source],ui=(An.type==="symbol"?Xt:Wt)[An.source];this._renderTileClippingMasks(An,Et[An.source]),this.renderLayer(this,Vn,An,ui)}this.options.showTileBoundaries&&(w.values(this.style._layers).forEach(function(li){li.source&&!li.isHidden(C.transform.zoom)&&(li.source!==(ut&&ut.id)&&(ut=C.style.sourceCaches[li.source]),(!Oe||Oe.getSource().maxzoom<ut.getSource().maxzoom)&&(Oe=ut))}),Oe&&kf.debug(this,Oe,Oe.getVisibleCoordinates())),this.options.showPadding&&function(li){var Ri=li.transform.padding;gp(li,li.transform.height-(Ri.top||0),3,Nd),gp(li,Ri.bottom||0,3,Is),zd(li,Ri.left||0,3,Ph),zd(li,li.transform.width-(Ri.right||0),3,vp);var ea=li.transform.centerPoint;(function(ua,ra,uo,Li){kh(ua,ra-1,uo-10,2,20,Li),kh(ua,ra-10,uo-1,20,2,Li)})(li,ea.x,li.transform.height-ea.y,Qp)}(this),this.context.setDefault()},hs.prototype.renderLayer=function(E,M,C,I){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||I.length)&&(this.id=C.id,this.gpuTimingStart(C),kf[C.type](E,M,C,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},hs.prototype.gpuTimingStart=function(E){if(this.options.gpuTiming){var M=this.context.extTimerQuery,C=this.gpuTimers[E.id];C||(C=this.gpuTimers[E.id]={calls:0,cpuTime:0,query:M.createQueryEXT()}),C.calls++,M.beginQueryEXT(M.TIME_ELAPSED_EXT,C.query)}},hs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var E=this.context.extTimerQuery;E.endQueryEXT(E.TIME_ELAPSED_EXT)}},hs.prototype.collectGpuTimers=function(){var E=this.gpuTimers;return this.gpuTimers={},E},hs.prototype.queryGpuTimers=function(E){var M={};for(var C in E){var I=E[C],V=this.context.extTimerQuery,ie=V.getQueryObjectEXT(I.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(I.query),M[C]=ie}return M},hs.prototype.translatePosMatrix=function(E,M,C,I,V){if(!C[0]&&!C[1])return E;var ie=V?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(ie){var fe=Math.sin(ie),Oe=Math.cos(ie);C=[C[0]*Oe-C[1]*fe,C[0]*fe+C[1]*Oe]}var ut=[V?C[0]:On(M,C[0],this.transform.zoom),V?C[1]:On(M,C[1],this.transform.zoom),0],Et=new Float32Array(16);return w.translate(Et,E,ut),Et},hs.prototype.saveTileTexture=function(E){var M=this._tileTextures[E.size[0]];M?M.push(E):this._tileTextures[E.size[0]]=[E]},hs.prototype.getTileTexture=function(E){var M=this._tileTextures[E];return M&&M.length>0?M.pop():null},hs.prototype.isPatternMissing=function(E){if(!E)return!1;if(!E.from||!E.to)return!0;var M=this.imageManager.getPattern(E.from.toString()),C=this.imageManager.getPattern(E.to.toString());return!M||!C},hs.prototype.useProgram=function(E,M){this.cache=this.cache||{};var C=""+E+(M?M.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[C]||(this.cache[C]=new ss(this.context,E,Ld[E],M,$s[E],this._showOverdrawInspector)),this.cache[C]},hs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},hs.prototype.setBaseState=function(){var E=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(E.FUNC_ADD)},hs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=w.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new w.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},hs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var mp=function(E,M){this.points=E,this.planes=M};mp.fromInvProjectionMatrix=function(E,M,C){var I=Math.pow(2,C),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(fe){return w.transformMat4([],fe,E)}).map(function(fe){return w.scale$1([],fe,1/fe[3]/M*I)}),ie=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(fe){var Oe=w.sub([],V[fe[0]],V[fe[1]]),ut=w.sub([],V[fe[2]],V[fe[1]]),Et=w.normalize([],w.cross([],Oe,ut)),Wt=-w.dot(Et,V[fe[1]]);return Et.concat(Wt)});return new mp(V,ie)};var rc=function(E,M){this.min=E,this.max=M,this.center=w.scale$2([],w.add([],this.min,this.max),.5)};rc.prototype.quadrant=function(E){for(var M=[E%2==0,E<2],C=w.clone$2(this.min),I=w.clone$2(this.max),V=0;V<M.length;V++)C[V]=M[V]?this.min[V]:this.center[V],I[V]=M[V]?this.center[V]:this.max[V];return I[2]=this.max[2],new rc(C,I)},rc.prototype.distanceX=function(E){return Math.max(Math.min(this.max[0],E[0]),this.min[0])-E[0]},rc.prototype.distanceY=function(E){return Math.max(Math.min(this.max[1],E[1]),this.min[1])-E[1]},rc.prototype.intersects=function(E){for(var M=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],C=!0,I=0;I<E.planes.length;I++){for(var V=E.planes[I],ie=0,fe=0;fe<M.length;fe++)ie+=w.dot$1(V,M[fe])>=0;if(ie===0)return 0;ie!==M.length&&(C=!1)}if(C)return 2;for(var Oe=0;Oe<3;Oe++){for(var ut=Number.MAX_VALUE,Et=-Number.MAX_VALUE,Wt=0;Wt<E.points.length;Wt++){var Xt=E.points[Wt][Oe]-this.min[Oe];ut=Math.min(ut,Xt),Et=Math.max(Et,Xt)}if(Et<0||ut>this.max[Oe]-this.min[Oe])return 0}return 1};var vc=function(E,M,C,I){if(E===void 0&&(E=0),M===void 0&&(M=0),C===void 0&&(C=0),I===void 0&&(I=0),isNaN(E)||E<0||isNaN(M)||M<0||isNaN(C)||C<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=E,this.bottom=M,this.left=C,this.right=I};vc.prototype.interpolate=function(E,M,C){return M.top!=null&&E.top!=null&&(this.top=w.number(E.top,M.top,C)),M.bottom!=null&&E.bottom!=null&&(this.bottom=w.number(E.bottom,M.bottom,C)),M.left!=null&&E.left!=null&&(this.left=w.number(E.left,M.left,C)),M.right!=null&&E.right!=null&&(this.right=w.number(E.right,M.right,C)),this},vc.prototype.getCenter=function(E,M){var C=w.clamp((this.left+E-this.right)/2,0,E),I=w.clamp((this.top+M-this.bottom)/2,0,M);return new w.Point(C,I)},vc.prototype.equals=function(E){return this.top===E.top&&this.bottom===E.bottom&&this.left===E.left&&this.right===E.right},vc.prototype.clone=function(){return new vc(this.top,this.bottom,this.left,this.right)},vc.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var so=function(E,M,C,I,V){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=V===void 0||V,this._minZoom=E||0,this._maxZoom=M||22,this._minPitch=C==null?0:C,this._maxPitch=I==null?60:I,this.setMaxBounds(),this.width=0,this.height=0,this._center=new w.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new vc,this._posMatrixCache={},this._alignedPosMatrixCache={}},ps={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};so.prototype.clone=function(){var E=new so(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return E.tileSize=this.tileSize,E.latRange=this.latRange,E.width=this.width,E.height=this.height,E._center=this._center,E.zoom=this.zoom,E.angle=this.angle,E._fov=this._fov,E._pitch=this._pitch,E._unmodified=this._unmodified,E._edgeInsets=this._edgeInsets.clone(),E._calcMatrices(),E},ps.minZoom.get=function(){return this._minZoom},ps.minZoom.set=function(E){this._minZoom!==E&&(this._minZoom=E,this.zoom=Math.max(this.zoom,E))},ps.maxZoom.get=function(){return this._maxZoom},ps.maxZoom.set=function(E){this._maxZoom!==E&&(this._maxZoom=E,this.zoom=Math.min(this.zoom,E))},ps.minPitch.get=function(){return this._minPitch},ps.minPitch.set=function(E){this._minPitch!==E&&(this._minPitch=E,this.pitch=Math.max(this.pitch,E))},ps.maxPitch.get=function(){return this._maxPitch},ps.maxPitch.set=function(E){this._maxPitch!==E&&(this._maxPitch=E,this.pitch=Math.min(this.pitch,E))},ps.renderWorldCopies.get=function(){return this._renderWorldCopies},ps.renderWorldCopies.set=function(E){E===void 0?E=!0:E===null&&(E=!1),this._renderWorldCopies=E},ps.worldSize.get=function(){return this.tileSize*this.scale},ps.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ps.size.get=function(){return new w.Point(this.width,this.height)},ps.bearing.get=function(){return-this.angle/Math.PI*180},ps.bearing.set=function(E){var M=-w.wrap(E,-180,180)*Math.PI/180;this.angle!==M&&(this._unmodified=!1,this.angle=M,this._calcMatrices(),this.rotationMatrix=w.create$2(),w.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ps.pitch.get=function(){return this._pitch/Math.PI*180},ps.pitch.set=function(E){var M=w.clamp(E,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==M&&(this._unmodified=!1,this._pitch=M,this._calcMatrices())},ps.fov.get=function(){return this._fov/Math.PI*180},ps.fov.set=function(E){E=Math.max(.01,Math.min(60,E)),this._fov!==E&&(this._unmodified=!1,this._fov=E/180*Math.PI,this._calcMatrices())},ps.zoom.get=function(){return this._zoom},ps.zoom.set=function(E){var M=Math.min(Math.max(E,this.minZoom),this.maxZoom);this._zoom!==M&&(this._unmodified=!1,this._zoom=M,this.scale=this.zoomScale(M),this.tileZoom=Math.floor(M),this.zoomFraction=M-this.tileZoom,this._constrain(),this._calcMatrices())},ps.center.get=function(){return this._center},ps.center.set=function(E){E.lat===this._center.lat&&E.lng===this._center.lng||(this._unmodified=!1,this._center=E,this._constrain(),this._calcMatrices())},ps.padding.get=function(){return this._edgeInsets.toJSON()},ps.padding.set=function(E){this._edgeInsets.equals(E)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,E,1),this._calcMatrices())},ps.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},so.prototype.isPaddingEqual=function(E){return this._edgeInsets.equals(E)},so.prototype.interpolatePadding=function(E,M,C){this._unmodified=!1,this._edgeInsets.interpolate(E,M,C),this._constrain(),this._calcMatrices()},so.prototype.coveringZoomLevel=function(E){var M=(E.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/E.tileSize));return Math.max(0,M)},so.prototype.getVisibleUnwrappedCoordinates=function(E){var M=[new w.UnwrappedTileID(0,E)];if(this._renderWorldCopies)for(var C=this.pointCoordinate(new w.Point(0,0)),I=this.pointCoordinate(new w.Point(this.width,0)),V=this.pointCoordinate(new w.Point(this.width,this.height)),ie=this.pointCoordinate(new w.Point(0,this.height)),fe=Math.floor(Math.min(C.x,I.x,V.x,ie.x)),Oe=Math.floor(Math.max(C.x,I.x,V.x,ie.x)),ut=fe-1;ut<=Oe+1;ut++)ut!==0&&M.push(new w.UnwrappedTileID(ut,E));return M},so.prototype.coveringTiles=function(E){var M=this.coveringZoomLevel(E),C=M;if(E.minzoom!==void 0&&M<E.minzoom)return[];E.maxzoom!==void 0&&M>E.maxzoom&&(M=E.maxzoom);var I=w.MercatorCoordinate.fromLngLat(this.center),V=Math.pow(2,M),ie=[V*I.x,V*I.y,0],fe=mp.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,M),Oe=E.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Oe=M);var ut=function(li){return{aabb:new rc([li*V,0,0],[(li+1)*V,V,0]),zoom:0,x:0,y:0,wrap:li,fullyVisible:!1}},Et=[],Wt=[],Xt=M,Kt=E.reparseOverscaled?C:M;if(this._renderWorldCopies)for(var _r=1;_r<=3;_r++)Et.push(ut(-_r)),Et.push(ut(_r));for(Et.push(ut(0));Et.length>0;){var dr=Et.pop(),Pr=dr.x,cr=dr.y,Dr=dr.fullyVisible;if(!Dr){var Wr=dr.aabb.intersects(fe);if(Wr===0)continue;Dr=Wr===2}var rn=dr.aabb.distanceX(ie),xn=dr.aabb.distanceY(ie),dn=Math.max(Math.abs(rn),Math.abs(xn));if(dr.zoom===Xt||dn>3+(1<<Xt-dr.zoom)-2&&dr.zoom>=Oe)Wt.push({tileID:new w.OverscaledTileID(dr.zoom===Xt?Kt:dr.zoom,dr.wrap,dr.zoom,Pr,cr),distanceSq:w.sqrLen([ie[0]-.5-Pr,ie[1]-.5-cr])});else for(var An=0;An<4;An++){var Vn=(Pr<<1)+An%2,ui=(cr<<1)+(An>>1);Et.push({aabb:dr.aabb.quadrant(An),zoom:dr.zoom+1,x:Vn,y:ui,wrap:dr.wrap,fullyVisible:Dr})}}return Wt.sort(function(li,Ri){return li.distanceSq-Ri.distanceSq}).map(function(li){return li.tileID})},so.prototype.resize=function(E,M){this.width=E,this.height=M,this.pixelsToGLUnits=[2/E,-2/M],this._constrain(),this._calcMatrices()},ps.unmodified.get=function(){return this._unmodified},so.prototype.zoomScale=function(E){return Math.pow(2,E)},so.prototype.scaleZoom=function(E){return Math.log(E)/Math.LN2},so.prototype.project=function(E){var M=w.clamp(E.lat,-this.maxValidLatitude,this.maxValidLatitude);return new w.Point(w.mercatorXfromLng(E.lng)*this.worldSize,w.mercatorYfromLat(M)*this.worldSize)},so.prototype.unproject=function(E){return new w.MercatorCoordinate(E.x/this.worldSize,E.y/this.worldSize).toLngLat()},ps.point.get=function(){return this.project(this.center)},so.prototype.setLocationAtPoint=function(E,M){var C=this.pointCoordinate(M),I=this.pointCoordinate(this.centerPoint),V=this.locationCoordinate(E),ie=new w.MercatorCoordinate(V.x-(C.x-I.x),V.y-(C.y-I.y));this.center=this.coordinateLocation(ie),this._renderWorldCopies&&(this.center=this.center.wrap())},so.prototype.locationPoint=function(E){return this.coordinatePoint(this.locationCoordinate(E))},so.prototype.pointLocation=function(E){return this.coordinateLocation(this.pointCoordinate(E))},so.prototype.locationCoordinate=function(E){return w.MercatorCoordinate.fromLngLat(E)},so.prototype.coordinateLocation=function(E){return E.toLngLat()},so.prototype.pointCoordinate=function(E){var M=[E.x,E.y,0,1],C=[E.x,E.y,1,1];w.transformMat4(M,M,this.pixelMatrixInverse),w.transformMat4(C,C,this.pixelMatrixInverse);var I=M[3],V=C[3],ie=M[1]/I,fe=C[1]/V,Oe=M[2]/I,ut=C[2]/V,Et=Oe===ut?0:(0-Oe)/(ut-Oe);return new w.MercatorCoordinate(w.number(M[0]/I,C[0]/V,Et)/this.worldSize,w.number(ie,fe,Et)/this.worldSize)},so.prototype.coordinatePoint=function(E){var M=[E.x*this.worldSize,E.y*this.worldSize,0,1];return w.transformMat4(M,M,this.pixelMatrix),new w.Point(M[0]/M[3],M[1]/M[3])},so.prototype.getBounds=function(){return new w.LngLatBounds().extend(this.pointLocation(new w.Point(0,0))).extend(this.pointLocation(new w.Point(this.width,0))).extend(this.pointLocation(new w.Point(this.width,this.height))).extend(this.pointLocation(new w.Point(0,this.height)))},so.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new w.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},so.prototype.setMaxBounds=function(E){E?(this.lngRange=[E.getWest(),E.getEast()],this.latRange=[E.getSouth(),E.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},so.prototype.calculatePosMatrix=function(E,M){M===void 0&&(M=!1);var C=E.key,I=M?this._alignedPosMatrixCache:this._posMatrixCache;if(I[C])return I[C];var V=E.canonical,ie=this.worldSize/this.zoomScale(V.z),fe=V.x+Math.pow(2,V.z)*E.wrap,Oe=w.identity(new Float64Array(16));return w.translate(Oe,Oe,[fe*ie,V.y*ie,0]),w.scale(Oe,Oe,[ie/w.EXTENT,ie/w.EXTENT,1]),w.multiply(Oe,M?this.alignedProjMatrix:this.projMatrix,Oe),I[C]=new Float32Array(Oe),I[C]},so.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},so.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var E,M,C,I,V=-90,ie=90,fe=-180,Oe=180,ut=this.size,Et=this._unmodified;if(this.latRange){var Wt=this.latRange;V=w.mercatorYfromLat(Wt[1])*this.worldSize,E=(ie=w.mercatorYfromLat(Wt[0])*this.worldSize)-V<ut.y?ut.y/(ie-V):0}if(this.lngRange){var Xt=this.lngRange;fe=w.mercatorXfromLng(Xt[0])*this.worldSize,M=(Oe=w.mercatorXfromLng(Xt[1])*this.worldSize)-fe<ut.x?ut.x/(Oe-fe):0}var Kt=this.point,_r=Math.max(M||0,E||0);if(_r)return this.center=this.unproject(new w.Point(M?(Oe+fe)/2:Kt.x,E?(ie+V)/2:Kt.y)),this.zoom+=this.scaleZoom(_r),this._unmodified=Et,void(this._constraining=!1);if(this.latRange){var dr=Kt.y,Pr=ut.y/2;dr-Pr<V&&(I=V+Pr),dr+Pr>ie&&(I=ie-Pr)}if(this.lngRange){var cr=Kt.x,Dr=ut.x/2;cr-Dr<fe&&(C=fe+Dr),cr+Dr>Oe&&(C=Oe-Dr)}C===void 0&&I===void 0||(this.center=this.unproject(new w.Point(C!==void 0?C:Kt.x,I!==void 0?I:Kt.y))),this._unmodified=Et,this._constraining=!1}},so.prototype._calcMatrices=function(){if(this.height){var E=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var M=Math.PI/2+this._pitch,C=this._fov*(.5+E.y/this.height),I=Math.sin(C)*this.cameraToCenterDistance/Math.sin(w.clamp(Math.PI-M-C,.01,Math.PI-.01)),V=this.point,ie=V.x,fe=V.y,Oe=1.01*(Math.cos(Math.PI/2-this._pitch)*I+this.cameraToCenterDistance),ut=this.height/50,Et=new Float64Array(16);w.perspective(Et,this._fov,this.width/this.height,ut,Oe),Et[8]=2*-E.x/this.width,Et[9]=2*E.y/this.height,w.scale(Et,Et,[1,-1,1]),w.translate(Et,Et,[0,0,-this.cameraToCenterDistance]),w.rotateX(Et,Et,this._pitch),w.rotateZ(Et,Et,this.angle),w.translate(Et,Et,[-ie,-fe,0]),this.mercatorMatrix=w.scale([],Et,[this.worldSize,this.worldSize,this.worldSize]),w.scale(Et,Et,[1,1,w.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Et,this.invProjMatrix=w.invert([],this.projMatrix);var Wt=this.width%2/2,Xt=this.height%2/2,Kt=Math.cos(this.angle),_r=Math.sin(this.angle),dr=ie-Math.round(ie)+Kt*Wt+_r*Xt,Pr=fe-Math.round(fe)+Kt*Xt+_r*Wt,cr=new Float64Array(Et);if(w.translate(cr,cr,[dr>.5?dr-1:dr,Pr>.5?Pr-1:Pr,0]),this.alignedProjMatrix=cr,Et=w.create(),w.scale(Et,Et,[this.width/2,-this.height/2,1]),w.translate(Et,Et,[1,-1,0]),this.labelPlaneMatrix=Et,Et=w.create(),w.scale(Et,Et,[1,-1,1]),w.translate(Et,Et,[-1,-1,0]),w.scale(Et,Et,[2/this.width,2/this.height,1]),this.glCoordMatrix=Et,this.pixelMatrix=w.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Et=w.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Et,this._posMatrixCache={},this._alignedPosMatrixCache={}}},so.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var E=this.pointCoordinate(new w.Point(0,0)),M=[E.x*this.worldSize,E.y*this.worldSize,0,1];return w.transformMat4(M,M,this.pixelMatrix)[3]/this.cameraToCenterDistance},so.prototype.getCameraPoint=function(){var E=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new w.Point(0,E))},so.prototype.getCameraQueryGeometry=function(E){var M=this.getCameraPoint();if(E.length===1)return[E[0],M];for(var C=M.x,I=M.y,V=M.x,ie=M.y,fe=0,Oe=E;fe<Oe.length;fe+=1){var ut=Oe[fe];C=Math.min(C,ut.x),I=Math.min(I,ut.y),V=Math.max(V,ut.x),ie=Math.max(ie,ut.y)}return[new w.Point(C,I),new w.Point(V,I),new w.Point(V,ie),new w.Point(C,ie),new w.Point(C,I)]},Object.defineProperties(so.prototype,ps);var eo=function(E){var M,C,I,V;this._hashName=E&&encodeURIComponent(E),w.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(M=this._updateHashUnthrottled.bind(this),C=!1,I=null,V=function(){I=null,C&&(M(),I=setTimeout(V,300),C=!1)},function(){return C=!0,I||V(),I})};eo.prototype.addTo=function(E){return this._map=E,w.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},eo.prototype.remove=function(){return w.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},eo.prototype.getHashString=function(E){var M=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,I=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,I),ie=Math.round(M.lng*V)/V,fe=Math.round(M.lat*V)/V,Oe=this._map.getBearing(),ut=this._map.getPitch(),Et="";if(Et+=E?"/"+ie+"/"+fe+"/"+C:C+"/"+fe+"/"+ie,(Oe||ut)&&(Et+="/"+Math.round(10*Oe)/10),ut&&(Et+="/"+Math.round(ut)),this._hashName){var Wt=this._hashName,Xt=!1,Kt=w.window.location.hash.slice(1).split("&").map(function(_r){var dr=_r.split("=")[0];return dr===Wt?(Xt=!0,dr+"="+Et):_r}).filter(function(_r){return _r});return Xt||Kt.push(Wt+"="+Et),"#"+Kt.join("&")}return"#"+Et},eo.prototype._getCurrentHash=function(){var E,M=this,C=w.window.location.hash.replace("#","");return this._hashName?(C.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===M._hashName&&(E=I)}),(E&&E[1]||"").split("/")):C.split("/")},eo.prototype._onHashChange=function(){var E=this._getCurrentHash();if(E.length>=3&&!E.some(function(C){return isNaN(C)})){var M=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(E[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+E[2],+E[1]],zoom:+E[0],bearing:M,pitch:+(E[4]||0)}),!0}return!1},eo.prototype._updateHashUnthrottled=function(){var E=w.window.location.href.replace(/(#.+)?$/,this.getHashString());try{w.window.history.replaceState(w.window.history.state,null,E)}catch(M){}};var Jp={linearity:.3,easing:w.bezier(0,0,.3,1)},uh=w.extend({deceleration:2500,maxSpeed:1400},Jp),yp=w.extend({deceleration:20,maxSpeed:1400},Jp),Ud=w.extend({deceleration:1e3,maxSpeed:360},Jp),wa=w.extend({deceleration:1e3,maxSpeed:90},Jp),lh=function(E){this._map=E,this.clear()};function Df(E,M){(!E.duration||E.duration<M.duration)&&(E.duration=M.duration,E.easing=M.easing)}function su(E,M,C){var I=C.maxSpeed,V=C.linearity,ie=C.deceleration,fe=w.clamp(E*V/(M/1e3),-I,I),Oe=Math.abs(fe)/(ie*V);return{easing:C.easing,duration:1e3*Oe,amount:fe*(Oe/2)}}lh.prototype.clear=function(){this._inertiaBuffer=[]},lh.prototype.record=function(E){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.browser.now(),settings:E})},lh.prototype._drainInertiaBuffer=function(){for(var E=this._inertiaBuffer,M=w.browser.now();E.length>0&&M-E[0].time>160;)E.shift()},lh.prototype._onMoveEnd=function(E){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var M={zoom:0,bearing:0,pitch:0,pan:new w.Point(0,0),pinchAround:void 0,around:void 0},C=0,I=this._inertiaBuffer;C<I.length;C+=1){var V=I[C].settings;M.zoom+=V.zoomDelta||0,M.bearing+=V.bearingDelta||0,M.pitch+=V.pitchDelta||0,V.panDelta&&M.pan._add(V.panDelta),V.around&&(M.around=V.around),V.pinchAround&&(M.pinchAround=V.pinchAround)}var ie=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,fe={};if(M.pan.mag()){var Oe=su(M.pan.mag(),ie,w.extend({},uh,E||{}));fe.offset=M.pan.mult(Oe.amount/M.pan.mag()),fe.center=this._map.transform.center,Df(fe,Oe)}if(M.zoom){var ut=su(M.zoom,ie,yp);fe.zoom=this._map.transform.zoom+ut.amount,Df(fe,ut)}if(M.bearing){var Et=su(M.bearing,ie,Ud);fe.bearing=this._map.transform.bearing+w.clamp(Et.amount,-179,179),Df(fe,Et)}if(M.pitch){var Wt=su(M.pitch,ie,wa);fe.pitch=this._map.transform.pitch+Wt.amount,Df(fe,Wt)}if(fe.zoom||fe.bearing){var Xt=M.pinchAround===void 0?M.around:M.pinchAround;fe.around=Xt?this._map.unproject(Xt):this._map.getCenter()}return this.clear(),w.extend(fe,{noMoveStart:!0})}};var us=function(E){function M(I,V,ie,fe){fe===void 0&&(fe={});var Oe=j.mousePos(V.getCanvasContainer(),ie),ut=V.unproject(Oe);E.call(this,I,w.extend({point:Oe,lngLat:ut,originalEvent:ie},fe)),this._defaultPrevented=!1,this.target=V}E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M;var C={defaultPrevented:{configurable:!0}};return M.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(M.prototype,C),M}(w.Event),ch=function(E){function M(I,V,ie){var fe=I==="touchend"?ie.changedTouches:ie.touches,Oe=j.touchPos(V.getCanvasContainer(),fe),ut=Oe.map(function(Xt){return V.unproject(Xt)}),Et=Oe.reduce(function(Xt,Kt,_r,dr){return Xt.add(Kt.div(dr.length))},new w.Point(0,0)),Wt=V.unproject(Et);E.call(this,I,{points:Oe,point:Et,lngLats:ut,lngLat:Wt,originalEvent:ie}),this._defaultPrevented=!1}E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M;var C={defaultPrevented:{configurable:!0}};return M.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(M.prototype,C),M}(w.Event),Zd=function(E){function M(I,V,ie){E.call(this,I,{originalEvent:ie}),this._defaultPrevented=!1}E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M;var C={defaultPrevented:{configurable:!0}};return M.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(M.prototype,C),M}(w.Event),bs=function(E,M){this._map=E,this._clickTolerance=M.clickTolerance};bs.prototype.reset=function(){delete this._mousedownPos},bs.prototype.wheel=function(E){return this._firePreventable(new Zd(E.type,this._map,E))},bs.prototype.mousedown=function(E,M){return this._mousedownPos=M,this._firePreventable(new us(E.type,this._map,E))},bs.prototype.mouseup=function(E){this._map.fire(new us(E.type,this._map,E))},bs.prototype.click=function(E,M){this._mousedownPos&&this._mousedownPos.dist(M)>=this._clickTolerance||this._map.fire(new us(E.type,this._map,E))},bs.prototype.dblclick=function(E){return this._firePreventable(new us(E.type,this._map,E))},bs.prototype.mouseover=function(E){this._map.fire(new us(E.type,this._map,E))},bs.prototype.mouseout=function(E){this._map.fire(new us(E.type,this._map,E))},bs.prototype.touchstart=function(E){return this._firePreventable(new ch(E.type,this._map,E))},bs.prototype.touchmove=function(E){this._map.fire(new ch(E.type,this._map,E))},bs.prototype.touchend=function(E){this._map.fire(new ch(E.type,this._map,E))},bs.prototype.touchcancel=function(E){this._map.fire(new ch(E.type,this._map,E))},bs.prototype._firePreventable=function(E){if(this._map.fire(E),E.defaultPrevented)return{}},bs.prototype.isEnabled=function(){return!0},bs.prototype.isActive=function(){return!1},bs.prototype.enable=function(){},bs.prototype.disable=function(){};var Ni=function(E){this._map=E};Ni.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ni.prototype.mousemove=function(E){this._map.fire(new us(E.type,this._map,E))},Ni.prototype.mousedown=function(){this._delayContextMenu=!0},Ni.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new us("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ni.prototype.contextmenu=function(E){this._delayContextMenu?this._contextMenuEvent=E:this._map.fire(new us(E.type,this._map,E)),this._map.listens("contextmenu")&&E.preventDefault()},Ni.prototype.isEnabled=function(){return!0},Ni.prototype.isActive=function(){return!1},Ni.prototype.enable=function(){},Ni.prototype.disable=function(){};var ol=function(E,M){this._map=E,this._el=E.getCanvasContainer(),this._container=E.getContainer(),this._clickTolerance=M.clickTolerance||1};function nc(E,M){for(var C={},I=0;I<E.length;I++)C[E[I].identifier]=M[I];return C}ol.prototype.isEnabled=function(){return!!this._enabled},ol.prototype.isActive=function(){return!!this._active},ol.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ol.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ol.prototype.mousedown=function(E,M){this.isEnabled()&&E.shiftKey&&E.button===0&&(j.disableDrag(),this._startPos=this._lastPos=M,this._active=!0)},ol.prototype.mousemoveWindow=function(E,M){if(this._active){var C=M;if(!(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=C,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",E));var V=Math.min(I.x,C.x),ie=Math.max(I.x,C.x),fe=Math.min(I.y,C.y),Oe=Math.max(I.y,C.y);j.setTransform(this._box,"translate("+V+"px,"+fe+"px)"),this._box.style.width=ie-V+"px",this._box.style.height=Oe-fe+"px"}}},ol.prototype.mouseupWindow=function(E,M){var C=this;if(this._active&&E.button===0){var I=this._startPos,V=M;if(this.reset(),j.suppressClick(),I.x!==V.x||I.y!==V.y)return this._map.fire(new w.Event("boxzoomend",{originalEvent:E})),{cameraAnimation:function(ie){return ie.fitScreenCoordinates(I,V,C._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",E)}},ol.prototype.keydown=function(E){this._active&&E.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",E))},ol.prototype.blur=function(){this.reset()},ol.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},ol.prototype._fireEvent=function(E,M){return this._map.fire(new w.Event(E,{originalEvent:M}))};var fh=function(E){this.reset(),this.numTouches=E.numTouches};fh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fh.prototype.touchstart=function(E,M,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=E.timeStamp),C.length===this.numTouches&&(this.centroid=function(I){for(var V=new w.Point(0,0),ie=0,fe=I;ie<fe.length;ie+=1)V._add(fe[ie]);return V.div(I.length)}(M),this.touches=nc(C,M)))},fh.prototype.touchmove=function(E,M,C){if(!this.aborted&&this.centroid){var I=nc(C,M);for(var V in this.touches){var ie=I[V];(!ie||ie.dist(this.touches[V])>30)&&(this.aborted=!0)}}},fh.prototype.touchend=function(E,M,C){if((!this.centroid||E.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var _l=function(E){this.singleTap=new fh(E),this.numTaps=E.numTaps,this.reset()};_l.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},_l.prototype.touchstart=function(E,M,C){this.singleTap.touchstart(E,M,C)},_l.prototype.touchmove=function(E,M,C){this.singleTap.touchmove(E,M,C)},_l.prototype.touchend=function(E,M,C){var I=this.singleTap.touchend(E,M,C);if(I){var V=E.timeStamp-this.lastTime<500,ie=!this.lastTap||this.lastTap.dist(I)<30;if(V&&ie||this.reset(),this.count++,this.lastTime=E.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var Ho=function(){this._zoomIn=new _l({numTouches:1,numTaps:2}),this._zoomOut=new _l({numTouches:2,numTaps:1}),this.reset()};Ho.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ho.prototype.touchstart=function(E,M,C){this._zoomIn.touchstart(E,M,C),this._zoomOut.touchstart(E,M,C)},Ho.prototype.touchmove=function(E,M,C){this._zoomIn.touchmove(E,M,C),this._zoomOut.touchmove(E,M,C)},Ho.prototype.touchend=function(E,M,C){var I=this,V=this._zoomIn.touchend(E,M,C),ie=this._zoomOut.touchend(E,M,C);return V?(this._active=!0,E.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(fe){return fe.easeTo({duration:300,zoom:fe.getZoom()+1,around:fe.unproject(V)},{originalEvent:E})}}):ie?(this._active=!0,E.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(fe){return fe.easeTo({duration:300,zoom:fe.getZoom()-1,around:fe.unproject(ie)},{originalEvent:E})}}):void 0},Ho.prototype.touchcancel=function(){this.reset()},Ho.prototype.enable=function(){this._enabled=!0},Ho.prototype.disable=function(){this._enabled=!1,this.reset()},Ho.prototype.isEnabled=function(){return this._enabled},Ho.prototype.isActive=function(){return this._active};var ed={0:1,2:2},Qn=function(E){this.reset(),this._clickTolerance=E.clickTolerance||1};Qn.prototype.blur=function(){this.reset()},Qn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Qn.prototype._correctButton=function(E,M){return!1},Qn.prototype._move=function(E,M){return{}},Qn.prototype.mousedown=function(E,M){if(!this._lastPoint){var C=j.mouseButton(E);this._correctButton(E,C)&&(this._lastPoint=M,this._eventButton=C)}},Qn.prototype.mousemoveWindow=function(E,M){var C=this._lastPoint;if(C){if(E.preventDefault(),function(I,V){var ie=ed[V];return I.buttons===void 0||(I.buttons&ie)!==ie}(E,this._eventButton))this.reset();else if(this._moved||!(M.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=M,this._move(C,M)}},Qn.prototype.mouseupWindow=function(E){this._lastPoint&&j.mouseButton(E)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},Qn.prototype.enable=function(){this._enabled=!0},Qn.prototype.disable=function(){this._enabled=!1,this.reset()},Qn.prototype.isEnabled=function(){return this._enabled},Qn.prototype.isActive=function(){return this._active};var Kc=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.mousedown=function(C,I){E.prototype.mousedown.call(this,C,I),this._lastPoint&&(this._active=!0)},M.prototype._correctButton=function(C,I){return I===0&&!C.ctrlKey},M.prototype._move=function(C,I){return{around:I,panDelta:I.sub(C)}},M}(Qn),Dc=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},M.prototype._move=function(C,I){var V=.8*(I.x-C.x);if(V)return this._active=!0,{bearingDelta:V}},M.prototype.contextmenu=function(C){C.preventDefault()},M}(Qn),_p=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},M.prototype._move=function(C,I){var V=-.5*(I.y-C.y);if(V)return this._active=!0,{pitchDelta:V}},M.prototype.contextmenu=function(C){C.preventDefault()},M}(Qn),gc=function(E){this._minTouches=1,this._clickTolerance=E.clickTolerance||1,this.reset()};gc.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new w.Point(0,0)},gc.prototype.touchstart=function(E,M,C){return this._calculateTransform(E,M,C)},gc.prototype.touchmove=function(E,M,C){if(this._active&&!(C.length<this._minTouches))return E.preventDefault(),this._calculateTransform(E,M,C)},gc.prototype.touchend=function(E,M,C){this._calculateTransform(E,M,C),this._active&&C.length<this._minTouches&&this.reset()},gc.prototype.touchcancel=function(){this.reset()},gc.prototype._calculateTransform=function(E,M,C){C.length>0&&(this._active=!0);var I=nc(C,M),V=new w.Point(0,0),ie=new w.Point(0,0),fe=0;for(var Oe in I){var ut=I[Oe],Et=this._touches[Oe];Et&&(V._add(ut),ie._add(ut.sub(Et)),fe++,I[Oe]=ut)}if(this._touches=I,!(fe<this._minTouches)&&ie.mag()){var Wt=ie.div(fe);if(this._sum._add(Wt),!(this._sum.mag()<this._clickTolerance))return{around:V.div(fe),panDelta:Wt}}},gc.prototype.enable=function(){this._enabled=!0},gc.prototype.disable=function(){this._enabled=!1,this.reset()},gc.prototype.isEnabled=function(){return this._enabled},gc.prototype.isActive=function(){return this._active};var sl=function(){this.reset()};function Lh(E,M,C){for(var I=0;I<E.length;I++)if(E[I].identifier===C)return M[I]}function vf(E,M){return Math.log(E/M)/Math.LN2}sl.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},sl.prototype._start=function(E){},sl.prototype._move=function(E,M,C){return{}},sl.prototype.touchstart=function(E,M,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([M[0],M[1]]))},sl.prototype.touchmove=function(E,M,C){if(this._firstTwoTouches){E.preventDefault();var I=this._firstTwoTouches,V=I[1],ie=Lh(C,M,I[0]),fe=Lh(C,M,V);if(ie&&fe){var Oe=this._aroundCenter?null:ie.add(fe).div(2);return this._move([ie,fe],Oe,E)}}},sl.prototype.touchend=function(E,M,C){if(this._firstTwoTouches){var I=this._firstTwoTouches,V=I[1],ie=Lh(C,M,I[0]),fe=Lh(C,M,V);ie&&fe||(this._active&&j.suppressClick(),this.reset())}},sl.prototype.touchcancel=function(){this.reset()},sl.prototype.enable=function(E){this._enabled=!0,this._aroundCenter=!!E&&E.around==="center"},sl.prototype.disable=function(){this._enabled=!1,this.reset()},sl.prototype.isEnabled=function(){return this._enabled},sl.prototype.isActive=function(){return this._active};var Zs=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.reset=function(){E.prototype.reset.call(this),delete this._distance,delete this._startDistance},M.prototype._start=function(C){this._startDistance=this._distance=C[0].dist(C[1])},M.prototype._move=function(C,I){var V=this._distance;if(this._distance=C[0].dist(C[1]),this._active||!(Math.abs(vf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vf(this._distance,V),pinchAround:I}},M}(sl);function Ol(E,M){return 180*E.angleWith(M)/Math.PI}var Vd=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.reset=function(){E.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},M.prototype._start=function(C){this._startVector=this._vector=C[0].sub(C[1]),this._minDiameter=C[0].dist(C[1])},M.prototype._move=function(C,I){var V=this._vector;if(this._vector=C[0].sub(C[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ol(this._vector,V),pinchAround:I}},M.prototype._isBelowThreshold=function(C){this._minDiameter=Math.min(this._minDiameter,C.mag());var I=25/(Math.PI*this._minDiameter)*360,V=Ol(C,this._startVector);return Math.abs(V)<I},M}(sl);function xp(E){return Math.abs(E.y)>Math.abs(E.x)}var Lf=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.reset=function(){E.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},M.prototype._start=function(C){this._lastPoints=C,xp(C[0].sub(C[1]))&&(this._valid=!1)},M.prototype._move=function(C,I,V){var ie=C[0].sub(this._lastPoints[0]),fe=C[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ie,fe,V.timeStamp),this._valid)return this._lastPoints=C,this._active=!0,{pitchDelta:(ie.y+fe.y)/2*-.5}},M.prototype.gestureBeginsVertically=function(C,I,V){if(this._valid!==void 0)return this._valid;var ie=C.mag()>=2,fe=I.mag()>=2;if(ie||fe){if(!ie||!fe)return this._firstMove===void 0&&(this._firstMove=V),V-this._firstMove<100&&void 0;var Oe=C.y>0==I.y>0;return xp(C)&&xp(I)&&Oe}},M}(sl),Ev={panStep:100,bearingStep:15,pitchStep:10},ic=function(){var E=Ev;this._panStep=E.panStep,this._bearingStep=E.bearingStep,this._pitchStep=E.pitchStep,this._rotationDisabled=!1};function ac(E){return E*(2-E)}ic.prototype.blur=function(){this.reset()},ic.prototype.reset=function(){this._active=!1},ic.prototype.keydown=function(E){var M=this;if(!(E.altKey||E.ctrlKey||E.metaKey)){var C=0,I=0,V=0,ie=0,fe=0;switch(E.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:E.shiftKey?I=-1:(E.preventDefault(),ie=-1);break;case 39:E.shiftKey?I=1:(E.preventDefault(),ie=1);break;case 38:E.shiftKey?V=1:(E.preventDefault(),fe=-1);break;case 40:E.shiftKey?V=-1:(E.preventDefault(),fe=1);break;default:return}return this._rotationDisabled&&(I=0,V=0),{cameraAnimation:function(Oe){var ut=Oe.getZoom();Oe.easeTo({duration:300,easeId:"keyboardHandler",easing:ac,zoom:C?Math.round(ut)+C*(E.shiftKey?2:1):ut,bearing:Oe.getBearing()+I*M._bearingStep,pitch:Oe.getPitch()+V*M._pitchStep,offset:[-ie*M._panStep,-fe*M._panStep],center:Oe.getCenter()},{originalEvent:E})}}}},ic.prototype.enable=function(){this._enabled=!0},ic.prototype.disable=function(){this._enabled=!1,this.reset()},ic.prototype.isEnabled=function(){return this._enabled},ic.prototype.isActive=function(){return this._active},ic.prototype.disableRotation=function(){this._rotationDisabled=!0},ic.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ca=function(E,M){this._map=E,this._el=E.getCanvasContainer(),this._handler=M,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,w.bindAll(["_onTimeout"],this)};Ca.prototype.setZoomRate=function(E){this._defaultZoomRate=E},Ca.prototype.setWheelZoomRate=function(E){this._wheelZoomRate=E},Ca.prototype.isEnabled=function(){return!!this._enabled},Ca.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ca.prototype.isZooming=function(){return!!this._zooming},Ca.prototype.enable=function(E){this.isEnabled()||(this._enabled=!0,this._aroundCenter=E&&E.around==="center")},Ca.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ca.prototype.wheel=function(E){if(this.isEnabled()){var M=E.deltaMode===w.window.WheelEvent.DOM_DELTA_LINE?40*E.deltaY:E.deltaY,C=w.browser.now(),I=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,M!==0&&M%4.000244140625==0?this._type="wheel":M!==0&&Math.abs(M)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=M,this._timeout=setTimeout(this._onTimeout,40,E)):this._type||(this._type=Math.abs(I*M)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,M+=this._lastValue)),E.shiftKey&&M&&(M/=4),this._type&&(this._lastWheelEvent=E,this._delta-=M,this._active||this._start(E)),E.preventDefault()}},Ca.prototype._onTimeout=function(E){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(E)},Ca.prototype._start=function(E){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var M=j.mousePos(this._el,E);this._around=w.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(M)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ca.prototype.renderFrame=function(){var E=this;if(this._frameId&&(this._frameId=null,this.isActive())){var M=this._map.transform;if(this._delta!==0){var C=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);var V=typeof this._targetZoom=="number"?M.zoomScale(this._targetZoom):M.scale;this._targetZoom=Math.min(M.maxZoom,Math.max(M.minZoom,M.scaleZoom(V*I))),this._type==="wheel"&&(this._startZoom=M.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ie,fe=typeof this._targetZoom=="number"?this._targetZoom:M.zoom,Oe=this._startZoom,ut=this._easing,Et=!1;if(this._type==="wheel"&&Oe&&ut){var Wt=Math.min((w.browser.now()-this._lastWheelEventTime)/200,1),Xt=ut(Wt);ie=w.number(Oe,fe,Xt),Wt<1?this._frameId||(this._frameId=!0):Et=!0}else ie=fe,Et=!0;return this._active=!0,Et&&(this._active=!1,this._finishTimeout=setTimeout(function(){E._zooming=!1,E._handler._triggerRenderFrame(),delete E._targetZoom,delete E._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Et,zoomDelta:ie-M.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ca.prototype._smoothOutEasing=function(E){var M=w.ease;if(this._prevEase){var C=this._prevEase,I=(w.browser.now()-C.start)/C.duration,V=C.easing(I+.01)-C.easing(I),ie=.27/Math.sqrt(V*V+1e-4)*.01,fe=Math.sqrt(.0729-ie*ie);M=w.bezier(ie,fe,.25,1)}return this._prevEase={start:w.browser.now(),duration:E,easing:M},M},Ca.prototype.blur=function(){this.reset()},Ca.prototype.reset=function(){this._active=!1};var Os=function(E,M){this._clickZoom=E,this._tapZoom=M};Os.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Os.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Os.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Os.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var zl=function(){this.reset()};zl.prototype.reset=function(){this._active=!1},zl.prototype.blur=function(){this.reset()},zl.prototype.dblclick=function(E,M){return E.preventDefault(),{cameraAnimation:function(C){C.easeTo({duration:300,zoom:C.getZoom()+(E.shiftKey?-1:1),around:C.unproject(M)},{originalEvent:E})}}},zl.prototype.enable=function(){this._enabled=!0},zl.prototype.disable=function(){this._enabled=!1,this.reset()},zl.prototype.isEnabled=function(){return this._enabled},zl.prototype.isActive=function(){return this._active};var Gu=function(){this._tap=new _l({numTouches:1,numTaps:1}),this.reset()};Gu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Gu.prototype.touchstart=function(E,M,C){this._swipePoint||(this._tapTime&&E.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=M[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(E,M,C))},Gu.prototype.touchmove=function(E,M,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;var I=M[0],V=I.y-this._swipePoint.y;return this._swipePoint=I,E.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(E,M,C)},Gu.prototype.touchend=function(E,M,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(E,M,C)&&(this._tapTime=E.timeStamp)},Gu.prototype.touchcancel=function(){this.reset()},Gu.prototype.enable=function(){this._enabled=!0},Gu.prototype.disable=function(){this._enabled=!1,this.reset()},Gu.prototype.isEnabled=function(){return this._enabled},Gu.prototype.isActive=function(){return this._active};var hh=function(E,M,C){this._el=E,this._mousePan=M,this._touchPan=C};hh.prototype.enable=function(E){this._inertiaOptions=E||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Qc=function(E,M,C){this._pitchWithRotate=E.pitchWithRotate,this._mouseRotate=M,this._mousePitch=C};Qc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Qc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Qc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Qc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Nu=function(E,M,C,I){this._el=E,this._touchZoom=M,this._touchRotate=C,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};Nu.prototype.enable=function(E){this._touchZoom.enable(E),this._rotationDisabled||this._touchRotate.enable(E),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Nu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Nu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Nu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Nu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Nu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xl=function(E){return E.zoom||E.drag||E.pitch||E.rotate},gf=function(E){function M(){E.apply(this,arguments)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M}(w.Event);function Ji(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}var wi=function(E,M){this._map=E,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lh(E),this._bearingSnap=M.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(M),w.bindAll(["handleEvent","handleWindowEvent"],this);var C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[w.window.document,"mousemove",{capture:!0}],[w.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[w.window,"blur",void 0]];for(var I=0,V=this._listeners;I<V.length;I+=1){var ie=V[I],fe=ie[0];j.addEventListener(fe,ie[1],fe===w.window.document?this.handleWindowEvent:this.handleEvent,ie[2])}};wi.prototype.destroy=function(){for(var E=0,M=this._listeners;E<M.length;E+=1){var C=M[E],I=C[0];j.removeEventListener(I,C[1],I===w.window.document?this.handleWindowEvent:this.handleEvent,C[2])}},wi.prototype._addDefaultHandlers=function(E){var M=this._map,C=M.getCanvasContainer();this._add("mapEvent",new bs(M,E));var I=M.boxZoom=new ol(M,E);this._add("boxZoom",I);var V=new Ho,ie=new zl;M.doubleClickZoom=new Os(ie,V),this._add("tapZoom",V),this._add("clickZoom",ie);var fe=new Gu;this._add("tapDragZoom",fe);var Oe=M.touchPitch=new Lf;this._add("touchPitch",Oe);var ut=new Dc(E),Et=new _p(E);M.dragRotate=new Qc(E,ut,Et),this._add("mouseRotate",ut,["mousePitch"]),this._add("mousePitch",Et,["mouseRotate"]);var Wt=new Kc(E),Xt=new gc(E);M.dragPan=new hh(C,Wt,Xt),this._add("mousePan",Wt),this._add("touchPan",Xt,["touchZoom","touchRotate"]);var Kt=new Vd,_r=new Zs;M.touchZoomRotate=new Nu(C,_r,Kt,fe),this._add("touchRotate",Kt,["touchPan","touchZoom"]),this._add("touchZoom",_r,["touchPan","touchRotate"]);var dr=M.scrollZoom=new Ca(M,this);this._add("scrollZoom",dr,["mousePan"]);var Pr=M.keyboard=new ic;this._add("keyboard",Pr),this._add("blockableMapEvent",new Ni(M));for(var cr=0,Dr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];cr<Dr.length;cr+=1){var Wr=Dr[cr];E.interactive&&E[Wr]&&M[Wr].enable(E[Wr])}},wi.prototype._add=function(E,M,C){this._handlers.push({handlerName:E,handler:M,allowed:C}),this._handlersById[E]=M},wi.prototype.stop=function(E){if(!this._updatingCamera){for(var M=0,C=this._handlers;M<C.length;M+=1)C[M].handler.reset();this._inertia.clear(),this._fireEvents({},{},E),this._changes=[]}},wi.prototype.isActive=function(){for(var E=0,M=this._handlers;E<M.length;E+=1)if(M[E].handler.isActive())return!0;return!1},wi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},wi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},wi.prototype.isMoving=function(){return!!xl(this._eventsInProgress)||this.isZooming()},wi.prototype._blockedByActive=function(E,M,C){for(var I in E)if(I!==C&&(!M||M.indexOf(I)<0))return!0;return!1},wi.prototype.handleWindowEvent=function(E){this.handleEvent(E,E.type+"Window")},wi.prototype._getMapTouches=function(E){for(var M=[],C=0,I=E;C<I.length;C+=1){var V=I[C];this._el.contains(V.target)&&M.push(V)}return M},wi.prototype.handleEvent=function(E,M){this._updatingCamera=!0;for(var C=E.type==="renderFrame"?void 0:E,I={needsRenderFrame:!1},V={},ie={},fe=E.touches?this._getMapTouches(E.touches):void 0,Oe=fe?j.touchPos(this._el,fe):j.mousePos(this._el,E),ut=0,Et=this._handlers;ut<Et.length;ut+=1){var Wt=Et[ut],Xt=Wt.handlerName,Kt=Wt.handler,_r=Wt.allowed;if(Kt.isEnabled()){var dr=void 0;this._blockedByActive(ie,_r,Xt)?Kt.reset():Kt[M||E.type]&&(dr=Kt[M||E.type](E,Oe,fe),this.mergeHandlerResult(I,V,dr,Xt,C),dr&&dr.needsRenderFrame&&this._triggerRenderFrame()),(dr||Kt.isActive())&&(ie[Xt]=Kt)}}var Pr={};for(var cr in this._previousActiveHandlers)ie[cr]||(Pr[cr]=C);this._previousActiveHandlers=ie,(Object.keys(Pr).length||Ji(I))&&(this._changes.push([I,V,Pr]),this._triggerRenderFrame()),(Object.keys(ie).length||Ji(I))&&this._map._stop(!0),this._updatingCamera=!1;var Dr=I.cameraAnimation;Dr&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Dr(this._map))},wi.prototype.mergeHandlerResult=function(E,M,C,I,V){if(C){w.extend(E,C);var ie={handlerName:I,originalEvent:C.originalEvent||V};C.zoomDelta!==void 0&&(M.zoom=ie),C.panDelta!==void 0&&(M.drag=ie),C.pitchDelta!==void 0&&(M.pitch=ie),C.bearingDelta!==void 0&&(M.rotate=ie)}},wi.prototype._applyChanges=function(){for(var E={},M={},C={},I=0,V=this._changes;I<V.length;I+=1){var ie=V[I],fe=ie[0],Oe=ie[1],ut=ie[2];fe.panDelta&&(E.panDelta=(E.panDelta||new w.Point(0,0))._add(fe.panDelta)),fe.zoomDelta&&(E.zoomDelta=(E.zoomDelta||0)+fe.zoomDelta),fe.bearingDelta&&(E.bearingDelta=(E.bearingDelta||0)+fe.bearingDelta),fe.pitchDelta&&(E.pitchDelta=(E.pitchDelta||0)+fe.pitchDelta),fe.around!==void 0&&(E.around=fe.around),fe.pinchAround!==void 0&&(E.pinchAround=fe.pinchAround),fe.noInertia&&(E.noInertia=fe.noInertia),w.extend(M,Oe),w.extend(C,ut)}this._updateMapTransform(E,M,C),this._changes=[]},wi.prototype._updateMapTransform=function(E,M,C){var I=this._map,V=I.transform;if(!Ji(E))return this._fireEvents(M,C,!0);var ie=E.panDelta,fe=E.zoomDelta,Oe=E.bearingDelta,ut=E.pitchDelta,Et=E.around,Wt=E.pinchAround;Wt!==void 0&&(Et=Wt),I._stop(!0),Et=Et||I.transform.centerPoint;var Xt=V.pointLocation(ie?Et.sub(ie):Et);Oe&&(V.bearing+=Oe),ut&&(V.pitch+=ut),fe&&(V.zoom+=fe),V.setLocationAtPoint(Xt,Et),this._map._update(),E.noInertia||this._inertia.record(E),this._fireEvents(M,C,!0)},wi.prototype._fireEvents=function(E,M,C){var I=this,V=xl(this._eventsInProgress),ie=xl(E),fe={};for(var Oe in E)this._eventsInProgress[Oe]||(fe[Oe+"start"]=E[Oe].originalEvent),this._eventsInProgress[Oe]=E[Oe];for(var ut in!V&&ie&&this._fireEvent("movestart",ie.originalEvent),fe)this._fireEvent(ut,fe[ut]);for(var Et in ie&&this._fireEvent("move",ie.originalEvent),E)this._fireEvent(Et,E[Et].originalEvent);var Wt,Xt={};for(var Kt in this._eventsInProgress){var _r=this._eventsInProgress[Kt],dr=_r.handlerName,Pr=_r.originalEvent;this._handlersById[dr].isActive()||(delete this._eventsInProgress[Kt],Xt[Kt+"end"]=Wt=M[dr]||Pr)}for(var cr in Xt)this._fireEvent(cr,Xt[cr]);var Dr=xl(this._eventsInProgress);if(C&&(V||ie)&&!Dr){this._updatingCamera=!0;var Wr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rn=function(xn){return xn!==0&&-I._bearingSnap<xn&&xn<I._bearingSnap};Wr?(rn(Wr.bearing||this._map.getBearing())&&(Wr.bearing=0),this._map.easeTo(Wr,{originalEvent:Wt})):(this._map.fire(new w.Event("moveend",{originalEvent:Wt})),rn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},wi.prototype._fireEvent=function(E,M){this._map.fire(new w.Event(E,M?{originalEvent:M}:{}))},wi.prototype._requestFrame=function(){var E=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(M){delete E._frameId,E.handleEvent(new gf("renderFrame",{timeStamp:M})),E._applyChanges()})},wi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ul=function(E){function M(C,I){E.call(this),this._moving=!1,this._zooming=!1,this.transform=C,this._bearingSnap=I.bearingSnap,w.bindAll(["_renderFrameCallback"],this)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.getCenter=function(){return new w.LngLat(this.transform.center.lng,this.transform.center.lat)},M.prototype.setCenter=function(C,I){return this.jumpTo({center:C},I)},M.prototype.panBy=function(C,I,V){return C=w.Point.convert(C).mult(-1),this.panTo(this.transform.center,w.extend({offset:C},I),V)},M.prototype.panTo=function(C,I,V){return this.easeTo(w.extend({center:C},I),V)},M.prototype.getZoom=function(){return this.transform.zoom},M.prototype.setZoom=function(C,I){return this.jumpTo({zoom:C},I),this},M.prototype.zoomTo=function(C,I,V){return this.easeTo(w.extend({zoom:C},I),V)},M.prototype.zoomIn=function(C,I){return this.zoomTo(this.getZoom()+1,C,I),this},M.prototype.zoomOut=function(C,I){return this.zoomTo(this.getZoom()-1,C,I),this},M.prototype.getBearing=function(){return this.transform.bearing},M.prototype.setBearing=function(C,I){return this.jumpTo({bearing:C},I),this},M.prototype.getPadding=function(){return this.transform.padding},M.prototype.setPadding=function(C,I){return this.jumpTo({padding:C},I),this},M.prototype.rotateTo=function(C,I,V){return this.easeTo(w.extend({bearing:C},I),V)},M.prototype.resetNorth=function(C,I){return this.rotateTo(0,w.extend({duration:1e3},C),I),this},M.prototype.resetNorthPitch=function(C,I){return this.easeTo(w.extend({bearing:0,pitch:0,duration:1e3},C),I),this},M.prototype.snapToNorth=function(C,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(C,I):this},M.prototype.getPitch=function(){return this.transform.pitch},M.prototype.setPitch=function(C,I){return this.jumpTo({pitch:C},I),this},M.prototype.cameraForBounds=function(C,I){C=w.LngLatBounds.convert(C);var V=I&&I.bearing||0;return this._cameraForBoxAndBearing(C.getNorthWest(),C.getSouthEast(),V,I)},M.prototype._cameraForBoxAndBearing=function(C,I,V,ie){var fe={top:0,bottom:0,right:0,left:0};if(typeof(ie=w.extend({padding:fe,offset:[0,0],maxZoom:this.transform.maxZoom},ie)).padding=="number"){var Oe=ie.padding;ie.padding={top:Oe,bottom:Oe,right:Oe,left:Oe}}ie.padding=w.extend(fe,ie.padding);var ut=this.transform,Et=ut.padding,Wt=ut.project(w.LngLat.convert(C)),Xt=ut.project(w.LngLat.convert(I)),Kt=Wt.rotate(-V*Math.PI/180),_r=Xt.rotate(-V*Math.PI/180),dr=new w.Point(Math.max(Kt.x,_r.x),Math.max(Kt.y,_r.y)),Pr=new w.Point(Math.min(Kt.x,_r.x),Math.min(Kt.y,_r.y)),cr=dr.sub(Pr),Dr=(ut.width-(Et.left+Et.right+ie.padding.left+ie.padding.right))/cr.x,Wr=(ut.height-(Et.top+Et.bottom+ie.padding.top+ie.padding.bottom))/cr.y;if(!(Wr<0||Dr<0)){var rn=Math.min(ut.scaleZoom(ut.scale*Math.min(Dr,Wr)),ie.maxZoom),xn=typeof ie.offset.x=="number"?new w.Point(ie.offset.x,ie.offset.y):w.Point.convert(ie.offset),dn=new w.Point((ie.padding.left-ie.padding.right)/2,(ie.padding.top-ie.padding.bottom)/2).rotate(V*Math.PI/180),An=xn.add(dn).mult(ut.scale/ut.zoomScale(rn));return{center:ut.unproject(Wt.add(Xt).div(2).sub(An)),zoom:rn,bearing:V}}w.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},M.prototype.fitBounds=function(C,I,V){return this._fitInternal(this.cameraForBounds(C,I),I,V)},M.prototype.fitScreenCoordinates=function(C,I,V,ie,fe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(w.Point.convert(C)),this.transform.pointLocation(w.Point.convert(I)),V,ie),ie,fe)},M.prototype._fitInternal=function(C,I,V){return C?(delete(I=w.extend(C,I)).padding,I.linear?this.easeTo(I,V):this.flyTo(I,V)):this},M.prototype.jumpTo=function(C,I){this.stop();var V=this.transform,ie=!1,fe=!1,Oe=!1;return"zoom"in C&&V.zoom!==+C.zoom&&(ie=!0,V.zoom=+C.zoom),C.center!==void 0&&(V.center=w.LngLat.convert(C.center)),"bearing"in C&&V.bearing!==+C.bearing&&(fe=!0,V.bearing=+C.bearing),"pitch"in C&&V.pitch!==+C.pitch&&(Oe=!0,V.pitch=+C.pitch),C.padding==null||V.isPaddingEqual(C.padding)||(V.padding=C.padding),this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),ie&&this.fire(new w.Event("zoomstart",I)).fire(new w.Event("zoom",I)).fire(new w.Event("zoomend",I)),fe&&this.fire(new w.Event("rotatestart",I)).fire(new w.Event("rotate",I)).fire(new w.Event("rotateend",I)),Oe&&this.fire(new w.Event("pitchstart",I)).fire(new w.Event("pitch",I)).fire(new w.Event("pitchend",I)),this.fire(new w.Event("moveend",I))},M.prototype.easeTo=function(C,I){var V=this;this._stop(!1,C.easeId),((C=w.extend({offset:[0,0],duration:500,easing:w.ease},C)).animate===!1||!C.essential&&w.browser.prefersReducedMotion)&&(C.duration=0);var ie=this.transform,fe=this.getZoom(),Oe=this.getBearing(),ut=this.getPitch(),Et=this.getPadding(),Wt="zoom"in C?+C.zoom:fe,Xt="bearing"in C?this._normalizeBearing(C.bearing,Oe):Oe,Kt="pitch"in C?+C.pitch:ut,_r="padding"in C?C.padding:ie.padding,dr=w.Point.convert(C.offset),Pr=ie.centerPoint.add(dr),cr=ie.pointLocation(Pr),Dr=w.LngLat.convert(C.center||cr);this._normalizeCenter(Dr);var Wr,rn,xn=ie.project(cr),dn=ie.project(Dr).sub(xn),An=ie.zoomScale(Wt-fe);C.around&&(Wr=w.LngLat.convert(C.around),rn=ie.locationPoint(Wr));var Vn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Wt!==fe,this._rotating=this._rotating||Oe!==Xt,this._pitching=this._pitching||Kt!==ut,this._padding=!ie.isPaddingEqual(_r),this._easeId=C.easeId,this._prepareEase(I,C.noMoveStart,Vn),this._ease(function(ui){if(V._zooming&&(ie.zoom=w.number(fe,Wt,ui)),V._rotating&&(ie.bearing=w.number(Oe,Xt,ui)),V._pitching&&(ie.pitch=w.number(ut,Kt,ui)),V._padding&&(ie.interpolatePadding(Et,_r,ui),Pr=ie.centerPoint.add(dr)),Wr)ie.setLocationAtPoint(Wr,rn);else{var li=ie.zoomScale(ie.zoom-fe),Ri=Wt>fe?Math.min(2,An):Math.max(.5,An),ea=Math.pow(Ri,1-ui),ua=ie.unproject(xn.add(dn.mult(ui*ea)).mult(li));ie.setLocationAtPoint(ie.renderWorldCopies?ua.wrap():ua,Pr)}V._fireMoveEvents(I)},function(ui){V._afterEase(I,ui)},C),this},M.prototype._prepareEase=function(C,I,V){V===void 0&&(V={}),this._moving=!0,I||V.moving||this.fire(new w.Event("movestart",C)),this._zooming&&!V.zooming&&this.fire(new w.Event("zoomstart",C)),this._rotating&&!V.rotating&&this.fire(new w.Event("rotatestart",C)),this._pitching&&!V.pitching&&this.fire(new w.Event("pitchstart",C))},M.prototype._fireMoveEvents=function(C){this.fire(new w.Event("move",C)),this._zooming&&this.fire(new w.Event("zoom",C)),this._rotating&&this.fire(new w.Event("rotate",C)),this._pitching&&this.fire(new w.Event("pitch",C))},M.prototype._afterEase=function(C,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var V=this._zooming,ie=this._rotating,fe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,V&&this.fire(new w.Event("zoomend",C)),ie&&this.fire(new w.Event("rotateend",C)),fe&&this.fire(new w.Event("pitchend",C)),this.fire(new w.Event("moveend",C))}},M.prototype.flyTo=function(C,I){var V=this;if(!C.essential&&w.browser.prefersReducedMotion){var ie=w.pick(C,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ie,I)}this.stop(),C=w.extend({offset:[0,0],speed:1.2,curve:1.42,easing:w.ease},C);var fe=this.transform,Oe=this.getZoom(),ut=this.getBearing(),Et=this.getPitch(),Wt=this.getPadding(),Xt="zoom"in C?w.clamp(+C.zoom,fe.minZoom,fe.maxZoom):Oe,Kt="bearing"in C?this._normalizeBearing(C.bearing,ut):ut,_r="pitch"in C?+C.pitch:Et,dr="padding"in C?C.padding:fe.padding,Pr=fe.zoomScale(Xt-Oe),cr=w.Point.convert(C.offset),Dr=fe.centerPoint.add(cr),Wr=fe.pointLocation(Dr),rn=w.LngLat.convert(C.center||Wr);this._normalizeCenter(rn);var xn=fe.project(Wr),dn=fe.project(rn).sub(xn),An=C.curve,Vn=Math.max(fe.width,fe.height),ui=Vn/Pr,li=dn.mag();if("minZoom"in C){var Ri=w.clamp(Math.min(C.minZoom,Oe,Xt),fe.minZoom,fe.maxZoom),ea=Vn/fe.zoomScale(Ri-Oe);An=Math.sqrt(ea/li*2)}var ua=An*An;function ra(la){var ga=(ui*ui-Vn*Vn+(la?-1:1)*ua*ua*li*li)/(2*(la?ui:Vn)*ua*li);return Math.log(Math.sqrt(ga*ga+1)-ga)}function uo(la){return(Math.exp(la)-Math.exp(-la))/2}function Li(la){return(Math.exp(la)+Math.exp(-la))/2}var Oa=ra(0),Ha=function(la){return Li(Oa)/Li(Oa+An*la)},va=function(la){return Vn*((Li(Oa)*(uo(ga=Oa+An*la)/Li(ga))-uo(Oa))/ua)/li;var ga},Ea=(ra(1)-Oa)/An;if(Math.abs(li)<1e-6||!isFinite(Ea)){if(Math.abs(Vn-ui)<1e-6)return this.easeTo(C,I);var Pa=ui<Vn?-1:1;Ea=Math.abs(Math.log(ui/Vn))/An,va=function(){return 0},Ha=function(la){return Math.exp(Pa*An*la)}}return C.duration="duration"in C?+C.duration:1e3*Ea/("screenSpeed"in C?+C.screenSpeed/An:+C.speed),C.maxDuration&&C.duration>C.maxDuration&&(C.duration=0),this._zooming=!0,this._rotating=ut!==Kt,this._pitching=_r!==Et,this._padding=!fe.isPaddingEqual(dr),this._prepareEase(I,!1),this._ease(function(la){var ga=la*Ea,Tu=1/Ha(ga);fe.zoom=la===1?Xt:Oe+fe.scaleZoom(Tu),V._rotating&&(fe.bearing=w.number(ut,Kt,la)),V._pitching&&(fe.pitch=w.number(Et,_r,la)),V._padding&&(fe.interpolatePadding(Wt,dr,la),Dr=fe.centerPoint.add(cr));var Vs=la===1?rn:fe.unproject(xn.add(dn.mult(va(ga))).mult(Tu));fe.setLocationAtPoint(fe.renderWorldCopies?Vs.wrap():Vs,Dr),V._fireMoveEvents(I)},function(){return V._afterEase(I)},C),this},M.prototype.isEasing=function(){return!!this._easeFrameId},M.prototype.stop=function(){return this._stop()},M.prototype._stop=function(C,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var V=this._onEaseEnd;delete this._onEaseEnd,V.call(this,I)}if(!C){var ie=this.handlers;ie&&ie.stop(!1)}return this},M.prototype._ease=function(C,I,V){V.animate===!1||V.duration===0?(C(1),I()):(this._easeStart=w.browser.now(),this._easeOptions=V,this._onEaseFrame=C,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},M.prototype._renderFrameCallback=function(){var C=Math.min((w.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},M.prototype._normalizeBearing=function(C,I){C=w.wrap(C,-180,180);var V=Math.abs(C-I);return Math.abs(C-360-I)<V&&(C-=360),Math.abs(C+360-I)<V&&(C+=360),C},M.prototype._normalizeCenter=function(C){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var V=C.lng-I.center.lng;C.lng+=V>180?-360:V<-180?360:0}},M}(w.Evented),bl=function(E){E===void 0&&(E={}),this.options=E,w.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};bl.prototype.getDefaultPosition=function(){return"bottom-right"},bl.prototype.onAdd=function(E){var M=this.options&&this.options.compact;return this._map=E,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),M&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),M===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},bl.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},bl.prototype._setElementTitle=function(E,M){var C=this._map._getUIString("AttributionControl."+M);E.title=C,E.setAttribute("aria-label",C)},bl.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},bl.prototype._updateEditLink=function(){var E=this._editLink;E||(E=this._editLink=this._container.querySelector(".mapbox-improve-map"));var M=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||w.config.ACCESS_TOKEN}];if(E){var C=M.reduce(function(I,V,ie){return V.value&&(I+=V.key+"="+V.value+(ie<M.length-1?"&":"")),I},"?");E.href=w.config.FEEDBACK_URL+"/"+C+(this._map._hash?this._map._hash.getHashString(!0):""),E.rel="noopener nofollow",this._setElementTitle(E,"MapFeedback")}},bl.prototype._updateData=function(E){!E||E.sourceDataType!=="metadata"&&E.sourceDataType!=="visibility"&&E.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},bl.prototype._updateAttributions=function(){if(this._map.style){var E=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?E=E.concat(this.options.customAttribution.map(function(Oe){return typeof Oe!="string"?"":Oe})):typeof this.options.customAttribution=="string"&&E.push(this.options.customAttribution)),this._map.style.stylesheet){var M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}var C=this._map.style.sourceCaches;for(var I in C){var V=C[I];if(V.used){var ie=V.getSource();ie.attribution&&E.indexOf(ie.attribution)<0&&E.push(ie.attribution)}}E.sort(function(Oe,ut){return Oe.length-ut.length});var fe=(E=E.filter(function(Oe,ut){for(var Et=ut+1;Et<E.length;Et++)if(E[Et].indexOf(Oe)>=0)return!1;return!0})).join(" | ");fe!==this._attribHTML&&(this._attribHTML=fe,E.length?(this._innerContainer.innerHTML=fe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},bl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ll=function(){w.bindAll(["_updateLogo"],this),w.bindAll(["_updateCompact"],this)};ll.prototype.onAdd=function(E){this._map=E,this._container=j.create("div","mapboxgl-ctrl");var M=j.create("a","mapboxgl-ctrl-logo");return M.target="_blank",M.rel="noopener nofollow",M.href="https://www.mapbox.com/",M.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),M.setAttribute("rel","noopener nofollow"),this._container.appendChild(M),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ll.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ll.prototype.getDefaultPosition=function(){return"bottom-left"},ll.prototype._updateLogo=function(E){E&&E.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ll.prototype._logoRequired=function(){if(this._map.style){var E=this._map.style.sourceCaches;for(var M in E)if(E[M].getSource().mapbox_logo)return!0;return!1}},ll.prototype._updateCompact=function(){var E=this._container.children;if(E.length){var M=E[0];this._map.getCanvasContainer().offsetWidth<250?M.classList.add("mapboxgl-compact"):M.classList.remove("mapboxgl-compact")}};var Ss=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ss.prototype.add=function(E){var M=++this._id;return this._queue.push({callback:E,id:M,cancelled:!1}),M},Ss.prototype.remove=function(E){for(var M=this._currentlyRunning,C=0,I=M?this._queue.concat(M):this._queue;C<I.length;C+=1){var V=I[C];if(V.id===E)return void(V.cancelled=!0)}},Ss.prototype.run=function(E){E===void 0&&(E=0);var M=this._currentlyRunning=this._queue;this._queue=[];for(var C=0,I=M;C<I.length;C+=1){var V=I[C];if(!V.cancelled&&(V.callback(E),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ss.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var mc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},mf=w.window.HTMLImageElement,Fh=w.window.HTMLElement,Vo=w.window.ImageBitmap,uu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},td=function(E){function M(I){var V=this;if((I=w.extend({},uu,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ie=new so(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(E.call(this,ie,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Ss,this._controls=[],this._mapId=w.uniqueId(),this._locale=w.extend({},mc,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new w.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=w.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof Fh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),w.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return V._update(!1)}),this.on("moveend",function(){return V._update(!1)}),this.on("zoom",function(){return V._update(!0)}),w.window!==void 0&&(w.window.addEventListener("online",this._onWindowOnline,!1),w.window.addEventListener("resize",this._onWindowResize,!1),w.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new wi(this,I),this._hash=I.hash&&new eo(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,w.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new bl({customAttribution:I.customAttribution})),this.addControl(new ll,I.logoPosition),this.on("style.load",function(){V.transform.unmodified&&V.jumpTo(V.style.stylesheet)}),this.on("data",function(fe){V._update(fe.dataType==="style"),V.fire(new w.Event(fe.dataType+"data",fe))}),this.on("dataloading",function(fe){V.fire(new w.Event(fe.dataType+"dataloading",fe))})}E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M;var C={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return M.prototype._getMapId=function(){return this._mapId},M.prototype.addControl=function(I,V){if(V===void 0&&(V=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ie=I.onAdd(this);this._controls.push(I);var fe=this._controlPositions[V];return V.indexOf("bottom")!==-1?fe.insertBefore(ie,fe.firstChild):fe.appendChild(ie),this},M.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var V=this._controls.indexOf(I);return V>-1&&this._controls.splice(V,1),I.onRemove(this),this},M.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},M.prototype.resize=function(I){var V=this._containerDimensions(),ie=V[0],fe=V[1];if(ie===this.transform.width&&fe===this.transform.height)return this;this._resizeCanvas(ie,fe),this.transform.resize(ie,fe),this.painter.resize(ie,fe);var Oe=!this._moving;return Oe&&this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),this.fire(new w.Event("resize",I)),Oe&&this.fire(new w.Event("moveend",I)),this},M.prototype.getBounds=function(){return this.transform.getBounds()},M.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},M.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(w.LngLatBounds.convert(I)),this._update()},M.prototype.setMinZoom=function(I){if((I=I==null?-2:I)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},M.prototype.getMinZoom=function(){return this.transform.minZoom},M.prototype.setMaxZoom=function(I){if((I=I==null?22:I)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},M.prototype.getMaxZoom=function(){return this.transform.maxZoom},M.prototype.setMinPitch=function(I){if((I=I==null?0:I)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},M.prototype.getMinPitch=function(){return this.transform.minPitch},M.prototype.setMaxPitch=function(I){if((I=I==null?60:I)>60)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},M.prototype.getMaxPitch=function(){return this.transform.maxPitch},M.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},M.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},M.prototype.project=function(I){return this.transform.locationPoint(w.LngLat.convert(I))},M.prototype.unproject=function(I){return this.transform.pointLocation(w.Point.convert(I))},M.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},M.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},M.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},M.prototype._createDelegatedListener=function(I,V,ie){var fe,Oe=this;if(I==="mouseenter"||I==="mouseover"){var ut=!1;return{layer:V,listener:ie,delegates:{mousemove:function(Wt){var Xt=Oe.getLayer(V)?Oe.queryRenderedFeatures(Wt.point,{layers:[V]}):[];Xt.length?ut||(ut=!0,ie.call(Oe,new us(I,Oe,Wt.originalEvent,{features:Xt}))):ut=!1},mouseout:function(){ut=!1}}}}if(I==="mouseleave"||I==="mouseout"){var Et=!1;return{layer:V,listener:ie,delegates:{mousemove:function(Wt){(Oe.getLayer(V)?Oe.queryRenderedFeatures(Wt.point,{layers:[V]}):[]).length?Et=!0:Et&&(Et=!1,ie.call(Oe,new us(I,Oe,Wt.originalEvent)))},mouseout:function(Wt){Et&&(Et=!1,ie.call(Oe,new us(I,Oe,Wt.originalEvent)))}}}}return{layer:V,listener:ie,delegates:(fe={},fe[I]=function(Wt){var Xt=Oe.getLayer(V)?Oe.queryRenderedFeatures(Wt.point,{layers:[V]}):[];Xt.length&&(Wt.features=Xt,ie.call(Oe,Wt),delete Wt.features)},fe)}},M.prototype.on=function(I,V,ie){if(ie===void 0)return E.prototype.on.call(this,I,V);var fe=this._createDelegatedListener(I,V,ie);for(var Oe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(fe),fe.delegates)this.on(Oe,fe.delegates[Oe]);return this},M.prototype.once=function(I,V,ie){if(ie===void 0)return E.prototype.once.call(this,I,V);var fe=this._createDelegatedListener(I,V,ie);for(var Oe in fe.delegates)this.once(Oe,fe.delegates[Oe]);return this},M.prototype.off=function(I,V,ie){var fe=this;return ie===void 0?E.prototype.off.call(this,I,V):(this._delegatedListeners&&this._delegatedListeners[I]&&function(Oe){for(var ut=Oe[I],Et=0;Et<ut.length;Et++){var Wt=ut[Et];if(Wt.layer===V&&Wt.listener===ie){for(var Xt in Wt.delegates)fe.off(Xt,Wt.delegates[Xt]);return ut.splice(Et,1),fe}}}(this._delegatedListeners),this)},M.prototype.queryRenderedFeatures=function(I,V){if(!this.style)return[];var ie;if(V!==void 0||I===void 0||I instanceof w.Point||Array.isArray(I)||(V=I,I=void 0),V=V||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof w.Point||typeof I[0]=="number")ie=[w.Point.convert(I)];else{var fe=w.Point.convert(I[0]),Oe=w.Point.convert(I[1]);ie=[fe,new w.Point(Oe.x,fe.y),Oe,new w.Point(fe.x,Oe.y),fe]}return this.style.queryRenderedFeatures(ie,V,this.transform)},M.prototype.querySourceFeatures=function(I,V){return this.style.querySourceFeatures(I,V)},M.prototype.setStyle=function(I,V){return(V=w.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},V)).diff!==!1&&V.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,V),this):(this._localIdeographFontFamily=V.localIdeographFontFamily,this._updateStyle(I,V))},M.prototype._getUIString=function(I){var V=this._locale[I];if(V==null)throw new Error("Missing UI string '"+I+"'");return V},M.prototype._updateStyle=function(I,V){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new Ms(this,V||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},M.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},M.prototype._diffStyle=function(I,V){var ie=this;if(typeof I=="string"){var fe=this._requestManager.normalizeStyleURL(I),Oe=this._requestManager.transformRequest(fe,w.ResourceType.Style);w.getJSON(Oe,function(ut,Et){ut?ie.fire(new w.ErrorEvent(ut)):Et&&ie._updateDiff(Et,V)})}else typeof I=="object"&&this._updateDiff(I,V)},M.prototype._updateDiff=function(I,V){try{this.style.setState(I)&&this._update(!0)}catch(ie){w.warnOnce("Unable to perform style diff: "+(ie.message||ie.error||ie)+".  Rebuilding the style from scratch."),this._updateStyle(I,V)}},M.prototype.getStyle=function(){if(this.style)return this.style.serialize()},M.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():w.warnOnce("There is no style added to the map.")},M.prototype.addSource=function(I,V){return this._lazyInitEmptyStyle(),this.style.addSource(I,V),this._update(!0)},M.prototype.isSourceLoaded=function(I){var V=this.style&&this.style.sourceCaches[I];if(V!==void 0)return V.loaded();this.fire(new w.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},M.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var V in I){var ie=I[V]._tiles;for(var fe in ie){var Oe=ie[fe];if(Oe.state!=="loaded"&&Oe.state!=="errored")return!1}}return!0},M.prototype.addSourceType=function(I,V,ie){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,V,ie)},M.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},M.prototype.getSource=function(I){return this.style.getSource(I)},M.prototype.addImage=function(I,V,ie){ie===void 0&&(ie={});var fe=ie.pixelRatio;fe===void 0&&(fe=1);var Oe=ie.sdf;Oe===void 0&&(Oe=!1);var ut=ie.stretchX,Et=ie.stretchY,Wt=ie.content;if(this._lazyInitEmptyStyle(),V instanceof mf||Vo&&V instanceof Vo){var Xt=w.browser.getImageData(V);this.style.addImage(I,{data:new w.RGBAImage({width:Xt.width,height:Xt.height},Xt.data),pixelRatio:fe,stretchX:ut,stretchY:Et,content:Wt,sdf:Oe,version:0})}else{if(V.width===void 0||V.height===void 0)return this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Kt=V;this.style.addImage(I,{data:new w.RGBAImage({width:V.width,height:V.height},new Uint8Array(V.data)),pixelRatio:fe,stretchX:ut,stretchY:Et,content:Wt,sdf:Oe,version:0,userImage:Kt}),Kt.onAdd&&Kt.onAdd(this,I)}},M.prototype.updateImage=function(I,V){var ie=this.style.getImage(I);if(!ie)return this.fire(new w.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var fe=V instanceof mf||Vo&&V instanceof Vo?w.browser.getImageData(V):V,Oe=fe.width,ut=fe.height,Et=fe.data;return Oe===void 0||ut===void 0?this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Oe!==ie.data.width||ut!==ie.data.height?this.fire(new w.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ie.data.replace(Et,!(V instanceof mf||Vo&&V instanceof Vo)),void this.style.updateImage(I,ie))},M.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new w.ErrorEvent(new Error("Missing required image id"))),!1)},M.prototype.removeImage=function(I){this.style.removeImage(I)},M.prototype.loadImage=function(I,V){w.getImage(this._requestManager.transformRequest(I,w.ResourceType.Image),V)},M.prototype.listImages=function(){return this.style.listImages()},M.prototype.addLayer=function(I,V){return this._lazyInitEmptyStyle(),this.style.addLayer(I,V),this._update(!0)},M.prototype.moveLayer=function(I,V){return this.style.moveLayer(I,V),this._update(!0)},M.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},M.prototype.getLayer=function(I){return this.style.getLayer(I)},M.prototype.setLayerZoomRange=function(I,V,ie){return this.style.setLayerZoomRange(I,V,ie),this._update(!0)},M.prototype.setFilter=function(I,V,ie){return ie===void 0&&(ie={}),this.style.setFilter(I,V,ie),this._update(!0)},M.prototype.getFilter=function(I){return this.style.getFilter(I)},M.prototype.setPaintProperty=function(I,V,ie,fe){return fe===void 0&&(fe={}),this.style.setPaintProperty(I,V,ie,fe),this._update(!0)},M.prototype.getPaintProperty=function(I,V){return this.style.getPaintProperty(I,V)},M.prototype.setLayoutProperty=function(I,V,ie,fe){return fe===void 0&&(fe={}),this.style.setLayoutProperty(I,V,ie,fe),this._update(!0)},M.prototype.getLayoutProperty=function(I,V){return this.style.getLayoutProperty(I,V)},M.prototype.setLight=function(I,V){return V===void 0&&(V={}),this._lazyInitEmptyStyle(),this.style.setLight(I,V),this._update(!0)},M.prototype.getLight=function(){return this.style.getLight()},M.prototype.setFeatureState=function(I,V){return this.style.setFeatureState(I,V),this._update()},M.prototype.removeFeatureState=function(I,V){return this.style.removeFeatureState(I,V),this._update()},M.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},M.prototype.getContainer=function(){return this._container},M.prototype.getCanvasContainer=function(){return this._canvasContainer},M.prototype.getCanvas=function(){return this._canvas},M.prototype._containerDimensions=function(){var I=0,V=0;return this._container&&(I=this._container.clientWidth||400,V=this._container.clientHeight||300),[I,V]},M.prototype._detectMissingCSS=function(){w.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&w.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},M.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var V=this._canvasContainer=j.create("div","mapboxgl-canvas-container",I);this._interactive&&V.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",V),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ie=this._containerDimensions();this._resizeCanvas(ie[0],ie[1]);var fe=this._controlContainer=j.create("div","mapboxgl-control-container",I),Oe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ut){Oe[ut]=j.create("div","mapboxgl-ctrl-"+ut,fe)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},M.prototype._resizeCanvas=function(I,V){var ie=w.browser.devicePixelRatio||1;this._canvas.width=ie*I,this._canvas.height=ie*V,this._canvas.style.width=I+"px",this._canvas.style.height=V+"px"},M.prototype._setupPainter=function(){var I=w.extend({},X.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),V=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);V?(this.painter=new hs(V,this.transform),w.webpSupported.testSupport(V)):this.fire(new w.ErrorEvent(new Error("Failed to initialize WebGL")))},M.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new w.Event("webglcontextlost",{originalEvent:I}))},M.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new w.Event("webglcontextrestored",{originalEvent:I}))},M.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},M.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},M.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},M.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},M.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},M.prototype._render=function(I){var V,ie=this,fe=0,Oe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(V=Oe.createQueryEXT(),Oe.beginQueryEXT(Oe.TIME_ELAPSED_EXT,V),fe=w.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var ut=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Et=this.transform.zoom,Wt=w.browser.now();this.style.zoomHistory.update(Et,Wt);var Xt=new w.EvaluationParameters(Et,{now:Wt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Kt=Xt.crossFadingFactor();Kt===1&&Kt===this._crossFadingFactor||(ut=!0,this._crossFadingFactor=Kt),this.style.update(Xt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new w.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new w.Event("load"))),this.style&&(this.style.hasTransitions()||ut)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var _r=w.browser.now()-fe;Oe.endQueryEXT(Oe.TIME_ELAPSED_EXT,V),setTimeout(function(){var cr=Oe.getQueryObjectEXT(V,Oe.QUERY_RESULT_EXT)/1e6;Oe.deleteQueryEXT(V),ie.fire(new w.Event("gpu-timing-frame",{cpuTime:_r,gpuTime:cr}))},50)}if(this.listens("gpu-timing-layer")){var dr=this.painter.collectGpuTimers();setTimeout(function(){var cr=ie.painter.queryGpuTimers(dr);ie.fire(new w.Event("gpu-timing-layer",{layerTimes:cr}))},50)}var Pr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Pr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new w.Event("idle")),!this._loaded||this._fullyLoaded||Pr||(this._fullyLoaded=!0),this}},M.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,V=this._controls;I<V.length;I+=1)V[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),w.window!==void 0&&(w.window.removeEventListener("resize",this._onWindowResize,!1),w.window.removeEventListener("orientationchange",this._onWindowResize,!1),w.window.removeEventListener("online",this._onWindowOnline,!1));var ie=this.painter.context.gl.getExtension("WEBGL_lose_context");ie&&ie.loseContext(),Bh(this._canvasContainer),Bh(this._controlContainer),Bh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new w.Event("remove"))},M.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=w.browser.frame(function(V){I._frame=null,I._render(V)}))},M.prototype._onWindowOnline=function(){this._update()},M.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},C.showTileBoundaries.get=function(){return!!this._showTileBoundaries},C.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},C.showPadding.get=function(){return!!this._showPadding},C.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},C.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},C.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},C.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},C.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},C.repaint.get=function(){return!!this._repaint},C.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},C.vertices.get=function(){return!!this._vertices},C.vertices.set=function(I){this._vertices=I,this._update()},M.prototype._setCacheLimits=function(I,V){w.setCacheLimits(I,V)},C.version.get=function(){return w.version},Object.defineProperties(M.prototype,C),M}(ul);function Bh(E){E.parentNode&&E.parentNode.removeChild(E)}var Ff={showCompass:!0,showZoom:!0,visualizePitch:!1},yc=function(E){var M=this;this.options=w.extend({},Ff,E),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(C){return C.preventDefault()}),this.options.showZoom&&(w.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(C){return M._map.zoomIn({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(C){return M._map.zoomOut({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(w.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(C){M.options.visualizePitch?M._map.resetNorthPitch({},{originalEvent:C}):M._map.resetNorth({},{originalEvent:C})}),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};yc.prototype._updateZoomButtons=function(){var E=this._map.getZoom(),M=E===this._map.getMaxZoom(),C=E===this._map.getMinZoom();this._zoomInButton.disabled=M,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",M.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},yc.prototype._rotateCompassArrow=function(){var E=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=E},yc.prototype.onAdd=function(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ma(this._map,this._compass,this.options.visualizePitch)),this._container},yc.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},yc.prototype._createButton=function(E,M){var C=j.create("button",E,this._container);return C.type="button",C.addEventListener("click",M),C},yc.prototype._setButtonTitle=function(E,M){var C=this._map._getUIString("NavigationControl."+M);E.title=C,E.setAttribute("aria-label",C)};var Ma=function(E,M,C){C===void 0&&(C=!1),this._clickTolerance=10,this.element=M,this.mouseRotate=new Dc({clickTolerance:E.dragRotate._mouseRotate._clickTolerance}),this.map=E,C&&(this.mousePitch=new _p({clickTolerance:E.dragRotate._mousePitch._clickTolerance})),w.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(M,"mousedown",this.mousedown),j.addEventListener(M,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(M,"touchmove",this.touchmove),j.addEventListener(M,"touchend",this.touchend),j.addEventListener(M,"touchcancel",this.reset)};function Nh(E,M,C){if(E=new w.LngLat(E.lng,E.lat),M){var I=new w.LngLat(E.lng-360,E.lat),V=new w.LngLat(E.lng+360,E.lat),ie=C.locationPoint(E).distSqr(M);C.locationPoint(I).distSqr(M)<ie?E=I:C.locationPoint(V).distSqr(M)<ie&&(E=V)}for(;Math.abs(E.lng-C.center.lng)>180;){var fe=C.locationPoint(E);if(fe.x>=0&&fe.y>=0&&fe.x<=C.width&&fe.y<=C.height)break;E.lng>C.center.lng?E.lng-=360:E.lng+=360}return E}Ma.prototype.down=function(E,M){this.mouseRotate.mousedown(E,M),this.mousePitch&&this.mousePitch.mousedown(E,M),j.disableDrag()},Ma.prototype.move=function(E,M){var C=this.map,I=this.mouseRotate.mousemoveWindow(E,M);if(I&&I.bearingDelta&&C.setBearing(C.getBearing()+I.bearingDelta),this.mousePitch){var V=this.mousePitch.mousemoveWindow(E,M);V&&V.pitchDelta&&C.setPitch(C.getPitch()+V.pitchDelta)}},Ma.prototype.off=function(){var E=this.element;j.removeEventListener(E,"mousedown",this.mousedown),j.removeEventListener(E,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(E,"touchmove",this.touchmove),j.removeEventListener(E,"touchend",this.touchend),j.removeEventListener(E,"touchcancel",this.reset),this.offTemp()},Ma.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(w.window,"mousemove",this.mousemove),j.removeEventListener(w.window,"mouseup",this.mouseup)},Ma.prototype.mousedown=function(E){this.down(w.extend({},E,{ctrlKey:!0,preventDefault:function(){return E.preventDefault()}}),j.mousePos(this.element,E)),j.addEventListener(w.window,"mousemove",this.mousemove),j.addEventListener(w.window,"mouseup",this.mouseup)},Ma.prototype.mousemove=function(E){this.move(E,j.mousePos(this.element,E))},Ma.prototype.mouseup=function(E){this.mouseRotate.mouseupWindow(E),this.mousePitch&&this.mousePitch.mouseupWindow(E),this.offTemp()},Ma.prototype.touchstart=function(E){E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,E.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return E.preventDefault()}},this._startPos))},Ma.prototype.touchmove=function(E){E.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,E.targetTouches)[0],this.move({preventDefault:function(){return E.preventDefault()}},this._lastPos))},Ma.prototype.touchend=function(E){E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ma.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Lc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rd(E,M,C){var I=E.classList;for(var V in Lc)I.remove("mapboxgl-"+C+"-anchor-"+V);I.add("mapboxgl-"+C+"-anchor-"+M)}var zh,ph=function(E){function M(C,I){if(E.call(this),(C instanceof w.window.HTMLElement||I)&&(C=w.extend({element:C},I)),w.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=C&&C.anchor||"center",this._color=C&&C.color||"#3FB1CE",this._scale=C&&C.scale||1,this._draggable=C&&C.draggable||!1,this._clickTolerance=C&&C.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=C&&C.rotation||0,this._rotationAlignment=C&&C.rotationAlignment||"auto",this._pitchAlignment=C&&C.pitchAlignment&&C.pitchAlignment!=="auto"?C.pitchAlignment:this._rotationAlignment,C&&C.element)this._element=C.element,this._offset=w.Point.convert(C&&C.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var V=j.createNS("http://www.w3.org/2000/svg","svg");V.setAttributeNS(null,"display","block"),V.setAttributeNS(null,"height","41px"),V.setAttributeNS(null,"width","27px"),V.setAttributeNS(null,"viewBox","0 0 27 41");var ie=j.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"stroke","none"),ie.setAttributeNS(null,"stroke-width","1"),ie.setAttributeNS(null,"fill","none"),ie.setAttributeNS(null,"fill-rule","evenodd");var fe=j.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"fill-rule","nonzero");var Oe=j.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var ut=0,Et=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ut<Et.length;ut+=1){var Wt=Et[ut],Xt=j.createNS("http://www.w3.org/2000/svg","ellipse");Xt.setAttributeNS(null,"opacity","0.04"),Xt.setAttributeNS(null,"cx","10.5"),Xt.setAttributeNS(null,"cy","5.80029008"),Xt.setAttributeNS(null,"rx",Wt.rx),Xt.setAttributeNS(null,"ry",Wt.ry),Oe.appendChild(Xt)}var Kt=j.createNS("http://www.w3.org/2000/svg","g");Kt.setAttributeNS(null,"fill",this._color);var _r=j.createNS("http://www.w3.org/2000/svg","path");_r.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Kt.appendChild(_r);var dr=j.createNS("http://www.w3.org/2000/svg","g");dr.setAttributeNS(null,"opacity","0.25"),dr.setAttributeNS(null,"fill","#000000");var Pr=j.createNS("http://www.w3.org/2000/svg","path");Pr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),dr.appendChild(Pr);var cr=j.createNS("http://www.w3.org/2000/svg","g");cr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),cr.setAttributeNS(null,"fill","#FFFFFF");var Dr=j.createNS("http://www.w3.org/2000/svg","g");Dr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Wr=j.createNS("http://www.w3.org/2000/svg","circle");Wr.setAttributeNS(null,"fill","#000000"),Wr.setAttributeNS(null,"opacity","0.25"),Wr.setAttributeNS(null,"cx","5.5"),Wr.setAttributeNS(null,"cy","5.5"),Wr.setAttributeNS(null,"r","5.4999962");var rn=j.createNS("http://www.w3.org/2000/svg","circle");rn.setAttributeNS(null,"fill","#FFFFFF"),rn.setAttributeNS(null,"cx","5.5"),rn.setAttributeNS(null,"cy","5.5"),rn.setAttributeNS(null,"r","5.4999962"),Dr.appendChild(Wr),Dr.appendChild(rn),fe.appendChild(Oe),fe.appendChild(Kt),fe.appendChild(dr),fe.appendChild(cr),fe.appendChild(Dr),V.appendChild(fe),V.setAttributeNS(null,"height",41*this._scale+"px"),V.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(V),this._offset=w.Point.convert(C&&C.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(xn){xn.preventDefault()}),this._element.addEventListener("mousedown",function(xn){xn.preventDefault()}),rd(this._element,this._anchor,"marker"),this._popup=null}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.addTo=function(C){return this.remove(),this._map=C,C.getCanvasContainer().appendChild(this._element),C.on("move",this._update),C.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},M.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},M.prototype.getLngLat=function(){return this._lngLat},M.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},M.prototype.getElement=function(){return this._element},M.prototype.setPopup=function(C){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),C){if(!("offset"in C.options)){var I=Math.sqrt(Math.pow(13.5,2)/2);C.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(24.6+I)],"bottom-right":[-I,-1*(24.6+I)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=C,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},M.prototype._onKeyPress=function(C){var I=C.code,V=C.charCode||C.keyCode;I!=="Space"&&I!=="Enter"&&V!==32&&V!==13||this.togglePopup()},M.prototype._onMapClick=function(C){var I=C.originalEvent.target,V=this._element;this._popup&&(I===V||V.contains(I))&&this.togglePopup()},M.prototype.getPopup=function(){return this._popup},M.prototype.togglePopup=function(){var C=this._popup;return C?(C.isOpen()?C.remove():C.addTo(this._map),this):this},M.prototype._update=function(C){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Nh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var V="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?V="rotateX(0deg)":this._pitchAlignment==="map"&&(V="rotateX("+this._map.getPitch()+"deg)"),C&&C.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,Lc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+V+" "+I)}},M.prototype.getOffset=function(){return this._offset},M.prototype.setOffset=function(C){return this._offset=w.Point.convert(C),this._update(),this},M.prototype._onMove=function(C){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new w.Event("dragstart"))),this.fire(new w.Event("drag")))},M.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new w.Event("dragend")),this._state="inactive"},M.prototype._addDragHandler=function(C){this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},M.prototype.setDraggable=function(C){return this._draggable=!!C,this._map&&(C?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},M.prototype.isDraggable=function(){return this._draggable},M.prototype.setRotation=function(C){return this._rotation=C||0,this._update(),this},M.prototype.getRotation=function(){return this._rotation},M.prototype.setRotationAlignment=function(C){return this._rotationAlignment=C||"auto",this._update(),this},M.prototype.getRotationAlignment=function(){return this._rotationAlignment},M.prototype.setPitchAlignment=function(C){return this._pitchAlignment=C&&C!=="auto"?C:this._rotationAlignment,this._update(),this},M.prototype.getPitchAlignment=function(){return this._pitchAlignment},M}(w.Evented),bp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Uh=0,pn=!1,Mr=function(E){function M(C){E.call(this),this.options=w.extend({},bp,C),w.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.onAdd=function(C){var I;return this._map=C,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,zh!==void 0?I(zh):w.window.navigator.permissions!==void 0?w.window.navigator.permissions.query({name:"geolocation"}).then(function(V){I(zh=V.state!=="denied")}):I(zh=!!w.window.navigator.geolocation),this._container},M.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Uh=0,pn=!1},M.prototype._isOutOfMapMaxBounds=function(C){var I=this._map.getMaxBounds(),V=C.coords;return I&&(V.longitude<I.getWest()||V.longitude>I.getEast()||V.latitude<I.getSouth()||V.latitude>I.getNorth())},M.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},M.prototype._onSuccess=function(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new w.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("geolocate",C)),this._finish()}},M.prototype._updateCamera=function(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude),V=C.coords.accuracy,ie=this._map.getBearing(),fe=w.extend({bearing:ie},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(V),fe,{geolocateSource:!0})},M.prototype._updateMarker=function(C){if(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},M.prototype._updateCircleRadius=function(){var C=this._map._container.clientHeight/2,I=this._map.unproject([0,C]),V=this._map.unproject([1,C]),ie=I.distanceTo(V),fe=Math.ceil(2*this._accuracy/ie);this._circleElement.style.width=fe+"px",this._circleElement.style.height=fe+"px"},M.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},M.prototype._onError=function(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&pn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("error",C)),this._finish()}},M.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},M.prototype._setupUI=function(C){var I=this;if(this._container.addEventListener("contextmenu",function(fe){return fe.preventDefault()}),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",C===!1){w.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var V=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V)}else{var ie=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ie,this._geolocateButton.setAttribute("aria-label",ie)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ph(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ph({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(fe){fe.geolocateSource||I._watchState!=="ACTIVE_LOCK"||fe.originalEvent&&fe.originalEvent.type==="resize"||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new w.Event("trackuserlocationend")))})},M.prototype.trigger=function(){if(!this._setup)return w.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new w.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Uh--,pn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new w.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new w.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Uh>1?(C={maximumAge:6e5,timeout:0},pn=!0):(C=this.options.positionOptions,pn=!1),this._geolocationWatchID=w.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else w.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},M.prototype._clearWatch=function(){w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},M}(w.Evented),Ve={maxWidth:100,unit:"metric"},Fc=function(E){this.options=w.extend({},Ve,E),w.bindAll(["_onMove","setUnit"],this)};function Jt(E,M,C){var I=C&&C.maxWidth||100,V=E._container.clientHeight/2,ie=E.unproject([0,V]),fe=E.unproject([I,V]),Oe=ie.distanceTo(fe);if(C&&C.unit==="imperial"){var ut=3.2808*Oe;ut>5280?Bf(M,I,ut/5280,E._getUIString("ScaleControl.Miles")):Bf(M,I,ut,E._getUIString("ScaleControl.Feet"))}else C&&C.unit==="nautical"?Bf(M,I,Oe/1852,E._getUIString("ScaleControl.NauticalMiles")):Oe>=1e3?Bf(M,I,Oe/1e3,E._getUIString("ScaleControl.Kilometers")):Bf(M,I,Oe,E._getUIString("ScaleControl.Meters"))}function Bf(E,M,C,I){var V,ie,fe,Oe=(V=C,(ie=Math.pow(10,(""+Math.floor(V)).length-1))*(fe=(fe=V/ie)>=10?10:fe>=5?5:fe>=3?3:fe>=2?2:fe>=1?1:function(ut){var Et=Math.pow(10,Math.ceil(-Math.log(ut)/Math.LN10));return Math.round(ut*Et)/Et}(fe)));E.style.width=M*(Oe/C)+"px",E.innerHTML=Oe+"&nbsp;"+I}Fc.prototype.getDefaultPosition=function(){return"bottom-left"},Fc.prototype._onMove=function(){Jt(this._map,this._container,this.options)},Fc.prototype.onAdd=function(E){return this._map=E,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Fc.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Fc.prototype.setUnit=function(E){this.options.unit=E,Jt(this._map,this._container,this.options)};var Es=function(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof w.window.HTMLElement?this._container=E.container:w.warnOnce("Full screen control 'container' must be a DOM element.")),w.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in w.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in w.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in w.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in w.window.document&&(this._fullscreenchange="MSFullscreenChange")};Es.prototype.onAdd=function(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",w.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Es.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,w.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Es.prototype._checkFullscreenSupport=function(){return!!(w.window.document.fullscreenEnabled||w.window.document.mozFullScreenEnabled||w.window.document.msFullscreenEnabled||w.window.document.webkitFullscreenEnabled)},Es.prototype._setupUI=function(){var E=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",E).setAttribute("aria-hidden",!0),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),w.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Es.prototype._updateTitle=function(){var E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E},Es.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Es.prototype._isFullscreen=function(){return this._fullscreen},Es.prototype._changeIcon=function(){(w.window.document.fullscreenElement||w.window.document.mozFullScreenElement||w.window.document.webkitFullscreenElement||w.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Es.prototype._onClickFullscreen=function(){this._isFullscreen()?w.window.document.exitFullscreen?w.window.document.exitFullscreen():w.window.document.mozCancelFullScreen?w.window.document.mozCancelFullScreen():w.window.document.msExitFullscreen?w.window.document.msExitFullscreen():w.window.document.webkitCancelFullScreen&&w.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Sp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ul=function(E){function M(C){E.call(this),this.options=w.extend(Object.create(Sp),C),w.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return E&&(M.__proto__=E),(M.prototype=Object.create(E&&E.prototype)).constructor=M,M.prototype.addTo=function(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new w.Event("open")),this},M.prototype.isOpen=function(){return!!this._map},M.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new w.Event("close")),this},M.prototype.getLngLat=function(){return this._lngLat},M.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},M.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},M.prototype.getElement=function(){return this._container},M.prototype.setText=function(C){return this.setDOMContent(w.window.document.createTextNode(C))},M.prototype.setHTML=function(C){var I,V=w.window.document.createDocumentFragment(),ie=w.window.document.createElement("body");for(ie.innerHTML=C;I=ie.firstChild;)V.appendChild(I);return this.setDOMContent(V)},M.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},M.prototype.setMaxWidth=function(C){return this.options.maxWidth=C,this._update(),this},M.prototype.setDOMContent=function(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this},M.prototype.addClassName=function(C){this._container&&this._container.classList.add(C)},M.prototype.removeClassName=function(C){this._container&&this._container.classList.remove(C)},M.prototype.setOffset=function(C){return this.options.offset=C,this._update(),this},M.prototype.toggleClassName=function(C){if(this._container)return this._container.classList.toggle(C)},M.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},M.prototype._onMouseUp=function(C){this._update(C.point)},M.prototype._onMouseMove=function(C){this._update(C.point)},M.prototype._onDrag=function(C){this._update(C.point)},M.prototype._update=function(C){var I=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Xt){return I._container.classList.add(Xt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Nh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||C)){var V=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat),ie=this.options.anchor,fe=function Xt(Kt){if(Kt){if(typeof Kt=="number"){var _r=Math.round(Math.sqrt(.5*Math.pow(Kt,2)));return{center:new w.Point(0,0),top:new w.Point(0,Kt),"top-left":new w.Point(_r,_r),"top-right":new w.Point(-_r,_r),bottom:new w.Point(0,-Kt),"bottom-left":new w.Point(_r,-_r),"bottom-right":new w.Point(-_r,-_r),left:new w.Point(Kt,0),right:new w.Point(-Kt,0)}}if(Kt instanceof w.Point||Array.isArray(Kt)){var dr=w.Point.convert(Kt);return{center:dr,top:dr,"top-left":dr,"top-right":dr,bottom:dr,"bottom-left":dr,"bottom-right":dr,left:dr,right:dr}}return{center:w.Point.convert(Kt.center||[0,0]),top:w.Point.convert(Kt.top||[0,0]),"top-left":w.Point.convert(Kt["top-left"]||[0,0]),"top-right":w.Point.convert(Kt["top-right"]||[0,0]),bottom:w.Point.convert(Kt.bottom||[0,0]),"bottom-left":w.Point.convert(Kt["bottom-left"]||[0,0]),"bottom-right":w.Point.convert(Kt["bottom-right"]||[0,0]),left:w.Point.convert(Kt.left||[0,0]),right:w.Point.convert(Kt.right||[0,0])}}return Xt(new w.Point(0,0))}(this.options.offset);if(!ie){var Oe,ut=this._container.offsetWidth,Et=this._container.offsetHeight;Oe=V.y+fe.bottom.y<Et?["top"]:V.y>this._map.transform.height-Et?["bottom"]:[],V.x<ut/2?Oe.push("left"):V.x>this._map.transform.width-ut/2&&Oe.push("right"),ie=Oe.length===0?"bottom":Oe.join("-")}var Wt=V.add(fe[ie]).round();j.setTransform(this._container,Lc[ie]+" translate("+Wt.x+"px,"+Wt.y+"px)"),rd(this._container,ie,"popup")}},M.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var C=this._container.querySelector(Nf);C&&C.focus()}},M.prototype._onClose=function(){this.remove()},M}(w.Evented),Ep={version:w.version,supported:X,setRTLTextPlugin:w.setRTLTextPlugin,getRTLTextPluginStatus:w.getRTLTextPluginStatus,Map:td,NavigationControl:yc,GeolocateControl:Mr,AttributionControl:bl,ScaleControl:Fc,FullscreenControl:Es,Popup:Ul,Marker:ph,Style:Ms,LngLat:w.LngLat,LngLatBounds:w.LngLatBounds,Point:w.Point,MercatorCoordinate:w.MercatorCoordinate,Evented:w.Evented,config:w.config,prewarm:function(){ln().acquire(Nt)},clearPrewarmedResources:function(){var E=ei;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(Nt),ei=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return w.config.ACCESS_TOKEN},set accessToken(E){w.config.ACCESS_TOKEN=E},get baseApiUrl(){return w.config.API_URL},set baseApiUrl(E){w.config.API_URL=E},get workerCount(){return wn.workerCount},set workerCount(E){wn.workerCount=E},get maxParallelImageRequests(){return w.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){w.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage:function(E){w.clearTileCache(E)},workerUrl:""};return Ep}),H})},3614:function(vt,N,k){"use strict";vt.exports=W;var H=k(80645);function W(ke){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ke)?ke:new Uint8Array(ke||0),this.pos=0,this.type=0,this.length=this.buf.length}W.Varint=0,W.Fixed64=1,W.Bytes=2,W.Fixed32=5;var w=65536*65536,X=1/w,j=12,ee=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");W.prototype={destroy:function(){this.buf=null},readFields:function(ke,tt,ae){for(ae=ae||this.length;this.pos<ae;){var Ke=this.readVarint(),he=Ke>>3,Pe=this.pos;this.type=Ke&7,ke(he,tt,this),this.pos===Pe&&this.skip(Ke)}return tt},readMessage:function(ke,tt){return this.readFields(ke,tt,this.readVarint()+this.pos)},readFixed32:function(){var ke=_e(this.buf,this.pos);return this.pos+=4,ke},readSFixed32:function(){var ke=Re(this.buf,this.pos);return this.pos+=4,ke},readFixed64:function(){var ke=_e(this.buf,this.pos)+_e(this.buf,this.pos+4)*w;return this.pos+=8,ke},readSFixed64:function(){var ke=_e(this.buf,this.pos)+Re(this.buf,this.pos+4)*w;return this.pos+=8,ke},readFloat:function(){var ke=H.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ke},readDouble:function(){var ke=H.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ke},readVarint:function(ke){var tt=this.buf,ae,Ke;return Ke=tt[this.pos++],ae=Ke&127,Ke<128||(Ke=tt[this.pos++],ae|=(Ke&127)<<7,Ke<128)||(Ke=tt[this.pos++],ae|=(Ke&127)<<14,Ke<128)||(Ke=tt[this.pos++],ae|=(Ke&127)<<21,Ke<128)?ae:(Ke=tt[this.pos],ae|=(Ke&15)<<28,Y(ae,ke,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ke=this.readVarint();return ke%2===1?(ke+1)/-2:ke/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ke=this.readVarint()+this.pos,tt=this.pos;return this.pos=ke,ke-tt>=j&&ee?Ge(this.buf,tt,ke):ze(this.buf,tt,ke)},readBytes:function(){var ke=this.readVarint()+this.pos,tt=this.buf.subarray(this.pos,ke);return this.pos=ke,tt},readPackedVarint:function(ke,tt){if(this.type!==W.Bytes)return ke.push(this.readVarint(tt));var ae=re(this);for(ke=ke||[];this.pos<ae;)ke.push(this.readVarint(tt));return ke},readPackedSVarint:function(ke){if(this.type!==W.Bytes)return ke.push(this.readSVarint());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readSVarint());return ke},readPackedBoolean:function(ke){if(this.type!==W.Bytes)return ke.push(this.readBoolean());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readBoolean());return ke},readPackedFloat:function(ke){if(this.type!==W.Bytes)return ke.push(this.readFloat());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readFloat());return ke},readPackedDouble:function(ke){if(this.type!==W.Bytes)return ke.push(this.readDouble());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readDouble());return ke},readPackedFixed32:function(ke){if(this.type!==W.Bytes)return ke.push(this.readFixed32());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readFixed32());return ke},readPackedSFixed32:function(ke){if(this.type!==W.Bytes)return ke.push(this.readSFixed32());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readSFixed32());return ke},readPackedFixed64:function(ke){if(this.type!==W.Bytes)return ke.push(this.readFixed64());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readFixed64());return ke},readPackedSFixed64:function(ke){if(this.type!==W.Bytes)return ke.push(this.readSFixed64());var tt=re(this);for(ke=ke||[];this.pos<tt;)ke.push(this.readSFixed64());return ke},skip:function(ke){var tt=ke&7;if(tt===W.Varint)for(;this.buf[this.pos++]>127;);else if(tt===W.Bytes)this.pos=this.readVarint()+this.pos;else if(tt===W.Fixed32)this.pos+=4;else if(tt===W.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+tt)},writeTag:function(ke,tt){this.writeVarint(ke<<3|tt)},realloc:function(ke){for(var tt=this.length||16;tt<this.pos+ke;)tt*=2;if(tt!==this.length){var ae=new Uint8Array(tt);ae.set(this.buf),this.buf=ae,this.length=tt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ke){this.realloc(4),we(this.buf,ke,this.pos),this.pos+=4},writeSFixed32:function(ke){this.realloc(4),we(this.buf,ke,this.pos),this.pos+=4},writeFixed64:function(ke){this.realloc(8),we(this.buf,ke&-1,this.pos),we(this.buf,Math.floor(ke*X),this.pos+4),this.pos+=8},writeSFixed64:function(ke){this.realloc(8),we(this.buf,ke&-1,this.pos),we(this.buf,Math.floor(ke*X),this.pos+4),this.pos+=8},writeVarint:function(ke){if(ke=+ke||0,ke>268435455||ke<0){ye(ke,this);return}this.realloc(4),this.buf[this.pos++]=ke&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=(ke>>>=7)&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=(ke>>>=7)&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=ke>>>7&127)))},writeSVarint:function(ke){this.writeVarint(ke<0?-ke*2-1:ke*2)},writeBoolean:function(ke){this.writeVarint(!!ke)},writeString:function(ke){ke=String(ke),this.realloc(ke.length*4),this.pos++;var tt=this.pos;this.pos=yt(this.buf,ke,this.pos);var ae=this.pos-tt;ae>=128&&$(tt,ae,this),this.pos=tt-1,this.writeVarint(ae),this.pos+=ae},writeFloat:function(ke){this.realloc(4),H.write(this.buf,ke,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ke){this.realloc(8),H.write(this.buf,ke,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ke){var tt=ke.length;this.writeVarint(tt),this.realloc(tt);for(var ae=0;ae<tt;ae++)this.buf[this.pos++]=ke[ae]},writeRawMessage:function(ke,tt){this.pos++;var ae=this.pos;ke(tt,this);var Ke=this.pos-ae;Ke>=128&&$(ae,Ke,this),this.pos=ae-1,this.writeVarint(Ke),this.pos+=Ke},writeMessage:function(ke,tt,ae){this.writeTag(ke,W.Bytes),this.writeRawMessage(tt,ae)},writePackedVarint:function(ke,tt){tt.length&&this.writeMessage(ke,A,tt)},writePackedSVarint:function(ke,tt){tt.length&&this.writeMessage(ke,b,tt)},writePackedBoolean:function(ke,tt){tt.length&&this.writeMessage(ke,Ae,tt)},writePackedFloat:function(ke,tt){tt.length&&this.writeMessage(ke,te,tt)},writePackedDouble:function(ke,tt){tt.length&&this.writeMessage(ke,le,tt)},writePackedFixed32:function(ke,tt){tt.length&&this.writeMessage(ke,De,tt)},writePackedSFixed32:function(ke,tt){tt.length&&this.writeMessage(ke,Ne,tt)},writePackedFixed64:function(ke,tt){tt.length&&this.writeMessage(ke,Te,tt)},writePackedSFixed64:function(ke,tt){tt.length&&this.writeMessage(ke,We,tt)},writeBytesField:function(ke,tt){this.writeTag(ke,W.Bytes),this.writeBytes(tt)},writeFixed32Field:function(ke,tt){this.writeTag(ke,W.Fixed32),this.writeFixed32(tt)},writeSFixed32Field:function(ke,tt){this.writeTag(ke,W.Fixed32),this.writeSFixed32(tt)},writeFixed64Field:function(ke,tt){this.writeTag(ke,W.Fixed64),this.writeFixed64(tt)},writeSFixed64Field:function(ke,tt){this.writeTag(ke,W.Fixed64),this.writeSFixed64(tt)},writeVarintField:function(ke,tt){this.writeTag(ke,W.Varint),this.writeVarint(tt)},writeSVarintField:function(ke,tt){this.writeTag(ke,W.Varint),this.writeSVarint(tt)},writeStringField:function(ke,tt){this.writeTag(ke,W.Bytes),this.writeString(tt)},writeFloatField:function(ke,tt){this.writeTag(ke,W.Fixed32),this.writeFloat(tt)},writeDoubleField:function(ke,tt){this.writeTag(ke,W.Fixed64),this.writeDouble(tt)},writeBooleanField:function(ke,tt){this.writeVarintField(ke,!!tt)}};function Y(ke,tt,ae){var Ke=ae.buf,he,Pe;if(Pe=Ke[ae.pos++],he=(Pe&112)>>4,Pe<128||(Pe=Ke[ae.pos++],he|=(Pe&127)<<3,Pe<128)||(Pe=Ke[ae.pos++],he|=(Pe&127)<<10,Pe<128)||(Pe=Ke[ae.pos++],he|=(Pe&127)<<17,Pe<128)||(Pe=Ke[ae.pos++],he|=(Pe&127)<<24,Pe<128)||(Pe=Ke[ae.pos++],he|=(Pe&1)<<31,Pe<128))return Q(ke,he,tt);throw new Error("Expected varint not more than 10 bytes")}function re(ke){return ke.type===W.Bytes?ke.readVarint()+ke.pos:ke.pos+1}function Q(ke,tt,ae){return ae?tt*4294967296+(ke>>>0):(tt>>>0)*4294967296+(ke>>>0)}function ye(ke,tt){var ae,Ke;if(ke>=0?(ae=ke%4294967296|0,Ke=ke/4294967296|0):(ae=~(-ke%4294967296),Ke=~(-ke/4294967296),ae^4294967295?ae=ae+1|0:(ae=0,Ke=Ke+1|0)),ke>=18446744073709552e3||ke<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");tt.realloc(10),se(ae,Ke,tt),ne(Ke,tt)}function se(ke,tt,ae){ae.buf[ae.pos++]=ke&127|128,ke>>>=7,ae.buf[ae.pos++]=ke&127|128,ke>>>=7,ae.buf[ae.pos++]=ke&127|128,ke>>>=7,ae.buf[ae.pos++]=ke&127|128,ke>>>=7,ae.buf[ae.pos]=ke&127}function ne(ke,tt){var ae=(ke&7)<<4;tt.buf[tt.pos++]|=ae|((ke>>>=3)?128:0),ke&&(tt.buf[tt.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(tt.buf[tt.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(tt.buf[tt.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(tt.buf[tt.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(tt.buf[tt.pos++]=ke&127)))))}function $(ke,tt,ae){var Ke=tt<=16383?1:tt<=2097151?2:tt<=268435455?3:Math.floor(Math.log(tt)/(Math.LN2*7));ae.realloc(Ke);for(var he=ae.pos-1;he>=ke;he--)ae.buf[he+Ke]=ae.buf[he]}function A(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeVarint(ke[ae])}function b(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeSVarint(ke[ae])}function te(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeFloat(ke[ae])}function le(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeDouble(ke[ae])}function Ae(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeBoolean(ke[ae])}function De(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeFixed32(ke[ae])}function Ne(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeSFixed32(ke[ae])}function Te(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeFixed64(ke[ae])}function We(ke,tt){for(var ae=0;ae<ke.length;ae++)tt.writeSFixed64(ke[ae])}function _e(ke,tt){return(ke[tt]|ke[tt+1]<<8|ke[tt+2]<<16)+ke[tt+3]*16777216}function we(ke,tt,ae){ke[ae]=tt,ke[ae+1]=tt>>>8,ke[ae+2]=tt>>>16,ke[ae+3]=tt>>>24}function Re(ke,tt){return(ke[tt]|ke[tt+1]<<8|ke[tt+2]<<16)+(ke[tt+3]<<24)}function ze(ke,tt,ae){for(var Ke="",he=tt;he<ae;){var Pe=ke[he],lt=null,He=Pe>239?4:Pe>223?3:Pe>191?2:1;if(he+He>ae)break;var Ue,Qe,Se;He===1?Pe<128&&(lt=Pe):He===2?(Ue=ke[he+1],(Ue&192)===128&&(lt=(Pe&31)<<6|Ue&63,lt<=127&&(lt=null))):He===3?(Ue=ke[he+1],Qe=ke[he+2],(Ue&192)===128&&(Qe&192)===128&&(lt=(Pe&15)<<12|(Ue&63)<<6|Qe&63,(lt<=2047||lt>=55296&&lt<=57343)&&(lt=null))):He===4&&(Ue=ke[he+1],Qe=ke[he+2],Se=ke[he+3],(Ue&192)===128&&(Qe&192)===128&&(Se&192)===128&&(lt=(Pe&15)<<18|(Ue&63)<<12|(Qe&63)<<6|Se&63,(lt<=65535||lt>=1114112)&&(lt=null))),lt===null?(lt=65533,He=1):lt>65535&&(lt-=65536,Ke+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|lt&1023),Ke+=String.fromCharCode(lt),he+=He}return Ke}function Ge(ke,tt,ae){return ee.decode(ke.subarray(tt,ae))}function yt(ke,tt,ae){for(var Ke=0,he,Pe;Ke<tt.length;Ke++){if(he=tt.charCodeAt(Ke),he>55295&&he<57344)if(Pe)if(he<56320){ke[ae++]=239,ke[ae++]=191,ke[ae++]=189,Pe=he;continue}else he=Pe-55296<<10|he-56320|65536,Pe=null;else{he>56319||Ke+1===tt.length?(ke[ae++]=239,ke[ae++]=191,ke[ae++]=189):Pe=he;continue}else Pe&&(ke[ae++]=239,ke[ae++]=191,ke[ae++]=189,Pe=null);he<128?ke[ae++]=he:(he<2048?ke[ae++]=he>>6|192:(he<65536?ke[ae++]=he>>12|224:(ke[ae++]=he>>18|240,ke[ae++]=he>>12&63|128),ke[ae++]=he>>6&63|128),ke[ae++]=he&63|128)}return ae}},73807:function(vt){"use strict";var N=vt.exports;vt.exports.isNumber=function(k){return typeof k=="number"},vt.exports.findMin=function(k){if(k.length===0)return 1/0;for(var H=k[0],W=1;W<k.length;W++)H=Math.min(H,k[W]);return H},vt.exports.findMax=function(k){if(k.length===0)return-1/0;for(var H=k[0],W=1;W<k.length;W++)H=Math.max(H,k[W]);return H},vt.exports.findMinMulti=function(k){for(var H=N.findMin(k[0]),W=1;W<k.length;W++)H=Math.min(H,N.findMin(k[W]));return H},vt.exports.findMaxMulti=function(k){for(var H=N.findMax(k[0]),W=1;W<k.length;W++)H=Math.max(H,N.findMax(k[W]));return H},vt.exports.inside=function(k,H,W){return k<=W&&W<=H}},53843:function(vt,N,k){"use strict";var H=50,W=2,w=Math.log(2),X=vt.exports,j=k(73807);function ee(re){return 1-Math.abs(re)}vt.exports.getUnifiedMinMax=function(re,Q){return X.getUnifiedMinMaxMulti([re],Q)},vt.exports.getUnifiedMinMaxMulti=function(re,Q){Q=Q||{};var ye=!1,se=!1,ne=j.isNumber(Q.width)?Q.width:W,$=j.isNumber(Q.size)?Q.size:H,A=j.isNumber(Q.min)?Q.min:(ye=!0,j.findMinMulti(re)),b=j.isNumber(Q.max)?Q.max:(se=!0,j.findMaxMulti(re)),te=b-A,le=te/($-1);return ye&&(A=A-2*ne*le),se&&(b=b+2*ne*le),{min:A,max:b}},vt.exports.create=function(re,Q){if(Q=Q||{},!re||re.length===0)return[];var ye=j.isNumber(Q.size)?Q.size:H,se=j.isNumber(Q.width)?Q.width:W,ne=X.getUnifiedMinMax(re,{size:ye,width:se,min:Q.min,max:Q.max}),$=ne.min,A=ne.max,b=A-$,te=b/(ye-1);if(b===0)return[{x:$,y:1}];for(var le=[],Ae=0;Ae<ye;Ae++)le.push({x:$+Ae*te,y:0});var De=function(Ge){return Math.floor((Ge-$)/te)},Ne=Y(ee,se),Te=Ne[se],We=Ne[se-1]-Ne[se-2],_e=0;re.forEach(function(Ge){var yt=De(Ge);if(!(yt+se<0||yt-se>=le.length)){var ke=Math.max(yt-se,0),tt=yt,ae=Math.min(yt+se,le.length-1),Ke=ke-(yt-se),he=yt+se-ae,Pe=Ne[-se-1+Ke]||0,lt=Ne[-se-1+he]||0,He=Te/(Te-Pe-lt);Ke>0&&(_e+=He*(Ke-1)*We);var Ue=Math.max(0,yt-se+1);j.inside(0,le.length-1,Ue)&&(le[Ue].y+=He*1*We),j.inside(0,le.length-1,tt+1)&&(le[tt+1].y-=He*2*We),j.inside(0,le.length-1,ae+1)&&(le[ae+1].y+=He*1*We)}});var we=_e,Re=0,ze=0;return le.forEach(function(Ge){Re+=Ge.y,we+=Re,Ge.y=we,ze+=we}),ze>0&&le.forEach(function(Ge){Ge.y/=ze}),le};function Y(re,Q){for(var ye={},se=0,ne=-Q;ne<=Q;ne++)se+=re(ne/Q),ye[ne]=se;return ye}vt.exports.getExpectedValueFromPdf=function(re){if(!(!re||re.length===0)){var Q=0;return re.forEach(function(ye){Q+=ye.x*ye.y}),Q}},vt.exports.getXWithLeftTailArea=function(re,Q){if(!(!re||re.length===0)){for(var ye=0,se=0,ne=0;ne<re.length&&(se=ne,ye+=re[ne].y,!(ye>=Q));ne++);return re[se].x}},vt.exports.getPerplexity=function(re){if(!(!re||re.length===0)){var Q=0;return re.forEach(function(ye){var se=Math.log(ye.y);isFinite(se)&&(Q+=ye.y*se)}),Q=-Q/w,Math.pow(2,Q)}}},32676:function(vt,N,k){var H=k(34155);(function(W,w){vt.exports=w()})(this,function(){"use strict";function W(ue,G){var oe={label:0,sent:function(){if(At[0]&1)throw At[1];return At[1]},trys:[],ops:[]},Ie,qe,At,rr;return rr={next:Zt(0),throw:Zt(1),return:Zt(2)},typeof Symbol=="function"&&(rr[Symbol.iterator]=function(){return this}),rr;function Zt(Pt){return function(ge){return wt([Pt,ge])}}function wt(Pt){if(Ie)throw new TypeError("Generator is already executing.");for(;oe;)try{if(Ie=1,qe&&(At=Pt[0]&2?qe.return:Pt[0]?qe.throw||((At=qe.return)&&At.call(qe),0):qe.next)&&!(At=At.call(qe,Pt[1])).done)return At;switch(qe=0,At&&(Pt=[Pt[0]&2,At.value]),Pt[0]){case 0:case 1:At=Pt;break;case 4:return oe.label++,{value:Pt[1],done:!1};case 5:oe.label++,qe=Pt[1],Pt=[0];continue;case 7:Pt=oe.ops.pop(),oe.trys.pop();continue;default:if(At=oe.trys,!(At=At.length>0&&At[At.length-1])&&(Pt[0]===6||Pt[0]===2)){oe=0;continue}if(Pt[0]===3&&(!At||Pt[1]>At[0]&&Pt[1]<At[3])){oe.label=Pt[1];break}if(Pt[0]===6&&oe.label<At[1]){oe.label=At[1],At=Pt;break}if(At&&oe.label<At[2]){oe.label=At[2],oe.ops.push(Pt);break}At[2]&&oe.ops.pop(),oe.trys.pop();continue}Pt=G.call(ue,oe)}catch(ge){Pt=[6,ge],qe=0}finally{Ie=At=0}if(Pt[0]&5)throw Pt[1];return{value:Pt[0]?Pt[1]:void 0,done:!0}}}var w=function(){function ue(G,oe){this.next=null,this.key=G,this.data=oe,this.left=null,this.right=null}return ue}();function X(ue,G){return ue>G?1:ue<G?-1:0}function j(ue,G,oe){for(var Ie=new w(null,null),qe=Ie,At=Ie;;){var rr=oe(ue,G.key);if(rr<0){if(G.left===null)break;if(oe(ue,G.left.key)<0){var Zt=G.left;if(G.left=Zt.right,Zt.right=G,G=Zt,G.left===null)break}At.left=G,At=G,G=G.left}else if(rr>0){if(G.right===null)break;if(oe(ue,G.right.key)>0){var Zt=G.right;if(G.right=Zt.left,Zt.left=G,G=Zt,G.right===null)break}qe.right=G,qe=G,G=G.right}else break}return qe.right=G.left,At.left=G.right,G.left=Ie.right,G.right=Ie.left,G}function ee(ue,G,oe,Ie){var qe=new w(ue,G);if(oe===null)return qe.left=qe.right=null,qe;oe=j(ue,oe,Ie);var At=Ie(ue,oe.key);return At<0?(qe.left=oe.left,qe.right=oe,oe.left=null):At>=0&&(qe.right=oe.right,qe.left=oe,oe.right=null),qe}function Y(ue,G,oe){var Ie=null,qe=null;if(G){G=j(ue,G,oe);var At=oe(G.key,ue);At===0?(Ie=G.left,qe=G.right):At<0?(qe=G.right,G.right=null,Ie=G):(Ie=G.left,G.left=null,qe=G)}return{left:Ie,right:qe}}function re(ue,G,oe){return G===null?ue:(ue===null||(G=j(ue.key,G,oe),G.left=ue),G)}function Q(ue,G,oe,Ie,qe){if(ue){Ie(""+G+(oe?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+qe(ue)+`
`);var At=G+(oe?"    ":"\u2502   ");ue.left&&Q(ue.left,At,!1,Ie,qe),ue.right&&Q(ue.right,At,!0,Ie,qe)}}var ye=function(){function ue(G){G===void 0&&(G=X),this._root=null,this._size=0,this._comparator=G}return ue.prototype.insert=function(G,oe){return this._size++,this._root=ee(G,oe,this._root,this._comparator)},ue.prototype.add=function(G,oe){var Ie=new w(G,oe);this._root===null&&(Ie.left=Ie.right=null,this._size++,this._root=Ie);var qe=this._comparator,At=j(G,this._root,qe),rr=qe(G,At.key);return rr===0?this._root=At:(rr<0?(Ie.left=At.left,Ie.right=At,At.left=null):rr>0&&(Ie.right=At.right,Ie.left=At,At.right=null),this._size++,this._root=Ie),this._root},ue.prototype.remove=function(G){this._root=this._remove(G,this._root,this._comparator)},ue.prototype._remove=function(G,oe,Ie){var qe;if(oe===null)return null;oe=j(G,oe,Ie);var At=Ie(G,oe.key);return At===0?(oe.left===null?qe=oe.right:(qe=j(G,oe.left,Ie),qe.right=oe.right),this._size--,qe):oe},ue.prototype.pop=function(){var G=this._root;if(G){for(;G.left;)G=G.left;return this._root=j(G.key,this._root,this._comparator),this._root=this._remove(G.key,this._root,this._comparator),{key:G.key,data:G.data}}return null},ue.prototype.findStatic=function(G){for(var oe=this._root,Ie=this._comparator;oe;){var qe=Ie(G,oe.key);if(qe===0)return oe;qe<0?oe=oe.left:oe=oe.right}return null},ue.prototype.find=function(G){return this._root&&(this._root=j(G,this._root,this._comparator),this._comparator(G,this._root.key)!==0)?null:this._root},ue.prototype.contains=function(G){for(var oe=this._root,Ie=this._comparator;oe;){var qe=Ie(G,oe.key);if(qe===0)return!0;qe<0?oe=oe.left:oe=oe.right}return!1},ue.prototype.forEach=function(G,oe){for(var Ie=this._root,qe=[],At=!1;!At;)Ie!==null?(qe.push(Ie),Ie=Ie.left):qe.length!==0?(Ie=qe.pop(),G.call(oe,Ie),Ie=Ie.right):At=!0;return this},ue.prototype.range=function(G,oe,Ie,qe){for(var At=[],rr=this._comparator,Zt=this._root,wt;At.length!==0||Zt;)if(Zt)At.push(Zt),Zt=Zt.left;else{if(Zt=At.pop(),wt=rr(Zt.key,oe),wt>0)break;if(rr(Zt.key,G)>=0&&Ie.call(qe,Zt))return this;Zt=Zt.right}return this},ue.prototype.keys=function(){var G=[];return this.forEach(function(oe){var Ie=oe.key;return G.push(Ie)}),G},ue.prototype.values=function(){var G=[];return this.forEach(function(oe){var Ie=oe.data;return G.push(Ie)}),G},ue.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ue.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ue.prototype.minNode=function(G){if(G===void 0&&(G=this._root),G)for(;G.left;)G=G.left;return G},ue.prototype.maxNode=function(G){if(G===void 0&&(G=this._root),G)for(;G.right;)G=G.right;return G},ue.prototype.at=function(G){for(var oe=this._root,Ie=!1,qe=0,At=[];!Ie;)if(oe)At.push(oe),oe=oe.left;else if(At.length>0){if(oe=At.pop(),qe===G)return oe;qe++,oe=oe.right}else Ie=!0;return null},ue.prototype.next=function(G){var oe=this._root,Ie=null;if(G.right){for(Ie=G.right;Ie.left;)Ie=Ie.left;return Ie}for(var qe=this._comparator;oe;){var At=qe(G.key,oe.key);if(At===0)break;At<0?(Ie=oe,oe=oe.left):oe=oe.right}return Ie},ue.prototype.prev=function(G){var oe=this._root,Ie=null;if(G.left!==null){for(Ie=G.left;Ie.right;)Ie=Ie.right;return Ie}for(var qe=this._comparator;oe;){var At=qe(G.key,oe.key);if(At===0)break;At<0?oe=oe.left:(Ie=oe,oe=oe.right)}return Ie},ue.prototype.clear=function(){return this._root=null,this._size=0,this},ue.prototype.toList=function(){return $(this._root)},ue.prototype.load=function(G,oe,Ie){oe===void 0&&(oe=[]),Ie===void 0&&(Ie=!1);var qe=G.length,At=this._comparator;if(Ie&&te(G,oe,0,qe-1,At),this._root===null)this._root=se(G,oe,0,qe),this._size=qe;else{var rr=b(this.toList(),ne(G,oe),At);qe=this._size+qe,this._root=A({head:rr},0,qe)}return this},ue.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ue.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ue.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ue.prototype.toString=function(G){G===void 0&&(G=function(Ie){return String(Ie.key)});var oe=[];return Q(this._root,"",!0,function(Ie){return oe.push(Ie)},G),oe.join("")},ue.prototype.update=function(G,oe,Ie){var qe=this._comparator,At=Y(G,this._root,qe),rr=At.left,Zt=At.right;qe(G,oe)<0?Zt=ee(oe,Ie,Zt,qe):rr=ee(oe,Ie,rr,qe),this._root=re(rr,Zt,qe)},ue.prototype.split=function(G){return Y(G,this._root,this._comparator)},ue.prototype[Symbol.iterator]=function(){var G,oe,Ie;return W(this,function(qe){switch(qe.label){case 0:G=this._root,oe=[],Ie=!1,qe.label=1;case 1:return Ie?[3,6]:G===null?[3,2]:(oe.push(G),G=G.left,[3,5]);case 2:return oe.length===0?[3,4]:(G=oe.pop(),[4,G]);case 3:return qe.sent(),G=G.right,[3,5];case 4:Ie=!0,qe.label=5;case 5:return[3,1];case 6:return[2]}})},ue}();function se(ue,G,oe,Ie){var qe=Ie-oe;if(qe>0){var At=oe+Math.floor(qe/2),rr=ue[At],Zt=G[At],wt=new w(rr,Zt);return wt.left=se(ue,G,oe,At),wt.right=se(ue,G,At+1,Ie),wt}return null}function ne(ue,G){for(var oe=new w(null,null),Ie=oe,qe=0;qe<ue.length;qe++)Ie=Ie.next=new w(ue[qe],G[qe]);return Ie.next=null,oe.next}function $(ue){for(var G=ue,oe=[],Ie=!1,qe=new w(null,null),At=qe;!Ie;)G?(oe.push(G),G=G.left):oe.length>0?(G=At=At.next=oe.pop(),G=G.right):Ie=!0;return At.next=null,qe.next}function A(ue,G,oe){var Ie=oe-G;if(Ie>0){var qe=G+Math.floor(Ie/2),At=A(ue,G,qe),rr=ue.head;return rr.left=At,ue.head=ue.head.next,rr.right=A(ue,qe+1,oe),rr}return null}function b(ue,G,oe){for(var Ie=new w(null,null),qe=Ie,At=ue,rr=G;At!==null&&rr!==null;)oe(At.key,rr.key)<0?(qe.next=At,At=At.next):(qe.next=rr,rr=rr.next),qe=qe.next;return At!==null?qe.next=At:rr!==null&&(qe.next=rr),Ie.next}function te(ue,G,oe,Ie,qe){if(!(oe>=Ie)){for(var At=ue[oe+Ie>>1],rr=oe-1,Zt=Ie+1;;){do rr++;while(qe(ue[rr],At)<0);do Zt--;while(qe(ue[Zt],At)>0);if(rr>=Zt)break;var wt=ue[rr];ue[rr]=ue[Zt],ue[Zt]=wt,wt=G[rr],G[rr]=G[Zt],G[Zt]=wt}te(ue,G,oe,Zt,qe),te(ue,G,Zt+1,Ie,qe)}}const le=(ue,G)=>ue.ll.x<=G.x&&G.x<=ue.ur.x&&ue.ll.y<=G.y&&G.y<=ue.ur.y,Ae=(ue,G)=>{if(G.ur.x<ue.ll.x||ue.ur.x<G.ll.x||G.ur.y<ue.ll.y||ue.ur.y<G.ll.y)return null;const oe=ue.ll.x<G.ll.x?G.ll.x:ue.ll.x,Ie=ue.ur.x<G.ur.x?ue.ur.x:G.ur.x,qe=ue.ll.y<G.ll.y?G.ll.y:ue.ll.y,At=ue.ur.y<G.ur.y?ue.ur.y:G.ur.y;return{ll:{x:oe,y:qe},ur:{x:Ie,y:At}}};let De=Number.EPSILON;De===void 0&&(De=Math.pow(2,-52));const Ne=De*De,Te=(ue,G)=>{if(-De<ue&&ue<De&&-De<G&&G<De)return 0;const oe=ue-G;return oe*oe<Ne*ue*G?0:ue<G?-1:1};class We{constructor(){this.reset()}reset(){this.xRounder=new _e,this.yRounder=new _e}round(G,oe){return{x:this.xRounder.round(G),y:this.yRounder.round(oe)}}}class _e{constructor(){this.tree=new ye,this.round(0)}round(G){const oe=this.tree.add(G),Ie=this.tree.prev(oe);if(Ie!==null&&Te(oe.key,Ie.key)===0)return this.tree.remove(G),Ie.key;const qe=this.tree.next(oe);return qe!==null&&Te(oe.key,qe.key)===0?(this.tree.remove(G),qe.key):G}}const we=new We,Re=11102230246251565e-32,ze=134217729,Ge=(3+8*Re)*Re;function yt(ue,G,oe,Ie,qe){let At,rr,Zt,wt,Pt=G[0],ge=Ie[0],ve=0,Fe=0;ge>Pt==ge>-Pt?(At=Pt,Pt=G[++ve]):(At=ge,ge=Ie[++Fe]);let nt=0;if(ve<ue&&Fe<oe)for(ge>Pt==ge>-Pt?(rr=Pt+At,Zt=At-(rr-Pt),Pt=G[++ve]):(rr=ge+At,Zt=At-(rr-ge),ge=Ie[++Fe]),At=rr,Zt!==0&&(qe[nt++]=Zt);ve<ue&&Fe<oe;)ge>Pt==ge>-Pt?(rr=At+Pt,wt=rr-At,Zt=At-(rr-wt)+(Pt-wt),Pt=G[++ve]):(rr=At+ge,wt=rr-At,Zt=At-(rr-wt)+(ge-wt),ge=Ie[++Fe]),At=rr,Zt!==0&&(qe[nt++]=Zt);for(;ve<ue;)rr=At+Pt,wt=rr-At,Zt=At-(rr-wt)+(Pt-wt),Pt=G[++ve],At=rr,Zt!==0&&(qe[nt++]=Zt);for(;Fe<oe;)rr=At+ge,wt=rr-At,Zt=At-(rr-wt)+(ge-wt),ge=Ie[++Fe],At=rr,Zt!==0&&(qe[nt++]=Zt);return(At!==0||nt===0)&&(qe[nt++]=At),nt}function ke(ue,G){let oe=G[0];for(let Ie=1;Ie<ue;Ie++)oe+=G[Ie];return oe}function tt(ue){return new Float64Array(ue)}const ae=(3+16*Re)*Re,Ke=(2+12*Re)*Re,he=(9+64*Re)*Re*Re,Pe=tt(4),lt=tt(8),He=tt(12),Ue=tt(16),Qe=tt(4);function Se(ue,G,oe,Ie,qe,At,rr){let Zt,wt,Pt,ge,ve,Fe,nt,St,$t,vr,Rt,ct,It,gr,Br,Nt,wn,ei;const ci=ue-qe,ln=oe-qe,ti=G-At,$n=Ie-At;gr=ci*$n,Fe=ze*ci,nt=Fe-(Fe-ci),St=ci-nt,Fe=ze*$n,$t=Fe-(Fe-$n),vr=$n-$t,Br=St*vr-(gr-nt*$t-St*$t-nt*vr),Nt=ti*ln,Fe=ze*ti,nt=Fe-(Fe-ti),St=ti-nt,Fe=ze*ln,$t=Fe-(Fe-ln),vr=ln-$t,wn=St*vr-(Nt-nt*$t-St*$t-nt*vr),Rt=Br-wn,ve=Br-Rt,Pe[0]=Br-(Rt+ve)+(ve-wn),ct=gr+Rt,ve=ct-gr,It=gr-(ct-ve)+(Rt-ve),Rt=It-Nt,ve=It-Rt,Pe[1]=It-(Rt+ve)+(ve-Nt),ei=ct+Rt,ve=ei-ct,Pe[2]=ct-(ei-ve)+(Rt-ve),Pe[3]=ei;let ri=ke(4,Pe),oa=Ke*rr;if(ri>=oa||-ri>=oa||(ve=ue-ci,Zt=ue-(ci+ve)+(ve-qe),ve=oe-ln,Pt=oe-(ln+ve)+(ve-qe),ve=G-ti,wt=G-(ti+ve)+(ve-At),ve=Ie-$n,ge=Ie-($n+ve)+(ve-At),Zt===0&&wt===0&&Pt===0&&ge===0)||(oa=he*rr+Ge*Math.abs(ri),ri+=ci*ge+$n*Zt-(ti*Pt+ln*wt),ri>=oa||-ri>=oa))return ri;gr=Zt*$n,Fe=ze*Zt,nt=Fe-(Fe-Zt),St=Zt-nt,Fe=ze*$n,$t=Fe-(Fe-$n),vr=$n-$t,Br=St*vr-(gr-nt*$t-St*$t-nt*vr),Nt=wt*ln,Fe=ze*wt,nt=Fe-(Fe-wt),St=wt-nt,Fe=ze*ln,$t=Fe-(Fe-ln),vr=ln-$t,wn=St*vr-(Nt-nt*$t-St*$t-nt*vr),Rt=Br-wn,ve=Br-Rt,Qe[0]=Br-(Rt+ve)+(ve-wn),ct=gr+Rt,ve=ct-gr,It=gr-(ct-ve)+(Rt-ve),Rt=It-Nt,ve=It-Rt,Qe[1]=It-(Rt+ve)+(ve-Nt),ei=ct+Rt,ve=ei-ct,Qe[2]=ct-(ei-ve)+(Rt-ve),Qe[3]=ei;const yi=yt(4,Pe,4,Qe,lt);gr=ci*ge,Fe=ze*ci,nt=Fe-(Fe-ci),St=ci-nt,Fe=ze*ge,$t=Fe-(Fe-ge),vr=ge-$t,Br=St*vr-(gr-nt*$t-St*$t-nt*vr),Nt=ti*Pt,Fe=ze*ti,nt=Fe-(Fe-ti),St=ti-nt,Fe=ze*Pt,$t=Fe-(Fe-Pt),vr=Pt-$t,wn=St*vr-(Nt-nt*$t-St*$t-nt*vr),Rt=Br-wn,ve=Br-Rt,Qe[0]=Br-(Rt+ve)+(ve-wn),ct=gr+Rt,ve=ct-gr,It=gr-(ct-ve)+(Rt-ve),Rt=It-Nt,ve=It-Rt,Qe[1]=It-(Rt+ve)+(ve-Nt),ei=ct+Rt,ve=ei-ct,Qe[2]=ct-(ei-ve)+(Rt-ve),Qe[3]=ei;const ya=yt(yi,lt,4,Qe,He);gr=Zt*ge,Fe=ze*Zt,nt=Fe-(Fe-Zt),St=Zt-nt,Fe=ze*ge,$t=Fe-(Fe-ge),vr=ge-$t,Br=St*vr-(gr-nt*$t-St*$t-nt*vr),Nt=wt*Pt,Fe=ze*wt,nt=Fe-(Fe-wt),St=wt-nt,Fe=ze*Pt,$t=Fe-(Fe-Pt),vr=Pt-$t,wn=St*vr-(Nt-nt*$t-St*$t-nt*vr),Rt=Br-wn,ve=Br-Rt,Qe[0]=Br-(Rt+ve)+(ve-wn),ct=gr+Rt,ve=ct-gr,It=gr-(ct-ve)+(Rt-ve),Rt=It-Nt,ve=It-Rt,Qe[1]=It-(Rt+ve)+(ve-Nt),ei=ct+Rt,ve=ei-ct,Qe[2]=ct-(ei-ve)+(Rt-ve),Qe[3]=ei;const Ya=yt(ya,He,4,Qe,Ue);return Ue[Ya-1]}function xe(ue,G,oe,Ie,qe,At){const rr=(G-At)*(oe-qe),Zt=(ue-qe)*(Ie-At),wt=rr-Zt,Pt=Math.abs(rr+Zt);return Math.abs(wt)>=ae*Pt?wt:-Se(ue,G,oe,Ie,qe,At,Pt)}const rt=(ue,G)=>ue.x*G.y-ue.y*G.x,Je=(ue,G)=>ue.x*G.x+ue.y*G.y,dt=(ue,G,oe)=>{const Ie=xe(ue.x,ue.y,G.x,G.y,oe.x,oe.y);return Ie>0?-1:Ie<0?1:0},Bt=ue=>Math.sqrt(Je(ue,ue)),Ye=(ue,G,oe)=>{const Ie={x:G.x-ue.x,y:G.y-ue.y},qe={x:oe.x-ue.x,y:oe.y-ue.y};return rt(qe,Ie)/Bt(qe)/Bt(Ie)},Xe=(ue,G,oe)=>{const Ie={x:G.x-ue.x,y:G.y-ue.y},qe={x:oe.x-ue.x,y:oe.y-ue.y};return Je(qe,Ie)/Bt(qe)/Bt(Ie)},Le=(ue,G,oe)=>G.y===0?null:{x:ue.x+G.x/G.y*(oe-ue.y),y:oe},je=(ue,G,oe)=>G.x===0?null:{x:oe,y:ue.y+G.y/G.x*(oe-ue.x)},at=(ue,G,oe,Ie)=>{if(G.x===0)return je(oe,Ie,ue.x);if(Ie.x===0)return je(ue,G,oe.x);if(G.y===0)return Le(oe,Ie,ue.y);if(Ie.y===0)return Le(ue,G,oe.y);const qe=rt(G,Ie);if(qe==0)return null;const At={x:oe.x-ue.x,y:oe.y-ue.y},rr=rt(At,G)/qe,Zt=rt(At,Ie)/qe,wt=ue.x+Zt*G.x,Pt=oe.x+rr*Ie.x,ge=ue.y+Zt*G.y,ve=oe.y+rr*Ie.y,Fe=(wt+Pt)/2,nt=(ge+ve)/2;return{x:Fe,y:nt}};class Me{static compare(G,oe){const Ie=Me.comparePoints(G.point,oe.point);return Ie!==0?Ie:(G.point!==oe.point&&G.link(oe),G.isLeft!==oe.isLeft?G.isLeft?1:-1:_t.compare(G.segment,oe.segment))}static comparePoints(G,oe){return G.x<oe.x?-1:G.x>oe.x?1:G.y<oe.y?-1:G.y>oe.y?1:0}constructor(G,oe){G.events===void 0?G.events=[this]:G.events.push(this),this.point=G,this.isLeft=oe}link(G){if(G.point===this.point)throw new Error("Tried to link already linked events");const oe=G.point.events;for(let Ie=0,qe=oe.length;Ie<qe;Ie++){const At=oe[Ie];this.point.events.push(At),At.point=this.point}this.checkForConsuming()}checkForConsuming(){const G=this.point.events.length;for(let oe=0;oe<G;oe++){const Ie=this.point.events[oe];if(Ie.segment.consumedBy===void 0)for(let qe=oe+1;qe<G;qe++){const At=this.point.events[qe];At.consumedBy===void 0&&Ie.otherSE.point.events===At.otherSE.point.events&&Ie.segment.consume(At.segment)}}}getAvailableLinkedEvents(){const G=[];for(let oe=0,Ie=this.point.events.length;oe<Ie;oe++){const qe=this.point.events[oe];qe!==this&&!qe.segment.ringOut&&qe.segment.isInResult()&&G.push(qe)}return G}getLeftmostComparator(G){const oe=new Map,Ie=qe=>{const At=qe.otherSE;oe.set(qe,{sine:Ye(this.point,G.point,At.point),cosine:Xe(this.point,G.point,At.point)})};return(qe,At)=>{oe.has(qe)||Ie(qe),oe.has(At)||Ie(At);const{sine:rr,cosine:Zt}=oe.get(qe),{sine:wt,cosine:Pt}=oe.get(At);return rr>=0&&wt>=0?Zt<Pt?1:Zt>Pt?-1:0:rr<0&&wt<0?Zt<Pt?-1:Zt>Pt?1:0:wt<rr?-1:wt>rr?1:0}}}let Ze=0;class _t{static compare(G,oe){const Ie=G.leftSE.point.x,qe=oe.leftSE.point.x,At=G.rightSE.point.x,rr=oe.rightSE.point.x;if(rr<Ie)return 1;if(At<qe)return-1;const Zt=G.leftSE.point.y,wt=oe.leftSE.point.y,Pt=G.rightSE.point.y,ge=oe.rightSE.point.y;if(Ie<qe){if(wt<Zt&&wt<Pt)return 1;if(wt>Zt&&wt>Pt)return-1;const ve=G.comparePoint(oe.leftSE.point);if(ve<0)return 1;if(ve>0)return-1;const Fe=oe.comparePoint(G.rightSE.point);return Fe!==0?Fe:-1}if(Ie>qe){if(Zt<wt&&Zt<ge)return-1;if(Zt>wt&&Zt>ge)return 1;const ve=oe.comparePoint(G.leftSE.point);if(ve!==0)return ve;const Fe=G.comparePoint(oe.rightSE.point);return Fe<0?1:Fe>0?-1:1}if(Zt<wt)return-1;if(Zt>wt)return 1;if(At<rr){const ve=oe.comparePoint(G.rightSE.point);if(ve!==0)return ve}if(At>rr){const ve=G.comparePoint(oe.rightSE.point);if(ve<0)return 1;if(ve>0)return-1}if(At!==rr){const ve=Pt-Zt,Fe=At-Ie,nt=ge-wt,St=rr-qe;if(ve>Fe&&nt<St)return 1;if(ve<Fe&&nt>St)return-1}return At>rr?1:At<rr||Pt<ge?-1:Pt>ge?1:G.id<oe.id?-1:G.id>oe.id?1:0}constructor(G,oe,Ie,qe){this.id=++Ze,this.leftSE=G,G.segment=this,G.otherSE=oe,this.rightSE=oe,oe.segment=this,oe.otherSE=G,this.rings=Ie,this.windings=qe}static fromRing(G,oe,Ie){let qe,At,rr;const Zt=Me.comparePoints(G,oe);if(Zt<0)qe=G,At=oe,rr=1;else if(Zt>0)qe=oe,At=G,rr=-1;else throw new Error(`Tried to create degenerate segment at [${G.x}, ${G.y}]`);const wt=new Me(qe,!0),Pt=new Me(At,!1);return new _t(wt,Pt,[Ie],[rr])}replaceRightSE(G){this.rightSE=G,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const G=this.leftSE.point.y,oe=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:G<oe?G:oe},ur:{x:this.rightSE.point.x,y:G>oe?G:oe}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(G){return G.x===this.leftSE.point.x&&G.y===this.leftSE.point.y||G.x===this.rightSE.point.x&&G.y===this.rightSE.point.y}comparePoint(G){if(this.isAnEndpoint(G))return 0;const oe=this.leftSE.point,Ie=this.rightSE.point,qe=this.vector();if(oe.x===Ie.x)return G.x===oe.x?0:G.x<oe.x?1:-1;const At=(G.y-oe.y)/qe.y,rr=oe.x+At*qe.x;if(G.x===rr)return 0;const Zt=(G.x-oe.x)/qe.x,wt=oe.y+Zt*qe.y;return G.y===wt?0:G.y<wt?-1:1}getIntersection(G){const oe=this.bbox(),Ie=G.bbox(),qe=Ae(oe,Ie);if(qe===null)return null;const At=this.leftSE.point,rr=this.rightSE.point,Zt=G.leftSE.point,wt=G.rightSE.point,Pt=le(oe,Zt)&&this.comparePoint(Zt)===0,ge=le(Ie,At)&&G.comparePoint(At)===0,ve=le(oe,wt)&&this.comparePoint(wt)===0,Fe=le(Ie,rr)&&G.comparePoint(rr)===0;if(ge&&Pt)return Fe&&!ve?rr:!Fe&&ve?wt:null;if(ge)return ve&&At.x===wt.x&&At.y===wt.y?null:At;if(Pt)return Fe&&rr.x===Zt.x&&rr.y===Zt.y?null:Zt;if(Fe&&ve)return null;if(Fe)return rr;if(ve)return wt;const nt=at(At,this.vector(),Zt,G.vector());return nt===null||!le(qe,nt)?null:we.round(nt.x,nt.y)}split(G){const oe=[],Ie=G.events!==void 0,qe=new Me(G,!0),At=new Me(G,!1),rr=this.rightSE;this.replaceRightSE(At),oe.push(At),oe.push(qe);const Zt=new _t(qe,rr,this.rings.slice(),this.windings.slice());return Me.comparePoints(Zt.leftSE.point,Zt.rightSE.point)>0&&Zt.swapEvents(),Me.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Ie&&(qe.checkForConsuming(),At.checkForConsuming()),oe}swapEvents(){const G=this.rightSE;this.rightSE=this.leftSE,this.leftSE=G,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let oe=0,Ie=this.windings.length;oe<Ie;oe++)this.windings[oe]*=-1}consume(G){let oe=this,Ie=G;for(;oe.consumedBy;)oe=oe.consumedBy;for(;Ie.consumedBy;)Ie=Ie.consumedBy;const qe=_t.compare(oe,Ie);if(qe!==0){if(qe>0){const At=oe;oe=Ie,Ie=At}if(oe.prev===Ie){const At=oe;oe=Ie,Ie=At}for(let At=0,rr=Ie.rings.length;At<rr;At++){const Zt=Ie.rings[At],wt=Ie.windings[At],Pt=oe.rings.indexOf(Zt);Pt===-1?(oe.rings.push(Zt),oe.windings.push(wt)):oe.windings[Pt]+=wt}Ie.rings=null,Ie.windings=null,Ie.consumedBy=oe,Ie.leftSE.consumedBy=oe.leftSE,Ie.rightSE.consumedBy=oe.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const G=this.prev.consumedBy||this.prev;this._beforeState=G.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const G=this.beforeState();this._afterState={rings:G.rings.slice(0),windings:G.windings.slice(0),multiPolys:[]};const oe=this._afterState.rings,Ie=this._afterState.windings,qe=this._afterState.multiPolys;for(let Zt=0,wt=this.rings.length;Zt<wt;Zt++){const Pt=this.rings[Zt],ge=this.windings[Zt],ve=oe.indexOf(Pt);ve===-1?(oe.push(Pt),Ie.push(ge)):Ie[ve]+=ge}const At=[],rr=[];for(let Zt=0,wt=oe.length;Zt<wt;Zt++){if(Ie[Zt]===0)continue;const Pt=oe[Zt],ge=Pt.poly;if(rr.indexOf(ge)===-1)if(Pt.isExterior)At.push(ge);else{rr.indexOf(ge)===-1&&rr.push(ge);const ve=At.indexOf(Pt.poly);ve!==-1&&At.splice(ve,1)}}for(let Zt=0,wt=At.length;Zt<wt;Zt++){const Pt=At[Zt].multiPoly;qe.indexOf(Pt)===-1&&qe.push(Pt)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const G=this.beforeState().multiPolys,oe=this.afterState().multiPolys;switch(Tt.type){case"union":{const Ie=G.length===0,qe=oe.length===0;this._isInResult=Ie!==qe;break}case"intersection":{let Ie,qe;G.length<oe.length?(Ie=G.length,qe=oe.length):(Ie=oe.length,qe=G.length),this._isInResult=qe===Tt.numMultiPolys&&Ie<qe;break}case"xor":{const Ie=Math.abs(G.length-oe.length);this._isInResult=Ie%2===1;break}case"difference":{const Ie=qe=>qe.length===1&&qe[0].isSubject;this._isInResult=Ie(G)!==Ie(oe);break}default:throw new Error(`Unrecognized operation type found ${Tt.type}`)}return this._isInResult}}class Mt{constructor(G,oe,Ie){if(!Array.isArray(G)||G.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=oe,this.isExterior=Ie,this.segments=[],typeof G[0][0]!="number"||typeof G[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const qe=we.round(G[0][0],G[0][1]);this.bbox={ll:{x:qe.x,y:qe.y},ur:{x:qe.x,y:qe.y}};let At=qe;for(let rr=1,Zt=G.length;rr<Zt;rr++){if(typeof G[rr][0]!="number"||typeof G[rr][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let wt=we.round(G[rr][0],G[rr][1]);wt.x===At.x&&wt.y===At.y||(this.segments.push(_t.fromRing(At,wt,this)),wt.x<this.bbox.ll.x&&(this.bbox.ll.x=wt.x),wt.y<this.bbox.ll.y&&(this.bbox.ll.y=wt.y),wt.x>this.bbox.ur.x&&(this.bbox.ur.x=wt.x),wt.y>this.bbox.ur.y&&(this.bbox.ur.y=wt.y),At=wt)}(qe.x!==At.x||qe.y!==At.y)&&this.segments.push(_t.fromRing(At,qe,this))}getSweepEvents(){const G=[];for(let oe=0,Ie=this.segments.length;oe<Ie;oe++){const qe=this.segments[oe];G.push(qe.leftSE),G.push(qe.rightSE)}return G}}class ir{constructor(G,oe){if(!Array.isArray(G))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Mt(G[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let Ie=1,qe=G.length;Ie<qe;Ie++){const At=new Mt(G[Ie],this,!1);At.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=At.bbox.ll.x),At.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=At.bbox.ll.y),At.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=At.bbox.ur.x),At.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=At.bbox.ur.y),this.interiorRings.push(At)}this.multiPoly=oe}getSweepEvents(){const G=this.exteriorRing.getSweepEvents();for(let oe=0,Ie=this.interiorRings.length;oe<Ie;oe++){const qe=this.interiorRings[oe].getSweepEvents();for(let At=0,rr=qe.length;At<rr;At++)G.push(qe[At])}return G}}class Tr{constructor(G,oe){if(!Array.isArray(G))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof G[0][0][0]=="number"&&(G=[G])}catch(Ie){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let Ie=0,qe=G.length;Ie<qe;Ie++){const At=new ir(G[Ie],this);At.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=At.bbox.ll.x),At.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=At.bbox.ll.y),At.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=At.bbox.ur.x),At.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=At.bbox.ur.y),this.polys.push(At)}this.isSubject=oe}getSweepEvents(){const G=[];for(let oe=0,Ie=this.polys.length;oe<Ie;oe++){const qe=this.polys[oe].getSweepEvents();for(let At=0,rr=qe.length;At<rr;At++)G.push(qe[At])}return G}}class et{static factory(G){const oe=[];for(let Ie=0,qe=G.length;Ie<qe;Ie++){const At=G[Ie];if(!At.isInResult()||At.ringOut)continue;let rr=null,Zt=At.leftSE,wt=At.rightSE;const Pt=[Zt],ge=Zt.point,ve=[];for(;rr=Zt,Zt=wt,Pt.push(Zt),Zt.point!==ge;)for(;;){const Fe=Zt.getAvailableLinkedEvents();if(Fe.length===0){const $t=Pt[0].point,vr=Pt[Pt.length-1].point;throw new Error(`Unable to complete output ring starting at [${$t.x}, ${$t.y}]. Last matching segment found ends at [${vr.x}, ${vr.y}].`)}if(Fe.length===1){wt=Fe[0].otherSE;break}let nt=null;for(let $t=0,vr=ve.length;$t<vr;$t++)if(ve[$t].point===Zt.point){nt=$t;break}if(nt!==null){const $t=ve.splice(nt)[0],vr=Pt.splice($t.index);vr.unshift(vr[0].otherSE),oe.push(new et(vr.reverse()));continue}ve.push({index:Pt.length,point:Zt.point});const St=Zt.getLeftmostComparator(rr);wt=Fe.sort(St)[0].otherSE;break}oe.push(new et(Pt))}return oe}constructor(G){this.events=G;for(let oe=0,Ie=G.length;oe<Ie;oe++)G[oe].segment.ringOut=this;this.poly=null}getGeom(){let G=this.events[0].point;const oe=[G];for(let Pt=1,ge=this.events.length-1;Pt<ge;Pt++){const ve=this.events[Pt].point,Fe=this.events[Pt+1].point;dt(ve,G,Fe)!==0&&(oe.push(ve),G=ve)}if(oe.length===1)return null;const Ie=oe[0],qe=oe[1];dt(Ie,G,qe)===0&&oe.shift(),oe.push(oe[0]);const At=this.isExteriorRing()?1:-1,rr=this.isExteriorRing()?0:oe.length-1,Zt=this.isExteriorRing()?oe.length:-1,wt=[];for(let Pt=rr;Pt!=Zt;Pt+=At)wt.push([oe[Pt].x,oe[Pt].y]);return wt}isExteriorRing(){if(this._isExteriorRing===void 0){const G=this.enclosingRing();this._isExteriorRing=G?!G.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let G=this.events[0];for(let qe=1,At=this.events.length;qe<At;qe++){const rr=this.events[qe];Me.compare(G,rr)>0&&(G=rr)}let oe=G.segment.prevInResult(),Ie=oe?oe.prevInResult():null;for(;;){if(!oe)return null;if(!Ie)return oe.ringOut;if(Ie.ringOut!==oe.ringOut)return Ie.ringOut.enclosingRing()!==oe.ringOut?oe.ringOut:oe.ringOut.enclosingRing();oe=Ie.prevInResult(),Ie=oe?oe.prevInResult():null}}}class en{constructor(G){this.exteriorRing=G,G.poly=this,this.interiorRings=[]}addInterior(G){this.interiorRings.push(G),G.poly=this}getGeom(){const G=[this.exteriorRing.getGeom()];if(G[0]===null)return null;for(let oe=0,Ie=this.interiorRings.length;oe<Ie;oe++){const qe=this.interiorRings[oe].getGeom();qe!==null&&G.push(qe)}return G}}class Xr{constructor(G){this.rings=G,this.polys=this._composePolys(G)}getGeom(){const G=[];for(let oe=0,Ie=this.polys.length;oe<Ie;oe++){const qe=this.polys[oe].getGeom();qe!==null&&G.push(qe)}return G}_composePolys(G){const oe=[];for(let Ie=0,qe=G.length;Ie<qe;Ie++){const At=G[Ie];if(!At.poly)if(At.isExteriorRing())oe.push(new en(At));else{const rr=At.enclosingRing();rr.poly||oe.push(new en(rr)),rr.poly.addInterior(At)}}return oe}}class Sr{constructor(G){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t.compare;this.queue=G,this.tree=new ye(oe),this.segments=[]}process(G){const oe=G.segment,Ie=[];if(G.consumedBy)return G.isLeft?this.queue.remove(G.otherSE):this.tree.remove(oe),Ie;const qe=G.isLeft?this.tree.add(oe):this.tree.find(oe);if(!qe)throw new Error(`Unable to find segment #${oe.id} [${oe.leftSE.point.x}, ${oe.leftSE.point.y}] -> [${oe.rightSE.point.x}, ${oe.rightSE.point.y}] in SweepLine tree.`);let At=qe,rr=qe,Zt,wt;for(;Zt===void 0;)At=this.tree.prev(At),At===null?Zt=null:At.key.consumedBy===void 0&&(Zt=At.key);for(;wt===void 0;)rr=this.tree.next(rr),rr===null?wt=null:rr.key.consumedBy===void 0&&(wt=rr.key);if(G.isLeft){let Pt=null;if(Zt){const ve=Zt.getIntersection(oe);if(ve!==null&&(oe.isAnEndpoint(ve)||(Pt=ve),!Zt.isAnEndpoint(ve))){const Fe=this._splitSafely(Zt,ve);for(let nt=0,St=Fe.length;nt<St;nt++)Ie.push(Fe[nt])}}let ge=null;if(wt){const ve=wt.getIntersection(oe);if(ve!==null&&(oe.isAnEndpoint(ve)||(ge=ve),!wt.isAnEndpoint(ve))){const Fe=this._splitSafely(wt,ve);for(let nt=0,St=Fe.length;nt<St;nt++)Ie.push(Fe[nt])}}if(Pt!==null||ge!==null){let ve=null;Pt===null?ve=ge:ge===null?ve=Pt:ve=Me.comparePoints(Pt,ge)<=0?Pt:ge,this.queue.remove(oe.rightSE),Ie.push(oe.rightSE);const Fe=oe.split(ve);for(let nt=0,St=Fe.length;nt<St;nt++)Ie.push(Fe[nt])}Ie.length>0?(this.tree.remove(oe),Ie.push(G)):(this.segments.push(oe),oe.prev=Zt)}else{if(Zt&&wt){const Pt=Zt.getIntersection(wt);if(Pt!==null){if(!Zt.isAnEndpoint(Pt)){const ge=this._splitSafely(Zt,Pt);for(let ve=0,Fe=ge.length;ve<Fe;ve++)Ie.push(ge[ve])}if(!wt.isAnEndpoint(Pt)){const ge=this._splitSafely(wt,Pt);for(let ve=0,Fe=ge.length;ve<Fe;ve++)Ie.push(ge[ve])}}}this.tree.remove(oe)}return Ie}_splitSafely(G,oe){this.tree.remove(G);const Ie=G.rightSE;this.queue.remove(Ie);const qe=G.split(oe);return qe.push(Ie),G.consumedBy===void 0&&this.tree.add(G),qe}}const pt=typeof H!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ut=typeof H!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Gt{run(G,oe,Ie){Tt.type=G,we.reset();const qe=[new Tr(oe,!0)];for(let ve=0,Fe=Ie.length;ve<Fe;ve++)qe.push(new Tr(Ie[ve],!1));if(Tt.numMultiPolys=qe.length,Tt.type==="difference"){const ve=qe[0];let Fe=1;for(;Fe<qe.length;)Ae(qe[Fe].bbox,ve.bbox)!==null?Fe++:qe.splice(Fe,1)}if(Tt.type==="intersection")for(let ve=0,Fe=qe.length;ve<Fe;ve++){const nt=qe[ve];for(let St=ve+1,$t=qe.length;St<$t;St++)if(Ae(nt.bbox,qe[St].bbox)===null)return[]}const At=new ye(Me.compare);for(let ve=0,Fe=qe.length;ve<Fe;ve++){const nt=qe[ve].getSweepEvents();for(let St=0,$t=nt.length;St<$t;St++)if(At.insert(nt[St]),At.size>pt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const rr=new Sr(At);let Zt=At.size,wt=At.pop();for(;wt;){const ve=wt.key;if(At.size===Zt){const nt=ve.segment;throw new Error(`Unable to pop() ${ve.isLeft?"left":"right"} SweepEvent [${ve.point.x}, ${ve.point.y}] from segment #${nt.id} [${nt.leftSE.point.x}, ${nt.leftSE.point.y}] -> [${nt.rightSE.point.x}, ${nt.rightSE.point.y}] from queue.`)}if(At.size>pt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(rr.segments.length>Ut)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Fe=rr.process(ve);for(let nt=0,St=Fe.length;nt<St;nt++){const $t=Fe[nt];$t.consumedBy===void 0&&At.insert($t)}Zt=At.size,wt=At.pop()}we.reset();const Pt=et.factory(rr.segments);return new Xr(Pt).getGeom()}}const Tt=new Gt;var Ir={union:function(ue){for(var G=arguments.length,oe=new Array(G>1?G-1:0),Ie=1;Ie<G;Ie++)oe[Ie-1]=arguments[Ie];return Tt.run("union",ue,oe)},intersection:function(ue){for(var G=arguments.length,oe=new Array(G>1?G-1:0),Ie=1;Ie<G;Ie++)oe[Ie-1]=arguments[Ie];return Tt.run("intersection",ue,oe)},xor:function(ue){for(var G=arguments.length,oe=new Array(G>1?G-1:0),Ie=1;Ie<G;Ie++)oe[Ie-1]=arguments[Ie];return Tt.run("xor",ue,oe)},difference:function(ue){for(var G=arguments.length,oe=new Array(G>1?G-1:0),Ie=1;Ie<G;Ie++)oe[Ie-1]=arguments[Ie];return Tt.run("difference",ue,oe)}};return Ir})},62273:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},H=N.default=k},27590:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},H=N.default=k},45598:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=X;var W=H(k(67294)),w=k(11805);function X(j){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=[];return W.default.Children.forEach(j,function(re){re==null&&!ee.keepEmpty||(Array.isArray(re)?Y=Y.concat(X(re)):(0,w.isFragment)(re)&&re.props?Y=Y.concat(X(re.props.children,ee)):Y.push(re))}),Y}},3481:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.isStyleSupport=j;var W=H(k(19158)),w=function(Y){if((0,W.default)()&&window.document.documentElement){var re=Array.isArray(Y)?Y:[Y],Q=window.document.documentElement;return re.some(function(ye){return ye in Q.style})}return!1},X=function(Y,re){if(!w(Y))return!1;var Q=document.createElement("div"),ye=Q.style[Y];return Q.style[Y]=re,Q.style[Y]!==ye};function j(ee,Y){return!Array.isArray(ee)&&Y!==void 0?X(ee,Y):w(ee)}},27712:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(w){var X=w.keyCode;if(w.altKey&&!w.ctrlKey||w.metaKey||X>=k.F1&&X<=k.F12)return!1;switch(X){case k.ALT:case k.CAPS_LOCK:case k.CONTEXT_MENU:case k.CTRL:case k.DOWN:case k.END:case k.ESC:case k.HOME:case k.INSERT:case k.LEFT:case k.MAC_FF_META:case k.META:case k.NUMLOCK:case k.NUM_CENTER:case k.PAGE_DOWN:case k.PAGE_UP:case k.PAUSE:case k.PRINT_SCREEN:case k.RIGHT:case k.SHIFT:case k.UP:case k.WIN_KEY:case k.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(w){if(w>=k.ZERO&&w<=k.NINE||w>=k.NUM_ZERO&&w<=k.NUM_MULTIPLY||w>=k.A&&w<=k.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&w===0)return!0;switch(w){case k.SPACE:case k.QUESTION_MARK:case k.NUM_PLUS:case k.NUM_MINUS:case k.NUM_PERIOD:case k.NUM_DIVISION:case k.SEMICOLON:case k.DASH:case k.EQUALS:case k.COMMA:case k.PERIOD:case k.SLASH:case k.APOSTROPHE:case k.SINGLE_QUOTE:case k.OPEN_SQUARE_BRACKET:case k.BACKSLASH:case k.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},H=N.default=k},18545:function(vt,N,k){"use strict";var H=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var W=H(k(67294));function w(X){var j=W.useRef();j.current=X;var ee=W.useCallback(function(){for(var Y,re=arguments.length,Q=new Array(re),ye=0;ye<re;ye++)Q[ye]=arguments[ye];return(Y=j.current)===null||Y===void 0?void 0:Y.call.apply(Y,[j].concat(Q))},[]);return ee}},82546:function(vt,N,k){"use strict";var H=k(64836).default,W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useLayoutUpdateEffect=N.default=void 0;var w=W(k(67294)),X=H(k(19158)),j=(0,X.default)()?w.useLayoutEffect:w.useEffect,ee=function(ye,se){var ne=w.useRef(!0);j(function(){return ye(ne.current)},se),j(function(){return ne.current=!1,function(){ne.current=!0}},[])},Y=N.useLayoutUpdateEffect=function(ye,se){ee(function(ne){if(!ne)return ye()},se)},re=N.default=ee},67265:function(vt,N,k){"use strict";var H=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var W=H(k(67294));function w(X,j,ee){var Y=W.useRef({});return(!("value"in Y.current)||ee(Y.current.condition,j))&&(Y.current.value=X(),Y.current.condition=j),Y.current.value}},60869:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Y;var W=H(k(27424)),w=H(k(18545)),X=k(82546),j=H(k(78423));function ee(re){return re!==void 0}function Y(re,Q){var ye=Q||{},se=ye.defaultValue,ne=ye.value,$=ye.onChange,A=ye.postState,b=(0,j.default)(function(){return ee(ne)?ne:ee(se)?typeof se=="function"?se():se:typeof re=="function"?re():re}),te=(0,W.default)(b,2),le=te[0],Ae=te[1],De=ne!==void 0?ne:le,Ne=A?A(De):De,Te=(0,w.default)($),We=(0,j.default)([De]),_e=(0,W.default)(We,2),we=_e[0],Re=_e[1];(0,X.useLayoutUpdateEffect)(function(){var Ge=we[0];le!==Ge&&Te(le,Ge)},[we]),(0,X.useLayoutUpdateEffect)(function(){ee(ne)||Ae(ne)},[ne]);var ze=(0,w.default)(function(Ge,yt){Ae(Ge,yt),Re([De],yt)});return[Ne,ze]}},78423:function(vt,N,k){"use strict";var H=k(75263).default,W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=j;var w=W(k(27424)),X=H(k(67294));function j(ee){var Y=X.useRef(!1),re=X.useState(ee),Q=(0,w.default)(re,2),ye=Q[0],se=Q[1];X.useEffect(function(){return Y.current=!1,function(){Y.current=!0}},[]);function ne($,A){A&&Y.current||se($)}return[ye,ne]}},11102:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=H(k(18698)),w=H(k(45520));function X(ee,Y){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Q=new Set;function ye(se,ne){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=Q.has(se);if((0,w.default)(!A,"Warning: There may be circular references"),A)return!1;if(se===ne)return!0;if(re&&$>1)return!1;Q.add(se);var b=$+1;if(Array.isArray(se)){if(!Array.isArray(ne)||se.length!==ne.length)return!1;for(var te=0;te<se.length;te++)if(!ye(se[te],ne[te],b))return!1;return!0}if(se&&ne&&(0,W.default)(se)==="object"&&(0,W.default)(ne)==="object"){var le=Object.keys(se);return le.length!==Object.keys(ne).length?!1:le.every(function(Ae){return ye(se[Ae],ne[Ae],b)})}return!1}return ye(ee,Y)}var j=N.default=X},18475:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var W=H(k(42122));function w(X,j){var ee=(0,W.default)({},X);return Array.isArray(j)&&j.forEach(function(Y){delete ee[Y]}),ee}},75531:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.composeRef=Y,N.fillRef=ee,N.supportNodeRef=ye,N.supportRef=Q,N.useComposeRef=re;var W=H(k(18698)),w=k(67294),X=k(11805),j=H(k(67265));function ee(se,ne){typeof se=="function"?se(ne):(0,W.default)(se)==="object"&&se&&"current"in se&&(se.current=ne)}function Y(){for(var se=arguments.length,ne=new Array(se),$=0;$<se;$++)ne[$]=arguments[$];var A=ne.filter(function(b){return b});return A.length<=1?A[0]:function(b){ne.forEach(function(te){ee(te,b)})}}function re(){for(var se=arguments.length,ne=new Array(se),$=0;$<se;$++)ne[$]=arguments[$];return(0,j.default)(function(){return Y.apply(void 0,ne)},ne,function(A,b){return A.length!==b.length||A.every(function(te,le){return te!==b[le]})})}function Q(se){var ne,$,A=(0,X.isMemo)(se)?se.type.type:se.type;return!(typeof A=="function"&&!((ne=A.prototype)!==null&&ne!==void 0&&ne.render)&&A.$$typeof!==X.ForwardRef||typeof se=="function"&&!(($=se.prototype)!==null&&$!==void 0&&$.render)&&se.$$typeof!==X.ForwardRef)}function ye(se){return!(0,w.isValidElement)(se)||(0,X.isFragment)(se)?!1:Q(se)}},94787:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k(H,W){for(var w=H,X=0;X<W.length;X+=1){if(w==null)return;w=w[W[X]]}return w}},20059:function(vt,N,k){"use strict";var H=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=re,N.merge=ne;var W=H(k(18698)),w=H(k(42122)),X=H(k(861)),j=H(k(51589)),ee=H(k(94787));function Y($,A,b,te){if(!A.length)return b;var le=(0,j.default)(A),Ae=le[0],De=le.slice(1),Ne;return!$&&typeof Ae=="number"?Ne=[]:Array.isArray($)?Ne=(0,X.default)($):Ne=(0,w.default)({},$),te&&b===void 0&&De.length===1?delete Ne[Ae][De[0]]:Ne[Ae]=Y(Ne[Ae],De,b,te),Ne}function re($,A,b){var te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return A.length&&te&&b===void 0&&!(0,ee.default)($,A.slice(0,-1))?$:Y($,A,b,te)}function Q($){return(0,W.default)($)==="object"&&$!==null&&Object.getPrototypeOf($)===Object.prototype}function ye($){return Array.isArray($)?[]:{}}var se=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function ne(){for(var $=arguments.length,A=new Array($),b=0;b<$;b++)A[b]=arguments[b];var te=ye(A[0]);return A.forEach(function(le){function Ae(De,Ne){var Te=new Set(Ne),We=(0,ee.default)(le,De),_e=Array.isArray(We);if(_e||Q(We)){if(!Te.has(We)){Te.add(We);var we=(0,ee.default)(te,De);_e?te=re(te,De,[]):(!we||(0,W.default)(we)!=="object")&&(te=re(te,De,ye(We))),se(We).forEach(function(Re){Ae([].concat((0,X.default)(De),[Re]),Te)})}}else te=re(te,De,We)}Ae([])}),te}},24561:function(vt,N,k){"use strict";var H=k(67294);var W=function(){return W=Object.assign||function($){for(var A,b=1,te=arguments.length;b<te;b++){A=arguments[b];for(var le in A)Object.prototype.hasOwnProperty.call(A,le)&&($[le]=A[le])}return $},W.apply(this,arguments)};function w(ne,$){var A={};for(var b in ne)Object.prototype.hasOwnProperty.call(ne,b)&&$.indexOf(b)<0&&(A[b]=ne[b]);if(ne!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,b=Object.getOwnPropertySymbols(ne);te<b.length;te++)$.indexOf(b[te])<0&&Object.prototype.propertyIsEnumerable.call(ne,b[te])&&(A[b[te]]=ne[b[te]]);return A}var X=function(){return Math.random().toString(36).substring(6)},j=function(ne){var $=ne.animate,A=ne.backgroundColor,b=ne.backgroundOpacity,te=ne.baseUrl,le=ne.children,Ae=ne.foregroundColor,De=ne.foregroundOpacity,Ne=ne.gradientRatio,Te=ne.uniqueKey,We=ne.interval,_e=ne.rtl,we=ne.speed,Re=ne.style,ze=ne.title,Ge=w(ne,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),yt=Te||X(),ke=yt+"-diff",tt=yt+"-animated-diff",ae=yt+"-aria",Ke=_e?{transform:"scaleX(-1)"}:null,he="0; "+We+"; 1",Pe=we+"s";return(0,H.createElement)("svg",W({"aria-labelledby":ae,role:"img",style:W(W({},Re),Ke)},Ge),ze?(0,H.createElement)("title",{id:ae},ze):null,(0,H.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+te+"#"+ke+")",style:{fill:"url("+te+"#"+tt+")"}}),(0,H.createElement)("defs",{role:"presentation"},(0,H.createElement)("clipPath",{id:ke},le),(0,H.createElement)("linearGradient",{id:tt},(0,H.createElement)("stop",{offset:"0%",stopColor:A,stopOpacity:b},$&&(0,H.createElement)("animate",{attributeName:"offset",values:-Ne+"; "+-Ne+"; 1",keyTimes:he,dur:Pe,repeatCount:"indefinite"})),(0,H.createElement)("stop",{offset:"50%",stopColor:Ae,stopOpacity:De},$&&(0,H.createElement)("animate",{attributeName:"offset",values:-Ne/2+"; "+-Ne/2+"; "+(1+Ne/2),keyTimes:he,dur:Pe,repeatCount:"indefinite"})),(0,H.createElement)("stop",{offset:"100%",stopColor:A,stopOpacity:b},$&&(0,H.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ne),keyTimes:he,dur:Pe,repeatCount:"indefinite"})))))};j.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var ee=function(ne){return ne.children?(0,H.createElement)(j,W({},ne)):(0,H.createElement)(Y,W({},ne))},Y=function(ne){return(0,H.createElement)(ee,W({viewBox:"0 0 476 124"},ne),(0,H.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,H.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,H.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,H.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,H.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,H.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},re=function(ne){return createElement(ee,W({viewBox:"0 0 400 460"},ne),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},Q=function(ne){return createElement(ee,W({viewBox:"0 0 340 84"},ne),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},ye=function(ne){return createElement(ee,W({viewBox:"0 0 400 110"},ne),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},se=function(ne){return createElement(ee,W({viewBox:"0 0 245 125"},ne),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))};N.ZP=ee},28660:function(vt,N,k){var H=k(34155);var W;(function(w){(function(X){var j=typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),ee=Y(w);typeof j.Reflect=="undefined"?j.Reflect=w:ee=Y(j.Reflect,ee),X(ee);function Y(re,Q){return function(ye,se){typeof re[ye]!="function"&&Object.defineProperty(re,ye,{configurable:!0,writable:!0,value:se}),Q&&Q(ye,se)}}})(function(X){var j=Object.prototype.hasOwnProperty,ee=typeof Symbol=="function",Y=ee&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",re=ee&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Q=typeof Object.create=="function",ye={__proto__:[]}instanceof Array,se=!Q&&!ye,ne={create:Q?function(){return Gt(Object.create(null))}:ye?function(){return Gt({__proto__:null})}:function(){return Gt({})},has:se?function(Tt,qt){return j.call(Tt,qt)}:function(Tt,qt){return qt in Tt},get:se?function(Tt,qt){return j.call(Tt,qt)?Tt[qt]:void 0}:function(Tt,qt){return Tt[qt]}},$=Object.getPrototypeOf(Function),A=typeof H=="object"&&H["env"]&&H["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",b=!A&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Sr(),te=!A&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:pt(),le=!A&&typeof WeakMap=="function"?WeakMap:Ut(),Ae=new le;function De(Tt,qt,fr,hr){if(xe(fr)){if(!at(Tt))throw new TypeError;if(!Ze(qt))throw new TypeError;return ke(Tt,qt)}else{if(!at(Tt))throw new TypeError;if(!dt(qt))throw new TypeError;if(!dt(hr)&&!xe(hr)&&!rt(hr))throw new TypeError;return rt(hr)&&(hr=void 0),fr=je(fr),tt(Tt,qt,fr,hr)}}X("decorate",De);function Ne(Tt,qt){function fr(hr,Er){if(!dt(hr))throw new TypeError;if(!xe(Er)&&!_t(Er))throw new TypeError;He(Tt,qt,hr,Er)}return fr}X("metadata",Ne);function Te(Tt,qt,fr,hr){if(!dt(fr))throw new TypeError;return xe(hr)||(hr=je(hr)),He(Tt,qt,fr,hr)}X("defineMetadata",Te);function We(Tt,qt,fr){if(!dt(qt))throw new TypeError;return xe(fr)||(fr=je(fr)),Ke(Tt,qt,fr)}X("hasMetadata",We);function _e(Tt,qt,fr){if(!dt(qt))throw new TypeError;return xe(fr)||(fr=je(fr)),he(Tt,qt,fr)}X("hasOwnMetadata",_e);function we(Tt,qt,fr){if(!dt(qt))throw new TypeError;return xe(fr)||(fr=je(fr)),Pe(Tt,qt,fr)}X("getMetadata",we);function Re(Tt,qt,fr){if(!dt(qt))throw new TypeError;return xe(fr)||(fr=je(fr)),lt(Tt,qt,fr)}X("getOwnMetadata",Re);function ze(Tt,qt){if(!dt(Tt))throw new TypeError;return xe(qt)||(qt=je(qt)),Ue(Tt,qt)}X("getMetadataKeys",ze);function Ge(Tt,qt){if(!dt(Tt))throw new TypeError;return xe(qt)||(qt=je(qt)),Qe(Tt,qt)}X("getOwnMetadataKeys",Ge);function yt(Tt,qt,fr){if(!dt(qt))throw new TypeError;xe(fr)||(fr=je(fr));var hr=ae(qt,fr,!1);if(xe(hr)||!hr.delete(Tt))return!1;if(hr.size>0)return!0;var Er=Ae.get(qt);return Er.delete(fr),Er.size>0||Ae.delete(qt),!0}X("deleteMetadata",yt);function ke(Tt,qt){for(var fr=Tt.length-1;fr>=0;--fr){var hr=Tt[fr],Er=hr(qt);if(!xe(Er)&&!rt(Er)){if(!Ze(Er))throw new TypeError;qt=Er}}return qt}function tt(Tt,qt,fr,hr){for(var Er=Tt.length-1;Er>=0;--Er){var Ir=Tt[Er],ue=Ir(qt,fr,hr);if(!xe(ue)&&!rt(ue)){if(!dt(ue))throw new TypeError;hr=ue}}return hr}function ae(Tt,qt,fr){var hr=Ae.get(Tt);if(xe(hr)){if(!fr)return;hr=new b,Ae.set(Tt,hr)}var Er=hr.get(qt);if(xe(Er)){if(!fr)return;Er=new b,hr.set(qt,Er)}return Er}function Ke(Tt,qt,fr){var hr=he(Tt,qt,fr);if(hr)return!0;var Er=Xr(qt);return rt(Er)?!1:Ke(Tt,Er,fr)}function he(Tt,qt,fr){var hr=ae(qt,fr,!1);return xe(hr)?!1:Xe(hr.has(Tt))}function Pe(Tt,qt,fr){var hr=he(Tt,qt,fr);if(hr)return lt(Tt,qt,fr);var Er=Xr(qt);if(!rt(Er))return Pe(Tt,Er,fr)}function lt(Tt,qt,fr){var hr=ae(qt,fr,!1);if(!xe(hr))return hr.get(Tt)}function He(Tt,qt,fr,hr){var Er=ae(fr,hr,!0);Er.set(Tt,qt)}function Ue(Tt,qt){var fr=Qe(Tt,qt),hr=Xr(Tt);if(hr===null)return fr;var Er=Ue(hr,qt);if(Er.length<=0)return fr;if(fr.length<=0)return Er;for(var Ir=new te,ue=[],G=0,oe=fr;G<oe.length;G++){var Ie=oe[G],qe=Ir.has(Ie);qe||(Ir.add(Ie),ue.push(Ie))}for(var At=0,rr=Er;At<rr.length;At++){var Ie=rr[At],qe=Ir.has(Ie);qe||(Ir.add(Ie),ue.push(Ie))}return ue}function Qe(Tt,qt){var fr=[],hr=ae(Tt,qt,!1);if(xe(hr))return fr;for(var Er=hr.keys(),Ir=ir(Er),ue=0;;){var G=et(Ir);if(!G)return fr.length=ue,fr;var oe=Tr(G);try{fr[ue]=oe}catch(Ie){try{en(Ir)}finally{throw Ie}}ue++}}function Se(Tt){if(Tt===null)return 1;switch(typeof Tt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Tt===null?1:6;default:return 6}}function xe(Tt){return Tt===void 0}function rt(Tt){return Tt===null}function Je(Tt){return typeof Tt=="symbol"}function dt(Tt){return typeof Tt=="object"?Tt!==null:typeof Tt=="function"}function Bt(Tt,qt){switch(Se(Tt)){case 0:return Tt;case 1:return Tt;case 2:return Tt;case 3:return Tt;case 4:return Tt;case 5:return Tt}var fr=qt===3?"string":qt===5?"number":"default",hr=Mt(Tt,Y);if(hr!==void 0){var Er=hr.call(Tt,fr);if(dt(Er))throw new TypeError;return Er}return Ye(Tt,fr==="default"?"number":fr)}function Ye(Tt,qt){if(qt==="string"){var fr=Tt.toString;if(Me(fr)){var hr=fr.call(Tt);if(!dt(hr))return hr}var Er=Tt.valueOf;if(Me(Er)){var hr=Er.call(Tt);if(!dt(hr))return hr}}else{var Er=Tt.valueOf;if(Me(Er)){var hr=Er.call(Tt);if(!dt(hr))return hr}var Ir=Tt.toString;if(Me(Ir)){var hr=Ir.call(Tt);if(!dt(hr))return hr}}throw new TypeError}function Xe(Tt){return!!Tt}function Le(Tt){return""+Tt}function je(Tt){var qt=Bt(Tt,3);return Je(qt)?qt:Le(qt)}function at(Tt){return Array.isArray?Array.isArray(Tt):Tt instanceof Object?Tt instanceof Array:Object.prototype.toString.call(Tt)==="[object Array]"}function Me(Tt){return typeof Tt=="function"}function Ze(Tt){return typeof Tt=="function"}function _t(Tt){switch(Se(Tt)){case 3:return!0;case 4:return!0;default:return!1}}function Mt(Tt,qt){var fr=Tt[qt];if(fr!=null){if(!Me(fr))throw new TypeError;return fr}}function ir(Tt){var qt=Mt(Tt,re);if(!Me(qt))throw new TypeError;var fr=qt.call(Tt);if(!dt(fr))throw new TypeError;return fr}function Tr(Tt){return Tt.value}function et(Tt){var qt=Tt.next();return qt.done?!1:qt}function en(Tt){var qt=Tt.return;qt&&qt.call(Tt)}function Xr(Tt){var qt=Object.getPrototypeOf(Tt);if(typeof Tt!="function"||Tt===$||qt!==$)return qt;var fr=Tt.prototype,hr=fr&&Object.getPrototypeOf(fr);if(hr==null||hr===Object.prototype)return qt;var Er=hr.constructor;return typeof Er!="function"||Er===Tt?qt:Er}function Sr(){var Tt={},qt=[],fr=function(){function ue(G,oe,Ie){this._index=0,this._keys=G,this._values=oe,this._selector=Ie}return ue.prototype["@@iterator"]=function(){return this},ue.prototype[re]=function(){return this},ue.prototype.next=function(){var G=this._index;if(G>=0&&G<this._keys.length){var oe=this._selector(this._keys[G],this._values[G]);return G+1>=this._keys.length?(this._index=-1,this._keys=qt,this._values=qt):this._index++,{value:oe,done:!1}}return{value:void 0,done:!0}},ue.prototype.throw=function(G){throw this._index>=0&&(this._index=-1,this._keys=qt,this._values=qt),G},ue.prototype.return=function(G){return this._index>=0&&(this._index=-1,this._keys=qt,this._values=qt),{value:G,done:!0}},ue}();return function(){function ue(){this._keys=[],this._values=[],this._cacheKey=Tt,this._cacheIndex=-2}return Object.defineProperty(ue.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ue.prototype.has=function(G){return this._find(G,!1)>=0},ue.prototype.get=function(G){var oe=this._find(G,!1);return oe>=0?this._values[oe]:void 0},ue.prototype.set=function(G,oe){var Ie=this._find(G,!0);return this._values[Ie]=oe,this},ue.prototype.delete=function(G){var oe=this._find(G,!1);if(oe>=0){for(var Ie=this._keys.length,qe=oe+1;qe<Ie;qe++)this._keys[qe-1]=this._keys[qe],this._values[qe-1]=this._values[qe];return this._keys.length--,this._values.length--,G===this._cacheKey&&(this._cacheKey=Tt,this._cacheIndex=-2),!0}return!1},ue.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Tt,this._cacheIndex=-2},ue.prototype.keys=function(){return new fr(this._keys,this._values,hr)},ue.prototype.values=function(){return new fr(this._keys,this._values,Er)},ue.prototype.entries=function(){return new fr(this._keys,this._values,Ir)},ue.prototype["@@iterator"]=function(){return this.entries()},ue.prototype[re]=function(){return this.entries()},ue.prototype._find=function(G,oe){return this._cacheKey!==G&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=G)),this._cacheIndex<0&&oe&&(this._cacheIndex=this._keys.length,this._keys.push(G),this._values.push(void 0)),this._cacheIndex},ue}();function hr(ue,G){return ue}function Er(ue,G){return G}function Ir(ue,G){return[ue,G]}}function pt(){return function(){function Tt(){this._map=new b}return Object.defineProperty(Tt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Tt.prototype.has=function(qt){return this._map.has(qt)},Tt.prototype.add=function(qt){return this._map.set(qt,qt),this},Tt.prototype.delete=function(qt){return this._map.delete(qt)},Tt.prototype.clear=function(){this._map.clear()},Tt.prototype.keys=function(){return this._map.keys()},Tt.prototype.values=function(){return this._map.values()},Tt.prototype.entries=function(){return this._map.entries()},Tt.prototype["@@iterator"]=function(){return this.keys()},Tt.prototype[re]=function(){return this.keys()},Tt}()}function Ut(){var Tt=16,qt=ne.create(),fr=hr();return function(){function oe(){this._key=hr()}return oe.prototype.has=function(Ie){var qe=Er(Ie,!1);return qe!==void 0?ne.has(qe,this._key):!1},oe.prototype.get=function(Ie){var qe=Er(Ie,!1);return qe!==void 0?ne.get(qe,this._key):void 0},oe.prototype.set=function(Ie,qe){var At=Er(Ie,!0);return At[this._key]=qe,this},oe.prototype.delete=function(Ie){var qe=Er(Ie,!1);return qe!==void 0?delete qe[this._key]:!1},oe.prototype.clear=function(){this._key=hr()},oe}();function hr(){var oe;do oe="@@WeakMap@@"+G();while(ne.has(qt,oe));return qt[oe]=!0,oe}function Er(oe,Ie){if(!j.call(oe,fr)){if(!Ie)return;Object.defineProperty(oe,fr,{value:ne.create()})}return oe[fr]}function Ir(oe,Ie){for(var qe=0;qe<Ie;++qe)oe[qe]=Math.random()*255|0;return oe}function ue(oe){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(oe)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(oe)):Ir(new Uint8Array(oe),oe):Ir(new Array(oe),oe)}function G(){var oe=ue(Tt);oe[6]=oe[6]&79|64,oe[8]=oe[8]&191|128;for(var Ie="",qe=0;qe<Tt;++qe){var At=oe[qe];(qe===4||qe===6||qe===8)&&(Ie+="-"),At<16&&(Ie+="0"),Ie+=At.toString(16).toLowerCase()}return Ie}}function Gt(Tt){return Tt.__=void 0,delete Tt.__,Tt}})})(W||(W={}))},55168:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SizeSensorId=N.SensorTabIndex=N.SensorClassName=void 0;var k="size-sensor-id";N.SizeSensorId=k;var H="size-sensor-object";N.SensorClassName=H;var W="-1";N.SensorTabIndex=W},12177:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=function(W){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,X=null;return function(){for(var j=this,ee=arguments.length,Y=new Array(ee),re=0;re<ee;re++)Y[re]=arguments[re];clearTimeout(X),X=setTimeout(function(){W.apply(j,Y)},w)}};N.default=k},96340:function(vt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=1,H=function(){return"".concat(k++)};N.default=H},18587:function(vt,N,k){"use strict";var H;H={value:!0},H=H=N.ak=void 0;var W=k(12955),w=function(Y,re){var Q=(0,W.getSensor)(Y);return Q.bind(re),function(){Q.unbind(re)}};N.ak=w;var X=function(Y){var re=(0,W.getSensor)(Y);(0,W.removeSensor)(re)};H=X;var j="1.0.2";H=j},12955:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.removeSensor=N.getSensor=N.Sensors=void 0;var H=X(k(96340)),W=k(82578),w=k(55168);function X(Q){return Q&&Q.__esModule?Q:{default:Q}}var j={};N.Sensors=j;function ee(Q){Q&&j[Q]&&delete j[Q]}var Y=function(ye){var se=ye.getAttribute(w.SizeSensorId);if(se&&j[se])return j[se];var ne=(0,H.default)();ye.setAttribute(w.SizeSensorId,ne);var $=(0,W.createSensor)(ye,function(){return ee(ne)});return j[ne]=$,$};N.getSensor=Y;var re=function(ye){var se=ye.element.getAttribute(w.SizeSensorId);ye.destroy(),ee(se)};N.removeSensor=re},82578:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var H=k(27643),W=k(31743),w=typeof ResizeObserver!="undefined"?W.createSensor:H.createSensor;N.createSensor=w},27643:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var H=w(k(12177)),W=k(55168);function w(j){return j&&j.__esModule?j:{default:j}}var X=function(ee,Y){var re=void 0,Q=[],ye=function(){getComputedStyle(ee).position==="static"&&(ee.style.position="relative");var te=document.createElement("object");return te.onload=function(){te.contentDocument.defaultView.addEventListener("resize",se),se()},te.style.display="block",te.style.position="absolute",te.style.top="0",te.style.left="0",te.style.height="100%",te.style.width="100%",te.style.overflow="hidden",te.style.pointerEvents="none",te.style.zIndex="-1",te.style.opacity="0",te.setAttribute("class",W.SensorClassName),te.setAttribute("tabindex",W.SensorTabIndex),te.type="text/html",ee.appendChild(te),te.data="about:blank",te},se=(0,H.default)(function(){Q.forEach(function(b){b(ee)})}),ne=function(te){re||(re=ye()),Q.indexOf(te)===-1&&Q.push(te)},$=function(){re&&re.parentNode&&(re.contentDocument&&re.contentDocument.defaultView.removeEventListener("resize",se),re.parentNode.removeChild(re),ee.removeAttribute(W.SizeSensorId),re=void 0,Q=[],Y&&Y())},A=function(te){var le=Q.indexOf(te);le!==-1&&Q.splice(le,1),Q.length===0&&re&&$()};return{element:ee,bind:ne,destroy:$,unbind:A}};N.createSensor=X},31743:function(vt,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var H=k(55168),W=w(k(12177));function w(j){return j&&j.__esModule?j:{default:j}}var X=function(ee,Y){var re=void 0,Q=[],ye=(0,W.default)(function(){Q.forEach(function(b){b(ee)})}),se=function(){var te=new ResizeObserver(ye);return te.observe(ee),ye(),te},ne=function(te){re||(re=se()),Q.indexOf(te)===-1&&Q.push(te)},$=function(){re.disconnect(),Q=[],re=void 0,ee.removeAttribute(H.SizeSensorId),Y&&Y()},A=function(te){var le=Q.indexOf(te);le!==-1&&Q.splice(le,1),Q.length===0&&re&&$()};return{element:ee,bind:ne,destroy:$,unbind:A}};N.createSensor=X},69848:function(vt){(function(N,k){vt.exports=k()})(this,function(){"use strict";function N(_e,we,Re,ze,Ge,yt){if(!(Ge-ze<=Re)){var ke=ze+Ge>>1;k(_e,we,ke,ze,Ge,yt%2),N(_e,we,Re,ze,ke-1,yt+1),N(_e,we,Re,ke+1,Ge,yt+1)}}function k(_e,we,Re,ze,Ge,yt){for(;Ge>ze;){if(Ge-ze>600){var ke=Ge-ze+1,tt=Re-ze+1,ae=Math.log(ke),Ke=.5*Math.exp(2*ae/3),he=.5*Math.sqrt(ae*Ke*(ke-Ke)/ke)*(tt-ke/2<0?-1:1),Pe=Math.max(ze,Math.floor(Re-tt*Ke/ke+he)),lt=Math.min(Ge,Math.floor(Re+(ke-tt)*Ke/ke+he));k(_e,we,Re,Pe,lt,yt)}var He=we[2*Re+yt],Ue=ze,Qe=Ge;for(H(_e,we,ze,Re),we[2*Ge+yt]>He&&H(_e,we,ze,Ge);Ue<Qe;){for(H(_e,we,Ue,Qe),Ue++,Qe--;we[2*Ue+yt]<He;)Ue++;for(;we[2*Qe+yt]>He;)Qe--}we[2*ze+yt]===He?H(_e,we,ze,Qe):(Qe++,H(_e,we,Qe,Ge)),Qe<=Re&&(ze=Qe+1),Re<=Qe&&(Ge=Qe-1)}}function H(_e,we,Re,ze){W(_e,Re,ze),W(we,2*Re,2*ze),W(we,2*Re+1,2*ze+1)}function W(_e,we,Re){var ze=_e[we];_e[we]=_e[Re],_e[Re]=ze}function w(_e,we,Re,ze,Ge,yt,ke){for(var tt=[0,_e.length-1,0],ae=[],Ke,he;tt.length;){var Pe=tt.pop(),lt=tt.pop(),He=tt.pop();if(lt-He<=ke){for(var Ue=He;Ue<=lt;Ue++)Ke=we[2*Ue],he=we[2*Ue+1],Ke>=Re&&Ke<=Ge&&he>=ze&&he<=yt&&ae.push(_e[Ue]);continue}var Qe=Math.floor((He+lt)/2);Ke=we[2*Qe],he=we[2*Qe+1],Ke>=Re&&Ke<=Ge&&he>=ze&&he<=yt&&ae.push(_e[Qe]);var Se=(Pe+1)%2;(Pe===0?Re<=Ke:ze<=he)&&(tt.push(He),tt.push(Qe-1),tt.push(Se)),(Pe===0?Ge>=Ke:yt>=he)&&(tt.push(Qe+1),tt.push(lt),tt.push(Se))}return ae}function X(_e,we,Re,ze,Ge,yt){for(var ke=[0,_e.length-1,0],tt=[],ae=Ge*Ge;ke.length;){var Ke=ke.pop(),he=ke.pop(),Pe=ke.pop();if(he-Pe<=yt){for(var lt=Pe;lt<=he;lt++)j(we[2*lt],we[2*lt+1],Re,ze)<=ae&&tt.push(_e[lt]);continue}var He=Math.floor((Pe+he)/2),Ue=we[2*He],Qe=we[2*He+1];j(Ue,Qe,Re,ze)<=ae&&tt.push(_e[He]);var Se=(Ke+1)%2;(Ke===0?Re-Ge<=Ue:ze-Ge<=Qe)&&(ke.push(Pe),ke.push(He-1),ke.push(Se)),(Ke===0?Re+Ge>=Ue:ze+Ge>=Qe)&&(ke.push(He+1),ke.push(he),ke.push(Se))}return tt}function j(_e,we,Re,ze){var Ge=_e-Re,yt=we-ze;return Ge*Ge+yt*yt}var ee=function(_e){return _e[0]},Y=function(_e){return _e[1]},re=function(we,Re,ze,Ge,yt){Re===void 0&&(Re=ee),ze===void 0&&(ze=Y),Ge===void 0&&(Ge=64),yt===void 0&&(yt=Float64Array),this.nodeSize=Ge,this.points=we;for(var ke=we.length<65536?Uint16Array:Uint32Array,tt=this.ids=new ke(we.length),ae=this.coords=new yt(we.length*2),Ke=0;Ke<we.length;Ke++)tt[Ke]=Ke,ae[2*Ke]=Re(we[Ke]),ae[2*Ke+1]=ze(we[Ke]);N(tt,ae,Ge,0,tt.length-1,0)};re.prototype.range=function(we,Re,ze,Ge){return w(this.ids,this.coords,we,Re,ze,Ge,this.nodeSize)},re.prototype.within=function(we,Re,ze){return X(this.ids,this.coords,we,Re,ze,this.nodeSize)};var Q={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(_e){return _e}},ye=Math.fround||function(_e){return function(we){return _e[0]=+we,_e[0]}}(new Float32Array(1)),se=function(we){this.options=Ne(Object.create(Q),we),this.trees=new Array(this.options.maxZoom+1)};se.prototype.load=function(we){var Re=this.options,ze=Re.log,Ge=Re.minZoom,yt=Re.maxZoom,ke=Re.nodeSize;ze&&console.time("total time");var tt="prepare "+we.length+" points";ze&&console.time(tt),this.points=we;for(var ae=[],Ke=0;Ke<we.length;Ke++)we[Ke].geometry&&ae.push($(we[Ke],Ke));this.trees[yt+1]=new re(ae,Te,We,ke,Float32Array),ze&&console.timeEnd(tt);for(var he=yt;he>=Ge;he--){var Pe=+Date.now();ae=this._cluster(ae,he),this.trees[he]=new re(ae,Te,We,ke,Float32Array),ze&&console.log("z%d: %d clusters in %dms",he,ae.length,+Date.now()-Pe)}return ze&&console.timeEnd("total time"),this},se.prototype.getClusters=function(we,Re){var ze=((we[0]+180)%360+360)%360-180,Ge=Math.max(-90,Math.min(90,we[1])),yt=we[2]===180?180:((we[2]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)ze=-180,yt=180;else if(ze>yt){var tt=this.getClusters([ze,Ge,180,ke],Re),ae=this.getClusters([-180,Ge,yt,ke],Re);return tt.concat(ae)}for(var Ke=this.trees[this._limitZoom(Re)],he=Ke.range(te(ze),le(ke),te(yt),le(Ge)),Pe=[],lt=0,He=he;lt<He.length;lt+=1){var Ue=He[lt],Qe=Ke.points[Ue];Pe.push(Qe.numPoints?A(Qe):this.points[Qe.index])}return Pe},se.prototype.getChildren=function(we){var Re=this._getOriginId(we),ze=this._getOriginZoom(we),Ge="No cluster with the specified id.",yt=this.trees[ze];if(!yt)throw new Error(Ge);var ke=yt.points[Re];if(!ke)throw new Error(Ge);for(var tt=this.options.radius/(this.options.extent*Math.pow(2,ze-1)),ae=yt.within(ke.x,ke.y,tt),Ke=[],he=0,Pe=ae;he<Pe.length;he+=1){var lt=Pe[he],He=yt.points[lt];He.parentId===we&&Ke.push(He.numPoints?A(He):this.points[He.index])}if(Ke.length===0)throw new Error(Ge);return Ke},se.prototype.getLeaves=function(we,Re,ze){Re=Re||10,ze=ze||0;var Ge=[];return this._appendLeaves(Ge,we,Re,ze,0),Ge},se.prototype.getTile=function(we,Re,ze){var Ge=this.trees[this._limitZoom(we)],yt=Math.pow(2,we),ke=this.options,tt=ke.extent,ae=ke.radius,Ke=ae/tt,he=(ze-Ke)/yt,Pe=(ze+1+Ke)/yt,lt={features:[]};return this._addTileFeatures(Ge.range((Re-Ke)/yt,he,(Re+1+Ke)/yt,Pe),Ge.points,Re,ze,yt,lt),Re===0&&this._addTileFeatures(Ge.range(1-Ke/yt,he,1,Pe),Ge.points,yt,ze,yt,lt),Re===yt-1&&this._addTileFeatures(Ge.range(0,he,Ke/yt,Pe),Ge.points,-1,ze,yt,lt),lt.features.length?lt:null},se.prototype.getClusterExpansionZoom=function(we){for(var Re=this._getOriginZoom(we)-1;Re<=this.options.maxZoom;){var ze=this.getChildren(we);if(Re++,ze.length!==1)break;we=ze[0].properties.cluster_id}return Re},se.prototype._appendLeaves=function(we,Re,ze,Ge,yt){for(var ke=this.getChildren(Re),tt=0,ae=ke;tt<ae.length;tt+=1){var Ke=ae[tt],he=Ke.properties;if(he&&he.cluster?yt+he.point_count<=Ge?yt+=he.point_count:yt=this._appendLeaves(we,he.cluster_id,ze,Ge,yt):yt<Ge?yt++:we.push(Ke),we.length===ze)break}return yt},se.prototype._addTileFeatures=function(we,Re,ze,Ge,yt,ke){for(var tt=0,ae=we;tt<ae.length;tt+=1){var Ke=ae[tt],he=Re[Ke],Pe=he.numPoints,lt=void 0,He=void 0,Ue=void 0;if(Pe)lt=b(he),He=he.x,Ue=he.y;else{var Qe=this.points[he.index];lt=Qe.properties,He=te(Qe.geometry.coordinates[0]),Ue=le(Qe.geometry.coordinates[1])}var Se={type:1,geometry:[[Math.round(this.options.extent*(He*yt-ze)),Math.round(this.options.extent*(Ue*yt-Ge))]],tags:lt},xe=void 0;Pe?xe=he.id:this.options.generateId?xe=he.index:this.points[he.index].id&&(xe=this.points[he.index].id),xe!==void 0&&(Se.id=xe),ke.features.push(Se)}},se.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(Math.floor(+we),this.options.maxZoom+1))},se.prototype._cluster=function(we,Re){for(var ze=[],Ge=this.options,yt=Ge.radius,ke=Ge.extent,tt=Ge.reduce,ae=Ge.minPoints,Ke=yt/(ke*Math.pow(2,Re)),he=0;he<we.length;he++){var Pe=we[he];if(!(Pe.zoom<=Re)){Pe.zoom=Re;for(var lt=this.trees[Re+1],He=lt.within(Pe.x,Pe.y,Ke),Ue=Pe.numPoints||1,Qe=Ue,Se=0,xe=He;Se<xe.length;Se+=1){var rt=xe[Se],Je=lt.points[rt];Je.zoom>Re&&(Qe+=Je.numPoints||1)}if(Qe>Ue&&Qe>=ae){for(var dt=Pe.x*Ue,Bt=Pe.y*Ue,Ye=tt&&Ue>1?this._map(Pe,!0):null,Xe=(he<<5)+(Re+1)+this.points.length,Le=0,je=He;Le<je.length;Le+=1){var at=je[Le],Me=lt.points[at];if(!(Me.zoom<=Re)){Me.zoom=Re;var Ze=Me.numPoints||1;dt+=Me.x*Ze,Bt+=Me.y*Ze,Me.parentId=Xe,tt&&(Ye||(Ye=this._map(Pe,!0)),tt(Ye,this._map(Me)))}}Pe.parentId=Xe,ze.push(ne(dt/Qe,Bt/Qe,Xe,Qe,Ye))}else if(ze.push(Pe),Qe>1)for(var _t=0,Mt=He;_t<Mt.length;_t+=1){var ir=Mt[_t],Tr=lt.points[ir];Tr.zoom<=Re||(Tr.zoom=Re,ze.push(Tr))}}}return ze},se.prototype._getOriginId=function(we){return we-this.points.length>>5},se.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},se.prototype._map=function(we,Re){if(we.numPoints)return Re?Ne({},we.properties):we.properties;var ze=this.points[we.index].properties,Ge=this.options.map(ze);return Re&&Ge===ze?Ne({},Ge):Ge};function ne(_e,we,Re,ze,Ge){return{x:ye(_e),y:ye(we),zoom:1/0,id:Re,parentId:-1,numPoints:ze,properties:Ge}}function $(_e,we){var Re=_e.geometry.coordinates,ze=Re[0],Ge=Re[1];return{x:ye(te(ze)),y:ye(le(Ge)),zoom:1/0,index:we,parentId:-1}}function A(_e){return{type:"Feature",id:_e.id,properties:b(_e),geometry:{type:"Point",coordinates:[Ae(_e.x),De(_e.y)]}}}function b(_e){var we=_e.numPoints,Re=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ne(Ne({},_e.properties),{cluster:!0,cluster_id:_e.id,point_count:we,point_count_abbreviated:Re})}function te(_e){return _e/360+.5}function le(_e){var we=Math.sin(_e*Math.PI/180),Re=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Re<0?0:Re>1?1:Re}function Ae(_e){return(_e-.5)*360}function De(_e){var we=(180-_e*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ne(_e,we){for(var Re in we)_e[Re]=we[Re];return _e}function Te(_e){return _e.x}function We(_e){return _e.y}return se})},27330:function(vt,N,k){var H;(function(W){(function(w){var X=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Q(),j=ee(W);typeof X.Reflect!="undefined"&&(j=ee(X.Reflect,j)),w(j,X),typeof X.Reflect=="undefined"&&(X.Reflect=W);function ee(ye,se){return function(ne,$){Object.defineProperty(ye,ne,{configurable:!0,writable:!0,value:$}),se&&se(ne,$)}}function Y(){try{return Function("return this;")()}catch(ye){}}function re(){try{return(0,eval)("(function() { return this; })()")}catch(ye){}}function Q(){return Y()||re()}})(function(w,X){var j=Object.prototype.hasOwnProperty,ee=typeof Symbol=="function",Y=ee&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",re=ee&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Q=typeof Object.create=="function",ye={__proto__:[]}instanceof Array,se=!Q&&!ye,ne={create:Q?function(){return Ir(Object.create(null))}:ye?function(){return Ir({__proto__:null})}:function(){return Ir({})},has:se?function(ue,G){return j.call(ue,G)}:function(ue,G){return G in ue},get:se?function(ue,G){return j.call(ue,G)?ue[G]:void 0}:function(ue,G){return ue[G]}},$=Object.getPrototypeOf(Function),A=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:fr(),b=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:hr(),te=typeof WeakMap=="function"?WeakMap:Er(),le=ee?Symbol.for("@reflect-metadata:registry"):void 0,Ae=Ut(),De=Gt(Ae);function Ne(ue,G,oe,Ie){if(xe(oe)){if(!at(ue))throw new TypeError;if(!Ze(G))throw new TypeError;return tt(ue,G)}else{if(!at(ue))throw new TypeError;if(!dt(G))throw new TypeError;if(!dt(Ie)&&!xe(Ie)&&!rt(Ie))throw new TypeError;return rt(Ie)&&(Ie=void 0),oe=je(oe),ae(ue,G,oe,Ie)}}w("decorate",Ne);function Te(ue,G){function oe(Ie,qe){if(!dt(Ie))throw new TypeError;if(!xe(qe)&&!_t(qe))throw new TypeError;He(ue,G,Ie,qe)}return oe}w("metadata",Te);function We(ue,G,oe,Ie){if(!dt(oe))throw new TypeError;return xe(Ie)||(Ie=je(Ie)),He(ue,G,oe,Ie)}w("defineMetadata",We);function _e(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Ke(ue,G,oe)}w("hasMetadata",_e);function we(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),he(ue,G,oe)}w("hasOwnMetadata",we);function Re(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Pe(ue,G,oe)}w("getMetadata",Re);function ze(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),lt(ue,G,oe)}w("getOwnMetadata",ze);function Ge(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Ue(ue,G)}w("getMetadataKeys",Ge);function yt(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Qe(ue,G)}w("getOwnMetadataKeys",yt);function ke(ue,G,oe){if(!dt(G))throw new TypeError;if(xe(oe)||(oe=je(oe)),!dt(G))throw new TypeError;xe(oe)||(oe=je(oe));var Ie=qt(G,oe,!1);return xe(Ie)?!1:Ie.OrdinaryDeleteMetadata(ue,G,oe)}w("deleteMetadata",ke);function tt(ue,G){for(var oe=ue.length-1;oe>=0;--oe){var Ie=ue[oe],qe=Ie(G);if(!xe(qe)&&!rt(qe)){if(!Ze(qe))throw new TypeError;G=qe}}return G}function ae(ue,G,oe,Ie){for(var qe=ue.length-1;qe>=0;--qe){var At=ue[qe],rr=At(G,oe,Ie);if(!xe(rr)&&!rt(rr)){if(!dt(rr))throw new TypeError;Ie=rr}}return Ie}function Ke(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return!0;var qe=Sr(G);return rt(qe)?!1:Ke(ue,qe,oe)}function he(ue,G,oe){var Ie=qt(G,oe,!1);return xe(Ie)?!1:Xe(Ie.OrdinaryHasOwnMetadata(ue,G,oe))}function Pe(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return lt(ue,G,oe);var qe=Sr(G);if(!rt(qe))return Pe(ue,qe,oe)}function lt(ue,G,oe){var Ie=qt(G,oe,!1);if(!xe(Ie))return Ie.OrdinaryGetOwnMetadata(ue,G,oe)}function He(ue,G,oe,Ie){var qe=qt(oe,Ie,!0);qe.OrdinaryDefineOwnMetadata(ue,G,oe,Ie)}function Ue(ue,G){var oe=Qe(ue,G),Ie=Sr(ue);if(Ie===null)return oe;var qe=Ue(Ie,G);if(qe.length<=0)return oe;if(oe.length<=0)return qe;for(var At=new b,rr=[],Zt=0,wt=oe;Zt<wt.length;Zt++){var Pt=wt[Zt],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}for(var ve=0,Fe=qe;ve<Fe.length;ve++){var Pt=Fe[ve],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}return rr}function Qe(ue,G){var oe=qt(ue,G,!1);return oe?oe.OrdinaryOwnMetadataKeys(ue,G):[]}function Se(ue){if(ue===null)return 1;switch(typeof ue){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ue===null?1:6;default:return 6}}function xe(ue){return ue===void 0}function rt(ue){return ue===null}function Je(ue){return typeof ue=="symbol"}function dt(ue){return typeof ue=="object"?ue!==null:typeof ue=="function"}function Bt(ue,G){switch(Se(ue)){case 0:return ue;case 1:return ue;case 2:return ue;case 3:return ue;case 4:return ue;case 5:return ue}var oe=G===3?"string":G===5?"number":"default",Ie=ir(ue,Y);if(Ie!==void 0){var qe=Ie.call(ue,oe);if(dt(qe))throw new TypeError;return qe}return Ye(ue,oe==="default"?"number":oe)}function Ye(ue,G){if(G==="string"){var oe=ue.toString;if(Me(oe)){var Ie=oe.call(ue);if(!dt(Ie))return Ie}var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}}else{var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}var At=ue.toString;if(Me(At)){var Ie=At.call(ue);if(!dt(Ie))return Ie}}throw new TypeError}function Xe(ue){return!!ue}function Le(ue){return""+ue}function je(ue){var G=Bt(ue,3);return Je(G)?G:Le(G)}function at(ue){return Array.isArray?Array.isArray(ue):ue instanceof Object?ue instanceof Array:Object.prototype.toString.call(ue)==="[object Array]"}function Me(ue){return typeof ue=="function"}function Ze(ue){return typeof ue=="function"}function _t(ue){switch(Se(ue)){case 3:return!0;case 4:return!0;default:return!1}}function Mt(ue,G){return ue===G||ue!==ue&&G!==G}function ir(ue,G){var oe=ue[G];if(oe!=null){if(!Me(oe))throw new TypeError;return oe}}function Tr(ue){var G=ir(ue,re);if(!Me(G))throw new TypeError;var oe=G.call(ue);if(!dt(oe))throw new TypeError;return oe}function et(ue){return ue.value}function en(ue){var G=ue.next();return G.done?!1:G}function Xr(ue){var G=ue.return;G&&G.call(ue)}function Sr(ue){var G=Object.getPrototypeOf(ue);if(typeof ue!="function"||ue===$||G!==$)return G;var oe=ue.prototype,Ie=oe&&Object.getPrototypeOf(oe);if(Ie==null||Ie===Object.prototype)return G;var qe=Ie.constructor;return typeof qe!="function"||qe===ue?G:qe}function pt(){var ue;!xe(le)&&typeof X.Reflect!="undefined"&&!(le in X.Reflect)&&typeof X.Reflect.defineMetadata=="function"&&(ue=Tt(X.Reflect));var G,oe,Ie,qe=new te,At={registerProvider:rr,getProvider:wt,setProvider:ge};return At;function rr(ve){if(!Object.isExtensible(At))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case ue===ve:break;case xe(G):G=ve;break;case G===ve:break;case xe(oe):oe=ve;break;case oe===ve:break;default:Ie===void 0&&(Ie=new b),Ie.add(ve);break}}function Zt(ve,Fe){if(!xe(G)){if(G.isProviderFor(ve,Fe))return G;if(!xe(oe)){if(oe.isProviderFor(ve,Fe))return G;if(!xe(Ie))for(var nt=Tr(Ie);;){var St=en(nt);if(!St)return;var $t=et(St);if($t.isProviderFor(ve,Fe))return Xr(nt),$t}}}if(!xe(ue)&&ue.isProviderFor(ve,Fe))return ue}function wt(ve,Fe){var nt=qe.get(ve),St;return xe(nt)||(St=nt.get(Fe)),xe(St)&&(St=Zt(ve,Fe),xe(St)||(xe(nt)&&(nt=new A,qe.set(ve,nt)),nt.set(Fe,St))),St}function Pt(ve){if(xe(ve))throw new TypeError;return G===ve||oe===ve||!xe(Ie)&&Ie.has(ve)}function ge(ve,Fe,nt){if(!Pt(nt))throw new Error("Metadata provider not registered.");var St=wt(ve,Fe);if(St!==nt){if(!xe(St))return!1;var $t=qe.get(ve);xe($t)&&($t=new A,qe.set(ve,$t)),$t.set(Fe,nt)}return!0}}function Ut(){var ue;return!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&(ue=X.Reflect[le]),xe(ue)&&(ue=pt()),!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&Object.defineProperty(X.Reflect,le,{enumerable:!1,configurable:!1,writable:!1,value:ue}),ue}function Gt(ue){var G=new te,oe={isProviderFor:function(Pt,ge){var ve=G.get(Pt);return xe(ve)?!1:ve.has(ge)},OrdinaryDefineOwnMetadata:rr,OrdinaryHasOwnMetadata:qe,OrdinaryGetOwnMetadata:At,OrdinaryOwnMetadataKeys:Zt,OrdinaryDeleteMetadata:wt};return Ae.registerProvider(oe),oe;function Ie(Pt,ge,ve){var Fe=G.get(Pt),nt=!1;if(xe(Fe)){if(!ve)return;Fe=new A,G.set(Pt,Fe),nt=!0}var St=Fe.get(ge);if(xe(St)){if(!ve)return;if(St=new A,Fe.set(ge,St),!ue.setProvider(Pt,ge,oe))throw Fe.delete(ge),nt&&G.delete(Pt),new Error("Wrong provider for target.")}return St}function qe(Pt,ge,ve){var Fe=Ie(ge,ve,!1);return xe(Fe)?!1:Xe(Fe.has(Pt))}function At(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(!xe(Fe))return Fe.get(Pt)}function rr(Pt,ge,ve,Fe){var nt=Ie(ve,Fe,!0);nt.set(Pt,ge)}function Zt(Pt,ge){var ve=[],Fe=Ie(Pt,ge,!1);if(xe(Fe))return ve;for(var nt=Fe.keys(),St=Tr(nt),$t=0;;){var vr=en(St);if(!vr)return ve.length=$t,ve;var Rt=et(vr);try{ve[$t]=Rt}catch(ct){try{Xr(St)}finally{throw ct}}$t++}}function wt(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(xe(Fe)||!Fe.delete(Pt))return!1;if(Fe.size===0){var nt=G.get(ge);xe(nt)||(nt.delete(ve),nt.size===0&&G.delete(nt))}return!0}}function Tt(ue){var G=ue.defineMetadata,oe=ue.hasOwnMetadata,Ie=ue.getOwnMetadata,qe=ue.getOwnMetadataKeys,At=ue.deleteMetadata,rr=new te,Zt={isProviderFor:function(wt,Pt){var ge=rr.get(wt);return xe(ge)?qe(wt,Pt).length?(xe(ge)&&(ge=new b,rr.set(wt,ge)),ge.add(Pt),!0):!1:ge.has(Pt)},OrdinaryDefineOwnMetadata:G,OrdinaryHasOwnMetadata:oe,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:qe,OrdinaryDeleteMetadata:At};return Zt}function qt(ue,G,oe){var Ie=Ae.getProvider(ue,G);if(!xe(Ie))return Ie;if(oe){if(Ae.setProvider(ue,G,De))return De;throw new Error("Illegal state.")}}function fr(){var ue={},G=[],oe=function(){function Zt(wt,Pt,ge){this._index=0,this._keys=wt,this._values=Pt,this._selector=ge}return Zt.prototype["@@iterator"]=function(){return this},Zt.prototype[re]=function(){return this},Zt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Pt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:Pt,done:!1}}return{value:void 0,done:!0}},Zt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),wt},Zt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:wt,done:!0}},Zt}(),Ie=function(){function Zt(){this._keys=[],this._values=[],this._cacheKey=ue,this._cacheIndex=-2}return Object.defineProperty(Zt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Zt.prototype.has=function(wt){return this._find(wt,!1)>=0},Zt.prototype.get=function(wt){var Pt=this._find(wt,!1);return Pt>=0?this._values[Pt]:void 0},Zt.prototype.set=function(wt,Pt){var ge=this._find(wt,!0);return this._values[ge]=Pt,this},Zt.prototype.delete=function(wt){var Pt=this._find(wt,!1);if(Pt>=0){for(var ge=this._keys.length,ve=Pt+1;ve<ge;ve++)this._keys[ve-1]=this._keys[ve],this._values[ve-1]=this._values[ve];return this._keys.length--,this._values.length--,Mt(wt,this._cacheKey)&&(this._cacheKey=ue,this._cacheIndex=-2),!0}return!1},Zt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ue,this._cacheIndex=-2},Zt.prototype.keys=function(){return new oe(this._keys,this._values,qe)},Zt.prototype.values=function(){return new oe(this._keys,this._values,At)},Zt.prototype.entries=function(){return new oe(this._keys,this._values,rr)},Zt.prototype["@@iterator"]=function(){return this.entries()},Zt.prototype[re]=function(){return this.entries()},Zt.prototype._find=function(wt,Pt){if(!Mt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ge=0;ge<this._keys.length;ge++)if(Mt(this._keys[ge],wt)){this._cacheIndex=ge;break}}return this._cacheIndex<0&&Pt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},Zt}();return Ie;function qe(Zt,wt){return Zt}function At(Zt,wt){return wt}function rr(Zt,wt){return[Zt,wt]}}function hr(){var ue=function(){function G(){this._map=new A}return Object.defineProperty(G.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),G.prototype.has=function(oe){return this._map.has(oe)},G.prototype.add=function(oe){return this._map.set(oe,oe),this},G.prototype.delete=function(oe){return this._map.delete(oe)},G.prototype.clear=function(){this._map.clear()},G.prototype.keys=function(){return this._map.keys()},G.prototype.values=function(){return this._map.keys()},G.prototype.entries=function(){return this._map.entries()},G.prototype["@@iterator"]=function(){return this.keys()},G.prototype[re]=function(){return this.keys()},G}();return ue}function Er(){var ue=16,G=ne.create(),oe=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.has(ge,this._key):!1},wt.prototype.get=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.get(ge,this._key):void 0},wt.prototype.set=function(Pt,ge){var ve=qe(Pt,!0);return ve[this._key]=ge,this},wt.prototype.delete=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?delete ge[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+Zt();while(ne.has(G,wt));return G[wt]=!0,wt}function qe(wt,Pt){if(!j.call(wt,oe)){if(!Pt)return;Object.defineProperty(wt,oe,{value:ne.create()})}return wt[oe]}function At(wt,Pt){for(var ge=0;ge<Pt;++ge)wt[ge]=Math.random()*255|0;return wt}function rr(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):At(new Uint8Array(wt),wt):At(new Array(wt),wt)}function Zt(){var wt=rr(ue);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Pt="",ge=0;ge<ue;++ge){var ve=wt[ge];(ge===4||ge===6||ge===8)&&(Pt+="-"),ve<16&&(Pt+="0"),Pt+=ve.toString(16).toLowerCase()}return Pt}}function Ir(ue){return ue.__=void 0,delete ue.__,ue}})})(H||(H={}))},59858:function(vt,N,k){var H;(function(W){(function(w){var X=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Q(),j=ee(W);typeof X.Reflect!="undefined"&&(j=ee(X.Reflect,j)),w(j,X),typeof X.Reflect=="undefined"&&(X.Reflect=W);function ee(ye,se){return function(ne,$){Object.defineProperty(ye,ne,{configurable:!0,writable:!0,value:$}),se&&se(ne,$)}}function Y(){try{return Function("return this;")()}catch(ye){}}function re(){try{return(0,eval)("(function() { return this; })()")}catch(ye){}}function Q(){return Y()||re()}})(function(w,X){var j=Object.prototype.hasOwnProperty,ee=typeof Symbol=="function",Y=ee&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",re=ee&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Q=typeof Object.create=="function",ye={__proto__:[]}instanceof Array,se=!Q&&!ye,ne={create:Q?function(){return Ir(Object.create(null))}:ye?function(){return Ir({__proto__:null})}:function(){return Ir({})},has:se?function(ue,G){return j.call(ue,G)}:function(ue,G){return G in ue},get:se?function(ue,G){return j.call(ue,G)?ue[G]:void 0}:function(ue,G){return ue[G]}},$=Object.getPrototypeOf(Function),A=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:fr(),b=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:hr(),te=typeof WeakMap=="function"?WeakMap:Er(),le=ee?Symbol.for("@reflect-metadata:registry"):void 0,Ae=Ut(),De=Gt(Ae);function Ne(ue,G,oe,Ie){if(xe(oe)){if(!at(ue))throw new TypeError;if(!Ze(G))throw new TypeError;return tt(ue,G)}else{if(!at(ue))throw new TypeError;if(!dt(G))throw new TypeError;if(!dt(Ie)&&!xe(Ie)&&!rt(Ie))throw new TypeError;return rt(Ie)&&(Ie=void 0),oe=je(oe),ae(ue,G,oe,Ie)}}w("decorate",Ne);function Te(ue,G){function oe(Ie,qe){if(!dt(Ie))throw new TypeError;if(!xe(qe)&&!_t(qe))throw new TypeError;He(ue,G,Ie,qe)}return oe}w("metadata",Te);function We(ue,G,oe,Ie){if(!dt(oe))throw new TypeError;return xe(Ie)||(Ie=je(Ie)),He(ue,G,oe,Ie)}w("defineMetadata",We);function _e(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Ke(ue,G,oe)}w("hasMetadata",_e);function we(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),he(ue,G,oe)}w("hasOwnMetadata",we);function Re(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Pe(ue,G,oe)}w("getMetadata",Re);function ze(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),lt(ue,G,oe)}w("getOwnMetadata",ze);function Ge(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Ue(ue,G)}w("getMetadataKeys",Ge);function yt(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Qe(ue,G)}w("getOwnMetadataKeys",yt);function ke(ue,G,oe){if(!dt(G))throw new TypeError;if(xe(oe)||(oe=je(oe)),!dt(G))throw new TypeError;xe(oe)||(oe=je(oe));var Ie=qt(G,oe,!1);return xe(Ie)?!1:Ie.OrdinaryDeleteMetadata(ue,G,oe)}w("deleteMetadata",ke);function tt(ue,G){for(var oe=ue.length-1;oe>=0;--oe){var Ie=ue[oe],qe=Ie(G);if(!xe(qe)&&!rt(qe)){if(!Ze(qe))throw new TypeError;G=qe}}return G}function ae(ue,G,oe,Ie){for(var qe=ue.length-1;qe>=0;--qe){var At=ue[qe],rr=At(G,oe,Ie);if(!xe(rr)&&!rt(rr)){if(!dt(rr))throw new TypeError;Ie=rr}}return Ie}function Ke(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return!0;var qe=Sr(G);return rt(qe)?!1:Ke(ue,qe,oe)}function he(ue,G,oe){var Ie=qt(G,oe,!1);return xe(Ie)?!1:Xe(Ie.OrdinaryHasOwnMetadata(ue,G,oe))}function Pe(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return lt(ue,G,oe);var qe=Sr(G);if(!rt(qe))return Pe(ue,qe,oe)}function lt(ue,G,oe){var Ie=qt(G,oe,!1);if(!xe(Ie))return Ie.OrdinaryGetOwnMetadata(ue,G,oe)}function He(ue,G,oe,Ie){var qe=qt(oe,Ie,!0);qe.OrdinaryDefineOwnMetadata(ue,G,oe,Ie)}function Ue(ue,G){var oe=Qe(ue,G),Ie=Sr(ue);if(Ie===null)return oe;var qe=Ue(Ie,G);if(qe.length<=0)return oe;if(oe.length<=0)return qe;for(var At=new b,rr=[],Zt=0,wt=oe;Zt<wt.length;Zt++){var Pt=wt[Zt],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}for(var ve=0,Fe=qe;ve<Fe.length;ve++){var Pt=Fe[ve],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}return rr}function Qe(ue,G){var oe=qt(ue,G,!1);return oe?oe.OrdinaryOwnMetadataKeys(ue,G):[]}function Se(ue){if(ue===null)return 1;switch(typeof ue){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ue===null?1:6;default:return 6}}function xe(ue){return ue===void 0}function rt(ue){return ue===null}function Je(ue){return typeof ue=="symbol"}function dt(ue){return typeof ue=="object"?ue!==null:typeof ue=="function"}function Bt(ue,G){switch(Se(ue)){case 0:return ue;case 1:return ue;case 2:return ue;case 3:return ue;case 4:return ue;case 5:return ue}var oe=G===3?"string":G===5?"number":"default",Ie=ir(ue,Y);if(Ie!==void 0){var qe=Ie.call(ue,oe);if(dt(qe))throw new TypeError;return qe}return Ye(ue,oe==="default"?"number":oe)}function Ye(ue,G){if(G==="string"){var oe=ue.toString;if(Me(oe)){var Ie=oe.call(ue);if(!dt(Ie))return Ie}var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}}else{var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}var At=ue.toString;if(Me(At)){var Ie=At.call(ue);if(!dt(Ie))return Ie}}throw new TypeError}function Xe(ue){return!!ue}function Le(ue){return""+ue}function je(ue){var G=Bt(ue,3);return Je(G)?G:Le(G)}function at(ue){return Array.isArray?Array.isArray(ue):ue instanceof Object?ue instanceof Array:Object.prototype.toString.call(ue)==="[object Array]"}function Me(ue){return typeof ue=="function"}function Ze(ue){return typeof ue=="function"}function _t(ue){switch(Se(ue)){case 3:return!0;case 4:return!0;default:return!1}}function Mt(ue,G){return ue===G||ue!==ue&&G!==G}function ir(ue,G){var oe=ue[G];if(oe!=null){if(!Me(oe))throw new TypeError;return oe}}function Tr(ue){var G=ir(ue,re);if(!Me(G))throw new TypeError;var oe=G.call(ue);if(!dt(oe))throw new TypeError;return oe}function et(ue){return ue.value}function en(ue){var G=ue.next();return G.done?!1:G}function Xr(ue){var G=ue.return;G&&G.call(ue)}function Sr(ue){var G=Object.getPrototypeOf(ue);if(typeof ue!="function"||ue===$||G!==$)return G;var oe=ue.prototype,Ie=oe&&Object.getPrototypeOf(oe);if(Ie==null||Ie===Object.prototype)return G;var qe=Ie.constructor;return typeof qe!="function"||qe===ue?G:qe}function pt(){var ue;!xe(le)&&typeof X.Reflect!="undefined"&&!(le in X.Reflect)&&typeof X.Reflect.defineMetadata=="function"&&(ue=Tt(X.Reflect));var G,oe,Ie,qe=new te,At={registerProvider:rr,getProvider:wt,setProvider:ge};return At;function rr(ve){if(!Object.isExtensible(At))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case ue===ve:break;case xe(G):G=ve;break;case G===ve:break;case xe(oe):oe=ve;break;case oe===ve:break;default:Ie===void 0&&(Ie=new b),Ie.add(ve);break}}function Zt(ve,Fe){if(!xe(G)){if(G.isProviderFor(ve,Fe))return G;if(!xe(oe)){if(oe.isProviderFor(ve,Fe))return G;if(!xe(Ie))for(var nt=Tr(Ie);;){var St=en(nt);if(!St)return;var $t=et(St);if($t.isProviderFor(ve,Fe))return Xr(nt),$t}}}if(!xe(ue)&&ue.isProviderFor(ve,Fe))return ue}function wt(ve,Fe){var nt=qe.get(ve),St;return xe(nt)||(St=nt.get(Fe)),xe(St)&&(St=Zt(ve,Fe),xe(St)||(xe(nt)&&(nt=new A,qe.set(ve,nt)),nt.set(Fe,St))),St}function Pt(ve){if(xe(ve))throw new TypeError;return G===ve||oe===ve||!xe(Ie)&&Ie.has(ve)}function ge(ve,Fe,nt){if(!Pt(nt))throw new Error("Metadata provider not registered.");var St=wt(ve,Fe);if(St!==nt){if(!xe(St))return!1;var $t=qe.get(ve);xe($t)&&($t=new A,qe.set(ve,$t)),$t.set(Fe,nt)}return!0}}function Ut(){var ue;return!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&(ue=X.Reflect[le]),xe(ue)&&(ue=pt()),!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&Object.defineProperty(X.Reflect,le,{enumerable:!1,configurable:!1,writable:!1,value:ue}),ue}function Gt(ue){var G=new te,oe={isProviderFor:function(Pt,ge){var ve=G.get(Pt);return xe(ve)?!1:ve.has(ge)},OrdinaryDefineOwnMetadata:rr,OrdinaryHasOwnMetadata:qe,OrdinaryGetOwnMetadata:At,OrdinaryOwnMetadataKeys:Zt,OrdinaryDeleteMetadata:wt};return Ae.registerProvider(oe),oe;function Ie(Pt,ge,ve){var Fe=G.get(Pt),nt=!1;if(xe(Fe)){if(!ve)return;Fe=new A,G.set(Pt,Fe),nt=!0}var St=Fe.get(ge);if(xe(St)){if(!ve)return;if(St=new A,Fe.set(ge,St),!ue.setProvider(Pt,ge,oe))throw Fe.delete(ge),nt&&G.delete(Pt),new Error("Wrong provider for target.")}return St}function qe(Pt,ge,ve){var Fe=Ie(ge,ve,!1);return xe(Fe)?!1:Xe(Fe.has(Pt))}function At(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(!xe(Fe))return Fe.get(Pt)}function rr(Pt,ge,ve,Fe){var nt=Ie(ve,Fe,!0);nt.set(Pt,ge)}function Zt(Pt,ge){var ve=[],Fe=Ie(Pt,ge,!1);if(xe(Fe))return ve;for(var nt=Fe.keys(),St=Tr(nt),$t=0;;){var vr=en(St);if(!vr)return ve.length=$t,ve;var Rt=et(vr);try{ve[$t]=Rt}catch(ct){try{Xr(St)}finally{throw ct}}$t++}}function wt(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(xe(Fe)||!Fe.delete(Pt))return!1;if(Fe.size===0){var nt=G.get(ge);xe(nt)||(nt.delete(ve),nt.size===0&&G.delete(nt))}return!0}}function Tt(ue){var G=ue.defineMetadata,oe=ue.hasOwnMetadata,Ie=ue.getOwnMetadata,qe=ue.getOwnMetadataKeys,At=ue.deleteMetadata,rr=new te,Zt={isProviderFor:function(wt,Pt){var ge=rr.get(wt);return xe(ge)?qe(wt,Pt).length?(xe(ge)&&(ge=new b,rr.set(wt,ge)),ge.add(Pt),!0):!1:ge.has(Pt)},OrdinaryDefineOwnMetadata:G,OrdinaryHasOwnMetadata:oe,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:qe,OrdinaryDeleteMetadata:At};return Zt}function qt(ue,G,oe){var Ie=Ae.getProvider(ue,G);if(!xe(Ie))return Ie;if(oe){if(Ae.setProvider(ue,G,De))return De;throw new Error("Illegal state.")}}function fr(){var ue={},G=[],oe=function(){function Zt(wt,Pt,ge){this._index=0,this._keys=wt,this._values=Pt,this._selector=ge}return Zt.prototype["@@iterator"]=function(){return this},Zt.prototype[re]=function(){return this},Zt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Pt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:Pt,done:!1}}return{value:void 0,done:!0}},Zt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),wt},Zt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:wt,done:!0}},Zt}(),Ie=function(){function Zt(){this._keys=[],this._values=[],this._cacheKey=ue,this._cacheIndex=-2}return Object.defineProperty(Zt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Zt.prototype.has=function(wt){return this._find(wt,!1)>=0},Zt.prototype.get=function(wt){var Pt=this._find(wt,!1);return Pt>=0?this._values[Pt]:void 0},Zt.prototype.set=function(wt,Pt){var ge=this._find(wt,!0);return this._values[ge]=Pt,this},Zt.prototype.delete=function(wt){var Pt=this._find(wt,!1);if(Pt>=0){for(var ge=this._keys.length,ve=Pt+1;ve<ge;ve++)this._keys[ve-1]=this._keys[ve],this._values[ve-1]=this._values[ve];return this._keys.length--,this._values.length--,Mt(wt,this._cacheKey)&&(this._cacheKey=ue,this._cacheIndex=-2),!0}return!1},Zt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ue,this._cacheIndex=-2},Zt.prototype.keys=function(){return new oe(this._keys,this._values,qe)},Zt.prototype.values=function(){return new oe(this._keys,this._values,At)},Zt.prototype.entries=function(){return new oe(this._keys,this._values,rr)},Zt.prototype["@@iterator"]=function(){return this.entries()},Zt.prototype[re]=function(){return this.entries()},Zt.prototype._find=function(wt,Pt){if(!Mt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ge=0;ge<this._keys.length;ge++)if(Mt(this._keys[ge],wt)){this._cacheIndex=ge;break}}return this._cacheIndex<0&&Pt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},Zt}();return Ie;function qe(Zt,wt){return Zt}function At(Zt,wt){return wt}function rr(Zt,wt){return[Zt,wt]}}function hr(){var ue=function(){function G(){this._map=new A}return Object.defineProperty(G.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),G.prototype.has=function(oe){return this._map.has(oe)},G.prototype.add=function(oe){return this._map.set(oe,oe),this},G.prototype.delete=function(oe){return this._map.delete(oe)},G.prototype.clear=function(){this._map.clear()},G.prototype.keys=function(){return this._map.keys()},G.prototype.values=function(){return this._map.keys()},G.prototype.entries=function(){return this._map.entries()},G.prototype["@@iterator"]=function(){return this.keys()},G.prototype[re]=function(){return this.keys()},G}();return ue}function Er(){var ue=16,G=ne.create(),oe=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.has(ge,this._key):!1},wt.prototype.get=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.get(ge,this._key):void 0},wt.prototype.set=function(Pt,ge){var ve=qe(Pt,!0);return ve[this._key]=ge,this},wt.prototype.delete=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?delete ge[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+Zt();while(ne.has(G,wt));return G[wt]=!0,wt}function qe(wt,Pt){if(!j.call(wt,oe)){if(!Pt)return;Object.defineProperty(wt,oe,{value:ne.create()})}return wt[oe]}function At(wt,Pt){for(var ge=0;ge<Pt;++ge)wt[ge]=Math.random()*255|0;return wt}function rr(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):At(new Uint8Array(wt),wt):At(new Array(wt),wt)}function Zt(){var wt=rr(ue);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Pt="",ge=0;ge<ue;++ge){var ve=wt[ge];(ge===4||ge===6||ge===8)&&(Pt+="-"),ve<16&&(Pt+="0"),Pt+=ve.toString(16).toLowerCase()}return Pt}}function Ir(ue){return ue.__=void 0,delete ue.__,ue}})})(H||(H={}))},31857:function(vt,N,k){var H;(function(W){(function(w){var X=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Q(),j=ee(W);typeof X.Reflect!="undefined"&&(j=ee(X.Reflect,j)),w(j,X),typeof X.Reflect=="undefined"&&(X.Reflect=W);function ee(ye,se){return function(ne,$){Object.defineProperty(ye,ne,{configurable:!0,writable:!0,value:$}),se&&se(ne,$)}}function Y(){try{return Function("return this;")()}catch(ye){}}function re(){try{return(0,eval)("(function() { return this; })()")}catch(ye){}}function Q(){return Y()||re()}})(function(w,X){var j=Object.prototype.hasOwnProperty,ee=typeof Symbol=="function",Y=ee&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",re=ee&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Q=typeof Object.create=="function",ye={__proto__:[]}instanceof Array,se=!Q&&!ye,ne={create:Q?function(){return Ir(Object.create(null))}:ye?function(){return Ir({__proto__:null})}:function(){return Ir({})},has:se?function(ue,G){return j.call(ue,G)}:function(ue,G){return G in ue},get:se?function(ue,G){return j.call(ue,G)?ue[G]:void 0}:function(ue,G){return ue[G]}},$=Object.getPrototypeOf(Function),A=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:fr(),b=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:hr(),te=typeof WeakMap=="function"?WeakMap:Er(),le=ee?Symbol.for("@reflect-metadata:registry"):void 0,Ae=Ut(),De=Gt(Ae);function Ne(ue,G,oe,Ie){if(xe(oe)){if(!at(ue))throw new TypeError;if(!Ze(G))throw new TypeError;return tt(ue,G)}else{if(!at(ue))throw new TypeError;if(!dt(G))throw new TypeError;if(!dt(Ie)&&!xe(Ie)&&!rt(Ie))throw new TypeError;return rt(Ie)&&(Ie=void 0),oe=je(oe),ae(ue,G,oe,Ie)}}w("decorate",Ne);function Te(ue,G){function oe(Ie,qe){if(!dt(Ie))throw new TypeError;if(!xe(qe)&&!_t(qe))throw new TypeError;He(ue,G,Ie,qe)}return oe}w("metadata",Te);function We(ue,G,oe,Ie){if(!dt(oe))throw new TypeError;return xe(Ie)||(Ie=je(Ie)),He(ue,G,oe,Ie)}w("defineMetadata",We);function _e(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Ke(ue,G,oe)}w("hasMetadata",_e);function we(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),he(ue,G,oe)}w("hasOwnMetadata",we);function Re(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),Pe(ue,G,oe)}w("getMetadata",Re);function ze(ue,G,oe){if(!dt(G))throw new TypeError;return xe(oe)||(oe=je(oe)),lt(ue,G,oe)}w("getOwnMetadata",ze);function Ge(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Ue(ue,G)}w("getMetadataKeys",Ge);function yt(ue,G){if(!dt(ue))throw new TypeError;return xe(G)||(G=je(G)),Qe(ue,G)}w("getOwnMetadataKeys",yt);function ke(ue,G,oe){if(!dt(G))throw new TypeError;if(xe(oe)||(oe=je(oe)),!dt(G))throw new TypeError;xe(oe)||(oe=je(oe));var Ie=qt(G,oe,!1);return xe(Ie)?!1:Ie.OrdinaryDeleteMetadata(ue,G,oe)}w("deleteMetadata",ke);function tt(ue,G){for(var oe=ue.length-1;oe>=0;--oe){var Ie=ue[oe],qe=Ie(G);if(!xe(qe)&&!rt(qe)){if(!Ze(qe))throw new TypeError;G=qe}}return G}function ae(ue,G,oe,Ie){for(var qe=ue.length-1;qe>=0;--qe){var At=ue[qe],rr=At(G,oe,Ie);if(!xe(rr)&&!rt(rr)){if(!dt(rr))throw new TypeError;Ie=rr}}return Ie}function Ke(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return!0;var qe=Sr(G);return rt(qe)?!1:Ke(ue,qe,oe)}function he(ue,G,oe){var Ie=qt(G,oe,!1);return xe(Ie)?!1:Xe(Ie.OrdinaryHasOwnMetadata(ue,G,oe))}function Pe(ue,G,oe){var Ie=he(ue,G,oe);if(Ie)return lt(ue,G,oe);var qe=Sr(G);if(!rt(qe))return Pe(ue,qe,oe)}function lt(ue,G,oe){var Ie=qt(G,oe,!1);if(!xe(Ie))return Ie.OrdinaryGetOwnMetadata(ue,G,oe)}function He(ue,G,oe,Ie){var qe=qt(oe,Ie,!0);qe.OrdinaryDefineOwnMetadata(ue,G,oe,Ie)}function Ue(ue,G){var oe=Qe(ue,G),Ie=Sr(ue);if(Ie===null)return oe;var qe=Ue(Ie,G);if(qe.length<=0)return oe;if(oe.length<=0)return qe;for(var At=new b,rr=[],Zt=0,wt=oe;Zt<wt.length;Zt++){var Pt=wt[Zt],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}for(var ve=0,Fe=qe;ve<Fe.length;ve++){var Pt=Fe[ve],ge=At.has(Pt);ge||(At.add(Pt),rr.push(Pt))}return rr}function Qe(ue,G){var oe=qt(ue,G,!1);return oe?oe.OrdinaryOwnMetadataKeys(ue,G):[]}function Se(ue){if(ue===null)return 1;switch(typeof ue){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ue===null?1:6;default:return 6}}function xe(ue){return ue===void 0}function rt(ue){return ue===null}function Je(ue){return typeof ue=="symbol"}function dt(ue){return typeof ue=="object"?ue!==null:typeof ue=="function"}function Bt(ue,G){switch(Se(ue)){case 0:return ue;case 1:return ue;case 2:return ue;case 3:return ue;case 4:return ue;case 5:return ue}var oe=G===3?"string":G===5?"number":"default",Ie=ir(ue,Y);if(Ie!==void 0){var qe=Ie.call(ue,oe);if(dt(qe))throw new TypeError;return qe}return Ye(ue,oe==="default"?"number":oe)}function Ye(ue,G){if(G==="string"){var oe=ue.toString;if(Me(oe)){var Ie=oe.call(ue);if(!dt(Ie))return Ie}var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}}else{var qe=ue.valueOf;if(Me(qe)){var Ie=qe.call(ue);if(!dt(Ie))return Ie}var At=ue.toString;if(Me(At)){var Ie=At.call(ue);if(!dt(Ie))return Ie}}throw new TypeError}function Xe(ue){return!!ue}function Le(ue){return""+ue}function je(ue){var G=Bt(ue,3);return Je(G)?G:Le(G)}function at(ue){return Array.isArray?Array.isArray(ue):ue instanceof Object?ue instanceof Array:Object.prototype.toString.call(ue)==="[object Array]"}function Me(ue){return typeof ue=="function"}function Ze(ue){return typeof ue=="function"}function _t(ue){switch(Se(ue)){case 3:return!0;case 4:return!0;default:return!1}}function Mt(ue,G){return ue===G||ue!==ue&&G!==G}function ir(ue,G){var oe=ue[G];if(oe!=null){if(!Me(oe))throw new TypeError;return oe}}function Tr(ue){var G=ir(ue,re);if(!Me(G))throw new TypeError;var oe=G.call(ue);if(!dt(oe))throw new TypeError;return oe}function et(ue){return ue.value}function en(ue){var G=ue.next();return G.done?!1:G}function Xr(ue){var G=ue.return;G&&G.call(ue)}function Sr(ue){var G=Object.getPrototypeOf(ue);if(typeof ue!="function"||ue===$||G!==$)return G;var oe=ue.prototype,Ie=oe&&Object.getPrototypeOf(oe);if(Ie==null||Ie===Object.prototype)return G;var qe=Ie.constructor;return typeof qe!="function"||qe===ue?G:qe}function pt(){var ue;!xe(le)&&typeof X.Reflect!="undefined"&&!(le in X.Reflect)&&typeof X.Reflect.defineMetadata=="function"&&(ue=Tt(X.Reflect));var G,oe,Ie,qe=new te,At={registerProvider:rr,getProvider:wt,setProvider:ge};return At;function rr(ve){if(!Object.isExtensible(At))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case ue===ve:break;case xe(G):G=ve;break;case G===ve:break;case xe(oe):oe=ve;break;case oe===ve:break;default:Ie===void 0&&(Ie=new b),Ie.add(ve);break}}function Zt(ve,Fe){if(!xe(G)){if(G.isProviderFor(ve,Fe))return G;if(!xe(oe)){if(oe.isProviderFor(ve,Fe))return G;if(!xe(Ie))for(var nt=Tr(Ie);;){var St=en(nt);if(!St)return;var $t=et(St);if($t.isProviderFor(ve,Fe))return Xr(nt),$t}}}if(!xe(ue)&&ue.isProviderFor(ve,Fe))return ue}function wt(ve,Fe){var nt=qe.get(ve),St;return xe(nt)||(St=nt.get(Fe)),xe(St)&&(St=Zt(ve,Fe),xe(St)||(xe(nt)&&(nt=new A,qe.set(ve,nt)),nt.set(Fe,St))),St}function Pt(ve){if(xe(ve))throw new TypeError;return G===ve||oe===ve||!xe(Ie)&&Ie.has(ve)}function ge(ve,Fe,nt){if(!Pt(nt))throw new Error("Metadata provider not registered.");var St=wt(ve,Fe);if(St!==nt){if(!xe(St))return!1;var $t=qe.get(ve);xe($t)&&($t=new A,qe.set(ve,$t)),$t.set(Fe,nt)}return!0}}function Ut(){var ue;return!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&(ue=X.Reflect[le]),xe(ue)&&(ue=pt()),!xe(le)&&dt(X.Reflect)&&Object.isExtensible(X.Reflect)&&Object.defineProperty(X.Reflect,le,{enumerable:!1,configurable:!1,writable:!1,value:ue}),ue}function Gt(ue){var G=new te,oe={isProviderFor:function(Pt,ge){var ve=G.get(Pt);return xe(ve)?!1:ve.has(ge)},OrdinaryDefineOwnMetadata:rr,OrdinaryHasOwnMetadata:qe,OrdinaryGetOwnMetadata:At,OrdinaryOwnMetadataKeys:Zt,OrdinaryDeleteMetadata:wt};return Ae.registerProvider(oe),oe;function Ie(Pt,ge,ve){var Fe=G.get(Pt),nt=!1;if(xe(Fe)){if(!ve)return;Fe=new A,G.set(Pt,Fe),nt=!0}var St=Fe.get(ge);if(xe(St)){if(!ve)return;if(St=new A,Fe.set(ge,St),!ue.setProvider(Pt,ge,oe))throw Fe.delete(ge),nt&&G.delete(Pt),new Error("Wrong provider for target.")}return St}function qe(Pt,ge,ve){var Fe=Ie(ge,ve,!1);return xe(Fe)?!1:Xe(Fe.has(Pt))}function At(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(!xe(Fe))return Fe.get(Pt)}function rr(Pt,ge,ve,Fe){var nt=Ie(ve,Fe,!0);nt.set(Pt,ge)}function Zt(Pt,ge){var ve=[],Fe=Ie(Pt,ge,!1);if(xe(Fe))return ve;for(var nt=Fe.keys(),St=Tr(nt),$t=0;;){var vr=en(St);if(!vr)return ve.length=$t,ve;var Rt=et(vr);try{ve[$t]=Rt}catch(ct){try{Xr(St)}finally{throw ct}}$t++}}function wt(Pt,ge,ve){var Fe=Ie(ge,ve,!1);if(xe(Fe)||!Fe.delete(Pt))return!1;if(Fe.size===0){var nt=G.get(ge);xe(nt)||(nt.delete(ve),nt.size===0&&G.delete(nt))}return!0}}function Tt(ue){var G=ue.defineMetadata,oe=ue.hasOwnMetadata,Ie=ue.getOwnMetadata,qe=ue.getOwnMetadataKeys,At=ue.deleteMetadata,rr=new te,Zt={isProviderFor:function(wt,Pt){var ge=rr.get(wt);return xe(ge)?qe(wt,Pt).length?(xe(ge)&&(ge=new b,rr.set(wt,ge)),ge.add(Pt),!0):!1:ge.has(Pt)},OrdinaryDefineOwnMetadata:G,OrdinaryHasOwnMetadata:oe,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:qe,OrdinaryDeleteMetadata:At};return Zt}function qt(ue,G,oe){var Ie=Ae.getProvider(ue,G);if(!xe(Ie))return Ie;if(oe){if(Ae.setProvider(ue,G,De))return De;throw new Error("Illegal state.")}}function fr(){var ue={},G=[],oe=function(){function Zt(wt,Pt,ge){this._index=0,this._keys=wt,this._values=Pt,this._selector=ge}return Zt.prototype["@@iterator"]=function(){return this},Zt.prototype[re]=function(){return this},Zt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Pt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:Pt,done:!1}}return{value:void 0,done:!0}},Zt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),wt},Zt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:wt,done:!0}},Zt}(),Ie=function(){function Zt(){this._keys=[],this._values=[],this._cacheKey=ue,this._cacheIndex=-2}return Object.defineProperty(Zt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Zt.prototype.has=function(wt){return this._find(wt,!1)>=0},Zt.prototype.get=function(wt){var Pt=this._find(wt,!1);return Pt>=0?this._values[Pt]:void 0},Zt.prototype.set=function(wt,Pt){var ge=this._find(wt,!0);return this._values[ge]=Pt,this},Zt.prototype.delete=function(wt){var Pt=this._find(wt,!1);if(Pt>=0){for(var ge=this._keys.length,ve=Pt+1;ve<ge;ve++)this._keys[ve-1]=this._keys[ve],this._values[ve-1]=this._values[ve];return this._keys.length--,this._values.length--,Mt(wt,this._cacheKey)&&(this._cacheKey=ue,this._cacheIndex=-2),!0}return!1},Zt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ue,this._cacheIndex=-2},Zt.prototype.keys=function(){return new oe(this._keys,this._values,qe)},Zt.prototype.values=function(){return new oe(this._keys,this._values,At)},Zt.prototype.entries=function(){return new oe(this._keys,this._values,rr)},Zt.prototype["@@iterator"]=function(){return this.entries()},Zt.prototype[re]=function(){return this.entries()},Zt.prototype._find=function(wt,Pt){if(!Mt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ge=0;ge<this._keys.length;ge++)if(Mt(this._keys[ge],wt)){this._cacheIndex=ge;break}}return this._cacheIndex<0&&Pt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},Zt}();return Ie;function qe(Zt,wt){return Zt}function At(Zt,wt){return wt}function rr(Zt,wt){return[Zt,wt]}}function hr(){var ue=function(){function G(){this._map=new A}return Object.defineProperty(G.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),G.prototype.has=function(oe){return this._map.has(oe)},G.prototype.add=function(oe){return this._map.set(oe,oe),this},G.prototype.delete=function(oe){return this._map.delete(oe)},G.prototype.clear=function(){this._map.clear()},G.prototype.keys=function(){return this._map.keys()},G.prototype.values=function(){return this._map.keys()},G.prototype.entries=function(){return this._map.entries()},G.prototype["@@iterator"]=function(){return this.keys()},G.prototype[re]=function(){return this.keys()},G}();return ue}function Er(){var ue=16,G=ne.create(),oe=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.has(ge,this._key):!1},wt.prototype.get=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?ne.get(ge,this._key):void 0},wt.prototype.set=function(Pt,ge){var ve=qe(Pt,!0);return ve[this._key]=ge,this},wt.prototype.delete=function(Pt){var ge=qe(Pt,!1);return ge!==void 0?delete ge[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+Zt();while(ne.has(G,wt));return G[wt]=!0,wt}function qe(wt,Pt){if(!j.call(wt,oe)){if(!Pt)return;Object.defineProperty(wt,oe,{value:ne.create()})}return wt[oe]}function At(wt,Pt){for(var ge=0;ge<Pt;++ge)wt[ge]=Math.random()*255|0;return wt}function rr(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):At(new Uint8Array(wt),wt):At(new Array(wt),wt)}function Zt(){var wt=rr(ue);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Pt="",ge=0;ge<ue;++ge){var ve=wt[ge];(ge===4||ge===6||ge===8)&&(Pt+="-"),ve<16&&(Pt+="0"),Pt+=ve.toString(16).toLowerCase()}return Pt}}function Ir(ue){return ue.__=void 0,delete ue.__,ue}})})(H||(H={}))},73897:function(vt){function N(k,H){(H==null||H>k.length)&&(H=k.length);for(var W=0,w=new Array(H);W<H;W++)w[W]=k[W];return w}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},85372:function(vt){function N(k){if(Array.isArray(k))return k}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},63405:function(vt,N,k){var H=k(73897);function W(w){if(Array.isArray(w))return H(w)}vt.exports=W,vt.exports.__esModule=!0,vt.exports.default=vt.exports},66115:function(vt){function N(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},56690:function(vt){function N(k,H){if(!(k instanceof H))throw new TypeError("Cannot call a class as a function")}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},89728:function(vt,N,k){var H=k(64062);function W(X,j){for(var ee=0;ee<j.length;ee++){var Y=j[ee];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(X,H(Y.key),Y)}}function w(X,j,ee){return j&&W(X.prototype,j),ee&&W(X,ee),Object.defineProperty(X,"prototype",{writable:!1}),X}vt.exports=w,vt.exports.__esModule=!0,vt.exports.default=vt.exports},73808:function(vt){function N(k){return vt.exports=N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},vt.exports.__esModule=!0,vt.exports.default=vt.exports,N(k)}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},61655:function(vt,N,k){var H=k(6015);function W(w,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(X&&X.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),X&&H(w,X)}vt.exports=W,vt.exports.__esModule=!0,vt.exports.default=vt.exports},75263:function(vt,N,k){var H=k(18698).default;function W(X){if(typeof WeakMap!="function")return null;var j=new WeakMap,ee=new WeakMap;return(W=function(re){return re?ee:j})(X)}function w(X,j){if(!j&&X&&X.__esModule)return X;if(X===null||H(X)!="object"&&typeof X!="function")return{default:X};var ee=W(j);if(ee&&ee.has(X))return ee.get(X);var Y={__proto__:null},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q)){var ye=re?Object.getOwnPropertyDescriptor(X,Q):null;ye&&(ye.get||ye.set)?Object.defineProperty(Y,Q,ye):Y[Q]=X[Q]}return Y.default=X,ee&&ee.set(X,Y),Y}vt.exports=w,vt.exports.__esModule=!0,vt.exports.default=vt.exports},69617:function(vt){function N(){try{var k=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(H){}return(vt.exports=N=function(){return!!k},vt.exports.__esModule=!0,vt.exports.default=vt.exports)()}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},79498:function(vt){function N(k){if(typeof Symbol!="undefined"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},68872:function(vt){function N(k,H){var W=k==null?null:typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(W!=null){var w,X,j,ee,Y=[],re=!0,Q=!1;try{if(j=(W=W.call(k)).next,H===0){if(Object(W)!==W)return;re=!1}else for(;!(re=(w=j.call(W)).done)&&(Y.push(w.value),Y.length!==H);re=!0);}catch(ye){Q=!0,X=ye}finally{try{if(!re&&W.return!=null&&(ee=W.return(),Object(ee)!==ee))return}finally{if(Q)throw X}}return Y}}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},12218:function(vt){function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},42281:function(vt){function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},94993:function(vt,N,k){var H=k(18698).default,W=k(66115);function w(X,j){if(j&&(H(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(X)}vt.exports=w,vt.exports.__esModule=!0,vt.exports.default=vt.exports},17061:function(vt,N,k){var H=k(18698).default;function W(){"use strict";vt.exports=W=function(){return X},vt.exports.__esModule=!0,vt.exports.default=vt.exports;var w,X={},j=Object.prototype,ee=j.hasOwnProperty,Y=Object.defineProperty||function(lt,He,Ue){lt[He]=Ue.value},re=typeof Symbol=="function"?Symbol:{},Q=re.iterator||"@@iterator",ye=re.asyncIterator||"@@asyncIterator",se=re.toStringTag||"@@toStringTag";function ne(lt,He,Ue){return Object.defineProperty(lt,He,{value:Ue,enumerable:!0,configurable:!0,writable:!0}),lt[He]}try{ne({},"")}catch(lt){ne=function(Ue,Qe,Se){return Ue[Qe]=Se}}function $(lt,He,Ue,Qe){var Se=He&&He.prototype instanceof Ne?He:Ne,xe=Object.create(Se.prototype),rt=new he(Qe||[]);return Y(xe,"_invoke",{value:ke(lt,Ue,rt)}),xe}function A(lt,He,Ue){try{return{type:"normal",arg:lt.call(He,Ue)}}catch(Qe){return{type:"throw",arg:Qe}}}X.wrap=$;var b="suspendedStart",te="suspendedYield",le="executing",Ae="completed",De={};function Ne(){}function Te(){}function We(){}var _e={};ne(_e,Q,function(){return this});var we=Object.getPrototypeOf,Re=we&&we(we(Pe([])));Re&&Re!==j&&ee.call(Re,Q)&&(_e=Re);var ze=We.prototype=Ne.prototype=Object.create(_e);function Ge(lt){["next","throw","return"].forEach(function(He){ne(lt,He,function(Ue){return this._invoke(He,Ue)})})}function yt(lt,He){function Ue(Se,xe,rt,Je){var dt=A(lt[Se],lt,xe);if(dt.type!=="throw"){var Bt=dt.arg,Ye=Bt.value;return Ye&&H(Ye)=="object"&&ee.call(Ye,"__await")?He.resolve(Ye.__await).then(function(Xe){Ue("next",Xe,rt,Je)},function(Xe){Ue("throw",Xe,rt,Je)}):He.resolve(Ye).then(function(Xe){Bt.value=Xe,rt(Bt)},function(Xe){return Ue("throw",Xe,rt,Je)})}Je(dt.arg)}var Qe;Y(this,"_invoke",{value:function(xe,rt){function Je(){return new He(function(dt,Bt){Ue(xe,rt,dt,Bt)})}return Qe=Qe?Qe.then(Je,Je):Je()}})}function ke(lt,He,Ue){var Qe=b;return function(Se,xe){if(Qe===le)throw new Error("Generator is already running");if(Qe===Ae){if(Se==="throw")throw xe;return{value:w,done:!0}}for(Ue.method=Se,Ue.arg=xe;;){var rt=Ue.delegate;if(rt){var Je=tt(rt,Ue);if(Je){if(Je===De)continue;return Je}}if(Ue.method==="next")Ue.sent=Ue._sent=Ue.arg;else if(Ue.method==="throw"){if(Qe===b)throw Qe=Ae,Ue.arg;Ue.dispatchException(Ue.arg)}else Ue.method==="return"&&Ue.abrupt("return",Ue.arg);Qe=le;var dt=A(lt,He,Ue);if(dt.type==="normal"){if(Qe=Ue.done?Ae:te,dt.arg===De)continue;return{value:dt.arg,done:Ue.done}}dt.type==="throw"&&(Qe=Ae,Ue.method="throw",Ue.arg=dt.arg)}}}function tt(lt,He){var Ue=He.method,Qe=lt.iterator[Ue];if(Qe===w)return He.delegate=null,Ue==="throw"&&lt.iterator.return&&(He.method="return",He.arg=w,tt(lt,He),He.method==="throw")||Ue!=="return"&&(He.method="throw",He.arg=new TypeError("The iterator does not provide a '"+Ue+"' method")),De;var Se=A(Qe,lt.iterator,He.arg);if(Se.type==="throw")return He.method="throw",He.arg=Se.arg,He.delegate=null,De;var xe=Se.arg;return xe?xe.done?(He[lt.resultName]=xe.value,He.next=lt.nextLoc,He.method!=="return"&&(He.method="next",He.arg=w),He.delegate=null,De):xe:(He.method="throw",He.arg=new TypeError("iterator result is not an object"),He.delegate=null,De)}function ae(lt){var He={tryLoc:lt[0]};1 in lt&&(He.catchLoc=lt[1]),2 in lt&&(He.finallyLoc=lt[2],He.afterLoc=lt[3]),this.tryEntries.push(He)}function Ke(lt){var He=lt.completion||{};He.type="normal",delete He.arg,lt.completion=He}function he(lt){this.tryEntries=[{tryLoc:"root"}],lt.forEach(ae,this),this.reset(!0)}function Pe(lt){if(lt||lt===""){var He=lt[Q];if(He)return He.call(lt);if(typeof lt.next=="function")return lt;if(!isNaN(lt.length)){var Ue=-1,Qe=function Se(){for(;++Ue<lt.length;)if(ee.call(lt,Ue))return Se.value=lt[Ue],Se.done=!1,Se;return Se.value=w,Se.done=!0,Se};return Qe.next=Qe}}throw new TypeError(H(lt)+" is not iterable")}return Te.prototype=We,Y(ze,"constructor",{value:We,configurable:!0}),Y(We,"constructor",{value:Te,configurable:!0}),Te.displayName=ne(We,se,"GeneratorFunction"),X.isGeneratorFunction=function(lt){var He=typeof lt=="function"&&lt.constructor;return!!He&&(He===Te||(He.displayName||He.name)==="GeneratorFunction")},X.mark=function(lt){return Object.setPrototypeOf?Object.setPrototypeOf(lt,We):(lt.__proto__=We,ne(lt,se,"GeneratorFunction")),lt.prototype=Object.create(ze),lt},X.awrap=function(lt){return{__await:lt}},Ge(yt.prototype),ne(yt.prototype,ye,function(){return this}),X.AsyncIterator=yt,X.async=function(lt,He,Ue,Qe,Se){Se===void 0&&(Se=Promise);var xe=new yt($(lt,He,Ue,Qe),Se);return X.isGeneratorFunction(He)?xe:xe.next().then(function(rt){return rt.done?rt.value:xe.next()})},Ge(ze),ne(ze,se,"Generator"),ne(ze,Q,function(){return this}),ne(ze,"toString",function(){return"[object Generator]"}),X.keys=function(lt){var He=Object(lt),Ue=[];for(var Qe in He)Ue.push(Qe);return Ue.reverse(),function Se(){for(;Ue.length;){var xe=Ue.pop();if(xe in He)return Se.value=xe,Se.done=!1,Se}return Se.done=!0,Se}},X.values=Pe,he.prototype={constructor:he,reset:function(He){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(Ke),!He)for(var Ue in this)Ue.charAt(0)==="t"&&ee.call(this,Ue)&&!isNaN(+Ue.slice(1))&&(this[Ue]=w)},stop:function(){this.done=!0;var He=this.tryEntries[0].completion;if(He.type==="throw")throw He.arg;return this.rval},dispatchException:function(He){if(this.done)throw He;var Ue=this;function Qe(Bt,Ye){return rt.type="throw",rt.arg=He,Ue.next=Bt,Ye&&(Ue.method="next",Ue.arg=w),!!Ye}for(var Se=this.tryEntries.length-1;Se>=0;--Se){var xe=this.tryEntries[Se],rt=xe.completion;if(xe.tryLoc==="root")return Qe("end");if(xe.tryLoc<=this.prev){var Je=ee.call(xe,"catchLoc"),dt=ee.call(xe,"finallyLoc");if(Je&&dt){if(this.prev<xe.catchLoc)return Qe(xe.catchLoc,!0);if(this.prev<xe.finallyLoc)return Qe(xe.finallyLoc)}else if(Je){if(this.prev<xe.catchLoc)return Qe(xe.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<xe.finallyLoc)return Qe(xe.finallyLoc)}}}},abrupt:function(He,Ue){for(var Qe=this.tryEntries.length-1;Qe>=0;--Qe){var Se=this.tryEntries[Qe];if(Se.tryLoc<=this.prev&&ee.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var xe=Se;break}}xe&&(He==="break"||He==="continue")&&xe.tryLoc<=Ue&&Ue<=xe.finallyLoc&&(xe=null);var rt=xe?xe.completion:{};return rt.type=He,rt.arg=Ue,xe?(this.method="next",this.next=xe.finallyLoc,De):this.complete(rt)},complete:function(He,Ue){if(He.type==="throw")throw He.arg;return He.type==="break"||He.type==="continue"?this.next=He.arg:He.type==="return"?(this.rval=this.arg=He.arg,this.method="return",this.next="end"):He.type==="normal"&&Ue&&(this.next=Ue),De},finish:function(He){for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Qe=this.tryEntries[Ue];if(Qe.finallyLoc===He)return this.complete(Qe.completion,Qe.afterLoc),Ke(Qe),De}},catch:function(He){for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Qe=this.tryEntries[Ue];if(Qe.tryLoc===He){var Se=Qe.completion;if(Se.type==="throw"){var xe=Se.arg;Ke(Qe)}return xe}}throw new Error("illegal catch attempt")},delegateYield:function(He,Ue,Qe){return this.delegate={iterator:Pe(He),resultName:Ue,nextLoc:Qe},this.method==="next"&&(this.arg=w),De}},X}vt.exports=W,vt.exports.__esModule=!0,vt.exports.default=vt.exports},6015:function(vt){function N(k,H){return vt.exports=N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,X){return w.__proto__=X,w},vt.exports.__esModule=!0,vt.exports.default=vt.exports,N(k,H)}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},27424:function(vt,N,k){var H=k(85372),W=k(68872),w=k(86116),X=k(12218);function j(ee,Y){return H(ee)||W(ee,Y)||w(ee,Y)||X()}vt.exports=j,vt.exports.__esModule=!0,vt.exports.default=vt.exports},51589:function(vt,N,k){var H=k(85372),W=k(79498),w=k(86116),X=k(12218);function j(ee){return H(ee)||W(ee)||w(ee)||X()}vt.exports=j,vt.exports.__esModule=!0,vt.exports.default=vt.exports},861:function(vt,N,k){var H=k(63405),W=k(79498),w=k(86116),X=k(42281);function j(ee){return H(ee)||W(ee)||w(ee)||X()}vt.exports=j,vt.exports.__esModule=!0,vt.exports.default=vt.exports},86116:function(vt,N,k){var H=k(73897);function W(w,X){if(w){if(typeof w=="string")return H(w,X);var j=Object.prototype.toString.call(w).slice(8,-1);if(j==="Object"&&w.constructor&&(j=w.constructor.name),j==="Map"||j==="Set")return Array.from(w);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return H(w,X)}}vt.exports=W,vt.exports.__esModule=!0,vt.exports.default=vt.exports},64687:function(vt,N,k){var H=k(17061)();vt.exports=H;try{regeneratorRuntime=H}catch(W){typeof globalThis=="object"?globalThis.regeneratorRuntime=H:Function("r","regeneratorRuntime = r")(H)}},64599:function(vt,N,k){var H=k(96263);function W(w,X){var j=typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(!j){if(Array.isArray(w)||(j=H(w))||X&&w&&typeof w.length=="number"){j&&(w=j);var ee=0,Y=function(){};return{s:Y,n:function(){return ee>=w.length?{done:!0}:{done:!1,value:w[ee++]}},e:function(ne){throw ne},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,Q=!1,ye;return{s:function(){j=j.call(w)},n:function(){var ne=j.next();return re=ne.done,ne},e:function(ne){Q=!0,ye=ne},f:function(){try{!re&&j.return!=null&&j.return()}finally{if(Q)throw ye}}}}vt.exports=W,vt.exports.__esModule=!0,vt.exports.default=vt.exports},27771:function(vt,N){"use strict";var k=Array.isArray;N.Z=k},97582:function(vt,N,k){"use strict";k.d(N,{CR:function(){return le},Jh:function(){return $},XA:function(){return te},ZT:function(){return W},_T:function(){return X},ev:function(){return Ne},mG:function(){return ne},pi:function(){return w},pr:function(){return De}});var H=function(He,Ue){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Qe,Se){Qe.__proto__=Se}||function(Qe,Se){for(var xe in Se)Object.prototype.hasOwnProperty.call(Se,xe)&&(Qe[xe]=Se[xe])},H(He,Ue)};function W(He,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Class extends value "+String(Ue)+" is not a constructor or null");H(He,Ue);function Qe(){this.constructor=He}He.prototype=Ue===null?Object.create(Ue):(Qe.prototype=Ue.prototype,new Qe)}var w=function(){return w=Object.assign||function(Ue){for(var Qe,Se=1,xe=arguments.length;Se<xe;Se++){Qe=arguments[Se];for(var rt in Qe)Object.prototype.hasOwnProperty.call(Qe,rt)&&(Ue[rt]=Qe[rt])}return Ue},w.apply(this,arguments)};function X(He,Ue){var Qe={};for(var Se in He)Object.prototype.hasOwnProperty.call(He,Se)&&Ue.indexOf(Se)<0&&(Qe[Se]=He[Se]);if(He!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xe=0,Se=Object.getOwnPropertySymbols(He);xe<Se.length;xe++)Ue.indexOf(Se[xe])<0&&Object.prototype.propertyIsEnumerable.call(He,Se[xe])&&(Qe[Se[xe]]=He[Se[xe]]);return Qe}function j(He,Ue,Qe,Se){var xe=arguments.length,rt=xe<3?Ue:Se===null?Se=Object.getOwnPropertyDescriptor(Ue,Qe):Se,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")rt=Reflect.decorate(He,Ue,Qe,Se);else for(var dt=He.length-1;dt>=0;dt--)(Je=He[dt])&&(rt=(xe<3?Je(rt):xe>3?Je(Ue,Qe,rt):Je(Ue,Qe))||rt);return xe>3&&rt&&Object.defineProperty(Ue,Qe,rt),rt}function ee(He,Ue){return function(Qe,Se){Ue(Qe,Se,He)}}function Y(He,Ue,Qe,Se,xe,rt){function Je(Mt){if(Mt!==void 0&&typeof Mt!="function")throw new TypeError("Function expected");return Mt}for(var dt=Se.kind,Bt=dt==="getter"?"get":dt==="setter"?"set":"value",Ye=!Ue&&He?Se.static?He:He.prototype:null,Xe=Ue||(Ye?Object.getOwnPropertyDescriptor(Ye,Se.name):{}),Le,je=!1,at=Qe.length-1;at>=0;at--){var Me={};for(var Ze in Se)Me[Ze]=Ze==="access"?{}:Se[Ze];for(var Ze in Se.access)Me.access[Ze]=Se.access[Ze];Me.addInitializer=function(Mt){if(je)throw new TypeError("Cannot add initializers after decoration has completed");rt.push(Je(Mt||null))};var _t=(0,Qe[at])(dt==="accessor"?{get:Xe.get,set:Xe.set}:Xe[Bt],Me);if(dt==="accessor"){if(_t===void 0)continue;if(_t===null||typeof _t!="object")throw new TypeError("Object expected");(Le=Je(_t.get))&&(Xe.get=Le),(Le=Je(_t.set))&&(Xe.set=Le),(Le=Je(_t.init))&&xe.unshift(Le)}else(Le=Je(_t))&&(dt==="field"?xe.unshift(Le):Xe[Bt]=Le)}Ye&&Object.defineProperty(Ye,Se.name,Xe),je=!0}function re(He,Ue,Qe){for(var Se=arguments.length>2,xe=0;xe<Ue.length;xe++)Qe=Se?Ue[xe].call(He,Qe):Ue[xe].call(He);return Se?Qe:void 0}function Q(He){return typeof He=="symbol"?He:"".concat(He)}function ye(He,Ue,Qe){return typeof Ue=="symbol"&&(Ue=Ue.description?"[".concat(Ue.description,"]"):""),Object.defineProperty(He,"name",{configurable:!0,value:Qe?"".concat(Qe," ",Ue):Ue})}function se(He,Ue){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(He,Ue)}function ne(He,Ue,Qe,Se){function xe(rt){return rt instanceof Qe?rt:new Qe(function(Je){Je(rt)})}return new(Qe||(Qe=Promise))(function(rt,Je){function dt(Xe){try{Ye(Se.next(Xe))}catch(Le){Je(Le)}}function Bt(Xe){try{Ye(Se.throw(Xe))}catch(Le){Je(Le)}}function Ye(Xe){Xe.done?rt(Xe.value):xe(Xe.value).then(dt,Bt)}Ye((Se=Se.apply(He,Ue||[])).next())})}function $(He,Ue){var Qe={label:0,sent:function(){if(rt[0]&1)throw rt[1];return rt[1]},trys:[],ops:[]},Se,xe,rt,Je;return Je={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(Je[Symbol.iterator]=function(){return this}),Je;function dt(Ye){return function(Xe){return Bt([Ye,Xe])}}function Bt(Ye){if(Se)throw new TypeError("Generator is already executing.");for(;Je&&(Je=0,Ye[0]&&(Qe=0)),Qe;)try{if(Se=1,xe&&(rt=Ye[0]&2?xe.return:Ye[0]?xe.throw||((rt=xe.return)&&rt.call(xe),0):xe.next)&&!(rt=rt.call(xe,Ye[1])).done)return rt;switch(xe=0,rt&&(Ye=[Ye[0]&2,rt.value]),Ye[0]){case 0:case 1:rt=Ye;break;case 4:return Qe.label++,{value:Ye[1],done:!1};case 5:Qe.label++,xe=Ye[1],Ye=[0];continue;case 7:Ye=Qe.ops.pop(),Qe.trys.pop();continue;default:if(rt=Qe.trys,!(rt=rt.length>0&&rt[rt.length-1])&&(Ye[0]===6||Ye[0]===2)){Qe=0;continue}if(Ye[0]===3&&(!rt||Ye[1]>rt[0]&&Ye[1]<rt[3])){Qe.label=Ye[1];break}if(Ye[0]===6&&Qe.label<rt[1]){Qe.label=rt[1],rt=Ye;break}if(rt&&Qe.label<rt[2]){Qe.label=rt[2],Qe.ops.push(Ye);break}rt[2]&&Qe.ops.pop(),Qe.trys.pop();continue}Ye=Ue.call(He,Qe)}catch(Xe){Ye=[6,Xe],xe=0}finally{Se=rt=0}if(Ye[0]&5)throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}}var A=Object.create?function(He,Ue,Qe,Se){Se===void 0&&(Se=Qe);var xe=Object.getOwnPropertyDescriptor(Ue,Qe);(!xe||("get"in xe?!Ue.__esModule:xe.writable||xe.configurable))&&(xe={enumerable:!0,get:function(){return Ue[Qe]}}),Object.defineProperty(He,Se,xe)}:function(He,Ue,Qe,Se){Se===void 0&&(Se=Qe),He[Se]=Ue[Qe]};function b(He,Ue){for(var Qe in He)Qe!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,Qe)&&A(Ue,He,Qe)}function te(He){var Ue=typeof Symbol=="function"&&Symbol.iterator,Qe=Ue&&He[Ue],Se=0;if(Qe)return Qe.call(He);if(He&&typeof He.length=="number")return{next:function(){return He&&Se>=He.length&&(He=void 0),{value:He&&He[Se++],done:!He}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(He,Ue){var Qe=typeof Symbol=="function"&&He[Symbol.iterator];if(!Qe)return He;var Se=Qe.call(He),xe,rt=[],Je;try{for(;(Ue===void 0||Ue-- >0)&&!(xe=Se.next()).done;)rt.push(xe.value)}catch(dt){Je={error:dt}}finally{try{xe&&!xe.done&&(Qe=Se.return)&&Qe.call(Se)}finally{if(Je)throw Je.error}}return rt}function Ae(){for(var He=[],Ue=0;Ue<arguments.length;Ue++)He=He.concat(le(arguments[Ue]));return He}function De(){for(var He=0,Ue=0,Qe=arguments.length;Ue<Qe;Ue++)He+=arguments[Ue].length;for(var Se=Array(He),xe=0,Ue=0;Ue<Qe;Ue++)for(var rt=arguments[Ue],Je=0,dt=rt.length;Je<dt;Je++,xe++)Se[xe]=rt[Je];return Se}function Ne(He,Ue,Qe){if(Qe||arguments.length===2)for(var Se=0,xe=Ue.length,rt;Se<xe;Se++)(rt||!(Se in Ue))&&(rt||(rt=Array.prototype.slice.call(Ue,0,Se)),rt[Se]=Ue[Se]);return He.concat(rt||Array.prototype.slice.call(Ue))}function Te(He){return this instanceof Te?(this.v=He,this):new Te(He)}function We(He,Ue,Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se=Qe.apply(He,Ue||[]),xe,rt=[];return xe={},Je("next"),Je("throw"),Je("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function Je(je){Se[je]&&(xe[je]=function(at){return new Promise(function(Me,Ze){rt.push([je,at,Me,Ze])>1||dt(je,at)})})}function dt(je,at){try{Bt(Se[je](at))}catch(Me){Le(rt[0][3],Me)}}function Bt(je){je.value instanceof Te?Promise.resolve(je.value.v).then(Ye,Xe):Le(rt[0][2],je)}function Ye(je){dt("next",je)}function Xe(je){dt("throw",je)}function Le(je,at){je(at),rt.shift(),rt.length&&dt(rt[0][0],rt[0][1])}}function _e(He){var Ue,Qe;return Ue={},Se("next"),Se("throw",function(xe){throw xe}),Se("return"),Ue[Symbol.iterator]=function(){return this},Ue;function Se(xe,rt){Ue[xe]=He[xe]?function(Je){return(Qe=!Qe)?{value:Te(He[xe](Je)),done:!1}:rt?rt(Je):Je}:rt}}function we(He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue=He[Symbol.asyncIterator],Qe;return Ue?Ue.call(He):(He=typeof te=="function"?te(He):He[Symbol.iterator](),Qe={},Se("next"),Se("throw"),Se("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe);function Se(rt){Qe[rt]=He[rt]&&function(Je){return new Promise(function(dt,Bt){Je=He[rt](Je),xe(dt,Bt,Je.done,Je.value)})}}function xe(rt,Je,dt,Bt){Promise.resolve(Bt).then(function(Ye){rt({value:Ye,done:dt})},Je)}}function Re(He,Ue){return Object.defineProperty?Object.defineProperty(He,"raw",{value:Ue}):He.raw=Ue,He}var ze=Object.create?function(He,Ue){Object.defineProperty(He,"default",{enumerable:!0,value:Ue})}:function(He,Ue){He.default=Ue};function Ge(He){if(He&&He.__esModule)return He;var Ue={};if(He!=null)for(var Qe in He)Qe!=="default"&&Object.prototype.hasOwnProperty.call(He,Qe)&&A(Ue,He,Qe);return ze(Ue,He),Ue}function yt(He){return He&&He.__esModule?He:{default:He}}function ke(He,Ue,Qe,Se){if(Qe==="a"&&!Se)throw new TypeError("Private accessor was defined without a getter");if(typeof Ue=="function"?He!==Ue||!Se:!Ue.has(He))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Qe==="m"?Se:Qe==="a"?Se.call(He):Se?Se.value:Ue.get(He)}function tt(He,Ue,Qe,Se,xe){if(Se==="m")throw new TypeError("Private method is not writable");if(Se==="a"&&!xe)throw new TypeError("Private accessor was defined without a setter");if(typeof Ue=="function"?He!==Ue||!xe:!Ue.has(He))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Se==="a"?xe.call(He,Qe):xe?xe.value=Qe:Ue.set(He,Qe),Qe}function ae(He,Ue){if(Ue===null||typeof Ue!="object"&&typeof Ue!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof He=="function"?Ue===He:He.has(Ue)}function Ke(He,Ue,Qe){if(Ue!=null){if(typeof Ue!="object"&&typeof Ue!="function")throw new TypeError("Object expected.");var Se;if(Qe){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Se=Ue[Symbol.asyncDispose]}if(Se===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");Se=Ue[Symbol.dispose]}if(typeof Se!="function")throw new TypeError("Object not disposable.");He.stack.push({value:Ue,dispose:Se,async:Qe})}else Qe&&He.stack.push({async:!0});return Ue}var he=typeof SuppressedError=="function"?SuppressedError:function(He,Ue,Qe){var Se=new Error(Qe);return Se.name="SuppressedError",Se.error=He,Se.suppressed=Ue,Se};function Pe(He){function Ue(Se){He.error=He.hasError?new he(Se,He.error,"An error was suppressed during disposal."):Se,He.hasError=!0}function Qe(){for(;He.stack.length;){var Se=He.stack.pop();try{var xe=Se.dispose&&Se.dispose.call(Se.value);if(Se.async)return Promise.resolve(xe).then(Qe,function(rt){return Ue(rt),Qe()})}catch(rt){Ue(rt)}}if(He.hasError)throw He.error}return Qe()}var lt={__extends:W,__assign:w,__rest:X,__decorate:j,__param:ee,__metadata:se,__awaiter:ne,__generator:$,__createBinding:A,__exportStar:b,__values:te,__read:le,__spread:Ae,__spreadArrays:De,__spreadArray:Ne,__await:Te,__asyncGenerator:We,__asyncDelegator:_e,__asyncValues:we,__makeTemplateObject:Re,__importStar:Ge,__importDefault:yt,__classPrivateFieldGet:ke,__classPrivateFieldSet:tt,__classPrivateFieldIn:ae,__addDisposableResource:Ke,__disposeResources:Pe}}}]);
}());