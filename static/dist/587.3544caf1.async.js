"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[587,35],{19048:function(Qt,Q,n){n.r(Q),n.d(Q,{default:function(){return Jt}});var xe=n(15009),X=n.n(xe),he=n(99289),ye=n.n(he),Ce=n(5574),w=n.n(Ce),Te=n(13769),B=n.n(Te),Pe=n(97857),p=n.n(Pe),je=n(36942),k=n(97584),be=n(42952),Ie=n(72541),O=n(24614),H=n(45830),De=n(58175),Fe=n(15746),Se=n(71230),Ze=n(48054),N=n(34586),q=n(71577),Re=n(86250),F=n(67294),_=n(96841),Ee=n(18829),Me=n(53463),$e=n(33237),z=n(64233),Ne=n(55647),G=n(47666),Ae=n(14056),Y=n(65302),ze=n(3859),Ve=n(13147),we=n(96074),Be=n(70230),Le=n(63430),Oe=n(79611),He=n(78677),Ue=n(46309),We=(0,Ue.i)("Area"),Ge=We,Ye=n(80652),Je=n(92077),J=n.n(Je),Ke=n(74685),Qe=n(29393),Xe=n(75306),ke=n(54235),t=n(85893),qe=["type","data","config","propsx"],_e=["label"],et=["label"],tt=function(e){var r,l=e.type,a=e.data,d=e.config,v=e.propsx,i=B()(e,qe),c=(0,Xe.X)(d),o=function(Z){var h;return i==null||(h=i.fields)===null||h===void 0?void 0:h.find(function(R){return(R==null?void 0:R.value)==Z})};delete c.type;var y=function(Z){for(var h=/{{\s*([^{}]*)\s*}}/g,R=[],A;(A=h.exec(Z))!==null;)R.push(A[1].trim());return R},b={};if((r=c.label)!==null&&r!==void 0&&r.text){var P=y(c.label.text);try{b.labelText=function(m){return new Function("$root","with($root) { return (".concat(P,"); }"))({d:m})}}catch(m){console.log("exp error",P)}}if(l=="pie"){var f=c.colorField,I=c.angleField,S=(0,ke.S)(a==null?void 0:a.map(function(m){return m[I]}));S>0&&(a==null||a.map(function(m){m.per=(m[I]/S*100).toFixed(2)+"%"}));var D=c.label,x=B()(c,_e);return(0,t.jsx)(Le.Z,p()({appendPadding:10,data:a,label:D===!1?!1:p()(p()({},D),{},{position:"outside",text:b.labelText?b.labelText:function(m){return"".concat(m[f],": ").concat(J()(m[I]).format("0,0"))},transform:[{type:"overlapDodgeY"}]}),tooltip:function(Z,h,R,A){return{value:"".concat(Z[f],": ").concat(J()(Z[I]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(J()(S).format("0,0")),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],radius:.9,innerRadius:.6,legend:{color:{maxCols:1,maxRows:1,position:"top"}}},x))}else{if(l=="bar")return(0,t.jsx)(Oe.Z,p()({data:a,scale:{x:{paddingInner:.4}}},c));if(l=="column"){var s=c.xField,g=c.yField,u=o(g),C=c.label,j=B()(c,et);return(0,t.jsx)(He.Z,p()({data:a,scale:{x:{paddingInner:.4}},label:C===!1?!1:p()(p()({textBaseline:"bottom"},C),{},{text:b.labelText?b.labelText:function(m){return m==null?void 0:m[g]}}),style:{radiusTopLeft:10,radiusTopRight:10},tooltip:{name:u==null?void 0:u.label,field:g}},j))}else{if(l=="area")return(0,t.jsx)(Ge,p()({data:a},c));if(l=="mapDots")return(0,t.jsx)(Qe.rq,p()(p()(p()({},c),v),{},{dots:(0,Y.H1)(a)?a:[]}));if(l=="areaMap"){var E=p()({map:{style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:a,parser:{type:"geojson"}},autoFit:!0,color:{field:c.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},c);return(0,t.jsx)(Ke.Z,{config:E,data:a})}else return(0,t.jsx)(Ye.Z,p()({data:a},c))}}},lt=tt,at=function(e){var r,l,a=e.title,d=e.data,v=e.config,i=v===void 0?{}:v,c=e.height,o=e.label,y=i.open,b=function(x,s){var g=x!=null&&x.href?x.href:s!=null&&s.href?s.href:null;if(g){var u,C;return(0,t.jsx)(H.Link,{to:g,style:{fontSize:12},children:(u=x.statistic)!==null&&u!==void 0&&u.description?(C=x.statistic)===null||C===void 0?void 0:C.description:"\u67E5\u770B"})}else{var j;return(j=x.statistic)===null||j===void 0?void 0:j.description}},P=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"horizontal",g=x.map(function(u,C){return(0,t.jsx)(ze.Z,p()({},u),C)});return s=="vertical"?g:(0,t.jsx)(N.Z,{children:g})},f=function(x,s){var g,u=x.footer||{type:"text"};if(!((g=x.open)!==null&&g!==void 0&&g.footer))return null;var C;if(u.type=="trend"){if(!s.trend)return null;C=P(s.trend,u==null?void 0:u.layout)}else{var j=s.footer?s.footer:u.text;if(!j)return null;C=(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:j}})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(we.Z,{style:{marginTop:-16,marginBottom:10}}),C]})},I=y!=null&&y.statistic?p()(p()({},i==null?void 0:i.statistic),{},{value:(0,Y.BP)(d)?d==null?void 0:d.value:d,description:b(i,d),title:i!=null&&(r=i.statistic)!==null&&r!==void 0&&r.title?i==null||(l=i.statistic)===null||l===void 0?void 0:l.title:o}):!1,S=function(x,s){var g=x.chart,u=g===void 0?{}:g,C=x.open,j=u.type,E=j===void 0?"":j;if(!(C!=null&&C.chart)||!E)return null;var m=u!=null&&u.height?{height:u==null?void 0:u.height,lineHeight:(u==null?void 0:u.height)+"px"}:{};if(E=="trend"){var Z;return(0,t.jsx)("div",{style:m,children:P(s.trend,(Z=x.chart)===null||Z===void 0||(Z=Z.trend)===null||Z===void 0?void 0:Z.layout)})}else if(E=="progress"){var h;return(0,t.jsx)("div",{style:m,children:(h=s.progress)===null||h===void 0?void 0:h.map(function(R,A){return(0,t.jsx)(Be.Z,p()({},R),A)})})}else return(0,t.jsx)(lt,p()(p()({},s==null?void 0:s.chart),{},{config:u,type:E}));return null};return(0,t.jsx)(Ve.Z,{footer:f(i,d),style:{height:c||"100%"},title:a,statistic:I,chart:S(i,d)})},nt=at,it=n(25971),ot=n(99148),ee=n(24969),te=n(52108),le=n(86548),rt=n(26706),dt=n(60532),st=n(93967),ut=n.n(st),vt=n(61723),ae=n(75686),ne=n(40403),ct=n(19632),U=n.n(ct),ft=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},de(6)]}]},pt=ft,mt=function(e){return[{valueType:"group",columns:[{title:"\u5B57\u6BB5",dataIndex:["defaultConfig","chart","field"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u533A\u95F4\u503Cmin",dataIndex:["defaultConfig","chart","domain_min"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u533A\u95F4\u503Cmax",dataIndex:["defaultConfig","chart","domain_max"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},gt=mt,xt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5F00\u542F\u5206\u7EC4",dataIndex:["defaultConfig","chart","group"],colProps:{span:6},valueType:"switch"}]}]},ht=xt,yt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5F00\u542F\u5206\u7EC4",dataIndex:["defaultConfig","chart","group"],colProps:{span:6},valueType:"switch"}]}]},Ct=yt,Tt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",tooltip:"\u591A\u6761\u7EBF\u53EF\u4F7F\u7528\u8BE5\u53C2\u6570",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},de(6)]}]},Pt=Tt,jt=function(e){return[{valueType:"group",columns:[{title:"\u7F29\u653E\u7EA7\u522B",dataIndex:["defaultConfig","chart","zoom"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lat",dataIndex:["defaultConfig","chart","lat"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lng",dataIndex:["defaultConfig","chart","lng"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},bt=jt,It=function(e){return[{valueType:"group",columns:[{title:"\u89D2\u5EA6\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","angleField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u989C\u8272\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u997C\u56FE\u534A\u5F84",dataIndex:["defaultConfig","chart","radius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.9}},{title:"\u997C\u56FE\u5185\u534A\u5F84",dataIndex:["defaultConfig","chart","innerRadius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.6}}]}]},Dt=It,Ft=function(e){var r,l,a=e!=null&&(r=e.data)!==null&&r!==void 0&&r.chart?e==null||(l=e.data)===null||l===void 0?void 0:l.chart:e;return[{title:"\u56FE\u8868\u7C7B\u578B",dataIndex:["defaultConfig","chart","type"],valueType:"select",fieldProps:{options:[{label:"\u997C\u56FE",value:"pie"},{label:"\u6298\u7EBF\u56FE",value:"line"},{label:"\u67F1\u5F62\u56FE",value:"column"},{label:"\u6761\u5F62\u56FE",value:"bar"},{label:"\u533A\u57DF\u56FE",value:"area"},{label:"\u533A\u57DF\u5730\u56FE",value:"areaMap"},{label:"\u8D8B\u52BF",value:"trend"},{label:"\u8FDB\u5EA6\u6761",value:"progress"},{label:"\u6807\u70B9\u5730\u56FE",value:"mapDots"}]},colProps:{span:12}},{title:"\u9AD8\u5EA6",dataIndex:["defaultConfig","chart","height"],valueType:"digit",width:"100%",colProps:{span:12}},{name:[["defaultConfig","chart","type"]],valueType:"dependency",columns:function(v){var i=v.defaultConfig;if(!i)return[];var c=i.chart,o=c===void 0?{}:c;return(o==null?void 0:o.type)=="pie"?Dt(a):(o==null?void 0:o.type)=="line"?Pt(a):(o==null?void 0:o.type)=="area"?pt(a):(o==null?void 0:o.type)=="column"?Ct(a):(o==null?void 0:o.type)=="bar"?ht(a):(o==null?void 0:o.type)=="areaMap"?gt(a):(o==null?void 0:o.type)=="trend"?re(["defaultConfig","chart","trend","layout"]):(o==null?void 0:o.type)=="mapDots"?bt(a):[]}}]},ie=Ft,St=[{valueType:"group",title:"statistic\u8BBE\u7F6E",columns:[{title:"\u6807\u9898",dataIndex:["defaultConfig","statistic","title"],colProps:{span:6}},{title:"\u63D0\u793A",dataIndex:["defaultConfig","statistic","tip"],colProps:{span:6}},{title:"\u524D\u7F00",dataIndex:["defaultConfig","statistic","prefix"],colProps:{span:6}},{title:"\u540E\u7F00",dataIndex:["defaultConfig","statistic","suffix"],colProps:{span:6}}]},{valueType:"group",columns:[{title:"\u72B6\u6001",dataIndex:["defaultConfig","statistic","status"],valueType:"select",fieldProps:{options:[{label:"success",value:"success"},{label:"processing",value:"processing"},{label:"default",value:"default"},{label:"error",value:"error"},{label:"warning",value:"warning"}]},colProps:{span:12}},{title:"\u94FE\u63A5",dataIndex:["defaultConfig","href"],colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u63CF\u8FF0",dataIndex:["defaultConfig","statistic","description"],valueType:"textarea",colProps:{span:24}}]}],Zt=[{valueType:"group",title:"footer\u8BBE\u7F6E",columns:[{title:"\u7C7B\u578B",dataIndex:["defaultConfig","footer","type"],valueType:"select",tooltip:"\u5982\u679C\u7C7B\u578B\u662F\u8D8B\u52BF\uFF0C\u6240\u9009\u6570\u636E\u5E94\u8BE5\u8FD4\u56DE\u6709trend:[{title,value,trend}]\u683C\u5F0F\u6570\u636E",fieldProps:{options:[{label:"\u6587\u672C",value:"text"},{label:"\u8D8B\u52BF",value:"trend"}],defaultValue:"text"},colProps:{span:12}},{name:[["defaultConfig","footer","type"]],valueType:"dependency",columns:function(e){var r,l=e.defaultConfig;return(l==null||(r=l.footer)===null||r===void 0?void 0:r.type)=="trend"?re(["defaultConfig","footer","layout"]):[{title:"\u5E95\u90E8\u8BBE\u7F6E",dataIndex:["defaultConfig","footer","text"],valueType:"textarea",colProps:{span:24}}]}}]}],Rt=function(e){return[{valueType:"group",columns:[{title:"statistic",dataIndex:["defaultConfig","open","statistic"],valueType:"switch",colProps:{span:8}},{title:"chart",dataIndex:["defaultConfig","open","chart"],valueType:"switch",colProps:{span:8}},{title:"footer",dataIndex:["defaultConfig","open","footer"],valueType:"switch",colProps:{span:8}}]},{name:["defaultConfig","sourceDataName"],valueType:"dependency",columns:function(l){var a,d,v,i=l.defaultConfig,c=l.sourceDataName;if(!i)return[];var o=[];if((a=i.open)!==null&&a!==void 0&&a.statistic&&(o=[].concat(U()(o),St)),(d=i.open)!==null&&d!==void 0&&d.chart){var y=ie(e);o=[].concat(U()(o),[{valueType:"group",title:"chart\u8BBE\u7F6E",columns:U()(y)}])}return(v=i.open)!==null&&v!==void 0&&v.footer&&(o=[].concat(U()(o),Zt)),o}}]},Et=Rt,Mt=n(21352),$t=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["defaultConfig","form","columns"];return[{valueType:"group",columns:[{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:r,colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"\u8868\u5355\u9879",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"Label",dataIndex:"title",colProps:{span:6},fieldProps:{placeholder:"\u4E0D\u8F93\u5165\u7684\u8BDD\u4F7F\u7528\u540E\u53F0\u6570\u636E"}},{title:"\u7EC4\u4EF6\u7C7B\u578B",dataIndex:"valueType",colProps:{span:6},valueType:"select",fieldProps:{options:Mt.lG}},{title:"fieldProps",dataIndex:"fieldProps",colProps:{span:6},valueType:"modalJson"}]}]}]}]},oe=$t,Nt=function(e){return[{valueType:"group",columns:[{title:"Table Size",dataIndex:["defaultConfig","size"],colProps:{span:12},valueType:"select",fieldProps:{options:["small","middle","large"]}},{title:"\u5206\u9875",tooltip:"\u8BBE\u7F6E\u4E3A0\u7684\u8BDD\u8868\u793A\u5173\u95ED\u5206\u9875",dataIndex:["defaultConfig","cpage"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:["defaultConfig","columns"],colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"title",dataIndex:"title",colProps:{span:6}},{title:"width",dataIndex:"width",colProps:{span:6},valueType:"digit"},{title:"\u6392\u5E8F",dataIndex:"sort",valueType:"switch",colProps:{span:6}}]}]}]}]},At=Nt,zt={title:"\u914D\u7F6E",valueType:"jsonEditor",dataIndex:"config"},re=function(e){return[{title:"\u6392\u5217\u65B9\u5F0F",dataIndex:e,valueType:"select",fieldProps:{options:[{label:"\u6A2A\u5411",value:"horizontal"},{label:"\u7EB5\u5411",value:"vertical"}],defaultValue:"horizontal"},colProps:{span:12}}]},de=function(e){return{title:"\u5F62\u72B6",dataIndex:["defaultConfig","chart","shapeField"],valueType:"select",fieldProps:{options:[{label:"smooth - \u5E73\u6ED1",value:"smooth"},{label:"trail - \u53D8\u7C97",value:"trail"}]},colProps:{span:e}}},Vt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{title:"Title",dataIndex:"title",colProps:{span:12}}]}]},wt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{valueType:"group",columns:[{title:"\u7C7B\u578B",dataIndex:"type",valueType:"select",fieldProps:{options:[{label:"StatisticCard - \u6307\u6807\u5361",value:"StatisticCard"},{label:"tab",value:"tab"},{label:"\u8868\u683C",value:"table"},{label:"\u5BB9\u5668",value:"rows"},{label:"\u67E5\u8BE2\u8868\u5355",value:"form"},{label:"\u4E2A\u4EBA\u4FE1\u606F",value:"user"}]},colProps:{span:24}}]},{valueType:"group",columns:[{title:"Title",dataIndex:"title",colProps:{span:12}},{title:"\u6570\u636E\u6E90",dataIndex:"sourceDataName",valueType:"select",fieldProps:{options:(0,Y.H1)(e)?e:[],showSearch:!0},colProps:{span:12}}]},{name:["type","sourceDataName"],valueType:"dependency",columns:function(l){var a=l.type,d=l.sourceDataName,v=e==null?void 0:e.find(function(i){return i.value==d});return a=="chart"?ie(v):a=="table"?At(v):a=="StatisticCard"?Et(v):a=="form"||a=="tab"?oe(v):[]}}]},{title:"\u914D\u7F6E",formColumns:[{valueType:"group",columns:[{title:"\u5217\u5BBD",dataIndex:"customer_span",valueType:"digit",width:"100%",colProps:{span:12}},{title:"\u81EA\u5B9A\u4E49\u9AD8\u5EA6",dataIndex:"height",valueType:"digit",width:"100%",colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u663E\u793A\u6761\u4EF6",dataIndex:"show_condition",tooltip:"\u53EF\u6839\u636E\u5F53\u524D\u7528\u6237\u7F16\u5199\u662F\u5426\u663E\u793A\u8BE5\u7EC4\u4EF6,\u4F8B\u5982 {{ user.id == 1?true:false }} user\u4E3A\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F",valueType:"textarea",colProps:{span:24}}]},zt]}]},Bt=wt,W=function(e){var r=e.title,l=e.uid,a=e.data,d=e.type,v=d===void 0?"col":d,i=e.extpost,c=(0,F.useContext)(z.x),o=c.tableDesigner,y=o===void 0?{}:o,b=y.pageMenu,P=y.reflush,f=y.editUrl,I=y.sourceData,S=(0,F.useContext)(G.YF),D=S.setVisible,x=(0,F.useState)({}),s=w()(x,2),g=s[0],u=s[1];return(0,F.useEffect)(function(){u(a)},[b,a]),(0,t.jsx)("div",{onClick:function(j){j.preventDefault()},children:(0,t.jsx)(vt.Z,{trigger:(0,t.jsx)("div",{style:{width:"100%"},onClick:function(j){D==null||D(!1)},children:r}),tabs:v=="col"?Bt(I):Vt(I),value:g,postUrl:f,data:p()({id:b==null?void 0:b.id,uid:l},i),callback:function(j){var E=j.data;return P==null||P(E),!0},saFormProps:{devEnable:!1}})})},V=function(e){var r=e.title,l=e.uid,a=e.devData,d=e.col,v=e.row,i=e.otitle,c=e.style,o=a.itemType,y=o===void 0?"row":o,b=(0,F.useContext)(z.x),P=b.tableDesigner,f=P===void 0?{}:P,I=f.devEnable,S=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(W,{title:(0,t.jsxs)(N.Z,{children:[m==0?(0,t.jsx)(ee.Z,{}):(0,t.jsx)(te.Z,{}),(0,t.jsx)("span",{children:"+ \u5217"})]}),uid:l,extpost:{actionType:m==0?"insertCol":"addCol"}}),key:"addCol"+m}},D=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(W,{title:(0,t.jsxs)(N.Z,{children:[m==0?(0,t.jsx)(ee.Z,{}):(0,t.jsx)(te.Z,{}),(0,t.jsx)("span",{children:"+ \u884C"})]}),uid:l,type:"row",extpost:{actionType:m==0?"insertRow":"addRow"}}),key:"addRow"+m}},x={label:(0,t.jsx)(W,{title:(0,t.jsxs)(N.Z,{children:[(0,t.jsx)(le.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:l,data:v,type:"row",extpost:{actionType:"editRow"}}),key:"editRow"},s={label:(0,t.jsx)(W,{title:(0,t.jsxs)(N.Z,{children:[(0,t.jsx)(le.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:l,data:d,type:"col",extpost:{actionType:"editCol"}}),key:"editCol"},g=function(m){return{label:(0,t.jsx)(ne.VV,{title:(0,t.jsxs)(N.Z,{children:[(0,t.jsx)(rt.Z,{}),(0,t.jsx)("span",{children:"\u5220\u9664"})]}),uid:l,extpost:{actionType:m=="col"?"deleteCol":"deleteRow"}}),key:"deleteItem",danger:!0}},u=y=="row"?[x,S(0),{type:"divider"},D(1),{type:"divider"},g("row")]:[s,D(0),{type:"divider"},S(1),{type:"divider"},g("col")],C=(0,ne.i3)(),j=C.styles;return I?(0,t.jsxs)(ae.TR,{className:j.saSortItem,id:l,eid:l,devData:p()({type:"panel"},a),style:c,children:[(0,t.jsx)("div",{className:ut()("general-schema-designer",j.overrideAntdCSS),children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsx)(N.Z,{size:3,align:"center",children:(0,t.jsx)(G.cM,{title:(0,t.jsx)(ae.IW,{children:(0,t.jsx)(dt.Z,{role:"button",style:{cursor:"pointer"},"aria-label":"drag-handler",title:"\u53F3\u952E\u83DC\u5355\uFF0C\u957F\u6309\u62D6\u52A8\u6392\u5E8F"})}),items:u})})})}),(0,t.jsx)("div",{role:"button",children:r})]}):i?(0,t.jsx)(t.Fragment,{children:i}):null},Lt=["columns"],Ot=function(e){var r,l=e.config,a=e.data,d=e.title,v=e.uid,i=l.columns,c=B()(l,Lt),o=(0,H.useModel)("@@initialState"),y=o.initialState,b=(0,F.useContext)(z.x),P=b.tableDesigner.devEnable,f=P?(0,t.jsx)(V,{otitle:null,uid:v,col:e,devData:{itemType:"col"},title:(d||"Table")+" - "+v}):d||!1;return(0,t.jsx)(O.Z,{style:{height:"100%"},title:f,children:(0,t.jsx)(ot.Z,p()({columns:(0,it.SS)({initRequest:!0,columns:i,initialState:y,devEnable:!1}),dataSource:a==null?void 0:a.data,rowKey:i==null||(r=i[0])===null||r===void 0?void 0:r.dataIndex},c))})},Ht=Ot,Ut=["url","pageMenu","path"],se=function(e){var r,l,a=e.config,d=e.idata,v=e.title,i=e.uid,c=e.getData,o=e.simple,y=(0,F.useContext)(z.x),b=y.tableDesigner.devEnable,P=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,t.jsx)(V,{otitle:s||v,title:s||v||"\u5143\u7D20 - "+i,uid:i,col:e,devData:{itemType:"col"}})},f=a!=null&&(r=a.form)!==null&&r!==void 0&&r.columns?a==null||(l=a.form)===null||l===void 0?void 0:l.columns:a==null?void 0:a.columns,I=f==null?void 0:f.map(function(x){var s,g=d==null||(s=d.data)===null||s===void 0?void 0:s.find(function(C){return C.name==x.dataIndex});if(g){var u;x=p()(p()(p()({title:g.label},x),g.props),{},{fieldProps:p()({},g.fieldProps||((u=g.props)===null||u===void 0?void 0:u.fieldProps))})}return x}),S=(0,$e.ab)({initRequest:!0,columns:I,devEnable:!1}),D=(0,t.jsx)(Ie.Z,{layoutType:o?"LightFilter":"QueryFilter",columns:S,rowProps:{gutter:[16,16]},colProps:{span:12},grid:!1,initialValues:d==null?void 0:d.initialValues,onFinish:function(s){c==null||c(s)}});return o?D:(0,t.jsx)(O.Z,{bodyStyle:{padding:0},title:b?P():!1,children:D})},Wt=function(e){var r=e.uid,l=e.rows,a=e.data,d=e.getData,v=e.config,i=e.sourceDataName,c=e.height,o=(0,F.useContext)(z.x),y=o.tableDesigner.devEnable,b=a==null?void 0:a.find(function(f){return f.value==i}),P=v.form?(0,t.jsx)(se,{simple:!0,idata:b,config:v.form,getData:d}):null;return(0,t.jsx)(O.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},title:y?(0,t.jsx)(V,{uid:r,col:e,devData:{itemType:"col"},title:"Tab - "+r,otitle:null}):!1,children:(0,t.jsx)(De.Z,{style:{background:"none"},tabBarExtraContent:P?{right:P}:null,destroyOnHidden:!0,items:l==null?void 0:l.map(function(f,I){return{key:I,label:(0,t.jsx)(V,{title:f!=null&&f.title?f==null?void 0:f.title:"tabItem",otitle:f==null?void 0:f.title,uid:f==null?void 0:f.uid,row:f,devData:{itemType:"row"}}),children:(0,t.jsx)(ue,{index:I,row:f,data:a,noTitle:!0},I)}})})})},Gt=function(e){var r=e.span,l=e.title,a=e.uid,d=e.rows,v=e.data,i=e.config,c=e.sourceDataName,o=e.chart,y=e.noTitle,b=y===void 0?!1:y,P=e.height,f=e.type,I=e.getData,S=e.show_condition,D=(0,F.useContext)(_.rH),x=D.isMobile,s=v==null?void 0:v.find(function(h){return h.value==c}),g=(0,F.useContext)(z.x),u=g.tableDesigner.devEnable,C=(0,H.useModel)("@@initialState"),j=C.initialState,E=S&&!u?(0,Ee.mF)(S,{user:j==null?void 0:j.currentUser}):!0,m=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return b?null:(0,t.jsx)(V,{otitle:R||l,title:(R||l||"\u5143\u7D20")+" - "+a,uid:a,col:e,devData:{itemType:"col"}})},Z=u?m(l):l||!1;return E?(0,t.jsx)(Fe.Z,{span:x?24:r,children:f=="tab"?(0,t.jsx)(Wt,p()({},e)):f=="table"?(0,t.jsx)(Ht,p()(p()({},e),{},{data:s})):d||f=="rows"?(0,t.jsxs)(t.Fragment,{children:[m(),(0,t.jsx)(ve,{rows:d,data:v})]}):f=="form"?(0,t.jsx)(se,p()(p()({},e),{},{idata:s})):f=="user"?(0,t.jsx)(O.Z,{headStyle:u?{width:"100%",display:"block"}:{},title:u?m():!1,children:(0,t.jsx)(Me.PagePanelHeader,{flash:I})}):f=="StatisticCard"?(0,t.jsx)(nt,{title:Z,data:s==null?void 0:s.data,label:s==null?void 0:s.label,config:i,height:P}):null}):null},ue=function(e){var r,l=e.row,a=e.data,d=e.noTitle,v=d===void 0?!1:d,i=e.index,c=e.getData;return(0,t.jsxs)(t.Fragment,{children:[v?null:(0,t.jsx)(V,{style:{width:"25%",margin:i==0?"0 0 -14px 0":"-14px 0"},otitle:null,title:l!=null&&l.title?l==null?void 0:l.title:"\u5206\u7EC4 - "+(l==null?void 0:l.uid),uid:l==null?void 0:l.uid,devData:{itemType:"row"},row:l}),(0,t.jsx)(Se.Z,{gutter:[16,16],children:l==null||(r=l.cols)===null||r===void 0?void 0:r.map(function(o,y){return(0,F.createElement)(Gt,p()(p()({},o),{},{key:y,data:a,getData:c}))})})]})},Yt=function(e){var r,l,a,d=e.url,v=d===void 0?"":d,i=e.pageMenu,c=e.path,o=B()(e,Ut),y=(0,F.useState)(),b=w()(y,2),P=b[0],f=b[1],I=(0,F.useState)(),S=w()(I,2),D=S[0],x=S[1],s=(0,F.useContext)(_.rH),g=s.messageApi,u=function(){var M=ye()(X()().mark(function $(){var pe,me,ge,K=arguments;return X()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return pe=K.length>0&&K[0]!==void 0?K[0]:{},g==null||g.loading({content:"\u52A0\u8F7D\u4E2D...",key:k.iU,duration:0}),L.next=4,k.ZP.get(v,{params:p()(p()({},D),pe)});case 4:me=L.sent,ge=me.data,g==null||g.destroy(),f(ge);case 8:case"end":return L.stop()}},$)}));return function(){return M.apply(this,arguments)}}(),C=(0,F.useState)(),j=w()(C,2),E=j[0],m=j[1],Z=(0,H.useModel)("@@initialState"),h=Z.initialState,R=(0,F.useState)(!!(!(h!=null&&(r=h.settings)!==null&&r!==void 0&&r.devDisable)&&h!==null&&h!==void 0&&(l=h.settings)!==null&&l!==void 0&&(l=l.adminSetting)!==null&&l!==void 0&&l.dev)),A=w()(R,2),ce=A[0],Kt=A[1];(0,F.useEffect)(function(){var M;m(i==null||(M=i.data)===null||M===void 0?void 0:M.panel),u()},[]);var fe=(0,G.Yx)({pageMenu:i,setColumns:m,getColumnsRender:function($){return $},type:"panel",devEnable:ce,sourceData:P});return(0,F.useEffect)(function(){var M,$;Kt(!!(!(h!=null&&(M=h.settings)!==null&&M!==void 0&&M.devDisable)&&h!==null&&h!==void 0&&($=h.settings)!==null&&$!==void 0&&($=$.adminSetting)!==null&&$!==void 0&&$.dev))},[h==null||(a=h.settings)===null||a===void 0?void 0:a.devDisable]),(0,t.jsx)(je.PageContainer404,{title:!1,path:c,children:(0,t.jsxs)(z.x.Provider,{value:{tableDesigner:fe},children:[(0,t.jsx)(Ne.L,{children:P&&(0,t.jsx)(ve,p()(p()({},o),{},{rows:E,data:P,getData:u}))},"content"),!P&&(0,t.jsx)(Ze.Z,{paragraph:{rows:10},active:!0}),ce?(0,t.jsxs)(N.Z,{style:{marginTop:10},children:[(0,t.jsx)(q.ZP,{type:"dashed",onClick:function(){fe.edit({base:{id:i==null?void 0:i.id,actionType:"insertRow"}})},children:"+ Row"},"addrow"),(0,t.jsx)(Ae.SE,{trigger:(0,t.jsx)(q.ZP,{type:"dashed",danger:!0,children:(0,t.jsx)(be.Z,{})}),pageMenu:i},"devsetting")]}):null]})})},ve=function(e){var r=e.rows,l=e.data,a=e.getData;return(0,t.jsx)(Re.Z,{vertical:!0,gap:"middle",children:r==null?void 0:r.map(function(d,v){return(0,t.jsx)(ue,{index:v,row:d,data:l,getData:a},v)})})},Jt=Yt}}]);
