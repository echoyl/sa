!(function(){var k5=(Ht,W)=>(W=Symbol[Ht])?W:Symbol.for("Symbol."+Ht),Bde=Ht=>{throw TypeError(Ht)},mf=Math.pow;var U5=(Ht,W,D)=>new Promise((J,Z)=>{var E=se=>{try{te(D.next(se))}catch(ae){Z(ae)}},ve=se=>{try{te(D.throw(se))}catch(ae){Z(ae)}},te=se=>se.done?J(se.value):Promise.resolve(se.value).then(E,ve);te((D=D.apply(Ht,W)).next())}),Fde=function(Ht,W){this[0]=Ht,this[1]=W};var Ij=Ht=>{var W=Ht[k5("asyncIterator")],D=!1,J,Z={};return W==null?(W=Ht[k5("iterator")](),J=E=>Z[E]=ve=>W[E](ve)):(W=W.call(Ht),J=E=>Z[E]=ve=>{if(D){if(D=!1,E==="throw")throw ve;return ve}return D=!0,{done:!1,value:new Fde(new Promise(te=>{var se=W[E](ve);se instanceof Object||Bde("Object expected"),te(se)}),1)}}),Z[k5("iterator")]=()=>Z,J("next"),"throw"in W?J("throw"):Z.throw=E=>{throw E},"return"in W&&J("return"),Z};(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[212],{25330:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};W.default=D},67303:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};W.default=D},83647:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};W.default=D},57583:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};W.default=D},29260:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};W.default=D},25828:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};W.default=D},64183:function(Ht,W,D){"use strict";var J=D(67294),Z=D(6340),E=function(){return E=Object.assign||function(te){for(var se,ae=1,Se=arguments.length;ae<Se;ae++){se=arguments[ae];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(te[oe]=se[oe])}return te},E.apply(this,arguments)},ve=(0,J.forwardRef)(function(te,se){return J.createElement(Z.P,E({},te,{chartType:"Area",ref:se}))});W.Z=ve},79611:function(Ht,W,D){"use strict";var J=D(67294),Z=D(6340),E=function(){return E=Object.assign||function(te){for(var se,ae=1,Se=arguments.length;ae<Se;ae++){se=arguments[ae];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(te[oe]=se[oe])}return te},E.apply(this,arguments)},ve=(0,J.forwardRef)(function(te,se){return J.createElement(Z.P,E({},te,{chartType:"Bar",ref:se}))});W.Z=ve},6340:function(Ht,W,D){"use strict";D.d(W,{P:function(){return Pde}});var J={};D.r(J),D.d(J,{area:function(){return dG},bottom:function(){return Og},bottomLeft:function(){return Og},bottomRight:function(){return Og},inside:function(){return Og},left:function(){return Og},outside:function(){return mG},right:function(){return Og},spider:function(){return bG},surround:function(){return EG},top:function(){return Og},topLeft:function(){return Og},topRight:function(){return Og}});var Z={};D.r(Z),D.d(Z,{interpolateBlues:function(){return rX},interpolateBrBG:function(){return BZ},interpolateBuGn:function(){return GZ},interpolateBuPu:function(){return ZZ},interpolateCividis:function(){return cX},interpolateCool:function(){return vX},interpolateCubehelixDefault:function(){return dX},interpolateGnBu:function(){return XZ},interpolateGreens:function(){return iX},interpolateGreys:function(){return oX},interpolateInferno:function(){return SX},interpolateMagma:function(){return EX},interpolateOrRd:function(){return $Z},interpolateOranges:function(){return lX},interpolatePRGn:function(){return FZ},interpolatePiYG:function(){return kZ},interpolatePlasma:function(){return TX},interpolatePuBu:function(){return KZ},interpolatePuBuGn:function(){return YZ},interpolatePuOr:function(){return UZ},interpolatePuRd:function(){return qZ},interpolatePurples:function(){return aX},interpolateRainbow:function(){return mX},interpolateRdBu:function(){return zZ},interpolateRdGy:function(){return jZ},interpolateRdPu:function(){return QZ},interpolateRdYlBu:function(){return VZ},interpolateRdYlGn:function(){return HZ},interpolateReds:function(){return sX},interpolateSinebow:function(){return _X},interpolateSpectral:function(){return WZ},interpolateTurbo:function(){return bX},interpolateViridis:function(){return xX},interpolateWarm:function(){return pX},interpolateYlGn:function(){return eX},interpolateYlGnBu:function(){return JZ},interpolateYlOrBr:function(){return tX},interpolateYlOrRd:function(){return nX},schemeAccent:function(){return cZ},schemeBlues:function(){return pD},schemeBrBG:function(){return X6},schemeBuGn:function(){return nD},schemeBuPu:function(){return rD},schemeCategory10:function(){return lZ},schemeDark2:function(){return uZ},schemeGnBu:function(){return iD},schemeGreens:function(){return vD},schemeGreys:function(){return mD},schemeObservable10:function(){return fZ},schemeOrRd:function(){return oD},schemeOranges:function(){return _D},schemePRGn:function(){return $6},schemePaired:function(){return hZ},schemePastel1:function(){return dZ},schemePastel2:function(){return pZ},schemePiYG:function(){return Y6},schemePuBu:function(){return sD},schemePuBuGn:function(){return aD},schemePuOr:function(){return K6},schemePuRd:function(){return lD},schemePurples:function(){return gD},schemeRdBu:function(){return q6},schemeRdGy:function(){return Q6},schemeRdPu:function(){return cD},schemeRdYlBu:function(){return J6},schemeRdYlGn:function(){return eD},schemeReds:function(){return yD},schemeSet1:function(){return vZ},schemeSet2:function(){return mZ},schemeSet3:function(){return gZ},schemeSpectral:function(){return tD},schemeTableau10:function(){return yZ},schemeYlGn:function(){return fD},schemeYlGnBu:function(){return uD},schemeYlOrBr:function(){return hD},schemeYlOrRd:function(){return dD}});var E={};D.r(E),D.d(E,{geoAlbers:function(){return BU},geoAlbersUsa:function(){return die},geoAzimuthalEqualArea:function(){return pie},geoAzimuthalEqualAreaRaw:function(){return zI},geoAzimuthalEquidistant:function(){return vie},geoAzimuthalEquidistantRaw:function(){return jI},geoConicConformal:function(){return gie},geoConicConformalRaw:function(){return UU},geoConicEqualArea:function(){return nC},geoConicEqualAreaRaw:function(){return NU},geoConicEquidistant:function(){return _ie},geoConicEquidistantRaw:function(){return zU},geoEqualEarth:function(){return xie},geoEqualEarthRaw:function(){return VI},geoEquirectangular:function(){return yie},geoEquirectangularRaw:function(){return UE},geoGnomonic:function(){return Eie},geoGnomonicRaw:function(){return HI},geoIdentity:function(){return Sie},geoMercator:function(){return mie},geoMercatorRaw:function(){return kE},geoNaturalEarth1:function(){return Tie},geoNaturalEarth1Raw:function(){return WI},geoOrthographic:function(){return wie},geoOrthographicRaw:function(){return GI},geoProjection:function(){return Wm},geoProjectionMutator:function(){return kI},geoStereographic:function(){return Aie},geoStereographicRaw:function(){return ZI},geoTransverseMercator:function(){return Cie},geoTransverseMercatorRaw:function(){return XI}});var ve={};D.r(ve),D.d(ve,{frequency:function(){return Cae},id:function(){return Oae},name:function(){return Rae},weight:function(){return Aae}});var te=D(67294),se=D(73935),ae=D.t(se,2),Se=function(){return Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Se.apply(this,arguments)},oe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},Ge=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ee=Se({},ae),me=ee.version,Le=ee.render,be=ee.unmountComponentAtNode,Oe;try{var fe=Number((me||"").split(".")[0]);fe>=18&&(Oe=ee.createRoot)}catch(e){}function He(e){var t=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var bt="__rc_react_root__";function dt(e,t){He(!0);var n=t[bt]||Oe(t);He(!1),n.render(e),t[bt]=n}function Nt(e,t){Le(e,t)}function ct(e,t){}function lt(e,t){if(Oe){dt(e,t);return}Nt(e,t)}function Ie(e){return oe(this,void 0,void 0,function(){return Ge(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[bt])===null||n===void 0||n.unmount(),delete e[bt]})]})})}function Ae(e){be(e)}function pt(e){}function ut(e){return oe(this,void 0,void 0,function(){return Ge(this,function(t){return Oe!==void 0?[2,Ie(e)]:(Ae(e),[2])})})}var Et=new Map;typeof document!="undefined"&&Et.set("tooltip",document.createElement("div"));var cn=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=Et.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=Et.get(e.key);r?n=r:Et.set(e.key,n)}return lt(e,n),n},ze=function(e){if(typeof document=="undefined")return"loading";var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},St=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=te.useRef(null);te.useEffect(function(){!t&&i.current&&ze(i.current)},[]);var s=function(){return t||te.createElement("div",{ref:i})};return te.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},s())},we=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(e){we(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||te.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):te.createElement(te.Fragment,null,this.props.children)},t}(te.Component),Xe=typeof global=="object"&&global&&global.Object===Object&&global,Ze=Xe,Rt=typeof self=="object"&&self&&self.Object===Object&&self,yt=Ze||Rt||Function("return this")(),Me=yt,Gt=Me.Symbol,ln=Gt,Ln=Object.prototype,kn=Ln.hasOwnProperty,lr=Ln.toString,zt=ln?ln.toStringTag:void 0;function Kt(e){var t=kn.call(e,zt),n=e[zt];try{e[zt]=void 0;var r=!0}catch(s){}var i=lr.call(e);return r&&(t?e[zt]=n:delete e[zt]),i}var yn=Kt,Kn=Object.prototype,rn=Kn.toString;function Wt(e){return rn.call(e)}var Pt=Wt,Pe="[object Null]",Qe="[object Undefined]",Bt=ln?ln.toStringTag:void 0;function z(e){return e==null?e===void 0?Qe:Pe:Bt&&Bt in Object(e)?yn(e):Pt(e)}var ue=z;function ot(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var le=ot,$t="[object AsyncFunction]",an="[object Function]",hn="[object GeneratorFunction]",Dn="[object Proxy]";function Xn(e){if(!le(e))return!1;var t=ue(e);return t==an||t==hn||t==$t||t==Dn}var Gn=Xn,dn=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},mt=Array.isArray,Ct=mt;function Cn(){this.__data__=[],this.size=0}var Pn=Cn;function Zn(e,t){return e===t||e!==e&&t!==t}var ht=Zn;function ye(e,t){for(var n=e.length;n--;)if(ht(e[n][0],t))return n;return-1}var Be=ye,rt=Array.prototype,Mt=rt.splice;function Ot(e){var t=this.__data__,n=Be(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Mt.call(t,n,1),--this.size,!0}var En=Ot;function $n(e){var t=this.__data__,n=Be(t,e);return n<0?void 0:t[n][1]}var yr=$n;function qn(e){return Be(this.__data__,e)>-1}var Ce=qn;function xe(e,t){var n=this.__data__,r=Be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var ke=xe;function et(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}et.prototype.clear=Pn,et.prototype.delete=En,et.prototype.get=yr,et.prototype.has=Ce,et.prototype.set=ke;var Tt=et;function Yt(){this.__data__=new Tt,this.size=0}var pn=Yt;function _t(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var qt=_t;function Qn(e){return this.__data__.get(e)}var _r=Qn;function Vr(e){return this.__data__.has(e)}var pr=Vr,Ur=Me["__core-js_shared__"],mi=Ur,wi=function(){var e=/[^.]+$/.exec(mi&&mi.keys&&mi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sr(e){return!!wi&&wi in e}var Ti=Sr,hi=Function.prototype,si=hi.toString;function Mo(e){if(e!=null){try{return si.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var bi=Mo,na=/[\\^$.*+?()[\]{}|]/g,_a=/^\[object .+?Constructor\]$/,Ro=Function.prototype,qo=Object.prototype,Ne=Ro.toString,Je=qo.hasOwnProperty,kt=RegExp("^"+Ne.call(Je).replace(na,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sn(e){if(!le(e)||Ti(e))return!1;var t=Gn(e)?kt:_a;return t.test(bi(e))}var Nn=sn;function Bn(e,t){return e==null?void 0:e[t]}var gn=Bn;function On(e,t){var n=gn(e,t);return Nn(n)?n:void 0}var dr=On,hr=dr(Me,"Map"),ii=hr,Gi=dr(Object,"create"),ao=Gi;function Qr(){this.__data__=ao?ao(null):{},this.size=0}var ji=Qr;function Li(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Zr=Li,yo="__lodash_hash_undefined__",Mi=Object.prototype,xo=Mi.hasOwnProperty;function xi(e){var t=this.__data__;if(ao){var n=t[e];return n===yo?void 0:n}return xo.call(t,e)?t[e]:void 0}var Oo=xi,ra=Object.prototype,Ha=ra.hasOwnProperty;function ia(e){var t=this.__data__;return ao?t[e]!==void 0:Ha.call(t,e)}var Wo=ia,Fa="__lodash_hash_undefined__";function cs(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ao&&t===void 0?Fa:t,this}var wt=cs;function Zt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zt.prototype.clear=ji,Zt.prototype.delete=Zr,Zt.prototype.get=Oo,Zt.prototype.has=Wo,Zt.prototype.set=wt;var Un=Zt;function Ir(){this.size=0,this.__data__={hash:new Un,map:new(ii||Tt),string:new Un}}var Ci=Ir;function oo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Yo=oo;function ns(e,t){var n=e.__data__;return Yo(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ds=ns;function Us(e){var t=Ds(this,e).delete(e);return this.size-=t?1:0,t}var fl=Us;function xh(e){return Ds(this,e).get(e)}var kp=xh;function Ad(e){return Ds(this,e).has(e)}var Vl=Ad;function If(e,t){var n=Ds(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Lf=If;function sc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sc.prototype.clear=Ci,sc.prototype.delete=fl,sc.prototype.get=kp,sc.prototype.has=Vl,sc.prototype.set=Lf;var zc=sc,cu=200;function eh(e,t){var n=this.__data__;if(n instanceof Tt){var r=n.__data__;if(!ii||r.length<cu-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zc(r)}return n.set(e,t),this.size=n.size,this}var pc=eh;function Os(e){var t=this.__data__=new Tt(e);this.size=t.size}Os.prototype.clear=pn,Os.prototype.delete=qt,Os.prototype.get=_r,Os.prototype.has=pr,Os.prototype.set=pc;var Oc=Os,gf="__lodash_hash_undefined__";function Zh(e){return this.__data__.set(e,gf),this}var Up=Zh;function Eh(e){return this.__data__.has(e)}var Cd=Eh;function th(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new zc;++t<n;)this.add(e[t])}th.prototype.add=th.prototype.push=Up,th.prototype.has=Cd;var Xh=th;function Od(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Rd=Od;function _0(e,t){return e.has(t)}var Df=_0,Uu=1,up=2;function Hl(e,t,n,r,i,s){var l=n&Uu,u=e.length,h=t.length;if(u!=h&&!(l&&h>u))return!1;var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var y=-1,b=!0,T=n&up?new Xh:void 0;for(s.set(e,t),s.set(t,e);++y<u;){var R=e[y],M=t[y];if(r)var I=l?r(M,R,y,t,e,s):r(R,M,y,e,t,s);if(I!==void 0){if(I)continue;b=!1;break}if(T){if(!Rd(t,function(N,U){if(!Df(T,U)&&(R===N||i(R,N,n,r,s)))return T.push(U)})){b=!1;break}}else if(!(R===M||i(R,M,n,r,s))){b=!1;break}}return s.delete(e),s.delete(t),b}var Su=Hl,ef=Me.Uint8Array,vc=ef;function tf(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var uu=tf;function nf(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Pl=nf,zu=1,yf=2,fp="[object Boolean]",$h="[object Date]",bs="[object Error]",Md="[object Map]",Yh="[object Number]",Pd="[object RegExp]",cl="[object Set]",Sh="[object String]",Th="[object Symbol]",ne="[object ArrayBuffer]",_e="[object DataView]",qe=ln?ln.prototype:void 0,un=qe?qe.valueOf:void 0;function Y(e,t,n,r,i,s,l){switch(n){case _e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ne:return!(e.byteLength!=t.byteLength||!s(new vc(e),new vc(t)));case fp:case $h:case Yh:return ht(+e,+t);case bs:return e.name==t.name&&e.message==t.message;case Pd:case Sh:return e==t+"";case Md:var u=uu;case cl:var h=r&zu;if(u||(u=Pl),e.size!=t.size&&!h)return!1;var p=l.get(e);if(p)return p==t;r|=yf,l.set(e,t);var v=Su(u(e),u(t),r,i,s,l);return l.delete(e),v;case Th:if(un)return un.call(e)==un.call(t)}return!1}var tr=Y;function Rr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Di=Rr;function zi(e,t,n){var r=t(e);return Ct(e)?r:Di(r,n(e))}var lo=zi;function uo(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var l=e[n];t(l,n,e)&&(s[i++]=l)}return s}var wa=uo;function No(){return[]}var Aa=No,os=Object.prototype,ga=os.propertyIsEnumerable,Ra=Object.getOwnPropertySymbols,Rs=Ra?function(e){return e==null?[]:(e=Object(e),wa(Ra(e),function(t){return ga.call(e,t)}))}:Aa,ka=Rs;function Za(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ms=Za;function nl(e){return e!=null&&typeof e=="object"}var Wa=nl,Rc="[object Arguments]";function us(e){return Wa(e)&&ue(e)==Rc}var Tu=us,fu=Object.prototype,jc=fu.hasOwnProperty,nh=fu.propertyIsEnumerable,Id=Tu(function(){return arguments}())?Tu:function(e){return Wa(e)&&jc.call(e,"callee")&&!nh.call(e,"callee")},_f=Id;function Nf(){return!1}var rf=Nf,wh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ah=wh&&typeof module=="object"&&module&&!module.nodeType&&module,Bf=Ah&&Ah.exports===wh,b0=Bf?Me.Buffer:void 0,Ld=b0?b0.isBuffer:void 0,zp=Ld||rf,Ff=zp,jp=9007199254740991,Dd=/^(?:0|[1-9]\d*)$/;function hp(e,t){var n=typeof e;return t=t==null?jp:t,!!t&&(n=="number"||n!="symbol"&&Dd.test(e))&&e>-1&&e%1==0&&e<t}var kf=hp,Vp=9007199254740991;function Ch(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vp}var Hp=Ch,Uf="[object Arguments]",Xs="[object Array]",dp="[object Boolean]",bf="[object Date]",he="[object Error]",Fe="[object Function]",gt="[object Map]",wn="[object Number]",ar="[object Object]",zr="[object RegExp]",gi="[object Set]",Ki="[object String]",ya="[object WeakMap]",Ea="[object ArrayBuffer]",Es="[object DataView]",Ua="[object Float32Array]",Da="[object Float64Array]",Mc="[object Int8Array]",of="[object Int16Array]",rl="[object Int32Array]",fo="[object Uint8Array]",Yc="[object Uint8ClampedArray]",Nd="[object Uint16Array]",Oh="[object Uint32Array]",Ma={};Ma[Ua]=Ma[Da]=Ma[Mc]=Ma[of]=Ma[rl]=Ma[fo]=Ma[Yc]=Ma[Nd]=Ma[Oh]=!0,Ma[Uf]=Ma[Xs]=Ma[Ea]=Ma[dp]=Ma[Es]=Ma[bf]=Ma[he]=Ma[Fe]=Ma[gt]=Ma[wn]=Ma[ar]=Ma[zr]=Ma[gi]=Ma[Ki]=Ma[ya]=!1;function as(e){return Wa(e)&&Hp(e.length)&&!!Ma[ue(e)]}var x0=as;function Zi(e){return function(t){return e(t)}}var xf=Zi,Bd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rh=Bd&&typeof module=="object"&&module&&!module.nodeType&&module,Ef=Rh&&Rh.exports===Bd,hu=Ef&&Ze.process,E0=function(){try{var e=Rh&&Rh.require&&Rh.require("util").types;return e||hu&&hu.binding&&hu.binding("util")}catch(t){}}(),Mh=E0,Kc=Mh&&Mh.isTypedArray,rh=Kc?xf(Kc):x0,S0=rh,Fd=Object.prototype,T0=Fd.hasOwnProperty;function sv(e,t){var n=Ct(e),r=!n&&_f(e),i=!n&&!r&&Ff(e),s=!n&&!r&&!i&&S0(e),l=n||r||i||s,u=l?ms(e.length,String):[],h=u.length;for(var p in e)(t||T0.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||kf(p,h)))&&u.push(p);return u}var du=sv,ju=Object.prototype;function Sa(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ju;return e===n}var pu=Sa;function af(e,t){return function(n){return e(t(n))}}var mc=af,Kh=mc(Object.keys,Object),Ql=Kh,Vc=Object.prototype,qc=Vc.hasOwnProperty;function pp(e){if(!pu(e))return Ql(e);var t=[];for(var n in Object(e))qc.call(e,n)&&n!="constructor"&&t.push(n);return t}var Bo=pp;function Eo(e){return e!=null&&Hp(e.length)&&!Gn(e)}var Jl=Eo;function Qc(e){return Jl(e)?du(e):Bo(e)}var Jc=Qc;function hl(e){return lo(e,Jc,ka)}var wu=hl,ih=1,kd=Object.prototype,Ms=kd.hasOwnProperty;function gc(e,t,n,r,i,s){var l=n&ih,u=wu(e),h=u.length,p=wu(t),v=p.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var b=u[y];if(!(l?b in t:Ms.call(t,b)))return!1}var T=s.get(e),R=s.get(t);if(T&&R)return T==t&&R==e;var M=!0;s.set(e,t),s.set(t,e);for(var I=l;++y<h;){b=u[y];var N=e[b],U=t[b];if(r)var H=l?r(U,N,b,t,e,s):r(N,U,b,e,t,s);if(!(H===void 0?N===U||i(N,U,n,r,s):H)){M=!1;break}I||(I=b=="constructor")}if(M&&!I){var X=e.constructor,$=t.constructor;X!=$&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof $=="function"&&$ instanceof $)&&(M=!1)}return s.delete(e),s.delete(t),M}var w0=gc,qh=dr(Me,"DataView"),vp=qh,Ph=dr(Me,"Promise"),eu=Ph,mp=dr(Me,"Set"),Au=mp,Wp=dr(Me,"WeakMap"),Vu=Wp,Ud="[object Map]",A0="[object Object]",Ih="[object Promise]",Qh="[object Set]",C0="[object WeakMap]",zf="[object DataView]",jf=bi(vp),O0=bi(ii),oh=bi(eu),Sf=bi(Au),lv=bi(Vu),Vf=ue;(vp&&Vf(new vp(new ArrayBuffer(1)))!=zf||ii&&Vf(new ii)!=Ud||eu&&Vf(eu.resolve())!=Ih||Au&&Vf(new Au)!=Qh||Vu&&Vf(new Vu)!=C0)&&(Vf=function(e){var t=ue(e),n=t==A0?e.constructor:void 0,r=n?bi(n):"";if(r)switch(r){case jf:return zf;case O0:return Ud;case oh:return Ih;case Sf:return Qh;case lv:return C0}return t});var Jh=Vf,R0=1,_="[object Arguments]",S="[object Array]",x="[object Object]",C=Object.prototype,k=C.hasOwnProperty;function G(e,t,n,r,i,s){var l=Ct(e),u=Ct(t),h=l?S:Jh(e),p=u?S:Jh(t);h=h==_?x:h,p=p==_?x:p;var v=h==x,y=p==x,b=h==p;if(b&&Ff(e)){if(!Ff(t))return!1;l=!0,v=!1}if(b&&!v)return s||(s=new Oc),l||S0(e)?Su(e,t,n,r,i,s):tr(e,t,h,n,r,i,s);if(!(n&R0)){var T=v&&k.call(e,"__wrapped__"),R=y&&k.call(t,"__wrapped__");if(T||R){var M=T?e.value():e,I=R?t.value():t;return s||(s=new Oc),i(M,I,n,r,s)}}return b?(s||(s=new Oc),w0(e,t,n,r,i,s)):!1}var K=G;function de(e,t,n,r,i){return e===t?!0:e==null||t==null||!Wa(e)&&!Wa(t)?e!==e&&t!==t:K(e,t,n,r,de,i)}var Ve=de;function st(e,t){return Ve(e,t)}var Ft=st;function jt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Xt=jt,bn=function(){try{var e=dr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),vn=bn;function zn(e,t,n){t=="__proto__"&&vn?vn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var on=zn,Fn=Object.prototype,er=Fn.hasOwnProperty;function vr(e,t,n){var r=e[t];(!(er.call(e,t)&&ht(r,n))||n===void 0&&!(t in e))&&on(e,t,n)}var Mr=vr;function wr(e,t,n,r){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],h=r?r(n[u],e[u],u,n,e):void 0;h===void 0&&(h=e[u]),i?on(n,u,h):Mr(n,u,h)}return n}var Fr=wr;function ni(e,t){return e&&Fr(t,Jc(t),e)}var Bi=ni;function Ii(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var co=Ii,Uo=Object.prototype,Go=Uo.hasOwnProperty;function Zo(e){if(!le(e))return co(e);var t=pu(e),n=[];for(var r in e)r=="constructor"&&(t||!Go.call(e,r))||n.push(r);return n}var fs=Zo;function Cr(e){return Jl(e)?du(e,!0):fs(e)}var Jt=Cr;function ma(e,t){return e&&Fr(t,Jt(t),e)}var fa=ma,Qo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ba=Qo&&typeof module=="object"&&module&&!module.nodeType&&module,sa=ba&&ba.exports===Qo,Fo=sa?Me.Buffer:void 0,lc=Fo?Fo.allocUnsafe:void 0;function xl(e,t){if(t)return e.slice();var n=e.length,r=lc?lc(n):new e.constructor(n);return e.copy(r),r}var Pc=xl;function cc(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ss=cc;function yl(e,t){return Fr(e,ka(e),t)}var dl=yl,vu=mc(Object.getPrototypeOf,Object),Hf=vu,Cu=Object.getOwnPropertySymbols,sf=Cu?function(e){for(var t=[];e;)Di(t,ka(e)),e=Hf(e);return t}:Aa,Hu=sf;function gp(e,t){return Fr(e,Hu(e),t)}var yp=gp;function Lh(e){return lo(e,Jt,Hu)}var ed=Lh,td=Object.prototype,ah=td.hasOwnProperty;function Ai(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ah.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Il=Ai;function Ll(e){var t=new e.constructor(e.byteLength);return new vc(t).set(new vc(e)),t}var tu=Ll;function Tf(e,t){var n=t?tu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var wf=Tf,Xa=/\w*$/;function Wl(e){var t=new e.constructor(e.source,Xa.exec(e));return t.lastIndex=e.lastIndex,t}var ec=Wl,Wf=ln?ln.prototype:void 0,Gp=Wf?Wf.valueOf:void 0;function sh(e){return Gp?Object(Gp.call(e)):{}}var M0=sh;function zd(e,t){var n=t?tu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var jd=zd,Gf="[object Boolean]",Zp="[object Date]",Xv="[object Map]",Vd="[object Number]",Ou="[object RegExp]",Qy="[object Set]",$v="[object String]",Xp="[object Symbol]",Jy="[object ArrayBuffer]",Ug="[object DataView]",e_="[object Float32Array]",Gm="[object Float64Array]",Yv="[object Int8Array]",cv="[object Int16Array]",t_="[object Int32Array]",$p="[object Uint8Array]",Yp="[object Uint8ClampedArray]",Zm="[object Uint16Array]",Xm="[object Uint32Array]";function zg(e,t,n){var r=e.constructor;switch(t){case Jy:return tu(e);case Gf:case Zp:return new r(+e);case Ug:return wf(e,n);case e_:case Gm:case Yv:case cv:case t_:case $p:case Yp:case Zm:case Xm:return jd(e,n);case Xv:return new r;case Vd:case $v:return new r(e);case Ou:return ec(e);case Qy:return new r;case Xp:return M0(e)}}var Kv=zg,qv=Object.create,jg=function(){function e(){}return function(t){if(!le(t))return{};if(qv)return qv(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),uv=jg;function P0(e){return typeof e.constructor=="function"&&!pu(e)?uv(Hf(e)):{}}var fv=P0,nu="[object Map]";function Kp(e){return Wa(e)&&Jh(e)==nu}var El=Kp,nd=Mh&&Mh.isMap,$m=nd?xf(nd):El,qp=$m,Qp="[object Set]";function Hd(e){return Wa(e)&&Jh(e)==Qp}var Jp=Hd,rd=Mh&&Mh.isSet,lf=rd?xf(rd):Jp,e0=lf,I0=1,Ym=2,id=4,Af="[object Arguments]",Dh="[object Array]",Qv="[object Boolean]",Jv="[object Date]",L0="[object Error]",Zf="[object Function]",Wd="[object GeneratorFunction]",n_="[object Map]",r_="[object Number]",em="[object Object]",Vg="[object RegExp]",od="[object Set]",i_="[object String]",lh="[object Symbol]",hv="[object WeakMap]",t0="[object ArrayBuffer]",_p="[object DataView]",Hg="[object Float32Array]",bp="[object Float64Array]",tm="[object Int8Array]",D0="[object Int16Array]",Ru="[object Int32Array]",mu="[object Uint8Array]",yc="[object Uint8ClampedArray]",cf="[object Uint16Array]",Mu="[object Uint32Array]",Ks={};Ks[Af]=Ks[Dh]=Ks[t0]=Ks[_p]=Ks[Qv]=Ks[Jv]=Ks[Hg]=Ks[bp]=Ks[tm]=Ks[D0]=Ks[Ru]=Ks[n_]=Ks[r_]=Ks[em]=Ks[Vg]=Ks[od]=Ks[i_]=Ks[lh]=Ks[mu]=Ks[yc]=Ks[cf]=Ks[Mu]=!0,Ks[L0]=Ks[Zf]=Ks[hv]=!1;function N0(e,t,n,r,i,s){var l,u=t&I0,h=t&Ym,p=t&id;if(n&&(l=i?n(e,r,i,s):n(e)),l!==void 0)return l;if(!le(e))return e;var v=Ct(e);if(v){if(l=Il(e),!u)return Ss(e,l)}else{var y=Jh(e),b=y==Zf||y==Wd;if(Ff(e))return Pc(e,u);if(y==em||y==Af||b&&!i){if(l=h||b?{}:fv(e),!u)return h?yp(e,fa(l,e)):dl(e,Bi(l,e))}else{if(!Ks[y])return i?e:{};l=Kv(e,y,u)}}s||(s=new Oc);var T=s.get(e);if(T)return T;s.set(e,l),e0(e)?e.forEach(function(I){l.add(N0(I,t,n,I,e,s))}):qp(e)&&e.forEach(function(I,N){l.set(N,N0(I,t,n,N,e,s))});var R=p?h?ed:wu:h?Jt:Jc,M=v?void 0:R(e);return Xt(M||e,function(I,N){M&&(N=I,I=e[N]),Mr(l,N,N0(I,t,n,N,e,s))}),l}var Wg=N0,o_=1,dv=4;function Km(e){return Wg(e,o_|dv)}var nm=Km,Pu="[object Symbol]";function rm(e){return typeof e=="symbol"||Wa(e)&&ue(e)==Pu}var xp=rm,qm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pv=/^\w*$/;function Ep(e,t){if(Ct(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||xp(e)?!0:pv.test(e)||!qm.test(e)||t!=null&&e in Object(t)}var Qm=Ep,a_="Expected a function";function im(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(a_);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var l=e.apply(this,r);return n.cache=s.set(i,l)||s,l};return n.cache=new(im.Cache||zc),n}im.Cache=zc;var Gg=im,Ue=500;function Qt(e){var t=Gg(e,function(r){return n.size===Ue&&n.clear(),r}),n=t.cache;return t}var Rn=Qt,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/\\(\\)?/g,Or=Rn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ar,function(n,r,i,s){t.push(i?s.replace(Xr,"$1"):r||n)}),t}),mr=Or;function Oi(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ci=Oi,Fi=1/0,Ri=ln?ln.prototype:void 0,Ni=Ri?Ri.toString:void 0;function Xi(e){if(typeof e=="string")return e;if(Ct(e))return ci(e,Xi)+"";if(xp(e))return Ni?Ni.call(e):"";var t=e+"";return t=="0"&&1/e==-Fi?"-0":t}var pi=Xi;function Ui(e){return e==null?"":pi(e)}var ur=Ui;function kr(e,t){return Ct(e)?e:Qm(e,t)?[e]:mr(ur(e))}var yi=kr,io=1/0;function oi(e){if(typeof e=="string"||xp(e))return e;var t=e+"";return t=="0"&&1/e==-io?"-0":t}var eo=oi;function Ei(e,t){t=yi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[eo(t[n++])];return n&&n==r?e:void 0}var to=Ei;function li(e,t,n){var r=e==null?void 0:to(e,t);return r===void 0?n:r}var di=li,zo=function(){return zo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zo.apply(this,arguments)},pa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qi(e,t){var n=(0,te.useRef)(),r=(0,te.useRef)(),i=(0,te.useRef)(null),s=t.onReady,l=t.onEvent,u=function(v,y){var b;v===void 0&&(v="image/png");var T=(b=i.current)===null||b===void 0?void 0:b.getElementsByTagName("canvas")[0];return T==null?void 0:T.toDataURL(v,y)},h=function(v,y,b){v===void 0&&(v="download"),y===void 0&&(y="image/png");var T=v;v.indexOf(".")===-1&&(T="".concat(v,".").concat(y.split("/")[1]));var R=u(y,b),M=document.createElement("a");return M.href=R,M.download=T,document.body.appendChild(M),M.click(),document.body.removeChild(M),M=null,T},p=function(v,y){y===void 0&&(y=!1);var b=Object.keys(v),T=y;b.forEach(function(R){var M=v[R];R==="tooltip"&&(T=!0),Gn(M)&&dn("".concat(M))?v[R]=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];return cn(M.apply(void 0,I),T)}:Ct(M)?M.forEach(function(I){p(I,T)}):le(M)?p(M,T):T=y})};return(0,te.useEffect)(function(){if(n.current&&!Ft(r.current,t)){var v=!1;if(r.current){var y=r.current,b=y.data,T=pa(y,["data"]),R=t.data,M=pa(t,["data"]);v=Ft(T,M)}r.current=nm(t),v?n.current.changeData(di(t,"data")):(p(t),n.current.update(t),n.current.render())}},[t]),(0,te.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=nm(t)),p(t);var v=new e(i.current,zo({},t));v.toDataURL=u,v.downloadImage=h,v.render(),n.current=v,s&&s(v);var y=function(b){l&&l(v,b)};return v.on("*",y),function(){n.current&&(n.current.destroy(),n.current.off("*",y),n.current=void 0)}},[]),{chart:n,container:i}}var Si="*",$r=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[t]||[],l=this._events[Si]||[],u=function(h){for(var p=h.length,v=0;v<p;v++)if(h[v]){var y=h[v],b=y.callback,T=y.once;T&&(h.splice(v,1),h.length===0&&delete n._events[t],p--,v--),b.apply(n,r)}};u(s),u(l)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,s=0;s<i;s++)r[s].callback===n&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),ko=$r;const Na="main-layer",so="label-layer",va="element",ha="view",Jo="plot",gs="component",Sl="label",Hc="area",$a="mask",Gl={};function qs(e,t){Object.assign(Gl,{[e]:t})}var ie=D(97582),tc=D(38554),ss=tc,fr=D(77160),Kr=D(85975),Dl=D(49685);function Ca(){var e=new Dl.WT(9);return Dl.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ru(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function zs(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ea(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ia(e,t,n,r,i,s,l,u,h){var p=new Dl.WT(9);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=l,p[7]=u,p[8]=h,p}function ys(e,t,n,r,i,s,l,u,h,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=u,e[7]=h,e[8]=p,e}function uc(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Nh(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function mn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],u=t[5],h=t[6],p=t[7],v=t[8],y=v*l-u*p,b=-v*s+u*h,T=p*s-l*h,R=n*y+r*b+i*T;return R?(R=1/R,e[0]=y*R,e[1]=(-v*r+i*p)*R,e[2]=(u*r-i*l)*R,e[3]=b*R,e[4]=(v*n-i*h)*R,e[5]=(-u*n+i*s)*R,e[6]=T*R,e[7]=(-p*n+r*h)*R,e[8]=(l*n-r*s)*R,e):null}function Pr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],u=t[5],h=t[6],p=t[7],v=t[8];return e[0]=l*v-u*p,e[1]=i*p-r*v,e[2]=r*u-i*l,e[3]=u*h-s*v,e[4]=n*v-i*h,e[5]=i*s-n*u,e[6]=s*p-l*h,e[7]=r*h-n*p,e[8]=n*l-r*s,e}function xr(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],l=e[5],u=e[6],h=e[7],p=e[8];return t*(p*s-l*h)+n*(-p*i+l*u)+r*(h*i-s*u)}function vo(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],u=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1],R=n[2],M=n[3],I=n[4],N=n[5],U=n[6],H=n[7],X=n[8];return e[0]=b*r+T*l+R*p,e[1]=b*i+T*u+R*v,e[2]=b*s+T*h+R*y,e[3]=M*r+I*l+N*p,e[4]=M*i+I*u+N*v,e[5]=M*s+I*h+N*y,e[6]=U*r+H*l+X*p,e[7]=U*i+H*u+X*v,e[8]=U*s+H*h+X*y,e}function za(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],u=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=l,e[4]=u,e[5]=h,e[6]=b*r+T*l+p,e[7]=b*i+T*u+v,e[8]=b*s+T*h+y,e}function Ps(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],u=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=Math.sin(n),T=Math.cos(n);return e[0]=T*r+b*l,e[1]=T*i+b*u,e[2]=T*s+b*h,e[3]=T*l-b*r,e[4]=T*u-b*i,e[5]=T*h-b*s,e[6]=p,e[7]=v,e[8]=y,e}function It(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function tn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Mn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Tr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function br(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function jn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n+n,u=r+r,h=i+i,p=n*l,v=r*l,y=r*u,b=i*l,T=i*u,R=i*h,M=s*l,I=s*u,N=s*h;return e[0]=1-y-R,e[3]=v-N,e[6]=b+I,e[1]=v+N,e[4]=1-p-R,e[7]=T-M,e[2]=b-I,e[5]=T+M,e[8]=1-p-y,e}function Jn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],u=t[5],h=t[6],p=t[7],v=t[8],y=t[9],b=t[10],T=t[11],R=t[12],M=t[13],I=t[14],N=t[15],U=n*u-r*l,H=n*h-i*l,X=n*p-s*l,$=r*h-i*u,Q=r*p-s*u,ce=i*p-s*h,pe=v*M-y*R,Re=v*I-b*R,je=v*N-T*R,Ke=y*I-b*M,ft=y*N-T*M,Ye=b*N-T*I,it=U*Ye-H*ft+X*Ke+$*je-Q*Re+ce*pe;return it?(it=1/it,e[0]=(u*Ye-h*ft+p*Ke)*it,e[1]=(h*je-l*Ye-p*Re)*it,e[2]=(l*ft-u*je+p*pe)*it,e[3]=(i*ft-r*Ye-s*Ke)*it,e[4]=(n*Ye-i*je+s*Re)*it,e[5]=(r*je-n*ft-s*pe)*it,e[6]=(M*ce-I*Q+N*$)*it,e[7]=(I*X-R*ce-N*H)*it,e[8]=(R*Q-M*X+N*U)*it,e):null}function nr(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function xn(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Wn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function en(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Yn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Dr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function jr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function vi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function ei(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],l=e[4],u=e[5],h=e[6],p=e[7],v=e[8],y=t[0],b=t[1],T=t[2],R=t[3],M=t[4],I=t[5],N=t[6],U=t[7],H=t[8];return Math.abs(n-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(h-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-U)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(v-H)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))}var _i=null,Lo=null,ki=D(98333);function $i(){var e=new Dl.WT(4);return Dl.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function oa(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Xo(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Ns(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Wc(e,t){var n=n0(e,t);return Math.acos(2*n*n-1)}function nc(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],u=n[0],h=n[1],p=n[2],v=n[3];return e[0]=r*v+l*u+i*p-s*h,e[1]=i*v+l*h+s*u-r*p,e[2]=s*v+l*p+r*h-i*u,e[3]=l*v-r*u-i*h-s*p,e}function Jm(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],u=Math.sin(n),h=Math.cos(n);return e[0]=r*h+l*u,e[1]=i*h+s*u,e[2]=s*h-i*u,e[3]=l*h-r*u,e}function Cf(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],u=Math.sin(n),h=Math.cos(n);return e[0]=r*h-s*u,e[1]=i*h+l*u,e[2]=s*h+r*u,e[3]=l*h-i*u,e}function s_(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],u=Math.sin(n),h=Math.cos(n);return e[0]=r*h+i*u,e[1]=i*h-r*u,e[2]=s*h+l*u,e[3]=l*h-s*u,e}function Sp(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Tp(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),u=Math.exp(s),h=l>0?u*Math.sin(l)/l:0;return e[0]=n*h,e[1]=r*h,e[2]=i*h,e[3]=u*Math.cos(l),e}function R1(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),u=l>0?Math.atan2(l,s)/l:0;return e[0]=n*u,e[1]=r*u,e[2]=i*u,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function yx(e,t,n){return R1(e,t),rg(e,e,n),Tp(e,e),e}function l_(e,t,n,r){var i=t[0],s=t[1],l=t[2],u=t[3],h=n[0],p=n[1],v=n[2],y=n[3],b,T,R,M,I;return T=i*h+s*p+l*v+u*y,T<0&&(T=-T,h=-h,p=-p,v=-v,y=-y),1-T>Dl.Ib?(b=Math.acos(T),R=Math.sin(b),M=Math.sin((1-r)*b)/R,I=Math.sin(r*b)/R):(M=1-r,I=r),e[0]=M*i+I*h,e[1]=M*s+I*p,e[2]=M*l+I*v,e[3]=M*u+I*y,e}function M1(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function B0(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n+r*r+i*i+s*s,u=l?1/l:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e}function _x(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function eg(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,l=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[l*3+l]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[l]=(t[l*3+i]+t[i*3+l])*r}return e}function Zg(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),l=Math.cos(t),u=Math.sin(n),h=Math.cos(n),p=Math.sin(r),v=Math.cos(r);return e[0]=s*h*v-l*u*p,e[1]=l*u*v+s*h*p,e[2]=l*h*p-s*u*v,e[3]=l*h*v+s*u*p,e}function iu(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Tl=ki.d9,tg=ki.al,Xg=ki.JG,c_=ki.t8,ng=ki.IH,P1=nc,rg=ki.bA,n0=ki.AK,wp=ki.t7,bx=ki.kE,Ic=null,ou=ki.we,F0=null,vv=ki.Fv,Qs=ki.I6,I1=ki.fS,r0=function(){var e=fr.Ue(),t=fr.al(1,0,0),n=fr.al(0,1,0);return function(r,i,s){var l=fr.AK(i,s);return l<-.999999?(fr.kC(e,t,i),fr.Zh(e)<1e-6&&fr.kC(e,n,i),fr.Fv(e,e),Xo(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(fr.kC(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,vv(r,r))}}(),ad=function(){var e=$i(),t=$i();return function(n,r,i,s,l,u){return l_(e,r,l,u),l_(t,i,s,u),l_(n,e,t,2*u*(1-u)),n}}(),xx=function(){var e=Ca();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],vv(t,eg(t,e))}}(),om=D(31437),Zl=D(25897);function Js(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var xa=D(95147),am=D(95456),c=function(e){return(0,am.Z)(e,"String")},d=D(81957),g={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function A(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return g[n]===t.length-1&&"achlmqstvz".includes(n)})}function P(e){return A(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function B(e){return P(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var j={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function q(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=g[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,g[n]))),!!g[n]););}function ge(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function De(e){return e>=48&&e<=57||e===43||e===45||e===46}function We(e){return e>=48&&e<=57}function tt(e){var t=e.max,n=e.pathValue,r=e.index,i=r,s=!1,l=!1,u=!1,h=!1,p;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(p=n.charCodeAt(i),(p===43||p===45)&&(i+=1,p=n.charCodeAt(i)),!We(p)&&p!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(p!==46){if(s=p===48,i+=1,p=n.charCodeAt(i),s&&i<t&&p&&We(p)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&We(n.charCodeAt(i));)i+=1,l=!0;p=n.charCodeAt(i)}if(p===46){for(h=!0,i+=1;We(n.charCodeAt(i));)i+=1,u=!0;p=n.charCodeAt(i)}if(p===101||p===69){if(h&&!l&&!u){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,p=n.charCodeAt(i),(p===43||p===45)&&(i+=1),i<t&&We(n.charCodeAt(i)))for(;i<t&&We(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function xt(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function Lt(e){for(var t=e.pathValue,n=e.max;e.index<n&&xt(t.charCodeAt(e.index));)e.index+=1}function fn(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function _n(e){return(e|32)===97}function Hn(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),s=g[n[r].toLowerCase()];if(e.segmentStart=r,!fn(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,Lt(e),e.data=[],!s){q(e);return}for(;;){for(var l=s;l>0;l-=1){if(_n(i)&&(l===3||l===4)?ge(e):tt(e),e.err.length)return;e.data.push(e.param),Lt(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,Lt(e))}if(e.index>=e.max||!De(n.charCodeAt(e.index)))break}q(e)}var In=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function cr(e){if(A(e))return[].concat(e);var t=new In(e);for(Lt(t);t.index<t.max&&!t.err.length;)Hn(t);return t.err?t.err:t.segments}function gr(e){if(P(e))return[].concat(e);var t=cr(e),n=0,r=0,i=0,s=0;return t.map(function(l){var u=l.slice(1).map(Number),h=l[0],p=h.toUpperCase();if(h==="M")return n=u[0],r=u[1],i=n,s=r,["M",n,r];var v;if(h!==p)switch(p){case"A":v=[p,u[0],u[1],u[2],u[3],u[4],u[5]+n,u[6]+r];break;case"V":v=[p,u[0]+r];break;case"H":v=[p,u[0]+n];break;default:{var y=u.map(function(T,R){return T+(R%2?r:n)});v=[p].concat(y)}}else v=[p].concat(u);var b=v.length;switch(p){case"Z":n=i,r=s;break;case"H":n=v[1];break;case"V":r=v[1];break;default:n=v[b-2],r=v[b-1],p==="M"&&(i=n,s=r)}return v})}function Lr(e,t){var n=e[0],r=t.x1,i=t.y1,s=t.x2,l=t.y2,u=e.slice(1).map(Number),h=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")h=["L",e[1],i];else if(n==="V")h=["L",r,e[1]];else if(n==="S"){var p=r*2-s,v=i*2-l;t.x1=p,t.y1=v,h=["C",p,v].concat(u)}else if(n==="T"){var y=r*2-t.qx,b=i*2-t.qy;t.qx=y,t.qy=b,h=["Q",y,b].concat(u)}else if(n==="Q"){var T=u[0],R=u[1];t.qx=T,t.qy=R}return h}function Nr(e){if(B(e))return[].concat(e);for(var t=gr(e),n=(0,ie.pi)({},j),r=0;r<t.length;r+=1){t[r]=Lr(t[r],n);var i=t[r],s=i.length;n.x1=+i[s-2],n.y1=+i[s-1],n.x2=+i[s-4]||n.x1,n.y2=+i[s-3]||n.y1}return t}function Gr(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return[r+(s-r)*n,i+(l-i)*n]}function Pi(e,t,n,r,i){var s=Js([e,t],[n,r]),l={x:0,y:0};if(typeof i=="number")if(i<=0)l={x:e,y:t};else if(i>=s)l={x:n,y:r};else{var u=Gr([e,t],[n,r],i/s),h=u[0],p=u[1];l={x:h,y:p}}return{length:s,point:l,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function Yi(e,t){var n=e.x,r=e.y,i=t.x,s=t.y,l=n*i+r*s,u=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(s,2))),h=n*s-r*i<0?-1:1,p=h*Math.acos(l/u);return p}function Do(e,t,n,r,i,s,l,u,h,p){var v=Math.abs,y=Math.sin,b=Math.cos,T=Math.sqrt,R=Math.PI,M=v(n),I=v(r),N=(i%360+360)%360,U=N*(R/180);if(e===u&&t===h)return{x:e,y:t};if(M===0||I===0)return Pi(e,t,u,h,p).point;var H=(e-u)/2,X=(t-h)/2,$={x:b(U)*H+y(U)*X,y:-y(U)*H+b(U)*X},Q=Math.pow($.x,2)/Math.pow(M,2)+Math.pow($.y,2)/Math.pow(I,2);Q>1&&(M*=T(Q),I*=T(Q));var ce=Math.pow(M,2)*Math.pow(I,2)-Math.pow(M,2)*Math.pow($.y,2)-Math.pow(I,2)*Math.pow($.x,2),pe=Math.pow(M,2)*Math.pow($.y,2)+Math.pow(I,2)*Math.pow($.x,2),Re=ce/pe;Re=Re<0?0:Re;var je=(s!==l?1:-1)*T(Re),Ke={x:je*(M*$.y/I),y:je*(-(I*$.x)/M)},ft={x:b(U)*Ke.x-y(U)*Ke.y+(e+u)/2,y:y(U)*Ke.x+b(U)*Ke.y+(t+h)/2},Ye={x:($.x-Ke.x)/M,y:($.y-Ke.y)/I},it=Yi({x:1,y:0},Ye),at={x:(-$.x-Ke.x)/M,y:(-$.y-Ke.y)/I},vt=Yi(Ye,at);!l&&vt>0?vt-=2*R:l&&vt<0&&(vt+=2*R),vt%=2*R;var Vt=it+vt*p,At=M*b(Vt),Ut=I*y(Vt),Sn={x:b(U)*At-y(U)*Ut+ft.x,y:y(U)*At+b(U)*Ut+ft.y};return Sn}function ho(e,t,n,r,i,s,l,u,h,p,v){var y,b=v.bbox,T=b===void 0?!0:b,R=v.length,M=R===void 0?!0:R,I=v.sampleSize,N=I===void 0?30:I,U=typeof p=="number",H=e,X=t,$=0,Q=[H,X,$],ce=[H,X],pe=0,Re={x:0,y:0},je=[{x:H,y:X}];U&&p<=0&&(Re={x:H,y:X});for(var Ke=0;Ke<=N;Ke+=1){if(pe=Ke/N,y=Do(e,t,n,r,i,s,l,u,h,pe),H=y.x,X=y.y,T&&je.push({x:H,y:X}),M&&($+=Js(ce,[H,X])),ce=[H,X],U&&$>=p&&p>Q[2]){var ft=($-p)/($-Q[2]);Re={x:ce[0]*(1-ft)+Q[0]*ft,y:ce[1]*(1-ft)+Q[1]*ft}}Q=[H,X,$]}return U&&p>=$&&(Re={x:u,y:h}),{length:$,point:Re,min:{x:Math.min.apply(null,je.map(function(Ye){return Ye.x})),y:Math.min.apply(null,je.map(function(Ye){return Ye.y}))},max:{x:Math.max.apply(null,je.map(function(Ye){return Ye.x})),y:Math.max.apply(null,je.map(function(Ye){return Ye.y}))}}}function $o(e,t,n,r,i,s,l,u,h){var p=1-h;return{x:Math.pow(p,3)*e+3*Math.pow(p,2)*h*n+3*p*Math.pow(h,2)*i+Math.pow(h,3)*l,y:Math.pow(p,3)*t+3*Math.pow(p,2)*h*r+3*p*Math.pow(h,2)*s+Math.pow(h,3)*u}}function po(e,t,n,r,i,s,l,u,h,p){var v,y=p.bbox,b=y===void 0?!0:y,T=p.length,R=T===void 0?!0:T,M=p.sampleSize,I=M===void 0?10:M,N=typeof h=="number",U=e,H=t,X=0,$=[U,H,X],Q=[U,H],ce=0,pe={x:0,y:0},Re=[{x:U,y:H}];N&&h<=0&&(pe={x:U,y:H});for(var je=0;je<=I;je+=1){if(ce=je/I,v=$o(e,t,n,r,i,s,l,u,ce),U=v.x,H=v.y,b&&Re.push({x:U,y:H}),R&&(X+=Js(Q,[U,H])),Q=[U,H],N&&X>=h&&h>$[2]){var Ke=(X-h)/(X-$[2]);pe={x:Q[0]*(1-Ke)+$[0]*Ke,y:Q[1]*(1-Ke)+$[1]*Ke}}$=[U,H,X]}return N&&h>=X&&(pe={x:l,y:u}),{length:X,point:pe,min:{x:Math.min.apply(null,Re.map(function(ft){return ft.x})),y:Math.min.apply(null,Re.map(function(ft){return ft.y}))},max:{x:Math.max.apply(null,Re.map(function(ft){return ft.x})),y:Math.max.apply(null,Re.map(function(ft){return ft.y}))}}}function ja(e,t,n,r,i,s,l){var u=1-l;return{x:Math.pow(u,2)*e+2*u*l*n+Math.pow(l,2)*i,y:Math.pow(u,2)*t+2*u*l*r+Math.pow(l,2)*s}}function ua(e,t,n,r,i,s,l,u){var h,p=u.bbox,v=p===void 0?!0:p,y=u.length,b=y===void 0?!0:y,T=u.sampleSize,R=T===void 0?10:T,M=typeof l=="number",I=e,N=t,U=0,H=[I,N,U],X=[I,N],$=0,Q={x:0,y:0},ce=[{x:I,y:N}];M&&l<=0&&(Q={x:I,y:N});for(var pe=0;pe<=R;pe+=1){if($=pe/R,h=ja(e,t,n,r,i,s,$),I=h.x,N=h.y,v&&ce.push({x:I,y:N}),b&&(U+=Js(X,[I,N])),X=[I,N],M&&U>=l&&l>H[2]){var Re=(U-l)/(U-H[2]);Q={x:X[0]*(1-Re)+H[0]*Re,y:X[1]*(1-Re)+H[1]*Re}}H=[I,N,U]}return M&&l>=U&&(Q={x:i,y:s}),{length:U,point:Q,min:{x:Math.min.apply(null,ce.map(function(je){return je.x})),y:Math.min.apply(null,ce.map(function(je){return je.y}))},max:{x:Math.max.apply(null,ce.map(function(je){return je.x})),y:Math.max.apply(null,ce.map(function(je){return je.y}))}}}function Ao(e,t,n){for(var r,i,s,l,u,h,p=Nr(e),v=typeof t=="number",y,b=[],T,R=0,M=0,I=0,N=0,U,H=[],X=[],$=0,Q={x:0,y:0},ce=Q,pe=Q,Re=Q,je=0,Ke=0,ft=p.length;Ke<ft;Ke+=1)U=p[Ke],T=U[0],y=T==="M",b=y?b:[R,M].concat(U.slice(1)),y?(I=U[1],N=U[2],Q={x:I,y:N},ce=Q,$=0,v&&t<.001&&(Re=Q)):T==="L"?(r=Pi(b[0],b[1],b[2],b[3],(t||0)-je),$=r.length,Q=r.min,ce=r.max,pe=r.point):T==="A"?(i=ho(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-je,n||{}),$=i.length,Q=i.min,ce=i.max,pe=i.point):T==="C"?(s=po(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-je,n||{}),$=s.length,Q=s.min,ce=s.max,pe=s.point):T==="Q"?(l=ua(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-je,n||{}),$=l.length,Q=l.min,ce=l.max,pe=l.point):T==="Z"&&(b=[R,M,I,N],u=Pi(b[0],b[1],b[2],b[3],(t||0)-je),$=u.length,Q=u.min,ce=u.max,pe=u.point),v&&je<t&&je+$>=t&&(Re=pe),X.push(ce),H.push(Q),je+=$,h=T!=="Z"?U.slice(-2):[I,N],R=h[0],M=h[1];return v&&t>=je&&(Re={x:R,y:M}),{length:je,point:Re,min:{x:Math.min.apply(null,H.map(function(Ye){return Ye.x})),y:Math.min.apply(null,H.map(function(Ye){return Ye.y}))},max:{x:Math.max.apply(null,X.map(function(Ye){return Ye.x})),y:Math.max.apply(null,X.map(function(Ye){return Ye.y}))}}}function Ya(e,t){return Ao(e,void 0,(0,ie.pi)((0,ie.pi)({},t),{bbox:!1,length:!0})).length}var jo=function(e){return Array.isArray?Array.isArray(e):(0,am.Z)(e,"Array")},qa=function(e){if(jo(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Vo=function(e){if(jo(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Is=1e-5;function il(e,t,n){return n===void 0&&(n=Is),Math.abs(e-t)<n}var Xl=function(e,t){return(e%t+t)%t},Nl=Xl;function wl(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function rc(e){return B(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function fc(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function _c(e,t,n,r,i,s,l,u,h,p){var v=e,y=t,b=n,T=r,R=u,M=h,I=Math.PI*120/180,N=Math.PI/180*(+i||0),U=[],H,X,$,Q,ce;if(p)X=p[0],$=p[1],Q=p[2],ce=p[3];else{H=fc(v,y,-N),v=H.x,y=H.y,H=fc(R,M,-N),R=H.x,M=H.y;var pe=(v-R)/2,Re=(y-M)/2,je=pe*pe/(b*b)+Re*Re/(T*T);je>1&&(je=Math.sqrt(je),b*=je,T*=je);var Ke=b*b,ft=T*T,Ye=(s===l?-1:1)*Math.sqrt(Math.abs((Ke*ft-Ke*Re*Re-ft*pe*pe)/(Ke*Re*Re+ft*pe*pe)));Q=Ye*b*Re/T+(v+R)/2,ce=Ye*-T*pe/b+(y+M)/2,X=Math.asin(((y-ce)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),$=Math.asin(((M-ce)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),X=v<Q?Math.PI-X:X,$=R<Q?Math.PI-$:$,X<0&&(X=Math.PI*2+X),$<0&&($=Math.PI*2+$),l&&X>$&&(X-=Math.PI*2),!l&&$>X&&($-=Math.PI*2)}var it=$-X;if(Math.abs(it)>I){var at=$,vt=R,Vt=M;$=X+I*(l&&$>X?1:-1),R=Q+b*Math.cos($),M=ce+T*Math.sin($),U=_c(R,M,b,T,i,0,l,vt,Vt,[$,at,Q,ce])}it=$-X;var At=Math.cos(X),Ut=Math.sin(X),Sn=Math.cos($),Vn=Math.sin($),rr=Math.tan(it/4),or=4/3*b*rr,Hr=4/3*T*rr,fi=[v,y],Qi=[v+or*Ut,y-Hr*At],Jr=[R+or*Vn,M-Hr*Sn],qr=[R,M];if(Qi[0]=2*fi[0]-Qi[0],Qi[1]=2*fi[1]-Qi[1],p)return Qi.concat(Jr,qr,U);U=Qi.concat(Jr,qr,U);for(var Io=[],Ji=0,Wi=U.length;Ji<Wi;Ji+=1)Io[Ji]=Ji%2?fc(U[Ji-1],U[Ji],N).y:fc(U[Ji],U[Ji+1],N).x;return Io}function Wu(e,t,n,r,i,s){var l=.3333333333333333,u=2/3;return[l*e+u*n,l*t+u*r,l*i+u*n,l*s+u*r,i,s]}var Lc=function(e,t,n,r){var i=.5,s=Gr([e,t],[n,r],i);return(0,ie.ev)((0,ie.ev)([],s,!0),[n,r,n,r],!1)};function Gu(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],s=r[1],l,u=t.x1,h=t.y1,p=t.x,v=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=s,e;case"A":return l=[u,h].concat(r),["C"].concat(_c(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]));case"Q":return t.qx=i,t.qy=s,l=[u,h].concat(r),["C"].concat(Wu(l[0],l[1],l[2],l[3],l[4],l[5]));case"L":return["C"].concat(Lc(u,h,i,s));case"Z":return u===p&&h===v?["C",u,h,p,v,p,v]:["C"].concat(Lc(u,h,p,v));default:}return e}function $l(e,t){if(t===void 0&&(t=!1),rc(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=Nr(e),i=(0,ie.pi)({},j),s=[],l="",u=r.length,h,p,v=[],y=0;y<u;y+=1){r[y]&&(l=r[y][0]),s[y]=l;var b=Gu(r[y],i);r[y]=b,wl(r,s,y),u=r.length,l==="Z"&&v.push(y),h=r[y],p=h.length,i.x1=+h[p-2],i.y1=+h[p-1],i.x2=+h[p-4]||i.x1,i.y2=+h[p-3]||i.y1}return t?[r,v]:r}function au(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),s=e.slice(6,8),l=Gr(n,r,t),u=Gr(r,i,t),h=Gr(i,s,t),p=Gr(l,u,t),v=Gr(u,h,t),y=Gr(p,v,t);return[["C"].concat(l,p,y),["C"].concat(v,h,s)]}function Qa(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),s=n?po(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,l;return n?l=s?au(i):[t,t]:l=[t],{s:t,ss:l,l:s}})}function el(e,t,n){var r=Qa(e),i=Qa(t),s=r.length,l=i.length,u=r.filter(function(I){return I.l}).length,h=i.filter(function(I){return I.l}).length,p=r.filter(function(I){return I.l}).reduce(function(I,N){var U=N.l;return I+U},0)/u||0,v=i.filter(function(I){return I.l}).reduce(function(I,N){var U=N.l;return I+U},0)/h||0,y=n||Math.max(s,l),b=[p,v],T=[y-s,y-l],R=0,M=[r,i].map(function(I,N){return I.l===y?I.map(function(U){return U.s}):I.map(function(U,H){return R=H&&T[N]&&U.l>=b[N],T[N]-=R?1:0,R?U.ss:[U.s]}).flat()});return M[0].length===M[1].length?M:el(M[0],M[1],y)}function $s(e,t,n,r,i,s,l,u){return 3*((u-t)*(n+i)-(l-e)*(r+s)+r*(e-i)-n*(t-s)+u*(i+e/3)-l*(s+t/3))/20}function xs(e){var t=0,n=0,r=0;return $l(e).map(function(i){var s;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var l=i.slice(1),u=l[0],h=l[1],p=l[2],v=l[3],y=l[4],b=l[5];return r=$s(t,n,u,h,p,v,y,b),s=i.slice(-2),t=s[0],n=s[1],r}}).reduce(function(i,s){return i+s},0)}function Zu(e){return xs(e)>=0}function gu(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function pl(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function hc(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(s,l){var u=i+l,h;return l===0||e[u]&&e[u][0]==="M"?(h=e[u],["M"].concat(h.slice(-2))):(u>=t&&(u-=n),e[u])})})}function bc(e,t){var n=e.length-1,r=[],i=0,s=0,l=hc(e);return l.forEach(function(u,h){e.slice(1).forEach(function(p,v){s+=Js(e[(h+v)%n].slice(-2),t[v%n].slice(-2))}),r[h]=s,s=0}),i=r.indexOf(Math.min.apply(null,r)),l[i]}var Ts=function(e){return e===void 0},js=Ts,ch=function(e){return(0,am.Z)(e,"Boolean")},Gd=ch,vl=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function uh(e,t,n){return Ao(e,t,(0,ie.pi)((0,ie.pi)({},n),{bbox:!1,length:!0})).point}function Xu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zd(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xf(){}var Ap=.7,Bh=1/Ap,Fh="\\s*([+-]?\\d+)\\s*",k0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sm=/^#([0-9a-f]{3,8})$/,$g=new RegExp("^rgb\\(".concat(Fh,",").concat(Fh,",").concat(Fh,"\\)$")),u_=new RegExp("^rgb\\(".concat($f,",").concat($f,",").concat($f,"\\)$")),sd=new RegExp("^rgba\\(".concat(Fh,",").concat(Fh,",").concat(Fh,",").concat(k0,"\\)$")),i0=new RegExp("^rgba\\(".concat($f,",").concat($f,",").concat($f,",").concat(k0,"\\)$")),mv=new RegExp("^hsl\\(".concat(k0,",").concat($f,",").concat($f,"\\)$")),U0=new RegExp("^hsla\\(".concat(k0,",").concat($f,",").concat($f,",").concat(k0,"\\)$")),gv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xu(Xf,z0,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:lm,formatHex:lm,formatHex8:f_,formatHsl:ig,formatRgb:o0,toString:o0});function lm(){return this.rgb().formatHex()}function f_(){return this.rgb().formatHex8()}function ig(){return d_(this).formatHsl()}function o0(){return this.rgb().formatRgb()}function z0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cm(t):n===3?new yu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?j0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?j0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$g.exec(e))?new yu(t[1],t[2],t[3],1):(t=u_.exec(e))?new yu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sd.exec(e))?j0(t[1],t[2],t[3],t[4]):(t=i0.exec(e))?j0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mv.exec(e))?Yg(t[1],t[2]/100,t[3]/100,1):(t=U0.exec(e))?Yg(t[1],t[2]/100,t[3]/100,t[4]):gv.hasOwnProperty(e)?cm(gv[e]):e==="transparent"?new yu(NaN,NaN,NaN,0):null}function cm(e){return new yu(e>>16&255,e>>8&255,e&255,1)}function j0(e,t,n,r){return r<=0&&(e=t=n=NaN),new yu(e,t,n,r)}function um(e){return e instanceof Xf||(e=z0(e)),e?(e=e.rgb(),new yu(e.r,e.g,e.b,e.opacity)):new yu}function h_(e,t,n,r){return arguments.length===1?um(e):new yu(e,t,n,r==null?1:r)}function yu(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xu(yu,h_,Zd(Xf,{brighter:function(t){return t=t==null?Bh:Math.pow(Bh,t),new yu(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Ap:Math.pow(Ap,t),new yu(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new yu(Xd(this.r),Xd(this.g),Xd(this.b),Cp(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yv,formatHex:yv,formatHex8:fm,formatRgb:hm,toString:hm}));function yv(){return"#".concat(ld(this.r)).concat(ld(this.g)).concat(ld(this.b))}function fm(){return"#".concat(ld(this.r)).concat(ld(this.g)).concat(ld(this.b)).concat(ld((isNaN(this.opacity)?1:this.opacity)*255))}function hm(){var e=Cp(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(Xd(this.r),", ").concat(Xd(this.g),", ").concat(Xd(this.b)).concat(e===1?")":", ".concat(e,")"))}function Cp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ld(e){return e=Xd(e),(e<16?"0":"")+e.toString(16)}function Yg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cd(e,t,n,r)}function d_(e){if(e instanceof cd)return new cd(e.h,e.s,e.l,e.opacity);if(e instanceof Xf||(e=z0(e)),!e)return new cd;if(e instanceof cd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,h=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=h<.5?s+i:2-s-i,l*=60):u=h>0&&h<1?0:l,new cd(l,u,h,e.opacity)}function p_(e,t,n,r){return arguments.length===1?d_(e):new cd(e,t,n,r==null?1:r)}function cd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xu(cd,p_,Zd(Xf,{brighter:function(t){return t=t==null?Bh:Math.pow(Bh,t),new cd(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Ap:Math.pow(Ap,t),new cd(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new yu(_v(t>=240?t-240:t+120,s,i),_v(t,s,i),_v(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new cd(Kg(this.h),og(this.s),og(this.l),Cp(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=Cp(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(Kg(this.h),", ").concat(og(this.s)*100,"%, ").concat(og(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function Kg(e){return e=(e||0)%360,e<0?e+360:e}function og(e){return Math.max(0,Math.min(1,e||0))}function _v(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function ws(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}function fh(e,t){var n=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(e),!1)),r=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(t),!1)),i=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(e),!1)),s=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(t),!1));return{x:n,y:r,width:i-n,height:s-r}}function L1(e){return(e+Math.PI*2)%(Math.PI*2)}function a0(e,t){var n=Math.abs(e);return t>0?n:n*-1}function qg(e,t,n,r,i,s){var l=n,u=r;if(l===0||u===0)return{x:e,y:t};for(var h=i-e,p=s-t,v=Math.abs(h),y=Math.abs(p),b=l*l,T=u*u,R=Math.PI/4,M=0,I=0,N=0;N<4;N++){M=l*Math.cos(R),I=u*Math.sin(R);var U=(b-T)*Math.pow(Math.cos(R),3)/l,H=(T-b)*Math.pow(Math.sin(R),3)/u,X=M-U,$=I-H,Q=v-U,ce=y-H,pe=Math.hypot($,X),Re=Math.hypot(ce,Q),je=pe*Math.asin((X*ce-$*Q)/(pe*Re)),Ke=je/Math.sqrt(b+T-M*M-I*I);R+=Ke,R=Math.min(Math.PI/2,Math.max(0,R))}return{x:e+a0(M,h),y:t+a0(I,p)}}function v_(e,t,n,r,i,s,l,u){return-1*n*Math.cos(i)*Math.sin(u)-r*Math.sin(i)*Math.cos(u)}function Qg(e,t,n,r,i,s,l,u){return-1*n*Math.sin(i)*Math.sin(u)+r*Math.cos(i)*Math.cos(u)}function uf(e,t,n){return Math.atan(-t/e*Math.tan(n))}function Jg(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function ag(e,t,n,r,i,s){return n*Math.cos(i)*Math.cos(s)-r*Math.sin(i)*Math.sin(s)+e}function s0(e,t,n,r,i,s){return n*Math.sin(i)*Math.cos(s)+r*Math.cos(i)*Math.sin(s)+t}function ey(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function ty(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function m_(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function sg(e,t,n,r,i,s,l){for(var u=uf(n,r,i),h=1/0,p=-1/0,v=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=u+y;s<l?s<b&&b<l&&v.push(b):l<b&&b<s&&v.push(b)}for(var y=0;y<v.length;y++){var T=ag(e,t,n,r,i,v[y]);T<h&&(h=T),T>p&&(p=T)}for(var R=Jg(n,r,i),M=1/0,I=-1/0,N=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var U=R+y;s<l?s<U&&U<l&&N.push(U):l<U&&U<s&&N.push(U)}for(var y=0;y<N.length;y++){var H=s0(e,t,n,r,i,N[y]);H<M&&(M=H),H>I&&(I=H)}return{x:h,y:M,width:p-h,height:I-M}}function Ex(e,t,n,r,i,s,l,u,h){var p=m_(u-e,h-t,-i),v=__read(p,2),y=v[0],b=v[1],T=qg(0,0,n,r,y,b),R=ey(n,r,T.x,T.y);R<s?T=ty(n,r,s):R>l&&(T=ty(n,r,l));var M=m_(T.x,T.y,i);return{x:M[0]+e,y:M[1]+t}}function Sx(e,t,n,r,i,s,l,u){var h=(l-s)*u+s,p=v_(e,t,n,r,i,s,l,h),v=Qg(e,t,n,r,i,s,l,h);return L1(Math.atan2(v,p))}var D1=1e-4;function g_(e,t,n,r,i,s){var l=-1,u=1/0,h=[n,r],p=20;s&&s>200&&(p=s/10);for(var v=1/p,y=v/10,b=0;b<=p;b++){var T=b*v,R=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([T])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([T])),!1))],M=ws(h[0],h[1],R[0],R[1]);M<u&&(l=T,u=M)}if(l===0)return{x:e[0],y:t[0]};if(l===1){var I=e.length;return{x:e[I-1],y:t[I-1]}}u=1/0;for(var b=0;b<32&&!(y<D1);b++){var N=l-y,U=l+y,R=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([N])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([N])),!1))],M=ws(h[0],h[1],R[0],R[1]);if(N>=0&&M<u)l=N,u=M;else{var H=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([U])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([U])),!1))],X=ws(h[0],h[1],H[0],H[1]);U<=1&&X<u?(l=U,u=X):y*=.5}}return{x:i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([l])),!1)),y:i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([l])),!1))}}function y_(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var s=e[i],l=t[i],u=e[(i+1)%r],h=t[(i+1)%r];n+=ws(s,l,u,h)}return n/2}function kh(e,t,n,r){return fh([e,n],[t,r])}function lg(e,t,n,r){return ws(e,t,n,r)}function $d(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function Op(e,t,n,r,i,s){var l=(n-e)*(i-e)+(r-t)*(s-t);if(l<0)return ws(e,t,i,s);var u=(n-e)*(n-e)+(r-t)*(r-t);return l>u?ws(n,r,i,s):ny(e,t,n,r,i,s)}function ny(e,t,n,r,i,s){var l=[n-e,r-t];if(om.I6(l,[0,0]))return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t));var u=[-l[1],l[0]];om.Fv(u,u);var h=[i-e,s-t];return Math.abs(om.AK(h,u))}function N1(e,t,n,r){return Math.atan2(r-t,n-e)}function hh(e,t,n,r,i){var s=1-i;return s*s*s*e+3*t*i*s*s+3*n*i*i*s+r*i*i*i}function Dc(e,t,n,r,i){var s=1-i;return 3*(s*s*(t-e)+2*s*i*(n-t)+i*i*(r-n))}function bv(e,t,n,r){var i=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,l=3*t-3*e,u=[],h,p,v;if(il(i,0))il(s,0)||(h=-l/s,h>=0&&h<=1&&u.push(h));else{var y=s*s-4*i*l;il(y,0)?u.push(-s/(2*i)):y>0&&(v=Math.sqrt(y),h=(-s+v)/(2*i),p=(-s-v)/(2*i),h>=0&&h<=1&&u.push(h),p>=0&&p<=1&&u.push(p))}return u}function dm(e,t,n,r,i,s,l,u,h){var p=hh(e,n,i,l,h),v=hh(t,r,s,u,h),y=$d(e,t,n,r,h),b=$d(n,r,i,s,h),T=$d(i,s,l,u,h),R=$d(y.x,y.y,b.x,b.y,h),M=$d(b.x,b.y,T.x,T.y,h);return[[e,t,y.x,y.y,R.x,R.y,p,v],[p,v,M.x,M.y,T.x,T.y,l,u]]}function l0(e,t,n,r,i,s,l,u,h){if(h===0)return y_([e,n,i,l],[t,r,s,u]);var p=dm(e,t,n,r,i,s,l,u,.5),v=__spreadArray(__spreadArray([],__read(p[0]),!1),[h-1],!1),y=__spreadArray(__spreadArray([],__read(p[1]),!1),[h-1],!1);return l0.apply(void 0,__spreadArray([],__read(v),!1))+l0.apply(void 0,__spreadArray([],__read(y),!1))}function xv(e,t,n,r,i,s,l,u){for(var h=[e,l],p=[t,u],v=bv(e,n,i,l),y=bv(t,r,s,u),b=0;b<v.length;b++)h.push(hh(e,n,i,l,v[b]));for(var b=0;b<y.length;b++)p.push(hh(t,r,s,u,y[b]));return fh(h,p)}function Tx(e,t,n,r,i,s,l,u){return l0(e,t,n,r,i,s,l,u,3)}function __(e,t,n,r,i,s,l,u,h,p,v){return g_([e,n,i,l],[t,r,s,u],h,p,hh,v)}function b_(e,t,n,r,i,s,l,u,h,p,v){var y=__(e,t,n,r,i,s,l,u,h,p,v);return ws(y.x,y.y,h,p)}function cg(e,t,n,r,i,s,l,u,h){return{x:hh(e,n,i,l,h),y:hh(t,r,s,u,h)}}function B1(e,t,n,r,i,s,l,u,h){var p=Dc(e,n,i,l,h),v=Dc(t,r,s,u,h);return L1(Math.atan2(v,p))}function dh(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],s=e[r+1],l=ws(i[0],i[1],s[0],s[1]),u={from:i,to:s,length:l};n.push(u),t+=l}return{segments:n,totalLength:t}}function ry(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=ws(r[0],r[1],i[0],i[1])}return t}function ug(e,t){if(t>1||t<0||e.length<2)return null;var n=dh(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var s=0,l=null,u=0;u<r.length;u++){var h=r[u],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){var b=(t-s)/y;l=$d(p[0],p[1],v[0],v[1],b);break}s+=y}return l}function fg(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=dh(e),r=n.segments,i=n.totalLength,s=0,l=0,u=0;u<r.length;u++){var h=r[u],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){l=Math.atan2(v[1]-p[1],v[0]-p[0]);break}s+=y}return l}function Al(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var s=e[i],l=e[i+1],u=Op(s[0],s[1],l[0],l[1],t,n);u<r&&(r=u)}return r}function x_(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return fh(t,n)}function E_(e){return ry(e)}function oS(e,t){return ug(e,t)}function Ax(e,t,n){return Al(e,t,n)}function F1(e,t){return fg(e,t)}function c0(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function aS(e){return x_(e)}function Ls(e){return ry(c0(e))}function Cx(e,t){return ug(c0(e),t)}function sS(e,t,n){return Al(c0(e),t,n)}function Yd(e,t){return fg(c0(e),t)}function u0(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function hg(e,t,n){var r=e+n-2*t;if(il(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function k1(e,t,n,r,i,s,l){var u=u0(e,n,i,l),h=u0(t,r,s,l),p=$d(e,t,n,r,l),v=$d(n,r,i,s,l);return[[e,t,p.x,p.y,u,h],[u,h,v.x,v.y,i,s]]}function Ev(e,t,n,r,i,s,l){if(l===0)return(ws(e,t,n,r)+ws(n,r,i,s)+ws(e,t,i,s))/2;var u=k1(e,t,n,r,i,s,.5),h=u[0],p=u[1];return h.push(l-1),p.push(l-1),Ev.apply(void 0,__spreadArray([],__read(h),!1))+Ev.apply(void 0,__spreadArray([],__read(p),!1))}function iy(e,t,n,r,i,s){var l=hg(e,n,i)[0],u=hg(t,r,s)[0],h=[e,i],p=[t,s];return l!==void 0&&h.push(u0(e,n,i,l)),u!==void 0&&p.push(u0(t,r,s,u)),fh(h,p)}function Ox(e,t,n,r,i,s){return Ev(e,t,n,r,i,s,3)}function lS(e,t,n,r,i,s,l,u){return g_([e,n,i],[t,r,s],l,u,u0)}function Rp(e,t,n,r,i,s,l,u){var h=lS(e,t,n,r,i,s,l,u);return ws(h.x,h.y,l,u)}var V0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:typeof self!="undefined"?self:{},Sv={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(V0,function(){function n($,Q,ce,pe,Re){r($,Q,ce||0,pe||$.length-1,Re||s)}function r($,Q,ce,pe,Re){for(;pe>ce;){if(pe-ce>600){var je=pe-ce+1,Ke=Q-ce+1,ft=Math.log(je),Ye=.5*Math.exp(2*ft/3),it=.5*Math.sqrt(ft*Ye*(je-Ye)/je)*(Ke-je/2<0?-1:1),at=Math.max(ce,Math.floor(Q-Ke*Ye/je+it)),vt=Math.min(pe,Math.floor(Q+(je-Ke)*Ye/je+it));r($,Q,at,vt,Re)}var Vt=$[Q],At=ce,Ut=pe;for(i($,ce,Q),Re($[pe],Vt)>0&&i($,ce,pe);At<Ut;){for(i($,At,Ut),At++,Ut--;Re($[At],Vt)<0;)At++;for(;Re($[Ut],Vt)>0;)Ut--}Re($[ce],Vt)===0?i($,ce,Ut):(Ut++,i($,Ut,pe)),Ut<=Q&&(ce=Ut+1),Q<=Ut&&(pe=Ut-1)}}function i($,Q,ce){var pe=$[Q];$[Q]=$[ce],$[ce]=pe}function s($,Q){return $<Q?-1:$>Q?1:0}var l=function(Q){Q===void 0&&(Q=9),this._maxEntries=Math.max(4,Q),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(Q){var ce=this.data,pe=[];if(!U(Q,ce))return pe;for(var Re=this.toBBox,je=[];ce;){for(var Ke=0;Ke<ce.children.length;Ke++){var ft=ce.children[Ke],Ye=ce.leaf?Re(ft):ft;U(Q,Ye)&&(ce.leaf?pe.push(ft):N(Q,Ye)?this._all(ft,pe):je.push(ft))}ce=je.pop()}return pe},l.prototype.collides=function(Q){var ce=this.data;if(!U(Q,ce))return!1;for(var pe=[];ce;){for(var Re=0;Re<ce.children.length;Re++){var je=ce.children[Re],Ke=ce.leaf?this.toBBox(je):je;if(U(Q,Ke)){if(ce.leaf||N(Q,Ke))return!0;pe.push(je)}}ce=pe.pop()}return!1},l.prototype.load=function(Q){if(!(Q&&Q.length))return this;if(Q.length<this._minEntries){for(var ce=0;ce<Q.length;ce++)this.insert(Q[ce]);return this}var pe=this._build(Q.slice(),0,Q.length-1,0);if(!this.data.children.length)this.data=pe;else if(this.data.height===pe.height)this._splitRoot(this.data,pe);else{if(this.data.height<pe.height){var Re=this.data;this.data=pe,pe=Re}this._insert(pe,this.data.height-pe.height-1,!0)}return this},l.prototype.insert=function(Q){return Q&&this._insert(Q,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(Q,ce){if(!Q)return this;for(var pe=this.data,Re=this.toBBox(Q),je=[],Ke=[],ft,Ye,it;pe||je.length;){if(pe||(pe=je.pop(),Ye=je[je.length-1],ft=Ke.pop(),it=!0),pe.leaf){var at=u(Q,pe.children,ce);if(at!==-1)return pe.children.splice(at,1),je.push(pe),this._condense(je),this}!it&&!pe.leaf&&N(pe,Re)?(je.push(pe),Ke.push(ft),ft=0,Ye=pe,pe=pe.children[0]):Ye?(ft++,pe=Ye.children[ft],it=!1):pe=null}return this},l.prototype.toBBox=function(Q){return Q},l.prototype.compareMinX=function(Q,ce){return Q.minX-ce.minX},l.prototype.compareMinY=function(Q,ce){return Q.minY-ce.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(Q){return this.data=Q,this},l.prototype._all=function(Q,ce){for(var pe=[];Q;)Q.leaf?ce.push.apply(ce,Q.children):pe.push.apply(pe,Q.children),Q=pe.pop();return ce},l.prototype._build=function(Q,ce,pe,Re){var je=pe-ce+1,Ke=this._maxEntries,ft;if(je<=Ke)return ft=H(Q.slice(ce,pe+1)),h(ft,this.toBBox),ft;Re||(Re=Math.ceil(Math.log(je)/Math.log(Ke)),Ke=Math.ceil(je/Math.pow(Ke,Re-1))),ft=H([]),ft.leaf=!1,ft.height=Re;var Ye=Math.ceil(je/Ke),it=Ye*Math.ceil(Math.sqrt(Ke));X(Q,ce,pe,it,this.compareMinX);for(var at=ce;at<=pe;at+=it){var vt=Math.min(at+it-1,pe);X(Q,at,vt,Ye,this.compareMinY);for(var Vt=at;Vt<=vt;Vt+=Ye){var At=Math.min(Vt+Ye-1,vt);ft.children.push(this._build(Q,Vt,At,Re-1))}}return h(ft,this.toBBox),ft},l.prototype._chooseSubtree=function(Q,ce,pe,Re){for(;Re.push(ce),!(ce.leaf||Re.length-1===pe);){for(var je=1/0,Ke=1/0,ft=void 0,Ye=0;Ye<ce.children.length;Ye++){var it=ce.children[Ye],at=T(it),vt=M(Q,it)-at;vt<Ke?(Ke=vt,je=at<je?at:je,ft=it):vt===Ke&&at<je&&(je=at,ft=it)}ce=ft||ce.children[0]}return ce},l.prototype._insert=function(Q,ce,pe){var Re=pe?Q:this.toBBox(Q),je=[],Ke=this._chooseSubtree(Re,this.data,ce,je);for(Ke.children.push(Q),v(Ke,Re);ce>=0&&je[ce].children.length>this._maxEntries;)this._split(je,ce),ce--;this._adjustParentBBoxes(Re,je,ce)},l.prototype._split=function(Q,ce){var pe=Q[ce],Re=pe.children.length,je=this._minEntries;this._chooseSplitAxis(pe,je,Re);var Ke=this._chooseSplitIndex(pe,je,Re),ft=H(pe.children.splice(Ke,pe.children.length-Ke));ft.height=pe.height,ft.leaf=pe.leaf,h(pe,this.toBBox),h(ft,this.toBBox),ce?Q[ce-1].children.push(ft):this._splitRoot(pe,ft)},l.prototype._splitRoot=function(Q,ce){this.data=H([Q,ce]),this.data.height=Q.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(Q,ce,pe){for(var Re,je=1/0,Ke=1/0,ft=ce;ft<=pe-ce;ft++){var Ye=p(Q,0,ft,this.toBBox),it=p(Q,ft,pe,this.toBBox),at=I(Ye,it),vt=T(Ye)+T(it);at<je?(je=at,Re=ft,Ke=vt<Ke?vt:Ke):at===je&&vt<Ke&&(Ke=vt,Re=ft)}return Re||pe-ce},l.prototype._chooseSplitAxis=function(Q,ce,pe){var Re=Q.leaf?this.compareMinX:y,je=Q.leaf?this.compareMinY:b,Ke=this._allDistMargin(Q,ce,pe,Re),ft=this._allDistMargin(Q,ce,pe,je);Ke<ft&&Q.children.sort(Re)},l.prototype._allDistMargin=function(Q,ce,pe,Re){Q.children.sort(Re);for(var je=this.toBBox,Ke=p(Q,0,ce,je),ft=p(Q,pe-ce,pe,je),Ye=R(Ke)+R(ft),it=ce;it<pe-ce;it++){var at=Q.children[it];v(Ke,Q.leaf?je(at):at),Ye+=R(Ke)}for(var vt=pe-ce-1;vt>=ce;vt--){var Vt=Q.children[vt];v(ft,Q.leaf?je(Vt):Vt),Ye+=R(ft)}return Ye},l.prototype._adjustParentBBoxes=function(Q,ce,pe){for(var Re=pe;Re>=0;Re--)v(ce[Re],Q)},l.prototype._condense=function(Q){for(var ce=Q.length-1,pe=void 0;ce>=0;ce--)Q[ce].children.length===0?ce>0?(pe=Q[ce-1].children,pe.splice(pe.indexOf(Q[ce]),1)):this.clear():h(Q[ce],this.toBBox)};function u($,Q,ce){if(!ce)return Q.indexOf($);for(var pe=0;pe<Q.length;pe++)if(ce($,Q[pe]))return pe;return-1}function h($,Q){p($,0,$.children.length,Q,$)}function p($,Q,ce,pe,Re){Re||(Re=H(null)),Re.minX=1/0,Re.minY=1/0,Re.maxX=-1/0,Re.maxY=-1/0;for(var je=Q;je<ce;je++){var Ke=$.children[je];v(Re,$.leaf?pe(Ke):Ke)}return Re}function v($,Q){return $.minX=Math.min($.minX,Q.minX),$.minY=Math.min($.minY,Q.minY),$.maxX=Math.max($.maxX,Q.maxX),$.maxY=Math.max($.maxY,Q.maxY),$}function y($,Q){return $.minX-Q.minX}function b($,Q){return $.minY-Q.minY}function T($){return($.maxX-$.minX)*($.maxY-$.minY)}function R($){return $.maxX-$.minX+($.maxY-$.minY)}function M($,Q){return(Math.max(Q.maxX,$.maxX)-Math.min(Q.minX,$.minX))*(Math.max(Q.maxY,$.maxY)-Math.min(Q.minY,$.minY))}function I($,Q){var ce=Math.max($.minX,Q.minX),pe=Math.max($.minY,Q.minY),Re=Math.min($.maxX,Q.maxX),je=Math.min($.maxY,Q.maxY);return Math.max(0,Re-ce)*Math.max(0,je-pe)}function N($,Q){return $.minX<=Q.minX&&$.minY<=Q.minY&&Q.maxX<=$.maxX&&Q.maxY<=$.maxY}function U($,Q){return Q.minX<=$.maxX&&Q.minY<=$.maxY&&Q.maxX>=$.minX&&Q.maxY>=$.minY}function H($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X($,Q,ce,pe,Re){for(var je=[Q,ce];je.length;)if(ce=je.pop(),Q=je.pop(),!(ce-Q<=pe)){var Ke=Q+Math.ceil((ce-Q)/pe/2)*pe;n($,Ke,Q,ce,Re),je.push(Q,Ke,Ke,ce)}}return l})})(Sv);var f0=Sv.exports,ai;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(ai||(ai={}));var dg;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(dg||(dg={}));var Tv=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),cS=function(){function e(t){this.clipSpaceNearZ=dg.NEGATIVE_ONE,this.plugins=[],this.config=(0,ie.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function pg(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function S_(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Bl(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function RC(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function z5(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function uS(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function oy(e){return e===void 0?0:e>360||e<-360?e%360:e}function Of(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?fr.d9(e):(0,Zl.Z)(e)?fr.al(e,t,n):fr.al(e[0],e[1]||t,e[2]||n)}function ol(e){return e*(Math.PI/180)}function Kd(e){return e*(180/Math.PI)}function MC(e){return e=e%400,e<0&&(e+=400),e/400*360}function j5(e){return e/360}function Rx(e){return 360*e}function V5(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n,u=r*r,h=i*i,p=s*s,v=l+u+h+p,y=n*s-r*i;return y>.499995*v?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):y<-.499995*v?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-s*r)),e[1]=Math.atan2(2*(n*s+r*i),1-2*(h+p)),e[2]=Math.atan2(2*(n*r+i*s),1-2*(u+h))),e}function PC(e,t){var n,r,i=Math.PI*.5,s=(0,ie.CR)(Kr.getScaling(fr.Ue(),t),3),l=s[0],u=s[1],h=s[2],p=Math.asin(-t[2]/l);return p<i?p>-i?(n=Math.atan2(t[6]/u,t[10]/h),r=Math.atan2(t[1]/l,t[0]/l)):(r=0,n=-Math.atan2(t[4]/u,t[5]/u)):(r=0,n=Math.atan2(t[4]/u,t[5]/u)),e[0]=n,e[1]=p,e[2]=r,e}function fS(e,t){return t.length===16?PC(e,t):V5(e,t)}function hS(e,t,n,r,i){var s=Math.cos(e),l=Math.sin(e);return Ia(r*s,i*l,0,-r*l,i*s,0,t,n,1)}function ay(e,t,n,r,i,s,l,u){u===void 0&&(u=!1);var h=2*s/(n-t),p=2*s/(r-i),v=(n+t)/(n-t),y=(r+i)/(r-i),b,T;return u?(b=-l/(l-s),T=-l*s/(l-s)):(b=-(l+s)/(l-s),T=-2*l*s/(l-s)),e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=v,e[9]=y,e[10]=b,e[11]=-1,e[12]=0,e[13]=0,e[14]=T,e[15]=0,e}function dS(e){var t=e[0],n=e[1],r=e[3],i=e[4],s=Math.sqrt(t*t+n*n),l=Math.sqrt(r*r+i*i),u=t*i-n*r;u<0&&(t<i?s=-s:l=-l),s&&(t*=1/s,n*=1/s),l&&(r*=1/l,i*=1/l);var h=Math.atan2(n,t),p=Kd(h);return[e[6],e[7],s,l,p]}var H0=Kr.create(),Uh=Kr.create(),T_=ki.Ue(),Ka=[fr.Ue(),fr.Ue(),fr.Ue()],Mx=fr.Ue();function H5(e,t,n,r,i,s){if(!U1(H0,e)||(Kr.copy(Uh,H0),Uh[3]=0,Uh[7]=0,Uh[11]=0,Uh[15]=1,Math.abs(Kr.determinant(Uh))<1e-8))return!1;var l=H0[3],u=H0[7],h=H0[11],p=H0[12],v=H0[13],y=H0[14],b=H0[15];if(l!==0||u!==0||h!==0){T_[0]=l,T_[1]=u,T_[2]=h,T_[3]=b;var T=Kr.invert(Uh,Uh);if(!T)return!1;Kr.transpose(Uh,Uh),ki.fF(i,T_,Uh)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=p,t[1]=v,t[2]=y,Px(Ka,H0),n[0]=fr.kE(Ka[0]),fr.Fv(Ka[0],Ka[0]),r[0]=fr.AK(Ka[0],Ka[1]),pS(Ka[1],Ka[1],Ka[0],1,-r[0]),n[1]=fr.kE(Ka[1]),fr.Fv(Ka[1],Ka[1]),r[0]/=n[1],r[1]=fr.AK(Ka[0],Ka[2]),pS(Ka[2],Ka[2],Ka[0],1,-r[1]),r[2]=fr.AK(Ka[1],Ka[2]),pS(Ka[2],Ka[2],Ka[1],1,-r[2]),n[2]=fr.kE(Ka[2]),fr.Fv(Ka[2],Ka[2]),r[1]/=n[2],r[2]/=n[2],fr.kC(Mx,Ka[1],Ka[2]),fr.AK(Ka[0],Mx)<0)for(var R=0;R<3;R++)n[R]*=-1,Ka[R][0]*=-1,Ka[R][1]*=-1,Ka[R][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+Ka[0][0]-Ka[1][1]-Ka[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-Ka[0][0]+Ka[1][1]-Ka[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-Ka[0][0]-Ka[1][1]+Ka[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+Ka[0][0]+Ka[1][1]+Ka[2][2],0)),Ka[2][1]>Ka[1][2]&&(s[0]=-s[0]),Ka[0][2]>Ka[2][0]&&(s[1]=-s[1]),Ka[1][0]>Ka[0][1]&&(s[2]=-s[2]),!0}function U1(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function Px(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function pS(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var _u=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){pg(this.center,t),pg(this.halfExtents,n),S_(this.min,this.center,this.halfExtents),Bl(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){Bl(this.center,n,t),RC(this.center,this.center,.5),S_(this.halfExtents,n,t),RC(this.halfExtents,this.halfExtents,.5),pg(this.min,t),pg(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],s=n[2],l=this.halfExtents,u=l[0],h=l[1],p=l[2],v=r-u,y=r+u,b=i-h,T=i+h,R=s-p,M=s+p,I=t.center,N=I[0],U=I[1],H=I[2],X=t.halfExtents,$=X[0],Q=X[1],ce=X[2],pe=N-$,Re=N+$,je=U-Q,Ke=U+Q,ft=H-ce,Ye=H+ce;pe<v&&(v=pe),Re>y&&(y=Re),je<b&&(b=je),Ke>T&&(T=Ke),ft<R&&(R=ft),Ye>M&&(M=Ye),n[0]=(v+y)*.5,n[1]=(b+T)*.5,n[2]=(R+M)*.5,l[0]=(y-v)*.5,l[1]=(T-b)*.5,l[2]=(M-R)*.5,this.min[0]=v,this.min[1]=b,this.min[2]=R,this.max[0]=y,this.max[1]=T,this.max[2]=M}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,s=t.center,l=t.halfExtents,u=n[0],h=n[4],p=n[8],v=n[1],y=n[5],b=n[9],T=n[2],R=n[6],M=n[10],I=Math.abs(u),N=Math.abs(h),U=Math.abs(p),H=Math.abs(v),X=Math.abs(y),$=Math.abs(b),Q=Math.abs(T),ce=Math.abs(R),pe=Math.abs(M);r[0]=n[12]+u*s[0]+h*s[1]+p*s[2],r[1]=n[13]+v*s[0]+y*s[1]+b*s[2],r[2]=n[14]+T*s[0]+R*s[1]+M*s[2],i[0]=I*l[0]+N*l[1]+U*l[2],i[1]=H*l[0]+X*l[1]+$*l[2],i[2]=Q*l[0]+ce*l[1]+pe*l[2],S_(this.min,r,i),Bl(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),s=t.getMin();return r[0]<=i[0]&&n[0]>=s[0]&&r[1]<=i[1]&&n[1]>=s[1]&&r[2]<=i[2]&&n[2]>=s[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=z5([0,0,0],this.getMin(),t.getMin()),i=uS([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?pg([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?pg([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),W5=function(){function e(t,n){this.distance=t||0,this.normal=n||fr.al(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return fr.AK(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/fr.Zh(this.normal);fr.bA(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),s=this.distanceToPoint(n),l=i/(i-s),u=l>=0&&l<=1;return u&&r&&fr.t7(r,t,n,l),u},e}(),pm;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(pm||(pm={}));var G5=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new W5)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,ie.CR)(t,16),r=n[0],i=n[1],s=n[2],l=n[3],u=n[4],h=n[5],p=n[6],v=n[7],y=n[8],b=n[9],T=n[10],R=n[11],M=n[12],I=n[13],N=n[14],U=n[15];fr.t8(this.planes[0].normal,l-r,v-u,R-y),this.planes[0].distance=U-M,fr.t8(this.planes[1].normal,l+r,v+u,R+y),this.planes[1].distance=U+M,fr.t8(this.planes[2].normal,l+i,v+h,R+b),this.planes[2].distance=U+I,fr.t8(this.planes[3].normal,l-i,v-h,R-b),this.planes[3].distance=U-I,fr.t8(this.planes[4].normal,l-s,v-p,R-T),this.planes[4].distance=U-N,fr.t8(this.planes[5].normal,l+s,v+p,R+T),this.planes[5].distance=U+N,this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})},e}(),Yf=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),W0=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),ic="Method not implemented.",w_="Use document.documentElement instead.",IC="Cannot append a destroyed element.",Cl;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})(Cl||(Cl={}));var A_;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(A_||(A_={}));var ud;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(ud||(ud={}));var vS={UPDATED:"updated"},mS=2e-4,gS=function(){function e(){this.clipSpaceNearZ=dg.NEGATIVE_ONE,this.eventEmitter=new ss,this.matrix=Kr.create(),this.right=fr.al(1,0,0),this.up=fr.al(0,1,0),this.forward=fr.al(0,0,1),this.position=fr.al(0,0,1),this.focalPoint=fr.al(0,0,0),this.distanceVector=fr.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Kr.create(),this.projectionMatrixInverse=Kr.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Cl.EXPLORING,this.trackingMode=A_.DEFAULT,this.projectionMode=ud.PERSPECTIVE,this.frustum=new G5,this.orthoMatrix=Kr.create()}return e.prototype.isOrtho=function(){return this.projectionMode===ud.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===Cl.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Cl.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==Cl.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return Kr.invert(Kr.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=Kr.fromTranslation(Kr.create(),[t,n,0]);this.jitteredProjectionMatrix=Kr.multiply(Kr.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setProjectionMatrix=function(t){this.projectionMatrix=t},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===ud.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===ud.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,s,l){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.projectionMode===ud.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===ud.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===ud.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===ud.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,s=r.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(i,s),this.setFocalPoint(i,s),this.setZoom(t),this.rotate(0,0,l);var u=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),h=u.x,p=u.y,v=fr.al(h-i,p-s,0),y=fr.AK(v,this.right)/fr.kE(this.right),b=fr.AK(v,this.up)/fr.kE(this.up),T=(0,ie.CR)(this.getPosition(),2),R=T[0],M=T[1],I=(0,ie.CR)(this.getFocalPoint(),2),N=I[0],U=I[1];return this.setPosition(R-y,M-b),this.setFocalPoint(N-y,U-b),this},e.prototype.setPerspective=function(t,n,r,i){var s;this.projectionMode=ud.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var l=this.near*Math.tan(ol(.5*this.fov))/this.zoom,u=2*l,h=this.aspect*u,p=-.5*h;if(!((s=this.view)===null||s===void 0)&&s.enabled){var v=this.view.fullWidth,y=this.view.fullHeight;p+=this.view.offsetX*h/v,l-=this.view.offsetY*u/y,h*=this.view.width/v,u*=this.view.height/y}return ay(this.projectionMatrix,p,p+h,l-u,l,t,this.far,this.clipSpaceNearZ===dg.ZERO),Kr.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,s,l){var u;this.projectionMode=ud.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=s,this.far=l;var h=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),v=(this.rright+this.left)/2,y=(this.top+this.bottom)/2,b=v-h,T=v+h,R=y+p,M=y-p;if(!((u=this.view)===null||u===void 0)&&u.enabled){var I=(this.rright-this.left)/this.view.fullWidth/this.zoom,N=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=I*this.view.offsetX,T=b+I*this.view.width,R-=N*this.view.offsetY,M=R-N*this.view.height}return this.clipSpaceNearZ===dg.NEGATIVE_ONE?Kr.ortho(this.projectionMatrix,b,T,R,M,s,l):Kr.orthoZO(this.projectionMatrix,b,T,R,M,s,l),Kr.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Of(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=fr.al(0,1,0);if(this.focalPoint=Of(t,n,r),this.trackingMode===A_.CINEMATIC){var s=fr.$X(fr.Ue(),this.focalPoint,this.position);t=s[0],n=s[1],r=s[2];var l=fr.kE(s),u=Kd(Math.asin(n/l)),h=90+Kd(Math.atan2(r,t)),p=Kr.create();Kr.rotateY(p,p,ol(h)),Kr.rotateX(p,p,ol(u)),i=fr.fF(fr.Ue(),[0,1,0],p)}return Kr.invert(this.matrix,Kr.lookAt(Kr.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<mS&&(this.distance=mS),this.dollyingStep=this.distance/100;var n=fr.Ue();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=oy(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=oy(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=oy(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=Xo($i(),[0,0,1],ol(this.roll));Kr.identity(this.matrix);var n=Xo($i(),[1,0,0],ol((this.rotateWorld&&this.type!==Cl.TRACKING||this.type===Cl.TRACKING?1:-1)*this.elevation)),r=Xo($i(),[0,1,0],ol((this.rotateWorld&&this.type!==Cl.TRACKING||this.type===Cl.TRACKING?1:-1)*this.azimuth)),i=nc($i(),r,n);i=nc($i(),i,t);var s=Kr.fromQuat(Kr.create(),i);this.type===Cl.ORBITING||this.type===Cl.EXPLORING?(Kr.translate(this.matrix,this.matrix,this.focalPoint),Kr.multiply(this.matrix,this.matrix,s),Kr.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Cl.TRACKING&&(Kr.translate(this.matrix,this.matrix,this.position),Kr.multiply(this.matrix,this.matrix,s))},e.prototype._setPosition=function(t,n,r){this.position=Of(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){fr.JG(this.right,Of(ki.fF(ki.Ue(),[1,0,0,0],this.matrix))),fr.JG(this.up,Of(ki.fF(ki.Ue(),[0,1,0,0],this.matrix))),fr.JG(this.forward,Of(ki.fF(ki.Ue(),[0,0,1,0],this.matrix))),fr.Fv(this.right,this.right),fr.Fv(this.up,this.up),fr.Fv(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=fr.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Cl.TRACKING?(this.elevation=Kd(Math.asin(n/i)),this.azimuth=Kd(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=Kd(Math.asin(n/i)),this.azimuth=Kd(Math.atan2(-t,-r))):(this.elevation=-Kd(Math.asin(n/i)),this.azimuth=-Kd(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){fr.JG(this.position,Of(ki.fF(ki.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){fr.kK(this.distanceVector,[0,0,-this.distance],ru(Ca(),this.matrix)),fr.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=fr.$X(fr.Ue(),this.focalPoint,this.position),this.distance=fr.kE(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===ud.ORTHOGRAPHIC){var t=this.position,n=Xo($i(),[0,0,1],-this.roll*Math.PI/180);Kr.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,fr.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),fr.al(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=Kr.multiply(Kr.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(vS.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(ic)},e.prototype.pan=function(t,n){throw new Error(ic)},e.prototype.dolly=function(t){throw new Error(ic)},e.prototype.createLandmark=function(t,n){throw new Error(ic)},e.prototype.gotoLandmark=function(t,n){throw new Error(ic)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(ic)},e}();function Rf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,r);return n.cache=l.set(s,u)||l,u};return n.cache=new(Rf.Cache||Map),n}Rf.Cache=Map;var _o;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(_o||(_o={}));var xc;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(xc||(xc={}));var yS;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(yS||(yS={}));var Ix;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Ix||(Ix={}));var Lx;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Lx||(Lx={}));var LC=[{name:"em",unit_type:_o.kEms},{name:"px",unit_type:_o.kPixels},{name:"deg",unit_type:_o.kDegrees},{name:"rad",unit_type:_o.kRadians},{name:"grad",unit_type:_o.kGradians},{name:"ms",unit_type:_o.kMilliseconds},{name:"s",unit_type:_o.kSeconds},{name:"rem",unit_type:_o.kRems},{name:"turn",unit_type:_o.kTurns}],vm;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(vm||(vm={}));var DC=function(e){return LC.find(function(t){return t.name===e}).unit_type},NC=function(e){return e?e==="number"?_o.kNumber:e==="percent"||e==="%"?_o.kPercentage:DC(e):_o.kUnknown},_S=function(e){switch(e){case _o.kNumber:case _o.kInteger:return xc.kUNumber;case _o.kPercentage:return xc.kUPercent;case _o.kPixels:return xc.kULength;case _o.kMilliseconds:case _o.kSeconds:return xc.kUTime;case _o.kDegrees:case _o.kRadians:case _o.kGradians:case _o.kTurns:return xc.kUAngle;default:return xc.kUOther}},BC=function(e){switch(e){case xc.kUNumber:return _o.kNumber;case xc.kULength:return _o.kPixels;case xc.kUPercent:return _o.kPercentage;case xc.kUTime:return _o.kSeconds;case xc.kUAngle:return _o.kDegrees;default:return _o.kUnknown}},bS=function(e){var t=1;switch(e){case _o.kPixels:case _o.kDegrees:case _o.kSeconds:break;case _o.kMilliseconds:t=.001;break;case _o.kRadians:t=180/Math.PI;break;case _o.kGradians:t=.9;break;case _o.kTurns:t=360;break}return t},Dx=function(e){switch(e){case _o.kNumber:case _o.kInteger:return"";case _o.kPercentage:return"%";case _o.kEms:return"em";case _o.kRems:return"rem";case _o.kPixels:return"px";case _o.kDegrees:return"deg";case _o.kRadians:return"rad";case _o.kGradians:return"grad";case _o.kMilliseconds:return"ms";case _o.kSeconds:return"s";case _o.kTurns:return"turn"}return""},C_=function(){function e(){}return e.isAngle=function(t){return t===_o.kDegrees||t===_o.kRadians||t===_o.kGradians||t===_o.kTurns},e.isLength=function(t){return t>=_o.kEms&&t<_o.kDegrees},e.isRelativeUnit=function(t){return t===_o.kPercentage||t===_o.kEms||t===_o.kRems},e.isTime=function(t){return t===_o.kSeconds||t===_o.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(Ix.kNo,Lx.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=vm.kUnitType&&this.getType()<=vm.kClampType},e}(),FC=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return vm.kColorType},t.prototype.to=function(n){return this},t}(C_),G0;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(G0||(G0={}));var z1=function(e){(0,ie.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return vm.kColorType},t}(C_),fd=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return vm.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(C_),kC=Rf(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),xS=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function UC(e){if(!e)throw new Error}function O_(e){return typeof e=="function"}function ES(e){return typeof e=="symbol"}var Z5=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},Nx={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},SS=Rf(function(e){var t=kC(e),n=Nx[t];return t=(n==null?void 0:n.alias)||t,t}),zC=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(UC(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},Bx=function(e){return BC(_S(e))},Fl=function(e){(0,ie.ZT)(t,e);function t(n,r){r===void 0&&(r=_o.kNumber);var i=e.call(this)||this,s;return typeof r=="string"?s=NC(r):s=r,i.unit=s,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return vm.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=Bx(this.unit);if(r!==Bx(n)||r===_o.kUnknown)return null;var i=bS(this.unit)/bS(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var s;switch(this.unit){case _o.kUnknown:break;case _o.kInteger:s=Number(this.value).toFixed(0);break;case _o.kNumber:case _o.kPercentage:case _o.kEms:case _o.kRems:case _o.kPixels:case _o.kDegrees:case _o.kRadians:case _o.kGradians:case _o.kMilliseconds:case _o.kSeconds:case _o.kTurns:{var l=-999999,u=999999,h=this.value,p=Dx(this.unit);if(h<l||h>u){var v=Dx(this.unit);!Number.isFinite(h)||Number.isNaN(h)?s=zC(h,v):s=h+(v||"")}else s="".concat(h).concat(p)}}return i+=s,i},t}(C_),bu=new Fl(0,"px");new Fl(1,"px");var Mp=new Fl(0,"deg"),Fx=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var u=e.call(this,"rgb")||this;return u.r=n,u.g=r,u.b=i,u.alpha=s,u.isNone=l,u}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(FC),Ec=new fd("unset"),jC=new fd("initial"),VC=new fd("inherit"),TS={"":Ec,unset:Ec,initial:jC,inherit:VC},kx=function(e){return TS[e]||(TS[e]=new fd(e)),TS[e]},sy=new Fx(0,0,0,0,!0),wS=new Fx(0,0,0,0),HC=Rf(function(e,t,n,r){return new Fx(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),Yl=function(e,t){return t===void 0&&(t=_o.kNumber),new Fl(e,t)};new Fl(50,"%");var Ux;(function(e){e[e.Standard=0]="Standard"})(Ux||(Ux={}));var ly;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(ly||(ly={}));var zx={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new W0(0,0,0,0)},Co;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Co||(Co={}));function WC(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var AS=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(Vt){throw new Error(t+": "+Vt)}function r(){var Vt=i();return t.length>0&&n("Invalid input not EOF"),Vt}function i(){return H(s)}function s(){return l("linear-gradient",e.linearGradient,h)||l("repeating-linear-gradient",e.repeatingLinearGradient,h)||l("radial-gradient",e.radialGradient,y)||l("repeating-radial-gradient",e.repeatingRadialGradient,y)||l("conic-gradient",e.conicGradient,y)}function l(Vt,At,Ut){return u(At,function(Sn){var Vn=Ut();return Vn&&(at(e.comma)||n("Missing comma before color stops")),{type:Vt,orientation:Vn,colorStops:H(X)}})}function u(Vt,At){var Ut=at(Vt);if(Ut){at(e.startCall)||n("Missing (");var Sn=At(Ut);return at(e.endCall)||n("Missing )"),Sn}}function h(){return p()||v()}function p(){return it("directional",e.sideOrCorner,1)}function v(){return it("angular",e.angleValue,1)}function y(){var Vt,At=b(),Ut;return At&&(Vt=[],Vt.push(At),Ut=t,at(e.comma)&&(At=b(),At?Vt.push(At):t=Ut)),Vt}function b(){var Vt=T()||R();if(Vt)Vt.at=I();else{var At=M();if(At){Vt=At;var Ut=I();Ut&&(Vt.at=Ut)}else{var Sn=N();Sn&&(Vt={type:"default-radial",at:Sn})}}return Vt}function T(){var Vt=it("shape",/^(circle)/i,0);return Vt&&(Vt.style=Ye()||M()),Vt}function R(){var Vt=it("shape",/^(ellipse)/i,0);return Vt&&(Vt.style=Ke()||M()),Vt}function M(){return it("extent-keyword",e.extentKeywords,1)}function I(){if(it("position",/^at/,0)){var Vt=N();return Vt||n("Missing positioning value"),Vt}}function N(){var Vt=U();if(Vt.x||Vt.y)return{type:"position",value:Vt}}function U(){return{x:Ke(),y:Ke()}}function H(Vt){var At=Vt(),Ut=[];if(At)for(Ut.push(At);at(e.comma);)At=Vt(),At?Ut.push(At):n("One extra comma");return Ut}function X(){var Vt=$();return Vt||n("Expected color definition"),Vt.length=Ke(),Vt}function $(){return ce()||Re()||pe()||Q()}function Q(){return it("literal",e.literalColor,0)}function ce(){return it("hex",e.hexColor,1)}function pe(){return u(e.rgbColor,function(){return{type:"rgb",value:H(je)}})}function Re(){return u(e.rgbaColor,function(){return{type:"rgba",value:H(je)}})}function je(){return at(e.number)[1]}function Ke(){return it("%",e.percentageValue,1)||ft()||Ye()}function ft(){return it("position-keyword",e.positionKeywords,1)}function Ye(){return it("px",e.pixelValue,1)||it("em",e.emValue,1)}function it(Vt,At,Ut){var Sn=at(At);if(Sn)return{type:Vt,value:Sn[Ut]}}function at(Vt){var At=/^[\n\r\t\s]+/.exec(t);At&&vt(At[0].length);var Ut=Vt.exec(t);return Ut&&vt(Ut[0].length),Ut}function vt(Vt){t=t.substring(Vt)}return function(Vt){return t=Vt,r()}}();function GC(e,t,n,r){var i=ol(r.value),s=0,l=0,u=s+t/2,h=l+n/2,p=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),v=e[0]+u-Math.cos(i)*p/2,y=e[1]+h-Math.sin(i)*p/2,b=e[0]+u+Math.cos(i)*p/2,T=e[1]+h+Math.sin(i)*p/2;return{x1:v,y1:y,x2:b,y2:T}}function ZC(e,t,n,r,i,s){var l=r.value,u=i.value;r.unit===_o.kPercentage&&(l=r.value/100*t),i.unit===_o.kPercentage&&(u=i.value/100*n);var h=Math.max(Js([0,0],[l,u]),Js([0,n],[l,u]),Js([t,n],[l,u]),Js([t,0],[l,u]));return s&&(s instanceof Fl?h=s.value:s instanceof fd&&(s.value==="closest-side"?h=Math.min(l,t-l,u,n-u):s.value==="farthest-side"?h=Math.max(l,t-l,u,n-u):s.value==="closest-corner"&&(h=Math.min(Js([0,0],[l,u]),Js([0,n],[l,u]),Js([t,n],[l,u]),Js([t,0],[l,u]))))),{x:l+e[0],y:u+e[1],r:h}}var CS=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,OS=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,jx=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,R_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function XC(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var s=0,l=Number(e[0].length.value),u=1;u<i;u++){var h=(r=e[u].length)===null||r===void 0?void 0:r.value;if(!(0,xa.Z)(h)&&!(0,xa.Z)(l)){for(var p=1;p<u-s;p++)e[s+p].length={type:"%",value:"".concat(l+(Number(h)-l)*p/(u-s))};s=u,l=Number(h)}}}var $C={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},YC=Rf(function(e){var t;return e.type==="angular"?t=Number(e.value):t=$C[e.value]||0,Yl(t,"deg")}),RS=Rf(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var s=e.value,l=s.x,u=s.y;(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?t=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),(u==null?void 0:u.type)==="position-keyword"&&(u.value==="left"?t=0:u.value==="center"?n=50:u.value==="right"?t=100:u.value==="top"?n=0:u.value==="bottom"&&(n=100)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(r=l==null?void 0:l.type,t=Number(l.value)),((u==null?void 0:u.type)==="px"||(u==null?void 0:u.type)==="%"||(u==null?void 0:u.type)==="em")&&(i=u==null?void 0:u.type,n=Number(u.value))}return{cx:Yl(t,r),cy:Yl(n,i)}}),MS=Rf(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=AS(e);return n.map(function(u){var h=u.type,p=u.orientation,v=u.colorStops;XC(v);var y=v.map(function(H){return{offset:Yl(Number(H.length.value),"%"),color:WC(H)}});if(h==="linear-gradient")return new z1(G0.LinearGradient,{angle:p?YC(p):Mp,steps:y});if(h==="radial-gradient"&&(p||(p=[{type:"shape",value:"circle"}]),p[0].type==="shape"&&p[0].value==="circle")){var b=RS(p[0].at),T=b.cx,R=b.cy,M=void 0;if(p[0].style){var I=p[0].style,N=I.type,U=I.value;N==="extent-keyword"?M=kx(U):M=Yl(U,N)}return new z1(G0.RadialGradient,{cx:T,cy:R,size:M,steps:y})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=CS.exec(e);if(i){var s=((t=i[2].match(R_))===null||t===void 0?void 0:t.map(function(u){return u.split(":")}))||[];return[new z1(G0.LinearGradient,{angle:Yl(parseFloat(i[1]),"deg"),steps:s.map(function(u){var h=(0,ie.CR)(u,2),p=h[0],v=h[1];return{offset:Yl(Number(p)*100,"%"),color:v}})})]}}else if(r==="r"){var l=PS(e);if(l)if(c(l))e=l;else return[new z1(G0.RadialGradient,l)]}else if(r==="p")return KC(e)}});function PS(e){var t,n=OS.exec(e);if(n){var r=((t=n[4].match(R_))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:Yl(50,"%"),cy:Yl(50,"%"),steps:r.map(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1];return{offset:Yl(Number(l)*100,"%"),color:u}})}}return null}function KC(e){var t=jx.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function X5(e){return!!e.type&&!!e.value}function M_(e){return e&&!!e.image}function j1(e){return e&&!(0,xa.Z)(e.r)&&!(0,xa.Z)(e.g)&&!(0,xa.Z)(e.b)}var Z0=Rf(function(e){if(M_(e))return(0,ie.pi)({repetition:"repeat"},e);if((0,xa.Z)(e)&&(e=""),e==="transparent")return wS;if(e==="currentColor")e="black";else if(e==="none")return sy;var t=MS(e);if(t)return t;var n=z0(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),HC.apply(void 0,(0,ie.ev)([],(0,ie.CR)(r),!1))});function IS(e,t){if(!(!j1(e)||!j1(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,d.Z)(r[i],0,255));return r[3]=(0,d.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function wv(e,t){if((0,xa.Z)(t))return Yl(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return Yl(Number(t),"px");if("deg".search(e)>=0)return Yl(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return Yl(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var Vx=function(e){return wv(new RegExp("px","g"),e)},LS=Rf(Vx),qC=function(e){return wv(new RegExp("%","g"),e)};Rf(qC);var vg=function(e){return(0,Zl.Z)(e)||isFinite(Number(e))?Yl(Number(e)||0,"px"):wv(new RegExp("px|%|em|rem","g"),e)},cy=Rf(vg),Hx=function(e){return wv(new RegExp("deg|rad|grad|turn","g"),e)},DS=Rf(Hx);function QC(e,t,n,r,i){i===void 0&&(i=0);var s="",l=e.value||0,u=t.value||0,h=Bx(e.unit),p=e.convertTo(h),v=t.convertTo(h);return p&&v?(l=p.value,u=v.value,s=Dx(e.unit)):(Fl.isLength(e.unit)||Fl.isLength(t.unit))&&(l=qd(e,i,n),u=qd(t,i,n),s="px"),[l,u,function(y){return r&&(y=Math.max(y,0)),y+s}]}function hd(e){var t=0;return e.unit===_o.kDegrees?t=e.value:e.unit===_o.kRadians?t=Kd(Number(e.value)):e.unit===_o.kTurns&&(t=Rx(Number(e.value))),t}function NS(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):c(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,Zl.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function BS(e){return c(e)?e.split(" ").map(function(t){return cy(t)}):e.map(function(t){return cy(t.toString())})}function qd(e,t,n,r){if(r===void 0&&(r=!1),e.unit===_o.kPixels)return Number(e.value);if(e.unit===_o.kPercentage&&n){var i=n.nodeName===ai.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var JC=function(e){return wv(/deg|rad|grad|turn|px|%/g,e)},eO=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function FS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,eO.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(s){return JC(s)||Z0(s)})}),t.lastIndex===e.length)return n}return[]}function kS(e){return e.toString()}var uy=function(e){return typeof e=="number"?Yl(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?Yl(Number(e)):Yl(0)},mg=Rf(uy);Rf(function(e){return c(e)?e.split(" ").map(mg):e.map(mg)});function Wx(e,t){return[e,t,kS]}function Gx(e,t){return function(n,r){return[n,r,function(i){return kS((0,d.Z)(i,e,t))}]}}function US(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function Zx(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=Ya(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function tO(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=E_(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function nO(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var s=n[0],l=[r[1],r[2]],u=void 0;s==="L"||s==="M"?u=[n[1],n[2]]:(s==="C"||s==="A"||s==="Q")&&(u=[n[n.length-2],n[n.length-1]]),u&&V1(l,u)&&(e.splice(t,1),t--)}}}function rO(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],s=i[0];if(s==="C"||s==="A"||s==="Q"){t=!0;break}}return t}function $5(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var s=e[i],l=s[0];l==="M"?(r.length&&(n.push(r),r=[]),r.push([s[1],s[2]])):l==="Z"?r.length&&(t.push(r),r=[]):r.push([s[1],s[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function V1(e,t){return e[0]===t[0]&&e[1]===t[1]}function Xx(e,t){for(var n=[],r=[],i=[],s=0;s<e.length;s++){var l=e[s],u=l.currentPoint,h=l.params,p=l.prePoint,v=void 0;switch(l.command){case"Q":v=iy(p[0],p[1],h[1],h[2],h[3],h[4]);break;case"C":v=xv(p[0],p[1],h[1],h[2],h[3],h[4],h[5],h[6]);break;case"A":var y=l.arcParams;v=sg(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:n.push(u[0]),r.push(u[1]);break}v&&(l.box=v,n.push(v.x,v.x+v.width),r.push(v.y,v.y+v.height)),t&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&i.push(l)}n=n.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0}),r=r.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0});var b=qa(n),T=qa(r),R=Vo(n),M=Vo(r);if(i.length===0)return{x:b,y:T,width:R-b,height:M-T};for(var s=0;s<i.length;s++){var l=i[s],u=l.currentPoint,I=void 0;u[0]===b?(I=H1(l,t),b=b-I.xExtra):u[0]===R&&(I=H1(l,t),R=R+I.xExtra),u[1]===T?(I=H1(l,t),T=T-I.yExtra):u[1]===M&&(I=H1(l,t),M=M+I.yExtra)}return{x:b,y:T,width:R-b,height:M-T}}function H1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,s=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),u=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),h=Math.acos((s+l-u)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!h||Math.sin(h)===0||il(h,0))return{xExtra:0,yExtra:0};var p=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),v=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));p=p>Math.PI/2?Math.PI-p:p,v=v>Math.PI/2?Math.PI-v:v;var y={xExtra:Math.cos(h/2-p)*(t/2*(1/Math.sin(h/2)))-t/2||0,yExtra:Math.cos(v-h/2)*(t/2*(1/Math.sin(h/2)))-t/2||0};return y}function zS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var jS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,s=i*Math.acos(n/r);return s},VS=function(e,t,n,r,i,s,l,u){t=Math.abs(t),n=Math.abs(n),r=Nl(r,360);var h=ol(r);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(e.x-l.x)/2,v=(e.y-l.y)/2,y={x:Math.cos(h)*p+Math.sin(h)*v,y:-Math.sin(h)*p+Math.cos(h)*v},b=Math.pow(y.x,2)/Math.pow(t,2)+Math.pow(y.y,2)/Math.pow(n,2);b>1&&(t=Math.sqrt(b)*t,n=Math.sqrt(b)*n);var T=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(y.y,2)-Math.pow(n,2)*Math.pow(y.x,2),R=Math.pow(t,2)*Math.pow(y.y,2)+Math.pow(n,2)*Math.pow(y.x,2),M=T/R;M=M<0?0:M;var I=(i!==s?1:-1)*Math.sqrt(M),N={x:I*(t*y.y/n),y:I*(-(n*y.x)/t)},U={x:Math.cos(h)*N.x-Math.sin(h)*N.y+(e.x+l.x)/2,y:Math.sin(h)*N.x+Math.cos(h)*N.y+(e.y+l.y)/2},H={x:(y.x-N.x)/t,y:(y.y-N.y)/n},X=jS({x:1,y:0},H),$={x:(-y.x-N.x)/t,y:(-y.y-N.y)/n},Q=jS(H,$);!s&&Q>0?Q-=2*Math.PI:s&&Q<0&&(Q+=2*Math.PI),Q%=2*Math.PI;var ce=X+Q*u,pe=t*Math.cos(ce),Re=n*Math.sin(ce),je={x:Math.cos(h)*pe-Math.sin(h)*Re+U.x,y:Math.sin(h)*pe+Math.cos(h)*Re+U.y,ellipticalArcStartAngle:X,ellipticalArcEndAngle:X+Q,ellipticalArcAngle:ce,ellipticalArcCenter:U,resultantRx:t,resultantRy:n};return je};function iO(e){for(var t=[],n=null,r=null,i=null,s=0,l=e.length,u=0;u<l;u++){var h=e[u];r=e[u+1];var p=h[0],v={command:p,prePoint:n,params:h,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(p){case"M":i=[h[1],h[2]],s=u;break;case"A":var y=oO(n,h);v.arcParams=y;break}if(p==="Z")n=i,r=e[s+1];else{var b=h.length;n=[h[b-2],h[b-1]]}r&&r[0]==="Z"&&(r=e[s],t[s]&&(t[s].prePoint=n)),v.currentPoint=n,t[s]&&V1(n,t[s].currentPoint)&&(t[s].prePoint=v.prePoint);var T=r?[r[r.length-2],r[r.length-1]]:null;v.nextPoint=T;var R=v.prePoint;if(["L","H","V"].includes(p))v.startTangent=[R[0]-n[0],R[1]-n[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]];else if(p==="Q"){var M=[h[1],h[2]];v.startTangent=[R[0]-M[0],R[1]-M[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]]}else if(p==="T"){var I=t[u-1],M=zS(I.currentPoint,R);I.command==="Q"?(v.command="Q",v.startTangent=[R[0]-M[0],R[1]-M[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]]):(v.command="TL",v.startTangent=[R[0]-n[0],R[1]-n[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]])}else if(p==="C"){var N=[h[1],h[2]],U=[h[3],h[4]];v.startTangent=[R[0]-N[0],R[1]-N[1]],v.endTangent=[n[0]-U[0],n[1]-U[1]],v.startTangent[0]===0&&v.startTangent[1]===0&&(v.startTangent=[N[0]-U[0],N[1]-U[1]]),v.endTangent[0]===0&&v.endTangent[1]===0&&(v.endTangent=[U[0]-N[0],U[1]-N[1]])}else if(p==="S"){var I=t[u-1],N=zS(I.currentPoint,R),U=[h[1],h[2]];I.command==="C"?(v.command="C",v.startTangent=[R[0]-N[0],R[1]-N[1]],v.endTangent=[n[0]-U[0],n[1]-U[1]]):(v.command="SQ",v.startTangent=[R[0]-U[0],R[1]-U[1]],v.endTangent=[n[0]-U[0],n[1]-U[1]])}else if(p==="A"){var H=fy(v,0),X=H.x,$=H.y,Q=fy(v,1,!1),ce=Q.x,pe=Q.y;v.startTangent=[X,$],v.endTangent=[ce,pe]}t.push(v)}return t}function fy(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,s=i===void 0?0:i,l=r.ry,u=l===void 0?0:l,h=r.xRotation,p=r.arcFlag,v=r.sweepFlag,y=VS({x:e.prePoint[0],y:e.prePoint[1]},s,u,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},t),b=VS({x:e.prePoint[0],y:e.prePoint[1]},s,u,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),T=b.x-y.x,R=b.y-y.y,M=Math.sqrt(T*T+R*R);return{x:-T/M,y:-R/M}}function mm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $x(e,t){return mm(e)*mm(t)?(e[0]*t[0]+e[1]*t[1])/(mm(e)*mm(t)):1}function HS(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos($x(e,t))}function oO(e,t){var n=t[1],r=t[2],i=Nl(ol(t[3]),Math.PI*2),s=t[4],l=t[5],u=e[0],h=e[1],p=t[6],v=t[7],y=Math.cos(i)*(u-p)/2+Math.sin(i)*(h-v)/2,b=-1*Math.sin(i)*(u-p)/2+Math.cos(i)*(h-v)/2,T=y*y/(n*n)+b*b/(r*r);T>1&&(n*=Math.sqrt(T),r*=Math.sqrt(T));var R=n*n*(b*b)+r*r*(y*y),M=R?Math.sqrt((n*n*(r*r)-R)/R):1;s===l&&(M*=-1),isNaN(M)&&(M=0);var I=r?M*n*b/r:0,N=n?M*-r*y/n:0,U=(u+p)/2+Math.cos(i)*I-Math.sin(i)*N,H=(h+v)/2+Math.sin(i)*I+Math.cos(i)*N,X=[(y-I)/n,(b-N)/r],$=[(-1*y-I)/n,(-1*b-N)/r],Q=HS([1,0],X),ce=HS(X,$);return $x(X,$)<=-1&&(ce=Math.PI),$x(X,$)>=1&&(ce=0),l===0&&ce>0&&(ce=ce-2*Math.PI),l===1&&ce<0&&(ce=ce+2*Math.PI),{cx:U,cy:H,rx:V1(e,[p,v])?0:n,ry:V1(e,[p,v])?0:r,startAngle:Q,endAngle:Q+ce,xRotation:i,arcFlag:s,sweepFlag:l}}function WS(e,t,n){return e.reduce(function(r,i){var s="";if(i[0]==="M"||i[0]==="L"){var l=fr.al(i[1],i[2],0);n&&fr.fF(l,l,n),s="".concat(i[0]).concat(l[0],",").concat(l[1])}else if(i[0]==="Z")s=i[0];else if(i[0]==="C"){var u=fr.al(i[1],i[2],0),h=fr.al(i[3],i[4],0),p=fr.al(i[5],i[6],0);n&&(fr.fF(u,u,n),fr.fF(h,h,n),fr.fF(p,p,n)),s="".concat(i[0]).concat(u[0],",").concat(u[1],",").concat(h[0],",").concat(h[1],",").concat(p[0],",").concat(p[1])}else if(i[0]==="A"){var v=fr.al(i[6],i[7],0);n&&fr.fF(v,v,n),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(v[0],",").concat(v[1])}else if(i[0]==="Q"){var u=fr.al(i[1],i[2],0),h=fr.al(i[3],i[4],0);n&&(fr.fF(u,u,n),fr.fF(h,h,n)),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=s},"")}function aO(e,t,n,r){return[["M",e,t],["L",n,r]]}function GS(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,s=e*i,l=t*i,u=n-e,h=n+e,p=r-t,v=r+t;return[["M",u,r],["C",u,r-l,n-s,p,n,p],["C",n+s,p,h,r-l,h,r],["C",h,r+l,n+s,v,n,v],["C",n-s,v,u,r+l,u,r],["Z"]]}function sO(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function lO(e,t,n,r,i){if(i){var s=(0,ie.CR)(i,4),l=s[0],u=s[1],h=s[2],p=s[3],v=e>0?1:-1,y=t>0?1:-1,b=v+y!==0?1:0;return[["M",v*l+n,r],["L",e-v*u+n,r],u?["A",u,u,0,0,b,e+n,y*u+r]:null,["L",e+n,t-y*h+r],h?["A",h,h,0,0,b,e+n-v*h,t+r]:null,["L",n+v*p,t+r],p?["A",p,p,0,0,b,n,t+r-y*p]:null,["L",n,y*l+r],l?["A",l,l,0,0,b,v*l+n,r]:null,["Z"]].filter(function(T){return T})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function ZS(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case ai.LINE:var r=e.parsedStyle,i=r.x1,s=i===void 0?0:i,l=r.y1,u=l===void 0?0:l,h=r.x2,p=h===void 0?0:h,v=r.y2,y=v===void 0?0:v;n=aO(s,u,p,y);break;case ai.CIRCLE:{var b=e.parsedStyle,T=b.r,R=T===void 0?0:T,M=b.cx,I=M===void 0?0:M,N=b.cy,U=N===void 0?0:N;n=GS(R,R,I,U);break}case ai.ELLIPSE:{var H=e.parsedStyle,X=H.rx,$=X===void 0?0:X,Q=H.ry,ce=Q===void 0?0:Q,pe=H.cx,I=pe===void 0?0:pe,Re=H.cy,U=Re===void 0?0:Re;n=GS($,ce,I,U);break}case ai.POLYLINE:case ai.POLYGON:var je=e.parsedStyle.points;n=sO(je.points,e.nodeName===ai.POLYGON);break;case ai.RECT:var Ke=e.parsedStyle,ft=Ke.width,Ye=ft===void 0?0:ft,it=Ke.height,at=it===void 0?0:it,vt=Ke.x,Vt=vt===void 0?0:vt,At=Ke.y,Ut=At===void 0?0:At,Sn=Ke.radius,Vn=Sn&&Sn.some(function(or){return or!==0});n=lO(Ye,at,Vt,Ut,Vn&&Sn.map(function(or){return(0,d.Z)(or,0,Math.min(Math.abs(Ye)/2,Math.abs(at)/2))}));break;case ai.PATH:var rr=e.parsedStyle.d.absolutePath;n=(0,ie.ev)([],(0,ie.CR)(rr),!1);break}if(n.length)return WS(n,e,t)}function Y5(e,t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var s=e.map(function(l,u){var h=l[0],p=e[u+1],v=u===0&&(t!==0||n!==0),y=(u===e.length-1||p&&(p[0]==="M"||p[0]==="Z"))&&r!==0&&i!==0;switch(h){case"M":return v?"M ".concat(l[1]+t,",").concat(l[2]+n," L ").concat(l[1],",").concat(l[2]):"M ".concat(l[1],",").concat(l[2]);case"L":return"L ".concat(l[1]+(y?r:0),",").concat(l[2]+(y?i:0));case"Q":return"Q ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4])+(y?" L ".concat(l[3]+r,",").concat(l[4]+i):"");case"C":return"C ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4],",").concat(l[5]," ").concat(l[6])+(y?" L ".concat(l[5]+r,",").concat(l[6]+i):"");case"A":return"A ".concat(l[1]," ").concat(l[2]," ").concat(l[3]," ").concat(l[4]," ").concat(l[5]," ").concat(l[6]," ").concat(l[7])+(y?" L ".concat(l[6]+r,",").concat(l[7]+i):"");case"Z":return"Z"}}).join(" ");return~s.indexOf("NaN")?"":s}var XS=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Nr(e)}catch(b){t=Nr(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}nO(t);var n=rO(t),r=$5(t),i=r.polygons,s=r.polylines,l=iO(t),u=Xx(l,0),h=u.x,p=u.y,v=u.width,y=u.height;return{absolutePath:t,hasArc:n,segments:l,polygons:i,polylines:s,totalLength:0,rect:{x:Number.isFinite(h)?h:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(v)?v:0,height:Number.isFinite(y)?y:0}}},cO=Rf(XS);function Yx(e){return c(e)?cO(e):XS(e)}function uO(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=$l(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=$l(t.absolutePath,!1),t.curve=i);var s=[r,i];r.length!==i.length&&(s=el(r,i));var l=Zu(s[0])!==Zu(s[1])?gu(s[0]):pl(s[0]);return[l,bc(s[1],l),function(u){return u}]}function $S(e,t){var n;return c(e)?n=e.split(" ").map(function(r){var i=(0,ie.CR)(r.split(","),2),s=i[0],l=i[1];return[Number(s),Number(l)]}):n=e,{points:n,totalLength:0,segments:[]}}function fO(e,t){return[e.points,t.points,function(n){return n}]}var su=null;function dd(e){return function(t){var n=0;return e.map(function(r){return r===su?t[n++]:r})}}function hy(e){return e}var W1={matrix:["NNNNNN",[su,su,0,0,su,su,0,0,0,0,1,0,su,su,0,1],hy],matrix3d:["NNNNNNNNNNNNNNNN",hy],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",dd([su,su,new Fl(1)]),hy],scalex:["N",dd([su,new Fl(1),new Fl(1)]),dd([su,new Fl(1)])],scaley:["N",dd([new Fl(1),su,new Fl(1)]),dd([new Fl(1),su])],scalez:["N",dd([new Fl(1),new Fl(1),su])],scale3d:["NNN",hy],skew:["Aa",null,hy],skewx:["A",null,dd([su,Mp])],skewy:["A",null,dd([Mp,su])],translate:["Tt",dd([su,su,bu]),hy],translatex:["T",dd([su,bu,bu]),dd([su,bu])],translatey:["T",dd([bu,su,bu]),dd([bu,su])],translatez:["L",dd([bu,bu,su])],translate3d:["TTL",hy]};function P_(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=W1[s];if(!l)return[];var u=r[2].split(","),h=l[0];if(h.length<u.length)return[];for(var p=[],v=0;v<h.length;v++){var y=u[v],b=h[v],T=void 0;if(y?T={A:function(R){return R.trim()==="0"?Mp:DS(R)},N:mg,T:cy,L:LS}[b.toUpperCase()](y):T={a:Mp,n:p[0],t:bu}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function YS(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=W1[s];if(!l)return[];var u=r[2].split(","),h=l[0];if(h.length<u.length)return[];for(var p=[],v=0;v<h.length;v++){var y=u[v],b=h[v],T=void 0;if(y?T={A:function(R){return R.trim()==="0"?Mp:Hx(R)},N:uy,T:vg,L:Vx}[b.toUpperCase()](y):T={a:Mp,n:p[0],t:bu}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function hO(e){var t,n,r,i;switch(e.t){case"rotatex":return i=ol(hd(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=ol(hd(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=ol(hd(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=ol(hd(e.d[3]));var s=t*t+n*n+r*r;if(s===0)t=1,n=0,r=0;else if(s!==1){var l=Math.sqrt(s);t/=l,n/=l,r/=l}var u=Math.sin(i/2),h=u*Math.cos(i/2),p=u*u;return[1-2*(n*n+r*r)*p,2*(t*n*p+r*h),2*(t*r*p-n*h),0,2*(t*n*p-r*h),1-2*(t*t+r*r)*p,2*(n*r*p+t*h),0,2*(t*r*p+n*h),2*(n*r*p-t*h),1-2*(t*t+n*n)*p,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var v=ol(hd(e.d[0])),y=ol(hd(e.d[1]));return[1,Math.tan(y),0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=ol(hd(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=ol(hd(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=qd(e.d[0],0,null)||0,n=qd(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=qd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=qd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=qd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=qd(e.d[0],0,null)||0,n=qd(e.d[1],0,null)||0,r=qd(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var b=qd(e.d[0],0,null)||0,T=b?-1/b:0;return[1,0,0,0,0,1,0,0,0,0,1,T,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(R){return R.value})}}function gg(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function dO(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(hO).reduce(gg)}function KS(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],s=[0,0,0,1];return H5(dO(e),t,n,r,i,s),[[t,n,r,s,i]]}var pO=function(){function e(r,i){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0;l<4;l++)for(var u=0;u<4;u++)for(var h=0;h<4;h++)s[l][u]+=i[l][h]*r[h][u];return s}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,s,l,u){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=0;p<4;p++)h[p][3]=u[p];for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[3][p]+=r[v]*h[v][p];var y=l[0],b=l[1],T=l[2],R=l[3],M=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];M[0][0]=1-2*(b*b+T*T),M[0][1]=2*(y*b-T*R),M[0][2]=2*(y*T+b*R),M[1][0]=2*(y*b+T*R),M[1][1]=1-2*(y*y+T*T),M[1][2]=2*(b*T-y*R),M[2][0]=2*(y*T-b*R),M[2][1]=2*(b*T+y*R),M[2][2]=1-2*(y*y+b*b),h=e(h,M);var I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(I[2][1]=s[2],h=e(h,I)),s[1]&&(I[2][1]=0,I[2][0]=s[0],h=e(h,I)),s[0]&&(I[2][0]=0,I[1][0]=s[0],h=e(h,I));for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[p][v]*=i[p];return t(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return n}();function vO(e){return e.toFixed(6).replace(".000000","")}function qS(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=KS(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=KS(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var s=gO(n[0][3],r[0][3],i[5]),l=pO(i[0],i[1],i[2],s,i[4]),u=l.map(vO).join(",");return u}])}function mO(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function gO(e,t,n){var r=mO(e,t);r=(0,d.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var s=Math.acos(r),l=Math.sin(n*s)*1/Math.sqrt(1-r*r),u=0;u<4;u++)i.push(e[u]*(Math.cos(n*s)-r*l)+t[u]*l);return i}function Kx(e){return e.replace(/[xy]/,"")}function qx(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var yO=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function _O(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(Q){var ce=e[Q],pe=ce.t,Re=ce.d,je=pe.substring(0,5)==="scale"?1:0;t.push({t:pe,d:Re.map(function(Ke){return typeof Ke=="number"?Yl(je):Yl(je,Ke.unit)})})},s=0;s<e.length;s++)i(s)}var l=[],u=[],h=[];if(e.length!==t.length){var p=qS(e,t);l=[p[0]],u=[p[1]],h=[["matrix",[p[2]]]]}else for(var s=0;s<e.length;s++){var v=e[s].t,y=t[s].t,b=e[s].d,T=t[s].d,R=W1[v],M=W1[y],I=void 0;if(yO(v,y)){var p=qS([e[s]],[t[s]]);l.push(p[0]),u.push(p[1]),h.push(["matrix",[p[2]]]);continue}else if(v===y)I=v;else if(R[2]&&M[2]&&Kx(v)===Kx(y))I=Kx(v),b=R[2](b),T=M[2](T);else if(R[1]&&M[1]&&qx(v)===qx(y))I=qx(v),b=R[1](b),T=M[1](T);else{var p=qS(e,t);l=[p[0]],u=[p[1]],h=[["matrix",[p[2]]]];break}for(var N=[],U=[],H=[],X=0;X<b.length;X++){var p=QC(b[X],T[X],n,!1,X);N[X]=p[0],U[X]=p[1],H.push(p[2])}l.push(N),u.push(U),h.push([I,H])}if(r){var $=l;l=u,u=$}return[l,u,function(Q){return Q.map(function(ce,pe){var Re=ce.map(function(je,Ke){return h[pe][1][Ke](je)}).join(",");return h[pe][0]==="matrix"&&Re.split(",").length===16&&(h[pe][0]="matrix3d"),h[pe][0]==="matrix3d"&&Re.split(",").length===6&&(h[pe][0]="matrix"),h[pe][0]+"("+Re+")"}).join(" ")}]}var bO=Rf(function(e){if(c(e)){if(e==="text-anchor")return[Yl(0,"px"),Yl(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[cy(I_(t[0])),cy(I_(t[1]))]}else return[Yl(e[0]||0,"px"),Yl(e[1]||0,"px")]}),xO=function(e){if(c(e)){if(e==="text-anchor")return[Yl(0,"px"),Yl(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[vg(I_(t[0])),vg(I_(t[1]))]}else return[Yl(e[0]||0,"px"),Yl(e[1]||0,"px")]};function I_(e){return e==="center"?"50%":e==="left"||e==="top"?"0%":e==="right"||e==="bottom"?"100%":e}var Qx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Co.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Co.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Co.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Co.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Co.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Co.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Co.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Co.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Co.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Co.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Co.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Co.FILTER},{n:"clipPath",syntax:Co.DEFINED_PATH},{n:"textPath",syntax:Co.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Co.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Co.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Co.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Co.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Co.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Co.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Co.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Co.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Co.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Co.NUMBER,d:function(e){return e===ai.PATH||e===ai.POLYGON||e===ai.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Co.MARKER},{n:"markerEnd",syntax:Co.MARKER},{n:"markerMid",syntax:Co.MARKER},{n:"markerStartOffset",syntax:Co.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Co.LENGTH,l:!0,int:!0,d:"0"}],QS=Qx.filter(function(e){return!!e.l}).map(function(e){return e.n}),gm={},dy=new WeakMap,JS=function(e,t){var n=dy.get(e);return!n||n.length===0?!0:n.includes(t)},EO=function(){function e(t){var n=this;this.runtime=t,Qx.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,ie.ev)([t.n],(0,ie.CR)(t.a||[]),!1).forEach(function(n){gm[n]=t})},e.prototype.unregisterMetadata=function(t){delete gm[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var v=r.skipUpdateAttribute,y=r.skipParse,b=r.forceUpdateGeometry,T=r.usedAttributes,R=r.memoize,M=b,I=Object.keys(n);I.forEach(function(N){var U;v||(t.attributes[N]=n[N]),!M&&(!((U=gm[N])===null||U===void 0)&&U.l)&&(M=!0)}),y||I.forEach(function(N){t.computedStyle[N]=i.parseProperty(N,t.attributes[N],t,R)}),T!=null&&T.length&&(I=Array.from(new Set(I.concat(T)))),I.forEach(function(N){N in t.computedStyle&&(t.parsedStyle[N]=i.computeProperty(N,t.computedStyle[N],t,R))}),M&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t)),I.forEach(function(N){N in t.parsedStyle&&i.postProcessProperty(N,t,I)}),this.runtime.enableCSSParsing&&t.children.length&&I.forEach(function(N){N in t.parsedStyle&&i.isPropertyInheritable(N)&&t.children.forEach(function(U){U.internalSetAttribute(N,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(t.attributes,n);var s=Object.keys(n),l=t.parsedStyle.clipPath,u=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var h=!!r.forceUpdateGeometry;if(!h){for(var p=0;p<QS.length;p++)if(QS[p]in n){h=!0;break}}n.fill&&(t.parsedStyle.fill=Z0(n.fill)),n.stroke&&(t.parsedStyle.stroke=Z0(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=Z0(n.shadowColor)),n.filter&&(t.parsedStyle.filter=FS(n.filter)),(0,xa.Z)(n.radius)||(t.parsedStyle.radius=NS(n.radius,4)),(0,xa.Z)(n.lineDash)||(t.parsedStyle.lineDash=NS(n.lineDash,2)),n.points&&(t.parsedStyle.points=$S(n.points)),n.d===""&&(t.parsedStyle.d=(0,ie.pi)({},zx)),n.d&&(t.parsedStyle.d=Yx(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),js(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",l,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",u,n.offsetPath,t,this.runtime),n.transform&&(t.parsedStyle.transform=P_(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=bO(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),(0,xa.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,s),(0,xa.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,s),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,s),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(t,s),h&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},e.prototype.parseProperty=function(t,n,r,i){var s=gm[t],l=n;if((n===""||(0,xa.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")l=kx(n);else if(s){var u=s.k,h=s.syntax,p=h&&this.getPropertySyntax(h);u&&u.indexOf(n)>-1?l=kx(n):p&&(!i&&p.parserUnmemoize?l=p.parserUnmemoize(n,r):p.parser&&(l=p.parser(n,r)))}return l},e.prototype.computeProperty=function(t,n,r,i){var s=gm[t],l=r.id==="g-root",u=n;if(s){var h=s.syntax,p=s.inh,v=s.d;if(n instanceof fd){var y=n.value;if(y==="unset"&&(p&&!l?y="inherit":y="initial"),y==="initial")(0,xa.Z)(v)||(n=this.parseProperty(t,O_(v)?v(r.nodeName):v,r,i));else if(y==="inherit"){var b=this.tryToResolveProperty(r,t,{inherited:!0});if((0,xa.Z)(b)){this.addUnresolveProperty(r,t);return}else return b}}var T=h&&this.getPropertySyntax(h);if(T&&T.calculator){var R=r.parsedStyle[t];u=T.calculator(t,R,n,r,this.runtime)}else n instanceof fd?u=n.value:u=n}return u},e.prototype.postProcessProperty=function(t,n,r){var i=gm[t];if(i&&i.syntax){var s=i.syntax&&this.getPropertySyntax(i.syntax),l=s;l&&l.postProcessor&&l.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=dy.get(t);r||(dy.set(t,[]),r=dy.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&JS(t.parentElement,n)){var s=t.parentElement.parsedStyle[n];return s==="unset"||s==="initial"||s==="inherit"?void 0:s}},e.prototype.recalc=function(t){var n=dy.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),dy.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new _u),i.renderBounds||(i.renderBounds=new _u);var s=t.parsedStyle,l=r.update(s,t),u=l.cx,h=u===void 0?0:u,p=l.cy,v=p===void 0?0:p,y=l.cz,b=y===void 0?0:y,T=l.hwidth,R=T===void 0?0:T,M=l.hheight,I=M===void 0?0:M,N=l.hdepth,U=N===void 0?0:N,H=[Math.abs(R),Math.abs(I),U],X=s,$=X.stroke,Q=X.lineWidth,ce=Q===void 0?1:Q,pe=X.increasedLineWidthForHitTesting,Re=pe===void 0?0:pe,je=X.shadowType,Ke=je===void 0?"outer":je,ft=X.shadowColor,Ye=X.filter,it=Ye===void 0?[]:Ye,at=X.transformOrigin,vt=[h,v,b];i.contentBounds.update(vt,H);var Vt=n===ai.POLYLINE||n===ai.POLYGON||n===ai.PATH?Math.SQRT2:.5,At=$&&!$.isNone;if(At){var Ut=((ce||0)+(Re||0))*Vt;H[0]+=Ut,H[1]+=Ut}if(i.renderBounds.update(vt,H),ft&&Ke&&Ke!=="inner"){var Sn=i.renderBounds,Vn=Sn.min,rr=Sn.max,or=s,Hr=or.shadowBlur,fi=or.shadowOffsetX,Qi=or.shadowOffsetY,Jr=Hr||0,qr=fi||0,Io=Qi||0,Ji=Vn[0]-Jr+qr,Wi=rr[0]+Jr+qr,wo=Vn[1]-Jr+Io,Ko=rr[1]+Jr+Io;Vn[0]=Math.min(Vn[0],Ji),rr[0]=Math.max(rr[0],Wi),Vn[1]=Math.min(Vn[1],wo),rr[1]=Math.max(rr[1],Ko),i.renderBounds.setMinMax(Vn,rr)}it.forEach(function(vs){var Ml=vs.name,Fu=vs.params;if(Ml==="blur"){var Jf=Fu[0].value;i.renderBounds.update(i.renderBounds.center,Bl(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[Jf,Jf,0]))}else if(Ml==="drop-shadow"){var $c=Fu[0].value,bh=Fu[1].value,ku=Fu[2].value,cp=i.renderBounds,Ac=cp.min,Uc=cp.max,Wh=Ac[0]-ku+$c,Pf=Uc[0]+ku+$c,aa=Ac[1]-ku+bh,ts=Uc[1]+ku+bh;Ac[0]=Math.min(Ac[0],Wh),Uc[0]=Math.max(Uc[0],Pf),Ac[1]=Math.min(Ac[1],aa),Uc[1]=Math.max(Uc[1],ts),i.renderBounds.setMinMax(Ac,Uc)}}),t.geometry.dirty=!1;var ca=R<0,Oa=I<0,Zs=(ca?-1:1)*(at?qd(at[0],0,t,!0):0),Ta=(Oa?-1:1)*(at?qd(at[1],1,t,!0):0);(Zs||Ta)&&t.setOrigin(Zs,Ta)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===ai.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===ai.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=gm[t];return n?n.inh:!1},e}(),SO=function(){function e(){this.parser=DS,this.parserUnmemoize=Hx,this.parserWithCSSDisabled=null,this.mixer=Wx}return e.prototype.calculator=function(t,n,r,i){return hd(r)},e}(),TO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,s){return r instanceof fd&&(r=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),r},e}(),wO=function(){function e(){this.parser=Z0,this.parserWithCSSDisabled=Z0,this.mixer=IS}return e.prototype.calculator=function(t,n,r,i){return r instanceof fd?r.value==="none"?sy:wS:r},e}(),AO=function(){function e(){this.parser=FS}return e.prototype.calculator=function(t,n,r){return r instanceof fd?[]:r},e}();function eT(e){var t=e.parsedStyle.fontSize;return(0,xa.Z)(t)?null:t}var Jx=function(){function e(){this.parser=cy,this.parserUnmemoize=vg,this.parserWithCSSDisabled=null,this.mixer=Wx}return e.prototype.calculator=function(t,n,r,i,s){var l;if((0,Zl.Z)(r))return r;if(Fl.isRelativeUnit(r.unit)){var u=s.styleValueRegistry;if(r.unit===_o.kPercentage)return 0;if(r.unit===_o.kEms){if(i.parentNode){var h=eT(i.parentNode);if(h)return h*=r.value,h;u.addUnresolveProperty(i,t)}else u.addUnresolveProperty(i,t);return 0}else if(r.unit===_o.kRems){if(!((l=i==null?void 0:i.ownerDocument)===null||l===void 0)&&l.documentElement){var h=eT(i.ownerDocument.documentElement);if(h)return h*=r.value,h;u.addUnresolveProperty(i,t)}else u.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),CO=function(){function e(){this.mixer=US}return e.prototype.parser=function(t){var n=BS((0,Zl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),K5=function(){function e(){this.mixer=US}return e.prototype.parser=function(t){var n=BS((0,Zl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),OO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof fd&&(r=null);var s=r==null?void 0:r.cloneNode(!0);return s&&(s.style.isMarker=!0),s},e}(),e2=function(){function e(){this.mixer=Wx,this.parser=mg,this.parserUnmemoize=uy,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),RO=function(){function e(){this.parser=mg,this.parserUnmemoize=uy,this.parserWithCSSDisabled=null,this.mixer=Gx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var s=r.nodeName;if(s===ai.LINE||s===ai.PATH||s===ai.POLYLINE){var l=r.getPoint(i);l&&t.setLocalPosition(l.x,l.y)}}},e}(),MO=function(){function e(){this.parser=mg,this.parserUnmemoize=uy,this.parserWithCSSDisabled=null,this.mixer=Gx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),PO=function(){function e(){this.parser=Yx,this.parserWithCSSDisabled=Yx,this.mixer=uO}return e.prototype.calculator=function(t,n,r){return r instanceof fd&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new W0(0,0,0,0)}:r},e}(),IO=function(){function e(){this.parser=$S,this.mixer=fO}return e}(),LO=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.mixer=Gx(0,1/0),n}return t}(Jx),DO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof fd?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),G1=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var s=i.getAttribute("text");if(s){var l=s;r.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):r.value==="lowercase"?l=s.toLowerCase():r.value==="uppercase"&&(l=s.toUpperCase()),i.parsedStyle.text=l}return r.value},e}(),t2={},NO=0;function BO(e,t){if(e){var n=typeof e=="string"?e:e.id||NO++;t2[n]&&t2[n].destroy(),t2[n]=t}}var L_=typeof window!="undefined"&&typeof window.document!="undefined";function q5(e){return!!e.getAttribute}function Q5(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;tT(e[i],t)<0?n=i+1:r=i}return n}function tT(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var s=i.childNodes||[];return s.indexOf(e)-s.indexOf(t)}}return n-r}function nT(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var FO="px";function kO(e,t,n){L_&&e.style&&(e.style.width=t+FO,e.style.height=n+FO)}function rT(e,t){if(L_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function UO(e){var t=rT(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function zO(e){var t=rT(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var jO=1,iT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},D_=typeof performance=="object"&&performance.now?performance:Date;function yg(e,t,n){e===void 0&&(e="auto");var r=!1,i=!1,s=!!t&&!t.isNone,l=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=s,i=l):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var VO=1,oT=function(){return VO++},h0=typeof self=="object"&&self.self==self?self:typeof D.g=="object"&&D.g.global==D.g?D.g:{},HO=Date.now(),WO=function(){return h0.performance&&typeof h0.performance.now=="function"?h0.performance.now():Date.now()-HO},py={},N_=Date.now(),GO=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-N_,r=n>16?0:16-n,i=oT();return py[i]=e,Object.keys(py).length>1||setTimeout(function(){N_=t;var s=py;py={},Object.keys(s).forEach(function(l){return s[l](WO())})},r),i},vy=function(e){delete py[e]},ZO=["","webkit","moz","ms","o"],aT=function(e){return typeof e!="string"?GO:e===""?h0.requestAnimationFrame:h0[e+"RequestAnimationFrame"]},XO=function(e){return typeof e!="string"?vy:e===""?h0.cancelAnimationFrame:h0[e+"CancelAnimationFrame"]||h0[e+"CancelRequestAnimationFrame"]},$O=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},Qd=$O(ZO,function(e){return!!aT(e)}),ym=aT(Qd),sT=XO(Qd);h0.requestAnimationFrame=ym,h0.cancelAnimationFrame=sT;var So=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t),!1))}))},e}(),YO=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,ie.mG)(this,void 0,void 0,function(){var r,i,s,l;return(0,ie.Jh)(this,function(u){switch(u.label){case 0:return this.callbacks.length?[4,(l=this.callbacks)[0].apply(l,(0,ie.ev)([],(0,ie.CR)(t),!1))]:[3,6];case 1:r=u.sent(),i=0,u.label=2;case 2:return i<this.callbacks.length-1?(s=this.callbacks[i],[4,s(r)]):[3,5];case 3:r=u.sent(),u.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),ph=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),An=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),Ws=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rs=/([\"\'])[^\'\"]+\1/;function B_(e){for(var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?"sans-serif":r,s=e.fontStyle,l=s===void 0?"normal":s,u=e.fontVariant,h=u===void 0?"normal":u,p=e.fontWeight,v=p===void 0?"normal":p,y=(0,Zl.Z)(n)&&"".concat(n,"px")||"16px",b=i.split(","),T=b.length-1;T>=0;T--){var R=b[T].trim();!rs.test(R)&&Ws.indexOf(R)<0&&(R='"'.concat(R,'"')),b[T]=R}return"".concat(l," ").concat(h," ").concat(v," ").concat(y," ").concat(b.join(","))}function vh(e,t,n){return Kr.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var Ja=1e-5,ff=Kr.create(),al=Kr.create();function Nc(e,t){if(e.length){var n=Kr.identity(ff);e.forEach(function(r){var i=r.t,s=r.d;if(i==="scale"){var l=(s==null?void 0:s.map(function(N){return Math.max(N.value,Ja)}))||[1,1];Kr.fromScaling(al,[l[0],l[1],1])}else if(i==="scalex"){var l=(s==null?void 0:s.map(function(U){return Math.max(U.value,Ja)}))||[1];Kr.fromScaling(al,[l[0],1,1])}else if(i==="scaley"){var l=(s==null?void 0:s.map(function(U){return Math.max(U.value,Ja)}))||[1];Kr.fromScaling(al,[1,l[0],1])}else if(i==="scalez"){var l=(s==null?void 0:s.map(function(U){return Math.max(U.value,Ja)}))||[1];Kr.fromScaling(al,[1,1,l[0]])}else if(i==="scale3d"){var l=(s==null?void 0:s.map(function(U){return Math.max(U.value,Ja)}))||[1,1,1];Kr.fromScaling(al,[l[0],l[1],l[2]])}else if(i==="translate"){var u=s||[bu,bu];Kr.fromTranslation(al,[u[0].value,u[1].value,0])}else if(i==="translatex"){var u=s||[bu];Kr.fromTranslation(al,[u[0].value,0,0])}else if(i==="translatey"){var u=s||[bu];Kr.fromTranslation(al,[0,u[0].value,0])}else if(i==="translatez"){var u=s||[bu];Kr.fromTranslation(al,[0,0,u[0].value])}else if(i==="translate3d"){var u=s||[bu,bu,bu];Kr.fromTranslation(al,[u[0].value,u[1].value,u[2].value])}else if(i==="rotate"){var h=s||[Mp];Kr.fromZRotation(al,ol(hd(h[0])))}else if(i==="rotatex"){var h=s||[Mp];Kr.fromXRotation(al,ol(hd(h[0])))}else if(i==="rotatey"){var h=s||[Mp];Kr.fromYRotation(al,ol(hd(h[0])))}else if(i==="rotatez"){var h=s||[Mp];Kr.fromZRotation(al,ol(hd(h[0])))}else if(i==="rotate3d"){var h=s||[bu,bu,bu,Mp];Kr.fromRotation(al,ol(hd(h[3])),[h[0].value,h[1].value,h[2].value])}else if(i==="skew"){var p=(s==null?void 0:s.map(function(N){return N.value}))||[0,0];vh(al,ol(p[0]),ol(p[1]))}else if(i==="skewx"){var p=(s==null?void 0:s.map(function(U){return U.value}))||[0];vh(al,ol(p[0]),0)}else if(i==="skewy"){var p=(s==null?void 0:s.map(function(U){return U.value}))||[0];vh(al,0,ol(p[0]))}else if(i==="matrix"){var v=(0,ie.CR)(s.map(function(N){return N.value}),6),y=v[0],b=v[1],T=v[2],R=v[3],M=v[4],I=v[5];Kr.set(al,y,b,0,0,T,R,0,0,0,0,1,0,M,I,0,1)}else i==="matrix3d"&&Kr.set.apply(Kr,(0,ie.ev)([al],(0,ie.CR)(s.map(function(N){return N.value})),!1));Kr.mul(n,n,al)}),t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var $u=function(){function e(){this.parser=P_,this.parserUnmemoize=YS,this.parserWithCSSDisabled=YS,this.mixer=_O}return e.prototype.calculator=function(t,n,r,i){return r instanceof fd?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;Nc(n,t)},e}(),xu=function(){function e(){this.parser=bO,this.parserUnmemoize=xO}return e.prototype.postProcessor=function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===_o.kPixels&&n[1].unit===_o.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()},e}(),Ol=function(){function e(){this.parser=mg,this.parserUnmemoize=uy}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=ly.Z_INDEX_CHANGED)}},e}(),d0=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,u=t.r,h=u===void 0?0:u;return{cx:i,cy:l,hwidth:h,hheight:h}},e}(),_g=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,u=t.rx,h=u===void 0?0:u,p=t.ry,v=p===void 0?0:p;return{cx:i,cy:l,hwidth:h,hheight:v}},e}(),lT=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=Math.min(n,i),u=Math.max(n,i),h=Math.min(r,s),p=Math.max(r,s),v=u-l,y=p-h,b=v/2,T=y/2;return{cx:l+b,cy:h+T,hwidth:b,hheight:T}},e}(),hs=function(){function e(){}return e.prototype.update=function(t){var n=t.d,r=n.rect,i=r.x,s=r.y,l=r.width,u=r.height,h=l/2,p=u/2;return{cx:i+h,cy:s+p,hwidth:h,hheight:p}},e}(),Kf=function(){function e(){}return e.prototype.update=function(t){if(t.points&&jo(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(y){return y[0]})),!1)),i=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(y){return y[0]})),!1)),s=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(y){return y[1]})),!1)),l=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(y){return y[1]})),!1)),u=i-r,h=l-s,p=u/2,v=h/2;return{cx:r+p,cy:s+v,hwidth:p,hheight:v}}return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),hf=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,s=t.y,l=s===void 0?0:s,u=t.src,h=t.width,p=h===void 0?0:h,v=t.height,y=v===void 0?0:v,b=p,T=y;return u&&!c(u)&&(b||(b=u.width,t.width=b),T||(T=u.height,t.height=T)),{cx:i+b/2,cy:l+T/2,hwidth:b/2,hheight:T/2}},e}(),Bc=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,s=t.textBaseline,l=t.fontSize,u=t.fontStyle,h=t.fontWeight,p=t.fontVariant,v=t.lineWidth;return Yr.enableCSSParsing?r&&l&&u&&h&&p&&i&&s&&!(0,xa.Z)(v):r},e.prototype.update=function(t,n){var r,i,s=t.text,l=t.textAlign,u=l===void 0?"start":l,h=t.lineWidth,p=h===void 0?1:h,v=t.textBaseline,y=v===void 0?"alphabetic":v,b=t.dx,T=b===void 0?0:b,R=t.dy,M=R===void 0?0:R,I=t.x,N=I===void 0?0:I,U=t.y,H=U===void 0?0:U;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var X=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,$=this.globalRuntime.textService.measureText(s,t,X);t.metrics=$;var Q=$.width,ce=$.height,pe=$.lineHeight,Re=$.fontProperties,je=Q/2,Ke=ce/2,ft=N+je;u==="center"||u==="middle"?ft+=p/2-je:(u==="right"||u==="end")&&(ft+=p-je*2);var Ye=H-Ke;return y==="middle"?Ye+=Ke:y==="top"||y==="hanging"?Ye+=Ke*2:y==="alphabetic"?Ye+=this.globalRuntime.enableCSSParsing?pe-Re.ascent:0:(y==="bottom"||y==="ideographic")&&(Ye+=0),T&&(ft+=T),M&&(Ye+=M),{cx:ft,cy:Ye,hwidth:je,hheight:Ke}},e}(),J5=function(){function e(){}return e.prototype.update=function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}},e}();function Fc(e){return!!e.type}var pd=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Yf,this.page=new Yf,this.canvas=new Yf,this.viewport=new Yf,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(ic)},e}(),bg=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.client=new Yf,n.movement=new Yf,n.offset=new Yf,n.global=new Yf,n.screen=new Yf,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(ic)},t}(pd),gy=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(bg),ri=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(bg),Hi=function(e){(0,ie.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(pd),KO=":",mo=function(){function e(){this.emitter=new ss}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=Gd(r)&&r||vl(r)&&r.capture,s=vl(r)&&r.once,l=O_(n)?void 0:n,u=!1,h="";if(t.indexOf(KO)>-1){var p=(0,ie.CR)(t.split(KO),2),v=p[0],y=p[1];t=y,h=v,u=!0}if(t=i?"".concat(t,"capture"):t,n=O_(n)?n:n.handleEvent,u){var b=n;n=function(){for(var T,R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];((T=R[0].target)===null||T===void 0?void 0:T.name)===h&&b.apply(void 0,(0,ie.ev)([],(0,ie.CR)(R),!1))}}return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=Gd(r)&&r||vl(r)&&r.capture,s=O_(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=O_(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,s),this},e.prototype.emit=function(t,n){this.dispatchEvent(new Hi(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!Fc(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var s;if(this.document?s=this:this.defaultView?s=this.defaultView:s=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,s){if(t.manager=s.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),To=function(e){(0,ie.ZT)(t,e);function t(){var n=e.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===ai.TEXT&&(i+=this.style.text);try{for(var s=(0,ie.XA)(this.childNodes),l=s.next();!l.done;l=s.next()){var u=l.value;u.nodeName===ai.TEXT?i+=u.nodeValue:i+=u.textContent}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===ai.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(ic)},t.prototype.lookupNamespaceURI=function(n){throw new Error(ic)},t.prototype.lookupPrefix=function(n){throw new Error(ic)},t.prototype.normalize=function(){throw new Error(ic)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,s=this,l=[i],u=[s];(r=i.parentNode)!==null&&r!==void 0?r:s.parentNode;)i=i.parentNode?(l.push(i.parentNode),i.parentNode):i,s=s.parentNode?(u.push(s.parentNode),s.parentNode):s;if(i!==s)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var h=l.length>u.length?l:u,p=h===l?u:l;if(h[h.length-p.length]===p[0])return h===l?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var v=h.length-p.length,y=p.length-1;y>=0;y--){var b=p[y],T=h[v+y];if(T!==b){var R=b.parentNode.childNodes;return R.indexOf(b)<R.indexOf(T)?p===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:h===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(mo),ir=2048,Z1=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new ss,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Kr.create(),this.tmpVec3=fr.Ue(),this.onPointerDown=function(i){var s=r.createPointerEvent(i);if(r.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")r.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightdown":"mousedown")}var u=r.trackingData(i.pointerId);u.pressTargetsByButton[i.button]=s.composedPath(),r.freeEvent(s)},this.onPointerUp=function(i){var s,l=D_.now(),u=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(u,"pointerup"),u.pointerType==="touch")r.dispatchEvent(u,"touchend");else if(u.pointerType==="mouse"||u.pointerType==="pen"){var h=u.button===2;r.dispatchEvent(u,h?"rightup":"mouseup")}var p=r.trackingData(i.pointerId),v=r.findMountedTarget(p.pressTargetsByButton[i.button]),y=v;if(v&&!u.composedPath().includes(v)){for(var b=v;b&&!u.composedPath().includes(b);){if(u.currentTarget=b,r.notifyTarget(u,"pointerupoutside"),u.pointerType==="touch")r.notifyTarget(u,"touchendoutside");else if(u.pointerType==="mouse"||u.pointerType==="pen"){var h=u.button===2;r.notifyTarget(u,h?"rightupoutside":"mouseupoutside")}To.isNode(b)&&(b=b.parentNode)}delete p.pressTargetsByButton[i.button],y=b}if(y){var T=r.clonePointerEvent(u,"click");T.target=y,T.path=[],p.clicksByButton[i.button]||(p.clicksByButton[i.button]={clickCount:0,target:T.target,timeStamp:l});var R=p.clicksByButton[i.button];R.target===T.target&&l-R.timeStamp<200?++R.clickCount:R.clickCount=1,R.target=T.target,R.timeStamp=l,T.detail=R.clickCount,!((s=u.detail)===null||s===void 0)&&s.preventClick||(!r.context.config.useNativeClickEvent&&(T.pointerType==="mouse"||T.pointerType==="touch")&&r.dispatchEvent(T,"click"),r.dispatchEvent(T,"pointertap")),r.freeEvent(T)}r.freeEvent(u)},this.onPointerMove=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),l=s.pointerType==="mouse"||s.pointerType==="pen",u=r.trackingData(i.pointerId),h=r.findMountedTarget(u.overTargets);if(u.overTargets&&h!==s.target){var p=i.type==="mousemove"?"mouseout":"pointerout",v=r.createPointerEvent(i,p,h||void 0);if(r.dispatchEvent(v,"pointerout"),l&&r.dispatchEvent(v,"mouseout"),!s.composedPath().includes(h)){var y=r.createPointerEvent(i,"pointerleave",h||void 0);for(y.eventPhase=y.AT_TARGET;y.target&&!s.composedPath().includes(y.target);)y.currentTarget=y.target,r.notifyTarget(y),l&&r.notifyTarget(y,"mouseleave"),To.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(v)}if(h!==s.target){var b=i.type==="mousemove"?"mouseover":"pointerover",T=r.clonePointerEvent(s,b);r.dispatchEvent(T,"pointerover"),l&&r.dispatchEvent(T,"mouseover");for(var R=h&&To.isNode(h)&&h.parentNode;R&&R!==(To.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&R!==s.target;)R=R.parentNode;var M=!R||R===(To.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(M){var I=r.clonePointerEvent(s,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==h&&I.target!==(To.isNode(r.rootTarget)&&r.rootTarget.parentNode);)I.currentTarget=I.target,r.notifyTarget(I),l&&r.notifyTarget(I,"mouseenter"),To.isNode(I.target)&&(I.target=I.target.parentNode);r.freeEvent(I)}r.freeEvent(T)}r.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&r.dispatchEvent(s,"touchmove"),l&&(r.dispatchEvent(s,"mousemove"),r.cursor=r.getCursor(s.target)),u.overTargets=s.composedPath(),r.freeEvent(s)},this.onPointerOut=function(i){var s=r.trackingData(i.pointerId);if(s.overTargets){var l=i.pointerType==="mouse"||i.pointerType==="pen",u=r.findMountedTarget(s.overTargets),h=r.createPointerEvent(i,"pointerout",u||void 0);r.dispatchEvent(h),l&&r.dispatchEvent(h,"mouseout");var p=r.createPointerEvent(i,"pointerleave",u||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(To.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseleave"),To.isNode(p.target)&&(p.target=p.target.parentNode);s.overTargets=null,r.freeEvent(h),r.freeEvent(p)}r.cursor=null},this.onPointerOver=function(i){var s=r.trackingData(i.pointerId),l=r.createPointerEvent(i),u=l.pointerType==="mouse"||l.pointerType==="pen";r.dispatchEvent(l,"pointerover"),u&&r.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(r.cursor=r.getCursor(l.target));var h=r.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==(To.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),u&&r.notifyTarget(h,"mouseenter"),To.isNode(h.target)&&(h.target=h.target.parentNode);s.overTargets=l.composedPath(),r.freeEvent(l),r.freeEvent(h)},this.onPointerUpOutside=function(i){var s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.pressTargetsByButton[i.button]),u=r.createPointerEvent(i);if(l){for(var h=l;h;)u.currentTarget=h,r.notifyTarget(u,"pointerupoutside"),u.pointerType==="touch"||(u.pointerType==="mouse"||u.pointerType==="pen")&&r.notifyTarget(u,u.button===2?"rightupoutside":"mouseupoutside"),To.isNode(h)&&(h=h.parentNode);delete s.pressTargetsByButton[i.button]}r.freeEvent(u)},this.onWheel=function(i){var s=r.createWheelEvent(i);r.dispatchEvent(s),r.freeEvent(s)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var s=r.createPointerEvent(i);r.dispatchEvent(s),r.freeEvent(s)}},this.onPointerCancel=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(s),r.freeEvent(s)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.getScale=function(){var t=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&t){var s=i.offsetWidth,l=i.offsetHeight;s&&l&&(n=t.width/s,r=t.height/l)}return{scaleX:n,scaleY:r,bbox:t}},e.prototype.client2Viewport=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new Yf((t.x-((s==null?void 0:s.left)||0))/r,(t.y-((s==null?void 0:s.top)||0))/i)},e.prototype.viewport2Client=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new Yf((t.x+((s==null?void 0:s.left)||0))*r,(t.y+((s==null?void 0:s.top)||0))*i)},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,s=i.getCamera(),l=this.context.config,u=l.width,h=l.height,p=s.getPerspectiveInverse(),v=s.getWorldTransform(),y=Kr.multiply(this.tmpMatrix,v,p),b=fr.t8(this.tmpVec3,n/u*2-1,(1-r/h)*2-1,0);return fr.fF(b,b,y),new Yf(b[0],b[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),s=r.getViewTransform(),l=Kr.multiply(this.tmpMatrix,i,s),u=fr.t8(this.tmpVec3,t.x,t.y,0);fr.fF(this.tmpVec3,this.tmpVec3,l);var h=this.context.config,p=h.width,v=h.height;return new Yf((u[0]+1)/2*p,(1-(u[1]+1)/2)*v)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=s+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<ir&&t!==this.rootTarget;i++)To.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,s=i.width,l=i.height,u=i.disableHitTesting;return n<0||r<0||n>s||r>l?null:!u&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,ie.XA)(t.nativeEvent.composedPath()),s=i.next();!s.done;s=i.next()){var l=s.value,u=this.nativeHTMLMap.get(l);if(u)return u}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var s=this.allocateEvent(gy);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var l=this.getExistedHTML(s),u=this.context.contextService.getDomElement();return s.target=r!=null?r:l||this.isNativeEventFromCanvas(u,s.nativeEvent)&&this.pickTarget(s)||i,typeof n=="string"&&(s.type=n),s},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(ri);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(ri);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(gy);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=D_.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var s=0;s<i.length&&!t.propagationImmediatelyStopped;s++)i[s].once&&r.removeListener(n,i[s].fn,void 0,!0),i[s].fn.call(t.currentTarget||i[s].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||To.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=q5(n)&&n.getAttribute("cursor");if(r)return r;n=To.isNode(n)&&n.parentNode}},e}(),X0=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||Yr.offscreenCanvas)this.canvas=t||Yr.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),Jd;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(Jd||(Jd={}));var cT=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ph,initAsync:new So,dirtycheck:new An,cull:new An,beginFrame:new ph,beforeRender:new ph,render:new ph,afterRender:new ph,endFrame:new ph,destroy:new ph,pick:new YO,pickSync:new An,pointerDown:new ph,pointerUp:new ph,pointerMove:new ph,pointerOut:new ph,pointerOver:new ph,pointerWheel:new ph,pointerCancel:new ph,click:new ph}}return e.prototype.init=function(t){var n=this,r=(0,ie.pi)((0,ie.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Jd.CAMERA_CHANGED)},e.prototype.render=function(t,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(Jd.CAMERA_CHANGED),u=!t.disableRenderHooks||!(t.disableRenderHooks&&l);u&&this.renderDisplayObject(s.root,t,s),this.hooks.beginFrame.call(n),u&&s.renderListCurrentFrame.forEach(function(h){i.hooks.beforeRender.call(h),i.hooks.render.call(h),i.hooks.afterRender.call(h)}),this.hooks.endFrame.call(n),s.renderListCurrentFrame=[],s.renderReasons.clear(),r()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,s=n.renderer.getConfig(),l=s.enableDirtyCheck,u=s.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var h=t.renderable,p=l?h.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(p){var v=u?this.hooks.cull.call(p,this.context.camera):p;v&&(this.stats.rendered++,r.renderListCurrentFrame.push(v))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var y=t.sortable;y.dirty&&(this.sort(t,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0),(y.sorted||t.childNodes).forEach(function(b){i.renderDisplayObject(b,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==ly.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var s=n.sorted.indexOf(r);s>=0&&n.sorted.splice(s,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var l=Q5(n.sorted,r);n.sorted.splice(l,0,r)}}):n.sorted=t.childNodes.slice().sort(tT)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Jd.DISPLAY_OBJECT_CHANGED)},e}(),uT=/\[\s*(.*)=(.*)\s*\]/,e4=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(u){return((u==null?void 0:u.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(u){return u.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.find(function(u){return n!==u&&(s==="name"?u.name===l:r.attributeToString(u,s)===l)}):null}else return n.find(function(u){return n!==u&&u.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(u){return n!==u&&((u==null?void 0:u.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(u){return n!==u&&u.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.findAll(function(u){return n!==u&&(s==="name"?u.name===l:r.attributeToString(u,s)===l)}):[]}else return n.findAll(function(u){return n!==u&&u.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,s=r.value;return i==="name"?n.name===s:this.attributeToString(n,i)===s}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(uT),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,xa.Z)(r)?"":r.toString?r.toString():""},e}(),_m=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s,l,u,h,p){var v=e.call(this,null)||this;return v.relatedNode=r,v.prevValue=i,v.newValue=s,v.attrName=l,v.attrChange=u,v.prevParsedValue=h,v.newParsedValue=p,v.type=n,v}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(pd),Va;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(Va||(Va={}));function qO(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var fT=new _m(Va.REPARENT,null,"","","",0,"",""),Ga=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Hi(Va.BOUNDS_CHANGED),this.rotate=function(){var r=$i();return function(i,s,l,u,h){l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=!0),typeof s=="number"&&(s=fr.al(s,l,u));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,s);else{var v=$i();Zg(v,s[0],s[1],s[2]);var y=n.getRotation(i),b=n.getRotation(i.parentNode);Xg(r,b),B0(r,r),nc(v,r,v),nc(p.localRotation,v,y),vv(p.localRotation,p.localRotation),h&&n.dirtifyLocal(i,p)}}}(),this.rotateLocal=function(){var r=$i();return function(i,s,l,u,h){l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=!0),typeof s=="number"&&(s=fr.al(s,l,u));var p=i.transformable;Zg(r,s[0],s[1],s[2]),P1(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}(),this.setEulerAngles=function(){var r=$i();return function(i,s,l,u,h){l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=!0),typeof s=="number"&&(s=fr.al(s,l,u));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,s);else{Zg(p.localRotation,s[0],s[1],s[2]);var v=n.getRotation(i.parentNode);Xg(r,B0($i(),v)),P1(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}}(),this.translateLocal=function(){return function(r,i,s,l,u){s===void 0&&(s=0),l===void 0&&(l=0),u===void 0&&(u=!0),typeof i=="number"&&(i=fr.al(i,s,l));var h=r.transformable;fr.fS(i,fr.Ue())||(fr.VC(i,i,h.localRotation),fr.IH(h.localPosition,h.localPosition,i),u&&n.dirtifyLocal(r,h))}}(),this.setPosition=function(){var r=Kr.create(),i=fr.Ue();return function(s,l,u){u===void 0&&(u=!0);var h=s.transformable;if(i[0]=l[0],i[1]=l[1],i[2]=l[2]||0,!fr.fS(n.getPosition(s),i)){if(fr.JG(h.position,i),s.parentNode===null||!s.parentNode.transformable)fr.JG(h.localPosition,i);else{var p=s.parentNode.transformable;Kr.copy(r,p.worldTransform),Kr.invert(r,r),fr.fF(h.localPosition,i,r)}u&&n.dirtifyLocal(s,h)}}}(),this.setLocalPosition=function(){var r=fr.Ue();return function(i,s,l){l===void 0&&(l=!0);var u=i.transformable;r[0]=s[0],r[1]=s[1],r[2]=s[2]||0,!fr.fS(u.localPosition,r)&&(fr.JG(u.localPosition,r),l&&n.dirtifyLocal(i,u))}}(),this.translate=function(){var r=fr.Ue(),i=fr.Ue(),s=fr.Ue();return function(l,u,h,p,v){h===void 0&&(h=0),p===void 0&&(p=0),v===void 0&&(v=!0),typeof u=="number"&&(u=fr.t8(i,u,h,p)),!fr.fS(u,r)&&(fr.IH(s,n.getPosition(l),u),n.setPosition(l,s,v))}}(),this.setRotation=function(){var r=$i();return function(i,s,l,u,h,p){p===void 0&&(p=!0);var v=i.transformable;if(typeof s=="number"&&(s=tg(s,l,u,h)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,s);else{var y=n.getRotation(i.parentNode);Xg(r,y),B0(r,r),nc(v.localRotation,r,s),vv(v.localRotation,v.localRotation),p&&n.dirtifyLocal(i,v)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=Kr.create(),i=fr.Ue(),s=tg(0,0,0,1);return function(l){var u=l.localSkew[0]!==0||l.localSkew[1]!==0;if(u){if(Kr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,fr.al(1,1,1),l.origin),l.localSkew[0]!==0||l.localSkew[1]!==0){var h=Kr.identity(r);h[4]=Math.tan(l.localSkew[0]),h[1]=Math.tan(l.localSkew[1]),Kr.multiply(l.localTransform,l.localTransform,h)}var p=Kr.fromRotationTranslationScaleOrigin(r,s,i,l.localScale,l.origin);Kr.multiply(l.localTransform,l.localTransform,p)}else Kr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,l.localScale,l.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,xa.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var l=n.sortable;(!((i=l==null?void 0:l.sorted)===null||i===void 0)&&i.length||t.parsedStyle.zIndex)&&(l.dirtyChildren.indexOf(t)===-1&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=ly.ADDED);var u=t.transformable;u&&this.dirtifyWorld(t,u),u.frozen&&this.unfreezeParentToRoot(t),s&&t.dispatchEvent(fT)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,s=t.parentNode.sortable;(!((n=s==null?void 0:s.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=ly.REMOVED);var l=t.parentNode.childNodes.indexOf(t);l>-1&&t.parentNode.childNodes.splice(l,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.getGeometryBounds(),t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var l=s.origin;l[0]=n[0],l[1]=n[1],l[2]=n[2]||0,this.dirtifyLocal(t,s)}},e.prototype.setLocalEulerAngles=function(t,n,r,i,s){r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=!0),typeof n=="number"&&(n=fr.al(n,r,i));var l=t.transformable;Zg(l.localRotation,n[0],n[1],n[2]),s&&this.dirtifyLocal(t,l)},e.prototype.scaleLocal=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable;fr.Jp(i.localScale,i.localScale,fr.al(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(t,i)},e.prototype.setLocalScale=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable,s=fr.al(n[0],n[1],n[2]||i.localScale[2]);fr.fS(s,i.localScale)||(fr.JG(i.localScale,s),r&&this.dirtifyLocal(t,i))},e.prototype.setLocalRotation=function(t,n,r,i,s,l){l===void 0&&(l=!0),typeof n=="number"&&(n=tg(n,r,i,s));var u=t.transformable;Xg(u.localRotation,n),l&&this.dirtifyLocal(t,u)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=om.al(n,r));var i=t.transformable;om.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,s){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=s,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1];u.affectChildren?l.forEach(function(h){r(h,u)}):r(l,u)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)qO(r),r=r.parentNode;n&&t.forEach(function(i){qO(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var l=s[t].indexOf(i);s[t].splice(l,1)}}if(r){var u=this.displayObjectDependencyMap.get(r);u||(this.displayObjectDependencyMap.set(r,{}),u=this.displayObjectDependencyMap.get(r)),u[t]||(u[t]=[]),u[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(s){n.dirtifyToRoot(s,!0),s.dispatchEvent(new _m(Va.ATTR_MODIFIED,s,n,n,i,_m.MODIFICATION,n,n)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return Kr.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return Kr.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return Kr.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=Kr.getTranslation(fr.Ue(),n),i=Kr.getRotation($i(),n),s=Kr.getScaling(fr.Ue(),n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,r,!1),this.setLocalRotation(t,i,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(_u.isEmpty(i))return null;var s=r||new _u;return s.setFromTransformedAABB(i,this.getWorldTransform(t)),s},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry;r.dirty&&Yr.styleValueRegistry.updateGeometry(t);var i=n?r.renderBounds:r.contentBounds||null;return i||new _u},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var s=n?i.renderBounds:i.bounds,l=this.getTransformedGeometryBounds(t,n,s),u=t.childNodes;if(u.forEach(function(v){var y=r.getBounds(v,n);y&&(l?l.add(y):(l=s||new _u,l.update(y.center,y.halfExtents)))}),l||(l=new _u),n){var h=nT(t);if(h){var p=h.parsedStyle.clipPath.getBounds(n);l?p&&(l=p.intersection(l)):l.update(p.center,p.halfExtents)}}return n?(i.renderBounds=l,i.renderBoundsDirty=!1):(i.bounds=l,i.boundsDirty=!1),l},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=Kr.create();t.parentNode.transformable&&(n=Kr.invert(Kr.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!_u.isEmpty(r)){var i=new _u;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,s=this.getGeometryBounds(t);_u.isEmpty(s)||(i=new _u,i.setFromTransformedAABB(s,this.getWorldTransform(t)));var l=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var u=(0,ie.CR)(i.getMin(),2),h=u[0],p=u[1],v=(0,ie.CR)(i.getMax(),2),y=v[0],b=v[1];return new W0(h+((l==null?void 0:l.left)||0),p+((l==null?void 0:l.top)||0),y-h,b-p)}return new W0((l==null?void 0:l.left)||0,(l==null?void 0:l.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||r.dirtifyWorldInternal(s,l)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?Kr.copy(n.worldTransform,n.localTransform):Kr.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),ep={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},n2=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,hT=/[!%),.:;?\]}'""]/,dT=/[$('"]/,F_=/[!),.:;?\]}'""]/,X1=/[([{'"]/,t4=/[)\]'"?!:;,.]/,QO=/[(['"...]/,n4=/[!%),.:;?\]}'"]/,yy=/[$([{'"#]/,r4=new RegExp("".concat(hT.source,"|").concat(F_.source,"|").concat(t4.source,"|").concat(n4.source)),i4=new RegExp("".concat(dT.source,"|").concat(X1.source,"|").concat(QO.source,"|").concat(yy.source)),JO=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(i4.exec(i)||r4.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,ie.ev)([],(0,ie.CR)(r),!1),s=i[i.length-2];if(!s)return r;var l=s[s.length-1];return i[i.length-2]=s.slice(0,-1),i[i.length-1]=l+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var l=ep.MetricsString+ep.BaselineSymbol,u=Math.ceil(s.measureText(l).width),h=Math.ceil(s.measureText(ep.BaselineSymbol).width),p=ep.HeightMultiplier*h;h=h*ep.BaselineMultiplier|0,i.width=u,i.height=p,s.fillStyle="#f00",s.fillRect(0,0,u,p),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,h);var v=s.getImageData(0,0,u||1,p||1).data,y=v.length,b=u*4,T=0,R=0,M=!1;for(T=0;T<h;++T){for(var I=0;I<b;I+=4)if(v[R+I]!==255){M=!0;break}if(!M)R+=b;else break}for(r.ascent=h-T,R=y-b,M=!1,T=p;T>h;--T){for(var I=0;I<b;I+=4)if(v[R+I]!==255){M=!0;break}if(!M)R-=b;else break}return r.descent=T-h,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,s=i===void 0?16:i,l=n.wordWrap,u=l===void 0?!1:l,h=n.lineHeight,p=n.lineWidth,v=p===void 0?1:p,y=n.textBaseline,b=y===void 0?"alphabetic":y,T=n.textAlign,R=T===void 0?"start":T,M=n.letterSpacing,I=M===void 0?0:M,N=n.textPath;n.textPathSide,n.textPathStartOffset;var U=n.leading,H=U===void 0?0:U,X=B_(n),$=this.measureFont(X,r);$.fontSize===0&&($.fontSize=s,$.ascent=s);var Q=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);Q.font=X,n.isOverflowing=!1;var ce=u?this.wordWrap(t,n,r):t,pe=ce.split(/(?:\r\n|\r|\n)/),Re=new Array(pe.length),je=0;if(N){N.getTotalLength();for(var Ke=0;Ke<pe.length;Ke++)var ft=Q.measureText(pe[Ke]).width+(pe[Ke].length-1)*I}else{for(var Ke=0;Ke<pe.length;Ke++){var Ye=Q.measureText(pe[Ke]).width+(pe[Ke].length-1)*I;Re[Ke]=Ye,je=Math.max(je,Ye)}var ft=je+v,it=h||$.fontSize+v,at=Math.max(it,$.fontSize+v)+(pe.length-1)*(it+H);it+=H;var vt=0;return b==="middle"?vt=-at/2:b==="bottom"||b==="alphabetic"||b==="ideographic"?vt=-at:(b==="top"||b==="hanging")&&(vt=0),{font:X,width:ft,height:at,lines:pe,lineWidths:Re,lineHeight:it,maxLineWidth:je,fontProperties:$,lineMetrics:Re.map(function(At,Ut){var Sn=0;return R==="center"||R==="middle"?Sn-=At/2:(R==="right"||R==="end")&&(Sn-=At),new W0(Sn-v/2,vt+Ut*it,At+v,it)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,s=n.wordWrapWidth,l=s===void 0?0:s,u=n.letterSpacing,h=u===void 0?0:u,p=n.maxLines,v=p===void 0?1/0:p,y=n.textOverflow,b=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),T=l+h,R="";y==="ellipsis"?R="...":y&&y!=="clip"&&(R=y);for(var M=[],I=0,N=0,U={},H=function(vt){return i.getFromCache(vt,h,U,b)},X=Array.from(R).reduce(function(vt,Vt){return vt+H(Vt)},0),$=Array.from(t),Q=0;Q<$.length;Q++){var ce=$[Q],pe=t[Q-1],Re=t[Q+1],je=H(ce);if(this.isNewline(ce)){if(I++,I>=v){n.isOverflowing=!0;break}N=0,M[I]="";continue}if(N>0&&N+je>T){if(I+1>=v){if(n.isOverflowing=!0,X>0&&X<=T){for(var Ke=M[I].length,ft=0,Ye=Ke,it=0;it<Ke;it++){var at=H(M[I][it]);if(ft+at+X>T){Ye=it;break}ft+=at}M[I]=(M[I]||"").slice(0,Ye)+R}break}if(I++,N=0,M[I]="",this.isBreakingSpace(ce))continue;this.canBreakInLastChar(ce)||(M=this.trimToBreakable(M),N=this.sumTextWidthByCache(M[I]||"",U)),this.shouldBreakByKinsokuShorui(ce,Re)&&(M=this.trimByKinsokuShorui(M),N+=H(pe||""))}N+=je,M[I]=(M[I]||"")+ce}return M.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:ep.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:ep.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,ie.ev)([],(0,ie.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var s=r.slice(i,i+1),l=this.isBreakingSpace(s),u=i+1,h=i+(l?0:1);return n[n.length-1]+=r.slice(u,r.length),n[n.length-2]=r.slice(0,h),n},e.prototype.canBreakInLastChar=function(t){return!(t&&n2.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!n2.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var s=r[t];if(typeof s!="number"){var l=t.length*n;s=i.measureText(t).width+l,r[t]=s}return s},e}(),Yr={},o4=function(){var e,t=new hf,n=new Kf;return e={},e[ai.CIRCLE]=new d0,e[ai.ELLIPSE]=new _g,e[ai.RECT]=t,e[ai.IMAGE]=t,e[ai.GROUP]=new J5,e[ai.LINE]=new lT,e[ai.TEXT]=new Bc(Yr),e[ai.POLYLINE]=n,e[ai.POLYGON]=n,e[ai.PATH]=new hs,e[ai.HTML]=null,e[ai.MESH]=null,e}(),a4=function(){var e,t=new wO,n=new Jx;return e={},e[Co.PERCENTAGE]=null,e[Co.NUMBER]=new e2,e[Co.ANGLE]=new SO,e[Co.DEFINED_PATH]=new TO,e[Co.PAINT]=t,e[Co.COLOR]=t,e[Co.FILTER]=new AO,e[Co.LENGTH]=n,e[Co.LENGTH_PERCENTAGE]=n,e[Co.LENGTH_PERCENTAGE_12]=new CO,e[Co.LENGTH_PERCENTAGE_14]=new K5,e[Co.COORDINATE]=new Jx,e[Co.OFFSET_DISTANCE]=new RO,e[Co.OPACITY_VALUE]=new MO,e[Co.PATH]=new PO,e[Co.LIST_OF_POINTS]=new IO,e[Co.SHADOW_BLUR]=new LO,e[Co.TEXT]=new DO,e[Co.TEXT_TRANSFORM]=new G1,e[Co.TRANSFORM]=new $u,e[Co.TRANSFORM_ORIGIN]=new xu,e[Co.Z_INDEX]=new Ol,e[Co.MARKER]=new OO,e}(),$1=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:{}};Yr.CameraContribution=gS,Yr.AnimationTimeline=null,Yr.EasingFunction=null,Yr.offscreenCanvasCreator=new X0,Yr.sceneGraphSelector=new e4,Yr.sceneGraphService=new Ga(Yr),Yr.textService=new JO(Yr),Yr.geometryUpdaterFactory=o4,Yr.CSSPropertySyntaxFactory=a4,Yr.styleValueRegistry=new EO(Yr),Yr.layoutRegistry=null,Yr.globalThis=$1(),Yr.enableCSSParsing=!1,Yr.enableDataset=!1,Yr.enableStyleSyntax=!0,Yr.enableAttributeDashCased=!1,Yr.enableSizeAttenuation=!1;var Av=0;function s4(){Av=0}var e3=new _m(Va.INSERTED,null,"","","",0,"",""),k_=new _m(Va.REMOVED,null,"","","",0,"",""),l4=new Hi(Va.DESTROY),t3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.call(this)||this;return n.entity=Av++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:Ux.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=Yr.enableCSSParsing?{opacity:Ec,fillOpacity:Ec,strokeOpacity:Ec,fill:Ec,stroke:Ec,transform:Ec,transformOrigin:Ec,visibility:Ec,pointerEvents:Ec,lineWidth:Ec,lineCap:Ec,lineJoin:Ec,increasedLineWidthForHitTesting:Ec,fontSize:Ec,fontFamily:Ec,fontStyle:Ec,fontWeight:Ec,fontVariant:Ec,textAlign:Ec,textBaseline:Ec,textTransform:Ec,zIndex:Ec,filter:Ec,shadowType:Ec}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(ic)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(IC);return Yr.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(e3.relatedNode=this,n.dispatchEvent(e3)),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return k_.relatedNode=this,n.dispatchEvent(k_),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Yr.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return Yr.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return Yr.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return Yr.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return Yr.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return Yr.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return Yr.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return Yr.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(Yr.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(s){return s!==r&&n(s)?(i=s,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(s){s!==r&&n(s)&&i.push(s)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);r.forEach(function(l,u){var h;return(h=n.parentNode)===null||h===void 0?void 0:h.appendChild(l,s+u+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this),l=(0,ie.CR)(r),u=l[0],h=l.slice(1);this.parentNode.appendChild(u,s),(n=u).after.apply(n,(0,ie.ev)([],(0,ie.CR)(h),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s){return n.appendChild(s)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s,l){return n.appendChild(s,l)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(l4),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return Yr.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return Yr.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return Yr.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return Yr.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return Yr.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(ES(n))return Yr.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(Yr.enableAttributeDashCased){var i=SS(n);r=this.attributes[i]}return Yr.enableCSSParsing&&(0,xa.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i,s){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(ic)},t.prototype.getAttributeNode=function(n){throw new Error(ic)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(ic)},t.prototype.hasAttributeNS=function(n,r){throw new Error(ic)},t.prototype.removeAttributeNS=function(n,r){throw new Error(ic)},t.prototype.removeAttributeNode=function(n){throw new Error(ic)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(ic)},t.prototype.setAttributeNode=function(n){throw new Error(ic)},t.prototype.setAttributeNodeNS=function(n){throw new Error(ic)},t.prototype.toggleAttribute=function(n,r){throw new Error(ic)},t}(To);function ml(e){return!!(e!=null&&e.nodeName)}var n3=Yr.globalThis.Proxy?Yr.globalThis.Proxy:function(){},Cv=new _m(Va.ATTR_MODIFIED,null,null,null,null,_m.MODIFICATION,null,null),r3={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},i3={fill:sy,stroke:sy,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},c4=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],pT=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(c4),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),U_="data-",qf=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||ai.GROUP,Yr.enableCSSParsing?(Object.assign(r.attributes,r3),Object.assign(r.parsedStyle,i3,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),Yr.enableDataset&&(r.dataset=new n3({},{get:function(i,s){var l="".concat(U_).concat(xS(s));return i[l]!==void 0?i[l]:r.getAttribute(l)},set:function(i,s,l){return r.setAttribute("".concat(U_).concat(xS(s)),l),!0}})),Yr.enableStyleSyntax&&(r.style=new n3({setProperty:function(i,s){r.setAttribute(i,s)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,s){return i[s]!==void 0?i[s]:r.getAttribute(s)},set:function(i,s,l){return r.setAttribute(s,l),!0}})),r}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,ie.pi)({},this.attributes);for(var s in i){var l=i[s];ml(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(i[s]=l.cloneNode(n)),r&&(i[s]=r(s,l))}var u=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return u.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(h){if(!h.style.isMarker){var p=h.cloneNode(n);u.appendChild(p)}}),u},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};Yr.enableCSSParsing&&(i.usedAttributes=pT);var s=n;if(Yr.enableAttributeDashCased){s={};for(var l in n){var u=SS(l);s[u]=n[l]}}Yr.styleValueRegistry.processProperties(this,s,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),Yr.enableAttributeDashCased&&(n=SS(n)),!js(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:s}),e.prototype.setAttribute.call(this,n,r))},t.prototype.internalSetAttribute=function(n,r,i){var s;i===void 0&&(i={});var l=this.renderable,u=this.attributes[n],h=this.parsedStyle[n];Yr.styleValueRegistry.processProperties(this,(s={},s[n]=r,s),i),l.dirty=!0;var p=this.parsedStyle[n];this.isConnected&&(Cv.relatedNode=this,Cv.prevValue=u,Cv.newValue=r,Cv.attrName=n,Cv.prevParsedValue=h,Cv.newParsedValue=p,this.isMutationObserved?this.dispatchEvent(Cv):(Cv.target=this,this.ownerDocument.defaultView.dispatchEvent(Cv,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,u,r,h,p)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,ie.CR)(n.getMin(),2),i=r[0],s=r[1],l=(0,ie.CR)(n.getMax(),2),u=l[0],h=l[1];return new W0(i,s,u-i,h-s)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Yr.sceneGraphService.setOrigin(this,Of(n,r,i)),this},t.prototype.getOrigin=function(){return Yr.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Yr.sceneGraphService.setPosition(this,Of(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Yr.sceneGraphService.setLocalPosition(this,Of(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Yr.sceneGraphService.translate(this,Of(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Yr.sceneGraphService.translateLocal(this,Of(n,r,i)),this},t.prototype.getPosition=function(){return Yr.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return Yr.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Of(n,r,i)),Yr.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Of(n,r,i)),Yr.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return Yr.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return Yr.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,ie.CR)(fS(fr.Ue(),Yr.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Kd(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,ie.CR)(fS(fr.Ue(),Yr.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Kd(r)},t.prototype.setEulerAngles=function(n){return Yr.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return Yr.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,xa.Z)(r)&&(0,xa.Z)(i)?Yr.sceneGraphService.rotateLocal(this,0,0,n):Yr.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,xa.Z)(r)&&(0,xa.Z)(i)?Yr.sceneGraphService.rotate(this,0,0,n):Yr.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,s){return Yr.sceneGraphService.setRotation(this,n,r,i,s),this},t.prototype.setLocalRotation=function(n,r,i,s){return Yr.sceneGraphService.setLocalRotation(this,n,r,i,s),this},t.prototype.setLocalSkew=function(n,r){return Yr.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return Yr.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return Yr.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return Yr.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return Yr.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return Yr.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return Yr.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){Yr.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,s=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return s?s.play(this,n,r):null},t.prototype.isVisible=function(){var n,r;return Yr.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=(0,ie.CR)(r,2),l=s[0],u=s[1];return l?vl(l)?(Object.keys(l).forEach(function(h){n.setAttribute(h,l[h])}),this):r.length===2?(this.setAttribute(l,u),this):this.attributes[l]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,ie.CR)(Kr.getTranslation(fr.Ue(),r),2),s=i[0],l=i[1],u=(0,ie.CR)(Kr.getScaling(fr.Ue(),r),2),h=u[0],p=u[1],v=Kr.getRotation($i(),r),y=(0,ie.CR)(fS(fr.Ue(),v),3),b=y[0],T=y[2];return hS(b||T,s,l,h,p)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,ie.CR)(dS(n),5),i=r[0],s=r[1],l=r[2],u=r[3],h=r[4];this.setEulerAngles(h).setPosition(i,s).setLocalScale(l,u)},t.prototype.setLocalMatrix=function(n){var r=(0,ie.CR)(dS(n),5),i=r[0],s=r[1],l=r[2],u=r[3],h=r[4];this.setLocalEulerAngles(h).setLocalPosition(i,s).setLocalScale(l,u)},t.prototype.show=function(){Yr.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){Yr.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(t3),$0=function(e){(0,ie.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ie.pi)({type:ai.CIRCLE},n))||this}return t}(qf),Y1=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,(0,ie.pi)({style:Yr.enableCSSParsing?(0,ie.pi)({},i):(0,ie.pi)({},i)},s))||this,r.isCustomElement=!0,r}return t}(qf),bm=function(e){(0,ie.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ie.pi)({type:ai.ELLIPSE},n))||this}return t}(qf),Mf=function(e){(0,ie.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ie.pi)({type:ai.GROUP},n))||this}return t}(qf),z_=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,(0,ie.pi)({type:ai.HTML,style:Yr.enableCSSParsing?(0,ie.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,ie.pi)({},i)},s))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,s=n.width,l=n.height;return new W0(r,i,s,l)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),s=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),l=new _u,u=i.left-((s==null?void 0:s.left)||0),h=i.top-((s==null?void 0:s.top)||0);return l.setMinMax([u,h,0],[u+i.width,h+i.height,0]),l},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=Kr.invert(Kr.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!_u.isEmpty(r)){var i=new _u;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(qf),Ov=function(e){(0,ie.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ie.pi)({type:ai.IMAGE},n))||this}return t}(qf),_y=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:ai.LINE,style:(0,ie.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},s))||this,r.markerStartAngle=0,r.markerEndAngle=0;var l=r.parsedStyle,u=l.markerStart,h=l.markerEnd;return u&&ml(u)&&(r.markerStartAngle=u.getLocalEulerAngles(),r.appendChild(u)),h&&ml(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ml(s)&&(this.markerStartAngle=0,s.remove()),l&&ml(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"&&(s&&ml(s)&&(this.markerEndAngle=0,s.remove()),l&&ml(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,u=r.markerEndOffset,h=r.x1,p=r.x2,v=r.y1,y=r.y2,b=n?i:s;if(!(!b||!ml(b))){var T=0,R,M,I,N,U,H;n?(I=h,N=v,R=p-h,M=y-v,U=l||0,H=this.markerStartAngle):(I=p,N=y,R=h-p,M=v-y,U=u||0,H=this.markerEndAngle),T=Math.atan2(M,R),b.setLocalEulerAngles(T*180/Math.PI+H),b.setLocalPosition(I+Math.cos(T)*U,N+Math.sin(T)*U)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.x1,l=i.y1,u=i.x2,h=i.y2,p=$d(s,l,u,h,n),v=p.x,y=p.y,b=fr.fF(fr.Ue(),fr.al(v,y,0),r?this.getWorldTransform():this.getLocalTransform());return new Yf(b[0],b[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,s=n.x2,l=n.y2;return lg(r,i,s,l)},t}(qf),vd=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:ai.PATH,style:Yr.enableCSSParsing?(0,ie.pi)({d:"",miterLimit:""},i):(0,ie.pi)({},i),initialParsedStyle:Yr.enableCSSParsing?null:{miterLimit:4,d:(0,ie.pi)({},zx)}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,u=l.markerStart,h=l.markerEnd,p=l.markerMid;return u&&ml(u)&&(r.markerStartAngle=u.getLocalEulerAngles(),r.appendChild(u)),p&&ml(p)&&r.placeMarkerMid(p),h&&ml(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ml(s)&&(this.markerStartAngle=0,s.remove()),l&&ml(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&ml(s)&&(this.markerEndAngle=0,s.remove()),l&&ml(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,u=r.markerEndOffset,h=n?i:s;if(!(!h||!ml(h))){var p=0,v,y,b,T,R,M;if(n){var I=(0,ie.CR)(this.getStartTangent(),2),N=I[0],U=I[1];b=U[0],T=U[1],v=N[0]-U[0],y=N[1]-U[1],R=l||0,M=this.markerStartAngle}else{var H=(0,ie.CR)(this.getEndTangent(),2),N=H[0],U=H[1];b=U[0],T=U[1],v=N[0]-U[0],y=N[1]-U[1],R=u||0,M=this.markerEndAngle}p=Math.atan2(y,v),h.setLocalEulerAngles(p*180/Math.PI+M),h.setLocalPosition(b+Math.cos(p)*R,T+Math.sin(p)*R)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(p){p.remove()}),n&&ml(n))for(var i=1;i<r.length-1;i++){var s=(0,ie.CR)(r[i].currentPoint,2),l=s[0],u=s[1],h=i===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,u)}},t.prototype.getTotalLength=function(){return Zx(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,s=uh(i,n),l=s.x,u=s.y,h=fr.fF(fr.Ue(),fr.al(l,u,0),r?this.getWorldTransform():this.getLocalTransform());return new Yf(h[0],h[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Zx(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,s=n[1].currentPoint,l=n[1].startTangent;r=[],l?(r.push([i[0]-l[0],i[1]-l[1]]),r.push([i[0],i[1]])):(r.push([s[0],s[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var s=n[r-2].currentPoint,l=n[r-1].currentPoint,u=n[r-1].endTangent;i=[],u?(i.push([l[0]-u[0],l[1]-u[1]]),i.push([l[0],l[1]])):(i.push([s[0],s[1]]),i.push([l[0],l[1]]))}return i},t}(qf),K1=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:ai.POLYGON,style:Yr.enableCSSParsing?(0,ie.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,ie.pi)({},i),initialParsedStyle:Yr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,u=l.markerStart,h=l.markerEnd,p=l.markerMid;return u&&ml(u)&&(r.markerStartAngle=u.getLocalEulerAngles(),r.appendChild(u)),p&&ml(p)&&r.placeMarkerMid(p),h&&ml(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ml(s)&&(this.markerStartAngle=0,s.remove()),l&&ml(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&ml(s)&&(this.markerEndAngle=0,s.remove()),l&&ml(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,u=r.markerEndOffset,h=r.points,p=(h||{}).points,v=n?i:s;if(!(!v||!ml(v)||!p)){var y=0,b,T,R,M,I,N;if(R=p[0][0],M=p[0][1],n)b=p[1][0]-p[0][0],T=p[1][1]-p[0][1],I=l||0,N=this.markerStartAngle;else{var U=p.length;this.parsedStyle.isClosed?(b=p[U-1][0]-p[0][0],T=p[U-1][1]-p[0][1]):(R=p[U-1][0],M=p[U-1][1],b=p[U-2][0]-p[U-1][0],T=p[U-2][1]-p[U-1][1]),I=u||0,N=this.markerEndAngle}y=Math.atan2(T,b),v.setLocalEulerAngles(y*180/Math.PI+N),v.setLocalPosition(R+Math.cos(y)*I,M+Math.sin(y)*I)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(p){p.remove()}),this.markerMidList=[],n&&ml(n)&&i)for(var s=1;s<(this.parsedStyle.isClosed?i.length:i.length-1);s++){var l=i[s][0],u=i[s][1],h=s===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,u)}},t}(qf),q1=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:ai.POLYLINE,style:Yr.enableCSSParsing?(0,ie.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,ie.pi)({},r),initialParsedStyle:Yr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return tO(this)},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],l=0,u,h,p=this.getTotalLength();i.forEach(function(I,N){i[N+1]&&(u=[0,0],u[0]=l/p,h=lg(I[0],I[1],i[N+1][0],i[N+1][1]),l+=h,u[1]=l/p,s.push(u))}),this.parsedStyle.points.segments=s}var v=0,y=0;this.parsedStyle.points.segments.forEach(function(I,N){n>=I[0]&&n<=I[1]&&(v=(n-I[0])/(I[1]-I[0]),y=N)});var b=$d(i[y][0],i[y][1],i[y+1][0],i[y+1][1],v),T=b.x,R=b.y,M=fr.fF(fr.Ue(),fr.al(T,R,0),r?this.getWorldTransform():this.getLocalTransform());return new Yf(M[0],M[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(K1),md=function(e){(0,ie.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ie.pi)({type:ai.RECT},n))||this}return t}(qf),mh=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:ai.TEXT,style:Yr.enableCSSParsing?(0,ie.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,ie.pi)({fill:"black"},r)},i))||this}return t.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},t}(qf),o3=function(){function e(){this.registry={},this.define(ai.CIRCLE,$0),this.define(ai.ELLIPSE,bm),this.define(ai.RECT,md),this.define(ai.IMAGE,Ov),this.define(ai.LINE,_y),this.define(ai.GROUP,Mf),this.define(ai.PATH,vd),this.define(ai.POLYGON,K1),this.define(ai.POLYLINE,q1),this.define(ai.TEXT,mh),this.define(ai.HTML,z_)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),r2={number:function(e){return new Fl(e)},percent:function(e){return new Fl(e,"%")},px:function(e){return new Fl(e,"px")},em:function(e){return new Fl(e,"em")},rem:function(e){return new Fl(e,"rem")},deg:function(e){return new Fl(e,"deg")},grad:function(e){return new Fl(e,"grad")},rad:function(e){return new Fl(e,"rad")},turn:function(e){return new Fl(e,"turn")},s:function(e){return new Fl(e,"s")},ms:function(e){return new Fl(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,s=e.syntax;Yr.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:s})},registerLayout:function(e,t){Yr.layoutRegistry.registerLayout(e,t)}},a3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Yr.AnimationTimeline(n)}catch(i){}var r={};return Qx.forEach(function(i){var s=i.n,l=i.inh,u=i.d;l&&u&&(r[s]=O_(u)?u(ai.GROUP):u)}),n.documentElement=new Mf({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?mh:Mf);var s=new i(r);return s.ownerDocument=this,s},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(ic)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,s){var l=this.defaultView.context.rBushRoot,u=l.search({minX:n,minY:r,maxX:i,maxY:s}),h=[];return u.forEach(function(p){var v=p.displayObject,y=v.parsedStyle.pointerEvents,b=y===void 0?"auto":y,T=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!T||T&&v.isVisible())&&!v.isCulled()&&v.isInteractive()&&h.push(v)}),h.sort(function(p,v){return v.sortable.renderOrder-p.sortable.renderOrder}),h},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,u=this.defaultView.getConfig(),h=u.width,p=u.height;if(s<0||l<0||s>h||l>p)return null;var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T&&T[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,ie.mG)(this,void 0,void 0,function(){var i,s,l,u,h,p,v,y,b,T;return(0,ie.Jh)(this,function(R){switch(R.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,u=this.defaultView.getConfig(),h=u.width,p=u.height,s<0||l<0||s>h||l>p?[2,null]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=R.sent().picked,[2,T&&T[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,u=this.defaultView.getConfig(),h=u.width,p=u.height;if(s<0||l<0||s>h||l>p)return[];var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T[T.length-1]!==this.documentElement&&T.push(this.documentElement),T},t.prototype.elementsFromPoint=function(n,r){return(0,ie.mG)(this,void 0,void 0,function(){var i,s,l,u,h,p,v,y,b,T;return(0,ie.Jh)(this,function(R){switch(R.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,u=this.defaultView.getConfig(),h=u.width,p=u.height,s<0||l<0||s>h||l>p?[2,[]]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=R.sent().picked,T[T.length-1]!==this.documentElement&&T.push(this.documentElement),[2,T]}})})},t.prototype.appendChild=function(n,r){throw new Error(w_)},t.prototype.insertBefore=function(n,r){throw new Error(w_)},t.prototype.removeChild=function(n,r){throw new Error(w_)},t.prototype.replaceChild=function(n,r,i){throw new Error(w_)},t.prototype.append=function(){throw new Error(w_)},t.prototype.prepend=function(){throw new Error(w_)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(To),s3=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,s=this.strategies;r.hooks.cull.tap(e.tag,function(l){if(l){var u=l.cullable;return s.length===0?u.visible=i.unculledEntities.indexOf(l.entity)>-1:u.visible=s.every(function(h){return h.isVisible(n,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new Hi(Va.CULLED)),null)}return l}),r.hooks.afterRender.tap(e.tag,function(l){l.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),vT=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new gy(null),this.rootWheelEvent=new ri(null),this.onPointerMove=function(n){var r,i,s,l,u=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView;if(!(u.supportsTouchEvents&&n.pointerType==="touch")){var h=t.normalizeToPointerEvent(n,u);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,u,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,s,l,u=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView,h=t.normalizeToPointerEvent(n,u);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,u,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}).picked;return l[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(s){var l=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(l)}),r.hooks.pointerDown.tap(e.tag,function(s){var l,u;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.normalizeToPointerEvent(s,i);if(n.autoPreventDefault&&h[0].isNormalized){var p=s.cancelable||!("cancelable"in s);p&&s.preventDefault()}try{for(var v=(0,ie.XA)(h),y=v.next();!y.done;y=v.next()){var b=y.value,T=n.bootstrapEvent(n.rootPointerEvent,b,i,s);n.context.eventService.mapEvent(T)}}catch(R){l={error:R}}finally{try{y&&!y.done&&(u=v.return)&&u.call(v)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(s){var l,u;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.context.contextService.getDomElement(),p=n.context.eventService.isNativeEventFromCanvas(h,s),v=p?"":"outside",y=n.normalizeToPointerEvent(s,i);try{for(var b=(0,ie.XA)(y),T=b.next();!T.done;T=b.next()){var R=T.value,M=n.bootstrapEvent(n.rootPointerEvent,R,i,s);M.type+=v,n.context.eventService.mapEvent(M)}}catch(I){l={error:I}}finally{try{T&&!T.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(s){var l,u,h=n.normalizeToPointerEvent(s,i);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=n.bootstrapEvent(n.rootPointerEvent,y,i,s);n.context.eventService.mapEvent(b)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),l=s.x,u=s.y;t.viewport.x=l,t.viewport.y=u;var h=this.context.eventService.viewport2Canvas(t.viewport),p=h.x,v=h.y;return t.canvas.x=p,t.canvas.y=v,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=iT[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),i=r.x,s=r.y;n.viewport.x=i,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),u=l.x,h=l.y;return n.canvas.x=u,n.canvas.y=h,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=D_.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var s=t.changedTouches[i];js(s.button)&&(s.button=0),js(s.buttons)&&(s.buttons=1),js(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),js(s.width)&&(s.width=s.radiusX||1),js(s.height)&&(s.height=s.radiusY||1),js(s.tiltX)&&(s.tiltX=0),js(s.tiltY)&&(s.tiltY=0),js(s.pointerType)&&(s.pointerType="touch"),js(s.pointerId)&&(s.pointerId=s.identifier||0),js(s.pressure)&&(s.pressure=s.force||.5),js(s.twist)&&(s.twist=0),js(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(n.isMouseEvent(t)){var l=t;js(l.isPrimary)&&(l.isPrimary=!0),js(l.width)&&(l.width=1),js(l.height)&&(l.height=1),js(l.tiltX)&&(l.tiltX=0),js(l.tiltY)&&(l.tiltY=0),js(l.pointerType)&&(l.pointerType="mouse"),js(l.pointerId)&&(l.pointerId=jO),js(l.pressure)&&(l.pressure=.5),js(l.twist)&&(l.twist=0),js(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,r.push(l)}else r.push(t);return r},e.tag="Event",e}(),l3=[ai.CIRCLE,ai.ELLIPSE,ai.IMAGE,ai.RECT,ai.LINE,ai.POLYLINE,ai.POLYGON,ai.TEXT,ai.PATH,ai.HTML],Q1=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,s=n.cullable;if(!s.enable)return!0;var l=n.getRenderBounds();if(_u.isEmpty(l))return!1;var u=t.getFrustum(),h=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,l,h||pm.INDETERMINATE,u.planes),s.visible=s.visibilityPlaneMask!==pm.OUTSIDE,s.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===pm.OUTSIDE||r===pm.INSIDE)return r;for(var s=pm.INSIDE,l=l3.indexOf(t.nodeName)>-1,u=0,h=i.length;u<h;++u){var p=1<<u;if(r&p&&!(l&&(u===4||u===5))){var v=i[u],y=v.normal,b=v.distance;if(fr.AK(y,n.getPositiveFarPoint(i[u]))+b<0)return pm.OUTSIDE;fr.AK(y,n.getNegativeFarPoint(i[u]))+b<0&&(s|=p)}}return s},e}(),c3=function(){function e(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return e.prototype.apply=function(t){var n=this,r,i=t.renderingService,s=t.renderingContext,l=t.rBushRoot,u=s.root.ownerDocument.defaultView;this.rBush=l;var h=function(T){var R=T.target;R.renderable.dirty=!0,i.dirtify()},p=function(T){var R=T.detail.affectChildren,M=T.target;R&&M.forEach(function(N){n.toSync.add(N)});for(var I=M;I;)I.renderable&&n.toSync.add(I),I=I.parentElement;i.dirtify()},v=function(T){var R=T.target;Yr.enableSizeAttenuation&&Yr.styleValueRegistry.updateSizeAttenuation(R,u.getCamera().getZoom()),Yr.enableCSSParsing&&Yr.styleValueRegistry.recalc(R),Yr.sceneGraphService.dirtifyToRoot(R),i.dirtify()},y=function(T){var R=T.target,M=R.rBushNode;M.aabb&&n.rBush.remove(M.aabb),n.toSync.delete(R),Yr.sceneGraphService.dirtifyToRoot(R),i.dirtify()};i.hooks.init.tap(e.tag,function(){u.addEventListener(Va.MOUNTED,v),u.addEventListener(Va.UNMOUNTED,y),u.addEventListener(Va.ATTR_MODIFIED,h),u.addEventListener(Va.BOUNDS_CHANGED,p)}),i.hooks.destroy.tap(e.tag,function(){u.removeEventListener(Va.MOUNTED,v),u.removeEventListener(Va.UNMOUNTED,y),u.removeEventListener(Va.ATTR_MODIFIED,h),u.removeEventListener(Va.BOUNDS_CHANGED,p),n.toSync.clear()});var b=(r=Yr.globalThis.requestIdleCallback)!==null&&r!==void 0?r:ym.bind(Yr.globalThis);i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,b(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},e.prototype.syncRTree=function(t){var n=this;if(t===void 0&&(t=!1),!(!t&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var s=i.rBushNode;s&&s.aabb&&n.rBush.remove(s.aabb);var l=i.getRenderBounds();if(l){var u=i.renderable;t&&(u.dirtyRenderBounds||(u.dirtyRenderBounds=new _u),u.dirtyRenderBounds.update(l.center,l.halfExtents));var h=(0,ie.CR)(l.getMin(),2),p=h[0],v=h[1],y=(0,ie.CR)(l.getMax(),2),b=y[0],T=y[1];s.aabb||(s.aabb={}),s.aabb.displayObject=i,s.aabb.minX=p,s.aabb.minY=v,s.aabb.maxX=b,s.aabb.maxY=T}s.aabb&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.minX)&&!isNaN(s.aabb.minY)&&r.push(s.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},e.tag="Prepare",e}();function u3(e){return!!e.document}var gd;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(gd||(gd={}));var mT=500,f3=.1,h3=1e3,i2=new Hi(Va.MOUNTED),gT=new Hi(Va.UNMOUNTED),yT=new Hi(gd.BEFORE_RENDER),_T=new Hi(gd.RERENDER),bT=new Hi(gd.AFTER_RENDER),xT=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=qf,r.inited=!1,r.context={},r.document=new a3,r.document.defaultView=r,r.customElements=new o3;var i=n.container,s=n.canvas,l=n.offscreenCanvas,u=n.width,h=n.height,p=n.devicePixelRatio,v=n.renderer,y=n.background,b=n.cursor,T=n.document,R=n.requestAnimationFrame,M=n.cancelAnimationFrame,I=n.createImage,N=n.supportsPointerEvents,U=n.supportsTouchEvents,H=n.supportsCSSTransform,X=n.supportsMutipleCanvasesInOneContainer,$=n.useNativeClickEvent,Q=n.alwaysTriggerPointerEventOnCanvas,ce=n.isTouchEvent,pe=n.isMouseEvent;X||BO(i,r);var Re=u,je=h,Ke=p;return s&&(Ke=p||L_&&window.devicePixelRatio||1,Ke=Ke>=1?Math.ceil(Ke):1,Re=u||UO(s)||s.width/Ke,je=h||zO(s)||s.height/Ke),l&&(Yr.offscreenCanvas=l),r.devicePixelRatio=Ke,r.requestAnimationFrame=R!=null?R:ym.bind(Yr.globalThis),r.cancelAnimationFrame=M!=null?M:sT.bind(Yr.globalThis),r.supportsTouchEvents=U!=null?U:"ontouchstart"in Yr.globalThis,r.supportsPointerEvents=N!=null?N:!!Yr.globalThis.PointerEvent,r.isTouchEvent=ce!=null?ce:function(ft){return r.supportsTouchEvents&&ft instanceof Yr.globalThis.TouchEvent},r.isMouseEvent=pe!=null?pe:function(ft){return!Yr.globalThis.MouseEvent||ft instanceof Yr.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(ft instanceof Yr.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:s,width:Re,height:je,renderer:v,offscreenCanvas:l,devicePixelRatio:Ke,cursor:b||"default",background:y||"transparent",createImage:I,document:T,supportsCSSTransform:H,useNativeClickEvent:$,alwaysTriggerPointerEventOnCanvas:Q}),r.initDefaultCamera(Re,je,v.clipSpaceNearZ),r.initRenderer(v,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var s=this,l=new Yr.CameraContribution;l.clipSpaceNearZ=i,l.setType(Cl.EXPLORING,A_.DEFAULT).setPosition(n/2,r/2,mT).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,f3,h3),l.canvas=this,l.eventEmitter.on(vS.UPDATED,function(){s.context.renderingContext.renderReasons.add(Jd.CAMERA_CHANGED),Yr.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){Yr.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Hi(gd.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var s=this.getRoot();this.unmountChildren(s),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Hi(gd.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,r/2,mT).setFocalPoint(n/2,r/2,0),l===ud.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,r/2,r/-2,s.getNear(),s.getFar()):s.setAspect(n/r),this.dispatchEvent(new Hi(gd.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(n){var r=this;n&&(yT.detail=n,bT.detail=n),this.dispatchEvent(yT);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(_T)}),this.dispatchEvent(bT)},t.prototype.run=function(){var n=this,r=function(i,s){n.render(s),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new f0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new vT,new c3,new s3([new Q1])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,ie.pi)((0,ie.pi)({},Yr),this.context)),this.context.renderingService=new cT(Yr,this.context),this.context.eventService=new Z1(Yr,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var s=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){s.inited=!0,r?i?s.requestAnimationFrame(function(){s.dispatchEvent(new Hi(gd.READY))}):s.dispatchEvent(new Hi(gd.READY)):s.dispatchEvent(new Hi(gd.RENDERER_CHANGED)),s.readyPromise&&s.resolveReadyPromise(),r||s.getRoot().forEach(function(l){var u=l.renderable;u&&(u.renderBoundsDirty=!0,u.boundsDirty=!0,u.dirty=!0)}),s.mountChildren(s.getRoot()),n.getConfig().enableAutoRendering&&s.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(s){s.context=r.context,s.init(Yr)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,ie.ev)([],(0,ie.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(s){s.destroy(Yr)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(gT):(gT.target=n,this.dispatchEvent(gT,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(i2):(i2.target=n,this.dispatchEvent(i2,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(mo),p3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=oy(r),this.relAzimuth=oy(n),this.relRoll=oy(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Cl.EXPLORING){var s=Xo($i(),[1,0,0],ol((this.rotateWorld?1:-1)*this.relElevation)),l=Xo($i(),[0,1,0],ol((this.rotateWorld?1:-1)*this.relAzimuth)),u=Xo($i(),[0,0,1],ol(this.relRoll)),h=nc($i(),l,s);h=nc($i(),h,u);var p=Kr.fromQuat(Kr.create(),h);Kr.translate(this.matrix,this.matrix,[0,0,-this.distance]),Kr.multiply(this.matrix,this.matrix,p),Kr.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=Of(n,r,0),s=fr.d9(this.position);return fr.IH(s,s,fr.bA(fr.Ue(),this.right,i[0])),fr.IH(s,s,fr.bA(fr.Ue(),this.up,i[1])),this._setPosition(s),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=fr.d9(this.position),s=n*this.dollyingStep,l=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,i[0]+=s*r[0],i[1]+=s*r[1],i[2]+=s*r[2],this._setPosition(i),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getDistance():this.type===Cl.TRACKING&&fr.IH(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,s,l,u;r===void 0&&(r={});var h=r.position,p=h===void 0?this.position:h,v=r.focalPoint,y=v===void 0?this.focalPoint:v,b=r.roll,T=r.zoom,R=new Yr.CameraContribution;R.setType(this.type,void 0),R.setPosition(p[0],(i=p[1])!==null&&i!==void 0?i:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),R.setFocalPoint(y[0],(l=y[1])!==null&&l!==void 0?l:this.focalPoint[1],(u=y[2])!==null&&u!==void 0?u:this.focalPoint[2]),R.setRoll(b!=null?b:this.roll),R.setZoom(T!=null?T:this.zoom);var M={name:n,matrix:Kr.clone(R.getWorldTransform()),right:fr.d9(R.right),up:fr.d9(R.up),forward:fr.d9(R.forward),position:fr.d9(R.getPosition()),focalPoint:fr.d9(R.getFocalPoint()),distanceVector:fr.d9(R.getDistanceVector()),distance:R.getDistance(),dollyingStep:R.getDollyingStep(),azimuth:R.getAzimuth(),elevation:R.getElevation(),roll:R.getRoll(),relAzimuth:R.relAzimuth,relElevation:R.relElevation,relRoll:R.relRoll,zoom:R.getZoom()};return this.landmarks.push(M),M},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var s=c(n)?this.landmarks.find(function(je){return je.name===n}):n;if(s){var l=(0,Zl.Z)(r)?{duration:r}:r,u=l.easing,h=u===void 0?"linear":u,p=l.duration,v=p===void 0?100:p,y=l.easingFunction,b=y===void 0?void 0:y,T=l.onfinish,R=T===void 0?void 0:T,M=l.onframe,I=M===void 0?void 0:M,N=.01;this.cancelLandmarkAnimation();var U=s.position,H=s.focalPoint,X=s.zoom,$=s.roll,Q=b||Yr.EasingFunction(h),ce,pe=function(){i.setFocalPoint(H),i.setPosition(U),i.setRoll($),i.setZoom(X),i.computeMatrix(),i.triggerUpdate(),R==null||R()};if(v===0)return pe();var Re=function(je){ce===void 0&&(ce=je);var Ke=je-ce;if(Ke>=v){pe();return}var ft=Q(Ke/v),Ye=fr.Ue(),it=fr.Ue(),at=1,vt=0;fr.t7(Ye,i.focalPoint,H,ft),fr.t7(it,i.position,U,ft),vt=i.roll*(1-ft)+$*ft,at=i.zoom*(1-ft)+X*ft,i.setFocalPoint(Ye),i.setPosition(it),i.setRoll(vt),i.setZoom(at);var Vt=fr.TK(Ye,H)+fr.TK(it,U);if(Vt<=N&&X==null&&$==null)return pe();i.computeMatrix(),i.triggerUpdate(),Ke<v&&(I==null||I(ft),i.landmarkAnimationID=i.canvas.requestAnimationFrame(Re))};this.canvas.requestAnimationFrame(Re)}},t}(gS);Yr.CameraContribution=p3;var ET=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),v3=0,by=new WeakMap,As=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],s=g3(i,t);if(s){n[r-1]=s;return}}else xm(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(Va.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(Va.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(Va.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(Va.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(Va.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(Va.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=by.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case Va.ATTR_MODIFIED:var i=t.attrName,s=t.relatedNode.namespaceURI;r=t.target,n=Sc("attributes",r),n.attributeName=i,n.attributeNamespace=s;var l=t.attrChange===_m.ADDITION?null:t.prevValue;o2(r,function(b){if(b.attributes&&!(b.attributeFilter&&b.attributeFilter.length&&b.attributeFilter.indexOf(i)===-1&&b.attributeFilter.indexOf(s)===-1))return b.attributeOldValue?gh(l):n});break;case Va.REMOVED:case Va.INSERTED:r=t.relatedNode;var u=t.target,h=void 0,p=void 0;t.type===Va.INSERTED?(h=[u],p=[]):(h=[],p=[u]);var v=u.previousSibling,y=u.nextSibling;n=Sc("childList",r),n.addedNodes=h,n.removedNodes=p,n.previousSibling=v,n.nextSibling=y,o2(r,function(b){if(b.childList)return n})}Rv()},e}(),u4=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=v3++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=by.get(t);r||by.set(t,r=[]);for(var i,s=0;s<r.length;s++)if(r[s].observer===this){i=r[s],i.removeListeners(),i.options=n;break}i||(i=new As(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=by.get(n),i=0;i<r.length;i++){var s=r[i];if(s.observer===t){s.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),J1,lu;function Sc(e,t){return J1=new ET(e,t)}function gh(e){return lu||(lu=ET.copy(J1),lu.oldValue=e,lu)}function Rv(){J1=lu=void 0}function m3(e){return e===lu||e===J1}function g3(e,t){return e===t?e:lu&&m3(e)?lu:null}function y3(e){e.nodes.forEach(function(t){var n=by.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function o2(e,t){for(var n=e;n;n=n.parentNode){var r=by.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],l=s.options;if(!(n!==e&&!l.subtree)){var u=t(l);u&&s.enqueue(u)}}}}var j_=!1,zh=[];function xm(e){zh.push(e),j_||(j_=!0,typeof Yr.globalThis!="undefined"?Yr.globalThis.setTimeout(xy):xy())}function xy(){j_=!1;var e=zh;zh=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();y3(n),r.length&&(n.callback(r,n),t=!0)}),t&&xy()}var a2=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s){var l=e.call(this,n)||this;return l.currentTime=i,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=i,l.timelineTime=s,l}return t}(pd),ST=0,_3=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(ST++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new a2(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(ic)},e.prototype.addEventListener=function(t,n,r){throw new Error(ic)},e.prototype.removeEventListener=function(t,n,r){throw new Error(ic)},e.prototype.dispatchEvent=function(t){throw new Error(ic)},e.prototype.commitStyles=function(){throw new Error(ic)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new a2(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new a2(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),b3=4,V_=.001,x3=1e-7,E3=10,eb=11,H_=1/(eb-1),TT=typeof Float32Array=="function",Mv=function(e,t){return 1-3*t+3*e},S3=function(e,t){return 3*t-6*e},tp=function(e){return 3*e},tb=function(e,t,n){return((Mv(t,n)*e+S3(t,n))*e+tp(t))*e},Ho=function(e,t,n){return 3*Mv(t,n)*e*e+2*S3(t,n)*e+tp(t)},wT=function(e,t,n,r,i){var s,l,u=0;do l=t+(n-t)/2,s=tb(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>x3&&++u<E3);return l},AT=function(e,t,n,r){for(var i=0;i<b3;++i){var s=Ho(t,n,r);if(s===0)return t;var l=tb(t,n,r)-e;t-=l/s}return t},s2=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(u){return u};for(var i=TT?new Float32Array(eb):new Array(eb),s=0;s<eb;++s)i[s]=tb(s*H_,e,n);var l=function(u){for(var h=0,p=1,v=eb-1;p!==v&&i[p]<=u;++p)h+=H_;--p;var y=(u-i[p])/(i[p+1]-i[p]),b=h+y*H_,T=Ho(b,e,n);return T>=V_?AT(u,b,e,n):T===0?b:wT(u,h,h+H_,e,n)};return function(u){return u===0||u===1?u:tb(l(u),t,r)}},CT=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},nb=function(e){return Math.pow(e,2)},rb=function(e){return Math.pow(e,3)},ib=function(e){return Math.pow(e,4)},ob=function(e){return Math.pow(e,5)},ab=function(e){return Math.pow(e,6)},Em=function(e){return 1-Math.cos(e*Math.PI/2)},xg=function(e){return 1-Math.sqrt(1-e*e)},Pv=function(e){return e*e*(3*e-2)},Iv=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},Ey=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,2),r=n[0],i=r===void 0?1:r,s=n[1],l=s===void 0?.5:s,u=(0,d.Z)(Number(i),1,10),h=(0,d.Z)(Number(l),.1,2);return e===0||e===1?e:-u*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/u))*(Math.PI*2)/h)},Lv=function(e,t,n){t===void 0&&(t=[]);var r=(0,ie.CR)(t,4),i=r[0],s=i===void 0?1:i,l=r[1],u=l===void 0?100:l,h=r[2],p=h===void 0?10:h,v=r[3],y=v===void 0?0:v;s=(0,d.Z)(s,.1,1e3),u=(0,d.Z)(u,.1,1e3),p=(0,d.Z)(p,.1,1e3),y=(0,d.Z)(y,.1,1e3);var b=Math.sqrt(u/s),T=p/(2*Math.sqrt(u*s)),R=T<1?b*Math.sqrt(1-T*T):0,M=1,I=T<1?(T*b+-y)/R:-y+b,N=n?n*e/1e3:e;return T<1?N=Math.exp(-N*T*b)*(M*Math.cos(R*N)+I*Math.sin(R*N)):N=(M+I*N)*Math.exp(-N*b),e===0||e===1?e:1-N},sb=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,2),r=n[0],i=r===void 0?10:r,s=n[1],l=s=="start"?Math.ceil:Math.floor;return l((0,d.Z)(e,0,1)*i)/i},Dv=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,4),r=n[0],i=n[1],s=n[2],l=n[3];return s2(r,i,s,l)(e)},lb=s2(.42,0,1,1),Pp=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},yd=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},Ip=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},OT={steps:sb,"step-start":function(e){return sb(e,[1,"start"])},"step-end":function(e){return sb(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Dv,ease:function(e){return Dv(e,[.25,.1,.25,1])},in:lb,out:Pp(lb),"in-out":yd(lb),"out-in":Ip(lb),"in-quad":nb,"out-quad":Pp(nb),"in-out-quad":yd(nb),"out-in-quad":Ip(nb),"in-cubic":rb,"out-cubic":Pp(rb),"in-out-cubic":yd(rb),"out-in-cubic":Ip(rb),"in-quart":ib,"out-quart":Pp(ib),"in-out-quart":yd(ib),"out-in-quart":Ip(ib),"in-quint":ob,"out-quint":Pp(ob),"in-out-quint":yd(ob),"out-in-quint":Ip(ob),"in-expo":ab,"out-expo":Pp(ab),"in-out-expo":yd(ab),"out-in-expo":Ip(ab),"in-sine":Em,"out-sine":Pp(Em),"in-out-sine":yd(Em),"out-in-sine":Ip(Em),"in-circ":xg,"out-circ":Pp(xg),"in-out-circ":yd(xg),"out-in-circ":Ip(xg),"in-back":Pv,"out-back":Pp(Pv),"in-out-back":yd(Pv),"out-in-back":Ip(Pv),"in-bounce":Iv,"out-bounce":Pp(Iv),"in-out-bounce":yd(Iv),"out-in-bounce":Ip(Iv),"in-elastic":Ey,"out-elastic":Pp(Ey),"in-out-elastic":yd(Ey),"out-in-elastic":Ip(Ey),spring:Lv,"spring-in":Lv,"spring-out":Pp(Lv),"spring-in-out":yd(Lv),"spring-out-in":Ip(Lv)},l2=function(e){return CT(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},T3=function(e){return OT[l2(e)]||OT.linear},_d=function(e){return e},w3=1,A3=.5,RT=0;function MT(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var cb="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",C3=new RegExp("cubic-bezier\\("+cb+","+cb+","+cb+","+cb+"\\)"),O3=/steps\(\s*(\d+)\s*\)/,R3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function c2(e){var t=C3.exec(e);if(t)return s2.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.slice(1).map(Number)),!1));var n=O3.exec(e);if(n)return MT(Number(n[1]),RT);var r=R3.exec(e);return r?MT(Number(r[1]),{start:w3,middle:A3,end:RT}[r[2]]):T3(e)}function PT(e){return Math.abs(M3(e)/(e.playbackRate||1))}function M3(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var IT=0,u2=1,oc=2,f2=3;function W_(e,t,n){if(t===null)return IT;var r=n.endTime;return t<Math.min(n.delay,r)?u2:t>=Math.min(n.delay+e+n.endDelay,r)?oc:f2}function ub(e,t,n,r,i){switch(r){case u2:return t==="backwards"||t==="both"?0:null;case f2:return n-i;case oc:return t==="forwards"||t==="both"?e:null;case IT:return null}}function fb(e,t,n,r,i){var s=i;return e===0?t!==u2&&(s+=n):s+=r/e,s}function Nv(e,t,n,r,i,s){var l=e===1/0?t%1:e%1;return l===0&&n===oc&&r!==0&&(i!==0||s===0)&&(l=1),l}function G_(e,t,n,r){return e===oc&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function P3(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function hb(e,t,n){var r=W_(e,t,n),i=ub(e,n.fill,t,r,n.delay);if(i===null)return null;var s=n.duration==="auto"?0:n.duration,l=fb(s,r,n.iterations,i,n.iterationStart),u=Nv(l,n.iterationStart,r,n.iterations,i,s),h=G_(r,n.iterations,u,l),p=P3(n.direction,h,u);return n.currentIteration=h,n.progress=p,n.easingFunction(p)}function I3(e,t,n){var r=Sy(e,t),i=db(r,n);return function(s,l){if(l!==null)i.filter(function(h){return l>=h.applyFrom&&l<h.applyTo}).forEach(function(h){var p=l-h.startOffset,v=h.endOffset-h.startOffset,y=v===0?0:p/v;s.setAttribute(h.property,h.interpolation(y),!1,!1)});else for(var u in r)LT(u)&&s.setAttribute(u,null)}}function LT(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function Sy(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(LT(i)){var s={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:c2(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(s)}return n}function db(e,t){var n=[];for(var r in e)for(var i=e[r],s=0;s<i.length-1;s++){var l=s,u=s+1,h=i[l].computedOffset,p=i[u].computedOffset,v=h,y=p;s===0&&(v=-1/0,p===0&&(u=l)),s===i.length-2&&(y=1/0,h===1&&(l=u)),n.push({applyFrom:v,applyTo:y,startOffset:i[l].computedOffset,endOffset:i[u].computedOffset,easingFunction:i[l].easingFunction,property:r,interpolation:pb(r,i[l].value,i[u].value,t)})}return n.sort(function(b,T){return b.startOffset-T.startOffset}),n}var DT=function(e,t,n){return function(r){var i=Ty(e,t,r);return!Yr.enableCSSParsing&&(0,Zl.Z)(i)?i:n(i)}};function pb(e,t,n,r){var i=gm[e];if(i&&i.syntax&&i.int){var s=Yr.styleValueRegistry.getPropertySyntax(i.syntax);if(s){var l=void 0,u=void 0;if(Yr.enableCSSParsing){var h=Yr.styleValueRegistry.parseProperty(e,t,r,!1),p=Yr.styleValueRegistry.parseProperty(e,n,r,!1);l=Yr.styleValueRegistry.computeProperty(e,h,r,!1),u=Yr.styleValueRegistry.computeProperty(e,p,r,!1)}else{var v=s.parserWithCSSDisabled;l=v?v(t,r):t,u=v?v(n,r):n}var y=s.mixer(l,u,r);if(y){var b=DT.apply(void 0,(0,ie.ev)([],(0,ie.CR)(y),!1));return function(T){return T===0?t:T===1?n:b(T)}}}}return DT(!1,!0,function(T){return T?n:t})}function Ty(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,s=Math.max(r,i),l=[],u=0;u<s;u++)l.push(Ty(e[u<r?u:r-1],t[u<i?u:i-1],n));return l}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var vb=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=_d,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=c2(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function L3(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,s=0;s<i;s++){if(!t[s]){var l={};"offset"in e&&(l.offset=Number(e.offset)),"easing"in e&&(l.easing=e.easing),"composite"in e&&(l.composite=e.composite),t[s]=l}r[s]!==void 0&&r[s]!==null&&(t[s][n]=r[s])}}return t.sort(function(u,h){return(u.computedOffset||0)-(h.computedOffset||0)}),t}function wy(e,t){if(e===null)return[];Array.isArray(e)||(e=L3(e));for(var n=e.map(function(h){var p={};t!=null&&t.composite&&(p.composite="auto");for(var v in h){var y=h[v];if(v==="offset"){if(y!==null){if(y=Number(y),!isFinite(y))throw new Error("Keyframe offsets must be numbers.");if(y<0||y>1)throw new Error("Keyframe offsets must be between 0 and 1.");p.computedOffset=y}}else if(v==="composite"&&["replace","add","accumulate","auto"].indexOf(y)===-1)throw new Error("".concat(y," compositing is not supported"));p[v]=y}return p.offset===void 0&&(p.offset=null),p.easing===void 0&&(p.easing=(t==null?void 0:t.easing)||"linear"),p.composite===void 0&&(p.composite="auto"),p}),r=!0,i=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,xa.Z)(l))r=!1;else{if(l<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=l}}n=n.filter(function(h){return Number(h.offset)>=0&&Number(h.offset)<=1});function u(){var h,p,v=n.length;n[v-1].computedOffset=Number((h=n[v-1].offset)!==null&&h!==void 0?h:1),v>1&&(n[0].computedOffset=Number((p=n[0].offset)!==null&&p!==void 0?p:0));for(var y=0,b=Number(n[0].computedOffset),T=1;T<v;T++){var R=n[T].computedOffset;if(!(0,xa.Z)(R)&&!(0,xa.Z)(b)){for(var M=1;M<T-y;M++)n[y+M].computedOffset=b+(Number(R)-b)*M/(T-y);y=T,b=Number(R)}}}return r||u(),n}var D3="backwards|forwards|both|none".split("|"),N3="reverse|alternate|alternate-reverse".split("|");function B3(e,t){var n=new vb;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&D3.indexOf(e[r])===-1||r==="direction"&&N3.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function NT(e,t){return e=Yu(e!=null?e:{duration:"auto"}),B3(e,t)}function Yu(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var h2=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=NT(r,!1),this.timing.effect=this,this.timing.activeDuration=PT(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=wy(n,this.timing),this.interpolations=I3(this.normalizedKeyframes,this.timing,this.target);var s=Yr.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(l,u){return u==="duration"?l.duration==="auto"?0:l.duration:u==="fill"?l.fill==="auto"?"none":l.fill:u==="localTime"?i.animation&&i.animation.currentTime||null:u==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:l.currentIteration||0:u==="progress"?!i.animation||i.animation.playState!=="running"?null:l.progress||0:l[u]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=hb(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=wy(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function BT(e,t){return Number(e.id)-Number(t.id)}var d2=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(BT),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(s){s[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new h2(t,n,r),s=new _3(i,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(BT);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(s){var l=n.animations.indexOf(s);l!==-1&&n.animations.splice(l,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,s,l=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var u=[],h=[],p=[],v=[];return r.forEach(function(y){y.tick(t,n),y._inEffect?(h.push(y.effect),y.markTarget()):(u.push(y.effect),y.unmarkTarget()),y._needsTick&&(l.ticking=!0);var b=y._inEffect||y._needsTick;y._inTimeline=b,b?p.push(y):v.push(y)}),(i=this.pendingEffects).push.apply(i,(0,ie.ev)([],(0,ie.CR)(u),!1)),(s=this.pendingEffects).push.apply(s,(0,ie.ev)([],(0,ie.CR)(h),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]},e}();Yr.EasingFunction=c2,Yr.AnimationTimeline=d2;function F3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.r;e.arc(r,s,l,0,Math.PI*2,!1)}function k3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.rx,u=t.ry;if(e.ellipse)e.ellipse(r,s,l,u,0,0,Math.PI*2,!1);else{var h=l>u?l:u,p=l>u?1:l/u,v=l>u?u/l:1;e.save(),e.scale(p,v),e.arc(r,s,h,0,Math.PI*2)}}function U3(e,t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=t.markerStart,u=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=0,y=0,b=0,T=0,R=0,M,I;l&&ml(l)&&h&&(M=i-n,I=s-r,R=Math.atan2(I,M),v=Math.cos(R)*(h||0),y=Math.sin(R)*(h||0)),u&&ml(u)&&p&&(M=n-i,I=r-s,R=Math.atan2(I,M),b=Math.cos(R)*(p||0),T=Math.sin(R)*(p||0)),e.moveTo(n+v,r+y),e.lineTo(i+b,s+T)}function p2(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.d,u=l.absolutePath,h=l.segments,p=0,v=0,y=0,b=0,T=0,R,M;if(n&&ml(n)&&i){var I=(0,ie.CR)(n.parentNode.getStartTangent(),2),N=I[0],U=I[1];R=N[0]-U[0],M=N[1]-U[1],T=Math.atan2(M,R),p=Math.cos(T)*(i||0),v=Math.sin(T)*(i||0)}if(r&&ml(r)&&s){var H=(0,ie.CR)(r.parentNode.getEndTangent(),2),N=H[0],U=H[1];R=N[0]-U[0],M=N[1]-U[1],T=Math.atan2(M,R),y=Math.cos(T)*(s||0),b=Math.sin(T)*(s||0)}for(var X=0;X<u.length;X++){var $=u[X],Q=$[0],ce=u[X+1],pe=X===0&&(p!==0||v!==0),Re=(X===u.length-1||ce&&(ce[0]==="M"||ce[0]==="Z"))&&y!==0&&b!==0;switch(Q){case"M":pe?(e.moveTo($[1]+p,$[2]+v),e.lineTo($[1],$[2])):e.moveTo($[1],$[2]);break;case"L":Re?e.lineTo($[1]+y,$[2]+b):e.lineTo($[1],$[2]);break;case"Q":e.quadraticCurveTo($[1],$[2],$[3],$[4]),Re&&e.lineTo($[3]+y,$[4]+b);break;case"C":e.bezierCurveTo($[1],$[2],$[3],$[4],$[5],$[6]),Re&&e.lineTo($[5]+y,$[6]+b);break;case"A":{var je=h[X].arcParams,Ke=je.cx,ft=je.cy,Ye=je.rx,it=je.ry,at=je.startAngle,vt=je.endAngle,Vt=je.xRotation,At=je.sweepFlag;if(e.ellipse)e.ellipse(Ke,ft,Ye,it,Vt,at,vt,!!(1-At));else{var Ut=Ye>it?Ye:it,Sn=Ye>it?1:Ye/it,Vn=Ye>it?it/Ye:1;e.translate(Ke,ft),e.rotate(Vt),e.scale(Sn,Vn),e.arc(0,0,Ut,at,vt,!!(1-At)),e.scale(1/Sn,1/Vn),e.rotate(-Vt),e.translate(-Ke,-ft)}Re&&e.lineTo($[6]+y,$[7]+b);break}case"Z":e.closePath();break}}}function FT(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,u=l.length,h=l[0][0],p=l[0][1],v=l[u-1][0],y=l[u-1][1],b=0,T=0,R=0,M=0,I=0,N,U;n&&ml(n)&&i&&(N=l[1][0]-l[0][0],U=l[1][1]-l[0][1],I=Math.atan2(U,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&ml(r)&&s&&(N=l[u-1][0]-l[0][0],U=l[u-1][1]-l[0][1],I=Math.atan2(U,N),R=Math.cos(I)*(s||0),M=Math.sin(I)*(s||0)),e.moveTo(h+(b||R),p+(T||M));for(var H=1;H<u-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v,y)}function z3(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,u=l.length,h=l[0][0],p=l[0][1],v=l[u-1][0],y=l[u-1][1],b=0,T=0,R=0,M=0,I=0,N,U;n&&ml(n)&&i&&(N=l[1][0]-l[0][0],U=l[1][1]-l[0][1],I=Math.atan2(U,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&ml(r)&&s&&(N=l[u-2][0]-l[u-1][0],U=l[u-2][1]-l[u-1][1],I=Math.atan2(U,N),R=Math.cos(I)*(s||0),M=Math.sin(I)*(s||0)),e.moveTo(h+b,p+T);for(var H=1;H<u-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v+R,y+M)}function Ay(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,l=t.radius,u=t.width,h=t.height,p=u,v=h,y=l&&l.some(function(X){return X!==0});if(!y)e.rect(r,s,p,v);else{var b=u>0?1:-1,T=h>0?1:-1,R=b+T===0,M=(0,ie.CR)(l.map(function(X){return(0,d.Z)(X,0,Math.min(Math.abs(p)/2,Math.abs(v)/2))}),4),I=M[0],N=M[1],U=M[2],H=M[3];e.moveTo(b*I+r,s),e.lineTo(p-b*N+r,s),N!==0&&e.arc(p-b*N+r,T*N+s,N,-T*Math.PI/2,b>0?0:Math.PI,R),e.lineTo(p+r,v-T*U+s),U!==0&&e.arc(p-b*U+r,v-T*U+s,U,b>0?0:Math.PI,T>0?Math.PI/2:1.5*Math.PI,R),e.lineTo(b*H+r,v+s),H!==0&&e.arc(b*H+r,v-T*H+s,H,T>0?Math.PI/2:-Math.PI/2,b>0?Math.PI:0,R),e.lineTo(r,T*I+s),I!==0&&e.arc(b*I+r,T*I+s,I,b>0?Math.PI:0,T>0?Math.PI*1.5:Math.PI/2,R)}}var j3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[ai.CIRCLE]=F3,n[ai.ELLIPSE]=k3,n[ai.RECT]=Ay,n[ai.LINE]=U3,n[ai.POLYLINE]=z3,n[ai.POLYGON]=FT,n[ai.PATH]=p2,n[ai.TEXT]=void 0,n[ai.GROUP]=void 0,n[ai.IMAGE]=void 0,n[ai.HTML]=void 0,n[ai.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(Tv),V3=fr.Ue(),H3=fr.Ue(),W3=fr.Ue(),G3=Kr.create(),Z3=function(){function e(){var t=this;this.isHit=function(n,r,i,s){var l=t.context.pointInPathPickerFactory[n.nodeName];if(l){var u=Kr.invert(G3,i),h=fr.fF(H3,fr.t8(W3,r[0],r[1],0),u);if(l(n,new Yf(h[0],h[1]),s,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),s=t.context.pathGeneratorFactory[n.nodeName];return s&&(i.beginPath(),s(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,s=t.renderingService,l=t.renderingContext;this.context=t,this.runtime=n;var u=(i=l.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(e.tag,function(h){return(0,ie.mG)(r,void 0,void 0,function(){return(0,ie.Jh)(this,function(p){return[2,this.pick(u,h)]})})}),s.hooks.pickSync.tap(e.tag,function(h){return r.pick(u,h)})},e.prototype.pick=function(t,n){var r,i,s=n.topmost,l=n.position,u=l.x,h=l.y,p=fr.t8(V3,u,h,0),v=t.elementsFromBBox(p[0],p[1],p[0],p[1]),y=[];try{for(var b=(0,ie.XA)(v),T=b.next();!T.done;T=b.next()){var R=T.value,M=R.getWorldTransform(),I=this.isHit(R,p,M,!1);if(I){var N=nT(R);if(N){var U=N.parsedStyle.clipPath,H=this.isHit(U,p,U.getWorldTransform(),!0);if(H){if(s)return n.picked=[R],n;y.push(R)}}else{if(s)return n.picked=[R],n;y.push(R)}}}}catch(X){r={error:X}}finally{try{T&&!T.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return n.picked=y,n},e.tag="CanvasPicker",e}();function X3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,u=l===void 0?0:l,h=r.r,p=r.fill,v=r.stroke,y=r.lineWidth,b=y===void 0?1:y,T=r.increasedLineWidthForHitTesting,R=T===void 0?0:T,M=r.pointerEvents,I=M===void 0?"auto":M,N=(b+R)/2,U=ws(s,u,t.x,t.y),H=(0,ie.CR)(yg(I,p,v),2),X=H[0],$=H[1];return X&&$||n?U<=h+N:X?U<=h:$?U>=h-N&&U<=h+N:!1}function Z_(e,t,n,r){return e/(n*n)+t/(r*r)}function $3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,u=l===void 0?0:l,h=r.rx,p=r.ry,v=r.fill,y=r.stroke,b=r.lineWidth,T=b===void 0?1:b,R=r.increasedLineWidthForHitTesting,M=R===void 0?0:R,I=r.pointerEvents,N=I===void 0?"auto":I,U=t.x,H=t.y,X=(0,ie.CR)(yg(N,v,y),2),$=X[0],Q=X[1],ce=(T+M)/2,pe=(U-s)*(U-s),Re=(H-u)*(H-u);return $&&Q||n?Z_(pe,Re,h+ce,p+ce)<=1:$?Z_(pe,Re,h,p)<=1:Q?Z_(pe,Re,h-ce,p-ce)>=1&&Z_(pe,Re,h+ce,p+ce)<=1:!1}function Sm(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function kT(e,t,n,r,i,s,l){var u=i/2;return Sm(e-u,t-u,n,i,s,l)||Sm(e+n-u,t-u,i,r,s,l)||Sm(e+u,t+r-u,n,i,s,l)||Sm(e-u,t+u,i,r,s,l)}function mb(e,t,n,r,i,s,l,u){var h=(Math.atan2(u-t,l-e)+Math.PI*2)%(Math.PI*2),p={x:e+n*Math.cos(h),y:t+n*Math.sin(h)};return ws(p.x,p.y,l,u)<=s/2}function Tm(e,t,n,r,i,s,l){var u=Math.min(e,n),h=Math.max(e,n),p=Math.min(t,r),v=Math.max(t,r),y=i/2;return s>=u-y&&s<=h+y&&l>=p-y&&l<=v+y?ny(e,t,n,r,s,l)<=i/2:!1}function UT(e,t,n,r,i){var s=e.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var u=e[l][0],h=e[l][1],p=e[l+1][0],v=e[l+1][1];if(Tm(u,h,p,v,t,n,r))return!0}if(i){var y=e[0],b=e[s-1];if(Tm(y[0],y[1],b[0],b[1],t,n,r))return!0}return!1}var gb=1e-6;function wm(e){return Math.abs(e)<gb?0:e<0?-1:1}function Y3(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function zT(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var s=0;s<i;s++){var l=e[s],u=e[(s+1)%i];if(Y3(l,u,[t,n]))return!0;wm(l[1]-n)>0!=wm(u[1]-n)>0&&wm(t-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r}function jT(e,t,n){for(var r=!1,i=0;i<e.length;i++){var s=e[i];if(r=zT(s,t,n),r)break}return r}function K3(e,t,n){var r=e.parsedStyle,i=r.x1,s=r.y1,l=r.x2,u=r.y2,h=r.lineWidth,p=h===void 0?1:h,v=r.increasedLineWidthForHitTesting,y=v===void 0?0:v,b=r.pointerEvents,T=b===void 0?"auto":b,R=r.fill,M=r.stroke,I=(0,ie.CR)(yg(T,R,M),2),N=I[1];return!N&&!n||!p?!1:Tm(i,s,l,u,p+y,t.x,t.y)}function q3(e,t,n,r,i){for(var s=!1,l=t/2,u=0;u<e.length;u++){var h=e[u],p=h.currentPoint,v=h.params,y=h.prePoint,b=h.box;if(!(b&&!Sm(b.x-l,b.y-l,b.width+t,b.height+t,n,r)))switch(h.command){case"L":case"Z":if(s=Tm(y[0],y[1],p[0],p[1],t,n,r),s)return!0;break;case"Q":var T=Rp(y[0],y[1],v[1],v[2],v[3],v[4],n,r);if(s=T<=t/2,s)return!0;break;case"C":var R=b_(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],n,r,i);if(s=R<=t/2,s)return!0;break;case"A":h.cubicParams||(h.cubicParams=_c(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],v[7],void 0));for(var M=h.cubicParams,I=y,N=0;N<M.length;N+=6){var U=b_(I[0],I[1],M[N],M[N+1],M[N+2],M[N+3],M[N+4],M[N+5],n,r,i);if(I=[M[N+4],M[N+5]],s=U<=t/2,s)return!0}break}}return s}function Q3(e,t,n,r,i,s){var l=e.parsedStyle,u=l.lineWidth,h=u===void 0?1:u,p=l.increasedLineWidthForHitTesting,v=p===void 0?0:p,y=l.stroke,b=l.fill,T=l.d,R=l.pointerEvents,M=R===void 0?"auto":R,I=T.segments,N=T.hasArc,U=T.polylines,H=T.polygons,X=(0,ie.CR)(yg(M,(H==null?void 0:H.length)&&b,y),2),$=X[0],Q=X[1],ce=Zx(e),pe=!1;return $||n?(N?pe=r(e,t):pe=jT(H,t.x,t.y)||jT(U,t.x,t.y),pe):((Q||n)&&(pe=q3(I,h+v,t.x,t.y,ce)),pe)}function VT(e,t,n){var r=e.parsedStyle,i=r.stroke,s=r.fill,l=r.lineWidth,u=l===void 0?1:l,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=r.points,y=r.pointerEvents,b=y===void 0?"auto":y,T=(0,ie.CR)(yg(b,s,i),2),R=T[0],M=T[1],I=!1;return(M||n)&&(I=UT(v.points,u+p,t.x,t.y,!0)),!I&&(R||n)&&(I=zT(v.points,t.x,t.y)),I}function J3(e,t,n){var r=e.parsedStyle,i=r.lineWidth,s=i===void 0?1:i,l=r.increasedLineWidthForHitTesting,u=l===void 0?0:l,h=r.points,p=r.pointerEvents,v=p===void 0?"auto":p,y=r.fill,b=r.stroke,T=(0,ie.CR)(yg(v,y,b),2),R=T[1];return!R&&!n||!s?!1:UT(h.points,s+u,t.x,t.y,!1)}function HT(e,t,n,r,i){var s=e.parsedStyle,l=s.radius,u=s.fill,h=s.stroke,p=s.lineWidth,v=p===void 0?1:p,y=s.increasedLineWidthForHitTesting,b=y===void 0?0:y,T=s.x,R=T===void 0?0:T,M=s.y,I=M===void 0?0:M,N=s.width,U=s.height,H=s.pointerEvents,X=H===void 0?"auto":H,$=(0,ie.CR)(yg(X,u,h),2),Q=$[0],ce=$[1],pe=l&&l.some(function(ft){return ft!==0}),Re=v+b;if(pe){var Ke=!1;return(ce||n)&&(Ke=p0(R,I,N,U,l.map(function(ft){return(0,d.Z)(ft,0,Math.min(Math.abs(N)/2,Math.abs(U)/2))}),Re,t.x,t.y)),!Ke&&(Q||n)&&(Ke=r(e,t)),Ke}else{var je=Re/2;if(Q&&ce||n)return Sm(R-je,I-je,N+je,U+je,t.x,t.y);if(Q)return Sm(R,I,N,U,t.x,t.y);if(ce)return kT(R,I,N,U,Re,t.x,t.y)}return!1}function p0(e,t,n,r,i,s,l,u){var h=(0,ie.CR)(i,4),p=h[0],v=h[1],y=h[2],b=h[3];return Tm(e+p,t,e+n-v,t,s,l,u)||Tm(e+n,t+v,e+n,t+r-y,s,l,u)||Tm(e+n-y,t+r,e+b,t+r,s,l,u)||Tm(e,t+r-b,e,t+p,s,l,u)||mb(e+n-v,t+v,v,1.5*Math.PI,2*Math.PI,s,l,u)||mb(e+n-y,t+r-y,y,0,.5*Math.PI,s,l,u)||mb(e+b,t+r-b,b,.5*Math.PI,Math.PI,s,l,u)||mb(e+p,t+p,p,Math.PI,1.5*Math.PI,s,l,u)}function eR(e,t,n,r,i,s){var l=e.parsedStyle,u=l.pointerEvents,h=u===void 0?"auto":u,p=l.x,v=p===void 0?0:p,y=l.y,b=y===void 0?0:y,T=l.width,R=l.height;if(h==="non-transparent-pixel"){var M=i.config.offscreenCanvas,I=s.offscreenCanvasCreator.getOrCreateCanvas(M),N=s.offscreenCanvasCreator.getOrCreateContext(M,{willReadFrequently:!0});I.width=T,I.height=R,i.defaultStyleRendererFactory[ai.IMAGE].render(N,(0,ie.pi)((0,ie.pi)({},e.parsedStyle),{x:0,y:0}),e,void 0,void 0,void 0);var U=N.getImageData(t.x-v,t.y-b,1,1).data;return U.every(function(H){return H!==0})}return!0}var tR=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[ai.CIRCLE]=X3,n[ai.ELLIPSE]=$3,n[ai.RECT]=HT,n[ai.LINE]=K3,n[ai.POLYLINE]=J3,n[ai.POLYGON]=VT,n[ai.PATH]=Q3,n[ai.TEXT]=r,n[ai.GROUP]=null,n[ai.IMAGE]=eR,n[ai.HTML]=null,n[ai.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new Z3)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(Tv),WT=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Kr.create(),this.dprMatrix=Kr.create(),this.tmpMat4=Kr.create(),this.vec3a=fr.Ue(),this.vec3b=fr.Ue(),this.vec3c=fr.Ue(),this.vec3d=fr.Ue()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,s=t.camera,l=t.renderingService,u=t.renderingContext,h=t.rBushRoot,p=t.pathGeneratorFactory;this.rBush=h,this.pathGeneratorFactory=p;var v=t.contextService,y=u.root.ownerDocument.defaultView,b=function(M){var I=M.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)},T=function(M){var I=M.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)};l.hooks.init.tap(e.tag,function(){y.addEventListener(Va.UNMOUNTED,b),y.addEventListener(Va.CULLED,T);var M=v.getDPR(),I=i.width,N=i.height,U=v.getContext();r.clearRect(U,0,0,I*M,N*M,i.background)}),l.hooks.destroy.tap(e.tag,function(){y.removeEventListener(Va.UNMOUNTED,b),y.removeEventListener(Va.CULLED,T),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),l.hooks.beginFrame.tap(e.tag,function(){var M,I=v.getContext(),N=v.getDPR(),U=i.width,H=i.height,X=r.canvasRendererPluginOptions,$=X.dirtyObjectNumThreshold,Q=X.dirtyObjectRatioThreshold,ce=l.getStats(),pe=ce.total,Re=ce.rendered,je=Re/pe;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((M=y.context.renderingPlugins[1])===null||M===void 0)&&M.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||Re>$&&je>Q,I&&(I.resetTransform?I.resetTransform():I.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(I,0,0,U*N,H*N,i.background))});var R=function(M,I){M.isVisible()&&!M.isCulled()&&r.renderDisplayObject(M,I,r.context,r.restoreStack,n);var N=M.sortable.sorted||M.childNodes;N.forEach(function(U){R(U,I)})};l.hooks.endFrame.tap(e.tag,function(){if(u.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var M=v.getContext(),I=v.getDPR();if(Kr.fromScaling(r.dprMatrix,[I,I,1]),Kr.multiply(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)R(u.root,M);else{var N=r.safeMergeAABB.apply(r,(0,ie.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,ie.CR)(r.removedRBushNodeAABBs.map(function(Vn){var rr=Vn.minX,or=Vn.minY,Hr=Vn.maxX,fi=Vn.maxY,Qi=new _u;return Qi.setMinMax([rr,or,0],[Hr,fi,0]),Qi})),!1));if(r.removedRBushNodeAABBs=[],_u.isEmpty(N)){r.renderQueue=[];return}var U=r.convertAABB2Rect(N),H=U.x,X=U.y,$=U.width,Q=U.height,ce=fr.fF(r.vec3a,[H,X,0],r.vpMatrix),pe=fr.fF(r.vec3b,[H+$,X,0],r.vpMatrix),Re=fr.fF(r.vec3c,[H,X+Q,0],r.vpMatrix),je=fr.fF(r.vec3d,[H+$,X+Q,0],r.vpMatrix),Ke=Math.min(ce[0],pe[0],je[0],Re[0]),ft=Math.min(ce[1],pe[1],je[1],Re[1]),Ye=Math.max(ce[0],pe[0],je[0],Re[0]),it=Math.max(ce[1],pe[1],je[1],Re[1]),at=Math.floor(Ke),vt=Math.floor(ft),Vt=Math.ceil(Ye-Ke),At=Math.ceil(it-ft);M.save(),r.clearRect(M,at,vt,Vt,At,i.background),M.beginPath(),M.rect(at,vt,Vt,At),M.clip(),M.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var Ut=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;Ut&&y.dispatchEvent(new Hi(gd.DIRTY_RECTANGLE,{dirtyRect:{x:at,y:vt,width:Vt,height:At}}));var Sn=r.searchDirtyObjects(N);Sn.sort(function(Vn,rr){return Vn.sortable.renderOrder-rr.sortable.renderOrder}).forEach(function(Vn){Vn&&Vn.isVisible()&&!Vn.isCulled()&&r.renderDisplayObject(Vn,M,r.context,r.restoreStack,n)}),M.restore(),r.renderQueue.forEach(function(Vn){r.saveDirtyAABB(Vn)}),r.renderQueue=[]}r.restoreStack.forEach(function(){M.restore()}),r.restoreStack=[]}),l.hooks.render.tap(e.tag,function(M){r.clearFullScreen||r.renderQueue.push(M)})},e.prototype.clearRect=function(t,n,r,i,s,l){t.clearRect(n,r,i,s),l&&(t.fillStyle=l,t.fillRect(n,r,i,s))},e.prototype.renderDisplayObject=function(t,n,r,i,s){var l=t.nodeName,u=i[i.length-1];u&&!(t.compareDocumentPosition(u)&To.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var h=this.context.styleRendererFactory[l],p=this.pathGeneratorFactory[l],v=t.parsedStyle.clipPath;if(v){this.applyWorldTransform(n,v);var y=this.pathGeneratorFactory[v.nodeName];y&&(n.save(),i.push(t),n.beginPath(),y(n,v.parsedStyle),n.closePath(),n.clip())}h&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),p&&(n.beginPath(),p(n,t.parsedStyle),t.nodeName!==ai.LINE&&t.nodeName!==ai.PATH&&t.nodeName!==ai.POLYLINE&&n.closePath()),h&&(h.render(n,t.parsedStyle,t,r,this,s),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),s=Math.floor(n[1]),l=Math.ceil(r[0]),u=Math.ceil(r[1]),h=l-i,p=u-s;return{x:i,y:s,width:h,height:p}},e.prototype.mergeDirtyAABBs=function(t){var n=new _u;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var s=r.renderable.dirtyRenderBounds;s&&n.add(s)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,ie.CR)(t.getMin(),2),r=n[0],i=n[1],s=(0,ie.CR)(t.getMax(),2),l=s[0],u=s[1],h=this.rBush.search({minX:r,minY:i,maxX:l,maxY:u});return h.map(function(p){var v=p.displayObject;return v})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new _u);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,s=r.fill,l=r.opacity,u=r.lineDash,h=r.lineDashOffset;u&&t.setLineDash(u),(0,xa.Z)(h)||(t.lineDashOffset=h),(0,xa.Z)(l)||(t.globalAlpha*=l),!(0,xa.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,xa.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){r?(Kr.copy(this.tmpMat4,n.getLocalTransform()),Kr.multiply(this.tmpMat4,r,this.tmpMat4),Kr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Kr.copy(this.tmpMat4,n.getWorldTransform()),Kr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new _u;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),Am=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){var u=n.fill,h=n.fillRule,p=n.opacity,v=p===void 0?1:p,y=n.fillOpacity,b=y===void 0?1:y,T=n.stroke,R=n.strokeOpacity,M=R===void 0?1:R,I=n.lineWidth,N=I===void 0?1:I,U=n.lineCap,H=n.lineJoin,X=n.shadowType,$=n.shadowColor,Q=n.shadowBlur,ce=n.filter,pe=n.miterLimit,Re=u&&!u.isNone,je=T&&!T.isNone&&N>0,Ke=(u==null?void 0:u.alpha)===0,ft=!!(ce&&ce.length),Ye=!(0,xa.Z)($)&&Q>0,it=r.nodeName,at=X==="inner",vt=je&&Ye&&(it===ai.PATH||it===ai.LINE||it===ai.POLYLINE||Ke||at);Re&&(t.globalAlpha=v*b,vt||yb(r,t,Ye),ZT(t,r,u,h,i,s,l,this.imagePool),vt||this.clearShadowAndFilter(t,ft,Ye)),je&&(t.globalAlpha=v*M,t.lineWidth=N,(0,xa.Z)(pe)||(t.miterLimit=pe),(0,xa.Z)(U)||(t.lineCap=U),(0,xa.Z)(H)||(t.lineJoin=H),vt&&(at&&(t.globalCompositeOperation="source-atop"),yb(r,t,!0),at&&(_b(t,r,T,i,s,l,this.imagePool),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,ft,!0))),_b(t,r,T,i,s,l,this.imagePool))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,xa.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e}();function yb(e,t,n){var r=e.parsedStyle,i=r.filter,s=r.shadowColor,l=r.shadowBlur,u=r.shadowOffsetX,h=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=s.toString(),t.shadowBlur=l||0,t.shadowOffsetX=u||0,t.shadowOffsetY=h||0)}function v2(e,t,n,r,i,s,l){var u,h;if(e.image.nodeName==="rect"){var p=e.image.parsedStyle,v=p.width,y=p.height;h=r.contextService.getDPR();var b=r.config.offscreenCanvas;u=s.offscreenCanvasCreator.getOrCreateCanvas(b),u.width=v*h,u.height=y*h;var T=s.offscreenCanvasCreator.getOrCreateContext(b),R=[];e.image.forEach(function(I){i.renderDisplayObject(I,T,r,R,s)}),R.forEach(function(){T.restore()})}var M=l.getOrCreatePatternSync(e,n,u,h,t.getGeometryBounds().min,function(){t.renderable.dirty=!0,r.renderingService.dirtify()});return M}function GT(e,t,n,r){var i;if(e.type===G0.LinearGradient||e.type===G0.RadialGradient){var s=t.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,u=s&&s.halfExtents[1]*2||1,h=s&&s.min||[0,0];i=r.getOrCreateGradient((0,ie.pi)((0,ie.pi)({type:e.type},e.value),{min:h,width:l,height:u}),n)}return i}function ZT(e,t,n,r,i,s,l,u,h){h===void 0&&(h=!1),Array.isArray(n)?n.forEach(function(p){e.fillStyle=GT(p,t,e,u),h||(r?e.fill(r):e.fill())}):(M_(n)&&(e.fillStyle=v2(n,t,e,i,s,l,u)),h||(r?e.fill(r):e.fill()))}function _b(e,t,n,r,i,s,l,u){u===void 0&&(u=!1),Array.isArray(n)?n.forEach(function(h){e.strokeStyle=GT(h,t,e,l),u||e.stroke()}):(M_(n)&&(e.strokeStyle=v2(n,t,e,r,i,s,l)),u||e.stroke())}var nR=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.x,s=i===void 0?0:i,l=n.y,u=l===void 0?0:l,h=n.width,p=n.height,v=n.src,y=n.shadowColor,b=n.shadowBlur,T,R=h,M=p;if(c(v)?T=this.imagePool.getImageSync(v):(R||(R=v.width),M||(M=v.height),T=v),T){var I=!(0,xa.Z)(y)&&b>0;yb(r,t,I);try{t.drawImage(T,s,u,R,M)}catch(N){}}},e}(),rR=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){r.getBounds();var u=n,h=u.lineWidth,p=h===void 0?1:h,v=u.textAlign,y=v===void 0?"start":v,b=u.textBaseline,T=b===void 0?"alphabetic":b,R=u.lineJoin,M=R===void 0?"miter":R,I=u.miterLimit,N=I===void 0?10:I,U=u.letterSpacing,H=U===void 0?0:U,X=u.stroke,$=u.fill,Q=u.fillRule,ce=u.fillOpacity,pe=ce===void 0?1:ce,Re=u.strokeOpacity,je=Re===void 0?1:Re,Ke=u.opacity,ft=Ke===void 0?1:Ke,Ye=u.metrics,it=u.x,at=it===void 0?0:it,vt=u.y,Vt=vt===void 0?0:vt,At=u.dx,Ut=u.dy,Sn=u.shadowColor,Vn=u.shadowBlur,rr=Ye.font,or=Ye.lines,Hr=Ye.height,fi=Ye.lineHeight,Qi=Ye.lineMetrics;t.font=rr,t.lineWidth=p,t.textAlign=y==="middle"?"center":y;var Jr=T;!l.enableCSSParsing&&Jr==="alphabetic"&&(Jr="bottom"),t.lineJoin=M,(0,xa.Z)(N)||(t.miterLimit=N);var qr=Vt;T==="middle"?qr+=-Hr/2-fi/2:T==="bottom"||T==="alphabetic"||T==="ideographic"?qr+=-Hr:(T==="top"||T==="hanging")&&(qr+=-fi);var Io=at+(At||0);qr+=Ut||0,or.length===1&&(Jr==="bottom"?(Jr="middle",qr-=.5*Hr):Jr==="top"&&(Jr="middle",qr+=.5*Hr)),t.textBaseline=Jr;var Ji=!(0,xa.Z)(Sn)&&Vn>0;yb(r,t,Ji);for(var Wi=0;Wi<or.length;Wi++){var wo=p/2+Io;qr+=fi,!(0,xa.Z)(X)&&!X.isNone&&p&&this.drawLetterSpacing(t,r,or[Wi],Qi[Wi],y,wo,qr,H,$,Q,pe,X,je,ft,!0,i,s,l),(0,xa.Z)($)||this.drawLetterSpacing(t,r,or[Wi],Qi[Wi],y,wo,qr,H,$,Q,pe,X,je,ft,!1,i,s,l)}},e.prototype.drawLetterSpacing=function(t,n,r,i,s,l,u,h,p,v,y,b,T,R,M,I,N,U){if(h===0){M?this.strokeText(t,n,r,l,u,b,T,I,N,U):this.fillText(t,n,r,l,u,p,v,y,R,I,N,U);return}var H=t.textAlign;t.textAlign="left";var X=l;s==="center"||s==="middle"?X=l-i.width/2:(s==="right"||s==="end")&&(X=l-i.width);for(var $=Array.from(r),Q=t.measureText(r).width,ce=0,pe=0;pe<$.length;++pe){var Re=$[pe];M?this.strokeText(t,n,Re,X,u,b,T,I,N,U):this.fillText(t,n,Re,X,u,p,v,y,R,I,N,U),ce=t.measureText(r.substring(pe+1)).width,X+=Q-ce+h,Q=ce}t.textAlign=H},e.prototype.fillText=function(t,n,r,i,s,l,u,h,p,v,y,b){ZT(t,n,l,u,v,y,b,this.imagePool,!0);var T,R=!(0,xa.Z)(h)&&h!==1;R&&(T=t.globalAlpha,t.globalAlpha=h*p),t.fillText(r,i,s),R&&(t.globalAlpha=T)},e.prototype.strokeText=function(t,n,r,i,s,l,u,h,p,v){_b(t,n,l,h,p,v,this.imagePool,!0);var y,b=!(0,xa.Z)(u)&&u!==1;b&&(y=t.globalAlpha,t.globalAlpha=u),t.strokeText(r,i,s),b&&(t.globalAlpha=y)},e}(),m2=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),f4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),h4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),d4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),p4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),v4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),m4=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Am),XT=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,ie.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,s=new Am(i),l=(n={},n[ai.CIRCLE]=s,n[ai.ELLIPSE]=s,n[ai.RECT]=s,n[ai.IMAGE]=new nR(i),n[ai.TEXT]=new rR(i),n[ai.LINE]=s,n[ai.POLYLINE]=s,n[ai.POLYGON]=s,n[ai.PATH]=s,n[ai.GROUP]=void 0,n[ai.HTML]=void 0,n[ai.MESH]=void 0,n);this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new WT(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(Tv),iR=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,s=t.renderingContext,l=t.config;this.context=t;var u=s.root.ownerDocument.defaultView,h=function(Q){i.hooks.pointerMove.call(Q)},p=function(Q){i.hooks.pointerUp.call(Q)},v=function(Q){i.hooks.pointerDown.call(Q)},y=function(Q){i.hooks.pointerOver.call(Q)},b=function(Q){i.hooks.pointerOut.call(Q)},T=function(Q){i.hooks.pointerCancel.call(Q)},R=function(Q){i.hooks.pointerWheel.call(Q)},M=function(Q){i.hooks.click.call(Q)},I=function(Q){n.globalThis.document.addEventListener("pointermove",h,!0),Q.addEventListener("pointerdown",v,!0),Q.addEventListener("pointerleave",b,!0),Q.addEventListener("pointerover",y,!0),n.globalThis.addEventListener("pointerup",p,!0),n.globalThis.addEventListener("pointercancel",T,!0)},N=function(Q){Q.addEventListener("touchstart",v,!0),Q.addEventListener("touchend",p,!0),Q.addEventListener("touchmove",h,!0),Q.addEventListener("touchcancel",T,!0)},U=function(Q){n.globalThis.document.addEventListener("mousemove",h,!0),Q.addEventListener("mousedown",v,!0),Q.addEventListener("mouseout",b,!0),Q.addEventListener("mouseover",y,!0),n.globalThis.addEventListener("mouseup",p,!0)},H=function(Q){n.globalThis.document.removeEventListener("pointermove",h,!0),Q.removeEventListener("pointerdown",v,!0),Q.removeEventListener("pointerleave",b,!0),Q.removeEventListener("pointerover",y,!0),n.globalThis.removeEventListener("pointerup",p,!0)},X=function(Q){Q.removeEventListener("touchstart",v,!0),Q.removeEventListener("touchend",p,!0),Q.removeEventListener("touchmove",h,!0),Q.removeEventListener("touchcancel",T,!0)},$=function(Q){n.globalThis.document.removeEventListener("mousemove",h,!0),Q.removeEventListener("mousedown",v,!0),Q.removeEventListener("mouseout",b,!0),Q.removeEventListener("mouseover",y,!0),n.globalThis.removeEventListener("mouseup",p,!0)};i.hooks.init.tap(e.tag,function(){var Q=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(Q.style.msContentZooming="none",Q.style.msTouchAction="none"):u.supportsPointerEvents&&(Q.style.touchAction="none"),u.supportsPointerEvents?I(Q):U(Q),u.supportsTouchEvents&&N(Q),l.useNativeClickEvent&&Q.addEventListener("click",M,!0),Q.addEventListener("wheel",R,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var Q=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(Q.style.msContentZooming="",Q.style.msTouchAction=""):u.supportsPointerEvents&&(Q.style.touchAction=""),u.supportsPointerEvents?H(Q):$(Q),u.supportsTouchEvents&&X(Q),l.useNativeClickEvent&&Q.removeEventListener("click",M,!0),Q.removeEventListener("wheel",R,!0)})},e.tag="DOMInteraction",e}(),oR=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new iR)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Tv),$T="g-canvas-camera",X_=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,s=t.renderingContext,l=t.renderingService;this.context=t;var u=s.root.ownerDocument.defaultView,h=u.context.eventService.nativeHTMLMap,p=function(M,I){I.style.transform=r.joinTransformMatrix(M.getWorldTransform())},v=function(M){var I=M.target;if(I.nodeName===ai.HTML){r.$camera||(r.$camera=r.createCamera(i));var N=r.getOrCreateEl(I);if(r.$camera.appendChild(N),n.enableCSSParsing){var U=I.ownerDocument.documentElement.attributes;Object.keys(U).forEach(function(H){N.style[H]=U[H]})}Object.keys(I.attributes).forEach(function(H){r.updateAttribute(H,I)}),p(I,N),h.set(N,I)}},y=function(M){var I=M.target;if(I.nodeName===ai.HTML&&r.$camera){var N=r.getOrCreateEl(I);N&&(N.remove(),h.delete(N))}},b=function(M){var I=M.target;if(I.nodeName===ai.HTML){var N=M.attrName;r.updateAttribute(N,I)}},T=function(M){var I=M.target;if(I.nodeName===ai.HTML){var N=r.getOrCreateEl(I);p(I,N)}},R=function(){if(r.$camera){var M=r.context.config,I=M.width,N=M.height;r.$camera.style.width="".concat(I||0,"px"),r.$camera.style.height="".concat(N||0,"px")}};l.hooks.init.tap(e.tag,function(){u.addEventListener(gd.RESIZE,R),u.addEventListener(Va.MOUNTED,v),u.addEventListener(Va.UNMOUNTED,y),u.addEventListener(Va.ATTR_MODIFIED,b),u.addEventListener(Va.BOUNDS_CHANGED,T)}),l.hooks.endFrame.tap(e.tag,function(){r.$camera&&s.renderReasons.has(Jd.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),l.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),u.removeEventListener(gd.RESIZE,R),u.removeEventListener(Va.MOUNTED,v),u.removeEventListener(Va.UNMOUNTED,y),u.removeEventListener(Va.ATTR_MODIFIED,b),u.removeEventListener(Va.BOUNDS_CHANGED,T)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,s=n.height,l=this.context.contextService.getDomElement(),u=l.parentNode;if(u){var h=$T,p=u.querySelector("#"+h);if(!p){var v=(r||document).createElement("div");p=v,v.id=h,v.style.position="absolute",v.style.left="".concat(l.offsetLeft||0,"px"),v.style.top="".concat(l.offsetTop||0,"px"),v.style.transformOrigin="left top",v.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),v.style.overflow="hidden",v.style.pointerEvents="none",v.style.width="".concat(i||0,"px"),v.style.height="".concat(s||0,"px"),u.appendChild(v)}return p}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;c(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(s[0].value," ").concat(s[1].value);break;case"width":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("width");r.style.width=l.toString()}else{var l=n.parsedStyle.width;r.style.width=(0,Zl.Z)(l)?"".concat(l,"px"):l.toString()}break;case"height":if(this.context.enableCSSParsing){var u=n.computedStyleMap().get("height");r.style.height=u.toString()}else{var u=n.parsedStyle.height;r.style.height=(0,Zl.Z)(u)?"".concat(u,"px"):u.toString()}break;case"zIndex":var h=n.parsedStyle.zIndex;r.style["z-index"]="".concat(h);break;case"visibility":var p=n.parsedStyle.visibility;r.style.visibility=p;break;case"pointerEvents":var v=n.parsedStyle.pointerEvents,y=v===void 0?"auto":v;r.style.pointerEvents=y;break;case"opacity":var b=n.parsedStyle.opacity;r.style.opacity="".concat(b);break;case"fill":var T=n.parsedStyle.fill,R="";j1(T)?T.isNone?R="transparent":R=n.getAttribute("fill"):Array.isArray(T)?R=n.getAttribute("fill"):M_(T),r.style.background=R;break;case"stroke":var M=n.parsedStyle.stroke,I="";j1(M)?M.isNone?I="transparent":I=n.getAttribute("stroke"):Array.isArray(M)?I=n.getAttribute("stroke"):M_(M),r.style["border-color"]=I,r.style["border-style"]="solid";break;case"lineWidth":var N=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(N||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var U=n.style.filter;r.style.filter=U;break;default:!(0,xa.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),aR=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new X_)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Tv),sR=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,s){var l;r?l=r(t):L_&&(l=new window.Image),l&&(l.onload=function(){n.imageCache[t]=l,i(l)},l.onerror=function(u){s(u)},l.crossOrigin="Anonymous",l.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,s,l){var u=this.generatePatternKey(t);if(u&&this.patternCache[u])return this.patternCache[u];var h=t.image,p=t.repetition,v=t.transform,y,b=!1;c(h)?y=this.getImageSync(h,l):r?(y=r,b=!0):y=h;var T=y&&n.createPattern(y,p);if(T){var R=void 0;v?R=Nc(P_(v),new qf({})):R=Kr.identity(Kr.create()),b&&Kr.scale(R,R,[1/i,1/i,1]),T.setTransform({a:R[0],b:R[1],c:R[4],d:R[5],e:R[12]+s[0],f:R[13]+s[1]})}return u&&T&&(this.patternCache[u]=T),T},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,s=t.steps,l=t.min,u=t.width,h=t.height,p=t.angle,v=t.cx,y=t.cy,b=t.size;if(this.gradientCache[r])return this.gradientCache[r];var T=null;if(i===G0.LinearGradient){var R=GC(l,u,h,p),M=R.x1,I=R.y1,N=R.x2,U=R.y2;T=n.createLinearGradient(M,I,N,U)}else if(i===G0.RadialGradient){var H=ZC(l,u,h,v,y,b),X=H.x,$=H.y,Q=H.r;T=n.createRadialGradient(X,$,0,X,$,Q)}return T&&(s.forEach(function(ce){var pe=ce.offset,Re=ce.color;pe.unit===_o.kPercentage&&(T==null||T.addColorStop(pe.value/100,Re.toString()))}),this.gradientCache[r]=T),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.min,i=t.width,s=t.height,l=t.steps,u=t.angle,h=t.cx,p=t.cy,v=t.size;return"gradient-".concat(n,"-").concat((u==null?void 0:u.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(s,"-").concat(l.map(function(y){var b=y.offset,T=y.color;return"".concat(b).concat(T)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(c(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),lR=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,s=r.root.ownerDocument.defaultView,l=function(p,v,y){var b=p.parsedStyle,T=b.width,R=b.height;T&&!R?p.setAttribute("height",y/v*T):!T&&R&&p.setAttribute("width",v/y*R)},u=function(p){var v=p.target,y=v.nodeName,b=v.attributes;if(y===ai.IMAGE){var T=b.src,R=b.keepAspectRatio;c(T)&&i.getImageSync(T,function(M){var I=M.width,N=M.height;R&&l(v,I,N),v.renderable.dirty=!0,n.dirtify()})}},h=function(p){var v=p.target,y=p.attrName,b=p.newValue;v.nodeName===ai.IMAGE&&y==="src"&&c(b)&&i.getOrCreateImage(b).then(function(T){var R=T.width,M=T.height;v.attributes.keepAspectRatio&&l(v,R,M),v.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){s.addEventListener(Va.MOUNTED,u),s.addEventListener(Va.ATTR_MODIFIED,h)}),n.hooks.destroy.tap(e.tag,function(){s.removeEventListener(Va.MOUNTED,u),s.removeEventListener(Va.ATTR_MODIFIED,h)})},e.tag="LoadImage",e}(),cR=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new sR(this.context.config),this.addRenderingPlugin(new lR)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Tv),uR=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=c(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||L_&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,kO(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Jd.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,ie.mG)(this,void 0,void 0,function(){var n,r;return(0,ie.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),g2=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=uR},t.prototype.destroy=function(){delete this.context.ContextService},t}(Tv),YT=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new g2),r.registerPlugin(new cR),r.registerPlugin(new j3),r.registerPlugin(new XT),r.registerPlugin(new oR),r.registerPlugin(new tR),r.registerPlugin(new aR),r}return t}(cS),fR=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=i.root.ownerDocument,l=s.defaultView,u=function(h){var p=h.target,v=p===s,y=v&&n.dragndropPluginOptions.isDocumentDraggable?s:p.closest&&p.closest("[draggable=true]");if(y){var b=!1,T=h.timeStamp,R=[h.clientX,h.clientY],M=null,I=[h.clientX,h.clientY],N=function(H){return(0,ie.mG)(n,void 0,void 0,function(){var X,$,Q,ce,pe,Re;return(0,ie.Jh)(this,function(je){switch(je.label){case 0:if(!b){if(X=H.timeStamp-T,$=Js([H.clientX,H.clientY],R),X<=this.dragndropPluginOptions.dragstartTimeThreshold||$<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];H.type="dragstart",y.dispatchEvent(H),b=!0}return H.type="drag",H.dx=H.clientX-I[0],H.dy=H.clientY-I[1],y.dispatchEvent(H),I=[H.clientX,H.clientY],v?[3,2]:(Q=this.dragndropPluginOptions.overlap==="pointer"?[H.canvasX,H.canvasY]:p.getBounds().center,[4,s.elementsFromPoint(Q[0],Q[1])]);case 1:ce=je.sent(),pe=ce[ce.indexOf(p)+1],Re=(pe==null?void 0:pe.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?s:null),M!==Re&&(M&&(H.type="dragleave",H.target=M,M.dispatchEvent(H)),Re&&(H.type="dragenter",H.target=Re,Re.dispatchEvent(H)),M=Re,M&&(H.type="dragover",H.target=M,M.dispatchEvent(H))),je.label=2;case 2:return[2]}})})};l.addEventListener("pointermove",N);var U=function(H){if(b){H.detail={preventClick:!0};var X=H.clone();M&&(X.type="drop",X.target=M,M.dispatchEvent(X)),X.type="dragend",y.dispatchEvent(X),b=!1}l.removeEventListener("pointermove",N)};p.addEventListener("pointerup",U,{once:!0}),p.addEventListener("pointerupoutside",U,{once:!0})}};r.hooks.init.tap(e.tag,function(){l.addEventListener("pointerdown",u)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener("pointerdown",u)})},e.tag="Dragndrop",e}(),$_=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new fR((0,ie.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(Tv);function hR(e,t,n){var r;return function(){var i=this,s=arguments,l=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(l,t),u&&e.apply(i,s)}}var KT=hR,dR=function(e){return typeof e=="object"&&e!==null},bb=dR,pR=function(e){if(!bb(e)||!(0,am.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Bv=pR,qT=5;function xb(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function Eg(e,t,n,r){n=n||0,r=r||qT;for(var i in t)if(xb(t,i)){var s=t[i];s!==null&&Bv(s)?(Bv(e[i])||(e[i]={}),n<r?Eg(e[i],s,n+1,r):e[i]=t[i]):jo(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var vR=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Eg(e,t[r]);return e},ti=vR;class Eb extends Map{constructor(t,n=b2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(y2(this,t))}has(t){return super.has(y2(this,t))}set(t,n){return super.set(sl(this,t),n)}delete(t){return super.delete(_2(this,t))}}class g4 extends null{constructor(t,n=b2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(y2(this,t))}add(t){return super.add(sl(this,t))}delete(t){return super.delete(_2(this,t))}}function y2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function sl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _2({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function b2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Y_(e){return e}function Kl(e,...t){return Cy(e,Y_,Y_,t)}function K_(e,...t){return Cy(e,Array.from,Y_,t)}function QT(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([s,l])=>[...i,s,l]));return e}function y4(e,...t){return QT(K_(e,...t),t)}function _4(e,t,...n){return QT(Sb(e,t,...n),n)}function x2(e,t,...n){return Cy(e,Y_,t,n)}function Sb(e,t,...n){return Cy(e,Array.from,t,n)}function b4(e,...t){return Cy(e,identity,JT,t)}function x4(e,...t){return Cy(e,Array.from,JT,t)}function JT(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Cy(e,t,n,r){return function i(s,l){if(l>=r.length)return n(s);const u=new Eb,h=r[l++];let p=-1;for(const v of s){const y=h(v,++p,s),b=u.get(y);b?b.push(v):u.set(y,[v])}for(const[v,y]of u)u.set(v,i(y,l));return t(u)}(e,0)}var E2=function(e){return(0,xa.Z)(e)?"":e.toString()},ew=function(e){var t=E2(e);return t.charAt(0).toLowerCase()+t.substring(1)},S2=ew,mR=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};function Sg(e){return e}function T2(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),Sg)}function tw(e){return e.reduce((t,n)=>r=>mR(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),Sg)}function w2(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function Oy(e=""){throw new Error(e)}function Tb(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,s]of Object.entries(n))r.has(i)||e.attr(i,s)}function ul(e){return e!=null&&!Number.isNaN(e)}function E4(e,t){return e+(t-e)*Math.random()}function gR(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function yR(e,t){const{transform:n}=e.style,i=(s=>s==="none"||s===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function go(e,t){return nw(e,t)||{}}function nw(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[S2(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function S4(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function A2(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function Ry(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function rw(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function Cm(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function Fv(e){return e===null||e===!1}function iw(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const s=t[i];!Bv(s)||!Bv(e[i])?e[i]=s:iw(e[i],s,n,r+1)}return e}}function Pa(e){return new Iu([e],null,e,e.ownerDocument)}class Iu{constructor(t=null,n=null,r=null,i=null,s=[null,null,null,null,null],l=[],u=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=u}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Iu(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Iu(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new Iu([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const s=this._data[i],[l,u]=Array.isArray(s)?s:[s,null],h=n(l,i);h.__data__=l,u!==null&&(h.__fromElements__=u),this._parent.appendChild(h),r.push(h)}return new Iu(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const s=this._elements[i],l=s.__data__,u=n(l,i);s.appendChild(u),r.push(u)}return new Iu(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],s=i.getElementById(t);if(s)return new Iu([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=t,r&&(l.className=r),i.appendChild(l),new Iu([l],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],s=[],l=new Set(this._elements),u=[],h=new Set,p=new Map(this._elements.map((T,R)=>[n(T.__data__,R),T])),v=new Map(this._facetElements.map((T,R)=>[n(T.__data__,R),T])),y=Kl(this._elements,T=>r(T.__data__));for(let T=0;T<t.length;T++){const R=t[T],M=n(R,T),I=r(R,T);if(p.has(M)){const N=p.get(M);N.__data__=R,N.__facet__=!1,s.push(N),l.delete(N),p.delete(M)}else if(v.has(M)){const N=v.get(M);N.__data__=R,N.__facet__=!0,s.push(N),v.delete(M)}else if(y.has(M)){const N=y.get(M);u.push([R,N]);for(const U of N)l.delete(U);y.delete(M)}else if(p.has(I)){const N=p.get(I);N.__toData__?N.__toData__.push(R):N.__toData__=[R],h.add(N),l.delete(N)}else i.push(R)}const b=[new Iu([],i,this._parent,this._document),new Iu(s,null,this._parent,this._document),new Iu(l,null,this._parent,this._document),new Iu([],u,this._parent,this._document),new Iu(h,null,this._parent,this._document)];return new Iu(this._elements,null,this._parent,this._document,b)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new Iu(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=Iu.registry[t];return n?new n:Oy(`Unknown node type: ${t}`)}join(t=l=>l,n=l=>l,r=l=>l.remove(),i=l=>l,s=l=>l.remove()){const l=t(this._enter),u=n(this._update),h=r(this._exit),p=i(this._merge),v=s(this._split);return u.merge(l).merge(h).merge(p).merge(v)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new Iu([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l[t]=r(i,s,l))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l.style[t]=r(i,s,l))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,s,l){r[s]=n(i,s,l)})}on(t,n){return this.each(function(r,i,s){s.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Iu.registry={g:Mf,rect:md,circle:$0,path:vd,text:mh,ellipse:bm,image:Ov,line:_y,polygon:K1,polyline:q1,html:z_};const _l={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var _R=function(e){var t=E2(e);return t.charAt(0).toUpperCase()+t.substring(1)},Om=_R;function ow(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bR(e){return e=wb(Math.abs(e)),e?e[1]:NaN}function q_(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],h=0;i>0&&u>0&&(h+u+1>r&&(u=Math.max(1,r-h)),s.push(n.substring(i-=u,i+u)),!((h+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function xR(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var T4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){if(!(t=T4.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}a.prototype=o.prototype;function o(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var m;function w(e,t){var n=wb(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(m=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+wb(e,Math.max(0,t+s-1))[0]}function O(e,t){var n=wb(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var L={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ow,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>O(e*100,t),r:O,s:w,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function F(e){return e}var V=Array.prototype.map,re=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ee(e){var t=e.grouping===void 0||e.thousands===void 0?F:q_(V.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?F:xR(V.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(y){y=a(y);var b=y.fill,T=y.align,R=y.sign,M=y.symbol,I=y.zero,N=y.width,U=y.comma,H=y.precision,X=y.trim,$=y.type;$==="n"?(U=!0,$="g"):L[$]||(H===void 0&&(H=12),X=!0,$="g"),(I||b==="0"&&T==="=")&&(I=!0,b="0",T="=");var Q=M==="$"?n:M==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",ce=M==="$"?r:/[%p]/.test($)?l:"",pe=L[$],Re=/[defgprs%]/.test($);H=H===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function je(Ke){var ft=Q,Ye=ce,it,at,vt;if($==="c")Ye=pe(Ke)+Ye,Ke="";else{Ke=+Ke;var Vt=Ke<0||1/Ke<0;if(Ke=isNaN(Ke)?h:pe(Math.abs(Ke),H),X&&(Ke=f(Ke)),Vt&&+Ke==0&&R!=="+"&&(Vt=!1),ft=(Vt?R==="("?R:u:R==="-"||R==="("?"":R)+ft,Ye=($==="s"?re[8+m/3]:"")+Ye+(Vt&&R==="("?")":""),Re){for(it=-1,at=Ke.length;++it<at;)if(vt=Ke.charCodeAt(it),48>vt||vt>57){Ye=(vt===46?i+Ke.slice(it+1):Ke.slice(it))+Ye,Ke=Ke.slice(0,it);break}}}U&&!I&&(Ke=t(Ke,1/0));var At=ft.length+Ke.length+Ye.length,Ut=At<N?new Array(N-At+1).join(b):"";switch(U&&I&&(Ke=t(Ut+Ke,Ut.length?N-Ye.length:1/0),Ut=""),T){case"<":Ke=ft+Ke+Ye+Ut;break;case"=":Ke=ft+Ut+Ke+Ye;break;case"^":Ke=Ut.slice(0,At=Ut.length>>1)+ft+Ke+Ye+Ut.slice(At);break;default:Ke=Ut+ft+Ke+Ye;break}return s(Ke)}return je.toString=function(){return y+""},je}function v(y,b){var T=p((y=a(y),y.type="f",y)),R=Math.max(-8,Math.min(8,Math.floor(bR(b)/3)))*3,M=Math.pow(10,-R),I=re[8+R/3];return function(N){return T(M*N)+I}}return{format:p,formatPrefix:v}}var Te,$e,Dt;nn({thousands:",",grouping:[3],currency:["$",""]});function nn(e){return Te=Ee(e),$e=Te.format,Dt=Te.formatPrefix,Te}function Tn(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function sr(e){return e.map((t,n)=>n)}function Br(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let s=0;s<t;s++)r[i][s]=e[s][i];return r}function Er(e){return e[0]}function ui(e){return e[e.length-1]}function Vi(e){return!e.some(Array.isArray)}function Po(e){return Array.from(new Set(e))}function no(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function Wr(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);Wr(i,t-1).forEach(l=>{n.push([e[r],...l])})}return n}function ro(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...Wr(e,n));return t}var Ba=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},ls=Ba,ta=function(e,t){if(e===t)return!0;if(!e||!t||c(e)||c(t))return!1;if(ls(e)||ls(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=ta(e[r],t[r]),!!n);r++);return n}if(bb(e)||bb(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=ta(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},_s=ta;function is(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ds(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function np(e){return e*Math.PI/180}function rp(e){return e*180/Math.PI}function Rm(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const kv=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),Rm(n.startAngle,n.endAngle))},Qf=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=kv(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};Qf.props={};const My=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},C2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=My(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};C2.props={};function Ab(e,t,n){return Math.max(t,Math.min(e,n))}function Cb(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const ER=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var aw=D(17816);function Tc(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function kl(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function Q_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function da(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function Bs(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function gl(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function bo(e){return Bs(e)&&kl(e)}function df(e){return da(e)||kl(e)}function dc(e){return kl(e)&&Tc(e)}function Lp(e){return kl(e)||Bs(e)||Q_(e)||dc(e)}function ip(e){if(df(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function Y0(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function Ob(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(s=>s[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function Lj(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function w4(e,t){t(e),e.children&&e.children.forEach(function(n){n&&w4(n,t)})}function O2(e){sw(e,!0)}function Py(e){sw(e,!1)}function sw(e,t){var n=t?"visible":"hidden";w4(e,function(r){r.attr("visibility",n)})}function Dj(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function A4(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,ie.CR)(r,1),s=i[0];return!t.includes(s)}));return Object.fromEntries(t.map(function(r){return Dj(e)?e[r]===!1?[r,!1]:[r,(0,ie.pi)((0,ie.pi)({},e[r]),n)]:[r,n]}))}function Rb(e,t){e?e.finished.then(t):t()}function Nj(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function C4(e,t){"update"in e?e.update(t):e.attr(t)}function O4(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return C4(e,{style:r}),null}return e.animate(t,n)}function Bj(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function Fj(e,t,n,r){if(r===void 0&&(r="destroy"),Bj(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&Py(e),t.isVisible()&&O2(t)};if(!n)return i(),[null];var s=n.duration,l=s===void 0?0:s,u=n.delay,h=u===void 0?0:u,p=Math.ceil(+l/2),v=+l/4,y=(0,ie.CR)(e.getGeometryBounds().center,2),b=y[0],T=y[1],R=(0,ie.CR)(t.getGeometryBounds().center,2),M=R[0],I=R[1],N=(0,ie.CR)([(b+M)/2-b,(T+I)/2-T],2),U=N[0],H=N[1],X=e.style.opacity,$=X===void 0?1:X,Q=t.style.opacity,ce=Q===void 0?1:Q,pe=e.style.transform||"",Re=t.style.transform||"",je=e.animate([{opacity:$,transform:"translate(0, 0) ".concat(pe)},{opacity:0,transform:"translate(".concat(U,", ").concat(H,") ").concat(pe)}],(0,ie.pi)((0,ie.pi)({fill:"both"},n),{duration:h+p+v})),Ke=t.animate([{opacity:0,transform:"translate(".concat(-U,", ").concat(-H,") ").concat(Re),offset:.01},{opacity:ce,transform:"translate(0, 0) ".concat(Re)}],(0,ie.pi)((0,ie.pi)({fill:"both"},n),{duration:p+v,delay:h+p-v}));return Rb(Ke,i),[je,Ke]}function Uv(e,t,n){var r={},i={};return Object.entries(t).forEach(function(s){var l=(0,ie.CR)(s,2),u=l[0],h=l[1];if(!(0,xa.Z)(h)){var p=e.style[u]||e.parsedStyle[u]||0;p!==h&&(r[u]=p,i[u]=h)}}),n?O4(e,[r,i],(0,ie.pi)({fill:"both"},n)):(C4(e,i),null)}var kj=5,R4=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=kj),Object.entries(t).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1],h=e;Object.prototype.hasOwnProperty.call(t,l)&&(u?Bv(u)?(Bv(e[l])||(h[l]={}),n<r?R4(e[l],u,n+1,r):h[l]=t[l]):jo(u)?(h[l]=[],h[l]=h[l].concat(u)):h[l]=u:h[l]=u)})},Tg=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)R4(e,t[r]);return e},Uj=function(e){(0,ie.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Va.INSERTED,function(){Py(i)}),i}return t}(Mf);function M4(e){var t=e.appendChild(new Uj({class:"offscreen"}));return Py(t),t}function zj(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function jj(){sw(this,this.attributes.visibility!=="hidden")}var yh=function(e){(0,ie.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,Tg({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=M4(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&jj.call(this)},t.prototype.update=function(n,r){var i;return this.attr(Tg({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,s=n.transform,l=n.transformOrigin,u=n.class,h=n.className,p=n.zIndex,v=(0,ie._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return v},t}(Y1);function Dp(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(s){s.node().removeChildren()}),e?n(t):(r&&i(t),null)}function Vj(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var SR=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({style:(0,ie.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=M4(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(mh);function Hj(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function Wj(e){throw new Error(e)}var Gj=function(){function e(i,s,l,u,h,p,v){i===void 0&&(i=null),s===void 0&&(s=null),l===void 0&&(l=null),u===void 0&&(u=null),h===void 0&&(h=[null,null,null,null,null]),p===void 0&&(p=[]),v===void 0&&(v=[]),t.add(this),this._elements=Array.from(i),this._data=s,this._parent=l,this._document=u,this._enter=h[0],this._update=h[1],this._exit=h[2],this._merge=h[3],this._split=h[4],this._transitions=p,this._facetElements=v}e.prototype.selectAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(s,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},e.prototype.select=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([s],null,s,this._document)},e.prototype.append=function(i){var s=this,l=typeof i=="function"?i:function(){return s.createElement(i)},u=[];if(this._data!==null){for(var h=0;h<this._data.length;h++){var p=this._data[h],v=(0,ie.CR)(Array.isArray(p)?p:[p,null],2),y=v[0],b=v[1],T=l(y,h);T.__data__=y,b!==null&&(T.__fromElements__=b),this._parent.appendChild(T),u.push(T)}return new n(u,null,this._parent,this._document)}for(var h=0;h<this._elements.length;h++){var R=this._elements[h],y=R.__data__,T=l(y,h);R.appendChild(T),u.push(T)}return new n(u,null,u[0],this._document)},e.prototype.maybeAppend=function(i,s){var l=(0,ie.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),s);return l.attr("id",i),l},e.prototype.maybeAppendByClassName=function(i,s){var l=i.toString(),u=(0,ie.Q_)(this,t,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return u.attr("className",l),u},e.prototype.maybeAppendByName=function(i,s){var l=(0,ie.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),s);return l.attr("name",i),l},e.prototype.data=function(i,s,l){var u,h;s===void 0&&(s=function(je){return je}),l===void 0&&(l=function(){return null});for(var p=[],v=[],y=new Set(this._elements),b=[],T=new Set,R=new Map(this._elements.map(function(je,Ke){return[s(je.__data__,Ke),je]})),M=new Map(this._facetElements.map(function(je,Ke){return[s(je.__data__,Ke),je]})),I=Hj(this._elements,function(je){return l(je.__data__)}),N=0;N<i.length;N++){var U=i[N],H=s(U,N),X=l(U,N);if(R.has(H)){var $=R.get(H);$.__data__=U,$.__facet__=!1,v.push($),y.delete($),R.delete(H)}else if(M.has(H)){var $=M.get(H);$.__data__=U,$.__facet__=!0,v.push($),M.delete(H)}else if(I.has(H)){var Q=I.get(H);b.push([U,Q]);try{for(var ce=(u=void 0,(0,ie.XA)(Q)),pe=ce.next();!pe.done;pe=ce.next()){var $=pe.value;y.delete($)}}catch(je){u={error:je}}finally{try{pe&&!pe.done&&(h=ce.return)&&h.call(ce)}finally{if(u)throw u.error}}I.delete(H)}else if(R.has(X)){var $=R.get(X);$.__toData__?$.__toData__.push(U):$.__toData__=[U],T.add($),y.delete($)}else p.push(U)}var Re=[new n([],p,this._parent,this._document),new n(v,null,this._parent,this._document),new n(y,null,this._parent,this._document),new n([],b,this._parent,this._document),new n(T,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,Re)},e.prototype.merge=function(i){var s=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(this._elements),!1),(0,ie.CR)(i._elements),!1),l=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(this._transitions),!1),(0,ie.CR)(i._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var s=n.registry[i];return s?new s:Wj("Unknown node type: ".concat(i))},e.prototype.join=function(i,s,l,u,h){i===void 0&&(i=function(R){return R}),s===void 0&&(s=function(R){return R}),l===void 0&&(l=function(R){return R.remove()}),u===void 0&&(u=function(R){return R}),h===void 0&&(h=function(R){return R.remove()});var p=i(this._enter),v=s(this._update),y=l(this._exit),b=u(this._merge),T=h(this._split);return v.merge(p).merge(y).merge(b).merge(T)},e.prototype.remove=function(){for(var i=function(u){var h=s._elements[u],p=s._transitions[u];p?p.then(function(){return h.remove()}):h.remove()},s=this,l=0;l<this._elements.length;l++)i(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],u=l.__data__;i.call(l,u,s)}return this},e.prototype.attr=function(i,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(u,h){s!==void 0&&(this[i]=l.call(this,u,h))})},e.prototype.style=function(i,s,l){l===void 0&&(l=!0);var u=typeof s!="function"||!l?function(){return s}:s;return this.each(function(h,p){s!==void 0&&(this.style[i]=u.call(this,h,p))})},e.prototype.styles=function(i,s){return i===void 0&&(i={}),s===void 0&&(s=!0),this.each(function(l,u){var h=this;Object.entries(i).forEach(function(p){var v=(0,ie.CR)(p,2),y=v[0],b=v[1],T=typeof b!="function"||!s?function(){return b}:b;b!==void 0&&h.attr(y,T.call(h,l,u))})})},e.prototype.update=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(u,h){i&&this.update&&this.update(l.call(this,u,h))})},e.prototype.maybeUpdate=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(u,h){i&&this.update&&this.update(l.call(this,u,h))})},e.prototype.transition=function(i){var s=this._transitions;return this.each(function(l,u){s[u]=i.call(this,l,u)})},e.prototype.on=function(i,s){return this.each(function(){this.addEventListener(i,s)}),this},e.prototype.call=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.call.apply(i,(0,ie.ev)([this._parent,this],(0,ie.CR)(s),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(s,l){var u=this._elements[0],h=u.querySelector(s);if(h)return new n([h],null,this._parent,this._document);var p=typeof l=="string"?this.createElement(l):l();return u.appendChild(p),new n([p],null,this._parent,this._document)},e.registry={g:Mf,rect:md,circle:$0,path:vd,text:SR,ellipse:bm,image:Ov,line:_y,polygon:K1,polyline:q1,html:z_},e}();function ps(e){return new Gj([e],null,e,e.ownerDocument)}function Zj(e,t,n){return e.querySelector(t)?ps(e).select(t):ps(e).append(n)}var K0=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1],h=n(u);return[l,{name:h,class:".".concat(h),id:"#".concat(h),toString:function(){return h}}]}));return Object.assign(r,{prefix:n}),r},TR={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new vd({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},kde=ti({},TR,{style:{type:"arc"}}),Ude=ti({},TR,{style:{}}),ac=K0({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),op=function(e){return typeof e=="function"};function wg(e,t){return[e[0]*t,e[1]*t]}function R2(e,t){return[e[0]+t[0],e[1]+t[1]]}function wR(e,t){return[e[0]-t[0],e[1]-t[1]]}function J_(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function e1(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function M2(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function P4(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function zde(e,t,n){var r=__read(e,2),i=r[0],s=r[1],l=__read(t,2),u=l[0],h=l[1],p=i-u,v=s-h,y=Math.sin(n),b=Math.cos(n);return[p*b-v*y+u,p*y+v*b+h]}function Xj(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function Mb(e){return e*Math.PI/180}function I4(e){return Number((e*180/Math.PI).toPrecision(5))}function AR(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function $j(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function Yj(e,t){return"".concat(t).concat(AR(e))}function L4(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=e.replace(new RegExp("^(".concat(i,")")),"");return n?$j(s):s}function Kj(e,t){Object.entries(t).forEach(function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1];(0,ie.ev)([e],(0,ie.CR)(e.querySelectorAll(i)),!1).filter(function(l){return l.matches(i)}).forEach(function(l){if(l){var u=l;u.style.cssText+=Object.entries(s).reduce(function(h,p){return"".concat(h).concat(p.join(":"),";")},"")}})})}var lw=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function Vs(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1];if(!(l==="className"||l==="class")){if(lw(l,"show")&&lw(L4(l,"show"),t)!==n)l===Yj(t,"show")?r[l]=u:r[l.replace(new RegExp(AR(t)),"")]=u;else if(!lw(l,"show")&&lw(l,t)!==n){var h=L4(l,t);h==="filter"&&typeof u=="function"||(r[h]=u)}}}),r}function Mm(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,ie.CR)(r,2),s=i[0],l=i[1];return s.startsWith("show")?n["show".concat(t).concat(s.slice(4))]=l:n["".concat(t).concat(AR(s))]=l,n},{})}function Ag(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(s){var l=(0,ie.CR)(s,2),u=l[0],h=l[1];t.includes(u)||(n.indexOf(u)!==-1?i[u]=h:r[u]=h)}),[r,i]}function q0(e,t){return op(e)?e.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t),!1)):e}function cw(e,t){return e.style.opacity||(e.style.opacity=1),Uv(e,{opacity:0},t)}var qj=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Qj(e){return qj.includes(e)}function D4(e){var t={};for(var n in e)Qj(n)&&(t[n]=e[n]);return t}var Pb=K0({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function N4(e){return e.reduce(function(t,n,r){return t.push((0,ie.ev)([r===0?"M":"L"],(0,ie.CR)(n),!1)),t},[])}function Jj(e,t,n){var r=t.connect,i=r===void 0?"line":r,s=t.center;if(i==="line")return N4(e);if(!s)return[];var l=M2(e[0],s),u=n?0:1;return e.reduce(function(h,p,v){return v===0?h.push((0,ie.ev)(["M"],(0,ie.CR)(p),!1)):h.push((0,ie.ev)(["A",l,l,0,0,u],(0,ie.CR)(p),!1)),h},[])}function CR(e,t,n){return t.type==="surround"?Jj(e,t,n):N4(e)}function eV(e,t,n){var r=n.type,i=n.connect,s=n.center,l=n.closed,u=l?[["Z"]]:[],h=(0,ie.CR)([CR(e,n),CR(t.slice().reverse(),n,!0)],2),p=h[0],v=h[1],y=(0,ie.CR)([e[0],t.slice(-1)[0]],2),b=y[0],T=y[1],R=function(U,H){return[p,U,v,H,u].flat()};if(i==="line"||r==="surround")return R([(0,ie.ev)(["L"],(0,ie.CR)(T),!1)],[(0,ie.ev)(["L"],(0,ie.CR)(b),!1)]);if(!s)throw new Error("Arc grid need to specified center");var M=(0,ie.CR)([M2(T,s),M2(b,s)],2),I=M[0],N=M[1];return R([(0,ie.ev)(["A",I,I,0,0,1],(0,ie.CR)(T),!1),(0,ie.ev)(["L"],(0,ie.CR)(T),!1)],[(0,ie.ev)(["A",N,N,0,0,0],(0,ie.CR)(b),!1),(0,ie.ev)(["L"],(0,ie.CR)(b),!1)])}function tV(e,t,n,r){var i=n.animate,s=n.isBillboard,l=t.map(function(u,h){return{id:u.id||"grid-line-".concat(h),d:CR(u.points,n)}});return e.selectAll(Pb.line.class).data(l,function(u){return u.id}).join(function(u){return u.append("path").each(function(h,p){var v=q0(D4((0,ie.pi)({d:h.d},r)),[h,p,l]);this.attr((0,ie.pi)({class:Pb.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},v))})},function(u){return u.transition(function(h,p){var v=q0(D4((0,ie.pi)({d:h.d},r)),[h,p,l]);return Uv(this,v,i.update)})},function(u){return u.transition(function(){var h=this,p=cw(this,i.exit);return Rb(p,function(){return h.remove()}),p})}).transitions()}function nV(e,t,n){var r=n.animate,i=n.connect,s=n.areaFill;if(t.length<2||!s||!i)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],u=function(R){return l[R%l.length]},h=[],p=0;p<t.length-1;p++){var v=(0,ie.CR)([t[p].points,t[p+1].points],2),y=v[0],b=v[1],T=eV(y,b,n);h.push({d:T,fill:u(p)})}return e.selectAll(Pb.region.class).data(h,function(R,M){return M}).join(function(R){return R.append("path").each(function(M,I){var N=q0(M,[M,I,h]);this.attr(N)}).attr("className",Pb.region.name)},function(R){return R.transition(function(M,I){var N=q0(M,[M,I,h]);return Uv(this,N,r.update)})},function(R){return R.transition(function(){var M=this,I=cw(this,r.exit);return Rb(I,function(){return M.remove()}),I})}).transitions()}function rV(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var s=i.points,l=(0,ie.CR)(s,1),u=l[0];return(0,ie.pi)((0,ie.pi)({},i),{points:(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(s),!1),[u],!1)})}):n}var iV=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,s=n.center,l=n.areaFill,u=n.closed,h=(0,ie._T)(n,["type","center","areaFill","closed"]),p=rV(n),v=ps(r).maybeAppendByClassName(Pb.lineGroup,"g"),y=ps(r).maybeAppendByClassName(Pb.regionGroup,"g"),b=tV(v,p,n,h),T=nV(y,p,n);return(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(b),!1),(0,ie.CR)(T),!1)},t}(yh),bl=function(e,t,n){for(var r=0,i=c(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},oV=function(e,t){return function(n){return e*(1-n)+t*n}};function aV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var s=new Array(r),l=new Array(n),u=0;for(u=0;u<r;++u)s[u]=OR(e[u],t[u]);for(;u<n;++u)l[u]=t[u];for(u=0;u<r;++u)l[u]=s[u](i);return l}}function sV(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1];l in e?n[l]=OR(e[l],u):r[l]=u}),function(i){return Object.entries(n).forEach(function(s){var l=(0,ie.CR)(s,2),u=l[0],h=l[1];return r[u]=h(i)}),r}}function OR(e,t){return typeof e=="number"&&typeof t=="number"?oV(e,t):Array.isArray(e)&&Array.isArray(t)?aV(e,t):typeof e=="object"&&typeof t=="object"?sV(e,t):function(n){return e}}function lV(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,s=i===void 0?0:i,l=OR(t,n),u=Math.ceil(+s/16),h=new Array(u).fill(0).map(function(p,v,y){return{__keyframe_data__:l(v/(y.length-1))}});return e.animate(h,(0,ie.pi)({fill:"both"},r))}function t1(e){return typeof e=="function"?e():c(e)||(0,Zl.Z)(e)?new SR({style:{text:String(e)}}):e}function RR(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,s=r.height,l=t/Math.max(i,s);return n&&(e.style.transform="scale(".concat(l,")")),l}function B4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function F4(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1];return[i,q0(s,t)]}))}function jde(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,s=e.center,l=e.radius;return __spreadArray(__spreadArray([r,i],__read(s),!1),[l],!1)}function MR(e,t){return t&&op(t)?e.filter(t):e}function k4(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function uw(e,t){if(t.type==="linear"){var n=(0,ie.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ie.CR)(t.endPos,2),l=s[0],u=s[1],h=(0,ie.CR)([l-r,u-i],2),p=h[0],v=h[1];return P4([p,v])}var y=Mb(k4(e,t));return[-Math.sin(y),Math.cos(y)]}function PR(e,t,n){var r=uw(e,n);return Xj(r,t!=="positive")}function P2(e,t){return PR(e,t.labelDirection,t)}function cV(e,t){var n=(0,ie.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ie.CR)(t.endPos,2),l=s[0],u=s[1],h=(0,ie.CR)([l-r,u-i],2),p=h[0],v=h[1];return[r+p*e,i+v*e]}function uV(e,t){var n=t.radius,r=(0,ie.CR)(t.center,2),i=r[0],s=r[1],l=Mb(k4(e,t));return[i+n*Math.cos(l),s+n*Math.sin(l)]}function fw(e,t){return t.type==="linear"?cV(e,t):uV(e,t)}function U4(e){return uw(0,e)[1]===0}function z4(e){return uw(0,e)[0]===0}function j4(e,t){return t-e===360}function V4(e,t,n,r,i){var s=t-e,l=(0,ie.CR)([i,i],2),u=l[0],h=l[1],p=(0,ie.CR)([Mb(e),Mb(t)],2),v=p[0],y=p[1],b=function(je){return[n+i*Math.cos(je),r+i*Math.sin(je)]},T=(0,ie.CR)(b(v),2),R=T[0],M=T[1],I=(0,ie.CR)(b(y),2),N=I[0],U=I[1];if(j4(e,t)){var H=(y+v)/2,X=(0,ie.CR)(b(H),2),$=X[0],Q=X[1];return[["M",R,M],["A",u,h,0,1,0,$,Q],["A",u,h,0,1,0,N,U]]}var ce=s>180?1:0,pe=e>t?0:1,Re=!1;return Re?"M".concat(n,",").concat(r,",L").concat(R,",").concat(M,",A").concat(u,",").concat(h,",0,").concat(ce,",").concat(pe,",").concat(N,",").concat(U,",L").concat(n,",").concat(r):"M".concat(R,",").concat(M,",A").concat(u,",").concat(h,",0,").concat(ce,",").concat(pe,",").concat(N,",").concat(U)}function fV(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,s=t.radius;return(0,ie.ev)((0,ie.ev)([n,r],(0,ie.CR)(i),!1),[s],!1)}function hV(e,t,n,r){var i=t.startAngle,s=t.endAngle,l=t.center,u=t.radius;return e.selectAll(ac.line.class).data([{d:V4.apply(void 0,(0,ie.ev)((0,ie.ev)([i,s],(0,ie.CR)(l),!1),[u],!1))}],function(h,p){return p}).join(function(h){return h.append("path").attr("className",ac.line.name).styles(t).styles({d:function(p){return p.d}})},function(h){return h.transition(function(){var p=this,v=lV(this,fV(this),(0,ie.ev)((0,ie.ev)([i,s],(0,ie.CR)(l),!1),[u],!1),r.update);if(v){var y=function(){var b=bl(p.attributes,"__keyframe_data__");p.style.d=V4.apply(void 0,(0,ie.ev)([],(0,ie.CR)(b),!1))};v.onframe=y,v.onfinish=y}return v}).styles(t)},function(h){return h.remove()}).styles(n).transitions()}function dV(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function pV(e,t,n){n===void 0&&(n=[0,0]);var r=(0,ie.CR)([e,t,n],3),i=(0,ie.CR)(r[0],2),s=i[0],l=i[1],u=(0,ie.CR)(r[1],2),h=u[0],p=u[1],v=(0,ie.CR)(r[2],2),y=v[0],b=v[1],T=(0,ie.CR)([h-s,p-l],2),R=T[0],M=T[1],I=Math.sqrt(Math.pow(R,2)+Math.pow(M,2)),N=(0,ie.CR)([-y/I,b/I],2),U=N[0],H=N[1];return[U*R,U*M,H*R,H*M]}function H4(e){var t=(0,ie.CR)(e,2),n=(0,ie.CR)(t[0],2),r=n[0],i=n[1],s=(0,ie.CR)(t[1],2),l=s[0],u=s[1];return{x1:r,y1:i,x2:l,y2:u}}function vV(e,t,n,r){var i=t.showTrunc,s=t.startPos,l=t.endPos,u=t.truncRange,h=t.lineExtension,p=(0,ie.CR)([s,l],2),v=(0,ie.CR)(p[0],2),y=v[0],b=v[1],T=(0,ie.CR)(p[1],2),R=T[0],M=T[1],I=(0,ie.CR)(h?pV(s,l,h):new Array(4).fill(0),4),N=I[0],U=I[1],H=I[2],X=I[3],$=function(At){return e.selectAll(ac.line.class).data(At,function(Ut,Sn){return Sn}).join(function(Ut){return Ut.append("line").attr("className",function(Sn){return"".concat(ac.line.name," ").concat(Sn.className)}).styles(n).transition(function(Sn){return Uv(this,H4(Sn.line),!1)})},function(Ut){return Ut.styles(n).transition(function(Sn){var Vn=Sn.line;return Uv(this,H4(Vn),r.update)})},function(Ut){return Ut.remove()}).transitions()};if(!i||!u)return $([{line:[[y+N,b+U],[R+H,M+X]],className:ac.line.name}]);var Q=(0,ie.CR)(u,2),ce=Q[0],pe=Q[1],Re=R-y,je=M-b,Ke=(0,ie.CR)([y+Re*ce,b+je*ce],2),ft=Ke[0],Ye=Ke[1],it=(0,ie.CR)([y+Re*pe,b+je*pe],2),at=it[0],vt=it[1],Vt=$([{line:[[y+N,b+U],[ft,Ye]],className:ac.lineFirst.name},{line:[[at,vt],[R+H,M+X]],className:ac.lineSecond.name}]);return dV(e,t),Vt}function mV(e,t,n,r){var i=n.showArrow,s=n.showTrunc,l=n.lineArrow,u=n.lineArrowOffset,h=n.lineArrowSize,p;if(t==="arc"?p=e.select(ac.line.class):s?p=e.select(ac.lineSecond.class):p=e.select(ac.line.class),!i||!l||n.type==="arc"&&j4(n.startAngle,n.endAngle)){var v=p.node();v&&(v.style.markerEnd=void 0);return}var y=t1(l);y.attr(r),RR(y,h,!0),p.style("markerEnd",y).style("markerEndOffset",-u)}function gV(e,t,n){var r=t.type,i,s=Vs(t,"line");return r==="linear"?i=vV(e,t,B4(s,"arrow"),n):i=hV(e,t,B4(s,"arrow"),n),mV(e,r,t,s),i}function yV(e,t){return PR(e,t.gridDirection,t)}function W4(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function _V(e,t){var n=t.gridLength;return e.map(function(r,i){var s=r.value,l=(0,ie.CR)(fw(s,t),2),u=l[0],h=l[1],p=(0,ie.CR)(wg(yV(s,t),n),2),v=p[0],y=p[1];return{id:i,points:[[u,h],[u+v,h+y]]}})}function bV(e,t){var n=t.gridControlAngles,r=W4(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,ie.CR)(r,2),s=i[0],l=i[1];return e.map(function(u,h){var p=u.value,v=(0,ie.CR)(fw(p,t),2),y=v[0],b=v[1],T=(0,ie.CR)([y-s,b-l],2),R=T[0],M=T[1],I=[];return n.forEach(function(N){var U=Mb(N),H=(0,ie.CR)([Math.cos(U),Math.sin(U)],2),X=H[0],$=H[1],Q=R*X-M*$+s,ce=R*$+M*X+l;I.push([Q,ce])}),{points:I,id:h}})}function xV(e,t,n,r){var i=Vs(n,"grid"),s=i.type,l=i.areaFill,u=W4(n),h=MR(t,n.gridFilter),p=s==="segment"?_V(h,n):bV(h,n),v=(0,ie.pi)((0,ie.pi)({},i),{center:u,areaFill:op(l)?h.map(function(y,b){return q0(l,[y,b,h])}):l,animate:r,data:p});return e.selectAll(ac.grid.class).data([1]).join(function(y){return y.append(function(){return new iV({style:v})}).attr("className",ac.grid.name)},function(y){return y.transition(function(){return this.update(v)})},function(y){return y.remove()}).transitions()}function jh(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function EV(e){var t,n,r,i=e||1;function s(u,h){++t>i&&(r=n,l(1),++t),n[u]=h}function l(u){t=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var h=n[u];if(h!==void 0)return h;if((h=r[u])!==void 0)return s(u,h),h},set:function(u,h){n[u]!==void 0?n[u]=h:s(u,h)}}}var SV=function(e,t,n){if(n===void 0&&(n=128),!op(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=t?t.apply(this,i):i[0],u=r.cache;if(u.has(l))return u.get(l);var h=e.apply(this,i);return u.set(l,h),h};return r.cache=EV(n),r},hw,IR;function Vde(e){IR=e}var TV=SV(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return IR?IR(e,n):(hw||(hw=Yr.offscreenCanvasCreator.getOrCreateContext(void 0)),hw.font=[s,l,i,"".concat(n,"px"),r].join(" "),hw.measureText(e).width)},function(e,t){return[e,Object.values(t||G4(e)).join()].join("")},4096),G4=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,s=e.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function Z4(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function X4(e,t){var n=Z4(e);n&&n.attr(t)}function LR(e,t,n){n===void 0&&(n="..."),X4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function wV(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),X4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function AV(e,t,n){var r=e.getBBox(),i=r.width,s=r.height,l=(0,ie.CR)([t,n].map(function(p,v){var y;return p.includes("%")?parseFloat(((y=p.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||y===void 0?void 0:y[0])||"0")/100*(v===0?i:s):p}),2),u=l[0],h=l[1];return[u,h]}function $4(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,s,l){return"translate(".concat(AV(e,s,l),")")});e.attr("transform",r)}catch(i){}}var Y4=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function Vh(e){if((0,Zl.Z)(e))return[e,e,e,e];if(jo(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var DR=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,s=i.x1,l=i.y1,u=i.x2,h=i.y2,p=Math.cos(t),v=Math.sin(t),y=n-n*p+r*v,b=r-n*v-r*p,T=[[p*s-v*h+y,v*s+p*h+b],[p*u-v*h+y,v*u+p*h+b],[p*s-v*l+y,v*s+p*l+b],[p*u-v*l+y,v*u+p*l+b]];return T},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function dw(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=(0,ie.CR)(r.min,2),s=i[0],l=i[1],u=(0,ie.CR)(r.max,2),h=u[0],p=u[1],v=e.getBBox(),y=v.width,b=v.height,T=b,R=0,M=0,I=s,N=l,U=Z4(e);if(U){T-=1.5;var H=U.style.textAlign,X=U.style.textBaseline;H==="center"?I=(s+h)/2:(H==="right"||H==="end")&&(I=h),X==="middle"?N=(l+p)/2:X==="bottom"&&(N=p)}var $=(0,ie.CR)(Vh(t),4),Q=$[0],ce=Q===void 0?0:Q,pe=$[1],Re=pe===void 0?0:pe,je=$[2],Ke=je===void 0?ce:je,ft=$[3],Ye=ft===void 0?Re:ft,it=new DR((R+=s)-Ye,(M+=l)-ce,R+y+Re,M+T+Ke);return e.setEulerAngles(n),it.rotatedPoints(Mb(n),I,N)}function I2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function L2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function CV(e,t){var n=L2(e[0],e[1],t[0]),r=L2(e[0],e[1],t[1]),i=L2(t[0],t[1],e[0]),s=L2(t[0],t[1],e[1]);return!!(n!==r&&i!==s||n===0&&I2(e,t[0])||r===0&&I2(e,t[1])||i===0&&I2(t,e[0])||s===0&&I2(t,e[1]))}function OV(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(CV(l,r)){if(L2(l[0],t,l[1])===0)return I2(l,t);i++}s=(s+1)%n}while(s!==0);return!!(i&1)}function RV(e,t){return t.every(function(n){return OV(e,n)})}function MV(e,t,n){var r=e.x1,i=e.x2,s=e.y1,l=e.y2,u=[[r,s],[i,s],[i,l],[r,l]],h=dw(t,n);return RV(u,h)}function K4(e,t){var n=(0,ie.CR)(e,4),r=n[0],i=n[1],s=n[2],l=n[3],u=(0,ie.CR)(t,4),h=u[0],p=u[1],v=u[2],y=u[3],b=s-r,T=l-i,R=v-h,M=y-p,I=b*M-R*T;if(I===0)return!1;var N=I>0,U=r-h,H=i-p,X=b*H-T*U;if(X<0===N)return!1;var $=R*H-M*U;return!($<0===N||X>I===N||$>I===N)}function q4(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return K4(t,r)})}var Hde={lineToLine:K4,intersectBoxLine:q4,getBounds:dw};function PV(e,t,n){var r,i,s=dw(e,n).flat(1),l=dw(t,n).flat(1),u=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var h=(0,ie.XA)(u),p=h.next();!p.done;p=h.next()){var v=p.value;if(q4(l,v))return!0}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return!1}function IV(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var s=e.center,l=e.radius,u=(0,ie.CR)(s,2),h=u[0],p=u[1],v=r==="negative"?0:i,y=-l-v,b=l+v,T=(0,ie.CR)(Vh(t),4),R=T[0],M=T[1],I=T[2],N=T[3];return new DR(h+y-N,p+y-R,h+b+M,p+b+I)}var U=(0,ie.CR)(e.startPos,2),H=U[0],X=U[1],$=(0,ie.CR)(e.endPos,2),Q=$[0],ce=$[1],pe=(0,ie.CR)(z4(e)?[-t,0,t,0]:[0,t,0,-t],4),Re=pe[0],je=pe[1],Ke=pe[2],ft=pe[3],Ye=P2(0,e),it=wg(Ye,i),at=new DR(H,X,Q,ce);return at.x1+=ft,at.y1+=Re,at.x2+=je+it[0],at.y2+=Ke+it[1],at}function pw(e,t,n){var r,i,s=t.crossPadding,l=new Set,u=null,h=IV(t,s),p=function(R){return h?MV(h,R):!0},v=function(R,M){return!R||!R.firstChild?!0:!PV(R.firstChild,M.firstChild,Vh(n))};try{for(var y=(0,ie.XA)(e),b=y.next();!b.done;b=y.next()){var T=b.value;p(T)?!u||v(u,T)?u=T:(l.add(u),l.add(T)):l.add(T)}}catch(R){r={error:R}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return Array.from(l)}function NR(e,t){return t===void 0&&(t={}),(0,xa.Z)(e)?0:typeof e=="number"?e:Math.floor(TV(e,t))}function LV(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,s=i===void 0?"...":i,l=t.minLength,u=t.maxLength,h=u===void 0?1/0:u,p=t.step,v=p===void 0?" ":p,y=t.margin,b=y===void 0?[0,0,0,0]:y,T=G4(r.getTextShape(e[0])),R=NR(v,T),M=l?NR(l,T):R,I=NR(h,T);((0,xa.Z)(I)||I===1/0)&&(I=Math.max.apply(null,e.map(function(it){return it.getBBox().width})));for(var N=e.slice(),U=(0,ie.CR)(b,4),H=U[0],X=H===void 0?0:H,$=U[1],Q=$===void 0?0:$,ce=U[2],pe=ce===void 0?X:ce,Re=U[3],je=Re===void 0?Q:Re,Ke=function(it){if(N.forEach(function(at){r.ellipsis(r.getTextShape(at),it,s)}),N=pw(e,n,b),N.length<1)return{value:void 0}},ft=I;ft>M+R;ft-=R){var Ye=Ke(ft);if(typeof Ye=="object")return Ye.value}}}function Wde(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function Q4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,ie.CR)([n,r],2),s=(0,ie.CR)(i[0],2),l=s[0],u=s[1],h=(0,ie.CR)(i[1],2),p=h[0],v=h[1];return{x:l,y:u,width:p-l,height:v-u,left:l,bottom:v,top:u,right:p}}function Gde(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function DV(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1],s=(0,ie.CR)(t,2),l=s[0],u=s[1];return r!==l&&i===u}function Zde(e,t){var n=__read(e,2),r=n[0],i=n[1],s=__read(t,2),l=s[0],u=s[1];return r===l&&i!==u}function NV(e,t){var n,r,i=t.attributes;try{for(var s=(0,ie.XA)(Object.entries(i)),l=s.next();!l.done;l=s.next()){var u=(0,ie.CR)(l.value,2),h=u[0],p=u[1];h!=="id"&&h!=="className"&&e.attr(h,p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var BV={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,s){return s%r?(Py(i),!1):!0})}},FV=function(e){return e.filter(Y4)};function kV(e,t,n,r){var i=e.length,s=t.keepHeader,l=t.keepTail;if(!(i<=1||i===2&&s&&l)){var u=BV.parity,h=function(H){return H.forEach(r.show),H},p=2,v=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,ie.ev)([1],(0,ie.CR)(e.map(function(H){return H.getBBox().width})),!1));if(n.type==="linear"&&(U4(n)||z4(n))){var T=Q4(e[0]).left,R=Q4(e[i-1]).right,M=Math.abs(R-T)||1;p=Math.max(Math.floor(i*b/M),p)}var I,N;for(s&&(I=v.splice(0,1)[0]),l&&(N=v.splice(-1,1)[0],v.reverse()),h(v);p<e.length&&pw(FV(N?(0,ie.ev)((0,ie.ev)([N],(0,ie.CR)(y),!1),[I],!1):(0,ie.ev)([I],(0,ie.CR)(y),!1)),n,t==null?void 0:t.margin).length;){if(N&&!I&&p%2===0){var U=v.splice(0,1);U.forEach(r.hide)}else if(N&&I){var U=v.splice(0,1);U.forEach(r.hide)}y=u(h(v),{seq:p}),p++}}}function UV(e,t,n,r){var i,s,l=t.optionalAngles,u=l===void 0?[0,45,90]:l,h=t.margin,p=t.recoverWhenFailed,v=p===void 0?!0:p,y=e.map(function(N){return N.getLocalEulerAngles()}),b=function(){return pw(e,n,h).length<1},T=function(N){return e.forEach(function(U,H){var X=Array.isArray(N)?N[H]:N;r.rotate(U,+X)})};try{for(var R=(0,ie.XA)(u),M=R.next();!M.done;M=R.next()){var I=M.value;if(T(I),b())return}}catch(N){i={error:N}}finally{try{M&&!M.done&&(s=R.return)&&s.call(R)}finally{if(i)throw i.error}}v&&T(y)}function zV(e){var t=e.type,n=e.labelDirection;return t==="linear"&&U4(e)?n==="negative"?"bottom":"top":"middle"}function jV(e,t,n,r){var i=t.wordWrapWidth,s=i===void 0?50:i,l=t.maxLines,u=l===void 0?3:l,h=t.recoverWhenFailed,p=h===void 0?!0:h,v=t.margin,y=v===void 0?[0,0,0,0]:v,b=e.map(function(U){return U.attr("maxLines")||1}),T=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(b),!1)),R=function(){return pw(e,n,y).length<1},M=zV(n),I=function(U){return e.forEach(function(H,X){var $=Array.isArray(U)?U[X]:U;r.wrap(H,s,$,M)})};if(!(T>u)){for(var N=T;N<=u;N++)if(I(N),R())return;p&&I(b)}}var VV=new Map([["hide",kV],["rotate",UV],["ellipsis",LV],["wrap",jV]]);function HV(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!zj(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function WV(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(s){var l=s.type,u=VV.get(l);HV(e,t,l)&&(u==null||u(e,s,t,n))})}function GV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function J4(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function BR(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1],s=(0,ie.CR)(t,2),l=s[0],u=s[1],h=(0,ie.CR)([r*l+i*u,r*u-i*l],2),p=h[0],v=h[1];return Math.atan2(v,p)}function ZV(e){var t=(e+360)%180;return jh(t,-90,90)||(t+=180),t}function XV(e,t,n){var r,i=n.labelAlign,s=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return t.getLocalEulerAngles();var l=0,u=P2(e.value,n),h=uw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?l=BR([1,0],u):l=BR([h[0]<0?-1:1,0],h),ZV(I4(l)))}function eL(e,t,n){var r=n.type,i=n.labelAlign,s=P2(e,n),l=J4(t),u=J4(I4(BR([1,0],s))),h="center",p="middle";return r==="linear"?[90,270].includes(u)&&l===0?(h="center",p=s[1]===1?"top":"bottom"):!(u%180)&&[90,270].includes(l)?h="center":u===0?(jh(l,0,90,!1,!0)||jh(l,0,90)||jh(l,270,360))&&(h="start"):u===90?jh(l,0,90,!1,!0)?h="start":(jh(l,90,180)||jh(l,270,360))&&(h="end"):u===270?jh(l,0,90,!1,!0)?h="end":(jh(l,90,180)||jh(l,270,360))&&(h="start"):u===180&&(l===90?h="start":(jh(l,0,90)||jh(l,270,360))&&(h="end")):i==="parallel"?jh(u,0,180,!0)?p="top":p="bottom":i==="horizontal"?jh(u,90,270,!1)?h="end":(jh(u,270,360,!1)||jh(u,0,90))&&(h="start"):i==="perpendicular"&&(jh(u,90,270)?h="end":h="start"),{textAlign:h,textBaseline:p}}function $V(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=eL(r,e,n),s=t.querySelector(ac.labelItem.class);s&&nL(s,i)}function tL(e,t,n){var r=n.showTick,i=n.tickLength,s=n.tickDirection,l=n.labelDirection,u=n.labelSpacing,h=t.indexOf(e),p=q0(u,[e,h,t]),v=(0,ie.CR)([P2(e.value,n),GV(l,s)],2),y=v[0],b=v[1],T=b===1?q0(r?i:0,[e,h,t]):0,R=(0,ie.CR)(R2(wg(y,p+T),fw(e.value,n)),2),M=R[0],I=R[1];return{x:M,y:I}}function YV(e,t,n,r){var i=r.labelFormatter,s=op(i)?function(){return t1(q0(i,[e,t,n,P2(e.value,r)]))}:function(){return t1(e.label||"")};return s}function nL(e,t){e.nodeName==="text"&&e.attr(t)}function rL(e){WV(this.node().childNodes,e,{hide:Py,show:O2,rotate:function(t,n){$V(+n,t,e)},ellipsis:function(t,n,r){t&&LR(t,n||1/0,r)},wrap:function(t,n,r){t&&wV(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function iL(e,t,n,r,i){var s=n.indexOf(t),l=ps(e).append(YV(t,s,n,i)).attr("className",ac.labelItem.name).node(),u=(0,ie.CR)(Ag(F4(r,[t,s,n])),2),h=u[0],p=u[1],v=p.transform,y=(0,ie._T)(p,["transform"]);$4(l,v);var b=XV(t,l,i);return l.getLocalEulerAngles()||l.setLocalEulerAngles(b),nL(l,(0,ie.pi)((0,ie.pi)({},eL(t.value,b,i)),h)),e.attr(y),l}function KV(e,t,n,r){var i=MR(t,n.labelFilter),s=Vs(n,"label");return e.selectAll(ac.label.class).data(i,function(l,u){return u}).join(function(l){return l.append("g").attr("className",ac.label.name).transition(function(u){iL(this,u,t,s,n);var h=tL(u,t,n),p=h.x,v=h.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null}).call(function(){rL.call(e,n)})},function(l){return l.transition(function(u){var h=this.querySelector(ac.labelItem.class),p=iL(this,u,t,s,n),v=Fj(h,p,r.update),y=tL(u,t,n),b=y.x,T=y.y,R=Uv(this,{transform:"translate(".concat(b,", ").concat(T,")")},r.update);return(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(v),!1),[R],!1)}).call(function(u){var h=bl(u,"_transitions").flat().filter(Y4);Nj(h,function(){rL.call(e,n)})})},function(l){return l.transition(function(){var u=this,h=cw(this.childNodes[0],r.exit);return Rb(h,function(){return ps(u).remove()}),h})}).transitions()}function oL(e,t){return PR(e,t.tickDirection,t)}function qV(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function QV(e,t,n,r,i){var s=i.tickLength,l=(0,ie.CR)(qV(r,q0(s,[e,t,n])),2),u=(0,ie.CR)(l[0],2),h=u[0],p=u[1],v=(0,ie.CR)(l[1],2),y=v[0],b=v[1];return{x1:h,x2:y,y1:p,y2:b}}function JV(e,t,n,r,i){var s=i.tickFormatter,l=oL(t.value,i),u="line";return op(s)&&(u=function(){return q0(s,[t,n,r,l])}),e.append(u).attr("className",ac.tickItem.name)}function eH(e,t,n,r,i,s,l){var u=oL(e.value,s),h=QV(e,t,n,u,s),p=h.x1,v=h.x2,y=h.y1,b=h.y2,T=(0,ie.CR)(Ag(F4(l,[e,t,n,u])),2),R=T[0],M=T[1];r.node().nodeName==="line"&&r.styles((0,ie.pi)({x1:p,x2:v,y1:y,y2:b},R)),i.attr(M),r.styles(R)}function aL(e,t,n,r,i,s){var l=JV(ps(this),e,t,n,r);eH(e,t,n,l,this,r,i);var u=(0,ie.CR)(fw(e.value,r),2),h=u[0],p=u[1];return Uv(this,{transform:"translate(".concat(h,", ").concat(p,")")},s)}function tH(e,t,n,r){var i=MR(t,n.tickFilter),s=Vs(n,"tick");return e.selectAll(ac.tick.class).data(i,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",ac.tick.name).transition(function(u,h){return aL.call(this,u,h,i,n,s,!1)})},function(l){return l.transition(function(u,h){return this.removeChildren(),aL.call(this,u,h,i,n,s,r.update)})},function(l){return l.transition(function(){var u=this,h=cw(this.childNodes[0],r.exit);return Rb(h,function(){return u.remove()}),h})}).transitions()}var Gc=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function Xde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],s=__read(t.max,2),l=s[0],u=s[1],h=l-r,p=u-i;return new Gc(r,i,h,p)}var sL=K0({text:"text"},"title");function vw(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function nH(e,t){var n=e.attributes,r=n.position,i=n.spacing,s=n.inset,l=n.text,u=e.getBBox(),h=t.getBBox(),p=vw(r),v=(0,ie.CR)(Vh(l?i:0),4),y=v[0],b=v[1],T=v[2],R=v[3],M=(0,ie.CR)(Vh(s),4),I=M[0],N=M[1],U=M[2],H=M[3],X=(0,ie.CR)([R+b,y+T],2),$=X[0],Q=X[1],ce=(0,ie.CR)([H+N,I+U],2),pe=ce[0],Re=ce[1];if(p[0]==="l")return new Gc(u.x,u.y,h.width+u.width+$+pe,Math.max(h.height+Re,u.height));if(p[0]==="t")return new Gc(u.x,u.y,Math.max(h.width+pe,u.width),h.height+u.height+Q+Re);var je=(0,ie.CR)([t.attributes.width||h.width,t.attributes.height||h.height],2),Ke=je[0],ft=je[1];return new Gc(h.x,h.y,Ke+u.width+$+pe,ft+u.height+Q+Re)}function rH(e,t){var n=Object.entries(t).reduce(function(r,i){var s=(0,ie.CR)(i,2),l=s[0],u=s[1],h=e.node().attr(l);return h||(r[l]=u),r},{});e.styles(n)}function iH(e){var t,n,r,i,s=e,l=s.width,u=s.height,h=s.position,p=(0,ie.CR)([+l/2,+u/2],2),v=p[0],y=p[1],b=(0,ie.CR)([+v,+y,"center","middle"],4),T=b[0],R=b[1],M=b[2],I=b[3],N=vw(h);return N.includes("l")&&(t=(0,ie.CR)([0,"start"],2),T=t[0],M=t[1]),N.includes("r")&&(n=(0,ie.CR)([+l,"end"],2),T=n[0],M=n[1]),N.includes("t")&&(r=(0,ie.CR)([0,"top"],2),R=r[0],I=r[1]),N.includes("b")&&(i=(0,ie.CR)([+u,"bottom"],2),R=i[0],I=i[1]),{x:T,y:R,textAlign:M,textBaseline:I}}var lL=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,s=r.height,l=r.position,u=r.spacing,h=r.inset,p=n.querySelector(sL.text.class);if(!p)return new Gc(0,0,+i,+s);var v=p.getBBox(),y=v.width,b=v.height,T=(0,ie.CR)(Vh(u),4),R=T[0],M=T[1],I=T[2],N=T[3],U=(0,ie.CR)([0,0,+i,+s],4),H=U[0],X=U[1],$=U[2],Q=U[3],ce=vw(l);if(ce.includes("i"))return new Gc(H,X,$,Q);ce.forEach(function(vt,Vt){var At,Ut,Sn,Vn;vt==="t"&&(At=(0,ie.CR)(Vt===0?[b+I,+s-b-I]:[0,+s],2),X=At[0],Q=At[1]),vt==="r"&&(Ut=(0,ie.CR)([+i-y-N],1),$=Ut[0]),vt==="b"&&(Sn=(0,ie.CR)([+s-b-R],1),Q=Sn[0]),vt==="l"&&(Vn=(0,ie.CR)(Vt===0?[y+M,+i-y-M]:[0,+i],2),H=Vn[0],$=Vn[1])});var pe=(0,ie.CR)(Vh(h),4),Re=pe[0],je=pe[1],Ke=pe[2],ft=pe[3],Ye=(0,ie.CR)([ft+je,Re+Ke],2),it=Ye[0],at=Ye[1];return new Gc(H+ft,X+Re,$-it,Q-at)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Gc(0,0,0,0)},t.prototype.render=function(n,r){var i=this,s=n.width,l=n.height,u=n.position,h=n.spacing,p=(0,ie._T)(n,["width","height","position","spacing"]),v=(0,ie.CR)(Ag(p),1),y=v[0],b=iH(n),T=b.x,R=b.y,M=b.textAlign,I=b.textBaseline;Dp(!!p.text,ps(r),function(N){i.title=N.maybeAppendByClassName(sL.text,"text").styles(y).call(rH,{x:T,y:R,textAlign:M,textBaseline:I}).node()})},t}(yh);function oH(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,s=n.titleSpacing,l=vw(i),u=e.node().getLocalBounds(),h=(0,ie.CR)(u.min,2),p=h[0],v=h[1],y=(0,ie.CR)(u.halfExtents,2),b=y[0],T=y[1],R=(0,ie.CR)(t.node().getLocalBounds().halfExtents,2),M=R[0],I=R[1],N=(0,ie.CR)([p+b,v+T],2),U=N[0],H=N[1],X=(0,ie.CR)(Vh(s),4),$=X[0],Q=X[1],ce=X[2],pe=X[3];if(["start","end"].includes(i)&&n.type==="linear"){var Re=n.startPos,je=n.endPos,Ke=(0,ie.CR)(i==="start"?[Re,je]:[je,Re],2),ft=Ke[0],Ye=Ke[1],it=P4([-Ye[0]+ft[0],-Ye[1]+ft[1]]),at=(0,ie.CR)(wg(it,$),2),vt=at[0],Vt=at[1];return{x:ft[0]+vt,y:ft[1]+Vt}}return l.includes("t")&&(H-=T+I+$),l.includes("r")&&(U+=b+M+Q),l.includes("l")&&(U-=b+M+pe),l.includes("b")&&(H+=T+I+ce),{x:U,y:H}}function aH(e,t,n){var r=e.getGeometryBounds().halfExtents,i=r[1]*2;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function cL(e,t,n,r,i){var s=Vs(r,"title"),l=(0,ie.CR)(Ag(s),2),u=l[0],h=l[1],p=h.transform,v=h.transformOrigin,y=(0,ie._T)(h,["transform","transformOrigin"]);t.styles(y);var b=p||aH(e.node(),u.direction,u.position);e.styles((0,ie.pi)((0,ie.pi)({},u),{transformOrigin:v})),$4(e.node(),b);var T=oH(ps(n._offscreen||n.querySelector(ac.mainGroup.class)),t,r),R=T.x,M=T.y,I=Uv(t.node(),{transform:"translate(".concat(R,", ").concat(M,")")},i);return I}function sH(e,t,n,r){var i=n.titleText;return e.selectAll(ac.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,l){return s.title}).join(function(s){return s.append(function(){return t1(i)}).attr("className",ac.title.name).transition(function(){return cL(ps(this),e,t,n,r.enter)})},function(s){return s.transition(function(){return cL(ps(this),e,t,n,r.update)})},function(s){return s.remove()}).transitions()}function uL(e,t,n,r){var i=e.showLine,s=e.showTick,l=e.showLabel,u=t.maybeAppendByClassName(ac.lineGroup,"g"),h=Dp(i,u,function(T){return gV(T,e,r)})||[],p=t.maybeAppendByClassName(ac.tickGroup,"g"),v=Dp(s,p,function(T){return tH(T,n,e,r)})||[],y=t.maybeAppendByClassName(ac.labelGroup,"g"),b=Dp(l,y,function(T){return KV(T,n,e,r)})||[];return(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(h),!1),(0,ie.CR)(v),!1),(0,ie.CR)(b),!1).filter(function(T){return!!T})}var FR=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,TR)||this}return t.prototype.render=function(n,r,i){var s=this,l=n.titleText,u=n.data,h=n.animate,p=n.showTitle,v=n.showGrid,y=n.dataThreshold,b=n.truncRange,T=Vj(u,y).filter(function($){var Q=$.value;return!(b&&Q>b[0]&&Q<b[1])}),R=A4(i===void 0?h:i),M=ps(r).maybeAppendByClassName(ac.gridGroup,"g"),I=Dp(v,M,function($){return xV($,T,n,R)})||[],N=ps(r).maybeAppendByClassName(ac.mainGroup,"g");l&&(!this.initialized&&R.enter||this.initialized&&R.update)&&uL(n,ps(this.offscreenGroup),T,A4(!1));var U=uL(n,ps(N.node()),T,R),H=ps(r).maybeAppendByClassName(ac.titleGroup,"g"),X=Dp(p,H,function($){return sH($,s,n,R)})||[];return(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(I),!1),(0,ie.CR)(U),!1),(0,ie.CR)(X),!1).flat().filter(function($){return!!$})},t}(yh),n1=function(e){return e};class D2{constructor(t){this.options=ti({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=ti({},this.options,t),this.rescale(t)}rescale(t){}}function mw(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function Ib(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function kR(e,t,n,r,i){let s=n||0,l=r||e.length;const u=i||(h=>h);for(;s<l;){const h=Math.floor((s+l)/2);u(e[h])>t?l=h:s=h+1}return s}var lH=D(19818),cH=D.n(lH);function UR(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function uH(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,u=UR(l,s,t+1/3),h=UR(l,s,t),p=UR(l,s,t-1/3);return[u*255,h*255,p*255,i]}function fL(e){const t=cH().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?uH(r):null}const Lb=(e,t)=>n=>e*(1-n)+t*n,fH=(e,t)=>{const n=fL(e),r=fL(t);return n===null||r===null?n?()=>e:()=>t:i=>{const s=new Array(4);for(let v=0;v<4;v+=1){const y=n[v],b=r[v];s[v]=y*(1-i)+b*i}const[l,u,h,p]=s;return`rgba(${Math.round(l)}, ${Math.round(u)}, ${Math.round(h)}, ${p})`}},N2=(e,t)=>typeof e=="number"&&typeof t=="number"?Lb(e,t):typeof e=="string"&&typeof t=="string"?fH(e,t):()=>e,hH=(e,t)=>{const n=Lb(e,t);return r=>Math.round(n(r))};var dH=function(e){return e===null},pH=dH;function gw(e){return!js(e)&&!pH(e)&&!Number.isNaN(e)}const zR=Math.sqrt(50),jR=Math.sqrt(10),VR=Math.sqrt(2);function yw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/mf(10,i);return i>=0?(s>=zR?10:s>=jR?5:s>=VR?2:1)*mf(10,i):-mf(10,-i)/(s>=zR?10:s>=jR?5:s>=VR?2:1)}function hL(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=mf(10,Math.floor(Math.log(r)/Math.LN10));const s=r/i;return s>=zR?i*=10:s>=jR?i*=5:s>=VR&&(i*=2),t<e?-i:i}const dL=(e,t,n=5)=>{const r=[e,t];let i=0,s=r.length-1,l=r[i],u=r[s],h;return u<l&&([l,u]=[u,l],[i,s]=[s,i]),h=yw(l,u,n),h>0?(l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h,h=yw(l,u,n)):h<0&&(l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h,h=yw(l,u,n)),h>0?(r[i]=Math.floor(l/h)*h,r[s]=Math.ceil(u/h)*h):h<0&&(r[i]=Math.ceil(l*h)/h,r[s]=Math.floor(u*h)/h),r};function vH(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const mH=(e,t,n)=>{const[r,i]=e,[s,l]=t;let u,h;return r<i?(u=mw(r,i),h=n(s,l)):(u=mw(i,r),h=n(l,s)),Ib(h,u)},gH=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=e[0]>e[r],u=l?[...e].reverse():e,h=l?[...t].reverse():t;for(let p=0;p<r;p+=1)i[p]=mw(u[p],u[p+1]),s[p]=n(h[p],h[p+1]);return p=>{const v=kR(e,p,1,r)-1,y=i[v],b=s[v];return Ib(b,y)(p)}},pL=(e,t,n,r)=>(Math.min(e.length,t.length)>2?gH:mH)(e,t,r?hH:n);class _w extends D2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Lb,tickCount:5}}map(t){return gw(t)?this.output(t):this.options.unknown}invert(t){return gw(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...s]=this.getTickMethodOptions();return t(n,r,i,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return dL}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),s=Math.min(i.length,r.length);return n?vH(i[0],i[s-1]):n1}composeOutput(t,n){const{domain:r,range:i,round:s,interpolate:l}=this.options,u=pL(r.map(t),i,l,s);this.output=Ib(u,n,t)}composeInput(t,n,r){const{domain:i,range:s}=this.options,l=pL(s,i.map(t),Lb);this.input=Ib(n,r,l)}}const r1=(e,t,n)=>{let r,i,s=e,l=t;if(s===l&&n>0)return[s];let u=yw(s,l,n);if(u===0||!Number.isFinite(u))return[];if(u>0){s=Math.ceil(s/u),l=Math.floor(l/u),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)*u}else{u=-u,s=Math.ceil(s*u),l=Math.floor(l*u),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)/u}return i};class bd extends _w{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:N2,tickMethod:r1,tickCount:5}}chooseTransforms(){return[n1,n1]}clone(){return new bd(this.options)}}function yH(e,t){if(e){var n;if(jo(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(vl(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var HR=yH,_H=function(e,t,n){if(!jo(e)&&!Bv(e))return e;var r=n;return HR(e,function(i,s){r=t(r,i,s)}),r},vL=_H,WR=function(e,t){return vL(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function Cg(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function mL(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,s=0;s<e.length;s++){var l=e[s],u=l.x,h=l.y,p=l.width,v=l.height,y=(0,ie.CR)([u+p,h+v],2),b=y[0],T=y[1];u<t&&(t=u),h<n&&(n=h),b>r&&(r=b),T>i&&(i=T)}return new Gc(t,n,r-t,i-n)}var bH=function(e,t,n){var r=e.width,i=e.height,s=n.flexDirection,l=s===void 0?"row":s,u=n.flexWrap,h=u===void 0?"nowrap":u,p=n.justifyContent,v=p===void 0?"flex-start":p,y=n.alignContent,b=y===void 0?"flex-start":y,T=n.alignItems,R=T===void 0?"flex-start":T,M=l==="row",I=l==="row"||l==="column",N=M?I?[1,0]:[-1,0]:I?[0,1]:[0,-1],U=(0,ie.CR)([0,0],2),H=U[0],X=U[1],$=t.map(function(Ye){var it,at=Ye.width,vt=Ye.height,Vt=(0,ie.CR)([H,X],2),At=Vt[0],Ut=Vt[1];return it=(0,ie.CR)([H+at*N[0],X+vt*N[1]],2),H=it[0],X=it[1],new Gc(At,Ut,at,vt)}),Q=mL($),ce={"flex-start":0,"flex-end":M?r-Q.width:i-Q.height,center:M?(r-Q.width)/2:(i-Q.height)/2},pe=$.map(function(Ye){var it=Ye.x,at=Ye.y,vt=Gc.fromRect(Ye);return vt.x=M?it+ce[v]:it,vt.y=M?at:at+ce[v],vt}),Re=mL(pe),je=function(Ye){var it=(0,ie.CR)(M?["height",i]:["width",r],2),at=it[0],vt=it[1];switch(R){case"flex-start":return 0;case"flex-end":return vt-Ye[at];case"center":return vt/2-Ye[at]/2;default:return 0}},Ke=pe.map(function(Ye){var it=Ye.x,at=Ye.y,vt=Gc.fromRect(Ye);return vt.x=M?it:it+je(vt),vt.y=M?at+je(vt):at,vt}),ft=Ke.map(function(Ye){var it,at,vt=Gc.fromRect(Ye);return vt.x+=(it=e.x)!==null&&it!==void 0?it:0,vt.y+=(at=e.y)!==null&&at!==void 0?at:0,vt});return ft},xH=function(e,t,n){return[]},EH=function(e,t,n){if(t.length===0)return[];var r={flex:bH,grid:xH},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},SH=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[Va.BOUNDS_CHANGED,Va.INSERTED,Va.REMOVED],r.$margin=Vh(0),r.$padding=Vh(0);var i=n.style||{},s=i.margin,l=s===void 0?0:s,u=i.padding,h=u===void 0?0:u;return r.margin=l,r.padding=h,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Vh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Vh(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,s=n.y,l=s===void 0?0:s,u=n.width,h=n.height,p=(0,ie.CR)(this.$margin,4),v=p[0],y=p[1],b=p[2],T=p[3];return new Gc(i-T,l-v,u+T+y,h+v+b)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,s=(0,ie.CR)(this.$padding,4),l=s[0],u=s[1],h=s[2],p=s[3],v=(0,ie.CR)(this.$margin,4),y=v[0],b=v[3];return new Gc(p+b,l+y,r-p-u,i-l-h)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var s=EH(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,u){var h=s[u],p=h.x,v=h.y;l.style.transform="translate(".concat(p,", ").concat(v,")")})}catch(l){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(Mf),TH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wH(e){return class extends Y1{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(ti({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function gL(e,t,n){return e.querySelector(t)?Pa(e).select(t):Pa(e).append(n)}function bw(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function yL(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in l&&([r,i,s]=l[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:s},t)}class _L extends SH{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class AH extends _L{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function Pm(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function CH(e){return e==="horizontal"||e===0}function OH(e){return e==="vertical"||e===-Math.PI/2}function bL(e,t,n){const{bbox:r}=e,{position:i="top",size:s,length:l}=t,u=["top","bottom","center"].includes(i),[h,p]=u?[r.height,r.width]:[r.width,r.height],{defaultSize:v,defaultLength:y}=n.props,b=s||v||h,T=l||y||p,R=u?"horizontal":"vertical",[M,I]=u?[T,b]:[b,T];return{orientation:R,width:M,height:I,size:b,length:T}}function RH(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function xw(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=TH(e,["style"]),i={};return Object.entries(r).forEach(([s,l])=>{t.includes(s)?i[`show${Om(s)}`]=l:i[s]=l}),Object.assign(Object.assign({},i),n)}var xL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EL(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function SL(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function MH(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!gl(t))return i;const s=e==="bottom"?[i,1]:[0,i],l=t.map(s);if(e==="bottom"){const u=l[0];return new bd({domain:[0,n],range:[0,1]}).map(u)}else if(e==="left"){const u=l[1];return new bd({domain:[0,r],range:[0,1]}).map(u)}return i}}function PH(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=Cg(t,l=>+l),{tickCount:s}=e.getOptions();return n(r,i,s)}function IH(e,t){if(kl(t))return T=>T;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:s,insetBottom:l,insetLeft:u,insetRight:h}=n,[p,v,y]=e==="left"||e==="right"?[s,l,i]:[u,h,r],b=new bd({domain:[0,1],range:[p/y,1-v/y]});return T=>b.map(T)}function TL(e,t,n,r,i,s,l,u){var h;(n!==void 0||s!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const p=PH(e,t,s),v=i?p.filter(i):p,y=N=>N instanceof Date?String(N):typeof N=="object"&&N?N:String(N),b=r||((h=e.getFormatter)===null||h===void 0?void 0:h.call(e))||y,T=IH(l,u),R=MH(l,u),M=N=>["top","bottom","center","outer"].includes(N),I=N=>["left","right"].includes(N);return kl(u)||Tc(u)?v.map((N,U,H)=>{var X,$;const Q=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ce=T(e.map(N)+Q);return{value:Q_(u)&&l==="center"||Tc(u)&&(($=e.getTicks)===null||$===void 0?void 0:$.call(e))&&M(l)||Tc(u)&&I(l)?1-ce:ce,label:y(b(Cb(N),U,H)),id:String(U)}}):v.map((N,U,H)=>{var X;const $=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,Q=R(T(e.map(N)+$));return{value:I(l)?1-Q:Q,label:y(b(Cb(N),U,H)),id:String(U)}})}function LH(e,t,n="xy"){const[r,i,s]=SL(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?s:r:e.includes("bottom")||e.includes("top")?i:s}function DH(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:s}=t,l=[],u=(h,p)=>{p&&l.push(Object.assign(Object.assign({},h),p))};return u({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),u({type:"ellipsis",minLength:20},i),u({type:"hide"},r),u({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function NH(e,t,n,r,i){const{x:s,y:l,width:u,height:h}=t,p=[s+u/2,l+h/2],v=Math.min(u,h)/2,[y,b]=Ob(i),[T,R]=SL(i),M=Math.min(T,R)/2,I={center:p,radius:v,startAngle:y,endAngle:b,gridLength:(r-n)*M};if(e==="inner"){const{insetLeft:N,insetTop:U}=i.getOptions();return Object.assign(Object.assign({},I),{center:[p[0]-N,p[1]-U],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},I),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function BH(e,t,n){return dc(t)||Bs(t)?!1:e===void 0?!!n.getTicks:e}function FH(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function kH(e,t,n,r,i){const{x:s,y:l,width:u,height:h}=n;if(e==="bottom")return{startPos:[s,l],endPos:[s+u,l]};if(e==="left")return{startPos:[s+u,l+h],endPos:[s+u,l]};if(e==="right")return{startPos:[s,l+h],endPos:[s,l]};if(e==="top")return{startPos:[s,l+h],endPos:[s+u,l+h]};if(e==="center"){if(t==="vertical")return{startPos:[s,l],endPos:[s,l+h]};if(t==="horizontal")return{startPos:[s,l],endPos:[s+u,l]};if(typeof t=="number"){const[p,v]=r.getCenter(),[y,b]=Y0(r),[T,R]=Ob(r),M=Math.min(u,h)/2,{insetLeft:I,insetTop:N}=r.getOptions(),U=y*M,H=b*M,[X,$]=[p+s-I,v+l-N],[Q,ce]=[Math.cos(t),Math.sin(t)],pe=[X+H*Q,$+H*ce],Re=[X+U*Q,$+U*ce],je=()=>{const{domain:ft}=i.getOptions();return ft.length},Ke=kl(r)&&i?je():3;return{startPos:pe,endPos:Re,gridClosed:Math.abs(R-T-360)<1e-6,gridCenter:[X,$],gridControlAngles:new Array(Ke).fill(0).map((ft,Ye,it)=>(R-T)/Ke*Ye)}}}return{}}const UH=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:s,tickFilter:l,tickCount:u,tickMethod:h,important:p={},style:v={},indexBBox:y,title:b,grid:T=!1}=e,R=xL(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[M],value:I,coordinate:N,theme:U})=>{const{bbox:H}=I,{domain:X}=M.getOptions(),$=TL(M,X,u,s,l,h,r,N),Q=y?$.map((Ye,it)=>{const at=y.get(it);return!at||at[0]!==Ye.label?Ye:Object.assign(Object.assign({},Ye),{bbox:at[1]})}):$,[ce,pe]=Y0(N),Re=NH(r,H,ce,pe,N),{axis:je,axisArc:Ke={}}=U,ft=xw(ti({},je,Ke,Re,Object.assign(Object.assign({type:"arc",data:Q,titleText:bw(b),grid:T},R),p)));return new FR({style:WR(ft,["transform"])})}};function zH(e,t,n,r,i,s){const l=n.axis,u=["top","right","bottom","left"].includes(i)?n[`axis${w2(i)}`]:n.axisLinear,h=e.getOptions().name,p=n[`axis${Om(h)}`]||{};return Object.assign({},l,u,p)}function jH(e,t,n,r,i,s){const l=zH(e,t,n,r,i,s);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:OH(s)?10:0,tick:r==="center"?!1:void 0}):l}const VH=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:s,actualPosition:l,position:u,size:h,style:p={},title:v,tickCount:y,tickFilter:b,tickMethod:T,transform:R,indexBBox:M}=e,I=xL(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:N,value:U,coordinate:H,theme:X})=>{const{bbox:$}=U,[Q]=N,{domain:ce,xScale:pe}=Q.getOptions(),Re=jH(Q,H,X,t,u,s),je=Object.assign(Object.assign(Object.assign({},Re),p),I),Ke=LH(l||u,H,e.plane),ft=kH(u,s,$,H,pe),Ye=FH(H),it=TL(Q,ce,y,r,b,T,u,H),at=M?it.map((At,Ut)=>{const Sn=M.get(Ut);return!Sn||Sn[0]!==At.label?At:Object.assign(Object.assign({},At),{bbox:Sn[1]})}):it,vt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},je),{type:"linear",data:at,crossSize:h,titleText:bw(v),labelOverlap:DH(R,je),grid:BH(je.grid,H,Q),gridLength:Ke,line:!0,indexBBox:M}),je.line?null:{lineOpacity:0}),ft),Ye),n);return vt.labelOverlap.find(At=>At.type==="hide")&&(vt.crossSize=!1),new FR({className:"axis",style:xw(vt)})}},wL=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var s;const{scales:[l]}=i,u=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,h=typeof n=="string"?$e(n):n,p=(y,b,T)=>r(u[b],b,u),v=Object.assign(Object.assign({},t),{labelFormatter:h,labelFilter:p,scale:l});return e(v)(i)}},Iy=wL(VH),AL=wL(UH);Iy.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},AL.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var HH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function WH(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function GH(e,t,n,r){const{radar:i}=e,[s]=r,l=s.getOptions().name,[u,h]=Ob(n),{axisRadar:p={}}=t;return Object.assign(Object.assign({},p),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((v,y)=>(h-u)/i.count*y)})}const CL=e=>{const{important:t={}}=e,n=HH(e,["important"]);return r=>{const{theme:i,coordinate:s,scales:l}=r;return Iy(Object.assign(Object.assign(Object.assign({},n),WH(e.orientation)),{important:Object.assign(Object.assign({},GH(e,i,s,l)),t)}))(r)}};CL.props=Object.assign(Object.assign({},Iy.props),{defaultPosition:"center"});function Ew(e,t){return+e.toPrecision(t)}function $de(e){return e.toLocaleString()}function Yde(e){return e.toExponential()}function Kde(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(Ew(e/1e3,t).toLocaleString(),"K")}var qde=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},Qde=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},Jde=function(e,t){return e*t},epe=function(e,t){return e/2+(t||0)/2};function Sw(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var s=t.x,l=t.y;return[s,l]}if(n){var u=n[0],h=u.clientX,p=u.clientY;return[h,p]}return r&&i?[r,i]:[0,0]}var ZH={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},GR=K0({background:"background",labelGroup:"label-group",label:"label"},"indicator"),XH=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,ZH)||this;return r.point=[0,0],r.group=r.appendChild(new Mf({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,s=(0,ie.CR)(Vh(i),4),l=s[0],u=s[1],h=s[2],p=s[3],v=this.label.node().getLocalBounds(),y=v.min,b=v.max,T=new Gc(y[0]-p,y[1]-l,b[0]+u-y[0]+p,b[1]+h-y[1]+l),R=this.getPath(r,T),M=Vs(this.attributes,"background");this.background=ps(this.group).maybeAppendByClassName(GR.background,"path").styles((0,ie.pi)((0,ie.pi)({},M),{d:R})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,s=Vs(this.attributes,"label"),l=(0,ie.CR)(Ag(s),2),u=l[0],h=l[1],p=u.text,v=(0,ie._T)(u,["text"]);if(this.label=ps(this.group).maybeAppendByClassName(GR.labelGroup,"g").styles(h),!!i){var y=this.label.maybeAppendByClassName(GR.label,function(){return t1(r(i))}).style("text",r(i).toString());y.selectAll("text").styles(v)}},t.prototype.adjustLayout=function(){var n=(0,ie.CR)(this.point,2),r=n[0],i=n[1],s=this.attributes,l=s.x,u=s.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(u-i,")"))},t.prototype.getPath=function(n,r){var i=this.attributes.radius,s=r.x,l=r.y,u=r.width,h=r.height,p=[["M",s+i,l],["L",s+u-i,l],["A",i,i,0,0,1,s+u,l+i],["L",s+u,l+h-i],["A",i,i,0,0,1,s+u-i,l+h],["L",s+i,l+h],["A",i,i,0,0,1,s,l+h-i],["L",s,l+i],["A",i,i,0,0,1,s+i,l],["Z"]],v={top:4,right:6,bottom:0,left:2},y=v[n],b=this.createCorner([p[y].slice(-2),p[y+1].slice(-2)]);return p.splice.apply(p,(0,ie.ev)([y+1,1],(0,ie.CR)(b),!1)),p[0][0]="M",p},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,s=DV.apply(void 0,(0,ie.ev)([],(0,ie.CR)(n),!1)),l=(0,ie.CR)(n,2),u=(0,ie.CR)(l[0],2),h=u[0],p=u[1],v=(0,ie.CR)(l[1],2),y=v[0],b=v[1],T=(0,ie.CR)(s?[y-h,[h,y]]:[b-p,[p,b]],2),R=T[0],M=(0,ie.CR)(T[1],2),I=M[0],N=M[1],U=R/2,H=R/Math.abs(R),X=r*H,$=X/2,Q=X*Math.sqrt(3)/2*i,ce=(0,ie.CR)([I,I+U-$,I+U,I+U+$,N],5),pe=ce[0],Re=ce[1],je=ce[2],Ke=ce[3],ft=ce[4];return s?(this.point=[je,p-Q],[["L",pe,p],["L",Re,p],["L",je,p-Q],["L",Ke,p],["L",ft,p]]):(this.point=[h+Q,je],[["L",h,pe],["L",h,Re],["L",h+Q,je],["L",h,Ke],["L",h,ft]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Py(this):O2(this)},t.prototype.bindEvents=function(){this.label.on(Va.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(yh),OL={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},RL={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},ML={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Im=K0({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ly=K0({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),$H=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=n.y,l=n.size,u=l===void 0?10:l,h=n.radius,p=h===void 0?u/4:h,v=n.orientation,y=(0,ie._T)(n,["x","y","size","radius","orientation"]),b=u,T=b*2.4,R=ps(r).maybeAppendByClassName(Ly.iconRect,"rect").styles((0,ie.pi)((0,ie.pi)({},y),{width:b,height:T,radius:p,x:i-b/2,y:s-T/2,transformOrigin:"center"})),M=i+1/3*b-b/2,I=i+2/3*b-b/2,N=s+1/4*T-T/2,U=s+3/4*T-T/2;R.maybeAppendByClassName("".concat(Ly.iconLine,"-1"),"line").styles((0,ie.pi)({x1:M,x2:M,y1:N,y2:U},y)),R.maybeAppendByClassName("".concat(Ly.iconLine,"-2"),"line").styles((0,ie.pi)({x1:I,x2:I,y1:N,y2:U},y)),v==="vertical"&&(R.node().style.transform="rotate(90)")},t}(yh),PL=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,ML)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,u=i.showLabel,h=Vs(this.attributes,"label"),p=h.x,v=p===void 0?0:p,y=h.y,b=y===void 0?0:y,T=h.transform,R=h.transformOrigin,M=(0,ie._T)(h,["x","y","transform","transformOrigin"]),I=(0,ie.CR)(Ag(M,[]),2),N=I[0],U=I[1],H=ps(n).maybeAppendByClassName(Ly.labelGroup,"g").styles(U),X=(0,ie.pi)((0,ie.pi)({},RL),N),$=X.text,Q=(0,ie._T)(X,["text"]);Dp(!!u,H,function(ce){r.label=ce.maybeAppendByClassName(Ly.label,"text").styles((0,ie.pi)((0,ie.pi)({},Q),{x:s+v,y:l+b,transform:T,transformOrigin:R,text:"".concat($)})),r.label.on("mousedown",function(pe){pe.stopPropagation()}),r.label.on("touchstart",function(pe){pe.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,u=r.type,h=(0,ie.pi)((0,ie.pi)({x:i,y:s,orientation:l},OL),Vs(this.attributes,"icon")),p=this.attributes.iconShape,v=p===void 0?function(){return new $H({style:h})}:p,y=ps(n).maybeAppendByClassName(Ly.iconGroup,"g");y.selectAll(Ly.icon.class).data([v]).join(function(b){return b.append(typeof v=="string"?v:function(){return v(u)}).attr("className",Ly.icon.name)},function(b){return b.update(h)},function(b){return b.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(yh),IL=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},YH=IL,KH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},qH=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},QH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},JH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},eW=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},tW=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},LL=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},nW=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},rW=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},iW=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},oW=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},DL=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},aW=DL,sW=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},lW=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},cW=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},uW=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function fW(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var hW=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function dW(e){var t="default";if(vl(e)&&e instanceof Image)t="image";else if(op(e))t="symbol";else if(c(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function pW(e){var t=dW(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var Ul=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,u=l===void 0?0:l,h=this.getSubShapeStyle(n),p=h.symbol,v=h.size,y=v===void 0?16:v,b=(0,ie._T)(h,["symbol","size"]),T=pW(p);Dp(!!T,ps(r),function(R){R.maybeAppendByClassName("marker",T).attr("className","marker ".concat(T,"-marker")).call(function(M){if(T==="image"){var I=y*2;M.styles({img:p,width:I,height:I,x:s-y,y:u-y})}else{var I=y/2,N=op(p)?p:t.getSymbol(p);M.styles((0,ie.pi)({d:N==null?void 0:N(s,u,I)},b))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(yh);Ul.registerSymbol("cross",nW),Ul.registerSymbol("hyphen",oW),Ul.registerSymbol("line",LL),Ul.registerSymbol("plus",iW),Ul.registerSymbol("tick",rW),Ul.registerSymbol("circle",IL),Ul.registerSymbol("point",YH),Ul.registerSymbol("bowtie",tW),Ul.registerSymbol("hexagon",eW),Ul.registerSymbol("square",KH),Ul.registerSymbol("diamond",qH),Ul.registerSymbol("triangle",QH),Ul.registerSymbol("triangle-down",JH),Ul.registerSymbol("line",LL),Ul.registerSymbol("dot",DL),Ul.registerSymbol("dash",aW),Ul.registerSymbol("smooth",sW),Ul.registerSymbol("hv",lW),Ul.registerSymbol("vh",cW),Ul.registerSymbol("hvh",uW),Ul.registerSymbol("vhv",fW);function vW(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function mW(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var NL=1.4,BL=.4;function gW(e,t,n){var r=n,i=r*NL,s=r/2,l=r/6,u=e+i*BL;return[["M",e,t],["L",u,t+s],["L",e+i,t+s],["L",e+i,t-s],["L",u,t-s],["Z"],["M",u,t+l],["L",e+i-2,t+l],["M",u,t-l],["L",e+i-2,t-l]]}function yW(e,t,n){var r=n,i=r*NL,s=r/2,l=r/6,u=t+i*BL;return[["M",e,t],["L",e-s,u],["L",e-s,t+i],["L",e+s,t+i],["L",e+s,u],["Z"],["M",e-l,u],["L",e-l,t+i-2],["M",e+l,u],["L",e+l,t+i-2]]}Ul.registerSymbol("hiddenHandle",mW),Ul.registerSymbol("verticalHandle",gW),Ul.registerSymbol("horizontalHandle",yW);var tpe=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function _W(e,t,n,r){var i;r===void 0&&(r=4);var s=(0,ie.CR)(e,2),l=s[0],u=s[1],h=(0,ie.CR)(t,2),p=h[0],v=h[1],y=(0,ie.CR)(n,2),b=y[0],T=y[1],R=(0,ie.CR)([p,v],2),M=R[0],I=R[1],N=I-M;return M>I&&(i=(0,ie.CR)([I,M],2),M=i[0],I=i[1]),N>u-l?[l,u]:M<l?b===l&&T===I?[l,I]:[l,N+l]:I>u?T===u&&b===M?[M,u]:[u-N,u]:[M,I]}function Lm(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var B2=K0({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),FL={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},bW=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,FL)||this}return t.prototype.render=function(n,r){var i=ps(r).maybeAppendByClassName(B2.markerGroup,"g");this.renderMarker(i);var s=ps(r).maybeAppendByClassName(B2.labelGroup,"g");this.renderLabel(s)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,s=i.orientation,l=i.markerSymbol,u=l===void 0?Lm(s,"horizontalHandle","verticalHandle"):l;Dp(!!u,n,function(h){var p=Vs(r.attributes,"marker"),v=(0,ie.pi)({symbol:u},p);r.marker=h.maybeAppendByClassName(B2.marker,function(){return new Ul({style:v})}).update(v)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.showLabel,l=i.orientation,u=i.spacing,h=u===void 0?0:u,p=i.formatter;Dp(s,n,function(v){var y,b=Vs(r.attributes,"label"),T=b.text,R=(0,ie._T)(b,["text"]),M=((y=v.select(B2.marker.class))===null||y===void 0?void 0:y.node().getBBox())||{},I=M.width,N=I===void 0?0:I,U=M.height,H=U===void 0?0:U,X=(0,ie.CR)(Lm(l,[0,H+h,"center","top"],[N+h,0,"start","middle"]),4),$=X[0],Q=X[1],ce=X[2],pe=X[3];v.maybeAppendByClassName(B2.label,"text").styles((0,ie.pi)((0,ie.pi)({},R),{x:$,y:Q,text:p(T).toString(),textAlign:ce,textBaseline:pe}))})},t}(yh),kL={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},xW=Tg({},kL,{}),EW=Tg({},kL,Mm(FL,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),SW=.01,npe=.5,Hh=K0({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function TW(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function wW(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(s,l,u){var h=r[u%r.length];return s+=" ".concat(e[u],":").concat(h).concat(u<i-1?" ".concat(e[u+1],":").concat(h):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function UL(e,t){var n=(0,ie.CR)(TW(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var F2=K0({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function zL(e){var t=e.orientation,n=e.size,r=e.length;return Lm(t,[r,n],[n,r])}function jL(e){var t=e.type,n=(0,ie.CR)(zL(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function AW(e){return jL(e)}function CW(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,s;if(op(n)){var l=20;s=new Array(l).fill(0).map(function(p,v,y){return n(v/(y.length-1))})}else s=n;var u=s.length,h=s.map(function(p){return Z0(p).toString()});return u?u===1?h[0]:r?wW(i,h,t):h.reduce(function(p,v,y){return p+=" ".concat(y/(u-1),":").concat(v)},"l(".concat(Lm(t,"0","270"),")")):""}function OW(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,ie.CR)(zL(e),2),i=r[0],s=r[1],l=(0,ie.CR)(n,2),u=l[0],h=l[1],p=Lm(t,u*i,0),v=Lm(t,0,u*s),y=Lm(t,h*i,i),b=Lm(t,s,h*s);return[["M",p,v],["L",p,b],["L",y,b],["L",y,v],["Z"]]}function RW(e,t){var n=Vs(t,"track");e.maybeAppendByClassName(F2.track,"path").styles((0,ie.pi)({d:jL(t)},n))}function MW(e,t){var n=Vs(t,"selection"),r=CW(t),i=e.maybeAppendByClassName(F2.selection,"path").styles((0,ie.pi)({d:AW(t),fill:r},n)),s=i.maybeAppendByClassName(F2.clipPath,"path").styles({d:OW(t)}).node();i.style("clipPath",s)}var PW=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=ps(r).maybeAppendByClassName(F2.trackGroup,"g");RW(i,n);var s=ps(r).maybeAppendByClassName(F2.selectionGroup,"g");MW(s,n)},t}(yh);function IW(e){return{min:Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(e.map(function(t){return t.value})),!1))}}var LW=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,EW)||this;return r.eventToOffsetScale=new bd({}),r.innerRibbonScale=new bd({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var s=r.attributes,l=s.data,u=s.block;i.stopPropagation();var h=r.getValueByCanvasPoint(i);if(u){var p=UL(l.map(function(b){var T=b.value;return T}),h).range,v=r.getRealSelection(p);r.showIndicator((p[0]+p[1])/2,"".concat(v[0],"-").concat(v[1])),r.dispatchIndicated(h,p)}else{var y=r.getTickValue(h);r.showIndicator(y,"".concat(r.getRealValue(y))),r.dispatchIndicated(y)}},r.onDragStart=function(i){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var s=r.target;r.updateMouse();var l=(0,ie.CR)(r.selection,2),u=l[0],h=l[1],p=r.getTickValue(r.getValueByCanvasPoint(i)),v=p-r.prevValue;s==="start"?u!==p&&r.updateSelection(p,h):s==="end"?h!==p&&r.updateSelection(u,p):s==="ribbon"&&v!==0&&(r.prevValue=p,r.updateSelection(v,v,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Gc(0,0,r,i)},t.prototype.render=function(n,r){var i=this,s=n.showLabel;this.renderTitle(ps(r));var l=this.availableSpace,u=l.x,h=l.y,p=ps(r).maybeAppendByClassName(Hh.contentGroup,"g").styles({transform:"translate(".concat(u,", ").concat(h,")")}),v=p.maybeAppendByClassName(Hh.labelGroup,"g").styles({zIndex:1});Dp(!!s,v,function(b){i.renderLabel(b)});var y=p.maybeAppendByClassName(Hh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=p.maybeAppendByClassName(Hh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(y),this.renderIndicator(p),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:IW(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,ie.CR)(this.selection,2),r=n[0],i=n[1],s=this.ribbonScale;return[s.map(r),s.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,i]:s,u=(0,ie.CR)(l,2),h=u[0],p=u[1];return[h,p]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return Lm(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,s=r.titleText,l=r.width,u=r.height,h=Vs(this.attributes,"title"),p=(0,ie.pi)((0,ie.pi)({},h),{width:l,height:u,text:s}),v=this;n.selectAll(Hh.title.class).data(i?[s]:[]).join(function(y){return y.append(function(){return new lL({style:p})}).attr("className",Hh.title.name).each(function(){v.title=this})},function(y){return y.update(p)},function(y){return y.each(function(){v.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Gc(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Gc(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(ac.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=i.width,l=i.height;return this.cacheLabelBBox=new Gc(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,s=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,u=l.width,h=l.height,p=this.ifHorizontal(h,u)+s+this.labelFixedSpacing,v=this.ifHorizontal(u,h);return{width:u,height:h,size:p,length:v}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,s=this.availableSpace,l=s.width,u=s.height,h=this.labelShape,p=h.size,v=h.length,y=(0,ie.CR)(this.ifHorizontal([u,l],[l,u]),2),b=y[0],T=y[1],R=r?this.handleShape:{size:0,length:0},M=R.size,I=R.length,N=this.handleOffsetRatio,U=0,H=this.labelPosition;i?U=i:["bottom","right"].includes(H)?U=Math.min(b-p,(b-M)/N):b*(1-N)>M?U=Math.max(b-p,0):U=Math.max((b-p-M)/N,0);var X=Math.max(I,v),$=T-X,Q=(0,ie.CR)(this.ifHorizontal([$,U],[U,$]),2),ce=Q[0],pe=Q[1],Re=["top","left"].includes(H)?p:0,je=(0,ie.CR)(this.ifHorizontal([X/2,Re],[Re,X/2]),2),Ke=je[0],ft=je[1];return new Gc(Ke,ft,ce,pe)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,s=r.type,l=r.orientation,u=r.color,h=r.block,p=Vs(this.attributes,"ribbon"),v=this.range,y=v.min,b=v.max,T=this.ribbonBBox,R=T.x,M=T.y,I=this.ribbonShape,N=I.length,U=I.size,H=Tg({transform:"translate(".concat(R,", ").concat(M,")"),length:N,size:U,type:s,orientation:l,color:u,block:h,partition:i.map(function(X){return(X.value-y)/(b-y)}),range:this.ribbonRange},p);this.ribbon=n.maybeAppendByClassName(Hh.ribbon,function(){return new PW({style:H})}).update(H)},t.prototype.getHandleClassName=function(n){return"".concat(Hh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,s=Vs(this.attributes,"handle"),l=(0,ie.CR)(this.selection,2),u=l[0],h=l[1],p=(0,ie.pi)((0,ie.pi)({},s),{orientation:i}),v=s.shape,y=v===void 0?"slider":v,b=y==="basic"?bW:PL,T=this;this.handlesGroup.selectAll(Hh.handle.class).data(r?[{value:u,type:"start"},{value:h,type:"end"}]:[],function(R){return R.type}).join(function(R){return R.append(function(){return new b({style:p})}).attr("className",function(M){var I=M.type;return"".concat(Hh.handle," ").concat(T.getHandleClassName(I))}).each(function(M){var I=M.type,N=M.value;this.update({labelText:N});var U="".concat(I,"Handle");T[U]=this,this.addEventListener("pointerdown",T.onDragStart(I))})},function(R){return R.update(p).each(function(M){var I=M.value;this.update({labelText:I})})},function(R){return R.each(function(M){var I=M.type,N="".concat(I,"Handle");T[N]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,ie.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Gc(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,s=this.endHandle.getBBox(),l=s.width,u=s.height,h=(0,ie.CR)([Math.max(r,l),Math.max(i,u)],2),p=h[0],v=h[1];return this.cacheHandleBBox=new Gc(0,0,p,v),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,s=(0,ie.CR)(this.ifHorizontal([i,r],[r,i]),2),l=s[0],u=s[1];return{width:r,height:i,size:l,length:u}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,u=s.y,h=this.ribbonShape.size,p=this.getOffset(r),v=(0,ie.CR)(this.ifHorizontal([l+p,u+h*this.handleOffsetRatio],[l+h*this.handleOffsetRatio,u+p]),2),y=v[0],b=v[1],T=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();T==null||T.update({transform:"translate(".concat(y,", ").concat(b,")"),formatter:i})},t.prototype.renderIndicator=function(n){var r=Vs(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Hh.indicator,function(){return new XH({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,s,l,u){var h,p,v=(h=s==null?void 0:s.id)!==null&&h!==void 0?h:l.toString();if(i.push((0,ie.pi)((0,ie.pi)({},s),{id:v,index:l,type:"value",label:(p=s==null?void 0:s.label)!==null&&p!==void 0?p:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<u.length-1){var y=u[l+1],b=(0,ie.CR)([s.value,y.value],2),T=b[0],R=b[1],M=(T+R)/2;i.push((0,ie.pi)((0,ie.pi)({},s),{id:v,index:l,type:"range",range:[T,R],label:[T,R].join("~"),value:n.ribbonScale.map(M)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,ie.CR)(["center","middle"],2),r=n[0],i=n[1],s=this.labelPosition;return s==="top"?i="bottom":s==="bottom"?i="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,s=i===void 0?!1:i,l=r.labelFilter,u=r.labelFormatter,h=Vs(this.attributes,"tick"),p=Vs(this.attributes,"label"),v=p.align,y=Tg((0,ie.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Mm(h,"tick"),Mm(p,"label"),{data:this.labelData}),b={tickFilter:function(R,M,I){return(R==null?void 0:R.type)!=="value"?!1:l?l(R,R.index,I.filter(function(N){return N.type!=="value"})):!0},labelFilter:function(R,M,I){return(R==null?void 0:R.type)!==v?!1:l?l(R,R.index,I.filter(function(N){return N.type===v})):!0},labelFormatter:u},T=(0,ie.pi)((0,ie.pi)((0,ie.pi)({},y),b),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Hh.label,function(){return new FR({style:T})}).node(),this.label.update(T,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,s=n.labelSpacing,l=n.tickLength,u=this.ribbonShape.size,h=this.labelPosition,p=this.labelFixedSpacing,v=(0,ie.CR)([0,0,0],3),y=v[0],b=v[1],T=v[2],R=l!=null?l:u;return r?(T=R,b=p,i==="positive"?h==="right"?(y=R,T=R):h==="bottom"&&(y=T):i==="negative"&&(h==="top"||h==="left")&&(y=u)):i==="positive"?h==="right"?b=R:h==="bottom"&&(y=u+p,b=s):i==="negative"&&(h==="left"||h==="top")&&(b=s),{offset:y,spacing:b,tickLength:T}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,s=r.y,l=r.width,u=r.height,h=this.labelAxisStyle,p=h.offset,v=h.spacing,y=h.tickLength,b=(0,ie.CR)(this.ifHorizontal([[i,s+p],[i+l,s+p]],[[i+p,s+u],[i+p,s]]),2),T=b[0],R=b[1];this.label.update({startPos:T,endPos:R,tickLength:y,labelSpacing:v},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,u=s.max,h=this.ribbonBBox,p=h.x,v=h.y,y=(0,d.Z)(n,l,u),b=this.getOffset(y),T=this.ifHorizontal([b+p,v],[p,b+v]);this.indicator.update({x:T[0],y:T[1],position:this.ifHorizontal("top","left"),labelText:r}),O2(this.indicator.node())},t.prototype.hideIndicator=function(){Py(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var s;i===void 0&&(i=!1);var l=(0,ie.CR)(this.selection,2),u=l[0],h=l[1],p=(0,ie.CR)([n,r],2),v=p[0],y=p[1];i&&(v+=u,y+=h);var b=this.range,T=b.min,R=b.max;s=(0,ie.CR)(_W([T,R],[v,y],this.selection),2),v=s[0],y=s[1],this.update({defaultValue:[v,y]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,s=i.min,l=i.max;return js(r)?Ew((l-s)*SW,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,s=r.block,l=this.range.min;return s?UL(i.map(function(u){var h=u.value;return h}),n).tick:vW(n,this.step,l)},t.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,s=r.max,l=(0,ie.CR)(this.ribbon.node().getPosition(),2),u=l[0],h=l[1],p=this.ifHorizontal(u,h),v=this.ifHorizontal.apply(this,(0,ie.ev)([],(0,ie.CR)(Sw(n)),!1)),y=v-p,b=(0,d.Z)(this.getOffset(y,!0),i,s);return b},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,u=this.ribbonShape.length,h=this.eventToOffsetScale;return h.update({domain:[s,l],range:[0,u]}),r?h.invert(n):h.map(n)},t.prototype.getRealSelection=function(n){var r=this.range.max,i=(0,ie.CR)(n,2),s=i[0],l=i[1];return this.ifHorizontal([s,l],[r-l,r-s])},t.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},t.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new Hi("valuechange",{detail:{value:n}});this.dispatchEvent(r)},t.prototype.dispatchIndicated=function(n,r){var i=this,s=this.range.max,l=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:s-n,range:r?i.getRealSelection(r):void 0}}),u=new Hi("indicate",{detail:l});this.dispatchEvent(u)},t}(yh);class k2 extends D2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:r1}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,s]=n;return!(0,Zl.Z)(i)||!(0,Zl.Z)(s)?[]:t(i,s,r)}clone(){return new k2(this.options)}}class Db extends D2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!gw(t))return this.options.unknown;const n=kR(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new Db(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function U2(e){return(0,xa.Z)(e)?0:ls(e)?e.length:Object.keys(e).length}var DW=function(e,t){if(!ls(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},VL=DW;function z2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const NW=[1,5,2,2.5,4,3],rpe=null,HL=Number.EPSILON*100;function BW(e,t){return(e%t+t)%t}function FW(e){return Math.round(e*1e12)/1e12}function kW(e,t,n,r,i,s){const l=U2(t),u=VL(t,e);let h=0;const p=BW(r,s);return(p<HL||s-p<HL)&&r<=0&&i>=0&&(h=1),1-u/(l-1)-n+h}function UW(e,t,n){const r=U2(t);return 1-VL(t,e)/(r-1)-n+1}function zW(e,t,n,r,i,s){const l=(e-1)/(s-i),u=(t-1)/(Math.max(s,r)-Math.min(n,i));return 2-Math.max(l/u,u/l)}function jW(e,t){return e>=t?2-(e-1)/(t-1):1}function VW(e,t,n,r){const i=t-e;return 1-.5*(mf(t-r,2)+mf(e-n,2))/mf(.1*i,2)}function HW(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-mf(i,2)/mf(.1*r,2)}return 1}function WW(){return 1}const ZR=(e,t,n=5,r=!0,i=NW,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!l)return[];if(t-e<1e-15||l===1)return[e];const u={score:-2,lmin:0,lmax:0,lstep:0};let h=1;for(;h<1/0;){for(let R=0;R<i.length;R+=1){const M=i[R],I=UW(M,i,h);if(s[0]*I+s[1]+s[2]+s[3]<u.score){h=1/0;break}let N=2;for(;N<1/0;){const U=jW(N,l);if(s[0]*I+s[1]+s[2]*U+s[3]<u.score)break;const H=(t-e)/(N+1)/h/M;let X=Math.ceil(Math.log10(H));for(;X<1/0;){const $=h*M*mf(10,X),Q=HW(e,t,$*(N-1));if(s[0]*I+s[1]*Q+s[2]*U+s[3]<u.score)break;const ce=Math.floor(t/$)*h-(N-1)*h,pe=Math.ceil(e/$)*h;if(ce<=pe){const Re=pe-ce;for(let je=0;je<=Re;je+=1){const ft=(ce+je)*($/h),Ye=ft+$*(N-1),it=$,at=kW(M,i,h,ft,Ye,it),vt=VW(e,t,ft,Ye),Vt=zW(N,l,e,t,ft,Ye),At=WW(),Ut=s[0]*at+s[1]*vt+s[2]*Vt+s[3]*At;Ut>u.score&&(!r||ft<=e&&Ye>=t)&&(u.lmin=ft,u.lmax=Ye,u.lstep=it,u.score=Ut)}}X+=1}N+=1}}h+=1}const p=z2(u.lmax),v=z2(u.lmin),y=z2(u.lstep),b=Math.floor(FW((p-v)/y))+1,T=new Array(b);T[0]=z2(v);for(let R=1;R<b;R+=1)T[R]=z2(T[R-1]+y);return T};class Tw extends Db{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:ZR}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=dL(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*i-(s-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||s]}getThresholds(){return this.thresholds}clone(){return new Tw(this.options)}}function GW(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),s=e[i],l=e[i+1];return s+(l-s)*(r-i)}function ZW(e,t,n=!1){const r=e;n||r.sort((s,l)=>s-l);const i=[];for(let s=1;s<t;s+=1)i.push(GW(r,s/t));return i}class ww extends Db{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:ZR}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=ZW(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,s=i[0],l=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new ww(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,s=n[0],l=n[i];return r(s,l,t)}}var XW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $W(e,t,n){return e.size=t,CH(n)?e.height=t:e.width=t,e}function YW(e,t,n){const{size:r}=t,i=bL(e,t,n);return $W(i,r,i.orientation)}function KW(e){return t=>({value:t/e,label:String(t)})}function qW(e,t,n,r,i){const s=t.thresholds,l=KW(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...s,r].map(l)})}function QW(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((s,l)=>({value:l,label:s}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(s,l)=>l>0&&l<i.length-1})}function XR(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],ui(t)];return[n,r]}function JW(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[Z0(t).toString()]})),r}function eG(e,t,n,r,i,s){const{length:l}=e,u=n||r,h=i.color?s.legendContinuous.ribbonFill||"black":s.color,p=t||JW(u,h),[v,y]=XR(p),[b,T]=XR([t,n,r].filter(R=>R!==void 0).find(R=>!(R instanceof k2)));return Object.assign(Object.assign({},e),{domain:[b,T],data:p.getTicks().map(R=>({value:R})),color:new Array(Math.floor(l)).fill(0).map((R,M)=>{const I=(y-v)/(l-1)*M+v,N=p.map(I)||h,U=r?r.map(I):1;return N.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(H,X,$,Q)=>`rgba(${X}, ${$}, ${Q}, ${U})`)})})}function tG(e,t,n,r,i,s){const l=Pm(e,"color"),u=YW(n,r,i);if(l instanceof Db){const{range:v}=l.getOptions(),[y,b]=XR(l);return l instanceof Tw||l instanceof ww?qW(u,l,y,b,v):QW(u,l,v)}const h=Pm(e,"size"),p=Pm(e,"opacity");return eG(u,l,h,p,t,s)}const Dy=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:u,style:h,crossPadding:p,padding:v}=e,y=XW(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:b,value:T,theme:R,scale:M})=>{const{bbox:I}=T,{x:N,y:U,width:H,height:X}=I,$=yL(s,n),{legendContinuous:Q={}}=R,ce=xw(Object.assign({},Q,Object.assign(Object.assign({titleText:bw(u),labelAlign:"value",labelFormatter:typeof t=="string"?Re=>$e(t)(Re.label):t},tG(b,M,T,e,Dy,R)),h),y)),pe=new _L({style:Object.assign(Object.assign({x:N,y:U,width:H,height:X},$),{subOptions:ce})});return pe.appendChild(new LW({className:"legend-continuous",style:ce})),pe}};Dy.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const WL=e=>(...t)=>Dy(Object.assign({},{block:!0},e))(...t);WL.props=Object.assign(Object.assign({},Dy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const $R=e=>t=>{const{scales:n}=t,r=Pm(n,"size");return Dy(Object.assign({},{type:"size",data:r.getTicks().map((i,s)=>({value:i,label:String(i)}))},e))(t)};$R.props=Object.assign(Object.assign({},Dy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const GL=e=>$R(Object.assign({},{block:!0},e));GL.props=Object.assign(Object.assign({},Dy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var nG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ZL=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:s,paddingRight:l,paddingTop:u,paddingBottom:h,padding:p,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:R,margin:M,marginLeft:I,marginBottom:N,marginTop:U,marginRight:H,data:X,coordinate:$,theme:Q,component:ce,interaction:pe,x:Re,y:je,z:Ke,key:ft,frame:Ye,labelTransform:it,parentKey:at,clip:vt,viewStyle:Vt,title:At}=t,Ut=nG(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:Re,y:je,z:Ke,key:ft,width:n,height:r,depth:i,padding:p,paddingLeft:s,paddingRight:l,paddingTop:u,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:R,paddingBottom:h,theme:Q,coordinate:$,component:ce,interaction:pe,frame:Ye,labelTransform:it,margin:M,marginLeft:I,marginBottom:N,marginTop:U,marginRight:H,parentKey:at,clip:vt,style:Vt},!e&&{title:At}),{marks:[Object.assign(Object.assign(Object.assign({},Ut),{key:`${ft}-0`,data:X}),e&&{title:At})]})]};ZL.props={};var rG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function j2(e){return(t,...n)=>ti({},e(t,...n),t)}function i1(e){return(t,...n)=>ti({},t,e(t,...n))}function iG(e){return e instanceof Date?!1:typeof e=="object"}function YR(e,t){if(!e)return t;if(Array.isArray(e))return e;if(iG(e)){const{value:n=t}=e,r=rG(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}return e}var KR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const XL=()=>e=>{const{children:t}=e,n=KR(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:s={},legend:l={},encode:u={},transform:h=[]}=n,p=KR(n,["data","scale","axis","legend","encode","transform"]),v=t.map(y=>{var{data:b,scale:T={},axis:R={},legend:M={},encode:I={},transform:N=[]}=y,U=KR(y,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:YR(b,r),scale:ti({},i,T),encode:ti({},u,I),transform:[...h,...N],axis:R&&s?ti({},s,R):!1,legend:M&&l?ti({},l,M):!1},U)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]};XL.props={};function Lu([e,t],[n,r]){return[e-n,t-r]}function Aw([e,t],[n,r]){return[e+n,t+r]}function Eu([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Q0([e,t]){return Math.atan2(t,e)}function Nb([e,t]){return Q0([e,t])+Math.PI/2}function $L(e,t){const n=Q0(e),r=Q0(t);return n<r?r-n:Math.PI*2-(n-r)}function qR(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[u,h]of e)t=Math.min(u,t),n=Math.max(u,n),r=Math.min(h,r),i=Math.max(h,i);const s=n-t,l=i-r;return[t,r,s,l]}function YL([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function la(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function oG(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function aG(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*Eu(e,t):r,s=Math.PI/6,l=Math.atan2(t[1]-e[1],t[0]-e[0]),u=Math.PI/2-l-s,h=[t[0]-i*Math.sin(u),t[1]-i*Math.cos(u)],p=l-s,v=[t[0]-i*Math.cos(p),t[1]-i*Math.sin(p)];return[h,v]}function V2(e,t,n,r,i){const s=Q0(Lu(r,t))+Math.PI,l=Q0(Lu(r,n))+Math.PI;return e.arc(r[0],r[1],i,s,l,l-s<0),e}function KL(e,t,n,r="y",i="between",s=!1){const l=(I,N)=>I==="y"||I===!0?N?180:90:N?90:0,u=r==="y"||r===!0?n:t,h=l(r,s),p=sr(u),[v,y]=Cg(p,I=>u[I]),b=new bd({domain:[v,y],range:[0,100]}),T=I=>(0,Zl.Z)(u[I])&&!Number.isNaN(u[I])?b.map(u[I]):0,R={between:I=>`${e[I]} ${T(I)}%`,start:I=>I===0?`${e[I]} ${T(I)}%`:`${e[I-1]} ${T(I)}%, ${e[I]} ${T(I)}%`,end:I=>I===e.length-1?`${e[I]} ${T(I)}%`:`${e[I]} ${T(I)}%, ${e[I+1]} ${T(I)}%`},M=p.sort((I,N)=>T(I)-T(N)).map(R[i]||R.between).join(",");return`linear-gradient(${h}deg, ${M})`}function Cw(e){const[t,n,r,i]=e;return[i,t,n,r]}function o1(e,t,n){const[r,i,,s]=Tc(e)?Cw(t):t,[l,u]=n,h=e.getCenter(),p=Nb(Lu(r,h)),v=Nb(Lu(i,h)),y=v===p&&l!==u?v+Math.PI*2:v;return{startAngle:p,endAngle:y-p>=0?y:Math.PI*2+y,innerRadius:Eu(s,h),outerRadius:Eu(r,h)}}function ipe(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function QR(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function qL(e,t){if(!kl(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function JR(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,s,l=0]]=e;return[(t+i)/2,(n+s)/2,(r+l)/2]}function QL(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function sG(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var ope=Array.prototype.slice;function JL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zc(e){return function(){return e}}function e6(e){this._context=e}e6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function H2(e){return new e6(e)}const eM=Math.PI,tM=2*eM,a1=1e-6,lG=tM-a1;function t6(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cG(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return t6;const n=mf(10,t);return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ow{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?t6:cG(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,h=r-t,p=i-n,v=l-t,y=u-n,b=v*v+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>a1)if(!(Math.abs(y*h-p*v)>a1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let T=r-l,R=i-u,M=h*h+p*p,I=T*T+R*R,N=Math.sqrt(M),U=Math.sqrt(b),H=s*Math.tan((eM-Math.acos((M+b-I)/(2*N*U)))/2),X=H/U,$=H/N;Math.abs(X-1)>a1&&this._append`L${t+X*v},${n+X*y}`,this._append`A${s},${s},0,0,${+(y*T>v*R)},${this._x1=t+$*h},${this._y1=n+$*p}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),h=r*Math.sin(i),p=t+u,v=n+h,y=1^l,b=l?i-s:s-i;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>a1||Math.abs(this._y1-v)>a1)&&this._append`L${p},${v}`,r&&(b<0&&(b=b%tM+tM),b>lG?this._append`A${r},${r},0,1,${y},${t-u},${n-h}A${r},${r},0,1,${y},${this._x1=p},${this._y1=v}`:b>a1&&this._append`A${r},${r},0,${+(b>=eM)},${y},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function J0(){return new Ow}J0.prototype=Ow.prototype;function ape(e=3){return new Ow(+e)}function nM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ow(t)}function n6(e){return e[0]}function r6(e){return e[1]}function s1(e,t){var n=Zc(!0),r=null,i=H2,s=null,l=nM(u);e=typeof e=="function"?e:e===void 0?n6:Zc(e),t=typeof t=="function"?t:t===void 0?r6:Zc(t);function u(h){var p,v=(h=JL(h)).length,y,b=!1,T;for(r==null&&(s=i(T=l())),p=0;p<=v;++p)!(p<v&&n(y=h[p],p,h))===b&&((b=!b)?s.lineStart():s.lineEnd()),b&&s.point(+e(y,p,h),+t(y,p,h));if(T)return s=null,T+""||null}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Zc(+h),u):e},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Zc(+h),u):t},u.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Zc(!!h),u):n},u.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),u):i},u.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),u):r},u}function Bb(e){const t=typeof e=="function"?e:e.render;return class extends Y1{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var rM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uG(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let s=0,l=0;return t>0&&(s=t),r<0&&(s=r),n>0&&(l=n),i<0&&(l=i),[s,l]}function fG(e,t=[]){const[n=0,r=0,i=n,s=r]=t,l=e.parentNode,u=l.getEulerAngles();l.setEulerAngles(0);const{min:h,halfExtents:p}=e.getLocalBounds(),[v,y]=h,[b,T]=p;return l.setEulerAngles(u),{x:v-s,y:y-n,width:b*2+s+r,height:T*2+n+i}}const spe=(e,t,n)=>{const r=dist(e,t),i=dist(t,n),s=dist(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(s,2))/(2*r*i)};function hG(e,t,n,r,i=!0,s=!0){const l=y=>s1()(y);if(!t[0]&&!t[1])return l([uG(e),t]);if(!n.length)return l([[0,0],t]);const[u,h]=n,p=[...h],v=[...u];if(h[0]!==u[0]){const y=i?-4:4;p[1]=h[1],s&&!i&&(p[0]=Math.max(u[0],h[0]-y),h[1]<u[1]?v[1]=p[1]:(v[1]=u[1],v[0]=Math.max(v[0],p[0]-y))),!s&&!i&&(p[0]=Math.max(u[0],h[0]-y),h[1]>u[1]?v[1]=p[1]:(v[1]=u[1],v[0]=Math.max(v[0],p[0]-y))),!s&&i&&(p[0]=Math.min(u[0],h[0]-y),h[1]>u[1]?v[1]=p[1]:(v[1]=u[1],v[0]=Math.min(v[0],p[0]-y))),s&&i&&(p[0]=Math.min(u[0],h[0]-y),h[1]<u[1]?v[1]=p[1]:(v[1]=u[1],v[0]=Math.min(v[0],p[0]-y)))}return l([h,p,v,u,t])}const i6=Bb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:s,labelTransform:l,labelTransformOrigin:u,x:h,y:p,x0:v=h,y0:y=p,text:b,background:T,connector:R,startMarker:M,endMarker:I,coordCenter:N,innerHTML:U}=t,H=rM(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(e.style.transform=`translate(${h}, ${p})`,[h,p,v,y].some(At=>!(0,Zl.Z)(At))){e.children.forEach(At=>At.remove());return}const X=go(H,"background"),{padding:$}=X,Q=rM(X,["padding"]),ce=go(H,"connector"),{points:pe=[]}=ce,Re=rM(ce,["points"]);let je;U?je=Pa(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",U).call(la,Object.assign({transform:l,transformOrigin:u},H)).node():je=Pa(e).maybeAppend("text","text").style("zIndex",0).style("text",b).call(la,Object.assign({textBaseline:"middle",transform:l,transformOrigin:u},H)).node();const Ke=Pa(e).maybeAppend("background","rect").style("zIndex",-1).call(la,fG(je,$)).call(la,T?Q:{}).node(),ft=+v<N[0],Ye=+y<N[1],it=[+v-+h,+y-+p],at=hG(Ke,it,pe,N,ft,Ye),vt=M&&new Ul({id:"startMarker",style:Object.assign({x:0,y:0},go(H,"startMarker"))}),Vt=I&&new Ul({id:"endMarker",style:Object.assign({x:0,y:0},go(H,"endMarker"))});Pa(e).maybeAppend("connector","path").style("zIndex",0).style("d",at).style("markerStart",vt).style("markerEnd",Vt).call(la,R?Re:{})});function Fb(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function dG(e,t,n,r){const i=t.length/2,s=t.slice(0,i),l=t.slice(i);let u=Fb(s,(T,R)=>Math.abs(T[1]-l[R][1]));u=Math.max(Math.min(u,i-2),1);const h=T=>[s[T][0],(s[T][1]+l[T][1])/2],p=h(u),v=h(u-1),y=h(u+1),b=Q0(Lu(y,v))/Math.PI*180;return{x:p[0],y:p[1],transform:`rotate(${b})`,textAlign:"center",textBaseline:"middle"}}function o6(e,t,n,r){const{bounds:i}=n,[[s,l],[u,h]]=i,p=u-s,v=h-l,y=b=>{const{x:T,y:R}=b,M=rw(n.x,p),I=rw(n.y,v);return Object.assign(Object.assign({},b),{x:(M||T)+s,y:(I||R)+l})};return y(e==="left"?{x:0,y:v/2,textAlign:"start",textBaseline:"middle"}:e==="right"?{x:p,y:v/2,textAlign:"end",textBaseline:"middle"}:e==="top"?{x:p/2,y:0,textAlign:"center",textBaseline:"top"}:e==="bottom"?{x:p/2,y:v,textAlign:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:e==="top-right"?{x:p,y:0,textAlign:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:v,textAlign:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:p,y:v,textAlign:"end",textBaseline:"bottom"}:{x:p/2,y:v/2,textAlign:"center",textBaseline:"middle"})}function a6(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:u}=n,h=r.getCenter(),p=o1(r,t,[i,s]),{innerRadius:v,outerRadius:y,startAngle:b,endAngle:T}=p,R=e==="inside"?(b+T)/2:T,M=iM(R,l,u),I=(()=>{const[N,U]=t,H=v+(y-v)*.5,[X,$]=e==="inside"?W2(h,R,H):YL(N,U);return{x:X,y:$}})();return Object.assign(Object.assign({},I),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:M})}function W2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function iM(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function pG(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:u,radius:h=.5,offset:p=0}=n,v=o1(r,t,[i,s]),{startAngle:y,endAngle:b}=v,T=r.getCenter(),R=(y+b)/2,I={textAlign:"center",textBaseline:"middle",rotate:iM(R,l,u)},{innerRadius:N,outerRadius:U}=v,X=N+(U-N)*h+p,[$,Q]=W2(T,R,X);return Object.assign({x:$,y:Q},I)}function s6(e){return e===void 0?null:e}function l6(e,t,n,r){const{bounds:i}=n,[s]=i;return{x:s6(s[0]),y:s6(s[1])}}function Og(e,t,n,r){const{bounds:i}=n;return i.length===1?l6(e,t,n,r):(Q_(r)?a6:df(r)?pG:o6)(e,t,n,r)}function vG(e,t,n,r,i){const[s,l]=W2(e,t,n),[u,h]=W2(e,t,r),p=Math.sin(t)>0?1:-1;return[[s,l],[u,h],[u+p*i,h]]}function c6(e,t,n){const r=o1(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:s}=r;return i+(s-i)}function u6(e,t,n){const r=o1(n,e,[t.y,t.y1]),{startAngle:i,endAngle:s}=r;return(i+s)/2}function oM(e,t,n,r){const{autoRotate:i,rotateToAlignArc:s,offset:l=0,connector:u=!0,connectorLength:h=l,connectorLength2:p=0,connectorDistance:v=0}=n,y=r.getCenter(),b=u6(t,n,r),T=Math.sin(b)>0?1:-1,R=iM(b,i,s),M={textAlign:T>0||Q_(r)?"start":"end",textBaseline:"middle",rotate:R},I=c6(t,n,r),N=I+(u?h:l),[[U,H],[X,$],[Q,ce]]=vG(y,b,I,N,u?p:0),pe=u?+v*T:0,Re=Q+pe,je=ce,Ke={connector:u,connectorPoints:[[X-Re,$-je],[Q-Re,ce-je]]};return Object.assign(Object.assign({x0:U,y0:H,x:Q+pe,y:ce},M),Ke)}function mG(e,t,n,r){const{bounds:i}=n;return i.length===1?l6(e,t,n,r):(Q_(r)?a6:df(r)?oM:o6)(e,t,n,r)}function Du(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gG(e,t){return Array.from(t,n=>e[n])}function zv(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const l of t){const u=G2(l[i],l[s]);if(u)return u}})):(n=e.map(n),r.sort((i,s)=>G2(n[i],n[s]))),gG(e,r)}return e.sort(f6(n))}function f6(e=Du){if(e===Du)return G2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function G2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function h6(e,t={}){const{labelHeight:n=14,height:r}=t,i=zv(e,p=>p.y),s=i.length,l=new Array(s);for(let p=0;p<s;p++){const v=i[p],{y}=v;l[p]={y,y1:y+n,labels:[y]}}let u=!0;for(;u;){u=!1;for(let p=l.length-1;p>0;p--){const v=l[p],y=l[p-1];if(y.y1>v.y){u=!0,y.labels.push(...v.labels),l.splice(p,1),y.y1+=v.y1-v.y;const b=y.y1-y.y;y.y1=Math.max(Math.min(y.y1,r),b),y.y=y.y1-b}}}let h=0;for(const p of l){const{y:v,labels:y}=p;let b=v-n;for(const T of y){const R=i[h++],I=b+n-T;R.connectorPoints[0][1]-=I,R.y=b+n,b+=n}}}function d6(e,t){const n=zv(e,u=>u.y),{height:r,labelHeight:i=14}=t,s=Math.ceil(r/i);if(n.length<=s)return h6(n,t);const l=[];for(let u=0;u<n.length;u++)u<n.length-s?(n[u].opacity=0,n[u].connector=!1):l.push(n[u]);h6(l,t)}var yG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Rw=new WeakMap;function _G(e,t,n){const{connectorLength:r,connectorLength2:i,connectorDistance:s}=t,l=yG(oM("outside",e,t,n),[]),u=n.getCenter(),h=c6(e,t,n),p=u6(e,t,n),v=h+r+i,y=Math.sin(p)>0?1:-1,b=u[0]+(v+ +s)*y,{x:T}=l,R=b-T;return l.x+=R,l.connectorPoints[0][0]-=R,l}function bG(e,t,n,r,i,s){if(!df(r))return{};if(Rw.has(t))return Rw.get(t);const l=s.map(b=>_G(b,n,r)),{width:u,height:h}=r.getOptions(),p=l.filter(b=>b.x<u/2),v=l.filter(b=>b.x>=u/2),y=Object.assign(Object.assign({},i),{height:h});return d6(p,y),d6(v,y),l.forEach((b,T)=>Rw.set(s[T],b)),Rw.get(t)}var xG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EG(e,t,n,r){if(!df(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,u=xG(oM("outside",t,n,r),[]),{x0:h,y0:p}=u,v=r.getCenter(),b=ip(r)+i,T=Nb([h-v[0],p-v[1]]),R=Math.sin(T)>0?1:-1,[M,I]=W2(v,T,b);return u.x=M+(s+l)*R,u.y=I,u}var p6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function SG(e,t){return e!==void 0?e:df(t)?"inside":Tc(t)?"right":"top"}function TG(e,t,n,r,i,s){const{position:l}=t,{render:u}=i,h=SG(l,n),v=r[u?"htmlLabel":h==="inside"?"innerLabel":"label"],y=Object.assign({},v,t),b=J[QL(h)];if(!b)throw new Error(`Unknown position: ${h}`);return Object.assign(Object.assign({},v),b(h,e,y,n,i,s))}const v6=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(s,l,u,h)=>{const{text:p,x:v,y,transform:b="",transformOrigin:T,className:R=""}=l,M=p6(l,["text","x","y","transform","transformOrigin","className"]),I=TG(s,l,n,r,e,h),{rotate:N=0,transform:U=""}=I,H=p6(I,["rotate","transform"]);return Pa(new i6).call(la,H).style("text",`${p}`).style("className",`${R} g2-label`).style("innerHTML",i?i(p,l.datum,l.index):void 0).style("labelTransform",`${U} rotate(${+N}) ${b}`.trim()).style("labelTransformOrigin",T).style("coordCenter",n.getCenter()).call(la,M).node()}};v6.props={defaultMarker:"point"};var wG=function(e,t){if(!ls(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},m6=wG;function AG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ny(e){let t,n,r;e.length!==2?(t=Du,n=(u,h)=>Du(e(u),h),r=(u,h)=>e(u)-h):(t=e===Du||e===AG?e:CG,n=e,r=e);function i(u,h,p=0,v=u.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(u[y],h)<0?p=y+1:v=y}while(p<v)}return p}function s(u,h,p=0,v=u.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(u[y],h)<=0?p=y+1:v=y}while(p<v)}return p}function l(u,h,p=0,v=u.length){const y=i(u,h,p,v-1);return y>p&&r(u[y-1],h)>-r(u[y],h)?y-1:y}return{left:i,center:l,right:s}}function CG(){return 0}function aM(e){return e===null?NaN:+e}function*OG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const g6=Ny(Du),RG=g6.right,MG=g6.left,PG=Ny(aM).center;var IG=RG;function LG(e,t,n){return Math.min(n,Math.max(t,e))}function Z2(e){return!!e.getBandWidth}function kb(e,t,n){if(!Z2(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),s=n?-1:0,l=e.getStep(),u=n?r:r.map(v=>v+l),h=MG(u,t),p=LG(h+s,0,i.length-1);return i[p]}function By(e,t,n){if(!t)return e.getOptions().domain;if(!Z2(e)){const h=zv(t);if(!n)return h;const[p]=h,{range:v}=e.getOptions(),[y,b]=v,T=y>b?-1:1,R=e.invert(e.map(p)+T*n);return[p,R]}const{domain:r}=e.getOptions(),i=t[0],s=r.indexOf(i);if(n){const h=s+Math.round(r.length*n);return r.slice(s,h)}const l=t[t.length-1],u=r.indexOf(l);return r.slice(s,u+1)}function Mw(e,t,n,r,i,s){const{x:l,y:u}=i,h=(T,R)=>{const[M,I]=s.invert(T);return[kb(l,M,R),kb(u,I,R)]},p=h([e,t],!0),v=h([n,r],!1),y=By(l,[p[0],v[0]]),b=By(u,[p[1],v[1]]);return[y,b]}function Pw(e,t){const[n,r]=e,i=s=>s.getStep?s.getStep():0;return[t.map(n),t.map(r)+i(t)]}function DG(e,t,n){const{x:r,y:i}=t,[s,l]=e,u=Pw(s,r),h=Pw(l,i),p=[u[0],h[0]],v=[u[1],h[1]],[y,b]=n.map(p),[T,R]=n.map(v);return[y,b,T,R]}const y6=Math.abs,xd=Math.atan2,l1=Math.cos,NG=Math.max,sM=Math.min,Dm=Math.sin,Ub=Math.sqrt,Ed=1e-12,X2=Math.PI,Iw=X2/2,BG=2*X2;function FG(e){return e>1?0:e<-1?X2:Math.acos(e)}function _6(e){return e>=1?Iw:e<=-1?-Iw:Math.asin(e)}function kG(e){return e.innerRadius}function UG(e){return e.outerRadius}function zG(e){return e.startAngle}function jG(e){return e.endAngle}function VG(e){return e&&e.padAngle}function HG(e,t,n,r,i,s,l,u){var h=n-e,p=r-t,v=l-i,y=u-s,b=y*h-v*p;if(!(b*b<Ed))return b=(v*(t-s)-y*(e-i))/b,[e+b*h,t+b*p]}function Lw(e,t,n,r,i,s,l){var u=e-n,h=t-r,p=(l?s:-s)/Ub(u*u+h*h),v=p*h,y=-p*u,b=e+v,T=t+y,R=n+v,M=r+y,I=(b+R)/2,N=(T+M)/2,U=R-b,H=M-T,X=U*U+H*H,$=i-s,Q=b*M-R*T,ce=(H<0?-1:1)*Ub(NG(0,$*$*X-Q*Q)),pe=(Q*H-U*ce)/X,Re=(-Q*U-H*ce)/X,je=(Q*H+U*ce)/X,Ke=(-Q*U+H*ce)/X,ft=pe-I,Ye=Re-N,it=je-I,at=Ke-N;return ft*ft+Ye*Ye>it*it+at*at&&(pe=je,Re=Ke),{cx:pe,cy:Re,x01:-v,y01:-y,x11:pe*(i/$-1),y11:Re*(i/$-1)}}function Dw(){var e=kG,t=UG,n=Zc(0),r=null,i=zG,s=jG,l=VG,u=null,h=nM(p);function p(){var v,y,b=+e.apply(this,arguments),T=+t.apply(this,arguments),R=i.apply(this,arguments)-Iw,M=s.apply(this,arguments)-Iw,I=y6(M-R),N=M>R;if(u||(u=v=h()),T<b&&(y=T,T=b,b=y),!(T>Ed))u.moveTo(0,0);else if(I>BG-Ed)u.moveTo(T*l1(R),T*Dm(R)),u.arc(0,0,T,R,M,!N),b>Ed&&(u.moveTo(b*l1(M),b*Dm(M)),u.arc(0,0,b,M,R,N));else{var U=R,H=M,X=R,$=M,Q=I,ce=I,pe=l.apply(this,arguments)/2,Re=pe>Ed&&(r?+r.apply(this,arguments):Ub(b*b+T*T)),je=sM(y6(T-b)/2,+n.apply(this,arguments)),Ke=je,ft=je,Ye,it;if(Re>Ed){var at=_6(Re/b*Dm(pe)),vt=_6(Re/T*Dm(pe));(Q-=at*2)>Ed?(at*=N?1:-1,X+=at,$-=at):(Q=0,X=$=(R+M)/2),(ce-=vt*2)>Ed?(vt*=N?1:-1,U+=vt,H-=vt):(ce=0,U=H=(R+M)/2)}var Vt=T*l1(U),At=T*Dm(U),Ut=b*l1($),Sn=b*Dm($);if(je>Ed){var Vn=T*l1(H),rr=T*Dm(H),or=b*l1(X),Hr=b*Dm(X),fi;if(I<X2)if(fi=HG(Vt,At,or,Hr,Vn,rr,Ut,Sn)){var Qi=Vt-fi[0],Jr=At-fi[1],qr=Vn-fi[0],Io=rr-fi[1],Ji=1/Dm(FG((Qi*qr+Jr*Io)/(Ub(Qi*Qi+Jr*Jr)*Ub(qr*qr+Io*Io)))/2),Wi=Ub(fi[0]*fi[0]+fi[1]*fi[1]);Ke=sM(je,(b-Wi)/(Ji-1)),ft=sM(je,(T-Wi)/(Ji+1))}else Ke=ft=0}ce>Ed?ft>Ed?(Ye=Lw(or,Hr,Vt,At,T,ft,N),it=Lw(Vn,rr,Ut,Sn,T,ft,N),u.moveTo(Ye.cx+Ye.x01,Ye.cy+Ye.y01),ft<je?u.arc(Ye.cx,Ye.cy,ft,xd(Ye.y01,Ye.x01),xd(it.y01,it.x01),!N):(u.arc(Ye.cx,Ye.cy,ft,xd(Ye.y01,Ye.x01),xd(Ye.y11,Ye.x11),!N),u.arc(0,0,T,xd(Ye.cy+Ye.y11,Ye.cx+Ye.x11),xd(it.cy+it.y11,it.cx+it.x11),!N),u.arc(it.cx,it.cy,ft,xd(it.y11,it.x11),xd(it.y01,it.x01),!N))):(u.moveTo(Vt,At),u.arc(0,0,T,U,H,!N)):u.moveTo(Vt,At),!(b>Ed)||!(Q>Ed)?u.lineTo(Ut,Sn):Ke>Ed?(Ye=Lw(Ut,Sn,Vn,rr,b,-Ke,N),it=Lw(Vt,At,or,Hr,b,-Ke,N),u.lineTo(Ye.cx+Ye.x01,Ye.cy+Ye.y01),Ke<je?u.arc(Ye.cx,Ye.cy,Ke,xd(Ye.y01,Ye.x01),xd(it.y01,it.x01),!N):(u.arc(Ye.cx,Ye.cy,Ke,xd(Ye.y01,Ye.x01),xd(Ye.y11,Ye.x11),!N),u.arc(0,0,b,xd(Ye.cy+Ye.y11,Ye.cx+Ye.x11),xd(it.cy+it.y11,it.cx+it.x11),N),u.arc(it.cx,it.cy,Ke,xd(it.y11,it.x11),xd(it.y01,it.x01),!N))):u.arc(0,0,b,$,X,N)}if(u.closePath(),v)return u=null,v+""||null}return p.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-X2/2;return[l1(y)*v,Dm(y)*v]},p.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Zc(+v),p):e},p.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Zc(+v),p):t},p.cornerRadius=function(v){return arguments.length?(n=typeof v=="function"?v:Zc(+v),p):n},p.padRadius=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Zc(+v),p):r},p.startAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Zc(+v),p):i},p.endAngle=function(v){return arguments.length?(s=typeof v=="function"?v:Zc(+v),p):s},p.padAngle=function(v){return arguments.length?(l=typeof v=="function"?v:Zc(+v),p):l},p.context=function(v){return arguments.length?(u=v==null?null:v,p):u},p}var Nw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function b6(e,t,n,r,i={}){const{inset:s=0,radius:l=0,insetLeft:u=s,insetTop:h=s,insetRight:p=s,insetBottom:v=s,radiusBottomLeft:y=l,radiusBottomRight:b=l,radiusTopLeft:T=l,radiusTopRight:R=l,minWidth:M=-1/0,maxWidth:I=1/0,minHeight:N=-1/0}=i,U=Nw(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!kl(r)&&!da(r)){const pe=!!Tc(r),[Re,,je]=pe?Cw(t):t,[Ke,ft]=Re,[Ye,it]=Lu(je,Re),at=Ye>0?Ke:Ke+Ye,vt=it>0?ft:ft+it,Vt=Math.abs(Ye),At=Math.abs(it),Ut=at+u,Sn=vt+h,Vn=Vt-(u+p),rr=At-(h+v),or=pe?Ab(Vn,N,1/0):Ab(Vn,M,I),Hr=pe?Ab(rr,M,I):Ab(rr,N,1/0),fi=pe?Ut:Ut-(or-Vn)/2,Qi=pe?Sn-(Hr-rr)/2:Sn-(Hr-rr);return Pa(e.createElement("rect",{})).style("x",fi).style("y",Qi).style("width",or).style("height",Hr).style("radius",[T,R,b,y]).call(la,U).node()}const{y:H,y1:X}=n,$=r.getCenter(),Q=o1(r,t,[H,X]),ce=Dw().cornerRadius(l).padAngle(s*Math.PI/180);return Pa(e.createElement("path",{})).style("d",ce(Q)).style("transform",`translate(${$[0]}, ${$[1]})`).style("radius",l).style("inset",s).call(la,U).node()}const $2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:s=!0}=e,l=Nw(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:u,document:h}=t;return(p,v,y)=>{const{color:b,radius:T=0}=y,R=Nw(y,["color","radius"]),M=R.lineWidth||1,{stroke:I,radius:N=T,radiusTopLeft:U=N,radiusTopRight:H=N,radiusBottomRight:X=N,radiusBottomLeft:$=N,innerRadius:Q=0,innerRadiusTopLeft:ce=Q,innerRadiusTopRight:pe=Q,innerRadiusBottomRight:Re=Q,innerRadiusBottomLeft:je=Q,lineWidth:Ke=n==="stroke"||I?M:0,inset:ft=0,insetLeft:Ye=ft,insetRight:it=ft,insetBottom:at=ft,insetTop:vt=ft,minWidth:Vt,maxWidth:At,minHeight:Ut}=l,Sn=Nw(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:Vn=b,opacity:rr}=v,or=[i?U:ce,i?H:pe,s?X:Re,s?$:je],Hr=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Tc(u)&&Hr.push(Hr.shift());const fi=Object.assign(Object.assign({radius:N},Object.fromEntries(Hr.map((Qi,Jr)=>[Qi,or[Jr]]))),{inset:ft,insetLeft:Ye,insetRight:it,insetBottom:at,insetTop:vt,minWidth:Vt,maxWidth:At,minHeight:Ut});return Pa(b6(h,p,v,u,fi)).call(la,R).style("fill","transparent").style(n,Vn).style(QR(e),rr).style("lineWidth",Ke).style("stroke",I===void 0?Vn:I).call(la,Sn).node()}};$2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const WG={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function GG(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:WG[t]}function lM(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>lM(i,t,n,r))}function cM(e){lM(e,"visibility","hidden",!0)}function Bw(e){lM(e,"visibility","visible",!0)}var Y2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Fy(e){return Pa(e).selectAll(`.${va}`).nodes().filter(t=>!t.__removed__)}function x6(e,t){return uM(e,t).flatMap(({container:n})=>Fy(n))}function uM(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function Nm(e){return Pa(e).select(`.${Jo}`).node()}function E6(e){if(e.tagName==="g")return e.getRenderBounds();const t=e.getGeometryBounds(),n=new _u;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function K2(e,t){const{offsetX:n,offsetY:r}=t,i=E6(e),{min:[s,l],max:[u,h]}=i,p=n<s||n>u,v=r<l||r>h;return p||v?null:[n-s,r-l]}function fM(e,t){const{offsetX:n,offsetY:r}=t,[i,s,l,u]=ZG(e);return[Math.min(l,Math.max(i,n))-i,Math.min(u,Math.max(s,r))-s]}function ZG(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return[n,r,i,s]}function S6(e){return t=>t.__data__.color}function hM(e){return t=>t.__data__.x}function c1(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(s=>[Fw(r.key,s.key),s.data])));return r=>{const{index:i,markKey:s,viewKey:l}=r.__data__;return n.get(Fw(l,s))[i]}}function Rg(e,t=(r,i)=>r,n=(r,i,s)=>r.setAttribute(i,s)){const r="__states__",i="__ordinal__",s=v=>{const{[r]:y=[],[i]:b={}}=v,T=y.reduce((R,M)=>Object.assign(Object.assign({},R),e[M]),b);if(Object.keys(T).length!==0){for(const[R,M]of Object.entries(T)){const I=GG(v,R),N=t(M,v);n(v,R,N),R in b||(b[R]=I)}v[i]=b}},l=v=>{v[r]||(v[r]=[])};return{setState:(v,...y)=>{l(v),v[r]=[...y],s(v)},removeState:(v,...y)=>{l(v);for(const b of y){const T=v[r].indexOf(b);T!==-1&&v[r].splice(T,1)}s(v)},hasState:(v,y)=>(l(v),v[r].indexOf(y)!==-1)}}function XG(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function Fw(e,t){return`${e},${t}`}function zb(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(s=>s.marks.map(l=>[Fw(s.key,l.key),l.state])),i={};for(const s of t){const[l,u]=Array.isArray(s)?s:[s,{}];i[l]=r.reduce((h,p)=>{const[v,y={}]=p,b=XG(y[l])?u:y[l];for(const[T,R]of Object.entries(b)){const M=h[T],I=(N,U,H,X)=>{const $=Fw(X.__data__.viewKey,X.__data__.markKey);return v!==$?M==null?void 0:M(N,U,H,X):typeof R!="function"?R:R(N,U,H,X)};h[T]=I}return h},{})}return i}function q2(e,t){const n=new Map(e.map((i,s)=>[i,s])),r=t?e.map(t):e;return(i,s)=>{if(typeof i!="function")return i;const l=n.get(s),u=t?t(s):s;return i(u,l,r,s)}}function T6(e){var{link:t=!1,valueof:n=(v,y)=>v,coordinate:r}=e,i=Y2(e,["link","valueof","coordinate"]);const s="element-link";if(!t)return[()=>{},()=>{}];const l=v=>v.__data__.points,u=(v,y)=>{const[,b,T]=v,[R,,,M]=y;return[b,R,M,T]};return[v=>{var y;if(v.length<=1)return;const b=zv(v,(T,R)=>{const{x:M}=T.__data__,{x:I}=R.__data__;return M-I});for(let T=1;T<b.length;T++){const R=J0(),M=b[T-1],I=b[T],[N,U,H,X]=u(l(M),l(I));R.moveTo(...N),R.lineTo(...U),R.lineTo(...H),R.lineTo(...X),R.closePath();const $=Tn(i,Re=>n(Re,M)),{fill:Q=M.getAttribute("fill")}=$,ce=Y2($,["fill"]),pe=new vd({className:s,style:Object.assign({d:R.toString(),fill:Q,zIndex:-2},ce)});(y=M.link)===null||y===void 0||y.remove(),M.parentNode.appendChild(pe),M.link=pe}},v=>{var y;(y=v.link)===null||y===void 0||y.remove(),v.link=null}]}function w6(e,t,n){const r=i=>{const{transform:s}=e.style;return s?`${s} ${i}`:i};if(kl(n)){const{points:i}=e.__data__,[s,l]=Tc(n)?Cw(i):i,u=n.getCenter(),h=Lu(s,u),p=Lu(l,u),v=Q0(h),y=$L(h,p),b=v+y/2,T=t*Math.cos(b),R=t*Math.sin(b);return r(`translate(${T}, ${R})`)}return Tc(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function A6(e){var{document:t,background:n,scale:r,coordinate:i,valueof:s}=e,l=Y2(e,["document","background","scale","coordinate","valueof"]);const u="element-background";if(!n)return[()=>{},()=>{}];const h=(N,U,H)=>{const X=N.invert(U),$=U+N.getBandWidth(X)/2,Q=N.getStep(X)/2,ce=Q*H;return[$-Q+ce,$+Q-ce]},p=(N,U)=>{const{x:H}=r;if(!Z2(H))return[0,1];const{__data__:X}=N,{x:$}=X,[Q,ce]=h(H,$,U);return[Q,ce]},v=(N,U)=>{const{y:H}=r;if(!Z2(H))return[0,1];const{__data__:X}=N,{y:$}=X,[Q,ce]=h(H,$,U);return[Q,ce]},y=(N,U)=>{const{padding:H}=U,[X,$]=p(N,H),[Q,ce]=v(N,H),pe=[[X,Q],[$,Q],[$,ce],[X,ce]].map(ft=>i.map(ft)),{__data__:Re}=N,{y:je,y1:Ke}=Re;return b6(t,pe,{y:je,y1:Ke},i,U)},b=(N,U)=>{const{transform:H="scale(1.2, 1.2)",transformOrigin:X="center center",stroke:$=""}=U,Q=Y2(U,["transform","transformOrigin","stroke"]),ce=Object.assign({transform:H,transformOrigin:X,stroke:$},Q),pe=N.cloneNode(!0);for(const[Re,je]of Object.entries(ce))pe.style[Re]=je;return pe},T=()=>{const{x:N,y:U}=r;return[N,U].some(Z2)};return[N=>{N.background&&N.background.remove();const U=Tn(l,ft=>s(ft,N)),{fill:H="#CCD6EC",fillOpacity:X=.3,zIndex:$=-2,padding:Q=.001,lineWidth:ce=0}=U,pe=Y2(U,["fill","fillOpacity","zIndex","padding","lineWidth"]),Re=Object.assign(Object.assign({},pe),{fill:H,fillOpacity:X,zIndex:$,padding:Q,lineWidth:ce}),Ke=(T()?y:b)(N,Re);Ke.className=u,N.parentNode.parentNode.appendChild(Ke),N.background=Ke},N=>{var U;(U=N.background)===null||U===void 0||U.remove(),N.background=null},N=>N.className===u]}function ky(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function $G(e){ky(e,e.cursor)}function dM(e,t,n){return e.find(r=>Object.entries(t).every(([i,s])=>n(r)[i]===s))}function kw(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Q2(e,t=!1){const n=m6(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function C6(e){return e.querySelectorAll(".element")}function YG(e,t,n=0){const r=[["M",...t[1]]],i=kw(e,t[1]),s=kw(e,t[0]);return i===0?r.push(["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]),r}function Uw(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function O6(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:s}=n,{markState:l}=t,u=Array.from(l.keys()).find(h=>h.key===r);if(u)return s?s.map(h=>u.data[h]):u.data[i]}function KG(e){return Uw(e,t=>t.className==="component")}function qG(e){return Uw(e,t=>t.className==="element")}function QG(e){return Uw(e,t=>t.className==="label")}function _h(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:s}=i;if(!s)return;const{className:l}=s;if(l==="plot")return;const u=qG(s),h=KG(s),p=QG(s),v=u||h||p;if(!v)return;const{className:y,markType:b}=v,T=Object.assign(Object.assign({},i),{nativeEvent:!0});y==="element"?(T.data={data:O6(v,t)},n.emit(`element:${e}`,T),n.emit(`${b}:${e}`,T)):y==="label"?(T.data={data:v.attributes.datum},n.emit(`label:${e}`,T),n.emit(`${l}:${e}`,T)):(n.emit(`component:${e}`,T),n.emit(`${l}:${e}`,T))}}function R6(){return(e,t,n)=>{const{container:r,view:i}=e,s=_h(_l.CLICK,i,n,ce=>ce.detail===1),l=_h(_l.DBLCLICK,i,n,ce=>ce.detail===2),u=_h(_l.POINTER_TAP,i,n),h=_h(_l.POINTER_DOWN,i,n),p=_h(_l.POINTER_UP,i,n),v=_h(_l.POINTER_OVER,i,n),y=_h(_l.POINTER_OUT,i,n),b=_h(_l.POINTER_MOVE,i,n),T=_h(_l.POINTER_ENTER,i,n),R=_h(_l.POINTER_LEAVE,i,n),M=_h(_l.POINTER_UPOUTSIDE,i,n),I=_h(_l.DRAG_START,i,n),N=_h(_l.DRAG,i,n),U=_h(_l.DRAG_END,i,n),H=_h(_l.DRAG_ENTER,i,n),X=_h(_l.DRAG_LEAVE,i,n),$=_h(_l.DRAG_OVER,i,n),Q=_h(_l.DROP,i,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",u),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",p),r.addEventListener("pointerover",v),r.addEventListener("pointerout",y),r.addEventListener("pointermove",b),r.addEventListener("pointerenter",T),r.addEventListener("pointerleave",R),r.addEventListener("pointerupoutside",M),r.addEventListener("dragstart",I),r.addEventListener("drag",N),r.addEventListener("dragend",U),r.addEventListener("dragenter",H),r.addEventListener("dragleave",X),r.addEventListener("dragover",$),r.addEventListener("drop",Q),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",u),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",p),r.removeEventListener("pointerover",v),r.removeEventListener("pointerout",y),r.removeEventListener("pointermove",b),r.removeEventListener("pointerenter",T),r.removeEventListener("pointerleave",R),r.removeEventListener("pointerupoutside",M),r.removeEventListener("dragstart",I),r.removeEventListener("drag",N),r.removeEventListener("dragend",U),r.removeEventListener("dragenter",H),r.removeEventListener("dragleave",X),r.removeEventListener("dragover",$),r.removeEventListener("drop",Q)}}}R6.props={reapplyWhenUpdate:!0};function JG(){return{"component.axisRadar":CL,"component.axisLinear":Iy,"component.axisArc":AL,"component.legendContinuousBlock":WL,"component.legendContinuousBlockSize":GL,"component.legendContinuousSize":$R,"interaction.event":R6,"composition.mark":ZL,"composition.view":XL,"shape.label.label":v6}}var eZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Xc(e,t){const n=Object.assign(Object.assign({},JG()),t),r=s=>{if(typeof s!="string")return s;const l=`${e}.${s}`;return n[l]||Oy(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:u}=s,h=eZ(s,["type"]);u||Oy("Plot type is required!");const p=r(u);return p==null?void 0:p(h,l)},r]}function M6(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||Oy("Cannot find library document")}var P6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function tZ(e,t,n){const[r]=Xc("coordinate",n),{innerHeight:i,innerWidth:s,insetLeft:l,insetTop:u,insetRight:h,insetBottom:p}=e,{coordinates:v=[]}=t,y=sZ(v),b=y[0].type==="cartesian3D",T=Object.assign(Object.assign({},e),{x:l,y:u,width:s-l-h,height:i-p-u,transformations:y.flatMap(r)});return b?new aw.Coordinate3D(T):new aw.Coordinate(T)}function I6(e,t){const{coordinate:n={},coordinates:r}=e,i=P6(e,["coordinate","coordinates"]);if(r)return e;const{type:s,transform:l=[]}=n,u=P6(n,["type","transform"]);if(!s)return Object.assign(Object.assign({},i),{coordinates:l});const[,h]=Xc("coordinate",t),{transform:p=!1}=h(s).props||{};if(p)throw new Error(`Unknown coordinate: ${s}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:s},u),...l]})}function jv(e,t){return e.filter(n=>n.type===t)}function u1(e){return jv(e,"polar").length>0}function nZ(e){return jv(e,"helix").length>0}function jb(e){return jv(e,"transpose").length%2===1}function rZ(e){return jv(e,"parallel").length>0}function L6(e){return jv(e,"theta").length>0}function iZ(e){return jv(e,"reflect").length>0}function J2(e){return jv(e,"radial").length>0}function oZ(e){return jv(e,"radar").length>0}function aZ(e){return jv(e,"reflectY").length>0}function sZ(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function Fs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var lZ=Fs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),cZ=Fs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),uZ=Fs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fZ=Fs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),hZ=Fs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),dZ=Fs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),pZ=Fs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vZ=Fs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),mZ=Fs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),gZ=Fs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),yZ=Fs("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function zw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vb(){}var f1=.7,Hb=1/f1,Wb="\\s*([+-]?\\d+)\\s*",eE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_Z=/^#([0-9a-f]{3,8})$/,bZ=new RegExp("^rgb\\(".concat(Wb,",").concat(Wb,",").concat(Wb,"\\)$")),xZ=new RegExp("^rgb\\(".concat(Bm,",").concat(Bm,",").concat(Bm,"\\)$")),EZ=new RegExp("^rgba\\(".concat(Wb,",").concat(Wb,",").concat(Wb,",").concat(eE,"\\)$")),SZ=new RegExp("^rgba\\(".concat(Bm,",").concat(Bm,",").concat(Bm,",").concat(eE,"\\)$")),TZ=new RegExp("^hsl\\(".concat(eE,",").concat(Bm,",").concat(Bm,"\\)$")),wZ=new RegExp("^hsla\\(".concat(eE,",").concat(Bm,",").concat(Bm,",").concat(eE,"\\)$")),D6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zw(Vb,vM,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:N6,formatHex:N6,formatHex8:AZ,formatHsl:CZ,formatRgb:B6,toString:B6});function N6(){return this.rgb().formatHex()}function AZ(){return this.rgb().formatHex8()}function CZ(){return V6(this).formatHsl()}function B6(){return this.rgb().formatRgb()}function vM(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_Z.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?F6(t):n===3?new Sd(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bZ.exec(e))?new Sd(t[1],t[2],t[3],1):(t=xZ.exec(e))?new Sd(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=EZ.exec(e))?jw(t[1],t[2],t[3],t[4]):(t=SZ.exec(e))?jw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TZ.exec(e))?j6(t[1],t[2]/100,t[3]/100,1):(t=wZ.exec(e))?j6(t[1],t[2]/100,t[3]/100,t[4]):D6.hasOwnProperty(e)?F6(D6[e]):e==="transparent"?new Sd(NaN,NaN,NaN,0):null}function F6(e){return new Sd(e>>16&255,e>>8&255,e&255,1)}function jw(e,t,n,r){return r<=0&&(e=t=n=NaN),new Sd(e,t,n,r)}function k6(e){return e instanceof Vb||(e=vM(e)),e?(e=e.rgb(),new Sd(e.r,e.g,e.b,e.opacity)):new Sd}function tE(e,t,n,r){return arguments.length===1?k6(e):new Sd(e,t,n,r==null?1:r)}function Sd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zw(Sd,tE,pM(Vb,{brighter:function(t){return t=t==null?Hb:Math.pow(Hb,t),new Sd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?f1:Math.pow(f1,t),new Sd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Sd(h1(this.r),h1(this.g),h1(this.b),Vw(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U6,formatHex:U6,formatHex8:OZ,formatRgb:z6,toString:z6}));function U6(){return"#".concat(d1(this.r)).concat(d1(this.g)).concat(d1(this.b))}function OZ(){return"#".concat(d1(this.r)).concat(d1(this.g)).concat(d1(this.b)).concat(d1((isNaN(this.opacity)?1:this.opacity)*255))}function z6(){var e=Vw(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(h1(this.r),", ").concat(h1(this.g),", ").concat(h1(this.b)).concat(e===1?")":", ".concat(e,")"))}function Vw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function h1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function d1(e){return e=h1(e),(e<16?"0":"")+e.toString(16)}function j6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vv(e,t,n,r)}function V6(e){if(e instanceof Vv)return new Vv(e.h,e.s,e.l,e.opacity);if(e instanceof Vb||(e=vM(e)),!e)return new Vv;if(e instanceof Vv)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,h=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=h<.5?s+i:2-s-i,l*=60):u=h>0&&h<1?0:l,new Vv(l,u,h,e.opacity)}function RZ(e,t,n,r){return arguments.length===1?V6(e):new Vv(e,t,n,r==null?1:r)}function Vv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zw(Vv,RZ,pM(Vb,{brighter:function(t){return t=t==null?Hb:Math.pow(Hb,t),new Vv(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?f1:Math.pow(f1,t),new Vv(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new Sd(mM(t>=240?t-240:t+120,s,i),mM(t,s,i),mM(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new Vv(H6(this.h),Hw(this.s),Hw(this.l),Vw(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=Vw(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(H6(this.h),", ").concat(Hw(this.s)*100,"%, ").concat(Hw(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function H6(e){return e=(e||0)%360,e<0?e+360:e}function Hw(e){return Math.max(0,Math.min(1,e||0))}function mM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function W6(e,t,n,r,i){var s=e*e,l=s*e;return((1-3*e+3*s-l)*t+(4-6*s+3*l)*n+(1+3*e+3*s-3*l)*r+l*i)/6}function MZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],l=r>0?e[r-1]:2*i-s,u=r<t-1?e[r+2]:2*s-i;return W6((n-r/t)*t,l,i,s,u)}}function PZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],l=e[(r+1)%t],u=e[(r+2)%t];return W6((n-r/t)*t,i,s,l,u)}}var gM=function(e){return function(){return e}};function G6(e,t){return function(n){return e+n*t}}function IZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function LZ(e,t){var n=t-e;return n?G6(e,n>180||n<-180?n-360*Math.round(n/360):n):gM(isNaN(e)?t:e)}function DZ(e){return(e=+e)==1?Gb:function(t,n){return n-t?IZ(t,n,e):gM(isNaN(t)?n:t)}}function Gb(e,t){var n=t-e;return n?G6(e,n):gM(isNaN(e)?t:e)}var lpe=function e(t){var n=DZ(t);function r(i,s){var l=n((i=tE(i)).r,(s=tE(s)).r),u=n(i.g,s.g),h=n(i.b,s.b),p=Gb(i.opacity,s.opacity);return function(v){return i.r=l(v),i.g=u(v),i.b=h(v),i.opacity=p(v),i+""}}return r.gamma=e,r}(1);function Z6(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),l,u;for(l=0;l<n;++l)u=tE(t[l]),r[l]=u.r||0,i[l]=u.g||0,s[l]=u.b||0;return r=e(r),i=e(i),s=e(s),u.opacity=1,function(h){return u.r=r(h),u.g=i(h),u.b=s(h),u+""}}}var NZ=Z6(MZ),cpe=Z6(PZ),kc=e=>NZ(e[e.length-1]),X6=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Fs),BZ=kc(X6),$6=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Fs),FZ=kc($6),Y6=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Fs),kZ=kc(Y6),K6=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Fs),UZ=kc(K6),q6=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Fs),zZ=kc(q6),Q6=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Fs),jZ=kc(Q6),J6=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Fs),VZ=kc(J6),eD=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Fs),HZ=kc(eD),tD=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Fs),WZ=kc(tD),nD=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Fs),GZ=kc(nD),rD=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Fs),ZZ=kc(rD),iD=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Fs),XZ=kc(iD),oD=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Fs),$Z=kc(oD),aD=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Fs),YZ=kc(aD),sD=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Fs),KZ=kc(sD),lD=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Fs),qZ=kc(lD),cD=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Fs),QZ=kc(cD),uD=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Fs),JZ=kc(uD),fD=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Fs),eX=kc(fD),hD=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Fs),tX=kc(hD),dD=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Fs),nX=kc(dD),pD=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Fs),rX=kc(pD),vD=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Fs),iX=kc(vD),mD=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Fs),oX=kc(mD),gD=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Fs),aX=kc(gD),yD=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Fs),sX=kc(yD),_D=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Fs),lX=kc(_D);function cX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var uX=Math.PI/180,fX=180/Math.PI,bD=-.14861,yM=1.78277,_M=-.29227,Ww=-.90649,nE=1.97294,xD=nE*Ww,ED=nE*yM,SD=yM*_M-Ww*bD;function hX(e){if(e instanceof p1)return new p1(e.h,e.s,e.l,e.opacity);e instanceof Sd||(e=k6(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(SD*r+xD*t-ED*n)/(SD+xD-ED),s=r-i,l=(nE*(n-i)-_M*s)/Ww,u=Math.sqrt(l*l+s*s)/(nE*i*(1-i)),h=u?Math.atan2(l,s)*fX-120:NaN;return new p1(h<0?h+360:h,u,i,e.opacity)}function Fm(e,t,n,r){return arguments.length===1?hX(e):new p1(e,t,n,r==null?1:r)}function p1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zw(p1,Fm,pM(Vb,{brighter:function(t){return t=t==null?Hb:Math.pow(Hb,t),new p1(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?f1:Math.pow(f1,t),new p1(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*uX,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),s=Math.sin(t);return new Sd(255*(n+r*(bD*i+yM*s)),255*(n+r*(_M*i+Ww*s)),255*(n+r*(nE*i)),this.opacity)}}));function TD(e){return function t(n){n=+n;function r(i,s){var l=e((i=Fm(i)).h,(s=Fm(s)).h),u=Gb(i.s,s.s),h=Gb(i.l,s.l),p=Gb(i.opacity,s.opacity);return function(v){return i.h=l(v),i.s=u(v),i.l=h(Math.pow(v,n)),i.opacity=p(v),i+""}}return r.gamma=t,r}(1)}var upe=TD(LZ),bM=TD(Gb),dX=bM(Fm(300,.5,0),Fm(-240,.5,1)),pX=bM(Fm(-100,.75,.35),Fm(80,1.5,.8)),vX=bM(Fm(260,.75,.35),Fm(80,1.5,.8)),Gw=Fm();function mX(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Gw.h=360*e-100,Gw.s=1.5-1.5*t,Gw.l=.8-.9*t,Gw+""}var Zw=tE(),gX=Math.PI/3,yX=Math.PI*2/3;function _X(e){var t;return e=(.5-e)*Math.PI,Zw.r=255*(t=Math.sin(e))*t,Zw.g=255*(t=Math.sin(e+gX))*t,Zw.b=255*(t=Math.sin(e+yX))*t,Zw+""}function bX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Xw(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var xX=Xw(Fs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),EX=Xw(Fs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),SX=Xw(Fs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),TX=Xw(Fs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function wX(e,t,n,r,i,s){const{guide:l={}}=n,u=NX(e,t,n);if(typeof u!="string")return n;const h=BX(u,e,t,n),p=IX(u,h,n);return Object.assign(Object.assign(Object.assign({},n),kX(u,e,t,n,r)),{domain:p,range:FX(u,e,t,n,p,i,s),expectedDomain:h,guide:l,name:e,type:u})}function AX(e,t){const n={};for(const r of e){const{values:i,name:s}=r,l=t[s];for(const u of i){const{name:h,value:p}=u;n[h]=p.map(v=>l.map(v))}}return n}function CX(e,t){const n=Array.from(e.values()).flatMap(i=>i.channels);Sb(n,i=>i.map(s=>t.get(s.scale.uid)),i=>i.name).filter(([,i])=>i.some(s=>typeof s.getOptions().groupTransform=="function")&&i.every(s=>s.getTicks)).map(i=>i[1]).forEach(i=>{const s=i.map(l=>l.getOptions().groupTransform)[0];s(i)})}function OX(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(e.flatMap(u=>u.channels.map(h=>h.scale)))),l=new Map(s.map(u=>[u.name,u]));for(const u of r){const h=PX(u);for(const p of h){const v=l.get(p),y=((n=u.scale)===null||n===void 0?void 0:n[p])||{},{independent:b=!1}=y;if(v&&!b){const{guide:T}=v,R=typeof T=="boolean"?{}:T;v.guide=ti({},R,u),Object.assign(v,y)}else{const T=Object.assign(Object.assign({},y),{expectedDomain:y.domain,name:p,guide:WR(u,i)});s.push(T)}}}return s}function RX(e){if(!e||!Array.isArray(e))return[Sg,Sg];let t,n;return[s=>{var l;t=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const u=e.filter(([b])=>typeof b=="function"),h=e.filter(([b])=>typeof b!="function"),p=new Map(h);if(s.map=b=>{for(const[T,R]of u)if(T(b))return R;return p.has(b)?p.get(b):t(b)},!n)return s;const v=new Map(h.map(([b,T])=>[T,b])),y=new Map(u.map(([b,T])=>[T,b]));return s.invert=b=>y.has(b)?b:v.has(b)?v.get(b):n(b),s},s=>(t!==null&&(s.map=t),n!==null&&(s.invert=n),s)]}function wD(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const s=n.filter(h=>h.startsWith(i)).map(h=>+(h.replace(i,"")||0)),l=ds(s)+1,u=`${i}${l}`;e[u]=r,r.getOptions().key=u}}return e}function AD(e,t){const[n]=Xc("scale",t),{relations:r}=e,[i]=RX(r),s=n(e);return i(s)}function MX(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));CD(t,"x"),CD(t,"y")}function PX(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>i.includes(s)):[]}function CD(e,t){const n=e.filter(({name:s,facet:l=!0})=>l&&s===t),r=n.flatMap(s=>s.domain),i=n.every(OD)?Cg(r):n.every(RD)?Array.from(new Set(r)):null;if(i!==null)for(const s of n)s.domain=i}function IX(e,t,n){const{ratio:r}=n;return r==null?t:OD({type:e})?LX(t,r,e):RD({type:e})?DX(t,r):t}function LX(e,t,n){const r=e.map(Number),i=new bd({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(s=>new Date(i.map(s))):e.map(s=>i.map(s))}function DX(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function OD(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function RD(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function NX(e,t,n){const{type:r,domain:i,range:s,quantitative:l,ordinal:u}=n;return r!==void 0?r:KX(t)?"identity":typeof s=="string"?"linear":(i||s||[]).length>2?xM(e,u):i!==void 0?LD([i])?xM(e,u):DD(t)?"time":PD(e,s,l):LD(t)?xM(e,u):DD(t)?"time":PD(e,s,l)}function BX(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return ID(GX(n,r),r);case"band":case"ordinal":case"point":return ZX(n);case"quantile":return XX(n);case"sequential":return ID($X(n),r);default:return[]}}function FX(e,t,n,r,i,s,l){const{range:u}=r;if(typeof u=="string")return UX(u);if(u!==void 0)return u;const{rangeMin:h,rangeMax:p}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const v=MD(n,r,i,s,l),[y,b]=YX(t,v);return[h!=null?h:y,p!=null?p:b]}case"band":case"point":{const v=t==="size"?5:0,y=t==="size"?10:1;return[h!=null?h:v,p!=null?p:y]}case"ordinal":return MD(n,r,i,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function kX(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return VX(i,r);case"band":case"point":return HX(e,t,i,r);case"sequential":return jX(r);default:return r}}function MD(e,t,n,r,i){const[s]=Xc("palette",i),{category10:l,category20:u}=r,h=Po(n).length<=l.length?l:u,{palette:p=h,offset:v}=t;if(Array.isArray(p))return p;try{return s({type:p})}catch(y){const b=zX(p,n,v);if(b)return b;throw new Error(`Unknown Component: ${p} `)}}function UX(e){return e.split("-")}function zX(e,t,n=r=>r){if(!e)return null;const r=Om(e),i=Z[`scheme${r}`],s=Z[`interpolate${r}`];if(!i&&!s)return null;if(i){if(!i.some(Array.isArray))return i;const l=i[t.length];if(l)return l}return t.map((l,u)=>s(n(u/t.length)))}function jX(e){const{palette:t="ylGnBu",offset:n}=e,r=Om(t),i=Z[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>i(n(s)):i}}function VX(e,t){const{interpolate:n=N2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function HX(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=WX(e,t,n),{paddingInner:s=i,paddingOuter:l=i}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:i,unknown:NaN})}function WX(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?L6(n)?0:.1:e==="point"?.5:0}function xM(e,t){return t||(qX(e)?"point":"ordinal")}function PD(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function ID(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,s]=e;return[n!=null?n:i,r!=null?r:s]}function GX(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const s of e)for(const l of s)ul(l)&&(r=Math.min(r,+l),i=Math.max(i,+l));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function ZX(e){return Array.from(new Set(e.flat()))}function XX(e){return e.flat().sort()}function $X(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)ul(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function YX(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[Er(t),ui(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function LD(e){return EM(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function DD(e){return EM(e,t=>t instanceof Date)}function KX(e){return EM(e,Cm)}function EM(e,t){for(const n of e)if(n.some(t))return!0;return!1}function qX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function QX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function JX(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&s&&l||["sequential"].includes(t)&&s&&(l||i)||["constant","identity"].includes(t)&&l)}const e$={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},t$={threshold:"threshold",quantize:"quantize",quantile:"quantile"},n$={ordinal:"ordinal",band:"band",point:"point"},r$={constant:"constant"};var Uy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function i$(e,t,n){const{coordinates:r=[],title:i}=t,[,s]=Xc("component",n),l=e.filter(({guide:v})=>v!==null),u=[],h=p$(t,e,n);if(u.push(...h),i){const{props:v}=s("title"),{defaultPosition:y,defaultOrientation:b,defaultOrder:T,defaultSize:R,defaultCrossPadding:M}=v,I=typeof i=="string"?{title:i}:i;u.push(Object.assign({type:"title",position:y,orientation:b,order:T,crossPadding:M[0],defaultSize:R},I))}return c$(l,r).forEach(([v,y])=>{const{props:b}=s(v),{defaultPosition:T,defaultPlane:R="xy",defaultOrientation:M,defaultSize:I,defaultOrder:N,defaultLength:U,defaultPadding:H=[0,0],defaultCrossPadding:X=[0,0]}=b,$=ti({},...y),{guide:Q,field:ce}=$,pe=Array.isArray(Q)?Q:[Q];for(const Re of pe){const[je,Ke]=h$(v,T,M,Re,y,l,r);if(!je&&!Ke)continue;const ft=je==="left"||je==="right",Ye=ft?H[1]:H[0],it=ft?X[1]:X[0],{size:at,order:vt=N,length:Vt=U,padding:At=Ye,crossPadding:Ut=it}=Re;u.push(Object.assign(Object.assign({title:ce},Re),{defaultSize:I,length:Vt,position:je,plane:R,orientation:Ke,padding:At,order:vt,crossPadding:Ut,size:at,type:v,scales:y}))}}),u}function ND(e,t,n,r,i){const[s]=Xc("component",r),{scaleInstances:l,scale:u,bbox:h}=e,p=Uy(e,["scaleInstances","scale","bbox"]),v={bbox:h,library:r};return s(p)({coordinate:t,library:r,markState:i,scales:l,theme:n,value:v,scale:u})}function o$(e){return e.map(t=>{const n=ti(t,t.style);return delete n.style,n})}function fpe(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function BD(e,t){const n=["left","right","bottom","top"];return K_(e,({type:s,position:l,group:u})=>n.includes(l)?u===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):u==="independent"?Symbol("independent"):u:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(t!==void 0){const v=s.filter(M=>M.length!==void 0).map(M=>M.length),y=is(v);if(y>t)return s.forEach(M=>M.group=Symbol("independent")),s;const b=t-y,T=s.length-v.length,R=b/T;s.forEach(M=>{M.length===void 0&&(M.length=R)})}const l=ds(s,v=>v.size),u=ds(s,v=>v.order),h=ds(s,v=>v.crossPadding),p=s[0].position;return{type:"group",size:l,order:u,position:p,children:s,crossPadding:h}})}function a$(e,t){const n=["shape","size","color","opacity"],r=(b,T)=>b==="constant"&&T==="size",i=e.filter(({type:b,name:T})=>typeof b=="string"&&n.includes(T)&&!r(b,T)),s=i.filter(({type:b})=>b==="constant"),l=i.filter(({type:b})=>b!=="constant"),h=K_(l,b=>b.field?b.field:Symbol("independent")).map(([b,T])=>[b,[...T,...s]]).filter(([,b])=>b.some(T=>T.type!=="constant")),p=new Map(h);if(p.size===0)return[];const v=b=>b.sort(([T],[R])=>T.localeCompare(R));return Array.from(p).map(([,b])=>{const R=ro(b).sort((M,I)=>I.length-M.length).map(M=>({combination:M,option:M.map(I=>[I.name,s$(I)])}));for(const{option:M,combination:I}of R)if(!M.every(N=>N[1]==="constant")&&M.every(N=>N[1]==="discrete"||N[1]==="constant"))return["legendCategory",I];for(const[M,I]of ER)for(const{option:N,combination:U}of R)if(I.some(H=>_s(v(H),v(N))))return[M,U];return null}).filter(ul)}function s$(e){const{type:t}=e;return typeof t!="string"?null:t in e$?"continuous":t in n$?"discrete":t in t$?"distribution":t in r$?"constant":null}function l$(e,t){return e.map(n=>{const{name:r}=n;if(nZ(t)||L6(t)||jb(t)&&(u1(t)||J2(t)))return null;if(r.startsWith("x"))return u1(t)?["axisArc",[n]]:J2(t)?["axisLinear",[n]]:[jb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return u1(t)?["axisLinear",[n]]:J2(t)?["axisArc",[n]]:[jb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(oZ(t))return["axisRadar",[n]];if(!u1(t))return["axisY",[n]]}return null}).filter(ul)}function c$(e,t){const n=e.filter(r=>JX(r));return[...a$(n,t),...l$(n,t)]}function SM(e){const t=jv(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:s}=kv(r);return[i,s]}const n=jv(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:s}=My(r);return[i,s]}return[-Math.PI/2,Math.PI/2*3]}function u$(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function f$(e,t,n,r,i){const{name:s}=n[0];if(e==="axisRadar"){const l=r.filter(y=>y.name.startsWith("position")),u=u$(s);if(s===l.slice(-1)[0].name||u===null)return[null,null];const[h,p]=SM(i);return["center",(p-h)/(l.length-1)*u+h]}if(e==="axisY"&&rZ(i))return jb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[l]=SM(i);return["center",l]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:u1(i)?["center",null]:J2(i)?["center",null]:e==="axisX"&&iZ(i)||e==="axisX"&&aZ(i)?["top",null]:t}function h$(e,t,n,r,i,s,l){const[u]=SM(l),h=[r.position||t,u!=null?u:n];return typeof e=="string"&&e.startsWith("axis")?f$(e,h,i,s,l):typeof e=="string"&&e.startsWith("legend")&&u1(l)&&r.position==="center"?["center","vertical"]:h}function d$(e,t,n=[]){return e==="x"?jb(n)?`${t}Y`:`${t}X`:e==="y"?jb(n)?`${t}X`:`${t}Y`:null}function p$(e,t,n){const[,r]=Xc("component",n),{coordinates:i}=e;function s(l,u,h,p){const v=d$(u,l,i);if(!p||!v)return;const{props:y}=r(v),{defaultPosition:b,defaultSize:T,defaultOrder:R,defaultCrossPadding:[M]}=y;return Object.assign(Object.assign({position:b,defaultSize:T,order:R,type:v,crossPadding:M},p),{scales:[h]})}return t.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:u,scrollbar:h,name:p}=l;return[s("slider",p,l,u),s("scrollbar",p,l,h)]}).filter(l=>!!l)}function FD(e,t,n,r,i,s){const{type:l}=e;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const h=l;return(h.startsWith("axis")?_$:h.startsWith("group")?v$:h.startsWith("legendContinuous")?b$:h==="legendCategory"?x$:h.startsWith("slider")?y$:h==="title"?g$:h.startsWith("scrollbar")?m$:()=>{})(e,t,n,r,i,s)}function v$(e,t,n,r,i,s){const{children:l}=e,u=ds(l,p=>p.crossPadding);l.forEach(p=>p.crossPadding=u),l.forEach(p=>FD(p,t,n,r,i,s));const h=ds(l,p=>p.size);e.size=h,l.forEach(p=>p.size=h)}function m$(e,t,n,r,i,s){const{trackSize:l=6}=ti({},i.scrollbar,e);e.size=l}function g$(e,t,n,r,i,s){const l=ti({},i.title,e),{title:u,subtitle:h,spacing:p=0}=l,v=Uy(l,["title","subtitle","spacing"]);if(u){const y=go(v,"title"),b=qw(u,y);e.size=b.height}if(h){const y=go(v,"subtitle"),b=qw(h,y);e.size+=p+b.height}}function y$(e,t,n,r,i,s){const l=()=>{const{slider:v}=i;return ti({},v,e)},{trackSize:u,handleIconSize:h}=l(),p=Math.max(u,h*2.4);e.size=p}function _$(e,t,n,r,i,s){var l;e.transform=e.transform||[{type:"hide"}];const u=r==="left"||r==="right",h=kD(e,r,i),{tickLength:p=0,labelSpacing:v=0,titleSpacing:y=0,labelAutoRotate:b}=h,T=Uy(h,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),R=$w(e,s),M=Yw(T,R),I=p+v;if(M&&M.length){const U=ds(M,X=>X.width),H=ds(M,X=>X.height);if(u)e.size=U+I;else{const{tickFilter:X,labelTransform:$}=e;T$(R,M,t,n,X)&&!$&&b!==!1&&b!==null?(e.labelTransform="rotate(90)",e.size=U+I):(e.labelTransform=(l=e.labelTransform)!==null&&l!==void 0?l:"rotate(0)",e.size=H+I)}}else e.size=p;const N=Kw(T);N&&(u?e.size+=y+N.width:e.size+=y+N.height)}function b$(e,t,n,r,i,s){const u=(()=>{const{legendContinuous:X}=i;return ti({},X,e)})(),{labelSpacing:h=0,titleSpacing:p=0}=u,v=Uy(u,["labelSpacing","titleSpacing"]),y=r==="left"||r==="right",b=go(v,"ribbon"),{size:T}=b,R=go(v,"handleIcon"),{size:M}=R,I=Math.max(T,M*2.4);e.size=I;const N=$w(e,s),U=Yw(v,N);if(U){const X=y?"width":"height",$=ds(U,Q=>Q[X]);e.size+=$+h}const H=Kw(v);H&&(y?e.size=Math.max(e.size,H.width):e.size+=p+H.height)}function x$(e,t,n,r,i,s){const u=(()=>{const{legendCategory:it}=i,{title:at}=e,[vt,Vt]=Array.isArray(at)?[at,void 0]:[void 0,at];return ti({title:vt},it,Object.assign(Object.assign({},e),{title:Vt}))})(),{itemSpacing:h,itemMarkerSize:p,titleSpacing:v,rowPadding:y,colPadding:b,maxCols:T=1/0,maxRows:R=1/0}=u,M=Uy(u,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:I,length:N}=e,U=it=>Math.min(it,R),H=it=>Math.min(it,T),X=r==="left"||r==="right",$=N===void 0?t+(X?0:n[0]+n[1]):N,Q=Kw(M),ce=$w(e,s),pe=Yw(M,ce,"itemLabel"),Re=Math.max(pe[0].height,p)+y,je=(it,at=0)=>p+it+h[0]+at;X?(()=>{let it=-1/0,at=0,vt=1,Vt=0,At=-1/0,Ut=-1/0;const Sn=Q?Q.height:0,Vn=$-Sn;for(const{width:rr}of pe){const or=je(rr,b);it=Math.max(it,or),at+Re>Vn?(vt++,At=Math.max(At,Vt),Ut=Math.max(Ut,at),Vt=1,at=Re):(at+=Re,Vt++)}vt<=1&&(At=Vt,Ut=at),e.size=it*H(vt),e.length=Ut+Sn,ti(e,{cols:H(vt),gridRow:At})})():typeof I=="number"?(()=>{const it=Math.ceil(pe.length/I),at=ds(pe,vt=>je(vt.width))*I;e.size=Re*U(it)-y,e.length=Math.min(at,$)})():(()=>{let it=1,at=0,vt=-1/0;for(const{width:Vt}of pe){const At=je(Vt,b);at+At>$?(vt=Math.max(vt,at),at=At,it++):at+=At}it===1&&(vt=at),e.size=Re*U(it)-y,e.length=vt})(),Q&&(X?e.size=Math.max(e.size,Q.width):e.size+=v+Q.height)}function $w(e,t){const[n]=Xc("scale",t),{scales:r,tickCount:i,tickMethod:s}=e,l=r.find(u=>u.type!=="constant"&&u.type!=="identity");return i!==void 0&&(l.tickCount=i),s!==void 0&&(l.tickMethod=s),n(l)}function Yw(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:s=!0}=e,l=Uy(e,["labelFormatter","tickFilter","label"]);if(!s)return null;const u=E$(t,r,i),h=go(l,n),p=u.map((b,T)=>Object.fromEntries(Object.entries(h).map(([R,M])=>[R,typeof M=="function"?M(b,T):M]))),v=u.map((b,T)=>{const R=p[T];return qw(b,R)});if(!p.some(b=>b.transform)){const b=u.map((T,R)=>R);e.indexBBox=new Map(b.map(T=>[T,[u[T],v[T]]]))}return v}function Kw(e){const t=p=>p===!1||p===null,{title:n}=e,r=Uy(e,["title"]);if(t(n)||n===void 0)return null;const i=go(r,"title"),{direction:s,transform:l}=i,u=Array.isArray(n)?n.join(","):n;return typeof u!="string"?null:qw(u,Object.assign(Object.assign({},i),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function kD(e,t,n){const{title:r}=e,[i,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${w2(t)}`]:u}=n;return ti({title:i},l,u,Object.assign(Object.assign({},e),{title:s}))}function UD(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function E$(e,t,n){const i=UD(e,n).map(l=>typeof l=="number"?Cb(l):l),s=t?typeof t=="string"?$e(t):t:e.getFormatter?e.getFormatter():l=>`${l}`;return i.map(s)}function S$(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function T$(e,t,n,r,i){if(is(t,T=>T.width)>n)return!0;const l=e.clone();l.update({range:[0,n]});const u=UD(e,i),h=u.map(T=>l.map(T)+S$(l,T)),p=u.map((T,R)=>R),v=-r[0],y=n+r[1],b=(T,R)=>{const{width:M}=R;return[T-M/2,T+M/2]};for(let T=0;T<p.length;T++){const R=h[T],[M,I]=b(R,t[T]);if(M<v||I>y)return!0;const N=h[T+1];if(N){const[U]=b(N,t[T+1]);if(I>U)return!0}}return!1}function qw(e,t){const n=w$(e),{filter:r}=t,i=Uy(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function w$(e){return e instanceof qf?e:new mh({style:{text:`${e}`}})}function v0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function A$(e){const t=e.find(({type:i})=>i==="axisX"),n=e.find(({type:i})=>i==="axisY"),r=e.find(({type:i})=>i==="axisZ");t&&n&&r&&(t.plane="xy",n.plane="xy",r.plane="yz",r.origin=[t.bbox.x,t.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=t.bbox.x,r.bbox.y=t.bbox.y,e.push(Object.assign(Object.assign({},t),{plane:"xz",showLabel:!1,showTitle:!1,origin:[t.bbox.x,t.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function C$(e,t,n,r){var i,s;const{width:l,height:u,depth:h,x:p=0,y:v=0,z:y=0,inset:b=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:T=b,insetTop:R=b,insetBottom:M=b,insetRight:I=b,margin:N=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:U=N,marginBottom:H=N,marginTop:X=N,marginRight:$=N,padding:Q=n.padding,paddingBottom:ce=Q,paddingLeft:pe=Q,paddingRight:Re=Q,paddingTop:je=Q}=R$(e,t,n,r),Ke=1/4,ft=(Ji,Wi,wo,Ko,ca)=>{const{marks:Oa}=t;if(Oa.length===0)return[Ko,ca];if(Ji-Ko-ca-Ji*Ke>0)return[Ko,ca];const vs=Ji*(1-Ke);return[Wi==="auto"?vs*Ko/(Ko+ca):Ko,wo==="auto"?vs*ca/(Ko+ca):ca]},Ye=Ji=>Ji==="auto"?20:Ji!=null?Ji:20,it=Ye(je),at=Ye(ce),vt=zD(e,u-it-at,[it+X,at+H],["left","right"],t,n,r),{paddingLeft:Vt,paddingRight:At}=vt,Ut=l-U-$,[Sn,Vn]=ft(Ut,pe,Re,Vt,At),rr=Ut-Sn-Vn,or=zD(e,rr,[Sn+U,Vn+$],["bottom","top"],t,n,r),{paddingTop:Hr,paddingBottom:fi}=or,Qi=u-H-X,[Jr,qr]=ft(Qi,ce,je,fi,Hr),Io=Qi-Jr-qr;return{width:l,height:u,depth:h,insetLeft:T,insetTop:R,insetBottom:M,insetRight:I,innerWidth:rr,innerHeight:Io,paddingLeft:Sn,paddingRight:Vn,paddingTop:qr,paddingBottom:Jr,marginLeft:U,marginBottom:H,marginTop:X,marginRight:$,x:p,y:v,z:y}}function O$(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:u=r,margin:h=16,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:R=T,insetRight:M=T,insetTop:I=T,insetBottom:N=T}=e,U=$=>$==="auto"?20:$,H=n-U(i)-U(s)-p-v-R-M,X=t-U(l)-U(u)-y-b-I-N;return{width:H,height:X}}function R$(e,t,n,r){const{coordinates:i}=t;if(!u1(i)&&!J2(i))return t;const s=e.filter(N=>typeof N.type=="string"&&N.type.startsWith("axis"));if(s.length===0)return t;const l=s.map(N=>{const U=N.type==="axisArc"?"arc":"linear";return kD(N,U,n)}),u=ds(l,N=>{var U;return(U=N.labelSpacing)!==null&&U!==void 0?U:0}),h=s.flatMap((N,U)=>{const H=l[U],X=$w(N,r);return Yw(H,X)}).filter(ul),p=ds(h,N=>N.height)+u,v=s.flatMap((N,U)=>{const H=l[U];return Kw(H)}).filter(N=>N!==null),y=v.length===0?0:ds(v,N=>N.height),{inset:b=p,insetLeft:T=b,insetBottom:R=b,insetTop:M=b+y,insetRight:I=b}=t;return Object.assign(Object.assign({},t),{insetLeft:T,insetBottom:R,insetTop:M,insetRight:I})}function zD(e,t,n,r,i,s,l){const u=Kl(e,R=>R.position),{padding:h=s.padding,paddingLeft:p=h,paddingRight:v=h,paddingBottom:y=h,paddingTop:b=h}=i,T={paddingBottom:y,paddingLeft:p,paddingTop:b,paddingRight:v};for(const R of r){const M=`padding${w2(QL(R))}`,I=u.get(R)||[],N=T[M],U=Re=>{Re.size===void 0&&(Re.size=Re.defaultSize)},H=Re=>{Re.type==="group"?(Re.children.forEach(U),Re.size=ds(Re.children,je=>je.size)):Re.size=Re.defaultSize},X=Re=>{Re.size||(N!=="auto"?H(Re):(FD(Re,t,n,R,s,l),U(Re)))},$=Re=>{Re.type.startsWith("axis")&&Re.labelAutoHide===void 0&&(Re.labelAutoHide=!0)},Q=R==="bottom"||R==="top",ce=v0(I,Re=>Re.order),pe=I.filter(Re=>Re.type.startsWith("axis")&&Re.order==ce);if(pe.length&&(pe[0].crossPadding=0),typeof N=="number")I.forEach(U),I.forEach($);else if(I.length===0)T[M]=0;else{const Re=Q?t+n[0]+n[1]:t,je=BD(I,Re);je.forEach(X);const Ke=je.reduce((ft,{size:Ye,crossPadding:it=12})=>ft+Ye+it,0);T[M]=Ke}}return T}function M$(e,t,n){const r=Kl(e,Q=>`${Q.plane||"xy"}-${Q.position}`),{paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:R,insetLeft:M,insetRight:I,insetTop:N,height:U,width:H,depth:X}=n,$={xy:TM({width:H,height:U,paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:R,insetLeft:M,insetRight:I,insetTop:N}),yz:TM({width:X,height:U,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:X,innerHeight:U,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:TM({width:H,height:X,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:H,innerHeight:X,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[Q,ce]of r.entries()){const[pe,Re]=Q.split("-"),je=$[pe][Re],[Ke,ft]=no(ce,Ye=>typeof Ye.type!="string"?!1:!!(Re==="center"||Ye.type.startsWith("axis")&&["inner","outer"].includes(Re)));Ke.length&&P$(Ke,t,je,Re),ft.length&&z$(ce,t,je)}}function TM({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:s,marginLeft:l,marginTop:u,marginBottom:h,marginRight:p,innerHeight:v,innerWidth:y,insetBottom:b,insetLeft:T,insetRight:R,insetTop:M}){const I=n+l,N=i+u,U=r+p,H=s+h,X=e-l-p,$=[I+T,N+M,y-T-R,v-M-b,"center",null,null];return{top:[I,0,y,N,"vertical",!0,Du,l,X],right:[e-U,N,U,v,"horizontal",!1,Du],bottom:[I,t-H,y,H,"vertical",!1,Du,l,X],left:[0,N,I,v,"horizontal",!0,Du],"top-left":[I,0,y,N,"vertical",!0,Du],"top-right":[I,0,y,N,"vertical",!0,Du],"bottom-left":[I,t-H,y,H,"vertical",!1,Du],"bottom-right":[I,t-H,y,H,"vertical",!1,Du],center:$,inner:$,outer:$}}function P$(e,t,n,r){const[i,s]=no(e,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));I$(i,t,n,r),j$(s,t,n)}function I$(e,t,n,r){r==="center"?bo(t)?U$(e,t,n,r):kl(t)?N$(e,t,n):Bs(t)&&B$(e,t,n,e[0].orientation):r==="inner"?L$(e,t,n):r==="outer"&&D$(e,t,n)}function L$(e,t,n){const[r,i,,s]=n,[l,u]=t.getCenter(),[h]=Y0(t),p=s/2,v=h*p,y=l-v,b=u-v;for(let T=0;T<e.length;T++){const R=e[T];R.bbox={x:r+y,y:i+b,width:v*2,height:v*2}}}function D$(e,t,n){const[r,i,s,l]=n;for(const u of e)u.bbox={x:r,y:i,width:s,height:l}}function N$(e,t,n){const[r,i,s,l]=n;for(const u of e)u.bbox={x:r,y:i,width:s,height:l}}function B$(e,t,n,r){r==="horizontal"?k$(e,t,n):r==="vertical"&&F$(e,t,n)}function F$(e,t,n){const[r,i,,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===0).map(p=>p+r);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:y,y:i,width:b,height:s}}}function k$(e,t,n){const[r,i,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===1).map(p=>p+i);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:r,y,width:s,height:b}}}function U$(e,t,n,r){const[i,s,l,u]=n;for(const h of e)h.bbox={x:i,y:s,width:l,height:u},h.radar={index:e.indexOf(h),count:e.length}}function z$(e,t,n){const[r,i,s,l,u,h,p,v,y]=n,[b,T,R,M,I,N,U,H]=u==="vertical"?["y",i,"x",r,"height",l,"width",s]:["x",r,"y",i,"width",s,"height",l];e.sort((Re,je)=>p==null?void 0:p(Re.order,je.order));const X=Re=>Re==="title"||Re==="group"||Re.startsWith("legend"),$=(Re,je,Ke)=>Ke===void 0?je:X(Re)?Ke:je,Q=(Re,je,Ke)=>Ke===void 0?je:X(Re)?Ke:je,ce=h?T+N:T;for(let Re=0,je=ce;Re<e.length;Re++){const Ke=e[Re],{crossPadding:ft=0,type:Ye}=Ke,{size:it}=Ke;Ke.bbox={[b]:h?je-it-ft:je+ft,[R]:Q(Ye,M,v),[I]:it,[U]:$(Ye,H,y)},je+=(it+ft)*(h?-1:1)}const pe=e.filter(Re=>Re.type==="group");for(const Re of pe){const{bbox:je,children:Ke}=Re,ft=je[U],Ye=ft/Ke.length,it=Ke.reduce((Ut,Sn)=>{var Vn;const rr=(Vn=Sn.layout)===null||Vn===void 0?void 0:Vn.justifyContent;return rr||Ut},"flex-start"),at=Ke.map((Ut,Sn)=>{const{length:Vn=Ye,padding:rr=0}=Ut;return Vn+(Sn===Ke.length-1?0:rr)}),vt=is(at),Vt=ft-vt,At=it==="flex-start"?0:it==="center"?Vt/2:Vt;for(let Ut=0,Sn=je[R]+At;Ut<Ke.length;Ut++){const Vn=Ke[Ut],{padding:rr=0}=Vn,or=Ut===Ke.length-1?0:rr;Vn.bbox={[I]:je[I],[b]:je[b],[R]:Sn,[U]:at[Ut]-or},ti(Vn,{layout:{justifyContent:it}}),Sn+=at[Ut]}}}function j$(e,t,n){if(e.length===0)return;const[r,i,s,l]=n,[u]=Y0(t),h=l/2*u/Math.sqrt(2),p=r+s/2,v=i+l/2;for(let y=0;y<e.length;y++){const b=e[y];b.bbox={x:p-h,y:v-h,width:h*2,height:h*2}}}function km(e,t,n={},r=!1){if(Fv(e)||Array.isArray(e)&&r)return e;const i=go(e,t);return ti(n,i)}function Qw(e,t={}){return Fv(e)||Array.isArray(e)||!jD(e)?e:ti(t,e)}function jD(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function Um(e,t){return typeof e=="object"?go(e,t):e}var V$=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},Zb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function H$(e,t,n){const{encode:r={},scale:i={},transform:s=[]}=t,l=Zb(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},l),{encode:r,scale:i,transform:s})]}function VD(e,t,n){return V$(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[s]=Xc("data",r),l=nY(i),{transform:u=[]}=l,v=[Zb(l,["transform"]),...u].map(T=>s(T,n)),y=yield tw(v)(i),b=i&&!Array.isArray(i)&&!Array.isArray(y)?{value:y}:y;return[Array.isArray(y)?sr(y):[],Object.assign(Object.assign({},t),{data:b})]})}function W$(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let u=0;u<l.length;u++){const h=`${s}${u===0?"":u}`;i[h]=l[u]}else i[s]=l;return[e,Object.assign(Object.assign({},t),{encode:i})]}function G$(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const s=Tn(r,l=>J$(l)?l:{type:eY(i,l),value:l});return[e,Object.assign(Object.assign({},t),{encode:s})]}function Z$(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=Tn(r,(s,l)=>{const{type:u}=s;return u!=="constant"||QX(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function X$(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:s}=n,l=oY(s),u=Tn(r,h=>l(i,h));return[e,Object.assign(Object.assign({},t),{encode:u})]}function $$(e,t,n){const{tooltip:r={}}=t;return Fv(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:Cm(r)&&jD(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function Y$(e,t,n){const{data:r,encode:i,tooltip:s={}}=t;if(Fv(s))return[e,t];const l=y=>{if(!y)return y;if(typeof y=="string")return e.map(b=>({name:y,value:r[b][y]}));if(Cm(y)){const{field:b,channel:T,color:R,name:M=b,valueFormatter:I=Q=>Q}=y,N=typeof I=="string"?$e(I):I,U=T&&i[T],H=U&&i[T].field,X=M||H||T,$=[];for(const Q of e){const ce=b?r[Q][b]:U?i[T].value[Q]:null;$[Q]={name:X,color:R,value:N(ce)}}return $}if(typeof y=="function"){const b=[];for(const T of e){const R=y(r[T],T,r,i);Cm(R)?b[T]=R:b[T]={value:R}}return b}return y},{title:u,items:h=[]}=s,p=Zb(s,["title","items"]),v=Object.assign({title:l(u),items:Array.isArray(h)?h.map(l):[]},p);return[e,Object.assign(Object.assign({},t),{tooltip:v})]}function K$(e,t,n){const{encode:r}=t,i=Zb(t,["encode"]);if(!r)return[e,t];const s=Object.entries(r),l=s.filter(([,h])=>{const{value:p}=h;return Array.isArray(p[0])}).flatMap(([h,p])=>{const v=[[h,new Array(e.length).fill(void 0)]],{value:y}=p,b=Zb(p,["value"]);for(let T=0;T<y.length;T++){const R=y[T];if(Array.isArray(R))for(let M=0;M<R.length;M++){const I=v[M]||[`${h}${M}`,new Array(e).fill(void 0)];I[1][T]=R[M],v[M]=I}}return v.map(([T,R])=>[T,Object.assign({type:"column",value:R},b)])}),u=Object.fromEntries([...s,...l]);return[e,Object.assign(Object.assign({},i),{encode:u})]}function q$(e,t,n){const{axis:r={},legend:i={},slider:s={},scrollbar:l={}}=t,u=(p,v)=>{if(typeof p=="boolean")return p?{}:null;const y=p[v];return y===void 0||y?y:null},h=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return ti(t,{scale:Object.assign(Object.assign({},Object.fromEntries(h.map(p=>{const v=u(l,p);return[p,Object.assign({guide:u(r,p),slider:u(s,p),scrollbar:v},v&&{ratio:v.ratio===void 0?.5:v.ratio})]}))),{color:{guide:u(i,"color")},size:{guide:u(i,"size")},shape:{guide:u(i,"shape")},opacity:{guide:u(i,"opacity")}})}),[e,t]}function Q$(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(ti(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function J$(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return ul(t)}function eY(e,t){return typeof t=="function"?"transform":typeof t=="string"&&tY(e,t)?"field":"constant"}function tY(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function nY(e){if((0,Zl.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=Zb(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var HD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},rY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function iY(e,t,n){return HD(this,void 0,void 0,function*(){const[r,i]=yield aY(e,t,n),{encode:s,scale:l,data:u,tooltip:h}=i;if(Array.isArray(u)===!1)return null;const{channels:p}=t,v=Sb(Object.entries(s).filter(([,b])=>ul(b)),b=>b.map(([T,R])=>Object.assign({name:T},R)),([b])=>{var T;const R=(T=/([^\d]+)\d*$/.exec(b))===null||T===void 0?void 0:T[1],M=p.find(I=>I.name===R);return M!=null&&M.independent?b:R}),y=p.filter(b=>{const{name:T,required:R}=b;if(v.find(([M])=>M===T))return!0;if(R)throw new Error(`Missing encoding for channel: ${T}.`);return!1}).flatMap(b=>{const{name:T,scale:R,scaleKey:M,range:I,quantitative:N,ordinal:U}=b;return v.filter(([X])=>X.startsWith(T)).map(([X,$],Q)=>{const ce=$.some(vt=>vt.visual),pe=$.some(vt=>vt.constant),Re=l[X]||{},{independent:je=!1,key:Ke=M||X,type:ft=pe?"constant":ce?"identity":R}=Re,Ye=rY(Re,["independent","key","type"]),it=ft==="constant",at=it?void 0:I;return{name:X,values:$,scaleKey:je||it?Symbol("independent"):Ke,scale:Object.assign(Object.assign({type:ft,range:at},Ye),{quantitative:N,ordinal:U})}})});return[i,Object.assign(Object.assign({},t),{index:r,channels:y,tooltip:h})]})}function oY(e){const[t]=Xc("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:sY(r)})}function aY(e,t,n){return HD(this,void 0,void 0,function*(){const{library:r}=n,[i]=Xc("transform",r),{preInference:s=[],postInference:l=[]}=t,{transform:u=[]}=e,h=[H$,VD,W$,G$,Z$,X$,K$,Q$,q$,$$,...s.map(i),...u.map(i),...l.map(i),Y$];let p=[],v=e;for(const y of h)[p,v]=yield y(p,v,n);return[p,v]})}function sY(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var Mg=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},zy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wM(e,t,n){var r;return Mg(this,void 0,void 0,function*(){const{library:i}=n,[s]=Xc("composition",i),[l]=Xc("interaction",i),u=new Set(Object.keys(i).map(Ye=>{var it;return(it=/mark\.(.*)/.exec(Ye))===null||it===void 0?void 0:it[1]}).filter(ul)),h=new Set(Object.keys(i).map(Ye=>{var it;return(it=/component\.(.*)/.exec(Ye))===null||it===void 0?void 0:it[1]}).filter(ul)),p=Ye=>{const{type:it}=Ye;if(typeof it=="function"){const{props:at={}}=it,{composite:vt=!0}=at;if(vt)return"mark"}return typeof it!="string"?it:u.has(it)||h.has(it)?"mark":it},v=Ye=>p(Ye)==="mark",y=Ye=>p(Ye)==="standardView",b=Ye=>{const{type:it}=Ye;return typeof it!="string"?!1:!!h.has(it)},T=Ye=>{if(y(Ye))return[Ye];const it=p(Ye);return s({type:it,static:b(Ye)})(Ye)},R=[],M=new Map,I=new Map,N=[e],U=[];for(;N.length;){const Ye=N.shift();if(y(Ye)){const it=I.get(Ye),[at,vt]=it?XD(it,Ye,i):yield GD(Ye,n);M.set(at,Ye),R.push(at);const Vt=vt.flatMap(T).map(At=>I6(At,i));if(N.push(...Vt),Vt.every(y)){const At=yield Promise.all(Vt.map(Ut=>ZD(Ut,n)));MX(At);for(let Ut=0;Ut<Vt.length;Ut++){const Sn=Vt[Ut],Vn=At[Ut];I.set(Sn,Vn)}}}else{const it=v(Ye)?Ye:yield qD(Ye,n),at=T(it);Array.isArray(at)?N.push(...at):typeof at=="function"&&U.push(at())}}n.emitter.emit(_l.BEFORE_PAINT);const H=new Map,X=new Map,$=[];t.selectAll(zm(ha)).data(R,Ye=>Ye.key).join(Ye=>Ye.append("g").attr("className",ha).attr("id",it=>it.key).call(WD).each(function(it,at,vt){CM(it,Pa(vt),$,n),H.set(it,vt)}),Ye=>Ye.call(WD).each(function(it,at,vt){CM(it,Pa(vt),$,n),X.set(it,vt)}),Ye=>Ye.each(function(it,at,vt){const Vt=vt.nameInteraction.values();for(const At of Vt)At.destroy()}).remove());const Q=(Ye,it,at)=>Array.from(Ye.entries()).map(([vt,Vt])=>{const At=at||new Map,Ut=(rr,or=Hr=>Hr)=>At.set(rr,or),Sn=M.get(vt),Vn=cY(Pa(Vt),Sn,n);return{view:vt,container:Vt,options:Sn,setState:Ut,update:(rr,or)=>Mg(this,void 0,void 0,function*(){const fi=T2(Array.from(At.values()))(Sn);return yield Vn(fi,rr,()=>{jo(or)&&it(Ye,or,At)})})}}),ce=(Ye=X,it,at)=>{var vt;const Vt=Q(Ye,ce,at);for(const At of Vt){const{options:Ut,container:Sn}=At,Vn=Sn.nameInteraction;let rr=Jw(Ut);it&&(rr=rr.filter(or=>it.includes(or[0])));for(const or of rr){const[Hr,fi]=or,Qi=Vn.get(Hr);if(Qi&&((vt=Qi.destroy)===null||vt===void 0||vt.call(Qi)),fi){const qr=AM(At.view,Hr,fi,l)(At,Vt,n.emitter);Vn.set(Hr,{destroy:qr})}}}},pe=Q(H,ce);for(const Ye of pe){const{options:it}=Ye,at=new Map;Ye.container.nameInteraction=at;for(const vt of Jw(it)){const[Vt,At]=vt;if(At){const Sn=AM(Ye.view,Vt,At,l)(Ye,pe,n.emitter);at.set(Vt,{destroy:Sn})}}}ce();const{width:Re,height:je}=e,Ke=[];for(const Ye of U){const it=new Promise(at=>Mg(this,void 0,void 0,function*(){for(const vt of Ye){const Vt=Object.assign({width:Re,height:je},vt);yield wM(Vt,t,n)}at()}));Ke.push(it)}n.views=R,(r=n.animations)===null||r===void 0||r.forEach(Ye=>Ye==null?void 0:Ye.cancel()),n.animations=$,n.emitter.emit(_l.AFTER_PAINT);const ft=$.filter(ul).map(TY).map(Ye=>Ye.finished);return Promise.all([...ft,...Ke])})}function WD(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function lY(e){const[,t]=Xc("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(s){return[r,i.type]}}}function cY(e,t,n){const{library:r}=n,i=lY(r),s=h=>h[1]&&h[1].props&&h[1].props.reapplyWhenUpdate,u=Jw(t).map(i).filter(s).map(h=>h[0]);return(h,p,v)=>Mg(this,void 0,void 0,function*(){const y=[],[b,T]=yield GD(h,n);CM(b,e,y,n);for(const R of u.filter(M=>M!==p))uY(R,e,h,b,n);for(const R of T)wM(R,e,n);return v(),{options:h,view:b}})}function uY(e,t,n,r,i){var s;const{library:l}=i,[u]=Xc("interaction",l),p=t.node().nameInteraction,v=Jw(n).find(([M])=>M===e),y=p.get(e);if(!y||((s=y.destroy)===null||s===void 0||s.call(y),!v[1]))return;const b=AM(r,e,v[1],u),T={options:n,view:r,container:t.node(),update:M=>Promise.resolve(M)},R=b(T,[],i.emitter);p.set(e,{destroy:R})}function GD(e,t){return Mg(this,void 0,void 0,function*(){const{library:n}=t,r=yield hY(e,t),i=fY(r);e.interaction=i.interaction,e.coordinate=i.coordinate,e.marks=[...i.marks,...i.components];const s=I6(i,n),l=yield ZD(s,t);return XD(l,s,n)})}function fY(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,s=zy(e,["coordinate","interaction","style","marks"]),l=i.map(b=>b.coordinate||{}),u=i.map(b=>b.interaction||{}),h=i.map(b=>b.viewStyle||{}),p=[...l,t].reduceRight((b,T)=>ti(b,T),{}),v=[n,...u].reduce((b,T)=>ti(b,T),{}),y=[...h,r].reduce((b,T)=>ti(b,T),{});return Object.assign(Object.assign({},s),{marks:i,coordinate:p,interaction:v,style:y})}function hY(e,t){return Mg(this,void 0,void 0,function*(){const{library:n}=t,[r,i]=Xc("mark",n),s=new Set(Object.keys(n).map(T=>{var R;return(R=/component\.(.*)/.exec(T))===null||R===void 0?void 0:R[1]}).filter(ul)),{marks:l}=e,u=[],h=[],p=[...l],{width:v,height:y}=O$(e),b={options:e,width:v,height:y};for(;p.length;){const[T]=p.splice(0,1),R=yield qD(T,t),{type:M=Oy("G2Mark type is required."),key:I}=R;if(s.has(M))h.push(R);else{const{props:N={}}=i(M),{composite:U=!0}=N;if(!U)u.push(R);else{const{data:H}=R,X=Object.assign(Object.assign({},R),{data:H&&(Array.isArray(H)?H:H.value)}),$=yield r(X,b),Q=Array.isArray($)?$:[$];p.unshift(...Q.map((ce,pe)=>Object.assign(Object.assign({},ce),{key:`${I}-${pe}`})))}}}return Object.assign(Object.assign({},e),{marks:u,components:h})})}function ZD(e,t){return Mg(this,void 0,void 0,function*(){const{library:n}=t,[r]=Xc("theme",n),[,i]=Xc("mark",n),{theme:s,marks:l,coordinates:u=[]}=e,h=r(KD(s)),p=new Map;for(const y of l){const{type:b}=y,{props:T={}}=i(b),R=yield iY(y,T,t);if(R){const[M,I]=R;p.set(M,I)}}const v=Kl(Array.from(p.values()).flatMap(y=>y.channels),({scaleKey:y})=>y);for(const y of v.values()){const b=y.reduce((X,{scale:$})=>ti(X,$),{}),{scaleKey:T}=y[0],{values:R}=y[0],M=Array.from(new Set(R.map(X=>X.field).filter(ul))),I=ti({guide:{title:M.length===0?void 0:M},field:M[0]},b),{name:N}=y[0],U=y.flatMap(({values:X})=>X.map($=>$.value)),H=Object.assign(Object.assign({},wX(N,U,I,u,h,n)),{uid:Symbol("scale"),key:T});y.forEach(X=>X.scale=H)}return p})}function AM(e,t,n,r){const i=e.theme,s=typeof t=="string"?i[t]||{}:{};return r(ti(s,Object.assign({type:t},n)))}function XD(e,t,n){var r;const[i]=Xc("mark",n),[s]=Xc("theme",n),[l]=Xc("labelTransform",n),{key:u,frame:h=!1,theme:p,clip:v,style:y={},labelTransform:b=[]}=t,T=s(KD(p)),R=Array.from(e.values()),M=OX(R,t),I=o$(i$(OY(Array.from(M),R,e),t,n)),N=C$(I,t,T,n),U=tZ(N,t,n),H=h?ti({mainLineWidth:1,mainStroke:"#000"},y):y;M$(BD(I),U,N),A$(I);const X=new Map(Array.from(e.values()).flatMap(pe=>{const{channels:Re}=pe;return Re.map(({scale:je})=>[je.uid,AD(je,n)])}));CX(e,X);const $={};for(const pe of I){const{scales:Re=[]}=pe,je=[];for(const Ke of Re){const{name:ft,uid:Ye}=Ke,it=(r=X.get(Ye))!==null&&r!==void 0?r:AD(Ke,n);je.push(it),ft==="y"&&it.update(Object.assign(Object.assign({},it.getOptions()),{xScale:$.x})),wD($,{[ft]:it})}pe.scaleInstances=je}const Q=[];for(const[pe,Re]of e.entries()){const{children:je,dataDomain:Ke,modifier:ft,key:Ye}=pe,{index:it,channels:at,tooltip:vt}=Re,Vt=Object.fromEntries(at.map(({name:Ji,scale:Wi})=>[Ji,Wi])),At=Tn(Vt,({uid:Ji})=>X.get(Ji));wD($,At);const Ut=AX(at,At),Sn=i(pe),[Vn,rr,or]=vY(Sn(it,At,Ut,U)),Hr=Ke||Vn.length,fi=ft?ft(rr,Hr,N):[],Qi=Ji=>{var Wi,wo;return(wo=(Wi=vt.title)===null||Wi===void 0?void 0:Wi[Ji])===null||wo===void 0?void 0:wo.value},Jr=Ji=>vt.items.map(Wi=>Wi[Ji]),qr=Vn.map((Ji,Wi)=>{const wo=Object.assign({points:rr[Wi],transform:fi[Wi],index:Ji,markKey:Ye,viewKey:u},vt&&{title:Qi(Ji),items:Jr(Ji)});for(const[Ko,ca]of Object.entries(Ut))wo[Ko]=ca[Ji],or&&(wo[`series${Om(Ko)}`]=or[Wi].map(Oa=>ca[Oa]));return or&&(wo.seriesIndex=or[Wi]),or&&vt&&(wo.seriesItems=or[Wi].map(Ko=>Jr(Ko)),wo.seriesTitle=or[Wi].map(Ko=>Qi(Ko))),wo});Re.data=qr,Re.index=Vn;const Io=je==null?void 0:je(qr,At,N);Q.push(...Io||[])}return[{layout:N,theme:T,coordinate:U,markState:e,key:u,clip:v,scale:$,style:H,components:I,labelTransform:T2(b.map(l))},Q]}function CM(e,t,n,r){return Mg(this,void 0,void 0,function*(){const{library:i}=r,{components:s,theme:l,layout:u,markState:h,coordinate:p,key:v,style:y,clip:b,scale:T}=e,{x:R,y:M,width:I,height:N}=u,U=zy(u,["x","y","width","height"]),H=["view","plot","main","content"],X=H.map((At,Ut)=>Ut),$=["a","margin","padding","inset"],Q=H.map(At=>nw(Object.assign({},l.view,y),At)),ce=$.map(At=>go(U,At)),pe=At=>At.style("x",Ut=>Ye[Ut].x).style("y",Ut=>Ye[Ut].y).style("width",Ut=>Ye[Ut].width).style("height",Ut=>Ye[Ut].height).each(function(Ut,Sn,Vn){RY(Pa(Vn),Q[Ut])});let Re=0,je=0,Ke=I,ft=N;const Ye=X.map(At=>{const Ut=ce[At],{left:Sn=0,top:Vn=0,bottom:rr=0,right:or=0}=Ut;return Re+=Sn,je+=Vn,Ke-=Sn+or,ft-=Vn+rr,{x:Re,y:je,width:Ke,height:ft}});t.selectAll(zm(Hc)).data(X.filter(At=>ul(Q[At])),At=>H[At]).join(At=>At.append("rect").attr("className",Hc).style("zIndex",-2).call(pe),At=>At.call(pe),At=>At.remove());const it=_Y(h),at=it?{duration:it[1]}:!1;for(const[,At]of K_(s,Ut=>`${Ut.type}-${Ut.position}`))At.forEach((Ut,Sn)=>Ut.index=Sn);const vt=t.selectAll(zm(gs)).data(s,At=>`${At.type}-${At.position}-${At.index}`).join(At=>At.append("g").style("zIndex",({zIndex:Ut})=>Ut||-1).attr("className",gs).append(Ut=>ND(ti({animate:at,scale:T},Ut),p,l,i,h)),At=>At.transition(function(Ut,Sn,Vn){const{preserve:rr=!1}=Ut;if(rr)return;const or=ND(ti({animate:at,scale:T},Ut),p,l,i,h),{attributes:Hr}=or,[fi]=Vn.childNodes;return fi.update(Hr,!1)})).transitions();n.push(...vt.flat().filter(ul));const Vt=t.selectAll(zm(Jo)).data([u],()=>v).join(At=>At.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Jo).call(QD).call(eN,Array.from(h.keys())).call(tN,b),At=>At.call(eN,Array.from(h.keys())).call(Ut=>it?CY(Ut,it):QD(Ut)).call(tN,b)).transitions();n.push(...Vt.flat());for(const[At,Ut]of h.entries()){const{data:Sn}=Ut,{key:Vn,class:rr,type:or}=At,Hr=t.select(`#${Vn}`),fi=EY(At,Ut,e,r),Qi=SY(At,Ut,e,i),Jr=wY(At,Ut,e,i),qr=AY(At,Ut,e,i),Io=bY(t,Hr,rr,"element"),Ji=Hr.selectAll(zm(va)).selectFacetAll(Io).data(Sn,Wi=>Wi.key,Wi=>Wi.groupKey).join(Wi=>Wi.append(fi).attr("className",va).attr("markType",or).transition(function(wo,Ko,ca){return Qi(wo,[ca])}),Wi=>Wi.call(wo=>{const Ko=wo.parent(),ca=gR(Oa=>{const[Zs,Ta]=Oa.getBounds().min;return[Zs,Ta]});wo.transition(function(Oa,Zs,Ta){xY(Ta,Ko,ca);const vs=fi(Oa,Zs),Ml=Jr(Oa,[Ta],[vs]);return Ml!==null||(Ta.nodeName===vs.nodeName&&vs.nodeName!=="g"?Tb(Ta,vs):(Ta.parentNode.replaceChild(vs,Ta),vs.className=va,vs.markType=or,vs.__data__=Ta.__data__)),Ml}).attr("markType",or).attr("className",va)}),Wi=>Wi.each(function(wo,Ko,ca){ca.__removed__=!0}).transition(function(wo,Ko,ca){return qr(wo,[ca])}).remove(),Wi=>Wi.append(fi).attr("className",va).attr("markType",or).transition(function(wo,Ko,ca){const{__fromElements__:Oa}=ca,Zs=Jr(wo,Oa,[ca]);return new Iu(Oa,null,ca.parentNode).transition(Zs).remove(),Zs}),Wi=>Wi.transition(function(wo,Ko,ca){const Zs=new Iu([],ca.__toData__,ca.parentNode).append(fi).attr("className",va).attr("markType",or).nodes();return Jr(wo,[ca],Zs)}).remove()).transitions();n.push(...Ji.flat())}dY(e,t,n,i,r)})}function dY(e,t,n,r,i){const[s]=Xc("labelTransform",r),{markState:l,labelTransform:u}=e,h=t.select(zm(so)).node(),p=new Map,v=new Map,y=Array.from(l.entries()).flatMap(([I,N])=>{const{labels:U=[],key:H}=I,X=yY(I,N,e,r,i),$=t.select(`#${H}`).selectAll(zm(va)).nodes().filter(Q=>!Q.__removed__);return U.flatMap((Q,ce)=>{const{transform:pe=[]}=Q,Re=zy(Q,["transform"]);return $.flatMap(je=>{const Ke=pY(Re,ce,je);return Ke.forEach(ft=>{p.set(ft,X),v.set(ft,Q)}),Ke})})}),b=Pa(h).selectAll(zm(Sl)).data(y,I=>I.key).join(I=>I.append(N=>p.get(N)(N)).attr("className",Sl),I=>I.each(function(N,U,H){const $=p.get(N)(N);Tb(H,$)}),I=>I.remove()).nodes(),T=Kl(b,I=>v.get(I.__data__)),{coordinate:R}=e,M={canvas:i.canvas,coordinate:R};for(const[I,N]of T){const{transform:U=[]}=I;T2(U.map(s))(N,M)}u&&u(b,M)}function pY(e,t,n){const{seriesIndex:r,seriesKey:i,points:s,key:l,index:u}=n.__data__,h=gY(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${l}-${t}`,bounds:h,index:u,points:s,dependentElement:n})];const p=mY(e),v=r.map((y,b)=>Object.assign(Object.assign({},e),{key:`${i[b]}-${t}`,bounds:[s[b]],index:y,points:s,dependentElement:n}));return p?p(v):v}function vY([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let s=0;s<e.length;s++){const l=e[s],u=t[s];u.every(([h,p])=>ul(h)&&ul(p))&&(r.push(l),i.push(u))}return[r,i]}function mY(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function gY(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(l=>{const u=l.effect.getKeyframes();t.attr(u[u.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:s}=r;return[i,s]}function yY(e,t,n,r,i){const[s]=Xc("shape",r),{data:l,encode:u}=e,{data:h,defaultLabelShape:p}=t,v=h.map(M=>M.points),y=Tn(u,M=>M.value),{theme:b,coordinate:T}=n,R=Object.assign(Object.assign({},i),{document:M6(i),theme:b,coordinate:T});return M=>{const{index:I,points:N}=M,U=l[I],{formatter:H=Vt=>`${Vt}`,transform:X,style:$,render:Q}=M,ce=zy(M,["formatter","transform","style","render"]),pe=Tn(Object.assign(Object.assign({},ce),$),Vt=>$D(Vt,U,I,l,{channel:y})),{shape:Re=p,text:je}=pe,Ke=zy(pe,["shape","text"]),ft=typeof H=="string"?$e(H):H,Ye=Object.assign(Object.assign({},Ke),{text:ft(je,U,I,l),datum:U}),it=Object.assign({type:`label.${Re}`,render:Q},Ke),at=s(it,R),vt=YD(b,"label",Re,"label");return at(N,Ye,vt,v)}}function $D(e,t,n,r,i){return typeof e=="function"?e(t,n,r,i):typeof e!="string"?e:Cm(t)&&t[e]!==void 0?t[e]:e}function _Y(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:s={}}=r,{data:l}=i,{enter:u={},update:h={},exit:p={}}=s,{type:v,duration:y=300,delay:b=0}=h,{type:T,duration:R=300,delay:M=0}=u,{type:I,duration:N=300,delay:U=0}=p;for(const H of l){const{updateType:X=v,updateDuration:$=y,updateDelay:Q=b,enterType:ce=T,enterDuration:pe=R,enterDelay:Re=M,exitDuration:je=N,exitDelay:Ke=U,exitType:ft=I}=H;(X===void 0||X)&&(t=Math.max(t,$+Q),n=Math.min(n,Q)),(ft===void 0||ft)&&(t=Math.max(t,je+Ke),n=Math.min(n,Ke)),(ce===void 0||ce)&&(t=Math.max(t,pe+Re),n=Math.min(n,Re))}}return t===-1/0?null:[n,t-n]}function bY(e,t,n,r){return e.node().parentElement.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==t.node()).flatMap(s=>s.getElementsByClassName(r))}function xY(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[s,l]=n(r),[u,h]=n(i),p=`translate(${s-u}, ${l-h})`;yR(e,p),t.append(e)}function EY(e,t,n,r){const{library:i}=r,[s]=Xc("shape",i),{data:l,encode:u}=e,{defaultShape:h,data:p,shape:v}=t,y=Tn(u,U=>U.value),b=p.map(U=>U.points),{theme:T,coordinate:R}=n,{type:M,style:I={}}=e,N=Object.assign(Object.assign({},r),{document:M6(r),coordinate:R,theme:T});return U=>{const{shape:H=h}=I,{shape:X=H,points:$,seriesIndex:Q,index:ce}=U,pe=zy(U,["shape","points","seriesIndex","index"]),Re=Object.assign(Object.assign({},pe),{index:ce}),je=Q?Q.map(at=>l[at]):l[ce],Ke=Q||ce,ft=Tn(I,at=>$D(at,je,Ke,l,{channel:y})),Ye=v[X]?v[X](ft,N):s(Object.assign(Object.assign({},ft),{type:JD(e,X)}),N),it=YD(T,M,X,h);return Ye($,Re,it,b)}}function YD(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,s=e[t]||{},l=s[n]||s[r];return Object.assign({color:i},l)}function OM(e,t,n,r,i){var s,l;const[,u]=Xc("shape",i),[h]=Xc("animation",i),{defaultShape:p,shape:v}=n,{theme:y,coordinate:b}=r,R=`default${Om(e)}Animation`,{[R]:M}=((s=v[p])===null||s===void 0?void 0:s.props)||u(JD(t,p)).props,{[e]:I={}}=y,N=((l=t.animate)===null||l===void 0?void 0:l[e])||{},U={coordinate:b};return(H,X,$)=>{const{[`${e}Type`]:Q,[`${e}Delay`]:ce,[`${e}Duration`]:pe,[`${e}Easing`]:Re}=H,je=Object.assign({type:Q||M},N);if(!je.type)return null;const Ye=h(je,U)(X,$,ti(I,{delay:ce,duration:pe,easing:Re}));return Array.isArray(Ye)?Ye:[Ye]}}function SY(e,t,n,r){return OM("enter",e,t,n,r)}function TY(e){return e.finished.then(()=>{e.cancel()}),e}function wY(e,t,n,r){return OM("update",e,t,n,r)}function AY(e,t,n,r){return OM("exit",e,t,n,r)}function KD(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=zy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function Jw(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(ti(t,n)).reverse()}function qD(e,t){return Mg(this,void 0,void 0,function*(){const{data:n}=e,r=zy(e,["data"]);if(n==null)return e;const[,{data:i}]=yield VD([],{data:n},t);return Object.assign({data:i},r)})}function QD(e){e.style("transform",t=>`translate(${t.paddingLeft+t.marginLeft}, ${t.paddingTop+t.marginTop})`).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function CY(e,t){const[n,r]=t;e.transition(function(i,s,l){const{transform:u,width:h,height:p}=l.style,{paddingLeft:v,paddingTop:y,innerWidth:b,innerHeight:T,marginLeft:R,marginTop:M}=i,I=[{transform:u,width:h,height:p},{transform:`translate(${v+R}, ${y+M})`,width:b,height:T}];return l.animate(I,{delay:n,duration:r,fill:"both"})})}function JD(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function eN(e,t){const n=s=>s.class!==void 0?`${s.class}`:"";e.nodes().length===0||(e.selectAll(zm(Na)).data(t,s=>s.key).join(s=>s.append("g").attr("className",Na).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),s=>s.remove()),e.select(zm(so)).node())||e.append("g").attr("className",so).style("zIndex",0)}function zm(...e){return e.map(t=>`.${t}`).join("")}function tN(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:s,marginTop:l,innerWidth:u,innerHeight:h}=n;return new md({style:{x:i+s,y:r+l,width:u,height:h}})})}function OY(e,t,n){var r;for(const[p]of n.entries())if(p.type==="cell")return e.filter(v=>v.name!=="shape");if(t.length!==1||e.some(p=>p.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},h={field:((r=e.find(p=>p.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[i]]};return[...e,h]}function RY(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function nN(e){const t=ti({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const s=i.shift();if(s.key===void 0){const u=n.get(s),h=r.get(s),p=u===null?"0":`${u.key}-${h}`;s.key=p}const{children:l=[]}=s;if(Array.isArray(l))for(let u=0;u<l.length;u++){const h=ti({},l[u]);l[u]=h,n.set(h,s),r.set(h,u),i.push(h)}}return t}function MY(e,t){const n=new YT;return n.registerPlugin(new $_),new xT({width:e,height:t,container:document.createElement("div"),renderer:n})}function PY(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:s=480,depth:l=0}=e,u=nN(e),{canvas:h=MY(i,s),emitter:p=new ko,library:v}=t;t.canvas=h,t.emitter=p;const{width:y,height:b}=h.getConfig();(y!==i||b!==s)&&h.resize(i,s),p.emit(_l.BEFORE_RENDER);const T=Pa(h.document.documentElement);return h.ready.then(()=>wM(Object.assign(Object.assign({},u),{width:i,height:s,depth:l}),T,t)).then(()=>{if(l){const[R,M]=h.document.documentElement.getPosition();h.document.documentElement.setPosition(R,M,-l/2)}h.requestAnimationFrame(()=>{p.emit(_l.AFTER_RENDER),n==null||n()})}).catch(R=>{r==null||r(R)}),LY(h.getConfig().container)}function hpe(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:s=640,height:l=480}=e,u=nN(e),{group:h=new Group,emitter:p=new EventEmitter,library:v}=t;h!=null&&h.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const y=select(h);return t.group=h,t.emitter=p,t.canvas=t.canvas||((i=h==null?void 0:h.ownerDocument)===null||i===void 0?void 0:i.defaultView),p.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},u),{width:s,height:l}),y,t).then(()=>{var b;(b=t.canvas)===null||b===void 0||b.requestAnimationFrame(()=>{p.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(b=>{r==null||r(b)}),h}function rN(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(IY(r),n?r.destroy():r.destroyChildren()),i.off()}function IY(e){const t=e.getRoot().querySelectorAll(`.${ha}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function LY(e){return typeof e=="string"?document.getElementById(e):e}const Xb=e=>e?parseInt(e):0;function DY(e){const t=getComputedStyle(e),n=e.clientWidth||Xb(t.width),r=e.clientHeight||Xb(t.height),i=Xb(t.paddingLeft)+Xb(t.paddingRight),s=Xb(t.paddingTop)+Xb(t.paddingBottom);return{width:n-i,height:r-s}}function dpe(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:u=r,margin:h=0,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:R=T,insetRight:M=T,insetTop:I=T,insetBottom:N=T}=e,U=$=>$==="auto"?20:$,H=n-U(i)-U(s)-p-v-R-M,X=t-U(l)-U(u)-y-b-I-N;return{width:H,height:X}}function RM(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const s of i)n.push(s)}}class MM{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return RM(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return RM(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return RM(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var iN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const PM=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],oN="__remove__",aN="__callback__",sN=1,lN=1;function NY(e){if(e===void 0){const t=document.createElement("div");return t[oN]=!0,t}return typeof e=="string"?document.getElementById(e):e}function BY(e){const t=e.parentNode;t&&t.removeChild(e)}function FY(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of PM)t.attr(n,e.attr(n));return t}function cN(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function IM(e,t){const{width:n,height:r,autoFit:i,depth:s=0}=e;let l=640,u=480;if(i){const{width:h,height:p}=DY(t);l=h||l,u=p||u}return l=n||l,u=r||u,{width:Math.max((0,Zl.Z)(l)?l:sN,sN),height:Math.max((0,Zl.Z)(u)?u:lN,lN),depth:s}}function kY(e){const t=FY(e),n=[t],r=new Map;for(r.set(t,cN(t));n.length;){const i=n.pop(),s=r.get(i),{children:l=[]}=i;for(const u of l)if(u.type===aN)s.children=u.value;else{const h=cN(u),{children:p=[]}=s;p.push(h),n.push(u),r.set(u,h),s.children=p}}return r.get(t)}function UY(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function zY(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function jY(e,t,n,r,i){const{type:s}=e,{type:l=n||s}=t;if(zY(l,i)){for(const u of PM)e.attr(u)!==void 0&&t[u]===void 0&&(t[u]=e.attr(u));return t}if(UY(l,r)){const u={type:"view"},h=Object.assign({},t);for(const p of PM)h[p]!==void 0&&(u[p]=h[p],delete h[p]);return Object.assign(Object.assign({},u),{children:[h]})}return t}function VY(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function HY(e,t,n){if(typeof e=="function"){const h=new MM;return h.value=e,h.type=aN,h}const{type:r,children:i}=e,s=iN(e,["type","children"]),l=VY(r,t,n),u=new l;return u.value=s,u.type=r,u}function WY(e,t){const{type:n,children:r}=t,i=iN(t,["type","children"]);e.type===n||n===void 0?iw(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function GY(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[s,l]=i.shift(),u=HY(l,n,r);Array.isArray(s.children)&&s.push(u);const{children:h}=l;if(Array.isArray(h))for(const p of h)i.push([u,p]);else typeof h=="function"&&i.push([u,h])}}function ZY(e,t,n,r,i){const s=jY(e,t,n,r,i),l=[[null,e,s]];for(;l.length;){const[u,h,p]=l.shift();if(!h)GY(u,p,r,i);else if(!p)h.remove();else{WY(h,p);const{children:v}=p,{children:y}=h;if(Array.isArray(v)&&Array.isArray(y)){const b=Math.max(v.length,y.length);for(let T=0;T<b;T++){const R=v[T],M=y[T];l.push([h,M,R])}}else typeof v=="function"&&l.push([h,null,v])}}}function XY(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function $Y(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function YY(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function KY(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:i,this.attr(n,s)}}function qY(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(Cm(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:s=[]}=i;return s.push(r),i.items=s,this.attr(t,i)}}function QY(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function JY(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function eA(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?$Y(t,n,r):i==="array"?YY(t,n,r):i==="object"?KY(t,n,r):i==="node"?QY(t,n,r):i==="container"?JY(t,n,r):i==="mix"&&qY(t,n,r)}return t}}function uN(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const fN={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},eK=Object.assign(Object.assign({},fN),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),tK=Object.assign(Object.assign({},fN),{labelTransform:{type:"array"}});var nK=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let tA=class extends MM{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&Bw(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&cM(t)}};tA=nK([eA(tK)],tA);var rK=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let LM=class extends MM{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};LM=rK([eA(eK)],LM);var iK=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},oK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const aK="G2_CHART_KEY";class sK extends tA{constructor(t){const{container:n,canvas:r,renderer:i,plugins:s,lib:l,createCanvas:u}=t,h=oK(t,["container","canvas","renderer","plugins","lib","createCanvas"]);super(h,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=KT(()=>{this.forceFit()},300),this._renderer=i||new YT,this._plugins=s||[],this._container=NY(n),this._emitter=new ko,this._context={library:Object.assign(Object.assign({},l),Gl),emitter:this._emitter,canvas:r,createCanvas:u},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((s,l)=>PY(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,i]=XY();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return kY(this);const{type:n}=t;return n&&(this._previousDefinedType=n),ZY(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(_l.BEFORE_CLEAR),this._reset(),rN(t,this._context,!1),this.emit(_l.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(_l.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),rN(t,this._context,!0),this._container[oN]&&BY(this._container),this.emit(_l.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=IM(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(_l.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(_l.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(_l.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(_l.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class u extends LM{constructor(){super({},l)}}this._marks[l]=u,this[l]=function(h){const p=this.append(u);return l==="mark"&&(p.type=h),p}}const i=["composition.view",...Object.keys(t).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(i.map(s=>{const l=s.split(".").pop();let u=class extends tA{constructor(){super({},l)}};return u=iK([eA(uN(this._marks))],u),[l,u]}));for(const s of Object.values(this._compositions))eA(uN(this._compositions))(s);for(const s of i){const l=s.split(".").pop();this[l]=function(){const u=this._compositions[l];return this.type=null,this.append(u)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=aK}=t,{width:r,height:i,depth:s}=IM(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:s})}_createCanvas(){const{width:t,height:n}=IM(this.options(),this._container);this._plugins.push(new $_),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new xT({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function lK(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}var cK=Object.prototype.hasOwnProperty,DM=function(e,t){if(e===null||!Bv(e))return{};var n={};return HR(t,function(r){cK.call(e,r)&&(n[r]=e[r])}),n};function hN(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function rE(e,t,n,r,i){for(var s=e.children,l,u=-1,h=s.length,p=e.value&&(r-t)/e.value;++u<h;)l=s[u],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*p}function uK(){var e=1,t=1,n=0,r=!1;function i(l){var u=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/u,l.eachBefore(s(t,u)),r&&l.eachBefore(hN),l}function s(l,u){return function(h){h.children&&rE(h,h.x0,l*(h.depth+1)/u,h.x1,l*(h.depth+2)/u);var p=h.x0,v=h.y0,y=h.x1-n,b=h.y1-n;y<p&&(p=y=(p+y)/2),b<v&&(v=b=(v+b)/2),h.x0=p,h.y0=v,h.x1=y,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var fK=D(9783);function hK(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function dK(){return this.eachAfter(hK)}var NM=D(64599);function pK(e,t){var n=-1,r=NM(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;e.call(t,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function vK(e,t){for(var n=this,r=[n],i,s,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function mK(e,t){for(var n=this,r=[n],i=[],s,l,u,h=-1;n=r.pop();)if(i.push(n),s=n.children)for(l=0,u=s.length;l<u;++l)r.push(s[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function gK(e,t){var n=-1,r=NM(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(t,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function yK(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function _K(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function bK(e){for(var t=this,n=xK(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function xK(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function EK(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function SK(){return Array.from(this)}function TK(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function wK(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var dN=D(15009),AK=dN().mark(pN);function pN(){var e,t,n,r,i,s;return dN().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){u.next=8;break}return u.next=5,e;case 5:if(r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);u.next=2;break;case 8:if(n.length){u.next=1;break}case 9:case"end":return u.stop()}},AK,this)}function $b(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=RK)):t===void 0&&(t=OK);for(var n=new Yb(e),r,i=[n],s,l,u,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,u=h-1;u>=0;--u)i.push(s=l[u]=new Yb(l[u])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(vN)}function CK(){return $b(this).eachBefore(MK)}function OK(e){return e.children}function RK(e){return Array.isArray(e)?e[1]:null}function MK(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vN(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Yb(e){this.data=e,this.depth=this.height=0,this.parent=null}Yb.prototype=$b.prototype=fK({constructor:Yb,count:dK,each:pK,eachAfter:mK,eachBefore:vK,find:gK,sum:yK,sort:_K,path:bK,ancestors:EK,descendants:SK,leaves:TK,links:wK,copy:CK},Symbol.iterator,pN);function BM(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function PK(e,t,n,r){return t&&BM(e,t),n&&BM(e,n),r&&BM(e,r),e}const IK={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},LK="nodeIndex",iE="childNodeCount",DK="nodeAncestor",FM="Invalid field: it must be a string!";function NK(e,t){const{field:n,fields:r}=e;if(c(n))return n;if(jo(n))return console.warn(FM),n[0];if(console.warn(`${FM} will try to get fields instead.`),c(r))return r;if(jo(r)&&r.length)return r[0];if(t)return t;throw new TypeError(FM)}function BK(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var s,l;i.parent!==n?(n=i.parent,r=0):r+=1;const u=m6((((s=i.ancestors)===null||s===void 0?void 0:s.call(i))||[]).map(h=>t.find(p=>p.name===h.name)||h),({depth:h})=>h>0&&h<i.depth);i[DK]=u,i[iE]=((l=i.children)===null||l===void 0?void 0:l.length)||0,i[LK]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function FK(e,t){t=PK({},IK,t);const n=t.as;if(!jo(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=NK(t)}catch(h){console.warn(h)}const s=(h=>uK().size(t.size).round(t.round).padding(t.padding)($b(h).sum(p=>U2(p.children)?t.ignoreParentValue?0:p[r]-vL(p.children,(v,y)=>v+y[r],0):p[r]).sort(t.sort)))(e),l=n[0],u=n[1];return s.each(h=>{var p,v;h[l]=[h.x0,h.x1,h.x1,h.x0],h[u]=[h.y1,h.y1,h.y0,h.y0],h.name=h.name||((p=h.data)===null||p===void 0?void 0:p.name)||((v=h.data)===null||v===void 0?void 0:v.label),h.data.name=h.name,["x0","x1","y0","y1"].forEach(y=>{n.indexOf(y)===-1&&delete h[y]})}),BK(s)}var kK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Kb="sunburst",kM="markType",ppe="value",mN="path",nA="ancestor-node";function UK(e){const{data:t,encode:n}=e,{color:r,value:i}=n,l=FK(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),u=[];return l.forEach(h=>{var p,v,y,b;if(h.depth===0)return null;let T=h.data.name;const R=[T];let M=Object.assign({},h);for(;M.depth>1;)T=`${(p=M.parent.data)===null||p===void 0?void 0:p.name} / ${T}`,R.unshift((v=M.parent.data)===null||v===void 0?void 0:v.name),M=M.parent;const I=Object.assign(Object.assign(Object.assign({},DM(h.data,[i])),{[mN]:T,[nA]:M.data.name}),h);r&&r!==nA&&(I[r]=h.data[r]||((b=(y=h.parent)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[r])),u.push(I)}),u.map(h=>{const p=h.x.slice(0,2),v=[h.y[2],h.y[0]];return p[0]===p[1]&&(v[0]=v[1]=(h.y[2]+h.y[0])/2),Object.assign(Object.assign({},h),{x:p,y:v,fillOpacity:Math.pow(.85,h.depth)})})}const gN={id:Kb,encode:{x:"x",y:"y",key:mN,color:nA,value:"value"},axis:{x:!1,y:!1},style:{[kM]:Kb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[iE]:iE,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},yN=e=>{const{encode:t,data:n=[],legend:r}=e,i=kK(e,["encode","data","legend"]),s=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(bl(i,["coordinate","innerRadius"],.2),1e-5)}),l=Object.assign(Object.assign({},gN.encode),t),{value:u}=l,h=UK({encode:l,data:n});return console.log(h,"rectData"),[ti({},gN,Object.assign(Object.assign({type:"rect",data:h,encode:l,tooltip:{title:"path",items:[p=>({name:u,value:p[u]})]}},i),{coordinate:s}))]};yN.props={};var zK=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return HR(e,function(n,r){op(e)&&r==="prototype"||t.push(r)}),t},UM=zK,jK=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const VK=e=>e.querySelectorAll(".element").filter(t=>bl(t,["style",kM])===Kb);function HK(e){return Pa(e).select(`.${Jo}`).node()}const WK={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function GK(e={}){const{breadCrumb:t={},isFixedColor:n=!1}=e,r=ti({},WK,t);return i=>{const{update:s,setState:l,container:u,view:h,options:p}=i,v=u.ownerDocument,y=HK(u),b=p.marks.find(({id:H})=>H===Kb),{state:T}=b,R=v.createElement("g");y.appendChild(R);const M=(H,X)=>jK(this,void 0,void 0,function*(){if(R.removeChildren(),H){const $=v.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});R.appendChild($);let Q="";const ce=H==null?void 0:H.split(" / ");let pe=r.style.y,Re=R.getBBox().width;const je=y.getBBox().width,Ke=ce.map((ft,Ye)=>{const it=v.createElement("text",{style:Object.assign(Object.assign({x:Re,text:" / "},r.style),{y:pe})});R.appendChild(it),Re+=it.getBBox().width,Q=`${Q}${ft} / `;const at=v.createElement("text",{name:Q.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:ft,x:Re,depth:Ye+1},r.style),{y:pe})});return R.appendChild(at),Re+=at.getBBox().width,Re>je&&(pe=R.getBBox().height,Re=0,it.attr({x:Re,y:pe}),Re+=it.getBBox().width,at.attr({x:Re,y:pe}),Re+=at.getBBox().width),at});[$,...Ke].forEach((ft,Ye)=>{if(Ye===Ke.length)return;const it=Object.assign({},ft.attributes);ft.attr("cursor","pointer"),ft.addEventListener("mouseenter",()=>{ft.attr(r.active)}),ft.addEventListener("mouseleave",()=>{ft.attr(it)}),ft.addEventListener("click",()=>{M(ft.name,bl(ft,["style","depth"]))})})}l("drillDown",$=>{const{marks:Q}=$,ce=Q.map(pe=>{if(pe.id!==Kb&&pe.type!=="rect")return pe;const{data:Re}=pe,je=Object.fromEntries(["color"].map(ft=>[ft,{domain:h.scale[ft].getOptions().domain}])),Ke=Re.filter(ft=>{const Ye=ft.path;return n||(ft[nA]=Ye.split(" / ")[X]),H?new RegExp(`^${H}.+`).test(Ye):!0});return ti({},pe,n?{data:Ke,scale:je}:{data:Ke})});return Object.assign(Object.assign({},$),{marks:ce})}),yield s()}),I=H=>{const X=H.target;if(bl(X,["style",kM])!==Kb||bl(X,["markType"])!=="rect"||!bl(X,["style",iE]))return;const $=bl(X,["__data__","key"]),Q=bl(X,["style","depth"]);X.style.cursor="pointer",M($,Q)};y.addEventListener("click",I);const N=UM(Object.assign(Object.assign({},T.active),T.inactive)),U=()=>{VK(y).forEach(X=>{const $=bl(X,["style",iE]);if(bl(X,["style","cursor"])!=="pointer"&&$){X.style.cursor="pointer";const ce=DM(X.attributes,N);X.addEventListener("mouseenter",()=>{X.attr(T.active)}),X.addEventListener("mouseleave",()=>{X.attr(ti(ce,T.inactive))})}})};return y.addEventListener("mousemove",U),()=>{R.remove(),y.removeEventListener("click",I),y.removeEventListener("mousemove",U)}}}function ZK(){return{"interaction.drillDown":GK,"mark.sunburst":yN}}const _N=()=>[["cartesian"]];_N.props={};const zM=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];zM.props={transform:!0};const XK=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},bN=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=XK(e);return[...zM(),...Qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};bN.props={};const jM=()=>[["parallel",0,1,0,1]];jM.props={};const xN=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];xN.props={transform:!0};const EN=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...jM(),...Qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};EN.props={};const SN=({value:e})=>t=>t.map(()=>e);SN.props={};const TN=({value:e})=>t=>t.map(n=>n[e]);TN.props={};const wN=({value:e})=>t=>t.map(e);wN.props={};const AN=({value:e})=>()=>e;AN.props={};function wc(e,t){if(e!==null)return{type:"column",value:e,field:t}}function rA(e,t){const n=wc(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function iA(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function $K(e,t){const n=wc(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function jy(e,t){const n=[];for(const r of e)n[r]=t;return n}function ll(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function oE(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=ll(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function aE(e){return e instanceof Date?!1:typeof e=="object"}const sE=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,ti({},t,{encode:{y1:rA(jy(e,0))}})]};sE.props={};const v1=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,ti({},t,{encode:{x:rA(jy(e,0))},scale:{x:{guide:null}}})]};v1.props={};const m1=(e,t)=>$2(Object.assign({colorAttribute:"fill"},e),t);m1.props=Object.assign(Object.assign({},$2.props),{defaultMarker:"square"});const oA=(e,t)=>$2(Object.assign({colorAttribute:"stroke"},e),t);oA.props=Object.assign(Object.assign({},$2.props),{defaultMarker:"hollowSquare"});function qb(){}function CN(e){this._context=e}CN.prototype={areaStart:qb,areaEnd:qb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function VM(e){return new CN(e)}var ON=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function YK(e,t,n){const[r,i,s,l]=e;if(Tc(n)){const p=[t?t[0][0]:i[0],i[1]],v=[t?t[3][0]:s[0],s[1]];return[r,p,v,l]}const u=[i[0],t?t[0][1]:i[1]],h=[s[0],t?t[3][1]:s[1]];return[r,u,h,l]}const HM=(e,t)=>{const{adjustPoints:n=YK}=e,r=ON(e,["adjustPoints"]),{coordinate:i,document:s}=t;return(l,u,h,p)=>{const{index:v}=u,{color:y}=h,b=ON(h,["color"]),T=p[v+1],R=n(l,T,i),M=!!Tc(i),[I,N,U,H]=M?Cw(R):R,{color:X=y,opacity:$}=u,Q=s1().curve(VM)([I,N,U,H]);return Pa(s.createElement("path",{})).call(la,b).style("d",Q).style("fill",X).style("fillOpacity",$).call(la,r).node()}};HM.props={defaultMarker:"square"};function KK(e,t,n){const[r,i,s,l]=e;if(Tc(n)){const p=[t?t[0][0]:(i[0]+s[0])/2,i[1]],v=[t?t[3][0]:(i[0]+s[0])/2,s[1]];return[r,p,v,l]}const u=[i[0],t?t[0][1]:(i[1]+s[1])/2],h=[s[0],t?t[3][1]:(i[1]+s[1])/2];return[r,u,h,l]}const RN=(e,t)=>HM(Object.assign({adjustPoints:KK},e),t);RN.props={defaultMarker:"square"};function lE(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function qK(e){const t=e.getFullYear(),n=lE(e.getMonth()+1),r=lE(e.getDate()),i=`${t}-${n}-${r}`,s=e.getHours(),l=e.getMinutes(),u=e.getSeconds();return s||l||u?`${i} ${lE(s)}:${lE(l)}:${lE(u)}`:i}const aA=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:s}=r;if(Fv(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const u=Object.keys(i).filter(p=>p.startsWith(t)).filter(p=>!i[p].inferred).map(p=>ll(i,p)).filter(([p])=>p).map(p=>p[0]);if(u.length===0)return[n,r];const h=[];for(const p of n)h[p]={value:u.map(v=>v[p]instanceof Date?qK(v[p]):v[p]).join(", ")};return[n,ti({},r,{tooltip:{title:h}})]}};aA.props={};const sA=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:s}=r;if(Fv(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const h=(Array.isArray(t)?t:[t]).flatMap(p=>Object.keys(i).filter(v=>v.startsWith(p)).map(v=>{const{field:y,value:b,inferred:T=!1,aggregate:R}=i[v];return T?null:R&&b?{channel:v}:y?{field:y}:b?{channel:v}:null}).filter(v=>v!==null));return[n,ti({},r,{tooltip:{items:h}})]}};sA.props={};var QK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const MN=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=QK(n,["key"]);if(r!==void 0)return[e,t];const s=Object.values(i).map(({value:u})=>u),l=e.map(u=>s.filter(Array.isArray).map(h=>h[u]).join("-"));return[e,ti({},t,{encode:{key:wc(l)}})]};MN.props={};function PN(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function ap(e={}){return[...PN(e),{name:"title",scale:"identity"}]}function vpe(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function Vy(){return[{type:aA,channel:"color"},{type:sA,channel:["x","y"]}]}function Qb(){return[{type:aA,channel:"x"},{type:sA,channel:["y"]}]}function JK(){return[{type:aA,channel:"color"},{type:sA,channel:["position"]}]}function Jb(e={}){return PN(e)}function Ku(){return[{type:MN}]}function pf(){return[]}function WM(e,t){return e.getBandWidth(e.invert(t))}function g1(e,t,n={}){const{x:r,y:i,series:s}=t,{x:l,y:u,series:h}=e,{style:{bandOffset:p=h?0:.5,bandOffsetX:v=p,bandOffsetY:y=p}={}}=n,b=!!(l!=null&&l.getBandWidth),T=!!(u!=null&&u.getBandWidth),R=!!(h!=null&&h.getBandWidth);return!b&&!T?M=>M:(M,I)=>{const N=b?WM(l,r[I]):0,U=T?WM(u,i[I]):0,X=R&&s?(WM(h,s[I])/2+ +s[I])*N:0,[$,Q]=M;return[$+v*N+X,Q+y*U]}}function lA(e){return parseFloat(e)/100}function GM(e,t,n,r){const{x:i,y:s}=n,{innerWidth:l,innerHeight:u}=r.getOptions(),h=Array.from(e,p=>{const v=i[p],y=s[p],b=typeof v=="string"?lA(v)*l:+v,T=typeof y=="string"?lA(y)*u:+y;return[[b,T]]});return[e,h]}function jm(e){return typeof e=="function"?e:t=>t[e]}function ZM(e,t){return Array.from(e,jm(t))}function XM(e,t){const{source:n=v=>v.source,target:r=v=>v.target,value:i=v=>v.value}=t,{links:s,nodes:l}=e,u=ZM(s,n),h=ZM(s,r),p=ZM(s,i);return{links:s.map((v,y)=>({target:h[y],source:u[y],value:p[y]})),nodes:l||Array.from(new Set([...u,...h]),v=>({key:v}))}}function IN(e,t){return e.getBandWidth(e.invert(t))}const LN={rect:m1,hollow:oA,funnel:HM,pyramid:RN},DN=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,series:u,size:h}=n,p=t.x,v=t.series,[y]=r.getSize(),b=h?h.map(M=>+M/y):null,T=h?(M,I,N)=>{const U=M+I/2,H=b[N];return[U-H/2,U+H/2]}:(M,I,N)=>[M,M+I],R=Array.from(e,M=>{const I=IN(p,i[M]),N=v?IN(v,u==null?void 0:u[M]):1,U=I*N,H=(+(u==null?void 0:u[M])||0)*I,X=+i[M]+H,[$,Q]=T(X,U,M),ce=+s[M],pe=+l[M];return[[$,ce],[Q,ce],[Q,pe],[$,pe]].map(Ye=>r.map(Ye))});return[e,R]};DN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:LN,channels:[...ap({shapes:Object.keys(LN)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Ku(),{type:sE},{type:v1}],postInference:[...pf(),...Qb()],interaction:{shareTooltip:!0}};const NN={rect:m1,hollow:oA},BN=()=>(e,t,n,r)=>{const{x:i,x1:s,y:l,y1:u}=n,h=Array.from(e,p=>{const v=[+i[p],+l[p]],y=[+s[p],+l[p]],b=[+s[p],+u[p]],T=[+i[p],+u[p]];return[v,y,b,T].map(R=>r.map(R))});return[e,h]};BN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:NN,channels:[...ap({shapes:Object.keys(NN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku(),{type:sE}],postInference:[...pf(),...Qb()],interaction:{shareTooltip:!0}};var FN=$M(H2);function kN(e){this._curve=e}kN.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function $M(e){function t(n){return new kN(e(n))}return t._curve=e,t}function cE(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t($M(n)):t()._curve},e}function eq(){return cE(s1().curve(FN))}var UN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tq=Bb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,s=e.ownerDocument;Pa(e).maybeAppend("line",()=>s.createElement("path",{})).style("d",t).call(la,r),Pa(e).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(la,i)});function nq(e,t){const n=[],r=[];let i=!1,s=null;for(const l of e)!t(l[0])||!t(l[1])?i=!0:(n.push(l),i&&(i=!1,r.push([s,l])),s=l);return[n,r]}const ev=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:s=v=>!Number.isNaN(v)&&v!==void 0&&v!==null,connect:l=!1}=e,u=UN(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:h,document:p}=t;return(v,y,b)=>{const{color:T,lineWidth:R}=b,M=UN(b,["color","lineWidth"]),{color:I=T,size:N=R,seriesColor:U,seriesX:H,seriesY:X}=y,$=qL(h,y),Q=Tc(h),ce=r&&U?KL(U,H,X,r,i,Q):I,pe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),ce&&{stroke:ce}),N&&{lineWidth:N}),$&&{transform:$}),u);let Re;if(kl(h)){const at=h.getCenter();Re=vt=>eq().angle((Vt,At)=>Nb(Lu(vt[At],at))).radius((Vt,At)=>Eu(vt[At],at)).defined(([Vt,At])=>s(Vt)&&s(At)).curve(n)(vt)}else Re=s1().x(at=>at[0]).y(at=>at[1]).defined(([at,vt])=>s(at)&&s(vt)).curve(n);const[je,Ke]=nq(v,s),ft=go(pe,"connect"),Ye=!!Ke.length;if(!Ye||l&&!Object.keys(ft).length)return Pa(p.createElement("path",{})).style("d",Re(je)||[]).call(la,pe).node();if(Ye&&!l)return Pa(p.createElement("path",{})).style("d",Re(v)).call(la,pe).node();const it=at=>at.map(Re).join(",");return Pa(new tq).style("style1",Object.assign(Object.assign({},pe),ft)).style("style2",pe).style("d1",it(Ke)).style("d2",Re(v)).node()}};ev.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const zN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=kl(n)?VM:H2;return ev(Object.assign({curve:i},e),t)(...r)}};zN.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"line"});function YM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function KM(e,t){this._context=e,this._k=(1-t)/6}KM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:YM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:YM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var mpe=function e(t){function n(r){return new KM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function qM(e,t){this._context=e,this._k=(1-t)/6}qM.prototype={areaStart:qb,areaEnd:qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:YM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gpe=function e(t){function n(r){return new qM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jN(e,t,n){var r=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>Ed){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>Ed){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,v=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/v,l=(l*p+e._y1*e._l23_2a-n*e._l12_2a)/v}e._context.bezierCurveTo(r,i,s,l,e._x2,e._y2)}function VN(e,t){this._context=e,this._alpha=t}VN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ype=function e(t){function n(r){return t?new VN(r,t):new KM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function HN(e,t){this._context=e,this._alpha=t}HN.prototype={areaStart:qb,areaEnd:qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var WN=function e(t){function n(r){return t?new HN(r,t):new qM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function GN(e){return e<0?-1:1}function ZN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(GN(s)+GN(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function XN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function QM(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function cA(e){this._context=e}cA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QM(this,this._t0,XN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,QM(this,XN(this,n=ZN(this,e,t)),n);break;default:QM(this,this._t0,n=ZN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function $N(e){this._context=new YN(e)}($N.prototype=Object.create(cA.prototype)).point=function(e,t){cA.prototype.point.call(this,t,e)};function YN(e){this._context=e}YN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function KN(e){return new cA(e)}function qN(e){return new $N(e)}var rq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const QN=(e,t)=>{const n=rq(e,[]),{coordinate:r}=t;return(...i)=>{const s=kl(r)?WN:Tc(r)?qN:KN;return ev(Object.assign({curve:s},n),t)(...i)}};QN.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"smooth"});function uA(e,t){this._context=e,this._t=t}uA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function JN(e){return new uA(e,.5)}function eB(e){return new uA(e,0)}function tB(e){return new uA(e,1)}const nB=(e,t)=>ev(Object.assign({curve:tB},e),t);nB.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"hv"});const rB=(e,t)=>ev(Object.assign({curve:eB},e),t);rB.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"vh"});const iB=(e,t)=>ev(Object.assign({curve:JN},e),t);iB.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"hvh"});var iq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oq(e,t,n,r,i){const s=Lu(n,t),l=Q0(s),u=l+Math.PI/2,h=[r/2*Math.cos(u),r/2*Math.sin(u)],p=[i/2*Math.cos(u),i/2*Math.sin(u)],v=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[r/2*Math.cos(l),r/2*Math.sin(l)],b=Aw(t,h),T=Aw(n,p),R=Aw(T,v),M=Aw(n,v),I=Lu(M,p),N=Lu(n,p),U=Lu(t,h),H=Lu(U,y),X=Lu(t,y),$=Lu(b,y);e.moveTo(...b),e.lineTo(...T),e.arcTo(...R,...M,i/2),e.arcTo(...I,...N,i/2),e.lineTo(...U),e.arcTo(...H,...X,r/2),e.arcTo(...$,...b,r/2),e.closePath()}const oB=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{seriesSize:l,color:u}=i,{color:h}=s,p=iq(s,["color"]),v=J0();for(let y=0;y<r.length-1;y++){const b=r[y],T=r[y+1],R=l[y],M=l[y+1];[...b,...T].every(ul)&&oq(v,b,T,R,M)}return Pa(n.createElement("path",{})).call(la,p).style("fill",u||h).style("d",v.toString()).call(la,e).node()}};oB.props=Object.assign(Object.assign({},ev.props),{defaultMarker:"line"});const aB=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:s}=n;return!s||i?[e,t]:[e,ti({},t,{encode:{series:iA(jy(e,void 0))}})]};aB.props={};const JM=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[s,l]=ll(n,"color");return[e,ti({},t,{encode:{series:wc(s,l)}})]};JM.props={};const sB={line:zN,smooth:QN,hv:nB,vh:rB,hvh:iB,trail:oB},aq=(e,t,n,r)=>{var i,s;const{series:l,x:u,y:h}=n,{x:p,y:v}=t;if(u===void 0||h===void 0)throw new Error("Missing encode for x or y channel.");const y=l?Array.from(Kl(e,I=>l[I]).values()):[e],b=y.map(I=>I[0]).filter(I=>I!==void 0),T=(((i=p==null?void 0:p.getBandWidth)===null||i===void 0?void 0:i.call(p))||0)/2,R=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,M=Array.from(y,I=>I.map(N=>r.map([+u[N]+T,+h[N]+R])));return[b,M,y]},sq=(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(i.length===0)throw new Error("Missing encode for position channel.");const s=Array.from(e,l=>{const u=i.map(v=>+v[l]),h=r.map(u),p=[];for(let v=0;v<h.length;v+=2)p.push([h[v],h[v+1]]);return p});return[e,s]},lB=()=>(e,t,n,r)=>(Bs(r)?sq:aq)(e,t,n,r);lB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:sB,channels:[...ap({shapes:Object.keys(sB)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Ku(),{type:aB},{type:JM}],postInference:[...pf(),...Qb(),...JK()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var lq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const eP=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];eP.style=["fill"];const cB=eP.bind(void 0);cB.style=["stroke","lineWidth"];const fA=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];fA.style=["fill"];const uB=fA.bind(void 0);uB.style=["fill"];const fB=fA.bind(void 0);fB.style=["stroke","lineWidth"];const tP=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};tP.style=["fill"];const hB=tP.bind(void 0);hB.style=["stroke","lineWidth"];const nP=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};nP.style=["fill"];const dB=nP.bind(void 0);dB.style=["stroke","lineWidth"];const rP=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};rP.style=["fill"];const pB=rP.bind(void 0);pB.style=["stroke","lineWidth"];const iP=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};iP.style=["fill"];const vB=iP.bind(void 0);vB.style=["stroke","lineWidth"];const oP=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};oP.style=["fill"];const mB=oP.bind(void 0);mB.style=["stroke","lineWidth"];const gB=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];gB.style=["stroke","lineWidth"];const yB=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];yB.style=["stroke","lineWidth"];const _B=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];_B.style=["stroke","lineWidth"];const bB=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];bB.style=["stroke","lineWidth"];const xB=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];xB.style=["stroke","lineWidth"];const aP=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];aP.style=["stroke","lineWidth"];const EB=aP.bind(void 0);EB.style=["stroke","lineWidth"];const SB=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];SB.style=["stroke","lineWidth"];const TB=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];TB.style=["stroke","lineWidth"];const wB=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];wB.style=["stroke","lineWidth"];const AB=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];AB.style=["stroke","lineWidth"];const CB=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];CB.style=["stroke","lineWidth"];const ex=new Map([["bowtie",oP],["cross",yB],["dash",EB],["diamond",tP],["dot",aP],["hexagon",iP],["hollowBowtie",mB],["hollowDiamond",hB],["hollowHexagon",vB],["hollowPoint",cB],["hollowSquare",fB],["hollowTriangle",dB],["hollowTriangleDown",pB],["hv",TB],["hvh",AB],["hyphen",xB],["line",gB],["plus",bB],["point",eP],["rect",uB],["smooth",SB],["square",fA],["tick",_B],["triangleDown",rP],["triangle",nP],["vh",wB],["vhv",CB]]);function cq(e,t){var{d:n,fill:r,lineWidth:i,path:s,stroke:l,color:u}=t,h=lq(t,["d","fill","lineWidth","path","stroke","color"]);const p=ex.get(e)||ex.get("point");return(...v)=>new vd({style:Object.assign(Object.assign({},h),{d:p(...v),stroke:p.style.includes("stroke")?u||l:"",fill:p.style.includes("fill")?u||r:"",lineWidth:p.style.includes("lineWidth")?i||i||2:0})})}function _pe(e,t){ex.set(e,t)}function bpe(e){ex.delete(e)}var uq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function OB(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||gl(r)){const[[s,l],[u,h]]=t,p=Math.abs((u-s)/2),v=Math.abs((h-l)/2);return Math.max(0,(p+v)/2)}return i}const Ys=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,s=uq(e,["colorAttribute","symbol","mode"]),l=ex.get(r)||ex.get("point"),{coordinate:u,document:h}=t;return(p,v,y)=>{const{lineWidth:b,color:T}=y,R=s.stroke?b||1:b,{color:M=T,transform:I,opacity:N}=v,[U,H]=JR(p),$=OB(i,p,v,u)||s.r||y.r;return Pa(h.createElement("path",{})).call(la,y).style("fill","transparent").style("d",l(U,H,$)).style("lineWidth",R).style("transform",I).style("transformOrigin",`${U-$} ${H-$}`).style("stroke",M).style(QR(e),N).style(n,M).call(la,s).node()}};Ys.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const RB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);RB.props=Object.assign({defaultMarker:"hollowPoint"},Ys.props);const MB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);MB.props=Object.assign({defaultMarker:"hollowDiamond"},Ys.props);const PB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);PB.props=Object.assign({defaultMarker:"hollowHexagon"},Ys.props);const IB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);IB.props=Object.assign({defaultMarker:"hollowSquare"},Ys.props);const LB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);LB.props=Object.assign({defaultMarker:"hollowTriangleDown"},Ys.props);const DB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);DB.props=Object.assign({defaultMarker:"hollowTriangle"},Ys.props);const NB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);NB.props=Object.assign({defaultMarker:"hollowBowtie"},Ys.props);var fq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const BB=(e,t)=>{const{colorAttribute:n,mode:r="auto"}=e,i=fq(e,["colorAttribute","mode"]),{coordinate:s,document:l}=t;return(u,h,p)=>{const{lineWidth:v,color:y}=p,b=i.stroke?v||1:v,{color:T=y,transform:R,opacity:M}=h,[I,N]=JR(u),H=OB(r,u,h,s)||i.r||p.r;return Pa(l.createElement("circle",{})).call(la,p).style("fill","transparent").style("cx",I).style("cy",N).style("r",H).style("lineWidth",b).style("transform",R).style("transformOrigin",`${I} ${N}`).style("stroke",T).style(QR(e),M).style(n,T).call(la,i).node()}},sP=(e,t)=>BB(Object.assign({colorAttribute:"fill"},e),t);sP.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const FB=(e,t)=>BB(Object.assign({colorAttribute:"stroke"},e),t);FB.props=Object.assign({defaultMarker:"hollowPoint"},sP.props);const kB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);kB.props=Object.assign({defaultMarker:"point"},Ys.props);const UB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);UB.props=Object.assign({defaultMarker:"plus"},Ys.props);const zB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);zB.props=Object.assign({defaultMarker:"diamond"},Ys.props);const jB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);jB.props=Object.assign({defaultMarker:"square"},Ys.props);const VB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);VB.props=Object.assign({defaultMarker:"triangle"},Ys.props);const HB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);HB.props=Object.assign({defaultMarker:"hexagon"},Ys.props);const WB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);WB.props=Object.assign({defaultMarker:"cross"},Ys.props);const GB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);GB.props=Object.assign({defaultMarker:"bowtie"},Ys.props);const ZB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);ZB.props=Object.assign({defaultMarker:"hyphen"},Ys.props);const XB=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);XB.props=Object.assign({defaultMarker:"line"},Ys.props);const $B=(e,t)=>Ys(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);$B.props=Object.assign({defaultMarker:"tick"},Ys.props);const YB=(e,t)=>Ys(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);YB.props=Object.assign({defaultMarker:"triangleDown"},Ys.props);const hA=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,ti({},t,{encode:{y:rA(jy(e,0))},scale:{y:{guide:null}}})]};hA.props={};const KB=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,ti({},t,{encode:{size:iA(jy(e,3))}})]};KB.props={};const qB={hollow:RB,hollowDiamond:MB,hollowHexagon:PB,hollowSquare:IB,hollowTriangleDown:LB,hollowTriangle:DB,hollowBowtie:NB,hollowCircle:FB,point:kB,plus:UB,diamond:zB,square:jB,triangle:VB,hexagon:HB,cross:WB,bowtie:GB,hyphen:ZB,line:XB,tick:$B,triangleDown:YB,circle:sP},QB=e=>(t,n,r,i)=>{const{x:s,y:l,x1:u,y1:h,size:p,dx:v,dy:y}=r,[b,T]=i.getSize(),R=g1(n,r,e),M=N=>{const U=+((v==null?void 0:v[N])||0),H=+((y==null?void 0:y[N])||0),X=u?(+s[N]+ +u[N])/2:+s[N],$=h?(+l[N]+ +h[N])/2:+l[N],Q=X+U,ce=$+H;return[Q,ce]},I=p?Array.from(t,N=>{const[U,H]=M(N),X=+p[N],$=X/b,Q=X/T,ce=[U-$,H-Q],pe=[U+$,H+Q];return[i.map(R(ce,N)),i.map(R(pe,N))]}):Array.from(t,N=>[i.map(R(M(N),N))]);return[t,I]};QB.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:qB,channels:[...ap({shapes:Object.keys(qB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Ku(),{type:v1},{type:hA}],postInference:[...pf(),{type:KB},...Vy()]};const JB=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:u="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(u),stroke:l,fill:l,fontSize:h},[[b,T]]=r;return Pa(new i6).style("x",b).style("y",T).call(la,s).style("transform",`${v}rotate(${+p})`).style("coordCenter",n.getCenter()).call(la,y).call(la,e).node()}};JB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var lP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hq(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[s,l]=[0,0],[u,h]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,u,h],["L",s,l],["Z"]]}function dq(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const pq=Bb(e=>{const t=e.attributes,{class:n,x:r,y:i,transform:s}=t,l=lP(t,["class","x","y","transform"]),u=go(l,"marker"),{size:h=24}=u,p=()=>hq(h/2),v=Pa(e).maybeAppend("marker",()=>new Ul({})).call(T=>T.node().update(Object.assign({symbol:p},u))).node(),[y,b]=dq(v);Pa(e).maybeAppend("text","text").style("x",y).style("y",b).call(la,l)}),eF=(e,t)=>{const n=lP(e,[]);return(r,i,s)=>{const{color:l}=s,u=lP(s,["color"]),{color:h=l,text:p=""}=i,v={text:String(p),stroke:h,fill:h},[[y,b]]=r;return Pa(new pq).call(la,u).style("transform",`translate(${y},${b})`).call(la,v).call(la,n).node()}};eF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const tF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:u="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(u),stroke:l,fill:l,fontSize:h,textAlign:"center",textBaseline:"middle"},[[b,T]]=r;return Pa(new mh).style("x",b).style("y",T).call(la,s).style("transformOrigin","center center").style("transform",`${v}rotate(${p}deg)`).style("coordCenter",n.getCenter()).call(la,y).call(la,e).node()}};tF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const dA=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(aE))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(l=>l[0]),s=r.map(l=>l[1]);return[e,ti({},t,{encode:{x:wc(i),y:wc(s)}})]};dA.props={};var nF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pA=()=>(e,t)=>{const{data:n,style:r={}}=t,i=nF(t,["data","style"]),{x:s,y:l}=r,u=nF(r,["x","y"]);if(s==null||l==null)return[e,t];const h=s||0,p=l||0;return[[0],ti({},i,{data:[0],cartesian:!0,encode:{x:wc([h]),y:wc([p])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:u})]};pA.props={};const rF={text:JB,badge:eF,tag:tF},iF=e=>{const{cartesian:t=!1}=e;return t?GM:(n,r,i,s)=>{const{x:l,y:u}=i,h=g1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+u[v]];return[s.map(h(y,v))]});return[n,p]}};iF.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:rF,channels:[...ap({shapes:Object.keys(rF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Ku(),{type:dA},{type:pA}],postInference:[...pf(),...Vy()]};const cP=()=>(e,t)=>[e,ti({scale:{x:{padding:0},y:{padding:0}}},t)];cP.props={};const oF={cell:m1,hollow:oA},aF=()=>(e,t,n,r)=>{const{x:i,y:s}=n,l=t.x,u=t.y,h=Array.from(e,p=>{const v=l.getBandWidth(l.invert(+i[p])),y=u.getBandWidth(u.invert(+s[p])),b=+i[p],T=+s[p],R=[b,T],M=[b+v,T],I=[b+v,T+y],N=[b,T+y];return[R,M,I,N].map(U=>r.map(U))});return[e,h]};aF.props={defaultShape:"cell",defaultLabelShape:"label",shape:oF,composite:!1,channels:[...ap({shapes:Object.keys(oF)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Ku(),{type:v1},{type:hA},{type:cP}],postInference:[...pf(),...Vy()]};function uP(e,t,n){var r=null,i=Zc(!0),s=null,l=H2,u=null,h=nM(p);e=typeof e=="function"?e:e===void 0?n6:Zc(+e),t=typeof t=="function"?t:Zc(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?r6:Zc(+n);function p(y){var b,T,R,M=(y=JL(y)).length,I,N=!1,U,H=new Array(M),X=new Array(M);for(s==null&&(u=l(U=h())),b=0;b<=M;++b){if(!(b<M&&i(I=y[b],b,y))===N)if(N=!N)T=b,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),R=b-1;R>=T;--R)u.point(H[R],X[R]);u.lineEnd(),u.areaEnd()}N&&(H[b]=+e(I,b,y),X[b]=+t(I,b,y),u.point(r?+r(I,b,y):H[b],n?+n(I,b,y):X[b]))}if(U)return u=null,U+""||null}function v(){return s1().defined(i).curve(l).context(s)}return p.x=function(y){return arguments.length?(e=typeof y=="function"?y:Zc(+y),r=null,p):e},p.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Zc(+y),p):e},p.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Zc(+y),p):r},p.y=function(y){return arguments.length?(t=typeof y=="function"?y:Zc(+y),n=null,p):t},p.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Zc(+y),p):t},p.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Zc(+y),p):n},p.lineX0=p.lineY0=function(){return v().x(e).y(t)},p.lineY1=function(){return v().x(e).y(n)},p.lineX1=function(){return v().x(r).y(t)},p.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Zc(!!y),p):i},p.curve=function(y){return arguments.length?(l=y,s!=null&&(u=l(s)),p):l},p.context=function(y){return arguments.length?(y==null?s=u=null:u=l(s=y),p):s},p}function vq(){var e=uP().curve(FN),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return cE(n())},delete e.lineX0,e.lineEndAngle=function(){return cE(r())},delete e.lineX1,e.lineInnerRadius=function(){return cE(i())},delete e.lineY0,e.lineOuterRadius=function(){return cE(s())},delete e.lineY1,e.curve=function(l){return arguments.length?t($M(l)):t()._curve},e}var mq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gq(e,t){const n=[],r=[],i=[];let s=!1,l=null;const u=e.length/2;for(let h=0;h<u;h++){const p=e[h],v=e[h+u];if([...p,...v].some(y=>!t(y)))s=!0;else{if(n.push(p),r.push(v),s&&l){s=!1;const[y,b]=l;i.push([y,p,b,v])}l=[p,v]}}return[n.concat(r),i]}const sF=Bb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,s=e.ownerDocument;Pa(e).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(la,i),Pa(e).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",t).call(la,r)}),Hv=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:s=!1}=e,l=mq(e,["curve","gradient","defined","connect"]),{coordinate:u,document:h}=t;return(p,v,y)=>{const{color:b}=y,{color:T=b,seriesColor:R,seriesX:M,seriesY:I}=v,N=Tc(u),U=qL(u,v),H=r&&R?KL(R,M,I,r,void 0,N):T,X=Object.assign(Object.assign(Object.assign(Object.assign({},y),{stroke:H,fill:H}),U&&{transform:U}),l),[$,Q]=gq(p,i),ce=go(X,"connect"),pe=!!Q.length,Re=je=>Pa(h.createElement("path",{})).style("d",je||"").call(la,X).node();if(kl(u)){const je=Ke=>{const ft=u.getCenter(),Ye=Ke.slice(0,Ke.length/2),it=Ke.slice(Ke.length/2);return vq().angle((at,vt)=>Nb(Lu(Ye[vt],ft))).outerRadius((at,vt)=>Eu(Ye[vt],ft)).innerRadius((at,vt)=>Eu(it[vt],ft)).defined((at,vt)=>[...Ye[vt],...it[vt]].every(i)).curve(n)(it)};return!pe||s&&!Object.keys(ce).length?Re(je($)):pe&&!s?Re(je(p)):Pa(new sF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ce),l)).style("areaPath",je(p)).style("connectPath",Q.map(je).join("")).node()}else{const je=Ke=>{const ft=Ke.slice(0,Ke.length/2),Ye=Ke.slice(Ke.length/2);return N?uP().y((it,at)=>ft[at][1]).x1((it,at)=>ft[at][0]).x0((it,at)=>Ye[at][0]).defined((it,at)=>[...ft[at],...Ye[at]].every(i)).curve(n)(ft):uP().x((it,at)=>ft[at][0]).y1((it,at)=>ft[at][1]).y0((it,at)=>Ye[at][1]).defined((it,at)=>[...ft[at],...Ye[at]].every(i)).curve(n)(ft)};return!pe||s&&!Object.keys(ce).length?Re(je($)):pe&&!s?Re(je(p)):Pa(new sF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ce),l)).style("areaPath",je(p)).style("connectPath",Q.map(je).join("")).node()}}};Hv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const lF=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=kl(n)?VM:H2;return Hv(Object.assign({curve:i},e),t)(...r)}};lF.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"square"});var yq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cF=(e,t)=>{const n=yq(e,[]),{coordinate:r}=t;return(...i)=>{const s=kl(r)?WN:Tc(r)?qN:KN;return Hv(Object.assign({curve:s},n),t)(...i)}};cF.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"smooth"});const uF=(e,t)=>(...n)=>Hv(Object.assign({curve:JN},e),t)(...n);uF.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"hvh"});const fF=(e,t)=>(...n)=>Hv(Object.assign({curve:eB},e),t)(...n);fF.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"vh"});const hF=(e,t)=>(...n)=>Hv(Object.assign({curve:tB},e),t)(...n);hF.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"hv"});const dF={area:lF,smooth:cF,hvh:uF,vh:fF,hv:hF},pF=()=>(e,t,n,r)=>{var i,s;const{x:l,y:u,y1:h,series:p}=n,{x:v,y}=t,b=p?Array.from(Kl(e,N=>p[N]).values()):[e],T=b.map(N=>N[0]).filter(N=>N!==void 0),R=(((i=v==null?void 0:v.getBandWidth)===null||i===void 0?void 0:i.call(v))||0)/2,M=(((s=y==null?void 0:y.getBandWidth)===null||s===void 0?void 0:s.call(y))||0)/2,I=Array.from(b,N=>{const U=N.length,H=new Array(U*2);for(let X=0;X<N.length;X++){const $=N[X];H[X]=r.map([+l[$]+R,+u[$]+M]),H[U+X]=r.map([+l[$]+R,+h[$]+M])}return H});return[T,I,b]};pF.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:dF,channels:[...ap({shapes:Object.keys(dF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Ku(),{type:JM},{type:sE},{type:cP}],postInference:[...pf(),...Qb()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const vF=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=ll(n,"y");return[e,ti({},t,{encode:{y1:wc([...i])}})]};vF.props={};const mF=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=ll(n,"x");return[e,ti({},t,{encode:{x1:wc([...i])}})]};mF.props={};var gF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fP=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=gF(e,["arrow","arrowSize"]),{document:s}=t;return(l,u,h)=>{const{defaultColor:p}=h,v=gF(h,["defaultColor"]),{color:y=p,transform:b}=u,[T,R]=l,M=J0();if(M.moveTo(...T),M.lineTo(...R),n){const[I,N]=aG(T,R,{arrowSize:r});M.moveTo(...I),M.lineTo(...R),M.lineTo(...N)}return Pa(s.createElement("path",{})).call(la,v).style("d",M.toString()).style("stroke",y).style("transform",b).call(la,i).node()}};fP.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const yF=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>fP(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};yF.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var _F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bF=(e,t)=>{const n=_F(e,[]),{coordinate:r,document:i}=t;return(s,l,u)=>{const{color:h}=u,p=_F(u,["color"]),{color:v=h,transform:y}=l,[b,T]=s,R=J0();if(R.moveTo(b[0],b[1]),kl(r)){const M=r.getCenter();R.quadraticCurveTo(M[0],M[1],T[0],T[1])}else{const M=YL(b,T),I=Eu(b,T)/2;V2(R,b,T,M,I)}return Pa(i.createElement("path",{})).call(la,p).style("d",R.toString()).style("stroke",v).style("transform",y).call(la,n).node()}};bF.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var xF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const EF=(e,t)=>{const n=xF(e,[]),{document:r}=t;return(i,s,l)=>{const{color:u}=l,h=xF(l,["color"]),{color:p=u,transform:v}=s,[y,b]=i,T=J0();return T.moveTo(y[0],y[1]),T.bezierCurveTo(y[0]/2+b[0]/2,y[1],y[0]/2+b[0]/2,b[1],b[0],b[1]),Pa(r.createElement("path",{})).call(la,h).style("d",T.toString()).style("stroke",p).style("transform",v).call(la,n).node()}};EF.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var SF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _q(e,t,n,r){const i=J0();if(kl(n)){const s=n.getCenter(),l=Eu(e,s),h=(Eu(t,s)-l)*r+l;return i.moveTo(e[0],e[1]),V2(i,e,t,s,h),i.lineTo(t[0],t[1]),i}return Tc(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const TF=(e,t)=>{const{cornerRatio:n=1/3}=e,r=SF(e,["cornerRatio"]),{coordinate:i,document:s}=t;return(l,u,h)=>{const{defaultColor:p}=h,v=SF(h,["defaultColor"]),{color:y=p,transform:b}=u,[T,R]=l,M=_q(T,R,i,n);return Pa(s.createElement("path",{})).call(la,v).style("d",M.toString()).style("stroke",y).style("transform",b).call(la,r).node()}};TF.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const wF={link:yF,arc:bF,smooth:EF,vhv:TF},hP=e=>(t,n,r,i)=>{const{x:s,y:l,x1:u=s,y1:h=l}=r,p=g1(n,r,e),v=t.map(y=>[i.map(p([+s[y],+l[y]],y)),i.map(p([+u[y],+h[y]],y))]);return[t,v]};hP.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:wF,channels:[...ap({shapes:Object.keys(wF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku(),{type:vF},{type:mF}],postInference:[...pf(),...Vy()]};var bq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const AF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:u}=l,h=bq(l,["color"]),{color:p=u,src:v="",size:y=32,transform:b=""}=s;let{width:T=y,height:R=y}=e;const[[M,I]]=i,[N,U]=n.getSize();T=typeof T=="string"?lA(T)*N:T,R=typeof R=="string"?lA(R)*U:R;const H=M-Number(T)/2,X=I-Number(R)/2;return Pa(r.createElement("image",{})).call(la,h).style("x",H).style("y",X).style("src",v).style("stroke",p).style("transform",b).call(la,e).style("width",T).style("height",R).node()}};AF.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const CF={image:AF},OF=e=>{const{cartesian:t}=e;return t?GM:(n,r,i,s)=>{const{x:l,y:u}=i,h=g1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+u[v]];return[s.map(h(y,v))]});return[n,p]}};OF.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:CF,channels:[...ap({shapes:Object.keys(CF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Ku(),{type:dA},{type:pA}],postInference:[...pf(),...Vy()]};var xq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Eq(e,t){const n=J0();if(kl(t)){const r=t.getCenter(),i=[...e,e[0]],s=i.map(l=>Eu(l,r));return i.forEach((l,u)=>{if(u===0){n.moveTo(l[0],l[1]);return}const h=s[u],p=e[u-1],v=s[u-1];v!==void 0&&Math.abs(h-v)<1e-10?V2(n,p,l,r,h):n.lineTo(l[0],l[1])}),n.closePath(),n}return oG(n,e)}const RF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:u}=l,h=xq(l,["color"]),{color:p=u,transform:v}=s,y=Eq(i,n);return Pa(r.createElement("path",{})).call(la,h).style("d",y.toString()).style("stroke",p).style("fill",p).style("transform",v).call(la,e).node()}};RF.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var MF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Sq(e,t){const[n,r,i,s]=e,l=J0();if(kl(t)){const u=t.getCenter(),h=Eu(u,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(u[0],u[1],i[0],i[1]),V2(l,i,s,u,h),l.quadraticCurveTo(u[0],u[1],r[0],r[1]),V2(l,r,n,u,h),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const PF=(e,t)=>{const n=MF(e,[]),{coordinate:r,document:i}=t;return(s,l,u)=>{const{color:h}=u,p=MF(u,["color"]),{color:v=h,transform:y}=l,b=Sq(s,r);return Pa(i.createElement("path",{})).call(la,p).style("d",b.toString()).style("fill",v||h).style("stroke",v||h).style("transform",y).call(la,n).node()}};PF.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const IF={polygon:RF,ribbon:PF},LF=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([u])=>u.startsWith("x")).map(([,u])=>u),s=Object.entries(n).filter(([u])=>u.startsWith("y")).map(([,u])=>u),l=e.map(u=>{const h=[];for(let p=0;p<i.length;p++){const v=i[p][u];if(v===void 0)break;const y=s[p][u];h.push(r.map([+v,+y]))}return h});return[e,l]};LF.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:IF,channels:[...ap({shapes:Object.keys(IF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku()],postInference:[...pf(),...Vy()]};var Tq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wq(e,t){const n=J0();if(!kl(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,s]=r,l=Q0(Lu(e[0],r)),u=Q0(Lu(e[1],r)),h=Eu(r,e[2]),p=Eu(r,e[3]),v=Eu(r,e[8]),y=Eu(r,e[10]),b=Eu(r,e[11]);n.moveTo(...e[0]),n.arc(i,s,h,l,u),n.arc(i,s,h,u,l,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,s,p,l,u),n.lineTo(...e[6]),n.arc(i,s,y,u,l,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,s,v,l,u),n.arc(i,s,v,u,l,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,s,b,l,u),n.arc(i,s,b,u,l,!0)}return n}const DF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:u,transform:h}=s,{color:p,fill:v=p,stroke:y=p}=l,b=Tq(l,["color","fill","stroke"]),T=wq(i,n);return Pa(r.createElement("path",{})).call(la,b).style("d",T.toString()).style("stroke",y).style("fill",u||v).style("transform",h).call(la,e).node()}};DF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Aq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Cq(e,t,n=4){const r=J0();if(!kl(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[s,l]=i,u=Eu(i,e[3]),h=Eu(i,e[8]),p=Eu(i,e[10]),v=Q0(Lu(e[2],i)),y=Math.asin(n/h),b=v-y,T=v+y;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(b)*u+s,Math.sin(b)*u+l),r.arc(s,l,u,b,T),r.lineTo(Math.cos(T)*p+s,Math.sin(T)*p+l),r.arc(s,l,p,T,b,!0),r.lineTo(Math.cos(b)*u+s,Math.sin(b)*u+l),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const R=(b+T)/2;return r.moveTo(Math.cos(R)*(h+n/2)+s,Math.sin(R)*(h+n/2)+l),r.arc(Math.cos(R)*h+s,Math.sin(R)*h+l,n/2,R,Math.PI*2+R),r.closePath(),r}const NF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:u,transform:h}=s,p=4,{color:v,fill:y=v,stroke:b=v}=l,T=Aq(l,["color","fill","stroke"]),R=Cq(i,n,p);return Pa(r.createElement("path",{})).call(la,T).style("d",R.toString()).style("stroke",b).style("fill",u||y).style("transform",h).call(la,e).node()}};NF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const BF={box:DF,violin:NF},FF=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,y2:u,y3:h,y4:p,series:v}=n,y=t.x,b=t.series,T=Array.from(e,R=>{const M=y.getBandWidth(y.invert(+i[R])),I=b?b.getBandWidth(b.invert(+(v==null?void 0:v[R]))):1,N=M*I,U=(+(v==null?void 0:v[R])||0)*M,H=+i[R]+U+N/2,[X,$,Q,ce,pe]=[+s[R],+l[R],+u[R],+h[R],+p[R]];return[[H-N/2,pe],[H+N/2,pe],[H,pe],[H,ce],[H-N/2,ce],[H+N/2,ce],[H+N/2,$],[H-N/2,$],[H-N/2,Q],[H+N/2,Q],[H,$],[H,X],[H-N/2,X],[H+N/2,X]].map(je=>r.map(je))});return[e,T]};FF.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:BF,channels:[...ap({shapes:Object.keys(BF)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Ku(),{type:v1}],postInference:[...pf(),...Qb()],interaction:{shareTooltip:!0}};const kF={vector:fP},UF=()=>(e,t,n,r)=>{const{x:i,y:s,size:l,rotate:u}=n,[h,p]=r.getSize(),v=e.map(y=>{const b=+u[y]/180*Math.PI,T=+l[y],R=T/h,M=T/p,I=R*Math.cos(b),N=-M*Math.sin(b);return[r.map([+i[y]-I/2,+s[y]-N/2]),r.map([+i[y]+I/2,+s[y]+N/2])]});return[e,v]};UF.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:kF,channels:[...ap({shapes:Object.keys(kF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Ku()],postInference:[...pf(),...Vy()]};var zF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Oq(e,t,n){return e.createElement("path",{style:Object.assign({d:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,transformOrigin:"center"},n)})}function Rq(e,t){if(!kl(t))return s1().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return Dw()({startAngle:0,endAngle:Math.PI*2,outerRadius:Eu(e[0],n),innerRadius:Eu(e[1],n)})}function Mq(e,t){if(!kl(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const dP=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=zF(e,["arrow","arrowSize"]),{coordinate:s,document:l}=t;return(u,h,p)=>{const{color:v,lineWidth:y}=p,b=zF(p,["color","lineWidth"]),{color:T=v,size:R=y}=h,M=n?Oq(l,r,Object.assign({fill:i.stroke||T,stroke:i.stroke||T},go(i,"arrow"))):null,I=Rq(u,s),N=Mq(s,h.transform);return Pa(l.createElement("path",{})).call(la,b).style("d",I).style("stroke",T).style("lineWidth",R).style("transform",N).style("markerEnd",M).call(la,i).node()}};dP.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jF=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(aE)?[e,t]:[e,ti({},t,{encode:{x:wc(n)}})]};jF.props={};const VF={line:dP},HF=e=>(t,n,r,i)=>{const{x:s}=r,l=g1(n,r,ti({style:{bandOffset:0}},e)),u=Array.from(t,h=>{const p=[s[h],1],v=[s[h],0];return[p,v].map(y=>i.map(l(y,h)))});return[t,u]};HF.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:VF,channels:[...Jb({shapes:Object.keys(VF)}),{name:"x",required:!0}],preInference:[...Ku(),{type:jF}],postInference:[...pf()]};const WF=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(aE)?[e,t]:[e,ti({},t,{encode:{y:wc(n)}})]};WF.props={};const GF={line:dP},ZF=e=>(t,n,r,i)=>{const{y:s}=r,l=g1(n,r,ti({style:{bandOffset:0}},e)),u=Array.from(t,h=>{const p=[0,s[h]],v=[1,s[h]];return[p,v].map(y=>i.map(l(y,h)))});return[t,u]};ZF.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:GF,channels:[...Jb({shapes:Object.keys(GF)}),{name:"y",required:!0}],preInference:[...Ku(),{type:WF}],postInference:[...pf()]};var XF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Pq(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function Iq(e){return s1().x(t=>t[0]).y(t=>t[1])(e)}function Lq(e,t,n,r,i=0){const[[s,l],[u,h]]=t;if(Tc(e)){const b=s+n,T=u+r,R=b+i;return[[b,l],[R,l],[R,h],[T,h]]}const p=l-n,v=h-r,y=p-i;return[[s,p],[s,y],[u,y],[u,v]]}const $F=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:s,endMarker:l=!0}=e,u=XF(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:h}=t;return(p,v,y)=>{const{color:b,connectLength1:T}=y,R=XF(y,["color","connectLength1"]),{color:M,transform:I}=v,N=Lq(h,p,r,i,s!=null?s:T),U=go(Object.assign(Object.assign({},u),y),"endMarker");return Pa(new vd).call(la,R).style("d",Iq(N)).style("stroke",M||b).style("transform",I).style("markerEnd",l?new Ul({className:"marker",style:Object.assign(Object.assign({},U),{symbol:Pq})}):null).call(la,u).node()}};$F.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const YF={connector:$F},KF=(...e)=>hP(...e);KF.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:YF,channels:[...Jb({shapes:Object.keys(YF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku()],postInference:[...pf()]};function qF(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:s}=n;return l=>{var u;const h=((u=r.getBandWidth)===null||u===void 0?void 0:u.call(r,r.invert(+s[l])))||0;return[i[l],s[l]+h]}}function pP(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,s,l)=>{const u=qF("x",t,s,i.x),h=qF("y",n,s,i.y),p=Array.from(r,v=>{const[y,b]=u(v),[T,R]=h(v);return[[y,T],[b,T],[b,R],[y,R]].map(H=>l.map(H))});return[r,p]}}const QF={range:m1},JF=()=>pP();JF.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:QF,channels:[...Jb({shapes:Object.keys(QF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku()],postInference:[...pf()]};const e8=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(aE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,ti({},t,{encode:{x:wc(r(n,0)),x1:wc(r(n,1))}})]}return[e,t]};e8.props={};const t8={range:m1},n8=()=>pP({extendY:!0});n8.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:t8,channels:[...Jb({shapes:Object.keys(t8)}),{name:"x",required:!0}],preInference:[...Ku(),{type:e8}],postInference:[...pf()]};const r8=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(aE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,ti({},t,{encode:{y:wc(r(n,0)),y1:wc(r(n,1))}})]}return[e,t]};r8.props={};const i8={range:m1},o8=()=>pP({extendX:!0});o8.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:i8,channels:[...Jb({shapes:Object.keys(i8)}),{name:"y",required:!0}],preInference:[...Ku(),{type:r8}],postInference:[...pf()]};var a8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const vP=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=a8(e,["arrow","colorAttribute"]),{coordinate:s,document:l}=t;return(u,h,p)=>{const{color:v,stroke:y}=p,b=a8(p,["color","stroke"]),{d:T,color:R=v}=h,[M,I]=s.getSize();return Pa(l.createElement("path",{})).call(la,b).style("d",typeof T=="function"?T({width:M,height:I}):T).style(r,R).call(la,i).node()}};vP.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const s8=(e,t)=>vP(Object.assign({colorAttribute:"fill"},e),t);s8.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const l8=(e,t)=>vP(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);l8.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const c8={path:s8,hollow:l8},u8=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];u8.props={defaultShape:"path",defaultLabelShape:"label",shape:c8,composite:!1,channels:[...ap({shapes:Object.keys(c8)}),{name:"d",scale:"identity"}],preInference:[...Ku()],postInference:[...pf()]};var Dq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const f8=(e,t)=>{const{render:n}=e,r=Dq(e,["render"]);return i=>{const[[s,l]]=i;return n(Object.assign(Object.assign({},r),{x:s,y:l}),t)}};f8.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const h8=()=>(e,t)=>{const{style:n={}}=t;return[e,ti({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};h8.props={};const Nq={shape:f8},d8=e=>{const{cartesian:t}=e;return t?GM:(n,r,i,s)=>{const{x:l,y:u}=i,h=g1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+u[v]];return[s.map(h(y,v))]});return[n,p]}};d8.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:Nq,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Ku(),{type:dA},{type:pA},{type:h8}]};var Bq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const p8=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{transform:l}=i,{color:u}=s,h=Bq(s,["color"]),{color:p=u}=i,[v,...y]=r,b=J0();return b.moveTo(...v),y.forEach(([T,R])=>{b.lineTo(T,R)}),b.closePath(),Pa(n.createElement("path",{})).call(la,h).style("d",b.toString()).style("stroke",p||u).style("fill",p||u).style("fillOpacity",.4).style("transform",l).call(la,e).node()}};p8.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const v8={density:p8},m8=()=>(e,t,n,r)=>{const{x:i,series:s}=n,l=Object.entries(n).filter(([y])=>y.startsWith("y")).map(([,y])=>y),u=Object.entries(n).filter(([y])=>y.startsWith("size")).map(([,y])=>y);if(i===void 0||l===void 0||u===void 0)throw new Error("Missing encode for x or y or size channel.");const h=t.x,p=t.series,v=Array.from(e,y=>{const b=h.getBandWidth(h.invert(+i[y])),T=p?p.getBandWidth(p.invert(+(s==null?void 0:s[y]))):1,R=b*T,M=(+(s==null?void 0:s[y])||0)*b,I=+i[y]+M+R/2;return[...l.map((U,H)=>[I+ +u[H][y]/e.length,+l[H][y]]),...l.map((U,H)=>[I-+u[H][y]/e.length,+l[H][y]]).reverse()].map(U=>r.map(U))});return[e,v]};m8.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:v8,channels:[...ap({shapes:Object.keys(v8)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Ku(),{type:sE},{type:v1}],postInference:[...pf(),...Qb()],interaction:{shareTooltip:!0}};function g8(e){var t,n,r,i=e||1;function s(u,h){++t>i&&(r=n,l(1),++t),n[u]=h}function l(u){t=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var h=n[u];if(h!==void 0)return h;if((h=r[u])!==void 0)return s(u,h),h},set:function(u,h){n[u]!==void 0?n[u]=h:s(u,h)}}}const xpe=g8(3);function Fq(e,t=(...r)=>`${r[0]}`,n=16){const r=g8(n);return(...i)=>{const s=t(...i);let l=r.get(s);return r.has(s)?r.get(s):(l=e(...i),r.set(s,l),l)}}function kq(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function vA(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const Uq=Fq((e,t,n)=>{const r=vA(n,e*2,e*2),i=r.getContext("2d"),s=e,l=e;if(t===1)i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const u=i.createRadialGradient(s,l,e*t,s,l,e);u.addColorStop(0,"rgba(0,0,0,1)"),u.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=u,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function zq(e,t){const r=vA(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return kq(e).forEach(([s,l])=>{i.addColorStop(s,l)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function jq(e,t,n,r,i,s){const{blur:l}=i;let u=r.length;for(;u--;){const{x:h,y:p,value:v,radius:y}=r[u],b=Math.min(v,n),T=h-y,R=p-y,M=Uq(y,1-l,s),I=(b-t)/(n-t);e.globalAlpha=Math.max(I,.001),e.drawImage(M,T,R)}return e}function Vq(e,t,n,r,i){const{minOpacity:s,opacity:l,maxOpacity:u,useGradientOpacity:h}=i,p=0,v=0,y=t,b=n,T=e.getImageData(p,v,y,b),R=T.data,M=R.length;for(let I=3;I<M;I+=4){const N=R[I],U=N*4;if(!U)continue;const H=l||Math.max(0,Math.min(u,Math.max(s,N)));R[I-3]=r[U],R[I-2]=r[U+1],R[I-1]=r[U+2],R[I]=h?r[U+3]:H}return T}function Hq(e,t,n,r,i,s,l){const u=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);u.minOpacity*=255,u.opacity*=255,u.maxOpacity*=255;const p=vA(l,e,t).getContext("2d"),v=zq(u.gradient,l);p.clearRect(0,0,e,t),jq(p,n,r,i,u,l);const y=Vq(p,e,t,v,u),T=vA(l,e,t).getContext("2d");return T.putImageData(y,0,0),T}var Wq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Gq(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const y8=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:s,blur:l,useGradientOpacity:u}=e,h=Wq(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:p,createCanvas:v,document:y}=t;return(b,T,R)=>{const{transform:M}=T,[I,N]=p.getSize(),U=b.map(ce=>({x:ce[0],y:ce[1],value:ce[2],radius:ce[3]})),H=v0(b,ce=>ce[2]),X=ds(b,ce=>ce[2]),Q=I&&N?Hq(I,N,H,X,U,Gq({gradient:n,opacity:r,minOpacity:s,maxOpacity:i,blur:l,useGradientOpacity:u},ce=>ce===void 0),v):{canvas:null};return Pa(y.createElement("image",{})).call(la,R).style("x",0).style("y",0).style("width",I).style("height",N).style("src",Q.canvas).style("transform",M).call(la,h).node()}};y8.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _8={heatmap:y8},b8=e=>(t,n,r,i)=>{const{x:s,y:l,size:u,color:h}=r,p=Array.from(t,v=>{const y=u?+u[v]:40;return[...i.map([+s[v],+l[v]]),h[v],y]});return[[0],[p]]};b8.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:_8,channels:[...ap({shapes:Object.keys(_8)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Ku(),{type:v1},{type:hA}],postInference:[...pf(),...Vy()]};var Zq=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},Xq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $q(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const Yq=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:e=>e.fontFamily}}),mP=(e,t)=>Zq(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:s={},scale:l,style:u={},layout:h={}}=e,p=Xq(e,["data","encode","scale","style","layout"]),v=$q(i,s);return ti({},Yq(),Object.assign(Object.assign({data:{value:v,transform:[Object.assign({type:"wordCloud",size:[n,r]},h)]},encode:s,scale:l,style:u},p),{axis:!1}))});mP.props={};const x8=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];x8.props={};const E8=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];E8.props={};const S8=e=>new bd(e);S8.props={};const mA=Symbol("defaultUnknown");function T8(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function w8(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:s}=e;let l=i.get(t);if(l===void 0){if(s!==mA)return s;l=n.push(t)-1,i.set(t,l)}return r[l%r.length]}function A8(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class gA extends D2{getDefaultOptions(){return{domain:[],range:[],unknown:mA}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&T8(this.domainIndexMap,this.getDomain(),this.domainKey),w8({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&T8(this.rangeIndexMap,this.getRange(),this.rangeKey),w8({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=A8(n),this.rangeKey=A8(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new gA(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const C8=e=>new gA(e);C8.props={};function O8({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Kq({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qq({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Qq(e){return typeof e=="object"?e.valueOf():e}class R8 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=Qq,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(O8({map:this.map,initKey:this.initKey},t))}has(t){return super.has(O8({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(Kq({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(qq({map:this.map,initKey:this.initKey},t))}}function Jq(e){const t=Math.min(...e);return e.map(n=>n/t)}function eQ(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function tQ(e){return Math.round(e*1e12)/1e12}function nQ(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:s,round:l,align:u}=e,h=t.length,p=eQ(s,h),[v,y]=n,b=y-v,T=2/h*r+1-1/h*i,R=b/T,M=R*i/h,I=R-h*M,N=Jq(p),U=N.reduce((ft,Ye)=>ft+Ye),H=I/U,X=new R8(t.map((ft,Ye)=>{const it=N[Ye]*H;return[ft,l?Math.floor(it):it]})),$=new R8(t.map((ft,Ye)=>{const at=N[Ye]*H+M;return[ft,l?Math.floor(at):at]})),Q=Array.from($.values()).reduce((ft,Ye)=>ft+Ye),pe=(b-(Q-Q/h*i))*u,Re=v+pe;let je=l?Math.round(Re):Re;const Ke=new Array(h);for(let ft=0;ft<h;ft+=1){Ke[ft]=tQ(je);const Ye=t[ft];je+=$.get(Ye)}return{valueBandWidth:X,valueStep:$,adjustedRange:Ke}}function rQ(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return nQ(e);const{range:s,paddingOuter:l,paddingInner:u,round:h,align:p}=e;let v,y,b=s[0];const R=s[1]-b,M=l*2,I=r-u;v=R/Math.max(1,M+I),h&&(v=Math.floor(v)),b+=(R-v*(r-u))*p,y=v*(1-u),h&&(b=Math.round(b),y=Math.round(y));const N=new Array(r).fill(0).map((U,H)=>b+H*v);return{valueStep:v,valueBandWidth:y,adjustedRange:N}}class Hy extends gA{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:mA,flex:[]}}constructor(t){super(t)}clone(){return new Hy(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:s}=this.options,{adjustedRange:l,valueBandWidth:u,valueStep:h}=rQ({align:t,range:r,round:i,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=h,this.valueBandWidth=u,this.adjustedRange=l}}const M8=e=>new Hy(e);M8.props={};class yA extends D2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:ZR}}map(t){return gw(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new yA(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,s]=t;return!(0,Zl.Z)(i)||!(0,Zl.Z)(s)?[]:r(i,s,n)}}const P8=e=>new yA(e);P8.props={};class gP extends Hy{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:mA,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new gP(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const I8=e=>new gP(e);I8.props={};var L8=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Wy="\\d\\d?",Gy="\\d\\d",iQ="\\d{3}",oQ="\\d{4}",uE="[^\\s]+",D8=/\[([^]*?)\]/gm;function N8(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var B8=function(e){return function(t,n){var r=n[e].map(function(s){return s.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function y1(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var l in s)e[l]=s[l]}return e}var F8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k8=["January","February","March","April","May","June","July","August","September","October","November","December"],aQ=N8(k8,3),sQ=N8(F8,3),U8={dayNamesShort:sQ,dayNames:F8,monthNamesShort:aQ,monthNames:k8,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},_A=y1({},U8),lQ=function(e){return _A=y1(_A,e)},z8=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Np=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},cQ={D:function(e){return String(e.getDate())},DD:function(e){return Np(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Np(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Np(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Np(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Np(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Np(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Np(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Np(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Np(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Np(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Np(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Np(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Np(Math.floor(Math.abs(t)/60),2)+":"+Np(Math.abs(t)%60,2)}},j8=function(e){return+e-1},V8=[null,Wy],H8=[null,uE],W8=["isPm",uE,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],G8=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],uQ={D:["day",Wy],DD:["day",Gy],Do:["day",Wy+uE,function(e){return parseInt(e,10)}],M:["month",Wy,j8],MM:["month",Gy,j8],YY:["year",Gy,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",Wy,void 0,"isPm"],hh:["hour",Gy,void 0,"isPm"],H:["hour",Wy],HH:["hour",Gy],m:["minute",Wy],mm:["minute",Gy],s:["second",Wy],ss:["second",Gy],YYYY:["year",oQ],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",Gy,function(e){return+e*10}],SSS:["millisecond",iQ],d:V8,dd:V8,ddd:H8,dddd:H8,MMM:["month",uE,B8("monthNamesShort")],MMMM:["month",uE,B8("monthNames")],a:W8,A:W8,ZZ:G8,Z:G8},bA={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},fQ=function(e){return y1(bA,e)},Z8=function(e,t,n){if(t===void 0&&(t=bA.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=bA[t]||t;var r=[];t=t.replace(D8,function(s,l){return r.push(l),"@@@"});var i=y1(y1({},_A),n);return t=t.replace(L8,function(s){return cQ[s](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function hQ(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=bA[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],u=t.replace(D8,function(X,$){return l.push(z8($)),"@@@"}),h={},p={};u=z8(u).replace(L8,function(X){var $=uQ[X],Q=$[0],ce=$[1],pe=$[3];if(h[Q])throw new Error("Invalid format. "+Q+" specified twice in format");return h[Q]=!0,pe&&(p[pe]=!0),s.push($),"("+ce+")"}),Object.keys(p).forEach(function(X){if(!h[X])throw new Error("Invalid format. "+X+" is required in specified format")}),u=u.replace(/@@@/g,function(){return l.shift()});var v=e.match(new RegExp(u,"i"));if(!v)return null;for(var y=y1(y1({},_A),n),b=1;b<v.length;b++){var T=s[b-1],R=T[0],M=T[2],I=M?M(v[b],y):+v[b];if(I==null)return null;i[R]=I}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var N;if(i.timezoneOffset==null){N=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var U=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,H=U.length;b<H;b++)if(h[U[b][0]]&&i[U[b][0]]!==N[U[b][1]]())return null}else if(N=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return N}var Epe={format:Z8,parse:hQ,defaultI18n:U8,setGlobalDateI18n:lQ,setGlobalDateMasks:fQ},Spe=null;const fE=1e3,hE=fE*60,dE=hE*60,_1=dE*24,pE=_1*7,X8=_1*30,$8=_1*365;function Td(e,t,n,r){const i=(p,v)=>{const y=T=>r(T)%v===0;let b=v;for(;b&&!y(p);)n(p,-1),b-=1;return p},s=(p,v)=>{v&&i(p,v),t(p)},l=(p,v)=>{const y=new Date(+p);return s(y,v),y},u=(p,v)=>{const y=new Date(+p-1);return s(y,v),n(y,v),s(y),y};return{ceil:u,floor:l,range:(p,v,y,b)=>{const T=[],R=Math.floor(y),M=b?u(p,y):u(p);for(let I=M;I<v;n(I,R),s(I))T.push(new Date(+I));return T},duration:e}}const dQ=Td(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),pQ=Td(fE,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+fE*t)},e=>e.getSeconds()),vQ=Td(hE,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+hE*t)},e=>e.getMinutes()),mQ=Td(dE,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+dE*t)},e=>e.getHours()),gQ=Td(_1,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+_1*t)},e=>e.getDate()-1),Y8=Td(X8,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),yQ=Td(pE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=Y8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/pE)}),_Q=Td($8,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),K8={millisecond:dQ,second:pQ,minute:vQ,hour:mQ,day:gQ,week:yQ,month:Y8,year:_Q},bQ=Td(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),xQ=Td(fE,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+fE*t)},e=>e.getUTCSeconds()),EQ=Td(hE,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+hE*t)},e=>e.getUTCMinutes()),SQ=Td(dE,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+dE*t)},e=>e.getUTCHours()),TQ=Td(_1,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+_1*t)},e=>e.getUTCDate()-1),q8=Td(X8,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),wQ=Td(pE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+pE*t)},e=>{const t=q8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/pE)}),AQ=Td($8,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),Q8={millisecond:bQ,second:xQ,minute:EQ,hour:SQ,day:TQ,week:wQ,month:q8,year:AQ};function CQ(e){const t=e?Q8:K8,{year:n,month:r,week:i,day:s,hour:l,minute:u,second:h,millisecond:p}=t;return{tickIntervals:[[h,1],[h,5],[h,15],[h,30],[u,1],[u,5],[u,15],[u,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:p}}function J8(e,t,n,r,i){const s=+e,l=+t,{tickIntervals:u,year:h,millisecond:p}=CQ(i),v=([I,N])=>I.duration*N,y=r?(l-s)/r:n||5,b=r||(l-s)/y,T=u.length,R=kR(u,b,0,T,v);let M;if(R===T){const I=hL(s/h.duration,l/h.duration,y);M=[h,I]}else if(R){const I=b/v(u[R-1])<v(u[R])/b,[N,U]=I?u[R-1]:u[R],H=r?Math.ceil(r/N.duration):U;M=[N,H]}else{const I=Math.max(hL(s,l,y),1);M=[p,I]}return M}const OQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,u=s?e:t,[h,p]=J8(l,u,n,r,i),v=h.range(l,new Date(+u+1),p,!0);return s?v.reverse():v},RQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,u=s?e:t,[h,p]=J8(l,u,n,r,i),v=[h.floor(l,p),h.ceil(u,p)];return s?v.reverse():v};function MQ(e,t){const{second:n,minute:r,hour:i,day:s,week:l,month:u,year:h}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":s.floor(e)<e?"hh A":u.floor(e)<e?l.floor(e)<e?"MMM DD":"ddd DD":h.floor(e)<e?"MMMM":"YYYY"}function PQ(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class yP extends _w{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:OQ,interpolate:Lb,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return RQ}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,s=t[0],l=t[t.length-1];return[s,l,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?Q8:K8,i=n?PQ:n1;return s=>Z8(i(s),t||MQ(s,r))}clone(){return new yP(this.options)}}const ek=e=>new yP(e);ek.props={};const tk=e=>t=>-e(-t),_P=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?tk(r):r},bP=(e,t)=>{const n=e===Math.E?Math.exp:r=>mf(e,r);return t?tk(n):n},IQ=(e,t,n,r=10)=>{const i=e<0,s=bP(r,i),l=_P(r,i),u=t<e,h=u?t:e,p=u?e:t;let v=l(h),y=l(p),b=[];if(!(r%1)&&y-v<n){if(v=Math.floor(v),y=Math.ceil(y),i)for(;v<=y;v+=1){const T=s(v);for(let R=r-1;R>=1;R-=1){const M=T*R;if(M>p)break;M>=h&&b.push(M)}}else for(;v<=y;v+=1){const T=s(v);for(let R=1;R<r;R+=1){const M=T*R;if(M>p)break;M>=h&&b.push(M)}}b.length*2<n&&(b=r1(h,p,n))}else{const T=n===-1?y-v:Math.min(y-v,n);b=r1(v,y,T).map(s)}return u?b.reverse():b},LQ=(e,t,n,r)=>{const i=e<0,s=_P(r,i),l=bP(r,i),u=e>t,h=u?t:e,p=u?e:t,v=[l(Math.floor(s(h))),l(Math.ceil(s(p)))];return u?v.reverse():v};class xP extends _w{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:N2,tickMethod:IQ,tickCount:5}}chooseNice(){return LQ}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],s=t[t.length-1];return[i,s,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[_P(t,r),bP(t,r)]}clone(){return new xP(this.options)}}const nk=e=>new xP(e);nk.props={};const DQ=e=>t=>t<0?-mf(-t,e):mf(t,e),NQ=e=>t=>t<0?-mf(-t,1/e):mf(t,1/e),BQ=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class xA extends _w{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:N2,tickMethod:r1,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[n1,n1];const n=t===.5?BQ:DQ(t),r=NQ(t);return[n,r]}clone(){return new xA(this.options)}}const rk=e=>new xA(e);rk.props={};class EP extends xA{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:N2,tickMethod:r1,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new EP(this.options)}}const ik=e=>new EP(e);ik.props={};const ok=e=>new Db(e);ok.props={};const ak=e=>new ww(e);ak.props={};const sk=e=>new Tw(e);sk.props={};const FQ=e=>t=>{const n=e(t);return(0,Zl.Z)(n)?Math.round(n):n};function kQ(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:s,interpolator:l,round:u}=this.getOptions(),h=t(s.map(r)),p=u?FQ(l):l;this.output=Ib(p,h,i,r)},n.prototype.invert=void 0}}var UQ=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},SP;function zQ(e){return[e(0),e(1)]}const jQ=e=>{const[t,n]=e;return Ib(Lb(0,1),mw(t,n))};let TP=SP=class extends bd{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:n1,tickMethod:r1,tickCount:5}}constructor(t){super(t)}clone(){return new SP(this.options)}};TP=SP=UQ([kQ(zQ,jQ)],TP);const lk=e=>new TP(e);lk.props={};const ck=e=>new k2(e);ck.props={};function wP({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:s,padding2:l,padding3:u,alpha90:h,alpha65:p,alpha45:v,alpha25:y,alpha10:b,category10:T,category20:R,sizeDefault:M=1,padding:I="auto",margin:N=16}){return{padding:I,margin:N,size:M,color:e,category10:T,category20:R,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:b,labelAlign:"horizontal",labelFill:t,labelOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:v,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:v,titleFill:t,titleOpacity:h,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:h,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:v,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:h,tickStroke:t,tickStrokeOpacity:v},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:h,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:p,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const VQ=wP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),AP=e=>ti({},VQ,e);AP.props={};const uk=e=>ti({},AP(),{category10:"category10",category20:"category20"},e);uk.props={};const HQ=wP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),fk=e=>ti({},HQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),hk=e=>Object.assign({},fk(),{category10:"category10",category20:"category20"},e);hk.props={};const WQ=wP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),dk=e=>ti({},WQ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);dk.props={};const pk=e=>(...t)=>{const n=Iy(Object.assign({},{crossPadding:50},e))(...t);return EL(n,e),n};pk.props=Object.assign(Object.assign({},Iy.props),{defaultPosition:"bottom"});function Cpe(){}const vk=e=>(...t)=>{const n=Iy(Object.assign({},{crossPadding:10},e))(...t);return EL(n,e),n};vk.props=Object.assign(Object.assign({},Iy.props),{defaultPosition:"left"});var CP=function(){},GQ=function(e,t,n){var r=e,i=c(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(vl(r[s])||(r[s]=(0,Zl.Z)(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e};function ZQ(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function XQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var tv=K0({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),$Q=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:hW(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,s){return"".concat(i,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new Mf({class:tv.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new Mf({class:tv.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,d.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,ie.CR)(XQ(n.map(function(y){var b=y.getBBox(),T=b.width,R=b.height;return[T,R]})).map(function(y){return Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(y),!1))}),2),i=r[0],s=r[1],l=this.attributes,u=l.pageWidth,h=u===void 0?i:u,p=l.pageHeight,v=p===void 0?s:p;return{pageWidth:h,pageHeight:v}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,s=this.controllerShape,l=this.pageShape,u=l.pageWidth,h=l.pageHeight;return new Gc(r,i,u+s.width,h)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,s=this,l=s.currPage,u=s.playState,h=s.playWindow,p=s.pageViews;if(u!=="idle"||n<0||p.length<=0||n>=p.length)return null;p[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var v=(0,ie.CR)(this.getFollowingPageDiff(n),2),y=v[0],b=v[1];this.playState="running";var T=O4(h,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-y,", ").concat(-b,")")}],i);return Rb(T,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),T},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var s=n?(i-1+r)%r:(0,d.Z)(i-1,0,r);return this.goTo(s)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var s=n?(i+1)%r:(0,d.Z)(i+1,0,r);return this.goTo(s)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,s=r.pageHeight;if(!i||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(tv.clipPath,"rect").styles({width:i,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?O2(r):Py(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,u=l.orientation,h=l.controllerPadding,p=s.getBBox(),v=p.width,y=p.height,b=(0,ie.CR)(u==="horizontal"?[-180,0]:[-90,90],2),T=b[0],R=b[1];r.setLocalEulerAngles(T),i.setLocalEulerAngles(R);var M=r.getBBox(),I=M.width,N=M.height,U=i.getBBox(),H=U.width,X=U.height,$=Math.max(I,v,H),Q=u==="horizontal"?{offset:[[0,0],[I/2+h,0],[I+v+h*2,0]],textAlign:"start"}:{offset:[[$/2,-N-h],[$/2,0],[$/2,X+h]],textAlign:"center"},ce=(0,ie.CR)(Q.offset,3),pe=(0,ie.CR)(ce[0],2),Re=pe[0],je=pe[1],Ke=(0,ie.CR)(ce[1],2),ft=Ke[0],Ye=Ke[1],it=(0,ie.CR)(ce[2],2),at=it[0],vt=it[1],Vt=Q.textAlign,At=s.querySelector("text");At&&(At.style.textAlign=Vt),r.setLocalPosition(Re,je),s.setLocalPosition(ft,Ye),i.setLocalPosition(at,vt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(tv.pageInfo.class))===null||n===void 0||n.attr("text",l(i+1,s.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,u=s.pageHeight,h=n<r?-1:1;return i==="horizontal"?[h*l,0]:[0,h*u]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var l=(0,ie.CR)(this.getFollowingPageDiff(n),2),u=l[0],h=l[1];s[n].setLocalPosition(u,h)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,s=this.pageShape,l=s.pageWidth,u=s.pageHeight,h=this.pageViews.length>=2,p=n.maybeAppendByClassName(tv.controller,"g");if(sw(p.node(),h),!!h){var v=Vs(this.attributes,"button"),y=Vs(this.attributes,"pageNum"),b=(0,ie.CR)(Ag(v),2),T=b[0],R=b[1],M=T.size,I=(0,ie._T)(T,["size"]),N=!p.select(tv.prevBtnGroup.class).node(),U=p.maybeAppendByClassName(tv.prevBtnGroup,"g").styles(R);this.prevBtnGroup=U.node();var H=U.maybeAppendByClassName(tv.prevBtn,"path"),X=p.maybeAppendByClassName(tv.nextBtnGroup,"g").styles(R);this.nextBtnGroup=X.node();var $=X.maybeAppendByClassName(tv.nextBtn,"path");[H,$].forEach(function(ce){ce.styles((0,ie.pi)((0,ie.pi)({},I),{transformOrigin:"center"})),RR(ce.node(),M,!0)});var Q=p.maybeAppendByClassName(tv.pageInfoGroup,"g");this.pageInfoGroup=Q.node(),Q.maybeAppendByClassName(tv.pageInfo,"text").styles(y),this.updatePageInfo(),p.node().setLocalPosition(l+i,u/2),N&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,u=l===void 0?0:l;this.attr("transform","translate(".concat(s,", ").concat(u,")"));var h=ps(r);this.renderClipPath(h),this.renderController(h),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=KT(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Va.INSERTED,r),this.playWindow.addEventListener(Va.REMOVED,r)},t}(yh),m0=K0({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function YQ(e){var t=e.querySelector(m0.marker.class);return t?t.style:{}}var KQ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new $0({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,s=n.node().getBBox(),l=s.width,u=s.height,h=r.node().getBBox(),p=h.width,v=h.height;return{markerWidth:i,labelWidth:l,valueWidth:p,height:Math.max(i,u,v)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,ie.CR)(Vh(n),2),i=r[0],s=r[1],l=this.showValue?s:0,u=i+l;return[i/u,l/u]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,s=r.width,l=this.actualSpace,u=l.markerWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,y=p.valueWidth,b=(0,ie.CR)(this.spacing,2),T=b[0],R=b[1];if(s){var M=s-i-T-R,I=(0,ie.CR)(this.span,2),N=I[0],U=I[1];n=(0,ie.CR)([N*M,U*M],2),v=n[0],y=n[1]}var H=u+v+y+T+R;return{width:H,height:h,markerWidth:u,labelWidth:v,valueWidth:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,ie.CR)(Vh(n),2),i=r[0],s=r[1];return this.showValue?[i,s]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,s=n.valueWidth,l=n.width,u=n.height,h=(0,ie.CR)(this.spacing,2),p=h[0],v=h[1];return{height:u,width:l,markerWidth:r,labelWidth:i,valueWidth:s,position:[r/2,r+p,r+i+p+v]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=YQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,u=r.markerLineWidth,h=u===void 0?n.lineWidth:u,p=r.markerStroke,v=p===void 0?n.stroke:p,y=+(l||h||(v?1:0))*Math.sqrt(2),b=this.markerGroup.node().getBBox(),T=b.width,R=b.height;return(1-y/Math.max(T,R))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,s=Vs(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(m0.markerGroup,"g").style("zIndex",0),Dp(!!i,this.markerGroup,function(){var l,u=r.markerGroup.node(),h=(l=u.childNodes)===null||l===void 0?void 0:l[0],p=typeof i=="string"?new Ul({style:{symbol:i},className:m0.marker.name}):i();h?p.nodeName===h.nodeName?h instanceof Ul?h.update((0,ie.pi)((0,ie.pi)({},s),{symbol:i})):(NV(h,p),ps(h).styles(s)):(h.remove(),ps(p).attr("className",m0.marker.name).styles(s),u.appendChild(p)):(p instanceof Ul||ps(p).attr("className",m0.marker.name).styles(s),u.appendChild(p)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var v=RR(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(v,")")})},t.prototype.renderLabel=function(n){var r=Vs(this.attributes,"label"),i=r.text,s=(0,ie._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(m0.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(m0.label,function(){return t1(i)}).styles(s)},t.prototype.renderValue=function(n){var r=this,i=Vs(this.attributes,"value"),s=i.text,l=(0,ie._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(m0.valueGroup,"g").style("zIndex",0),Dp(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(m0.value,function(){return t1(s)}).styles(l)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,s=r.height,l=Vs(this.attributes,"background");this.background=n.maybeAppendByClassName(m0.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(m0.background,"rect").styles((0,ie.pi)({width:i,height:s},l))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,s=n.height,l=(0,ie.CR)(n.position,3),u=l[0],h=l[1],p=l[2],v=s/2;this.markerGroup.styles({transform:"translate(".concat(u,", ").concat(v,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(h,", ").concat(v,")")}),LR(this.labelGroup.select(m0.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(p,", ").concat(v,")")}),LR(this.valueGroup.select(m0.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=ps(r),s=n.x,l=s===void 0?0:s,u=n.y,h=u===void 0?0:u;i.styles({transform:"translate(".concat(l,", ").concat(h,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(yh),b1=K0({page:"item-page",navigator:"navigator",item:"item"},"items"),mk=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},qQ=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:CP,mouseenter:CP,mouseleave:CP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,s=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,s.length]:[s.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,s=Vs(this.attributes,"item"),l=r.map(function(u,h){var p=u.id,v=p===void 0?h:p,y=u.label,b=u.value;return{id:"".concat(v),index:h,style:(0,ie.pi)({layout:i,labelText:y,valueText:b},Object.fromEntries(Object.entries(s).map(function(T){var R=(0,ie.CR)(T,2),M=R[0],I=R[1];return[M,q0(I,[u,h,r])]})))}});return l},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,s=r.width,l=r.rowPadding,u=r.colPadding,h=(0,ie.CR)(this.navigatorShape,1),p=h[0],v=(0,ie.CR)(this.grid,2),y=v[0],b=v[1],T=b*y,R=0;return this.pageViews.children.map(function(M,I){var N,U,H=Math.floor(I/T),X=I%T,$=n.ifHorizontal(b,y),Q=[Math.floor(X/$),X%$];i==="vertical"&&Q.reverse();var ce=(0,ie.CR)(Q,2),pe=ce[0],Re=ce[1],je=(s-p-(b-1)*u)/b,Ke=M.getBBox().height,ft=(0,ie.CR)([0,0],2),Ye=ft[0],it=ft[1];return i==="horizontal"?(N=(0,ie.CR)([R,pe*(Ke+l)],2),Ye=N[0],it=N[1],R=Re===b-1?0:R+je+u):(U=(0,ie.CR)([Re*(je+u),R],2),Ye=U[0],it=U[1],R=pe===y-1?0:R+Ke+l),{page:H,index:I,row:pe,col:Re,pageIndex:X,width:je,height:Ke,x:Ye,y:it}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,s=n.rowPadding,l=n.colPadding,u=(0,ie.CR)(this.navigatorShape,1),h=u[0],p=(0,ie.CR)(this.grid,2),v=p[0],y=p[1],b=(0,ie.CR)([r-h,i],2),T=b[0],R=b[1],M=(0,ie.CR)([0,0,0,0,0,0,0,0],8),I=M[0],N=M[1],U=M[2],H=M[3],X=M[4],$=M[5],Q=M[6],ce=M[7];return this.pageViews.children.map(function(pe,Re){var je,Ke,ft,Ye,it=pe.getBBox(),at=it.width,vt=it.height,Vt=Q===0?0:l,At=Q+Vt+at;if(At<=T&&mk(X,function(Sn){return Sn<y}))return je=(0,ie.CR)([Q+Vt,ce,At],3),I=je[0],N=je[1],Q=je[2],{width:at,height:vt,x:I,y:N,page:U,index:Re,pageIndex:H++,row:$,col:X++};Ke=(0,ie.CR)([$+1,0,0,ce+vt+s],4),$=Ke[0],X=Ke[1],Q=Ke[2],ce=Ke[3];var Ut=ce+vt;return Ut<=R&&mk($,function(Sn){return Sn<v})?(ft=(0,ie.CR)([Q,ce,at],3),I=ft[0],N=ft[1],Q=ft[2],{width:at,height:vt,x:I,y:N,page:U,index:Re,pageIndex:H++,row:$,col:X++}):(Ye=(0,ie.CR)([0,0,at,0,U+1,0,0,0],8),I=Ye[0],N=Ye[1],Q=Ye[2],ce=Ye[3],U=Ye[4],H=Ye[5],$=Ye[6],X=Ye[7],{width:at,height:vt,x:I,y:N,page:U,index:Re,pageIndex:H++,row:$,col:X++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return Lm(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(b1.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(b1.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,s=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var u=this.dispatchCustomEvent.bind(this);ps(n).selectAll(b1.item.class).data(this.renderData,function(h){return h.id}).join(function(h){return h.append(function(p){var v=p.style;return new KQ({style:v})}).attr("className",b1.item.name).on("click",function(){i==null||i(this),u("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),u("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),u("itemMouseleave",{item:this})})},function(h){return h.each(function(p){var v=p.style;this.update(v)})},function(h){return h.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,u=(0,ie.CR)(this.navigatorShape,2),h=u[0],p=u[1];this.navigator.update(i==="grid"?{pageWidth:s-h,pageHeight:l-p}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(ZQ(this.itemsLayout,"page")).map(function(s){var l=(0,ie.CR)(s,2),u=l[0],h=l[1];return{page:u,layouts:h}}),i=(0,ie.ev)([],(0,ie.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,u=n.pageViews.appendChild(new Mf({className:b1.page.name}));l.forEach(function(h){var p=h.x,v=h.y,y=h.index,b=h.width,T=h.height,R=i[y];u.appendChild(R),GQ(R,"__layout__",h),R.update({x:p,y:v,width:b,height:T})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=Vs(this.attributes,"nav"),s=Tg({orientation:r},i),l=this;return n.selectAll(b1.navigator.class).data(["nav"]).join(function(u){return u.append(function(){return new $Q({style:s})}).attr("className",b1.navigator.name).each(function(){l.navigator=this})},function(u){return u.each(function(){this.update(s)})},function(u){return u.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var s=this.renderNavigator(ps(r));this.renderItems(s.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new Hi(n,{detail:r});this.dispatchEvent(i)},t}(yh),QQ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,xW)||this}return t.prototype.renderTitle=function(n,r,i){var s=this.attributes,l=s.showTitle,u=s.titleText,h=Vs(this.attributes,"title"),p=(0,ie.CR)(Ag(h),2),v=p[0],y=p[1];this.titleGroup=n.maybeAppendByClassName(Hh.titleGroup,"g").styles(y);var b=(0,ie.pi)((0,ie.pi)({width:r,height:i},v),{text:l?u:""});this.title=this.titleGroup.maybeAppendByClassName(Hh.title,function(){return new lL({style:b})}).update(b)},t.prototype.renderItems=function(n,r){var i=r.x,s=r.y,l=r.width,u=r.height,h=Vs(this.attributes,"title",!0),p=(0,ie.CR)(Ag(h),2),v=p[0],y=p[1],b=(0,ie.pi)((0,ie.pi)({},v),{width:l,height:u,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Hh.itemsGroup,"g").styles((0,ie.pi)((0,ie.pi)({},y),{transform:"translate(".concat(i,", ").concat(s,")")}));var T=this;this.itemsGroup.selectAll(Hh.items.class).data(["items"]).join(function(R){return R.append(function(){return new qQ({style:b})}).attr("className",Hh.items.name).each(function(){T.items=ps(this)})},function(R){return R.update(b)},function(R){return R.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,s=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(s,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Gc(0,0,i,s)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!s?e.prototype.getBBox.call(this):nH(i,s)},t.prototype.render=function(n,r){var i=this.attributes,s=i.width,l=i.height,u=i.x,h=u===void 0?0:u,p=i.y,v=p===void 0?0:p,y=ps(r);r.style.transform="translate(".concat(h,", ").concat(v,")"),this.renderTitle(y,s,l),this.renderItems(y,this.availableSpace),this.adjustLayout()},t}(yh);function vE(e){if(ls(e)){var t=e;return t[t.length-1]}}var JQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eJ(e,t){const n=Pm(e,"shape"),r=Pm(e,"color"),i=n?n.clone():null,s=[];for(const[u,h]of t){const p=u.type,y=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:h.data).map((b,T)=>{var R;return i?i.map(b||"point"):((R=u==null?void 0:u.style)===null||R===void 0?void 0:R.shape)||h.defaultShape||"point"});typeof p=="string"&&s.push([p,y])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([u,h])=>{let p=0;for(let v=0;v<s.length;v++){const y=l[v%l.length];h[v]===y&&p++}return[p/h.length,[u,h]]}).sort((u,h)=>h[0]-u[0])[0][1]}function tJ(e,t){const{scales:n,library:r,markState:i}=t,[s,l]=eJ(n,i),{itemMarker:u,itemMarkerSize:h}=e,p=(b,T)=>{var R,M,I;const N=((I=(M=(R=r[`mark.${s}`])===null||R===void 0?void 0:R.props)===null||M===void 0?void 0:M.shape[b])===null||I===void 0?void 0:I.props.defaultMarker)||vE(b.split(".")),U=typeof h=="function"?h(T):h;return()=>cq(N,{color:T.color})(0,0,U)},v=b=>`${l[b]}`;return Pm(n,"shape")&&!u?(b,T)=>p(v(T),b):typeof u=="function"?(b,T)=>{const R=u(b.id,T);return typeof R=="string"?p(R,b):R}:(b,T)=>p(u||v(T),b)}function nJ(e){const t=Pm(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function rJ(e,t){const n=Pm(e,"size");return n instanceof yA?n.map(NaN)*2:t}function iJ(e,t){const{labelFormatter:n=b=>`${b}`}=e,{scales:r,theme:i}=t,s=i.legendCategory.itemMarkerSize,l=rJ(r,s),u={itemMarker:tJ(Object.assign(Object.assign({},e),{itemMarkerSize:l}),t),itemMarkerSize:l,itemMarkerOpacity:nJ(r)},h=typeof n=="string"?$e(n):n,p=Pm(r,"color"),v=RH(r),y=p?b=>p.map(b):()=>t.theme.color;return Object.assign(Object.assign({},u),{data:v.map(b=>({id:b,label:h(b),color:y(b)}))})}function oJ(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:l}=e,{width:u,height:h}=l;return{width:u,height:h}}const{width:i,height:s}=bL(e,t,n);return{width:i,height:s}}const OP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:u,cols:h,itemMarker:p}=e,v=JQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:y}=v;return b=>{const{value:T,theme:R}=b,{bbox:M}=T,{width:I,height:N}=oJ(T,e,OP),U=yL(s,n),H=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:I,height:N,layout:h!==void 0?"grid":"flex"},h!==void 0&&{gridCol:h}),y!==void 0&&{gridRow:y}),{titleText:bw(u)}),iJ(e,b)),{legendCategory:X={}}=R,$=xw(Object.assign({},X,H,v)),Q=new AH({style:Object.assign(Object.assign({x:M.x,y:M.y,width:M.width,height:M.height},U),{subOptions:$})});return Q.appendChild(new QQ({className:"legend-category",style:$})),Q}};OP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const gk=e=>()=>new Mf;gk.props={};var aJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yk(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const sJ=wH({render(e,t){const{width:n,title:r,subtitle:i,spacing:s=2,align:l="left",x:u,y:h}=e,p=aJ(e,["width","title","subtitle","spacing","align","x","y"]);t.style.transform=`translate(${u}, ${h})`;const v=go(p,"title"),y=go(p,"subtitle"),T=gL(t,".title","text").attr("className","title").call(la,Object.assign(Object.assign(Object.assign({},yk(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),v)).node().getLocalBounds();gL(t,".sub-title","text").attr("className","sub-title").call(R=>{if(!i)return R.node().remove();R.node().attr(Object.assign(Object.assign(Object.assign({},yk(0,T.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:i}),y))})}}),_k=e=>({value:t,theme:n})=>{const{x:r,y:i,width:s,height:l}=t.bbox;return new sJ({style:ti({},n.title,Object.assign({x:r,y:i,width:s,height:l},e))})};_k.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var RP=function(e){if(typeof e!="object"||e===null)return e;var t;if(jo(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=RP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=RP(e[i]):t[i]=e[i]}return t},MP=RP,lJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,ti({},{type:"column"},(0,ie.pi)({style:i},s)))||this,r.columnsGroup=new Mf({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,s=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(s,")"),ps(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(u){this.attr(u)})},function(l){return l.each(function(u){this.attr(u)})},function(l){return l.remove()})},t.prototype.update=function(n){this.attr(Tg({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(qf),cJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,ti({},{type:"lines"},(0,ie.pi)({style:i},s)))||this,r.linesGroup=r.appendChild(new Mf),r.areasGroup=r.appendChild(new Mf),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,s=n.x,l=n.y;this.style.transform="translate(".concat(s,", ").concat(l,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(Tg({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){ps(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){ps(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(qf);function uJ(e,t,n,r){var i,s=[],l=!!r,u,h,p=[1/0,1/0],v=[-1/0,-1/0],y,b,T;if(l){i=(0,ie.CR)(r,2),p=i[0],v=i[1];for(var R=0,M=e.length;R<M;R+=1){var I=e[R];p=J_(p,I),v=e1(v,I)}}for(var R=0,N=e.length;R<N;R+=1){var I=e[R];if(R===0&&!n)T=I;else if(R===N-1&&!n)b=I,s.push(T),s.push(b);else{var U=[R?R-1:N-1,R-1][n?0:1];u=e[U],h=e[n?(R+1)%N:R+1];var H=[0,0];H=wR(h,u),H=wg(H,t);var X=M2(I,u),$=M2(I,h),Q=X+$;Q!==0&&(X/=Q,$/=Q);var ce=wg(H,-X),pe=wg(H,$);b=R2(I,ce),y=R2(I,pe),y=J_(y,e1(h,I)),y=e1(y,J_(h,I)),ce=wR(y,I),ce=wg(ce,-X/$),b=R2(I,ce),b=J_(b,e1(u,I)),b=e1(b,J_(u,I)),pe=wR(I,b),pe=wg(pe,$/X),y=R2(I,pe),l&&(b=e1(b,p),b=J_(b,v),y=e1(y,p),y=J_(y,v)),s.push(T),s.push(b),T=y}}return n&&s.push(s.shift()),s}function fJ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,s=[],l=0,u=e.length;l<u;l+=2)s.push([e[l],e[l+1]]);for(var h=uJ(s,.4,i,n),p=s.length,v=[],y,b,T,l=0;l<p-1;l+=1)y=h[l*2],b=h[l*2+1],T=s[l+1],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]]);return i&&(y=h[p],b=h[p+1],r=(0,ie.CR)(s,1),T=r[0],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]])),v}function hJ(e,t){var n,r=t.x,i=t.y,s=(0,ie.CR)(i.getOptions().range||[0,0],2),l=s[0],u=s[1];return u>l&&(n=(0,ie.CR)([l,u],2),u=n[0],l=n[1]),e.map(function(h){var p=h.map(function(v,y){return[r.map(y),(0,d.Z)(i.map(v),u,l)]});return p})}function mE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,s){return(0,ie.ev)([s===n?"M":"L"],(0,ie.CR)(i),!1)});return t?r.reverse():r}function EA(e,t){if(t===void 0&&(t=!1),e.length<=2)return mE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var s=t?e[r-i-1]:e[i];_s(s,n.slice(-2))||n.push.apply(n,(0,ie.ev)([],(0,ie.CR)(s),!1))}var l=fJ(n,!1);return t?l.unshift((0,ie.ev)(["M"],(0,ie.CR)(e[r-1]),!1)):l.unshift((0,ie.ev)(["M"],(0,ie.CR)(e[0]),!1)),l}function PP(e,t,n){var r=MP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function dJ(e,t,n,r){return e.map(function(i){return PP(t?EA(i):mE(i),n,r)})}function pJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=mE(s),u=void 0;if(i===0)u=PP(l,t,n);else{var h=e[i-1],p=mE(h,!0);p[0][0]="L",u=(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(l),!1),(0,ie.CR)(p),!1),[["Z"]],!1)}r.push(u)}return r}function vJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=EA(s),u=void 0;if(i===0)u=PP(l,t,n);else{var h=e[i-1],p=EA(h,!0),v=s[0];p[0][0]="L",u=(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(l),!1),(0,ie.CR)(p),!1),[(0,ie.ev)(["M"],(0,ie.CR)(v),!1),["Z"]],!1)}r.push(u)}return r}var mJ=function(e,t){if(jo(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=op(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},gJ=function(e,t){if(jo(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=op(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}};function bk(e){return e.length===0?[0,0]:[qa(mJ(e,function(t){return qa(t)||0})),Vo(gJ(e,function(t){return Vo(t)||0}))]}function xk(e){for(var t=MP(e),n=t[0].length,r=(0,ie.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],s=r[1],l=0;l<t.length;l+=1)for(var u=t[l],h=0;h<n;h+=1)u[h]>=0?(u[h]+=i[h],i[h]=u[h]):(u[h]+=s[h],s[h]=u[h]);return t}var yJ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=MP(n);return(0,Zl.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?xk(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,ie.CR)(n.getOptions().domain||[0,0],2),i=r[0],s=r[1];return s<0?n.map(s):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,s=r.isStack,l=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var u=Vs(this.attributes,"area"),h=Vs(this.attributes,"line"),p=this.containerShape.width,v=this.data;if(v[0].length===0)return{lines:[],areas:[]};var y=this.scales,b=y.x,T=y.y,R=hJ(v,{type:"line",x:b,y:T}),M=[];if(u){var I=this.baseline;s?M=l?vJ(R,p,I):pJ(R,p,I):M=dJ(R,l,p,I)}return{lines:R.map(function(N,U){return(0,ie.pi)({stroke:n.getColor(U),d:l?EA(N):mE(N)},h)}),areas:M.map(function(N,U){return(0,ie.pi)({d:N,fill:n.getColor(U)},u)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=Vs(this.attributes,"column"),i=this.attributes,s=i.isStack,l=i.type,u=i.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var h=this.containerShape.height,p=this.rawData;if(!p)return{columns:[]};s&&(p=xk(p));var v=this.createScales(p),y=v.x,b=v.y,T=(0,ie.CR)(bk(p),2),R=T[0],M=T[1],I=new bd({domain:[0,M-(R>0?0:R)],range:[0,h*u]}),N=y.getBandWidth(),U=this.rawData;return{columns:p.map(function(H,X){return H.map(function($,Q){var ce=N/p.length,pe=function(){return{x:y.map(Q)+ce*X,y:$>=0?b.map($):b.map(0),width:ce,height:I.map(Math.abs($))}},Re=function(){return{x:y.map(Q),y:b.map($),width:N,height:I.map(U[X][Q])}};return(0,ie.pi)((0,ie.pi)({fill:n.getColor(X)},r),s?Re():pe())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){Zj(r,".container","rect").attr("className","container").node();var i=n.type,s=n.x,l=n.y,u="spark".concat(i),h=(0,ie.pi)({x:s,y:l},i==="line"?this.linesStyle:this.columnsStyle);ps(r).selectAll(".spark").data([i]).join(function(p){return p.append(function(v){return v==="line"?new cJ({className:u,style:h}):new lJ({className:u,style:h})}).attr("className","spark ".concat(u))},function(p){return p.update(h)},function(p){return p.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return jo(r)?r[n%r.length]:op(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,s=this.attributes,l=s.type,u=s.scale,h=s.range,p=h===void 0?[]:h,v=s.spacing,y=this.containerShape,b=y.width,T=y.height,R=(0,ie.CR)(bk(n),2),M=R[0],I=R[1],N=new bd({domain:[(r=p[0])!==null&&r!==void 0?r:M,(i=p[1])!==null&&i!==void 0?i:I],range:[T,T*(1-u)]});return l==="line"?{type:l,x:new bd({domain:[0,n[0].length-1],range:[0,b]}),y:N}:{type:l,x:new Hy({domain:n[0].map(function(U,H){return H}),range:[0,b],paddingInner:v,paddingOuter:v/2,align:.5}),y:N}},t.tag="sparkline",t}(yh),Ek=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,(0,ie.pi)((0,ie.pi)((0,ie.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Mm(ML,"handle")),Mm(OL,"handleIcon")),Mm(RL,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(s){s.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(Sw(s));var l=r.availableSpace,u=l.x,h=l.y,p=r.getBBox(),v=p.x,y=p.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([u,h])-r.getOrientVal([+v,+y])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var s=r.attributes,l=s.slidable,u=s.brushable,h=s.type;i.stopPropagation();var p=r.getOrientVal(Sw(i)),v=p-r.prevPos;if(v){var y=r.getRatio(v);switch(r.target){case"start":l&&r.setValuesOffset(y);break;case"end":l&&r.setValuesOffset(0,y);break;case"selection":l&&r.setValuesOffset(y,y);break;case"track":if(!u)return;r.selectionWidth+=y,h==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=p}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var s=r.attributes,l=s.onChange,u=s.type,h=u==="range"?i:i[1],p=u==="range"?r.getValues():r.getValues()[1],v=new Hi("valuechange",{detail:{oldValue:h,value:p}});r.dispatchEvent(v),l==null||l(p)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=Vs(this.attributes,"sparkline");return(0,ie.pi)((0,ie.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,s=(0,ie.CR)(this.getOrientVal([[r,i],[i,r]]),2),l=s[0],u=s[1];return{width:l,height:u}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,s=n.padding,l=(0,ie.CR)(Vh(s),4),u=l[0],h=l[1],p=l[2],v=l[3],y=this.shape,b=y.width,T=y.height;return{x:v,y:u,width:b-(v+h),height:T-(u+p)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Im.selection.class).each(function(i,s){Uv(this,r[s],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Uv(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Uv(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,s=r.y,l=Vs(this.attributes,"track");this.trackShape=ps(n).maybeAppendByClassName(Im.track,"rect").styles((0,ie.pi)((0,ie.pi)({x:i,y:s},this.shape),l))},t.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.brushable;this.brushArea=ps(n).maybeAppendByClassName(Im.brushArea,"rect").styles((0,ie.pi)({x:i,y:s,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,u=i.orientation,h=ps(n).maybeAppendByClassName(Im.sparklineGroup,"g");Dp(u==="horizontal",h,function(p){var v=(0,ie.pi)((0,ie.pi)({},r.sparklineStyle),{x:s,y:l});p.maybeAppendByClassName(Im.sparkline,function(){return new yJ({style:v})}).update(v)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,s=i.showHandle,l=i.type,u=l==="range"?["start","end"]:["end"],h=s?u:[],p=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Im.handle.class).data(h.map(function(v){return{type:v}}),function(v){return v.type}).join(function(v){return v.append(function(y){var b=y.type;return new PL({style:n.getHandleStyle(b)})}).each(function(y){var b=y.type;this.attr("class","".concat(Im.handle.name," ").concat(b,"-handle"));var T="".concat(b,"Handle");p[T]=this,this.addEventListener("pointerdown",p.onDragStart(b))})},function(v){return v.each(function(y){var b=y.type;this.update(p.getHandleStyle(b))})},function(v){return v.each(function(y){var b=y.type,T="".concat(b,"Handle");p[T]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.type,u=r.selectionType;this.foregroundGroup=ps(n).maybeAppendByClassName(Im.foreground,"g");var h=Vs(this.attributes,"selection"),p=function(y){return y.style("visibility",function(b){return b.show?"visible":"hidden"}).style("cursor",function(b){return u==="select"?"grab":u==="invert"?"crosshair":"default"}).styles((0,ie.pi)((0,ie.pi)({},h),{transform:"translate(".concat(i,", ").concat(s,")")}))},v=this;this.foregroundGroup.selectAll(Im.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(y,b){return{style:(0,ie.pi)({},y),index:b,show:u==="select"?b===1:b!==1}}),function(y){return y.index}).join(function(y){return y.append("rect").attr("className",Im.selection.name).call(p).each(function(b,T){var R=this;T===1?(v.selectionShape=ps(this),this.on("pointerdown",function(M){R.attr("cursor","grabbing"),v.onDragStart("selection")(M)}),v.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),v.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),v.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){R.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){R.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){R.attr("cursor","pointer")})):this.on("pointerdown",v.onDragStart("track"))})},function(y){return y.call(p)},function(y){return y.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var s=(0,ie.CR)(this.range,2),l=s[0],u=s[1],h=(0,ie.CR)(this.getValues().map(function(I){return Ew(I,r)}),2),p=h[0],v=h[1],y=Array.isArray(n)?n:[p,n!=null?n:v],b=(0,ie.CR)((y||[p,v]).map(function(I){return Ew(I,r)}),2),T=b[0],R=b[1];if(this.attributes.type==="value")return[0,(0,d.Z)(R,l,u)];T>R&&(i=(0,ie.CR)([R,T],2),T=i[0],R=i[1]);var M=R-T;return M>u-l?[l,u]:T<l?p===l&&v===R?[l,R]:[l,M+l]:R>u?v===u&&p===T?[T,u]:[u-M,u]:[T,R]},t.prototype.calcSelectionArea=function(n){var r=(0,ie.CR)(this.clampValues(n),2),i=r[0],s=r[1],l=this.availableSpace,u=l.x,h=l.y,p=l.width,v=l.height;return this.getOrientVal([[{y:h,height:v,x:u,width:i*p},{y:h,height:v,x:i*p+u,width:(s-i)*p},{y:h,height:v,x:s*p,width:(1-s)*p}],[{x:u,width:p,y:h,height:i*v},{x:u,width:p,y:i*v+h,height:(s-i)*v},{x:u,width:p,y:s*v,height:(1-s)*v}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,s=i.x,l=i.y,u=i.width,h=i.height,p=(0,ie.CR)(this.clampValues(),2),v=p[0],y=p[1],b=n==="start"?-r:r,T=(n==="start"?v:y)*this.getOrientVal([u,h])+b;return{x:s+this.getOrientVal([T,u/2]),y:l+this.getOrientVal([h/2,T])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,s=i.type,l=i.orientation,u=i.formatter,h=i.autoFitLabel,p=Vs(this.attributes,"handle"),v=Vs(p,"label"),y=p.spacing,b=this.getHandleSize(),T=this.clampValues(),R=n==="start"?T[0]:T[1],M=u(R),I=new SR({style:(0,ie.pi)((0,ie.pi)((0,ie.pi)({},v),this.inferTextStyle(n)),{text:M})}),N=I.getBBox(),U=N.width,H=N.height;if(I.destroy(),!h){if(s==="value")return{text:M,x:0,y:-H-y};var X=y+b+(l==="horizontal"?U/2:0);return r={text:M},r[l==="horizontal"?"x":"y"]=n==="start"?-X:X,r}var $=0,Q=0,ce=this.availableSpace,pe=ce.width,Re=ce.height,je=this.calcSelectionArea()[1],Ke=je.x,ft=je.y,Ye=je.width,it=je.height,at=y+b;if(l==="horizontal"){var vt=at+U/2;if(n==="start"){var Vt=Ke-at-U;$=Vt>0?-vt:vt}else{var At=pe-Ke-Ye-at>U;$=At?vt:-vt}}else{var Ut=at,Sn=H+at;n==="start"?Q=ft-b>H?-Sn:Ut:Q=Re-(ft+it)-b>H?Sn:-Ut}return{x:$,y:Q,text:M}},t.prototype.getHandleLabelStyle=function(n){var r=Vs(this.attributes,"handleLabel");return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=Vs(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,ie.pi)({cursor:i,shape:n,size:s},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.showLabel,u=r.showLabelOnInteraction,h=r.orientation,p=this.calcHandlePosition(n),v=p.x,y=p.y,b=this.calcHandleText(n),T=l;return!l&&u&&(this.target?T=!0:T=!1),(0,ie.pi)((0,ie.pi)((0,ie.pi)({},Mm(this.getHandleIconStyle(),"icon")),Mm((0,ie.pi)((0,ie.pi)({},this.getHandleLabelStyle(n)),b),"label")),{transform:"translate(".concat(v+i,", ").concat(y+s,")"),orientation:h,showLabel:T,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?i:s},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=this.attributes.type,l=(0,ie.CR)(this.getValues(),2),u=l[0],h=l[1],p=s==="range"?n:0,v=[u+p,h+r].sort();i?this.setValues(v):this.innerSetValues(v,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,s=r.height;return n/this.getOrientVal([i,s])},t.prototype.dispatchCustomEvent=function(n,r,i){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new Hi(i,{detail:l}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,s=n.deltaY,l=s||i,u=this.getRatio(l);this.setValuesOffset(u,u,!0)}},t.tag="slider",t}(yh),_J=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bJ(e,t,n){const{x:r,y:i,width:s,height:l}=e;if(t==="left")return[r+s-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+l-n]}const gE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:s}=e,l=_J(e,["orientation","labelFormatter","size","style","position"]);return u=>{var h;const{scales:[p],value:v,theme:y,coordinate:b}=u,{bbox:T}=v,{width:R,height:M}=T,{slider:I={}}=y,N=((h=p.getFormatter)===null||h===void 0?void 0:h.call(p))||(pe=>pe+""),U=typeof n=="string"?$e(n):n,H=t==="horizontal",X=Tc(b)&&H,{trackSize:$=I.trackSize}=i,[Q,ce]=bJ(T,s,$);return new Ek({className:"slider",style:Object.assign({},I,Object.assign(Object.assign({x:Q,y:ce,trackLength:H?R:M,orientation:t,formatter:pe=>{const Re=U||N,je=X?1-pe:pe,Ke=kb(p,je,!0);return Re(Ke)},sparklineData:EJ(e,u)},i),l))})}};function xJ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").filter(([i])=>i.slider).map(([i])=>{const{encode:s,slider:l}=i;if(l!=null&&l.x){const u=h=>{const p=s[h];return[h,p?p.value:void 0]};return Object.fromEntries(t.map(u))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,s,l)=>(i[s]=i[s]||[],i[s].push(n.y[l]),i),{});return Object.values(r)}function EJ(e,t){const{markState:n}=t;return jo(e.sparklineData)?e.sparklineData:xJ(n,["y","series"])}gE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const Sk=e=>gE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));Sk.props=Object.assign(Object.assign({},gE.props),{defaultPosition:"bottom"});const Tk=e=>gE(Object.assign(Object.assign({},e),{orientation:"vertical"}));Tk.props=Object.assign(Object.assign({},gE.props),{defaultPosition:"left"});var SJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var s=r.attributes.value;if(i!==s){var l={detail:{oldValue:i,value:s}};r.dispatchEvent(new Hi("scroll",l)),r.dispatchEvent(new Hi("valuechange",l))}},r.onTrackClick=function(i){var s=r.attributes.slidable;if(s){var l=(0,ie.CR)(r.getLocalPosition(),2),u=l[0],h=l[1],p=(0,ie.CR)(r.padding,4),v=p[0],y=p[3],b=r.getOrientVal([u+y,h+v]),T=r.getOrientVal(Sw(i)),R=(T-b)/r.trackLength;r.setValue(R,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Hi("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Hi("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Hi("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Hi("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return Vh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,ie.CR)(this.range,2),i=r[0],s=r[1];return(0,d.Z)(n,i,s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,s=i===void 0?r:i;return s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,ie.CR)(this.padding,4),s=i[0],l=i[1],u=i[2],h=i[3],p=(0,ie.CR)(this.getOrientVal([[r,n],[n,r]]),2),v=p[0],y=p[1];return{x:h,y:s,width:+v-(h+l),height:+y-(s+u)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,u=s.height;return i||this.getOrientVal([u,l])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,s=r.contentLength,l=i/s,u=(0,ie.CR)(this.range,2),h=u[0],p=u[1],v=n*(p-h-l);return[v,v+l]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,u=r.trackSize,h=r.padding,p=r.slidable,v=Vs(this.attributes,"track"),y=Vs(this.attributes,"thumb"),b=(0,ie.pi)((0,ie.pi)({x:i,y:s,brushable:!1,orientation:l,padding:h,selectionRadius:this.thumbRadius,showHandle:!1,slidable:p,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:u,values:this.getValues()},Mm(v,"track")),Mm(y,"selection"));this.slider=ps(n).maybeAppendByClassName("scrollbar",function(){return new Ek({style:b})}).update(b).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,s=(0,ie.CR)(this.range,2),l=s[0],u=s[1];this.slider.setValues(this.getValues((0,d.Z)(n,l,u)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(yh),TJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const yE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=TJ(e,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:u})=>{const{bbox:h}=l,{x:p,y:v,width:y,height:b}=h,{scrollbar:T={}}=u,{ratio:R,range:M}=s.getOptions(),I=t==="horizontal"?y:b,N=I/R,[U,H]=M,X=H>U?0:1;return new SJ({className:"g2-scrollbar",style:Object.assign({},T,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:p,y:v,trackLength:I,value:X}),i),{orientation:t,contentLength:N,viewportLength:I}))})}};yE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const wk=e=>yE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));wk.props=Object.assign(Object.assign({},yE.props),{defaultPosition:"bottom"});const Ak=e=>yE(Object.assign(Object.assign({},e),{orientation:"vertical"}));Ak.props=Object.assign(Object.assign({},yE.props),{defaultPosition:"left"});const IP=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[u]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=u.style,[b,T]=Tc(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],R=[{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y}];return u.animate(R,Object.assign(Object.assign({},l),e))}},wJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[u]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=u.style,[b,T]=Tc(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],R=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(R,Object.assign(Object.assign({},l),e))}},Ck=(e,t)=>{const{coordinate:r}=t;return r2.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Co.NUMBER}),(i,s,l)=>{const[u]=i,h=v=>{const{__data__:y,style:b}=v,{radius:T=0,inset:R=0,fillOpacity:M=1,strokeOpacity:I=1,opacity:N=1}=b,{points:U,y:H,y1:X}=y,$=o1(r,U,[H,X]),{innerRadius:Q,outerRadius:ce}=$,pe=Dw().cornerRadius(T).padAngle(R*Math.PI/180),Re=new vd({}),je=Ye=>(Re.attr({d:pe(Ye)}),ZS(Re)),Ke=[{scaleInYRadius:Q+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:Q+1e-4,fillOpacity:M,strokeOpacity:I,opacity:N,offset:.01},{scaleInYRadius:ce,fillOpacity:M,strokeOpacity:I,opacity:N}],ft=v.animate(Ke,Object.assign(Object.assign({},l),e));return ft.onframe=function(){v.style.d=je(Object.assign(Object.assign({},$),{outerRadius:Number(v.style.scaleInYRadius)}))},ft.onfinish=function(){v.style.d=je(Object.assign(Object.assign({},$),{outerRadius:ce}))},ft},p=v=>{const{style:y}=v,{transform:b="",fillOpacity:T=1,strokeOpacity:R=1,opacity:M=1}=y,[I,N]=Tc(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],U=[{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:R,opacity:M,offset:.01},{transform:`${b} scale(1, 1)`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:R,opacity:M}];return v.animate(U,Object.assign(Object.assign({},l),e))};return kl(r)?h(u):p(u)}},AJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[u]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=u.style,[b,T]=Tc(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],R=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(R,Object.assign(Object.assign({},l),e))}},Ok=(e,t)=>{r2.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Co.NUMBER});const{coordinate:r}=t;return(i,s,l)=>{const[u]=i;if(!kl(r))return IP(e,t)(i,s,l);const{__data__:h,style:p}=u,{radius:v=0,inset:y=0,fillOpacity:b=1,strokeOpacity:T=1,opacity:R=1}=p,{points:M,y:I,y1:N}=h,U=Dw().cornerRadius(v).padAngle(y*Math.PI/180),H=o1(r,M,[I,N]),{startAngle:X,endAngle:$}=H,Q=[{waveInArcAngle:X+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:X+1e-4,fillOpacity:b,strokeOpacity:T,opacity:R,offset:.01},{waveInArcAngle:$,fillOpacity:b,strokeOpacity:T,opacity:R}],ce=u.animate(Q,Object.assign(Object.assign({},l),e));return ce.onframe=function(){u.style.d=U(Object.assign(Object.assign({},H),{endAngle:Number(u.style.waveInArcAngle)}))},ce.onfinish=function(){u.style.d=U(Object.assign(Object.assign({},H),{endAngle:$}))},ce}};Ok.props={};const Rk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=i.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:u}];return i.animate(h,Object.assign(Object.assign({},r),e))};Rk.props={};const Mk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=i.style,h=[{fillOpacity:s,strokeOpacity:l,opacity:u},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(h,Object.assign(Object.assign({},r),e))};Mk.props={};const CJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:u,strokeOpacity:h,opacity:p,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:v,fillOpacity:u,strokeOpacity:h,opacity:p}];return s.animate(y,Object.assign(Object.assign({},i),e))},OJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:v},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:u,strokeOpacity:h,opacity:p,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(y,Object.assign(Object.assign({},i),e))},Pk=e=>(t,n,r)=>{var i,s;const[l]=t,u=((s=(i=l).getTotalLength)===null||s===void 0?void 0:s.call(i))||0,h=[{lineDash:[0,u]},{lineDash:[u,0]}];return l.animate(h,Object.assign(Object.assign({},r),e))};Pk.props={};const RJ={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},MJ={[ai.CIRCLE]:["cx","cy","r"],[ai.ELLIPSE]:["cx","cy","rx","ry"],[ai.RECT]:["x","y","width","height"],[ai.IMAGE]:["x","y","width","height"],[ai.LINE]:["x1","y1","x2","y2"],[ai.POLYLINE]:["points"],[ai.POLYGON]:["points"]};function tx(e,t,n=!1){const r={};for(const i of t){const s=e.style[i];s?r[i]=s:n&&(r[i]=RJ[i])}return r}const _E=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function LP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[s,l]=n,u=l-i,h=s-r;return[r,i,h,u]}function PJ(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function IJ(e,t){const[n,r,i,s]=LP(e),l=s/i,u=Math.ceil(Math.sqrt(t/l)),h=Math.ceil(t/u),p=[],v=s/h;let y=0,b=t;for(;b>0;){const T=Math.min(b,u),R=i/T;for(let M=0;M<T;M++){const I=n+M*R,N=r+y*v;p.push(PJ([I,N,R,v]))}b-=T,y+=1}return p}function LJ(e="pack"){return typeof e=="function"?e:IJ}function DJ(e,t,n){let{transform:r}=e.style;const{transform:i}=t.style;Ik(t,e);let s=_E;if(e.nodeName===ai.GROUP){const[h,p,v,y]=LP(e),[b,T,R,M]=LP(t),I=h-b,N=p-T,U=v/R,H=y/M;r=`translate(${I}, ${N}) scale(${U}, ${H})`}else s=s.concat(MJ[e.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},tx(e,s,!0)),Object.assign({transform:i!=null?i:"none"},tx(t,s,!0))];return t.animate(l,n)}function Ik(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function NJ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new vd({style:Object.assign(Object.assign({},tx(e,_E)),{d:t})});return Ik(r,e),r}function Lk(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function BJ(e){return!Lk(e,"m")||!Lk(e,"M")}function Dk(e){const t=ZS(e);if(t&&!BJ(t))return t}function DP(e,t,n,r){const{nodeName:i}=t,{nodeName:s}=n,l=Dk(t),u=Dk(n);if(i===s&&i!=="path"||(l===void 0||u===void 0))return DJ(t,n,r);const v=NJ(e,l),y=[Object.assign({},tx(t,_E)),Object.assign({},tx(n,_E))];if(l!==u){y[0].d=l,y[1].d=u;const b=v.animate(y,r);return b.onfinish=()=>{const T=v.style.d;Tb(v,n),v.style.d=T,v.style.transform="none"},v.style.transform="none",b}return null}function FJ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((s,l)=>{const u=new vd({style:Object.assign({d:i[l]},tx(e,_E))});return DP(s,u,s,n)})}function kJ(e,t,n,r){const i=r(t,e.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=t.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:u}],p=t.animate(h,n);return[...e.map((y,b)=>{const T=new vd({style:{d:i[b],fill:t.style.fill}});return DP(y,y,T,n)}),p]}const Nk=e=>(t,n,r)=>{const i=LJ(e.split),s=Object.assign(Object.assign({},r),e),{length:l}=t,{length:u}=n;if(l===1&&u===1||l>1&&u>1){const[h]=t,[p]=n;return DP(h,h,p,s)}if(l===1&&u>1){const[h]=t;return FJ(h,n,s,i)}if(l>1&&u===1){const[h]=n;return kJ(t,h,s,i)}return null};Nk.props={};const Bk=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,u],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new vd({style:{d:`M${l},${u}L${l+p},${u}L${l+p},${u+v}L${l},${u+v}Z`}});return s.appendChild(y),s.style.clipPath=y,IP(e,t)([y],r,i)};Bk.props={};const Fk=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,u],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new vd({style:{d:`M${l},${u}L${l+p},${u}L${l+p},${u+v}L${l},${u+v}Z`}});return s.appendChild(y),s.style.clipPath=y,Ck(e,t)([y],r,i)};Fk.props={};var UJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,background:s=!1,delay:l=60,scale:u,coordinate:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),R=Kl(b,r),M=q2(b,n),[I,N]=T6(Object.assign({elements:b,valueof:M,link:i,coordinate:h},go(v.active,"link"))),[U,H,X]=A6(Object.assign({document:e.ownerDocument,scale:u,coordinate:h,background:s,valueof:M},go(v.active,"background"))),$=ti(v,{active:Object.assign({},((y=v.active)===null||y===void 0?void 0:y.offset)&&{transform:(...Vt)=>{const At=v.active.offset(...Vt),[,Ut]=Vt;return w6(b[Ut],At,h)}})}),{setState:Q,removeState:ce,hasState:pe}=Rg($,M);let Re;const je=Vt=>{const{target:At,nativeEvent:Ut=!0}=Vt;if(!T.has(At))return;Re&&clearTimeout(Re);const Sn=r(At),Vn=R.get(Sn),rr=new Set(Vn);for(const or of b)rr.has(or)?pe(or,"active")||Q(or,"active"):(Q(or,"inactive"),N(or)),or!==At&&H(or);U(At),I(Vn),Ut&&p.emit("element:highlight",{nativeEvent:Ut,data:{data:n(At),group:Vn.map(n)}})},Ke=()=>{Re&&clearTimeout(Re),Re=setTimeout(()=>{ft(),Re=null},l)},ft=(Vt=!0)=>{for(const At of b)ce(At,"active","inactive"),H(At),N(At);Vt&&p.emit("element:unhighlight",{nativeEvent:Vt})},Ye=Vt=>{const{target:At}=Vt;s&&!X(At)||!s&&!T.has(At)||(l>0?Ke():ft())},it=()=>{ft()};e.addEventListener("pointerover",je),e.addEventListener("pointerout",Ye),e.addEventListener("pointerleave",it);const at=Vt=>{const{nativeEvent:At}=Vt;At||ft(!1)},vt=Vt=>{const{nativeEvent:At}=Vt;if(At)return;const{data:Ut}=Vt.data,Sn=dM(b,Ut,n);Sn&&je({target:Sn,nativeEvent:!1})};return p.on("element:highlight",vt),p.on("element:unhighlight",at),()=>{e.removeEventListener("pointerover",je),e.removeEventListener("pointerout",Ye),e.removeEventListener("pointerleave",it),p.off("element:highlight",vt),p.off("element:unhighlight",at);for(const Vt of b)H(Vt),N(Vt)}}function SA(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,s=UJ(e,["delay","createGroup","background","link"]);return(l,u,h)=>{const{container:p,view:v,options:y}=l,{scale:b,coordinate:T}=v,R=Nm(p);return zJ(R,Object.assign({elements:Fy,datum:c1(v),groupKey:n?n(v):void 0,coordinate:T,scale:b,state:zb(y,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:h},s))}}SA.props={reapplyWhenUpdate:!0};function kk(e){return SA(Object.assign(Object.assign({},e),{createGroup:hM}))}kk.props={reapplyWhenUpdate:!0};function Uk(e){return SA(Object.assign(Object.assign({},e),{createGroup:S6}))}Uk.props={reapplyWhenUpdate:!0};var jJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function VJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,single:s=!1,coordinate:l,background:u=!1,scale:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),R=Kl(b,r),M=q2(b,n),[I,N]=T6(Object.assign({link:i,elements:b,valueof:M,coordinate:l},go(v.selected,"link"))),[U,H]=A6(Object.assign({document:e.ownerDocument,background:u,coordinate:l,scale:h,valueof:M},go(v.selected,"background"))),X=ti(v,{selected:Object.assign({},((y=v.selected)===null||y===void 0?void 0:y.offset)&&{transform:(...it)=>{const at=v.selected.offset(...it),[,vt]=it;return w6(b[vt],at,l)}})}),{setState:$,removeState:Q,hasState:ce}=Rg(X,M),pe=(it=!0)=>{for(const at of b)Q(at,"selected","unselected"),N(at),H(at);it&&p.emit("element:unselect",{nativeEvent:!0})},Re=(it,at,vt=!0)=>{if(ce(at,"selected"))pe();else{const Vt=r(at),At=R.get(Vt),Ut=new Set(At);for(const Sn of b)Ut.has(Sn)?$(Sn,"selected"):($(Sn,"unselected"),N(Sn)),Sn!==at&&H(Sn);if(I(At),U(at),!vt)return;p.emit("element:select",Object.assign(Object.assign({},it),{nativeEvent:vt,data:{data:[n(at),...At.map(n)]}}))}},je=(it,at,vt=!0)=>{const Vt=r(at),At=R.get(Vt),Ut=new Set(At);if(ce(at,"selected")){if(!b.some(Vn=>!Ut.has(Vn)&&ce(Vn,"selected")))return pe();for(const Vn of At)$(Vn,"unselected"),N(Vn),H(Vn)}else{const Sn=At.some(Vn=>ce(Vn,"selected"));for(const Vn of b)Ut.has(Vn)?$(Vn,"selected"):ce(Vn,"selected")||$(Vn,"unselected");!Sn&&i&&I(At),U(at)}vt&&p.emit("element:select",Object.assign(Object.assign({},it),{nativeEvent:vt,data:{data:b.filter(Sn=>ce(Sn,"selected")).map(n)}}))},Ke=it=>{const{target:at,nativeEvent:vt=!0}=it;return T.has(at)?s?Re(it,at,vt):je(it,at,vt):pe()};e.addEventListener("click",Ke);const ft=it=>{const{nativeEvent:at,data:vt}=it;if(at)return;const Vt=s?vt.data.slice(0,1):vt.data;for(const At of Vt){const Ut=dM(b,At,n);Ke({target:Ut,nativeEvent:!1})}},Ye=()=>{pe(!1)};return p.on("element:select",ft),p.on("element:unselect",Ye),()=>{for(const it of b)N(it);e.removeEventListener("click",Ke),p.off("element:select",ft),p.off("element:unselect",Ye)}}function TA(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=jJ(e,["createGroup","background","link"]);return(s,l,u)=>{const{container:h,view:p,options:v}=s,{coordinate:y,scale:b}=p,T=Nm(h);return VJ(T,Object.assign({elements:Fy,datum:c1(p),groupKey:t?t(p):void 0,coordinate:y,scale:b,state:zb(v,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:u},i))}}TA.props={reapplyWhenUpdate:!0};function zk(e){return TA(Object.assign(Object.assign({},e),{createGroup:hM}))}zk.props={reapplyWhenUpdate:!0};function jk(e){return TA(Object.assign(Object.assign({},e),{createGroup:S6}))}jk.props={reapplyWhenUpdate:!0};var x1=function(e,t,n){var r,i,s,l,u=0;n||(n={});var h=function(){u=n.leading===!1?0:Date.now(),r=null,l=e.apply(i,s),r||(i=s=null)},p=function(){var v=Date.now();!u&&n.leading===!1&&(u=v);var y=t-(v-u);return i=this,s=arguments,y<=0||y>t?(r&&(clearTimeout(r),r=null),u=v,l=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(h,y)),l};return p.cancel=function(){clearTimeout(r),u=0,r=i=s=null},p};function HJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(s=>s.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function WJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:s,setState:l,container:u}=r,h=Nm(u),p=x1(v=>{const y=K2(h,v);if(!y){l("fisheye"),s();return}l("fisheye",b=>{const T=ti({},b,{interaction:{tooltip:{preserve:!0}}});for(const N of T.marks)N.animate=!1;const[R,M]=y,I=HJ(T);return I.focusX=R,I.focusY=M,I.visual=!0,T}),s()},e,{leading:t,trailing:n});return h.addEventListener("pointerenter",p),h.addEventListener("pointermove",p),h.addEventListener("pointerleave",p),()=>{h.removeEventListener("pointerenter",p),h.removeEventListener("pointermove",p),h.removeEventListener("pointerleave",p)}}}var GJ=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},ZJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function XJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function $J(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:s}=i,l=u=>{const h=s[u];return[u,h?h.value:void 0]};return Object.fromEntries(n.map(l))});return r}function Vk(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=l=>`${l}`}=e,s=ZJ(e,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:u,container:h,update:p,setState:v}=l,{markState:y,scale:b,coordinate:T}=u,R=$J(y,"line",["x","y","series"]);if(!R)return;const{y:M,x:I,series:N=[]}=R,U=M.map((Vt,At)=>At),H=zv(U.map(Vt=>I[Vt])),X=Nm(h),$=h.getElementsByClassName(va),Q=h.getElementsByClassName(Sl),pe=Kl(Q,Vt=>Vt.__data__.key.split("-")[0]),Re=new _y({style:Object.assign({x1:0,y1:0,x2:0,y2:X.getAttribute("height"),stroke:"black",lineWidth:1},go(s,"rule"))}),je=new mh({style:Object.assign({x:0,y:X.getAttribute("height"),text:"",fontSize:10},go(s,"label"))});Re.append(je),X.appendChild(Re);const Ke=(Vt,At,Ut)=>{const[Sn]=Vt.invert(Ut),Vn=At.invert(Sn);return H[PG(H,Vn)]},ft=(Vt,At)=>{Re.setAttribute("x1",Vt[0]),Re.setAttribute("x2",Vt[0]),je.setAttribute("text",i(At))};let Ye;const it=Vt=>GJ(this,void 0,void 0,function*(){const{x:At}=b,Ut=Ke(T,At,Vt);ft(Vt,Ut),v("chartIndex",Vn=>{const rr=ti({},Vn),or=rr.marks.find(qr=>qr.type==="line"),fi=ds(x2(U,qr=>ds(qr,Io=>+M[Io])/v0(qr,Io=>+M[Io]),qr=>N[qr]).values()),Qi=[1/fi,fi];ti(or,{scale:{y:{domain:Qi}}});const Jr=XJ(or);Jr.groupBy="color",Jr.basis=(qr,Io)=>{const Ji=qr[Ny(Wi=>I[+Wi]).center(qr,Ut)];return Io[Ji]};for(const qr of rr.marks)qr.animate=!1;return rr}),Ye=(yield p("chartIndex")).view}),at=Vt=>{const{scale:At,coordinate:Ut}=Ye,{x:Sn,y:Vn}=At,rr=Ke(Ut,Sn,Vt);ft(Vt,rr);for(const or of $){const{seriesIndex:Hr,key:fi}=or.__data__,Qi=Hr[Ny(Ko=>I[+Ko]).center(Hr,rr)],Jr=[0,Vn.map(1)],qr=[0,Vn.map(M[Qi]/M[Hr[0]])],[,Io]=Ut.map(Jr),[,Ji]=Ut.map(qr),Wi=Io-Ji;or.setAttribute("transform",`translate(0, ${Wi})`);const wo=pe.get(fi)||[];for(const Ko of wo)Ko.setAttribute("dy",Wi)}},vt=x1(Vt=>{const At=K2(X,Vt);At&&at(At)},t,{leading:n,trailing:r});return it([0,0]),X.addEventListener("pointerenter",vt),X.addEventListener("pointermove",vt),X.addEventListener("pointerleave",vt),()=>{Re.remove(),X.removeEventListener("pointerenter",vt),X.removeEventListener("pointermove",vt),X.removeEventListener("pointerleave",vt)}}}Vk.props={reapplyWhenUpdate:!0};function bE(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function xE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Hk(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function YJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var KJ=YJ;function NP(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var Wk={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function qJ(e){var t;e===void 0&&(e="");var n=NP(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,ie.pi)({flex:1},Wk),t[".".concat(n.VALUE)]=(0,ie.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Wk),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var QJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i,s,l=(s=(i=n.style)===null||i===void 0?void 0:i.template)===null||s===void 0?void 0:s.prefixCls,u=NP(l);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(u.CONTAINER,'"></div>'),title:'<div class="'.concat(u.TITLE,'"></div>'),item:'<li class="'.concat(u.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(u.NAME,`">
          <span class="`).concat(u.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(u.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(u.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:qJ(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(s,l){var u=s.name,h=u===void 0?"":u,p=s.color,v=p===void 0?"black":p,y=s.index,b=(0,ie._T)(s,["name","color","index"]),T=(0,ie.pi)({name:h,color:v,index:y!=null?y:l},b);return Hk(KJ(i.item,T))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=Hk(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,s=i.template,l=i.title,u=i.enterable,h=i.style,p=i.content,v=NP(s.prefixCls),y=this.element;if(this.element.style.pointerEvents=u?"auto":"none",p)this.renderCustomContent();else{l?(y.innerHTML=s.title,y.getElementsByClassName(v.TITLE)[0].innerHTML=l):(r=(n=y.getElementsByClassName(v.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var b=this.HTMLTooltipItemsElements,T=document.createElement("ul");T.className=v.LIST,T.replaceChildren.apply(T,(0,ie.ev)([],(0,ie.CR)(b),!1));var R=this.element.querySelector(".".concat(v.LIST));R?R.replaceWith(T):y.appendChild(T)}Kj(y,h)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,s=r.offset,l=n||i,u=l.split("-"),h={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},p=this.elementSize,v=p.width,y=p.height,b=[-v/2,-y/2];return u.forEach(function(T){var R=(0,ie.CR)(b,2),M=R[0],I=R[1],N=(0,ie.CR)(h[T],2),U=N[0],H=N[1];b=[M+(v/2+s[0])*U,I+(y/2+s[1])*H]}),b},t.prototype.setOffsetPosition=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes,u=l.x,h=u===void 0?0:u,p=l.y,v=p===void 0?0:p,y=l.container,b=y.x,T=y.y;this.element.style.left="".concat(+h+b+i,"px"),this.element.style.top="".concat(+v+T+s,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes,u=l.x,h=l.y,p=l.bounding,v=l.position;if(!p)return[i,s];var y=this.element,b=y.offsetWidth,T=y.offsetHeight,R=(0,ie.CR)([+u+i,+h+s],2),M=R[0],I=R[1],N={left:"right",right:"left",top:"bottom",bottom:"top"},U=p.x,H=p.y,X=p.width,$=p.height,Q={left:M<U,right:M+b>U+X,top:I<H,bottom:I+T>H+$},ce=[];v.split("-").forEach(function(Re){Q[Re]?ce.push(N[Re]):ce.push(Re)});var pe=ce.join("-");return this.getRelativeOffsetFromCursor(pe)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),s=i.x,l=i.y,u=i.width,h=i.height;return new Gc(s,l,u,h).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(yh),E1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wA(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function JJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return{x:n,y:r,width:i-n,height:s-r}}function eee(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function tee(e,t,n,r,i,s,l,u={},h=[10,10]){const p={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},v=new QJ({className:"tooltip",style:{x:t,y:n,container:l,data:[],bounding:s,position:r,enterable:i,title:"",offset:h,template:{prefixCls:"g2-"},style:ti(p,u)}});return e.appendChild(v.HTMLTooltipElement),v}function Gk({root:e,data:t,x:n,y:r,render:i,event:s,single:l,position:u="right-bottom",enterable:h=!1,css:p,mount:v,bounding:y,offset:b}){const T=wA(e,v),R=wA(e),M=l?R:e,I=y||JJ(e),N=eee(R,T),{tooltipElement:U=tee(T,n,r,u,h,I,N,p,b)}=M,{items:H,title:X=""}=t;U.update(Object.assign({x:n,y:r,data:H,title:X,position:u,enterable:h},i!==void 0&&{content:i(s,{items:H,title:X})})),M.tooltipElement=U}function Zy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=wA(e),l=t?s:e,{tooltipElement:u}=l;u&&u.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY),Kk(e),qk(e),Qk(e)}function BP({root:e,single:t}){const n=wA(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0),Kk(e),qk(e),Qk(e)}function Zk(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function nee(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(ul).map(s=>{var{color:l=Xk(e)}=s,u=E1(s,["color"]);return Object.assign(Object.assign({},u),{color:l})}).map(Zk);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function ree(e,t){const{color:n,series:r,facet:i=!1}=e,{color:s,series:l}=t,u=h=>h&&h.invert&&!(h instanceof Hy)&&!(h instanceof k2);if(u(r))return r.clone().invert(l);if(l&&r instanceof Hy&&r.invert(l)!==s&&!i)return r.invert(l);if(u(n)){const h=n.invert(s);return Array.isArray(h)?null:h}return null}function Xk(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function $k(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function Yk(e,t,n,r=e.map(s=>s.__data__),i={}){const s=h=>h instanceof Date?+h:h,l=$k(r.map(h=>h.title),s).filter(ul),u=r.flatMap((h,p)=>{const v=e[p],{items:y=[],title:b}=h,T=y.filter(ul),R=n!==void 0?n:y.length<=1;return T.map(M=>{var{color:I=Xk(v)||i.color,name:N}=M,U=E1(M,["color","name"]);const H=ree(t,h),X=R?H||N:N||H;return Object.assign(Object.assign({},U),{color:I,name:X||b})})}).map(Zk);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:$k(u,h=>`(${s(h.name)}, ${s(h.value)}, ${s(h.color)})`)})}function iee(e,t,n,r){var{plotWidth:i,plotHeight:s,mainWidth:l,mainHeight:u,startX:h,startY:p,transposed:v,polar:y,insetLeft:b,insetTop:T}=r,R=E1(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const M=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},R),I=(Q,ce,pe)=>{const Re=new $0({style:Object.assign({cx:Q,cy:ce,r:pe},M)});return e.appendChild(Re),Re},N=(Q,ce,pe,Re)=>{const je=new _y({style:Object.assign({x1:Q,x2:ce,y1:pe,y2:Re},M)});return e.appendChild(je),je},H=((Q,ce)=>{if(ce.length===1)return ce[0];const pe=ce.map(je=>Eu(je,Q)),Re=bE(pe,je=>je);return ce[Re]})(n,t),X=()=>v?[h+H[0],h+H[0],p,p+s]:[h,h+i,H[1]+p,H[1]+p],$=()=>{const Q=h+b+l/2,ce=p+T+u/2,pe=Eu([Q,ce],H);return[Q,ce,pe]};if(y){const[Q,ce,pe]=$(),Re=e.ruleX||I(Q,ce,pe);Re.style.cx=Q,Re.style.cy=ce,Re.style.r=pe,e.ruleX=Re}else{const[Q,ce,pe,Re]=X(),je=e.ruleX||N(Q,ce,pe,Re);je.style.x1=Q,je.style.x2=ce,je.style.y1=pe,je.style.y2=Re,e.ruleX=je}}function oee(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:s,mainHeight:l,startX:u,startY:h,transposed:p,polar:v,insetLeft:y,insetTop:b}=n,T=E1(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const R=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},T),M=t.map(Re=>Re[1]),I=t.map(Re=>Re[0]),N=xE(M),U=xE(I),H=()=>{if(v){const Re=Math.min(s,l)/2,je=u+y+s/2,Ke=h+b+l/2,ft=Q0(Lu([U,N],[je,Ke])),Ye=je+Re*Math.cos(ft),it=Ke+Re*Math.sin(ft);return[je,Ye,Ke,it]}return p?[u,u+r,N+h,N+h]:[U+u,U+u,h,h+i]},[X,$,Q,ce]=H(),pe=()=>{const Re=new _y({style:Object.assign({x1:X,x2:$,y1:Q,y2:ce},R)});return e.appendChild(Re),Re};if(I.length>0){const Re=e.ruleY||pe();Re.style.x1=X,Re.style.x2=$,Re.style.y1=Q,Re.style.y2=ce,e.ruleY=Re}}function Kk(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function qk(e){e.ruleX&&(e.ruleX.remove(),e.ruleX=void 0)}function aee(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(l=>l.remove());const{type:i=""}=n,s=t.filter(l=>{const[{x:u,y:h}]=l;return ul(u)&&ul(h)}).map(l=>{const[{color:u,element:h},p]=l,v=u||h.style.fill||h.style.stroke||r.color,y=i==="hollow"?"transparent":v,b=i==="hollow"?v:"#fff";return new $0({className:"g2-tooltip-marker",style:Object.assign({cx:p[0],cy:p[1],fill:y,r:4,stroke:b,lineWidth:2},n)})});for(const l of s)e.appendChild(l);e.markers=s}function Qk(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function Jk(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function Pg(e,t){return e===void 0?t:e}function e7(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function see(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function t7(e,t){var{elements:n,sort:r,filter:i,scale:s,coordinate:l,crosshairs:u,crosshairsX:h,crosshairsY:p,render:v,groupName:y,emitter:b,wait:T=50,leading:R=!0,trailing:M=!1,startX:I=0,startY:N=0,body:U=!0,single:H=!0,position:X,enterable:$,mount:Q,bounding:ce,theme:pe,offset:Re,disableNative:je=!1,marker:Ke=!0,preserve:ft=!1,style:Ye={},css:it={}}=t,at=E1(t,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const vt=n(e),Vt=Tc(l),At=kl(l),Ut=ti(Ye,at),{innerWidth:Sn,innerHeight:Vn,width:rr,height:or,insetLeft:Hr,insetTop:fi}=l.getOptions(),Qi=[],Jr=[];for(const aa of vt){const{__data__:ts}=aa,{seriesX:ks,title:Hs,items:Cc}=ts;ks?Qi.push(aa):(Hs||Cc)&&Jr.push(aa)}const qr=aa=>aa.markType==="interval",Io=Jr.length&&Jr.every(qr)&&!kl(l),Ji=aa=>aa.__data__.x,wo=!!s.x.getBandWidth&&Jr.length>0;Qi.sort((aa,ts)=>{const ks=Vt?0:1,Hs=Cc=>Cc.getBounds().min[ks];return Vt?Hs(ts)-Hs(aa):Hs(aa)-Hs(ts)});const Ko=aa=>{const ts=Vt?1:0,{min:ks,max:Hs}=aa.getLocalBounds();return zv([ks[ts],Hs[ts]])};Io?vt.sort((aa,ts)=>Ji(aa)-Ji(ts)):Jr.sort((aa,ts)=>{const[ks,Hs]=Ko(aa),[Cc,Qu]=Ko(ts),Ju=(ks+Hs)/2,Gh=(Cc+Qu)/2;return Vt?Gh-Ju:Ju-Gh});const ca=new Map(Qi.map(aa=>{const{__data__:ts}=aa,{seriesX:ks}=ts,Hs=ks.map((Qu,Ju)=>Ju),Cc=zv(Hs,Qu=>ks[+Qu]);return[aa,[Cc,ks]]})),{x:Oa}=s,Zs=Oa!=null&&Oa.getBandWidth?Oa.getBandWidth()/2:0,Ta=aa=>{const[ts]=l.invert(aa);return ts-Zs},vs=(aa,ts,ks,Hs)=>{const{_x:Cc}=aa,Qu=Cc!==void 0?Oa.map(Cc):Ta(ts),Ju=Hs.filter(ul),[Gh,av]=zv([Ju[0],Ju[Ju.length-1]]),Zv=Gh===av;if(!wo&&(Qu<Gh||Qu>av)&&!Zv)return null;const gx=Ny(kg=>Hs[+kg]).center,tS=gx(ks,Qu);return ks[tS]},Ml=Io?(aa,ts)=>{const ks=Ny(Ji).center,Hs=ks(ts,Ta(aa)),Cc=ts[Hs];return Kl(ts,Ji).get(Ji(Cc))}:(aa,ts)=>{const Hs=aa[Vt?1:0],Cc=ts.filter(Gh=>{const[av,Zv]=Ko(Gh);return Hs>=av&&Hs<=Zv});if(!wo||Cc.length>0)return Cc;const Qu=Ny(Gh=>{const[av,Zv]=Ko(Gh);return(av+Zv)/2}).center,Ju=Qu(ts,Hs);return[ts[Ju]].filter(ul)},Fu=(aa,ts)=>{const{__data__:ks}=aa;return Object.fromEntries(Object.entries(ks).filter(([Hs])=>Hs.startsWith("series")&&Hs!=="series").map(([Hs,Cc])=>{const Qu=Cc[ts];return[S2(Hs.replace("series","")),Qu]}))},Jf=x1(aa=>{var ts;const ks=K2(e,aa);if(!ks)return;const Hs=E6(e),Cc=Hs.min[0],Qu=Hs.min[1],Ju=[ks[0]-I,ks[1]-N];if(!Ju)return;const Gh=Ml(Ju,Jr),av=[],Zv=[];for(const vf of Qi){const[rS,F5]=ca.get(vf),iS=vs(aa,Ju,rS,F5);if(iS!==null){av.push(vf);const OC=Fu(vf,iS),{x:Lde,y:Dde}=OC,Nde=l.map([(Lde||0)+Zs,Dde||0]);Zv.push([Object.assign(Object.assign({},OC),{element:vf}),Nde])}}const gx=Array.from(new Set(Zv.map(vf=>vf[0].x))),tS=gx[bE(gx,vf=>Math.abs(vf-Ta(Ju)))],kg=Zv.filter(vf=>vf[0].x===tS),N5=[...kg.map(vf=>vf[0]),...Gh.map(vf=>vf.__data__)],CC=[...av,...Gh],nS=Yk(CC,s,y,N5,pe);if(r&&nS.items.sort((vf,rS)=>r(vf)-r(rS)),i&&(nS.items=nS.items.filter(i)),CC.length===0||e7(nS)){$c(aa);return}if(U&&Gk({root:e,data:nS,x:ks[0]+Cc,y:ks[1]+Qu,render:v,event:aa,single:H,position:X,enterable:$,mount:Q,bounding:ce,css:it,offset:Re}),u||h||p){const vf=go(Ut,"crosshairs"),rS=Object.assign(Object.assign({},vf),go(Ut,"crosshairsX")),F5=Object.assign(Object.assign({},vf),go(Ut,"crosshairsY")),iS=kg.map(OC=>OC[1]);h&&iee(e,iS,ks,Object.assign(Object.assign({},rS),{plotWidth:Sn,plotHeight:Vn,mainWidth:rr,mainHeight:or,insetLeft:Hr,insetTop:fi,startX:I,startY:N,transposed:Vt,polar:At})),p&&oee(e,iS,Object.assign(Object.assign({},F5),{plotWidth:Sn,plotHeight:Vn,mainWidth:rr,mainHeight:or,insetLeft:Hr,insetTop:fi,startX:I,startY:N,transposed:Vt,polar:At}))}if(Ke){const vf=go(Ut,"marker");aee(e,{data:kg,style:vf,theme:pe})}const B5=(ts=kg[0])===null||ts===void 0?void 0:ts[0].x,Ide=B5!=null?B5:Ta(Ju);b.emit("tooltip:show",Object.assign(Object.assign({},aa),{nativeEvent:!0,data:{data:{x:kb(s.x,Ide,!0)}}}))},T,{leading:R,trailing:M}),$c=aa=>{Zy({root:e,single:H,emitter:b,event:aa})},bh=()=>{BP({root:e,single:H})},ku=aa=>{var ts,{nativeEvent:ks,data:Hs,offsetX:Cc,offsetY:Qu}=aa,Ju=E1(aa,["nativeEvent","data","offsetX","offsetY"]);if(ks)return;const Gh=(ts=Hs==null?void 0:Hs.data)===null||ts===void 0?void 0:ts.x,Zv=s.x.map(Gh),[gx,tS]=l.map([Zv,.5]),kg=e.getRenderBounds(),N5=kg.min[0],CC=kg.min[1];Jf(Object.assign(Object.assign({},Ju),{offsetX:Cc!==void 0?Cc:N5+gx,offsetY:Qu!==void 0?Qu:CC+tS,_x:Gh}))},cp=()=>{Zy({root:e,single:H,emitter:b,nativeEvent:!1})},Ac=()=>{Pf(),bh()},Uc=()=>{Wh()},Wh=()=>{je||(e.addEventListener("pointerenter",Jf),e.addEventListener("pointermove",Jf),e.addEventListener("pointerleave",aa=>{K2(e,aa)||$c(aa)}))},Pf=()=>{je||(e.removeEventListener("pointerenter",Jf),e.removeEventListener("pointermove",Jf),e.removeEventListener("pointerleave",$c))};return Wh(),b.on("tooltip:show",ku),b.on("tooltip:hide",cp),b.on("tooltip:disable",Ac),b.on("tooltip:enable",Uc),()=>{Pf(),b.off("tooltip:show",ku),b.off("tooltip:hide",cp),b.off("tooltip:disable",Ac),b.off("tooltip:enable",Uc),ft?Zy({root:e,single:H,emitter:b,nativeEvent:!1}):bh()}}function lee(e,{elements:t,coordinate:n,scale:r,render:i,groupName:s,sort:l,filter:u,emitter:h,wait:p=50,leading:v=!0,trailing:y=!1,groupKey:b=Ke=>Ke,single:T=!0,position:R,enterable:M,datum:I,view:N,mount:U,bounding:H,theme:X,offset:$,shared:Q=!1,body:ce=!0,disableNative:pe=!1,preserve:Re=!1,css:je={}}){var Ke,ft;const Ye=t(e),it=Kl(Ye,b),at=Wi=>Wi.markType==="interval",vt=Ye.every(at)&&!kl(n),Vt=r.x,At=r.series,Ut=(ft=(Ke=Vt==null?void 0:Vt.getBandWidth)===null||Ke===void 0?void 0:Ke.call(Vt))!==null&&ft!==void 0?ft:0,Sn=At?Wi=>Wi.__data__.x+Wi.__data__.series*Ut:Wi=>Wi.__data__.x+Ut/2;vt&&Ye.sort((Wi,wo)=>Sn(Wi)-Sn(wo));const Vn=Wi=>{const{target:wo}=Wi;return Uw(wo,Ko=>Ko.classList?Ko.classList.includes("element"):!1)},rr=vt?Wi=>{const wo=K2(e,Wi);if(!wo)return;const[Ko]=n.invert(wo),ca=Ko,Oa=Ny(Sn).center,Zs=Oa(Ye,ca),Ta=Ye[Zs];return!Q&&Ye.find(Ml=>Ml!==Ta&&Sn(Ml)===Sn(Ta))?Vn(Wi):Ta}:Vn,or=x1(Wi=>{const wo=rr(Wi);if(!wo){Zy({root:e,single:T,emitter:h,event:Wi});return}const Ko=b(wo),ca=it.get(Ko);if(!ca)return;const Oa=ca.length===1&&!Q?nee(ca[0]):Yk(ca,r,s,void 0,X);if(l&&Oa.items.sort((vs,Ml)=>l(vs)-l(Ml)),u&&(Oa.items=Oa.items.filter(u)),e7(Oa)){Zy({root:e,single:T,emitter:h,event:Wi});return}const{offsetX:Zs,offsetY:Ta}=Wi;ce&&Gk({root:e,data:Oa,x:Zs,y:Ta,render:i,event:Wi,single:T,position:R,enterable:M,mount:U,bounding:H,css:je,offset:$}),h.emit("tooltip:show",Object.assign(Object.assign({},Wi),{nativeEvent:!0,data:{data:O6(wo,N)}}))},p,{leading:v,trailing:y}),Hr=Wi=>{Zy({root:e,single:T,emitter:h,event:Wi})},fi=()=>{pe||(e.addEventListener("pointermove",or),e.addEventListener("pointerleave",Hr))},Qi=()=>{pe||(e.removeEventListener("pointermove",or),e.removeEventListener("pointerleave",Hr))},Jr=({nativeEvent:Wi,offsetX:wo,offsetY:Ko,data:ca})=>{if(Wi)return;const{data:Oa}=ca,Zs=dM(Ye,Oa,I);if(!Zs)return;const Ta=Zs.getBBox(),{x:vs,y:Ml,width:Fu,height:Jf}=Ta,$c=e.getBBox();or({target:Zs,offsetX:wo!==void 0?wo+$c.x:vs+Fu/2,offsetY:Ko!==void 0?Ko+$c.y:Ml+Jf/2})},qr=({nativeEvent:Wi}={})=>{Wi||Zy({root:e,single:T,emitter:h,nativeEvent:!1})},Io=()=>{Qi(),BP({root:e,single:T})},Ji=()=>{fi()};return h.on("tooltip:show",Jr),h.on("tooltip:hide",qr),h.on("tooltip:enable",Ji),h.on("tooltip:disable",Io),fi(),()=>{Qi(),h.off("tooltip:show",Jr),h.off("tooltip:hide",qr),Re?Zy({root:e,single:T,emitter:h,nativeEvent:!1}):BP({root:e,single:T})}}function n7(e){const{shared:t,crosshairs:n,crosshairsX:r,crosshairsY:i,series:s,name:l,item:u=()=>({}),facet:h=!1}=e,p=E1(e,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(v,y,b)=>{const{container:T,view:R}=v,{scale:M,markState:I,coordinate:N,theme:U}=R,H=Jk(I,"seriesTooltip"),X=Jk(I,"crosshairs"),$=Nm(T),Q=Pg(s,H),ce=Pg(n,X);if(Q&&see(I)&&!h)return t7($,Object.assign(Object.assign({},p),{theme:U,elements:Fy,scale:M,coordinate:N,crosshairs:ce,crosshairsX:Pg(Pg(r,n),!1),crosshairsY:Pg(i,ce),item:u,emitter:b}));if(Q&&h){const pe=y.filter(it=>it!==v&&it.options.parentKey===v.options.key),Re=x6(v,y),je=pe[0].view.scale,Ke=$.getBounds(),ft=Ke.min[0],Ye=Ke.min[1];return Object.assign(je,{facet:!0}),t7($.parentNode.parentNode,Object.assign(Object.assign({},p),{theme:U,elements:()=>Re,scale:je,coordinate:N,crosshairs:Pg(n,X),crosshairsX:Pg(Pg(r,n),!1),crosshairsY:Pg(i,ce),item:u,startX:ft,startY:Ye,emitter:b}))}return lee($,Object.assign(Object.assign({},p),{datum:c1(R),elements:Fy,scale:M,coordinate:N,groupKey:t?hM(R):void 0,item:u,emitter:b,view:R,theme:U,shared:t}))}}n7.props={reapplyWhenUpdate:!0};var AA=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const r7="legend-category",cee="legend-continuous",uee="items-item",fee="legend-category-item-marker",hee="legend-category-item-label";function i7(e){return e.getElementsByClassName(fee)[0]}function o7(e){return e.getElementsByClassName(hee)[0]}function a7(e){return e.getElementsByClassName(uee)}function FP(e){return e.getElementsByClassName(r7)}function s7(e){return e.getElementsByClassName(cee)}function dee(e,t){[...FP(e),...s7(e)].forEach(r=>{t(r,i=>i)})}function kP(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function Ope(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function pee(e,{legends:t,marker:n,label:r,datum:i,filter:s,emitter:l,channel:u,state:h={}}){const p=new Map,v=new Map,y=new Map,{unselected:b={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,T={unselected:go(b,"marker")},R={unselected:go(b,"label")},{setState:M,removeState:I}=Rg(T,void 0),{setState:N,removeState:U}=Rg(R,void 0),H=Array.from(t(e));let X=H.map(i);const $=()=>{for(const pe of H){const Re=i(pe),je=n(pe),Ke=r(pe);X.includes(Re)?(I(je,"unselected"),U(Ke,"unselected")):(M(je,"unselected"),N(Ke,"unselected"))}};for(const pe of H){const Re=()=>{ky(e,"pointer")},je=()=>{$G(e)},Ke=ft=>AA(this,void 0,void 0,function*(){const Ye=i(pe),it=X.indexOf(Ye);it===-1?X.push(Ye):X.splice(it,1),yield s(X),$();const{nativeEvent:at=!0}=ft;at&&(X.length===H.length?l.emit("legend:reset",{nativeEvent:at}):l.emit("legend:filter",Object.assign(Object.assign({},ft),{nativeEvent:at,data:{channel:u,values:X}})))});pe.addEventListener("click",Ke),pe.addEventListener("pointerenter",Re),pe.addEventListener("pointerout",je),p.set(pe,Ke),v.set(pe,Re),y.set(pe,je)}const Q=pe=>AA(this,void 0,void 0,function*(){const{nativeEvent:Re}=pe;if(Re)return;const{data:je}=pe,{channel:Ke,values:ft}=je;Ke===u&&(X=ft,yield s(X),$())}),ce=pe=>AA(this,void 0,void 0,function*(){const{nativeEvent:Re}=pe;Re||(X=H.map(i),yield s(X),$())});return l.on("legend:filter",Q),l.on("legend:reset",ce),()=>{for(const pe of H)pe.removeEventListener("click",p.get(pe)),pe.removeEventListener("pointerenter",v.get(pe)),pe.removeEventListener("pointerout",y.get(pe)),l.off("legend:filter",Q),l.off("legend:reset",ce)}}function vee(e,{legend:t,filter:n,emitter:r,channel:i}){const s=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:i,values:l}})};return t.addEventListener("valuechange",s),()=>{t.removeEventListener("valuechange",s)}}function l7(e,{legend:t,channel:n,value:r,ordinal:i,channels:s,allChannels:l,facet:u=!1}){return AA(this,void 0,void 0,function*(){const{view:h,update:p,setState:v}=e;v(t,y=>{const{marks:b}=y,T=b.map(R=>{if(R.type==="legends")return R;const{transform:M=[]}=R,I=M.findIndex(({type:H})=>H.startsWith("group")||H.startsWith("bin")),N=[...M];N.splice(I+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const U=Object.fromEntries(s.map(H=>[H,{domain:h.scale[H].getOptions().domain}]));return ti({},R,Object.assign(Object.assign({transform:N,scale:U},!i&&{animate:!1}),{legend:u?!1:Object.fromEntries(l.map(H=>[H,{preserve:!0}]))}))});return Object.assign(Object.assign({},y),{marks:T})}),yield p()})}function mee(e,t){for(const n of e)l7(n,Object.assign(Object.assign({},t),{facet:!0}))}function gee(){return(e,t,n)=>{const{container:r}=e,i=t.filter(y=>y!==e),s=i.length>0,l=y=>kP(y).scales.map(b=>b.name),u=[...FP(r),...s7(r)],h=u.flatMap(l),p=s?x1(mee,50,{trailing:!0}):x1(l7,50,{trailing:!0}),v=u.map(y=>{const{name:b,domain:T}=kP(y).scales[0],R=l(y),M={legend:y,channel:b,channels:R,allChannels:h};return y.className===r7?pee(r,{legends:a7,marker:i7,label:o7,datum:I=>{const{__data__:N}=I,{index:U}=N;return T[U]},filter:I=>{const N=Object.assign(Object.assign({},M),{value:I,ordinal:!0});p(s?i:e,N)},state:y.attributes.state,channel:b,emitter:n}):vee(r,{legend:y,filter:I=>{const N=Object.assign(Object.assign({},M),{value:I,ordinal:!1});p(s?i:e,N)},emitter:n,channel:b})});return()=>{v.forEach(y=>y())}}}function yee(){return(e,t,n)=>{const{container:r,view:i,options:s}=e,l=FP(r),u=Fy(r),h=T=>kP(T).scales[0].name,p=T=>{const{scale:{[T]:R}}=i;return R},v=zb(s,["active","inactive"]),y=q2(u,c1(i)),b=[];for(const T of l){const R=Sn=>{const{data:Vn}=T.attributes,{__data__:rr}=Sn,{index:or}=rr;return Vn[or].label},M=h(T),I=a7(T),N=p(M),U=Kl(u,Sn=>N.invert(Sn.__data__[M])),{state:H={}}=T.attributes,{inactive:X={}}=H,{setState:$,removeState:Q}=Rg(v,y),ce={inactive:go(X,"marker")},pe={inactive:go(X,"label")},{setState:Re,removeState:je}=Rg(ce),{setState:Ke,removeState:ft}=Rg(pe),Ye=Sn=>{for(const Vn of I){const rr=i7(Vn),or=o7(Vn);Vn===Sn||Sn===null?(je(rr,"inactive"),ft(or,"inactive")):(Re(rr,"inactive"),Ke(or,"inactive"))}},it=(Sn,Vn)=>{const rr=R(Vn),or=new Set(U.get(rr));for(const fi of u)or.has(fi)?$(fi,"active"):$(fi,"inactive");Ye(Vn);const{nativeEvent:Hr=!0}=Sn;Hr&&n.emit("legend:highlight",Object.assign(Object.assign({},Sn),{nativeEvent:Hr,data:{channel:M,value:rr}}))},at=new Map;for(const Sn of I){const Vn=rr=>{it(rr,Sn)};Sn.addEventListener("pointerover",Vn),at.set(Sn,Vn)}const vt=Sn=>{for(const rr of u)Q(rr,"inactive","active");Ye(null);const{nativeEvent:Vn=!0}=Sn;Vn&&n.emit("legend:unhighlight",{nativeEvent:Vn})},Vt=Sn=>{const{nativeEvent:Vn,data:rr}=Sn;if(Vn)return;const{channel:or,value:Hr}=rr;if(or!==M)return;const fi=I.find(Qi=>R(Qi)===Hr);fi&&it({nativeEvent:!1},fi)},At=Sn=>{const{nativeEvent:Vn}=Sn;Vn||vt({nativeEvent:!1})};T.addEventListener("pointerleave",vt),n.on("legend:highlight",Vt),n.on("legend:unhighlight",At);const Ut=()=>{T.removeEventListener(vt),n.off("legend:highlight",Vt),n.off("legend:unhighlight",At);for(const[Sn,Vn]of at)Sn.removeEventListener(Vn)};b.push(Ut)}return()=>b.forEach(T=>T())}}var nv=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _ee(e,t){const[n,r,i,s]=e,[l,u,h,p]=t;return!(l>i||h<n||u>s||p<r)}function bee(e,t,n,r,i){const[s,l,u,h]=i;return[Math.max(s,Math.min(e,n)),Math.max(l,Math.min(t,r)),Math.min(u,Math.max(e,n)),Math.min(h,Math.max(t,r))]}function xee(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function Ig(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const c7=Bb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:s,class:l,renders:u={},handleSize:h=10,document:p}=t,v=nv(t,["x","y","width","height","class","renders","handleSize","document"]);if(!p||i===void 0||s===void 0||n===void 0||r===void 0)return;const y=h/2,b=(Hr,fi,Qi)=>{Hr.handle||(Hr.handle=Qi.createElement("rect"),Hr.append(Hr.handle));const{handle:Jr}=Hr;return Jr.attr(fi),Jr},T=go(Ry(v,"handleNW","handleNE"),"handleN"),{render:R=b}=T,M=nv(T,["render"]),I=go(v,"handleE"),{render:N=b}=I,U=nv(I,["render"]),H=go(Ry(v,"handleSE","handleSW"),"handleS"),{render:X=b}=H,$=nv(H,["render"]),Q=go(v,"handleW"),{render:ce=b}=Q,pe=nv(Q,["render"]),Re=go(v,"handleNW"),{render:je=b}=Re,Ke=nv(Re,["render"]),ft=go(v,"handleNE"),{render:Ye=b}=ft,it=nv(ft,["render"]),at=go(v,"handleSE"),{render:vt=b}=at,Vt=nv(at,["render"]),At=go(v,"handleSW"),{render:Ut=b}=At,Sn=nv(At,["render"]),Vn=(Hr,fi)=>{const{id:Qi}=Hr,Jr=fi(Hr,Hr.attributes,p);Jr.id=Qi,Jr.style.draggable=!0},rr=Hr=>()=>{const fi=Bb(Qi=>Vn(Qi,Hr));return new fi({})},or=Pa(e).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);or.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Ig,Object.assign(Object.assign({width:i,height:s},Ry(v,"handle")),{transform:void 0})),or.maybeAppend("handle-n",rr(R)).style("x",y).style("y",-y).style("width",i-h).style("height",h).style("fill","transparent").call(Ig,M),or.maybeAppend("handle-e",rr(N)).style("x",i-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Ig,U),or.maybeAppend("handle-s",rr(X)).style("x",y).style("y",s-y).style("width",i-h).style("height",h).style("fill","transparent").call(Ig,$),or.maybeAppend("handle-w",rr(ce)).style("x",-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Ig,pe),or.maybeAppend("handle-nw",rr(je)).style("x",-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Ig,Ke),or.maybeAppend("handle-ne",rr(Ye)).style("x",i-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Ig,it),or.maybeAppend("handle-se",rr(vt)).style("x",i-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Ig,Vt),or.maybeAppend("handle-sw",rr(Ut)).style("x",-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Ig,Sn)});function UP(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:u=xee(e),brushRegion:h=(Jr,qr,Io,Ji,Wi)=>[Jr,qr,Io,Ji],reverse:p=!1,fill:v="#777",fillOpacity:y="0.3",stroke:b="#fff",selectedHandles:T=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,R=nv(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let M=null,I=null,N=null,U=null,H=null,X=!1;const[$,Q,ce,pe]=u;ky(e,"crosshair"),e.style.draggable=!0;const Re=(Jr,qr,Io)=>{if(s(Io),U&&U.remove(),H&&H.remove(),M=[Jr,qr],p)return je();Ke()},je=()=>{H=new vd({style:Object.assign(Object.assign({},R),{fill:v,fillOpacity:y,stroke:b,pointerEvents:"none"})}),U=new c7({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(H),e.appendChild(U)},Ke=()=>{U=new c7({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},R),{fill:v,fillOpacity:y,stroke:b,draggable:!0}),className:"mask"}),e.appendChild(U)},ft=(Jr=!0)=>{U&&U.remove(),H&&H.remove(),M=null,I=null,N=null,X=!1,U=null,H=null,r(Jr)},Ye=(Jr,qr,Io=!0)=>{const[Ji,Wi,wo,Ko]=bee(Jr[0],Jr[1],qr[0],qr[1],u),[ca,Oa,Zs,Ta]=h(Ji,Wi,wo,Ko,u);return p?at(ca,Oa,Zs,Ta):it(ca,Oa,Zs,Ta),n(ca,Oa,Zs,Ta,Io),[ca,Oa,Zs,Ta]},it=(Jr,qr,Io,Ji)=>{U.style.x=Jr,U.style.y=qr,U.style.width=Io-Jr,U.style.height=Ji-qr},at=(Jr,qr,Io,Ji)=>{H.style.d=`
      M${$},${Q}L${ce},${Q}L${ce},${pe}L${$},${pe}Z
      M${Jr},${qr}L${Jr},${Ji}L${Io},${Ji}L${Io},${qr}Z
    `,U.style.x=Jr,U.style.y=qr,U.style.width=Io-Jr,U.style.height=Ji-qr},vt=Jr=>{const qr=(Oa,Zs,Ta,vs,Ml)=>Oa+Zs<vs?vs-Zs:Oa+Ta>Ml?Ml-Ta:Oa,Io=Jr[0]-N[0],Ji=Jr[1]-N[1],Wi=qr(Io,M[0],I[0],$,ce),wo=qr(Ji,M[1],I[1],Q,pe),Ko=[M[0]+Wi,M[1]+wo],ca=[I[0]+Wi,I[1]+wo];Ye(Ko,ca)},Vt={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},At=Jr=>Sn(Jr)||Ut(Jr),Ut=Jr=>{const{id:qr}=Jr;return T.indexOf(qr)===-1?!1:new Set(Object.keys(Vt)).has(qr)},Sn=Jr=>Jr===U.getElementById("selection"),Vn=Jr=>{const{target:qr}=Jr,[Io,Ji]=fM(e,Jr);if(!U||!At(qr)){Re(Io,Ji,Jr),X=!0;return}At(qr)&&(N=[Io,Ji])},rr=Jr=>{const{target:qr}=Jr,Io=fM(e,Jr);if(!M)return;if(!N)return Ye(M,Io);if(Sn(qr))return vt(Io);const[Ji,Wi]=[Io[0]-N[0],Io[1]-N[1]],{id:wo}=qr;if(Vt[wo]){const[Ko,ca,Oa,Zs]=Vt[wo].vector;return Ye([M[0]+Ji*Ko,M[1]+Wi*ca],[I[0]+Ji*Oa,I[1]+Wi*Zs])}},or=Jr=>{if(N){N=null;const{x:wo,y:Ko,width:ca,height:Oa}=U.style;M=[wo,Ko],I=[wo+ca,Ko+Oa],l(wo,Ko,wo+ca,Ko+Oa,Jr);return}I=fM(e,Jr);const[qr,Io,Ji,Wi]=Ye(M,I);X=!1,i(qr,Io,Ji,Wi,Jr)},Hr=Jr=>{const{target:qr}=Jr;U&&!At(qr)&&ft()},fi=Jr=>{const{target:qr}=Jr;!U||!At(qr)||X?ky(e,"crosshair"):Sn(qr)?ky(e,"move"):Ut(qr)&&ky(e,Vt[qr.id].cursor)},Qi=()=>{ky(e,"default")};return e.addEventListener("dragstart",Vn),e.addEventListener("drag",rr),e.addEventListener("dragend",or),e.addEventListener("click",Hr),e.addEventListener("pointermove",fi),e.addEventListener("pointerleave",Qi),{mask:U,move(Jr,qr,Io,Ji,Wi=!0){U||Re(Jr,qr,{}),M=[Jr,qr],I=[Io,Ji],Ye([Jr,qr],[Io,Ji],Wi)},remove(Jr=!0){U&&ft(Jr)},destroy(){U&&ft(!1),ky(e,"default"),e.removeEventListener("dragstart",Vn),e.removeEventListener("drag",rr),e.removeEventListener("dragend",or),e.removeEventListener("click",Hr),e.removeEventListener("pointermove",fi),e.removeEventListener("pointerleave",Qi)}}}function zP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(s=>s.brushKey===n)})}function Eee(e,t,n){return zP(e,t,n).map(r=>Nm(r.container))}function See(e,t,n){return zP(e,t,n).map(r=>r.options)}function u7(e,t){var{elements:n,selectedHandles:r,siblings:i=rr=>[],datum:s,brushRegion:l,extent:u,reverse:h,scale:p,coordinate:v,series:y=!1,key:b=rr=>rr,bboxOf:T=rr=>{const{x:or,y:Hr,width:fi,height:Qi}=rr.style;return{x:or,y:Hr,width:fi,height:Qi}},state:R={},emitter:M}=t,I=nv(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const N=n(e),U=i(e),H=U.flatMap(n),X=q2(N,s),$=go(I,"mask"),{setState:Q,removeState:ce}=Rg(R,X),pe=new Map,{width:Re,height:je,x:Ke=0,y:ft=0}=T(e),Ye=u||[0,0,Re,je],it=()=>{for(const rr of[...N,...H])ce(rr,"active","inactive")},at=(rr,or,Hr,fi)=>{var Qi;for(const qr of U)(Qi=qr.brush)===null||Qi===void 0||Qi.remove();const Jr=new Set;for(const qr of N){const{min:Io,max:Ji}=qr.getLocalBounds(),[Wi,wo]=Io,[Ko,ca]=Ji;_ee([Wi,wo,Ko,ca],[rr,or,Hr,fi])?(Q(qr,"active"),Jr.add(b(qr))):Q(qr,"inactive")}for(const qr of H)Jr.has(b(qr))?Q(qr,"active"):Q(qr,"inactive")},vt=()=>{for(const rr of N)ce(rr,"inactive");for(const rr of pe.values())rr.remove();pe.clear()},Vt=(rr,or,Hr,fi)=>{const Qi=qr=>{const Io=qr.cloneNode();return Io.__data__=qr.__data__,qr.parentNode.appendChild(Io),pe.set(qr,Io),Io},Jr=new md({style:{x:rr+Ke,y:or+ft,width:Hr-rr,height:fi-or}});e.appendChild(Jr);for(const qr of N){const Io=pe.get(qr)||Qi(qr);Io.style.clipPath=Jr,Q(qr,"inactive"),Q(Io,"active")}},At=UP(e,Object.assign(Object.assign({},$),{extent:Ye,brushRegion:l,reverse:h,selectedHandles:r,brushended:rr=>{const or=y?vt:it;rr&&M.emit("brush:remove",{nativeEvent:!0}),or()},brushed:(rr,or,Hr,fi,Qi)=>{const Jr=Mw(rr,or,Hr,fi,p,v);Qi&&M.emit("brush:highlight",{nativeEvent:!0,data:{selection:Jr}}),(y?Vt:at)(rr,or,Hr,fi)},brushcreated:(rr,or,Hr,fi,Qi)=>{const Jr=Mw(rr,or,Hr,fi,p,v);M.emit("brush:end",Object.assign(Object.assign({},Qi),{nativeEvent:!0,data:{selection:Jr}}))},brushupdated:(rr,or,Hr,fi,Qi)=>{const Jr=Mw(rr,or,Hr,fi,p,v);M.emit("brush:end",Object.assign(Object.assign({},Qi),{nativeEvent:!0,data:{selection:Jr}}))},brushstarted:rr=>{M.emit("brush:start",rr)}})),Ut=({nativeEvent:rr,data:or})=>{if(rr)return;const{selection:Hr}=or,[fi,Qi,Jr,qr]=DG(Hr,p,v);At.move(fi,Qi,Jr,qr,!1)};M.on("brush:highlight",Ut);const Sn=({nativeEvent:rr}={})=>{rr||At.remove(!1)};M.on("brush:remove",Sn);const Vn=At.destroy.bind(At);return At.destroy=()=>{M.off("brush:highlight",Ut),M.off("brush:remove",Sn),Vn()},At}function jP(e){var{facet:t,brushKey:n}=e,r=nv(e,["facet","brushKey"]);return(i,s,l)=>{const{container:u,view:h,options:p}=i,v=Nm(u),y={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},b=["active",["inactive",{opacity:.5}]],{scale:T,coordinate:R}=h;if(t){const I=v.getBounds(),N=I.min[0],U=I.min[1],H=I.max[0],X=I.max[1];return u7(v.parentNode.parentNode,Object.assign(Object.assign({elements:()=>x6(i,s),datum:c1(uM(i,s).map($=>$.view)),brushRegion:($,Q,ce,pe)=>[$,Q,ce,pe],extent:[N,U,H,X],state:zb(uM(i,s).map($=>$.options),b),emitter:l,scale:T,coordinate:R,selectedHandles:void 0},y),r))}const M=u7(v,Object.assign(Object.assign({elements:Fy,key:I=>I.__data__.key,siblings:()=>Eee(i,s,n),datum:c1([h,...zP(i,s,n).map(I=>I.view)]),brushRegion:(I,N,U,H)=>[I,N,U,H],extent:void 0,state:zb([p,...See(i,s,n)],b),emitter:l,scale:T,coordinate:R,selectedHandles:void 0},y),r));return v.brush=M,()=>M.destroy()}}function VP(e,t,n,r,i){const[,s,,l]=i;return[e,s,n,l]}function Tee(e){return jP(Object.assign(Object.assign({},e),{brushRegion:VP,selectedHandles:["handle-e","handle-w"]}))}function HP(e,t,n,r,i){const[s,,l]=i;return[s,t,l,r]}function wee(e){return jP(Object.assign(Object.assign({},e),{brushRegion:HP,selectedHandles:["handle-n","handle-s"]}))}var WP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Aee="axis",Cee="axis-line",Oee="axis-main-group",f7="axis-hot-area";function Ree(e){return e.getElementsByClassName(Aee)}function h7(e){return e.getElementsByClassName(Cee)[0]}function Mee(e){return e.getElementsByClassName(Oee)[0]}function d7(e){return Mee(e).getLocalBounds()}function Pee(e,t){var{cross:n,offsetX:r,offsetY:i}=t,s=WP(t,["cross","offsetX","offsetY"]);const l=d7(e),u=h7(e),[h]=u.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=(y-p)*2;return{brushRegion:HP,hotZone:new md({className:f7,style:Object.assign({width:n?T/2:T,transform:`translate(${(n?p:h-T/2).toFixed(2)}, ${v})`,height:b-v},s)}),extent:n?(R,M,I,N)=>[-1/0,M,1/0,N]:(R,M,I,N)=>[Math.floor(p-r),M,Math.ceil(y-r),N]}}function Iee(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,s=WP(t,["offsetY","offsetX","cross"]);const l=d7(e),u=h7(e),[,h]=u.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=b-v;return{brushRegion:VP,hotZone:new md({className:f7,style:Object.assign({width:y-p,height:i?T:T*2,transform:`translate(${p}, ${i?v:h-T})`},s)}),extent:i?(R,M,I,N)=>[R,-1/0,I,1/0]:(R,M,I,N)=>[R,Math.floor(v-n),I,Math.ceil(b-n)]}}function Lee(e,t){var{axes:n,elements:r,points:i,horizontal:s,datum:l,offsetY:u,offsetX:h,reverse:p=!1,state:v={},emitter:y,coordinate:b}=t,T=WP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const R=r(e),M=n(e),I=q2(R,l),{setState:N,removeState:U}=Rg(v,I),H=new Map,X=go(T,"mask"),$=Ut=>Array.from(H.values()).every(([Sn,Vn,rr,or])=>Ut.some(([Hr,fi])=>Hr>=Sn&&Hr<=rr&&fi>=Vn&&fi<=or)),Q=M.map(Ut=>Ut.attributes.scale),ce=Ut=>Ut.length>2?[Ut[0],Ut[Ut.length-1]]:Ut,pe=new Map,Re=()=>{pe.clear();for(let Ut=0;Ut<M.length;Ut++){const Sn=Q[Ut],{domain:Vn}=Sn.getOptions();pe.set(Ut,ce(Vn))}};Re();const je=(Ut,Sn)=>{const Vn=[];for(const or of R){const Hr=i(or);$(Hr)?(N(or,"active"),Vn.push(or)):N(or,"inactive")}if(pe.set(Ut,ft(Vn,Ut)),!Sn)return;const rr=()=>{if(!Ye)return Array.from(pe.values());const or=[];for(const[Hr,fi]of pe){const Qi=Q[Hr],{name:Jr}=Qi.getOptions();Jr==="x"?or[0]=fi:or[1]=fi}return or};y.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:rr()}})},Ke=Ut=>{for(const Sn of R)U(Sn,"active","inactive");Re(),Ut&&y.emit("brushAxis:remove",{nativeEvent:!0})},ft=(Ut,Sn)=>{const Vn=Q[Sn],{name:rr}=Vn.getOptions(),or=Ut.map(Hr=>{const fi=Hr.__data__;return Vn.invert(fi[rr])});return ce(By(Vn,or))},Ye=M.some(s)&&M.some(Ut=>!s(Ut)),it=[];for(let Ut=0;Ut<M.length;Ut++){const Sn=M[Ut],Vn=s(Sn)?Iee:Pee,{hotZone:rr,brushRegion:or,extent:Hr}=Vn(Sn,{offsetY:u,offsetX:h,cross:Ye,zIndex:999,fill:"transparent"});Sn.parentNode.appendChild(rr);const fi=UP(rr,Object.assign(Object.assign({},X),{reverse:p,brushRegion:or,brushended(Qi){H.delete(Sn),Array.from(H.entries()).length===0?Ke(Qi):je(Ut,Qi)},brushed(Qi,Jr,qr,Io,Ji){H.set(Sn,Hr(Qi,Jr,qr,Io)),je(Ut,Ji)}}));it.push(fi)}const at=(Ut={})=>{const{nativeEvent:Sn}=Ut;Sn||it.forEach(Vn=>Vn.remove(!1))},vt=(Ut,Sn,Vn)=>{const[rr,or]=Ut,Hr=Jr=>Jr.getStep?Jr.getStep():0,fi=Vt(rr,Sn,Vn),Qi=Vt(or,Sn,Vn)+Hr(Sn);return s(Vn)?[fi,-1/0,Qi,1/0]:[-1/0,fi,1/0,Qi]},Vt=(Ut,Sn,Vn)=>{const{height:rr,width:or}=b.getOptions(),Hr=Sn.clone();return s(Vn)?Hr.update({range:[0,or]}):Hr.update({range:[rr,0]}),Hr.map(Ut)},At=Ut=>{const{nativeEvent:Sn}=Ut;if(Sn)return;const{selection:Vn}=Ut.data;for(let rr=0;rr<it.length;rr++){const or=Vn[rr],Hr=it[rr],fi=M[rr];if(or){const Qi=Q[rr];Hr.move(...vt(or,Qi,fi),!1)}else Hr.remove(!1)}};return y.on("brushAxis:remove",at),y.on("brushAxis:highlight",At),()=>{it.forEach(Ut=>Ut.destroy()),y.off("brushAxis:remove",at),y.off("brushAxis:highlight",At)}}function Dee(e){return(t,n,r)=>{const{container:i,view:s,options:l}=t,u=Nm(i),{x:h,y:p}=u.getBBox(),{coordinate:v}=s;return Lee(i,Object.assign({elements:Fy,axes:Ree,offsetY:p,offsetX:h,points:y=>y.__data__.points,horizontal:y=>{const{startPos:[b,T],endPos:[R,M]}=y.attributes;return b!==R&&T===M},datum:c1(s),state:zb(l,["active",["inactive",{opacity:.5}]]),coordinate:v,emitter:r},e))}}var Nee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},p7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bee(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function Fee(e,t){var{filter:n,reset:r,brushRegion:i,extent:s,reverse:l,emitter:u,scale:h,coordinate:p,selection:v,series:y=!1}=t,b=p7(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const T=go(b,"mask"),{width:R,height:M}=e.getBBox(),I=s||[0,0,R,M],N=Bee(),U=UP(e,Object.assign(Object.assign({},T),{extent:I,brushRegion:i,reverse:l,brushcreated:H}));e.addEventListener("click",X);function H(Q,ce,pe,Re,je){je.nativeEvent=!0,n(v(Q,ce,pe,Re),je),U.remove()}function X(Q){N(Q)&&(Q.nativeEvent=!0,r(Q))}const $=({nativeEvent:Q,data:ce})=>{if(Q)return;const{selection:pe}=ce;n(pe,{nativeEvent:!1})};return u.on("brush:filter",$),()=>{U.destroy(),u.off("brush:filter",$),e.removeEventListener("click",X)}}function GP(e){var{hideX:t=!0,hideY:n=!0}=e,r=p7(e,["hideX","hideY"]);return(i,s,l)=>{const{container:u,view:h,options:p,update:v,setState:y}=i,b=Nm(u),T={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let R=!1,M=!1,I=h;const{scale:N,coordinate:U}=h;return Fee(b,Object.assign(Object.assign({brushRegion:(H,X,$,Q)=>[H,X,$,Q],selection:(H,X,$,Q)=>{const{scale:ce,coordinate:pe}=I;return Mw(H,X,$,Q,ce,pe)},filter:(H,X)=>Nee(this,void 0,void 0,function*(){if(M)return;M=!0;const[$,Q]=H;y("brushFilter",pe=>{const{marks:Re}=pe,je=Re.map(Ke=>ti({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},Ke,{scale:{x:{domain:$,nice:!1},y:{domain:Q,nice:!1}}}));return Object.assign(Object.assign({},p),{marks:je,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},X),{data:{selection:[$,Q]}})),I=(yield v()).view,M=!1,R=!0}),reset:H=>{if(M||!R)return;const{scale:X}=h,{x:$,y:Q}=X,ce=$.getOptions().domain,pe=Q.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},H),{data:{selection:[ce,pe]}})),R=!1,I=h,y("brushFilter"),v()},extent:void 0,emitter:l,scale:N,coordinate:U},T),r))}}function kee(e){return GP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:VP}))}function Uee(e){return GP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:HP}))}var zee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const jee="slider";function Vee(e,t,n,r=!1,i="x",s="y"){const{marks:l}=e,u=l.map(h=>{var p,v;return ti({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:t,[n]:Object.assign(Object.assign({},((p=h[n])===null||p===void 0?void 0:p[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((v=h[n])===null||v===void 0?void 0:v[s])&&{[s]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:u,clip:!0,animate:!1})}function Hee(e,t,n){const[r,i]=e,s=n?h=>1-h:h=>h,l=kb(t,s(r),!0),u=kb(t,s(i),!1);return By(t,[l,u])}function CA(e){return[e[0],e[e.length-1]]}function v7({initDomain:e={},className:t=jee,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:i=!1,wait:s=50,leading:l=!0,trailing:u=!1,getInitValues:h=p=>{var v;const y=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(y[0]!==0||y[1]!==1)return y}}){return(p,v,y)=>{const{container:b,view:T,update:R,setState:M}=p,I=b.getElementsByClassName(t);if(!I.length)return()=>{};let N=!1;const{scale:U,coordinate:H,layout:X}=T,{paddingLeft:$,paddingTop:Q,paddingBottom:ce,paddingRight:pe}=X,{x:Re,y:je}=U,Ke=Tc(H),ft=vt=>{const Vt=vt==="vertical"?"y":"x",At=vt==="vertical"?"x":"y";return Ke?[At,Vt]:[Vt,At]},Ye=new Map,it=new Set,at={x:e.x||Re.getOptions().domain,y:e.y||je.getOptions().domain};for(const vt of I){const{orientation:Vt}=vt.attributes,[At,Ut]=ft(Vt),Sn=`${n}${Om(At)}:filter`,Vn=At==="x",{ratio:rr}=Re.getOptions(),{ratio:or}=je.getOptions(),Hr=qr=>{if(qr.data){const{selection:Ko}=qr.data,[ca=CA(at.x),Oa=CA(at.y)]=Ko;return Vn?[By(Re,ca,rr),By(je,Oa,or)]:[By(je,Oa,or),By(Re,ca,rr)]}const{value:Io}=qr.detail,Ji=U[At],Wi=Hee(Io,Ji,Ke&&Vt==="horizontal"),wo=at[Ut];return[Wi,wo]},fi=x1(qr=>zee(this,void 0,void 0,function*(){const{initValue:Io=!1}=qr;if(N&&!Io)return;N=!0;const{nativeEvent:Ji=!0}=qr,[Wi,wo]=Hr(qr);if(at[At]=Wi,at[Ut]=wo,Ji){const Ko=Vn?Wi:wo,ca=Vn?wo:Wi;y.emit(Sn,Object.assign(Object.assign({},qr),{nativeEvent:Ji,data:{selection:[CA(Ko),CA(ca)]}}))}M(vt,Ko=>Object.assign(Object.assign({},Vee(Ko,{[At]:{domain:Wi,nice:!1}},n,i,At,Ut)),{paddingLeft:$,paddingTop:Q,paddingBottom:ce,paddingRight:pe})),yield R(),N=!1}),s,{leading:l,trailing:u}),Qi=qr=>{const{nativeEvent:Io}=qr;if(Io)return;const{data:Ji}=qr,{selection:Wi}=Ji,[wo,Ko]=Wi;vt.dispatchEvent(new Hi("valuechange",{data:Ji,nativeEvent:!1}));const ca=Vn?Pw(wo,Re):Pw(Ko,je);r(vt,ca)};y.on(Sn,Qi),vt.addEventListener("valuechange",fi),Ye.set(vt,fi),it.add([Sn,Qi]);const Jr=h(vt);Jr&&vt.dispatchEvent(new Hi("valuechange",{detail:{value:Jr},nativeEvent:!1,initValue:!0}))}return()=>{for(const[vt,Vt]of Ye)vt.removeEventListener("valuechange",Vt);for(const[vt,Vt]of it)y.off(vt,Vt)}}}const m7="g2-scrollbar";function Wee(e={}){return(t,n,r)=>{const{view:i,container:s}=t;if(!s.getElementsByClassName(m7).length)return()=>{};const{scale:u}=i,{x:h,y:p}=u,v={x:[...h.getOptions().domain],y:[...p.getOptions().domain]};return h.update({domain:h.getOptions().expectedDomain}),p.update({domain:p.getOptions().expectedDomain}),v7(Object.assign(Object.assign({},e),{initDomain:v,className:m7,prefix:"scrollbar",hasState:!0,setValue:(b,T)=>b.setValue(T[0]),getInitValues:b=>{const T=b.slider.attributes.values;if(T[0]!==0)return T}}))(t,n,r)}}var Gee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Zee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${sG(r)}:${i}`).join(";")}">${t}</${e}>`}const Xee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function g7(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function y7(e){var{offsetX:t=8,offsetY:n=8}=e,r=Gee(e,["offsetX","offsetY"]);return i=>{const{container:s}=i,[l,u]=s.getBounds().min,h=go(r,"tip"),p=new Set,v=b=>{const{target:T}=b;if(!g7(T)){b.stopPropagation();return}const{offsetX:R,offsetY:M}=b,I=R+t-l,N=M+n-u;if(T.tip){T.tip.style.x=I,T.tip.style.y=N;return}const{text:U}=T.style,H=new z_({className:"poptip",style:{innerHTML:Zee("div",U,Object.assign(Object.assign({},Xee),h)),x:I,y:N}});s.appendChild(H),T.tip=H,p.add(H)},y=b=>{const{target:T}=b;if(!g7(T)){b.stopPropagation();return}T.tip&&(T.tip.remove(),T.tip=null,p.delete(T.tip))};return s.addEventListener("pointerover",v),s.addEventListener("pointerout",y),()=>{s.removeEventListener("pointerover",v),s.removeEventListener("pointerout",y),p.forEach(b=>b.remove())}}}y7.props={reapplyWhenUpdate:!0};function $ee(e,t){var n=UM(t),r=n.length;if((0,xa.Z)(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Yee=$ee;function Kee(e,t){if(!jo(e))return null;var n;if(op(t)&&(n=t),Bv(t)&&(n=function(i){return Yee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var nx=Kee;function OA(e){return e==null?null:_7(e)}function _7(e){if(typeof e!="function")throw new Error;return e}var qee={depth:-1},b7={},ZP={};function Qee(e){return e.id}function Jee(e){return e.parentId}function XP(){var e=Qee,t=Jee,n;function r(i){var s=Array.from(i),l=e,u=t,h,p,v,y,b,T,R,M,I=new Map;if(n!=null){var N=s.map(function(pe,Re){return ete(n(pe,Re,i))}),U=N.map(x7),H=new Set(N).add(""),X=NM(U),$;try{for(X.s();!($=X.n()).done;){var Q=$.value;H.has(Q)||(H.add(Q),N.push(Q),U.push(x7(Q)),s.push(ZP))}}catch(pe){X.e(pe)}finally{X.f()}l=function(Re,je){return N[je]},u=function(Re,je){return U[je]}}for(v=0,h=s.length;v<h;++v)p=s[v],T=s[v]=new Yb(p),(R=l(p,v,i))!=null&&(R+="")&&(M=T.id=R,I.set(M,I.has(M)?b7:T)),(R=u(p,v,i))!=null&&(R+="")&&(T.parent=R);for(v=0;v<h;++v)if(T=s[v],R=T.parent){if(b=I.get(R),!b)throw new Error("missing: "+R);if(b===b7)throw new Error("ambiguous: "+R);b.children?b.children.push(T):b.children=[T],T.parent=b}else{if(y)throw new Error("multiple roots");y=T}if(!y)throw new Error("no root");if(n!=null){for(;y.data===ZP&&y.children.length===1;)y=y.children[0],--h;for(var ce=s.length-1;ce>=0&&(T=s[ce],T.data===ZP);--ce)T.data=null}if(y.parent=qee,y.eachBefore(function(pe){pe.depth=pe.parent.depth+1,--h}).eachBefore(vN),y.parent=null,h>0)throw new Error("cycle");return y}return r.id=function(i){return arguments.length?(e=OA(i),r):e},r.parentId=function(i){return arguments.length?(t=OA(i),r):t},r.path=function(i){return arguments.length?(n=OA(i),r):n},r}function ete(e){e="".concat(e);var t=e.length;return $P(e,t-1)&&!$P(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function x7(e){var t=e.length;if(t<2)return"";for(;--t>1&&!$P(e,t););return e.slice(0,t)}function $P(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function tte(e,t,n,r,i){var s=e.children,l,u=s.length,h,p=new Array(u+1);for(p[0]=h=l=0;l<u;++l)p[l+1]=h+=s[l].value;v(0,u,e.value,t,n,r,i);function v(y,b,T,R,M,I,N){if(y>=b-1){var U=s[y];U.x0=R,U.y0=M,U.x1=I,U.y1=N;return}for(var H=p[y],X=T/2+H,$=y+1,Q=b-1;$<Q;){var ce=$+Q>>>1;p[ce]<X?$=ce+1:Q=ce}X-p[$-1]<p[$]-X&&y+1<$&&--$;var pe=p[$]-H,Re=T-pe;if(I-R>N-M){var je=T?(R*Re+I*pe)/T:I;v(y,$,pe,R,M,je,N),v($,b,Re,je,M,I,N)}else{var Ke=T?(M*Re+N*pe)/T:N;v(y,$,pe,R,M,I,Ke),v($,b,Re,R,Ke,I,N)}}}function RA(e,t,n,r,i){for(var s=e.children,l,u=-1,h=s.length,p=e.value&&(i-n)/e.value;++u<h;)l=s[u],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*p}function nte(e,t,n,r,i){(e.depth&1?RA:rE)(e,t,n,r,i)}var E7=(1+Math.sqrt(5))/2;function S7(e,t,n,r,i,s){for(var l=[],u=t.children,h,p,v=0,y=0,b=u.length,T,R,M=t.value,I,N,U,H,X,$,Q;v<b;){T=i-n,R=s-r;do I=u[y++].value;while(!I&&y<b);for(N=U=I,$=Math.max(R/T,T/R)/(M*e),Q=I*I*$,X=Math.max(U/Q,Q/N);y<b;++y){if(I+=p=u[y].value,p<N&&(N=p),p>U&&(U=p),Q=I*I*$,H=Math.max(U/Q,Q/N),H>X){I-=p;break}X=H}l.push(h={value:I,dice:T<R,children:u.slice(v,y)}),h.dice?rE(h,n,r,i,M?r+=R*I/M:s):RA(h,n,r,M?n+=T*I/M:i,s),M-=I,v=y}return l}var T7=function e(t){function n(r,i,s,l,u){S7(t,r,i,s,l,u)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(E7),rte=function e(t){function n(r,i,s,l,u){if((h=r._squarify)&&h.ratio===t)for(var h,p,v,y,b=-1,T,R=h.length,M=r.value;++b<R;){for(p=h[b],v=p.children,y=p.value=0,T=v.length;y<T;++y)p.value+=v[y].value;p.dice?rE(p,i,s,l,M?s+=(u-s)*p.value/M:u):RA(p,i,s,M?i+=(l-i)*p.value/M:l,u),M-=p.value}else r._squarify=h=S7(t,r,i,s,l,u),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(E7);function S1(){return 0}function rx(e){return function(){return e}}function ite(){var e=T7,t=!1,n=1,r=1,i=[0],s=S1,l=S1,u=S1,h=S1,p=S1;function v(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(y),i=[0],t&&b.eachBefore(hN),b}function y(b){var T=i[b.depth],R=b.x0+T,M=b.y0+T,I=b.x1-T,N=b.y1-T;I<R&&(R=I=(R+I)/2),N<M&&(M=N=(M+N)/2),b.x0=R,b.y0=M,b.x1=I,b.y1=N,b.children&&(T=i[b.depth+1]=s(b)/2,R+=p(b)-T,M+=l(b)-T,I-=u(b)-T,N-=h(b)-T,I<R&&(R=I=(R+I)/2),N<M&&(M=N=(M+N)/2),e(b,R,M,I,N))}return v.round=function(b){return arguments.length?(t=!!b,v):t},v.size=function(b){return arguments.length?(n=+b[0],r=+b[1],v):[n,r]},v.tile=function(b){return arguments.length?(e=_7(b),v):e},v.padding=function(b){return arguments.length?v.paddingInner(b).paddingOuter(b):v.paddingInner()},v.paddingInner=function(b){return arguments.length?(s=typeof b=="function"?b:rx(+b),v):s},v.paddingOuter=function(b){return arguments.length?v.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):v.paddingTop()},v.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:rx(+b),v):l},v.paddingRight=function(b){return arguments.length?(u=typeof b=="function"?b:rx(+b),v):u},v.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:rx(+b),v):h},v.paddingLeft=function(b){return arguments.length?(p=typeof b=="function"?b:rx(+b),v):p},v}function ote(e,t){return Array.isArray(e)?typeof t=="function"?XP().path(t)(e):XP()(e):$b(e)}function w7(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],w7(n,n.path)})}function A7(e){const t=bl(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{A7(n)})}function ate(e,t){const n={treemapBinary:tte,treemapDice:rE,treemapSlice:RA,treemapSliceDice:nte,treemapSquarify:T7,treemapResquarify:rte},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function C7(e,t,n){const{value:r}=n,i=ate(t.tile,t.ratio),s=ote(e,t.path);jo(e)?A7(s):w7(s),r?s.sum(h=>t.ignoreParentValue&&h.children?0:jm(r)(h)).sort(t.sort):s.count(),ite().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(s);const l=s.descendants().map(h=>Object.assign(h,{id:h.id.replace(/^\//,""),x:[h.x0,h.x1],y:[h.y0,h.y1]}));return[l.filter(typeof t.layer=="function"?t.layer:h=>h.height===t.layer),l]}var ste=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},lte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cte(e){return Pa(e).select(`.${Jo}`).node()}const ute={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function fte(e={}){const{originData:t=[],layout:n}=e,r=lte(e,["originData","layout"]),i=ti({},ute,r),s=go(i,"breadCrumb"),l=go(i,"active");return u=>{const{update:h,setState:p,container:v,options:y}=u,b=cte(v),T=y.marks[0],{state:R}=T,M=new Mf;b.appendChild(M);const I=(X,$)=>ste(this,void 0,void 0,function*(){if(M.removeChildren(),$){let Q="",ce=s.y,pe=0;const Re=[],je=b.getBBox().width,Ke=X.map((ft,Ye)=>{Q=`${Q}${ft}/`,Re.push(ft);const it=new mh({name:Q.replace(/\/$/,""),style:Object.assign(Object.assign({text:ft,x:pe,path:[...Re],depth:Ye},s),{y:ce})});M.appendChild(it),pe+=it.getBBox().width;const at=new mh({style:Object.assign(Object.assign({x:pe,text:" / "},s),{y:ce})});return M.appendChild(at),pe+=at.getBBox().width,pe>je&&(ce=M.getBBox().height+s.y,pe=0,it.attr({x:pe,y:ce}),pe+=it.getBBox().width,at.attr({x:pe,y:ce}),pe+=at.getBBox().width),Ye===U2(X)-1&&at.remove(),it});Ke.forEach((ft,Ye)=>{if(Ye===U2(Ke)-1)return;const it=Object.assign({},ft.attributes);ft.attr("cursor","pointer"),ft.addEventListener("mouseenter",()=>{ft.attr(l)}),ft.addEventListener("mouseleave",()=>{ft.attr(it)}),ft.addEventListener("click",()=>{I(bl(ft,["style","path"]),bl(ft,["style","depth"]))})})}dee(v,p),p("treemapDrillDown",Q=>{const{marks:ce}=Q,pe=X.join("/"),Re=ce.map(je=>{if(je.type!=="rect")return je;let Ke=t;if($){const Ye=t.filter(At=>{const Ut=bl(At,["id"]);return Ut&&(Ut.match(`${pe}/`)||pe.match(Ut))}).map(At=>({value:At.height===0?bl(At,["value"]):void 0,name:bl(At,["id"])})),{paddingLeft:it,paddingBottom:at,paddingRight:vt}=n,Vt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||M.getBBox().height+10)/($+1),paddingLeft:it/($+1),paddingBottom:at/($+1),paddingRight:vt/($+1),path:At=>At.name,layer:At=>At.depth===$+1});Ke=C7(Ye,Vt,{value:"value"})[0]}else Ke=t.filter(Ye=>Ye.depth===1);const ft=[];return Ke.forEach(({path:Ye})=>{ft.push(vE(Ye))}),ti({},je,{data:Ke,scale:{color:{domain:ft}}})});return Object.assign(Object.assign({},Q),{marks:Re})}),yield h(void 0,["legendFilter"])}),N=X=>{const $=X.target;if(bl($,["markType"])!=="rect")return;const Q=bl($,["__data__","key"]),ce=nx(t,pe=>pe.id===Q);bl(ce,"height")&&I(bl(ce,"path"),bl(ce,"depth"))};b.addEventListener("click",N);const U=UM(Object.assign(Object.assign({},R.active),R.inactive)),H=()=>{C6(b).forEach($=>{const Q=bl($,["style","cursor"]),ce=nx(t,pe=>pe.id===bl($,["__data__","key"]));if(Q!=="pointer"&&(ce!=null&&ce.height)){$.style.cursor="pointer";const pe=DM($.attributes,U);$.addEventListener("mouseenter",()=>{$.attr(R.active)}),$.addEventListener("mouseleave",()=>{$.attr(ti(pe,R.inactive))})}})};return H(),b.addEventListener("mousemove",H),()=>{M.remove(),b.removeEventListener("click",N),b.removeEventListener("mousemove",H)}}}var YP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},hte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const dte={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},KP="movePoint",O7=e=>{const t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},R7=e=>{const t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},pte=(e,t,n)=>t.map(r=>["x","color"].reduce((s,l)=>{const u=n[l];return u&&r[u]!==e[u]?!1:s},!0)?Object.assign(Object.assign({},r),e):r),vte=e=>{const t=bl(e,["__data__","y"]),r=bl(e,["__data__","y1"])-t,{__data__:{data:i,encode:s,transform:l},childNodes:u}=e.parentNode,h=nx(l,({type:y})=>y==="normalizeY"),p=bl(s,["y","field"]),v=i[u.indexOf(e)][p];return(y,b=!1)=>h||b?y/(1-y)/(r/(1-r))*v:y},mte=(e,t)=>{const n=bl(e,["__data__","seriesItems",t,"0","value"]),r=bl(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:s,transform:l}}=e.parentNode,u=nx(l,({type:v})=>v==="normalizeY"),h=bl(s,["y","field"]),p=i[r][h];return v=>u?n===1?v:v/(1-v)/(n/(1-n))*p:v},M7=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},P7=(e,t,n,r)=>{const i=new vd({style:n}),s=new mh({style:r});return t.appendChild(s),e.appendChild(i),[i,s]},I7=(e,t)=>{if(!bl(e,["options","range","indexOf"]))return;const r=e.options.range.indexOf(t);return e.sortedDomain[r]},qP=(e,t,n)=>{const r=kw(e,t),s=kw(e,n)/r,l=e[0]+(t[0]-e[0])*s,u=e[1]+(t[1]-e[1])*s;return[l,u]};function gte(e={}){const{selection:t=[],precision:n=2}=e,r=hte(e,["selection","precision"]),i=Object.assign(Object.assign({},dte),r||{}),s=go(i,"path"),l=go(i,"label"),u=go(i,"point");return(h,p,v)=>{const{update:y,setState:b,container:T,view:R,options:{marks:M,coordinate:I}}=h,N=Nm(T);let U=C6(N),H,X=t;const{transform:$=[],type:Q}=I,ce=!!nx($,({type:At})=>At==="transpose"),pe=Q==="polar",Re=Q==="theta",je=!!nx(U,({markType:At})=>At==="area");je&&(U=U.filter(({markType:At})=>At==="area"));const Ke=new Mf({style:{zIndex:2}});N.appendChild(Ke);const ft=()=>{v.emit("element-point:select",{nativeEvent:!0,data:{selection:X}})},Ye=(At,Ut)=>{v.emit("element-point:moved",{nativeEvent:!0,data:{changeData:At,data:Ut}})},it=At=>{const Ut=At.target;X=[Ut.parentNode.childNodes.indexOf(Ut)],ft(),vt(Ut)},at=At=>{const{data:{selection:Ut},nativeEvent:Sn}=At;if(Sn)return;X=Ut;const Vn=bl(U,[X==null?void 0:X[0]]);Vn&&vt(Vn)},vt=At=>{const{attributes:Ut,markType:Sn,__data__:Vn}=At,{stroke:rr}=Ut,{points:or,seriesTitle:Hr,color:fi,title:Qi,seriesX:Jr,y1:qr}=Vn;if(ce&&Sn!=="interval")return;const{scale:Io,coordinate:Ji}=(H==null?void 0:H.view)||R,{color:Wi,y:wo,x:Ko}=Io,ca=Ji.getCenter();Ke.removeChildren();let Oa;const Zs=(Ta,vs,Ml,Fu)=>YP(this,void 0,void 0,function*(){return b("elementPointMove",Jf=>{var $c;const bh=((($c=H==null?void 0:H.options)===null||$c===void 0?void 0:$c.marks)||M).map(ku=>{if(!Fu.includes(ku.type))return ku;const{data:cp,encode:Ac}=ku,Wh=Object.keys(Ac).reduce((aa,ts)=>{const ks=Ac[ts];return ts==="x"&&(aa[ks]=Ta),ts==="y"&&(aa[ks]=vs),ts==="color"&&(aa[ks]=Ml),aa},{}),Pf=pte(Wh,cp,Ac);return Ye(Wh,Pf),ti({},ku,{data:Pf,animate:!1})});return Object.assign(Object.assign({},Jf),{marks:bh})}),yield y("elementPointMove")});if(["line","area"].includes(Sn))or.forEach((Ta,vs)=>{const Ml=Ko.invert(Jr[vs]);if(!Ml)return;const Fu=new $0({name:KP,style:Object.assign({cx:Ta[0],cy:Ta[1],fill:rr},u)}),Jf=mte(At,vs);Fu.addEventListener("mousedown",$c=>{const bh=Ji.output([Jr[vs],0]),ku=Hr==null?void 0:Hr.length;T.attr("cursor","move"),X[1]!==vs&&(X[1]=vs,ft()),M7(Ke.childNodes,X,u);const[cp,Ac]=P7(Ke,Fu,s,l),Uc=Pf=>{const aa=Ta[1]+Pf.clientY-Oa[1];if(je)if(pe){const ts=Ta[0]+Pf.clientX-Oa[0],[ks,Hs]=qP(ca,bh,[ts,aa]),[,Cc]=Ji.output([1,wo.output(0)]),[,Qu]=Ji.invert([ks,Cc-(or[vs+ku][1]-Hs)]),Ju=(vs+1)%ku,Gh=(vs-1+ku)%ku,av=Q2([or[Gh],[ks,Hs],Hr[Ju]&&or[Ju]]);Ac.attr("text",Jf(wo.invert(Qu)).toFixed(n)),cp.attr("d",av),Fu.attr("cx",ks),Fu.attr("cy",Hs)}else{const[,ts]=Ji.output([1,wo.output(0)]),[,ks]=Ji.invert([Ta[0],ts-(or[vs+ku][1]-aa)]),Hs=Q2([or[vs-1],[Ta[0],aa],Hr[vs+1]&&or[vs+1]]);Ac.attr("text",Jf(wo.invert(ks)).toFixed(n)),cp.attr("d",Hs),Fu.attr("cy",aa)}else{const[,ts]=Ji.invert([Ta[0],aa]),ks=Q2([or[vs-1],[Ta[0],aa],or[vs+1]]);Ac.attr("text",wo.invert(ts).toFixed(n)),cp.attr("d",ks),Fu.attr("cy",aa)}};Oa=[$c.clientX,$c.clientY],window.addEventListener("mousemove",Uc);const Wh=()=>YP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),window.removeEventListener("mousemove",Uc),T.removeEventListener("mouseup",Wh),js(Ac.attr("text")))return;const Pf=Number(Ac.attr("text")),aa=I7(Wi,fi);H=yield Zs(Ml,Pf,aa,["line","area"]),Ac.remove(),cp.remove(),vt(At)});T.addEventListener("mouseup",Wh)}),Ke.appendChild(Fu)}),M7(Ke.childNodes,X,u);else if(Sn==="interval"){let Ta=[(or[0][0]+or[1][0])/2,or[0][1]];ce?Ta=[or[0][0],(or[0][1]+or[1][1])/2]:Re&&(Ta=or[0]);const vs=vte(At),Ml=new $0({name:KP,style:Object.assign(Object.assign({cx:Ta[0],cy:Ta[1],fill:rr},u),{stroke:u.activeStroke})});Ml.addEventListener("mousedown",Fu=>{T.attr("cursor","move");const Jf=I7(Wi,fi),[$c,bh]=P7(Ke,Ml,s,l),ku=Ac=>{if(ce){const Uc=Ta[0]+Ac.clientX-Oa[0],[Wh]=Ji.output([wo.output(0),wo.output(0)]),[,Pf]=Ji.invert([Wh+(Uc-or[2][0]),Ta[1]]),aa=Q2([[Uc,or[0][1]],[Uc,or[1][1]],or[2],or[3]],!0);bh.attr("text",vs(wo.invert(Pf)).toFixed(n)),$c.attr("d",aa),Ml.attr("cx",Uc)}else if(Re){const Uc=Ta[1]+Ac.clientY-Oa[1],Wh=Ta[0]+Ac.clientX-Oa[0],[Pf,aa]=qP(ca,[Wh,Uc],Ta),[ts,ks]=qP(ca,[Wh,Uc],or[1]),Hs=Ji.invert([Pf,aa])[1],Cc=qr-Hs;if(Cc<0)return;const Qu=YG(ca,[[Pf,aa],[ts,ks],or[2],or[3]],Cc>.5?1:0);bh.attr("text",vs(Cc,!0).toFixed(n)),$c.attr("d",Qu),Ml.attr("cx",Pf),Ml.attr("cy",aa)}else{const Uc=Ta[1]+Ac.clientY-Oa[1],[,Wh]=Ji.output([1,wo.output(0)]),[,Pf]=Ji.invert([Ta[0],Wh-(or[2][1]-Uc)]),aa=Q2([[or[0][0],Uc],[or[1][0],Uc],or[2],or[3]],!0);bh.attr("text",vs(wo.invert(Pf)).toFixed(n)),$c.attr("d",aa),Ml.attr("cy",Uc)}};Oa=[Fu.clientX,Fu.clientY],window.addEventListener("mousemove",ku);const cp=()=>YP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),T.removeEventListener("mouseup",cp),window.removeEventListener("mousemove",ku),js(bh.attr("text")))return;const Ac=Number(bh.attr("text"));H=yield Zs(Qi,Ac,Jf,[Sn]),bh.remove(),$c.remove(),vt(At)});T.addEventListener("mouseup",cp)}),Ke.appendChild(Ml)}};U.forEach((At,Ut)=>{X[0]===Ut&&vt(At),At.addEventListener("click",it),At.addEventListener("mouseenter",O7),At.addEventListener("mouseleave",R7)});const Vt=At=>{const Ut=At==null?void 0:At.target;(!Ut||Ut.name!==KP&&!U.includes(Ut))&&(X=[],ft(),Ke.removeChildren())};return v.on("element-point:select",at),v.on("element-point:unselect",Vt),T.addEventListener("mousedown",Vt),()=>{Ke.remove(),v.off("element-point:select",at),v.off("element-point:unselect",Vt),T.removeEventListener("mousedown",Vt),U.forEach(At=>{At.removeEventListener("click",it),At.removeEventListener("mouseenter",O7),At.removeEventListener("mouseleave",R7)})}}}var yte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const L7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:s,data:l}=e;return t.map(u=>{var{data:h,x:p,y:v,width:y,height:b}=u,T=yte(u,["data","x","y","width","height"]);return Object.assign(Object.assign({},T),{data:YR(h,l),x:p!=null?p:n,y:v!=null?v:r,width:y!=null?y:i,height:b!=null?b:s})})};L7.props={};var _te=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const D7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:s}=e,[l,u,h,p]=n==="col"?["y","height","width","x"]:["x","width","height","y"],v=r.reduce((M,I)=>M+I),y=e[u]-i*(t.length-1),b=r.map(M=>y*(M/v)),T=[];let R=e[l]||0;for(let M=0;M<b.length;M+=1){const I=t[M],{data:N}=I,U=_te(I,["data"]),H=YR(N,s);T.push(Object.assign({[l]:R,[u]:b[M],[p]:e[p]||0,[h]:e[h],data:H},U)),R+=b[M]+i}return T};D7.props={};class EE{constructor(t){this.$value=t}static of(t){return new EE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var bte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xte=j2(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:s,y:l}=t,u=(h,p)=>{var v;if(h===void 0||!i)return{};const y=Kl(n,R=>R[h]),b=((v=r==null?void 0:r[p])===null||v===void 0?void 0:v.domain)||Array.from(y.keys()),T=b.map(R=>y.has(R)?y.get(R).length:1);return{domain:b,flex:T}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),u(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),u(l,"y"))}}}),QP=i1(e=>{const{data:t,scale:n,legend:r}=e,i=[e];let s,l,u;for(;i.length;){const b=i.shift(),{children:T,encode:R={},scale:M={},legend:I={}}=b,{color:N}=R,{color:U}=M,{color:H}=I;N!==void 0&&(s=N),U!==void 0&&(l=U),H!==void 0&&(u=H),Array.isArray(T)&&i.push(...T)}const h=()=>{var b;const T=(b=n==null?void 0:n.color)===null||b===void 0?void 0:b.domain;if(T!==void 0)return[T];if(s===void 0)return[void 0];const R=typeof s=="function"?s:I=>I[s],M=t.map(R);return M.some(I=>typeof I=="number")?[Cg(M)]:[Array.from(new Set(M)),"ordinal"]},p=typeof s=="string"?s:"",[v,y]=h();return Object.assign({encode:{color:{type:"column",value:v!=null?v:[]}},scale:{color:ti({},l,{domain:v,type:y})}},r===void 0&&{legend:{color:ti({title:p},u)}})}),JP=j2(()=>({animate:{enterType:"fadeIn"}})),eI=i1(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),tI=i1(()=>({type:"cell"})),N7=i1(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:s,y:l}=i,u=s?Array.from(new Set(r.map(v=>v[s]))):[],h=l?Array.from(new Set(r.map(v=>v[l]))):[];return(()=>{if(u.length&&h.length){const v=[];for(const y of u)for(const b of h)v.push({[s]:y,[l]:b});return v}if(u.length)return u.map(v=>({[s]:v}));if(h.length)return h.map(v=>({[l]:v}))})()}}]}}}),B7=i1((e,t=Ete,n=Ste,r=Tte,i={})=>{const{data:s,encode:l,children:u,scale:h,x:p=0,y:v=0,shareData:y=!1,key:b}=e,{value:T}=s,{x:R,y:M}=l,{color:I}=h,{domain:N}=I;return{children:(H,X,$)=>{const{x:Q,y:ce}=X,{paddingLeft:pe,paddingTop:Re,marginLeft:je,marginTop:Ke}=$,{domain:ft}=Q.getOptions(),{domain:Ye}=ce.getOptions(),it=sr(H),at=H.map(t),vt=H.map(({x:rr,y:or})=>[Q.invert(rr),ce.invert(or)]),At=vt.map(([rr,or])=>Hr=>{const{[R]:fi,[M]:Qi}=Hr;return(R!==void 0?fi===rr:!0)&&(M!==void 0?Qi===or:!0)}).map(rr=>T.filter(rr)),Ut=y?ds(At,rr=>rr.length):void 0,Sn=vt.map(([rr,or])=>({columnField:R,columnIndex:ft.indexOf(rr),columnValue:rr,columnValuesLength:ft.length,rowField:M,rowIndex:Ye.indexOf(or),rowValue:or,rowValuesLength:Ye.length})),Vn=Sn.map(rr=>Array.isArray(u)?u:[u(rr)].flat(1));return it.flatMap(rr=>{const[or,Hr,fi,Qi]=at[rr],Jr=Sn[rr],qr=At[rr];return Vn[rr].map(Ji=>{var Wi,wo,{scale:Ko,key:ca,facet:Oa=!0,axis:Zs={},legend:Ta={}}=Ji,vs=bte(Ji,["scale","key","facet","axis","legend"]);const Ml=((Wi=Ko==null?void 0:Ko.y)===null||Wi===void 0?void 0:Wi.guide)||Zs.y,Fu=((wo=Ko==null?void 0:Ko.x)===null||wo===void 0?void 0:wo.guide)||Zs.x,Jf={x:{tickCount:R?5:void 0},y:{tickCount:M?5:void 0}},$c=Oa?qr:qr.length===0?[]:T,bh={color:{domain:N}},ku={x:F7(Fu,n)(Jr,$c),y:F7(Ml,r)(Jr,$c)};return Object.assign(Object.assign({key:`${ca}-${rr}`,data:$c,margin:0,x:or+pe+p+je,y:Hr+Re+v+Ke,parentKey:b,width:fi,height:Qi,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!$c.length,dataDomain:Ut,scale:ti(Jf,Ko,bh),axis:ti({},Zs,ku),legend:!1},vs),i)})})}}});function Ete(e){const{points:t}=e;return qR(t)}function MA(e,t){return t.length?ti({title:!1,tick:null,label:null},e):ti({title:!1,tick:null,label:null,grid:null},e)}function Ste(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:s,columnValuesLength:l}=t;if(r!==i-1)return MA(e,n);const u=s!==l-1?!1:void 0,h=n.length?void 0:null;return ti({title:u,grid:h},e)}}function Tte(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return MA(e,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return ti({title:s,grid:l},e)}}function F7(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const k7=()=>e=>[EE.of(e).call(tI).call(QP).call(JP).call(xte).call(eI).call(N7).call(B7).value()];k7.props={};var nI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wte=j2(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Ate=i1(e=>{const{data:t,children:n,x:r=0,y:i=0,key:s}=e;return{children:(u,h,p)=>{const{x:v,y}=h,{paddingLeft:b,paddingTop:T,marginLeft:R,marginTop:M}=p,{domain:I}=v.getOptions(),{domain:N}=y.getOptions(),U=sr(u),H=u.map(({points:ce})=>qR(ce)),X=u.map(({x:ce,y:pe})=>[v.invert(ce),y.invert(pe)]),$=X.map(([ce,pe])=>({columnField:ce,columnIndex:I.indexOf(ce),columnValue:ce,columnValuesLength:I.length,rowField:pe,rowIndex:N.indexOf(pe),rowValue:pe,rowValuesLength:N.length})),Q=$.map(ce=>Array.isArray(n)?n:[n(ce)].flat(1));return U.flatMap(ce=>{const[pe,Re,je,Ke]=H[ce],[ft,Ye]=X[ce],it=$[ce];return Q[ce].map(vt=>{var Vt,At;const{scale:Ut,key:Sn,encode:Vn,axis:rr,interaction:or}=vt,Hr=nI(vt,["scale","key","encode","axis","interaction"]),fi=(Vt=Ut==null?void 0:Ut.y)===null||Vt===void 0?void 0:Vt.guide,Qi=(At=Ut==null?void 0:Ut.x)===null||At===void 0?void 0:At.guide,Jr={x:{facet:!1},y:{facet:!1}},qr={x:Ote(Qi)(it,t),y:Rte(fi)(it,t)},Io={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:s,key:`${Sn}-${ce}`,x:pe+b+r+R,y:Re+T+i+M,width:je,height:Ke,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:ti(Jr,Ut),axis:ti(Io,rr,qr),legend:!1,encode:ti({},Vn,{x:ft,y:Ye}),interaction:ti({},or,{legendFilter:!1})},Hr)})})}}}),Cte=i1(e=>{const{encode:t}=e,n=nI(e,["encode"]),{position:r=[],x:i=r,y:s=[...r].reverse()}=t,l=nI(t,["position","x","y"]),u=[];for(const h of[i].flat(1))for(const p of[s].flat(1))u.push({$x:h,$y:p});return Object.assign(Object.assign({},n),{data:u,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function Ote(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return MA(e,n)}}function Rte(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return MA(e,n)}}const Mte=()=>e=>[EE.of(e).call(tI).call(QP).call(Ate).call(Cte).call(JP).call(eI).call(wte).value()];var Pte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ite=j2(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Lte=j2(e=>({coordinate:{type:"polar"}})),Dte=e=>{const{encode:t}=e,n=Pte(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function U7(e){return t=>null}function Nte(e){const{points:t}=e,[n,r,i,s]=t,l=Eu(n,s),u=Lu(n,s),h=Lu(r,i),p=$L(u,h),v=1/Math.sin(p/2),y=l/(1+v),b=y*Math.sqrt(2),[T,R]=i,I=Nb(u)+p/2,N=y*v,U=T+N*Math.sin(I),H=R-N*Math.cos(I);return[U-b/2,H-b/2,b,b]}const Bte=()=>e=>[EE.of(e).call(tI).call(Dte).call(QP).call(Lte).call(N7).call(B7,Nte,U7,U7,{frame:!1}).call(JP).call(eI).call(Ite).value()];function Fte(e,t,n){const i=n,s=[0,i],l=[-i+1,1];if(e==="normal")return s;if(e==="reverse")return l;if(e==="alternate")return t%2===0?s:l;if(e==="reverse-alternate")return t%2===0?l:s}function kte(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=ti({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:s}=i;Array.isArray(s)&&r.push(...s)}return e}const z7=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:s="ease-in-out-sine"}=e,l=t.length;if(!Array.isArray(t)||l===0)return[];const{key:u}=t[0],h=t.map(p=>Object.assign(Object.assign({},p),{key:u})).map(p=>kte(p,n,s));return function*(){let p=0,v;for(;r==="infinite"||p<r;){const[y,b]=Fte(i,p,l);for(let T=y;T<b;T+=1){const R=Math.abs(T);v!==R&&(yield h[R]),v=R}p++}}};z7.props={};function Xy(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=Ute(e).map(l=>{var u;return[l,(u=ll(r,l))===null||u===void 0?void 0:u[0]]}).filter(([,l])=>ul(l)),s=l=>i.map(([,u])=>u[l]).join("-");return Array.from(Kl(t,s).values())}function j7(e){return Array.isArray(e)?Vte(e):typeof e=="function"?jte(e):e==="series"?zte:e==="value"?Hte:e==="sum"?Wte:e==="maxIndex"?Gte:null}function V7(e,t){for(const n of e)n.sort(t)}function H7(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function Ute(e){return Array.isArray(e)?e:[e]}function zte(e,t,n){return SE(r=>n[r])}function jte(e){return(t,n,r)=>SE(i=>e(t[i]))}function Vte(e){return(t,n,r)=>(i,s)=>e.reduce((l,u)=>l!==0?l:Du(t[i][u],t[s][u]),0)}function Hte(e,t,n){return SE(r=>t[r])}function Wte(e,t,n){const r=sr(e),i=Array.from(Kl(r,l=>n[+l]).entries()),s=new Map(i.map(([l,u])=>[l,u.reduce((h,p)=>h+ +t[p])]));return SE(l=>s.get(n[l]))}function Gte(e,t,n){const r=sr(e),i=Array.from(Kl(r,l=>n[+l]).entries()),s=new Map(i.map(([l,u])=>[l,Fb(u,h=>t[h])]));return SE(l=>s.get(n[l]))}function SE(e){return(t,n)=>Du(e(t),e(n))}const W7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:s="y1",series:l=!0}=e;return(u,h)=>{var p;const{data:v,encode:y,style:b={}}=h,[T,R]=ll(y,"y"),[M,I]=ll(y,"y1"),[N]=l?oE(y,"series","color"):ll(y,"color"),U=Xy(t,u,h),X=((p=j7(n))!==null&&p!==void 0?p:()=>null)(v,T,N);X&&V7(U,X);const $=new Array(u.length),Q=new Array(u.length),ce=new Array(u.length),pe=[],Re=[];for(const it of U){r&&it.reverse();const at=M?+M[it[0]]:0,vt=[],Vt=[];for(const Hr of it){const fi=ce[Hr]=+T[Hr]-at;fi<0?Vt.push(Hr):fi>=0&&vt.push(Hr)}const At=vt.length>0?vt:Vt,Ut=Vt.length>0?Vt:vt;let Sn=vt.length-1,Vn=0;for(;Sn>0&&T[At[Sn]]===0;)Sn--;for(;Vn<Ut.length-1&&T[Ut[Vn]]===0;)Vn++;pe.push(At[Sn]),Re.push(Ut[Vn]);let rr=at;for(const Hr of Vt.reverse()){const fi=ce[Hr];rr=$[Hr]=(Q[Hr]=rr)+fi}let or=at;for(const Hr of vt){const fi=ce[Hr];fi>0?or=$[Hr]=(Q[Hr]=or)+fi:$[Hr]=Q[Hr]=or}}const je=new Set(pe),Ke=new Set(Re),ft=i==="y"?$:Q,Ye=s==="y"?$:Q;return[u,ti({},h,{encode:{y0:rA(T,R),y:wc(ft,R),y1:wc(Ye,I)},style:Object.assign({first:(it,at)=>je.has(at),last:(it,at)=>Ke.has(at)},b)})]}};W7.props={};function G7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Zte(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i));else{let l=-1;for(let u of e)(u=t(u,++l,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,s+=r*(u-i))}if(n>1)return s/(n-1)}function Z7(e,t){const n=Zte(e,t);return n&&Math.sqrt(n)}function Xte(e,t,n){const r=G7(e),i=Z7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var X7=Array.prototype,$te=X7.slice,Rpe=X7.map;function rI(e){return()=>e}const Yte=Math.sqrt(50),Kte=Math.sqrt(10),qte=Math.sqrt(2);function PA(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Yte?10:s>=Kte?5:s>=qte?2:1;let u,h,p;return i<0?(p=Math.pow(10,-i)/l,u=Math.round(e*p),h=Math.round(t*p),u/p<e&&++u,h/p>t&&--h,p=-p):(p=Math.pow(10,i)*l,u=Math.round(e/p),h=Math.round(t/p),u*p<e&&++u,h*p>t&&--h),h<u&&.5<=n&&n<2?PA(e,t,n*2):[u,h,p]}function Qte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?PA(t,e,n):PA(e,t,n);if(!(s>=i))return[];const u=s-i+1,h=new Array(u);if(r)if(l<0)for(let p=0;p<u;++p)h[p]=(s-p)/-l;else for(let p=0;p<u;++p)h[p]=(s-p)*l;else if(l<0)for(let p=0;p<u;++p)h[p]=(i+p)/-l;else for(let p=0;p<u;++p)h[p]=(i+p)*l;return h}function TE(e,t,n){return t=+t,e=+e,n=+n,PA(e,t,n)[2]}function Mpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?TE(t,e,n):TE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Jte(e,t,n){let r;for(;;){const i=TE(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function ene(e){return Math.max(1,Math.ceil(Math.log(G7(e))/Math.LN2)+1)}function tne(){var e=Y_,t=Cg,n=ene;function r(i){Array.isArray(i)||(i=Array.from(i));var s,l=i.length,u,h,p=new Array(l);for(s=0;s<l;++s)p[s]=e(i[s],s,i);var v=t(p),y=v[0],b=v[1],T=n(p,y,b);if(!Array.isArray(T)){const H=b,X=+T;if(t===Cg&&([y,b]=Jte(y,b,X)),T=Qte(y,b,X),T[0]<=y&&(h=TE(y,b,X)),T[T.length-1]>=b)if(H>=b&&t===Cg){const $=TE(y,b,X);isFinite($)&&($>0?b=(Math.floor(b/$)+1)*$:$<0&&(b=(Math.ceil(b*-$)+1)/-$))}else T.pop()}for(var R=T.length,M=0,I=R;T[M]<=y;)++M;for(;T[I-1]>b;)--I;(M||I<R)&&(T=T.slice(M,I),R=I-M);var N=new Array(R+1),U;for(s=0;s<=R;++s)U=N[s]=[],U.x0=s>0?T[s-1]:y,U.x1=s<R?T[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<l;++s)(u=p[s])!=null&&y<=u&&u<=b&&N[Math.min(R,Math.floor((u-y)/h))].push(i[s]);else if(h<0){for(s=0;s<l;++s)if((u=p[s])!=null&&y<=u&&u<=b){const H=Math.floor((y-u)*h);N[Math.min(R,H+(T[H]<=u))].push(i[s])}}}else for(s=0;s<l;++s)(u=p[s])!=null&&y<=u&&u<=b&&N[IG(T,u,0,R)].push(i[s]);return N}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:rI(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:rI([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:rI(Array.isArray(i)?$te.call(i):i),r):n},r}function iI(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?G2:f6(i);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,v=Math.log(h),y=.5*Math.exp(2*v/3),b=.5*Math.sqrt(v*y*(h-y)/h)*(p-h/2<0?-1:1),T=Math.max(n,Math.floor(t-p*y/h+b)),R=Math.min(r,Math.floor(t+(h-p)*y/h+b));iI(e,t,T,R,i)}const s=e[t];let l=n,u=r;for(wE(e,n,t),i(e[r],s)>0&&wE(e,n,r);l<u;){for(wE(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?wE(e,n,u):(++u,wE(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function wE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nne(e,t=Du){let n,r=!1;if(t.length===1){let i;for(const s of e){const l=t(s);(r?Du(l,i)>0:Du(l,l)===0)&&(n=s,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function IA(e,t,n){if(e=Float64Array.from(OG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return v0(e);if(t>=1)return ds(e);var r,i=(r-1)*t,s=Math.floor(i),l=ds(iI(e,s).subarray(0,s+1)),u=v0(e.subarray(s+1));return l+(u-l)*(i-s)}}function Ppe(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function rne(e,t,n=aM){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(u,h)=>aM(n(e[h],h,e))),t<=0)return bE(r);if(t>=1)return Fb(r);var r,i=Uint32Array.from(e,(u,h)=>h),s=r.length-1,l=Math.floor(s*t);return iI(i,l,0,s,(u,h)=>G2(r[u],r[h])),l=nne(i.subarray(0,l+1),u=>r[u]),l>=0?l:-1}}function oI(e,t){return IA(e,.5,t)}function ine(e,t){return rne(e,.5,t)}var one=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $y(e){return t=>t===null?e:`${e} of ${t}`}function ane(e){if(typeof e=="function")return[e,null];const n={mean:sne,max:cne,count:fne,first:dne,last:pne,sum:hne,min:une,median:lne}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function sne(){const e=(n,r)=>xE(n,i=>+r[i]),t=$y("mean");return[e,t]}function lne(){const e=(n,r)=>oI(n,i=>+r[i]),t=$y("median");return[e,t]}function cne(){const e=(n,r)=>ds(n,i=>+r[i]),t=$y("max");return[e,t]}function une(){const e=(n,r)=>v0(n,i=>+r[i]),t=$y("min");return[e,t]}function fne(){const e=(n,r)=>n.length,t=$y("count");return[e,t]}function hne(){const e=(n,r)=>is(n,i=>+r[i]),t=$y("sum");return[e,t]}function dne(){const e=(n,r)=>r[n[0]],t=$y("first");return[e,t]}function pne(){const e=(n,r)=>r[n[n.length-1]],t=$y("last");return[e,t]}const aI=(e={})=>{const{groupBy:t}=e,n=one(e,["groupBy"]);return(r,i)=>{const{data:s,encode:l}=i,u=t(r,i);if(!u)return[r,i];const h=(T,R)=>{if(T)return T;const{from:M}=R;if(!M)return T;const[,I]=ll(l,M);return I},p=Object.entries(n).map(([T,R])=>{const[M,I]=ane(R),[N,U]=ll(l,T),H=h(U,R),X=u.map($=>M($,N!=null?N:s));return[T,Object.assign(Object.assign({},$K(X,(I==null?void 0:I(H))||H)),{aggregate:!0})]}),v=Object.keys(l).map(T=>{const[R,M]=ll(l,T),I=u.map(N=>R[N[0]]);return[T,wc(I,M)]}),y=u.map(T=>s[T[0]]);return[sr(u),ti({},i,{data:y,encode:Object.fromEntries([...v,...p])})]}};aI.props={};var vne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $7="thresholds";function mne(e){const[t,n]=Cg(e);return Math.min(200,Xte(e,t,n))}const sI=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=vne(e,["groupChannels","binChannels"]),i={},s=(l,u)=>{const{encode:h}=u,p=n.map(R=>{const[M]=ll(h,R);return M}),v=go(r,$7),y=l.filter(R=>p.every(M=>ul(M[R]))),b=[...t.map(R=>{const[M]=ll(h,R);return M}).filter(ul).map(R=>M=>R[M]),...n.map((R,M)=>{const I=p[M],N=v[R]||mne(I),U=tne().thresholds(N).value(X=>+I[X])(y),H=new Map(U.flatMap(X=>{const{x0:$,x1:Q}=X,ce=`${$},${Q}`;return X.map(pe=>[pe,ce])}));return i[R]=H,X=>H.get(X)})],T=R=>b.map(M=>M(R)).join("-");return Array.from(Kl(y,T).values())};return aI(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith($7)))),Object.fromEntries(n.flatMap(l=>{const u=([p])=>+i[l].get(p).split(",")[0],h=([p])=>+i[l].get(p).split(",")[1];return h.from=l,[[l,u],[`${l}1`,h]]}))),{groupBy:s}))};sI.props={};const Y7=(e={})=>{const{thresholds:t}=e;return sI(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};Y7.props={};var gne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const K7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,s=gne(e,["groupBy","reverse","orderBy","padding"]);return(l,u)=>{const{data:h,encode:p,scale:v}=u,{series:y}=v,[b]=ll(p,"y"),[T]=oE(p,"series","color"),R=H7(T,y),M=ti({},u,{scale:{series:{domain:R,paddingInner:i}}}),I=Xy(t,l,u),N=j7(r);if(!N)return[l,ti(M,{encode:{series:wc(T)}})];const U=N(h,b,T);U&&V7(I,U);const H=new Array(l.length);for(const X of I){n&&X.reverse();for(let $=0;$<X.length;$++)H[X[$]]=R[$]}return[l,ti(M,{encode:{series:wc(r?H:T)}})]}};K7.props={};function LA(e,t,n){if(e===null)return[-.5,.5];const r=H7(e,t),s=new Hy({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function DA(e,t,n){return t*(1-e)+n*e}const q7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(s,l)=>{const{encode:u,scale:h}=l,{x:p,y:v}=h,[y]=ll(u,"x"),[b]=ll(u,"y"),T=LA(y,p,n),R=LA(b,v,r),M=s.map(()=>DA(i(),...R)),I=s.map(()=>DA(i(),...T));return[s,ti({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:wc(M),dx:wc(I)}})]}};q7.props={};const Q7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{x:u}=l,[h]=ll(s,"x"),p=LA(h,u,t),v=r.map(()=>DA(n(),...p));return[r,ti({scale:{x:{padding:.5}}},i,{encode:{dx:wc(v)}})]}};Q7.props={};const J7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{y:u}=l,[h]=ll(s,"y"),p=LA(h,u,t),v=r.map(()=>DA(n(),...p));return[r,ti({scale:{y:{padding:.5}}},i,{encode:{dy:wc(v)}})]}};J7.props={};var yne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const e9=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:s}=i,l=yne(i,["x"]),u=Object.entries(l).filter(([b])=>b.startsWith("y")).map(([b])=>[b,ll(i,b)[0]]),h=u.map(([b])=>[b,new Array(n.length)]),p=Xy(t,n,r),v=new Array(p.length);for(let b=0;b<p.length;b++){const R=p[b].flatMap(N=>u.map(([,U])=>+U[N])),[M,I]=Cg(R);v[b]=(M+I)/2}const y=Math.max(...v);for(let b=0;b<p.length;b++){const T=y-v[b],R=p[b];for(const M of R)for(let I=0;I<u.length;I++){const[,N]=u[I],[,U]=h[I];U[M]=+N[M]+T}}return[n,ti({},r,{encode:Object.fromEntries(h.map(([b,T])=>[b,wc(T,ll(i,b)[1])]))})]}};e9.props={};const t9=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:s}=i,[l]=ll(s,"y"),[u,h]=ll(s,"y1"),[p]=n?oE(s,"series","color"):ll(s,"color"),v=Xy(t,r,i),y=new Array(r.length);for(const b of v){const T=b.map(R=>+l[R]);for(let R=0;R<b.length;R++){const M=b[R],I=Math.max(...T.filter((N,U)=>U!==R));y[M]=+l[M]>I?I:l[M]}}return[r,ti({},i,{encode:{y1:wc(y,h)}})]}};t9.props={};const n9=e=>{const{groupBy:t=["x"],reducer:n=(l,u)=>u[l[0]],orderBy:r=null,reverse:i=!1,duration:s}=e;return(l,u)=>{const{encode:h}=u,v=(Array.isArray(t)?t:[t]).map(I=>[I,ll(h,I)[0]]);if(v.length===0)return[l,u];let y=[l];for(const[,I]of v){const N=[];for(const U of y){const H=Array.from(Kl(U,X=>I[X]).values());N.push(...H)}y=N}if(r){const[I]=ll(h,r);I&&y.sort((N,U)=>n(N,I)-n(U,I)),i&&y.reverse()}const b=(s||3e3)/y.length,[T]=s?[jy(l,b)]:oE(h,"enterDuration",jy(l,b)),[R]=oE(h,"enterDelay",jy(l,0)),M=new Array(l.length);for(let I=0,N=0;I<y.length;I++){const U=y[I],H=ds(U,X=>+T[X]);for(const X of U)M[X]=+R[X]+N;N+=H}return[l,ti({},u,{encode:{enterDuration:iA(T),enterDelay:iA(M)}})]}};n9.props={};var _ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bne(e){return typeof e=="function"?e:{min:(n,r)=>v0(n,i=>r[+i]),max:(n,r)=>ds(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>xE(n,i=>r[+i]),median:(n,r)=>oI(n,i=>r[+i]),sum:(n,r)=>is(n,i=>r[+i]),deviation:(n,r)=>Z7(n,i=>r[+i])}[e]||ds}const r9=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:s,tooltip:l}=i,{x:u}=s,h=_ne(s,["x"]),p=Object.entries(h).filter(([M])=>M.startsWith("y")).map(([M])=>[M,ll(s,M)[0]]),[,v]=p.find(([M])=>M==="y"),y=p.map(([M])=>[M,new Array(r.length)]),b=Xy(t,r,i),T=bne(n);for(const M of b){const I=T(M,v);for(const N of M)for(let U=0;U<p.length;U++){const[,H]=p[U],[,X]=y[U];X[N]=+H[N]/I}}const R=Fv(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,ti({},i,Object.assign({encode:Object.fromEntries(y.map(([M,I])=>[M,wc(I,ll(s,M)[1])]))},!R&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};r9.props={};function i9(e,t){return[e[0]]}function xne(e,t){const n=e.length-1;return[e[n]]}function Ene(e,t){const n=Fb(e,r=>t[r]);return[e[n]]}function Sne(e,t){const n=bE(e,r=>t[r]);return[e[n]]}function Tne(e){return typeof e=="function"?e:{first:i9,last:xne,max:Ene,min:Sne}[e]||i9}const NA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,s)=>{const{encode:l}=s,u=Xy(t,i,s),[h]=ll(l,n),p=Tne(r);return[u.flatMap(v=>p(v,h)),s]}};NA.props={};var wne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const o9=(e={})=>{const{selector:t}=e,n=wne(e,["selector"]);return NA(Object.assign({channel:"x",selector:t},n))};o9.props={};var Ane=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const a9=(e={})=>{const{selector:t}=e,n=Ane(e,["selector"]);return NA(Object.assign({channel:"y",selector:t},n))};a9.props={};var Cne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const AE=(e={})=>{const{channels:t=["x","y"]}=e,n=Cne(e,["channels"]),r=(i,s)=>Xy(t,i,s);return aI(Object.assign(Object.assign({},n),{groupBy:r}))};AE.props={};const s9=(e={})=>AE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));s9.props={};const l9=(e={})=>AE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));l9.props={};const c9=(e={})=>AE(Object.assign(Object.assign({},e),{channels:["color"]}));c9.props={};function One(e,t,n){return(t.length!==2?zv(x2(e,t,n),([r,i],[s,l])=>Du(i,l)||Du(r,s)):zv(Kl(e,n),([r,i],[s,l])=>t(i,l)||Du(r,s))).map(([r])=>r)}var u9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rne(e,t,n){const{by:r=e,reducer:i="max"}=t,[s]=ll(n,r);if(typeof i=="function")return l=>i(l,s);if(i==="max")return l=>ds(l,u=>+s[u]);if(i==="min")return l=>v0(l,u=>+s[u]);if(i==="sum")return l=>is(l,u=>+s[u]);if(i==="median")return l=>oI(l,u=>+s[u]);if(i==="mean")return l=>xE(l,u=>+s[u]);if(i==="first")return l=>s[l[0]];if(i==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${i}`)}function Mne(e,t,n){const{reverse:r,channel:i}=n,{encode:s}=t,[l]=ll(s,i),u=zv(e,h=>l[h]);return r&&u.reverse(),[u,t]}function Pne(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function Ine(e,t,n){var r;const{reverse:i,slice:s,channel:l}=n,u=u9(n,["reverse","slice","channel"]),{encode:h,scale:p={}}=t,v=(r=p[l])===null||r===void 0?void 0:r.domain,[y]=ll(h,l),b=Rne(l,u,h),T=Pne(e,y,v),R=One(T,b,N=>y[N]);i&&R.reverse();const M=typeof s=="number"?[0,s]:s,I=s?R.slice(...M):R;return[e,ti(t,{scale:{[l]:{domain:I}}})]}const BA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,s=u9(e,["reverse","slice","channel","ordinal"]);return(l,u)=>i?Ine(l,u,Object.assign({reverse:t,slice:n,channel:r},s)):Mne(l,u,Object.assign({reverse:t,slice:n,channel:r},s))};BA.props={};const f9=(e={})=>BA(Object.assign(Object.assign({},e),{channel:"x"}));f9.props={};const h9=(e={})=>BA(Object.assign(Object.assign({},e),{channel:"y"}));h9.props={};const d9=(e={})=>BA(Object.assign(Object.assign({},e),{channel:"color"}));d9.props={};function Lne(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function Dne(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>is(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const p9=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,s)=>{const{data:l,encode:u}=s,[h]=ll(u,"x"),p=t?Lne(l,t):ll(u,n)[0],v=Dne(r,p),y=Sb(i,v,b=>h[b]).map(b=>b[1]);return[i,ti({},s,{scale:{x:{flex:y}}})]}};p9.props={};function Nne(e){const{padding:t=0,direction:n="col"}=e;return(r,i,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:u,innerHeight:h}=s,p=h/u;let v=Math.ceil(Math.sqrt(i/p)),y=u/v,b=Math.ceil(i/v),T=b*y;for(;T>h;)v=v+1,y=u/v,b=Math.ceil(i/v),T=b*y;const R=h-b*y,M=b<=1?0:R/(b-1),[I,N]=b<=1?[(u-l*y)/(l-1),(h-y)/2]:[0,0];return r.map((U,H)=>{const[X,$,Q,ce]=qR(U),pe=n==="col"?H%v:Math.floor(H/b),Re=n==="col"?Math.floor(H/v):H%b,je=pe*y,Ke=(b-Re-1)*y+R,ft=(y-t)/Q,Ye=(y-t)/ce,it=je-X+I*pe+1/2*t,at=Ke-$-M*Re-N+1/2*t;return`translate(${it}, ${at}) scale(${ft}, ${Ye})`})}}const v9=e=>(t,n)=>[t,ti({},n,{modifier:Nne(e),axis:!1})];v9.props={};function Bne(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const s=T=>t[e[T]]*1,l=T=>n[e[T]]*1,u=[],h=(i-2)/(r-2);let p=0,v,y,b;u.push(p);for(let T=0;T<r-2;T++){let R=0,M=0,I=Math.floor((T+1)*h)+1,N=Math.floor((T+2)*h)+1;N=Math.min(N,i);const U=N-I;for(;I<N;I++)R+=s(I),M+=l(I);R/=U,M/=U;let H=Math.floor((T+0)*h)+1;const X=Math.floor((T+1)*h)+1,$=[s(p),l(p)];for(v=y=-1;H<X;H++)y=Math.abs(($[0]-R)*(s(H)-$[1])-($[0]-l(H))*(M-$[0]))*.5,y>v&&(v=y,b=H);u.push(b),p=b}return u.push(i-1),u.map(T=>e[T])}function Fne(e){if(typeof e=="function")return e;if(e==="lttb")return Bne;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,s)=>[r[bE(r,l=>s[l])]],max:(r,i,s)=>[r[Fb(r,l=>s[l])]],median:(r,i,s)=>[r[ine(r,l=>s[l])]]},n=t[e]||t.median;return(r,i,s,l)=>{const u=Math.max(1,Math.floor(r.length/l));return kne(r,u).flatMap(p=>n(p,i,s))}}function kne(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const m9=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=Fne(t);return(s,l)=>{const{encode:u}=l,h=Xy(r,s,l),[p]=ll(u,"x"),[v]=ll(u,"y");return[h.flatMap(y=>i(y,p,v,n)),l]}};m9.props={};function Une(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}function zne(e){var t;const{encode:n}=e,r=Object.assign(Object.assign({},e),{encode:Object.assign(Object.assign({},e.encode),{y:Object.assign(Object.assign({},e.encode.y),{value:[]})})}),i=(t=n==null?void 0:n.color)===null||t===void 0?void 0:t.field;if(!n||!i)return r;let s;for(const[l,u]of Object.entries(n))(l==="x"||l==="y")&&u.field===i&&(s=Object.assign(Object.assign({},s),{[l]:Object.assign(Object.assign({},u),{value:[]})}));return s?Object.assign(Object.assign({},e),{encode:Object.assign(Object.assign({},e.encode),s)}):r}const g9=(e={})=>(t,n)=>{const{encode:r,data:i}=n,s=Object.entries(e).map(([v,y])=>{const[b]=ll(r,v);if(!b)return null;const[T,R=!0]=Une(y);if(typeof T=="function")return M=>T(b[M]);if(R){const M=Array.isArray(T)?T:[T];return M.length===0?null:I=>M.includes(b[I])}else{const[M,I]=T;return N=>b[N]>=M&&b[N]<=I}}).filter(ul),l=v=>s.every(y=>y(v)),u=t.filter(l),h=u.map((v,y)=>y);if(s.length===0){const v=zne(n);return[t,v]}const p=Object.entries(r).map(([v,y])=>[v,Object.assign(Object.assign({},y),{value:h.map(b=>y.value[u[b]]).filter(b=>b!==void 0)})]);return[h,ti({},n,{encode:Object.fromEntries(p),data:u.map(v=>i[v])})]};g9.props={};var y9={},lI={},cI=34,CE=10,uI=13;function _9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jne(e,t){var n=_9(e);return function(r,i){return t(n(r),i,e)}}function b9(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Bp(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Vne(e){return e<0?"-"+Bp(-e,6):e>9999?"+"+Bp(e,6):Bp(e,4)}function Hne(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Vne(e.getUTCFullYear(),4)+"-"+Bp(e.getUTCMonth()+1,2)+"-"+Bp(e.getUTCDate(),2)+(i?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"."+Bp(i,3)+"Z":r?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"Z":n||t?"T"+Bp(t,2)+":"+Bp(n,2)+"Z":"")}function Wne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,b){var T,R,M=i(y,function(I,N){if(T)return T(I,N-1);R=I,T=b?jne(I,b):_9(I)});return M.columns=R||[],M}function i(y,b){var T=[],R=y.length,M=0,I=0,N,U=R<=0,H=!1;y.charCodeAt(R-1)===CE&&--R,y.charCodeAt(R-1)===uI&&--R;function X(){if(U)return lI;if(H)return H=!1,y9;var Q,ce=M,pe;if(y.charCodeAt(ce)===cI){for(;M++<R&&y.charCodeAt(M)!==cI||y.charCodeAt(++M)===cI;);return(Q=M)>=R?U=!0:(pe=y.charCodeAt(M++))===CE?H=!0:pe===uI&&(H=!0,y.charCodeAt(M)===CE&&++M),y.slice(ce+1,Q-1).replace(/""/g,'"')}for(;M<R;){if((pe=y.charCodeAt(Q=M++))===CE)H=!0;else if(pe===uI)H=!0,y.charCodeAt(M)===CE&&++M;else if(pe!==n)continue;return y.slice(ce,Q)}return U=!0,y.slice(ce,R)}for(;(N=X())!==lI;){for(var $=[];N!==y9&&N!==lI;)$.push(N),N=X();b&&($=b($,I++))==null||T.push($)}return T}function s(y,b){return y.map(function(T){return b.map(function(R){return v(T[R])}).join(e)})}function l(y,b){return b==null&&(b=b9(y)),[b.map(v).join(e)].concat(s(y,b)).join(`
`)}function u(y,b){return b==null&&(b=b9(y)),s(y,b).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(v).join(e)}function v(y){return y==null?"":y instanceof Date?Hne(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:u,formatRows:h,formatRow:p,formatValue:v}}function Gne(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Zne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Zne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Xne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const x9=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>Xne(void 0,void 0,void 0,function*(){const s=yield fetch(t);if(n==="csv"){const l=yield s.text();return Wne(r).parse(l,i?Gne:Sg)}else if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};x9.props={};const E9=e=>{const{value:t}=e;return()=>t};E9.props={};function $ne(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const S9=e=>{const{fields:t=[]}=e,n=$ne(t,!0);return r=>{const i=(s,l)=>n.reduce((u,[h,p=!0])=>u!==0?u:p?s[h]<l[h]?-1:+(s[h]!==l[h]):s[h]>l[h]?-1:+(s[h]!==l[h]),0);return[...r].sort(i)}};S9.props={};function Ipe(e){return e!=null&&!Number.isNaN(e)}const T9=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};T9.props={};function Yne(e){return e!=null&&!Number.isNaN(e)}const w9=e=>{const{callback:t=Yne}=e;return n=>n.filter(t)};w9.props={};function Kne(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const A9=e=>{const{fields:t}=e;return n=>n.map(r=>Kne(r,t))};A9.props={};function qne(e){return Object.keys(e).length===0}const C9=e=>t=>{if(!e||qne(e))return t;const n=r=>Object.entries(r).reduce((i,[s,l])=>(i[e[s]||s]=l,i),{});return t.map(n)};C9.props={};function Qne(e){return!e||Object.keys(e).length===0}const O9=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>Qne(t)?i:i.flatMap(s=>t.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};O9.props={};const R9=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};R9.props={};const M9=e=>{const{callback:t=Sg}=e;return n=>t(n)};M9.props={};const P9=e=>{const{callback:t=Sg}=e;return n=>Array.isArray(n)?n.map(t):n};P9.props={};function I9(e){return typeof e=="string"?t=>t[e]:e}const L9=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:s=NaN}=e,[l,u]=n,h=I9(u),p=I9(l),v=x2(t,([y])=>y,y=>h(y));return y=>y.map(b=>{const T=v.get(p(b));return Object.assign(Object.assign({},b),r.reduce((R,M,I)=>(R[i[I]]=T?T[M]:s,R),{}))})};L9.props={};var Jne=D(53843),ere=D.n(Jne);function Lpe(e){return e!=null&&!Number.isNaN(e)}const D9=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:s,size:l=10,width:u}=e,[h,p]=r;return v=>Array.from(Kl(v,b=>n.map(T=>b[T]).join("-")).values()).map(b=>{const T=ere().create(b.map(I=>I[t]),{min:i,max:s,size:l,width:u}),R=T.map(I=>I.x),M=T.map(I=>I.y);return Object.assign(Object.assign({},b[0]),{[h]:R,[p]:M})})};D9.props={};const N9=()=>e=>(console.log("G2 data section:",e),e);N9.props={};var tre=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};function nre(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const s=r?r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this},setAsync(n,r,i){return tre(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const s=r?yield r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this})}}}const fI=Math.PI/180,OE=64,FA=2048;function rre(e){return e.text}function ire(){return"serif"}function B9(){return"normal"}function ore(e){return e.value}function are(){return~~(Math.random()*2)*90}function sre(){return 1}function lre(){}function cre(e,t,n,r){if(t.sprite)return;const i=e.context,s=e.ratio;i.clearRect(0,0,(OE<<5)/s,FA/s);let l=0,u=0,h=0;const p=n.length;for(--r;++r<p;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;let b=i.measureText(t.text+"m").width*s,T=t.size<<1;if(t.rotate){const R=Math.sin(t.rotate*fI),M=Math.cos(t.rotate*fI),I=b*M,N=b*R,U=T*M,H=T*R;b=Math.max(Math.abs(I+H),Math.abs(I-H))+31>>5<<5,T=~~Math.max(Math.abs(N+U),Math.abs(N-U))}else b=b+31>>5<<5;if(T>h&&(h=T),l+b>=OE<<5&&(l=0,u+=h,h=0),u+T>=FA)break;i.translate((l+(b>>1))/s,(u+(T>>1))/s),t.rotate&&i.rotate(t.rotate*fI),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=b,t.height=T,t.xoff=l,t.yoff=u,t.x1=b>>1,t.y1=T>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=b}const v=i.getImageData(0,0,(OE<<5)/s,FA/s).data,y=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const b=t.width,T=b>>5;let R=t.y1-t.y0;for(let N=0;N<R*T;N++)y[N]=0;if(l=t.xoff,l==null)return;u=t.yoff;let M=0,I=-1;for(let N=0;N<R;N++){for(let U=0;U<b;U++){const H=T*N+(U>>5),X=v[(u+N)*(OE<<5)+(l+U)<<2]?1<<31-U%32:0;y[H]|=X,M|=X}M?I=N:(t.y0++,R--,N--,u++)}t.y1=t.y0+I,t.sprite=y.slice(0,(t.y1-t.y0)*T)}}function ure(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,s=e.x-(i<<4),l=s&127,u=32-l,h=e.y1-e.y0;let p=(e.y+e.y0)*n+(s>>5),v;for(let y=0;y<h;y++){v=0;for(let b=0;b<=i;b++)if((v<<u|(b<i?(v=r[y*i+b])>>>l:0))&t[p+b])return!0;p+=n}return!1}function fre(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function hre(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function F9(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function dre(e){const n=4*e[0]/e[1];let r=0,i=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function k9(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function pre(){return document.createElement("canvas")}function Lg(e){return typeof e=="function"?e:function(){return e}}const vre={archimedean:F9,rectangular:dre};function mre(){let e=[256,256],t=rre,n=ire,r=ore,i=B9,s=are,l=sre,u=F9,h=Math.random,p=lre,v=[],y=null,b=1/0,T=pre;const R=B9,M={};M.start=function(){const[U,H]=e,X=I(T()),$=M.board?M.board:k9((e[0]>>5)*e[1]),Q=v.length,ce=[],pe=v.map(function(ft,Ye,it){return ft.text=t.call(this,ft,Ye,it),ft.font=n.call(this,ft,Ye,it),ft.style=R.call(this,ft,Ye,it),ft.weight=i.call(this,ft,Ye,it),ft.rotate=s.call(this,ft,Ye,it),ft.size=~~r.call(this,ft,Ye,it),ft.padding=l.call(this,ft,Ye,it),ft}).sort(function(ft,Ye){return Ye.size-ft.size});let Re=-1,je=M.board?[{x:0,y:0},{x:U,y:H}]:void 0;y&&clearInterval(y),y=setInterval(Ke,0),Ke();function Ke(){const ft=Date.now();for(;Date.now()-ft<b&&++Re<Q;){const Ye=pe[Re];Ye.x=U*(h()+.5)>>1,Ye.y=H*(h()+.5)>>1,cre(X,Ye,pe,Re),Ye.hasText&&N($,Ye,je)&&(p.call(null,"word",{cloud:M,word:Ye}),ce.push(Ye),je?M.hasImage||fre(je,Ye):je=[{x:Ye.x+Ye.x0,y:Ye.y+Ye.y0},{x:Ye.x+Ye.x1,y:Ye.y+Ye.y1}],Ye.x-=e[0]>>1,Ye.y-=e[1]>>1)}M._tags=ce,M._bounds=je,Re>=Q&&(M.stop(),p.call(null,"end",{cloud:M,words:ce,bounds:je}))}return M},M.stop=function(){return y&&(clearInterval(y),y=null),M};function I(U){U.width=U.height=1;const H=Math.sqrt(U.getContext("2d").getImageData(0,0,1,1).data.length>>2);U.width=(OE<<5)/H,U.height=FA/H;const X=U.getContext("2d");return X.fillStyle=X.strokeStyle="red",X.textAlign="center",X.textBaseline="middle",{context:X,ratio:H}}function N(U,H,X){const $=H.x,Q=H.y,ce=Math.sqrt(e[0]*e[0]+e[1]*e[1]),pe=u(e),Re=h()<.5?1:-1;let je,Ke=-Re,ft,Ye;for(;(je=pe(Ke+=Re))&&(ft=~~je[0],Ye=~~je[1],!(Math.min(Math.abs(ft),Math.abs(Ye))>=ce));)if(H.x=$+ft,H.y=Q+Ye,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>e[0]||H.y+H.y1>e[1])&&(!X||!ure(H,U,e[0]))&&(!X||hre(H,X))){const it=H.sprite,at=H.width>>5,vt=e[0]>>5,Vt=H.x-(at<<4),At=Vt&127,Ut=32-At,Sn=H.y1-H.y0;let Vn,rr=(H.y+H.y0)*vt+(Vt>>5);for(let or=0;or<Sn;or++){Vn=0;for(let Hr=0;Hr<=at;Hr++)U[rr+Hr]|=Vn<<Ut|(Hr<at?(Vn=it[or*at+Hr])>>>At:0);rr+=vt}return delete H.sprite,!0}return!1}return M.createMask=U=>{const H=document.createElement("canvas"),[X,$]=e;if(!X||!$)return;const Q=X>>5,ce=k9((X>>5)*$);H.width=X,H.height=$;const pe=H.getContext("2d");pe.drawImage(U,0,0,U.width,U.height,0,0,X,$);const Re=pe.getImageData(0,0,X,$).data;for(let je=0;je<$;je++)for(let Ke=0;Ke<X;Ke++){const ft=Q*je+(Ke>>5),Ye=je*X+Ke<<2,at=Re[Ye]>=250&&Re[Ye+1]>=250&&Re[Ye+2]>=250?1<<31-Ke%32:0;ce[ft]|=at}M.board=ce,M.hasImage=!0},M.timeInterval=function(U){b=U==null?1/0:U},M.words=function(U){v=U},M.size=function(U=[]){e=[+U[0],+U[1]]},M.text=function(U){t=Lg(U)},M.font=function(U){n=Lg(U)},M.fontWeight=function(U){i=Lg(U)},M.rotate=function(U){s=Lg(U)},M.canvas=function(U){T=Lg(U)},M.spiral=function(U){u=vre[U]||U},M.fontSize=function(U){r=Lg(U)},M.padding=function(U){l=Lg(U)},M.random=function(U){h=Lg(U)},M.on=function(U){p=Lg(U)},M}var gre=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(u,h)}p((r=r.apply(e,t||[])).next())})},yre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const _re={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function bre(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function xre(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,s]=t;return s===i?()=>(r+n)/2:({value:l})=>(r-n)/(s-i)*(l-i)+n}return()=>e}const U9=(e,t)=>n=>gre(void 0,void 0,void 0,function*(){const r=Object.assign({},_re,e,{canvas:t.createCanvas}),i=mre();yield nre(i,r).set("fontSize",U=>{const H=n.map(X=>X.value);return xre(U,[v0(H),ds(H)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",bre,i.createMask),i.words([...n]);const s=i.start(),[l,u]=r.size,h=[{x:0,y:0},{x:l,y:u}],{_bounds:p=h,_tags:v,hasImage:y}=s,b=v.map(U=>{var{x:H,y:X,font:$}=U,Q=yre(U,["x","y","font"]);return Object.assign(Object.assign({},Q),{x:H+l/2,y:X+u/2,fontFamily:$})}),[{x:T,y:R},{x:M,y:I}]=p,N={text:"",value:0,opacity:0,fontSize:0};return b.push(Object.assign(Object.assign({},N),{x:y?0:T,y:y?0:R}),Object.assign(Object.assign({},N),{x:y?l:M,y:y?u:I})),b});U9.props={};function hI(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function z9(e,t){const[n,r]=e,[i,s]=t;return n>=i[0]&&n<=s[0]&&r>=i[1]&&r<=s[1]}function Ere(e,t){const[n,r]=e;return!(z9(n,t)&&z9(r,t))}function Sre(e,t){const[n,r]=e,[i,s]=t;return n[0]<s[0]&&r[0]>i[0]&&n[1]<s[1]&&r[1]>i[1]}const Tre=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{Bw(i);const s=i.getLocalBounds();r.some(u=>Sre(hI(s),hI(u.getLocalBounds())))?cM(i):r.push(i)}),n}};function wre([e,t],[n,r]){return r>e&&t>n}function kA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function Are(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const Cre=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const s=i.length;if(s<=1)return i;const[l,u]=kA(),[h,p]=kA(),[v,y]=kA(),[b,T]=kA();for(const R of i){const{min:M,max:I}=Are(R),[N,U]=M,[H,X]=I;u(R,U),p(R,U),y(R,X-U),T(R,[N,H])}for(let R=0;R<t;R++){i.sort((I,N)=>Du(h(I),h(N)));let M=0;for(let I=0;I<s-1;I++){const N=i[I];let U=I+1,H;for(;(H=i[U])&&!wre(b(N),b(H));)U+=1;if(H){const X=h(N),$=v(N),Q=h(H),ce=Q-(X+$);if(ce<r){const pe=(r-ce)/2;M=Math.max(M,pe),p(N,X-pe),p(H,Q+pe)}}}if(M<n)break}for(const R of i)R.style.y+=h(R)-l(R);return i}},Ore=()=>e=>(e.forEach(t=>{Bw(t);const n=t.attr("bounds"),r=t.getLocalBounds();Ere(hI(r),n)&&cM(t)}),e);function Rre(e){return typeof e=="object"?e:Z0(e)}function dI(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function j9(e,t,n){return .2126*dI(e)+.7152*dI(t)+.0722*dI(n)}function V9(e,t){const{r:n,g:r,b:i}=e,{r:s,g:l,b:u}=t,h=j9(n,r,i),p=j9(s,l,u);return(Math.max(h,p)+.05)/(Math.min(h,p)+.05)}function Mre(e,t){const n=Fb(t,r=>V9(e,Rre(r)));return t[n]}const Pre=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const s=i.attr("dependentElement").parsedStyle.fill,l=i.parsedStyle.fill;V9(l,s)<t&&i.attr("fill",Mre(s,n))}),r)},Ire=(e,t)=>{const[[n,r],[i,s]]=t,[[l,u],[h,p]]=e;let v=0,y=0;return l<n?v=n-l:h>i&&(v=i-h),u<r?y=r-u:p>s&&(y=s-p),[v,y]},Lre=()=>(e,{canvas:t})=>{const{width:n,height:r}=t.getConfig();return e.forEach(i=>{Bw(i);const{max:s,min:l}=i.getRenderBounds(),[u,h]=s,[p,v]=l,y=Ire([[p,v],[u,h]],[[0,0],[n,r]]);i.style.connector&&i.style.connectorPoints&&(i.style.connectorPoints[0][0]-=y[0],i.style.connectorPoints[0][1]-=y[1]),i.style.x+=y[0],i.style.y+=y[1]}),e};function Dre(){return{"data.fetch":x9,"data.inline":E9,"data.sortBy":S9,"data.sort":T9,"data.filter":w9,"data.pick":A9,"data.rename":C9,"data.fold":O9,"data.slice":R9,"data.custom":M9,"data.map":P9,"data.join":L9,"data.kde":D9,"data.log":N9,"data.wordCloud":U9,"transform.stackY":W7,"transform.binX":Y7,"transform.bin":sI,"transform.dodgeX":K7,"transform.jitter":q7,"transform.jitterX":Q7,"transform.jitterY":J7,"transform.symmetryY":e9,"transform.diffY":t9,"transform.stackEnter":n9,"transform.normalizeY":r9,"transform.select":NA,"transform.selectX":o9,"transform.selectY":a9,"transform.groupX":s9,"transform.groupY":l9,"transform.groupColor":c9,"transform.group":AE,"transform.sortX":f9,"transform.sortY":h9,"transform.sortColor":d9,"transform.flexX":p9,"transform.pack":v9,"transform.sample":m9,"transform.filter":g9,"coordinate.cartesian":_N,"coordinate.polar":Qf,"coordinate.transpose":zM,"coordinate.theta":bN,"coordinate.parallel":jM,"coordinate.fisheye":xN,"coordinate.radial":C2,"coordinate.radar":EN,"encode.constant":SN,"encode.field":TN,"encode.transform":wN,"encode.column":AN,"mark.interval":DN,"mark.rect":BN,"mark.line":lB,"mark.point":QB,"mark.text":iF,"mark.cell":aF,"mark.area":pF,"mark.link":hP,"mark.image":OF,"mark.polygon":LF,"mark.box":FF,"mark.vector":UF,"mark.lineX":HF,"mark.lineY":ZF,"mark.connector":KF,"mark.range":JF,"mark.rangeX":n8,"mark.rangeY":o8,"mark.path":u8,"mark.shape":d8,"mark.density":m8,"mark.heatmap":b8,"mark.wordCloud":mP,"palette.category10":x8,"palette.category20":E8,"scale.linear":S8,"scale.ordinal":C8,"scale.band":M8,"scale.identity":P8,"scale.point":I8,"scale.time":ek,"scale.log":nk,"scale.pow":rk,"scale.sqrt":ik,"scale.threshold":ok,"scale.quantile":ak,"scale.quantize":sk,"scale.sequential":lk,"scale.constant":ck,"theme.classic":uk,"theme.classicDark":hk,"theme.academy":dk,"theme.light":AP,"theme.dark":fk,"component.axisX":pk,"component.axisY":vk,"component.legendCategory":OP,"component.legendContinuous":Dy,"component.legends":gk,"component.title":_k,"component.sliderX":Sk,"component.sliderY":Tk,"component.scrollbarX":wk,"component.scrollbarY":Ak,"animation.scaleInX":IP,"animation.scaleOutX":wJ,"animation.scaleInY":Ck,"animation.scaleOutY":AJ,"animation.waveIn":Ok,"animation.fadeIn":Rk,"animation.fadeOut":Mk,"animation.zoomIn":CJ,"animation.zoomOut":OJ,"animation.pathIn":Pk,"animation.morphing":Nk,"animation.growInX":Bk,"animation.growInY":Fk,"interaction.elementHighlight":SA,"interaction.elementHighlightByX":kk,"interaction.elementHighlightByColor":Uk,"interaction.elementSelect":TA,"interaction.elementSelectByX":zk,"interaction.elementSelectByColor":jk,"interaction.fisheye":WJ,"interaction.chartIndex":Vk,"interaction.tooltip":n7,"interaction.legendFilter":gee,"interaction.legendHighlight":yee,"interaction.brushHighlight":jP,"interaction.brushXHighlight":Tee,"interaction.brushYHighlight":wee,"interaction.brushAxisHighlight":Dee,"interaction.brushFilter":GP,"interaction.brushXFilter":kee,"interaction.brushYFilter":Uee,"interaction.sliderFilter":v7,"interaction.scrollbarFilter":Wee,"interaction.poptip":y7,"interaction.treemapDrillDown":fte,"interaction.elementPointMove":gte,"composition.spaceLayer":L7,"composition.spaceFlex":D7,"composition.facetRect":k7,"composition.repeatMatrix":Mte,"composition.facetCircle":Bte,"composition.timingKeyframe":z7,"labelTransform.overlapHide":Tre,"labelTransform.overlapDodgeY":Cre,"labelTransform.overflowHide":Ore,"labelTransform.contrastReverse":Pre,"labelTransform.exceedAdjust":Lre}}var RE=e=>e;function UA(e,t){e&&W9.hasOwnProperty(e.type)&&W9[e.type](e,t)}var H9={Feature:function(e,t){UA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)UA(n[r].geometry,t)}},W9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){pI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pI(n[r],t,0)},Polygon:function(e,t){G9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)G9(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)UA(n[r],t)}};function pI(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function G9(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)pI(e[n],t,1);t.polygonEnd()}function ix(e,t){e&&H9.hasOwnProperty(e.type)?H9[e.type](e,t):UA(e,t)}class Dg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],l=t+s,u=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);u&&(n[r++]=u),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,s=i-(l-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=l+i,i==r-l&&(l=r))}return l}}function Dpe(e,t){const n=new Dg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function Npe(e,t){const n=new Dg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var es=1e-6,Z9=1e-12,tl=Math.PI,qu=tl/2,X9=tl/4,g0=tl*2,wd=180/tl,Nu=tl/180,zl=Math.abs,ox=Math.atan,Ng=Math.atan2,Gs=Math.cos,zA=Math.ceil,$9=Math.exp,Bpe=Math.floor,Fpe=Math.hypot,jA=Math.log,vI=Math.pow,Cs=Math.sin,rv=Math.sign||function(e){return e>0?1:e<0?-1:0},Fp=Math.sqrt,mI=Math.tan;function Y9(e){return e>1?0:e<-1?tl:Math.acos(e)}function iv(e){return e>1?qu:e<-1?-qu:Math.asin(e)}function kpe(e){return(e=Cs(e/2))*e}function ov(){}var gI=new Dg,yI=new Dg,K9,q9,_I,bI,Yy={point:ov,lineStart:ov,lineEnd:ov,polygonStart:function(){Yy.lineStart=Nre,Yy.lineEnd=Fre},polygonEnd:function(){Yy.lineStart=Yy.lineEnd=Yy.point=ov,gI.add(zl(yI)),yI=new Dg},result:function(){var e=gI/2;return gI=new Dg,e}};function Nre(){Yy.point=Bre}function Bre(e,t){Yy.point=Q9,K9=_I=e,q9=bI=t}function Q9(e,t){yI.add(bI*e-_I*t),_I=e,bI=t}function Fre(){Q9(K9,q9)}var J9=Yy,ax=1/0,VA=ax,ME=-ax,HA=ME,kre={point:Ure,lineStart:ov,lineEnd:ov,polygonStart:ov,polygonEnd:ov,result:function(){var e=[[ax,VA],[ME,HA]];return ME=HA=-(VA=ax=1/0),e}};function Ure(e,t){e<ax&&(ax=e),e>ME&&(ME=e),t<VA&&(VA=t),t>HA&&(HA=t)}var WA=kre,xI=0,EI=0,PE=0,GA=0,ZA=0,sx=0,SI=0,TI=0,IE=0,eU,tU,Vm,Hm,Wv={point:T1,lineStart:nU,lineEnd:rU,polygonStart:function(){Wv.lineStart=Vre,Wv.lineEnd=Hre},polygonEnd:function(){Wv.point=T1,Wv.lineStart=nU,Wv.lineEnd=rU},result:function(){var e=IE?[SI/IE,TI/IE]:sx?[GA/sx,ZA/sx]:PE?[xI/PE,EI/PE]:[NaN,NaN];return xI=EI=PE=GA=ZA=sx=SI=TI=IE=0,e}};function T1(e,t){xI+=e,EI+=t,++PE}function nU(){Wv.point=zre}function zre(e,t){Wv.point=jre,T1(Vm=e,Hm=t)}function jre(e,t){var n=e-Vm,r=t-Hm,i=Fp(n*n+r*r);GA+=i*(Vm+e)/2,ZA+=i*(Hm+t)/2,sx+=i,T1(Vm=e,Hm=t)}function rU(){Wv.point=T1}function Vre(){Wv.point=Wre}function Hre(){iU(eU,tU)}function Wre(e,t){Wv.point=iU,T1(eU=Vm=e,tU=Hm=t)}function iU(e,t){var n=e-Vm,r=t-Hm,i=Fp(n*n+r*r);GA+=i*(Vm+e)/2,ZA+=i*(Hm+t)/2,sx+=i,i=Hm*e-Vm*t,SI+=i*(Vm+e),TI+=i*(Hm+t),IE+=i*3,T1(Vm=e,Hm=t)}var oU=Wv;function aU(e){this._context=e}aU.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,g0);break}}},result:ov};var wI=new Dg,AI,sU,lU,LE,DE,XA={point:ov,lineStart:function(){XA.point=Gre},lineEnd:function(){AI&&cU(sU,lU),XA.point=ov},polygonStart:function(){AI=!0},polygonEnd:function(){AI=null},result:function(){var e=+wI;return wI=new Dg,e}};function Gre(e,t){XA.point=cU,sU=LE=e,lU=DE=t}function cU(e,t){LE-=e,DE-=t,wI.add(Fp(LE*LE+DE*DE)),LE=e,DE=t}var uU=XA;let fU,$A,hU,dU;class pU{constructor(t){this._append=t==null?vU:Zre(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==hU||this._append!==$A){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,hU=r,$A=this._append,dU=this._,this._=i}this._+=dU;break}}}result(){const t=this._;return this._="",t.length?t:null}}function vU(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Zre(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return vU;if(t!==fU){const n=mf(10,t);fU=t,$A=function(i){let s=1;this._+=i[0];for(const l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return $A}function mU(e,t){let n=3,r=4.5,i,s;function l(u){return u&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ix(u,i(s))),s.result()}return l.area=function(u){return ix(u,i(J9)),J9.result()},l.measure=function(u){return ix(u,i(uU)),uU.result()},l.bounds=function(u){return ix(u,i(WA)),WA.result()},l.centroid=function(u){return ix(u,i(oU)),oU.result()},l.projection=function(u){return arguments.length?(i=u==null?(e=null,RE):(e=u).stream,l):e},l.context=function(u){return arguments.length?(s=u==null?(t=null,new pU(n)):new aU(t=u),typeof r!="function"&&s.pointRadius(r),l):t},l.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(s.pointRadius(+u),+u),l):r},l.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const h=Math.floor(u);if(!(h>=0))throw new RangeError(`invalid digits: ${u}`);n=h}return t===null&&(s=new pU(n)),l},l.projection(e).digits(n).context(t)}function lx(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function gU(e,t,n){var r=lx(e,t-es,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function yU(e,t,n){var r=lx(e,t-es,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Xre(){var e,t,n,r,i,s,l,u,h=10,p=h,v=90,y=360,b,T,R,M,I=2.5;function N(){return{type:"MultiLineString",coordinates:U()}}function U(){return lx(zA(r/v)*v,n,v).map(R).concat(lx(zA(u/y)*y,l,y).map(M)).concat(lx(zA(t/h)*h,e,h).filter(function(H){return zl(H%v)>es}).map(b)).concat(lx(zA(s/p)*p,i,p).filter(function(H){return zl(H%y)>es}).map(T))}return N.lines=function(){return U().map(function(H){return{type:"LineString",coordinates:H}})},N.outline=function(){return{type:"Polygon",coordinates:[R(r).concat(M(l).slice(1),R(n).reverse().slice(1),M(u).reverse().slice(1))]}},N.extent=function(H){return arguments.length?N.extentMajor(H).extentMinor(H):N.extentMinor()},N.extentMajor=function(H){return arguments.length?(r=+H[0][0],n=+H[1][0],u=+H[0][1],l=+H[1][1],r>n&&(H=r,r=n,n=H),u>l&&(H=u,u=l,l=H),N.precision(I)):[[r,u],[n,l]]},N.extentMinor=function(H){return arguments.length?(t=+H[0][0],e=+H[1][0],s=+H[0][1],i=+H[1][1],t>e&&(H=t,t=e,e=H),s>i&&(H=s,s=i,i=H),N.precision(I)):[[t,s],[e,i]]},N.step=function(H){return arguments.length?N.stepMajor(H).stepMinor(H):N.stepMinor()},N.stepMajor=function(H){return arguments.length?(v=+H[0],y=+H[1],N):[v,y]},N.stepMinor=function(H){return arguments.length?(h=+H[0],p=+H[1],N):[h,p]},N.precision=function(H){return arguments.length?(I=+H,b=gU(s,i,90),T=yU(t,e,I),R=gU(u,l,90),M=yU(r,n,I),N):I},N.extentMajor([[-180,-90+es],[180,90-es]]).extentMinor([[-180,-80-es],[180,80+es]])}function $re(){return Xre()()}function _U(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ov,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function YA(e,t){return zl(e[0]-t[0])<es&&zl(e[1]-t[1])<es}function KA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function bU(e,t,n,r,i){var s=[],l=[],u,h;if(e.forEach(function(R){if(!((M=R.length-1)<=0)){var M,I=R[0],N=R[M],U;if(YA(I,N)){if(!I[2]&&!N[2]){for(i.lineStart(),u=0;u<M;++u)i.point((I=R[u])[0],I[1]);i.lineEnd();return}N[0]+=2*es}s.push(U=new KA(I,R,null,!0)),l.push(U.o=new KA(I,null,U,!1)),s.push(U=new KA(N,R,null,!1)),l.push(U.o=new KA(N,null,U,!0))}}),!!s.length){for(l.sort(t),xU(s),xU(l),u=0,h=l.length;u<h;++u)l[u].e=n=!n;for(var p=s[0],v,y;;){for(var b=p,T=!0;b.v;)if((b=b.n)===p)return;v=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(T)for(u=0,h=v.length;u<h;++u)i.point((y=v[u])[0],y[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(T)for(v=b.p.z,u=v.length-1;u>=0;--u)i.point((y=v[u])[0],y[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,v=b.z,T=!T}while(!b.v);i.lineEnd()}}}function xU(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function CI(e){return[Ng(e[1],e[0]),iv(e[2])]}function cx(e){var t=e[0],n=e[1],r=Gs(n);return[r*Gs(t),r*Cs(t),Cs(n)]}function qA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function QA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function OI(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function JA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function RI(e){var t=Fp(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function MI(e){return zl(e[0])<=tl?e[0]:rv(e[0])*((zl(e[0])+tl)%g0-tl)}function Yre(e,t){var n=MI(t),r=t[1],i=Cs(r),s=[Cs(n),-Gs(n),0],l=0,u=0,h=new Dg;i===1?r=qu+es:i===-1&&(r=-qu-es);for(var p=0,v=e.length;p<v;++p)if(b=(y=e[p]).length)for(var y,b,T=y[b-1],R=MI(T),M=T[1]/2+X9,I=Cs(M),N=Gs(M),U=0;U<b;++U,R=X,I=Q,N=ce,T=H){var H=y[U],X=MI(H),$=H[1]/2+X9,Q=Cs($),ce=Gs($),pe=X-R,Re=pe>=0?1:-1,je=Re*pe,Ke=je>tl,ft=I*Q;if(h.add(Ng(ft*Re*Cs(je),N*ce+ft*Gs(je))),l+=Ke?pe+Re*g0:pe,Ke^R>=n^X>=n){var Ye=QA(cx(T),cx(H));RI(Ye);var it=QA(s,Ye);RI(it);var at=(Ke^pe>=0?-1:1)*iv(it[2]);(r>at||r===at&&(Ye[0]||Ye[1]))&&(u+=Ke^pe>=0?1:-1)}}return(l<-es||l<es&&h<-Z9)^u&1}function*Kre(e){for(const t of e)yield*Ij(t)}function EU(e){return Array.from(Kre(e))}function SU(e,t,n,r){return function(i){var s=t(i),l=_U(),u=t(l),h=!1,p,v,y,b={point:T,lineStart:M,lineEnd:I,polygonStart:function(){b.point=N,b.lineStart=U,b.lineEnd=H,v=[],p=[]},polygonEnd:function(){b.point=T,b.lineStart=M,b.lineEnd=I,v=EU(v);var X=Yre(p,r);v.length?(h||(i.polygonStart(),h=!0),bU(v,Qre,X,n,i)):X&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),v=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function T(X,$){e(X,$)&&i.point(X,$)}function R(X,$){s.point(X,$)}function M(){b.point=R,s.lineStart()}function I(){b.point=T,s.lineEnd()}function N(X,$){y.push([X,$]),u.point(X,$)}function U(){u.lineStart(),y=[]}function H(){N(y[0][0],y[0][1]),u.lineEnd();var X=u.clean(),$=l.result(),Q,ce=$.length,pe,Re,je;if(y.pop(),p.push(y),y=null,!!ce){if(X&1){if(Re=$[0],(pe=Re.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),Q=0;Q<pe;++Q)i.point((je=Re[Q])[0],je[1]);i.lineEnd()}return}ce>1&&X&2&&$.push($.pop().concat($.shift())),v.push($.filter(qre))}}return b}}function qre(e){return e.length>1}function Qre(e,t){return((e=e.x)[0]<0?e[1]-qu-es:qu-e[1])-((t=t.x)[0]<0?t[1]-qu-es:qu-t[1])}var TU=SU(function(){return!0},Jre,tie,[-tl,-qu]);function Jre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,l){var u=s>0?tl:-tl,h=zl(s-t);zl(h-tl)<es?(e.point(t,n=(n+l)/2>0?qu:-qu),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&h>=tl&&(zl(t-r)<es&&(t-=r*es),zl(s-u)<es&&(s-=u*es),n=eie(t,n,s,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=l),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function eie(e,t,n,r){var i,s,l=Cs(e-n);return zl(l)>es?ox((Cs(t)*(s=Gs(r))*Cs(n)-Cs(r)*(i=Gs(t))*Cs(e))/(i*s*l)):(t+r)/2}function tie(e,t,n,r){var i;if(e==null)i=n*qu,r.point(-tl,i),r.point(0,i),r.point(tl,i),r.point(tl,0),r.point(tl,-i),r.point(0,-i),r.point(-tl,-i),r.point(-tl,0),r.point(-tl,i);else if(zl(e[0]-t[0])>es){var s=e[0]<t[0]?tl:-tl;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function wU(e,t,n,r,i,s){if(n){var l=Gs(t),u=Cs(t),h=r*n;i==null?(i=t+r*g0,s=t-h/2):(i=AU(l,i),s=AU(l,s),(r>0?i<s:i>s)&&(i+=r*g0));for(var p,v=i;r>0?v>s:v<s;v-=h)p=CI([l,-u*Gs(v),-u*Cs(v)]),e.point(p[0],p[1])}}function AU(e,t){t=cx(t),t[0]-=e,RI(t);var n=Y9(-t[1]);return((-t[2]<0?-n:n)+g0-es)%g0}function Upe(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,s={point:l};function l(h,p){r.push(h=i(h,p)),h[0]*=degrees,h[1]*=degrees}function u(){var h=e.apply(this,arguments),p=t.apply(this,arguments)*radians,v=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,wU(s,p,v,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return u.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant([+h[0],+h[1]]),u):e},u.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant(+h),u):t},u.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant(+h),u):n},u}function nie(e){var t=Gs(e),n=2*Nu,r=t>0,i=zl(t)>es;function s(v,y,b,T){wU(T,e,n,b,v,y)}function l(v,y){return Gs(v)*Gs(y)>t}function u(v){var y,b,T,R,M;return{lineStart:function(){R=T=!1,M=1},point:function(I,N){var U=[I,N],H,X=l(I,N),$=r?X?0:p(I,N):X?p(I+(I<0?tl:-tl),N):0;if(!y&&(R=T=X)&&v.lineStart(),X!==T&&(H=h(y,U),(!H||YA(y,H)||YA(U,H))&&(U[2]=1)),X!==T)M=0,X?(v.lineStart(),H=h(U,y),v.point(H[0],H[1])):(H=h(y,U),v.point(H[0],H[1],2),v.lineEnd()),y=H;else if(i&&y&&r^X){var Q;!($&b)&&(Q=h(U,y,!0))&&(M=0,r?(v.lineStart(),v.point(Q[0][0],Q[0][1]),v.point(Q[1][0],Q[1][1]),v.lineEnd()):(v.point(Q[1][0],Q[1][1]),v.lineEnd(),v.lineStart(),v.point(Q[0][0],Q[0][1],3)))}X&&(!y||!YA(y,U))&&v.point(U[0],U[1]),y=U,T=X,b=$},lineEnd:function(){T&&v.lineEnd(),y=null},clean:function(){return M|(R&&T)<<1}}}function h(v,y,b){var T=cx(v),R=cx(y),M=[1,0,0],I=QA(T,R),N=qA(I,I),U=I[0],H=N-U*U;if(!H)return!b&&v;var X=t*N/H,$=-t*U/H,Q=QA(M,I),ce=JA(M,X),pe=JA(I,$);OI(ce,pe);var Re=Q,je=qA(ce,Re),Ke=qA(Re,Re),ft=je*je-Ke*(qA(ce,ce)-1);if(!(ft<0)){var Ye=Fp(ft),it=JA(Re,(-je-Ye)/Ke);if(OI(it,ce),it=CI(it),!b)return it;var at=v[0],vt=y[0],Vt=v[1],At=y[1],Ut;vt<at&&(Ut=at,at=vt,vt=Ut);var Sn=vt-at,Vn=zl(Sn-tl)<es,rr=Vn||Sn<es;if(!Vn&&At<Vt&&(Ut=Vt,Vt=At,At=Ut),rr?Vn?Vt+At>0^it[1]<(zl(it[0]-at)<es?Vt:At):Vt<=it[1]&&it[1]<=At:Sn>tl^(at<=it[0]&&it[0]<=vt)){var or=JA(Re,(-je+Ye)/Ke);return OI(or,ce),[it,CI(or)]}}}function p(v,y){var b=r?e:tl-e,T=0;return v<-b?T|=1:v>b&&(T|=2),y<-b?T|=4:y>b&&(T|=8),T}return SU(l,u,s,r?[0,-e]:[-tl,e-tl])}function rie(e,t,n,r,i,s){var l=e[0],u=e[1],h=t[0],p=t[1],v=0,y=1,b=h-l,T=p-u,R;if(R=n-l,!(!b&&R>0)){if(R/=b,b<0){if(R<v)return;R<y&&(y=R)}else if(b>0){if(R>y)return;R>v&&(v=R)}if(R=i-l,!(!b&&R<0)){if(R/=b,b<0){if(R>y)return;R>v&&(v=R)}else if(b>0){if(R<v)return;R<y&&(y=R)}if(R=r-u,!(!T&&R>0)){if(R/=T,T<0){if(R<v)return;R<y&&(y=R)}else if(T>0){if(R>y)return;R>v&&(v=R)}if(R=s-u,!(!T&&R<0)){if(R/=T,T<0){if(R>y)return;R>v&&(v=R)}else if(T>0){if(R<v)return;R<y&&(y=R)}return v>0&&(e[0]=l+v*b,e[1]=u+v*T),y<1&&(t[0]=l+y*b,t[1]=u+y*T),!0}}}}}var NE=1e9,eC=-NE;function CU(e,t,n,r){function i(p,v){return e<=p&&p<=n&&t<=v&&v<=r}function s(p,v,y,b){var T=0,R=0;if(p==null||(T=l(p,y))!==(R=l(v,y))||h(p,v)<0^y>0)do b.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==R);else b.point(v[0],v[1])}function l(p,v){return zl(p[0]-e)<es?v>0?0:3:zl(p[0]-n)<es?v>0?2:1:zl(p[1]-t)<es?v>0?1:0:v>0?3:2}function u(p,v){return h(p.x,v.x)}function h(p,v){var y=l(p,1),b=l(v,1);return y!==b?y-b:y===0?v[1]-p[1]:y===1?p[0]-v[0]:y===2?p[1]-v[1]:v[0]-p[0]}return function(p){var v=p,y=_U(),b,T,R,M,I,N,U,H,X,$,Q,ce={point:pe,lineStart:ft,lineEnd:Ye,polygonStart:je,polygonEnd:Ke};function pe(at,vt){i(at,vt)&&v.point(at,vt)}function Re(){for(var at=0,vt=0,Vt=T.length;vt<Vt;++vt)for(var At=T[vt],Ut=1,Sn=At.length,Vn=At[0],rr,or,Hr=Vn[0],fi=Vn[1];Ut<Sn;++Ut)rr=Hr,or=fi,Vn=At[Ut],Hr=Vn[0],fi=Vn[1],or<=r?fi>r&&(Hr-rr)*(r-or)>(fi-or)*(e-rr)&&++at:fi<=r&&(Hr-rr)*(r-or)<(fi-or)*(e-rr)&&--at;return at}function je(){v=y,b=[],T=[],Q=!0}function Ke(){var at=Re(),vt=Q&&at,Vt=(b=EU(b)).length;(vt||Vt)&&(p.polygonStart(),vt&&(p.lineStart(),s(null,null,1,p),p.lineEnd()),Vt&&bU(b,u,at,s,p),p.polygonEnd()),v=p,b=T=R=null}function ft(){ce.point=it,T&&T.push(R=[]),$=!0,X=!1,U=H=NaN}function Ye(){b&&(it(M,I),N&&X&&y.rejoin(),b.push(y.result())),ce.point=pe,X&&v.lineEnd()}function it(at,vt){var Vt=i(at,vt);if(T&&R.push([at,vt]),$)M=at,I=vt,N=Vt,$=!1,Vt&&(v.lineStart(),v.point(at,vt));else if(Vt&&X)v.point(at,vt);else{var At=[U=Math.max(eC,Math.min(NE,U)),H=Math.max(eC,Math.min(NE,H))],Ut=[at=Math.max(eC,Math.min(NE,at)),vt=Math.max(eC,Math.min(NE,vt))];rie(At,Ut,e,t,n,r)?(X||(v.lineStart(),v.point(At[0],At[1])),v.point(Ut[0],Ut[1]),Vt||v.lineEnd(),Q=!1):Vt&&(v.lineStart(),v.point(at,vt),Q=!1)}U=at,H=vt,X=Vt}return ce}}function PI(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function II(e,t){return zl(e)>tl&&(e-=Math.round(e/g0)*g0),[e,t]}II.invert=II;function OU(e,t,n){return(e%=g0)?t||n?PI(MU(e),PU(t,n)):MU(e):t||n?PU(t,n):II}function RU(e){return function(t,n){return t+=e,zl(t)>tl&&(t-=Math.round(t/g0)*g0),[t,n]}}function MU(e){var t=RU(e);return t.invert=RU(-e),t}function PU(e,t){var n=Gs(e),r=Cs(e),i=Gs(t),s=Cs(t);function l(u,h){var p=Gs(h),v=Gs(u)*p,y=Cs(u)*p,b=Cs(h),T=b*n+v*r;return[Ng(y*i-T*s,v*n-b*r),iv(T*i+y*s)]}return l.invert=function(u,h){var p=Gs(h),v=Gs(u)*p,y=Cs(u)*p,b=Cs(h),T=b*i-y*s;return[Ng(y*i+b*s,v*n+T*r),iv(T*n-v*r)]},l}function iie(e){e=OU(e[0]*Nu,e[1]*Nu,e.length>2?e[2]*Nu:0);function t(n){return n=e(n[0]*Nu,n[1]*Nu),n[0]*=wd,n[1]*=wd,n}return t.invert=function(n){return n=e.invert(n[0]*Nu,n[1]*Nu),n[0]*=wd,n[1]*=wd,n},t}function zpe(e){return{stream:BE(e)}}function BE(e){return function(t){var n=new LI;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LI(){}LI.prototype={constructor:LI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function DI(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ix(n,e.stream(WA)),t(WA.result()),r!=null&&e.clipExtent(r),e}function tC(e,t,n){return DI(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),u=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(s-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([u,h])},n)}function NI(e,t,n){return tC(e,[[0,0],t],n)}function BI(e,t,n){return DI(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),l=(i-s*(r[1][0]+r[0][0]))/2,u=-s*r[0][1];e.scale(150*s).translate([l,u])},n)}function FI(e,t,n){return DI(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),l=-s*r[0][0],u=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,u])},n)}var IU=16,oie=Gs(30*Nu);function LU(e,t){return+t?sie(e,t):aie(e)}function aie(e){return BE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function sie(e,t){function n(r,i,s,l,u,h,p,v,y,b,T,R,M,I){var N=p-r,U=v-i,H=N*N+U*U;if(H>4*t&&M--){var X=l+b,$=u+T,Q=h+R,ce=Fp(X*X+$*$+Q*Q),pe=iv(Q/=ce),Re=zl(zl(Q)-1)<es||zl(s-y)<es?(s+y)/2:Ng($,X),je=e(Re,pe),Ke=je[0],ft=je[1],Ye=Ke-r,it=ft-i,at=U*Ye-N*it;(at*at/H>t||zl((N*Ye+U*it)/H-.5)>.3||l*b+u*T+h*R<oie)&&(n(r,i,s,l,u,h,Ke,ft,Re,X/=ce,$/=ce,Q,M,I),I.point(Ke,ft),n(Ke,ft,Re,X,$,Q,p,v,y,b,T,R,M,I))}}return function(r){var i,s,l,u,h,p,v,y,b,T,R,M,I={point:N,lineStart:U,lineEnd:X,polygonStart:function(){r.polygonStart(),I.lineStart=$},polygonEnd:function(){r.polygonEnd(),I.lineStart=U}};function N(pe,Re){pe=e(pe,Re),r.point(pe[0],pe[1])}function U(){y=NaN,I.point=H,r.lineStart()}function H(pe,Re){var je=cx([pe,Re]),Ke=e(pe,Re);n(y,b,v,T,R,M,y=Ke[0],b=Ke[1],v=pe,T=je[0],R=je[1],M=je[2],IU,r),r.point(y,b)}function X(){I.point=N,r.lineEnd()}function $(){U(),I.point=Q,I.lineEnd=ce}function Q(pe,Re){H(i=pe,Re),s=y,l=b,u=T,h=R,p=M,I.point=H}function ce(){n(y,b,v,T,R,M,s,l,i,u,h,p,IU,r),I.lineEnd=X,X()}return I}}var lie=BE({point:function(e,t){this.stream.point(e*Nu,t*Nu)}});function cie(e){return BE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function uie(e,t,n,r,i){function s(l,u){return l*=r,u*=i,[t+e*l,n-e*u]}return s.invert=function(l,u){return[(l-t)/e*r,(n-u)/e*i]},s}function DU(e,t,n,r,i,s){if(!s)return uie(e,t,n,r,i);var l=Gs(s),u=Cs(s),h=l*e,p=u*e,v=l/e,y=u/e,b=(u*n-l*t)/e,T=(u*t+l*n)/e;function R(M,I){return M*=r,I*=i,[h*M-p*I+t,n-p*M-h*I]}return R.invert=function(M,I){return[r*(v*M-y*I+b),i*(T-y*M-v*I)]},R}function Wm(e){return kI(function(){return e})()}function kI(e){var t,n=150,r=480,i=250,s=0,l=0,u=0,h=0,p=0,v,y=0,b=1,T=1,R=null,M=TU,I=null,N,U,H,X=RE,$=.5,Q,ce,pe,Re,je;function Ke(at){return pe(at[0]*Nu,at[1]*Nu)}function ft(at){return at=pe.invert(at[0],at[1]),at&&[at[0]*wd,at[1]*wd]}Ke.stream=function(at){return Re&&je===at?Re:Re=lie(cie(v)(M(Q(X(je=at)))))},Ke.preclip=function(at){return arguments.length?(M=at,R=void 0,it()):M},Ke.postclip=function(at){return arguments.length?(X=at,I=N=U=H=null,it()):X},Ke.clipAngle=function(at){return arguments.length?(M=+at?nie(R=at*Nu):(R=null,TU),it()):R*wd},Ke.clipExtent=function(at){return arguments.length?(X=at==null?(I=N=U=H=null,RE):CU(I=+at[0][0],N=+at[0][1],U=+at[1][0],H=+at[1][1]),it()):I==null?null:[[I,N],[U,H]]},Ke.scale=function(at){return arguments.length?(n=+at,Ye()):n},Ke.translate=function(at){return arguments.length?(r=+at[0],i=+at[1],Ye()):[r,i]},Ke.center=function(at){return arguments.length?(s=at[0]%360*Nu,l=at[1]%360*Nu,Ye()):[s*wd,l*wd]},Ke.rotate=function(at){return arguments.length?(u=at[0]%360*Nu,h=at[1]%360*Nu,p=at.length>2?at[2]%360*Nu:0,Ye()):[u*wd,h*wd,p*wd]},Ke.angle=function(at){return arguments.length?(y=at%360*Nu,Ye()):y*wd},Ke.reflectX=function(at){return arguments.length?(b=at?-1:1,Ye()):b<0},Ke.reflectY=function(at){return arguments.length?(T=at?-1:1,Ye()):T<0},Ke.precision=function(at){return arguments.length?(Q=LU(ce,$=at*at),it()):Fp($)},Ke.fitExtent=function(at,vt){return tC(Ke,at,vt)},Ke.fitSize=function(at,vt){return NI(Ke,at,vt)},Ke.fitWidth=function(at,vt){return BI(Ke,at,vt)},Ke.fitHeight=function(at,vt){return FI(Ke,at,vt)};function Ye(){var at=DU(n,0,0,b,T,y).apply(null,t(s,l)),vt=DU(n,r-at[0],i-at[1],b,T,y);return v=OU(u,h,p),ce=PI(t,vt),pe=PI(v,ce),Q=LU(ce,$),it()}function it(){return Re=je=null,Ke}return function(){return t=e.apply(this,arguments),Ke.invert=t.invert&&ft,Ye()}}function UI(e){var t=0,n=tl/3,r=kI(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Nu,n=s[1]*Nu):[t*wd,n*wd]},i}function fie(e){var t=Gs(e);function n(r,i){return[r*t,Cs(i)/t]}return n.invert=function(r,i){return[r/t,iv(i*t)]},n}function NU(e,t){var n=Cs(e),r=(n+Cs(t))/2;if(zl(r)<es)return fie(e);var i=1+n*(2*r-n),s=Fp(i)/r;function l(u,h){var p=Fp(i-2*r*Cs(h))/r;return[p*Cs(u*=r),s-p*Gs(u)]}return l.invert=function(u,h){var p=s-h,v=Ng(u,zl(p))*rv(p);return p*r<0&&(v-=tl*rv(u)*rv(p)),[v/r,iv((i-(u*u+p*p)*r*r)/(2*r))]},l}function nC(){return UI(NU).scale(155.424).center([0,33.6442])}function BU(){return nC().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hie(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function die(){var e,t,n=BU(),r,i=nC().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=nC().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,h,p={point:function(b,T){h=[b,T]}};function v(b){var T=b[0],R=b[1];return h=null,r.point(T,R),h||(s.point(T,R),h)||(u.point(T,R),h)}v.invert=function(b){var T=n.scale(),R=n.translate(),M=(b[0]-R[0])/T,I=(b[1]-R[1])/T;return(I>=.12&&I<.234&&M>=-.425&&M<-.214?i:I>=.166&&I<.234&&M>=-.214&&M<-.115?l:n).invert(b)},v.stream=function(b){return e&&t===b?e:e=hie([n.stream(t=b),i.stream(b),l.stream(b)])},v.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),y()):n.precision()},v.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),v.translate(n.translate())):n.scale()},v.translate=function(b){if(!arguments.length)return n.translate();var T=n.scale(),R=+b[0],M=+b[1];return r=n.translate(b).clipExtent([[R-.455*T,M-.238*T],[R+.455*T,M+.238*T]]).stream(p),s=i.translate([R-.307*T,M+.201*T]).clipExtent([[R-.425*T+es,M+.12*T+es],[R-.214*T-es,M+.234*T-es]]).stream(p),u=l.translate([R-.205*T,M+.212*T]).clipExtent([[R-.214*T+es,M+.166*T+es],[R-.115*T-es,M+.234*T-es]]).stream(p),y()},v.fitExtent=function(b,T){return tC(v,b,T)},v.fitSize=function(b,T){return NI(v,b,T)},v.fitWidth=function(b,T){return BI(v,b,T)},v.fitHeight=function(b,T){return FI(v,b,T)};function y(){return e=t=null,v}return v.scale(1070)}function FU(e){return function(t,n){var r=Gs(t),i=Gs(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Cs(t),s*Cs(n)]}}function FE(e){return function(t,n){var r=Fp(t*t+n*n),i=e(r),s=Cs(i),l=Gs(i);return[Ng(t*s,r*l),iv(r&&n*s/r)]}}var zI=FU(function(e){return Fp(2/(1+e))});zI.invert=FE(function(e){return 2*iv(e/2)});function pie(){return Wm(zI).scale(124.75).clipAngle(180-.001)}var jI=FU(function(e){return(e=Y9(e))&&e/Cs(e)});jI.invert=FE(function(e){return e});function vie(){return Wm(jI).scale(79.4188).clipAngle(180-.001)}function kE(e,t){return[e,jA(mI((qu+t)/2))]}kE.invert=function(e,t){return[e,2*ox($9(t))-qu]};function mie(){return kU(kE).scale(961/g0)}function kU(e){var t=Wm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,l=null,u,h,p;t.scale=function(y){return arguments.length?(r(y),v()):r()},t.translate=function(y){return arguments.length?(i(y),v()):i()},t.center=function(y){return arguments.length?(n(y),v()):n()},t.clipExtent=function(y){return arguments.length?(y==null?l=u=h=p=null:(l=+y[0][0],u=+y[0][1],h=+y[1][0],p=+y[1][1]),v()):l==null?null:[[l,u],[h,p]]};function v(){var y=tl*r(),b=t(iie(t.rotate()).invert([0,0]));return s(l==null?[[b[0]-y,b[1]-y],[b[0]+y,b[1]+y]]:e===kE?[[Math.max(b[0]-y,l),u],[Math.min(b[0]+y,h),p]]:[[l,Math.max(b[1]-y,u)],[h,Math.min(b[1]+y,p)]])}return v()}function rC(e){return mI((qu+e)/2)}function UU(e,t){var n=Gs(e),r=e===t?Cs(e):jA(n/Gs(t))/jA(rC(t)/rC(e)),i=n*vI(rC(e),r)/r;if(!r)return kE;function s(l,u){i>0?u<-qu+es&&(u=-qu+es):u>qu-es&&(u=qu-es);var h=i/vI(rC(u),r);return[h*Cs(r*l),i-h*Gs(r*l)]}return s.invert=function(l,u){var h=i-u,p=rv(r)*Fp(l*l+h*h),v=Ng(l,zl(h))*rv(h);return h*r<0&&(v-=tl*rv(l)*rv(h)),[v/r,2*ox(vI(i/p,1/r))-qu]},s}function gie(){return UI(UU).scale(109.5).parallels([30,30])}function UE(e,t){return[e,t]}UE.invert=UE;function yie(){return Wm(UE).scale(152.63)}function zU(e,t){var n=Gs(e),r=e===t?Cs(e):(n-Gs(t))/(t-e),i=n/r+e;if(zl(r)<es)return UE;function s(l,u){var h=i-u,p=r*l;return[h*Cs(p),i-h*Gs(p)]}return s.invert=function(l,u){var h=i-u,p=Ng(l,zl(h))*rv(h);return h*r<0&&(p-=tl*rv(l)*rv(h)),[p/r,i-rv(r)*Fp(l*l+h*h)]},s}function _ie(){return UI(zU).scale(131.154).center([0,13.9389])}var zE=1.340264,jE=-.081106,VE=893e-6,HE=.003796,iC=Fp(3)/2,bie=12;function VI(e,t){var n=iv(iC*Cs(t)),r=n*n,i=r*r*r;return[e*Gs(n)/(iC*(zE+3*jE*r+i*(7*VE+9*HE*r))),n*(zE+jE*r+i*(VE+HE*r))]}VI.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,l,u,h;s<bie&&(u=n*(zE+jE*r+i*(VE+HE*r))-t,h=zE+3*jE*r+i*(7*VE+9*HE*r),n-=l=u/h,r=n*n,i=r*r*r,!(zl(l)<Z9));++s);return[iC*e*(zE+3*jE*r+i*(7*VE+9*HE*r))/Gs(n),iv(Cs(n)/iC)]};function xie(){return Wm(VI).scale(177.158)}function HI(e,t){var n=Gs(t),r=Gs(e)*n;return[n*Cs(e)/r,Cs(t)/r]}HI.invert=FE(ox);function Eie(){return Wm(HI).scale(144.049).clipAngle(60)}function Sie(){var e=1,t=0,n=0,r=1,i=1,s=0,l,u,h=null,p,v,y,b=1,T=1,R=BE({point:function(X,$){var Q=H([X,$]);this.stream.point(Q[0],Q[1])}}),M=RE,I,N;function U(){return b=e*r,T=e*i,I=N=null,H}function H(X){var $=X[0]*b,Q=X[1]*T;if(s){var ce=Q*l-$*u;$=$*l+Q*u,Q=ce}return[$+t,Q+n]}return H.invert=function(X){var $=X[0]-t,Q=X[1]-n;if(s){var ce=Q*l+$*u;$=$*l-Q*u,Q=ce}return[$/b,Q/T]},H.stream=function(X){return I&&N===X?I:I=R(M(N=X))},H.postclip=function(X){return arguments.length?(M=X,h=p=v=y=null,U()):M},H.clipExtent=function(X){return arguments.length?(M=X==null?(h=p=v=y=null,RE):CU(h=+X[0][0],p=+X[0][1],v=+X[1][0],y=+X[1][1]),U()):h==null?null:[[h,p],[v,y]]},H.scale=function(X){return arguments.length?(e=+X,U()):e},H.translate=function(X){return arguments.length?(t=+X[0],n=+X[1],U()):[t,n]},H.angle=function(X){return arguments.length?(s=X%360*Nu,u=Cs(s),l=Gs(s),U()):s*wd},H.reflectX=function(X){return arguments.length?(r=X?-1:1,U()):r<0},H.reflectY=function(X){return arguments.length?(i=X?-1:1,U()):i<0},H.fitExtent=function(X,$){return tC(H,X,$)},H.fitSize=function(X,$){return NI(H,X,$)},H.fitWidth=function(X,$){return BI(H,X,$)},H.fitHeight=function(X,$){return FI(H,X,$)},H}function WI(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}WI.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,l=s*s;n-=i=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-t)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(zl(i)>es&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Tie(){return Wm(WI).scale(175.295)}function GI(e,t){return[Gs(t)*Cs(e),Cs(t)]}GI.invert=FE(iv);function wie(){return Wm(GI).scale(249.5).clipAngle(90+es)}function ZI(e,t){var n=Gs(t),r=1+Gs(e)*n;return[n*Cs(e)/r,Cs(t)/r]}ZI.invert=FE(function(e){return 2*ox(e)});function Aie(){return Wm(ZI).scale(250).clipAngle(142)}function XI(e,t){return[jA(mI((qu+t)/2)),-e]}XI.invert=function(e,t){return[-t,2*ox($9(e))-qu]};function Cie(){var e=kU(XI),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Oie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rie(e){if(typeof e=="function")return e;const t=`geo${Om(e)}`,n=E[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function Mie(e){return{type:"FeatureCollection",features:e.flatMap(t=>Pie(t).features)}}function Pie(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function Iie(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function Lie(e,t,n,r){const i=()=>{const u=t.filter(jU);return u.find(p=>p.sphere)?{type:"Sphere"}:Mie(u.filter(p=>!p.sphere).flatMap(p=>p.data.value))},{outline:s=i()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return Die(e,s,n);if(l==="fitWidth")return Nie(e,s,n)}function Die(e,t,n){const{x:r,y:i,width:s,height:l}=n;e.fitExtent([[r,i],[s,l]],t)}function Nie(e,t,n){const{width:r,height:i}=n,[[s,l],[u,h]]=mU(e.fitWidth(r,t)).bounds(t),p=Math.ceil(h-l),v=Math.min(Math.ceil(u-s),p),y=e.scale()*(v-1)/v,[b,T]=e.translate(),R=T+(i-p)/2;e.scale(y).translate([b,R]).precision(.2)}function Bie(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[$re()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function jU(e){return e.type==="geoPath"}const VU=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=Oie(n,["type"]),s=Rie(r),l=t.map(Bie);let u;function h(){return[["custom",(y,b,T,R)=>{const M=s();Lie(M,l,{x:y,y:b,width:T,height:R},i),Iie(M,i),u=mU(M);const N=new bd({domain:[y,y+T]}),U=new bd({domain:[b,b+R]}),H=$=>{const Q=M($);if(!Q)return[null,null];const[ce,pe]=Q;return[N.map(ce),U.map(pe)]},X=$=>{if(!$)return null;const[Q,ce]=$,pe=[N.invert(Q),U.invert(ce)];return M.invert(pe)};return{transform:$=>H($),untransform:$=>X($)}}]]}function p(y){const{style:b,tooltip:T={}}=y;return Object.assign(Object.assign({},y),{type:"path",tooltip:Qw(T,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},b),{d:R=>u(R)||[]})})}const v=y=>jU(y)?p(y):y;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:h},children:l.flatMap(v)})]};VU.props={};var Fie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const HU=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:s,animate:l,key:u,state:h}=e,p=Fie(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${u}-0`,data:{value:n},scale:r,encode:i,style:s,animate:l,state:h}]})]};HU.props={};function kie(){return{"composition.geoView":VU,"composition.geoPath":HU}}function Uie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return WU(this.cover(t,n),t,n,e)}function WU(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,l={data:r},u=e._x0,h=e._y0,p=e._x1,v=e._y1,y,b,T,R,M,I,N,U;if(!s)return e._root=l,e;for(;s.length;)if((M=t>=(y=(u+p)/2))?u=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b,i=s,!(s=s[N=I<<1|M]))return i[N]=l,e;if(T=+e._x.call(null,s.data),R=+e._y.call(null,s.data),t===T&&n===R)return l.next=s,i?i[N]=l:e._root=l,e;do i=i?i[N]=new Array(4):e._root=new Array(4),(M=t>=(y=(u+p)/2))?u=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b;while((N=I<<1|M)===(U=(R>=b)<<1|T>=y));return i[U]=s,i[N]=l,e}function zie(e){var t,n,r=e.length,i,s,l=new Array(r),u=new Array(r),h=1/0,p=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(l[n]=i,u[n]=s,i<h&&(h=i),i>v&&(v=i),s<p&&(p=s),s>y&&(y=s));if(h>v||p>y)return this;for(this.cover(h,p).cover(v,y),n=0;n<r;++n)WU(this,l[n],u[n],e[n]);return this}function jie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var l=i-n||1,u=this._root,h,p;n>e||e>=i||r>t||t>=s;)switch(p=(t<r)<<1|e<n,h=new Array(4),h[p]=u,u=h,l*=2,p){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Vie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Hie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function sp(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Wie(e,t,n){var r,i=this._x0,s=this._y0,l,u,h,p,v=this._x1,y=this._y1,b=[],T=this._root,R,M;for(T&&b.push(new sp(T,i,s,v,y)),n==null?n=1/0:(i=e-n,s=t-n,v=e+n,y=t+n,n*=n);R=b.pop();)if(!(!(T=R.node)||(l=R.x0)>v||(u=R.y0)>y||(h=R.x1)<i||(p=R.y1)<s))if(T.length){var I=(l+h)/2,N=(u+p)/2;b.push(new sp(T[3],I,N,h,p),new sp(T[2],l,N,I,p),new sp(T[1],I,u,h,N),new sp(T[0],l,u,I,N)),(M=(t>=N)<<1|e>=I)&&(R=b[b.length-1],b[b.length-1]=b[b.length-1-M],b[b.length-1-M]=R)}else{var U=e-+this._x.call(null,T.data),H=t-+this._y.call(null,T.data),X=U*U+H*H;if(X<n){var $=Math.sqrt(n=X);i=e-$,s=t-$,v=e+$,y=t+$,r=T.data}}return r}function Gie(e){if(isNaN(v=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,l=this._x0,u=this._y0,h=this._x1,p=this._y1,v,y,b,T,R,M,I,N;if(!n)return this;if(n.length)for(;;){if((R=v>=(b=(l+h)/2))?l=b:h=b,(M=y>=(T=(u+p)/2))?u=T:p=T,t=n,!(n=n[I=M<<1|R]))return this;if(!n.length)break;(t[I+1&3]||t[I+2&3]||t[I+3&3])&&(r=t,N=I)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[I]=s:delete t[I],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[N]=n:this._root=n),this):(this._root=s,this)}function Zie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Xie(){return this._root}function $ie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Yie(e){var t=[],n,r=this._root,i,s,l,u,h;for(r&&t.push(new sp(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,l=n.y0,u=n.x1,h=n.y1)&&r.length){var p=(s+u)/2,v=(l+h)/2;(i=r[3])&&t.push(new sp(i,p,v,u,h)),(i=r[2])&&t.push(new sp(i,s,v,p,h)),(i=r[1])&&t.push(new sp(i,p,l,u,v)),(i=r[0])&&t.push(new sp(i,s,l,p,v))}return this}function Kie(e){var t=[],n=[],r;for(this._root&&t.push(new sp(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,l=r.x0,u=r.y0,h=r.x1,p=r.y1,v=(l+h)/2,y=(u+p)/2;(s=i[0])&&t.push(new sp(s,l,u,v,y)),(s=i[1])&&t.push(new sp(s,v,u,h,y)),(s=i[2])&&t.push(new sp(s,l,y,v,p)),(s=i[3])&&t.push(new sp(s,v,y,h,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function qie(e){return e[0]}function Qie(e){return arguments.length?(this._x=e,this):this._x}function Jie(e){return e[1]}function eoe(e){return arguments.length?(this._y=e,this):this._y}function GU(e,t,n){var r=new $I(t==null?qie:t,n==null?Jie:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function $I(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ZU(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var lp=GU.prototype=$I.prototype;lp.copy=function(){var e=new $I(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=ZU(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=ZU(r));return e},lp.add=Uie,lp.addAll=zie,lp.cover=jie,lp.data=Vie,lp.extent=Hie,lp.find=Wie,lp.remove=Gie,lp.removeAll=Zie,lp.root=Xie,lp.size=$ie,lp.visit=Yie,lp.visitAfter=Kie,lp.x=Qie,lp.y=eoe;function y0(e){return function(){return e}}function ux(e){return(e()-.5)*1e-6}var toe={value:function(){}};function XU(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oC(n)}function oC(e){this._=e}function noe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oC.prototype=XU.prototype={constructor:oC,on:function(t,n){var r=this._,i=noe(t+"",r),s,l=-1,u=i.length;if(arguments.length<2){for(;++l<u;)if((s=(t=i[l]).type)&&(s=roe(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<u;)if(s=(t=i[l]).type)r[s]=$U(r[s],t.name,n);else if(n==null)for(s in r)r[s]=$U(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new oC(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,l;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,s=l.length;i<s;++i)l[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(n,r)}};function roe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function $U(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=toe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ioe=XU,fx=0,WE=0,GE=0,YU=1e3,aC,ZE,sC=0,w1=0,lC=0,XE=typeof performance=="object"&&performance.now?performance:Date,KU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qU(){return w1||(KU(ooe),w1=XE.now()+lC)}function ooe(){w1=0}function YI(){this._call=this._time=this._next=null}YI.prototype=QU.prototype={constructor:YI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qU():+n)+(t==null?0:+t),!this._next&&ZE!==this&&(ZE?ZE._next=this:aC=this,ZE=this),this._call=e,this._time=n,KI()},stop:function(){this._call&&(this._call=null,this._time=1/0,KI())}};function QU(e,t,n){var r=new YI;return r.restart(e,t,n),r}function aoe(){qU(),++fx;for(var e=aC,t;e;)(t=w1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fx}function JU(){w1=(sC=XE.now())+lC,fx=WE=0;try{aoe()}finally{fx=0,loe(),w1=0}}function soe(){var e=XE.now(),t=e-sC;t>YU&&(lC-=t,sC=e)}function loe(){for(var e,t=aC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:aC=n);ZE=e,KI(r)}function KI(e){if(!fx){WE&&(WE=clearTimeout(WE));var t=e-w1;t>24?(e<1/0&&(WE=setTimeout(JU,e-XE.now()-lC)),GE&&(GE=clearInterval(GE))):(GE||(sC=XE.now(),GE=setInterval(soe,YU)),fx=1,KU(JU))}}const coe=1664525,uoe=1013904223,ez=4294967296;function foe(){let e=1;return()=>(e=(coe*e+uoe)%ez)/ez}function hoe(e){return e.x}function doe(e){return e.y}var poe=10,voe=Math.PI*(3-Math.sqrt(5));function moe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,l=.6,u=new Map,h=QU(y),p=ioe("tick","end"),v=foe();e==null&&(e=[]);function y(){b(),p.call("tick",t),n<r&&(h.stop(),p.call("end",t))}function b(M){var I,N=e.length,U;M===void 0&&(M=1);for(var H=0;H<M;++H)for(n+=(s-n)*i,u.forEach(function(X){X(n)}),I=0;I<N;++I)U=e[I],U.fx==null?U.x+=U.vx*=l:(U.x=U.fx,U.vx=0),U.fy==null?U.y+=U.vy*=l:(U.y=U.fy,U.vy=0);return t}function T(){for(var M=0,I=e.length,N;M<I;++M){if(N=e[M],N.index=M,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var U=poe*Math.sqrt(.5+M),H=M*voe;N.x=U*Math.cos(H),N.y=U*Math.sin(H)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function R(M){return M.initialize&&M.initialize(e,v),M}return T(),t={tick:b,restart:function(){return h.restart(y),t},stop:function(){return h.stop(),t},nodes:function(M){return arguments.length?(e=M,T(),u.forEach(R),t):e},alpha:function(M){return arguments.length?(n=+M,t):n},alphaMin:function(M){return arguments.length?(r=+M,t):r},alphaDecay:function(M){return arguments.length?(i=+M,t):+i},alphaTarget:function(M){return arguments.length?(s=+M,t):s},velocityDecay:function(M){return arguments.length?(l=1-M,t):1-l},randomSource:function(M){return arguments.length?(v=M,u.forEach(R),t):v},force:function(M,I){return arguments.length>1?(I==null?u.delete(M):u.set(M,R(I)),t):u.get(M)},find:function(M,I,N){var U=0,H=e.length,X,$,Q,ce,pe;for(N==null?N=1/0:N*=N,U=0;U<H;++U)ce=e[U],X=M-ce.x,$=I-ce.y,Q=X*X+$*$,Q<N&&(pe=ce,N=Q);return pe},on:function(M,I){return arguments.length>1?(p.on(M,I),t):p.on(M)}}}function goe(){var e,t,n,r,i=y0(-30),s,l=1,u=1/0,h=.81;function p(T){var R,M=e.length,I=GU(e,hoe,doe).visitAfter(y);for(r=T,R=0;R<M;++R)t=e[R],I.visit(b)}function v(){if(e){var T,R=e.length,M;for(s=new Array(R),T=0;T<R;++T)M=e[T],s[M.index]=+i(M,T,e)}}function y(T){var R=0,M,I,N=0,U,H,X;if(T.length){for(U=H=X=0;X<4;++X)(M=T[X])&&(I=Math.abs(M.value))&&(R+=M.value,N+=I,U+=I*M.x,H+=I*M.y);T.x=U/N,T.y=H/N}else{M=T,M.x=M.data.x,M.y=M.data.y;do R+=s[M.data.index];while(M=M.next)}T.value=R}function b(T,R,M,I){if(!T.value)return!0;var N=T.x-t.x,U=T.y-t.y,H=I-R,X=N*N+U*U;if(H*H/h<X)return X<u&&(N===0&&(N=ux(n),X+=N*N),U===0&&(U=ux(n),X+=U*U),X<l&&(X=Math.sqrt(l*X)),t.vx+=N*T.value*r/X,t.vy+=U*T.value*r/X),!0;if(T.length||X>=u)return;(T.data!==t||T.next)&&(N===0&&(N=ux(n),X+=N*N),U===0&&(U=ux(n),X+=U*U),X<l&&(X=Math.sqrt(l*X)));do T.data!==t&&(H=s[T.data.index]*r/X,t.vx+=N*H,t.vy+=U*H);while(T=T.next)}return p.initialize=function(T,R){e=T,n=R,v()},p.strength=function(T){return arguments.length?(i=typeof T=="function"?T:y0(+T),v(),p):i},p.distanceMin=function(T){return arguments.length?(l=T*T,p):Math.sqrt(l)},p.distanceMax=function(T){return arguments.length?(u=T*T,p):Math.sqrt(u)},p.theta=function(T){return arguments.length?(h=T*T,p):Math.sqrt(h)},p}function yoe(e){return e.index}function tz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function _oe(e){var t=yoe,n=y,r,i=y0(30),s,l,u,h,p,v=1;e==null&&(e=[]);function y(I){return 1/Math.min(u[I.source.index],u[I.target.index])}function b(I){for(var N=0,U=e.length;N<v;++N)for(var H=0,X,$,Q,ce,pe,Re,je;H<U;++H)X=e[H],$=X.source,Q=X.target,ce=Q.x+Q.vx-$.x-$.vx||ux(p),pe=Q.y+Q.vy-$.y-$.vy||ux(p),Re=Math.sqrt(ce*ce+pe*pe),Re=(Re-s[H])/Re*I*r[H],ce*=Re,pe*=Re,Q.vx-=ce*(je=h[H]),Q.vy-=pe*je,$.vx+=ce*(je=1-je),$.vy+=pe*je}function T(){if(l){var I,N=l.length,U=e.length,H=new Map(l.map(($,Q)=>[t($,Q,l),$])),X;for(I=0,u=new Array(N);I<U;++I)X=e[I],X.index=I,typeof X.source!="object"&&(X.source=tz(H,X.source)),typeof X.target!="object"&&(X.target=tz(H,X.target)),u[X.source.index]=(u[X.source.index]||0)+1,u[X.target.index]=(u[X.target.index]||0)+1;for(I=0,h=new Array(U);I<U;++I)X=e[I],h[I]=u[X.source.index]/(u[X.source.index]+u[X.target.index]);r=new Array(U),R(),s=new Array(U),M()}}function R(){if(l)for(var I=0,N=e.length;I<N;++I)r[I]=+n(e[I],I,e)}function M(){if(l)for(var I=0,N=e.length;I<N;++I)s[I]=+i(e[I],I,e)}return b.initialize=function(I,N){l=I,p=N,T()},b.links=function(I){return arguments.length?(e=I,T(),b):e},b.id=function(I){return arguments.length?(t=I,b):t},b.iterations=function(I){return arguments.length?(v=+I,b):v},b.strength=function(I){return arguments.length?(n=typeof I=="function"?I:y0(+I),R(),b):n},b.distance=function(I){return arguments.length?(i=typeof I=="function"?I:y0(+I),M(),b):i},b}function boe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,l=n.length,u,h=0,p=0;for(s=0;s<l;++s)u=n[s],h+=u.x,p+=u.y;for(h=(h/l-e)*r,p=(p/l-t)*r,s=0;s<l;++s)u=n[s],u.x-=h,u.y-=p}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function xoe(e){var t=y0(.1),n,r,i;typeof e!="function"&&(e=y0(e==null?0:+e));function s(u){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vx+=(i[h]-v.x)*r[h]*u}function l(){if(n){var u,h=n.length;for(r=new Array(h),i=new Array(h),u=0;u<h;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(t=typeof u=="function"?u:y0(+u),l(),s):t},s.x=function(u){return arguments.length?(e=typeof u=="function"?u:y0(+u),l(),s):e},s}function Eoe(e){var t=y0(.1),n,r,i;typeof e!="function"&&(e=y0(e==null?0:+e));function s(u){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vy+=(i[h]-v.y)*r[h]*u}function l(){if(n){var u,h=n.length;for(r=new Array(h),i=new Array(h),u=0;u<h;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(t=typeof u=="function"?u:y0(+u),l(),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:y0(+u),l(),s):e},s}var Soe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Toe={joint:!0},woe={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},Aoe={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},Coe={text:""};function Ooe(e,t,n){const{nodes:r,links:i}=e,{joint:s,nodeStrength:l,linkStrength:u}=t,{nodeKey:h=R=>R.id,linkKey:p=R=>R.id}=n,v=goe(),y=_oe(i).id(jm(p));typeof l=="function"&&v.strength(l),typeof u=="function"&&y.strength(u);const b=moe(r).force("link",y).force("charge",v);s?b.force("center",boe()):b.force("x",xoe()).force("y",Eoe()),b.stop();const T=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));for(let R=0;R<T;R++)b.tick();return{nodesData:r,linksData:i}}const nz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:h={},tooltip:p={}}=e,{nodeKey:v=Q=>Q.id,linkKey:y=Q=>Q.id}=n,b=Soe(n,["nodeKey","linkKey"]),T=Object.assign({nodeKey:v,linkKey:y},b),R=go(T,"node"),M=go(T,"link"),{links:I,nodes:N}=XM(t,T),{nodesData:U,linksData:H}=Ooe({links:I,nodes:N},ti({},Toe,s),T),X=km(p,"link",{items:[Q=>({name:"source",value:jm(y)(Q.source)}),Q=>({name:"target",value:jm(y)(Q.target)})]}),$=km(p,"node",{items:[Q=>({name:"key",value:jm(v)(Q)})]},!0);return[ti({},woe,{data:H,encode:M,labels:u,style:go(i,"link"),tooltip:X,animate:Um(h,"link")}),ti({},Aoe,{data:U,encode:Object.assign({},R),scale:r,style:go(i,"node"),tooltip:$,labels:[Object.assign(Object.assign({},Coe),go(i,"label")),...l],animate:Um(h,"link")})]};nz.props={};function Roe(e,t){return e.parent===t.parent?1:2}function qI(e){var t=e.children;return t?t[0]:e.t}function QI(e){var t=e.children;return t?t[t.length-1]:e.t}function Moe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Poe(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Ioe(e,t,n){return e.a.parent===t.parent?e.a:n}function cC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}cC.prototype=Object.create(Yb.prototype);function Loe(e){for(var t=new cC(e,0),n,r=[t],i,s,l,u;n=r.pop();)if(s=n._.children)for(n.children=new Array(u=s.length),l=u-1;l>=0;--l)r.push(i=n.children[l]=new cC(s[l],l)),i.parent=n;return(t.parent=new cC(null,0)).children=[t],t}function Doe(){var e=Roe,t=1,n=1,r=null;function i(p){var v=Loe(p);if(v.eachAfter(s),v.parent.m=-v.z,v.eachBefore(l),r)p.eachBefore(h);else{var y=p,b=p,T=p;p.eachBefore(function(U){U.x<y.x&&(y=U),U.x>b.x&&(b=U),U.depth>T.depth&&(T=U)});var R=y===b?1:e(y,b)/2,M=R-y.x,I=t/(b.x+R+M),N=n/(T.depth||1);p.eachBefore(function(U){U.x=(U.x+M)*I,U.y=U.depth*N})}return p}function s(p){var v=p.children,y=p.parent.children,b=p.i?y[p.i-1]:null;if(v){Poe(p);var T=(v[0].z+v[v.length-1].z)/2;b?(p.z=b.z+e(p._,b._),p.m=p.z-T):p.z=T}else b&&(p.z=b.z+e(p._,b._));p.parent.A=u(p,b,p.parent.A||y[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function u(p,v,y){if(v){for(var b=p,T=p,R=v,M=b.parent.children[0],I=b.m,N=T.m,U=R.m,H=M.m,X;R=QI(R),b=qI(b),R&&b;)M=qI(M),T=QI(T),T.a=p,X=R.z+U-b.z-I+e(R._,b._),X>0&&(Moe(Ioe(R,p,y),p,X),I+=X,N+=X),U+=R.m,I+=b.m,H+=M.m,N+=T.m;R&&!QI(T)&&(T.t=R,T.m+=U-N),b&&!qI(M)&&(M.t=b,M.m+=I-H,y=p)}return y}function h(p){p.x*=t,p.y=p.depth*n}return i.separation=function(p){return arguments.length?(e=p,i):e},i.size=function(p){return arguments.length?(r=!1,t=+p[0],n=+p[1],i):r?null:[t,n]},i.nodeSize=function(p){return arguments.length?(r=!0,t=+p[0],n=+p[1],i):r?[t,n]:null},i}function Noe(e,t){return e.parent===t.parent?1:2}function Boe(e){return e.reduce(Foe,0)/e.length}function Foe(e,t){return e+t.x}function koe(e){return 1+e.reduce(Uoe,0)}function Uoe(e,t){return Math.max(e,t.y)}function zoe(e){for(var t;t=e.children;)e=t[0];return e}function joe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Voe(){var e=Noe,t=1,n=1,r=!1;function i(s){var l,u=0;s.eachAfter(function(b){var T=b.children;T?(b.x=Boe(T),b.y=koe(T)):(b.x=l?u+=e(b,l):0,b.y=0,l=b)});var h=zoe(s),p=joe(s),v=h.x-e(h,p)/2,y=p.x+e(p,h)/2;return s.eachAfter(r?function(b){b.x=(b.x-s.x)*t,b.y=(s.y-b.y)*n}:function(b){b.x=(b.x-v)/(y-v)*t,b.y=(1-(s.y?b.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}const rz=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:s,sortBy:l,as:u=["x","y"]}=t,[h,p]=u,v=$b(n,R=>R.children).sum(R=>R[r]).sort(l),y=e();y.size([1,1]),i&&y.nodeSize(i),s&&y.separation(s),y(v);const b=[];v.each(R=>{R[h]=R.x,R[p]=R.y,R.name=R.data.name,b.push(R)});const T=v.links();return T.forEach(R=>{R[h]=[R.source[h],R.target[h]],R[p]=[R.source[p],R.target[p]]}),{nodes:b,edges:T}},iz=e=>rz(Voe)(e);iz.props={};const oz=e=>rz(Doe)(e);oz.props={};const Hoe={sortBy:(e,t)=>t.value-e.value},Woe={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Goe={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Zoe={text:"",fontSize:10},az=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:h={},tooltip:p={}}=e,v=n==null?void 0:n.value,{nodes:y,edges:b}=oz(Object.assign(Object.assign(Object.assign({},Hoe),s),{field:v}))(t),T=km(p,"node",{title:"name",items:["value"]},!0),R=km(p,"link",{title:"",items:[M=>({name:"source",value:M.source.name}),M=>({name:"target",value:M.target.name})]});return[ti({},Goe,{data:b,encode:go(n,"link"),scale:go(r,"link"),labels:u,style:Object.assign({stroke:"#999"},go(i,"link")),tooltip:R,animate:Um(h,"link")}),ti({},Woe,{data:y,scale:go(r,"node"),encode:go(n,"node"),labels:[Object.assign(Object.assign({},Zoe),go(i,"label")),...l],style:Object.assign({},go(i,"node")),tooltip:T,animate:Um(h,"node")})]};az.props={};var Xoe=1664525,$oe=1013904223,sz=4294967296;function Yoe(){var e=1;return function(){return(e=(Xoe*e+$oe)%sz)/sz}}var Koe=D(52677);function qoe(e){return Koe(e)==="object"&&"length"in e?e:Array.from(e)}function Qoe(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function jpe(e){return lz(e,lcg())}function lz(e,t){for(var n=0,r=(e=Qoe(Array.from(e),t)).length,i=[],s,l;n<r;)s=e[n],l&&cz(l,s)?++n:(l=eae(i=Joe(i,s)),n=0);return l}function Joe(e,t){var n,r;if(JI(t,e))return[t];for(n=0;n<e.length;++n)if(uC(t,e[n])&&JI($E(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(uC($E(e[n],e[r]),t)&&uC($E(e[n],t),e[r])&&uC($E(e[r],t),e[n])&&JI(uz(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function uC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function cz(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function JI(e,t){for(var n=0;n<t.length;++n)if(!cz(e,t[n]))return!1;return!0}function eae(e){switch(e.length){case 1:return tae(e[0]);case 2:return $E(e[0],e[1]);case 3:return uz(e[0],e[1],e[2])}}function tae(e){return{x:e.x,y:e.y,r:e.r}}function $E(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,l=t.y,u=t.r,h=s-n,p=l-r,v=u-i,y=Math.sqrt(h*h+p*p);return{x:(n+s+h/y*v)/2,y:(r+l+p/y*v)/2,r:(y+i+u)/2}}function uz(e,t,n){var r=e.x,i=e.y,s=e.r,l=t.x,u=t.y,h=t.r,p=n.x,v=n.y,y=n.r,b=r-l,T=r-p,R=i-u,M=i-v,I=h-s,N=y-s,U=r*r+i*i-s*s,H=U-l*l-u*u+h*h,X=U-p*p-v*v+y*y,$=T*R-b*M,Q=(R*X-M*H)/($*2)-r,ce=(M*I-R*N)/$,pe=(T*H-b*X)/($*2)-i,Re=(b*N-T*I)/$,je=ce*ce+Re*Re-1,Ke=2*(s+Q*ce+pe*Re),ft=Q*Q+pe*pe-s*s,Ye=-(Math.abs(je)>1e-6?(Ke+Math.sqrt(Ke*Ke-4*je*ft))/(2*je):ft/Ke);return{x:r+Q+ce*Ye,y:i+pe+Re*Ye,r:Ye}}function fz(e,t,n){var r=e.x-t.x,i,s,l=e.y-t.y,u,h,p=r*r+l*l;p?(s=t.r+n.r,s*=s,h=e.r+n.r,h*=h,s>h?(i=(p+h-s)/(2*p),u=Math.sqrt(Math.max(0,h/p-i*i)),n.x=e.x-i*r-u*l,n.y=e.y-i*l+u*r):(i=(p+s-h)/(2*p),u=Math.sqrt(Math.max(0,s/p-i*i)),n.x=t.x+i*r-u*l,n.y=t.y+i*l+u*r)):(n.x=t.x+n.r,n.y=t.y)}function hz(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function dz(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function fC(e){this._=e,this.next=null,this.previous=null}function pz(e,t){if(!(s=(e=qoe(e)).length))return 0;var n,r,i,s,l,u,h,p,v,y,b;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;fz(r,n,i=e[2]),n=new fC(n),r=new fC(r),i=new fC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<s;++h){fz(n._,r._,i=e[h]),i=new fC(i),p=r.next,v=n.previous,y=r._.r,b=n._.r;do if(y<=b){if(hz(p._,i._)){r=p,n.next=r,r.previous=n,--h;continue e}y+=p._.r,p=p.next}else{if(hz(v._,i._)){n=v,n.next=r,r.previous=n,--h;continue e}b+=v._.r,v=v.previous}while(p!==v.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=dz(n);(i=i.next)!==r;)(u=dz(i))<l&&(n=i,l=u);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lz(n,t),h=0;h<s;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function Vpe(e){return pz(e,lcg()),e}function nae(e){return Math.sqrt(e.value)}function rae(){var e=null,t=1,n=1,r=S1;function i(s){var l=Yoe();return s.x=t/2,s.y=n/2,e?s.eachBefore(vz(e)).eachAfter(e5(r,.5,l)).eachBefore(mz(1)):s.eachBefore(vz(nae)).eachAfter(e5(S1,1,l)).eachAfter(e5(r,s.r/Math.min(t,n),l)).eachBefore(mz(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=OA(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:rx(+s),i):r},i}function vz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function e5(e,t,n){return function(r){if(i=r.children){var i,s,l=i.length,u=e(r)*t||0,h;if(u)for(s=0;s<l;++s)i[s].r+=u;if(h=pz(i,n),u)for(s=0;s<l;++s)i[s].r-=u;r.r=h+u}}}function mz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var iae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const oae=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),aae=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),sae={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},lae={title:e=>e.data.name,items:[{field:"value"}]},cae=(e,t,n)=>{const{value:r}=n,i=jo(e)?XP().path(t.path)(e):$b(e);return r?i.sum(s=>jm(r)(s)).sort(t.sort):i.count(),rae().size(t.size).padding(t.padding)(i),i.descendants()},gz=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:s={},scale:l={},style:u={},layout:h={},labels:p=[],tooltip:v={}}=e,y=iae(e,["data","encode","scale","style","layout","labels","tooltip"]),b=aae(n,r,s),T=cae(i,ti({},oae(n,r),h),ti({},b.encode,s)),R=go(u,"label");return ti({},b,Object.assign(Object.assign({data:T,encode:s,scale:l,style:u,labels:[Object.assign(Object.assign({},sae),R),...p]},y),{tooltip:Qw(v,lae),axis:!1}))};gz.props={};function uae(e){return e.target.depth}function fae(e){return e.depth}function hae(e,t){return t-1-e.height}function hC(e,t){return e.sourceLinks.length?e.depth:t-1}function dae(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?v0(e.sourceLinks,uae)-1:0}function dC(e){return function(){return e}}function yz(e,t){return pC(e.source,t.source)||e.index-t.index}function _z(e,t){return pC(e.target,t.target)||e.index-t.index}function pC(e,t){return e.y0-t.y0}function t5(e){return e.value}function pae(e){return e.index}function vae(e){return e.nodes}function mae(e){return e.links}function bz(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function xz({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function gae(){let e=0,t=0,n=1,r=1,i=24,s=8,l,u=pae,h=hC,p,v,y,b=vae,T=mae,R=6;function M(vt){const Vt={nodes:b(vt),links:T(vt)};return I(Vt),N(Vt),U(Vt),H(Vt),Q(Vt),xz(Vt),Vt}M.update=function(vt){return xz(vt),vt},M.nodeId=function(vt){return arguments.length?(u=typeof vt=="function"?vt:dC(vt),M):u},M.nodeAlign=function(vt){return arguments.length?(h=typeof vt=="function"?vt:dC(vt),M):h},M.nodeDepth=function(vt){return arguments.length?(p=vt,M):p},M.nodeSort=function(vt){return arguments.length?(v=vt,M):v},M.nodeWidth=function(vt){return arguments.length?(i=+vt,M):i},M.nodePadding=function(vt){return arguments.length?(s=l=+vt,M):s},M.nodes=function(vt){return arguments.length?(b=typeof vt=="function"?vt:dC(vt),M):b},M.links=function(vt){return arguments.length?(T=typeof vt=="function"?vt:dC(vt),M):T},M.linkSort=function(vt){return arguments.length?(y=vt,M):y},M.size=function(vt){return arguments.length?(e=t=0,n=+vt[0],r=+vt[1],M):[n-e,r-t]},M.extent=function(vt){return arguments.length?(e=+vt[0][0],n=+vt[1][0],t=+vt[0][1],r=+vt[1][1],M):[[e,t],[n,r]]},M.iterations=function(vt){return arguments.length?(R=+vt,M):R};function I({nodes:vt,links:Vt}){vt.forEach((Ut,Sn)=>{Ut.index=Sn,Ut.sourceLinks=[],Ut.targetLinks=[]});const At=new Map(vt.map(Ut=>[u(Ut),Ut]));if(Vt.forEach((Ut,Sn)=>{Ut.index=Sn;let{source:Vn,target:rr}=Ut;typeof Vn!="object"&&(Vn=Ut.source=bz(At,Vn)),typeof rr!="object"&&(rr=Ut.target=bz(At,rr)),Vn.sourceLinks.push(Ut),rr.targetLinks.push(Ut)}),y!=null)for(const{sourceLinks:Ut,targetLinks:Sn}of vt)Ut.sort(y),Sn.sort(y)}function N({nodes:vt}){for(const Vt of vt)Vt.value=Vt.fixedValue===void 0?Math.max(is(Vt.sourceLinks,t5),is(Vt.targetLinks,t5)):Vt.fixedValue}function U({nodes:vt}){const Vt=vt.length;let At=new Set(vt),Ut=new Set,Sn=0;for(;At.size;){if(At.forEach(Vn=>{Vn.depth=Sn;for(const{target:rr}of Vn.sourceLinks)Ut.add(rr)}),++Sn>Vt)throw new Error("circular link");At=Ut,Ut=new Set}if(p){const Vn=Math.max(ds(vt,or=>or.depth)+1,0);let rr;for(let or=0;or<vt.length;or++)rr=vt[or],rr.depth=p.call(null,rr,Vn)}}function H({nodes:vt}){const Vt=vt.length;let At=new Set(vt),Ut=new Set,Sn=0;for(;At.size;){if(At.forEach(Vn=>{Vn.height=Sn;for(const{source:rr}of Vn.targetLinks)Ut.add(rr)}),++Sn>Vt)throw new Error("circular link");At=Ut,Ut=new Set}}function X({nodes:vt}){const Vt=Math.max(ds(vt,Sn=>Sn.depth)+1,0),At=(n-e-i)/(Vt-1),Ut=new Array(Vt).fill(0).map(()=>[]);for(const Sn of vt){const Vn=Math.max(0,Math.min(Vt-1,Math.floor(h.call(null,Sn,Vt))));Sn.layer=Vn,Sn.x0=e+Vn*At,Sn.x1=Sn.x0+i,Ut[Vn]?Ut[Vn].push(Sn):Ut[Vn]=[Sn]}if(v)for(const Sn of Ut)Sn.sort(v);return Ut}function $(vt){const Vt=v0(vt,At=>(r-t-(At.length-1)*l)/is(At,t5));for(const At of vt){let Ut=t;for(const Sn of At){Sn.y0=Ut,Sn.y1=Ut+Sn.value*Vt,Ut=Sn.y1+l;for(const Vn of Sn.sourceLinks)Vn.width=Vn.value*Vt}Ut=(r-Ut+l)/(At.length+1);for(let Sn=0;Sn<At.length;++Sn){const Vn=At[Sn];Vn.y0+=Ut*(Sn+1),Vn.y1+=Ut*(Sn+1)}Ye(At)}}function Q(vt){const Vt=X(vt);l=Math.min(s,(r-t)/(ds(Vt,At=>At.length)-1)),$(Vt);for(let At=0;At<R;++At){const Ut=Math.pow(.99,At),Sn=Math.max(1-Ut,(At+1)/R);pe(Vt,Ut,Sn),ce(Vt,Ut,Sn)}}function ce(vt,Vt,At){for(let Ut=1,Sn=vt.length;Ut<Sn;++Ut){const Vn=vt[Ut];for(const rr of Vn){let or=0,Hr=0;for(const{source:Qi,value:Jr}of rr.targetLinks){const qr=Jr*(rr.layer-Qi.layer);or+=it(Qi,rr)*qr,Hr+=qr}if(!(Hr>0))continue;const fi=(or/Hr-rr.y0)*Vt;rr.y0+=fi,rr.y1+=fi,ft(rr)}v===void 0&&Vn.sort(pC),Vn.length&&Re(Vn,At)}}function pe(vt,Vt,At){for(let Ut=vt.length,Sn=Ut-2;Sn>=0;--Sn){const Vn=vt[Sn];for(const rr of Vn){let or=0,Hr=0;for(const{target:Qi,value:Jr}of rr.sourceLinks){const qr=Jr*(Qi.layer-rr.layer);or+=at(rr,Qi)*qr,Hr+=qr}if(!(Hr>0))continue;const fi=(or/Hr-rr.y0)*Vt;rr.y0+=fi,rr.y1+=fi,ft(rr)}v===void 0&&Vn.sort(pC),Vn.length&&Re(Vn,At)}}function Re(vt,Vt){const At=vt.length>>1,Ut=vt[At];Ke(vt,Ut.y0-l,At-1,Vt),je(vt,Ut.y1+l,At+1,Vt),Ke(vt,r,vt.length-1,Vt),je(vt,t,0,Vt)}function je(vt,Vt,At,Ut){for(;At<vt.length;++At){const Sn=vt[At],Vn=(Vt-Sn.y0)*Ut;Vn>1e-6&&(Sn.y0+=Vn,Sn.y1+=Vn),Vt=Sn.y1+l}}function Ke(vt,Vt,At,Ut){for(;At>=0;--At){const Sn=vt[At],Vn=(Sn.y1-Vt)*Ut;Vn>1e-6&&(Sn.y0-=Vn,Sn.y1-=Vn),Vt=Sn.y0-l}}function ft({sourceLinks:vt,targetLinks:Vt}){if(y===void 0){for(const{source:{sourceLinks:At}}of Vt)At.sort(_z);for(const{target:{targetLinks:At}}of vt)At.sort(yz)}}function Ye(vt){if(y===void 0)for(const{sourceLinks:Vt,targetLinks:At}of vt)Vt.sort(_z),At.sort(yz)}function it(vt,Vt){let At=vt.y0-(vt.sourceLinks.length-1)*l/2;for(const{target:Ut,width:Sn}of vt.sourceLinks){if(Ut===Vt)break;At+=Sn+l}for(const{source:Ut,width:Sn}of Vt.targetLinks){if(Ut===vt)break;At-=Sn}return At}function at(vt,Vt){let At=Vt.y0-(Vt.targetLinks.length-1)*l/2;for(const{source:Ut,width:Sn}of Vt.targetLinks){if(Ut===vt)break;At+=Sn+l}for(const{target:Ut,width:Sn}of vt.sourceLinks){if(Ut===Vt)break;At-=Sn}return At}return M}const yae={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},_ae={left:fae,right:hae,center:dae,justify:hC};function bae(e){const t=typeof e;return t==="string"?_ae[e]||hC:t==="function"?e:hC}const Ez=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:s,nodePadding:l,nodeDepth:u,nodes:h,links:p,linkSort:v,iterations:y}=Object.assign({},yae,e),b=gae().nodeSort(r).linkSort(v).links(p).nodes(h).nodeWidth(s).nodePadding(l).nodeDepth(u).nodeAlign(bae(i)).iterations(y).extent([[0,0],[1,1]]);typeof n=="function"&&b.nodeId(n);const T=b(t),{nodes:R,links:M}=T,I=R.map(U=>{const{x0:H,x1:X,y0:$,y1:Q}=U;return Object.assign(Object.assign({},U),{x:[H,X,X,H],y:[$,$,Q,Q]})}),N=M.map(U=>{const{source:H,target:X}=U,$=H.x1,Q=X.x0,ce=U.width/2;return Object.assign(Object.assign({},U),{x:[$,$,Q,Q],y:[U.y0+ce,U.y0-ce,U.y1+ce,U.y1-ce]})});return{nodes:I,links:N}};Ez.props={};var xae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Eae={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},Sae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},Tae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},wae={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},Sz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:h={},tooltip:p={}}=e,{links:v,nodes:y}=XM(t,n),b=go(n,"node"),T=go(n,"link"),{key:R=Re=>Re.key,color:M=R}=b,{links:I,nodes:N}=Ez(Object.assign(Object.assign(Object.assign({},Eae),{nodeId:jm(R)}),s))({links:v,nodes:y}),U=go(i,"label"),{text:H=R,spacing:X=5}=U,$=xae(U,["text","spacing"]),Q=jm(R),ce=km(p,"node",{title:Q,items:[{field:"value"}]},!0),pe=km(p,"link",{title:"",items:[Re=>({name:"source",value:Q(Re.source)}),Re=>({name:"target",value:Q(Re.target)})]});return[ti({},Sae,{data:N,encode:Object.assign(Object.assign({},b),{color:M}),scale:r,style:go(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},wae),{text:H,dx:Re=>Re.x[0]<.5?X:-X}),$),...l],tooltip:ce,animate:Um(h,"node"),axis:!1}),ti({},Tae,{data:I,encode:T,labels:u,style:Object.assign({fill:T.color?void 0:"#aaa",lineWidth:0},go(i,"link")),tooltip:pe,animate:Um(h,"link")})]};Sz.props={};function Aae(e,t){return t.value-e.value}function Cae(e,t){return t.frequency-e.frequency}function Oae(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function Rae(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const Mae={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function Pae(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:s,source:l,target:u,sourceWeight:h,targetWeight:p,sortBy:v}=Object.assign(Object.assign({},Mae),e);function y(I){const N=I.nodes.map(H=>Object.assign({},H)),U=I.edges.map(H=>Object.assign({},H));return b(N,U),T(N,U),R(N,U),M(N,U),{nodes:N,edges:U}}function b(I,N){N.forEach(X=>{X.source=l(X),X.target=u(X),X.sourceWeight=h(X),X.targetWeight=p(X)});const U=Kl(N,X=>X.source),H=Kl(N,X=>X.target);return I.forEach(X=>{X.id=s(X);const $=U.has(X.id)?U.get(X.id):[],Q=H.has(X.id)?H.get(X.id):[];X.frequency=$.length+Q.length,X.value=is($,ce=>ce.sourceWeight)+is(Q,ce=>ce.targetWeight)}),{nodes:I,edges:N}}function T(I,N){const U=typeof v=="function"?v:ve[v];U&&I.sort(U)}function R(I,N){const U=I.length;if(!U)throw Oy("Invalid nodes: it's empty!");if(!r){const $=1/U;return I.forEach((Q,ce)=>{Q.x=(ce+.5)*$,Q.y=t}),{nodes:I,edges:N}}const H=i/(2*U),X=I.reduce(($,Q)=>$+=Q.value,0);return I.reduce(($,Q)=>{Q.weight=Q.value/X,Q.width=Q.weight*(1-i),Q.height=n;const ce=H+$,pe=ce+Q.width,Re=t-n/2,je=Re+n;return Q.x=[ce,pe,pe,ce],Q.y=[Re,Re,je,je],$+Q.width+2*H},0),{nodes:I,edges:N}}function M(I,N){const U=new Map(I.map($=>[$.id,$]));if(!r)return N.forEach($=>{const Q=l($),ce=u($),pe=U.get(Q),Re=U.get(ce);pe&&Re&&($.x=[pe.x,Re.x],$.y=[pe.y,Re.y])}),{nodes:I,edges:N};N.forEach($=>{$.x=[0,0,0,0],$.y=[t,t,t,t]});const H=Kl(N,$=>$.source),X=Kl(N,$=>$.target);I.forEach($=>{const{edges:Q,width:ce,x:pe,y:Re,value:je,id:Ke}=$,ft=H.get(Ke)||[],Ye=X.get(Ke)||[];let it=0;ft.map(at=>{const vt=at.sourceWeight/je*ce;at.x[0]=pe[0]+it,at.x[1]=pe[0]+it+vt,it+=vt}),Ye.forEach(at=>{const vt=at.targetWeight/je*ce;at.x[3]=pe[0]+it,at.x[2]=pe[0]+it+vt,it+=vt})})}return y}const n5=e=>t=>Pae(e)(t);n5.props={};var Tz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const r5={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},Iae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Lae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Dae={position:"outside",fontSize:10},wz=(e,t)=>{const{data:n,encode:r={},scale:i,style:s={},layout:l={},nodeLabels:u=[],linkLabels:h=[],animate:p={},tooltip:v={}}=e,{nodes:y,links:b}=XM(n,r),T=go(r,"node"),R=go(r,"link"),{key:M=at=>at.key,color:I=M}=T,{linkEncodeColor:N=at=>at.source}=R,{nodeWidthRatio:U=r5.thickness,nodePaddingRatio:H=r5.marginRatio}=l,X=Tz(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:$,edges:Q}=n5(Object.assign(Object.assign(Object.assign(Object.assign({},r5),{id:jm(M),thickness:U,marginRatio:H}),X),{weight:!0}))({nodes:y,edges:b}),ce=go(s,"label"),{text:pe=M}=ce,Re=Tz(ce,["text"]),je=km(v,"node",{title:"",items:[at=>({name:at.key,value:at.value})]},!0),Ke=km(v,"link",{title:"",items:[at=>({name:`${at.source} -> ${at.target}`,value:at.value})]}),{height:ft,width:Ye}=t,it=Math.min(ft,Ye);return[ti({},Lae,{data:Q,encode:Object.assign(Object.assign({},R),{color:N}),labels:h,style:Object.assign({fill:N?void 0:"#aaa"},go(s,"link")),tooltip:Ke,animate:Um(p,"link")}),ti({},Iae,{data:$,encode:Object.assign(Object.assign({},T),{color:I}),scale:i,style:go(s,"node"),coordinate:{type:"polar",outerRadius:(it-20)/it,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Dae),{text:pe}),Re),...u],tooltip:je,animate:Um(p,"node"),axis:!1})]};wz.props={};var Nae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bae=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Fae=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),kae={fontSize:10,text:e=>vE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Uae={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},zae={title:e=>vE(e.path),items:[{field:"value"}]},Az=(e,t)=>{const{width:n,height:r,options:i}=t,{data:s,encode:l={},scale:u,style:h={},layout:p={},labels:v=[],tooltip:y={}}=e,b=Nae(e,["data","encode","scale","style","layout","labels","tooltip"]),T=bl(i,["interaction","treemapDrillDown"]),R=ti({},Bae(n,r),p,{layer:T?U=>U.depth===1:p.layer}),[M,I]=C7(s,R,l),N=go(h,"label");return ti({},Fae(n,r),Object.assign(Object.assign({data:M,scale:u,style:h,labels:[Object.assign(Object.assign({},kae),N),...v]},b),{encode:l,tooltip:Qw(y,Uae),axis:!1}),T?{interaction:Object.assign(Object.assign({},b.interaction),{treemapDrillDown:T?Object.assign(Object.assign({},T),{originData:I,layout:R}):void 0}),encode:Object.assign({color:U=>vE(U.path)},l),tooltip:Qw(y,zae)}:{})};Az.props={};function jae(){return{"data.arc":n5,"data.cluster":iz,"mark.forceGraph":nz,"mark.tree":az,"mark.pack":gz,"mark.sankey":Sz,"mark.chord":wz,"mark.treemap":Az}}var Cz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vae(e,t){return v0(e,n=>t[n])}function Hae(e,t){return ds(e,n=>t[n])}function Oz(e,t){const n=i5(e,t)*2.5-o5(e,t)*1.5;return v0(e,r=>t[r]>=n?t[r]:NaN)}function i5(e,t){return IA(e,.25,n=>t[n])}function Wae(e,t){return IA(e,.5,n=>t[n])}function o5(e,t){return IA(e,.75,n=>t[n])}function Rz(e,t){const n=o5(e,t)*2.5-i5(e,t)*1.5;return ds(e,r=>t[r]<=n?t[r]:NaN)}function Gae(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:s}=r,{value:l}=i;return[Array.from(Kl(e,p=>l[+p]).values()).flatMap(p=>{const v=Oz(p,s),y=Rz(p,s);return p.filter(b=>s[b]<v||s[b]>y)}),t]}}const Mz=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:s,animate:l}=e,u=Cz(e,["data","encode","style","tooltip","transform","animate"]),{point:h=!0}=r,p=Cz(r,["point"]),{y:v}=n,y={y:v,y1:v,y2:v,y3:v,y4:v},b={y1:i5,y2:Wae,y3:o5},T=km(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),R=km(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!h)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Vae},b),{y4:Hae})],encode:Object.assign(Object.assign({},n),y),style:p,tooltip:T},u);const M=go(p,"box"),I=go(p,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Oz},b),{y4:Rz})],encode:Object.assign(Object.assign({},n),y),style:M,tooltip:T,animate:Um(l,"box")},u),{type:"point",data:t,transform:[{type:Gae}],encode:n,style:Object.assign({},I),tooltip:R,animate:Um(l,"point")}]};Mz.props={};const Pz=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,Zae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,s,l)=>{const{document:u}=t.canvas,{color:h,index:p}=s,v=u.createElement("g",{}),y=Pz(i[0],i[1]),b=Pz(i[0],r)*2,T=u.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",y,y,0,1,0,...i[1]],["A",b+y*2,b+y*2,0,0,0,...i[2]],["A",y,y,0,1,p===0?0:1,...i[3]],["A",b,b,0,0,1,...i[0]],["Z"]]},l),WR(e,["shape","last","first"])),{fill:h||l.color})});return v.appendChild(T),v}};var vC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Xae=(e,t)=>{const{shape:n,radius:r}=e,i=vC(e,["shape","radius"]),s=go(i,"pointer"),l=go(i,"pin"),{shape:u}=s,h=vC(s,["shape"]),{shape:p}=l,v=vC(l,["shape"]),{coordinate:y,theme:b}=t;return(T,R)=>{const M=T.map(it=>y.invert(it)),[I,N,U]=Lj(y,"polar"),H=y.clone(),{color:X}=R,$=C2({startAngle:I,endAngle:N,innerRadius:U,outerRadius:r});$.push(["cartesian"]),H.update({transformations:$});const Q=M.map(it=>H.map(it)),[ce,pe]=JR(Q),[Re,je]=y.getCenter(),Ke=Object.assign(Object.assign({x1:ce,y1:pe,x2:Re,y2:je,stroke:X},h),i),ft=Object.assign(Object.assign({cx:Re,cy:je,stroke:X},v),i),Ye=Pa(new Mf);return Fv(u)||(typeof u=="function"?Ye.append(()=>u(Q,R,H,b)):Ye.append("line").call(la,Ke).node()),Fv(p)||(typeof p=="function"?Ye.append(()=>p(Q,R,H,b)):Ye.append("circle").call(la,ft).node()),Ye.node()}},Iz={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},$ae={style:{shape:Xae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Yae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function Kae(e){if((0,Zl.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function qae(e,t){const{name:n="score",target:r,total:i,percent:s,thresholds:l=[]}=Kae(e),u=s||r,h=s?1:i,p=Object.assign({y:{domain:[0,h]}},t);return l.length?{targetData:[{x:n,y:u,color:"target"}],totalData:l.map((v,y)=>({x:n,y:y>=1?v-l[y-1]:v,color:y})),target:u,total:h,scale:p}:{targetData:[{x:n,y:u,color:"target"}],totalData:[{x:n,y:u,color:"target"},{x:n,y:h-u,color:"total"}],target:u,total:h,scale:p}}function Qae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const Lz=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:s=[]}=e,l=vC(e,["data","scale","style","animate","transform"]),{targetData:u,totalData:h,target:p,total:v,scale:y}=qae(t,n),b=go(r,"text"),T=A2(r,["pointer","pin"]),R=go(r,"arc"),M=R.shape;return[ti({},Iz,Object.assign({type:"interval",transform:[{type:"stackY"}],data:h,scale:y,style:M==="round"?Object.assign(Object.assign({},R),{shape:Zae}):R,animate:typeof i=="object"?go(i,"arc"):i},l)),ti({},Iz,$ae,Object.assign({type:"point",data:u,scale:y,style:T,animate:typeof i=="object"?go(i,"indicator"):i},l)),ti({},Yae,{style:Object.assign({text:Qae(b,{target:p,total:v})},b),animate:typeof i=="object"?go(i,"text"):i})]};Lz.props={};const Dz=5e3;function Nz(e,t,n){return e+(t-e)*n}function Jae(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function ese(e,t,n,r,i,s,l){const u=Math.ceil(2*e/n*4)*4,h=[];let p=r;for(;p<-Math.PI*2;)p+=Math.PI*2;for(;p>0;)p-=Math.PI*2;p=p/Math.PI/2*n;const v=s-e+p-e*2;h.push(["M",v,t]);let y=0;for(let b=0;b<u;++b){const T=b%4,R=Jae(b*n/4,T,n,i);h.push(["C",R[0][0]+v,-R[0][1]+t,R[1][0]+v,-R[1][1]+t,R[2][0]+v,-R[2][1]+t]),b===u-1&&(y=R[2][0])}return h.push(["L",y+v,l+e]),h.push(["L",v,l+e]),h.push(["Z"]),h}function tse(e,t,n,r,i,s,l,u,h,p,v){const{fill:y,fillOpacity:b,opacity:T}=i;for(let R=0;R<r;R++){const M=r<=1?1:R/(r-1),I=ese(u,l+u*n,h,0,u/40,e,t),N=v.createElement("path",{style:{d:I,fill:y,opacity:Nz(.2,.9,M)*Number(T||b)}});s.appendChild(N);try{if(p===!1)return;const U=[{transform:"translate(0, 0)"},{transform:`translate(${h*2}, 0)`}];N.animate(U,{duration:Nz(.5*Dz,Dz,M)*2,iterations:1/0})}catch(U){console.warn("off-screen group animate error!")}}}function nse(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function rse(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function ise(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function ose(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function ase(e,t,n){const r=n*4/3,i=Math.max(r,n*2),s=r/2,l=e,u=s+t-i/2,h=Math.asin(s/((i-s)*.85)),p=Math.sin(h)*s,v=Math.cos(h)*s,y=l-v,b=u+p,T=e,R=u+s/Math.sin(h);return`
      M ${y} ${b}
      A ${s} ${s} 0 1 1 ${y+v*2} ${b}
      Q ${T} ${R} ${e} ${t+i/2}
      Q ${T} ${R} ${y} ${b}
      Z 
    `}const Bz={pin:ase,rect:rse,circle:nse,diamond:ise,triangle:ose};var Fz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const sse=(e="circle")=>Bz[e]||Bz.circle,kz=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:s,percent:l}=r,{background:u,outline:h={},wave:p={}}=i,v=Fz(i,["background","outline","wave"]),{border:y=2,distance:b=0}=h,T=Fz(h,["border","distance"]),{length:R=192,count:M=3}=p;return(I,N,U)=>{const{document:H}=t.canvas,{color:X,fillOpacity:$}=U,Q=Object.assign(Object.assign({fill:X},U),v),ce=H.createElement("g",{}),[pe,Re]=n.getCenter(),je=n.getSize(),Ke=Math.min(...je)/2,Ye=(op(s)?s:sse(s))(pe,Re,Ke,...je);if(Object.keys(u).length){const vt=H.createElement("path",{style:Object.assign({d:Ye,fill:"#fff"},u)});ce.appendChild(vt)}if(l>0){const vt=H.createElement("path",{style:{d:Ye}});ce.appendChild(vt),ce.style.clipPath=vt,tse(pe,Re,1-l,M,Q,ce,vt.getBBox().y,Ke*2,R,!0,H)}const it=H.createElement("path",{style:{d:Ye,fill:"transparent",lineWidth:y+2*b,stroke:"#fff"}}),at=H.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:Ye,stroke:X,strokeOpacity:$,lineWidth:y},Q),T),{fill:"transparent"})});return ce.appendChild(it),ce.appendChild(at),ce}};kz.props={};var lse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cse={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:kz},animate:{enter:{type:"fadeIn"}}},use={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},Uz=e=>{const{data:t={},style:n={},animate:r}=e,i=lse(e,["data","style","animate"]),s=Math.max(0,(0,Zl.Z)(t)?t:t==null?void 0:t.percent),l=[{percent:s,type:"liquid"}],u=Object.assign(Object.assign({},go(n,"text")),go(n,"content")),h=go(n,"outline"),p=go(n,"wave"),v=go(n,"background");return[ti({},cse,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:h,wave:p,background:v})},animate:r},i)),ti({},use,{style:Object.assign({text:`${Cb(s*100)} %`},u),animate:r})]};Uz.props={};var Bg=D(69916);const zz=1e-10;function jz(e,t){const n=hse(e),r=n.filter(function(h){return fse(h,e)});let i=0,s=0,l;const u=[];if(r.length>1){const h=dse(r);for(l=0;l<r.length;++l){const v=r[l];v.angle=Math.atan2(v.x-h.x,v.y-h.y)}r.sort(function(v,y){return y.angle-v.angle});let p=r[r.length-1];for(l=0;l<r.length;++l){const v=r[l];s+=(p.x+v.x)*(v.y-p.y);const y={x:(v.x+p.x)/2,y:(v.y+p.y)/2};let b=null;for(let T=0;T<v.parentIndex.length;++T)if(p.parentIndex.indexOf(v.parentIndex[T])>-1){const R=e[v.parentIndex[T]],M=Math.atan2(v.x-R.x,v.y-R.y),I=Math.atan2(p.x-R.x,p.y-R.y);let N=I-M;N<0&&(N+=2*Math.PI);const U=I-N/2;let H=YE(y,{x:R.x+R.radius*Math.sin(U),y:R.y+R.radius*Math.cos(U)});H>R.radius*2&&(H=R.radius*2),(b===null||b.width>H)&&(b={circle:R,width:H,p1:v,p2:p})}b!==null&&(u.push(b),i+=a5(b.circle.radius,b.width),p=v)}}else{let h=e[0];for(l=1;l<e.length;++l)e[l].radius<h.radius&&(h=e[l]);let p=!1;for(l=0;l<e.length;++l)if(YE(e[l],h)>Math.abs(h.radius-e[l].radius)){p=!0;break}p?i=s=0:(i=h.radius*h.radius*Math.PI,u.push({circle:h,p1:{x:h.x,y:h.y+h.radius},p2:{x:h.x-zz,y:h.y+h.radius},width:h.radius*2}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=u,t.innerPoints=r,t.intersectionPoints=n),i+s}function fse(e,t){for(let n=0;n<t.length;++n)if(YE(e,t[n])>t[n].radius+zz)return!1;return!0}function hse(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=Hz(e[n],e[r]);for(let s=0;s<i.length;++s){const l=i[s];l.parentIndex=[n,r],t.push(l)}}return t}function a5(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function YE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function Vz(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return a5(e,r)+a5(t,i)}function Hz(e,t){const n=YE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),l=Math.sqrt(r*r-s*s),u=e.x+s*(t.x-e.x)/n,h=e.y+s*(t.y-e.y)/n,p=-(t.y-e.y)*(l/n),v=-(t.x-e.x)*(l/n);return[{x:u+p,y:h-v},{x:u-p,y:h+v}]}function dse(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function pse(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||yse,r=t.lossFunction||l5;e=vse(e);const i=n(e,t),s=[],l=[];let u;for(u in i)i.hasOwnProperty(u)&&(s.push(i[u].x),s.push(i[u].y),l.push(u));const p=(0,Bg.nelderMead)(function(v){const y={};for(let b=0;b<l.length;++b){const T=l[b];y[T]={x:v[2*b],y:v[2*b+1],radius:i[T].radius}}return r(y,e)},s,t).x;for(let v=0;v<l.length;++v)u=l[v],i[u].x=p[2*v],i[u].y=p[2*v+1];return i}const Wz=1e-10;function s5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+Wz?Math.abs(e-t):(0,Bg.bisect)(function(r){return Vz(e,t,r)-n},0,e+t)}function vse(e){e=e.slice();const t=[],n={};let r,i,s,l;for(r=0;r<e.length;++r){const u=e[r];u.sets.length==1?t.push(u.sets[0]):u.sets.length==2&&(s=u.sets[0],l=u.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(t.sort((u,h)=>u>h?1:-1),r=0;r<t.length;++r)for(s=t[r],i=r+1;i<t.length;++i)l=t[i],[s,l]in n||e.push({sets:[s,l],size:0});return e}function mse(e,t,n){const r=(0,Bg.zerosM)(t.length,t.length),i=(0,Bg.zerosM)(t.length,t.length);return e.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],u=n[s.sets[1]],h=Math.sqrt(t[l].size/Math.PI),p=Math.sqrt(t[u].size/Math.PI),v=s5(h,p,s.size);r[l][u]=r[u][l]=v;let y=0;s.size+1e-10>=Math.min(t[l].size,t[u].size)?y=1:s.size<=1e-10&&(y=-1),i[l][u]=i[u][l]=y}),{distances:r,constraints:i}}function gse(e,t,n,r){let i=0,s;for(s=0;s<t.length;++s)t[s]=0;for(s=0;s<n.length;++s){const l=e[2*s],u=e[2*s+1];for(let h=s+1;h<n.length;++h){const p=e[2*h],v=e[2*h+1],y=n[s][h],b=r[s][h],T=(p-l)*(p-l)+(v-u)*(v-u),R=Math.sqrt(T),M=T-y*y;b>0&&R<=y||b<0&&R>=y||(i+=2*M*M,t[2*s]+=4*M*(l-p),t[2*s+1]+=4*M*(u-v),t[2*h]+=4*M*(p-l),t[2*h+1]+=4*M*(v-u))}}return i}function yse(e,t){let n=bse(e,t);const r=t.lossFunction||l5;if(e.length>=8){const i=_se(e,t),s=r(i,e),l=r(n,e);s+1e-8<l&&(n=i)}return n}function _se(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let s;for(s=0;s<e.length;++s){const M=e[s];M.sets.length==1&&(i[M.sets[0]]=r.length,r.push(M))}const l=mse(e,r,i);let u=l.distances;const h=l.constraints,p=(0,Bg.norm2)(u.map(Bg.norm2))/u.length;u=u.map(function(M){return M.map(function(I){return I/p})});const v=function(M,I){return gse(M,I,u,h)};let y,b;for(s=0;s<n;++s){const M=(0,Bg.zeros)(u.length*2).map(Math.random);b=(0,Bg.conjugateGradient)(v,M,t),(!y||b.fx<y.fx)&&(y=b)}const T=y.x,R={};for(s=0;s<r.length;++s){const M=r[s];R[M.sets[0]]={x:T[2*s]*p,y:T[2*s+1]*p,radius:Math.sqrt(M.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)(0,Bg.scale)(t.history[s].x,p);return R}function bse(e,t){const n=t&&t.lossFunction?t.lossFunction:l5,r={},i={};let s;for(let y=0;y<e.length;++y){const b=e[y];b.sets.length==1&&(s=b.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:b.size,radius:Math.sqrt(b.size/Math.PI)},i[s]=[])}e=e.filter(function(y){return y.sets.length==2});for(let y=0;y<e.length;++y){const b=e[y];let T=b.hasOwnProperty("weight")?b.weight:1;const R=b.sets[0],M=b.sets[1];b.size+Wz>=Math.min(r[R].size,r[M].size)&&(T=0),i[R].push({set:M,size:b.size,weight:T}),i[M].push({set:R,size:b.size,weight:T})}const l=[];for(s in i)if(i.hasOwnProperty(s)){let y=0;for(let b=0;b<i[s].length;++b)y+=i[s][b].size*i[s][b].weight;l.push({set:s,size:y})}function u(y,b){return b.size-y.size}l.sort(u);const h={};function p(y){return y.set in h}function v(y,b){r[b].x=y.x,r[b].y=y.y,h[b]=!0}v({x:0,y:0},l[0].set);for(let y=1;y<l.length;++y){const b=l[y].set,T=i[b].filter(p);if(s=r[b],T.sort(u),T.length===0)throw"ERROR: missing pairwise overlap information";const R=[];for(let N=0;N<T.length;++N){const U=r[T[N].set],H=s5(s.radius,U.radius,T[N].size);R.push({x:U.x+H,y:U.y}),R.push({x:U.x-H,y:U.y}),R.push({y:U.y+H,x:U.x}),R.push({y:U.y-H,x:U.x});for(let X=N+1;X<T.length;++X){const $=r[T[X].set],Q=s5(s.radius,$.radius,T[X].size),ce=Hz({x:U.x,y:U.y,radius:H},{x:$.x,y:$.y,radius:Q});for(let pe=0;pe<ce.length;++pe)R.push(ce[pe])}}let M=1e50,I=R[0];for(let N=0;N<R.length;++N){r[b].x=R[N].x,r[b].y=R[N].y;const U=n(r,e);U<M&&(M=U,I=R[N])}v(I,b)}return r}function l5(e,t){let n=0;function r(i){return i.map(function(s){return e[s]})}for(let i=0;i<t.length;++i){const s=t[i];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const h=e[s.sets[0]],p=e[s.sets[1]];l=Vz(h.radius,p.radius,YE(h,p))}else l=jz(r(s.sets));const u=s.hasOwnProperty("weight")?s.weight:1;n+=u*(l-s.size)*(l-s.size)}return n}function xse(e,t,n){n===null?e.sort(function(i,s){return s.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,s=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=s}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let s,l;const u=Math.cos(i),h=Math.sin(i);for(r=0;r<e.length;++r)s=e[r].x,l=e[r].y,e[r].x=u*s-h*l,e[r].y=h*s+u*l}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const s=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const l=(e[r].x+s*e[r].y)/(1+s*s);e[r].x=2*l-e[r].x,e[r].y=2*l*s-e[r].y}}}}function Ese(e){e.map(function(l){l.parent=l});function t(l){return l.parent!==l&&(l.parent=t(l.parent)),l.parent}function n(l,u){const h=t(l),p=t(u);h.parent=p}for(let l=0;l<e.length;++l)for(let u=l+1;u<e.length;++u){const h=e[l].radius+e[u].radius;distance(e[l],e[u])+1e-10<h&&n(e[u],e[l])}const r={};let i;for(let l=0;l<e.length;++l)i=t(e[l]).parent.setid,i in r||(r[i]=[]),r[i].push(e[l]);e.map(function(l){delete l.parent});const s=[];for(i in r)r.hasOwnProperty(i)&&s.push(r[i]);return s}function c5(e){const t=function(n){const r=Math.max.apply(null,e.map(function(s){return s[n]+s.radius})),i=Math.min.apply(null,e.map(function(s){return s[n]-s.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function Hpe(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,s;for(s in e)if(e.hasOwnProperty(s)){const b=e[s];r.push({x:b.x,y:b.y,radius:b.radius,setid:s})}const l=Ese(r);for(i=0;i<l.length;++i){xse(l[i],t,n);const b=c5(l[i]);l[i].size=(b.xRange.max-b.xRange.min)*(b.yRange.max-b.yRange.min),l[i].bounds=b}l.sort(function(b,T){return T.size-b.size}),r=l[0];let u=r.bounds;const h=(u.xRange.max-u.xRange.min)/50;function p(b,T,R){if(!b)return;const M=b.bounds;let I,N,U;T?I=u.xRange.max-M.xRange.min+h:(I=u.xRange.max-M.xRange.max,U=(M.xRange.max-M.xRange.min)/2-(u.xRange.max-u.xRange.min)/2,U<0&&(I+=U)),R?N=u.yRange.max-M.yRange.min+h:(N=u.yRange.max-M.yRange.max,U=(M.yRange.max-M.yRange.min)/2-(u.yRange.max-u.yRange.min)/2,U<0&&(N+=U));for(let H=0;H<b.length;++H)b[H].x+=I,b[H].y+=N,r.push(b[H])}let v=1;for(;v<l.length;)p(l[v],!0,!1),p(l[v+1],!1,!0),p(l[v+2],!0,!0),v+=3,u=c5(r);const y={};for(i=0;i<r.length;++i)y[r[i].setid]=r[i];return y}function Sse(e,t,n,r){const i=[],s=[];for(const M in e)e.hasOwnProperty(M)&&(s.push(M),i.push(e[M]));t-=2*r,n-=2*r;const l=c5(i),u=l.xRange,h=l.yRange;if(u.max==u.min||h.max==h.min)return console.log("not scaling solution: zero size detected"),e;const p=t/(u.max-u.min),v=n/(h.max-h.min),y=Math.min(v,p),b=(t-(u.max-u.min)*y)/2,T=(n-(h.max-h.min)*y)/2,R={};for(let M=0;M<i.length;++M){const I=i[M];R[s[M]]={radius:y*I.radius,x:r+b+(I.x-u.min)*y,y:r+T+(I.y-h.min)*y}}return R}function Tse(e,t,n){const r=[],i=e-n,s=t;return r.push("M",i,s),r.push("A",n,n,0,1,0,i+2*n,s),r.push("A",n,n,0,1,0,i,s),r.join(" ")}function wse(e){const t={};jz(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return Tse(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const s=n[i],l=s.circle.radius,u=s.width>l;r.push(`
A`,l,l,0,u?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const Gz=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[s,l]=r;return u=>{const h=u.map(y=>Object.assign(Object.assign({},y),{sets:y[t],size:y[n],[s]:y.sets.join("&")}));h.sort((y,b)=>y.sets.length-b.sets.length);const p=pse(h);let v;return h.map(y=>{const b=y[t],T=({width:R,height:M})=>{v=v||Sse(p,R,M,i);const I=b.map(U=>v[U]);let N=wse(I);return/[zZ]$/.test(N)||(N+=" Z"),N};return Object.assign(Object.assign({},y),{[l]:T})})}};Gz.props={};function Ase(){return{"data.venn":Gz,"mark.boxplot":Mz,"mark.gauge":Lz,"mark.wordCloud":mP,"mark.liquid":Uz}}function Cse(){return Object.assign(Object.assign(Object.assign(Object.assign({},kie()),jae()),Ase()),Dre())}var mC=function(){return mC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mC.apply(this,arguments)},Ose=lK(sK,mC(mC({},Cse()),ZK())),Rse="[object Boolean]";function Mse(e){return e===!0||e===!1||Wa(e)&&ue(e)==Rse}var u5=Mse,KE=function(){return KE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KE.apply(this,arguments)},Pse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Ise=["renderer"],Zz=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],f5="__transform__",Lse="__skipDelCustomKeys__",A1=function(e,t){return u5(t)?{type:e,available:t}:KE({type:e},t)},h5={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return A1("stackY",e)}},normalize:{target:"transform",value:function(e){return A1("normalizeY",e)}},percent:{target:"transform",value:function(e){return A1("normalizeY",e)}},group:{target:"transform",value:function(e){return A1("dodgeX",e)}},sort:{target:"transform",value:function(e){return A1("sortX",e)}},symmetry:{target:"transform",value:function(e){return A1("symmetryY",e)}},diff:{target:"transform",value:function(e){return A1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return u5(e)?{connect:e}:e}}},d5=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],gC=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:d5},{key:"point",type:"point",extend_keys:d5},{key:"area",type:"area",extend_keys:d5}],Dse=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,s=i===void 0?!0:i,l=Pse(n,["available"]);if(s)e[t].push(KE((r={},r[f5]=!0,r),l));else{var u=e[t].indexOf(function(h){return h.type===n.type});u!==-1&&e[t].splice(u,1)}}},{key:"labels",callback:function(e,t,n){var r;if(!n||Ct(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(KE((r={},r[f5]=!0,r),n))}}],p5=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Nse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yC=function(){return yC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yC.apply(this,arguments)},Bse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Fse=function(e){Nse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Bse(n,["style"]);return e.call(this,yC({style:yC({fill:"#eee"},r)},i))||this}return t}(K1),kse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_C=function(){return _C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_C.apply(this,arguments)},Use=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Xz=function(e){kse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Use(n,["style"]);return e.call(this,_C({style:_C({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(mh);function zse(e,t,n){(n!==void 0&&!ht(e[t],n)||n===void 0&&!(t in e))&&on(e,t,n)}var v5=zse;function jse(e){return function(t,n,r){for(var i=-1,s=Object(t),l=r(t),u=l.length;u--;){var h=l[e?u:++i];if(n(s[h],h,s)===!1)break}return t}}var Vse=jse,Hse=Vse(),$z=Hse;function Wse(e){return Wa(e)&&Jl(e)}var Gse=Wse,Zse="[object Object]",Xse=Function.prototype,$se=Object.prototype,Yz=Xse.toString,Yse=$se.hasOwnProperty,Kse=Yz.call(Object);function qse(e){if(!Wa(e)||ue(e)!=Zse)return!1;var t=Hf(e);if(t===null)return!0;var n=Yse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Yz.call(n)==Kse}var m5=qse;function Qse(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var g5=Qse;function Jse(e){return Fr(e,Jt(e))}var ele=Jse;function tle(e,t,n,r,i,s,l){var u=g5(e,n),h=g5(t,n),p=l.get(h);if(p){v5(e,n,p);return}var v=s?s(u,h,n+"",e,t,l):void 0,y=v===void 0;if(y){var b=Ct(h),T=!b&&Ff(h),R=!b&&!T&&S0(h);v=h,b||T||R?Ct(u)?v=u:Gse(u)?v=Ss(u):T?(y=!1,v=Pc(h,!0)):R?(y=!1,v=jd(h,!0)):v=[]:m5(h)||_f(h)?(v=u,_f(u)?v=ele(u):(!le(u)||Gn(u))&&(v=fv(h))):y=!1}y&&(l.set(h,v),i(v,h,r,s,l),l.delete(h)),v5(e,n,v)}var nle=tle;function Kz(e,t,n,r,i){e!==t&&$z(t,function(s,l){if(i||(i=new Oc),le(s))nle(e,t,l,n,Kz,r,i);else{var u=r?r(g5(e,l),s,l+"",e,t,i):void 0;u===void 0&&(u=s),v5(e,l,u)}},Jt)}var rle=Kz;function ile(e){return e}var y5=ile;function ole(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var ale=ole,qz=Math.max;function sle(e,t,n){return t=qz(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=qz(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(l),ale(e,this,u)}}var Qz=sle;function lle(e){return function(){return e}}var cle=lle,ule=vn?function(e,t){return vn(e,"toString",{configurable:!0,enumerable:!1,value:cle(t),writable:!0})}:y5,fle=ule,hle=800,dle=16,ple=Date.now;function vle(e){var t=0,n=0;return function(){var r=ple(),i=dle-(r-n);if(n=r,i>0){if(++t>=hle)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var mle=vle,gle=mle(fle),Jz=gle;function yle(e,t){return Jz(Qz(e,t,y5),e+"")}var _le=yle;function ble(e,t,n){if(!le(n))return!1;var r=typeof t;return(r=="number"?Jl(n)&&kf(t,n.length):r=="string"&&t in n)?ht(n[t],e):!1}var xle=ble;function Ele(e){return _le(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,l&&xle(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,s)}return t})}var ej=Ele,Sle=ej(function(e,t,n,r){rle(e,t,n,r)}),Tle=Sle,tj=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},wle=function(e,t){if(Ct(t))return t},Ky=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Tle.apply(void 0,tj(tj([],e,!1),[wle],!1))},Ale=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nj=function(e){Ale(t,e);function t(n,r,i){var s=e.call(this,{style:Ky(i,r)})||this;return s.chart=n,s}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Ky({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(s){var l=s.getBBox(),u=l.x,h=l.y,p=l.width,v=l.height,y=s.__data__;i.push({bbox:l,x:u,y:h,width:p,height:v,key:y.key,data:y})}),i},t.prototype.bindEvents=function(n,r){},t}(Y1),Cle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bC=function(){return bC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bC.apply(this,arguments)},Ole=function(e){Cle(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],s=i.x,l=i.y,u=i.height,h=i.width,p=i.data,v=["items",0,"value"],y=di(p,v),b=n?r[1].y-l-u:r[1].x-s-h,T=[],R=this.attributes,M=R.size,I=M===void 0?40:M,N=R.arrowSize,U=N===void 0?20:N,H=R.spacing,X=H===void 0?4:H;return r.forEach(function($,Q){if(Q>0){var ce=$.x,pe=$.y,Re=$.height,je=$.width,Ke=$.data,ft=$.key,Ye=di(Ke,v),it=I/2;if(n){var at=ce+je/2,vt=pe;T.push({points:[[at+it,vt-b+X],[at+it,vt-U-X],[at,vt-X],[at-it,vt-U-X],[at-it,vt-b+X]],center:[at,vt-b/2-X],width:b,value:[y,Ye],key:ft})}else{var at=ce,vt=pe+Re/2;T.push({points:[[ce-b+X,vt-it],[ce-U-X,vt-it],[at-X,vt],[ce-U-X,vt+it],[ce-b+X,vt+it]],center:[at-b/2-X,vt],width:b,value:[y,Ye],key:ft})}y=Ye}}),T},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=di(n,"options.transformations"),i="horizontal";r.forEach(function(s){s.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,s=i.style,l=i.text,u=l.style,h=l.formatter;r.forEach(function(p){var v=p.points,y=p.center,b=p.value,T=p.key,R=b[0],M=b[1],I=y[0],N=y[1],U=new Fse({style:bC({points:v,fill:"#eee"},s),id:"polygon-".concat(T)}),H=new Xz({style:bC({x:I,y:N,text:Gn(h)?h(R,M):(M/R*100).toFixed(2)+"%"},u),id:"text-".concat(T)});n.appendChild(U),n.appendChild(H)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var s=i.points,l=i.center,u=i.key,h=l[0],p=l[1],v=n.getElementById("polygon-".concat(u)),y=n.getElementById("text-".concat(u));v.setAttribute("points",s),y.setAttribute("x",h),y.setAttribute("y",p)})},t.tag="ConversionTag",t}(nj),Rle=1,Mle=2;function Ple(e,t,n,r){var i=n.length,s=i,l=!r;if(e==null)return!s;for(e=Object(e);i--;){var u=n[i];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){u=n[i];var h=u[0],p=e[h],v=u[1];if(l&&u[2]){if(p===void 0&&!(h in e))return!1}else{var y=new Oc;if(r)var b=r(p,v,h,e,t,y);if(!(b===void 0?Ve(v,p,Rle|Mle,r,y):b))return!1}}return!0}var Ile=Ple;function Lle(e){return e===e&&!le(e)}var rj=Lle;function Dle(e){for(var t=Jc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,rj(i)]}return t}var Nle=Dle;function Ble(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ij=Ble;function Fle(e){var t=Nle(e);return t.length==1&&t[0][2]?ij(t[0][0],t[0][1]):function(n){return n===e||Ile(n,e,t)}}var kle=Fle;function Ule(e,t){return e!=null&&t in Object(e)}var zle=Ule;function jle(e,t,n){t=yi(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var l=eo(t[r]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Hp(i)&&kf(l,i)&&(Ct(e)||_f(e)))}var Vle=jle;function Hle(e,t){return e!=null&&Vle(e,t,zle)}var oj=Hle,Wle=1,Gle=2;function Zle(e,t){return Qm(e)&&rj(t)?ij(eo(e),t):function(n){var r=di(n,e);return r===void 0&&r===t?oj(n,e):Ve(t,r,Wle|Gle)}}var Xle=Zle;function $le(e){return function(t){return t==null?void 0:t[e]}}var Yle=$le;function Kle(e){return function(t){return to(t,e)}}var qle=Kle;function Qle(e){return Qm(e)?Yle(eo(e)):qle(e)}var Jle=Qle;function ece(e){return typeof e=="function"?e:e==null?y5:typeof e=="object"?Ct(e)?Xle(e[0],e[1]):kle(e):Jle(e)}var _5=ece;function tce(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var nce=tce;function rce(e){return e!==e}var ice=rce;function oce(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var ace=oce;function sce(e,t,n){return t===t?ace(e,t,n):nce(e,ice,n)}var aj=sce;function lce(e,t){var n=e==null?0:e.length;return!!n&&aj(e,t,0)>-1}var cce=lce;function uce(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var fce=uce;function hce(){}var sj=hce,dce=1/0,pce=Au&&1/Pl(new Au([,-0]))[1]==dce?function(e){return new Au(e)}:sj,vce=pce,mce=200;function gce(e,t,n){var r=-1,i=cce,s=e.length,l=!0,u=[],h=u;if(n)l=!1,i=fce;else if(s>=mce){var p=t?null:vce(e);if(p)return Pl(p);l=!1,i=Df,h=new Xh}else h=t?[]:u;e:for(;++r<s;){var v=e[r],y=t?t(v):v;if(v=n||v!==0?v:0,l&&y===y){for(var b=h.length;b--;)if(h[b]===y)continue e;t&&h.push(y),u.push(v)}else i(h,y,n)||(h!==u&&h.push(y),u.push(v))}return u}var yce=gce;function _ce(e,t){return e&&e.length?yce(e,_5(t,2)):[]}var b5=_ce;function bce(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var l=e[i];t(r,l,n(l),e)}return r}var xce=bce;function Ece(e,t){return e&&$z(e,t,Jc)}var Sce=Ece;function Tce(e,t){return function(n,r){if(n==null)return n;if(!Jl(n))return e(n,r);for(var i=n.length,s=t?i:-1,l=Object(n);(t?s--:++s<i)&&r(l[s],s,l)!==!1;);return n}}var wce=Tce,Ace=wce(Sce),lj=Ace;function Cce(e,t,n,r){return lj(e,function(i,s,l){t(r,i,n(i),l)}),r}var Oce=Cce;function Rce(e,t){return function(n,r){var i=Ct(n)?xce:Oce,s=t?t():{};return i(n,e,_5(r,2),s)}}var Mce=Rce,Pce=Object.prototype,Ice=Pce.hasOwnProperty,Lce=Mce(function(e,t,n){Ice.call(e,n)?e[n].push(t):on(e,n,[t])}),cj=Lce,x5=32,uj=16,fj=48,Dce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qE=function(){return qE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qE.apply(this,arguments)},Nce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Bce=function(e){Dce(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),s=r?b5(i,"x"):b5(i,"y"),l=["title"],u=[],h=this.chart.getContext().views,p=di(h,[0,"layout"]),v=p.width,y=p.height;return s.forEach(function(b){var T=b.x,R=b.y,M=b.height,I=b.width,N=b.data,U=b.key,H=di(N,l);r?u.push({x:T+I/2,y,text:H,key:U}):u.push({x:v,y:R+M/2,text:H,key:U})}),b5(u,"text").length!==u.length&&(u=Object.values(cj(u,"text")).map(function(b){var T,R=b.reduce(function(M,I){return M+(r?I.x:I.y)},0);return qE(qE({},b[0]),(T={},T[r?"x":"y"]=R/b.length,T))})),u},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(s){i.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,s=i.layout,l=i.labelFormatter,u=Nce(i,["layout","labelFormatter"]);r.forEach(function(h){var p=h.x,v=h.y,y=h.text,b=h.key,T=new Xz({style:qE({x:p,y:v,text:Gn(l)?l(y):y,wordWrap:!0,wordWrapWidth:s==="horizontal"?x5*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(u)),id:"text-".concat(b)});n.appendChild(T)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var s=i.x,l=i.y,u=i.key,h=n.getElementById("text-".concat(u));h.setAttribute("x",s),h.setAttribute("y",l)})},t.tag="BidirectionalBarAxisText",t}(nj),Fce={ConversionTag:Ole,BidirectionalBarAxisText:Bce},kce=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;p5.forEach(function(n){var r,i=n.key,s=n.shape,l=t.config[i];if(l){var u=new Fce[s](t.chart,l),h=t.chart.getContext().canvas;h.appendChild(u),t.container.set(i,u)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&p5.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function Uce(e,t,n,r){if(!le(e))return e;t=yi(t,e);for(var i=-1,s=t.length,l=s-1,u=e;u!=null&&++i<s;){var h=eo(t[i]),p=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var v=u[h];p=r?r(v,h,u):void 0,p===void 0&&(p=le(v)?v:kf(t[i+1])?[]:{})}Mr(u,h,p),u=u[h]}return e}var hj=Uce;function zce(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var l=t[r],u=to(e,l);n(u,l)&&hj(s,yi(l,e),u)}return s}var jce=zce;function Vce(e,t){return jce(e,t,function(n,r){return oj(e,r)})}var Hce=Vce,dj=ln?ln.isConcatSpreadable:void 0;function Wce(e){return Ct(e)||_f(e)||!!(dj&&e&&e[dj])}var Gce=Wce;function pj(e,t,n,r,i){var s=-1,l=e.length;for(n||(n=Gce),i||(i=[]);++s<l;){var u=e[s];t>0&&n(u)?t>1?pj(u,t-1,n,r,i):Di(i,u):r||(i[i.length]=u)}return i}var Zce=pj;function Xce(e){var t=e==null?0:e.length;return t?Zce(e,1):[]}var $ce=Xce;function Yce(e){return Jz(Qz(e,void 0,$ce),e+"")}var E5=Yce,Kce=E5(function(e,t){return e==null?{}:Hce(e,t)}),vj=Kce,qce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hx=function(){return hx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hx.apply(this,arguments)},mj="data-chart-source-type",Rl=function(e){qce(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return hx(hx({},vj(this.options,Ise)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[Lse]?hx(hx({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new Ose(this.getChartOptions()),this.container.setAttribute(mj,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new kce(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Ky({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(mj)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(_l.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(ko),Qce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jce=function(e){Qce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Rl);function eue(){}var S5=eue;function xC(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}xC.prototype=uv(S5.prototype),xC.prototype.constructor=xC;var QE=xC,tue=Vu&&new Vu,gj=tue,nue=gj?function(e){return gj.get(e)}:sj,yj=nue,rue={},_j=rue,iue=Object.prototype,oue=iue.hasOwnProperty;function aue(e){for(var t=e.name+"",n=_j[t],r=oue.call(_j,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}var EC=aue,sue=4294967295;function SC(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=sue,this.__views__=[]}SC.prototype=uv(S5.prototype),SC.prototype.constructor=SC;var T5=SC;function lue(e){if(e instanceof T5)return e.clone();var t=new QE(e.__wrapped__,e.__chain__);return t.__actions__=Ss(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var cue=lue,uue=Object.prototype,fue=uue.hasOwnProperty;function TC(e){if(Wa(e)&&!Ct(e)&&!(e instanceof T5)){if(e instanceof QE)return e;if(fue.call(e,"__wrapped__"))return cue(e)}return new QE(e)}TC.prototype=S5.prototype,TC.prototype.constructor=TC;var hue=TC;function due(e){var t=EC(e),n=hue[t];if(typeof n!="function"||!(t in T5.prototype))return!1;if(e===n)return!0;var r=yj(n);return!!r&&e===r[0]}var bj=due,pue="Expected a function",vue=8,mue=32,gue=128,yue=256;function _ue(e){return E5(function(t){var n=t.length,r=n,i=QE.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new TypeError(pue);if(i&&!l&&EC(s)=="wrapper")var l=new QE([],!0)}for(r=l?r:n;++r<n;){s=t[r];var u=EC(s),h=u=="wrapper"?yj(s):void 0;h&&bj(h[0])&&h[1]==(gue|vue|mue|yue)&&!h[4].length&&h[9]==1?l=l[EC(h[0])].apply(l,h[3]):l=s.length==1&&bj(s)?l[u]():l.thru(s)}return function(){var p=arguments,v=p[0];if(l&&p.length==1&&Ct(v))return l.plant(v).value();for(var y=0,b=n?t[y].apply(this,p):v;++y<n;)b=t[y].call(this,b);return b}})}var bue=_ue,xue=bue(),jl=xue,Eue=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(s){Ct(i[s])&&s!=="data"&&(i[s]=i[s].filter(function(l){return!l[f5]}))})}),t};function Sue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Tue=Sue;function wue(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var Aue=wue;function Cue(e,t){return t.length<2?e:to(e,Aue(t,0,-1))}var Oue=Cue;function Rue(e,t){return t=yi(t,e),e=Oue(e,t),e==null||delete e[eo(Tue(t))]}var Mue=Rue;function Pue(e){return m5(e)?void 0:e}var Iue=Pue,Lue=1,Due=2,Nue=4,Bue=E5(function(e,t){var n={};if(e==null)return n;var r=!1;t=ci(t,function(s){return s=yi(s,e),r||(r=s.length>1),s}),Fr(e,ed(e),n),r&&(n=Wg(n,Lue|Due|Nue,Iue));for(var i=t.length;i--;)Mue(n,t[i]);return n}),w5=Bue;function Fue(e){return e===void 0}var kue=Fue;function Uue(e,t,n){return e==null?e:hj(e,t,n)}var La=Uue,xj=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},zue=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(h5).concat(gC.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(s){r.includes(s)&&delete i[s]})}),Object.keys(e).forEach(function(i){xj(xj([],Zz,!0),p5.map(function(s){return s.key}),!0).includes(i)||delete e[i]}),e},ql=function(e){var t=Eue(e),n=t.children,r=n===void 0?[]:n,i=w5(t,[].concat(Zz,gC.map(function(p){return p.key}))),s=function(p){var v;return(v=Dse.find(function(y){return y.key===p}))===null||v===void 0?void 0:v.callback},l=function(p,v,y){var b=s(v);b?b(p,v,y):p[v]=Ky({},p[v],y)},u=function(p){Object.keys(p).forEach(function(v){if(p[v]){var y=gC.find(function(R){return R.key===v});if(y){var b=y.type,T=y.extend_keys;b?r.push(h(Ky({},vj(p,T),{type:b},p[v]))):Ct(p[v])&&p[v].forEach(function(R){r.push(h(R))})}}})},h=function(p){return u(p),Object.keys(h5).forEach(function(v){var y=h5[v];if(!kue(p[v]))if(le(y)){var b=y.value,T=y.target,R=b(p[v]);l(p,T,R)}else La(p,y,p[v])}),p};return r.forEach(function(p){var v=Ky({},i,p);h(Ky(p,v))}),u(t),zue(t),e},A5=function(){return A5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},A5.apply(this,arguments)};function jue(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var s=gC.map(function(u){return u.type}).filter(function(u){return!!u}),l=!1;return s.forEach(function(u){t[u]&&(l=!0,La(t,[u,"stack"],A5({y1:"y"},typeof n=="object"?n:{})))}),l&&!u5(r)&&!r&&La(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Bu(e){return jl(jue)(e)}function Vue(e){return jl(Bu,ql)(e)}var Hue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wue=function(e){Hue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vue},t}(Rl),dx=function(){return dx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dx.apply(this,arguments)};function Ej(e){var t=function(n){var r=n.options;di(r,"children.length")>1&&La(r,"children",[{type:"interval"}]);var i=r.scale,s=r.markBackground,l=r.data,u=r.children,h=r.yField,p=di(i,"y.domain",[]);if(s&&p.length&&Ct(l)){var v="domainMax",y=l.map(function(b){var T;return dx(dx({originData:dx({},b)},w5(b,h)),(T={},T[v]=p[p.length-1],T))});u.unshift(dx({type:"interval",data:y,yField:v,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return jl(t,Bu,ql)(e)}var Gue=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,u=t.fillOpacity,h=u===void 0?1:u,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[0],R=r[1],M=r[2],I=r[3],N=(R[1]-T[1])/2,U=n.document,H=U.createElement("g",{}),X=U.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],[M[0]-b,T[1]+N],I],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),$=U.createElement("polygon",{style:{points:[[T[0]-b,T[1]+N],R,M,[M[0]-b,T[1]+N]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),Q=U.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],R,[T[0]+b,T[1]+N]],fill:s,fillOpacity:h-.2}});return H.appendChild(X),H.appendChild($),H.appendChild(Q),H}};qs("shape.interval.bar25D",e)},Zue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Gue();var Xue=function(e){Zue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ej},t}(Rl),$ue=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,u=t.fillOpacity,h=u===void 0?1:u,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[1][0]-r[0][0],R=T/2+r[0][0],M=n.document,I=M.createElement("g",{}),N=M.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[R,r[1][1]+b],[R,r[3][1]+b],[r[3][0],r[3][1]]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),U=M.createElement("polygon",{style:{points:[[R,r[1][1]+b],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[R,r[2][1]+b]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),H=M.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[R,r[1][1]-b],[r[1][0],r[1][1]],[R,r[1][1]+b]],fill:s,fillOpacity:h-.2}});return I.appendChild(U),I.appendChild(N),I.appendChild(H),I}};qs("shape.interval.column25D",e)},Yue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();$ue();var Kue=function(e){Yue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ej},t}(Rl);function que(e){var t=function(r){var i=r.options,s=i.children,l=s===void 0?[]:s,u=i.legend;return u&&l.forEach(function(h){if(!di(h,"colorField")){var p=di(h,"yField");La(h,"colorField",function(){return p})}}),r},n=function(r){var i=r.options,s=i.annotations,l=s===void 0?[]:s,u=i.children,h=u===void 0?[]:u,p=i.scale,v=!1;return di(p,"y.key")||h.forEach(function(y,b){if(!di(y,"scale.y.key")){var T="child".concat(b,"Scale");La(y,"scale.y.key",T);var R=y.annotations,M=R===void 0?[]:R;M.length>0&&(La(y,"scale.y.independent",!1),M.forEach(function(I){La(I,"scale.y.key",T)})),!v&&l.length>0&&di(y,"scale.y.independent")===void 0&&(v=!0,La(y,"scale.y.independent",!1),l.forEach(function(I){La(I,"scale.y.key",T)}))}}),r};return jl(t,n,Bu,ql)(e)}var Que=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sj=function(e){Que(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return que},t}(Rl);function Jue(e){var t=function(s){var l=s.options,u=l.xField,h=l.colorField;return h||La(l,"colorField",u),s},n=function(s){var l=s.options,u=l.compareField,h=l.transform,p=l.isTransposed,v=p===void 0?!0:p,y=l.coordinate;return h||(u?La(l,"transform",[]):La(l,"transform",[{type:"symmetryY"}])),!y&&v&&La(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,u=l.compareField,h=l.seriesField,p=l.data,v=l.children,y=l.yField,b=l.isTransposed,T=b===void 0?!0:b;if(u||h){var R=Object.values(cj(p,function(M){return M[u||h]}));v[0].data=R[0],v.push({type:"interval",data:R[1],yField:function(M){return-M[y]}}),delete l.compareField,delete l.data}return h&&(La(l,"type","spaceFlex"),La(l,"ratio",[1,1]),La(l,"direction",T?"row":"col"),delete l.seriesField),s},i=function(s){var l=s.options,u=l.tooltip,h=l.xField,p=l.yField;return u||La(l,"tooltip",{title:!1,items:[function(v){return{name:v[h],value:v[p]}}]}),s};return jl(t,n,r,i,Bu,ql)(e)}var efe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tfe=function(e){efe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jue},t}(Rl);function nfe(e){return jl(Bu,ql)(e)}var rfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ife=function(e){rfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nfe},t}(Rl);function JE(e){switch(typeof e){case"function":return e;case"string":return function(t){return di(t,[e])};default:return function(){return e}}}var qy=function(){return qy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qy.apply(this,arguments)};function ofe(e){var t=function(n){var r=n.options,i=r.angleField,s=r.data,l=r.label,u=r.tooltip,h=r.colorField,p=JE(h);if(Ct(s)){var v=s.reduce(function(b,T){return b+T[i]},0);if(v===0){var y=s.map(function(b){var T;return qy(qy({},b),(T={},T[i]=1,T))});La(r,"data",y),l&&La(r,"label",qy(qy({},l),{formatter:function(){return 0}})),u!==!1&&La(r,"tooltip",qy(qy({},u),{items:[function(b,T,R){return{name:p(b,T,R),value:0}}]}))}}return n};return jl(t,ql)(e)}var afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sfe=function(e){afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ofe},t}(Rl);function lfe(e){return jl(Bu,ql)(e)}var cfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ufe=function(e){cfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lfe},t}(Rl);function ffe(e){var t=function(n){return La(n,"options.coordinate",{type:di(n,"options.coordinateType","polar")}),n};return jl(t,ql)(e)}var hfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dfe=function(e){hfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ffe},t}(Rl);function pfe(e,t){var n=-1,r=Jl(e)?Array(e.length):[];return lj(e,function(i,s,l){r[++n]=t(i,s,l)}),r}var vfe=pfe;function mfe(e,t){var n=Ct(e)?ci:vfe;return n(e,_5(t,3))}var px=mfe,Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fg.apply(this,arguments)},gfe="__stock-range__",yfe="trend",_fe="up",bfe="down";function xfe(e){var t=function(r){var i=r.options,s=i.data,l=i.yField;return r.options.data=px(s,function(u){var h=u&&Fg({},u);if(Array.isArray(l)&&h){var p=l[0],v=l[1],y=l[2],b=l[3];h[yfe]=h[p]<=h[v]?_fe:bfe,h[gfe]=[h[p],h[v],h[y],h[b]]}return h}),r},n=function(r){var i=r.options,s=i.xField,l=i.yField,u=i.fallingFill,h=i.risingFill,p=l[0],v=l[1],y=l[2],b=l[3],T=JE(s);return r.options.children=px(r.options.children,function(R,M){var I=M===0;return Fg(Fg({},R),{tooltip:{title:function(N,U,H){var X=T(N,U,H);return X instanceof Date?X.toLocaleString():X},items:[{field:y},{field:b},{field:p},{field:v}]},encode:Fg(Fg({},R.encode||{}),{y:I?[y,b]:[p,v],color:function(N){return Math.sign(N[v]-N[p])}}),style:Fg(Fg({},R.style||{}),{lineWidth:I?1:10})})}),delete i.yField,r.options.legend={color:!1},u&&La(r,"options.scale.color.range[0]",u),h&&La(r,"options.scale.color.range[2]",h),r};return jl(t,n,ql)(e)}var Efe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sfe=["#26a69a","#999999","#ef5350"],Tfe=function(e){Efe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:Sfe},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return xfe},t}(Rl);function wfe(e){return jl(Bu,ql)(e)}var Afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cfe=function(e){Afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wfe},t}(Rl);function Ofe(e){return jl(Bu,ql)(e)}var Rfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mfe=function(e){Rfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ofe},t}(Rl);function Pfe(e){return jl(Bu,ql)(e)}var Ife=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lfe=function(e){Ife(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Pfe},t}(Rl),C5=function(){return C5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},C5.apply(this,arguments)};function Dfe(e){var t=function(n){var r=n.options,i=r.percent,s=r.color,l=s===void 0?[]:s;if(!i)return n;var u={scale:{color:{range:l.length?l:[]}},data:[1,i]};return Object.assign(r,C5({},u)),n};return jl(t,Bu,ql)(e)}var Nfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bfe=function(e){Nfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Dfe},t}(Rl),O5=function(){return O5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},O5.apply(this,arguments)};function Ffe(e){var t=function(r){var i=r.options,s=i.radius,l=s===void 0?.8:s;return La(r,"options.coordinate.innerRadius",l),r},n=function(r){var i=r.options,s=i.percent,l=i.color,u=l===void 0?[]:l;if(!s)return r;var h={scale:{color:{range:u.length?u:[]}},data:[1,s]};return Object.assign(i,O5({},h)),r};return jl(t,n,Bu,ql)(e)}var kfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ufe=function(e){kfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ffe},t}(Rl);function zfe(e){return jl(ql)(e)}var jfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vfe=function(e){jfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zfe},t}(Rl),R5="__start__",vx="__end__",M5="__waterfall_value__",P5=function(){return P5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P5.apply(this,arguments)},Hfe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function Wfe(e){var t=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,u=i.yField;return l.length&&(l.reduce(function(h,p,v){var y,b=JE(u),T=b(p,v,l);if(v===0||p.isTotal)p[R5]=0,p[vx]=T,p[M5]=T;else{var R=(y=h[vx])!==null&&y!==void 0?y:b(h,v,l);p[R5]=R,p[vx]=R+T,p[M5]=h[vx]}return p},[]),Object.assign(i,{yField:[R5,vx]})),r},n=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,u=i.xField,h=i.children,p=i.linkStyle,v=Hfe([],l,!0);return v.reduce(function(y,b,T){return T>0&&(b.x1=y[u],b.x2=b[u],b.y1=y[vx]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:P5({stroke:"#697474"},p),label:!1,tooltip:!1}),r};return jl(t,n,Bu,ql)(e)}var Gfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zfe=function(e){Gfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:M5,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Wfe},t}(Rl),Xfe="[object Number]";function $fe(e){return typeof e=="number"||Wa(e)&&ue(e)==Xfe}var mx=$fe,Yfe=Object.prototype,Kfe=Yfe.hasOwnProperty,qfe=ej(function(e,t){if(pu(t)||Jl(t)){Fr(t,Jc(t),e);return}for(var n in t)Kfe.call(t,n)&&Mr(e,n,t[n])}),Tj=qfe,Qfe=/\s/;function Jfe(e){for(var t=e.length;t--&&Qfe.test(e.charAt(t)););return t}var ehe=Jfe,the=/^\s+/;function nhe(e){return e&&e.slice(0,ehe(e)+1).replace(the,"")}var rhe=nhe,wj=NaN,ihe=/^[-+]0x[0-9a-f]+$/i,ohe=/^0b[01]+$/i,ahe=/^0o[0-7]+$/i,she=parseInt;function lhe(e){if(typeof e=="number")return e;if(xp(e))return wj;if(le(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=le(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rhe(e);var n=ohe.test(e);return n||ahe.test(e)?she(e.slice(2),n?2:8):ihe.test(e)?wj:+e}var Aj=lhe,Cj=1/0,che=17976931348623157e292;function uhe(e){if(!e)return e===0?e:0;if(e=Aj(e),e===Cj||e===-Cj){var t=e<0?-1:1;return t*che}return e===e?e:0}var fhe=uhe;function hhe(e){var t=fhe(e),n=t%1;return t===t?n?t-n:t:0}var Oj=hhe,dhe=Me.isFinite,phe=Math.min;function vhe(e){var t=Math[e];return function(n,r){if(n=Aj(n),r=r==null?0:phe(Oj(r),292),r&&dhe(n)){var i=(ur(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(ur(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var mhe=vhe,ghe=mhe("ceil"),yhe=ghe,_he=NaN;function bhe(e){return typeof e=="number"?e:xp(e)?_he:+e}var Rj=bhe;function xhe(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=pi(n),r=pi(r)):(n=Rj(n),r=Rj(r)),i=e(n,r)}return i}}var Ehe=xhe,She=Ehe(function(e,t){return e/t},1),The=She;function whe(e){var t=function(n){var r=n.options,i=r.data,s=r.binNumber,l=r.binWidth,u=r.children,h=r.channel,p=h===void 0?"count":h,v=di(u,"[0].transform[0]",{});return mx(l)?(Tj(v,{thresholds:yhe(The(i.length,l)),y:p}),n):(mx(s)&&Tj(v,{thresholds:s,y:p}),n)};return jl(t,Bu,ql)(e)}var Ahe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Che=function(e){Ahe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return whe},t}(Rl);function Ohe(e){var t=function(r){var i=r.options,s=i.tooltip,l=s===void 0?{}:s,u=i.colorField,h=i.sizeField;return l&&!l.field&&(l.field=u||h),r},n=function(r){var i=r.options,s=i.mark,l=i.children;return s&&(l[0].type=s),r};return jl(t,n,Bu,ql)(e)}var Rhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mhe=function(e){Rhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ohe},t}(Rl);function Phe(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return jl(t,Bu,ql)(e)}var Ihe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lhe=function(e){Ihe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Phe},t}(Rl);function Dhe(e){var t=function(n){var r=n.options,i=r.data,s=[{type:"custom",callback:function(u){return{links:u}}}];if(Ct(i))i.length>0?La(r,"data",{value:i,transform:s}):delete r.children;else if(di(i,"type")==="fetch"&&di(i,"value")){var l=di(i,"transform");Ct(l)?La(i,"transform",l.concat(s)):La(i,"transform",s)}return n};return jl(t,Bu,ql)(e)}var Nhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bhe=function(e){Nhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Dhe},t}(Rl);function Fhe(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function khe(e){Fhe(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function Uhe(e){return e==null}var zhe=Uhe,jhe="[object String]";function Vhe(e){return typeof e=="string"||!Ct(e)&&Wa(e)&&ue(e)==jhe}var Mj=Vhe;function Hhe(e,t){return ci(t,function(n){return e[n]})}var Whe=Hhe;function Ghe(e){return e==null?[]:Whe(e,Jc(e))}var Zhe=Ghe,Xhe=Math.max;function $he(e,t,n,r){e=Jl(e)?e:Zhe(e),n=n&&!r?Oj(n):0;var i=e.length;return n<0&&(n=Xhe(i+n,0)),Mj(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&aj(e,t,n)>-1}var Yhe=$he,Gv=function(){return Gv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gv.apply(this,arguments)},wC=["#f0efff","#5B8FF9","#3D76DD"];function I5(e,t,n,r){r===void 0&&(r=!0);var i=0,s=!1,l=px(e,function(u){var h,p,v=di(u,[t]);if(zhe(v))return[];if(Mj(v)){var y=Number(v);return isNaN(y)?[]:(h={},h[n]=u[n],h[t]=y,h)}return Ct(v)?(s=!0,i=Math.max(i,v.length),px(r?v.sort(function(b,T){return T-b}):v,function(b,T){var R;return R={},R[n]=u[n],R[t]=b,R.index=T,R})):(i=Math.max(1,i),p={},p[n]=u[n],p[t]=v,p)}).flat();return s?[l.map(function(u){return Gv({index:0},u)}),i]:[l,i]}function L5(e,t){return new Array(e).fill("").map(function(n,r){return Ct(t)?t[r%t.length]:t})}function Khe(e){var t=function(i){var s=i.options,l=s.color,u=s.rangeField,h=u===void 0?"ranges":u,p=s.measureField,v=p===void 0?"measures":p,y=s.targetField,b=y===void 0?"targets":y,T=s.xField,R=T===void 0?"title":T,M=s.mapField,I=s.data,N=I5(I,h,R),U=N[0],H=N[1],X=I5(I,v,R,!1),$=X[0],Q=X[1],ce=I5(I,b,R,!1),pe=ce[0],Re=ce[1],je=di(l,[h],wC[0]),Ke=di(l,[v],wC[1]),ft=di(l,[b],wC[2]),Ye=[L5(H,je),L5(Q,Ke),L5(Re,ft)].flat();return i.options.children=px(i.options.children,function(it,at){var vt=[U,$,pe][at],Vt=[h,v,b][at];return Gv(Gv({},it),{data:vt,encode:Gv(Gv({},it.encode||{}),{x:R,y:Vt,color:function(At){var Ut=At.index,Sn=mx(Ut)?"".concat(Vt,"_").concat(Ut):Vt;return M?di(M,[Vt,Ut],Sn):Sn}}),style:Gv(Gv({},it.style||{}),{zIndex:function(At){return-At[Vt]}}),labels:at!==0?px(it.labels,function(At){return Gv(Gv({},At),{text:Vt})}):void 0})}),i.options.scale.color.range=Ye,i.options.legend.color.itemMarker=function(it){return M&&Yhe(M==null?void 0:M[b],it)||(it==null?void 0:it.replace(/\_\d$/,""))===b?"line":"square"},i},n=function(i){var s=i.options.layout,l=s===void 0?"horizontal":s;return l!=="horizontal"&&La(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var s=i.options,l=s.range,u=l===void 0?{}:l,h=s.measure,p=h===void 0?{}:h,v=s.target,y=v===void 0?{}:v,b=s.children;return i.options.children=[u,p,y].map(function(T,R){return Ky(b[R],T)}),i};return jl(t,n,r,khe,ql)(e)}var qhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qhe=function(e){qhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:wC}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Khe},t}(Rl);function Jhe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return jl(t,Bu,ql)(e)}var ede=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tde=function(e){ede(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jhe},t}(Rl);function nde(e){var t=function(n){var r=n.options.percent;return mx(r)&&La(n,"options.data",r),n};return jl(t,Bu,ql)(e)}var rde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ide=function(e){rde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nde},t}(Rl);function ode(e){return jl(Bu,ql)(e)}var ade=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sde=function(e){ade(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ode},t}(Rl);function lde(e){var t=function(n){var r=n.options,i=r.data;return i&&La(r,"data",{value:i}),n};return jl(t,Bu,ql)(e)}var cde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ude=function(e){cde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lde},t}(Rl),C1=function(){return C1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},C1.apply(this,arguments)};function fde(e){var t=function(i){var s=i.options,l=s.startAngle,u=s.maxAngle,h=s.coordinate,p=mx(l)?l/(2*Math.PI)*360:-90,v=mx(u)?(Number(u)+p)/180*Math.PI:Math.PI;return La(i,["options","coordinate"],C1(C1({},h),{endAngle:v,startAngle:l!=null?l:-Math.PI/2})),i},n=function(i){var s=i.options,l=s.tooltip,u=s.xField,h=s.yField,p=JE(u),v=JE(h);return l||La(s,"tooltip",{title:!1,items:[function(y,b,T){return{name:p(y,b,T),value:v(y,b,T)}}]}),i},r=function(i){var s=i.options,l=s.markBackground,u=s.children,h=s.scale,p=s.coordinate,v=s.xField,y=di(h,"y.domain",[]);return l&&u.unshift(C1({type:"interval",xField:v,yField:y[y.length-1],colorField:l.color,scale:{color:{type:"identity"}},style:{fillOpacity:l.opacity,fill:l.color?void 0:"#e0e4ee"},coordinate:C1(C1({},p),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},l)),i};return jl(t,n,r,Bu,ql)(e)}var hde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dde=function(e){hde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fde},t}(Rl);function pde(e){return jl(ql)(e)}var vde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mde=function(e){vde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return pde},t}(Rl),AC=function(){return AC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},AC.apply(this,arguments)};function gde(e){var t=function(n){var r=n.options,i=r.xField,s=r.yField,l=r.seriesField,u=r.children,h=u==null?void 0:u.map(function(p){return AC(AC({},p),{xField:i,yField:s,seriesField:l,colorField:l,data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[i,l]}]}:p.data})}).filter(function(p){return r.violinType!=="density"||p.type==="density"});return La(r,"children",h),r.violinType==="polar"&&La(r,"coordinate",{type:"polar"}),La(r,"violinType",void 0),n};return jl(t,Bu,ql)(e)}var yde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_de=function(e){yde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return gde},t}(Rl),eS=function(){return eS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},eS.apply(this,arguments)},bde=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function xde(e){var t=function(s){var l=s.options,u=l.yField,h=l.children;return h.forEach(function(p,v){La(p,"yField",u[v])}),s},n=function(s){var l=s.options,u=l.yField,h=l.children,p=l.data;if(m5(p))return s;var v=Ct(di(p,[0]))?p:[p,p];return h.forEach(function(y,b){La(y,"data",bde([],v[b].map(function(T){return eS({groupKey:u[b]},T)}),!0))}),s},r=function(s){var l=s.options,u=l.yField,h=u[0],p=u[1],v=l.tooltip;return v||La(l,"tooltip",{items:[{field:h,value:h},{field:p,value:p}]}),s},i=function(s){var l=s.options,u=l.children,h=l.layout,p=l.coordinate.transform,v=l.paddingBottom,y=v===void 0?fj:v,b=l.paddingLeft,T=b===void 0?fj:b,R=l.axis;La(l,"axisText",eS(eS({},(R==null?void 0:R.x)||{}),{layout:h}));var M=u[0],I=u[1];if(h==="vertical")La(l,"direction","col"),La(l,"paddingLeft",T),La(l,"coordinate.transform",p.filter(function($){return $.type!=="transpose"})),La(M,"paddingBottom",uj),La(I,"paddingTop",uj),La(I,"axis",{x:{position:"top"}}),La(I,"scale",{y:{range:[0,1]}});else{La(l,"paddingBottom",y),La(M,"scale",{y:{range:[0,1]}});var N=M.paddingRight,U=N===void 0?x5:N,H=I.paddingLeft,X=H===void 0?x5:H;La(M,"paddingRight",U),La(M,"axis",{x:{position:"right"}}),La(I,"paddingLeft",X)}return s};return jl(t,n,r,i,Bu,ql)(e)}var Ede=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sde=function(e){Ede(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return xde},t}(Rl),O1;(function(e){e.color="key",e.d="path"})(O1||(O1={}));function Tde(e){var t=function(n){var r=n.options,i=r.data,s=r.setsField,l=r.sizeField;return Ct(i)&&(La(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:s,size:l,as:[O1.color,O1.d]}]}),La(r,"colorField",s),La(r,["children","0","encode","d"],O1.d)),La(n,"options",w5(r,["sizeField","setsField"])),n};return jl(t,ql)(e)}var wde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ade=function(e){wde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:O1.color,d:O1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Tde},t}(Rl);function Cde(e){var t=function(n){return n};return jl(t,ql)(e)}var Ode=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rde=function(e){Ode(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Cde},t}(Rl),Mde={Base:Jce,Line:ife,Column:Kue,Pie:sfe,Area:Wue,Bar:Xue,DualAxes:Sj,Funnel:tfe,Scatter:ufe,Radar:dfe,Rose:Vfe,Stock:Tfe,TinyLine:Cfe,TinyArea:Mfe,TinyColumn:Lfe,TinyProgress:Bfe,TinyRing:Ufe,Waterfall:Zfe,Histogram:Che,Heatmap:Mhe,Box:Lhe,Sankey:Bhe,Bullet:Qhe,Gauge:tde,Liquid:ide,WordCloud:sde,Treemap:ude,RadialBar:dde,CirclePacking:mde,Violin:_de,BidirectionalBar:Sde,Venn:Ade,Mix:Sj,Sunburst:Rde},D5=function(){return D5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},D5.apply(this,arguments)},Pj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Pde=(0,te.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=Pj(e,["chartType"]),s=i.containerStyle,l=s===void 0?{height:"inherit",flex:1}:s,u=i.containerAttributes,h=u===void 0?{}:u,p=i.className,v=i.loading,y=i.loadingTemplate,b=i.errorTemplate,T=Pj(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),R=qi(Mde[r],T),M=R.chart,I=R.container;return(0,te.useImperativeHandle)(t,function(){return M.current}),te.createElement(nt,{errorTemplate:b},v&&te.createElement(St,{loadingTemplate:y}),te.createElement("div",D5({className:p,style:l,ref:I},h)))})},78677:function(Ht,W,D){"use strict";var J=D(67294),Z=D(6340),E=function(){return E=Object.assign||function(te){for(var se,ae=1,Se=arguments.length;ae<Se;ae++){se=arguments[ae];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(te[oe]=se[oe])}return te},E.apply(this,arguments)},ve=(0,J.forwardRef)(function(te,se){return J.createElement(Z.P,E({},te,{chartType:"Column",ref:se}))});W.Z=ve},80652:function(Ht,W,D){"use strict";var J=D(67294),Z=D(6340),E=function(){return E=Object.assign||function(te){for(var se,ae=1,Se=arguments.length;ae<Se;ae++){se=arguments[ae];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(te[oe]=se[oe])}return te},E.apply(this,arguments)},ve=(0,J.forwardRef)(function(te,se){return J.createElement(Z.P,E({},te,{chartType:"Line",ref:se}))});W.Z=ve},63430:function(Ht,W,D){"use strict";var J=D(67294),Z=D(6340),E=function(){return E=Object.assign||function(te){for(var se,ae=1,Se=arguments.length;ae<Se;ae++){se=arguments[ae];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(te[oe]=se[oe])}return te},E.apply(this,arguments)},ve=(0,J.forwardRef)(function(te,se){return J.createElement(Z.P,E({},te,{chartType:"Pie",ref:se}))});W.Z=ve},6466:function(Ht,W,D){"use strict";D.d(W,{Z:function(){return lt}});var J=D(4942),Z=D(1413),E=D(45987),ve=D(28459),te=D(93967),se=D.n(te),ae=D(67294),Se=D(53911),oe=D(44962),Ge=D(98082),ee=function(Ae){return(0,J.Z)({},Ae.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ae.marginLG,marginInline:0,color:Ae.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function me(Ie){return(0,Ge.Xj)("ProCardOperation",function(Ae){var pt=(0,Z.Z)((0,Z.Z)({},Ae),{},{componentCls:".".concat(Ie)});return[ee(pt)]})}var Le=D(85893),be=function(Ae){var pt=Ae.className,ut=Ae.style,Et=ut===void 0?{}:ut,cn=Ae.children,ze=(0,ae.useContext)(ve.ZP.ConfigContext),St=ze.getPrefixCls,we=St("pro-card-operation"),nt=me(we),Xe=nt.wrapSSR,Ze=nt.hashId,Rt=se()(we,pt,Ze);return Xe((0,Le.jsx)("div",{className:Rt,style:Et,children:cn}))},Oe=be,fe=D(96604),He=function(Ae){return(0,J.Z)({},Ae.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,J.Z)({flexDirection:"row"},"".concat(Ae.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ae.colorBorder)}})};function bt(Ie){return(0,Ge.Xj)("StatisticCard",function(Ae){var pt=(0,Z.Z)((0,Z.Z)({},Ae),{},{componentCls:".".concat(Ie)});return[He(pt)]})}var dt=["children","statistic","className","chart","chartPlacement","footer"],Nt=function(Ae){var pt=Ae.children,ut=Ae.statistic,Et=Ae.className,cn=Ae.chart,ze=Ae.chartPlacement,St=Ae.footer,we=(0,E.Z)(Ae,dt),nt=(0,ae.useContext)(ve.ZP.ConfigContext),Xe=nt.getPrefixCls,Ze=Xe("pro-statistic-card"),Rt=bt(Ze),yt=Rt.wrapSSR,Me=Rt.hashId,Gt=se()(Ze,Et,Me),ln=ut&&(0,Le.jsx)(fe.Z,(0,Z.Z)({layout:"vertical"},ut)),Ln=se()("".concat(Ze,"-chart"),Me,(0,J.Z)((0,J.Z)({},"".concat(Ze,"-chart-left"),ze==="left"&&cn&&ut),"".concat(Ze,"-chart-right"),ze==="right"&&cn&&ut)),kn=cn&&(0,Le.jsx)("div",{className:Ln,children:cn}),lr=se()("".concat(Ze,"-content "),Me,(0,J.Z)({},"".concat(Ze,"-content-horizontal"),ze==="left"||ze==="right")),zt=(kn||ln)&&(ze==="left"?(0,Le.jsxs)("div",{className:lr,children:[kn,ln]}):(0,Le.jsxs)("div",{className:lr,children:[ln,kn]})),Kt=St&&(0,Le.jsx)("div",{className:"".concat(Ze,"-footer ").concat(Me).trim(),children:St});return yt((0,Le.jsxs)(Se.Z,(0,Z.Z)((0,Z.Z)({className:Gt},we),{},{children:[zt,pt,Kt]})))},ct=function(Ae){return(0,Le.jsx)(Nt,(0,Z.Z)({bodyStyle:{padding:0}},Ae))};Nt.Statistic=fe.Z,Nt.Divider=oe.Z,Nt.Operation=Oe,Nt.isProCard=!0,Nt.Group=ct;var lt=Nt},96604:function(Ht,W,D){"use strict";D.d(W,{Z:function(){return rn}});var J=D(1413),Z=D(4942),E=D(45987),ve=D(87462),te=D(67294),se=D(36688),ae=D(55304),Se=function(Pt,Pe){return te.createElement(ae.Z,(0,ve.Z)({},Pt,{ref:Pe,icon:se.Z}))},oe=te.forwardRef(Se),Ge=oe,ee=D(28459),me=D(83062),Le=D(40411),be=D(57838),Oe=D(96159),fe=D(93967),He=D.n(fe),bt=D(64217),dt=D(53124),Nt=D(87564),lt=Wt=>{const{value:Pt,formatter:Pe,precision:Qe,decimalSeparator:Bt,groupSeparator:z="",prefixCls:ue}=Wt;let ot;if(typeof Pe=="function")ot=Pe(Pt);else{const le=String(Pt),$t=le.match(/^(-?)(\d*)(\.(\d+))?$/);if(!$t||le==="-")ot=le;else{const an=$t[1];let hn=$t[2]||"0",Dn=$t[4]||"";hn=hn.replace(/\B(?=(\d{3})+(?!\d))/g,z),typeof Qe=="number"&&(Dn=Dn.padEnd(Qe,"0").slice(0,Qe>0?Qe:0)),Dn&&(Dn=`${Bt}${Dn}`),ot=[te.createElement("span",{key:"int",className:`${ue}-content-value-int`},an,hn),Dn&&te.createElement("span",{key:"decimal",className:`${ue}-content-value-decimal`},Dn)]}}return te.createElement("span",{className:`${ue}-content-value`},ot)},Ie=D(14747),Ae=D(27036),pt=D(45503);const ut=Wt=>{const{componentCls:Pt,marginXXS:Pe,padding:Qe,colorTextDescription:Bt,titleFontSize:z,colorTextHeading:ue,contentFontSize:ot,fontFamily:le}=Wt;return{[`${Pt}`]:Object.assign(Object.assign({},(0,Ie.Wf)(Wt)),{[`${Pt}-title`]:{marginBottom:Pe,color:Bt,fontSize:z},[`${Pt}-skeleton`]:{paddingTop:Qe},[`${Pt}-content`]:{color:ue,fontSize:ot,fontFamily:le,[`${Pt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${Pt}-content-prefix, ${Pt}-content-suffix`]:{display:"inline-block"},[`${Pt}-content-prefix`]:{marginInlineEnd:Pe},[`${Pt}-content-suffix`]:{marginInlineStart:Pe}}})}},Et=Wt=>{const{fontSizeHeading3:Pt,fontSize:Pe}=Wt;return{titleFontSize:Pe,contentFontSize:Pt}};var cn=(0,Ae.I$)("Statistic",Wt=>{const Pt=(0,pt.TS)(Wt,{});return[ut(Pt)]},Et),ze=function(Wt,Pt){var Pe={};for(var Qe in Wt)Object.prototype.hasOwnProperty.call(Wt,Qe)&&Pt.indexOf(Qe)<0&&(Pe[Qe]=Wt[Qe]);if(Wt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,Qe=Object.getOwnPropertySymbols(Wt);Bt<Qe.length;Bt++)Pt.indexOf(Qe[Bt])<0&&Object.prototype.propertyIsEnumerable.call(Wt,Qe[Bt])&&(Pe[Qe[Bt]]=Wt[Qe[Bt]]);return Pe},we=Wt=>{const{prefixCls:Pt,className:Pe,rootClassName:Qe,style:Bt,valueStyle:z,value:ue=0,title:ot,valueRender:le,prefix:$t,suffix:an,loading:hn=!1,formatter:Dn,precision:Xn,decimalSeparator:Gn=".",groupSeparator:dn=",",onMouseEnter:mt,onMouseLeave:Ct}=Wt,Cn=ze(Wt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:Pn,direction:Zn,statistic:ht}=te.useContext(dt.E_),ye=Pn("statistic",Pt),[Be,rt,Mt]=cn(ye),Ot=te.createElement(lt,{decimalSeparator:Gn,groupSeparator:dn,prefixCls:ye,formatter:Dn,precision:Xn,value:ue}),En=He()(ye,{[`${ye}-rtl`]:Zn==="rtl"},ht==null?void 0:ht.className,Pe,Qe,rt,Mt),$n=(0,bt.Z)(Cn,{aria:!0,data:!0});return Be(te.createElement("div",Object.assign({},$n,{className:En,style:Object.assign(Object.assign({},ht==null?void 0:ht.style),Bt),onMouseEnter:mt,onMouseLeave:Ct}),ot&&te.createElement("div",{className:`${ye}-title`},ot),te.createElement(Nt.Z,{paragraph:!1,loading:hn,className:`${ye}-skeleton`},te.createElement("div",{style:z,className:`${ye}-content`},$t&&te.createElement("span",{className:`${ye}-content-prefix`},$t),le?le(Ot):Ot,an&&te.createElement("span",{className:`${ye}-content-suffix`},an)))))};const nt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Xe(Wt,Pt){let Pe=Wt;const Qe=/\[[^\]]*]/g,Bt=(Pt.match(Qe)||[]).map(le=>le.slice(1,-1)),z=Pt.replace(Qe,"[]"),ue=nt.reduce((le,$t)=>{let[an,hn]=$t;if(le.includes(an)){const Dn=Math.floor(Pe/hn);return Pe-=Dn*hn,le.replace(new RegExp(`${an}+`,"g"),Xn=>{const Gn=Xn.length;return Dn.toString().padStart(Gn,"0")})}return le},z);let ot=0;return ue.replace(Qe,()=>{const le=Bt[ot];return ot+=1,le})}function Ze(Wt,Pt){const{format:Pe=""}=Pt,Qe=new Date(Wt).getTime(),Bt=Date.now(),z=Math.max(Qe-Bt,0);return Xe(z,Pe)}var Rt=function(Wt,Pt){var Pe={};for(var Qe in Wt)Object.prototype.hasOwnProperty.call(Wt,Qe)&&Pt.indexOf(Qe)<0&&(Pe[Qe]=Wt[Qe]);if(Wt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,Qe=Object.getOwnPropertySymbols(Wt);Bt<Qe.length;Bt++)Pt.indexOf(Qe[Bt])<0&&Object.prototype.propertyIsEnumerable.call(Wt,Qe[Bt])&&(Pe[Qe[Bt]]=Wt[Qe[Bt]]);return Pe};const yt=1e3/30;function Me(Wt){return new Date(Wt).getTime()}const Gt=Wt=>{const{value:Pt,format:Pe="HH:mm:ss",onChange:Qe,onFinish:Bt}=Wt,z=Rt(Wt,["value","format","onChange","onFinish"]),ue=(0,be.Z)(),ot=te.useRef(null),le=()=>{Bt==null||Bt(),ot.current&&(clearInterval(ot.current),ot.current=null)},$t=()=>{const Dn=Me(Pt);Dn>=Date.now()&&(ot.current=setInterval(()=>{ue(),Qe==null||Qe(Dn-Date.now()),Dn<Date.now()&&le()},yt))};te.useEffect(()=>($t(),()=>{ot.current&&(clearInterval(ot.current),ot.current=null)}),[Pt]);const an=(Dn,Xn)=>Ze(Dn,Object.assign(Object.assign({},Xn),{format:Pe})),hn=Dn=>(0,Oe.Tm)(Dn,{title:void 0});return te.createElement(we,Object.assign({},z,{value:Pt,valueRender:hn,formatter:an}))};var ln=te.memo(Gt);we.Countdown=ln;var Ln=we,kn=D(98082),lr=function(Pt){return(0,Z.Z)({},Pt.componentCls,(0,Z.Z)((0,Z.Z)((0,Z.Z)((0,Z.Z)((0,Z.Z)({display:"flex",fontSize:Pt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,Z.Z)({display:"flex",width:"100%"},"".concat(Pt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,Z.Z)({width:"100%"},"".concat(Pt.antCls,"-statistic-content"),{"&-value-int":{fontSize:Pt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(Pt.antCls,"-statistic-title"),{color:Pt.colorText}),"&-trend-up",(0,Z.Z)({},"".concat(Pt.antCls,"-statistic-content"),(0,Z.Z)({color:"#f5222d"},"".concat(Pt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,Z.Z)({},"".concat(Pt.antCls,"-statistic-content"),(0,Z.Z)({color:"#389e0d"},"".concat(Pt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,Z.Z)((0,Z.Z)((0,Z.Z)({display:"flex",justifyContent:"space-between"},"".concat(Pt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(Pt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(Pt.antCls,"-statistic-title,").concat(Pt.antCls,"-statistic-content,").concat(Pt.antCls,"-statistic-content-suffix,").concat(Pt.antCls,"-statistic-content-prefix,").concat(Pt.antCls,"-statistic-content-value-decimal"),{fontSize:Pt.fontSize})),"& &-layout-inline",(0,Z.Z)((0,Z.Z)((0,Z.Z)({display:"inline-flex",color:Pt.colorTextSecondary},"".concat(Pt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(Pt.antCls,"-statistic-content"),{color:Pt.colorTextSecondary}),"".concat(Pt.antCls,"-statistic-title,").concat(Pt.antCls,"-statistic-content,").concat(Pt.antCls,"-statistic-content-suffix,").concat(Pt.antCls,"-statistic-content-prefix,").concat(Pt.antCls,"-statistic-content-value-decimal"),{fontSize:Pt.fontSizeSM})))};function zt(Wt){return(0,kn.Xj)("Statistic",function(Pt){var Pe=(0,J.Z)((0,J.Z)({},Pt),{},{componentCls:".".concat(Wt)});return[lr(Pe)]})}var Kt=D(85893),yn=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Kn=function(Pt){var Pe=Pt.className,Qe=Pt.layout,Bt=Qe===void 0?"inline":Qe,z=Pt.style,ue=Pt.description,ot=Pt.children,le=Pt.title,$t=Pt.tip,an=Pt.status,hn=Pt.trend,Dn=Pt.prefix,Xn=Pt.icon,Gn=(0,E.Z)(Pt,yn),dn=(0,te.useContext)(ee.ZP.ConfigContext),mt=dn.getPrefixCls,Ct=mt("pro-card-statistic"),Cn=zt(Ct),Pn=Cn.wrapSSR,Zn=Cn.hashId,ht=He()(Ct,Pe,Zn),ye=He()("".concat(Ct,"-status"),Zn),Be=He()("".concat(Ct,"-icon"),Zn),rt=He()("".concat(Ct,"-wrapper"),Zn),Mt=He()("".concat(Ct,"-content"),Zn),Ot=He()(Zn,(0,Z.Z)((0,Z.Z)({},"".concat(Ct,"-layout-").concat(Bt),Bt),"".concat(Ct,"-trend-").concat(hn),hn)),En=$t&&(0,Kt.jsx)(me.Z,{title:$t,children:(0,Kt.jsx)(Ge,{className:"".concat(Ct,"-tip ").concat(Zn).trim()})}),$n=He()("".concat(Ct,"-trend-icon"),Zn,(0,Z.Z)({},"".concat(Ct,"-trend-icon-").concat(hn),hn)),yr=hn&&(0,Kt.jsx)("div",{className:$n}),qn=an&&(0,Kt.jsx)("div",{className:ye,children:(0,Kt.jsx)(Le.Z,{status:an,text:null})}),Ce=Xn&&(0,Kt.jsx)("div",{className:Be,children:Xn});return Pn((0,Kt.jsxs)("div",{className:ht,style:z,children:[Ce,(0,Kt.jsxs)("div",{className:rt,children:[qn,(0,Kt.jsxs)("div",{className:Mt,children:[(0,Kt.jsx)(Ln,(0,J.Z)({title:(le||En)&&(0,Kt.jsxs)(Kt.Fragment,{children:[le,En]}),prefix:(yr||Dn)&&(0,Kt.jsxs)(Kt.Fragment,{children:[yr,Dn]}),className:Ot},Gn)),ue&&(0,Kt.jsx)("div",{className:"".concat(Ct,"-description ").concat(Zn).trim(),children:ue})]})]})]}))},rn=Kn},46343:function(Ht,W,D){"use strict";D.d(W,{S$:function(){return Wt},bf:function(){return Pt},ni:function(){return Gt},oI:function(){return Kn},sX:function(){return rn}});var J=D(34155);function Z(Pe,Qe,Bt,z){function ue(ot){return ot instanceof Bt?ot:new Bt(function(le){le(ot)})}return new(Bt||(Bt=Promise))(function(ot,le){function $t(Dn){try{hn(z.next(Dn))}catch(Xn){le(Xn)}}function an(Dn){try{hn(z.throw(Dn))}catch(Xn){le(Xn)}}function hn(Dn){Dn.done?ot(Dn.value):ue(Dn.value).then($t,an)}hn((z=z.apply(Pe,Qe||[])).next())})}function E(Pe,Qe){var Bt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},z,ue,ot,le;return le={next:$t(0),throw:$t(1),return:$t(2)},typeof Symbol=="function"&&(le[Symbol.iterator]=function(){return this}),le;function $t(hn){return function(Dn){return an([hn,Dn])}}function an(hn){if(z)throw new TypeError("Generator is already executing.");for(;Bt;)try{if(z=1,ue&&(ot=hn[0]&2?ue.return:hn[0]?ue.throw||((ot=ue.return)&&ot.call(ue),0):ue.next)&&!(ot=ot.call(ue,hn[1])).done)return ot;switch(ue=0,ot&&(hn=[hn[0]&2,ot.value]),hn[0]){case 0:case 1:ot=hn;break;case 4:return Bt.label++,{value:hn[1],done:!1};case 5:Bt.label++,ue=hn[1],hn=[0];continue;case 7:hn=Bt.ops.pop(),Bt.trys.pop();continue;default:if(ot=Bt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(hn[0]===6||hn[0]===2)){Bt=0;continue}if(hn[0]===3&&(!ot||hn[1]>ot[0]&&hn[1]<ot[3])){Bt.label=hn[1];break}if(hn[0]===6&&Bt.label<ot[1]){Bt.label=ot[1],ot=hn;break}if(ot&&Bt.label<ot[2]){Bt.label=ot[2],Bt.ops.push(hn);break}ot[2]&&Bt.ops.pop(),Bt.trys.pop();continue}hn=Qe.call(Pe,Bt)}catch(Dn){hn=[6,Dn],ue=0}finally{z=ot=0}if(hn[0]&5)throw hn[1];return{value:hn[0]?hn[1]:void 0,done:!0}}}function ve(Pe,Qe){var Bt=typeof Symbol=="function"&&Pe[Symbol.iterator];if(!Bt)return Pe;var z=Bt.call(Pe),ue,ot=[],le;try{for(;(Qe===void 0||Qe-- >0)&&!(ue=z.next()).done;)ot.push(ue.value)}catch($t){le={error:$t}}finally{try{ue&&!ue.done&&(Bt=z.return)&&Bt.call(z)}finally{if(le)throw le.error}}return ot}function te(Pe,Qe,Bt){if(Bt||arguments.length===2)for(var z=0,ue=Qe.length,ot;z<ue;z++)(ot||!(z in Qe))&&(ot||(ot=Array.prototype.slice.call(Qe,0,z)),ot[z]=Qe[z]);return Pe.concat(ot||Array.prototype.slice.call(Qe))}function se(Pe){return Pe&&Pe.__esModule&&Object.prototype.hasOwnProperty.call(Pe,"default")?Pe.default:Pe}var ae={exports:{}},Se={exports:{}},oe={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=Bt;function Bt(z){return z&&typeof z.length=="number"&&z.length>=0&&z.length%1===0}Pe.exports=Qe.default})(oe,oe.exports);var Ge={},ee={exports:{}},me={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=function(Bt){return function(){for(var z=[],ue=arguments.length;ue--;)z[ue]=arguments[ue];var ot=z.pop();return Bt.call(this,z,ot)}},Pe.exports=Qe.default})(me,me.exports);var Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.fallback=He,Le.wrap=bt;var be=Le.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,Oe=Le.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,fe=Le.hasNextTick=typeof J=="object"&&typeof J.nextTick=="function";function He(Pe){setTimeout(Pe,0)}function bt(Pe){return function(Qe){for(var Bt=[],z=arguments.length-1;z-- >0;)Bt[z]=arguments[z+1];return Pe(function(){return Qe.apply(void 0,Bt)})}}var dt;be?dt=queueMicrotask:Oe?dt=setImmediate:fe?dt=J.nextTick:dt=He,Le.default=bt(dt),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=an;var Bt=me.exports,z=$t(Bt),ue=Le,ot=$t(ue),le=Ge;function $t(Xn){return Xn&&Xn.__esModule?Xn:{default:Xn}}function an(Xn){return(0,le.isAsync)(Xn)?function(){for(var Gn=[],dn=arguments.length;dn--;)Gn[dn]=arguments[dn];var mt=Gn.pop(),Ct=Xn.apply(this,Gn);return hn(Ct,mt)}:(0,z.default)(function(Gn,dn){var mt;try{mt=Xn.apply(this,Gn)}catch(Ct){return dn(Ct)}if(mt&&typeof mt.then=="function")return hn(mt,dn);dn(null,mt)})}function hn(Xn,Gn){return Xn.then(function(dn){Dn(Gn,null,dn)},function(dn){Dn(Gn,dn&&dn.message?dn:new Error(dn))})}function Dn(Xn,Gn,dn){try{Xn(Gn,dn)}catch(mt){(0,ot.default)(function(Ct){throw Ct},mt)}}Pe.exports=Qe.default}(ee,ee.exports),Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.isAsyncIterable=Ge.isAsyncGenerator=Ge.isAsync=void 0;var Nt=ee.exports,ct=lt(Nt);function lt(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function Ie(Pe){return Pe[Symbol.toStringTag]==="AsyncFunction"}function Ae(Pe){return Pe[Symbol.toStringTag]==="AsyncGenerator"}function pt(Pe){return typeof Pe[Symbol.asyncIterator]=="function"}function ut(Pe){if(typeof Pe!="function")throw new Error("expected a function");return Ie(Pe)?(0,ct.default)(Pe):Pe}Ge.default=ut,Ge.isAsync=Ie,Ge.isAsyncGenerator=Ae,Ge.isAsyncIterable=pt;var Et={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=Bt;function Bt(z,ue){if(ue===void 0&&(ue=z.length),!ue)throw new Error("arity is undefined");function ot(){for(var le=this,$t=[],an=arguments.length;an--;)$t[an]=arguments[an];return typeof $t[ue-1]=="function"?z.apply(this,$t):new Promise(function(hn,Dn){$t[ue-1]=function(Xn){for(var Gn=[],dn=arguments.length-1;dn-- >0;)Gn[dn]=arguments[dn+1];if(Xn)return Dn(Xn);hn(Gn.length>1?Gn:Gn[0])},z.apply(le,$t)})}return ot}Pe.exports=Qe.default})(Et,Et.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=oe.exports,z=an(Bt),ue=Ge,ot=an(ue),le=Et.exports,$t=an(le);function an(hn){return hn&&hn.__esModule?hn:{default:hn}}Qe.default=(0,$t.default)(function(hn,Dn,Xn){var Gn=(0,z.default)(Dn)?[]:{};hn(Dn,function(dn,mt,Ct){(0,ot.default)(dn)(function(Cn){for(var Pn,Zn=[],ht=arguments.length-1;ht-- >0;)Zn[ht]=arguments[ht+1];Zn.length<2&&(Pn=Zn,Zn=Pn[0]),Gn[mt]=Zn,Ct(Cn)})},function(dn){return Xn(dn,Gn)})},3),Pe.exports=Qe.default}(Se,Se.exports);var cn={exports:{}},ze={exports:{}},St={exports:{}},we={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=Bt;function Bt(z){function ue(){for(var ot=[],le=arguments.length;le--;)ot[le]=arguments[le];if(z!==null){var $t=z;z=null,$t.apply(this,ot)}}return Object.assign(ue,z),ue}Pe.exports=Qe.default})(we,we.exports);var nt={exports:{}},Xe={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=function(Bt){return Bt[Symbol.iterator]&&Bt[Symbol.iterator]()},Pe.exports=Qe.default})(Xe,Xe.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=Dn;var Bt=oe.exports,z=le(Bt),ue=Xe.exports,ot=le(ue);function le(Xn){return Xn&&Xn.__esModule?Xn:{default:Xn}}function $t(Xn){var Gn=-1,dn=Xn.length;return function(){return++Gn<dn?{value:Xn[Gn],key:Gn}:null}}function an(Xn){var Gn=-1;return function(){var mt=Xn.next();return mt.done?null:(Gn++,{value:mt.value,key:Gn})}}function hn(Xn){var Gn=Xn?Object.keys(Xn):[],dn=-1,mt=Gn.length;return function Ct(){var Cn=Gn[++dn];return Cn==="__proto__"?Ct():dn<mt?{value:Xn[Cn],key:Cn}:null}}function Dn(Xn){if((0,z.default)(Xn))return $t(Xn);var Gn=(0,ot.default)(Xn);return Gn?an(Gn):hn(Xn)}Pe.exports=Qe.default}(nt,nt.exports);var Ze={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=Bt;function Bt(z){return function(){for(var ue=[],ot=arguments.length;ot--;)ue[ot]=arguments[ot];if(z===null)throw new Error("Callback was already called.");var le=z;z=null,le.apply(this,ue)}}Pe.exports=Qe.default})(Ze,Ze.exports);var Rt={exports:{}},yt={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt={};Qe.default=Bt,Pe.exports=Qe.default})(yt,yt.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=ot;var Bt=yt.exports,z=ue(Bt);function ue(le){return le&&le.__esModule?le:{default:le}}function ot(le,$t,an,hn){var Dn=!1,Xn=!1,Gn=!1,dn=0,mt=0;function Ct(){dn>=$t||Gn||Dn||(Gn=!0,le.next().then(function(Zn){var ht=Zn.value,ye=Zn.done;if(!(Xn||Dn)){if(Gn=!1,ye){Dn=!0,dn<=0&&hn(null);return}dn++,an(ht,mt,Cn),mt++,Ct()}}).catch(Pn))}function Cn(Zn,ht){if(dn-=1,!Xn){if(Zn)return Pn(Zn);if(Zn===!1){Dn=!0,Xn=!0;return}if(ht===z.default||Dn&&dn<=0)return Dn=!0,hn(null);Ct()}}function Pn(Zn){Xn||(Gn=!1,Dn=!0,hn(Zn))}Ct()}Pe.exports=Qe.default}(Rt,Rt.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=we.exports,z=dn(Bt),ue=nt.exports,ot=dn(ue),le=Ze.exports,$t=dn(le),an=Ge,hn=Rt.exports,Dn=dn(hn),Xn=yt.exports,Gn=dn(Xn);function dn(mt){return mt&&mt.__esModule?mt:{default:mt}}Qe.default=function(mt){return function(Ct,Cn,Pn){if(Pn=(0,z.default)(Pn),mt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Ct)return Pn(null);if((0,an.isAsyncGenerator)(Ct))return(0,Dn.default)(Ct,mt,Cn,Pn);if((0,an.isAsyncIterable)(Ct))return(0,Dn.default)(Ct[Symbol.asyncIterator](),mt,Cn,Pn);var Zn=(0,ot.default)(Ct),ht=!1,ye=!1,Be=0,rt=!1;function Mt(En,$n){if(!ye)if(Be-=1,En)ht=!0,Pn(En);else if(En===!1)ht=!0,ye=!0;else{if($n===Gn.default||ht&&Be<=0)return ht=!0,Pn(null);rt||Ot()}}function Ot(){for(rt=!0;Be<mt&&!ht;){var En=Zn();if(En===null){ht=!0,Be<=0&&Pn(null);return}Be+=1,Cn(En.value,En.key,(0,$t.default)(Mt))}rt=!1}Ot()}},Pe.exports=Qe.default}(St,St.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=St.exports,z=an(Bt),ue=Ge,ot=an(ue),le=Et.exports,$t=an(le);function an(Dn){return Dn&&Dn.__esModule?Dn:{default:Dn}}function hn(Dn,Xn,Gn,dn){return(0,z.default)(Xn)(Dn,(0,ot.default)(Gn),dn)}Qe.default=(0,$t.default)(hn,4),Pe.exports=Qe.default}(ze,ze.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=ze.exports,z=le(Bt),ue=Et.exports,ot=le(ue);function le(an){return an&&an.__esModule?an:{default:an}}function $t(an,hn,Dn){return(0,z.default)(an,1,hn,Dn)}Qe.default=(0,ot.default)($t,3),Pe.exports=Qe.default}(cn,cn.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=$t;var Bt=Se.exports,z=le(Bt),ue=cn.exports,ot=le(ue);function le(an){return an&&an.__esModule?an:{default:an}}function $t(an,hn){return(0,z.default)(ot.default,an,hn)}Pe.exports=Qe.default}(ae,ae.exports);var Me=se(ae.exports),Gt=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.call=function(){for(var Qe=arguments,Bt=[],z=0;z<arguments.length;z++)Bt[z]=Qe[z];return this.args=Bt,Me(this.tasks)},Pe.prototype.tap=function(Qe,Bt){var z=this;this.tasks.push(function(ue){Bt.apply(void 0,te([],ve(z.args),!1)),ue(null,Qe)})},Pe}(),ln={exports:{}},Ln={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=oe.exports,z=Cn(Bt),ue=yt.exports,ot=Cn(ue),le=ze.exports,$t=Cn(le),an=we.exports,hn=Cn(an),Dn=Ze.exports,Xn=Cn(Dn),Gn=Ge,dn=Cn(Gn),mt=Et.exports,Ct=Cn(mt);function Cn(ye){return ye&&ye.__esModule?ye:{default:ye}}function Pn(ye,Be,rt){rt=(0,hn.default)(rt);var Mt=0,Ot=0,En=ye.length,$n=!1;En===0&&rt(null);function yr(qn,Ce){qn===!1&&($n=!0),$n!==!0&&(qn?rt(qn):(++Ot===En||Ce===ot.default)&&rt(null))}for(;Mt<En;Mt++)Be(ye[Mt],Mt,(0,Xn.default)(yr))}function Zn(ye,Be,rt){return(0,$t.default)(ye,1/0,Be,rt)}function ht(ye,Be,rt){var Mt=(0,z.default)(ye)?Pn:Zn;return Mt(ye,(0,dn.default)(Be),rt)}Qe.default=(0,Ct.default)(ht,3),Pe.exports=Qe.default})(Ln,Ln.exports),function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=$t;var Bt=Ln.exports,z=le(Bt),ue=Se.exports,ot=le(ue);function le(an){return an&&an.__esModule?an:{default:an}}function $t(an,hn){return(0,ot.default)(z.default,an,hn)}Pe.exports=Qe.default}(ln,ln.exports);var kn=se(ln.exports),lr=function(){function Pe(){this.tasks=[]}return Pe.prototype.promise=function(){return kn(this.tasks)},Pe.prototype.tapPromise=function(Qe,Bt){var z=this;this.tasks.push(function(ue){return Z(z,void 0,void 0,function(){return E(this,function(ot){switch(ot.label){case 0:return[4,Bt()];case 1:return ot.sent(),ue(null,Qe),[2]}})})})},Pe}(),zt={exports:{}};(function(Pe,Qe){Object.defineProperty(Qe,"__esModule",{value:!0});var Bt=we.exports,z=Dn(Bt),ue=Ze.exports,ot=Dn(ue),le=Ge,$t=Dn(le),an=Et.exports,hn=Dn(an);function Dn(Gn){return Gn&&Gn.__esModule?Gn:{default:Gn}}function Xn(Gn,dn){if(dn=(0,z.default)(dn),!Array.isArray(Gn))return dn(new Error("First argument to waterfall must be an array of functions"));if(!Gn.length)return dn();var mt=0;function Ct(Pn){var Zn=(0,$t.default)(Gn[mt++]);Zn.apply(void 0,Pn.concat([(0,ot.default)(Cn)]))}function Cn(Pn){for(var Zn=[],ht=arguments.length-1;ht-- >0;)Zn[ht]=arguments[ht+1];if(Pn!==!1){if(Pn||mt===Gn.length)return dn.apply(void 0,[Pn].concat(Zn));Ct(Zn)}}Ct([])}Qe.default=(0,hn.default)(Xn),Pe.exports=Qe.default})(zt,zt.exports);var Kt=se(zt.exports),yn=function(){function Pe(){this.tasks=[]}return Pe.prototype.call=function(){return Kt(this.tasks)},Pe.prototype.tap=function(Qe,Bt){this.tasks.length===0?this.tasks.push(function(z){var ue=Bt();z(ue?null:!1,ue)}):this.tasks.push(function(z,ue){var ot=Bt.apply(void 0,te([],ve(z),!1));ue(ot?null:!1,Qe)})},Pe}(),Kn=function(){function Pe(){this.tasks=[]}return Pe.prototype.call=function(){return Me(this.tasks)},Pe.prototype.tap=function(Qe,Bt){this.tasks.push(function(z){var ue=Bt();z(ue,Qe)})},Pe}(),rn=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.promise=function(){for(var Qe=arguments,Bt=[],z=0;z<arguments.length;z++)Bt[z]=Qe[z];return this.args=Bt,Me(this.tasks)},Pe.prototype.tapPromise=function(Qe,Bt){var z=this;this.tasks.push(function(ue){return Z(z,void 0,void 0,function(){return E(this,function(ot){switch(ot.label){case 0:return[4,Bt.apply(void 0,te([],ve(this.args),!1))];case 1:return ot.sent(),ue(null,Qe),[2]}})})})},Pe}(),Wt=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.promise=function(){for(var Qe=arguments,Bt=[],z=0;z<arguments.length;z++)Bt[z]=Qe[z];return this.args=Bt,Me(this.tasks)},Pe.prototype.tapPromise=function(Qe,Bt){var z=this;this.tasks.push(function(ue){return Z(z,void 0,void 0,function(){var ot;return E(this,function(le){switch(le.label){case 0:return[4,Bt.apply(void 0,te([],ve(this.args),!1))];case 1:return ot=le.sent(),ue(ot,Qe),[2]}})})})},Pe}(),Pt=function(){function Pe(){this.tasks=[]}return Pe.prototype.promise=function(){return Kt(this.tasks)},Pe.prototype.tapPromise=function(Qe,Bt){this.tasks.length===0?this.tasks.push(function(z){Bt().then(function(ue){z(null,ue)})}):this.tasks.push(function(z,ue){Bt(z).then(function(ot){ue(null,ot)})})},Pe}()},17816:function(Ht,W){(function(D,J){J(W)})(this,function(D){"use strict";function J(Ne){var Je=typeof Symbol=="function"&&Symbol.iterator,kt=Je&&Ne[Je],sn=0;if(kt)return kt.call(Ne);if(Ne&&typeof Ne.length=="number")return{next:function(){return{value:(Ne=Ne&&sn>=Ne.length?void 0:Ne)&&Ne[sn++],done:!Ne}}};throw new TypeError(Je?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(Ne,Je){var kt=typeof Symbol=="function"&&Ne[Symbol.iterator];if(!kt)return Ne;var sn,Nn,Bn=kt.call(Ne),gn=[];try{for(;(Je===void 0||0<Je--)&&!(sn=Bn.next()).done;)gn.push(sn.value)}catch(On){Nn={error:On}}finally{try{sn&&!sn.done&&(kt=Bn.return)&&kt.call(Bn)}finally{if(Nn)throw Nn.error}}return gn}function E(Ne,Je,kt){if(kt||arguments.length===2)for(var sn,Nn=0,Bn=Je.length;Nn<Bn;Nn++)!sn&&Nn in Je||((sn=sn||Array.prototype.slice.call(Je,0,Nn))[Nn]=Je[Nn]);return Ne.concat(sn||Array.prototype.slice.call(Je))}function ve(Ne){return se(Ne,"Function")}var te={}.toString,se=function(Ne,Je){return te.call(Ne)==="[object "+Je+"]"},ae=function(Ne){return Array.isArray?Array.isArray(Ne):se(Ne,"Array")},Se=function(Ne){if(typeof(Je=Ne)!="object"||Je===null||!se(Ne,"Object"))return!1;var Je;if(Object.getPrototypeOf(Ne)===null)return!0;for(var kt=Ne;Object.getPrototypeOf(kt)!==null;)kt=Object.getPrototypeOf(kt);return Object.getPrototypeOf(Ne)===kt},oe=function(Ne){return se(Ne,"Number")},Ge=Object.values?function(Ne){return Object.values(Ne)}:function(Ne){var Je,kt=[],sn=Ne,Nn=function(dr,hr){ve(Ne)&&hr==="prototype"||kt.push(dr)};if(sn){if(ae(sn))for(var Bn=0,gn=sn.length;Bn<gn&&Nn(sn[Bn],Bn)!==!1;Bn++);else if(Je=typeof sn,sn!==null&&Je=="object"||Je=="function"){for(var On in sn)if(sn.hasOwnProperty(On)&&Nn(sn[On],On)===!1)break}}return kt},ee=5;function me(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];for(var sn=0;sn<Je.length;sn+=1)(function Nn(Bn,gn,On,dr){for(var hr in On=On||0,dr=dr||ee,gn){var ii;gn.hasOwnProperty(hr)&&((ii=gn[hr])!==null&&Se(ii)?(Se(Bn[hr])||(Bn[hr]={}),On<dr?Nn(Bn[hr],ii,On+1,dr):Bn[hr]=gn[hr]):ae(ii)?(Bn[hr]=[],Bn[hr]=Bn[hr].concat(ii)):ii!==void 0&&(Bn[hr]=ii))}})(Ne,Je[sn]);return Ne}function Le(Ne){return Ne}(function(Ne,Je){var kt;if(ve(Ne))return(kt=function(){for(var sn=[],Nn=0;Nn<arguments.length;Nn++)sn[Nn]=arguments[Nn];var Bn,gn=Je?Je.apply(this,sn):sn[0],On=kt.cache;return On.has(gn)?On.get(gn):(Bn=Ne.apply(this,sn),On.set(gn,Bn),Bn)}).cache=new Map;throw new TypeError("Expected a function")})(function(Ne,gn){var kt=(gn=gn===void 0?{}:gn).fontSize,sn=gn.fontFamily,Nn=gn.fontWeight,Bn=gn.fontStyle,gn=gn.fontVariant;return(be=be||document.createElement("canvas").getContext("2d")).font=[Bn,gn,Nn,kt+"px",sn].join(" "),be.measureText(se(Ne,"String")?Ne:"").width},function(Ne,Je){return function(){for(var kt=0,sn=0,Nn=arguments.length;sn<Nn;sn++)kt+=arguments[sn].length;for(var Bn=Array(kt),gn=0,sn=0;sn<Nn;sn++)for(var On=arguments[sn],dr=0,hr=On.length;dr<hr;dr++,gn++)Bn[gn]=On[dr];return Bn}([Ne],Ge(Je=Je===void 0?{}:Je)).join("")});var be,Oe=typeof Float32Array!="undefined"?Float32Array:Array;function fe(){var Ne=new Oe(9);return Oe!=Float32Array&&(Ne[1]=0,Ne[2]=0,Ne[3]=0,Ne[5]=0,Ne[6]=0,Ne[7]=0),Ne[0]=1,Ne[4]=1,Ne[8]=1,Ne}Math.hypot||(Math.hypot=function(){for(var Ne=0,Je=arguments.length;Je--;)Ne+=arguments[Je]*arguments[Je];return Math.sqrt(Ne)});var He=function(Ne,Gi,xi){var sn=Gi[0],Nn=Gi[1],Bn=Gi[2],gn=Gi[3],On=Gi[4],dr=Gi[5],hr=Gi[6],ii=Gi[7],Gi=Gi[8],ao=xi[0],Qr=xi[1],ji=xi[2],Li=xi[3],Zr=xi[4],yo=xi[5],Mi=xi[6],xo=xi[7],xi=xi[8];return Ne[0]=ao*sn+Qr*gn+ji*hr,Ne[1]=ao*Nn+Qr*On+ji*ii,Ne[2]=ao*Bn+Qr*dr+ji*Gi,Ne[3]=Li*sn+Zr*gn+yo*hr,Ne[4]=Li*Nn+Zr*On+yo*ii,Ne[5]=Li*Bn+Zr*dr+yo*Gi,Ne[6]=Mi*sn+xo*gn+xi*hr,Ne[7]=Mi*Nn+xo*On+xi*ii,Ne[8]=Mi*Bn+xo*dr+xi*Gi,Ne};function bt(){var Ne=new Oe(16);return Oe!=Float32Array&&(Ne[1]=0,Ne[2]=0,Ne[3]=0,Ne[4]=0,Ne[6]=0,Ne[7]=0,Ne[8]=0,Ne[9]=0,Ne[11]=0,Ne[12]=0,Ne[13]=0,Ne[14]=0),Ne[0]=1,Ne[5]=1,Ne[10]=1,Ne[15]=1,Ne}var dt=function(Ne,Mi,kt){var sn=Mi[0],Nn=Mi[1],Bn=Mi[2],gn=Mi[3],On=Mi[4],dr=Mi[5],hr=Mi[6],ii=Mi[7],Gi=Mi[8],ao=Mi[9],Qr=Mi[10],ji=Mi[11],Li=Mi[12],Zr=Mi[13],yo=Mi[14],Mi=Mi[15],xo=kt[0],xi=kt[1],Oo=kt[2],ra=kt[3];return Ne[0]=xo*sn+xi*On+Oo*Gi+ra*Li,Ne[1]=xo*Nn+xi*dr+Oo*ao+ra*Zr,Ne[2]=xo*Bn+xi*hr+Oo*Qr+ra*yo,Ne[3]=xo*gn+xi*ii+Oo*ji+ra*Mi,xo=kt[4],xi=kt[5],Oo=kt[6],ra=kt[7],Ne[4]=xo*sn+xi*On+Oo*Gi+ra*Li,Ne[5]=xo*Nn+xi*dr+Oo*ao+ra*Zr,Ne[6]=xo*Bn+xi*hr+Oo*Qr+ra*yo,Ne[7]=xo*gn+xi*ii+Oo*ji+ra*Mi,xo=kt[8],xi=kt[9],Oo=kt[10],ra=kt[11],Ne[8]=xo*sn+xi*On+Oo*Gi+ra*Li,Ne[9]=xo*Nn+xi*dr+Oo*ao+ra*Zr,Ne[10]=xo*Bn+xi*hr+Oo*Qr+ra*yo,Ne[11]=xo*gn+xi*ii+Oo*ji+ra*Mi,xo=kt[12],xi=kt[13],Oo=kt[14],ra=kt[15],Ne[12]=xo*sn+xi*On+Oo*Gi+ra*Li,Ne[13]=xo*Nn+xi*dr+Oo*ao+ra*Zr,Ne[14]=xo*Bn+xi*hr+Oo*Qr+ra*yo,Ne[15]=xo*gn+xi*ii+Oo*ji+ra*Mi,Ne};function Nt(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];return Ne?Je.reduce(function(sn,Nn){return function(Bn){return Nn(sn(Bn))}},Ne):Le}function ct(Ne){return Ne instanceof Float32Array||Ne instanceof Array}function lt(Ne,Je,kt){for(;Ne<Je;)Ne+=2*Math.PI;for(;kt<Ne;)Ne-=2*Math.PI;return Ne}rt=new Oe(3),Oe!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0),rt=new Oe(4),Oe!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0,rt[3]=0);function Ie(gn,Je,kt,sn,Nn){var Bn=(gn=Z(gn,2))[0],gn=gn[1],On=fe();return Bn=[Bn,gn],(gn=On)[0]=1,gn[1]=0,gn[2]=0,gn[3]=0,gn[4]=1,gn[5]=0,gn[6]=Bn[0],gn[7]=Bn[1],gn[8]=1,gn}function Ae(Ne,...Je){return Je.reduce((kt,sn)=>Nn=>kt(sn(Nn)),Ne)}function pt(Ne,Je){return Je-Ne?kt=>(kt-Ne)/(Je-Ne):kt=>.5}const ut=Math.sqrt(50),Et=Math.sqrt(10),cn=Math.sqrt(2);function ze(Ne,Je,kt){return Je=(Je-Ne)/Math.max(0,kt),Ne=Math.floor(Math.log(Je)/Math.LN10),kt=Je/mf(10,Ne),0<=Ne?(kt>=ut?10:kt>=Et?5:kt>=cn?2:1)*mf(10,Ne):-mf(10,-Ne)/(kt>=ut?10:kt>=Et?5:kt>=cn?2:1)}const St=(Ne,Je,kt=5)=>{Ne=[Ne,Je];let sn=0,Nn=Ne.length-1,Bn=Ne[sn],gn=Ne[Nn],On;return gn<Bn&&([Bn,gn]=[gn,Bn],[sn,Nn]=[Nn,sn]),0<(On=ze(Bn,gn,kt))?(Bn=Math.floor(Bn/On)*On,gn=Math.ceil(gn/On)*On,On=ze(Bn,gn,kt)):On<0&&(Bn=Math.ceil(Bn*On)/On,gn=Math.floor(gn*On)/On,On=ze(Bn,gn,kt)),0<On?(Ne[sn]=Math.floor(Bn/On)*On,Ne[Nn]=Math.ceil(gn/On)*On):On<0&&(Ne[sn]=Math.ceil(Bn*On)/On,Ne[Nn]=Math.floor(gn*On)/On),Ne};function we(Ne){return Ne!=null&&!Number.isNaN(Ne)}function nt(Ne,Je){return kt=>{kt.prototype.rescale=function(){this.initRange(),this.nice();var[sn]=this.chooseTransforms();this.composeOutput(sn,this.chooseClamp(sn))},kt.prototype.initRange=function(){var sn=this.options.interpolator;this.options.range=Ne(sn)},kt.prototype.composeOutput=function(sn,Nn){var Bn,{domain:On,interpolator:gn,round:dr}=this.getOptions(),On=Je(On.map(sn)),dr=dr?(Bn=gn,hr=>(hr=Bn(hr),oe(hr)?Math.round(hr):hr)):gn;this.output=Ae(dr,On,Nn,sn)},kt.prototype.invert=void 0}}var Xe,rt={exports:{}},Be={exports:{}},Ze=function(Ne){return!(!Ne||typeof Ne=="string")&&(Ne instanceof Array||Array.isArray(Ne)||0<=Ne.length&&(Ne.splice instanceof Function||Object.getOwnPropertyDescriptor(Ne,Ne.length-1)&&Ne.constructor.name!=="String"))},Rt=Array.prototype.concat,yt=Array.prototype.slice,Me=Be.exports=function(Ne){for(var Je=[],kt=0,sn=Ne.length;kt<sn;kt++){var Nn=Ne[kt];Ze(Nn)?Je=Rt.call(Je,yt.call(Nn)):Je.push(Nn)}return Je},Gt=(Me.wrap=function(Ne){return function(){return Ne(Me(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ln=Be.exports,Ln=Object.hasOwnProperty,kn=Object.create(null);for(Xe in Gt)Ln.call(Gt,Xe)&&(kn[Gt[Xe]]=Xe);var lr=rt.exports={to:{},get:{}};function zt(Ne,Je,kt){return Math.min(Math.max(Je,Ne),kt)}function Kt(Ne){return Ne=Math.round(Ne).toString(16).toUpperCase(),Ne.length<2?"0"+Ne:Ne}lr.get=function(Ne){var Je,kt;switch(Ne.substring(0,3).toLowerCase()){case"hsl":Je=lr.get.hsl(Ne),kt="hsl";break;case"hwb":Je=lr.get.hwb(Ne),kt="hwb";break;default:Je=lr.get.rgb(Ne),kt="rgb"}return Je?{model:kt,value:Je}:null},lr.get.rgb=function(Ne){if(!Ne)return null;var Je,kt,sn,Nn=[0,0,0,1];if(Je=Ne.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(sn=Je[2],Je=Je[1],kt=0;kt<3;kt++){var Bn=2*kt;Nn[kt]=parseInt(Je.slice(Bn,2+Bn),16)}sn&&(Nn[3]=parseInt(sn,16)/255)}else if(Je=Ne.match(/^#([a-f0-9]{3,4})$/i)){for(sn=(Je=Je[1])[3],kt=0;kt<3;kt++)Nn[kt]=parseInt(Je[kt]+Je[kt],16);sn&&(Nn[3]=parseInt(sn+sn,16)/255)}else{if(Je=Ne.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(kt=0;kt<3;kt++)Nn[kt]=parseInt(Je[kt+1],0);else{if(!(Je=Ne.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(Je=Ne.match(/^(\w+)$/))?Je[1]==="transparent"?[0,0,0,0]:Ln.call(Gt,Je[1])?((Nn=Gt[Je[1]])[3]=1,Nn):null:null;for(kt=0;kt<3;kt++)Nn[kt]=Math.round(2.55*parseFloat(Je[kt+1]))}Je[4]&&(Je[5]?Nn[3]=.01*parseFloat(Je[4]):Nn[3]=parseFloat(Je[4]))}for(kt=0;kt<3;kt++)Nn[kt]=zt(Nn[kt],0,255);return Nn[3]=zt(Nn[3],0,1),Nn},lr.get.hsl=function(Ne){var Je;return(Ne=Ne&&Ne.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Je=parseFloat(Ne[4]),[(parseFloat(Ne[1])%360+360)%360,zt(parseFloat(Ne[2]),0,100),zt(parseFloat(Ne[3]),0,100),zt(isNaN(Je)?1:Je,0,1)]):null},lr.get.hwb=function(Ne){var Je;return(Ne=Ne&&Ne.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Je=parseFloat(Ne[4]),[(parseFloat(Ne[1])%360+360)%360,zt(parseFloat(Ne[2]),0,100),zt(parseFloat(Ne[3]),0,100),zt(isNaN(Je)?1:Je,0,1)]):null},lr.to.hex=function(){var Ne=ln(arguments);return"#"+Kt(Ne[0])+Kt(Ne[1])+Kt(Ne[2])+(Ne[3]<1?Kt(Math.round(255*Ne[3])):"")},lr.to.rgb=function(){var Ne=ln(arguments);return Ne.length<4||Ne[3]===1?"rgb("+Math.round(Ne[0])+", "+Math.round(Ne[1])+", "+Math.round(Ne[2])+")":"rgba("+Math.round(Ne[0])+", "+Math.round(Ne[1])+", "+Math.round(Ne[2])+", "+Ne[3]+")"},lr.to.rgb.percent=function(){var Ne=ln(arguments),Je=Math.round(Ne[0]/255*100),kt=Math.round(Ne[1]/255*100),sn=Math.round(Ne[2]/255*100);return Ne.length<4||Ne[3]===1?"rgb("+Je+"%, "+kt+"%, "+sn+"%)":"rgba("+Je+"%, "+kt+"%, "+sn+"%, "+Ne[3]+")"},lr.to.hsl=function(){var Ne=ln(arguments);return Ne.length<4||Ne[3]===1?"hsl("+Ne[0]+", "+Ne[1]+"%, "+Ne[2]+"%)":"hsla("+Ne[0]+", "+Ne[1]+"%, "+Ne[2]+"%, "+Ne[3]+")"},lr.to.hwb=function(){var Ne=ln(arguments),Je="";return 4<=Ne.length&&Ne[3]!==1&&(Je=", "+Ne[3]),"hwb("+Ne[0]+", "+Ne[1]+"%, "+Ne[2]+"%"+Je+")"},lr.to.keyword=function(Ne){return kn[Ne.slice(0,3)]};var yn=rt.exports;function Kn(Ne,Je,kt){let sn=kt;return sn<0&&(sn+=1),1<sn&&--sn,sn<1/6?Ne+6*(Je-Ne)*sn:sn<.5?Je:sn<2/3?Ne+(Je-Ne)*(2/3-sn)*6:Ne}function rn(Nn){var Je,kt,sn,Nn=yn.get(Nn);return Nn?({model:Nn,value:Je}=Nn,Nn==="rgb"?Je:Nn==="hsl"?(Je=(Nn=Je)[0]/360,kt=Nn[1]/100,sn=Nn[2]/100,Nn=Nn[3],kt==0?[255*sn,255*sn,255*sn,Nn]:[255*Kn(kt=2*sn-(sn=sn<.5?sn*(1+kt):sn+kt-sn*kt),sn,Je+1/3),255*Kn(kt,sn,Je),255*Kn(kt,sn,Je-1/3),Nn]):null):null}const Wt=(Ne,Je)=>kt=>Ne*(1-kt)+Je*kt,Pt=(Ne,Je)=>{if(typeof Ne=="number"&&typeof Je=="number")return Wt(Ne,Je);if(typeof Ne!="string"||typeof Je!="string")return()=>Ne;{var kt=Ne,sn=Je;const Nn=rn(kt),Bn=rn(sn);return Nn===null||Bn===null?Nn?()=>kt:()=>sn:gn=>{var On=new Array(4);for(let ji=0;ji<4;ji+=1){var dr=Nn[ji],hr=Bn[ji];On[ji]=dr*(1-gn)+hr*gn}var[ii,Gi,ao,Qr]=On;return`rgba(${Math.round(ii)}, ${Math.round(Gi)}, ${Math.round(ao)}, ${Qr})`}}},Pe=(Ne,Je)=>{const kt=Wt(Ne,Je);return sn=>Math.round(kt(sn))};function Qe({map:Ne,initKey:Je},kt){return Je=Je(kt),Ne.has(Je)?Ne.get(Je):kt}function Bt(Ne){return typeof Ne=="object"?Ne.valueOf():Ne}class z extends Map{constructor(Je){if(super(),this.map=new Map,this.initKey=Bt,Je!==null)for(var[kt,sn]of Je)this.set(kt,sn)}get(Je){return super.get(Qe({map:this.map,initKey:this.initKey},Je))}has(Je){return super.has(Qe({map:this.map,initKey:this.initKey},Je))}set(Je,kt){return super.set(([{map:Je,initKey:sn},Nn]=[{map:this.map,initKey:this.initKey},Je],sn=sn(Nn),Je.has(sn)?Je.get(sn):(Je.set(sn,Nn),Nn)),kt);var sn,Nn}delete(Je){return super.delete(([{map:Je,initKey:kt},sn]=[{map:this.map,initKey:this.initKey},Je],kt=kt(sn),Je.has(kt)&&(sn=Je.get(kt),Je.delete(kt)),sn));var kt,sn}}class ue{constructor(Je){this.options=me({},this.getDefaultOptions()),this.update(Je)}getOptions(){return this.options}update(Je={}){this.options=me({},this.options,Je),this.rescale(Je)}rescale(Je){}}const ot=Symbol("defaultUnknown");function le(Ne,Je,kt){for(let sn=0;sn<Je.length;sn+=1)Ne.has(Je[sn])||Ne.set(kt(Je[sn]),sn)}function $t(Je){var{value:Je,from:kt,to:sn,mapper:Nn,notFoundReturn:Bn}=Je;let gn=Nn.get(Je);if(gn===void 0){if(Bn!==ot)return Bn;gn=kt.push(Je)-1,Nn.set(Je,gn)}return sn[gn%sn.length]}function an(Ne){return Ne instanceof Date?Je=>""+Je:typeof Ne=="object"?Je=>JSON.stringify(Je):Je=>Je}class hn extends ue{getDefaultOptions(){return{domain:[],range:[],unknown:ot}}constructor(Je){super(Je)}map(Je){return this.domainIndexMap.size===0&&le(this.domainIndexMap,this.getDomain(),this.domainKey),$t({value:this.domainKey(Je),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(Je){return this.rangeIndexMap.size===0&&le(this.rangeIndexMap,this.getRange(),this.rangeKey),$t({value:this.rangeKey(Je),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(Je){var[kt]=this.options.domain,[sn]=this.options.range;this.domainKey=an(kt),this.rangeKey=an(sn),this.rangeIndexMap?(Je&&!Je.range||this.rangeIndexMap.clear(),Je&&!Je.domain&&!Je.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new hn(this.options)}getRange(){return this.options.range}getDomain(){var Je,kt;return this.sortedDomain||({domain:Je,compare:kt}=this.options,this.sortedDomain=kt?[...Je].sort(kt):Je),this.sortedDomain}}function Dn(Zr){const{domain:Je,range:kt,paddingOuter:sn,paddingInner:Nn,flex:Bn,round:gn,align:On}=Zr;var dr=Je.length,Qr=0<(Qr=(Zr=dr)-(hr=Bn).length)?[...hr,...new Array(Qr).fill(1)]:Qr<0?hr.slice(0,Zr):hr,[Zr,hr]=kt,hr=hr-Zr,Li=hr/(2/dr*sn+1-1/dr*Nn);const ii=Li*Nn/dr;Li-=dr*ii;const Gi=function(xi){const Oo=Math.min(...xi);return xi.map(ra=>ra/Oo)}(Qr),ao=Li/Gi.reduce((xi,Oo)=>xi+Oo);var Qr=new z(Je.map((xi,Oo)=>(Oo=Gi[Oo]*ao,[xi,gn?Math.floor(Oo):Oo]))),ji=new z(Je.map((xi,Oo)=>(Oo=Gi[Oo]*ao+ii,[xi,gn?Math.floor(Oo):Oo]))),Li=Array.from(ji.values()).reduce((xi,Oo)=>xi+Oo),Zr=Zr+(hr-(Li-Li/dr*Nn))*On;let yo=gn?Math.round(Zr):Zr;var Mi=new Array(dr);for(let xi=0;xi<dr;xi+=1){Mi[xi]=(xo=yo,Math.round(1e12*xo)/1e12);var xo=Je[xi];yo+=ji.get(xo)}return{valueBandWidth:Qr,valueStep:ji,adjustedRange:Mi}}class Xn extends hn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ot,flex:[]}}constructor(Je){super(Je)}clone(){return new Xn(this.options)}getStep(Je){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:Je===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(Je)}getBandWidth(Je){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:Je===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(Je)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:Je,paddingInner:kt}=this.options;return 0<Je?Je:kt}getPaddingOuter(){var{padding:Je,paddingOuter:kt}=this.options;return 0<Je?Je:kt}rescale(){super.rescale();var{align:sn,domain:Je,range:Nn,round:Bn,flex:kt}=this.options,{adjustedRange:sn,valueBandWidth:Nn,valueStep:Bn}=function(hr){var On=hr.domain;if((On=On.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((dr=hr.flex)==null||!dr.length))return Dn(hr);var{range:dr,paddingOuter:hr,paddingInner:ii,round:Gi,align:ao}=hr;let Qr,ji,Li=dr[0];return dr=dr[1]-Li,Qr=dr/Math.max(1,2*hr+(On-ii)),Gi&&(Qr=Math.floor(Qr)),Li+=(dr-Qr*(On-ii))*ao,ji=Qr*(1-ii),Gi&&(Li=Math.round(Li),ji=Math.round(ji)),hr=new Array(On).fill(0).map((Zr,yo)=>Li+yo*Qr),{valueStep:Qr,valueBandWidth:ji,adjustedRange:hr}}({align:sn,range:Nn,round:Bn,flex:kt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:Je});this.valueStep=Bn,this.valueBandWidth=Nn,this.adjustedRange=sn}}const Gn=(Ne,Je,kt)=>{let sn,Nn,Bn=Ne,gn=Je;if(Bn===gn&&0<kt)return[Bn];let On=ze(Bn,gn,kt);if(On===0||!Number.isFinite(On))return[];if(0<On){Bn=Math.ceil(Bn/On),gn=Math.floor(gn/On),Nn=new Array(sn=Math.ceil(gn-Bn+1));for(let dr=0;dr<sn;dr+=1)Nn[dr]=(Bn+dr)*On}else{On=-On,Bn=Math.ceil(Bn*On),gn=Math.floor(gn*On),Nn=new Array(sn=Math.ceil(gn-Bn+1));for(let dr=0;dr<sn;dr+=1)Nn[dr]=(Bn+dr)/On}return Nn},dn=(sn,Bn,kt)=>{var[sn,Nn]=sn,[Bn,gn]=Bn;let On,dr;return Ae(dr=sn<Nn?(On=pt(sn,Nn),kt(Bn,gn)):(On=pt(Nn,sn),kt(gn,Bn)),On)},mt=(Ne,Je,kt)=>{const sn=Math.min(Ne.length,Je.length)-1,Nn=new Array(sn),Bn=new Array(sn);var gn=Ne[0]>Ne[sn],On=gn?[...Ne].reverse():Ne,dr=gn?[...Je].reverse():Je;for(let hr=0;hr<sn;hr+=1)Nn[hr]=pt(On[hr],On[hr+1]),Bn[hr]=kt(dr[hr],dr[hr+1]);return hr=>{var ii=function(ao,Qr,ji,Li,Zr){let yo=ji||0,Mi=Li||ao.length;for(var xo=Zr||(Oo=>Oo);yo<Mi;){var xi=Math.floor((yo+Mi)/2);xo(ao[xi])>Qr?Mi=xi:yo=xi+1}return yo}(Ne,hr,1,sn)-1,Gi=Nn[ii];return Ae(Bn[ii],Gi)(hr)}},Ct=(Ne,Je,kt,sn)=>(2<Math.min(Ne.length,Je.length)?mt:dn)(Ne,Je,sn?Pe:kt);class Cn extends ue{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Wt,tickCount:5}}map(Je){return we(Je)?this.output(Je):this.options.unknown}invert(Je){return we(Je)?this.input(Je):this.options.unknown}nice(){var Je,kt,sn,Nn;this.options.nice&&([Je,kt,sn,...Nn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(Je,kt,sn,...Nn))}getTicks(){var Je=this.options.tickMethod,[kt,sn,Nn,...Bn]=this.getTickMethodOptions();return Je(kt,sn,Nn,...Bn)}getTickMethodOptions(){var{domain:Je,tickCount:kt}=this.options;return[Je[0],Je[Je.length-1],kt]}chooseNice(){return St}rescale(){this.nice();var[Je,kt]=this.chooseTransforms();this.composeOutput(Je,this.chooseClamp(Je)),this.composeInput(Je,kt,this.chooseClamp(kt))}chooseClamp(sn){var{clamp:kt,range:Nn}=this.options,sn=this.options.domain.map(sn),Nn=Math.min(sn.length,Nn.length);if(kt){kt=sn[0],sn=sn[Nn-1];const Bn=sn<kt?sn:kt,gn=sn<kt?kt:sn;return On=>Math.min(Math.max(Bn,On),gn)}return Le}composeOutput(Je,kt){var{domain:gn,range:sn,round:Nn,interpolate:Bn}=this.options,gn=Ct(gn.map(Je),sn,Bn,Nn);this.output=Ae(gn,kt,Je)}composeInput(Je,kt,sn){var{domain:Nn,range:Bn}=this.options,Bn=Ct(Bn,Nn.map(Je),Wt);this.input=Ae(kt,sn,Bn)}}class Pn extends Cn{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Pt,tickMethod:Gn,tickCount:5}}chooseTransforms(){return[Le,Le]}clone(){return new Pn(this.options)}}class Zn extends Xn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ot,paddingInner:1,paddingOuter:0}}constructor(Je){super(Je)}getPaddingInner(){return 1}clone(){return new Zn(this.options)}update(Je){super.update(Je)}getPaddingOuter(){return this.options.padding}}function ht(Ne,Je){for(var kt=[],sn=0,Nn=Ne.length;sn<Nn;sn++)kt.push(Ne[sn].substr(0,Je));return kt}var ye,Be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rt=["January","February","March","April","May","June","July","August","September","October","November","December"],Mt=ht(rt,3);(function(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];for(var sn=0,Nn=Je;sn<Nn.length;sn++){var Bn,gn=Nn[sn];for(Bn in gn)Ne[Bn]=gn[Bn]}})({},{dayNamesShort:ht(Be,3),dayNames:Be,monthNamesShort:Mt,monthNames:rt,amPm:["am","pm"],DoFn:function(Ne){return Ne+["th","st","nd","rd"][3<Ne%10?0:(Ne-Ne%10!=10?1:0)*Ne%10]}});var Ot;let En=ye=class extends Pn{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Le,tickMethod:Gn,tickCount:5}}constructor(Ne){super(Ne)}clone(){return new ye(this.options)}};En=ye=function(Ne,Je,kt,sn){var Nn,Bn=arguments.length,gn=Bn<3?Je:sn===null?sn=Object.getOwnPropertyDescriptor(Je,kt):sn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gn=Reflect.decorate(Ne,Je,kt,sn);else for(var On=Ne.length-1;0<=On;On--)(Nn=Ne[On])&&(gn=(Bn<3?Nn(gn):3<Bn?Nn(Je,kt,gn):Nn(Je,kt))||gn);return 3<Bn&&gn&&Object.defineProperty(Je,kt,gn),gn}([nt(function(Ne){return[Ne(0),Ne(1)]},Je=>{var[Je,kt]=Je;return Ae(Wt(0,1),pt(Je,kt))})],En);let $n=Ot=class extends Pn{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Le,tickMethod:Gn,tickCount:5}}constructor(Ne){super(Ne)}clone(){return new Ot(this.options)}};$n=Ot=function(Ne,Je,kt,sn){var Nn,Bn=arguments.length,gn=Bn<3?Je:sn===null?sn=Object.getOwnPropertyDescriptor(Je,kt):sn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gn=Reflect.decorate(Ne,Je,kt,sn);else for(var On=Ne.length-1;0<=On;On--)(Nn=Ne[On])&&(gn=(Bn<3?Nn(gn):3<Bn?Nn(Je,kt,gn):Nn(Je,kt))||gn);return 3<Bn&&gn&&Object.defineProperty(Je,kt,gn),gn}([nt(function(Ne){return[Ne(0),Ne(.5),Ne(1)]},Ne=>{const[Je,kt,sn]=Ne,Nn=Ae(Wt(0,.5),pt(Je,kt)),Bn=Ae(Wt(.5,1),pt(kt,sn));return gn=>(Je>sn?gn<kt?Bn:Nn:gn<kt?Nn:Bn)(gn)})],$n);function yr(Ne,Je,kt,sn,Nn){var Bn=new Pn({range:[Je,Je+sn]}),gn=new Pn({range:[kt,kt+Nn]});return{transform:function(hr){var hr=Z(hr,2),dr=hr[0],hr=hr[1];return[Bn.map(dr),gn.map(hr)]},untransform:function(hr){var hr=Z(hr,2),dr=hr[0],hr=hr[1];return[Bn.invert(dr),gn.invert(hr)]}}}function qn(Ne,Je,kt,sn,Nn){return(0,Z(Ne,1)[0])(Je,kt,sn,Nn)}function Ce(Ne,Je,kt,sn,Nn){return Z(Ne,1)[0]}function xe(dr,Je,kt,sn,Nn){var Bn=(dr=Z(dr,4))[0],gn=dr[1],On=dr[2],dr=dr[3],hr=new Pn({range:[On,dr]}),ii=new Pn({range:[Bn,gn]}),Gi=1<(On=Nn/sn)?1:On,ao=1<On?1/On:1;return{transform:function(Li){var Li=Z(Li,2),ji=Li[0],Li=Li[1],ji=ii.map(ji),Li=hr.map(Li);return[.5*(Li*Math.cos(ji)*Gi)+.5,.5*(Li*Math.sin(ji)*ao)+.5]},untransform:function(Zr){var Zr=Z(Zr,2),ji=Zr[0],Zr=Zr[1],ji=2*(ji-.5)/Gi,Zr=2*(Zr-.5)/ao,Li=Math.sqrt(Math.pow(ji,2)+Math.pow(Zr,2)),Zr=lt(Math.atan2(Zr,ji),Bn,gn);return[ii.invert(Zr),hr.invert(Li)]}}}function ke(Ne,Je,kt,sn,Nn){return{transform:function(gn){var gn=Z(gn,2),On=gn[0];return[gn[1],On]},untransform:function(gn){var gn=Z(gn,2),On=gn[0];return[gn[1],On]}}}function et(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];return Qn.apply(void 0,E([[-1,-1]],Z(Je),!1))}function Tt(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];return Qn.apply(void 0,E([[-1,1]],Z(Je),!1))}function Yt(Ne){for(var Je=[],kt=1;kt<arguments.length;kt++)Je[kt-1]=arguments[kt];return Qn.apply(void 0,E([[1,-1]],Z(Je),!1))}function pn(gn,Je,kt,sn,Nn){var Bn,gn=Z(gn,1)[0],On=fe();return On=On,gn=gn,Bn=Math.sin(gn),gn=Math.cos(gn),On[0]=gn,On[1]=Bn,On[2]=0,On[3]=-Bn,On[4]=gn,On[5]=0,On[6]=0,On[7]=0,On[8]=1,On}function _t(Ne,Je,kt,sn,Nn){var Bn=(Ne=Z(Ne,4))[0],gn=Ne[1],On=Ne[2],dr=(Ne[3]-On)/(+gn/(2*Math.PI)+1),hr=dr/(2*Math.PI),ii=new Pn({range:[On,On+.99*dr]}),Gi=new Pn({range:[Bn,gn]}),ao=1<(Ne=Nn/sn)?1:Ne,Qr=1<Ne?1/Ne:1;return{transform:function(Zr){var Zr=Z(Zr,2),Li=Zr[0],Zr=Zr[1],Li=Gi.map(Li),Zr=ii.map(Zr);return[.5*(Math.cos(Li)*(hr*Li+Zr)*ao)+.5,.5*(Math.sin(Li)*(hr*Li+Zr)*Qr)+.5]},untransform:function(Zr){var Zr=Z(Zr,2),yo=Zr[0],Zr=Zr[1],yo=2*(yo-.5)/ao,Zr=2*(Zr-.5)/Qr,Li=Math.sqrt(Math.pow(yo,2)+Math.pow(Zr,2)),Zr=lt(Math.atan2(Zr,yo)+Math.floor(Li/dr)*Math.PI*2,Bn,gn),yo=Li-hr*Zr;return[Gi.invert(Zr),ii.invert(yo)]}}}function qt(dr,Je,kt,sn,Nn){var Bn=(dr=Z(dr,4))[0],gn=dr[1],On=dr[2],dr=dr[3],hr=new Pn({range:[On,dr]});return{transform:function(ii){for(var Gi=[],ao=ii.length,Qr=new Zn({domain:new Array(ao).fill(0).map(function(yo,Mi){return Mi}),range:[Bn,gn]}),ji=0;ji<ao;ji++){var Zr=ii[ji],Li=Qr.map(ji),Zr=hr.map(Zr);Gi.push(Li,Zr)}return Gi},untransform:function(ii){for(var Gi=[],ao=0;ao<ii.length;ao+=2){var Qr=ii[ao+1];Gi.push(hr.invert(Qr))}return Gi}}}var Qn=function(gn,Je,kt,sn,Nn){var gn=Z(gn,2),Bn=gn[0],gn=gn[1],On=fe();return Bn=[Bn,gn],(gn=On)[0]=Bn[0],gn[1]=0,gn[2]=0,gn[3]=0,gn[4]=Bn[1],gn[5]=0,gn[6]=0,gn[7]=0,gn[8]=1,gn};function _r(Ne){return 1/Math.tan(Ne)}function Vr(Ne,Je,kt,sn,Nn){var Bn=_r(Z(Ne,1)[0]);return{transform:function(dr){var dr=Z(dr,2),On=dr[0],dr=dr[1];return[On+dr*Bn,dr]},untransform:function(dr){var dr=Z(dr,2),On=dr[0],dr=dr[1];return[On-dr*Bn,dr]}}}function pr(Ne,Je,kt,sn,Nn){var Bn=_r(Z(Ne,1)[0]);return{transform:function(On){var On=Z(On,2),dr=On[0];return[dr,On[1]+dr*Bn]},untransform:function(On){var On=Z(On,2),dr=On[0];return[dr,On[1]-dr*Bn]}}}function Ur(Ne,Je,kt,On,gn){var Bn=Ne<Je,gn=(Bn?Je-On:gn-Je)||gn-On,On=Bn?-1:1;return On*gn*(kt+1)/(kt+gn/((Ne-Je)*On))+Je}function mi(Ne,Je,kt,sn,gn){var Bn=Ne<Je,gn=(Bn?Je-sn:gn-Je)||gn-sn;return gn/(gn*(kt+1)/(Ne-Je)-kt*(Bn?-1:1))+Je}function wi(Ne,Je,kt){return kt?new Pn({range:[0,1],domain:[0,Je]}).map(Ne):Ne}function Sr(On,Je,kt,sn,Nn){var Bn=(On=Z(On,3))[0],gn=On[1],On=On[2],dr=wi(Bn,sn,On!==void 0&&On);return{transform:function(Gi){var Gi=Z(Gi,2),ii=Gi[0],Gi=Gi[1];return[Ur(ii,dr,gn,0,1),Gi]},untransform:function(Gi){var Gi=Z(Gi,2),ii=Gi[0],Gi=Gi[1];return[mi(ii,dr,gn,0,1),Gi]}}}function Ti(On,Je,kt,sn,Nn){var Bn=(On=Z(On,3))[0],gn=On[1],On=On[2],dr=wi(Bn,Nn,On!==void 0&&On);return{transform:function(hr){return hr=Z(hr,2),[hr[0],Ur(hr[1],dr,gn,0,1)]},untransform:function(hr){return hr=Z(hr,2),[hr[0],mi(hr[1],dr,gn,0,1)]}}}function hi(hr,Je,kt,sn,Nn){var Bn=(hr=Z(hr,5))[0],gn=hr[1],On=hr[2],dr=hr[3],hr=hr[4],ii=wi(Bn,sn,hr=hr!==void 0&&hr),Gi=wi(gn,Nn,hr);return{transform:function(ji){var ji=Z(ji,2),Qr=ji[0],ji=ji[1];return[Ur(Qr,ii,On,0,1),Ur(ji,Gi,dr,0,1)]},untransform:function(ji){var ji=Z(ji,2),Qr=ji[0],ji=ji[1];return[mi(Qr,ii,On,0,1),mi(ji,Gi,dr,0,1)]}}}function si(hr,Je,kt,sn,Nn){var Bn=(hr=Z(hr,5))[0],gn=hr[1],On=hr[2],dr=hr[3],hr=(hr=hr[4])!==void 0&&hr,ii=new Pn({range:[0,sn]}),Gi=new Pn({range:[0,Nn]}),ao=hr?Bn:ii.map(Bn),Qr=hr?gn:Gi.map(gn);return{transform:function(Zr){var Zr=Z(Zr,2),Li=Zr[0],Zr=Zr[1],yo=ii.map(Li)-ao,Mi=Gi.map(Zr)-Qr,xo=Math.sqrt(yo*yo+Mi*Mi);return On<xo?[Li,Zr]:(Li=Ur(xo,0,dr,0,On),Zr=Math.atan2(Mi,yo),xo=ao+Li*Math.cos(Zr),Mi=Qr+Li*Math.sin(Zr),[ii.invert(xo),Gi.invert(Mi)])},untransform:function(Zr){var Zr=Z(Zr,2),Li=Zr[0],Zr=Zr[1],yo=ii.map(Li)-ao,Mi=Gi.map(Zr)-Qr,xo=Math.sqrt(yo*yo+Mi*Mi);return On<xo?[Li,Zr]:(Li=mi(xo,0,dr,0,On),Zr=Math.atan2(Mi,yo),xo=ao+Li*Math.cos(Zr),Mi=Qr+Li*Math.sin(Zr),[ii.invert(xo),Gi.invert(Mi)])}}}function Mo(Ne,Je,kt,sn,Nn,Bn,gn){var On=new Pn({range:[Je,Je+Nn]}),dr=new Pn({range:[kt,kt+Bn]}),hr=new Pn({range:[sn,sn+gn]});return{transform:function(Qr){var Qr=Z(Qr,3),Gi=Qr[0],ao=Qr[1],Qr=Qr[2];return[On.map(Gi),dr.map(ao),hr.map(Qr)]},untransform:function(Qr){var Qr=Z(Qr,3),Gi=Qr[0],ao=Qr[1],Qr=Qr[2];return[On.invert(Gi),dr.invert(ao),hr.invert(Qr)]}}}function bi(ii,Je,kt,sn,Nn,Bn,gn){var On,dr=(ii=Z(ii,3))[0],hr=ii[1],ii=ii[2];return On=bt(),dr=[dr,hr,ii],On[0]=1,On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=1,On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=1,On[11]=0,On[12]=dr[0],On[13]=dr[1],On[14]=dr[2],On[15]=1,On}function na(Ne,Je,kt,sn,Nn,Bn,gn){return{transform:function(dr){var dr=Z(dr,3),hr=dr[0];return[dr[1],hr,dr[2]]},untransform:function(dr){var dr=Z(dr,3),hr=dr[0];return[dr[1],hr,dr[2]]}}}function _a(ii,Je,kt,sn,Nn,Bn,gn){var On,dr=(ii=Z(ii,3))[0],hr=ii[1],ii=ii[2];return On=bt(),dr=[dr,hr,ii],On[0]=dr[0],On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=dr[1],On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=dr[2],On[11]=0,On[12]=0,On[13]=0,On[14]=0,On[15]=1,On}Ro.prototype.update=function(Ne){this.options=me({},this.options,Ne),this.recoordinate()},Ro.prototype.clone=function(){return new Ro(this.options)},Ro.prototype.getOptions=function(){return this.options},Ro.prototype.clear=function(){this.update({transformations:[]})},Ro.prototype.getSize=function(){var Ne=this.options;return[Ne.width,Ne.height]},Ro.prototype.getCenter=function(){var Ne=this.options,Je=Ne.x,kt=Ne.y;return[(2*Je+Ne.width)/2,(2*kt+Ne.height)/2]},Ro.prototype.transform=function(){for(var Ne=[],Je=0;Je<arguments.length;Je++)Ne[Je]=arguments[Je];var kt=this.options.transformations;return this.update({transformations:E(E([],Z(kt),!1),[E([],Z(Ne),!1)],!1)}),this},Ro.prototype.map=function(Ne){return this.output(Ne)},Ro.prototype.invert=function(Ne){return this.input(Ne)},Ro.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Ro.prototype.compose=function(Ne){function Je(xi,Oo){var ra;On.push((Oo=Oo===void 0?!0:Oo)?(ra=xi,function(Ha){for(var ia=[],Wo=0;Wo<Ha.length-1;Wo+=2){var Fa=[Ha[Wo],Ha[Wo+1]],Fa=ra(Fa);ia.push.apply(ia,E([],Z(Fa),!1))}return ia}):xi)}var kt,sn,Nn=(Ne=Ne===void 0?!1:Ne)?E([],Z(this.options.transformations),!1).reverse():this.options.transformations,Bn=Ne?function(xi){return xi.untransform}:function(xi){return xi.transform},gn=[],On=[];try{for(var dr=J(Nn),hr=dr.next();!hr.done;hr=dr.next()){var ii,Gi,ao,Qr,ji,Li,Zr=Z(hr.value),yo=Zr[0],Mi=Zr.slice(1),xo=this.transformers[yo];xo&&(Gi=(ii=this.options).x,ao=ii.y,Qr=ii.width,ji=ii.height,ct(Li=xo(E([],Z(Mi),!1),Gi,ao,Qr,ji))?gn.push(Li):(gn.length&&(Je(this.createMatrixTransform(gn,Ne)),gn.splice(0,gn.length)),Je(Bn(Li)||Le,yo!=="parallel")))}}catch(xi){kt={error:xi}}finally{try{hr&&!hr.done&&(sn=dr.return)&&sn.call(dr)}finally{if(kt)throw kt.error}}return gn.length&&Je(this.createMatrixTransform(gn,Ne)),Nt.apply(void 0,E([],Z(On),!1))},Ro.prototype.createMatrixTransform=function(Ne,Je){var kt,sn,Nn,Bn,gn,On,dr,hr,ii,Gi,ao,Qr,ji=fe();return Je&&Ne.reverse(),Ne.forEach(function(Li){return He(ji,ji,Li)}),Je&&(Je=Ne=ji,(Qr=new Oe(9))[0]=Je[0],Qr[1]=Je[1],Qr[2]=Je[2],Qr[3]=Je[3],Qr[4]=Je[4],Qr[5]=Je[5],Qr[6]=Je[6],Qr[7]=Je[7],Qr[8]=Je[8],Qr=(Je=Qr)[0],kt=Je[1],sn=Je[2],Nn=Je[3],Bn=Je[4],gn=Je[5],On=Je[6],dr=Je[7],hr=(Je=Je[8])*Bn-gn*dr,ao=Qr*hr+kt*(ii=-Je*Nn+gn*On)+sn*(Gi=dr*Nn-Bn*On))&&(Ne[0]=hr*(ao=1/ao),Ne[1]=(-Je*kt+sn*dr)*ao,Ne[2]=(gn*kt-sn*Bn)*ao,Ne[3]=ii*ao,Ne[4]=(Je*Qr-sn*On)*ao,Ne[5]=(-gn*Qr+sn*Nn)*ao,Ne[6]=Gi*ao,Ne[7]=(-dr*Qr+kt*On)*ao,Ne[8]=(Bn*Qr-kt*Nn)*ao),function(Oo){var Zr,yo,Mi,xo,xi,Oo=[Oo[0],Oo[1],1];return Mi=ji,xo=(yo=Zr=Oo)[0],xi=yo[1],yo=yo[2],Zr[0]=xo*Mi[0]+xi*Mi[3]+yo*Mi[6],Zr[1]=xo*Mi[1]+xi*Mi[4]+yo*Mi[7],Zr[2]=xo*Mi[2]+xi*Mi[5]+yo*Mi[8],[Oo[0],Oo[1]]}},Be=Ro;function Ro(Ne){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:yr,translate:Ie,custom:qn,matrix:Ce,polar:xe,transpose:ke,scale:Qn,"shear.x":Vr,"shear.y":pr,reflect:et,"reflect.x":Tt,"reflect.y":Yt,rotate:pn,helix:_t,parallel:qt,fisheye:hi,"fisheye.x":Sr,"fisheye.y":Ti,"fisheye.circular":si},this.update(Ne)}qo.prototype.update=function(Ne){this.options=me({},this.options,Ne),this.recoordinate()},qo.prototype.clone=function(){return new qo(this.options)},qo.prototype.getOptions=function(){return this.options},qo.prototype.clear=function(){this.update({transformations:[]})},qo.prototype.getSize=function(){var Ne=this.options;return[Ne.width,Ne.height,Ne.depth]},qo.prototype.getCenter=function(){var Ne=this.options,Je=Ne.x,kt=Ne.y,sn=Ne.z;return[(2*Je+Ne.width)/2,(2*kt+Ne.height)/2,(2*sn+Ne.depth)/2]},qo.prototype.transform=function(){for(var Ne=[],Je=0;Je<arguments.length;Je++)Ne[Je]=arguments[Je];var kt=this.options.transformations;return this.update({transformations:E(E([],Z(kt),!1),[E([],Z(Ne),!1)],!1)}),this},qo.prototype.map=function(Ne){return this.output(Ne)},qo.prototype.invert=function(Ne){return this.input(Ne)},qo.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},qo.prototype.compose=function(Ne){function Je(ra,Ha){var ia;On.push((Ha=Ha===void 0?!0:Ha)?(ia=ra,function(Wo){for(var Fa=[],cs=0;cs<Wo.length-1;cs+=3){var wt=[Wo[cs],Wo[cs+1],Wo[cs+2]],wt=ia(wt);Fa.push.apply(Fa,E([],Z(wt),!1))}return Fa}):ra)}var kt,sn,Nn=(Ne=Ne===void 0?!1:Ne)?E([],Z(this.options.transformations),!1).reverse():this.options.transformations,Bn=Ne?function(ra){return ra.untransform}:function(ra){return ra.transform},gn=[],On=[];try{for(var dr=J(Nn),hr=dr.next();!hr.done;hr=dr.next()){var ii,Gi,ao,Qr,ji,Li,Zr,yo,Mi=Z(hr.value),xo=Mi[0],xi=Mi.slice(1),Oo=this.transformers[xo];Oo&&(Gi=(ii=this.options).x,ao=ii.y,Qr=ii.z,ji=ii.width,Li=ii.height,Zr=ii.depth,ct(yo=Oo(E([],Z(xi),!1),Gi,ao,Qr,ji,Li,Zr))?gn.push(yo):(gn.length&&(Je(this.createMatrixTransform(gn,Ne)),gn.splice(0,gn.length)),Je(Bn(yo)||Le,!0)))}}catch(ra){kt={error:ra}}finally{try{hr&&!hr.done&&(sn=dr.return)&&sn.call(dr)}finally{if(kt)throw kt.error}}return gn.length&&Je(this.createMatrixTransform(gn,Ne)),Nt.apply(void 0,E([],Z(On),!1))},qo.prototype.createMatrixTransform=function(Ne,Je){var kt,sn,Nn,Bn,gn,On,dr,hr,ii,Gi,ao,Qr,ji,Li,Zr,yo,Mi,xo,xi,Oo,ra,Ha,ia,Wo,Fa,cs,wt,Zt,Un=bt();return Je&&Ne.reverse(),Ne.forEach(function(Ir){return dt(Un,Un,Ir)}),Je&&(Je=Ne=Un,(Zt=new Oe(16))[0]=Je[0],Zt[1]=Je[1],Zt[2]=Je[2],Zt[3]=Je[3],Zt[4]=Je[4],Zt[5]=Je[5],Zt[6]=Je[6],Zt[7]=Je[7],Zt[8]=Je[8],Zt[9]=Je[9],Zt[10]=Je[10],Zt[11]=Je[11],Zt[12]=Je[12],Zt[13]=Je[13],Zt[14]=Je[14],Zt[15]=Je[15],Zt=(Je=Zt)[0],kt=Je[1],sn=Je[2],Nn=Je[3],Bn=Je[4],gn=Je[5],On=Je[6],dr=Je[7],hr=Je[8],ii=Je[9],Gi=Je[10],ao=Je[11],Qr=Je[12],ji=Je[13],Li=Je[14],Je=Je[15],wt=(Zr=Zt*gn-kt*Bn)*(cs=Gi*Je-ao*Li)-(yo=Zt*On-sn*Bn)*(Fa=ii*Je-ao*ji)+(Mi=Zt*dr-Nn*Bn)*(Wo=ii*Li-Gi*ji)+(xo=kt*On-sn*gn)*(ia=hr*Je-ao*Qr)-(xi=kt*dr-Nn*gn)*(Ha=hr*Li-Gi*Qr)+(Oo=sn*dr-Nn*On)*(ra=hr*ji-ii*Qr))&&(Ne[0]=(gn*cs-On*Fa+dr*Wo)*(wt=1/wt),Ne[1]=(sn*Fa-kt*cs-Nn*Wo)*wt,Ne[2]=(ji*Oo-Li*xi+Je*xo)*wt,Ne[3]=(Gi*xi-ii*Oo-ao*xo)*wt,Ne[4]=(On*ia-Bn*cs-dr*Ha)*wt,Ne[5]=(Zt*cs-sn*ia+Nn*Ha)*wt,Ne[6]=(Li*Mi-Qr*Oo-Je*yo)*wt,Ne[7]=(hr*Oo-Gi*Mi+ao*yo)*wt,Ne[8]=(Bn*Fa-gn*ia+dr*ra)*wt,Ne[9]=(kt*ia-Zt*Fa-Nn*ra)*wt,Ne[10]=(Qr*xi-ji*Mi+Je*Zr)*wt,Ne[11]=(ii*Mi-hr*xi-ao*Zr)*wt,Ne[12]=(gn*Ha-Bn*Wo-On*ra)*wt,Ne[13]=(Zt*Wo-kt*Ha+sn*ra)*wt,Ne[14]=(ji*yo-Qr*xo-Li*Zr)*wt,Ne[15]=(hr*xo-ii*yo+Gi*Zr)*wt),function(fl){var Ci,oo,Yo,ns,Ds,Us,fl=[fl[0],fl[1],fl[2],1];return Yo=Un,ns=(oo=Ci=fl)[0],Ds=oo[1],Us=oo[2],oo=oo[3],Ci[0]=Yo[0]*ns+Yo[4]*Ds+Yo[8]*Us+Yo[12]*oo,Ci[1]=Yo[1]*ns+Yo[5]*Ds+Yo[9]*Us+Yo[13]*oo,Ci[2]=Yo[2]*ns+Yo[6]*Ds+Yo[10]*Us+Yo[14]*oo,Ci[3]=Yo[3]*ns+Yo[7]*Ds+Yo[11]*Us+Yo[15]*oo,[fl[0],fl[1],fl[2]]}},Mt=qo;function qo(Ne){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Mo,translate3D:bi,scale3D:_a,transpose3D:na},this.update(Ne)}D.Coordinate=Be,D.Coordinate3D=Mt,Object.defineProperty(D,"__esModule",{value:!0})})},90857:function(Ht){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function J(){}Object.create&&(J.prototype=Object.create(null),new J().__proto__||(D=!1));function Z(se,ae,Se){this.fn=se,this.context=ae,this.once=Se||!1}function E(se,ae,Se,oe,Ge){if(typeof Se!="function")throw new TypeError("The listener must be a function");var ee=new Z(Se,oe||se,Ge),me=D?D+ae:ae;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],ee]:se._events[me].push(ee):(se._events[me]=ee,se._eventsCount++),se}function ve(se,ae){--se._eventsCount===0?se._events=new J:delete se._events[ae]}function te(){this._events=new J,this._eventsCount=0}te.prototype.eventNames=function(){var ae=[],Se,oe;if(this._eventsCount===0)return ae;for(oe in Se=this._events)W.call(Se,oe)&&ae.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ae.concat(Object.getOwnPropertySymbols(Se)):ae},te.prototype.listeners=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,ee=oe.length,me=new Array(ee);Ge<ee;Ge++)me[Ge]=oe[Ge].fn;return me},te.prototype.listenerCount=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];return oe?oe.fn?1:oe.length:0},te.prototype.emit=function(ae,Se,oe,Ge,ee,me){var Le=D?D+ae:ae;if(!this._events[Le])return!1;var be=this._events[Le],Oe=arguments.length,fe,He;if(be.fn){switch(be.once&&this.removeListener(ae,be.fn,void 0,!0),Oe){case 1:return be.fn.call(be.context),!0;case 2:return be.fn.call(be.context,Se),!0;case 3:return be.fn.call(be.context,Se,oe),!0;case 4:return be.fn.call(be.context,Se,oe,Ge),!0;case 5:return be.fn.call(be.context,Se,oe,Ge,ee),!0;case 6:return be.fn.call(be.context,Se,oe,Ge,ee,me),!0}for(He=1,fe=new Array(Oe-1);He<Oe;He++)fe[He-1]=arguments[He];be.fn.apply(be.context,fe)}else{var bt=be.length,dt;for(He=0;He<bt;He++)switch(be[He].once&&this.removeListener(ae,be[He].fn,void 0,!0),Oe){case 1:be[He].fn.call(be[He].context);break;case 2:be[He].fn.call(be[He].context,Se);break;case 3:be[He].fn.call(be[He].context,Se,oe);break;case 4:be[He].fn.call(be[He].context,Se,oe,Ge);break;default:if(!fe)for(dt=1,fe=new Array(Oe-1);dt<Oe;dt++)fe[dt-1]=arguments[dt];be[He].fn.apply(be[He].context,fe)}}return!0},te.prototype.on=function(ae,Se,oe){return E(this,ae,Se,oe,!1)},te.prototype.once=function(ae,Se,oe){return E(this,ae,Se,oe,!0)},te.prototype.removeListener=function(ae,Se,oe,Ge){var ee=D?D+ae:ae;if(!this._events[ee])return this;if(!Se)return ve(this,ee),this;var me=this._events[ee];if(me.fn)me.fn===Se&&(!Ge||me.once)&&(!oe||me.context===oe)&&ve(this,ee);else{for(var Le=0,be=[],Oe=me.length;Le<Oe;Le++)(me[Le].fn!==Se||Ge&&!me[Le].once||oe&&me[Le].context!==oe)&&be.push(me[Le]);be.length?this._events[ee]=be.length===1?be[0]:be:ve(this,ee)}return this},te.prototype.removeAllListeners=function(ae){var Se;return ae?(Se=D?D+ae:ae,this._events[Se]&&ve(this,Se)):(this._events=new J,this._eventsCount=0),this},te.prototype.off=te.prototype.removeListener,te.prototype.addListener=te.prototype.on,te.prefixed=D,te.EventEmitter=te,Ht.exports=te},38554:function(Ht){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function J(){}Object.create&&(J.prototype=Object.create(null),new J().__proto__||(D=!1));function Z(se,ae,Se){this.fn=se,this.context=ae,this.once=Se||!1}function E(se,ae,Se,oe,Ge){if(typeof Se!="function")throw new TypeError("The listener must be a function");var ee=new Z(Se,oe||se,Ge),me=D?D+ae:ae;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],ee]:se._events[me].push(ee):(se._events[me]=ee,se._eventsCount++),se}function ve(se,ae){--se._eventsCount===0?se._events=new J:delete se._events[ae]}function te(){this._events=new J,this._eventsCount=0}te.prototype.eventNames=function(){var ae=[],Se,oe;if(this._eventsCount===0)return ae;for(oe in Se=this._events)W.call(Se,oe)&&ae.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ae.concat(Object.getOwnPropertySymbols(Se)):ae},te.prototype.listeners=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,ee=oe.length,me=new Array(ee);Ge<ee;Ge++)me[Ge]=oe[Ge].fn;return me},te.prototype.listenerCount=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];return oe?oe.fn?1:oe.length:0},te.prototype.emit=function(ae,Se,oe,Ge,ee,me){var Le=D?D+ae:ae;if(!this._events[Le])return!1;var be=this._events[Le],Oe=arguments.length,fe,He;if(be.fn){switch(be.once&&this.removeListener(ae,be.fn,void 0,!0),Oe){case 1:return be.fn.call(be.context),!0;case 2:return be.fn.call(be.context,Se),!0;case 3:return be.fn.call(be.context,Se,oe),!0;case 4:return be.fn.call(be.context,Se,oe,Ge),!0;case 5:return be.fn.call(be.context,Se,oe,Ge,ee),!0;case 6:return be.fn.call(be.context,Se,oe,Ge,ee,me),!0}for(He=1,fe=new Array(Oe-1);He<Oe;He++)fe[He-1]=arguments[He];be.fn.apply(be.context,fe)}else{var bt=be.length,dt;for(He=0;He<bt;He++)switch(be[He].once&&this.removeListener(ae,be[He].fn,void 0,!0),Oe){case 1:be[He].fn.call(be[He].context);break;case 2:be[He].fn.call(be[He].context,Se);break;case 3:be[He].fn.call(be[He].context,Se,oe);break;case 4:be[He].fn.call(be[He].context,Se,oe,Ge);break;default:if(!fe)for(dt=1,fe=new Array(Oe-1);dt<Oe;dt++)fe[dt-1]=arguments[dt];be[He].fn.apply(be[He].context,fe)}}return!0},te.prototype.on=function(ae,Se,oe){return E(this,ae,Se,oe,!1)},te.prototype.once=function(ae,Se,oe){return E(this,ae,Se,oe,!0)},te.prototype.removeListener=function(ae,Se,oe,Ge){var ee=D?D+ae:ae;if(!this._events[ee])return this;if(!Se)return ve(this,ee),this;var me=this._events[ee];if(me.fn)me.fn===Se&&(!Ge||me.once)&&(!oe||me.context===oe)&&ve(this,ee);else{for(var Le=0,be=[],Oe=me.length;Le<Oe;Le++)(me[Le].fn!==Se||Ge&&!me[Le].once||oe&&me[Le].context!==oe)&&be.push(me[Le]);be.length?this._events[ee]=be.length===1?be[0]:be:ve(this,ee)}return this},te.prototype.removeAllListeners=function(ae){var Se;return ae?(Se=D?D+ae:ae,this._events[Se]&&ve(this,Se)):(this._events=new J,this._eventsCount=0),this},te.prototype.off=te.prototype.removeListener,te.prototype.addListener=te.prototype.on,te.prefixed=D,te.EventEmitter=te,Ht.exports=te},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Ht){try{let oe=function(){te||(te=!0,E())},Ge=function(){try{ve.documentElement.doScroll("left")}catch(ee){return void setTimeout(Ge,50)}oe()};var ae=oe,Se=Ge,D=(D=document.getElementsByTagName("script"))[D.length-1],W=D.getAttribute("data-injectcss"),D=D.getAttribute("data-disable-injectsvg");if(!D){var J,Z,E,ve,te,se=function(ee,me){me.parentNode.insertBefore(ee,me)};if(W&&!Ht.__iconfont__svg__cssinject__){Ht.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(ee){console&&console.log(ee)}}J=function(){var ee,me=document.createElement("div");me.innerHTML=Ht._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(ee=document.body).firstChild?se(me,ee.firstChild):ee.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(J,0):(Z=function(){document.removeEventListener("DOMContentLoaded",Z,!1),J()},document.addEventListener("DOMContentLoaded",Z,!1)):document.attachEvent&&(E=J,ve=Ht.document,te=!1,Ge(),ve.onreadystatechange=function(){ve.readyState=="complete"&&(ve.onreadystatechange=null,oe())})}}catch(oe){}}(window)},39827:function(Ht,W,D){"use strict";D.d(W,{GC:function(){return z},h0:function(){return rn},lv:function(){return kn},lo:function(){return zt},kw:function(){return Kt},Or:function(){return yn},KD:function(){return Pe},I9:function(){return ue},lE:function(){return Pt},d:function(){return lr},n3:function(){return Th},vY:function(){return Qe},P7:function(){return Sh},yn:function(){return Wt},ee:function(){return Bt},v2:function(){return On},e7:function(){return cl},Hp:function(){return Pd},gl:function(){return te},cO:function(){return Md},Vb:function(){return Oe}});var J=D(1413),Z=D(4942),E=D(8543);let ve=function(ne){return ne.Normal="normal",ne.PostProcessing="post-processing",ne}({}),te=function(ne){return ne[ne.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ne[ne.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ne[ne.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",ne[ne.POINTS=0]="POINTS",ne[ne.LINES=1]="LINES",ne[ne.LINE_LOOP=2]="LINE_LOOP",ne[ne.LINE_STRIP=3]="LINE_STRIP",ne[ne.TRIANGLES=4]="TRIANGLES",ne[ne.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ne[ne.TRIANGLE_FAN=6]="TRIANGLE_FAN",ne[ne.ZERO=0]="ZERO",ne[ne.ONE=1]="ONE",ne[ne.SRC_COLOR=768]="SRC_COLOR",ne[ne.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ne[ne.SRC_ALPHA=770]="SRC_ALPHA",ne[ne.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ne[ne.DST_ALPHA=772]="DST_ALPHA",ne[ne.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ne[ne.DST_COLOR=774]="DST_COLOR",ne[ne.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ne[ne.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ne[ne.FUNC_ADD=32774]="FUNC_ADD",ne[ne.BLEND_EQUATION=32777]="BLEND_EQUATION",ne[ne.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",ne[ne.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",ne[ne.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",ne[ne.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",ne[ne.MAX_EXT=32776]="MAX_EXT",ne[ne.MIN_EXT=32775]="MIN_EXT",ne[ne.BLEND_DST_RGB=32968]="BLEND_DST_RGB",ne[ne.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",ne[ne.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",ne[ne.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",ne[ne.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ne[ne.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ne[ne.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ne[ne.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",ne[ne.BLEND_COLOR=32773]="BLEND_COLOR",ne[ne.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ne[ne.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ne[ne.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",ne[ne.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",ne[ne.STREAM_DRAW=35040]="STREAM_DRAW",ne[ne.STATIC_DRAW=35044]="STATIC_DRAW",ne[ne.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ne[ne.BUFFER_SIZE=34660]="BUFFER_SIZE",ne[ne.BUFFER_USAGE=34661]="BUFFER_USAGE",ne[ne.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",ne[ne.FRONT=1028]="FRONT",ne[ne.BACK=1029]="BACK",ne[ne.FRONT_AND_BACK=1032]="FRONT_AND_BACK",ne[ne.CULL_FACE=2884]="CULL_FACE",ne[ne.BLEND=3042]="BLEND",ne[ne.DITHER=3024]="DITHER",ne[ne.STENCIL_TEST=2960]="STENCIL_TEST",ne[ne.DEPTH_TEST=2929]="DEPTH_TEST",ne[ne.SCISSOR_TEST=3089]="SCISSOR_TEST",ne[ne.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",ne[ne.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",ne[ne.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",ne[ne.NO_ERROR=0]="NO_ERROR",ne[ne.INVALID_ENUM=1280]="INVALID_ENUM",ne[ne.INVALID_VALUE=1281]="INVALID_VALUE",ne[ne.INVALID_OPERATION=1282]="INVALID_OPERATION",ne[ne.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",ne[ne.CW=2304]="CW",ne[ne.CCW=2305]="CCW",ne[ne.LINE_WIDTH=2849]="LINE_WIDTH",ne[ne.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",ne[ne.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",ne[ne.CULL_FACE_MODE=2885]="CULL_FACE_MODE",ne[ne.FRONT_FACE=2886]="FRONT_FACE",ne[ne.DEPTH_RANGE=2928]="DEPTH_RANGE",ne[ne.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",ne[ne.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",ne[ne.DEPTH_FUNC=2932]="DEPTH_FUNC",ne[ne.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",ne[ne.STENCIL_FUNC=2962]="STENCIL_FUNC",ne[ne.STENCIL_FAIL=2964]="STENCIL_FAIL",ne[ne.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",ne[ne.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",ne[ne.STENCIL_REF=2967]="STENCIL_REF",ne[ne.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",ne[ne.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",ne[ne.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",ne[ne.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",ne[ne.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",ne[ne.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",ne[ne.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",ne[ne.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",ne[ne.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",ne[ne.VIEWPORT=2978]="VIEWPORT",ne[ne.SCISSOR_BOX=3088]="SCISSOR_BOX",ne[ne.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",ne[ne.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",ne[ne.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",ne[ne.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",ne[ne.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",ne[ne.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",ne[ne.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",ne[ne.RED_BITS=3410]="RED_BITS",ne[ne.GREEN_BITS=3411]="GREEN_BITS",ne[ne.BLUE_BITS=3412]="BLUE_BITS",ne[ne.ALPHA_BITS=3413]="ALPHA_BITS",ne[ne.DEPTH_BITS=3414]="DEPTH_BITS",ne[ne.STENCIL_BITS=3415]="STENCIL_BITS",ne[ne.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",ne[ne.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",ne[ne.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",ne[ne.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",ne[ne.SAMPLES=32937]="SAMPLES",ne[ne.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",ne[ne.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",ne[ne.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",ne[ne.DONT_CARE=4352]="DONT_CARE",ne[ne.FASTEST=4353]="FASTEST",ne[ne.NICEST=4354]="NICEST",ne[ne.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",ne[ne.BYTE=5120]="BYTE",ne[ne.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ne[ne.SHORT=5122]="SHORT",ne[ne.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ne[ne.INT=5124]="INT",ne[ne.UNSIGNED_INT=5125]="UNSIGNED_INT",ne[ne.FLOAT=5126]="FLOAT",ne[ne.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ne[ne.ALPHA=6406]="ALPHA",ne[ne.RGB=6407]="RGB",ne[ne.RGBA=6408]="RGBA",ne[ne.LUMINANCE=6409]="LUMINANCE",ne[ne.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ne[ne.RED=6403]="RED",ne[ne.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ne[ne.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ne[ne.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ne[ne.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ne[ne.VERTEX_SHADER=35633]="VERTEX_SHADER",ne[ne.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",ne[ne.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",ne[ne.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",ne[ne.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",ne[ne.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",ne[ne.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",ne[ne.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",ne[ne.SHADER_TYPE=35663]="SHADER_TYPE",ne[ne.DELETE_STATUS=35712]="DELETE_STATUS",ne[ne.LINK_STATUS=35714]="LINK_STATUS",ne[ne.VALIDATE_STATUS=35715]="VALIDATE_STATUS",ne[ne.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",ne[ne.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",ne[ne.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",ne[ne.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",ne[ne.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",ne[ne.NEVER=512]="NEVER",ne[ne.LESS=513]="LESS",ne[ne.EQUAL=514]="EQUAL",ne[ne.LEQUAL=515]="LEQUAL",ne[ne.GREATER=516]="GREATER",ne[ne.NOTEQUAL=517]="NOTEQUAL",ne[ne.GEQUAL=518]="GEQUAL",ne[ne.ALWAYS=519]="ALWAYS",ne[ne.KEEP=7680]="KEEP",ne[ne.REPLACE=7681]="REPLACE",ne[ne.INCR=7682]="INCR",ne[ne.DECR=7683]="DECR",ne[ne.INVERT=5386]="INVERT",ne[ne.INCR_WRAP=34055]="INCR_WRAP",ne[ne.DECR_WRAP=34056]="DECR_WRAP",ne[ne.VENDOR=7936]="VENDOR",ne[ne.RENDERER=7937]="RENDERER",ne[ne.VERSION=7938]="VERSION",ne[ne.NEAREST=9728]="NEAREST",ne[ne.LINEAR=9729]="LINEAR",ne[ne.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ne[ne.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ne[ne.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ne[ne.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",ne[ne.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",ne[ne.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",ne[ne.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",ne[ne.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",ne[ne.TEXTURE_2D=3553]="TEXTURE_2D",ne[ne.TEXTURE=5890]="TEXTURE",ne[ne.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ne[ne.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",ne[ne.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ne[ne.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ne[ne.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ne[ne.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ne[ne.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ne[ne.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ne[ne.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",ne[ne.TEXTURE0=33984]="TEXTURE0",ne[ne.TEXTURE1=33985]="TEXTURE1",ne[ne.TEXTURE2=33986]="TEXTURE2",ne[ne.TEXTURE3=33987]="TEXTURE3",ne[ne.TEXTURE4=33988]="TEXTURE4",ne[ne.TEXTURE5=33989]="TEXTURE5",ne[ne.TEXTURE6=33990]="TEXTURE6",ne[ne.TEXTURE7=33991]="TEXTURE7",ne[ne.TEXTURE8=33992]="TEXTURE8",ne[ne.TEXTURE9=33993]="TEXTURE9",ne[ne.TEXTURE10=33994]="TEXTURE10",ne[ne.TEXTURE11=33995]="TEXTURE11",ne[ne.TEXTURE12=33996]="TEXTURE12",ne[ne.TEXTURE13=33997]="TEXTURE13",ne[ne.TEXTURE14=33998]="TEXTURE14",ne[ne.TEXTURE15=33999]="TEXTURE15",ne[ne.TEXTURE16=34e3]="TEXTURE16",ne[ne.TEXTURE17=34001]="TEXTURE17",ne[ne.TEXTURE18=34002]="TEXTURE18",ne[ne.TEXTURE19=34003]="TEXTURE19",ne[ne.TEXTURE20=34004]="TEXTURE20",ne[ne.TEXTURE21=34005]="TEXTURE21",ne[ne.TEXTURE22=34006]="TEXTURE22",ne[ne.TEXTURE23=34007]="TEXTURE23",ne[ne.TEXTURE24=34008]="TEXTURE24",ne[ne.TEXTURE25=34009]="TEXTURE25",ne[ne.TEXTURE26=34010]="TEXTURE26",ne[ne.TEXTURE27=34011]="TEXTURE27",ne[ne.TEXTURE28=34012]="TEXTURE28",ne[ne.TEXTURE29=34013]="TEXTURE29",ne[ne.TEXTURE30=34014]="TEXTURE30",ne[ne.TEXTURE31=34015]="TEXTURE31",ne[ne.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",ne[ne.REPEAT=10497]="REPEAT",ne[ne.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ne[ne.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ne[ne.FLOAT_VEC2=35664]="FLOAT_VEC2",ne[ne.FLOAT_VEC3=35665]="FLOAT_VEC3",ne[ne.FLOAT_VEC4=35666]="FLOAT_VEC4",ne[ne.INT_VEC2=35667]="INT_VEC2",ne[ne.INT_VEC3=35668]="INT_VEC3",ne[ne.INT_VEC4=35669]="INT_VEC4",ne[ne.BOOL=35670]="BOOL",ne[ne.BOOL_VEC2=35671]="BOOL_VEC2",ne[ne.BOOL_VEC3=35672]="BOOL_VEC3",ne[ne.BOOL_VEC4=35673]="BOOL_VEC4",ne[ne.FLOAT_MAT2=35674]="FLOAT_MAT2",ne[ne.FLOAT_MAT3=35675]="FLOAT_MAT3",ne[ne.FLOAT_MAT4=35676]="FLOAT_MAT4",ne[ne.SAMPLER_2D=35678]="SAMPLER_2D",ne[ne.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ne[ne.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",ne[ne.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",ne[ne.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",ne[ne.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",ne[ne.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",ne[ne.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",ne[ne.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",ne[ne.COMPILE_STATUS=35713]="COMPILE_STATUS",ne[ne.LOW_FLOAT=36336]="LOW_FLOAT",ne[ne.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",ne[ne.HIGH_FLOAT=36338]="HIGH_FLOAT",ne[ne.LOW_INT=36339]="LOW_INT",ne[ne.MEDIUM_INT=36340]="MEDIUM_INT",ne[ne.HIGH_INT=36341]="HIGH_INT",ne[ne.FRAMEBUFFER=36160]="FRAMEBUFFER",ne[ne.RENDERBUFFER=36161]="RENDERBUFFER",ne[ne.RGBA4=32854]="RGBA4",ne[ne.RGB5_A1=32855]="RGB5_A1",ne[ne.RGB565=36194]="RGB565",ne[ne.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ne[ne.STENCIL_INDEX=6401]="STENCIL_INDEX",ne[ne.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ne[ne.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ne[ne.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",ne[ne.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",ne[ne.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",ne[ne.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",ne[ne.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",ne[ne.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",ne[ne.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",ne[ne.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",ne[ne.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",ne[ne.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",ne[ne.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",ne[ne.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",ne[ne.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",ne[ne.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ne[ne.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",ne[ne.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",ne[ne.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",ne[ne.NONE=0]="NONE",ne[ne.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",ne[ne.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",ne[ne.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",ne[ne.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",ne[ne.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",ne[ne.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",ne[ne.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",ne[ne.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",ne[ne.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",ne[ne.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",ne[ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",ne[ne.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",ne[ne.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",ne[ne.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",ne}({});const se=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:ae,isNil:Se,upperFirst:oe}=E.lodashUtil;class Ge{constructor(){(0,Z.Z)(this,"shaderModuleService",void 0),(0,Z.Z)(this,"rendererService",void 0),(0,Z.Z)(this,"config",void 0),(0,Z.Z)(this,"quad",se),(0,Z.Z)(this,"enabled",!0),(0,Z.Z)(this,"renderToScreen",!1),(0,Z.Z)(this,"model",void 0),(0,Z.Z)(this,"name",void 0),(0,Z.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(_e){this.name=_e}getType(){return ve.PostProcessing}init(_e,qe){this.config=qe,this.rendererService=_e.getContainer().rendererService,this.shaderModuleService=_e.getContainer().shaderModuleService;const{createAttribute:un,createBuffer:Y,createModel:tr}=this.rendererService,{vs:Rr,fs:Di,uniforms:zi}=this.setupShaders();this.model=tr({vs:Rr,fs:Di,attributes:{a_Position:un({buffer:Y({data:[-4,-4,4,-4,0,4],type:te.FLOAT}),size:2})},uniforms:(0,J.Z)((0,J.Z)({u_Texture:null},zi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(_e,qe){const un=_e.multiPassRenderer.getPostProcessor(),{useFramebuffer:Y,getViewportSize:tr,clear:Rr}=this.rendererService,{width:Di,height:zi}=tr();Y(this.renderToScreen?null:un.getWriteFBO(),()=>{Rr({framebuffer:un.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const lo=(0,J.Z)({u_BloomFinal:0,u_Texture:un.getReadFBO(),u_ViewportSize:[Di,zi]},this.convertOptionsToUniforms(this.optionsToUpdate));qe&&(lo.u_BloomFinal=1,lo.u_Texture2=qe),this.model.draw({uniforms:lo})})}isEnabled(){return this.enabled}setEnabled(_e){this.enabled=_e}setRenderToScreen(_e){this.renderToScreen=_e}updateOptions(_e){this.optionsToUpdate=(0,J.Z)((0,J.Z)({},this.optionsToUpdate),_e)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(_e){const qe={};return Object.keys(_e).forEach(un=>{Se(_e[un])||(qe[`u_${oe(ae(un))}`]=_e[un])}),qe}}function ee(ne){let _e=0;switch(ne){case"vec2":case"ivec2":_e=2;break;case"vec3":case"ivec3":_e=3;break;case"vec4":case"ivec4":case"mat2":_e=4;break;case"mat3":_e=9;break;case"mat4":_e=16;break;default:}return _e}const me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Le(ne,_e=!1){const qe={};return ne=ne.replace(me,(un,Y,tr)=>{const Rr=tr.split(":"),Di=Rr[0].trim();let zi="";switch(Rr.length>1&&(zi=Rr[1].trim()),Y){case"bool":zi=zi==="true";break;case"float":case"int":zi=Number(zi);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":zi?zi=zi.replace("[","").replace("]","").split(",").reduce((lo,uo)=>(lo.push(Number(uo.trim())),lo),[]):zi=new Array(ee(Y)).fill(0);break;default:}return qe[Di]=zi,`${_e?"uniform ":""}${Y} ${Di};
`}),{content:ne,uniforms:qe}}function be(ne){let{content:_e,uniforms:qe}=Le(ne,!0);return _e=_e.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(un,Y,tr)=>{tr=tr.trim().replace(/^.*$/gm,zi=>`uniform ${zi}`);const{content:Rr,uniforms:Di}=Le(tr);return Object.assign(qe,Di),`${Y}{
${Rr}
};`}),{content:_e,uniforms:qe}}function Oe(ne){const _e={};return ne.replace(me,(qe,un,Y)=>{const tr=Y.trim();return _e[tr]?"":(_e[tr]=!0,`uniform ${un} ${tr};
`)})}const fe=null;function He(ne){return fe.indexOf(ne)}const{clamp:bt}=E.lodashUtil,dt=2,Nt=4,ct=64,lt=128,Ie=256,Ae=512,pt=8192,ut=16384,Et=32768,cn=null,ze=131072,St=262144,we=524288,nt=1048576,Xe=2097152,Ze=4194304,Rt=8388608,yt=16777216,Me=null;function Gt(ne,_e){return ne=bt(Math.floor(ne),0,255),_e=bt(Math.floor(_e),0,255),256*ne+_e}function ln(ne){const{color:_e,radius:qe,tileX:un,tileY:Y,shape:tr,opacity:Rr,stroke:Di,strokeWidth:zi,strokeOpacity:lo}=ne,uo=[],wa=[],No=[],Aa=[Gt(_e[0],_e[1]),Gt(_e[2],_e[3])],os=[Gt(Di[0],Di[1]),Gt(Di[2],Di[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([ga,Ra])=>{uo.push([...Aa,(ga+1)*Rt+(Ra+1)*Xe+getShapeIndex(tr)*ze+qe,(un+512)*we+(Y+512)*ct]),wa.push([...os,zi,lo]),No.push([Rr,0,0,0])}),{packedBuffer:uo,packedBuffer2:wa,packedBuffer3:No}}function Ln(ne,_e){if(ne===0&&!_e)return 0;if(ne===1&&_e)return 4294967295;const qe=_e?1:0,un=Math.floor(ne*127);return un*Me+qe*yt+un*ze+qe*cn+un*Ae+qe*Ie+un*dt+qe}const kn={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let lr=function(ne){return ne.TOPRIGHT="topright",ne.TOPLEFT="topleft",ne.BOTTOMRIGHT="bottomright",ne.BOTTOMLEFT="bottomleft",ne.TOPCENTER="topcenter",ne.BOTTOMCENTER="bottomcenter",ne.LEFTCENTER="leftcenter",ne.RIGHTCENTER="rightcenter",ne.LEFTTOP="lefttop",ne.RIGHTTOP="righttop",ne.LEFTBOTTOM="leftbottom",ne.RIGHTBOTTOM="rightbottom",ne}({}),zt=function(ne){return ne[ne.LNGLAT=1]="LNGLAT",ne[ne.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",ne[ne.VECTOR_TILE=3]="VECTOR_TILE",ne[ne.IDENTITY=4]="IDENTITY",ne[ne.METER_OFFSET=5]="METER_OFFSET",ne}({});const Kt={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"};var yn={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Kn=function(ne){return ne.Hover="hover",ne.Click="click",ne.Select="select",ne.Active="active",ne.Drag="drag",ne}({}),rn=function(ne){return ne.normal="normal",ne.additive="additive",ne.subtractive="subtractive",ne.min="min",ne.max="max",ne.none="none",ne}({}),Wt=function(ne){return ne.MULTIPLE="MULTIPLE",ne.SINGLE="SINGLE",ne}({}),Pt=function(ne){return ne.AND="and",ne.OR="or",ne}({}),Pe=function(ne){return ne.INIT="init",ne.UPDATE="update",ne}({}),Qe=function(ne){return ne.LINEAR="linear",ne.SEQUENTIAL="sequential",ne.POWER="power",ne.LOG="log",ne.IDENTITY="identity",ne.TIME="time",ne.QUANTILE="quantile",ne.QUANTIZE="quantize",ne.THRESHOLD="threshold",ne.CAT="cat",ne.DIVERGING="diverging",ne.CUSTOM="threshold",ne}({}),Bt=function(ne){return ne.CONSTANT="constant",ne.VARIABLE="variable",ne}({}),z=function(ne){return ne[ne.Attribute=0]="Attribute",ne[ne.InstancedAttribute=1]="InstancedAttribute",ne[ne.Uniform=2]="Uniform",ne}({});const ue=["mapload","mapchange","mapAfterFrameChange"];var ot=D(49296),le=D.n(ot),$t=D(26729),an=D.n($t);const hn=30;function Dn({characterSet:ne,getFontWidth:_e,fontHeight:qe,buffer:un,maxCanvasWidth:Y,mapping:tr={},xOffset:Rr=0,yOffset:Di=0}){let zi=0,lo=Rr;Array.from(ne).forEach((wa,No)=>{if(!tr[wa]){const Aa=_e(wa,No);lo+hn>Y&&(lo=0,zi++),tr[wa]={x:lo,y:Di+zi*hn,width:hn,height:hn,advance:Aa},lo+=hn}});const uo=qe+un*2;return{mapping:tr,xOffset:lo,yOffset:Di+zi*uo,canvasHeight:dn(Di+(zi+1)*uo)}}function Xn(ne,_e,qe){let un=0,Y=0,tr=0,Rr=[];const Di={};for(const lo of ne)if(!Di[lo.id]){const{size:uo}=lo;un+uo+_e>qe&&(Gn(Di,Rr,Y),un=0,Y=tr+Y+_e,tr=0,Rr=[]),Rr.push({icon:lo,xOffset:un}),un=un+uo+_e,tr=Math.max(tr,uo)}Rr.length>0&&Gn(Di,Rr,Y);const zi=dn(tr+Y+_e);return{mapping:Di,canvasHeight:zi}}function Gn(ne,_e,qe){for(const un of _e){const{icon:Y,xOffset:tr}=un;ne[Y.id]=(0,J.Z)((0,J.Z)({},Y),{},{x:tr,y:qe,image:Y.image,width:Y.width,height:Y.height})}}function dn(ne){return Math.pow(2,Math.ceil(Math.log2(ne)))}const mt=$n(),Ct="sans-serif",Cn="normal",Pn=24,Zn=3,ht=.25,ye=8,Be=1024,rt=1,Mt=1,Ot=3,En=null;function $n(){const ne=[];for(let _e=32;_e<128;_e++)ne.push(String.fromCharCode(_e));return ne}function yr(ne,_e,qe,un){ne.font=`${un} ${qe}px ${_e}`,ne.fillStyle="black",ne.textBaseline="middle"}function qn(ne,_e){for(let qe=0;qe<ne.length;qe++)_e.data[4*qe+3]=ne[qe]}class Ce extends $t.EventEmitter{constructor(..._e){super(..._e),(0,Z.Z)(this,"fontAtlas",void 0),(0,Z.Z)(this,"iconFontMap",void 0),(0,Z.Z)(this,"iconFontGlyphs",{}),(0,Z.Z)(this,"fontOptions",void 0),(0,Z.Z)(this,"key",void 0),(0,Z.Z)(this,"cache",new E.z6(Ot))}get scale(){return Mt}get canvas(){const _e=this.cache.get(this.key);return _e&&_e.data}get mapping(){const _e=this.cache.get(this.key);return _e&&_e.mapping||{}}getCanvasByKey(_e){const qe=this.cache.get(_e);return qe&&qe.data}getMappingByKey(_e){const qe=this.cache.get(_e);return qe&&qe.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Ct,fontWeight:Cn,characterSet:mt,fontSize:Pn,buffer:Zn,sdf:!0,cutoff:ht,radius:ye,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(_e){_e.forEach(qe=>{this.iconFontGlyphs[qe.name]=qe.unicode})}addIconFont(_e,qe){this.iconFontMap.set(_e,qe)}getIconFontKey(_e){return this.iconFontMap.get(_e)||_e}getGlyph(_e){return this.iconFontGlyphs[_e]?String.fromCharCode(parseInt(this.iconFontGlyphs[_e],16)):""}setFontOptions(_e){this.fontOptions=(0,J.Z)((0,J.Z)({},this.fontOptions),_e),this.key=this.getKey();const qe=this.getNewChars(this.key,this.fontOptions.characterSet),un=this.cache.get(this.key);if(un&&qe.length===0)return;const Y=this.generateFontAtlas(this.key,qe,un);this.fontAtlas=Y,this.cache.set(this.key,Y)}addFontFace(_e,qe){const un=document.createElement("style");un.type="text/css",un.innerText=`
        @font-face{
            font-family: '${_e}';
            src: url('${qe}') format('woff2'),
            url('${qe}') format('woff'),
            url('${qe}') format('truetype');
        }`,un.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${_e}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:_e})})}catch(Y){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Y)}},document.getElementsByTagName("head")[0].appendChild(un)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(_e,qe,un){const{fontFamily:Y,fontWeight:tr,fontSize:Rr,buffer:Di,sdf:zi,radius:lo,cutoff:uo,iconfont:wa}=this.fontOptions;let No=un&&un.data;No||(No=window.document.createElement("canvas"),No.width=Be);const Aa=No.getContext("2d",{willReadFrequently:!0});yr(Aa,Y,Rr,tr);const{mapping:os,canvasHeight:ga,xOffset:Ra,yOffset:Rs}=Dn((0,J.Z)({getFontWidth:Za=>Aa.measureText(Za).width,fontHeight:Rr*Mt,buffer:Di,characterSet:qe,maxCanvasWidth:Be},un&&{mapping:un.mapping,xOffset:un.xOffset,yOffset:un.yOffset})),ka=Aa.getImageData(0,0,No.width,No.height);if(No.height=ga,Aa.putImageData(ka,0,0),yr(Aa,Y,Rr,tr),zi){const Za=new(le())(Rr,Di,lo,uo,Y,tr),ms=Aa.getImageData(0,0,Za.size,Za.size);for(const nl of qe){if(wa){const Wa=String.fromCharCode(parseInt(nl.replace("&#x","").replace(";",""),16)),Rc=Za.draw(Wa);qn(Rc,ms)}else qn(Za.draw(nl),ms);Aa.putImageData(ms,os[nl].x,os[nl].y)}}else for(const Za of qe)Aa.fillText(Za,os[Za].x,os[Za].y+Rr*rt);return{xOffset:Ra,yOffset:Rs,mapping:os,data:No,width:No.width,height:No.height}}getKey(){const{fontFamily:_e,fontWeight:qe}=this.fontOptions;return`${_e}_${qe}`}getNewChars(_e,qe){const un=this.cache.get(_e);if(!un)return qe;const Y=[],tr=un.mapping,Rr=new Set(Object.keys(tr));return new Set(qe).forEach(zi=>{Rr.has(zi)||Y.push(zi)}),Y}}var xe=D(15861);const ke=3,et=1024,Tt=64;class Yt extends $t.EventEmitter{constructor(..._e){super(..._e),(0,Z.Z)(this,"canvasHeight",128),(0,Z.Z)(this,"texture",void 0),(0,Z.Z)(this,"canvas",void 0),(0,Z.Z)(this,"iconData",void 0),(0,Z.Z)(this,"iconMap",void 0),(0,Z.Z)(this,"ctx",void 0),(0,Z.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(_e,qe){var un=this;return(0,xe.Z)(function*(){let Y=new Image;un.loadingImageCount++,un.hasImage(_e)?console.warn("Image Id already exists"):un.iconData.push({id:_e,size:Tt}),un.updateIconMap(),Y=yield un.loadImage(qe);const tr=un.iconData.find(Rr=>Rr.id===_e);tr&&(tr.image=Y,tr.width=Y.width,tr.height=Y.height),un.update()})()}addImageMini(_e,qe,un){const Y=un.getSceneConfig().canvas;let tr=Y.createImage();if(this.loadingImageCount++,this.hasImage(_e))throw new Error("Image Id already exists");this.iconData.push({id:_e,size:Tt}),this.updateIconMap(),this.loadImageMini(qe,Y).then(Rr=>{tr=Rr;const Di=this.iconData.find(zi=>zi.id===_e);Di&&(Di.image=tr,Di.width=tr.width,Di.height=tr.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(_e){return this.iconMap.hasOwnProperty(_e)}removeImage(_e){this.hasImage(_e)&&(this.iconData=this.iconData.filter(qe=>qe.id!==_e),delete this.iconMap[_e],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(_e){return new Promise((qe,un)=>{if(_e instanceof HTMLImageElement){qe(_e);return}const Y=new Image;Y.crossOrigin="anonymous",Y.onload=()=>{qe(Y)},Y.onerror=()=>{un(new Error("Could not load image at "+_e))},Y.src=_e instanceof File?URL.createObjectURL(_e):_e})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=et,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(_e=>{const{x:qe,y:un,image:Y,width:tr=64,height:Rr=64}=this.iconMap[_e],zi=Math.max(tr,Rr)/Tt,lo=Rr/zi,uo=tr/zi;Y&&this.ctx.drawImage(Y,qe+(Tt-uo)/2,un+(Tt-lo)/2,uo,lo)})}updateIconMap(){const{mapping:_e,canvasHeight:qe}=Xn(this.iconData,ke,et);this.iconMap=_e,this.canvasHeight=qe}loadImageMini(_e,qe){return new Promise((un,Y)=>{const tr=qe.createImage();tr.crossOrigin="anonymous",tr.onload=()=>{un(tr)},tr.onerror=()=>{Y(new Error("Could not load image at "+_e))},tr.src=_e})}}var pn=D(85975);class _t{constructor(){(0,Z.Z)(this,"viewport",void 0),(0,Z.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Z.Z)(this,"viewMatrixInverse",void 0),(0,Z.Z)(this,"cameraPosition",void 0)}init(){}update(_e){this.viewport=_e,this.viewMatrixInverse=pn.create(),pn.invert(this.viewMatrixInverse,_e.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[_e,qe]=this.viewport.getCenter();return[_e,qe]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(_e,qe){return this.viewport.projectFlat(_e,qe)}setViewProjectionMatrix(_e){this.overridedViewProjectionMatrix=_e}}const qt={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Qn{constructor(){(0,Z.Z)(this,"container",void 0),(0,Z.Z)(this,"controlCorners",void 0),(0,Z.Z)(this,"controlContainer",void 0),(0,Z.Z)(this,"scene",void 0),(0,Z.Z)(this,"mapsService",void 0),(0,Z.Z)(this,"controls",[]),(0,Z.Z)(this,"unAddControls",[])}init(_e,qe){this.container=_e.container,this.scene=qe,this.mapsService=qe.mapService,this.initControlPos()}addControl(_e,qe){qe.mapService.map?(_e.addTo(this.scene),this.controls.push(_e)):this.unAddControls.push(_e)}getControlByName(_e){return this.controls.find(qe=>qe.controlOption.name===_e)}removeControl(_e){const qe=this.controls.indexOf(_e);return qe>-1&&this.controls.splice(qe,1),_e.remove(),this}addControls(){this.unAddControls.forEach(_e=>{_e.addTo(this.scene),this.controls.push(_e)}),this.unAddControls=[]}destroy(){for(const _e of this.controls)_e.remove();this.controls=[],this.clearControlPos()}initControlPos(){const _e=this.controlCorners={},qe="l7-",un=this.controlContainer=E.SO.create("div",qe+"control-container",this.container);function Y(Rr=[]){const Di=Rr.map(zi=>qe+zi).join(" ");_e[Rr.filter(zi=>!["row","column"].includes(zi)).join("")]=E.SO.create("div",Di,un)}function tr(Rr){return[...Rr.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),qt[Rr]]}Object.values(lr).forEach(Rr=>{Y(tr(Rr))}),this.checkCornerOverlap()}clearControlPos(){for(const _e in this.controlCorners)this.controlCorners[_e]&&E.SO.remove(this.controlCorners[_e]);this.controlContainer&&E.SO.remove(this.controlContainer)}checkCornerOverlap(){const _e=window.MutationObserver;if(_e)for(const qe of Object.keys(this.controlCorners)){const un=qe.match(/^(top|bottom)(left|right)$/);if(un){const[,Y,tr]=un,Rr=this.controlCorners[`${Y}${tr}`];new _e(([{target:zi}])=>{Rr&&(Rr.style[Y]=zi.clientHeight+"px")}).observe(this.controlCorners[`${tr}${Y}`],{childList:!0,attributes:!0})}}}}class _r{constructor(){(0,Z.Z)(this,"container",void 0),(0,Z.Z)(this,"scene",void 0),(0,Z.Z)(this,"mapsService",void 0),(0,Z.Z)(this,"markers",[]),(0,Z.Z)(this,"markerLayers",[]),(0,Z.Z)(this,"unAddMarkers",[]),(0,Z.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(_e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(_e),_e.addTo(this.scene)):this.unAddMarkerLayers.push(_e)}removeMarkerLayer(_e){_e.destroy(),this.markerLayers.indexOf(_e);const qe=this.markerLayers.indexOf(_e);qe>-1&&this.markerLayers.splice(qe,1)}addMarker(_e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(_e),_e.addTo(this.scene)):this.unAddMarkers.push(_e)}addMarkers(){this.unAddMarkers.forEach(_e=>{_e.addTo(this.scene),this.markers.push(_e)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(_e=>{this.markerLayers.push(_e),_e.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(_e){_e.remove(),this.markers.indexOf(_e);const qe=this.markers.indexOf(_e);qe>-1&&this.markers.splice(qe,1)}removeAllMarkers(){this.destroy()}init(_e){this.scene=_e,this.mapsService=_e.mapService}destroy(){this.markers.forEach(_e=>{_e.remove()}),this.markers=[],this.markerLayers.forEach(_e=>{_e.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(_e){_e.destroy()}}class Vr{constructor(){(0,Z.Z)(this,"scene",void 0),(0,Z.Z)(this,"mapsService",void 0),(0,Z.Z)(this,"popups",[]),(0,Z.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(_e){_e!=null&&_e.isOpen()&&_e.remove();const qe=this.popups.indexOf(_e);qe>-1&&this.popups.splice(qe,1);const un=this.unAddPopups.indexOf(_e);un>-1&&this.unAddPopups.splice(un,1)}destroy(){this.popups.forEach(_e=>_e.remove())}addPopup(_e){_e&&_e.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(qe=>{qe.getOptions().autoClose&&this.removePopup(qe)}),this.isMarkerReady?(_e.addTo(this.scene),this.popups.push(_e)):this.unAddPopups.push(_e),_e.on("close",()=>{this.removePopup(_e)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(_e=>{this.addPopup(_e),this.unAddPopups=[]})}init(_e){this.scene=_e,this.mapsService=_e.mapService}}var Ur={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:mi}=E.lodashUtil,wi={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Sr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Pt.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class Ti{constructor(){(0,Z.Z)(this,"sceneConfigCache",{}),(0,Z.Z)(this,"layerConfigCache",{}),(0,Z.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(_e){return this.sceneConfigCache[_e]}getSceneWarninfo(_e){return Ur[_e]}setSceneConfig(_e,qe){this.sceneConfigCache[_e]=(0,J.Z)((0,J.Z)({},wi),qe)}getLayerConfig(_e){return this.layerConfigCache[_e]}setLayerConfig(_e,qe,un){this.layerConfigCache[qe]=(0,J.Z)({},mi({},this.sceneConfigCache[_e],Sr,un))}getAttributeConfig(_e){return this.layerAttributeConfigCache[_e]}setAttributeConfig(_e,qe){this.layerAttributeConfigCache[_e]=(0,J.Z)((0,J.Z)({},this.layerAttributeConfigCache[_e]),qe)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var hi=D(98333);const si=Math.PI/180,Mo=512,bi=4003e4;function na({latitude:ne=0,zoom:_e=0,scale:qe,highPrecision:un=!1,flipY:Y=!1}){qe=qe!==void 0?qe:Math.pow(2,_e);const tr={},Rr=Mo*qe,Di=Math.cos(ne*si),zi=Rr/360,lo=zi/Di,uo=Rr/bi/Di;if(tr.pixelsPerMeter=[uo,-uo,uo],tr.metersPerPixel=[1/uo,-1/uo,1/uo],tr.pixelsPerDegree=[zi,-lo,uo],tr.degreesPerPixel=[1/zi,-1/lo,1/uo],un){const wa=si*Math.tan(ne*si)/Di,No=zi*wa/2,Aa=Rr/bi*wa,os=Aa/lo*uo;tr.pixelsPerDegree2=[0,-No,Aa],tr.pixelsPerMeter2=[os,0,os],Y&&(tr.pixelsPerDegree2[1]=-tr.pixelsPerDegree2[1],tr.pixelsPerMeter2[1]=-tr.pixelsPerMeter2[1])}return Y&&(tr.pixelsPerMeter[1]=-tr.pixelsPerMeter[1],tr.metersPerPixel[1]=-tr.metersPerPixel[1],tr.pixelsPerDegree[1]=-tr.pixelsPerDegree[1],tr.degreesPerPixel[1]=-tr.degreesPerPixel[1]),tr}const _a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class Ro{constructor(_e){(0,Z.Z)(this,"needRefresh",!0),(0,Z.Z)(this,"coordinateSystem",void 0),(0,Z.Z)(this,"viewportCenter",void 0),(0,Z.Z)(this,"viewportCenterProjection",void 0),(0,Z.Z)(this,"pixelsPerDegree",void 0),(0,Z.Z)(this,"pixelsPerDegree2",void 0),(0,Z.Z)(this,"pixelsPerMeter",void 0),this.cameraService=_e}refresh(_e){const qe=this.cameraService.getZoom(),un=_e||this.cameraService.getCenter(),{pixelsPerMeter:Y,pixelsPerDegree:tr}=na({latitude:un[1],zoom:qe});this.viewportCenter=un,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Y,this.pixelsPerDegree=tr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===zt.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===zt.LNGLAT_OFFSET&&this.calculateLnglatOffset(un,qe),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(_e){this.coordinateSystem=_e}getViewportCenter(){return this.viewportCenter}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(_e,qe,un,Y){const{pixelsPerMeter:tr,pixelsPerDegree:Rr,pixelsPerDegree2:Di}=na({latitude:_e[1],zoom:qe,scale:un,flipY:Y,highPrecision:!0});let zi=this.cameraService.getViewMatrix();const lo=this.cameraService.getProjectionMatrix();let uo=pn.multiply([],lo,zi);const wa=this.cameraService.projectFlat([Math.fround(_e[0]),Math.fround(_e[1])],Math.pow(2,qe));this.viewportCenterProjection=hi.fF([],[wa[0],wa[1],0,1],uo),zi=this.cameraService.getViewMatrixUncentered()||zi,uo=pn.multiply([],lo,zi),uo=pn.multiply([],uo,_a),this.cameraService.setViewProjectionMatrix(uo),this.pixelsPerMeter=tr,this.pixelsPerDegree=Rr,this.pixelsPerDegree2=Di}}class qo extends $t.EventEmitter{constructor(..._e){super(..._e),(0,Z.Z)(this,"renderMap",new Map),(0,Z.Z)(this,"enable",!1),(0,Z.Z)(this,"renderEnable",!1),(0,Z.Z)(this,"cacheLogs",{})}setEnable(_e){this.enable=!!_e}log(_e,qe){if(!this.enable)return;const un=_e.split(".");let Y=null;un.forEach((tr,Rr)=>{Y!==null?(Y[tr]||(Y[tr]={}),Rr!==un.length-1&&(Y=Y[tr])):(this.cacheLogs[tr]||(this.cacheLogs[tr]={}),Rr!==un.length-1&&(Y=this.cacheLogs[tr])),Rr===un.length-1&&(Y[tr]=(0,J.Z)((0,J.Z)({time:Date.now()},Y[tr]),qe))})}getLog(_e){switch(typeof _e){case"string":return this.cacheLogs[_e];case"object":return _e.map(qe=>this.cacheLogs[qe]).filter(qe=>qe!==void 0);case"undefined":return this.cacheLogs}}removeLog(_e){delete this.cacheLogs[_e]}generateRenderUid(){return this.renderEnable?(0,E.M8)():""}renderDebug(_e){this.renderEnable=_e}renderStart(_e){if(!this.renderEnable||!this.enable)return;const qe=this.renderMap.get(_e)||{};this.renderMap.set(_e,(0,J.Z)((0,J.Z)({},qe),{},{renderUid:_e,renderStart:Date.now()}))}renderEnd(_e){if(!this.renderEnable||!this.enable)return;const qe=this.renderMap.get(_e);if(qe){const un=qe.renderStart,Y=Date.now();this.emit("renderEnd",(0,J.Z)((0,J.Z)({},qe),{},{renderEnd:Y,renderDuration:Y-un})),this.renderMap.delete(_e)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var Ne=D(50840),Je=D.n(Ne);const kt={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class sn extends an(){get mapService(){return this.container.mapService}constructor(_e){super(),(0,Z.Z)(this,"indragging",!1),(0,Z.Z)(this,"hammertime",void 0),(0,Z.Z)(this,"lastClickTime",0),(0,Z.Z)(this,"lastClickXY",[-1,-1]),(0,Z.Z)(this,"clickTimer",void 0),(0,Z.Z)(this,"$containter",void 0),(0,Z.Z)(this,"onDrag",qe=>{const un=this.interactionEvent(qe);un.type=kt[un.type],un.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Kn.Drag,un)}),(0,Z.Z)(this,"onHammer",qe=>{qe.srcEvent.stopPropagation();const un=this.interactionEvent(qe);this.emit(Kn.Hover,un)}),(0,Z.Z)(this,"onTouch",qe=>{const un=qe.touches[0];this.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchstart"})}),(0,Z.Z)(this,"onTouchEnd",qe=>{if(qe.changedTouches.length>0){const un=qe.changedTouches[0];this.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchend"})}}),(0,Z.Z)(this,"onTouchMove",qe=>{const un=qe.changedTouches[0];this.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchmove"})}),(0,Z.Z)(this,"onHover",qe=>{const{clientX:un,clientY:Y}=qe;let tr=un,Rr=Y;const Di=qe.type,zi=this.mapService.getMapContainer();if(zi){const{top:uo,left:wa}=zi.getBoundingClientRect();tr=tr-wa-zi.clientLeft,Rr=Rr-uo-zi.clientTop}const lo=this.mapService.containerToLngLat([tr,Rr]);if(Di==="click"){this.isDoubleTap(tr,Rr,lo);return}if(Di==="touch"){this.isDoubleTap(tr,Rr,lo);return}Di!=="click"&&Di!=="dblclick"&&this.emit(Kn.Hover,{x:tr,y:Rr,lngLat:lo,type:Di,target:qe})}),this.container=_e}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Kn.Hover)}triggerHover({x:_e,y:qe}){this.emit(Kn.Hover,{x:_e,y:qe})}triggerSelect(_e){this.emit(Kn.Select,{featureId:_e})}triggerActive(_e){this.emit(Kn.Active,{featureId:_e})}addEventListenerOnMap(){const _e=this.mapService.getMapContainer();if(_e){const qe=new(Je()).Manager(_e);qe.add(new(Je()).Tap({event:"dblclick",taps:2})),qe.add(new(Je()).Tap({event:"click"})),qe.add(new(Je()).Pan({threshold:0,pointers:0})),qe.add(new(Je()).Press({})),qe.on("dblclick click",this.onHammer),qe.on("panstart panmove panend pancancel",this.onDrag),_e.addEventListener("touchstart",this.onTouch),_e.addEventListener("touchend",this.onTouchEnd),_e.addEventListener("mousemove",this.onHover),_e.addEventListener("touchmove",this.onTouchMove),_e.addEventListener("mousedown",this.onHover,!0),_e.addEventListener("mouseup",this.onHover),_e.addEventListener("contextmenu",this.onHover),this.hammertime=qe}}removeEventListenerOnMap(){const _e=this.mapService.getMapContainer();_e&&(_e.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),_e.removeEventListener("touchstart",this.onTouch),_e.removeEventListener("touchend",this.onTouchEnd),_e.removeEventListener("mousedown",this.onHover),_e.removeEventListener("mouseup",this.onHover),_e.removeEventListener("contextmenu",this.onHover))}interactionEvent(_e){const{type:qe,pointerType:un}=_e;let Y,tr;un==="touch"?(tr=Math.floor(_e.pointers[0].clientY),Y=Math.floor(_e.pointers[0].clientX)):(tr=Math.floor(_e.srcEvent.y),Y=Math.floor(_e.srcEvent.x));const Rr=this.mapService.getMapContainer();if(Rr){const{top:zi,left:lo}=Rr.getBoundingClientRect();Y-=lo,tr-=zi}const Di=this.mapService.containerToLngLat([Y,tr]);return{x:Y,y:tr,lngLat:Di,type:qe,target:_e.srcEvent}}isDoubleTap(_e,qe,un){const Y=new Date().getTime();let tr="click";Y-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-_e)<10&&Math.abs(this.lastClickXY[1]-qe)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),tr="dblclick",this.emit(Kn.Hover,{x:_e,y:qe,lngLat:un,type:tr})):(this.lastClickTime=Y,this.lastClickXY=[_e,qe],this.clickTimer=setTimeout(()=>{tr="click",this.emit(Kn.Hover,{x:_e,y:qe,lngLat:un,type:tr})},400))}}let Nn=0;function Bn(ne){let _e=ne;if(typeof ne=="string"&&(_e=document.getElementById(ne)),_e){const qe=document.createElement("div");return qe.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,qe.id=`l7-scene-${Nn++}`,qe.classList.add("l7-scene"),_e.appendChild(qe),qe}return null}function gn(ne){var _e;let qe=!0;if((ne==null||(_e=ne.target)===null||_e===void 0?void 0:_e.target)instanceof HTMLElement){var un;let tr=ne==null||(un=ne.target)===null||un===void 0?void 0:un.target;for(;tr;){var Y;const Rr=Array.from(tr.classList);if(Rr.includes("l7-marker")||Rr.includes("l7-popup")){qe=!1;break}tr=(Y=tr)===null||Y===void 0?void 0:Y.parentElement}}return qe}let On=function(ne){return ne[ne.SAMPLED=0]="SAMPLED",ne[ne.RENDER_TARGET=1]="RENDER_TARGET",ne}({});class dr{constructor(_e){var qe=this;(0,Z.Z)(this,"pickedColors",void 0),(0,Z.Z)(this,"pickedTileLayers",[]),(0,Z.Z)(this,"pickingFBO",void 0),(0,Z.Z)(this,"width",0),(0,Z.Z)(this,"height",0),(0,Z.Z)(this,"alreadyInPicking",!1),(0,Z.Z)(this,"pickBufferScale",1),(0,Z.Z)(this,"pickFromPickingFBO",function(){var un=(0,xe.Z)(function*(Y,{x:tr,y:Rr,lngLat:Di,type:zi,target:lo}){var uo;let wa=!1;const{readPixels:No,readPixelsAsync:Aa,getViewportSize:os,queryVerdorInfo:ga}=qe.rendererService,{width:Ra,height:Rs}=os(),{enableHighlight:ka,enableSelect:Za}=Y.getLayerConfig(),ms=tr*E.SO.DPR,nl=Rr*E.SO.DPR;if(ms>Ra-1*E.SO.DPR||ms<0||nl>Rs-1*E.SO.DPR||nl<0)return!1;let Wa;if(ga()==="WebGPU"?Wa=yield Aa({x:Math.floor(ms/qe.pickBufferScale),y:Math.floor((Rs-(Rr+1)*E.SO.DPR)/qe.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:qe.pickingFBO}):Wa=No({x:Math.floor(ms/qe.pickBufferScale),y:Math.floor((Rs-(Rr+1)*E.SO.DPR)/qe.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:qe.pickingFBO}),qe.pickedColors=Wa,Wa[0]!==0||Wa[1]!==0||Wa[2]!==0){const us=(0,E.W0)(Wa),Tu=Y.layerPickService.getFeatureById(us);us!==Y.getCurrentPickId()&&zi==="mousemove"&&(zi="mouseenter");const fu={x:tr,y:Rr,type:zi,lngLat:Di,featureId:us,feature:Tu,target:lo};Tu&&(wa=!0,Y.setCurrentPickId(us),qe.triggerHoverOnLayer(Y,fu))}else{const us={x:tr,y:Rr,lngLat:Di,type:Y.getCurrentPickId()!==null&&zi==="mousemove"?"mouseout":"un"+zi,featureId:null,target:lo,feature:null};qe.triggerHoverOnLayer(Y,(0,J.Z)((0,J.Z)({},us),{},{type:"unpick"})),qe.triggerHoverOnLayer(Y,us),Y.setCurrentPickId(null)}if(ka&&Y.layerPickService.highlightPickedFeature(Wa),Za&&zi==="click"&&((uo=Wa)===null||uo===void 0?void 0:uo.toString())!==[0,0,0,0].toString()){const us=(0,E.W0)(Wa);Y.getCurrentSelectedId()===null||us!==Y.getCurrentSelectedId()?(Y.layerPickService.selectFeature(Wa),Y.setCurrentSelectedId(us)):(Y.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),Y.setCurrentSelectedId(null))}return wa});return function(Y,tr){return un.apply(this,arguments)}}()),this.container=_e}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(_e){const{createTexture2D:qe,createFramebuffer:un,getViewportSize:Y}=this.rendererService;let{width:tr,height:Rr}=Y();this.pickBufferScale=this.configService.getSceneConfig(_e).pickBufferScale||1,tr=Math.round(tr/this.pickBufferScale),Rr=Math.round(Rr/this.pickBufferScale);const Di=qe({width:tr,height:Rr,usage:On.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=un({color:Di,depth:!0,width:tr,height:Rr}),this.interactionService.on(Kn.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(_e,qe,un){var Y=this;return(0,xe.Z)(function*(){const{useFramebufferAsync:tr,clear:Rr}=Y.rendererService;Y.resizePickingFBO(),_e.hooks.beforePickingEncode.call(),yield tr(Y.pickingFBO,(0,xe.Z)(function*(){Rr({framebuffer:Y.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),_e.renderModels({ispick:!0})})),_e.hooks.afterPickingEncode.call();const Di=yield Y.pickBox(_e,qe);un(Di)})()}pickBox(_e,qe){var un=this;return(0,xe.Z)(function*(){const[Y,tr,Rr,Di]=qe.map(Rs=>{const ka=Rs<0?0:Rs;return Math.floor(ka*E.SO.DPR/un.pickBufferScale)}),{readPixelsAsync:zi,getViewportSize:lo}=un.rendererService,{width:uo,height:wa}=lo();if(Y>(uo-1)*E.SO.DPR/un.pickBufferScale||Rr<0||tr>(wa-1)*E.SO.DPR/un.pickBufferScale||Di<0)return[];const No=Math.min(uo/un.pickBufferScale,Rr)-Y,Aa=Math.min(wa/un.pickBufferScale,Di)-tr,os=yield zi({x:Y,y:Math.floor(wa/un.pickBufferScale-(Di+1)),width:No,height:Aa,data:new Uint8Array(No*Aa*4),framebuffer:un.pickingFBO}),ga=[],Ra={};for(let Rs=0;Rs<os.length/4;Rs=Rs+1){const ka=os.slice(Rs*4,Rs*4+4),Za=(0,E.W0)(ka);if(Za!==-1&&!Ra[Za]){const ms=_e.layerPickService.getFeatureById(Za);ga.push((0,J.Z)((0,J.Z)({},ms),{},{pickedFeatureIdx:Za})),Ra[Za]=!0}}return ga})()}handleCursor(_e,qe){const{cursor:un="",cursorEnabled:Y}=_e.getLayerConfig();if(Y){const Rr=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Di=Rr==null?void 0:Rr.style.getPropertyValue("cursor");qe==="unmousemove"&&Di!==""?Rr==null||Rr.style.setProperty("cursor",""):qe==="mousemove"&&(Rr==null||Rr.style.setProperty("cursor",un))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(_e){var qe=this;return(0,xe.Z)(function*(){!qe.layerService.needPick(_e.type)||!qe.isPickingAllLayer()||(qe.alreadyInPicking=!0,yield qe.pickingLayers(_e),qe.layerService.renderLayers(),qe.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:_e}=this.rendererService,{width:qe,height:un}=_e();(this.width!==qe||this.height!==un)&&(this.pickingFBO.resize({width:Math.round(qe/this.pickBufferScale),height:Math.round(un/this.pickBufferScale)}),this.width=qe,this.height=un)}pickingLayers(_e){var qe=this;return(0,xe.Z)(function*(){const{clear:un,useFramebufferAsync:Y}=qe.rendererService;qe.resizePickingFBO();const tr=qe.layerService.getRenderList();for(const Rr of tr.filter(Di=>Di.needPick(_e.type)).reverse()){yield Y(qe.pickingFBO,(0,xe.Z)(function*(){un({framebuffer:qe.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Rr.layerPickService.pickRender(_e)}));const Di=yield qe.pickFromPickingFBO(Rr,_e);if(qe.layerService.pickedLayerId=Di?+Rr.id:-1,Di&&!Rr.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(_e,qe){gn(qe)&&(this.handleCursor(_e,qe.type),_e.emit(qe.type,qe))}}class hr{constructor(_e=!0){(0,Z.Z)(this,"autoStart",void 0),(0,Z.Z)(this,"startTime",0),(0,Z.Z)(this,"oldTime",0),(0,Z.Z)(this,"running",!1),(0,Z.Z)(this,"elapsedTime",0),this.autoStart=_e}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const qe=(typeof performance=="undefined"?Date:performance).now();_e=(qe-this.oldTime)/1e3,this.oldTime=qe,this.elapsedTime+=_e}return _e}}const{throttle:ii}=E.lodashUtil;class Gi extends $t.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(_e){super(),(0,Z.Z)(this,"pickedLayerId",-1),(0,Z.Z)(this,"clock",new hr),(0,Z.Z)(this,"alreadyInRendering",!1),(0,Z.Z)(this,"layers",[]),(0,Z.Z)(this,"layerList",[]),(0,Z.Z)(this,"layerRenderID",void 0),(0,Z.Z)(this,"sceneInited",!1),(0,Z.Z)(this,"animateInstanceCount",0),(0,Z.Z)(this,"shaderPicking",!0),(0,Z.Z)(this,"enableRender",!0),(0,Z.Z)(this,"reRender",ii(()=>{this.renderLayers()},32)),(0,Z.Z)(this,"throttleRenderLayers",ii(()=>{this.renderLayers()},16)),this.container=_e}needPick(_e){return this.updateLayerRenderList(),this.layerList.some(qe=>qe.needPick(_e))}add(_e){this.layers.push(_e),this.sceneInited&&_e.init().then(()=>{this.renderLayers()})}addMask(_e){this.sceneInited&&_e.init().then(()=>{this.renderLayers()})}initLayers(){var _e=this;return(0,xe.Z)(function*(){_e.sceneInited=!0,_e.layers.forEach(function(){var qe=(0,xe.Z)(function*(un){un.startInit||(yield un.init(),_e.updateLayerRenderList())});return function(un){return qe.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(_e){return this.layers.find(qe=>qe.id===_e)}getLayerByName(_e){return this.layers.find(qe=>qe.name===_e)}remove(_e,qe){var un=this;return(0,xe.Z)(function*(){qe?qe.layerChildren=qe.layerChildren.filter(Y=>Y!==_e):un.layers=un.layers.filter(Y=>Y!==_e),_e.destroy(),un.reRender(),un.emit("layerChange",un.layers)})()}removeAllLayers(){var _e=this;return(0,xe.Z)(function*(){_e.destroy(),_e.reRender()})()}setEnableRender(_e){this.enableRender=_e}renderLayers(){var _e=this;return(0,xe.Z)(function*(){if(_e.alreadyInRendering||!_e.enableRender)return;_e.updateLayerRenderList();const qe=_e.debugService.generateRenderUid();_e.debugService.renderStart(qe),_e.alreadyInRendering=!0,_e.clear();for(const un of _e.layerList)un.prerender();_e.renderService.beginFrame();for(const un of _e.layerList){const{enableMask:Y}=un.getLayerConfig();un.masks.filter(tr=>tr.inited).length>0&&Y&&_e.renderMask(un.masks),un.getLayerConfig().enableMultiPassRenderer?yield un.renderMultiPass():un.render()}_e.renderService.endFrame(),_e.debugService.renderEnd(qe),_e.alreadyInRendering=!1})()}renderMask(_e){let qe=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const un=_e.length>1?Wt.MULTIPLE:Wt.SINGLE;for(const Y of _e)Y.render({isStencil:!0,stencilType:un,stencilIndex:qe++})}beforeRenderData(_e){var qe=this;return(0,xe.Z)(function*(){(yield _e.hooks.beforeRenderData.promise())&&qe.renderLayers()})()}renderTileLayerMask(_e){let qe=0;const{enableMask:un=!0}=_e.getLayerConfig();let Y=_e.tileMask?1:0;const tr=_e.masks.filter(Di=>Di.inited);Y=Y+(un?tr.length:1);const Rr=Y>1?Wt.MULTIPLE:Wt.SINGLE;if((_e.tileMask||tr.length&&un)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),tr.length&&un)for(const Di of tr)Di.render({isStencil:!0,stencilType:Rr,stencilIndex:qe++});_e.tileMask&&_e.tileMask.render({isStencil:!0,stencilType:Rr,stencilIndex:qe++,stencilOperation:Pt.OR})}renderTileLayer(_e){var qe=this;return(0,xe.Z)(function*(){qe.renderTileLayerMask(_e),_e.getLayerConfig().enableMultiPassRenderer?yield _e.renderMultiPass():yield _e.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(_e=>_e.inited).filter(_e=>_e.isVisible()).sort((_e,qe)=>_e.zIndex-qe.zIndex).forEach(_e=>{this.layerList.push(_e)})}destroy(){this.layers.forEach(_e=>{_e.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const _e=(0,E.CI)(this.mapService.bgColor);this.renderService.clear({color:_e,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var ao=D(45987);const{isNil:Qr}=E.lodashUtil;class ji{constructor(_e){(0,Z.Z)(this,"name",void 0),(0,Z.Z)(this,"type",void 0),(0,Z.Z)(this,"scale",void 0),(0,Z.Z)(this,"descriptor",void 0),(0,Z.Z)(this,"featureBufferLayout",[]),(0,Z.Z)(this,"needRescale",!1),(0,Z.Z)(this,"needRemapping",!1),(0,Z.Z)(this,"needRegenerateVertices",!1),(0,Z.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,Z.Z)(this,"vertexAttribute",void 0),(0,Z.Z)(this,"defaultCallback",qe=>{if(qe.length===0){var un;return((un=this.scale)===null||un===void 0?void 0:un.defaultValues)||[]}return qe.map((Y,tr)=>{var Rr;return((Rr=this.scale)===null||Rr===void 0?void 0:Rr.scalers[tr].func)(Y)})}),this.setProps(_e)}setProps(_e){Object.assign(this,_e)}mapping(_e){var qe;if((qe=this.scale)!==null&&qe!==void 0&&qe.callback){var un;const Y=(un=this.scale)===null||un===void 0?void 0:un.callback(..._e);if(!Qr(Y))return[Y]}return this.defaultCallback(_e)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const Li=["buffer","update","name"],Zr=["buffer","update","name"],yo={[te.FLOAT]:4,[te.UNSIGNED_BYTE]:1,[te.UNSIGNED_SHORT]:2};class Mi{constructor(_e){(0,Z.Z)(this,"attributesAndIndices",void 0),(0,Z.Z)(this,"attributes",[]),(0,Z.Z)(this,"triangulation",void 0),(0,Z.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=_e}registerStyleAttribute(_e){let qe=this.getLayerStyleAttribute(_e.name||"");return qe?qe.setProps(_e):(qe=new ji(_e),this.attributes.push(qe)),qe}unRegisterStyleAttribute(_e){const qe=this.attributes.findIndex(un=>un.name===_e);qe>-1&&this.attributes.splice(qe,1)}updateScaleAttribute(_e){this.attributes.forEach(qe=>{var un;const Y=qe.name,tr=(un=qe.scale)===null||un===void 0?void 0:un.field;(_e[Y]||tr&&_e[tr])&&(qe.needRescale=!0,qe.needRemapping=!0,qe.needRegenerateVertices=!0)})}updateStyleAttribute(_e,qe,un){let Y=this.getLayerStyleAttribute(_e);Y||(Y=this.registerStyleAttribute((0,J.Z)((0,J.Z)({},qe),{},{name:_e})));const{scale:tr}=qe;tr&&Y&&(Y.scale=tr,Y.needRescale=!0,Y.needRemapping=!0,Y.needRegenerateVertices=!0,un&&un.featureRange&&(Y.featureRange=un.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(_e){return this.attributes.find(qe=>qe.name===_e)}getLayerAttributeScale(_e){var qe;const un=this.getLayerStyleAttribute(_e),Y=un==null||(qe=un.scale)===null||qe===void 0?void 0:qe.scalers;return Y&&Y[0]?Y[0].func:null}updateAttributeByFeatureRange(_e,qe,un=0,Y,tr){const Rr=this.attributes.find(Di=>Di.name===_e);if(Rr&&Rr.descriptor){const{descriptor:Di}=Rr,{update:zi,buffer:lo,size:uo=0}=Di,wa=yo[lo.type||te.FLOAT];if(zi){const{elements:No,sizePerElement:Aa}=this.featureLayout,os=No.slice(un,Y);if(!os.length)return;const{offset:ga}=os[0],Ra=ga*uo*wa,Rs=os.map(({featureIdx:ka,vertices:Za,normals:ms},nl)=>{const Wa=Za.length/Aa,Rc=[];for(let us=0;us<Wa;us++){const Tu=ms?ms.slice(us*3,us*3+3):[];Rc.push(...zi(qe[ka],ka,Za.slice(us*Aa,us*Aa+Aa),nl,Tu))}return Rc}).flat();Rr.vertexAttribute.updateBuffer({data:Rs,offset:Ra}),tr==null||tr.emit(`legend:${_e}`,tr.getLegend(_e))}}}createAttributesAndIndices(_e,qe,un,Y){this.featureLayout={sizePerElement:0,elements:[]},qe&&(this.triangulation=qe);const tr=this.attributes.map(ga=>(ga.resetDescriptor(),ga.descriptor));let Rr=0,Di=0;const zi=[];let lo=3;_e.forEach((ga,Ra)=>{const{indices:Rs,vertices:ka,normals:Za,size:ms,indexes:nl,count:Wa}=this.triangulation(ga,un);typeof Wa=="number"&&(Di+=Wa),Rs.forEach(us=>{zi.push(us+Rr)}),lo=ms;const Rc=ka.length/ms;this.featureLayout.sizePerElement=lo,this.featureLayout.elements.push({featureIdx:Ra,vertices:ka,normals:Za,offset:Rr}),Rr+=Rc;for(let us=0;us<Rc;us++){const Tu=(Za==null?void 0:Za.slice(us*3,us*3+3))||[],fu=ka.slice(us*ms,us*ms+ms);let jc=0;nl&&nl[us]!==void 0&&(jc=nl[us]),tr.forEach((nh,Id)=>{nh&&nh.update&&nh.buffer.data.push(...nh.update(ga,Ra,fu,us,Tu,jc))})}});const{createAttribute:uo,createBuffer:wa,createElements:No}=this.rendererService,Aa={};tr.forEach((ga,Ra)=>{if(ga){const{buffer:Rs,update:ka,name:Za}=ga,ms=(0,ao.Z)(ga,Li),nl=uo((0,J.Z)({buffer:wa(Rs)},ms));Aa[ga.name||""]=nl,this.attributes[Ra].vertexAttribute=nl}});const os=No({data:zi,type:te.UNSIGNED_INT,count:zi.length});return this.attributesAndIndices={attributes:Aa,elements:os,count:Di},Object.values(this.attributes).filter(ga=>ga.scale).forEach(ga=>{const Ra=ga.name;Y==null||Y.emit(`legend:${Ra}`,Y.getLegend(Ra))}),this.attributesAndIndices}createAttributes(_e,qe){this.featureLayout={sizePerElement:0,elements:[]},qe&&(this.triangulation=qe);const un=this.attributes.map(uo=>(uo.resetDescriptor(),uo.descriptor));let Y=0;const tr=[];let Rr=3;_e.forEach((uo,wa)=>{const{indices:No,vertices:Aa,normals:os,size:ga,indexes:Ra}=this.triangulation(uo);No.forEach(ka=>{tr.push(ka+Y)}),Rr=ga;const Rs=Aa.length/ga;this.featureLayout.sizePerElement=Rr,this.featureLayout.elements.push({featureIdx:wa,vertices:Aa,normals:os,offset:Y}),Y+=Rs;for(let ka=0;ka<Rs;ka++){const Za=(os==null?void 0:os.slice(ka*3,ka*3+3))||[],ms=Aa.slice(ka*ga,ka*ga+ga);let nl=0;Ra&&Ra[ka]!==void 0&&(nl=Ra[ka]),un.forEach((Wa,Rc)=>{Wa&&Wa.update&&Wa.buffer.data.push(...Wa.update(uo,wa,ms,ka,Za,nl))})}});const{createAttribute:Di,createBuffer:zi}=this.rendererService,lo={};return un.forEach((uo,wa)=>{if(uo){const{buffer:No,update:Aa,name:os}=uo,ga=(0,ao.Z)(uo,Zr),Ra=Di((0,J.Z)({buffer:zi(No)},ga));lo[uo.name||""]=Ra,this.attributes[wa].vertexAttribute=Ra}}),{attributes:lo}}clearAllAttributes(){var _e;this.attributes.forEach(qe=>{qe.vertexAttribute&&qe.vertexAttribute.destroy()}),(_e=this.attributesAndIndices)===null||_e===void 0||_e.elements.destroy(),this.attributes=[]}}var xo=D(46343),xi=D(63844),Oo=D.n(xi);class ra extends $t.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(_e){super(),(0,Z.Z)(this,"destroyed",!1),(0,Z.Z)(this,"loaded",!1),(0,Z.Z)(this,"id",void 0),(0,Z.Z)(this,"inited",!1),(0,Z.Z)(this,"rendering",!1),(0,Z.Z)(this,"$container",void 0),(0,Z.Z)(this,"canvas",void 0),(0,Z.Z)(this,"markerContainer",void 0),(0,Z.Z)(this,"resizeDetector",void 0),(0,Z.Z)(this,"hooks",void 0),(0,Z.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,Z.Z)(this,"handleMapCameraChanged",qe=>{this.cameraService.update(qe),this.render()}),this.container=_e,this.hooks={init:new xo.sX},this.id=_e.id}init(_e){var qe=this;this.configService.setSceneConfig(this.id,_e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,xe.Z)(function*(){qe.debugService.log("map.mapInitStart",{type:qe.map.version}),yield new Promise(un=>{qe.map.onCameraChanged(Y=>{qe.cameraService.init(),qe.cameraService.update(Y),un()}),qe.map.init()}),qe.map.onCameraChanged(qe.handleMapCameraChanged),qe.map.addMarkerContainer(),qe.markerService.addMarkers(),qe.markerService.addMarkerLayers(),qe.popupService.initPopup(),qe.interactionService.init(),qe.interactionService.on(Kn.Drag,qe.addSceneEvent.bind(qe))})),this.hooks.init.tapPromise("initRenderer",(0,xe.Z)(function*(){var un;const Y=((un=qe.map)===null||un===void 0?void 0:un.getOverlayContainer())||void 0;if(Y?qe.$container=Y:qe.$container=Bn(qe.configService.getSceneConfig(qe.id).id||""),qe.$container){const{canvas:Rr}=_e;if(qe.canvas=Rr||E.SO.create("canvas","",qe.$container),qe.setCanvas(),yield qe.rendererService.init(qe.canvas,qe.configService.getSceneConfig(qe.id),_e.gl),qe.registerContextLost(),qe.initContainer(),qe.resizeDetector=Oo()({strategy:"scroll"}),qe.resizeDetector.listenTo(qe.$container,qe.handleWindowResized),window.matchMedia){var tr;(tr=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||tr===void 0||tr.addListener(qe.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");qe.pickingService.init(qe.id)})),this.render()}registerContextLost(){const _e=this.rendererService.getCanvas();_e&&_e.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(_e){this.layerService.sceneService=this,this.layerService.add(_e)}addMask(_e){this.layerService.sceneService=this,this.layerService.addMask(_e)}render(){var _e=this;return(0,xe.Z)(function*(){_e.rendering||_e.destroyed||(_e.rendering=!0,_e.inited?(yield _e.layerService.initLayers(),yield _e.layerService.renderLayers()):(yield _e.hooks.init.promise(),_e.destroyed&&_e.destroy(),yield _e.layerService.initLayers(),_e.layerService.renderLayers(),_e.controlService.addControls(),_e.loaded=!0,_e.emit("loaded"),_e.inited=!0),_e.rendering=!1)})()}addFontFace(_e,qe){this.fontService.addFontFace(_e,qe)}getSceneContainer(){return this.$container}exportPng(_e){var qe=this;return(0,xe.Z)(function*(){var un;const Y=(un=qe.$container)===null||un===void 0?void 0:un.getElementsByTagName("canvas")[0];return yield qe.render(),_e==="jpg"?Y==null?void 0:Y.toDataURL("image/jpeg"):Y==null?void 0:Y.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const _e=this.$container.parentElement;_e!==null&&(this.markerContainer=E.SO.create("div","l7-marker-container",_e))}getMarkerContainer(){return this.markerContainer}destroy(){var _e;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var qe;(qe=this.$container)===null||qe===void 0||qe.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(_e=this.$container)===null||_e===void 0||(_e=_e.parentNode)===null||_e===void 0||_e.removeChild(this.$container),this.emit("destroy")}initContainer(){var _e,qe;const un=E.SO.DPR,Y=((_e=this.$container)===null||_e===void 0?void 0:_e.clientWidth)||400,tr=((qe=this.$container)===null||qe===void 0?void 0:qe.clientHeight)||300,Rr=this.canvas;Rr&&(Rr.width=Y*un,Rr.height=tr*un),this.rendererService.viewport({x:0,y:0,width:un*Y,height:un*tr})}setCanvas(){var _e,qe;const un=E.SO.DPR,Y=((_e=this.$container)===null||_e===void 0?void 0:_e.clientWidth)||400,tr=((qe=this.$container)===null||qe===void 0?void 0:qe.clientHeight)||300,Rr=this.canvas;Rr.width=Y*un,Rr.height=tr*un,Rr.style.width="100%",Rr.style.height="100%"}addSceneEvent(_e){this.emit(_e.type,_e)}}const{uniq:Ha}=E.lodashUtil,ia="#define PI 3.14159265359",Wo=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Fa=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,cs=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,wt=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Zt=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Un=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,Ir=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Ci=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,oo=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,Yo=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,ns=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Ds=/precision\s+(high|low|medium)p\s+float/,Us=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,fl=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,xh=/void\s+main\s*\([^)]*\)\s*\{\n?/;class kp{constructor(){(0,Z.Z)(this,"moduleCache",{}),(0,Z.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ia,fs:ia}),this.registerModule("decode",{vs:Fa,fs:""}),this.registerModule("scene_uniforms",{vs:Yo,fs:Yo}),this.registerModule("picking_uniforms",{vs:Un,fs:Un}),this.registerModule("projection",{vs:Ci,fs:Ci}),this.registerModule("project",{vs:Ir,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:ns}),this.registerModule("lighting",{vs:cs,fs:""}),this.registerModule("light",{vs:Wo,fs:""}),this.registerModule("picking",{vs:Zt,fs:wt}),this.registerModule("rotation_2d",{vs:oo,fs:""})}registerModule(_e,qe){qe.vs=qe.vs.replace(/\r\n/g,`
`),qe.fs=qe.fs.replace(/\r\n/g,`
`);const{vs:un,fs:Y,uniforms:tr,defines:Rr,inject:Di}=qe,{content:zi,uniforms:lo}=be(un),{content:uo,uniforms:wa}=be(Y);this.rawContentCache[_e]={fs:uo,defines:Rr,inject:Di,uniforms:(0,J.Z)((0,J.Z)((0,J.Z)({},lo),wa),tr),vs:zi}}getModule(_e){let qe=this.rawContentCache[_e].vs,un=this.rawContentCache[_e].fs;const{defines:Y={},inject:tr={}}=this.rawContentCache[_e];let Rr={};tr["vs:#decl"]&&(qe=tr["vs:#decl"]+qe,Rr=be(tr["vs:#decl"]).uniforms),tr["vs:#main-start"]&&(qe=qe.replace(xh,ga=>ga+tr["vs:#main-start"])),tr["fs:#decl"]&&(un=tr["fs:#decl"]+un),qe=Ad(Y)+qe;const{content:zi,includeList:lo}=this.processModule(qe,[],"vs"),{content:uo,includeList:wa}=this.processModule(un,[],"fs"),No=Ha(lo.concat(wa).concat(_e)).reduce((ga,Ra)=>(0,J.Z)((0,J.Z)({},ga),this.rawContentCache[Ra].uniforms),(0,J.Z)({},Rr)),Aa=(Ds.test(uo)?"":Us)+zi,os=(Ds.test(uo)?"":Us)+uo;return this.moduleCache[_e]={vs:Aa.trim(),fs:os.trim(),uniforms:No},this.moduleCache[_e]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(_e,qe,un){return{content:_e.replace(fl,(tr,Rr)=>{const zi=Rr.split(" ")[0].replace(/"/g,"");if(qe.indexOf(zi)>-1)return"";const lo=this.rawContentCache[zi][un];qe.push(zi);const{content:uo}=this.processModule(lo,qe,un);return uo}),includeList:qe}}}function Ad(ne){return Object.keys(ne).reduce((qe,un)=>qe+`#define ${un.toUpperCase()} ${ne[un]}
`,`
`)}class Vl{constructor(){(0,Z.Z)(this,"shaderModuleService",void 0),(0,Z.Z)(this,"rendererService",void 0),(0,Z.Z)(this,"cameraService",void 0),(0,Z.Z)(this,"mapService",void 0),(0,Z.Z)(this,"interactionService",void 0),(0,Z.Z)(this,"layerService",void 0),(0,Z.Z)(this,"config",void 0)}getName(){return""}getType(){return ve.Normal}init(_e,qe){this.config=qe,this.rendererService=_e.getContainer().rendererService,this.cameraService=_e.getContainer().cameraService,this.mapService=_e.getContainer().mapService,this.interactionService=_e.getContainer().interactionService,this.layerService=_e.getContainer().layerService,this.shaderModuleService=_e.getContainer().shaderModuleService}render(_e){}}class If extends Vl{getName(){return"clear"}init(_e,qe){super.init(_e,qe)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Lf{constructor(_e){(0,Z.Z)(this,"passes",[]),(0,Z.Z)(this,"layer",void 0),(0,Z.Z)(this,"renderFlag",void 0),(0,Z.Z)(this,"width",0),(0,Z.Z)(this,"height",0),this.postProcessor=_e}setLayer(_e){this.layer=_e}setRenderFlag(_e){this.renderFlag=_e}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var _e=this;return(0,xe.Z)(function*(){for(const qe of _e.passes)yield qe.render(_e.layer);yield _e.postProcessor.render(_e.layer)})()}resize(_e,qe){(this.width!==_e||this.height!==qe)&&(this.postProcessor.resize(_e,qe),this.width=_e,this.height=qe)}add(_e,qe){_e.getType()===ve.PostProcessing?this.postProcessor.add(_e,this.layer,qe):(_e.init(this.layer,qe),this.passes.push(_e))}insert(_e,qe,un){_e.init(this.layer,qe),this.passes.splice(un,0,_e)}destroy(){this.passes.length=0}}class sc extends Vl{constructor(..._e){var qe;super(..._e),qe=this,(0,Z.Z)(this,"pickingFBO",void 0),(0,Z.Z)(this,"layer",void 0),(0,Z.Z)(this,"width",0),(0,Z.Z)(this,"height",0),(0,Z.Z)(this,"alreadyInRendering",!1),(0,Z.Z)(this,"pickFromPickingFBO",({x:un,y:Y,lngLat:tr,type:Rr})=>{if(!this.layer.isVisible()||!this.layer.needPick(Rr))return;const{getViewportSize:Di,readPixelsAsync:zi,useFramebuffer:lo}=this.rendererService,{width:uo,height:wa}=Di(),{enableHighlight:No,enableSelect:Aa}=this.layer.getLayerConfig(),os=un*E.SO.DPR,ga=Y*E.SO.DPR;if(os>uo||os<0||ga>wa||ga<0)return;let Ra;lo(this.pickingFBO,(0,xe.Z)(function*(){var Rs;if(Ra=yield zi({x:Math.round(os),y:Math.round(wa-(Y+1)*E.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:qe.pickingFBO}),Ra[0]!==0||Ra[1]!==0||Ra[2]!==0){const ka=(0,E.W0)(Ra),Za=qe.layer.getSource().getFeatureById(ka),ms={x:un,y:Y,type:Rr,lngLat:tr,featureId:ka,feature:Za};Za&&(qe.layer.setCurrentPickId(ka),qe.triggerHoverOnLayer(ms))}else{const ka={x:un,y:Y,lngLat:tr,type:qe.layer.getCurrentPickId()===null?"un"+Rr:"mouseout",featureId:null,feature:null};qe.triggerHoverOnLayer((0,J.Z)((0,J.Z)({},ka),{},{type:"unpick"})),qe.triggerHoverOnLayer(ka),qe.layer.setCurrentPickId(null)}No&&qe.highlightPickedFeature(Ra),Aa&&Rr==="click"&&((Rs=Ra)===null||Rs===void 0?void 0:Rs.toString())!==[0,0,0,0].toString()&&qe.selectFeature(Ra)}))})}getType(){return ve.Normal}getName(){return"pixelPicking"}init(_e,qe){super.init(_e,qe),this.layer=_e;const{createTexture2D:un,createFramebuffer:Y,getViewportSize:tr}=this.rendererService,{width:Rr,height:Di}=tr(),zi=un({width:Rr,height:Di,wrapS:te.CLAMP_TO_EDGE,wrapT:te.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=Y({color:zi}),this.interactionService.on(Kn.Hover,this.pickFromPickingFBO),this.interactionService.on(Kn.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Kn.Active,this.highlightFeatureHandle.bind(this))}render(_e){if(this.alreadyInRendering)return;const{getViewportSize:qe,useFramebuffer:un,clear:Y}=this.rendererService,{width:tr,height:Rr}=qe();this.alreadyInRendering=!0,(this.width!==tr||this.height!==Rr)&&(this.pickingFBO.resize({width:tr,height:Rr}),this.width=tr,this.height=Rr),un(this.pickingFBO,()=>{Y({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const Di=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),_e.hooks.beforePickingEncode.call(),_e.render(),_e.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(Di),this.alreadyInRendering=!1})}triggerHoverOnLayer(_e){this.layer.emit(_e.type,_e)}highlightPickedFeature(_e){const[qe,un,Y]=_e;this.layer.hooks.beforeHighlight.call([qe,un,Y]),this.layerService.renderLayers()}selectFeature(_e){const[qe,un,Y]=_e;this.layer.hooks.beforeSelect.call([qe,un,Y]),this.layerService.renderLayers()}selectFeatureHandle({featureId:_e}){const qe=(0,E.Z6)(_e);this.selectFeature(new Uint8Array(qe))}highlightFeatureHandle({featureId:_e}){const qe=(0,E.Z6)(_e);this.highlightPickedFeature(new Uint8Array(qe))}}class zc{constructor(_e){(0,Z.Z)(this,"passes",[]),(0,Z.Z)(this,"readFBO",void 0),(0,Z.Z)(this,"writeFBO",void 0),this.rendererService=_e,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:_e,createTexture2D:qe}=this.rendererService,{width:un,height:Y}=_e();return qe({x:0,y:0,width:un,height:Y,copy:!0})}getReadFBOTex(){var _e=this;const{useFramebuffer:qe}=this.rendererService;return new Promise(un=>{qe(this.readFBO,(0,xe.Z)(function*(){un(_e.getCurrentFBOTex())}))})}renderBloomPass(_e,qe){var un=this;return(0,xe.Z)(function*(){const Y=yield un.getReadFBOTex();let tr=0;for(;tr<4;)yield qe.render(_e,Y),un.swap(),tr++})()}render(_e){var qe=this;return(0,xe.Z)(function*(){for(let un=0;un<qe.passes.length;un++){const Y=qe.passes[un];Y.setRenderToScreen(qe.isLastEnabledPass(un)),Y.getName()==="bloom"?yield qe.renderBloomPass(_e,Y):(yield Y.render(_e),un!==qe.passes.length-1&&qe.swap())}})()}resize(_e,qe){this.readFBO.resize({width:_e,height:qe}),this.writeFBO.resize({width:_e,height:qe})}add(_e,qe,un){_e.init(qe,un),this.passes.push(_e)}insert(_e,qe,un,Y){_e.init(un,Y),this.passes.splice(qe,0,_e)}getPostProcessingPassByName(_e){return this.passes.find(qe=>qe.getName()===_e)}init(){const{createFramebuffer:_e,createTexture2D:qe}=this.rendererService;this.readFBO=_e({color:qe({width:1,height:1,wrapS:te.CLAMP_TO_EDGE,wrapT:te.CLAMP_TO_EDGE,usage:On.RENDER_TARGET})}),this.writeFBO=_e({color:qe({width:1,height:1,wrapS:te.CLAMP_TO_EDGE,wrapT:te.CLAMP_TO_EDGE,usage:On.RENDER_TARGET})})}isLastEnabledPass(_e){for(let qe=_e+1;qe<this.passes.length;qe++)if(this.passes[qe].isEnabled())return!1;return!0}swap(){const _e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=_e}}class cu extends Vl{getType(){return ve.Normal}getName(){return"render"}init(_e,qe){super.init(_e,qe)}render(_e){const{useFramebuffer:qe,clear:un}=this.rendererService,Y=_e.multiPassRenderer.getPostProcessor().getReadFBO();qe(Y,()=>{un({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Y}),_e.multiPassRenderer.setRenderFlag(!1),_e.models.forEach(tr=>{tr.draw({uniforms:_e.layerModel.getUninforms()})}),_e.multiPassRenderer.setRenderFlag(!0)})}}const eh=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,pc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Os}=E.lodashUtil;class Oc extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:pc,fs:eh});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("blur-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}convertOptionsToUniforms(_e){const qe={};return Os(_e.bloomRadius)||(qe.u_radius=_e.bloomRadius),Os(_e.bloomIntensity)||(qe.u_intensity=_e.bloomIntensity),Os(_e.bloomBaseRadio)||(qe.u_baseRadio=_e.bloomBaseRadio),qe}}const gf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Zh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Up}=E.lodashUtil;class Eh extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Zh,fs:gf});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("blur-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}convertOptionsToUniforms(_e){const qe={};return Up(_e.blurRadius)||(qe.u_BlurDir=[_e.blurRadius,0]),qe}}const Cd=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,th=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Xh}=E.lodashUtil;class Od extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:th,fs:Cd});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("blur-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}convertOptionsToUniforms(_e){const qe={};return Xh(_e.blurRadius)||(qe.u_BlurDir=[0,_e.blurRadius]),qe}}const Rd=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,_0=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Df extends Ge{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:_0,fs:Rd});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}}const Uu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,up=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Hl extends Ge{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:up,fs:Uu}),this.shaderModuleService.getModule("copy-pass")}}const Su=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,ef=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class vc extends Ge{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:ef,fs:Su});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}}const tf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,uu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class nf extends Ge{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:uu,fs:tf});const{vs:_e,fs:qe,uniforms:un}=this.shaderModuleService.getModule("ink-pass"),{width:Y,height:tr}=this.rendererService.getViewportSize();return{vs:_e,fs:qe,uniforms:(0,J.Z)((0,J.Z)({},un),{},{u_ViewportSize:[Y,tr]})}}}const Pl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,zu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class yf extends Ge{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:zu,fs:Pl}),this.shaderModuleService.getModule("noise-pass")}}const fp=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$h=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class bs extends Ge{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:fp,fs:$h}),this.shaderModuleService.getModule("sepia-pass")}}const Md=new Ti;let Yh=0;function Pd(){const ne=new kp,_e=new qo,qe=new _t,un=new Ro(qe),Y=new Ce,tr=new Yt,Rr=new _r,Di=new Vr,zi=new Qn,lo={id:`${Yh++}`,globalConfigService:Md,shaderModuleService:ne,debugService:_e,cameraService:qe,coordinateSystemService:un,fontService:Y,iconService:tr,markerService:Rr,popupService:Di,controlService:zi,customRenderService:{}},uo=new Gi(lo);lo.layerService=uo;const wa=new ra(lo);lo.sceneService=wa;const No=new sn(lo);lo.interactionService=No;const Aa=new dr(lo);lo.pickingService=Aa;const os={clear:new If,pixelPicking:new sc,render:new cu};lo.normalPassFactory=Ra=>os[Ra];const ga={copy:new Hl,bloom:new Oc,blurH:new Eh,blurV:new Od,noise:new yf,sepia:new bs,colorHalftone:new Df,hexagonalPixelate:new vc,ink:new nf};return lo.postProcessingPass=ga,lo.postProcessingPassFactory=Ra=>ga[Ra],lo}function cl(ne){const _e=(0,J.Z)({},ne);return _e.postProcessor=new zc(_e.rendererService),_e.multiPassRenderer=new Lf(_e.postProcessor),_e.styleAttributeService=new Mi(_e.rendererService),_e}const Sh=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let Th=function(ne){return ne.IMAGE="image",ne.CUSTOMIMAGE="customImage",ne.ARRAYBUFFER="arraybuffer",ne.RGB="rgb",ne.TERRAINRGB="terrainRGB",ne.CUSTOMRGB="customRGB",ne.CUSTOMARRAYBUFFER="customArrayBuffer",ne.CUSTOMTERRAINRGB="customTerrainRGB",ne}({})},35914:function(Ht,W,D){"use strict";D.d(W,{Z:function(){return Gn}});var J=D(1413),Z=D(4942);class E{constructor(mt){(0,Z.Z)(this,"configService",void 0),(0,Z.Z)(this,"config",void 0),this.config=mt}setContainer(mt,Ct){this.configService=mt.globalConfigService,mt.mapConfig=(0,J.Z)((0,J.Z)({},this.config),{},{id:Ct}),mt.mapService=new(this.getServiceConstructor())(mt)}getServiceConstructor(){throw new Error("Method not implemented.")}}var ve=D(45987),te=D(15861),se=D(85975),ae=D(77160),Se=D(6158),oe=D.n(Se),Ge=D(15671),ee=D(43144),me=D(82963),Le=D(61120),be=D(60136),Oe=D(97326),fe=D(97685),He=D(98333);function bt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function dt(dn,mt){var Ct=He.fF([],mt,dn);return He.bA(Ct,Ct,1/Ct[3]),Ct}function Nt(dn,mt){var Ct=dn%mt;return Ct<0?mt+Ct:Ct}function ct(dn,mt,Ct){return Ct*mt+(1-Ct)*dn}var lt=D(31437);function Ie(dn,mt){if(!dn)throw new Error(mt||"viewport-mercator-project: assertion failed.")}var Ae=Math.PI,pt=Ae/4,ut=Ae/180,Et=180/Ae,cn=512,ze=4003e4,St=1.5;function we(dn){return Math.pow(2,dn)}function nt(dn){return Math.log2(dn)}function Xe(dn,mt){var Ct=(0,fe.Z)(dn,2),Cn=Ct[0],Pn=Ct[1];Ie(Number.isFinite(Cn)&&Number.isFinite(mt)),Ie(Number.isFinite(Pn)&&Pn>=-90&&Pn<=90,"invalid latitude"),mt*=cn;var Zn=Cn*ut,ht=Pn*ut,ye=mt*(Zn+Ae)/(2*Ae),Be=mt*(Ae-Math.log(Math.tan(pt+ht*.5)))/(2*Ae);return[ye,Be]}function Ze(dn,mt){var Ct=(0,fe.Z)(dn,2),Cn=Ct[0],Pn=Ct[1];mt*=cn;var Zn=Cn/mt*(2*Ae)-Ae,ht=2*(Math.atan(Math.exp(Ae-Pn/mt*(2*Ae)))-pt);return[Zn*Et,ht*Et]}function Rt(dn){var mt=dn.latitude;assert(Number.isFinite(mt));var Ct=Math.cos(mt*ut);return nt(ze*Ct)-9}function yt(dn){var mt=dn.latitude,Ct=dn.longitude,Cn=dn.zoom,Pn=dn.scale,Zn=dn.highPrecision,ht=Zn===void 0?!1:Zn;Pn=Pn!==void 0?Pn:we(Cn),Ie(Number.isFinite(mt)&&Number.isFinite(Ct)&&Number.isFinite(Pn));var ye={},Be=cn*Pn,rt=Math.cos(mt*ut),Mt=Be/360,Ot=Mt/rt,En=Be/ze/rt;if(ye.pixelsPerMeter=[En,-En,En],ye.metersPerPixel=[1/En,-1/En,1/En],ye.pixelsPerDegree=[Mt,-Ot,En],ye.degreesPerPixel=[1/Mt,-1/Ot,1/En],ht){var $n=ut*Math.tan(mt*ut)/rt,yr=Mt*$n/2,qn=Be/ze*$n,Ce=qn/Ot*En;ye.pixelsPerDegree2=[0,-yr,qn],ye.pixelsPerMeter2=[Ce,0,Ce]}return ye}function Me(dn,mt){var Ct=_slicedToArray(dn,3),Cn=Ct[0],Pn=Ct[1],Zn=Ct[2],ht=_slicedToArray(mt,3),ye=ht[0],Be=ht[1],rt=ht[2],Mt=1,Ot=yt({longitude:Cn,latitude:Pn,scale:Mt,highPrecision:!0}),En=Ot.pixelsPerMeter,$n=Ot.pixelsPerMeter2,yr=Xe(dn,Mt);yr[0]+=ye*(En[0]+$n[0]*Be),yr[1]+=Be*(En[1]+$n[1]*Be);var qn=Ze(yr,Mt),Ce=(Zn||0)+(rt||0);return Number.isFinite(Zn)||Number.isFinite(rt)?[qn[0],qn[1],Ce]:qn}function Gt(dn){var mt=dn.height,Ct=dn.pitch,Cn=dn.bearing,Pn=dn.altitude,Zn=dn.center,ht=Zn===void 0?null:Zn,ye=dn.flipY,Be=ye===void 0?!1:ye,rt=bt();return se.translate(rt,rt,[0,0,-Pn]),se.scale(rt,rt,[1,1,1/mt]),se.rotateX(rt,rt,-Ct*ut),se.rotateZ(rt,rt,Cn*ut),Be&&se.scale(rt,rt,[1,-1,1]),ht&&se.translate(rt,rt,ae.tk([],ht)),rt}function ln(dn){var mt=dn.width,Ct=dn.height,Cn=dn.altitude,Pn=Cn===void 0?St:Cn,Zn=dn.pitch,ht=Zn===void 0?0:Zn,ye=dn.nearZMultiplier,Be=ye===void 0?1:ye,rt=dn.farZMultiplier,Mt=rt===void 0?1:rt,Ot=ht*ut,En=Math.atan(.5/Pn),$n=Math.sin(En)*Pn/Math.sin(Math.PI/2-Ot-En),yr=Math.cos(Math.PI/2-Ot)*$n+Pn;return{fov:2*Math.atan(Ct/2/Pn),aspect:mt/Ct,focalDistance:Pn,near:Be,far:yr*Mt}}function Ln(dn){var mt=dn.width,Ct=dn.height,Cn=dn.pitch,Pn=dn.altitude,Zn=dn.nearZMultiplier,ht=dn.farZMultiplier,ye=ln({width:mt,height:Ct,altitude:Pn,pitch:Cn,nearZMultiplier:Zn,farZMultiplier:ht}),Be=ye.fov,rt=ye.aspect,Mt=ye.near,Ot=ye.far,En=se.perspective([],Be,rt,Mt,Ot);return En}function kn(dn,mt){var Ct=(0,fe.Z)(dn,3),Cn=Ct[0],Pn=Ct[1],Zn=Ct[2],ht=Zn===void 0?0:Zn;return Ie(Number.isFinite(Cn)&&Number.isFinite(Pn)&&Number.isFinite(ht)),dt(mt,[Cn,Pn,ht,1])}function lr(dn,mt){var Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Cn=(0,fe.Z)(dn,3),Pn=Cn[0],Zn=Cn[1],ht=Cn[2];if(Ie(Number.isFinite(Pn)&&Number.isFinite(Zn),"invalid pixel coordinate"),Number.isFinite(ht)){var ye=dt(mt,[Pn,Zn,ht,1]);return ye}var Be=dt(mt,[Pn,Zn,0,1]),rt=dt(mt,[Pn,Zn,1,1]),Mt=Be[2],Ot=rt[2],En=Mt===Ot?0:((Ct||0)-Mt)/(Ot-Mt);return lt.t7([],Be,rt,En)}var zt=bt(),Kt=function(){function dn(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ct=mt.width,Cn=mt.height,Pn=mt.viewMatrix,Zn=Pn===void 0?zt:Pn,ht=mt.projectionMatrix,ye=ht===void 0?zt:ht;(0,Ge.Z)(this,dn),this.width=Ct||1,this.height=Cn||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Zn,this.projectionMatrix=ye;var Be=bt();se.multiply(Be,Be,this.projectionMatrix),se.multiply(Be,Be,this.viewMatrix),this.viewProjectionMatrix=Be;var rt=bt();se.scale(rt,rt,[this.width/2,-this.height/2,1]),se.translate(rt,rt,[1,-1,0]),se.multiply(rt,rt,this.viewProjectionMatrix);var Mt=se.invert(bt(),rt);if(!Mt)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=rt,this.pixelUnprojectionMatrix=Mt,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,ee.Z)(dn,[{key:"equals",value:function(Ct){return Ct instanceof dn?Ct.width===this.width&&Ct.height===this.height&&se.equals(Ct.projectionMatrix,this.projectionMatrix)&&se.equals(Ct.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(Ct){var Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=Cn.topLeft,Zn=Pn===void 0?!0:Pn,ht=this.projectPosition(Ct),ye=kn(ht,this.pixelProjectionMatrix),Be=(0,fe.Z)(ye,2),rt=Be[0],Mt=Be[1],Ot=Zn?Mt:this.height-Mt;return Ct.length===2?[rt,Ot]:[rt,Ot,ye[2]]}},{key:"unproject",value:function(Ct){var Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=Cn.topLeft,Zn=Pn===void 0?!0:Pn,ht=Cn.targetZ,ye=(0,fe.Z)(Ct,3),Be=ye[0],rt=ye[1],Mt=ye[2],Ot=Zn?rt:this.height-rt,En=ht&&ht*this.pixelsPerMeter,$n=lr([Be,Ot,Mt],this.pixelUnprojectionMatrix,En),yr=this.unprojectPosition($n),qn=(0,fe.Z)(yr,3),Ce=qn[0],xe=qn[1],ke=qn[2];return Number.isFinite(Mt)?[Ce,xe,ke]:Number.isFinite(ht)?[Ce,xe,ht]:[Ce,xe]}},{key:"projectPosition",value:function(Ct){var Cn=this.projectFlat(Ct),Pn=(0,fe.Z)(Cn,2),Zn=Pn[0],ht=Pn[1],ye=(Ct[2]||0)*this.pixelsPerMeter;return[Zn,ht,ye]}},{key:"unprojectPosition",value:function(Ct){var Cn=this.unprojectFlat(Ct),Pn=(0,fe.Z)(Cn,2),Zn=Pn[0],ht=Pn[1],ye=(Ct[2]||0)/this.pixelsPerMeter;return[Zn,ht,ye]}},{key:"projectFlat",value:function(Ct){var Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ct}},{key:"unprojectFlat",value:function(Ct){var Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ct}}]),dn}();function yn(dn){var mt=dn.width,Ct=dn.height,Cn=dn.bounds,Pn=dn.minExtent,Zn=Pn===void 0?0:Pn,ht=dn.maxZoom,ye=ht===void 0?24:ht,Be=dn.padding,rt=Be===void 0?0:Be,Mt=dn.offset,Ot=Mt===void 0?[0,0]:Mt,En=(0,fe.Z)(Cn,2),$n=(0,fe.Z)(En[0],2),yr=$n[0],qn=$n[1],Ce=(0,fe.Z)(En[1],2),xe=Ce[0],ke=Ce[1];if(Number.isFinite(rt)){var et=rt;rt={top:et,bottom:et,left:et,right:et}}else Ie(Number.isFinite(rt.top)&&Number.isFinite(rt.bottom)&&Number.isFinite(rt.left)&&Number.isFinite(rt.right));var Tt=new Kn({width:mt,height:Ct,longitude:0,latitude:0,zoom:0}),Yt=Tt.project([yr,ke]),pn=Tt.project([xe,qn]),_t=[Math.max(Math.abs(pn[0]-Yt[0]),Zn),Math.max(Math.abs(pn[1]-Yt[1]),Zn)],qt=[mt-rt.left-rt.right-Math.abs(Ot[0])*2,Ct-rt.top-rt.bottom-Math.abs(Ot[1])*2];Ie(qt[0]>0&&qt[1]>0);var Qn=qt[0]/_t[0],_r=qt[1]/_t[1],Vr=(rt.right-rt.left)/2/Qn,pr=(rt.bottom-rt.top)/2/_r,Ur=[(pn[0]+Yt[0])/2+Vr,(pn[1]+Yt[1])/2+pr],mi=Tt.unproject(Ur),wi=Tt.zoom+Math.log2(Math.abs(Math.min(Qn,_r)));return{longitude:mi[0],latitude:mi[1],zoom:Math.min(wi,ye)}}var Kn=function(dn){(0,be.Z)(mt,dn);function mt(){var Ct,Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pn=Cn.width,Zn=Cn.height,ht=Cn.latitude,ye=ht===void 0?0:ht,Be=Cn.longitude,rt=Be===void 0?0:Be,Mt=Cn.zoom,Ot=Mt===void 0?0:Mt,En=Cn.pitch,$n=En===void 0?0:En,yr=Cn.bearing,qn=yr===void 0?0:yr,Ce=Cn.altitude,xe=Ce===void 0?1.5:Ce,ke=Cn.nearZMultiplier,et=Cn.farZMultiplier;(0,Ge.Z)(this,mt),Pn=Pn||1,Zn=Zn||1;var Tt=we(Ot);xe=Math.max(.75,xe);var Yt=Xe([rt,ye],Tt);Yt[2]=0;var pn=Ln({width:Pn,height:Zn,pitch:$n,bearing:qn,altitude:xe,nearZMultiplier:ke||1/Zn,farZMultiplier:et||1.01}),_t=Gt({height:Zn,center:Yt,pitch:$n,bearing:qn,altitude:xe,flipY:!0});return Ct=(0,me.Z)(this,(0,Le.Z)(mt).call(this,{width:Pn,height:Zn,viewMatrix:_t,projectionMatrix:pn})),Ct.latitude=ye,Ct.longitude=rt,Ct.zoom=Ot,Ct.pitch=$n,Ct.bearing=qn,Ct.altitude=xe,Ct.scale=Tt,Ct.center=Yt,Ct.pixelsPerMeter=yt((0,Oe.Z)((0,Oe.Z)(Ct))).pixelsPerMeter[2],Object.freeze((0,Oe.Z)((0,Oe.Z)(Ct))),Ct}return(0,ee.Z)(mt,[{key:"projectFlat",value:function(Cn){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Xe(Cn,Pn)}},{key:"unprojectFlat",value:function(Cn){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ze(Cn,Pn)}},{key:"getMapCenterByLngLatPosition",value:function(Cn){var Pn=Cn.lngLat,Zn=Cn.pos,ht=lr(Zn,this.pixelUnprojectionMatrix),ye=Xe(Pn,this.scale),Be=lt.IH([],ye,lt.tk([],ht)),rt=lt.IH([],this.center,Be);return Ze(rt,this.scale)}},{key:"getLocationAtPoint",value:function(Cn){var Pn=Cn.lngLat,Zn=Cn.pos;return this.getMapCenterByLngLatPosition({lngLat:Pn,pos:Zn})}},{key:"fitBounds",value:function(Cn){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zn=this.width,ht=this.height,ye=yn(Object.assign({width:Zn,height:ht,bounds:Cn},Pn)),Be=ye.longitude,rt=ye.latitude,Mt=ye.zoom;return new mt({width:Zn,height:ht,longitude:Be,latitude:rt,zoom:Mt})}}]),mt}(Kt);class rn{constructor(){(0,Z.Z)(this,"viewport",new Kn)}syncWithMapCamera(mt){const{center:Ct,zoom:Cn,pitch:Pn,bearing:Zn,viewportHeight:ht,viewportWidth:ye}=mt,Be={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new Kn((0,J.Z)((0,J.Z)({},Be),{},{width:ye,height:ht,longitude:Ct&&Ct[0],latitude:Ct&&Ct[1],zoom:Cn,pitch:Pn,bearing:Zn}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(mt,Ct){return this.viewport.projectFlat(mt,Ct)}}var Wt=D(39827),Pt=D(8543),Pe=D(26729);class Qe{constructor(mt){(0,Z.Z)(this,"size",1e4),this.size=mt||1e4}setSize(mt){this.size=mt}getSize(){return[this.size,this.size]}mercatorXfromLng(mt){return(180+mt)/360*this.size}mercatorYfromLat(mt){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+mt*Math.PI/360)))/360)*this.size}lngFromMercatorX(mt){return mt/this.size*360-180}latFromMercatorY(mt){const Ct=180-(1-mt/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(Ct*Math.PI/180))-90}project(mt){const Ct=this.mercatorXfromLng(mt[0]),Cn=this.mercatorYfromLat(mt[1]);return[Ct,Cn]}unproject(mt){const Ct=this.lngFromMercatorX(mt[0]),Cn=this.latFromMercatorY(mt[1]);return[Ct,Cn]}}const Bt={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},z={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},ue=12;class ot{constructor(mt){(0,Z.Z)(this,"version","DEFAUlTMAP"),(0,Z.Z)(this,"map",void 0),(0,Z.Z)(this,"simpleMapCoord",new Qe),(0,Z.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,Z.Z)(this,"config",void 0),(0,Z.Z)(this,"configService",void 0),(0,Z.Z)(this,"coordinateSystemService",void 0),(0,Z.Z)(this,"eventEmitter",void 0),(0,Z.Z)(this,"markerContainer",void 0),(0,Z.Z)(this,"cameraChangedCallback",void 0),(0,Z.Z)(this,"$mapContainer",void 0),(0,Z.Z)(this,"handleCameraChanged",Ct=>{const{lat:Cn,lng:Pn}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[Pn,Cn],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=mt.mapConfig,this.configService=mt.globalConfigService,this.coordinateSystemService=mt.coordinateSystemService,this.eventEmitter=new Pe.EventEmitter}setBgColor(mt){this.bgColor=mt}addMarkerContainer(){const mt=this.map.getCanvasContainer();this.markerContainer=Pt.SO.create("div","l7-marker-container",mt),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(mt,Ct){Wt.I9.indexOf(mt)!==-1?this.eventEmitter.on(mt,Ct):this.map.on(z[mt]||mt,Ct)}off(mt,Ct){this.map.off(z[mt]||mt,Ct),this.eventEmitter.off(mt,Ct)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const mt=this.map.transform;return[mt.width,mt.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(mt){return this.map.setZoom(mt)}getCenter(){return this.map.getCenter()}setCenter(mt){this.map.setCenter(mt)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(mt){this.map.setBearing(mt)}zoomIn(mt,Ct){this.map.zoomIn(mt,Ct)}zoomOut(mt,Ct){this.map.zoomOut(mt,Ct)}setPitch(mt){return this.map.setPitch(mt)}panTo(mt){this.map.panTo(mt)}panBy(mt=0,Ct=0){this.map.panBy([mt,Ct])}fitBounds(mt,Ct){this.map.fitBounds(mt,Ct)}setMaxZoom(mt){this.map.setMaxZoom(mt)}setMinZoom(mt){this.map.setMinZoom(mt)}setMapStatus(mt){mt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),mt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),mt.dragEnable===!1&&this.map.dragPan.disable(),mt.dragEnable===!0&&this.map.dragPan.enable(),mt.rotateEnable===!1&&this.map.dragRotate.disable(),mt.dragEnable===!0&&this.map.dragRotate.enable(),mt.keyboardEnable===!1&&this.map.keyboard.disable(),mt.keyboardEnable===!0&&this.map.keyboard.enable(),mt.zoomEnable===!1&&this.map.scrollZoom.disable(),mt.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(mt,Ct){this.map.flyTo({zoom:mt,center:Ct})}setMapStyle(mt){var Ct;(Ct=this.map)===null||Ct===void 0||Ct.setStyle(this.getMapStyleValue(mt))}meterToCoord(mt,Ct){return 1}pixelToLngLat(mt){return this.map.unproject(mt)}lngLatToPixel(mt){return this.map.project(mt)}containerToLngLat(mt){return this.map.unproject(mt)}lngLatToContainer(mt){return this.map.project(mt)}getMapStyle(){try{var mt;const Ct=(mt=this.map.getStyle().sprite)!==null&&mt!==void 0?mt:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(Ct)?Ct==null?void 0:Ct.replace(/\/\w+$/,"").replace(/sprites/,"styles"):Ct}catch(Ct){return""}}getMapStyleConfig(){return Bt}getMapStyleValue(mt){var Ct;return(Ct=this.getMapStyleConfig()[mt])!==null&&Ct!==void 0?Ct:mt}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(mt,...Ct){this.eventEmitter.emit(mt,...Ct)}once(mt,...Ct){this.eventEmitter.once(mt,...Ct)}getMapContainer(){return this.$mapContainer}exportMap(mt){var Ct;const Cn=(Ct=this.map)===null||Ct===void 0?void 0:Ct.getCanvas();return mt==="jpg"?Cn==null?void 0:Cn.toDataURL("image/jpeg"):Cn==null?void 0:Cn.toDataURL("image/png")}onCameraChanged(mt){this.cameraChangedCallback=mt}creatMapContainer(mt){let Ct=mt;return typeof mt=="string"&&(Ct=document.getElementById(mt)),Ct}updateView(mt){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:mt.bearing,center:mt.center,viewportHeight:mt.viewportHeight,pitch:mt.pitch,viewportWidth:mt.viewportWidth,zoom:mt.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:mt=!0}=this.config;this.viewport.getZoom()>ue&&mt?this.coordinateSystemService.setCoordinateSystem(Wt.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Wt.lo.LNGLAT)}}const le=["id","attributionControl","style","token","rotation","mapInstance"];function $t(dn,mt){var Ct=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Cn=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Ct||Cn)&&(mt||(mt=document),!!mt)){var Pn=mt.head||mt.getElementsByTagName("head")[0];if(!Pn){Pn=mt.createElement("head");var Zn=mt.body||mt.getElementsByTagName("body")[0];Zn?Zn.parentNode.insertBefore(Pn,Zn):mt.documentElement.appendChild(Pn)}var ht=mt.createElement("style");return ht.type="text/css",ht.styleSheet?ht.styleSheet.cssText=dn:ht.appendChild(mt.createTextNode(dn)),Pn.appendChild(ht),ht}}$t(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=oe();let an=0;const hn="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class Dn extends ot{constructor(...mt){super(...mt),(0,Z.Z)(this,"version","MAPBOX"),(0,Z.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(mt,Ct={x:0,y:0,z:0}){const{x:Cn,y:Pn}=this.lngLatToMercator(mt,0);return[Cn-Ct.x,Pn-Ct.y]}lngLatToMercator(mt,Ct){const{x:Cn=0,y:Pn=0,z:Zn=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(mt,Ct);return{x:Cn,y:Pn,z:Zn}}getModelMatrix(mt,Ct,Cn,Pn=[1,1,1],Zn={x:0,y:0,z:0}){const ht=window.mapboxgl.MercatorCoordinate.fromLngLat(mt,Ct),ye=ht.meterInMercatorCoordinateUnits(),Be=se.create();return se.translate(Be,Be,ae.al(ht.x-Zn.x,ht.y-Zn.y,ht.z||0-Zn.z)),se.scale(Be,Be,ae.al(ye*Pn[0],-ye*Pn[1],ye*Pn[2])),se.rotateX(Be,Be,Cn[0]),se.rotateY(Be,Be,Cn[1]),se.rotateZ(Be,Be,Cn[2]),Be}init(){var mt=this;return(0,te.Z)(function*(){const Ct=mt.config,{id:Cn="map",attributionControl:Pn=!1,style:Zn="light",token:ht=hn,rotation:ye=0,mapInstance:Be}=Ct,rt=(0,ve.Z)(Ct,le);mt.viewport=new rn,!Be&&!window.mapboxgl&&console.error(mt.configService.getSceneWarninfo("SDK")),ht===hn&&Zn!=="blank"&&!window.mapboxgl.accessToken&&!Be&&console.warn(mt.configService.getSceneWarninfo("MapToken")),!Be&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=ht),Be?(mt.map=Be,mt.$mapContainer=mt.map.getContainer()):(mt.$mapContainer=mt.creatMapContainer(Cn),mt.map=new window.mapboxgl.Map((0,J.Z)({container:mt.$mapContainer,style:mt.getMapStyleValue(Zn),attributionControl:Pn,bearing:ye},rt))),mt.map.on("load",()=>{mt.handleCameraChanged()}),mt.map.on("move",mt.handleCameraChanged),mt.handleCameraChanged()})()}destroy(){var mt;(mt=this.$mapContainer)===null||mt===void 0||(mt=mt.parentNode)===null||mt===void 0||mt.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(mt,...Ct){this.eventEmitter.emit(mt,...Ct)}once(mt,...Ct){this.eventEmitter.once(mt,...Ct)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var mt;return(mt=this.getMapContainer())===null||mt===void 0?void 0:mt.querySelector(".mapboxgl-canvas-container")}meterToCoord(mt,Ct){const Cn=new(oe()).LngLat(mt[0],mt[1]),Pn=new(oe()).LngLat(Ct[0],Ct[1]),Zn=Cn.distanceTo(Pn),ht=oe().MercatorCoordinate.fromLngLat({lng:mt[0],lat:mt[1]}),ye=oe().MercatorCoordinate.fromLngLat({lng:Ct[0],lat:Ct[1]}),{x:Be,y:rt}=ht,{x:Mt,y:Ot}=ye;return Math.sqrt(Math.pow(Be-Mt,2)+Math.pow(rt-Ot,2))*4194304*2/Zn}exportMap(mt){const Ct=this.map.getCanvas();return mt==="jpg"?Ct==null?void 0:Ct.toDataURL("image/jpeg"):Ct==null?void 0:Ct.toDataURL("image/png")}creatMapContainer(mt){let Ct=mt;typeof mt=="string"&&(Ct=document.getElementById(mt));const Cn=document.createElement("div");return Cn.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Cn.id="l7_mapbox_div"+an++,Ct.appendChild(Cn),Cn}}function Xn(dn,mt){var Ct=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Cn=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Ct||Cn)&&(mt||(mt=document),!!mt)){var Pn=mt.head||mt.getElementsByTagName("head")[0];if(!Pn){Pn=mt.createElement("head");var Zn=mt.body||mt.getElementsByTagName("body")[0];Zn?Zn.parentNode.insertBefore(Pn,Zn):mt.documentElement.appendChild(Pn)}var ht=mt.createElement("style");return ht.type="text/css",ht.styleSheet?ht.styleSheet.cssText=dn:ht.appendChild(mt.createTextNode(dn)),Pn.appendChild(ht),ht}}Xn(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class Gn extends E{getServiceConstructor(){return Dn}}},4771:function(){},8543:function(Ht,W,D){"use strict";D.d(W,{SO:function(){return J},z6:function(){return cl},a5:function(){return Z},SA:function(){return E},nx:function(){return Ch},Z:function(){return xh},rQ:function(){return ze},bV:function(){return cn},zi:function(){return St},ds:function(){return cu},oO:function(){return zc},SI:function(){return Eh},Rx:function(){return Cd},W0:function(){return Ze},LS:function(){return bf},Z6:function(){return Rt},We:function(){return Un},Co:function(){return Et},Ks:function(){return cs},hj:function(){return Gt},Cl:function(){return yt},Oc:function(){return Ln},M4:function(){return Me},NJ:function(){return ln},ks:function(){return dt},Ol:function(){return th},Yu:function(){return ct},ZB:function(){return lr},gJ:function(){return ut},z0:function(){return Xs},jG:function(){return dp},M8:function(){return Rd},fg:function(){return Qr},if:function(){return Zt},vP:function(){return Yo},lodashUtil:function(){return qt},LF:function(){return fe},Fv:function(){return eh},yA:function(){return sc},CI:function(){return Xe}});var J={};D.r(J),D.d(J,{DPR:function(){return kt},addClass:function(){return Sr},addStyle:function(){return sn},appendElementType:function(){return Gi},clearChildren:function(){return hr},create:function(){return mi},css2Style:function(){return gn},empty:function(){return na},findParentElement:function(){return ao},getClass:function(){return bi},getContainer:function(){return _r},getDiffRect:function(){return On},getStyleList:function(){return Nn},getViewPortScale:function(){return Je},hasClass:function(){return hi},printCanvas:function(){return Ne},remove:function(){return wi},removeClass:function(){return Ti},removeStyle:function(){return Bn},setChecked:function(){return dr},setClass:function(){return si},setTransform:function(){return Ro},setUnDraggable:function(){return ii},splitWords:function(){return pr},toggleClass:function(){return Mo},triggerResize:function(){return qo},trim:function(){return Vr}});var Z={};D.r(Z),D.d(Z,{getColumn:function(){return Y},getSatByColumn:function(){return tr},max:function(){return Sh},mean:function(){return _e},min:function(){return Th},mode:function(){return qe},statMap:function(){return un},sum:function(){return ne}});var E={REGISTERED_PROTOCOLS:{}},ve=Object.defineProperty,te=Object.defineProperties,se=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,Ge=(he,Fe,gt)=>Fe in he?ve(he,Fe,{enumerable:!0,configurable:!0,writable:!0,value:gt}):he[Fe]=gt,ee=(he,Fe)=>{for(var gt in Fe||(Fe={}))Se.call(Fe,gt)&&Ge(he,gt,Fe[gt]);if(ae)for(var gt of ae(Fe))oe.call(Fe,gt)&&Ge(he,gt,Fe[gt]);return he},me=(he,Fe)=>te(he,se(Fe)),Le=he=>E.REGISTERED_PROTOCOLS[he.substring(0,he.indexOf("://"))],be=class extends Error{constructor(he,Fe,gt,wn){super(`AJAXError: ${Fe} (${he}): ${gt}`),this.status=he,this.statusText=Fe,this.url=gt,this.body=wn}};function Oe(he,Fe){const gt=new XMLHttpRequest,wn=Array.isArray(he.url)?he.url[0]:he.url;gt.open(he.method||"GET",wn,!0),he.type==="arrayBuffer"&&(gt.responseType="arraybuffer");for(const ar in he.headers)he.headers.hasOwnProperty(ar)&&gt.setRequestHeader(ar,he.headers[ar]);return he.type==="json"&&(gt.responseType="text",gt.setRequestHeader("Accept","application/json")),gt.withCredentials=he.credentials==="include",gt.onerror=()=>{Fe(new Error(gt.statusText))},gt.onload=()=>{if((gt.status>=200&&gt.status<300||gt.status===0)&&gt.response!==null){let ar=gt.response;if(he.type==="json")try{ar=JSON.parse(gt.response)}catch(zr){return Fe(zr)}Fe(null,ar,gt.getResponseHeader("Cache-Control"),gt.getResponseHeader("Expires"),gt)}else{const ar=new Blob([gt.response],{type:gt.getResponseHeader("Content-Type")});Fe(new be(gt.status,gt.statusText,wn.toString(),ar))}},gt.cancel=gt.abort,gt.send(he.body),gt}function fe(he){return new Promise((Fe,gt)=>{Oe(he,(wn,ar,zr,gi,Ki)=>{wn?gt({err:wn,data:null,xhr:Ki}):Fe({err:null,data:ar,cacheControl:zr,expires:gi,xhr:Ki})})})}function He(he,Fe){return Oe(he,Fe)}var bt=(he,Fe)=>(Le(he.url)||He)(me(ee({},he),{type:"json"}),Fe),dt=(he,Fe)=>(Le(he.url)||He)(me(ee({},he),{type:"arrayBuffer"}),Fe),Nt=(he,Fe)=>He(me(ee({},he),{method:"POST"}),Fe),ct=(he,Fe)=>He(me(ee({},he),{method:"GET"}),Fe);function lt(he){const Fe=window.document.createElement("a");return Fe.href=he,Fe.protocol===window.document.location.protocol&&Fe.host===window.document.location.host}var Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ae(he,Fe){const gt=new window.Image,wn=window.URL||window.webkitURL;gt.crossOrigin="anonymous",gt.onload=()=>{Fe(null,gt),wn.revokeObjectURL(gt.src),gt.onload=null,window.requestAnimationFrame(()=>{gt.src=Ie})},gt.onerror=()=>Fe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ar=new Blob([new Uint8Array(he)],{type:"image/png"});gt.src=he.byteLength?wn.createObjectURL(ar):Ie}function pt(he,Fe){const gt=new Blob([new Uint8Array(he)],{type:"image/png"});createImageBitmap(gt).then(wn=>{Fe(null,wn)}).catch(wn=>{Fe(new Error(`Could not load image because of ${wn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var ut=(he,Fe,gt)=>{const wn=(ar,zr)=>{if(ar)Fe(ar);else if(zr){const gi=typeof createImageBitmap=="function",Ki=gt?gt(zr):zr;gi?pt(Ki,Fe):Ae(Ki,Fe)}};return he.type==="json"?bt(he,wn):dt(he,wn)},Et=(he,Fe)=>{typeof createImageBitmap=="function"?pt(he,Fe):Ae(he,Fe)},cn=(he=>(he.CENTER="center",he.TOP="top",he["TOP-LEFT"]="top-left",he["TOP-RIGHT"]="top-right",he.BOTTOM="bottom",he["BOTTOM-LEFT"]="bottom-left",he["BOTTOM-RIGHT"]="bottom-right",he.LEFT="left",he.RIGHT="right",he))(cn||{}),ze={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function St(he,Fe,gt){const wn=he.classList;for(const ar in ze)ze.hasOwnProperty(ar)&&wn.remove(`l7-${gt}-anchor-${ar}`);wn.add(`l7-${gt}-anchor-${Fe}`)}var we=D(37620);function nt(he){return typeof he=="string"?!!d3.color(he):!1}function Xe(he){const Fe=we.ZP(he),gt=[0,0,0,0];return Fe!=null&&(gt[0]=Fe.r/255,gt[1]=Fe.g/255,gt[2]=Fe.b/255,gt[3]=Fe.opacity),gt}function Ze(he){const Fe=he&&he[0],gt=he&&he[1],wn=he&&he[2];return Fe+gt*256+wn*65536-1}function Rt(he){return[he+1&255,he+1>>8&255,he+1>>8>>8&255]}function yt(he){let Fe=window.document.createElement("canvas"),gt=Fe.getContext("2d");Fe.width=256,Fe.height=1;let wn=null;const ar=gt.createLinearGradient(0,0,256,1),zr=he.positions[0],gi=he.positions[he.positions.length-1];for(let Ki=0;Ki<he.colors.length;++Ki){const ya=(he.positions[Ki]-zr)/(gi-zr);ar.addColorStop(ya,he.colors[Ki])}return gt.fillStyle=ar,gt.fillRect(0,0,256,1),wn=new Uint8ClampedArray(gt.getImageData(0,0,256,1).data),Fe=null,gt=null,{data:wn,width:256,height:1}}function Me(he,Fe){let gt=window.document.createElement("canvas"),wn=gt.getContext("2d");gt.width=256,gt.height=1;const ar=wn.createLinearGradient(0,0,256,1),zr=Fe[1]-Fe[0];for(let ya=0;ya<he.colors.length;++ya){const Ea=Math.max((he.positions[ya]-Fe[0])/zr,0);ar.addColorStop(Ea,he.colors[ya])}wn.fillStyle=ar,wn.fillRect(0,0,256,1);const gi=wn.getImageData(0,0,256,1).data,Ki=kn(wn,gi);return gt=null,wn=null,Ki}function Gt(he){let Fe=window.document.createElement("canvas"),gt=Fe.getContext("2d");Fe.width=256,Fe.height=1;const wn=gt.createImageData(256,1);return wn.data.fill(0),he.positions.forEach((ar,zr)=>{const gi=Xe(he.colors[zr]);wn.data[ar*4+0]=gi[0]*255,wn.data[ar*4+1]=gi[1]*255,wn.data[ar*4+2]=gi[2]*255,wn.data[ar*4+3]=gi[3]*255}),Fe=null,gt=null,wn}function ln(he){let Fe=window.document.createElement("canvas"),gt=Fe.getContext("2d");gt.globalAlpha=1,Fe.width=256,Fe.height=1;const wn=256/he.colors.length;for(let gi=0;gi<he.colors.length;gi++)gt.beginPath(),gt.lineWidth=2,gt.strokeStyle=he.colors[gi],gt.moveTo(gi*wn,0),gt.lineTo((gi+1)*wn,0),gt.stroke();const ar=gt.getImageData(0,0,256,1).data,zr=kn(gt,ar);return Fe=null,gt=null,zr}function Ln(he,Fe){let gt=window.document.createElement("canvas"),wn=gt.getContext("2d");wn.globalAlpha=1,gt.width=256,gt.height=1;const ar=Fe[1]-Fe[0];he.positions.length-he.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let Ki=0;Ki<he.colors.length;Ki++)wn.beginPath(),wn.lineWidth=2,wn.strokeStyle=he.colors[Ki],wn.moveTo((he.positions[Ki]-Fe[0])/ar*255,0),wn.lineTo((he.positions[Ki+1]-Fe[0])/ar*255,0),wn.stroke();const zr=wn.getImageData(0,0,256,1).data,gi=kn(wn,zr);return gt=null,wn=null,gi}function kn(he,Fe){const gt=he.createImageData(256,1);for(let wn=0;wn<gt.data.length;wn+=4)gt.data[wn+0]=Fe[wn+0],gt.data[wn+1]=Fe[wn+1],gt.data[wn+2]=Fe[wn+2],gt.data[wn+3]=Fe[wn+3];return gt}function lr(he){switch(he==null?void 0:he.type){case"cat":return[0,255];default:return[0,1]}}var zt=D(74691),Kt=D.n(zt),yn=D(50361),Kn=D.n(yn),rn=D(23279),Wt=D.n(rn),Pt=D(27361),Pe=D.n(Pt),Qe=D(51584),Bt=D.n(Qe),z=D(18446),ue=D.n(z),ot=D(14293),le=D.n(ot),$t=D(81763),an=D.n($t),hn=D(68630),Dn=D.n(hn),Xn=D(47037),Gn=D.n(Xn),dn=D(36719),mt=D.n(dn),Ct=D(82492),Cn=D.n(Ct),Pn=D(30236),Zn=D.n(Pn),ht=D(97019),ye=D.n(ht),Be=D(23493),rt=D.n(Be),Mt=D(44908),Ot=D.n(Mt),En=D(11700),$n=D.n(En),yr=D(23560),qn=D.n(yr),Ce=D(13218),xe=D.n(Ce),ke=D(52353),et=D.n(ke),Tt=D(68929),Yt=D.n(Tt),pn=D(73955),_t=D.n(pn),qt={isNil:le(),merge:Cn(),throttle:rt(),isString:Gn(),debounce:Wt(),pull:ye(),isTypedArray:mt(),isPlainObject:Dn(),isNumber:an(),isBoolean:Bt(),isEqual:ue(),cloneDeep:Kn(),uniq:Ot(),clamp:Kt(),upperFirst:$n(),get:Pe(),mergeWith:Zn(),isFunction:qn(),isObject:xe(),isUndefined:et(),camelCase:Yt(),uniqueId:_t()},{pull:Qn}=qt;function _r(he){let Fe=he;return typeof he=="string"&&(Fe=window.document.getElementById(he)),Fe}function Vr(he){return he.trim?he.trim():he.replace(/^\s+|\s+$/g,"")}function pr(he){return Vr(he).split(/\s+/)}function Ur(he){var Fe;const gt=(Fe=document==null?void 0:document.documentElement)==null?void 0:Fe.style;if(!gt)return he[0];for(const wn in he)if(he[wn]&&he[wn]in gt)return he[wn];return he[0]}function mi(he,Fe,gt){const wn=window.document.createElement(he);return Fe&&(wn.className=Fe||""),gt&&gt.appendChild(wn),wn}function wi(he){const Fe=he.parentNode;Fe&&Fe.removeChild(he)}function Sr(he,Fe){if(he.classList!==void 0){const gt=pr(Fe);for(let wn=0,ar=gt.length;wn<ar;wn++)he.classList.add(gt[wn])}else if(!hi(he,Fe)){const gt=bi(he);si(he,(gt?gt+" ":"")+Fe)}}function Ti(he,Fe){he.classList!==void 0?pr(Fe).forEach(wn=>{he.classList.remove(wn)}):si(he,Vr((" "+bi(he)+" ").replace(" "+Fe+" "," ")))}function hi(he,Fe){if(he.classList!==void 0)return he.classList.contains(Fe);const gt=bi(he);return gt.length>0&&new RegExp("(^|\\s)"+Fe+"(\\s|$)").test(gt)}function si(he,Fe){he instanceof HTMLElement?he.className=Fe:he.className.baseVal=Fe}function Mo(he,Fe,gt){gt===void 0?hi(he,Fe)?Ti(he,Fe):Sr(he,Fe):gt?Sr(he,Fe):Ti(he,Fe)}function bi(he){return he instanceof SVGElement&&(he=he.correspondingElement),he.className.baseVal===void 0?he.className:he.className.baseVal}function na(he){for(;he&&he.firstChild;)he.removeChild(he.firstChild)}var _a=Ur(["transform","WebkitTransform"]);function Ro(he,Fe){he.style[_a]=Fe}function qo(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const he=window.document.createEvent("UIEvents");he.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(he)}}function Ne(he){const Fe=["padding: "+(he.height/2-8)+"px "+he.width/2+"px;","line-height: "+he.height+"px;","background-image: url("+he.toDataURL()+");"];console.log(`%c
`,Fe.join(""))}function Je(){var he;const Fe=window.document.querySelector('meta[name="viewport"]');if(!Fe)return 1;const wn=((he=Fe.content)==null?void 0:he.split(",")).find(ar=>{const[zr]=ar.split("=");return zr==="initial-scale"});return wn?wn.split("=")[1]*1:1}var kt=Je()<1?1:window.devicePixelRatio;function sn(he,Fe){he.setAttribute("style",`${he.style.cssText}${Fe}`)}function Nn(he){return he.split(";").map(Fe=>Fe.trim()).filter(Fe=>Fe)}function Bn(he,Fe){var gt;const wn=Nn((gt=he.getAttribute("style"))!=null?gt:""),ar=Nn(Fe),zr=Qn(wn,...ar);he.setAttribute("style",zr.join(";"))}function gn(he){return Object.entries(he).map(([Fe,gt])=>`${Fe}: ${gt}`).join(";")}function On(he,Fe){return{left:he.left-Fe.left,top:he.top-Fe.top,right:Fe.left+Fe.width-he.left-he.width,bottom:Fe.top+Fe.height-he.top-he.height}}function dr(he,Fe){he.checked=Fe,Fe?he.setAttribute("checked","true"):he.removeAttribute("checked")}function hr(he){he.innerHTML=""}function ii(he){he.setAttribute("draggable","false")}function Gi(he,Fe){if(typeof Fe=="string"){const gt=document.createElement("div");for(gt.innerHTML=Fe;gt.firstChild;)he.append(gt.firstChild)}else Array.isArray(Fe)?he.append(...Fe):he.append(Fe)}function ao(he,Fe){var gt;const wn=Array.isArray(Fe)?Fe:[Fe];let ar=he;for(;ar instanceof Element&&ar!==window.document.body;){if(wn.find(zr=>ar==null?void 0:ar.matches(zr)))return ar;ar=(gt=ar==null?void 0:ar.parentElement)!=null?gt:null}}function Qr(he){return typeof ImageBitmap!="undefined"&&he instanceof ImageBitmap}function ji(){return typeof importScripts=="function"}var Li=ji()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Zr=navigator==null?void 0:navigator.userAgent,yo=!!Zr.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),Mi=Zr.indexOf("Android")>-1||Zr.indexOf("Adr")>-1;function xo(){const he=Zr,Fe=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let gt=!0;for(const wn of Fe)if(he.indexOf(wn)>0){gt=!1;break}return gt}function xi(he,Fe){he.forEach(gt=>{Fe[gt]&&(Fe[gt]=Fe[gt].bind(Fe))})}var Oo=class{constructor(he=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=he}run(he){const Fe=new Date().getTime(),gt=Fe-this.timestamp;this.timestamp=Fe,gt>=this.duration&&he()}},ra=D(39034);function Ha(he){var Fe=[1/0,1/0,-1/0,-1/0];return(0,ra.pZ)(he,function(gt){Fe[0]>gt[0]&&(Fe[0]=gt[0]),Fe[1]>gt[1]&&(Fe[1]=gt[1]),Fe[2]<gt[0]&&(Fe[2]=gt[0]),Fe[3]<gt[1]&&(Fe[3]=gt[1])}),Fe}Ha.default=Ha;var ia=Ha,Wo=D(1449);function Fa(he){return typeof he=="number"}function cs(he){return he-Math.fround(he)}var wt=2*Math.PI*6378137/2;function Zt(he,Fe){const[gt,wn,ar,zr]=Fe;return he.lng>gt&&he.lng<=ar&&he.lat>wn&&he.lat<=zr}function Un(he){const Fe=[1/0,1/0,-1/0,-1/0];return he.forEach(gt=>{const{coordinates:wn}=gt;Ir(Fe,wn)}),Fe}function Ir(he,Fe){return Array.isArray(Fe[0])?Fe.forEach(gt=>{Ir(he,gt)}):(he[0]>Fe[0]&&(he[0]=Fe[0]),he[1]>Fe[1]&&(he[1]=Fe[1]),he[2]<Fe[0]&&(he[2]=Fe[0]),he[3]<Fe[1]&&(he[3]=Fe[1])),he}function Ci(he,Fe){return oo(he,Fe)}function oo(he,Fe){return Array.isArray(he[0])?he.map(gt=>oo(gt,Fe)):Fe(he)}function Yo(he,Fe=!0,gt={enable:!0,decimal:1}){he=fl(he,Fe);const wn=he[0],ar=he[1];let zr=wn*wt/180,gi=Math.log(Math.tan((90+ar)*Math.PI/360))/(Math.PI/180);return gi=gi*wt/180,gt.enable&&(zr=Number(zr.toFixed(gt.decimal)),gi=Number(gi.toFixed(gt.decimal))),he.length===3?[zr,gi,he[2]]:[zr,gi]}function ns(he,Fe=6){const gt=he[0],wn=he[1];let ar=gt/wt*180,zr=wn/wt*180;return zr=180/Math.PI*(2*Math.atan(Math.exp(zr*Math.PI/180))-Math.PI/2),Fe!=null&&(ar=Number(ar.toFixed(Fe)),zr=Number(zr.toFixed(Fe))),he.length===3?[ar,zr,he[2]]:[ar,zr]}function Ds(he){if(he==null)throw new Error("lng is required");return(he>180||he<-180)&&(he=he%360,he>180&&(he=-360+he),he<-180&&(he=360+he),he===0&&(he=0)),he}function Us(he){if(he==null)throw new Error("lat is required");return(he>90||he<-90)&&(he=he%180,he>90&&(he=-180+he),he<-90&&(he=180+he),he===0&&(he=0)),he}function fl(he,Fe){if(Fe===!1)return he;const gt=Ds(he[0]);let wn=Us(he[1]);return wn>85&&(wn=85),wn<-85&&(wn=-85),he.length===3?[gt,wn,he[2]]:[gt,wn]}function xh(he){const Fe=85.0511287798,gt=Math.max(Math.min(Fe,he[1]),-Fe),wn=256<<20;let ar=Math.PI/180,zr=he[0]*ar,gi=gt*ar;gi=Math.log(Math.tan(Math.PI/4+gi/2));const Ki=.5/Math.PI,ya=.5,Ea=-.5/Math.PI;return ar=.5,zr=wn*(Ki*zr+ya),gi=wn*(Ea*gi+ar),[Math.floor(zr),Math.floor(gi)]}function kp(he){const Fe=.5/Math.PI,gt=.5,wn=-.5/Math.PI;let ar=.5;const zr=256<<20;let[gi,Ki]=he;gi=(gi/zr-gt)/Fe,Ki=(Ki/zr-ar)/wn,Ki=(Math.atan(Math.pow(Math.E,Ki))-Math.PI/4)*2,ar=Math.PI/180;const ya=Ki/ar;return[gi/ar,ya]}function Ad(he,Fe){const gt=85.0511287798,wn=Math.PI/180,ar=6378137;return Fe=Math.max(Math.min(gt,Fe),-gt),he*=wn,Fe*=wn,Fe=Math.log(Math.tan(Math.PI/4+Fe/2)),[he*ar,Fe*ar]}function Vl(he,Fe){const gt=Math.PI/180,wn=6378137,ar=he/wn/gt,zr=2*(Math.atan(Math.exp(Fe/wn))-Math.PI/4)/gt;return[ar,zr]}function If(he,Fe,gt){const wn=degreesToRadians(Fe[1]-he[1]),ar=degreesToRadians(Fe[0]-he[0]),zr=degreesToRadians(he[1]),gi=degreesToRadians(Fe[1]),Ki=Math.pow(Math.sin(wn/2),2)+Math.pow(Math.sin(ar/2),2)*Math.cos(zr)*Math.cos(gi);return radiansToLength(2*Math.atan2(Math.sqrt(Ki),Math.sqrt(1-Ki)),gt="meters")}function Lf(he){const Fe=Math.PI/180,gt=85.0511287798,wn=6378137,ar=Math.max(Math.min(gt,he[1]),-gt),zr=Math.sin(ar*Fe),gi=wn*he[0]*Fe,Ki=wn*Math.log((1+zr)/(1-zr))/2;return[gi,Ki]}function sc(he,Fe){const gt=Math.abs(he[1][1]-he[0][1])*Fe,wn=Math.abs(he[1][0]-he[0][0])*Fe;return[[he[0][0]-wn,he[0][1]-gt],[he[1][0]+wn,he[1][1]+gt]]}function zc(he,Fe){return he[0][0]<=Fe[0][0]&&he[0][1]<=Fe[0][1]&&he[1][0]>=Fe[1][0]&&he[1][1]>=Fe[1][1]}function cu(he){return[[he[0],he[1]],[he[2],he[3]]]}function eh(he){const Fe=pc(he,[0,0]);return[he[0]/Fe,he[1]/Fe]}function pc(he,Fe){return Math.sqrt(Math.pow(he[0]-Fe[0],2)+Math.pow(he[1]-Fe[1],2))}function Os(he,Fe){return he[0]*Fe[0]+he[1]*Fe[1]}function Oc(he){return Math.sqrt(he[0]*he[0]+he[1]*he[1])}function gf(he,Fe){return Math.acos(Os(he,Fe)/(Oc(he)*Oc(Fe)))*180/Math.PI}function Zh(he,Fe){return Fe[0]>0?Fe[1]>0?90-Math.atan(Fe[1]/Fe[0])*180/Math.PI:90+Math.atan(-Fe[1]/Fe[0])*180/Math.PI:Fe[1]<0?180+(90-Math.atan(Fe[1]/Fe[0])*180/Math.PI):270+Math.atan(Fe[1]/-Fe[0])*180/Math.PI}function Up(he,Fe=100){if(!he||he.length<2)return;const gt=[0,1];let wn=0;const ar=[];for(let zr=0;zr<he.length-1;zr++){const gi=he[zr],Ki=he[zr+1],ya=pc(gi,Ki);wn+=ya;const Ea=[gi[0]-Ki[0],gi[1]-Ki[1]];let Es=Zh(gt,Ea);if(zr>0){const Ua=ar[zr-1].rotation;Ua-Es>360-Ua+Es&&(Es=Es+360)}ar.push({start:gi,end:Ki,dis:ya,rotation:Es,duration:0})}return ar.map(zr=>{zr.duration=Fe*(zr.dis/wn)}),ar}function Eh(he){if(Fa(he[0]))return he;if(Fa(he[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Fa(he[0][0][0])){const Fe=he;let gt=0,wn=0,ar=0;return Fe.forEach(zr=>{zr.forEach(gi=>{gt+=gi[0],wn+=gi[1],ar++})}),[gt/ar,wn/ar,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Cd(he){let Fe=he[0],gt=he[1],wn=he[0],ar=he[1],zr=0,gi=0,Ki=0;for(let ya=0;ya<he.length;ya+=2){const Ea=he[ya],Es=he[ya+1];Ea&&Es&&(Fe=Math.max(Ea,Fe),gt=Math.max(Es,gt),wn=Math.min(Ea,wn),ar=Math.min(Es,ar),zr+=Ea,gi+=Es,Ki++)}return{center:[zr/Ki,gi/Ki],radius:Math.sqrt(Math.pow(Fe-wn,2)+Math.pow(gt-ar,2))/2}}function th(he){return ia((0,Wo.uf)([(0,Wo.Tu)(he)]))}function Xh(he){let wn=0;he+="x";const ar=Math.floor(9007199254740991/137);for(let zr=0;zr<he.length;zr++)wn>ar&&(wn=Math.floor(wn/137)),wn=wn*131+he.charCodeAt(zr);return wn}function Od(he){he=he.toString();let Fe=5381,gt=he.length;for(;gt;)Fe=Fe*33^he.charCodeAt(--gt);return Fe>>>0}function Rd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,he=>{const Fe=Math.random()*16|0;return(he==="x"?Fe:Fe&3|8).toString(16)})}function _0(he,Fe,gt,wn,ar=30,zr){let gi=gt;return zr&&(gi=Math.round(gt*(ar-1))/(ar-1)),wn?Hl(he,Fe,gi,wn):Hl(he,Fe,gi,.314)}function Df(he,Fe){const gt=1-Fe;return(he[0]*gt+he[1]*Fe)*gt+(he[1]*gt+he[2]*Fe)*Fe}function Uu(he,Fe){return Math.sqrt(Math.pow(he[0]-Fe[0],2)+Math.pow(he[1]-Fe[1],2))}function up(he,Fe,gt){const wn=[Fe[0]-he[0],Fe[1]-he[1]],ar=Uu(wn,[0,0]),zr=Math.atan2(wn[1],wn[0]),gi=ar/2/Math.cos(gt),Ki=zr+gt;return[gi*Math.cos(Ki)+he[0],gi*Math.sin(Ki)+he[1]]}function Hl(he,Fe,gt,wn){const ar=up(he,Fe,wn),zr=[he[0],ar[0],Fe[0]],gi=[he[1],ar[1],Fe[1]];return[Df(zr,gt),Df(gi,gt),0]}function Su(he,Fe,gt,wn,ar=30,zr){let gi=gt;return zr&&(gi=Math.round(gt*29)/29),vc(he,Fe,gi)}function ef(he,Fe){const gt=[he[0]-Fe[0],he[1]-Fe[1]],wn=[Math.sin(gt[0]/2),Math.sin(gt[1]/2)],ar=wn[1]*wn[1]+Math.cos(he[1])*Math.cos(Fe[1])*wn[0]*wn[0];return 2*Math.atan2(Math.sqrt(ar),Math.sqrt(1-ar))}function vc(he,Fe,gt){const wn=[degreesToRadians(he[0]),degreesToRadians(he[1])],ar=[degreesToRadians(Fe[0]),degreesToRadians(Fe[1])],zr=ef(wn,ar);if(Math.abs(zr-Math.PI)<.001)return[(1-gt)*wn[0]+gt*ar[0],(1-gt)*wn[1]+gt*ar[1]];const gi=Math.sin((1-gt)*zr)/Math.sin(zr),Ki=Math.sin(gt*zr)/Math.sin(zr),ya=[Math.sin(wn[0]),Math.sin(wn[1])],Ea=[Math.cos(wn[0]),Math.cos(wn[1])],Es=[Math.sin(ar[0]),Math.sin(ar[1])],Ua=[Math.cos(ar[0]),Math.cos(ar[1])],Da=gi*Ea[1]*Ea[0]+Ki*Ua[1]*Ua[0],Mc=gi*Ea[1]*ya[0]+Ki*Ua[1]*Es[0],of=gi*ya[1]+Ki*Es[1];return[radiansToDegrees(Math.atan2(Mc,Da)),radiansToDegrees(Math.atan2(of,Math.sqrt(Da*Da+Mc*Mc)))]}function tf(he,Fe){let gt=0;const wn=[];for(let Ki=0;Ki<he.length-1;Ki++){const ya=he[Ki],Ea=he[Ki+1],Es=nf(ya,Ea),Ua=gt;gt+=Es,wn.push({p1:ya,p2:Ea,totalDistance:gt,distance:Es,lastTotalDistance:Ua})}const ar=gt*Fe;let zr,gi;for(const Ki of wn)if(Ki.totalDistance>ar){const Ea=Ki.p1,Es=Ki.p2,Ua=(ar-Ki.lastTotalDistance)/Ki.distance,Da=uu(Es,Ea,Ua);zr=Da[0],gi=Da[1];break}return{lng:zr,lat:gi,height:0}}function uu(he,Fe,gt){return[he[0]*gt+Fe[0]*(1-gt),he[1]*gt+Fe[1]*(1-gt)]}function nf(he,Fe){return Math.sqrt(Math.pow(he[0]-Fe[0],2)+Math.pow(he[1]-Fe[1],2))}var Pl=Object.defineProperty,zu=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,fp=Object.prototype.propertyIsEnumerable,$h=(he,Fe,gt)=>Fe in he?Pl(he,Fe,{enumerable:!0,configurable:!0,writable:!0,value:gt}):he[Fe]=gt,bs=(he,Fe)=>{for(var gt in Fe||(Fe={}))yf.call(Fe,gt)&&$h(he,gt,Fe[gt]);if(zu)for(var gt of zu(Fe))fp.call(Fe,gt)&&$h(he,gt,Fe[gt]);return he};function Md(he,Fe){const{featureId:gt}=Fe;let wn=he.data.dataArray;return typeof gt=="number"&&(wn=wn.filter(({id:ar})=>ar===gt)),wn.map(ar=>{const zr=Pd(ar,Fe);return bs(bs({},ar),zr)})}function Yh(he,Fe){return new Promise(gt=>{he.inited?gt(Md(he,Fe)):he.once("update",()=>{gt(Md(he,Fe))})})}function Pd(he,Fe){const{offset:gt,shape:wn,thetaOffset:ar,segmentNumber:zr=30,autoFit:gi=!0}=Fe,{coordinates:Ki}=he;if(wn==="line")return pathLineAtOffset(Ki,gt);const ya=Ki[0],Ea=Ki[1],Es=typeof ar=="string"?he[ar]||0:ar;let Ua;switch(wn){case"arc":Ua=arcLineAtOffset;break;case"greatcircle":Ua=greatCircleLineAtOffset;break;default:Ua=arcLineAtOffset}const[Da,Mc,of]=Ua(ya,Ea,gt,Es,zr,gi);return{lng:Da,lat:Mc,height:of}}var cl=class{constructor(he=50,Fe){this.limit=he,this.destroy=Fe||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(he=>{this.delete(he)}),this.cache={},this.order=[]}get(he){const Fe=this.cache[he];return Fe&&(this.deleteOrder(he),this.appendOrder(he)),Fe}set(he,Fe){this.cache[he]?(this.delete(he),this.cache[he]=Fe,this.appendOrder(he)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[he]=Fe,this.appendOrder(he))}delete(he){const Fe=this.cache[he];Fe&&(this.deleteCache(he),this.deleteOrder(he),this.destroy(Fe,he))}deleteCache(he){delete this.cache[he]}deleteOrder(he){const Fe=this.order.findIndex(gt=>gt===he);Fe>=0&&this.order.splice(Fe,1)}appendOrder(he){this.order.push(he)}defaultDestroy(he,Fe){return null}};function Sh(he){if(he.length===0)throw new Error("max requires at least one data point");let Fe=he[0];for(let gt=1;gt<he.length;gt++)he[gt]>Fe&&(Fe=he[gt]);return Fe*1}function Th(he){if(he.length===0)throw new Error("min requires at least one data point");let Fe=he[0];for(let gt=1;gt<he.length;gt++)he[gt]<Fe&&(Fe=he[gt]);return Fe*1}function ne(he){if(he.length===0)return 0;let Fe=he[0]*1;for(let gt=1;gt<he.length;gt++)Fe+=he[gt]*1;return Fe}function _e(he){if(he.length===0)throw new Error("mean requires at least one data point");return ne(he)/he.length}function qe(he){if(he.length===0)throw new Error("mean requires at least one data point");if(he.length<3)return he[0];he.sort();let Fe=he[0],gt=NaN,wn=0,ar=1;for(let zr=1;zr<he.length+1;zr++)he[zr]!==Fe?(ar>wn&&(wn=ar,gt=Fe),ar=1,Fe=he[zr]):ar++;return gt*1}var un={min:Th,max:Sh,mean:_e,sum:ne,mode:qe};function Y(he,Fe){return he.map(gt=>gt[Fe])}function tr(he,Fe){return un[he](Fe)}function Rr(he,Fe){Fe===void 0&&(Fe={});var gt=Number(he[0]),wn=Number(he[1]),ar=Number(he[2]),zr=Number(he[3]);if(he.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var gi=[gt,wn],Ki=[gt,zr],ya=[ar,zr],Ea=[ar,wn];return(0,Wo.yu)([[gi,Ea,ya,Ki,gi]],Fe.properties,{bbox:he,id:Fe.id})}var Di=D(26729),zi=D.n(Di),lo=(he=>(he.Realtime="realtime",he.Overlap="overlap",he.Replace="replace",he))(lo||{}),uo=(he=>(he.Loading="Loading",he.Loaded="Loaded",he.Failure="Failure",he.Cancelled="Cancelled",he))(uo||{}),wa=0,No=1,Aa=2;function os(he){he.forEach(Fe=>{Fe.isCurrent&&(Fe.isVisible=Fe.isLoaded)})}function ga(he){he.forEach(Fe=>{Fe.properties.state=wa}),he.forEach(Fe=>{Fe.isCurrent&&!Rs(Fe)&&ka(Fe)}),he.forEach(Fe=>{Fe.isVisible=!!(Fe.properties.state&Aa)})}function Ra(he){he.forEach(gt=>{gt.properties.state=wa}),he.forEach(gt=>{gt.isCurrent&&Rs(gt)}),he.slice().sort((gt,wn)=>gt.z-wn.z).forEach(gt=>{gt.isVisible=!!(gt.properties.state&Aa),gt.children.length&&(gt.isVisible||gt.properties.state&No)?gt.children.forEach(wn=>{wn.properties.state=No}):gt.isCurrent&&ka(gt)})}function Rs(he){for(;he;){if(he.isLoaded)return he.properties.state|=Aa,!0;he=he.parent}return!1}function ka(he){he.children.forEach(Fe=>{Fe.isLoaded?Fe.properties.state|=Aa:ka(Fe)})}var Za=256,ms=[-1/0,-1/0,1/0,1/0],nl=.2,Wa=5,Rc={[lo.Realtime]:os,[lo.Overlap]:ga,[lo.Replace]:Ra},us=()=>{};function Tu(he,Fe,gt){const wn=Math.floor((he+180)/360*Math.pow(2,gt)),ar=Math.floor((1-Math.log(Math.tan(Fe*Math.PI/180)+1/Math.cos(Fe*Math.PI/180))/Math.PI)/2*Math.pow(2,gt));return[wn,ar]}function fu(he,Fe,gt){const wn=he/Math.pow(2,gt)*360-180,ar=Math.PI-2*Math.PI*Fe/Math.pow(2,gt),zr=180/Math.PI*Math.atan(.5*(Math.exp(ar)-Math.exp(-ar)));return[wn,zr]}var jc=(he,Fe,gt)=>{const[wn,ar]=fu(he,Fe,gt),[zr,gi]=fu(he+1,Fe+1,gt);return[wn,gi,zr,ar]};function nh({zoom:he,latLonBounds:Fe,maxZoom:gt=1/0,minZoom:wn=0,zoomOffset:ar=0,extent:zr=ms}){let gi=Math.ceil(he)+ar;if(Number.isFinite(wn)&&gi<wn)return[];Number.isFinite(gt)&&gi>gt&&(gi=gt);const[Ki,ya,Ea,Es]=Fe,Ua=[Math.max(Ki,zr[0]),Math.max(ya,zr[1]),Math.min(Ea,zr[2]),Math.min(Es,zr[3])],Da=[],[Mc,of]=Tu(Ua[0],Ua[1],gi),[rl,fo]=Tu(Ua[2],Ua[3],gi);for(let Ma=Mc;Ma<=rl;Ma++)for(let as=fo;as<=of;as++)Da.push({x:Ma,y:as,z:gi});const Yc=(rl+Mc)/2,Nd=(of+fo)/2,Oh=(Ma,as)=>Math.abs(Ma-Yc)+Math.abs(as-Nd);return Da.sort((Ma,as)=>Oh(Ma.x,Ma.y)-Oh(as.x,as.y)),Da}var Id=(he,Fe,gt,wn=!0)=>{const ar=Math.pow(2,gt),zr=ar-1,gi=ar;let Ki=he;const ya=Fe;return wn&&(Ki<0?Ki=Ki+gi:Ki>zr&&(Ki=Ki%gi)),{warpX:Ki,warpY:ya}},_f=(he,Fe,gt)=>new Promise((wn,ar)=>{var zr=ya=>{try{Ki(gt.next(ya))}catch(Ea){ar(Ea)}},gi=ya=>{try{Ki(gt.throw(ya))}catch(Ea){ar(Ea)}},Ki=ya=>ya.done?wn(ya.value):Promise.resolve(ya.value).then(zr,gi);Ki((gt=gt.apply(he,Fe)).next())}),Nf=class extends Di.EventEmitter{constructor(he){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:Fe,y:gt,z:wn,tileSize:ar,warp:zr=!0}=he;this.x=Fe,this.y=gt,this.z=wn,this.warp=zr||!0,this.tileSize=ar}get isLoading(){return this.loadStatus===uo.Loading}get isLoaded(){return this.loadStatus===uo.Loaded}get isFailure(){return this.loadStatus===uo.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===uo.Cancelled}get isDone(){return[uo.Loaded,uo.Cancelled,uo.Failure].includes(this.loadStatus)}get bounds(){return jc(this.x,this.y,this.z)}get bboxPolygon(){const[he,Fe,gt,wn]=this.bounds,ar=[(gt-he)/2,(wn-Fe)/2];return Rr(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:ar,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(he){return _f(this,arguments,function*({getData:Fe,onLoad:gt,onError:wn}){this.loadDataId++;const ar=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=uo.Loading;let zr=null,gi;try{const{x:Ki,y:ya,z:Ea,bounds:Es,tileSize:Ua,warp:Da}=this,{warpX:Mc,warpY:of}=Id(Ki,ya,Ea,Da),{signal:rl}=this.abortController;zr=yield Fe({x:Mc,y:of,z:Ea,bounds:Es,tileSize:Ua,signal:rl,warp:Da},this)}catch(Ki){gi=Ki}if(ar===this.loadDataId&&!(this.isCancelled&&!zr)){if(gi||!zr){this.loadStatus=uo.Failure,wn(gi,this);return}this.loadStatus=uo.Loaded,this.data=zr,gt(this)}})}reloadData(he){this.isLoading&&this.abortLoad(),this.loadData(he)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=uo.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},rf=(he,Fe)=>{const gt=cu(he),wn=sc(gt,Fe),ar=360*3-180,zr=85.0511287798065;return[Math.max(wn[0][0],-ar),Math.max(wn[0][1],-zr),Math.min(wn[1][0],ar),Math.min(wn[1][1],zr)]},wh=(he,Fe)=>{const gt=cu(he),wn=cu(Fe);return zc(gt,wn)},Ah=Object.defineProperty,Bf=Object.defineProperties,b0=Object.getOwnPropertyDescriptors,Ld=Object.getOwnPropertySymbols,zp=Object.prototype.hasOwnProperty,Ff=Object.prototype.propertyIsEnumerable,jp=(he,Fe,gt)=>Fe in he?Ah(he,Fe,{enumerable:!0,configurable:!0,writable:!0,value:gt}):he[Fe]=gt,Dd=(he,Fe)=>{for(var gt in Fe||(Fe={}))zp.call(Fe,gt)&&jp(he,gt,Fe[gt]);if(Ld)for(var gt of Ld(Fe))Ff.call(Fe,gt)&&jp(he,gt,Fe[gt]);return he},hp=(he,Fe)=>Bf(he,b0(Fe)),{throttle:kf}=qt,Vp=(he=>(he.TilesLoadStart="tiles-load-start",he.TileLoaded="tile-loaded",he.TileError="tile-error",he.TileUnload="tile-unload",he.TileUpdate="tile-update",he.TilesLoadFinished="tiles-load-finished",he))(Vp||{}),Ch=class extends zi(){constructor(he){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=kf((Fe,gt)=>{this.update(Fe,gt)},16),this.onTileLoad=Fe=>{this.emit("tile-loaded",Fe),this.updateTileVisible(),this.loadFinished()},this.onTileError=(Fe,gt)=>{this.emit("tile-error",{error:Fe,tile:gt}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=Fe=>{this.emit("tile-unload",Fe),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:ms,getTileData:us,warp:!0,updateStrategy:lo.Replace},this.updateOptions(he)}get isLoaded(){return this.currentTiles.every(he=>he.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((Fe,gt)=>Fe.z-gt.z)}updateOptions(he){const Fe=he.minZoom===void 0?this.options.minZoom:Math.ceil(he.minZoom),gt=he.maxZoom===void 0?this.options.maxZoom:Math.floor(he.maxZoom);this.options=hp(Dd(Dd({},this.options),he),{minZoom:Fe,maxZoom:gt})}update(he,Fe){const gt=Math.max(0,Math.ceil(he));if(this.lastViewStates&&this.lastViewStates.zoom===gt&&wh(this.lastViewStates.latLonBoundsBuffer,Fe))return;const wn=rf(Fe,nl);this.lastViewStates={zoom:gt,latLonBounds:Fe,latLonBoundsBuffer:wn},this.currentZoom=gt;let ar=!1;const zr=this.getTileIndices(gt,wn).filter(gi=>this.options.warp||gi.x>=0&&gi.x<Math.pow(2,gt));this.emit("tiles-load-start"),this.currentTiles=zr.map(({x:gi,y:Ki,z:ya})=>{let Ea=this.getTile(gi,Ki,ya);return Ea?(((Ea==null?void 0:Ea.isFailure)||(Ea==null?void 0:Ea.isCancelled))&&Ea.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Ea):(Ea=this.createTile(gi,Ki,ya),ar=!0,Ea)}),ar&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[he,Fe]of this.cacheTiles){if(!this.currentTiles.includes(Fe)){this.cacheTiles.delete(he),this.onTileUnload(Fe);return}this.onTileUnload(Fe),Fe.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(he,Fe,gt){const wn=this.cacheTiles.get(`${Fe},${gt},${he}`);wn&&(this.onTileUnload(wn),wn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(he,Fe,gt){const wn=this.getTileByLngLat(he,Fe,gt);wn&&this.reloadTileById(wn.z,wn.x,wn.y)}reloadTileByExtent(he,Fe){this.getTileIndices(Fe,he).forEach(wn=>{this.reloadTileById(wn.z,wn.x,wn.y)})}pruneRequests(){const he=[];for(const Fe of this.cacheTiles.values())Fe.isLoading&&!Fe.isCurrent&&!Fe.isVisible&&he.push(Fe);for(;he.length>0;)he.shift().abortLoad()}getTileByLngLat(he,Fe,gt){const{zoomOffset:wn}=this.options,ar=Math.ceil(gt)+wn,zr=Tu(he,Fe,ar);return this.tiles.filter(Ki=>Ki.key===`${zr[0]}_${zr[1]}_${ar}`)[0]}getTileExtent(he,Fe){return this.getTileIndices(Fe,he)}getTileByZXY(he,Fe,gt){return this.tiles.filter(ar=>ar.key===`${Fe}_${gt}_${he}`)[0]}clear(){for(const he of this.cacheTiles.values())he.isLoading?he.abortLoad():this.onTileUnload(he);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const he=this.options.updateStrategy,Fe=new Map;for(const ar of this.cacheTiles.values())Fe.set(ar.key,ar.isVisible),ar.isCurrent=!1,ar.isVisible=!1;for(const ar of this.currentTiles)ar.isCurrent=!0,ar.isVisible=!0;const gt=Array.from(this.cacheTiles.values());typeof he=="function"?he(gt):Rc[he](gt);let wn=!1;Array.from(this.cacheTiles.values()).forEach(ar=>{ar.isVisible!==Fe.get(ar.key)?(ar.isVisibleChange=!0,wn=!0):ar.isVisibleChange=!1}),wn&&this.emit("tile-update")}getTileIndices(he,Fe){const{tileSize:gt,extent:wn,zoomOffset:ar}=this.options,zr=Math.floor(this.options.maxZoom),gi=Math.ceil(this.options.minZoom);return nh({maxZoom:zr,minZoom:gi,zoomOffset:ar,tileSize:gt,zoom:he,latLonBounds:Fe,extent:wn})}getTileId(he,Fe,gt){return`${he},${Fe},${gt}`}loadFinished(){const he=!this.currentTiles.some(Fe=>!Fe.isDone);return he&&this.emit("tiles-load-finished"),he}getTile(he,Fe,gt){const wn=this.getTileId(he,Fe,gt);return this.cacheTiles.get(wn)}createTile(he,Fe,gt){const wn=this.getTileId(he,Fe,gt),ar=new Nf({x:he,y:Fe,z:gt,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(wn,ar),ar.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),ar}resizeCacheTiles(){const he=Wa*this.currentTiles.length;if(this.cacheTiles.size>he){for(const[gt,wn]of this.cacheTiles)if(!wn.isVisible&&!this.currentTiles.includes(wn)&&(this.cacheTiles.delete(gt),this.onTileUnload(wn)),this.cacheTiles.size<=he)break}this.rebuildTileTree()}rebuildTileTree(){for(const he of this.cacheTiles.values())he.parent=null,he.children.length=0;for(const he of this.cacheTiles.values()){const Fe=this.getNearestAncestor(he.x,he.y,he.z);he.parent=Fe,Fe!=null&&Fe.children&&Fe.children.push(he)}}getNearestAncestor(he,Fe,gt){for(;gt>this.options.minZoom;){he=Math.floor(he/2),Fe=Math.floor(Fe/2),gt=gt-1;const wn=this.getTile(he,Fe,gt);if(wn)return wn}return null}};function Hp(he){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(he)}function Uf(he){const Fe=[];let gt=/\{([a-z])-([a-z])\}/.exec(he);if(gt){const wn=gt[1].charCodeAt(0),ar=gt[2].charCodeAt(0);let zr;for(zr=wn;zr<=ar;++zr)Fe.push(he.replace(gt[0],String.fromCharCode(zr)));return Fe}if(gt=/\{(\d+)-(\d+)\}/.exec(he),gt){const wn=parseInt(gt[2],10);for(let ar=parseInt(gt[1],10);ar<=wn;ar++)Fe.push(he.replace(gt[0],ar.toString()));return Fe}return Fe.push(he),Fe}function Xs(he,Fe){if(!he||!he.length)throw new Error("url is not allowed to be empty");const{x:gt,y:wn,z:ar}=Fe,zr=Uf(he),gi=Math.abs(gt+wn)%zr.length;return(Le(zr[gi])?`${zr[gi]}/{z}/{x}/{y}`:zr[gi]).replace(/\{x\}/g,gt.toString()).replace(/\{y\}/g,wn.toString()).replace(/\{z\}/g,ar.toString()).replace(/\{bbox\}/g,jc(gt,wn,ar).join(",")).replace(/\{-y\}/g,(Math.pow(2,ar)-wn-1).toString())}function dp(he,Fe){const{x:gt,y:wn,z:ar,layer:zr,version:gi="1.0.0",style:Ki="default",format:ya,service:Ea="WMTS",tileMatrixset:Es}=Fe,Ua=Uf(he),Da=Math.abs(gt+wn)%Ua.length;return`${Ua[Da]}&SERVICE=${Ea}&REQUEST=GetTile&VERSION=${gi}&LAYER=${zr}&STYLE=${Ki}&TILEMATRIXSET=${Es}&FORMAT=${ya}&TILECOL=${gt}&TILEROW=${wn}&TILEMATRIX=${ar}`}function bf(he,Fe){return he==null?Fe:he}},48271:function(Ht,W,D){"use strict";D.d(W,{oT:function(){return ma},Ie:function(){return sy},dW:function(){return Xx},GI:function(){return tT},xs:function(){return xR}});var J={},Z={},E=a=>Z[a],ve=(a,o)=>{Z[a]=o},te=a=>J[a],se=(a,o)=>{J[a]=o},ae={},Se={},oe=34,Ge=10,ee=13;function me(a){return new Function("d","return {"+a.map(function(o,f){return JSON.stringify(o)+": d["+f+'] || ""'}).join(",")+"}")}function Le(a,o){var f=me(a);return function(m,w){return o(f(m),w,a)}}function be(a){var o=Object.create(null),f=[];return a.forEach(function(m){for(var w in m)w in o||f.push(o[w]=w)}),f}function Oe(a,o){var f=a+"",m=f.length;return m<o?new Array(o-m+1).join(0)+f:f}function fe(a){return a<0?"-"+Oe(-a,6):a>9999?"+"+Oe(a,6):Oe(a,4)}function He(a){var o=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),w=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":fe(a.getUTCFullYear(),4)+"-"+Oe(a.getUTCMonth()+1,2)+"-"+Oe(a.getUTCDate(),2)+(w?"T"+Oe(o,2)+":"+Oe(f,2)+":"+Oe(m,2)+"."+Oe(w,3)+"Z":m?"T"+Oe(o,2)+":"+Oe(f,2)+":"+Oe(m,2)+"Z":f||o?"T"+Oe(o,2)+":"+Oe(f,2)+"Z":"")}function bt(a){var o=new RegExp('["'+a+`
\r]`),f=a.charCodeAt(0);function m(Te,$e){var Dt,nn,Tn=w(Te,function(sr,Br){if(Dt)return Dt(sr,Br-1);nn=sr,Dt=$e?Le(sr,$e):me(sr)});return Tn.columns=nn||[],Tn}function w(Te,$e){var Dt=[],nn=Te.length,Tn=0,sr=0,Br,Er=nn<=0,ui=!1;Te.charCodeAt(nn-1)===Ge&&--nn,Te.charCodeAt(nn-1)===ee&&--nn;function Vi(){if(Er)return Se;if(ui)return ui=!1,ae;var no,Wr=Tn,ro;if(Te.charCodeAt(Wr)===oe){for(;Tn++<nn&&Te.charCodeAt(Tn)!==oe||Te.charCodeAt(++Tn)===oe;);return(no=Tn)>=nn?Er=!0:(ro=Te.charCodeAt(Tn++))===Ge?ui=!0:ro===ee&&(ui=!0,Te.charCodeAt(Tn)===Ge&&++Tn),Te.slice(Wr+1,no-1).replace(/""/g,'"')}for(;Tn<nn;){if((ro=Te.charCodeAt(no=Tn++))===Ge)ui=!0;else if(ro===ee)ui=!0,Te.charCodeAt(Tn)===Ge&&++Tn;else if(ro!==f)continue;return Te.slice(Wr,no)}return Er=!0,Te.slice(Wr,nn)}for(;(Br=Vi())!==Se;){for(var Po=[];Br!==ae&&Br!==Se;)Po.push(Br),Br=Vi();$e&&(Po=$e(Po,sr++))==null||Dt.push(Po)}return Dt}function O(Te,$e){return Te.map(function(Dt){return $e.map(function(nn){return Ee(Dt[nn])}).join(a)})}function L(Te,$e){return $e==null&&($e=be(Te)),[$e.map(Ee).join(a)].concat(O(Te,$e)).join(`
`)}function F(Te,$e){return $e==null&&($e=be(Te)),O(Te,$e).join(`
`)}function V(Te){return Te.map(re).join(`
`)}function re(Te){return Te.map(Ee).join(a)}function Ee(Te){return Te==null?"":Te instanceof Date?He(Te):o.test(Te+="")?'"'+Te.replace(/"/g,'""')+'"':Te}return{parse:m,parseRows:w,format:L,formatBody:F,formatRows:V,formatRow:re,formatValue:Ee}}var dt=bt(","),Nt=dt.parse,ct=dt.parseRows,lt=dt.format,Ie=dt.formatBody,Ae=dt.formatRows,pt=dt.formatRow,ut=dt.formatValue,Et=D(1449);function cn(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ze(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function St(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return St(a[0]);throw new Error("coordinates must only contain numbers")}function we(a,o,f){if(!o||!f)throw new Error("type and name required");if(!a||a.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.type)}function nt(a,o,f){if(!a)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!a.geometry||a.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.geometry.type)}function Xe(a,o,f){if(!a)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,w=a.features;m<w.length;m++){var O=w[m];if(!O||O.type!=="Feature"||!O.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!O.geometry||O.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+O.geometry.type)}}function Ze(a){return a.type==="Feature"?a.geometry:a}function Rt(a,o){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var yt=D(39034),Me=D(8543),Gt=D(38163),ln=D.n(Gt);function Ln(a,o){return a.map(f=>f[o]*1)}function kn(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function lr(a){return Array.isArray(a)?a.length===0?!1:!!kn(a[0]):!1}function zt(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function Kt(a){const o=Object.isFrozen(a)?Me.lodashUtil.cloneDeep(a):a;return ln()(o,!0),o}function yn(a,o){return a||[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}var Kn=Object.defineProperty,rn=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,Bt=(a,o,f)=>o in a?Kn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,z=(a,o)=>{for(var f in o||(o={}))Pe.call(o,f)&&Bt(a,f,o[f]);if(Pt)for(var f of Pt(o))Qe.call(o,f)&&Bt(a,f,o[f]);return a},ue=(a,o)=>rn(a,Wt(o));function ot(a,o){const{x:f,y:m,x1:w,y1:O,coordinates:L,geometry:F}=o,V=[];if(!Array.isArray(a))return{dataArray:[]};if(F)return a.filter(re=>re[F]&&re[F].type&&re[F].coordinates&&re[F].coordinates.length>0).forEach((re,Ee)=>{const Te=Kt(re[F]);(0,yt.nG)(Te,$e=>{const Dt=ze($e),nn=ue(z({},re),{_id:Ee,coordinates:Dt});V.push(nn)})}),{dataArray:V};for(let re=0;re<a.length;re++){const Ee=a[re];let Te=[];if(L){let Dt="Polygon";Array.isArray(L[0])||(Dt="Point"),Array.isArray(L[0])&&!Array.isArray(L[0][0])&&(Dt="LineString"),Te=Kt({type:Dt,coordinates:Ee[L]}).coordinates}else if(f&&m&&w&&O){const Dt=[parseFloat(Ee[f]),parseFloat(Ee[m])],nn=[parseFloat(Ee[w]),parseFloat(Ee[O])];Te=[Dt,nn]}else f&&m&&(Te=[parseFloat(Ee[f]),parseFloat(Ee[m])]);const $e=ue(z({},Ee),{_id:re,coordinates:Te});V.push($e)}return{dataArray:V}}function le(a,o){const f=Nt(a);return ot(f,o)}var $t=Object.defineProperty,an=Object.defineProperties,hn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable,dn=(a,o,f)=>o in a?$t(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,mt=(a,o)=>{for(var f in o||(o={}))Xn.call(o,f)&&dn(a,f,o[f]);if(Dn)for(var f of Dn(o))Gn.call(o,f)&&dn(a,f,o[f]);return a},Ct=(a,o)=>an(a,hn(o));function Cn(a){const o=a.toString();let f=5381,m=o.length;for(;m;)f=f*33^o.charCodeAt(--m);return f>>>0}function Pn(a,o){return o===void 0?null:typeof(a.properties[o]*1)=="number"?a.properties[o]*1:a.properties&&a.properties[o]?Cn(a.properties[o]+"")%1000019:null}function Zn(a,o){const f=[],m={};return a.features?(a.features=a.features.filter(w=>{const O=w.geometry;return w!=null&&O&&O.type&&O.coordinates&&O.coordinates.length>0}),a=Kt(a),a.features.length===0?{dataArray:[],featureKeys:m}:((0,yt.nG)(a,(w,O)=>{let L=Pn(w,o==null?void 0:o.featureId);L===null&&(L=O);const F=L,V=ze(w),re=Ct(mt({},w.properties),{coordinates:V,_id:F});f.push(re)}),{dataArray:f,featureKeys:m})):(a.features=[],{dataArray:[]})}function ht(a,o,f,m){for(var w=m,O=f-o>>1,L=f-o,F,V=a[o],re=a[o+1],Ee=a[f],Te=a[f+1],$e=o+3;$e<f;$e+=3){var Dt=ye(a[$e],a[$e+1],V,re,Ee,Te);if(Dt>w)F=$e,w=Dt;else if(Dt===w){var nn=Math.abs($e-O);nn<L&&(F=$e,L=nn)}}w>m&&(F-o>3&&ht(a,o,F,m),a[F+2]=w,f-F>3&&ht(a,F,f,m))}function ye(a,o,f,m,w,O){var L=w-f,F=O-m;if(L!==0||F!==0){var V=((a-f)*L+(o-m)*F)/(L*L+F*F);V>1?(f=w,m=O):V>0&&(f+=L*V,m+=F*V)}return L=a-f,F=o-m,L*L+F*F}function Be(a,o,f,m){var w={id:typeof a=="undefined"?null:a,type:o,geometry:f,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return rt(w),w}function rt(a){var o=a.geometry,f=a.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")Mt(a,o);else if(f==="Polygon"||f==="MultiLineString")for(var m=0;m<o.length;m++)Mt(a,o[m]);else if(f==="MultiPolygon")for(m=0;m<o.length;m++)for(var w=0;w<o[m].length;w++)Mt(a,o[m][w])}function Mt(a,o){for(var f=0;f<o.length;f+=3)a.minX=Math.min(a.minX,o[f]),a.minY=Math.min(a.minY,o[f+1]),a.maxX=Math.max(a.maxX,o[f]),a.maxY=Math.max(a.maxY,o[f+1])}function Ot(a,o){var f=[];if(a.type==="FeatureCollection")for(var m=0;m<a.features.length;m++)En(f,a.features[m],o,m);else a.type==="Feature"?En(f,a,o):En(f,{geometry:a},o);return f}function En(a,o,f,m){if(o.geometry){var w=o.geometry.coordinates,O=o.geometry.type,L=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),F=[],V=o.id;if(f.promoteId?V=o.properties[f.promoteId]:f.generateId&&(V=m||0),O==="Point")$n(w,F);else if(O==="MultiPoint")for(var re=0;re<w.length;re++)$n(w[re],F);else if(O==="LineString")yr(w,F,L,!1);else if(O==="MultiLineString")if(f.lineMetrics){for(re=0;re<w.length;re++)F=[],yr(w[re],F,L,!1),a.push(Be(V,"LineString",F,o.properties));return}else qn(w,F,L,!1);else if(O==="Polygon")qn(w,F,L,!0);else if(O==="MultiPolygon")for(re=0;re<w.length;re++){var Ee=[];qn(w[re],Ee,L,!0),F.push(Ee)}else if(O==="GeometryCollection"){for(re=0;re<o.geometry.geometries.length;re++)En(a,{id:V,geometry:o.geometry.geometries[re],properties:o.properties},f,m);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Be(V,O,F,o.properties))}}function $n(a,o){o.push(Ce(a[0])),o.push(xe(a[1])),o.push(0)}function yr(a,o,f,m){for(var w,O,L=0,F=0;F<a.length;F++){var V=Ce(a[F][0]),re=xe(a[F][1]);o.push(V),o.push(re),o.push(0),F>0&&(m?L+=(w*re-V*O)/2:L+=Math.sqrt(Math.pow(V-w,2)+Math.pow(re-O,2))),w=V,O=re}var Ee=o.length-3;o[2]=1,ht(o,0,Ee,f),o[Ee+2]=1,o.size=Math.abs(L),o.start=0,o.end=o.size}function qn(a,o,f,m){for(var w=0;w<a.length;w++){var O=[];yr(a[w],O,f,m),o.push(O)}}function Ce(a){return a/360+.5}function xe(a){var o=Math.sin(a*Math.PI/180),f=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return f<0?0:f>1?1:f}function ke(a,o,f,m,w,O,L,F){if(f/=o,m/=o,O>=f&&L<m)return a;if(L<f||O>=m)return null;for(var V=[],re=0;re<a.length;re++){var Ee=a[re],Te=Ee.geometry,$e=Ee.type,Dt=w===0?Ee.minX:Ee.minY,nn=w===0?Ee.maxX:Ee.maxY;if(Dt>=f&&nn<m){V.push(Ee);continue}else if(nn<f||Dt>=m)continue;var Tn=[];if($e==="Point"||$e==="MultiPoint")et(Te,Tn,f,m,w);else if($e==="LineString")Tt(Te,Tn,f,m,w,!1,F.lineMetrics);else if($e==="MultiLineString")pn(Te,Tn,f,m,w,!1);else if($e==="Polygon")pn(Te,Tn,f,m,w,!0);else if($e==="MultiPolygon")for(var sr=0;sr<Te.length;sr++){var Br=[];pn(Te[sr],Br,f,m,w,!0),Br.length&&Tn.push(Br)}if(Tn.length){if(F.lineMetrics&&$e==="LineString"){for(sr=0;sr<Tn.length;sr++)V.push(Be(Ee.id,$e,Tn[sr],Ee.tags));continue}($e==="LineString"||$e==="MultiLineString")&&(Tn.length===1?($e="LineString",Tn=Tn[0]):$e="MultiLineString"),($e==="Point"||$e==="MultiPoint")&&($e=Tn.length===3?"Point":"MultiPoint"),V.push(Be(Ee.id,$e,Tn,Ee.tags))}}return V.length?V:null}function et(a,o,f,m,w){for(var O=0;O<a.length;O+=3){var L=a[O+w];L>=f&&L<=m&&(o.push(a[O]),o.push(a[O+1]),o.push(a[O+2]))}}function Tt(a,o,f,m,w,O,L){for(var F=Yt(a),V=w===0?qt:Qn,re=a.start,Ee,Te,$e=0;$e<a.length-3;$e+=3){var Dt=a[$e],nn=a[$e+1],Tn=a[$e+2],sr=a[$e+3],Br=a[$e+4],Er=w===0?Dt:nn,ui=w===0?sr:Br,Vi=!1;L&&(Ee=Math.sqrt(Math.pow(Dt-sr,2)+Math.pow(nn-Br,2))),Er<f?ui>f&&(Te=V(F,Dt,nn,sr,Br,f),L&&(F.start=re+Ee*Te)):Er>m?ui<m&&(Te=V(F,Dt,nn,sr,Br,m),L&&(F.start=re+Ee*Te)):_t(F,Dt,nn,Tn),ui<f&&Er>=f&&(Te=V(F,Dt,nn,sr,Br,f),Vi=!0),ui>m&&Er<=m&&(Te=V(F,Dt,nn,sr,Br,m),Vi=!0),!O&&Vi&&(L&&(F.end=re+Ee*Te),o.push(F),F=Yt(a)),L&&(re+=Ee)}var Po=a.length-3;Dt=a[Po],nn=a[Po+1],Tn=a[Po+2],Er=w===0?Dt:nn,Er>=f&&Er<=m&&_t(F,Dt,nn,Tn),Po=F.length-3,O&&Po>=3&&(F[Po]!==F[0]||F[Po+1]!==F[1])&&_t(F,F[0],F[1],F[2]),F.length&&o.push(F)}function Yt(a){var o=[];return o.size=a.size,o.start=a.start,o.end=a.end,o}function pn(a,o,f,m,w,O){for(var L=0;L<a.length;L++)Tt(a[L],o,f,m,w,O,!1)}function _t(a,o,f,m){a.push(o),a.push(f),a.push(m)}function qt(a,o,f,m,w,O){var L=(O-o)/(m-o);return a.push(O),a.push(f+(w-f)*L),a.push(1),L}function Qn(a,o,f,m,w,O){var L=(O-f)/(w-f);return a.push(o+(m-o)*L),a.push(O),a.push(1),L}function _r(a,o){var f=o.buffer/o.extent,m=a,w=ke(a,1,-1-f,f,0,-1,2,o),O=ke(a,1,1-f,2+f,0,-1,2,o);return(w||O)&&(m=ke(a,1,-f,1+f,0,-1,2,o)||[],w&&(m=Vr(w,1).concat(m)),O&&(m=m.concat(Vr(O,-1)))),m}function Vr(a,o){for(var f=[],m=0;m<a.length;m++){var w=a[m],O=w.type,L;if(O==="Point"||O==="MultiPoint"||O==="LineString")L=pr(w.geometry,o);else if(O==="MultiLineString"||O==="Polygon"){L=[];for(var F=0;F<w.geometry.length;F++)L.push(pr(w.geometry[F],o))}else if(O==="MultiPolygon")for(L=[],F=0;F<w.geometry.length;F++){for(var V=[],re=0;re<w.geometry[F].length;re++)V.push(pr(w.geometry[F][re],o));L.push(V)}f.push(Be(w.id,O,L,w.tags))}return f}function pr(a,o){var f=[];f.size=a.size,a.start!==void 0&&(f.start=a.start,f.end=a.end);for(var m=0;m<a.length;m+=3)f.push(a[m]+o,a[m+1],a[m+2]);return f}function Ur(a,o){if(a.transformed)return a;var f=1<<a.z,m=a.x,w=a.y,O,L,F;for(O=0;O<a.features.length;O++){var V=a.features[O],re=V.geometry,Ee=V.type;if(V.geometry=[],Ee===1)for(L=0;L<re.length;L+=2)V.geometry.push(mi(re[L],re[L+1],o,f,m,w));else for(L=0;L<re.length;L++){var Te=[];for(F=0;F<re[L].length;F+=2)Te.push(mi(re[L][F],re[L][F+1],o,f,m,w));V.geometry.push(Te)}}return a.transformed=!0,a}function mi(a,o,f,m,w,O){return[Math.round(f*(a*m-w)),Math.round(f*(o*m-O))]}function wi(a,o,f,m,w){for(var O=o===w.maxZoom?0:w.tolerance/((1<<o)*w.extent),L={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:m,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},F=0;F<a.length;F++){L.numFeatures++,Sr(L,a[F],O,w);var V=a[F].minX,re=a[F].minY,Ee=a[F].maxX,Te=a[F].maxY;V<L.minX&&(L.minX=V),re<L.minY&&(L.minY=re),Ee>L.maxX&&(L.maxX=Ee),Te>L.maxY&&(L.maxY=Te)}return L}function Sr(a,o,f,m){var w=o.geometry,O=o.type,L=[];if(O==="Point"||O==="MultiPoint")for(var F=0;F<w.length;F+=3)L.push(w[F]),L.push(w[F+1]),a.numPoints++,a.numSimplified++;else if(O==="LineString")Ti(L,w,a,f,!1,!1);else if(O==="MultiLineString"||O==="Polygon")for(F=0;F<w.length;F++)Ti(L,w[F],a,f,O==="Polygon",F===0);else if(O==="MultiPolygon")for(var V=0;V<w.length;V++){var re=w[V];for(F=0;F<re.length;F++)Ti(L,re[F],a,f,!0,F===0)}if(L.length){var Ee=o.tags||null;if(O==="LineString"&&m.lineMetrics){Ee={};for(var Te in o.tags)Ee[Te]=o.tags[Te];Ee.mapbox_clip_start=w.start/w.size,Ee.mapbox_clip_end=w.end/w.size}var $e={geometry:L,type:O==="Polygon"||O==="MultiPolygon"?3:O==="LineString"||O==="MultiLineString"?2:1,tags:Ee};o.id!==null&&($e.id=o.id),a.features.push($e)}}function Ti(a,o,f,m,w,O){var L=m*m;if(m>0&&o.size<(w?L:m)){f.numPoints+=o.length/3;return}for(var F=[],V=0;V<o.length;V+=3)(m===0||o[V+2]>L)&&(f.numSimplified++,F.push(o[V]),F.push(o[V+1])),f.numPoints++;w&&hi(F,O),a.push(F)}function hi(a,o){for(var f=0,m=0,w=a.length,O=w-2;m<w;O=m,m+=2)f+=(a[m]-a[O])*(a[m+1]+a[O+1]);if(f>0===o)for(m=0,w=a.length;m<w/2;m+=2){var L=a[m],F=a[m+1];a[m]=a[w-2-m],a[m+1]=a[w-1-m],a[w-2-m]=L,a[w-1-m]=F}}function si(a,o){return new Mo(a,o)}function Mo(a,o){o=this.options=na(Object.create(this.options),o);var f=o.debug;if(f&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var m=Ot(a,o);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),m=_r(m,o),m.length&&this.splitTile(m,0,0,0),f&&(m.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Mo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mo.prototype.splitTile=function(a,o,f,m,w,O,L){for(var F=[a,o,f,m],V=this.options,re=V.debug;F.length;){m=F.pop(),f=F.pop(),o=F.pop(),a=F.pop();var Ee=1<<o,Te=bi(o,f,m),$e=this.tiles[Te];if(!$e&&(re>1&&console.time("creation"),$e=this.tiles[Te]=wi(a,o,f,m,V),this.tileCoords.push({z:o,x:f,y:m}),re)){re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,f,m,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var Dt="z"+o;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if($e.source=a,w){if(o===V.maxZoom||o===w)continue;var nn=1<<w-o;if(f!==Math.floor(O/nn)||m!==Math.floor(L/nn))continue}else if(o===V.indexMaxZoom||$e.numPoints<=V.indexMaxPoints)continue;if($e.source=null,a.length!==0){re>1&&console.time("clipping");var Tn=.5*V.buffer/V.extent,sr=.5-Tn,Br=.5+Tn,Er=1+Tn,ui,Vi,Po,no,Wr,ro;ui=Vi=Po=no=null,Wr=ke(a,Ee,f-Tn,f+Br,0,$e.minX,$e.maxX,V),ro=ke(a,Ee,f+sr,f+Er,0,$e.minX,$e.maxX,V),a=null,Wr&&(ui=ke(Wr,Ee,m-Tn,m+Br,1,$e.minY,$e.maxY,V),Vi=ke(Wr,Ee,m+sr,m+Er,1,$e.minY,$e.maxY,V),Wr=null),ro&&(Po=ke(ro,Ee,m-Tn,m+Br,1,$e.minY,$e.maxY,V),no=ke(ro,Ee,m+sr,m+Er,1,$e.minY,$e.maxY,V),ro=null),re>1&&console.timeEnd("clipping"),F.push(ui||[],o+1,f*2,m*2),F.push(Vi||[],o+1,f*2,m*2+1),F.push(Po||[],o+1,f*2+1,m*2),F.push(no||[],o+1,f*2+1,m*2+1)}}},Mo.prototype.getTile=function(a,o,f){var m=this.options,w=m.extent,O=m.debug;if(a<0||a>24)return null;var L=1<<a;o=(o%L+L)%L;var F=bi(a,o,f);if(this.tiles[F])return Ur(this.tiles[F],w);O>1&&console.log("drilling down to z%d-%d-%d",a,o,f);for(var V=a,re=o,Ee=f,Te;!Te&&V>0;)V--,re=Math.floor(re/2),Ee=Math.floor(Ee/2),Te=this.tiles[bi(V,re,Ee)];return!Te||!Te.source?null:(O>1&&console.log("found parent tile z%d-%d-%d",V,re,Ee),O>1&&console.time("drilling down"),this.splitTile(Te.source,V,re,Ee,a,o,f),O>1&&console.timeEnd("drilling down"),this.tiles[F]?Ur(this.tiles[F],w):null)};function bi(a,o,f){return((1<<a)*f+o)*32+a}function na(a,o){for(var f in o)a[f]=o[f];return a}var _a=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},Ro=Object.defineProperty,qo=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,Nn=(a,o,f)=>o in a?Ro(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Bn=(a,o)=>{for(var f in o||(o={}))kt.call(o,f)&&Nn(a,f,o[f]);if(Je)for(var f of Je(o))sn.call(o,f)&&Nn(a,f,o[f]);return a},gn=(a,o)=>qo(a,Ne(o)),On=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),dr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function hr(a){let o=0;for(let f=0,m=a.length,w=m-1,O,L;f<m;w=f++)O=a[f],L=a[w],o+=(L.x-O.x)*(O.y+L.y);return o}function ii(a){const o=a.length;if(o<=1)return[a];const f=[];let m,w;for(let O=0;O<o;O++){const L=hr(a[O]);L!==0&&(w===void 0&&(w=L<0),w===L<0?(m&&f.push(m),m=[a[O]]):m.push(a[O]))}return m&&f.push(m),f}var Gi=["Unknown","Point","LineString","Polygon"];function ao(a,o,f,m,w){let O=w.geometry;const L=w.type,F=w.tags,V=w.id,re=a*Math.pow(2,m),Ee=a*o,Te=a*f;let $e=Gi[L],Dt,nn;function Tn(Br){for(let Er=0;Er<Br.length;Er++){const ui=Br[Er];if(ui[3])break;const Vi=180-(ui[1]+Te)*360/re,Po=(ui[0]+Ee)*360/re-180,no=360/Math.PI*Math.atan(Math.exp(Vi*Math.PI/180))-90;Br[Er]=[Po,no,0,1]}}switch(L){case 1:const Br=[];for(Dt=0;Dt<O.length;Dt++)Br[Dt]=O[Dt][0];O=Br,Tn(O);break;case 2:for(Dt=0;Dt<O.length;Dt++)Tn(O[Dt]);break;case 3:for(O=ii(O),Dt=0;Dt<O.length;Dt++)for(nn=0;nn<O[Dt].length;nn++)Tn(O[Dt][nn]);break}return O.length===1?O=O[0]:$e="Multi"+$e,{type:"Feature",geometry:{type:$e,coordinates:O},properties:F,id:V,tileOrigin:[0,0],coord:""}}var Qr=(a,o,f,m)=>On(void 0,null,function*(){return new Promise(w=>{const O=o.getTile(a.z,a.x,a.y),F={layers:{defaultLayer:{features:O?O.features.map(re=>ao(m,f.x,f.y,f.z,re)):[]}}},V=new _a(F,a.x,a.y,a.z);w(V)})});function ji(a){const o={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?o:Bn(Bn({},o),a.geojsonvtOptions)}function Li(a,o){const f=ji(o),m=f.extent||4096,w=si(a,f),O=(F,V)=>Qr(V,w,F,m),L=gn(Bn(Bn({},dr),o),{getTileData:O});return{data:a,dataArray:[],tilesetOptions:L,isTile:!0}}var Zr=Object.defineProperty,yo=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,xo=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,ra=(a,o,f)=>o in a?Zr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ha=(a,o)=>{for(var f in o||(o={}))xi.call(o,f)&&ra(a,f,o[f]);if(xo)for(var f of xo(o))Oo.call(o,f)&&ra(a,f,o[f]);return a},ia=(a,o)=>yo(a,Mi(o));function Wo(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,requestParameters:w={}}=o,O=new Promise(V=>{a instanceof HTMLImageElement||(0,Me.fg)(a)?V([a]):Fa(a,w,re=>{V(re)})}),L=yn(m,f);return{originData:a,images:O,_id:1,dataArray:[{_id:0,coordinates:L}]}}function Fa(a,o,f){const m=[];if(typeof a=="string")(0,Me.gJ)(ia(Ha({},o),{url:a}),(w,O)=>{O&&(m.push(O),f(m))});else{const w=a.length;let O=0;a.forEach(L=>{(0,Me.gJ)(ia(Ha({},o),{url:L}),(F,V)=>{O++,V&&m.push(V),O===w&&f(m)})})}return Wo}var cs=Object.defineProperty,wt=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,oo=(a,o,f)=>o in a?cs(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Yo=(a,o)=>{for(var f in o||(o={}))Ir.call(o,f)&&oo(a,f,o[f]);if(Un)for(var f of Un(o))Ci.call(o,f)&&oo(a,f,o[f]);return a},ns=(a,o)=>wt(a,Zt(o)),Ds=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),Us=(a,o,f,m)=>Ds(void 0,null,function*(){const w={x:o.x,y:o.y,z:o.z},O=(0,Me.z0)(a,w);return new Promise(L=>{m?m(w,(F,V)=>{if(F||!V){const re={layers:{defaultLayer:{features:[]}}},Ee=new _a(re,o.x,o.y,o.z);L(Ee)}else{const re={layers:{defaultLayer:{features:V.features}}},Ee=new _a(re,o.x,o.y,o.z);L(Ee)}}):(0,Me.Yu)(ns(Yo({},f),{url:O}),(F,V)=>{if(F||!V){const re={layers:{defaultLayer:{features:[]}}},Ee=new _a(re,o.x,o.y,o.z);L(Ee)}else{const Ee={layers:{defaultLayer:{features:JSON.parse(V)}}},Te=new _a(Ee,o.x,o.y,o.z);L(Te)}})})});function fl(a,o){const f=(w,O)=>Us(a,O,o==null?void 0:o.requestParameters,o.getCustomData),m=ns(Yo({},o),{getTileData:f});return{dataArray:[],tilesetOptions:m,isTile:!0}}var xh=D(38929),kp=D(3614),Ad=D.n(kp),Vl=Object.defineProperty,If=Object.defineProperties,Lf=Object.getOwnPropertyDescriptors,sc=Object.getOwnPropertySymbols,zc=Object.prototype.hasOwnProperty,cu=Object.prototype.propertyIsEnumerable,eh=(a,o,f)=>o in a?Vl(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,pc=(a,o)=>{for(var f in o||(o={}))zc.call(o,f)&&eh(a,f,o[f]);if(sc)for(var f of sc(o))cu.call(o,f)&&eh(a,f,o[f]);return a},Os=(a,o)=>If(a,Lf(o)),Oc=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=new xh.VectorTile(new(Ad())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const o=this.vectorTile.layers[a];if(Array.isArray(o.features))return this.vectorLayerCache[a]=o.features,o.features;const f=[];for(let m=0;m<o.length;m++){const O=o.feature(m).toGeoJSON(this.x,this.y,this.z);f.push(Os(pc({},O),{properties:pc({id:O.id},O.properties)}))}return this.vectorLayerCache[a]=f,f}getFeatureById(){throw new Error("Method not implemented.")}},gf=Object.defineProperty,Zh=Object.defineProperties,Up=Object.getOwnPropertyDescriptors,Eh=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,th=Object.prototype.propertyIsEnumerable,Xh=(a,o,f)=>o in a?gf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Od=(a,o)=>{for(var f in o||(o={}))Cd.call(o,f)&&Xh(a,f,o[f]);if(Eh)for(var f of Eh(o))th.call(o,f)&&Xh(a,f,o[f]);return a},Rd=(a,o)=>Zh(a,Up(o)),_0=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),Df={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Uu=(a,o,f,m,w)=>_0(void 0,null,function*(){const O=(0,Me.z0)(a,o);return new Promise(L=>{if(w)w({x:f.x,y:f.y,z:f.z},(F,V)=>{if(F||!V)L(void 0);else{const re=new Oc(V,f.x,f.y,f.z);L(re)}});else{const F=(0,Me.ks)(Rd(Od({},m),{url:O}),(V,re)=>{if(V||!re)L(void 0);else{const Ee=new Oc(re,f.x,f.y,f.z);L(Ee)}});f.xhrCancel=()=>F.cancel()}})});function up(a,o){const f=Array.isArray(a)?a[0]:a,m=(O,L)=>Uu(f,O,L,o==null?void 0:o.requestParameters,o==null?void 0:o.getCustomData),w=Rd(Od(Od({},Df),o),{getTileData:m});return{data:f,dataArray:[],tilesetOptions:w,isTile:!0}}function Hl(a,o,f){switch(a){case"+":return o+f;case"-":return o-f;case"*":return o*f;case"/":return o/f;case"%":return o%f;case"^":return Math.pow(o,f);case"abs":return Math.abs(o);case"floor":return Math.floor(o);case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"sin":return Math.sin(o);case"cos":return Math.cos(o);case"atan":return f===-1?Math.atan(o):Math.atan2(o,f);case"min":return Math.min(o,f);case"max":return Math.max(o,f);case"log10":return Math.log(o);case"log2":return Math.log2(o);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Su(a,o){const{width:f,height:m}=o[0],w=o.map(V=>V.rasterData),O=f*m,L=[],F=JSON.stringify(a);for(let V=0;V<O;V++){const re=JSON.parse(F),Ee=ef(re,w,V);if(typeof Ee=="number")L.push(Ee);else{const Te=tf(re);L.push(Te)}}return L}function ef(a,o,f){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return o[a[1]][f]}catch(m){return console.warn("Raster Data err!"),0}a.map((m,w)=>{if(Array.isArray(m)&&m.length>0)switch(m[0]){case"band":try{a[w]=o[m[1]][f]}catch(O){console.warn("Raster Data err!"),a[w]=0}break;default:ef(m,o,f)}})}function vc(a){const[o,f=-1,m=-1]=a;return o===void 0?(console.warn("Express err!"),["+",0,0]):[o.replace(/\s+/g,""),f,m]}function tf(a){const o=vc(a),f=o[0];let m=o[1],w=o[2];return Array.isArray(m)&&(m=tf(a[1])),Array.isArray(w)&&(w=tf(a[2])),Hl(f,m,w)}var uu={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:nf}};function nf(a,o){const f=a[0].rasterData,m=a[1].rasterData,w=a[2].rasterData,O=[],[L,F]=(o==null?void 0:o.countCut)||[2,98],V=(o==null?void 0:o.RMinMax)||Pl(f,L,F),re=(o==null?void 0:o.GMinMax)||Pl(m,L,F),Ee=(o==null?void 0:o.BMinMax)||Pl(w,L,F);for(let Te=0;Te<f.length;Te++)O.push(Math.max(0,f[Te]-V[0])),O.push(Math.max(0,m[Te]-re[0])),O.push(Math.max(0,w[Te]-Ee[0]));return{rasterData:O,rMinMax:V,gMinMax:re,bMinMax:Ee}}function Pl(a,o,f){const m=a.slice().sort((F,V)=>F-V),w=m.length,O=m[Math.ceil(w*o/100)],L=m[Math.ceil(w*f/100)];return[O,L]}var zu=Object.defineProperty,yf=Object.defineProperties,fp=Object.getOwnPropertyDescriptors,$h=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,Yh=(a,o,f)=>o in a?zu(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Pd=(a,o)=>{for(var f in o||(o={}))bs.call(o,f)&&Yh(a,f,o[f]);if($h)for(var f of $h(o))Md.call(o,f)&&Yh(a,f,o[f]);return a},cl=(a,o)=>yf(a,fp(o)),Sh=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())});function Th(a,o,f){return Sh(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const m=yield Promise.all(a.map(({data:V,bands:re=[0]})=>o(V,re))),w=[];m.forEach(V=>{Array.isArray(V)?w.push(...V):w.push(V)});const{width:O,height:L}=w[0];let F;switch(typeof f){case"function":F=f(w);break;case"object":Array.isArray(f)?F={rasterData:Su(f,w)}:F=ne(f,w);break;default:F={rasterData:w[0].rasterData}}return cl(Pd({},F),{width:O,height:L})})}function ne(a,o){const f=uu[a.type];if(f.type==="function")return f.method(o,a==null?void 0:a.options);if(f.type==="operation")return a.type==="rgb"?_e(f.expression,o):{rasterData:Su(f.expression,o)}}function _e(a,o){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const f=Su(a.r||["band",0],o),m=Su(a.g||["band",0],o),w=Su(a.b||["band",0],o);return[f,m,w]}function qe(a,o,f,m){return Sh(this,null,function*(){const w=yield Th(a,o,f);m(null,{data:w})})}function un(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,width:w,height:O,min:L,max:F,format:V,operation:re}=o;let Ee,Te,$e;if(V===void 0||zt(a))Ee=Array.from(a),Te=w,$e=O;else{const Tn=Array.isArray(a)?a:[a];Ee=Th(Tn,V,re)}const Dt=yn(m,f);return{_id:1,dataArray:[{_id:1,data:Ee,width:Te,height:$e,min:L,max:F,coordinates:Dt}]}}var Y=D(39827),tr=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),Rr=(a,o,f,m)=>tr(void 0,null,function*(){return new Promise((w,O)=>{o({x:a.x,y:a.y,z:a.z},(L,F)=>{if(L||F.length===0){O(L);return}F&&qe([{data:F,bands:[0]}],f,m,(V,re)=>{V?O(V):re&&w(re)})})})}),Di=(a,o)=>tr(void 0,null,function*(){return new Promise((f,m)=>{o({x:a.x,y:a.y,z:a.z},(w,O)=>{if(w||!O){m(w);return}O instanceof ArrayBuffer?(0,Me.Co)(O,(L,F)=>{L&&m(L),f(F)}):O instanceof HTMLImageElement?f(O):m(w)})})});function zi(a,o){return Array.isArray(a)?typeof a[0]=="string"?a.map(f=>(0,Me.z0)(f,o)):a.map(f=>({url:(0,Me.z0)(f.url,o),bands:f.bands||[0]})):(0,Me.z0)(a,o)}function lo(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(o=>({url:o,bands:[0]})):a}function uo(a,o){a.xhrCancel=()=>{o.map(f=>{f.abort()})}}var wa=Object.defineProperty,No=Object.defineProperties,Aa=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,Ra=Object.prototype.propertyIsEnumerable,Rs=(a,o,f)=>o in a?wa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ka=(a,o)=>{for(var f in o||(o={}))ga.call(o,f)&&Rs(a,f,o[f]);if(os)for(var f of os(o))Ra.call(o,f)&&Rs(a,f,o[f]);return a},Za=(a,o)=>No(a,Aa(o)),ms=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),nl=(a,o,f,m,w)=>ms(void 0,null,function*(){const O=lo(o.url);if(O.length>1){const{rasterFiles:L,xhrList:F,errList:V}=yield Wa(O,o);if(uo(a,F),V.length>0){f(V,null);return}qe(L,m,w,f)}else{const L=(0,Me.ks)(o,(F,V)=>{if(F)f(F);else if(V){const re=[{data:V,bands:O[0].bands}];qe(re,m,w,f)}});uo(a,[L])}});function Wa(a,o){return ms(this,null,function*(){const f=[],m=[],w=[];for(let O=0;O<a.length;O++){const L=a[O],F=Za(ka({},o),{url:L.url}),V=L.bands,{err:re,data:Ee,xhr:Te}=yield(0,Me.LF)(Za(ka({},F),{type:"arrayBuffer"}));re&&w.push(re),m.push(Te),f.push({data:Ee,bands:V})}return{rasterFiles:f,xhrList:m,errList:w}})}var Rc=Object.defineProperty,us=Object.defineProperties,Tu=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,jc=Object.prototype.hasOwnProperty,nh=Object.prototype.propertyIsEnumerable,Id=(a,o,f)=>o in a?Rc(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,_f=(a,o)=>{for(var f in o||(o={}))jc.call(o,f)&&Id(a,f,o[f]);if(fu)for(var f of fu(o))nh.call(o,f)&&Id(a,f,o[f]);return a},Nf=(a,o)=>us(a,Tu(o)),rf=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),wh=(a,o,f,m)=>rf(void 0,null,function*(){const{format:w=Bf,operation:O,requestParameters:L={}}=m,F=Nf(_f({},L),{url:zi(a,o)});return new Promise((V,re)=>{nl(f,F,(Ee,Te)=>{Ee?re(Ee):Te&&V(Te)},w,O)})}),Ah=(a,o,f,m)=>rf(void 0,null,function*(){let w;const O=Array.isArray(a)?a[0]:a;return m.wmtsOptions?w=((m==null?void 0:m.getURLFromTemplate)||Me.jG)(O,_f(_f({},o),m.wmtsOptions)):w=((m==null?void 0:m.getURLFromTemplate)||Me.z0)(O,o),new Promise((L,F)=>{var V;const re=(0,Me.gJ)(Nf(_f({},m==null?void 0:m.requestParameters),{url:w,type:((V=m==null?void 0:m.requestParameters)==null?void 0:V.type)||"arrayBuffer"}),(Ee,Te)=>{Ee?F(Ee):Te&&L(Te)},m.transformResponse);f.xhrCancel=()=>re.cancel()})}),Bf=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),b0=Object.defineProperty,Ld=Object.defineProperties,zp=Object.getOwnPropertyDescriptors,Ff=Object.getOwnPropertySymbols,jp=Object.prototype.hasOwnProperty,Dd=Object.prototype.propertyIsEnumerable,hp=(a,o,f)=>o in a?b0(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,kf=(a,o)=>{for(var f in o||(o={}))jp.call(o,f)&&hp(a,f,o[f]);if(Ff)for(var f of Ff(o))Dd.call(o,f)&&hp(a,f,o[f]);return a},Vp=(a,o)=>Ld(a,zp(o)),Ch={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Hp=[Y.n3.ARRAYBUFFER,Y.n3.RGB];function Uf(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function Xs(a,o={}){if(Uf(a))throw new Error("tile server url is error");let f=(o==null?void 0:o.dataType)||Y.n3.IMAGE;f===Y.n3.RGB&&(f=Y.n3.ARRAYBUFFER);const m=(O,L)=>{switch(f){case Y.n3.IMAGE:return Ah(a,O,L,o);case Y.n3.CUSTOMIMAGE:case Y.n3.CUSTOMTERRAINRGB:return Di(L,o==null?void 0:o.getCustomData);case Y.n3.ARRAYBUFFER:return wh(a,O,L,o);case Y.n3.CUSTOMARRAYBUFFER:case Y.n3.CUSTOMRGB:return Rr(L,o==null?void 0:o.getCustomData,(o==null?void 0:o.format)||Bf,o==null?void 0:o.operation);default:return Ah(a,O,L,o)}},w=Vp(kf(kf({},Ch),o),{getTileData:m});return{data:a,dataArray:[],tilesetOptions:w,isTile:!0}}var dp=Object.defineProperty,bf=Object.defineProperties,he=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,ar=(a,o,f)=>o in a?dp(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,zr=(a,o)=>{for(var f in o||(o={}))gt.call(o,f)&&ar(a,f,o[f]);if(Fe)for(var f of Fe(o))wn.call(o,f)&&ar(a,f,o[f]);return a},gi=(a,o)=>bf(a,he(o)),Ki=(a,o)=>{var f={};for(var m in a)gt.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Fe)for(var m of Fe(a))o.indexOf(m)<0&&wn.call(a,m)&&(f[m]=a[m]);return f};function ya(a,o){const f=o,{extent:m=[121.168,30.2828,121.384,30.4219],coordinates:w,width:O,height:L}=f,F=Ki(f,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re]=F.bands||[0,1],Ee=[a[V],a[re]],Te=[];for(let nn=0;nn<Ee[0].length;nn++)Te.push((Ee[1][nn]-Ee[0][nn])/(Ee[1][nn]+Ee[0][nn]));const $e=yn(w,m);return{_id:1,dataArray:[gi(zr({_id:1,data:Te,width:O,height:L},F),{coordinates:$e})]}}var Ea=Object.defineProperty,Es=Object.defineProperties,Ua=Object.getOwnPropertyDescriptors,Da=Object.getOwnPropertySymbols,Mc=Object.prototype.hasOwnProperty,of=Object.prototype.propertyIsEnumerable,rl=(a,o,f)=>o in a?Ea(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,fo=(a,o)=>{for(var f in o||(o={}))Mc.call(o,f)&&rl(a,f,o[f]);if(Da)for(var f of Da(o))of.call(o,f)&&rl(a,f,o[f]);return a},Yc=(a,o)=>Es(a,Ua(o)),Nd=(a,o)=>{var f={};for(var m in a)Mc.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Da)for(var m of Da(a))o.indexOf(m)<0&&of.call(a,m)&&(f[m]=a[m]);return f};function Oh(a,o){const f=o,{extent:m,coordinates:w,width:O,height:L}=f,F=Nd(f,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re,Ee]=F.bands||[0,1,2],Te=[a[V],a[re],a[Ee]],$e=[],[Dt,nn]=(F==null?void 0:F.countCut)||[2,98],Tn=(F==null?void 0:F.RMinMax)||Pl(Te[0],Dt,nn),sr=(F==null?void 0:F.GMinMax)||Pl(Te[1],Dt,nn),Br=(F==null?void 0:F.BMinMax)||Pl(Te[2],Dt,nn);for(let Vi=0;Vi<Te[0].length;Vi++)$e.push(Math.max(0,Te[0][Vi]-Tn[0])),$e.push(Math.max(0,Te[1][Vi]-sr[0])),$e.push(Math.max(0,Te[2][Vi]-Br[0]));const Er=yn(w,m);return{_id:1,dataArray:[Yc(fo({_id:1,data:$e,width:O,height:L,rMinMax:Tn,gMinMax:sr,bMinMax:Br},F),{coordinates:Er})]}}var Ma=Object.defineProperty,as=Object.defineProperties,x0=Object.getOwnPropertyDescriptors,Zi=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,Bd=Object.prototype.propertyIsEnumerable,Rh=(a,o,f)=>o in a?Ma(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ef=(a,o)=>{for(var f in o||(o={}))xf.call(o,f)&&Rh(a,f,o[f]);if(Zi)for(var f of Zi(o))Bd.call(o,f)&&Rh(a,f,o[f]);return a},hu=(a,o)=>as(a,x0(o)),E0=(a,o)=>{var f={};for(var m in a)xf.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Zi)for(var m of Zi(a))o.indexOf(m)<0&&Bd.call(a,m)&&(f[m]=a[m]);return f};function Mh(a,o){const f=o,{extent:m,coordinates:w,min:O,max:L,width:F,height:V,format:re,operation:Ee}=f,Te=E0(f,["extent","coordinates","min","max","width","height","format","operation"]);let $e;if(re===void 0||zt(a))$e=Array.from(a);else{const Tn=Array.isArray(a)?a:[a];$e=Th(Tn,re,Ee)}const Dt=yn(w,m);return{_id:1,dataArray:[hu(Ef({_id:1,data:$e,width:F,height:V},Te),{min:O,max:L,coordinates:Dt})]}}var Kc=Object.defineProperty,rh=Object.defineProperties,S0=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,T0=Object.prototype.hasOwnProperty,sv=Object.prototype.propertyIsEnumerable,du=(a,o,f)=>o in a?Kc(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ju=(a,o)=>{for(var f in o||(o={}))T0.call(o,f)&&du(a,f,o[f]);if(Fd)for(var f of Fd(o))sv.call(o,f)&&du(a,f,o[f]);return a},Sa=(a,o)=>rh(a,S0(o)),pu=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),af={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},mc=a=>pu(void 0,null,function*(){return new Promise(o=>{const[f,m,w,O]=a.bounds,L={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(f+w)/2,y:(m+O)/2},geometry:{type:"LineString",coordinates:[[w,O],[w,m],[f,m],[f,m]]}}]}}};o(L)})});function Kh(a,o){const f=w=>mc(w),m=Sa(ju(ju({},af),o),{getTileData:f});return{data:a,dataArray:[],tilesetOptions:m,isTile:!0}}var Ql=D(46343),Vc=D(26729),qc=D.n(Vc),pp=D(69848),Bo=D.n(pp),Eo=Object.defineProperty,Jl=Object.getOwnPropertySymbols,Qc=Object.prototype.hasOwnProperty,Jc=Object.prototype.propertyIsEnumerable,hl=(a,o,f)=>o in a?Eo(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,wu=(a,o)=>{for(var f in o||(o={}))Qc.call(o,f)&&hl(a,f,o[f]);if(Jl)for(var f of Jl(o))Jc.call(o,f)&&hl(a,f,o[f]);return a};function ih(a,o){const{radius:f=40,maxZoom:m=18,minZoom:w=0,zoom:O=2}=o;if(a.pointIndex){const V=a.pointIndex.getClusters(a.extent,Math.floor(O));return a.dataArray=kd(V),a}const L=new(Bo())({radius:f,minZoom:w,maxZoom:m}),F={type:"FeatureCollection",features:[]};return F.features=a.dataArray.map(V=>({type:"Feature",geometry:{type:"Point",coordinates:V.coordinates},properties:wu({},V)})),L.load(F.features),L}function kd(a){return a.map((o,f)=>wu({coordinates:o.geometry.coordinates,_id:f+1},o.properties))}function Ms(a){if(a.length===0)throw new Error("max requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]>o&&(o=a[f]);return o}function gc(a){if(a.length===0)throw new Error("min requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]<o&&(o=a[f]);return o}function w0(a){if(a.length===0)return 0;let o=a[0],f=0,m;for(let w=1;w<a.length;w++)m=o+a[w]*1,Math.abs(o)>=Math.abs(a[w])?f+=o-m+a[w]:f+=a[w]-m+o,o=m;return o+f*1}function qh(a){if(a.length===0)throw new Error("mean requires at least one data point");return w0(a)/a.length}var vp={min:gc,max:Ms,mean:qh,sum:w0},Ph=Object.defineProperty,eu=Object.getOwnPropertySymbols,mp=Object.prototype.hasOwnProperty,Au=Object.prototype.propertyIsEnumerable,Wp=(a,o,f)=>o in a?Ph(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Vu=(a,o)=>{for(var f in o||(o={}))mp.call(o,f)&&Wp(a,f,o[f]);if(eu)for(var f of eu(o))Au.call(o,f)&&Wp(a,f,o[f]);return a},Ud=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),{cloneDeep:A0,isFunction:Ih,isString:Qh,mergeWith:C0}=Me.lodashUtil;function zf(a,o){if(Array.isArray(o))return o}var jf=class extends Vc.EventEmitter{constructor(a,o){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new Ql.ni},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(o),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:o="sum",field:f}=this.clusterOptions;let m=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,m.forEach(w=>{w.id||(w.properties.point_count=1)}),(f||Ih(o))&&(m=m.map(w=>{const O=w.id;if(O){const F=this.clusterIndex.getLeaves(O,1/0).map(re=>re.properties);let V;if(Qh(o)&&f){const re=Ln(F,f);V=vp[o](re)}Ih(o)&&(V=o(F)),w.properties.stat=V}else w.properties.point_count=1;return w})),this.data=E("geojson")({type:"FeatureCollection",features:m}),this.executeTrans()}getFeatureById(a){const{type:o="geojson",geometry:f}=this.parser;if(o==="geojson"&&!this.cluster){const m=a<this.originData.features.length?this.originData.features[a]:"null",w=A0(m);if(w!=null&&w.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const O=this.data.dataArray.find(L=>L._id===a);w.properties=O}return w}else return o==="json"&&f?this.data.dataArray.find(m=>m._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,o){this.data.dataArray=this.data.dataArray.map(f=>f._id===a?Vu(Vu({},f),o):f),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,o){const f=this.data.dataArray.find(m=>m[a]===o);return f==null?void 0:f._id}setData(a,o){this.originData=a,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,o,f){var m;(m=this.tileset)==null||m.reloadTileById(a,o,f)}reloadTileByLnglat(a,o,f){var m;(m=this.tileset)==null||m.reloadTileByLnglat(a,o,f)}getTileExtent(a,o){var f;return(f=this.tileset)==null?void 0:f.getTileExtent(a,o)}getTileByZXY(a,o,f){var m;return(m=this.tileset)==null?void 0:m.getTileByZXY(a,o,f)}reloadTileByExtent(a,o){var f;(f=this.tileset)==null||f.reloadTileByExtent(a,o)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return Ud(this,null,function*(){return new Promise((a,o)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(f){o(f)}})})}initCfg(a){this.cfg=C0(this.cfg,a,zf);const o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=Vu(Vu({},this.clusterOptions),o.clusterOptions)))}init(){return Ud(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,o=a.type||"geojson",f=E(o);this.data=f(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=(0,Me.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Me.nx(Vu({},a))):void 0}executeTrans(){this.transforms.forEach(o=>{const{type:f}=o,m=te(f)(this.data,o);Object.assign(this.data,m)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=ih(this.data,a)}caculClusterExtent(a){let o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Me.yA)((0,Me.ds)(this.extent),a)),o[0].concat(o[1])}};function O0(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.filter(f)),a}var oh=6378e3;function Sf(a,o){const f=a.dataArray,{size:m=10}=o,w=m/(2*Math.PI*oh)*(256<<20)/2,{gridHash:O,gridOffset:L}=lv(f,m),F=_(O,L,o);return{yOffset:w,xOffset:w,radius:w,type:"grid",dataArray:F}}function lv(a,o){let f=1/0,m=-1/0,w;for(const V of a)w=V.coordinates[1],Number.isFinite(w)&&(f=w<f?w:f,m=w>m?w:m);const O=(f+m)/2,L=Vf(o,O);if(L.xOffset<=0||L.yOffset<=0)return{gridHash:{},gridOffset:L};const F={};for(const V of a){const re=V.coordinates[1],Ee=V.coordinates[0];if(Number.isFinite(re)&&Number.isFinite(Ee)){const Te=Math.floor((re+90)/L.yOffset),$e=Math.floor((Ee+180)/L.xOffset),Dt=`${Te}-${$e}`;F[Dt]=F[Dt]||{count:0,points:[]},F[Dt].count+=1,F[Dt].points.push(V)}}return{gridHash:F,gridOffset:L}}function Vf(a,o){const f=Jh(a),m=R0(o,a);return{yOffset:f,xOffset:m}}function Jh(a){return a/oh*(180/Math.PI)}function R0(a,o){return o/oh*(180/Math.PI)/Math.cos(a*Math.PI/180)}function _(a,o,f){return Object.keys(a).reduce((m,w,O)=>{const L=w.split("-"),F=parseInt(L[0],10),V=parseInt(L[1],10),re={};if(f.field&&f.method){const Ee=Me.a5.getColumn(a[w].points,f.field);re[f.method]=Me.a5.statMap[f.method](Ee)}return Object.assign(re,{_id:O,coordinates:(0,Me.Z)([-180+o.xOffset*(V+.5),-90+o.yOffset*(F+.5)]),rawData:a[w].points,count:a[w].count}),m.push(re),m},[])}var S=Math.PI/3,x=[0,S,2*S,3*S,4*S,5*S];function C(a){return a[0]}function k(a){return a[1]}function G(){var a=0,o=0,f=1,m=1,w=C,O=k,L,F,V;function re(Te){var $e={},Dt=[],nn,Tn=Te.length;for(nn=0;nn<Tn;++nn)if(!(isNaN(Br=+w.call(null,sr=Te[nn],nn,Te))||isNaN(Er=+O.call(null,sr,nn,Te)))){var sr,Br,Er,ui=Math.round(Er=Er/V),Vi=Math.round(Br=Br/F-(ui&1)/2),Po=Er-ui;if(Math.abs(Po)*3>1){var no=Br-Vi,Wr=Vi+(Br<Vi?-1:1)/2,ro=ui+(Er<ui?-1:1),Ba=Br-Wr,ls=Er-ro;no*no+Po*Po>Ba*Ba+ls*ls&&(Vi=Wr+(ui&1?1:-1)/2,ui=ro)}var ta=Vi+"-"+ui,_s=$e[ta];_s?_s.push(sr):(Dt.push(_s=$e[ta]=[sr]),_s.x=(Vi+(ui&1)/2)*F,_s.y=ui*V)}return Dt}function Ee(Te){var $e=0,Dt=0;return x.map(function(nn){var Tn=Math.sin(nn)*Te,sr=-Math.cos(nn)*Te,Br=Tn-$e,Er=sr-Dt;return $e=Tn,Dt=sr,[Br,Er]})}return re.hexagon=function(Te){return"m"+Ee(Te==null?L:+Te).join("l")+"z"},re.centers=function(){for(var Te=[],$e=Math.round(o/V),Dt=Math.round(a/F),nn=$e*V;nn<m+L;nn+=V,++$e)for(var Tn=Dt*F+($e&1)*F/2;Tn<f+F/2;Tn+=F)Te.push([Tn,nn]);return Te},re.mesh=function(){var Te=Ee(L).slice(0,4).join("l");return re.centers().map(function($e){return"M"+$e+"m"+Te}).join("")},re.x=function(Te){return arguments.length?(w=Te,re):w},re.y=function(Te){return arguments.length?(O=Te,re):O},re.radius=function(Te){return arguments.length?(L=+Te,F=L*2*Math.sin(S),V=L*1.5,re):L},re.size=function(Te){return arguments.length?(a=o=0,f=+Te[0],m=+Te[1],re):[f-a,m-o]},re.extent=function(Te){return arguments.length?(a=+Te[0][0],o=+Te[0][1],f=+Te[1][0],m=+Te[1][1],re):[[a,o],[f,m]]},re.radius(1)}var K=Object.defineProperty,de=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,Xt=(a,o,f)=>o in a?K(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bn=(a,o)=>{for(var f in o||(o={}))Ft.call(o,f)&&Xt(a,f,o[f]);if(st)for(var f of st(o))jt.call(o,f)&&Xt(a,f,o[f]);return a},vn=(a,o)=>de(a,Ve(o)),zn=6378e3;function on(a,o){const f=a.dataArray,{size:m=10,method:w="sum"}=o,O=m/(2*Math.PI*zn)*(256<<20)/2,L=f.map(Ee=>{const[Te,$e]=(0,Me.Z)(Ee.coordinates);return vn(bn({},Ee),{coordinates:[Te,$e]})});return{dataArray:G().radius(O).x(Ee=>Ee.coordinates[0]).y(Ee=>Ee.coordinates[1])(L).map((Ee,Te)=>{if(o.field&&w){const $e=Me.a5.getColumn(Ee,o.field);Ee[w]=Me.a5.statMap[w]($e)}return{[o.method]:Ee[w],count:Ee.length,rawData:Ee,coordinates:[Ee.x,Ee.y],_id:Te}}),radius:O,xOffset:O,yOffset:O,type:"hexagon"}}var Fn=Object.defineProperty,er=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,wr=(a,o,f)=>o in a?Fn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Fr=(a,o)=>{for(var f in o||(o={}))vr.call(o,f)&&wr(a,f,o[f]);if(er)for(var f of er(o))Mr.call(o,f)&&wr(a,f,o[f]);return a};function ni(a,o){const{sourceField:f,targetField:m,data:w}=o,O={};return w.forEach(L=>{O[L[f]]=L}),a.dataArray=a.dataArray.map(L=>{const F=L[m];return Fr(Fr({},L),O[F])}),a}function Bi(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.map(f)),a}var Ii=D(4771);ve("rasterTile",Xs),ve("mvt",up),ve("geojsonvt",Li),ve("testTile",Kh),ve("geojson",Zn),ve("jsonTile",fl),ve("image",Wo),ve("csv",le),ve("json",ot),ve("raster",un),ve("rasterRgb",Mh),ve("rgb",Oh),ve("ndi",ya),se("cluster",ih),se("filter",O0),se("join",ni),se("map",Bi),se("grid",Sf),se("hexagon",on);var co=jf;class Uo extends null{getMarkerLayerContainerSize(){}constructor(o){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",f=>{const m=this.mapsService.getContainer();if(!m)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:w,top:O}=m.getClientRects()[0],{x:L,y:F}=f;this.preLngLat=this.mapsService.containerToLngLat([L-w,F-O]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",f=>{const m=f.lngLat||f.lnglat,{lng:w,lat:O}=this.preLngLat,{lng:L,lat:F}=m,V={lng:this.lngLat.lng+L-w,lat:this.lngLat.lat+F-O};this.setLnglat(V),this.preLngLat=m,this.emit("dragging",V)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",f=>{this.polyfillEvent(f),this.emit(f.type,{target:f,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),o),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}addTo(o){this.scene=o,this.mapsService=o.mapService;const{element:f}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(f),this.registerMarkerEvent(f),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:o}=this.markerOption;return o&&DOM.remove(o),this.popup&&this.popup.remove(),this}setLnglat(o){return this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(o){if(!this.added)return this.once("added",()=>{this.setElement(o)}),this;const{element:f}=this.markerOption;return f&&DOM.remove(f),this.markerOption.element=o,this.init(),this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const o=this.popup;return o&&o.remove(),this}setPopup(o){return this.popup=o,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const o=this.popup;if(o)o.isOpen()?o.remove():o.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(o){this.markerOption.draggable=o,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(o){this.markerOption.extData=o}update(){if(!this.mapsService)return;const{element:o,anchor:f}=this.markerOption;this.updatePosition(),DOM.setTransform(o,`${anchorTranslate[f]}`)}updatePositionWhenZoom(o){if(!this.mapsService)return;const{element:f,offsets:m}=this.markerOption,{lng:w,lat:O}=this.lngLat;if(f){f.style.display="block",f.style.whiteSpace="nowrap";const{containerHeight:L,containerWidth:F,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;const re=o.map,Ee=o.center,Te=o.zoom,$e=re.DE(this.lngLat,Te,Ee);if($e.x=Math.round($e.x+m[0]),$e.y=Math.round($e.y-m[1]),Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if($e.x>F){const Dt=this.mapsService.lngLatToContainer([w-360,O]);$e.x=Dt.x}if($e.x<0){const Dt=this.mapsService.lngLatToContainer([w+360,O]);$e.x=Dt.x}}($e.x>F||$e.x<0||$e.y>L||$e.y<0)&&(f.style.display="none"),f.style.left=$e.x+"px",f.style.top=$e.y+"px",f.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(o){const{element:f}=this.markerOption;this.popup&&f&&this.togglePopup()}getCurrentContainerSize(){const o=this.mapsService.getContainer();return{containerHeight:(o==null?void 0:o.scrollHeight)||0,containerWidth:(o==null?void 0:o.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:o}=this.markerOption;o==null||o.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(o==null||o.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:o,offsets:f}=this.markerOption,{lng:m,lat:w}=this.lngLat,O=this.mapsService.lngLatToContainer([m,w]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";const{containerHeight:L,containerWidth:F,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;if(Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(O.x>F){const re=this.mapsService.lngLatToContainer([m-360,w]);O.x=re.x}if(O.x<0){const re=this.mapsService.lngLatToContainer([m+360,w]);O.x=re.x}}(O.x>F||O.x<0||O.y>L||O.y<0)&&(o.style.display="none"),o.style.left=O.x+f[0]+"px",o.style.top=O.y-f[1]+"px"}}init(){let{element:o}=this.markerOption;const{color:f,anchor:m}=this.markerOption;if(!o){o=DOM.create("div"),this.markerOption.element=o;const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","48px"),w.setAttributeNS(null,"width","48px"),w.setAttributeNS(null,"viewBox","0 0 1024 1024");const O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),O.setAttributeNS(null,"fill",f),w.appendChild(O),o.appendChild(w)}DOM.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(w=>{var O,L;const F=((O=this.markerOption)===null||O===void 0?void 0:O.style)&&((L=this.markerOption)===null||L===void 0?void 0:L.style[w]);o&&(o.style[w]=F)}),applyAnchorClass(o,m,"marker")}registerMarkerEvent(o){o.addEventListener("click",this.onMapClick),o.addEventListener("mousemove",this.eventHandle),o.addEventListener("click",this.eventHandle),o.addEventListener("mousedown",this.eventHandle),o.addEventListener("mouseup",this.eventHandle),o.addEventListener("dblclick",this.eventHandle),o.addEventListener("contextmenu",this.eventHandle),o.addEventListener("mouseover",this.eventHandle),o.addEventListener("mouseout",this.eventHandle),o.addEventListener("touchstart",this.eventHandle),o.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const o=this.getElement();o.removeEventListener("click",this.onMapClick),o.removeEventListener("mousemove",this.eventHandle),o.removeEventListener("click",this.eventHandle),o.removeEventListener("mousedown",this.eventHandle),o.removeEventListener("mouseup",this.eventHandle),o.removeEventListener("dblclick",this.eventHandle),o.removeEventListener("contextmenu",this.eventHandle),o.removeEventListener("mouseover",this.eventHandle),o.removeEventListener("mouseout",this.eventHandle),o.removeEventListener("touchstart",this.eventHandle),o.removeEventListener("touchend",this.eventHandle)}polyfillEvent(o){!this.mapsService||this.mapsService.getType()!=="amap"||isPC()||(o.type==="touchstart"&&(this.touchStartTime=Date.now()),o.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:o,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(o){return null}onUp(o){throw new Error("Method not implemented.")}}const{merge:Go}=Me.lodashUtil;class Zo extends null{constructor(o){var f;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=Go(this.getDefault(),o),bindAll(["update"],this),this.zoom=((f=this.markerLayerOption.clusterOption)===null||f===void 0?void 0:f.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(o){return this.scene=o,this.mapsService=o.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const o=this.mapsService.getContainer();this.containerSize={containerWidth:(o==null?void 0:o.scrollWidth)||0,containerHeight:(o==null?void 0:o.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(o){const f=this.markerLayerOption.cluster;if(o.getMarkerLayerContainerSize=this.getContainerSize.bind(this),f&&(this.addPoint(o,this.markers.length),this.mapsService)){const m=this.mapsService.getZoom(),w=this.mapsService.getBounds();this.bbox=padBounds(w,.5),this.zoom=Math.floor(m),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(o)}removeMarker(o){this.markers.indexOf(o);const f=this.markers.indexOf(o);f>-1&&(this.markers.splice(f,1),this.markerLayerOption.cluster&&(this.removePoint(f),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(o=>{o.getElement().style.opacity="0"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="0"})}show(){this.markers.map(o=>{o.getElement().style.opacity="1"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(o=>{o.addTo(this.scene)})}clear(){this.markers.forEach(o=>{o.remove()}),this.clusterMarkers.forEach(o=>{o.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(o,f){const{lng:m,lat:w}=o.getLnglat(),O={geometry:{type:"Point",coordinates:[m,w]},properties:_objectSpread(_objectSpread({},o.getExtData()),{},{marker_id:f})};this.points.push(O),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(o){const f=this.points.findIndex(m=>m.properties.marker_id===o);f>-1&&this.points.splice(f,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:o,minZoom:f=0,maxZoom:m}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:o,minZoom:f,maxZoom:m}),this.clusterIndex.load(this.points)}getClusterMarker(o,f){const m=o[0].concat(o[1]),w=this.clusterIndex.getClusters(m,f);this.clusterMarkers.forEach(O=>{O.remove()}),this.clusterMarkers=[],w.forEach(O=>{var L;const{field:F,method:V}=this.markerLayerOption.clusterOption;if((L=O.properties)!==null&&L!==void 0&&L.cluster_id){var re;const Te=this.getLeaves((re=O.properties)===null||re===void 0?void 0:re.cluster_id);if(O.properties.clusterData=Te,F&&V){const $e=Te==null?void 0:Te.map(sr=>({[F]:sr.properties[F]})),Dt=Satistics.getColumn($e,F),nn=Satistics.getSatByColumn(V,Dt),Tn="point_"+V;O.properties[Tn]=nn.toFixed(2)}}const Ee=this.clusterMarker(O);this.clusterMarkers.push(Ee),Ee.addTo(this.scene)})}getLeaves(o,f=1/0,m=0){return o?this.clusterIndex.getLeaves(o,f,m):null}clusterMarker(o){const f=this.markerLayerOption.clusterOption,{element:m=this.generateElement.bind(this)}=f;return new Marker({element:m(o)}).setLnglat({lng:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]})}normalMarker(o){const f=o.properties.marker_id;return this.markers[f]}update(){if(!this.mapsService||this.markers.length===0)return;const o=this.mapsService.getZoom(),f=this.mapsService.getBounds();(!this.bbox||Math.abs(o-this.zoom)>=1||!boundsContains(this.bbox,f))&&(this.bbox=padBounds(f,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom))}generateElement(o){const f=DOM.create("div","l7-marker-cluster"),m=DOM.create("div","",f),w=DOM.create("span","",m),{field:O,method:L}=this.markerLayerOption.clusterOption;o.properties.point_count=o.properties.point_count||1;const F=O&&L?o.properties["point_"+L]||o.properties[O]:o.properties.point_count;return w.textContent=F,f}}var fs=D(4157),Cr=D(1413),Jt=D(4942);class ma extends qc(){constructor(o){super(),(0,Jt.Z)(this,"controlOption",void 0),(0,Jt.Z)(this,"container",void 0),(0,Jt.Z)(this,"isShow",void 0),(0,Jt.Z)(this,"sceneContainer",void 0),(0,Jt.Z)(this,"scene",void 0),(0,Jt.Z)(this,"mapsService",void 0),(0,Jt.Z)(this,"renderService",void 0),(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"controlService",void 0),(0,Jt.Z)(this,"configService",void 0),ma.controlCount++,this.controlOption=(0,Cr.Z)((0,Cr.Z)({},this.getDefault(o)),o||{})}getOptions(){return this.controlOption}setOptions(o){const f=this.getDefault(o);Object.entries(o).forEach(([m,w])=>{w===void 0&&(o[m]=f[m])}),"position"in o&&this.setPosition(o.position),"className"in o&&this.setClassName(o.className),"style"in o&&this.setStyle(o.style),this.controlOption=(0,Cr.Z)((0,Cr.Z)({},this.controlOption),o)}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd(),Me.SO.addClass(this.container,"l7-control");const{className:f,style:m}=this.controlOption;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Me.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Me.SO.create("div")}onRemove(){}show(){const o=this.container;Me.SO.removeClass(o,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const o=this.container;Me.SO.addClass(o,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(o){return{position:Y.d.TOPRIGHT,name:`${ma.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(o){if(this.mapsService&&o&&o.screenX>0&&o.screenY>0){const f=this.mapsService.getContainer();f!==null&&f.focus()}}setPosition(o=Y.d.TOPLEFT){const f=this.controlService;return f&&f.removeControl(this),this.controlOption.position=o,f&&f.addControl(this,this.sceneContainer),this}setClassName(o){const f=this.container,{className:m}=this.controlOption;m&&Me.SO.removeClass(f,m),o&&Me.SO.addClass(f,o)}setStyle(o){const f=this.container;o?f.setAttribute("style",o):f.removeAttribute("style")}insertContainer(){const o=this.controlOption.position,f=this.container;if(o instanceof Element)o.appendChild(f);else{const m=this.controlService.controlCorners[o];["bottomleft","bottomright","righttop","rightbottom"].includes(o)?m.insertBefore(f,m.firstChild):m.appendChild(f)}}checkUpdateOption(o,f){return f.some(m=>m in o)}}(0,Jt.Z)(ma,"controlCount",0);class fa extends null{constructor(...o){super(...o),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(o){if(this.isDisable=o,o){var f;(f=this.button)===null||f===void 0||f.setAttribute("disabled","true")}else{var m;(m=this.button)===null||m===void 0||m.removeAttribute("disabled")}}createButton(o=""){return DOM.create("button",`l7-button-control ${o}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:o,btnText:f,btnIcon:m}=this.controlOption;return this.setBtnTitle(o),this.setBtnText(f),this.setBtnIcon(m),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(o){const{title:f,btnText:m,btnIcon:w}=o;this.checkUpdateOption(o,["title"])&&this.setBtnTitle(f),this.checkUpdateOption(o,["btnIcon"])&&this.setBtnIcon(w),this.checkUpdateOption(o,["btnText"])&&this.setBtnText(m),super.setOptions(o)}setBtnTitle(o){var f;(f=this.button)===null||f===void 0||f.setAttribute("title",o!=null?o:"")}setBtnIcon(o){if(this.buttonIcon&&DOM.remove(this.buttonIcon),o){var f;const O=(f=this.button)===null||f===void 0?void 0:f.firstChild;if(O){var m;(m=this.button)===null||m===void 0||m.insertBefore(o,O)}else{var w;(w=this.button)===null||w===void 0||w.appendChild(o)}this.buttonIcon=o}}setBtnText(o){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),o){let m=this.buttonText;if(!m){var f;m=DOM.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(m),this.buttonText=m}m.innerText=o,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!o&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class Qo extends Vc.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(o,f){super(),(0,Jt.Z)(this,"popperDOM",void 0),(0,Jt.Z)(this,"contentDOM",void 0),(0,Jt.Z)(this,"button",void 0),(0,Jt.Z)(this,"option",void 0),(0,Jt.Z)(this,"isShow",!1),(0,Jt.Z)(this,"content",void 0),(0,Jt.Z)(this,"timeout",null),(0,Jt.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Me.SO.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&Qo.conflictPopperList.forEach(m=>{m!==this&&m.isShow&&m.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,Jt.Z)(this,"hide",()=>this.isShow?(Me.SO.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,Jt.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,Jt.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,Jt.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,Jt.Z)(this,"onPopperUnClick",m=>{Me.SO.findParentElement(m.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,Jt.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,Jt.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=o,this.option=f,this.init(),f.unique&&Qo.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(o){typeof o=="string"?this.contentDOM.innerHTML=o:o instanceof HTMLElement&&(Me.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(o)),this.content=o}init(){const{trigger:o}=this.option;this.popperDOM=this.createPopper(),o==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Me.SO.remove(this.popperDOM)}resetPopperPosition(){const o={},{container:f,offset:m=[0,0],placement:w}=this.option,[O,L]=m,F=this.button.getBoundingClientRect(),V=f.getBoundingClientRect(),{left:re,right:Ee,top:Te,bottom:$e}=Me.SO.getDiffRect(F,V);let Dt=!1,nn=!1;/^(left|right)/.test(w)?(w.includes("left")?o.right=`${F.width+Ee}px`:w.includes("right")&&(o.left=`${F.width+re}px`),w.includes("start")?o.top=`${Te}px`:w.includes("end")?o.bottom=`${$e}px`:(o.top=`${Te+F.height/2}px`,nn=!0,o.transform=`translate(${O}px, calc(${L}px - 50%))`)):/^(top|bottom)/.test(w)&&(w.includes("top")?o.bottom=`${F.height+$e}px`:w.includes("bottom")&&(o.top=`${F.height+Te}px`),w.includes("start")?o.left=`${re}px`:w.includes("end")?o.right=`${Ee}px`:(o.left=`${re+F.width/2}px`,Dt=!0,o.transform=`translate(calc(${O}px - 50%), ${L}px)`)),o.transform=`translate(calc(${O}px - ${Dt?"50%":"0%"}), calc(${L}px - ${nn?"50%":"0%"})`;const Tn=w.split("-");Tn.length&&Me.SO.addClass(this.popperDOM,Tn.map(sr=>`l7-popper-${sr}`).join(" ")),Me.SO.addStyle(this.popperDOM,Me.SO.css2Style(o))}createPopper(){const{container:o,className:f="",content:m}=this.option,w=Me.SO.create("div",`l7-popper l7-popper-hide ${f}`),O=Me.SO.create("div","l7-popper-content"),L=Me.SO.create("div","l7-popper-arrow");return w.appendChild(O),w.appendChild(L),o.appendChild(w),this.popperDOM=w,this.contentDOM=O,m&&this.setContent(m),w}}(0,Jt.Z)(Qo,"conflictPopperList",[]);const ba={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class sa extends null{constructor(...o){super(...o),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(o){var f;const m=super.getDefault(o),w=(f=o==null?void 0:o.position)!==null&&f!==void 0?f:m.position;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{popperPlacement:w instanceof Element?"bottom":ba[w],popperTrigger:"click"})}onAdd(){const o=super.onAdd();return this.initPopper(),o}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:o,popperPlacement:f,popperTrigger:m}=this.controlOption,w=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:o,placement:f,trigger:m,container:w,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(o){if(super.setOptions(o),this.checkUpdateOption(o,["popperPlacement","popperTrigger","popperClassName"])){const f=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(f)}}}var Fo=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(Fo||{});class lc extends null{constructor(...o){super(...o),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",f=>{const m=this.selectValue.includes(f.value),w=DOM.create("div",`l7-select-control-item ${m?Fo.ActiveOptionClassName:""}`);this.getIsMultiple()?w.appendChild(this.createCheckbox(m)):w.appendChild(this.createRadio(m)),f.icon&&w.appendChild(f.icon);const O=DOM.create("span");return O.innerText=f.text,w.appendChild(O),w}),_defineProperty(this,"onItemClick",f=>{if(this.getIsMultiple()){const m=this.selectValue.findIndex(w=>w===f.value);m>-1?this.selectValue.splice(m,1):this.selectValue=[...this.selectValue,f.value]}else this.selectValue=[f.value];this.setSelectValue(this.selectValue)})}setOptions(o){super.setOptions(o);const{options:f}=o;f&&this.popper.setContent(this.getPopperContent(f))}onAdd(){const o=super.onAdd(),{defaultValue:f}=this.controlOption;return f&&(this.selectValue=this.transSelectValue(f)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),o}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(o,f=!0){const m=this.transSelectValue(o);this.optionDOMList.forEach(w=>{const O=w.getAttribute(Fo.OptionValueAttrKey),L=w.querySelector("input[type=checkbox]"),F=w.querySelector("input[type=radio]"),V=m.includes(O),re=(Ee,Te)=>{DOM.toggleClass(w,Fo.ActiveOptionClassName,Te),Ee&&DOM.setChecked(Ee,Te)};re(L,V),re(F,V)}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}getIsMultiple(){return!1}getPopperContent(o){const f=this.isImageOptions(),m=DOM.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(m,"l7-select-control--multiple");const w=o.map((O,L)=>{const F=f?this.createImageOption(O):this.createNormalOption(O);return F.setAttribute(Fo.OptionValueAttrKey,O.value),F.setAttribute(Fo.OptionIndexAttrKey,window.String(L)),F.addEventListener("click",this.onItemClick.bind(this,O)),F});return m.append(...w),this.optionDOMList=w,m}createImageOption(o){const f=this.selectValue.includes(o.value),m=DOM.create("div",`l7-select-control-item ${f?Fo.ActiveOptionClassName:""}`),w=DOM.create("img");w.setAttribute("src",o.img),DOM.setUnDraggable(w),m.appendChild(w);const O=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&m.appendChild(this.createCheckbox(f));const L=DOM.create("span");return L.innerText=o.text,O.appendChild(L),m.appendChild(O),m}createCheckbox(o){const f=DOM.create("input");return f.setAttribute("type","checkbox"),o&&DOM.setChecked(f,!0),f}createRadio(o){const f=DOM.create("input");return f.setAttribute("type","radio"),o&&DOM.setChecked(f,!0),f}isImageOptions(){return!!this.controlOption.options.find(o=>o.img)}transSelectValue(o){return Array.isArray(o)?o:[o]}}const xl=a=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("l7-iconfont"),o.setAttribute("aria-hidden","true");const f=document.createElementNS("http://www.w3.org/2000/svg","use");return f.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),o.appendChild(f),o};class Pc extends null{constructor(...o){var f;super(...o),f=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:m}=f.controlOption;m==null||m(yield f.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...m){var w,O;const{imageType:L}=f.controlOption,{width:F=0,height:V=0}=(w=(O=f.mapsService.getContainer())===null||O===void 0?void 0:O.getBoundingClientRect())!==null&&w!==void 0?w:{},re=document.createElement("canvas");re.width=F,re.height=V;const Ee=re.getContext("2d");return(yield Promise.all(m.map($e=>new Promise(Dt=>{const nn=new Image;nn.onload=()=>{Dt(nn)},nn.src=$e})))).forEach($e=>{Ee==null||Ee.drawImage($e,0,0,F,V)}),re.toDataURL(`image/${L}`)}))}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var o=this;return _asyncToGenerator(function*(){const f=yield o.mapsService.exportMap("png"),m=yield o.scene.exportPng("png");return o.mergeImage(...[f,m].filter(w=>w))})()}}const cc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ss=(()=>{if(typeof document=="undefined")return!1;const a=cc[0],o={};for(const f of cc)if((f==null?void 0:f[1])in document){for(const[w,O]of f.entries())o[a[w]]=O;return o}return!1})(),yl={change:Ss.fullscreenchange,error:Ss.fullscreenerror};let dl={request(a=document.documentElement,o){return new Promise((f,m)=>{const w=()=>{dl.off("change",w),f()};dl.on("change",w);const O=a[Ss.requestFullscreen](o);O instanceof Promise&&O.then(w).catch(m)})},exit(){return new Promise((a,o)=>{if(!dl.isFullscreen){a();return}const f=()=>{dl.off("change",f),a()};dl.on("change",f);const m=document[Ss.exitFullscreen]();m instanceof Promise&&m.then(f).catch(o)})},toggle(a,o){return dl.isFullscreen?dl.exit():dl.request(a,o)},onchange(a){dl.on("change",a)},onerror(a){dl.on("error",a)},on(a,o){const f=yl[a];f&&document.addEventListener(f,o,!1)},off(a,o){const f=yl[a];f&&document.removeEventListener(f,o,!1)},raw:Ss};Object.defineProperties(dl,{isFullscreen:{get:()=>!!document[Ss.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[Ss.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Ss.fullscreenEnabled]}}),Ss||(dl={isEnabled:!1});var vu=null;class Hf extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(f.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:m,btnIcon:w,title:O,exitBtnText:L,exitBtnIcon:F,exitTitle:V}=this.controlOption;this.isFullscreen?(this.setBtnTitle(V),this.setBtnText(L),this.setBtnIcon(F)):(this.setBtnTitle(O),this.setBtnText(m),this.setBtnIcon(w)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(o){const{exitBtnText:f,exitBtnIcon:m,exitTitle:w}=o;this.isFullscreen&&(this.checkUpdateOption(o,["exitBtnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(o,["exitBtnText"])&&this.setBtnText(f),this.checkUpdateOption(o,["exitTitle"])&&this.setBtnTitle(w)),super.setOptions(o)}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),o}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class Cu extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"getGeoLocation",()=>new Promise((m,w)=>{window.navigator.geolocation.getCurrentPosition(({coords:O})=>{const{longitude:L,latitude:F}=O!=null?O:{};!isNaN(L)&&!isNaN(F)?m([L,F]):w()},O=>{w(O)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:m}=f.controlOption,w=yield f.getGeoLocation(),O=f.mapsService.getZoom();f.mapsService.setZoomAndCenter(O>15?O:15,m?yield m(w):w)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}}function sf(a){return Object.keys(a!=null?a:{}).every(o=>["layer","name","img"].includes(o))}class Hu extends null{constructor(...o){super(...o),_defineProperty(this,"onLayerChange",()=>{var f;(f=this.controlOption.layers)!==null&&f!==void 0&&f.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(f=>{const m=this.selectValue.includes(f.name),w=f.isVisible();m&&!w&&f.show(),!m&&w&&f.hide()})})}get layers(){const o=this.layerService,{layers:f}=this.controlOption;if(Array.isArray(f)&&f.length){const m=[];return f.forEach(w=>{if(w instanceof Object&&(sf(w)?m.push(w.layer):m.push(w)),typeof w=="string"){const O=o.getLayer(w)||o.getLayerByName(w);O&&m.push(O)}}),m}return o.getLayers()||[]}getDefault(o){var f;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(f=o==null?void 0:o.multiple)!==null&&f!==void 0?f:!0})}getLayerVisible(){return this.layers.filter(o=>o.isVisible()).map(o=>o.name)}getLayerOptions(){const{layers:o}=this.controlOption,f=o==null?void 0:o.every(m=>m.img);return o?o==null?void 0:o.map(m=>{if(sf(m))return{text:m.name||m.layer.name,value:m.layer.name,img:f?m.img:void 0};if(typeof m=="string"){const w=this.layerService.getLayer(m)||this.layerService.getLayerByName(m);return{text:w==null?void 0:w.name,value:w==null?void 0:w.name}}return{text:m.name,value:m.name}}):this.layers.map(m=>({text:m.name,value:m.name}))}setOptions(o){const f=this.checkUpdateOption(o,["layers","multiple"]);super.setOptions(o),f&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((o,f)=>{f===0?o.show():o.hide()})}onAdd(){var o;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class gp extends ma{getDefault(){return{position:Y.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const o=Me.SO.create("div","l7-control-logo");return this.setLogoContent(o),o}onRemove(){return null}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["img","href"])&&(Me.SO.clearChildren(this.container),this.setLogoContent(this.container))}setLogoContent(o){const{href:f,img:m}=this.controlOption,w=Me.SO.create("img");if(w.setAttribute("src",m),w.setAttribute("aria-label","AntV logo"),Me.SO.setUnDraggable(w),f){const O=Me.SO.create("a","l7-control-logo-link");O.target="_blank",O.href=f,O.rel="noopener nofollow",O.setAttribute("rel","noopener nofollow"),O.appendChild(w),o.appendChild(O)}else o.appendChild(w)}}const yp={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},Lh={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class ed extends null{constructor(...o){super(...o),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const o=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([f,m])=>typeof m=="string"&&f!=="blank").map(([f,m])=>{var w;const{text:O,img:L}=(w=o[f])!==null&&w!==void 0?w:{};return{text:O!=null?O:f,value:m,img:L,key:f}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var o;if((o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m;const w=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(O=>O.key===w))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:w}else{const w=this.getMapStyle();w?this.controlOption.defaultValue=w:this.mapsService.map.once("styledata",()=>{const O=this.mapsService.getMapStyle();this.controlOption.defaultValue=O,this.setSelectValue(O,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class td extends null{constructor(...o){super(...o),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",f=>{let m=this.location;const w=f.lngLat||f.lnglat,{transform:O}=this.controlOption;w&&(m=[w.lng,w.lat]),this.location=m,O&&(m=O(m)),this.insertLocation2HTML(m),this.emit("locationChange",m)})}getLocation(){return this.location}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMLEFT,transform:([f,m])=>[+(+f).toFixed(6),+(+m).toFixed(6)]})}onAdd(){const o=DOM.create("div","l7-control-mouse-location");return o.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),o}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(o){this.container.innerText=o.join(", ")}}class ah extends null{constructor(...o){super(...o),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const f=this.mapsService,{maxWidth:m}=this.controlOption,w=f.getSize()[1]/2,O=f.containerToLngLat([0,w]),L=f.containerToLngLat([m,w]),F=lnglatDistance([O.lng,O.lat],[L.lng,L.lat]);this.updateScales(F)})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const f=DOM.create("div","l7-control-scale");this.resetScaleLines(f);const{updateWhenIdle:m}=this.controlOption;return this.mapsService.on(m?"moveend":"mapmove",this.update),this.mapsService.on(m?"zoomend":"zoomchange",this.update),f}onRemove(){const{updateWhenIdle:o}=this.controlOption;this.mapsService.off(o?"zoomend":"zoomchange",this.update),this.mapsService.off(o?"moveend":"mapmove",this.update)}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(o){const{metric:f,imperial:m}=this.controlOption;f&&o&&this.updateMetric(o),m&&o&&this.updateImperial(o)}resetScaleLines(o){DOM.clearChildren(o);const{metric:f,imperial:m,maxWidth:w,lockWidth:O}=this.controlOption;O&&DOM.addStyle(o,`width: ${w}px`),f&&(this.mScale=DOM.create("div","l7-control-scale-line",o)),m&&(this.iScale=DOM.create("div","l7-control-scale-line",o)),this.update()}updateScale(o,f,m){const{maxWidth:w}=this.controlOption;o.style.width=Math.round(w*m)+"px",o.innerHTML=f}getRoundNum(o){const f=Math.pow(10,(Math.floor(o)+"").length-1);let m=o/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}updateMetric(o){const f=this.getRoundNum(o),m=f<1e3?f+" m":f/1e3+" km";this.updateScale(this.mScale,m,f/o)}updateImperial(o){const f=o*3.2808399;let m,w,O;f>5280?(m=f/5280,w=this.getRoundNum(m),this.updateScale(this.iScale,w+" mi",w/m)):(O=this.getRoundNum(f),this.updateScale(this.iScale,O+" ft",O/f))}}var Ai=D(15861),Il=D(45987);class Ll{constructor(){(0,Jt.Z)(this,"mapService",void 0),(0,Jt.Z)(this,"fontService",void 0)}apply(o,{styleAttributeService:f,mapService:m,fontService:w}){var O=this;this.mapService=m,this.fontService=w,o.hooks.init.tapPromise("DataMappingPlugin",(0,Ai.Z)(function*(){o.log(Y.Or.MappingStart,Y.KD.INIT),O.generateMaping(o,{styleAttributeService:f}),o.log(Y.Or.MappingEnd,Y.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var L=(0,Ai.Z)(function*(F){if(!F)return F;o.dataState.dataMappingNeedUpdate=!1,o.log(Y.Or.MappingStart,Y.KD.UPDATE);const V=O.generateMaping(o,{styleAttributeService:f});return o.log(Y.Or.MappingEnd,Y.KD.UPDATE),V});return function(F){return L.apply(this,arguments)}}()),o.hooks.beforeRender.tap("DataMappingPlugin",()=>{const L=o.getSource();if(o.layerModelNeedUpdate||!L||!L.inited)return;const F=f.getLayerStyleAttributes()||[],V=f.getLayerStyleAttribute("filter"),{dataArray:re}=L.data;if(Array.isArray(re)&&re.length===0)return;const Ee=F.filter($e=>$e.needRemapping);let Te=re;if(V!=null&&V.needRemapping&&V!==null&&V!==void 0&&V.scale&&(Te=re.filter($e=>this.applyAttributeMapping(V,$e)[0])),Ee.length){const $e=this.mapping(o,Ee,Te,o.getEncodedData());o.setEncodedData($e)}})}generateMaping(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter"),{dataArray:O}=o.getSource().data;let L=O;w!=null&&w.scale&&(L=O.filter(V=>this.applyAttributeMapping(w,V)[0])),L=o.processData(L);const F=this.mapping(o,m,L,void 0);return o.setEncodedData(F),o.emit("dataUpdate",null),!0}mapping(o,f,m,w){const O=f.filter(F=>F.scale!==void 0).filter(F=>F.name!=="filter"),L=m.map((F,V)=>{const re=w?w[V]:{},Ee=(0,Cr.Z)({id:F._id,coordinates:F.coordinates},re);return O.forEach(Te=>{let $e=this.applyAttributeMapping(Te,F);(Te.name==="color"||Te.name==="stroke")&&($e=$e.map(Dt=>(0,Me.CI)(Dt))),Ee[Te.name]=Array.isArray($e)&&$e.length===1?$e[0]:$e,Te.name==="shape"&&(Ee.shape=this.fontService.getIconFontKey(Ee[Te.name]))}),Ee});return f.forEach(F=>{F.needRemapping=!1}),this.adjustData2SimpleCoordinates(L),L}adjustData2SimpleCoordinates(o){o.length>0&&this.mapService.version==="SIMPLE"&&o.map(f=>{f.simpleCoordinate||(f.coordinates=this.unProjectCoordinates(f.coordinates),f.simpleCoordinate=!0)})}unProjectCoordinates(o){if(typeof o[0]=="number")return this.mapService.simpleMapCoord.unproject(o);if(o[0]&&o[0][0]instanceof Array){const f=[];return o.map(m=>{const w=[];m.map(O=>{w.push(this.mapService.simpleMapCoord.unproject(O))}),f.push(w)}),f}else{const f=[];return o.map(m=>{f.push(this.mapService.simpleMapCoord.unproject(m))}),f}}applyAttributeMapping(o,f){var m;if(!o.scale)return[];const w=(o==null||(m=o.scale)===null||m===void 0?void 0:m.scalers)||[],O=[];return w.forEach(({field:F})=>{var V;(f.hasOwnProperty(F)||((V=o.scale)===null||V===void 0?void 0:V.type)==="variable")&&O.push(f[F])}),o.mapping?o.mapping(O):[]}getArrowPoints(o,f){const m=[f[0]-o[0],f[1]-o[1]],w=(0,Me.Fv)(m);return[o[0]+w[0]*1e-4,o[1]+w[1]*1e-4]}}class tu{constructor(){(0,Jt.Z)(this,"mapService",void 0)}apply(o){var f=this;this.mapService=o.getContainer().mapService,o.hooks.init.tapPromise("DataSourcePlugin",(0,Ai.Z)(function*(){o.log(Y.Or.SourceInitStart,Y.KD.INIT);let m=o.getSource();if(!m){const{data:w,options:O}=o.sourceOption||o.defaultSourceConfig;m=new co(w,O),o.setSource(m)}m.inited?(f.updateClusterData(o),o.log(Y.Or.SourceInitEnd,Y.KD.INIT)):yield new Promise(w=>{m.on("update",O=>{O.type==="inited"&&(f.updateClusterData(o),o.log(Y.Or.SourceInitEnd,Y.KD.INIT)),w(null)})})})),o.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Ai.Z)(function*(){const m=f.updateClusterData(o),w=o.dataState.dataSourceNeedUpdate;return o.dataState.dataSourceNeedUpdate=!1,m||w}))}updateClusterData(o){if(o.isTileLayer||o.tileLayer||!o.getSource())return!1;const f=o.getSource(),m=f.cluster,{zoom:w=0}=f.clusterOptions,O=this.mapService.getZoom()-1,L=o.dataState.dataSourceNeedUpdate;return m&&L&&f.updateClusterData(Math.floor(O)),m&&Math.abs(o.clusterZoom-O)>=1?(w!==Math.floor(O)&&f.updateClusterData(Math.floor(O)),o.clusterZoom=O,!0):!1}}var Tf=D(64599),wf=D.n(Tf);function Xa(a,o){var f,m;if(o===void 0){var w=wf()(a),O;try{for(w.s();!(O=w.n()).done;){var L=O.value;L!=null&&(f===void 0?L>=L&&(f=m=L):(f>L&&(f=L),m<L&&(m=L)))}}catch(Te){w.e(Te)}finally{w.f()}}else{var F=-1,V=wf()(a),re;try{for(V.s();!(re=V.n()).done;){var Ee=re.value;(Ee=o(Ee,++F,a))!=null&&(f===void 0?Ee>=Ee&&(f=m=Ee):(f>Ee&&(f=Ee),m<Ee&&(m=Ee)))}}catch(Te){V.e(Te)}finally{V.f()}}return[f,m]}var Wl=D(37620);function ec(a,o,f,m,w){var O=a*a,L=O*a;return((1-3*a+3*O-L)*o+(4-6*O+3*L)*f+(1+3*a+3*O-3*L)*m+L*w)/6}function Wf(a){var o=a.length-1;return function(f){var m=f<=0?f=0:f>=1?(f=1,o-1):Math.floor(f*o),w=a[m],O=a[m+1],L=m>0?a[m-1]:2*w-O,F=m<o-1?a[m+2]:2*O-w;return ec((f-m/o)*o,L,w,O,F)}}function Gp(a){var o=a.length;return function(f){var m=Math.floor(((f%=1)<0?++f:f)*o),w=a[(m+o-1)%o],O=a[m%o],L=a[(m+1)%o],F=a[(m+2)%o];return ec((f-m/o)*o,w,O,L,F)}}function sh(a){return function(){return a}}function M0(a,o){return function(f){return a+f*o}}function zd(a,o,f){return a=Math.pow(a,f),o=Math.pow(o,f)-a,f=1/f,function(m){return Math.pow(a+m*o,f)}}function jd(a,o){var f=o-a;return f?M0(a,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(a)?o:a)}function Gf(a){return(a=+a)==1?Zp:function(o,f){return f-o?zd(o,f,a):sh(isNaN(o)?f:o)}}function Zp(a,o){var f=o-a;return f?M0(a,f):sh(isNaN(a)?o:a)}var Xv=function a(o){var f=Gf(o);function m(w,O){var L=f((w=(0,Wl.B8)(w)).r,(O=(0,Wl.B8)(O)).r),F=f(w.g,O.g),V=f(w.b,O.b),re=Zp(w.opacity,O.opacity);return function(Ee){return w.r=L(Ee),w.g=F(Ee),w.b=V(Ee),w.opacity=re(Ee),w+""}}return m.gamma=a,m}(1);function Vd(a){return function(o){var f=o.length,m=new Array(f),w=new Array(f),O=new Array(f),L,F;for(L=0;L<f;++L)F=(0,Wl.B8)(o[L]),m[L]=F.r||0,w[L]=F.g||0,O[L]=F.b||0;return m=a(m),w=a(w),O=a(O),F.opacity=1,function(V){return F.r=m(V),F.g=w(V),F.b=O(V),F+""}}}var Ou=Vd(Wf),Qy=Vd(Gp);function $v(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function Xp(a){return a.length===1&&(a=Jy(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var O=m+w>>>1;a(o[O],f)<0?m=O+1:w=O}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var O=m+w>>>1;a(o[O],f)>0?w=O:m=O+1}return m}}}function Jy(a){return function(o,f){return $v(a(o),f)}}var Ug=Xp($v),e_=Ug.right,Gm=Ug.left,Yv=e_,cv=Array.prototype,t_=cv.slice,$p=cv.map,Yp=Math.sqrt(50),Zm=Math.sqrt(10),Xm=Math.sqrt(2);function zg(a,o,f){var m,w=-1,O,L,F;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(O=a,a=o,o=O),(F=Kv(a,o,f))===0||!isFinite(F))return[];if(F>0)for(a=Math.ceil(a/F),o=Math.floor(o/F),L=new Array(O=Math.ceil(o-a+1));++w<O;)L[w]=(a+w)*F;else for(a=Math.floor(a*F),o=Math.ceil(o*F),L=new Array(O=Math.ceil(a-o+1));++w<O;)L[w]=(a-w)/F;return m&&L.reverse(),L}function Kv(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),O=m/Math.pow(10,w);return w>=0?(O>=Yp?10:O>=Zm?5:O>=Xm?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(O>=Yp?10:O>=Zm?5:O>=Xm?2:1)}function qv(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),O=m/w;return O>=Yp?w*=10:O>=Zm?w*=5:O>=Xm&&(w*=2),o<a?-w:w}function jg(){var a=identity,o=extent,f=sturges;function m(w){var O,L=w.length,F,V=new Array(L);for(O=0;O<L;++O)V[O]=a(w[O],O,w);var re=o(V),Ee=re[0],Te=re[1],$e=f(V,Ee,Te);Array.isArray($e)||($e=tickStep(Ee,Te,$e),$e=range(Math.ceil(Ee/$e)*$e,Te,$e));for(var Dt=$e.length;$e[0]<=Ee;)$e.shift(),--Dt;for(;$e[Dt-1]>Te;)$e.pop(),--Dt;var nn=new Array(Dt+1),Tn;for(O=0;O<=Dt;++O)Tn=nn[O]=[],Tn.x0=O>0?$e[O-1]:Ee,Tn.x1=O<Dt?$e[O]:Te;for(O=0;O<L;++O)F=V[O],Ee<=F&&F<=Te&&nn[bisect($e,F,0,Dt)].push(w[O]);return nn}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function uv(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function P0(a){return a===null?NaN:+a}function fv(a,o,f){if(f==null&&(f=P0),!!(m=a.length)){if((o=+o)<=0||m<2)return+f(a[0],0,a);if(o>=1)return+f(a[m-1],m-1,a);var m,w=(m-1)*o,O=Math.floor(w),L=+f(a[O],O,a),F=+f(a[O+1],O+1,a);return L+(F-L)*(w-O)}}var nu="$";function Kp(){}Kp.prototype=El.prototype={constructor:Kp,has:function(a){return nu+a in this},get:function(a){return this[nu+a]},set:function(a,o){return this[nu+a]=o,this},remove:function(a){var o=nu+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===nu&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===nu&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===nu&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===nu&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===nu&&++a;return a},empty:function(){for(var a in this)if(a[0]===nu)return!1;return!0},each:function(a){for(var o in this)o[0]===nu&&a(this[o],o.slice(1),this)}};function El(a,o){var f=new Kp;if(a instanceof Kp)a.each(function(F,V){f.set(V,F)});else if(Array.isArray(a)){var m=-1,w=a.length,O;if(o==null)for(;++m<w;)f.set(m,a[m]);else for(;++m<w;)f.set(o(O=a[m],m,a),O)}else if(a)for(var L in a)f.set(L,a[L]);return f}var nd=El;function $m(){var a=[],o=[],f,m,w;function O(F,V,re,Ee){if(V>=a.length)return f!=null&&F.sort(f),m!=null?m(F):F;for(var Te=-1,$e=F.length,Dt=a[V++],nn,Tn,sr=map(),Br,Er=re();++Te<$e;)(Br=sr.get(nn=Dt(Tn=F[Te])+""))?Br.push(Tn):sr.set(nn,[Tn]);return sr.each(function(ui,Vi){Ee(Er,Vi,O(ui,V,re,Ee))}),Er}function L(F,V){if(++V>a.length)return F;var re,Ee=o[V-1];return m!=null&&V>=a.length?re=F.entries():(re=[],F.each(function(Te,$e){re.push({key:$e,values:L(Te,V)})})),Ee!=null?re.sort(function(Te,$e){return Ee(Te.key,$e.key)}):re}return w={object:function(F){return O(F,0,qp,Qp)},map:function(F){return O(F,0,Hd,Jp)},entries:function(F){return L(O(F,0,Hd,Jp),0)},key:function(F){return a.push(F),w},sortKeys:function(F){return o[a.length-1]=F,w},sortValues:function(F){return f=F,w},rollup:function(F){return m=F,w}}}function qp(){return{}}function Qp(a,o,f){a[o]=f}function Hd(){return map()}function Jp(a,o,f){a.set(o,f)}function rd(){}var lf=nd.prototype;rd.prototype=e0.prototype={constructor:rd,has:lf.has,add:function(a){return a+="",this[nu+a]=a,this},remove:lf.remove,clear:lf.clear,values:lf.keys,size:lf.size,empty:lf.empty,each:lf.each};function e0(a,o){var f=new rd;if(a instanceof rd)a.each(function(O){f.add(O)});else if(a){var m=-1,w=a.length;if(o==null)for(;++m<w;)f.add(a[m]);else for(;++m<w;)f.add(o(a[m],m,a))}return f}var I0=null,Ym=Array.prototype,id=Ym.map,Af=Ym.slice;function Dh(a,o){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(o).domain(a);break}return this}function Qv(a,o){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(o).domain(a);break}return this}var Jv={name:"implicit"};function L0(){var a=nd(),o=[],f=[],m=Jv;function w(O){var L=O+"",F=a.get(L);if(!F){if(m!==Jv)return m;a.set(L,F=o.push(O))}return f[(F-1)%f.length]}return w.domain=function(O){if(!arguments.length)return o.slice();o=[],a=nd();for(var L=-1,F=O.length,V,re;++L<F;)a.has(re=(V=O[L])+"")||a.set(re,o.push(V));return w},w.range=function(O){return arguments.length?(f=Af.call(O),w):f.slice()},w.unknown=function(O){return arguments.length?(m=O,w):m},w.copy=function(){return L0(o,f).unknown(m)},Dh.apply(w,arguments),w}function Zf(){var a=ordinal().unknown(void 0),o=a.domain,f=a.range,m=[0,1],w,O,L=!1,F=0,V=0,re=.5;delete a.unknown;function Ee(){var Te=o().length,$e=m[1]<m[0],Dt=m[$e-0],nn=m[1-$e];w=(nn-Dt)/Math.max(1,Te-F+V*2),L&&(w=Math.floor(w)),Dt+=(nn-Dt-w*(Te-F))*re,O=w*(1-F),L&&(Dt=Math.round(Dt),O=Math.round(O));var Tn=sequence(Te).map(function(sr){return Dt+w*sr});return f($e?Tn.reverse():Tn)}return a.domain=function(Te){return arguments.length?(o(Te),Ee()):o()},a.range=function(Te){return arguments.length?(m=[+Te[0],+Te[1]],Ee()):m.slice()},a.rangeRound=function(Te){return m=[+Te[0],+Te[1]],L=!0,Ee()},a.bandwidth=function(){return O},a.step=function(){return w},a.round=function(Te){return arguments.length?(L=!!Te,Ee()):L},a.padding=function(Te){return arguments.length?(F=Math.min(1,V=+Te),Ee()):F},a.paddingInner=function(Te){return arguments.length?(F=Math.min(1,Te),Ee()):F},a.paddingOuter=function(Te){return arguments.length?(V=+Te,Ee()):V},a.align=function(Te){return arguments.length?(re=Math.max(0,Math.min(1,Te)),Ee()):re},a.copy=function(){return Zf(o(),m).round(L).paddingInner(F).paddingOuter(V).align(re)},initRange.apply(Ee(),arguments)}function Wd(a){var o=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return Wd(o())},a}function n_(){return Wd(Zf.apply(null,arguments).paddingInner(1))}function r_(a,o){return(isNumberArray(o)?numberArray:em)(a,o)}function em(a,o){var f=o?o.length:0,m=a?Math.min(f,a.length):0,w=new Array(m),O=new Array(f),L;for(L=0;L<m;++L)w[L]=D0(a[L],o[L]);for(;L<f;++L)O[L]=o[L];return function(F){for(L=0;L<m;++L)O[L]=w[L](F);return O}}function Vg(a,o){var f=new Date;return a=+a,o=+o,function(m){return f.setTime(a*(1-m)+o*m),f}}function od(a,o){return a=+a,o=+o,function(f){return a*(1-f)+o*f}}function i_(a,o){var f={},m={},w;(a===null||typeof a!="object")&&(a={}),(o===null||typeof o!="object")&&(o={});for(w in o)w in a?f[w]=D0(a[w],o[w]):m[w]=o[w];return function(O){for(w in f)m[w]=f[w](O);return m}}var lh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hv=new RegExp(lh.source,"g");function t0(a){return function(){return a}}function _p(a){return function(o){return a(o)+""}}function Hg(a,o){var f=lh.lastIndex=hv.lastIndex=0,m,w,O,L=-1,F=[],V=[];for(a=a+"",o=o+"";(m=lh.exec(a))&&(w=hv.exec(o));)(O=w.index)>f&&(O=o.slice(f,O),F[L]?F[L]+=O:F[++L]=O),(m=m[0])===(w=w[0])?F[L]?F[L]+=w:F[++L]=w:(F[++L]=null,V.push({i:L,x:od(m,w)})),f=hv.lastIndex;return f<o.length&&(O=o.slice(f),F[L]?F[L]+=O:F[++L]=O),F.length<2?V[0]?_p(V[0].x):t0(o):(o=V.length,function(re){for(var Ee=0,Te;Ee<o;++Ee)F[(Te=V[Ee]).i]=Te.x(re);return F.join("")})}function bp(a,o){o||(o=[]);var f=a?Math.min(o.length,a.length):0,m=o.slice(),w;return function(O){for(w=0;w<f;++w)m[w]=a[w]*(1-O)+o[w]*O;return m}}function tm(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function D0(a,o){var f=typeof o,m;return o==null||f==="boolean"?sh(o):(f==="number"?od:f==="string"?(m=(0,Wl.ZP)(o))?(o=m,Xv):Hg:o instanceof Wl.ZP?Xv:o instanceof Date?Vg:tm(o)?bp:Array.isArray(o)?em:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?i_:od)(a,o)}function Ru(a,o){return a=+a,o=+o,function(f){return Math.round(a*(1-f)+o*f)}}function mu(a){return function(){return a}}function yc(a){return+a}var cf=[0,1];function Mu(a){return a}function Ks(a,o){return(o-=a=+a)?function(f){return(f-a)/o}:mu(isNaN(o)?NaN:.5)}function N0(a){var o=a[0],f=a[a.length-1],m;return o>f&&(m=o,o=f,f=m),function(w){return Math.max(o,Math.min(f,w))}}function Wg(a,o,f){var m=a[0],w=a[1],O=o[0],L=o[1];return w<m?(m=Ks(w,m),O=f(L,O)):(m=Ks(m,w),O=f(O,L)),function(F){return O(m(F))}}function o_(a,o,f){var m=Math.min(a.length,o.length)-1,w=new Array(m),O=new Array(m),L=-1;for(a[m]<a[0]&&(a=a.slice().reverse(),o=o.slice().reverse());++L<m;)w[L]=Ks(a[L],a[L+1]),O[L]=f(o[L],o[L+1]);return function(F){var V=Yv(a,F,1,m)-1;return O[V](w[V](F))}}function dv(a,o){return o.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Km(){var a=cf,o=cf,f=D0,m,w,O,L=Mu,F,V,re;function Ee(){return F=Math.min(a.length,o.length)>2?o_:Wg,V=re=null,Te}function Te($e){return isNaN($e=+$e)?O:(V||(V=F(a.map(m),o,f)))(m(L($e)))}return Te.invert=function($e){return L(w((re||(re=F(o,a.map(m),od)))($e)))},Te.domain=function($e){return arguments.length?(a=id.call($e,yc),L===Mu||(L=N0(a)),Ee()):a.slice()},Te.range=function($e){return arguments.length?(o=Af.call($e),Ee()):o.slice()},Te.rangeRound=function($e){return o=Af.call($e),f=Ru,Ee()},Te.clamp=function($e){return arguments.length?(L=$e?N0(a):Mu,Te):L!==Mu},Te.interpolate=function($e){return arguments.length?(f=$e,Ee()):f},Te.unknown=function($e){return arguments.length?(O=$e,Te):O},function($e,Dt){return m=$e,w=Dt,Ee()}}function nm(a,o){return Km()(a,o)}var Pu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rm(a){if(!(o=Pu.exec(a)))throw new Error("invalid format: "+a);var o;return new xp({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}rm.prototype=xp.prototype;function xp(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}xp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qm(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function pv(a,o){if((f=(a=o?a.toExponential(o-1):a.toExponential()).indexOf("e"))<0)return null;var f,m=a.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+a.slice(f+1)]}function Ep(a){return a=pv(Math.abs(a)),a?a[1]:NaN}function Qm(a,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ep(o)/3)))*3-Ep(Math.abs(a)))}function a_(a,o){return function(f,m){for(var w=f.length,O=[],L=0,F=a[0],V=0;w>0&&F>0&&(V+F+1>m&&(F=Math.max(1,m-V)),O.push(f.substring(w-=F,w+F)),!((V+=F+1)>m));)F=a[L=(L+1)%a.length];return O.reverse().join(o)}}function im(a){return function(o){return o.replace(/[0-9]/g,function(f){return a[+f]})}}function Gg(a){e:for(var o=a.length,f=1,m=-1,w;f<o;++f)switch(a[f]){case".":m=w=f;break;case"0":m===0&&(m=f),w=f;break;default:if(!+a[f])break e;m>0&&(m=0);break}return m>0?a.slice(0,m)+a.slice(w+1):a}var Ue;function Qt(a,o){var f=pv(a,o);if(!f)return a+"";var m=f[0],w=f[1],O=w-(Ue=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,L=m.length;return O===L?m:O>L?m+new Array(O-L+1).join("0"):O>0?m.slice(0,O)+"."+m.slice(O):"0."+new Array(1-O).join("0")+pv(a,Math.max(0,o+O-1))[0]}function Rn(a,o){var f=pv(a,o);if(!f)return a+"";var m=f[0],w=f[1];return w<0?"0."+new Array(-w).join("0")+m:m.length>w+1?m.slice(0,w+1)+"."+m.slice(w+1):m+new Array(w-m.length+2).join("0")}var Ar={"%":function(a,o){return(a*100).toFixed(o)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:qm,e:function(a,o){return a.toExponential(o)},f:function(a,o){return a.toFixed(o)},g:function(a,o){return a.toPrecision(o)},o:function(a){return Math.round(a).toString(8)},p:function(a,o){return Rn(a*100,o)},r:Rn,s:Qt,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Xr(a){return a}var Or=Array.prototype.map,mr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Oi(a){var o=a.grouping===void 0||a.thousands===void 0?Xr:a_(Or.call(a.grouping,Number),a.thousands+""),f=a.currency===void 0?"":a.currency[0]+"",m=a.currency===void 0?"":a.currency[1]+"",w=a.decimal===void 0?".":a.decimal+"",O=a.numerals===void 0?Xr:im(Or.call(a.numerals,String)),L=a.percent===void 0?"%":a.percent+"",F=a.minus===void 0?"-":a.minus+"",V=a.nan===void 0?"NaN":a.nan+"";function re(Te){Te=rm(Te);var $e=Te.fill,Dt=Te.align,nn=Te.sign,Tn=Te.symbol,sr=Te.zero,Br=Te.width,Er=Te.comma,ui=Te.precision,Vi=Te.trim,Po=Te.type;Po==="n"?(Er=!0,Po="g"):Ar[Po]||(ui===void 0&&(ui=12),Vi=!0,Po="g"),(sr||$e==="0"&&Dt==="=")&&(sr=!0,$e="0",Dt="=");var no=Tn==="$"?f:Tn==="#"&&/[boxX]/.test(Po)?"0"+Po.toLowerCase():"",Wr=Tn==="$"?m:/[%p]/.test(Po)?L:"",ro=Ar[Po],Ba=/[defgprs%]/.test(Po);ui=ui===void 0?6:/[gprs]/.test(Po)?Math.max(1,Math.min(21,ui)):Math.max(0,Math.min(20,ui));function ls(ta){var _s=no,is=Wr,ds,np,rp;if(Po==="c")is=ro(ta)+is,ta="";else{ta=+ta;var Rm=ta<0||1/ta<0;if(ta=isNaN(ta)?V:ro(Math.abs(ta),ui),Vi&&(ta=Gg(ta)),Rm&&+ta==0&&nn!=="+"&&(Rm=!1),_s=(Rm?nn==="("?nn:F:nn==="-"||nn==="("?"":nn)+_s,is=(Po==="s"?mr[8+Ue/3]:"")+is+(Rm&&nn==="("?")":""),Ba){for(ds=-1,np=ta.length;++ds<np;)if(rp=ta.charCodeAt(ds),48>rp||rp>57){is=(rp===46?w+ta.slice(ds+1):ta.slice(ds))+is,ta=ta.slice(0,ds);break}}}Er&&!sr&&(ta=o(ta,1/0));var kv=_s.length+ta.length+is.length,Qf=kv<Br?new Array(Br-kv+1).join($e):"";switch(Er&&sr&&(ta=o(Qf+ta,Qf.length?Br-is.length:1/0),Qf=""),Dt){case"<":ta=_s+ta+is+Qf;break;case"=":ta=_s+Qf+ta+is;break;case"^":ta=Qf.slice(0,kv=Qf.length>>1)+_s+ta+is+Qf.slice(kv);break;default:ta=Qf+_s+ta+is;break}return O(ta)}return ls.toString=function(){return Te+""},ls}function Ee(Te,$e){var Dt=re((Te=rm(Te),Te.type="f",Te)),nn=Math.max(-8,Math.min(8,Math.floor(Ep($e)/3)))*3,Tn=Math.pow(10,-nn),sr=mr[8+nn/3];return function(Br){return Dt(Tn*Br)+sr}}return{format:re,formatPrefix:Ee}}var ci,Fi,Ri;Ni({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Ni(a){return ci=Oi(a),Fi=ci.format,Ri=ci.formatPrefix,ci}function Xi(a,o){return a=Math.abs(a),o=Math.abs(o)-a,Math.max(0,Ep(o)-Ep(a))+1}function pi(a){return Math.max(0,-Ep(Math.abs(a)))}function Ui(a,o,f,m){var w=qv(a,o,f),O;switch(m=rm(m==null?",f":m),m.type){case"s":{var L=Math.max(Math.abs(a),Math.abs(o));return m.precision==null&&!isNaN(O=Qm(w,L))&&(m.precision=O),Ri(m,L)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(O=Xi(w,Math.max(Math.abs(a),Math.abs(o))))&&(m.precision=O-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(O=pi(w))&&(m.precision=O-(m.type==="%")*2);break}}return Fi(m)}function ur(a){var o=a.domain;return a.ticks=function(f){var m=o();return zg(m[0],m[m.length-1],f==null?10:f)},a.tickFormat=function(f,m){var w=o();return Ui(w[0],w[w.length-1],f==null?10:f,m)},a.nice=function(f){f==null&&(f=10);var m=o(),w=0,O=m.length-1,L=m[w],F=m[O],V;return F<L&&(V=L,L=F,F=V,V=w,w=O,O=V),V=Kv(L,F,f),V>0?(L=Math.floor(L/V)*V,F=Math.ceil(F/V)*V,V=Kv(L,F,f)):V<0&&(L=Math.ceil(L*V)/V,F=Math.floor(F*V)/V,V=Kv(L,F,f)),V>0?(m[w]=Math.floor(L/V)*V,m[O]=Math.ceil(F/V)*V,o(m)):V<0&&(m[w]=Math.ceil(L*V)/V,m[O]=Math.floor(F*V)/V,o(m)),a},a}function kr(){var a=nm(Mu,Mu);return a.copy=function(){return dv(a,kr())},Dh.apply(a,arguments),ur(a)}function yi(a){var o;function f(m){return isNaN(m=+m)?o:m}return f.invert=f,f.domain=f.range=function(m){return arguments.length?(a=map.call(m,number),f):a.slice()},f.unknown=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return yi(a).unknown(o)},a=arguments.length?map.call(a,number):[0,1],linearish(f)}function io(a,o){a=a.slice();var f=0,m=a.length-1,w=a[f],O=a[m],L;return O<w&&(L=f,f=m,m=L,L=w,w=O,O=L),a[f]=o.floor(w),a[m]=o.ceil(O),a}function oi(a){return Math.log(a)}function eo(a){return Math.exp(a)}function Ei(a){return-Math.log(-a)}function to(a){return-Math.exp(-a)}function li(a){return isFinite(a)?+("1e"+a):a<0?0:a}function di(a){return a===10?li:a===Math.E?Math.exp:function(o){return Math.pow(a,o)}}function zo(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(o){return Math.log(o)/a})}function pa(a){return function(o){return-a(-o)}}function qi(a){var o=a(oi,eo),f=o.domain,m=10,w,O;function L(){return w=zo(m),O=di(m),f()[0]<0?(w=pa(w),O=pa(O),a(Ei,to)):a(oi,eo),o}return o.base=function(F){return arguments.length?(m=+F,L()):m},o.domain=function(F){return arguments.length?(f(F),L()):f()},o.ticks=function(F){var V=f(),re=V[0],Ee=V[V.length-1],Te;(Te=Ee<re)&&($e=re,re=Ee,Ee=$e);var $e=w(re),Dt=w(Ee),nn,Tn,sr,Br=F==null?10:+F,Er=[];if(!(m%1)&&Dt-$e<Br){if($e=Math.round($e)-1,Dt=Math.round(Dt)+1,re>0){for(;$e<Dt;++$e)for(Tn=1,nn=O($e);Tn<m;++Tn)if(sr=nn*Tn,!(sr<re)){if(sr>Ee)break;Er.push(sr)}}else for(;$e<Dt;++$e)for(Tn=m-1,nn=O($e);Tn>=1;--Tn)if(sr=nn*Tn,!(sr<re)){if(sr>Ee)break;Er.push(sr)}}else Er=zg($e,Dt,Math.min(Dt-$e,Br)).map(O);return Te?Er.reverse():Er},o.tickFormat=function(F,V){if(V==null&&(V=m===10?".0e":","),typeof V!="function"&&(V=Fi(V)),F===1/0)return V;F==null&&(F=10);var re=Math.max(1,m*F/o.ticks().length);return function(Ee){var Te=Ee/O(Math.round(w(Ee)));return Te*m<m-.5&&(Te*=m),Te<=re?V(Ee):""}},o.nice=function(){return f(io(f(),{floor:function(F){return O(Math.floor(w(F)))},ceil:function(F){return O(Math.ceil(w(F)))}}))},o}function Si(){var a=qi(Km()).domain([1,10]);return a.copy=function(){return dv(a,Si()).base(a.base())},Dh.apply(a,arguments),a}function $r(a){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/a))}}function ko(a){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*a}}function Na(a){var o=1,f=a($r(o),ko(o));return f.constant=function(m){return arguments.length?a($r(o=+m),ko(o)):o},linearish(f)}function so(){var a=Na(transformer());return a.copy=function(){return copy(a,so()).constant(a.constant())},initRange.apply(a,arguments)}function va(a){return function(o){return o<0?-Math.pow(-o,a):Math.pow(o,a)}}function ha(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Jo(a){return a<0?-a*a:a*a}function gs(a){var o=a(Mu,Mu),f=1;function m(){return f===1?a(Mu,Mu):f===.5?a(ha,Jo):a(va(f),va(1/f))}return o.exponent=function(w){return arguments.length?(f=+w,m()):f},ur(o)}function Sl(){var a=gs(Km());return a.copy=function(){return dv(a,Sl()).exponent(a.exponent())},Dh.apply(a,arguments),a}function Hc(){return Sl.apply(null,arguments).exponent(.5)}function $a(){var a=[],o=[],f=[],m;function w(){var L=0,F=Math.max(1,o.length);for(f=new Array(F-1);++L<F;)f[L-1]=fv(a,L/F);return O}function O(L){return isNaN(L=+L)?m:o[Yv(f,L)]}return O.invertExtent=function(L){var F=o.indexOf(L);return F<0?[NaN,NaN]:[F>0?f[F-1]:a[0],F<f.length?f[F]:a[a.length-1]]},O.domain=function(L){if(!arguments.length)return a.slice();a=[];for(var F=0,V=L.length,re;F<V;++F)re=L[F],re!=null&&!isNaN(re=+re)&&a.push(re);return a.sort($v),w()},O.range=function(L){return arguments.length?(o=Af.call(L),w()):o.slice()},O.unknown=function(L){return arguments.length?(m=L,O):m},O.quantiles=function(){return f.slice()},O.copy=function(){return $a().domain(a).range(o).unknown(m)},Dh.apply(O,arguments)}function Gl(){var a=0,o=1,f=1,m=[.5],w=[0,1],O;function L(V){return V<=V?w[Yv(m,V,0,f)]:O}function F(){var V=-1;for(m=new Array(f);++V<f;)m[V]=((V+1)*o-(V-f)*a)/(f+1);return L}return L.domain=function(V){return arguments.length?(a=+V[0],o=+V[1],F()):[a,o]},L.range=function(V){return arguments.length?(f=(w=Af.call(V)).length-1,F()):w.slice()},L.invertExtent=function(V){var re=w.indexOf(V);return re<0?[NaN,NaN]:re<1?[a,m[0]]:re>=f?[m[f-1],o]:[m[re-1],m[re]]},L.unknown=function(V){return arguments.length&&(O=V),L},L.thresholds=function(){return m.slice()},L.copy=function(){return Gl().domain([a,o]).range(w).unknown(O)},Dh.apply(ur(L),arguments)}function qs(){var a=[.5],o=[0,1],f,m=1;function w(O){return O<=O?o[Yv(a,O,0,m)]:f}return w.domain=function(O){return arguments.length?(a=Af.call(O),m=Math.min(a.length,o.length-1),w):a.slice()},w.range=function(O){return arguments.length?(o=Af.call(O),m=Math.min(a.length,o.length-1),w):o.slice()},w.invertExtent=function(O){var L=o.indexOf(O);return[a[L-1],a[L]]},w.unknown=function(O){return arguments.length?(f=O,w):f},w.copy=function(){return qs().domain(a).range(o).unknown(f)},Dh.apply(w,arguments)}var ie=new Date,tc=new Date;function ss(a,o,f,m){function w(O){return a(O=arguments.length===0?new Date:new Date(+O)),O}return w.floor=function(O){return a(O=new Date(+O)),O},w.ceil=function(O){return a(O=new Date(O-1)),o(O,1),a(O),O},w.round=function(O){var L=w(O),F=w.ceil(O);return O-L<F-O?L:F},w.offset=function(O,L){return o(O=new Date(+O),L==null?1:Math.floor(L)),O},w.range=function(O,L,F){var V=[],re;if(O=w.ceil(O),F=F==null?1:Math.floor(F),!(O<L)||!(F>0))return V;do V.push(re=new Date(+O)),o(O,F),a(O);while(re<O&&O<L);return V},w.filter=function(O){return ss(function(L){if(L>=L)for(;a(L),!O(L);)L.setTime(L-1)},function(L,F){if(L>=L)if(F<0)for(;++F<=0;)for(;o(L,-1),!O(L););else for(;--F>=0;)for(;o(L,1),!O(L););})},f&&(w.count=function(O,L){return ie.setTime(+O),tc.setTime(+L),a(ie),a(tc),Math.floor(f(ie,tc))},w.every=function(O){return O=Math.floor(O),!isFinite(O)||!(O>0)?null:O>1?w.filter(m?function(L){return m(L)%O===0}:function(L){return w.count(0,L)%O===0}):w}),w}var fr=ss(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o)},function(a,o){return o.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});fr.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ss(function(o){o.setFullYear(Math.floor(o.getFullYear()/a)*a),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,f){o.setFullYear(o.getFullYear()+f*a)})};var Kr=fr,Dl=fr.range,Ca=ss(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,o){a.setMonth(a.getMonth()+o)},function(a,o){return o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),ru=Ca,zs=Ca.range,ea=1e3,Ia=6e4,ys=36e5,uc=864e5,Nh=6048e5;function mn(a){return ss(function(o){o.setDate(o.getDate()-(o.getDay()+7-a)%7),o.setHours(0,0,0,0)},function(o,f){o.setDate(o.getDate()+f*7)},function(o,f){return(f-o-(f.getTimezoneOffset()-o.getTimezoneOffset())*Ia)/Nh})}var Pr=mn(0),xr=mn(1),vo=mn(2),za=mn(3),Ps=mn(4),It=mn(5),tn=mn(6),Mn=Pr.range,Tr=xr.range,br=vo.range,jn=za.range,Jn=Ps.range,nr=It.range,xn=tn.range,Wn=ss(function(a){a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*Ia)/uc},function(a){return a.getDate()-1}),en=Wn,Yn=Wn.range,Dr=ss(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*ea-a.getMinutes()*Ia)},function(a,o){a.setTime(+a+o*ys)},function(a,o){return(o-a)/ys},function(a){return a.getHours()}),jr=Dr,vi=Dr.range,ei=ss(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*ea)},function(a,o){a.setTime(+a+o*Ia)},function(a,o){return(o-a)/Ia},function(a){return a.getMinutes()}),_i=ei,Lo=ei.range,ki=ss(function(a){a.setTime(a-a.getMilliseconds())},function(a,o){a.setTime(+a+o*ea)},function(a,o){return(o-a)/ea},function(a){return a.getUTCSeconds()}),$i=ki,oa=ki.range,Xo=ss(function(){},function(a,o){a.setTime(+a+o)},function(a,o){return o-a});Xo.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?ss(function(o){o.setTime(Math.floor(o/a)*a)},function(o,f){o.setTime(+o+f*a)},function(o,f){return(f-o)/a}):Xo};var Ns=Xo,Wc=Xo.range;function nc(a){return ss(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-a)%7),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCDate(o.getUTCDate()+f*7)},function(o,f){return(f-o)/Nh})}var Jm=nc(0),Cf=nc(1),s_=nc(2),Sp=nc(3),Tp=nc(4),R1=nc(5),yx=nc(6),l_=Jm.range,M1=Cf.range,B0=s_.range,_x=Sp.range,eg=Tp.range,Zg=R1.range,iu=yx.range,Tl=ss(function(a){a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+o)},function(a,o){return(o-a)/uc},function(a){return a.getUTCDate()-1}),tg=Tl,Xg=Tl.range,c_=ss(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o)},function(a,o){return o.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});c_.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ss(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/a)*a),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCFullYear(o.getUTCFullYear()+f*a)})};var ng=c_,P1=c_.range;function rg(a){if(0<=a.y&&a.y<100){var o=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return o.setFullYear(a.y),o}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function n0(a){if(0<=a.y&&a.y<100){var o=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return o.setUTCFullYear(a.y),o}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function wp(a,o,f){return{y:a,m:o,d:f,H:0,M:0,S:0,L:0}}function bx(a){var o=a.dateTime,f=a.date,m=a.time,w=a.periods,O=a.days,L=a.shortDays,F=a.months,V=a.shortMonths,re=r0(w),Ee=ad(w),Te=r0(O),$e=ad(O),Dt=r0(L),nn=ad(L),Tn=r0(F),sr=ad(F),Br=r0(V),Er=ad(V),ui={a:Rm,A:kv,b:Qf,B:My,c:null,d:fn,e:fn,f:gr,g:ua,G:Ya,H:_n,I:Hn,j:In,L:cr,m:Lr,M:Nr,p:C2,q:Ab,Q:pl,s:hc,S:Gr,u:Pi,U:Yi,V:ho,w:$o,W:po,x:null,X:null,y:ja,Y:Ao,Z:jo,"%":gu},Vi={a:Cb,A:ER,b:aw,B:Tc,c:null,d:qa,e:qa,f:Nl,g:el,G:xs,H:Vo,I:Is,j:il,L:Xl,m:wl,M:rc,p:kl,q:Q_,Q:pl,s:hc,S:fc,u:_c,U:Wu,V:Gu,w:$l,W:au,x:null,X:null,y:Qa,Y:$s,Z:Zu,"%":gu},Po={a:ls,A:ta,b:_s,B:is,c:ds,d:P,e:P,f:We,g:c,G:am,H:j,I:j,j:B,L:De,m:A,M:q,p:Ba,q:g,Q:xt,s:Lt,S:ge,u:om,U:Zl,V:Js,w:xx,W:xa,x:np,X:rp,y:c,Y:am,Z:d,"%":tt};ui.x=no(f,ui),ui.X=no(m,ui),ui.c=no(o,ui),Vi.x=no(f,Vi),Vi.X=no(m,Vi),Vi.c=no(o,Vi);function no(da,Bs){return function(gl){var bo=[],df=-1,dc=0,Lp=da.length,ip,Y0,Ob;for(gl instanceof Date||(gl=new Date(+gl));++df<Lp;)da.charCodeAt(df)===37&&(bo.push(da.slice(dc,df)),(Y0=Ic[ip=da.charAt(++df)])!=null?ip=da.charAt(++df):Y0=ip==="e"?" ":"0",(Ob=Bs[ip])&&(ip=Ob(gl,Y0)),bo.push(ip),dc=df+1);return bo.push(da.slice(dc,df)),bo.join("")}}function Wr(da,Bs){return function(gl){var bo=wp(1900,void 0,1),df=ro(bo,da,gl+="",0),dc,Lp;if(df!=gl.length)return null;if("Q"in bo)return new Date(bo.Q);if("s"in bo)return new Date(bo.s*1e3+("L"in bo?bo.L:0));if(Bs&&!("Z"in bo)&&(bo.Z=0),"p"in bo&&(bo.H=bo.H%12+bo.p*12),bo.m===void 0&&(bo.m="q"in bo?bo.q:0),"V"in bo){if(bo.V<1||bo.V>53)return null;"w"in bo||(bo.w=1),"Z"in bo?(dc=n0(wp(bo.y,0,1)),Lp=dc.getUTCDay(),dc=Lp>4||Lp===0?Cf.ceil(dc):Cf(dc),dc=tg.offset(dc,(bo.V-1)*7),bo.y=dc.getUTCFullYear(),bo.m=dc.getUTCMonth(),bo.d=dc.getUTCDate()+(bo.w+6)%7):(dc=rg(wp(bo.y,0,1)),Lp=dc.getDay(),dc=Lp>4||Lp===0?xr.ceil(dc):xr(dc),dc=en.offset(dc,(bo.V-1)*7),bo.y=dc.getFullYear(),bo.m=dc.getMonth(),bo.d=dc.getDate()+(bo.w+6)%7)}else("W"in bo||"U"in bo)&&("w"in bo||(bo.w="u"in bo?bo.u%7:"W"in bo?1:0),Lp="Z"in bo?n0(wp(bo.y,0,1)).getUTCDay():rg(wp(bo.y,0,1)).getDay(),bo.m=0,bo.d="W"in bo?(bo.w+6)%7+bo.W*7-(Lp+5)%7:bo.w+bo.U*7-(Lp+6)%7);return"Z"in bo?(bo.H+=bo.Z/100|0,bo.M+=bo.Z%100,n0(bo)):rg(bo)}}function ro(da,Bs,gl,bo){for(var df=0,dc=Bs.length,Lp=gl.length,ip,Y0;df<dc;){if(bo>=Lp)return-1;if(ip=Bs.charCodeAt(df++),ip===37){if(ip=Bs.charAt(df++),Y0=Po[ip in Ic?Bs.charAt(df++):ip],!Y0||(bo=Y0(da,gl,bo))<0)return-1}else if(ip!=gl.charCodeAt(bo++))return-1}return bo}function Ba(da,Bs,gl){var bo=re.exec(Bs.slice(gl));return bo?(da.p=Ee[bo[0].toLowerCase()],gl+bo[0].length):-1}function ls(da,Bs,gl){var bo=Dt.exec(Bs.slice(gl));return bo?(da.w=nn[bo[0].toLowerCase()],gl+bo[0].length):-1}function ta(da,Bs,gl){var bo=Te.exec(Bs.slice(gl));return bo?(da.w=$e[bo[0].toLowerCase()],gl+bo[0].length):-1}function _s(da,Bs,gl){var bo=Br.exec(Bs.slice(gl));return bo?(da.m=Er[bo[0].toLowerCase()],gl+bo[0].length):-1}function is(da,Bs,gl){var bo=Tn.exec(Bs.slice(gl));return bo?(da.m=sr[bo[0].toLowerCase()],gl+bo[0].length):-1}function ds(da,Bs,gl){return ro(da,o,Bs,gl)}function np(da,Bs,gl){return ro(da,f,Bs,gl)}function rp(da,Bs,gl){return ro(da,m,Bs,gl)}function Rm(da){return L[da.getDay()]}function kv(da){return O[da.getDay()]}function Qf(da){return V[da.getMonth()]}function My(da){return F[da.getMonth()]}function C2(da){return w[+(da.getHours()>=12)]}function Ab(da){return 1+~~(da.getMonth()/3)}function Cb(da){return L[da.getUTCDay()]}function ER(da){return O[da.getUTCDay()]}function aw(da){return V[da.getUTCMonth()]}function Tc(da){return F[da.getUTCMonth()]}function kl(da){return w[+(da.getUTCHours()>=12)]}function Q_(da){return 1+~~(da.getUTCMonth()/3)}return{format:function(da){var Bs=no(da+="",ui);return Bs.toString=function(){return da},Bs},parse:function(da){var Bs=Wr(da+="",!1);return Bs.toString=function(){return da},Bs},utcFormat:function(da){var Bs=no(da+="",Vi);return Bs.toString=function(){return da},Bs},utcParse:function(da){var Bs=Wr(da+="",!0);return Bs.toString=function(){return da},Bs}}}var Ic={"-":"",_:" ",0:"0"},ou=/^\s*\d+/,F0=/^%/,vv=/[\\^$*+?|[\]().{}]/g;function Qs(a,o,f){var m=a<0?"-":"",w=(m?-a:a)+"",O=w.length;return m+(O<f?new Array(f-O+1).join(o)+w:w)}function I1(a){return a.replace(vv,"\\$&")}function r0(a){return new RegExp("^(?:"+a.map(I1).join("|")+")","i")}function ad(a){for(var o={},f=-1,m=a.length;++f<m;)o[a[f].toLowerCase()]=f;return o}function xx(a,o,f){var m=ou.exec(o.slice(f,f+1));return m?(a.w=+m[0],f+m[0].length):-1}function om(a,o,f){var m=ou.exec(o.slice(f,f+1));return m?(a.u=+m[0],f+m[0].length):-1}function Zl(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.U=+m[0],f+m[0].length):-1}function Js(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.V=+m[0],f+m[0].length):-1}function xa(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.W=+m[0],f+m[0].length):-1}function am(a,o,f){var m=ou.exec(o.slice(f,f+4));return m?(a.y=+m[0],f+m[0].length):-1}function c(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.y=+m[0]+(+m[0]>68?1900:2e3),f+m[0].length):-1}function d(a,o,f){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(f,f+6));return m?(a.Z=m[1]?0:-(m[2]+(m[3]||"00")),f+m[0].length):-1}function g(a,o,f){var m=ou.exec(o.slice(f,f+1));return m?(a.q=m[0]*3-3,f+m[0].length):-1}function A(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.m=m[0]-1,f+m[0].length):-1}function P(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.d=+m[0],f+m[0].length):-1}function B(a,o,f){var m=ou.exec(o.slice(f,f+3));return m?(a.m=0,a.d=+m[0],f+m[0].length):-1}function j(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.H=+m[0],f+m[0].length):-1}function q(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.M=+m[0],f+m[0].length):-1}function ge(a,o,f){var m=ou.exec(o.slice(f,f+2));return m?(a.S=+m[0],f+m[0].length):-1}function De(a,o,f){var m=ou.exec(o.slice(f,f+3));return m?(a.L=+m[0],f+m[0].length):-1}function We(a,o,f){var m=ou.exec(o.slice(f,f+6));return m?(a.L=Math.floor(m[0]/1e3),f+m[0].length):-1}function tt(a,o,f){var m=F0.exec(o.slice(f,f+1));return m?f+m[0].length:-1}function xt(a,o,f){var m=ou.exec(o.slice(f));return m?(a.Q=+m[0],f+m[0].length):-1}function Lt(a,o,f){var m=ou.exec(o.slice(f));return m?(a.s=+m[0],f+m[0].length):-1}function fn(a,o){return Qs(a.getDate(),o,2)}function _n(a,o){return Qs(a.getHours(),o,2)}function Hn(a,o){return Qs(a.getHours()%12||12,o,2)}function In(a,o){return Qs(1+en.count(Kr(a),a),o,3)}function cr(a,o){return Qs(a.getMilliseconds(),o,3)}function gr(a,o){return cr(a,o)+"000"}function Lr(a,o){return Qs(a.getMonth()+1,o,2)}function Nr(a,o){return Qs(a.getMinutes(),o,2)}function Gr(a,o){return Qs(a.getSeconds(),o,2)}function Pi(a){var o=a.getDay();return o===0?7:o}function Yi(a,o){return Qs(Pr.count(Kr(a)-1,a),o,2)}function Do(a){var o=a.getDay();return o>=4||o===0?Ps(a):Ps.ceil(a)}function ho(a,o){return a=Do(a),Qs(Ps.count(Kr(a),a)+(Kr(a).getDay()===4),o,2)}function $o(a){return a.getDay()}function po(a,o){return Qs(xr.count(Kr(a)-1,a),o,2)}function ja(a,o){return Qs(a.getFullYear()%100,o,2)}function ua(a,o){return a=Do(a),Qs(a.getFullYear()%100,o,2)}function Ao(a,o){return Qs(a.getFullYear()%1e4,o,4)}function Ya(a,o){var f=a.getDay();return a=f>=4||f===0?Ps(a):Ps.ceil(a),Qs(a.getFullYear()%1e4,o,4)}function jo(a){var o=a.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+Qs(o/60|0,"0",2)+Qs(o%60,"0",2)}function qa(a,o){return Qs(a.getUTCDate(),o,2)}function Vo(a,o){return Qs(a.getUTCHours(),o,2)}function Is(a,o){return Qs(a.getUTCHours()%12||12,o,2)}function il(a,o){return Qs(1+tg.count(ng(a),a),o,3)}function Xl(a,o){return Qs(a.getUTCMilliseconds(),o,3)}function Nl(a,o){return Xl(a,o)+"000"}function wl(a,o){return Qs(a.getUTCMonth()+1,o,2)}function rc(a,o){return Qs(a.getUTCMinutes(),o,2)}function fc(a,o){return Qs(a.getUTCSeconds(),o,2)}function _c(a){var o=a.getUTCDay();return o===0?7:o}function Wu(a,o){return Qs(Jm.count(ng(a)-1,a),o,2)}function Lc(a){var o=a.getUTCDay();return o>=4||o===0?Tp(a):Tp.ceil(a)}function Gu(a,o){return a=Lc(a),Qs(Tp.count(ng(a),a)+(ng(a).getUTCDay()===4),o,2)}function $l(a){return a.getUTCDay()}function au(a,o){return Qs(Cf.count(ng(a)-1,a),o,2)}function Qa(a,o){return Qs(a.getUTCFullYear()%100,o,2)}function el(a,o){return a=Lc(a),Qs(a.getUTCFullYear()%100,o,2)}function $s(a,o){return Qs(a.getUTCFullYear()%1e4,o,4)}function xs(a,o){var f=a.getUTCDay();return a=f>=4||f===0?Tp(a):Tp.ceil(a),Qs(a.getUTCFullYear()%1e4,o,4)}function Zu(){return"+0000"}function gu(){return"%"}function pl(a){return+a}function hc(a){return Math.floor(+a/1e3)}var bc,Ts,js,ch,Gd;vl({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vl(a){return bc=bx(a),Ts=bc.format,js=bc.parse,ch=bc.utcFormat,Gd=bc.utcParse,bc}var uh=1e3,Xu=uh*60,Zd=Xu*60,Xf=Zd*24,Ap=Xf*7,Bh=Xf*30,Fh=Xf*365;function k0(a){return new Date(a)}function $f(a){return a instanceof Date?+a:+new Date(+a)}function sm(a,o,f,m,w,O,L,F,V){var re=nm(Mu,Mu),Ee=re.invert,Te=re.domain,$e=V(".%L"),Dt=V(":%S"),nn=V("%I:%M"),Tn=V("%I %p"),sr=V("%a %d"),Br=V("%b %d"),Er=V("%B"),ui=V("%Y"),Vi=[[L,1,uh],[L,5,5*uh],[L,15,15*uh],[L,30,30*uh],[O,1,Xu],[O,5,5*Xu],[O,15,15*Xu],[O,30,30*Xu],[w,1,Zd],[w,3,3*Zd],[w,6,6*Zd],[w,12,12*Zd],[m,1,Xf],[m,2,2*Xf],[f,1,Ap],[o,1,Bh],[o,3,3*Bh],[a,1,Fh]];function Po(Wr){return(L(Wr)<Wr?$e:O(Wr)<Wr?Dt:w(Wr)<Wr?nn:m(Wr)<Wr?Tn:o(Wr)<Wr?f(Wr)<Wr?sr:Br:a(Wr)<Wr?Er:ui)(Wr)}function no(Wr,ro,Ba,ls){if(Wr==null&&(Wr=10),typeof Wr=="number"){var ta=Math.abs(Ba-ro)/Wr,_s=Xp(function(is){return is[2]}).right(Vi,ta);_s===Vi.length?(ls=qv(ro/Fh,Ba/Fh,Wr),Wr=a):_s?(_s=Vi[ta/Vi[_s-1][2]<Vi[_s][2]/ta?_s-1:_s],ls=_s[1],Wr=_s[0]):(ls=Math.max(qv(ro,Ba,Wr),1),Wr=F)}return ls==null?Wr:Wr.every(ls)}return re.invert=function(Wr){return new Date(Ee(Wr))},re.domain=function(Wr){return arguments.length?Te(id.call(Wr,$f)):Te().map(k0)},re.ticks=function(Wr,ro){var Ba=Te(),ls=Ba[0],ta=Ba[Ba.length-1],_s=ta<ls,is;return _s&&(is=ls,ls=ta,ta=is),is=no(Wr,ls,ta,ro),is=is?is.range(ls,ta+1):[],_s?is.reverse():is},re.tickFormat=function(Wr,ro){return ro==null?Po:V(ro)},re.nice=function(Wr,ro){var Ba=Te();return(Wr=no(Wr,Ba[0],Ba[Ba.length-1],ro))?Te(io(Ba,Wr)):re},re.copy=function(){return dv(re,sm(a,o,f,m,w,O,L,F,V))},re}function $g(){return Dh.apply(sm(Kr,ru,Pr,en,jr,_i,$i,Ns,Ts).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function u_(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sd(){var a=0,o=1,f,m,w,O,L=Mu,F=!1,V;function re(Ee){return isNaN(Ee=+Ee)?V:L(w===0?.5:(Ee=(O(Ee)-f)*w,F?Math.max(0,Math.min(1,Ee)):Ee))}return re.domain=function(Ee){return arguments.length?(f=O(a=+Ee[0]),m=O(o=+Ee[1]),w=f===m?0:1/(m-f),re):[a,o]},re.clamp=function(Ee){return arguments.length?(F=!!Ee,re):F},re.interpolator=function(Ee){return arguments.length?(L=Ee,re):L},re.unknown=function(Ee){return arguments.length?(V=Ee,re):V},function(Ee){return O=Ee,f=Ee(a),m=Ee(o),w=f===m?0:1/(m-f),re}}function i0(a,o){return o.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function mv(){var a=ur(sd()(Mu));return a.copy=function(){return i0(a,mv())},Qv.apply(a,arguments)}function U0(){var a=loggish(sd()).domain([1,10]);return a.copy=function(){return i0(a,U0()).base(a.base())},initInterpolator.apply(a,arguments)}function gv(){var a=symlogish(sd());return a.copy=function(){return i0(a,gv()).constant(a.constant())},initInterpolator.apply(a,arguments)}function lm(){var a=powish(sd());return a.copy=function(){return i0(a,lm()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function f_(){return lm.apply(null,arguments).exponent(.5)}function ig(){var a=[],o=identity;function f(m){if(!isNaN(m=+m))return o((bisect(a,m)-1)/(a.length-1))}return f.domain=function(m){if(!arguments.length)return a.slice();a=[];for(var w=0,O=m.length,L;w<O;++w)L=m[w],L!=null&&!isNaN(L=+L)&&a.push(L);return a.sort(ascending),f},f.interpolator=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return ig(o).domain(a)},initInterpolator.apply(f,arguments)}function o0(){var a=0,o=.5,f=1,m,w,O,L,F,V=Mu,re,Ee=!1,Te;function $e(Dt){return isNaN(Dt=+Dt)?Te:(Dt=.5+((Dt=+re(Dt))-w)*(Dt<w?L:F),V(Ee?Math.max(0,Math.min(1,Dt)):Dt))}return $e.domain=function(Dt){return arguments.length?(m=re(a=+Dt[0]),w=re(o=+Dt[1]),O=re(f=+Dt[2]),L=m===w?0:.5/(w-m),F=w===O?0:.5/(O-w),$e):[a,o,f]},$e.clamp=function(Dt){return arguments.length?(Ee=!!Dt,$e):Ee},$e.interpolator=function(Dt){return arguments.length?(V=Dt,$e):V},$e.unknown=function(Dt){return arguments.length?(Te=Dt,$e):Te},function(Dt){return re=Dt,m=Dt(a),w=Dt(o),O=Dt(f),L=m===w?0:.5/(w-m),F=w===O?0:.5/(O-w),$e}}function z0(){var a=ur(o0()(Mu));return a.copy=function(){return i0(a,z0())},Qv.apply(a,arguments)}function cm(){var a=loggish(o0()).domain([.1,1,10]);return a.copy=function(){return copy(a,cm()).base(a.base())},initInterpolator.apply(a,arguments)}function j0(){var a=symlogish(o0());return a.copy=function(){return copy(a,j0()).constant(a.constant())},initInterpolator.apply(a,arguments)}function um(){var a=powish(o0());return a.copy=function(){return copy(a,um()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function h_(){return um.apply(null,arguments).exponent(.5)}function yu(a){let o,f=[];function m(w){return w==null?o:w}return m.invert=m,m.domain=m.range=w=>w?(f=w,w):f,m.unknown=w=>w?(o=w,w):o,m.copy=()=>yu(a).unknown(o),m}const{isNil:yv,isString:fm,uniq:hm}=Me.lodashUtil,Cp=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Xd={[Y.vY.LINEAR]:kr,[Y.vY.POWER]:Sl,[Y.vY.LOG]:Si,[Y.vY.IDENTITY]:yu,[Y.vY.SEQUENTIAL]:mv,[Y.vY.TIME]:$g,[Y.vY.QUANTILE]:$a,[Y.vY.QUANTIZE]:Gl,[Y.vY.THRESHOLD]:qs,[Y.vY.CAT]:L0,[Y.vY.DIVERGING]:z0};class ld{constructor(){(0,Jt.Z)(this,"scaleOptions",{})}apply(o,{styleAttributeService:f}){var m=this;o.hooks.init.tapPromise("FeatureScalePlugin",(0,Ai.Z)(function*(){var w;o.log(Y.Or.ScaleInitStart,Y.KD.INIT),m.scaleOptions=o.getScaleOptions();const O=f.getLayerStyleAttributes(),L=(w=o.getSource())===null||w===void 0?void 0:w.data.dataArray;Array.isArray(L)&&L.length===0||(m.caculateScalesForAttributes(O||[],L),o.log(Y.Or.ScaleInitEnd,Y.KD.INIT))})),o.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var w=(0,Ai.Z)(function*(O){if(!O)return O;o.log(Y.Or.ScaleInitStart,Y.KD.UPDATE),m.scaleOptions=o.getScaleOptions();const L=f.getLayerStyleAttributes(),F=o.getSource().data.dataArray;return Array.isArray(F)&&F.length===0||(m.caculateScalesForAttributes(L||[],F),o.log(Y.Or.ScaleInitEnd,Y.KD.UPDATE),o.layerModelNeedUpdate=!0),!0});return function(O){return w.apply(this,arguments)}}()),o.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(o.layerModelNeedUpdate)return;this.scaleOptions=o.getScaleOptions();const w=f.getLayerStyleAttributes(),O=o.getSource().data.dataArray;if(!(Array.isArray(O)&&O.length===0)&&w){const L=w.filter(F=>F.needRescale);L.length&&this.caculateScalesForAttributes(L,O)}})}isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}caculateScalesForAttributes(o,f){o.forEach(m=>{if(m.scale){const w=m.scale,O=m.scale.field;w.names=this.parseFields(yv(O)?[]:O);const L=[];w.names.forEach(F=>{var V;L.push(this.createScale(F,m.name,(V=m.scale)===null||V===void 0?void 0:V.values,f))}),L.some(F=>F.type===Y.ee.VARIABLE)?(w.type=Y.ee.VARIABLE,L.forEach(F=>{if(!w.callback&&w.values!=="text"){var V;switch((V=F.option)===null||V===void 0?void 0:V.type){case Y.vY.LOG:case Y.vY.LINEAR:case Y.vY.POWER:if(w.values&&w.values.length>2){const Ee=F.scale.ticks(w.values.length);F.scale.domain(Ee)}w.values?F.scale.range(w.values):F.scale.range(F.option.domain);break;case Y.vY.QUANTILE:case Y.vY.QUANTIZE:case Y.vY.THRESHOLD:F.scale.range(w.values);break;case Y.vY.IDENTITY:break;case Y.vY.CAT:w.values?F.scale.range(w.values):F.scale.range(F.option.domain);break;case Y.vY.DIVERGING:case Y.vY.SEQUENTIAL:F.scale.interpolator(Ou(w.values));break}}if(w.values==="text"){var re;F.scale.range((re=F.option)===null||re===void 0?void 0:re.domain)}})):(w.type=Y.ee.CONSTANT,w.defaultValues=L.map((F,V)=>F.scale(w.names[V]))),w.scalers=L.map(F=>({field:F.field,func:F.scale,option:F.option})),m.needRescale=!1}})}parseFields(o){return Array.isArray(o)?o:fm(o)?o.split("*"):[o]}createScale(o,f,m,w){var O,L;const F=this.scaleOptions[f]&&((O=this.scaleOptions[f])===null||O===void 0?void 0:O.field)===o?this.scaleOptions[f]:this.scaleOptions[o],V={field:o,scale:void 0,type:Y.ee.VARIABLE,option:F};if(!w||!w.length)return F&&F.type?V.scale=this.createDefaultScale(F):(V.scale=L0([o]),V.type=Y.ee.CONSTANT),V;const re=(L=w.find(Ee=>!yv(Ee[o])))===null||L===void 0?void 0:L[o];if(this.isNumber(o)||yv(re)&&!F)V.scale=L0([o]),V.type=Y.ee.CONSTANT;else{let Ee=F&&F.type||this.getDefaultType(re);m==="text"&&(Ee=Y.vY.CAT),m===void 0&&(Ee=Y.vY.IDENTITY);const Te=this.createScaleConfig(Ee,o,F,w);V.scale=this.createDefaultScale(Te),V.option=Te}return V}getDefaultType(o){let f=Y.vY.LINEAR;return typeof o=="string"&&(f=Cp.test(o)?Y.vY.TIME:Y.vY.CAT),f}createScaleConfig(o,f,m,w){const O={type:o};let L=[];if(o===Y.vY.QUANTILE){const F=new Map;w==null||w.forEach(V=>{F.set(V._id,V[f])}),L=Array.from(F.values())}else L=(w==null?void 0:w.map(F=>F[f]))||[];if(m!=null&&m.domain)O.domain=m==null?void 0:m.domain;else if(o===Y.vY.CAT||o===Y.vY.IDENTITY)O.domain=hm(L);else if(o===Y.vY.QUANTILE)O.domain=L;else if(o===Y.vY.DIVERGING){const F=Xa(L),V=(m==null?void 0:m.neutral)!==void 0?m==null?void 0:m.neutral:(F[0]+F[1])/2;O.domain=[F[0],V,F[1]]}else O.domain=Xa(L);return(0,Cr.Z)((0,Cr.Z)({},O),m)}createDefaultScale({type:o,domain:f,unknown:m,clamp:w,nice:O}){const L=Xd[o]();return f&&L.domain&&L.domain(f),m&&L.unknown(m),w!==void 0&&L.clamp&&L.clamp(w),O!==void 0&&L.nice&&L.nice(O),L}}class Yg{apply(o){o.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{o.animateStatus&&o.models.forEach(m=>{m.addUniforms((0,Cr.Z)({},o.layerModel.getAnimateUniforms()))})})}}class d_{apply(o){o.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:f,enableMask:m}=o.getLayerConfig();!o.tileLayer&&f&&f.length>0&&o.updateLayerConfig({mask:m})})}}class p_{build(o){return(0,Ai.Z)(function*(){o.prepareBuildModel(),yield o.buildModels()})()}initLayerModel(o){var f=this;return(0,Ai.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}prepareLayerModel(o){var f=this;return(0,Ai.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}apply(o){var f=this;o.hooks.init.tapPromise("LayerModelPlugin",(0,Ai.Z)(function*(){if(o.getSource().isTile){o.prepareBuildModel();return}o.log(Y.Or.BuildModelStart,Y.KD.INIT),yield f.initLayerModel(o),o.log(Y.Or.BuildModelEnd,Y.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var m=(0,Ai.Z)(function*(w){return!w||o.getSource().isTile?!1:(o.log(Y.Or.BuildModelStart,Y.KD.UPDATE),yield f.prepareLayerModel(o),o.log(Y.Or.BuildModelEnd,Y.KD.UPDATE),!0)});return function(w){return m.apply(this,arguments)}}())}}class cd{apply(o){o.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:f,fitBoundsOptions:m}=o.getLayerConfig();f&&o.fitBounds(m),o.styleNeedUpdate=!1})}}const Kg=["type"],og={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},_v={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},ws={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},fh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function L1(a){const o={u_DirectionalLights:new Array(3).fill((0,Cr.Z)({},ws)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,Cr.Z)({},fh)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[_v]),a.forEach(f=>{let{type:m="directional"}=f,w=(0,Il.Z)(f,Kg);const O=og[m].lights,L=og[m].num,F=o[L];o[O][F]=(0,Cr.Z)((0,Cr.Z)({},o[O][F]),w),o[L]++}),o}class a0{apply(o){o.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:f}=o.getLayerConfig();f&&o.models.forEach(m=>m.addUniforms((0,Cr.Z)({},L1())))})}}function qg(a){return a.map(o=>(typeof o=="string"&&(o=[o,{}]),o))}function v_(a,o,f,m){const w=a.multiPassRenderer;return w.add(m("render")),qg(o).forEach(O=>{const[L,F]=O;w.add(f(L),F)}),w.add(f("copy")),w}class Qg{constructor(){(0,Jt.Z)(this,"enabled",void 0)}apply(o,{rendererService:f,postProcessingPassFactory:m,normalPassFactory:w}){o.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:O,passes:L=[]}=o.getLayerConfig();this.enabled=!!O&&o.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(o.multiPassRenderer=v_(o,L,m,w),o.multiPassRenderer.setRenderFlag(!0))}),o.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:O,height:L}=f.getViewportSize();o.multiPassRenderer.resize(O,L)}})}}const uf={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function Jg(a){switch(a){case"rotation":return{name:"Rotation",type:Y.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:uf.ROTATION,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{rotation:f=0}=o;return Array.isArray(f)?[f[0]]:[f]}}};case"stroke":return{name:"stroke",type:Y.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:uf.STROKE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:o=>{const{stroke:f=[1,1,1,1]}=o;return f}}};case"opacity":return{name:"opacity",type:Y.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:uf.OPACITY,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{opacity:f=1}=o;return[f]}}};case"offsets":return{name:"offsets",type:Y.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:uf.OFFSETS,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const{offsets:f}=o;return f}}};default:return}}const{isNumber:ag}=Me.lodashUtil,s0={NONE:0,ENCODE:1,HIGHLIGHT:2};class ey{constructor(){(0,Jt.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const o=[];return this.pickingUniformMap.forEach(f=>{ag(f)?o.push(f):o.push(...f)}),o}updatePickOption(o,f){Object.keys(o).forEach(L=>{this.pickingUniformMap.set(L,o[L])});const m=f.getLayerConfig().pickingBuffer||0,w=Number(f.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",m),this.pickingUniformMap.set("u_shaderPick",w),f.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(o,{styleAttributeService:f}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),o.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();f.registerStyleAttribute({name:"pickingColor",type:Y.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:uf.PICKING_COLOR,buffer:{data:[],type:Y.gl.FLOAT},size:3,update:w=>{const{id:O}=w;return m?(0,Me.Z6)(O):[0,0,0]}}})}),o.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:s0.ENCODE},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:s0.ENCODE})))}),o.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:s0.HIGHLIGHT},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:s0.HIGHLIGHT})))}),o.hooks.beforeHighlight.tap("PixelPickingPlugin",m=>{const{highlightColor:w,activeMix:O=0}=o.getLayerConfig(),L=typeof w=="string"?(0,Me.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Me.W0)(new Uint8Array(m))});const F={u_PickingStage:s0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:L.map(V=>V*255),u_activeMix:O};this.updatePickOption(F,o),o.models.forEach(V=>V.addUniforms(F))}),o.hooks.beforeSelect.tap("PixelPickingPlugin",m=>{const{selectColor:w,selectMix:O=0}=o.getLayerConfig(),L=typeof w=="string"?(0,Me.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Me.W0)(new Uint8Array(m))});const F={u_PickingStage:s0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:L.map(V=>V*255),u_activeMix:O,u_CurrentSelectedId:m,u_SelectColor:L.map(V=>V*255)};this.updatePickOption(F,o),o.models.forEach(V=>V.addUniforms(F))})}}const ty=["mvt","geojsonvt","testTile"];function m_(a){const o=a.getSource();return ty.includes(o.parser.type)}class sg{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{m_(o)||this.registerBuiltinAttributes(f,o)})}registerBuiltinAttributes(o,f){if(f.type==="MaskLayer"){this.registerPositionAttribute(o);return}this.registerPositionAttribute(o),this.registerColorAttribute(o)}registerPositionAttribute(o){o.registerStyleAttribute({name:"position",type:Y.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:uf.POSITION,buffer:{data:[],type:Y.gl.FLOAT},size:3,update:(f,m,w)=>w.length===2?[w[0],w[1],0]:[w[0],w[1],w[2]]}})}registerColorAttribute(o){o.registerStyleAttribute({name:"color",type:Y.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:uf.COLOR,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:f=>{const{color:m}=f;return!m||!m.length?[1,1,1,1]:m}}})}}class Ex{constructor(){(0,Jt.Z)(this,"cameraService",void 0),(0,Jt.Z)(this,"coordinateSystemService",void 0),(0,Jt.Z)(this,"rendererService",void 0),(0,Jt.Z)(this,"mapService",void 0),(0,Jt.Z)(this,"layerService",void 0)}apply(o,{rendererService:f,mapService:m,layerService:w,coordinateSystemService:O,cameraService:L}){this.rendererService=f,this.mapService=m,this.layerService=w,this.coordinateSystemService=O,this.cameraService=L;let F;this.rendererService.uniformBuffers[0]||(F=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=F),o.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const V=o.getLayerConfig().tileOrigin;this.coordinateSystemService.refresh(V);const{width:re,height:Ee}=this.rendererService.getViewportSize(),{data:Te,uniforms:$e}=this.generateUBO(re,Ee);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:Te}),this.rendererService.queryVerdorInfo()==="WebGL1"&&o.models.forEach(nn=>{nn.addUniforms((0,Cr.Z)((0,Cr.Z)({},$e),{},{u_PickingBuffer:o.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(o.getShaderPickStat())}))})})}generateUBO(o,f){const m=this.cameraService.getProjectionMatrix(),w=this.cameraService.getViewMatrix(),O=this.cameraService.getViewProjectionMatrix(),L=this.cameraService.getModelMatrix(),F=this.coordinateSystemService.getViewportCenterProjection(),V=this.coordinateSystemService.getPixelsPerDegree(),re=this.cameraService.getZoom(),Ee=this.coordinateSystemService.getPixelsPerDegree2(),Te=this.cameraService.getZoomScale(),$e=this.coordinateSystemService.getPixelsPerMeter(),Dt=this.coordinateSystemService.getCoordinateSystem(),nn=this.cameraService.getCameraPosition(),Tn=window.devicePixelRatio,sr=this.coordinateSystemService.getViewportCenter(),Br=[o,f],Er=this.cameraService.getFocalDistance();return{data:[...w,...m,...O,...L,...F,...V,re,...Ee,Te,...$e,Dt,...nn,Tn,...sr,...Br,Er,0,0,0],uniforms:{[Y.lv.ProjectionMatrix]:m,[Y.lv.ViewMatrix]:w,[Y.lv.ViewProjectionMatrix]:O,[Y.lv.Zoom]:re,[Y.lv.ZoomScale]:Te,[Y.lv.FocalDistance]:Er,[Y.lv.CameraPosition]:nn,[Y.kw.CoordinateSystem]:Dt,[Y.kw.ViewportCenter]:sr,[Y.kw.ViewportCenterProjection]:F,[Y.kw.PixelsPerDegree]:V,[Y.kw.PixelsPerDegree2]:Ee,[Y.kw.PixelsPerMeter]:$e,u_ViewportSize:Br,u_ModelMatrix:L,u_DevicePixelRatio:Tn}}}}class Sx{apply(o){o.hooks.beforeRender.tap("UpdateModelPlugin",()=>{o.layerModel&&o.layerModel.needUpdate().then(f=>{f&&o.renderLayers()})}),o.hooks.afterRender.tap("UpdateModelPlugin",()=>{o.layerModelNeedUpdate=!1})}}class D1{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(o,{styleAttributeService:f})}),o.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{o.layerModelNeedUpdate||o.inited&&this.updateStyleAttribute(o,{styleAttributeService:f})})}updateStyleAttribute(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter");if(w&&w.needRegenerateVertices){o.layerModelNeedUpdate=!0,m.forEach(O=>O.needRegenerateVertices=!1);return}m.filter(O=>O.needRegenerateVertices).forEach(O=>{f.updateAttributeByFeatureRange(O.name,o.getEncodedData(),O.featureRange.startIndex,O.featureRange.endIndex,o),O.needRegenerateVertices=!1})}initStyleAttribute(o,{styleAttributeService:f}){(f.getLayerStyleAttributes()||[]).filter(w=>w.needRegenerateVertices).forEach(w=>{f.updateAttributeByFeatureRange(w.name,o.getEncodedData(),w.featureRange.startIndex,w.featureRange.endIndex),w.needRegenerateVertices=!1})}}function g_(){return[new tu,new sg,new ld,new Ll,new cd,new d_,new D1,new Sx,new Qg,new Ex,new Yg,new a0,new ey,new p_]}const y_={[Y.h0.additive]:{enable:!0,func:{srcRGB:Y.gl.ONE,dstRGB:Y.gl.ONE,srcAlpha:1,dstAlpha:1}},[Y.h0.none]:{enable:!1},[Y.h0.normal]:{enable:!0,func:{srcRGB:Y.gl.SRC_ALPHA,dstRGB:Y.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[Y.h0.subtractive]:{enable:!0,func:{srcRGB:Y.gl.ONE,dstRGB:Y.gl.ONE,srcAlpha:Y.gl.ZERO,dstAlpha:Y.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Y.gl.FUNC_SUBTRACT,alpha:Y.gl.FUNC_SUBTRACT}},[Y.h0.max]:{enable:!0,func:{srcRGB:Y.gl.ONE,dstRGB:Y.gl.ONE},equation:{rgb:Y.gl.MAX_EXT}},[Y.h0.min]:{enable:!0,func:{srcRGB:Y.gl.ONE,dstRGB:Y.gl.ONE},equation:{rgb:Y.gl.MIN_EXT}}};class kh{constructor(o){(0,Jt.Z)(this,"layer",void 0),this.layer=o}pickRender(o){const m=this.layer.getContainer().layerService,w=this.layer;if(w.tileLayer)return w.tileLayer.pickRender(o);w.hooks.beforePickingEncode.call(),m.renderTileLayerMask(w),w.renderModels({ispick:!0}),w.hooks.afterPickingEncode.call()}pick(o,f){var m=this;return(0,Ai.Z)(function*(){const O=m.layer.getContainer().pickingService;return o.type==="RasterLayer"?m.pickRasterLayer(o,f):(m.pickRender(f),O.pickFromPickingFBO(o,f))})()}pickRasterLayer(o,f,m){const w=this.layer.getContainer(),O=w.pickingService,L=w.mapService,F=this.layer.getSource().extent,V=(0,Me.if)(f.lngLat,F),re={x:f.x,y:f.y,type:f.type,lngLat:f.lngLat,target:f,rasterValue:null},Ee=m||o;if(V){const Te=this.readRasterValue(o,F,L,f.x,f.y);return re.rasterValue=Te,O.triggerHoverOnLayer(Ee,re),!0}else return re.type=f.type==="mousemove"?"mouseout":"un"+f.type,O.triggerHoverOnLayer(Ee,(0,Cr.Z)((0,Cr.Z)({},re),{},{type:"unpick"})),O.triggerHoverOnLayer(Ee,re),!1}readRasterValue(o,f,m,w,O){const L=o.getSource().data.dataArray[0],[F=0,V=0,re=10,Ee=-10]=f,Te=m.lngLatToContainer([F,V]),$e=m.lngLatToContainer([re,Ee]),Dt=$e.x-Te.x,nn=Te.y-$e.y,Tn=[(w-Te.x)/Dt,(O-$e.y)/nn],sr=L.width||1,Br=L.height||1,Er=Math.floor(Tn[0]*sr),ui=Math.floor(Tn[1]*Br),Vi=Math.max(0,ui-1)*sr+Er;return L.data[Vi]}selectFeature(o){const f=this.layer,[m,w,O]=o;f.hooks.beforeSelect.call([m,w,O])}highlightPickedFeature(o){const[f,m,w]=o;this.layer.hooks.beforeHighlight.call([f,m,w])}getFeatureById(o){return this.layer.getSource().getFeatureById(o)}}class lg{constructor(o){(0,Jt.Z)(this,"layer",void 0),(0,Jt.Z)(this,"rendererService",void 0),(0,Jt.Z)(this,"colorTexture",void 0),(0,Jt.Z)(this,"key",void 0),this.layer=o;const f=this.layer.getContainer();this.rendererService=f.rendererService}getColorTexture(o,f){const m=this.getTextureKey(o,f);return this.key===m?this.colorTexture:(this.createColorTexture(o,f),this.key=m,this.colorTexture)}createColorTexture(o,f){const{createTexture2D:m}=this.rendererService,w=this.getColorRampBar(o,f),O=m({data:new Uint8Array(w.data),width:w.width,height:w.height,flipY:!1,unorm:!0});return this.colorTexture=O,O}setColorTexture(o,f,m){this.key=this.getTextureKey(f,m),this.colorTexture=o}destroy(){var o;(o=this.colorTexture)===null||o===void 0||o.destroy()}getColorRampBar(o,f){switch(o.type){case"cat":return(0,Me.hj)(o);case"quantize":return(0,Me.NJ)(o);case"custom":return(0,Me.Oc)(o,f);case"linear":return(0,Me.M4)(o,f);default:return(0,Me.Cl)(o)}}getTextureKey(o,f){var m;return`${o.colors.join("_")}_${o==null||(m=o.positions)===null||m===void 0?void 0:m.join("_")}_${o.type}_${f==null?void 0:f.join("_")}`}}const $d=["passes"],Op=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:ny,isFunction:N1,isNumber:hh,isObject:Dc,isPlainObject:bv,isUndefined:dm}=Me.lodashUtil;let l0=0;class xv extends Vc.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var o;return(o=this.container)===null||o===void 0?void 0:o.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(o={}){super(),(0,Jt.Z)(this,"id",`${l0++}`),(0,Jt.Z)(this,"name",`${l0}`),(0,Jt.Z)(this,"parent",void 0),(0,Jt.Z)(this,"coordCenter",void 0),(0,Jt.Z)(this,"type",void 0),(0,Jt.Z)(this,"visible",!0),(0,Jt.Z)(this,"zIndex",0),(0,Jt.Z)(this,"minZoom",void 0),(0,Jt.Z)(this,"maxZoom",void 0),(0,Jt.Z)(this,"inited",!1),(0,Jt.Z)(this,"layerModelNeedUpdate",!1),(0,Jt.Z)(this,"pickedFeatureID",null),(0,Jt.Z)(this,"selectedFeatureID",null),(0,Jt.Z)(this,"styleNeedUpdate",!1),(0,Jt.Z)(this,"rendering",void 0),(0,Jt.Z)(this,"forceRender",!1),(0,Jt.Z)(this,"clusterZoom",0),(0,Jt.Z)(this,"layerType",void 0),(0,Jt.Z)(this,"triangulation",void 0),(0,Jt.Z)(this,"layerPickService",void 0),(0,Jt.Z)(this,"textureService",void 0),(0,Jt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Jt.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Jt.Z)(this,"hooks",{init:new Ql.S$,afterInit:new Ql.oI,beforeRender:new Ql.oI,beforeRenderData:new Ql.bf,afterRender:new Ql.ni,beforePickingEncode:new Ql.ni,afterPickingEncode:new Ql.ni,beforeHighlight:new Ql.ni(["pickedColor"]),afterHighlight:new Ql.ni,beforeSelect:new Ql.ni(["pickedColor"]),afterSelect:new Ql.ni,beforeDestroy:new Ql.ni,afterDestroy:new Ql.ni}),(0,Jt.Z)(this,"models",[]),(0,Jt.Z)(this,"multiPassRenderer",void 0),(0,Jt.Z)(this,"plugins",void 0),(0,Jt.Z)(this,"startInit",!1),(0,Jt.Z)(this,"sourceOption",void 0),(0,Jt.Z)(this,"layerModel",void 0),(0,Jt.Z)(this,"shapeOption",void 0),(0,Jt.Z)(this,"tileLayer",void 0),(0,Jt.Z)(this,"layerChildren",[]),(0,Jt.Z)(this,"masks",[]),(0,Jt.Z)(this,"configService",Y.cO),(0,Jt.Z)(this,"styleAttributeService",void 0),(0,Jt.Z)(this,"layerSource",void 0),(0,Jt.Z)(this,"postProcessingPassFactory",void 0),(0,Jt.Z)(this,"animateOptions",{enable:!1}),(0,Jt.Z)(this,"container",void 0),(0,Jt.Z)(this,"encodedData",void 0),(0,Jt.Z)(this,"currentPickId",null),(0,Jt.Z)(this,"rawConfig",void 0),(0,Jt.Z)(this,"needUpdateConfig",void 0),(0,Jt.Z)(this,"encodeStyleAttribute",{}),(0,Jt.Z)(this,"enableShaderEncodeStyles",[]),(0,Jt.Z)(this,"enableDataEncodeStyles",[]),(0,Jt.Z)(this,"pendingStyleAttributes",[]),(0,Jt.Z)(this,"scaleOptions",{}),(0,Jt.Z)(this,"animateStartTime",void 0),(0,Jt.Z)(this,"animateStatus",!1),(0,Jt.Z)(this,"isDestroyed",!1),(0,Jt.Z)(this,"uniformBuffers",[]),(0,Jt.Z)(this,"encodeDataLength",0),(0,Jt.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0;const f=this.getLayerConfig();f&&f.autoFit&&this.fitBounds(f.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=o.name||this.id,this.zIndex=o.zIndex||0,this.rawConfig=o,this.masks=o.maskLayers||[]}addMask(o){this.masks.push(o),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(o){this.masks.push(o)}removeMaskLayer(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),o.destroy()}getAttribute(o){return this.styleAttributeService.getLayerStyleAttribute(o)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(o){if(Object.keys(o).map(f=>{f in this.rawConfig&&(this.rawConfig[f]=o[f])}),!this.startInit)this.needUpdateConfig=(0,Cr.Z)((0,Cr.Z)({},this.needUpdateConfig),o);else{const f=this.container.id;this.configService.setLayerConfig(f,this.id,(0,Cr.Z)((0,Cr.Z)((0,Cr.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),o)),this.needUpdateConfig={}}}setContainer(o){this.container=o}getContainer(){return this.container}addPlugin(o){return this.plugins.push(o),this}init(){var o=this;return(0,Ai.Z)(function*(){const f=o.container.id;o.startInit=!0,o.configService.setLayerConfig(f,o.id,o.rawConfig),o.layerType=o.rawConfig.layerType;const{enableMultiPassRenderer:m,passes:w}=o.getLayerConfig();m&&w!==null&&w!==void 0&&w.length&&w.length>0&&o.mapService.on("mapAfterFrameChange",()=>{o.renderLayers()}),o.postProcessingPassFactory=o.container.postProcessingPassFactory,o.styleAttributeService=o.container.styleAttributeService,m&&(o.multiPassRenderer=o.container.multiPassRenderer,o.multiPassRenderer.setLayer(o)),o.pendingStyleAttributes.forEach(({attributeName:O,attributeField:L,attributeValues:F,updateOptions:V})=>{o.styleAttributeService.updateStyleAttribute(O,{scale:(0,Cr.Z)({field:L},o.splitValuesAndCallbackInAttribute(F,L?void 0:o.getLayerConfig()[O]))},V)}),o.pendingStyleAttributes=[],o.plugins=g_();for(const O of o.plugins)O.apply(o,o.container);o.layerPickService=new kh(o),o.textureService=new lg(o),o.log(Y.Or.LayerInitStart),yield o.hooks.init.promise(),o.log(Y.Or.LayerInitEnd),o.inited=!0,o.emit("inited",{target:o,type:"inited"}),o.emit("add",{target:o,type:"add"}),o.hooks.afterInit.call()})()}log(o,f="init"){var m;if(this.tileLayer||this.isTileLayer)return;const w=`${this.id}.${f}.${o}`,O={id:this.id,type:this.type};(m=this.debugService)===null||m===void 0||m.log(w,O)}updateModelData(o){o.attributes&&o.elements?this.models.map(f=>{f.updateAttributesAndElements(o.attributes,o.elements)}):console.warn("data error")}setLayerPickService(o){this.layerPickService=o}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:o}=this.getLayerConfig();o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(o,f,m){return this.updateStyleAttribute("color",o,f,m),this}texture(o,f,m){return this.updateStyleAttribute("texture",o,f,m),this}rotate(o,f,m){return this.updateStyleAttribute("rotate",o,f,m),this}size(o,f,m){return this.updateStyleAttribute("size",o,f,m),this}filter(o,f,m){const w=this.updateStyleAttribute("filter",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}shape(o,f,m){this.shapeOption={field:o,values:f};const w=this.updateStyleAttribute("shape",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}label(o,f,m){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:o,attributeValues:f,updateOptions:m}),this}animate(o){let f={};return Dc(o)?(f.enable=!0,f=(0,Cr.Z)((0,Cr.Z)({},f),o)):f.enable=o,this.updateLayerConfig({animateOption:f}),this}source(o,f){return(o==null?void 0:o.type)==="source"?(this.setSource(o),this):(this.sourceOption={data:o,options:f},this.clusterZoom=0,this)}setData(o,f){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(o,f)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(o,f)}),this}dataUpdatelog(){this.log(Y.Or.SourceInitStart,Y.KD.UPDATE),this.layerSource.once("update",()=>{this.log(Y.Or.SourceInitEnd,Y.KD.UPDATE)})}style(o){const{passes:f}=o,m=(0,Il.Z)(o,$d);f&&qg(f).forEach(O=>{const L=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(O[0]);L&&L.updateOptions(O[1])}),m.borderColor&&(m.stroke=m.borderColor),m.borderWidth&&(m.strokeWidth=m.borderWidth);const w=m;return Object.keys(m).forEach(O=>{const L=m[O];Array.isArray(L)&&L.length===2&&!hh(L[0])&&!hh(L[1])&&(w[O]={field:L[0],value:L[1]})}),this.encodeStyle(w),this.updateLayerConfig(w),this}encodeStyle(o){Object.keys(o).forEach(f=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(f)&&bv(o[f])&&(o[f].field||o[f].value)&&!ny(this.encodeStyleAttribute[f],o[f])?(this.encodeStyleAttribute[f]=o[f],this.updateStyleAttribute(f,o[f].field,o[f].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[f]&&(delete this.encodeStyleAttribute[f],this.dataState.dataSourceNeedUpdate=!0)})}scale(o,f){const m=(0,Cr.Z)({},this.scaleOptions);if(Dc(o)?this.scaleOptions=(0,Cr.Z)((0,Cr.Z)({},this.scaleOptions),o):this.scaleOptions[o]=f,this.styleAttributeService&&!ny(m,this.scaleOptions)){const w=Dc(o)?o:{[o]:f};this.styleAttributeService.updateScaleAttribute(w)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(o={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(o),this))}renderMultiPass(){var o=this;return(0,Ai.Z)(function*(){o.encodeDataLength<=0&&!o.forceRender||(o.multiPassRenderer&&o.multiPassRenderer.getRenderFlag()?yield o.multiPassRenderer.render():o.renderModels())})()}active(o){const f={};return f.enableHighlight=Dc(o)?!0:o,Dc(o)?(f.enableHighlight=!0,o.color&&(f.highlightColor=o.color),o.mix&&(f.activeMix=o.mix)):f.enableHighlight=!!o,this.updateLayerConfig(f),this}setActive(o,f){if(Dc(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({highlightColor:Dc(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Dc(f)?f.mix:this.getLayerConfig().activeMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,highlightColor:Dc(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Dc(f)?f.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Me.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(o){const f={};return f.enableSelect=Dc(o)?!0:o,Dc(o)?(f.enableSelect=!0,o.color&&(f.selectColor=o.color),o.mix&&(f.selectMix=o.mix)):f.enableSelect=!!o,this.updateLayerConfig(f),this}setSelect(o,f){if(Dc(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({selectColor:Dc(f)?f.color:this.getLayerConfig().selectColor,selectMix:Dc(f)?f.mix:this.getLayerConfig().selectMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,selectColor:Dc(f)?f.color:this.getLayerConfig().selectColor,selectMix:Dc(f)?f.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Me.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(o){return this.updateLayerConfig({blend:o}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(o){return this.zIndex=o,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(o){this.currentPickId=o}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(o){this.selectedFeatureID=o}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const o=this.mapService.getZoom(),{visible:f,minZoom:m=-1/0,maxZoom:w=1/0}=this.getLayerConfig();return!!f&&o>=m&&o<w}setMultiPass(o,f){if(this.updateLayerConfig({enableMultiPassRenderer:o}),f&&this.updateLayerConfig({passes:f}),o){const{passes:m=[]}=this.getLayerConfig();this.multiPassRenderer=v_(this,m,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:w,height:O}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(w,O)}return this}setMinZoom(o){return this.updateLayerConfig({minZoom:o}),this}getMinZoom(){const{minZoom:o}=this.getLayerConfig();return o}getMaxZoom(){const{maxZoom:o}=this.getLayerConfig();return o}get(o){return this.getLayerConfig()[o]}setMaxZoom(o){return this.updateLayerConfig({maxZoom:o}),this}setAutoFit(o){return this.updateLayerConfig({autoFit:o}),this}fitBounds(o){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const m=this.getSource().extent;return m.some(O=>Math.abs(O)===1/0)?this:(this.mapService.fitBounds([[m[0],m[1]],[m[2],m[3]]],o),this)}destroy(o=!0){var f,m,w,O,L;if(this.isDestroyed)return;(f=this.layerModel)===null||f===void 0||f.uniformBuffers.forEach(V=>{V.destroy()}),this.layerChildren.map(V=>V.destroy(!1)),this.layerChildren=[];const{maskfence:F}=this.getLayerConfig();F&&(this.masks.map(V=>V.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(m=this.multiPassRenderer)===null||m===void 0||m.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(w=this.layerModel)===null||w===void 0||w.clearModels(o),(O=this.tileLayer)===null||O===void 0||O.destroy(),this.models=[],(L=this.debugService)===null||L===void 0||L.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var o;this.models.forEach(f=>f.destroy()),(o=this.layerModel)===null||o===void 0||o.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(o=>o.needRescale||o.needRemapping||o.needRegenerateVertices).length}setSource(o){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=o,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:f})=>{if(this.coordCenter===void 0){const m=this.layerSource.center;this.coordCenter=m}if(f==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(o){this.encodedData=o,this.encodeDataLength=o.length}getEncodedData(){return this.encodedData}getScale(o){return this.styleAttributeService.getLayerAttributeScale(o)}getLegend(o){var f,m,w;const O=this.styleAttributeService.getLayerStyleAttribute(o);return{type:(m=((O==null||(f=O.scale)===null||f===void 0?void 0:f.scalers)||[])[0])===null||m===void 0||(m=m.option)===null||m===void 0?void 0:m.type,field:O==null||(w=O.scale)===null||w===void 0?void 0:w.field,items:this.getLegendItems(o)}}getLegendItems(o){const f=this.styleAttributeService.getLayerAttributeScale(o);return f?f.invertExtent?f.range().map(w=>({value:f.invertExtent(w),[o]:w})):f.ticks?f.ticks().map(w=>({value:w,[o]:f(w)})):f!=null&&f.domain?f.domain().filter(w=>!dm(w)).map(w=>({value:w,[o]:f(w)})):[]:[]}pick({x:o,y:f}){this.interactionService.triggerHover({x:o,y:f})}boxSelect(o,f){this.pickingService.boxPickLayer(this,o,f)}buildLayerModel(o){var f=this;return(0,Ai.Z)(function*(){const{moduleName:m,vertexShader:w,fragmentShader:O,defines:L,inject:F,triangulation:V,styleOption:re,pickingEnabled:Ee=!0}=o,Te=(0,Il.Z)(o,Op);f.shaderModuleService.registerModule(m,{vs:w,fs:O,defines:L,inject:F});const{vs:$e,fs:Dt,uniforms:nn}=f.shaderModuleService.getModule(m),{createModel:Tn}=f.rendererService;return new Promise(sr=>{const{attributes:Br,elements:Er,count:ui}=f.styleAttributeService.createAttributesAndIndices(f.encodedData,V,re,f),Vi=[...f.layerModel.uniformBuffers,...f.rendererService.uniformBuffers];Ee&&Vi.push(f.getPickingUniformBuffer());const Po=(0,Cr.Z)({attributes:Br,uniforms:nn,fs:Dt,vs:$e,elements:Er,blend:y_[Y.h0.normal],uniformBuffers:Vi,textures:f.layerModel.textures},Te);ui&&(Po.count=ui);const no=Tn(Po);sr(no)})})()}createAttributes(o){const{triangulation:f}=o,{attributes:m}=this.styleAttributeService.createAttributes(this.encodedData,f);return m}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(o){const{enableHighlight:f=!0,enableSelect:m=!0}=this.getLayerConfig();let w=this.eventNames().indexOf(o)!==-1||this.eventNames().indexOf("un"+o)!==-1;return(o==="click"||o==="dblclick")&&m&&(w=!0),o==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(w=!0),this.isVisible()&&w}buildModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var o=this;return(0,Ai.Z)(function*(){yield o.buildModels()})()}renderMulPass(o){return(0,Ai.Z)(function*(){yield o.render()})()}renderModels(o={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(f=>{f.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(o),textures:this.layerModel.textures},(o==null?void 0:o.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(o,f,m,w){const O=this.configService.getAttributeConfig(this.id)||{};return ny(O[o],{field:f,values:m})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(o)!==-1&&this.configService.setAttributeConfig(this.id,{[o]:{field:f,values:m}}),this.startInit?this.styleAttributeService.updateStyleAttribute(o,{scale:(0,Cr.Z)({field:f},this.splitValuesAndCallbackInAttribute(m,this.getLayerConfig()[f]))},w):this.pendingStyleAttributes.push({attributeName:o,attributeField:f,attributeValues:m,updateOptions:w}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(o){console.warn("empty fn")}processData(o){return o}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}initLayerModels(){var o=this;return(0,Ai.Z)(function*(){o.models.forEach(m=>m.destroy()),o.models=[],o.uniformBuffers.forEach(m=>{m.destroy()}),o.uniformBuffers=[];const f=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});o.uniformBuffers.push(f),o.models=yield o.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(o){return{values:N1(o)?void 0:o,callback:N1(o)?o:void 0}}}function Tx(a,o){return{enable:a,mask:255,func:{cmp:Y.gl.EQUAL,ref:o?1:0,mask:1}}}function __(a){return a.maskOperation===Y.lE.OR?{enable:!0,mask:255,func:{cmp:Y.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Y.gl.KEEP,zfail:Y.gl.REPLACE,zpass:Y.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===Y.yn.SINGLE||a.stencilIndex===0?Y.gl.ALWAYS:Y.gl.LESS,ref:a.stencilType===Y.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:Y.gl.KEEP,zfail:Y.gl.REPLACE,zpass:Y.gl.REPLACE}}}const b_={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},cg={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var B1=D(9187),dh=D.n(B1);function ry(a){return Math.max(Math.ceil(a/4)*4,4)}function ug(a,o,f,m=!0){const w=f===3;if(m){a=a.slice();const L=[];for(let F=0;F<a.length;F+=f){L[0]=a[F],L[1]=a[F+1],w&&(L[2]=a[F+2]);const V=(0,Me.vP)(L,!0,{enable:!1,decimal:1});a[F]=V[0],a[F+1]=V[1],w&&(a[F+2]=V[2])}}return dh()(a,o,f)}const fg="ATTRIBUTE_LOCATION_";class Al{get attributeLocation(){return(0,Cr.Z)({},uf)}constructor(o){(0,Jt.Z)(this,"triangulation",void 0),(0,Jt.Z)(this,"uniformBuffers",[]),(0,Jt.Z)(this,"textures",[]),(0,Jt.Z)(this,"createTexture2D",void 0),(0,Jt.Z)(this,"preStyleAttribute",{}),(0,Jt.Z)(this,"encodeStyleAttribute",{}),(0,Jt.Z)(this,"layer",void 0),(0,Jt.Z)(this,"dataTexture",void 0),(0,Jt.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,Jt.Z)(this,"dataTextureTest",void 0),(0,Jt.Z)(this,"configService",void 0),(0,Jt.Z)(this,"shaderModuleService",void 0),(0,Jt.Z)(this,"rendererService",void 0),(0,Jt.Z)(this,"iconService",void 0),(0,Jt.Z)(this,"fontService",void 0),(0,Jt.Z)(this,"styleAttributeService",void 0),(0,Jt.Z)(this,"mapService",void 0),(0,Jt.Z)(this,"cameraService",void 0),(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"pickingService",void 0),(0,Jt.Z)(this,"attributeUnifoms",void 0),(0,Jt.Z)(this,"commonUnifoms",void 0),this.layer=o,this.configService=o.getContainer().globalConfigService,this.rendererService=o.getContainer().rendererService,this.pickingService=o.getContainer().pickingService,this.shaderModuleService=o.getContainer().shaderModuleService,this.styleAttributeService=o.getContainer().styleAttributeService,this.mapService=o.getContainer().mapService,this.iconService=o.getContainer().iconService,this.fontService=o.getContainer().fontService,this.cameraService=o.getContainer().cameraService,this.layerService=o.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:f}=this.rendererService;this.createTexture2D=f}getBlend(){const{blend:o="normal"}=this.layer.getLayerConfig();return y_[Y.h0[o]]}getStencil(o){const{mask:f=!1,maskInside:m=!0,enableMask:w,maskOperation:O=Y.lE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return __({isStencil:!0,stencilType:Y.yn.SINGLE});if(o.isStencil)return __((0,Cr.Z)((0,Cr.Z)({},o),{},{maskOperation:O}));const L=f||w&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return Tx(L,m)}getDefaultStyle(){return{}}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const m=(0,Cr.Z)((0,Cr.Z)({},f.uniformsOption),o.uniformsOption);return Object.keys(m).forEach(w=>{typeof m[w]=="boolean"&&(m[w]=m[w]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(m.u_texture=this.textures[0]),m}getAnimateUniforms(){return{}}needUpdate(){return(0,Ai.Z)(function*(){return!1})()}buildModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(o=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(o){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(o){return[o.enable?0:1,o.duration||4,o.interval||.2,o.trailLength||.1]}startModelAnimate(){const{animateOption:o}=this.layer.getLayerConfig();o.enable&&this.layer.setAnimateStartTime()}getInject(){return x_(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const o=Object.keys(this.attributeLocation).reduce((f,m)=>{const w=fg+m;return f[w]=this.attributeLocation[m],f},{});return(0,Cr.Z)({},o)}getStyleAttribute(){const o={};return this.layer.enableShaderEncodeStyles.forEach(f=>{if(!this.layer.encodeStyleAttribute[f]){const m=this.layer.getLayerConfig()[f];let w=typeof m=="undefined"?b_[f]:m;f==="stroke"&&(w=(0,Me.CI)(w)),o["u_"+f]=w}}),o}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(o=>{const f=Jg(o);f&&this.styleAttributeService.registerStyleAttribute(f)})}registerPosition64LowAttribute(o=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:Y.GC.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:Y.gl.FLOAT},size:2,update:(f,m,w)=>o?[(0,Me.Ks)(w[0]),(0,Me.Ks)(w[1])]:[0,0]}})}updateEncodeAttribute(o,f){this.encodeStyleAttribute[o]=f}initUniformsBuffer(){const o=this.getUniformsBufferInfo(this.getStyleAttribute()),f=this.getCommonUniformsInfo();o.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(ry(o.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),f.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(ry(f.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(o){let f=0;const m=[];return Object.values(o).forEach(w=>{Array.isArray(w)?(m.push(...w),f+=w.length):typeof w=="number"?(m.push(w),f+=1):typeof w=="boolean"&&(m.push(Number(w)),f+=1)}),{uniformsOption:o,uniformsLength:f,uniformsArray:m}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var o,f;const{uniformsArray:m}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:w}=this.getCommonUniformsInfo();(o=this.attributeUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(m).buffer)}),(f=this.commonUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(w).buffer)})}}function x_(a,o){const f=[];let m="";a.forEach(L=>{const F=L.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),V=fg+F;o[L]?m+=`#define USE_ATTRIBUTE_${F} 0.0 
`:f.push(`  ${cg[L]} u_${L};`),m+=`
#ifdef USE_ATTRIBUTE_${F}
layout(location = ${V}) in ${cg[L]} a_${L.charAt(0).toUpperCase()+L.slice(1)};
#endif 
`});const w=f.length?`
layout(std140) uniform AttributeUniforms {
  ${f.join(`
`)}
};
`:"";m+=w;let O="";return a.forEach(L=>{const F=L.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();O+=`
  #ifdef USE_ATTRIBUTE_${F}
    ${cg[L]} ${L} = a_${L.charAt(0).toUpperCase()+L.slice(1)};
  #else
    ${cg[L]} ${L} = u_${L};
  #endif
  `}),{"vs:#decl":m,"fs:#decl":w,"vs:#main-start":O}}const E_=100,oS=36,Ax=40;function F1(a){return a/180*Math.acos(-1)}function c0(a){const o=F1(a[0])+Math.PI/2,f=F1(a[1]),m=E_+Math.random()*.4,w=m*Math.cos(f)*Math.cos(o),O=m*Math.cos(f)*Math.sin(o),L=m*Math.sin(f);return[O,L,w]}function aS(a,o){const f=mat4.create(),m=mat4.create(),w=vec3.fromValues(0,1,0),O=vec3.fromValues(0,0,0);o=o||{},a=typeof a!="undefined"?a:1;const F=2+(typeof o.segments!="undefined"?o.segments:32),V=2*F,re=[],Ee=[],Te=[],$e=[],Dt=[],nn=[];for(let Tn=0;Tn<=F;Tn++){const sr=Tn/F,Br=sr*Math.PI;for(let Er=0;Er<=V;Er++){const ui=Er/V,Vi=ui*Math.PI*2;mat4.identity(m),mat4.rotateZ(m,m,-Br),mat4.identity(f),mat4.rotateY(f,f,Vi),vec3.transformMat4(O,w,m),vec3.transformMat4(O,O,f),vec3.scale(O,O,-a),Te.push(O.slice()),$e.push(...O.slice()),vec3.normalize(O,O),Dt.push(...O.slice()),nn.push([ui,1-sr]),$e.push(ui,1-sr)}if(Tn>0){const Er=Te.length;let ui=Er-2*(V+1);for(;ui+V+2<Er;ui++)re.push([ui,ui+1,ui+V+1]),Ee.push(ui,ui+1,ui+V+1),re.push([ui+V+1,ui+1,ui+V+2]),Ee.push(ui+V+1,ui+1,ui+V+2)}}return{cells:re,positions:Te,uvs:nn,positionsArr:$e,indicesArr:Ee,normalArr:Dt}}var Ls=D(31437);const Cx=Ls.Ue(),sS=Ls.Ue(),Yd=Ls.Ue(),u0=Ls.Ue(),hg=Ls.Ue();function k1(a,o,f,m,w){Ls.IH(a,f,m),Ls.Fv(a,a),o=Ls.al(-a[1],a[0]);const O=Ls.al(-f[1],f[0]);return[w/Ls.AK(o,O),o]}function Ev(a,o){return Ls.t8(a,-o[1],o[0])}function iy(a,o,f){return Ls.lu(a,o,f),Ls.Fv(a,a),a}function Ox(a,o){return a[0]===o[0]&&a[1]===o[1]}function lS(a){const o=new Map;for(let f=0;f<a.length;f++){const m=a[0].toString()+"-"+a[1].toString();o.get(m)?(a.splice(f,1),f++):o.set(m,m)}return a}class Rp{constructor(o={}){(0,Jt.Z)(this,"complex",void 0),(0,Jt.Z)(this,"join",void 0),(0,Jt.Z)(this,"cap",void 0),(0,Jt.Z)(this,"miterLimit",void 0),(0,Jt.Z)(this,"thickness",void 0),(0,Jt.Z)(this,"normal",void 0),(0,Jt.Z)(this,"lastFlip",-1),(0,Jt.Z)(this,"miter",Ls.al(0,0)),(0,Jt.Z)(this,"started",!1),(0,Jt.Z)(this,"dash",!1),(0,Jt.Z)(this,"totalDistance",0),(0,Jt.Z)(this,"currentIndex",0),this.join=o.join||"miter",this.cap=o.cap||"butt",this.miterLimit=o.miterLimit||10,this.thickness=o.thickness||1,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let O=1;O<m;O++){const L=o[O-1],F=o[O],V=O<o.length-1?o[O+1]:null,re=this.simpleSegment(f,w,L,F,V);w+=re}if(this.dash)for(let O=0;O<f.positions.length/6;O++)f.positions[O*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}extrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let O=1;O<m;O++){const L=o[O-1],F=o[O],V=O<o.length-1?o[O+1]:null,re=this.segment(f,w,L,F,V);w+=re}if(this.dash)for(let O=0;O<f.positions.length/6;O++)f.positions[O*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleSegment(o,f,m,w,O){let L=0;const F=o.indices,V=o.positions,re=o.normals,Ee=(0,Me.Z)([w[0],w[1]]),Te=(0,Me.Z)([m[0],m[1]]);iy(Yd,Ee,Te);let $e=0;if(this.dash&&($e=this.lineSegmentDistance(Ee,Te),this.totalDistance+=$e),this.normal||(this.normal=Ls.Ue(),Ev(this.normal,Yd)),this.started||(this.started=!0,this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-$e)),F.push(f+0,f+1,f+2),!O)Ev(this.normal,Yd),this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),L+=2;else{const Dt=(0,Me.Z)([O[0],O[1]]);Ox(Ee,Dt)&&Ls.IH(Dt,Ee,Ls.Fv(Dt,Ls.$X(Dt,Ee,Te))),iy(u0,Dt,Ee);const[nn,Tn]=k1(hg,Ls.Ue(),Yd,u0,this.thickness);let sr=Ls.AK(hg,this.normal)<0?-1:1;this.extrusions(V,re,w,Tn,nn,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),sr=-1,Ls.JG(this.normal,Tn),L+=2,this.lastFlip=sr}return L}segment(o,f,m,w,O){let L=0;const F=o.indices,V=o.positions,re=o.normals,Ee=this.cap==="square",Te=this.join==="bevel",$e=(0,Me.Z)([w[0],w[1]]),Dt=(0,Me.Z)([m[0],m[1]]);iy(Yd,$e,Dt);let nn=0;if(this.dash&&(nn=this.lineSegmentDistance($e,Dt),this.totalDistance+=nn),this.normal||(this.normal=Ls.Ue(),Ev(this.normal,Yd)),!this.started)if(this.started=!0,Ee){const Tn=Ls.Ue(),sr=Ls.Ue();Ls.IH(Tn,this.normal,Yd),Ls.IH(sr,this.normal,Yd),re.push(sr[0],sr[1],0),re.push(Tn[0],Tn[1],0),V.push(m[0],m[1],m[2]|0,this.totalDistance-nn,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),V.push(m[0],m[1],m[2]|0,this.totalDistance-nn,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-nn);if(F.push(f+0,f+1,f+2),O){const Tn=(0,Me.Z)([O[0],O[1]]);Ox($e,Tn)&&Ls.IH(Tn,$e,Ls.Fv(Tn,Ls.$X(Tn,$e,Dt))),iy(u0,Tn,$e);const[sr,Br]=k1(hg,Ls.Ue(),Yd,u0,this.thickness);let Er=Ls.AK(hg,this.normal)<0?-1:1,ui=Te;!ui&&this.join==="miter"&&sr>this.miterLimit&&(ui=!0),ui?(re.push(this.normal[0],this.normal[1],0),re.push(Br[0],Br[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*Er,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*Er,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,F.push(...this.lastFlip!==-Er?[f,f+2,f+3]:[f+2,f+1,f+3]),F.push(f+2,f+3,f+4),Ev(Cx,u0),Ls.JG(this.normal,Cx),re.push(this.normal[0],this.normal[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*Er,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L+=3):(this.extrusions(V,re,w,Br,sr,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),Er=-1,Ls.JG(this.normal,Br),L+=2),this.lastFlip=Er}else{if(Ev(this.normal,Yd),Ee){const Tn=Ls.Ue(),sr=Ls.Ue();Ls.lu(sr,Yd,this.normal),Ls.IH(Tn,Yd,this.normal),re.push(sr[0],sr[1],0),re.push(Tn[0],Tn[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance);F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),L+=2}return L}extrusions(o,f,m,w,O,L){f.push(w[0],w[1],0),f.push(w[0],w[1],0),o.push(m[0],m[1],m[2]|0,L,-O,m[2]|0),this.complex.indexes.push(this.currentIndex),o.push(m[0],m[1],m[2]|0,L,O,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(o,f){const m=f[0]-o[0],w=f[1]-o[1];return Math.sqrt(m*m+w*w)}}let V0=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),Sv=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function f0(a,o=0){const f=Math.PI*2/a,m=[];for(let O=0;O<a;O++)m.push(f*O+o*Math.PI/12);return m.map(O=>{const L=Math.sin(O+Math.PI/4),F=Math.cos(O+Math.PI/4);return[L,F,0]})}function ai(){return f0(30)}function dg(){return f0(4)}function Tv(){return f0(3)}function cS(){return f0(6,1)}function pg(){return f0(5)}const S_={[Sv.CIRCLE]:ai,[Sv.HEXAGON]:cS,[Sv.TRIANGLE]:Tv,[Sv.SQUARE]:dg,[Sv.PENTAGON]:pg,[V0.CYLINDER]:ai,[V0.HEXAGONCOLUMN]:cS,[V0.TRIANGLECOLUMN]:Tv,[V0.SQUARECOLUMN]:dg,[V0.PENTAGONCOLUMN]:pg};var Bl=D(77160);function RC(a){const o=a[0][0],f=a[0][a[0].length-1];o[0]===f[0]&&o[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const m=a[0].length,w=earcut.flatten(a),{vertices:O,dimensions:L}=w,F=[],V=[];for(let Ee=0;Ee<O.length/L;Ee++)L===2?F.push(O[Ee*2],O[Ee*2+1],1):F.push(O[Ee*3],O[Ee*3+1],1);const re=earcut(w.vertices,w.holes,w.dimensions);V.push(...re);for(let Ee=0;Ee<m;Ee++){const Te=w.vertices.slice(Ee*L,(Ee+1)*L);let $e=w.vertices.slice((Ee+1)*L,(Ee+2)*L);$e.length===0&&($e=w.vertices.slice(0,L));const Dt=F.length/3;F.push(Te[0],Te[1],1,$e[0],$e[1],1,Te[0],Te[1],0,$e[0],$e[1],0),V.push(...[0,2,1,2,3,1].map(nn=>nn+Dt))}return{positions:F,index:V}}function z5(a){const o=earcut.flatten(a),f=earcut(o.vertices,o.holes,o.dimensions);return{positions:o.vertices,index:f}}function uS(a,o=!1){const f=a[0][0],m=a[0][a[0].length-1];f[0]===m[0]&&f[1]===m[1]&&(a[0]=a[0].slice(0,a[0].length-1));const w=a[0].length,O=dh().flatten(a),{vertices:L,dimensions:F,holes:V}=O,re=[],Ee=[],Te=[];for(let Dt=0;Dt<L.length/F;Dt++)re.push(L[Dt*F],L[Dt*F+1],1,-1,-1),Te.push(0,0,1);const $e=ug(L,V,F,o);Ee.push(...$e);for(let Dt=0;Dt<w;Dt++){const nn=O.vertices.slice(Dt*F,(Dt+1)*F);let Tn=O.vertices.slice((Dt+1)*F,(Dt+2)*F);Tn.length===0&&(Tn=O.vertices.slice(0,F));const sr=re.length/5;re.push(nn[0],nn[1],1,0,0,Tn[0],Tn[1],1,.1,0,nn[0],nn[1],0,0,.8,Tn[0],Tn[1],0,.1,.8);const Br=oy([Tn[0],Tn[1],1],[nn[0],nn[1],0],[nn[0],nn[1],1],o);Te.push(...Br,...Br,...Br,...Br),Ee.push(...[1,2,0,3,2,1].map(Er=>Er+sr))}return{positions:re,index:Ee,normals:Te}}function oy(a,o,f,m=!1){const w=Bl.Ue(),O=Bl.Ue(),L=Bl.Ue();m&&(a=(0,Me.vP)(a),o=(0,Me.vP)(o),f=(0,Me.vP)(f));const F=Bl.al(...a),V=Bl.al(...o),re=Bl.al(...f);Bl.lu(w,re,V),Bl.lu(O,F,V),Bl.kC(L,w,O);const Ee=Bl.Ue();return Bl.Fv(Ee,L),Ee}const Of={};function ol(a){const o=(0,Me.SI)(a.coordinates);return{vertices:[...o,...o,...o,...o],indices:[0,1,2,2,3,0],size:o.length}}function Kd(a){const o=(0,Me.SI)(a.coordinates),f=c0(o);return{vertices:[...f,...f,...f,...f],indices:[0,1,2,2,3,0],size:f.length}}function MC(a){const{shape:o}=a,{positions:f,index:m,normals:w}=_u(o,!1);return{vertices:f,indices:m,normals:w,size:5}}function j5(a){const o=(0,Me.SI)(a.coordinates);return{vertices:[...o],indices:[0],size:o.length}}function Rx(a){const{coordinates:o}=a,f=new Rp({dash:!0,join:"bevel"});let m=o;m[0]&&!Array.isArray(m[0][0])&&(m=[o]),m.forEach(O=>{f.extrude(O)});const w=f.complex;return{vertices:w.positions,indices:w.indices,normals:w.normals,indexes:w.indexes,size:6}}function V5(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function PC(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:m,totalDistance:w}=dS(o);return m.map(O=>{f.push(O[0],O[1],O[2],O[3],0,w)}),{vertices:f,indices:[],normals:[],size:6,count:m.length}}function fS(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],size:4,count:0};const{results:m}=H0(o);return m.map(w=>{f.push(w[0],w[1],w[2],w[3])}),{vertices:f,indices:[],size:4,count:m.length}}function hS(a,o){const f=o[0]-a[0],m=o[1]-a[1];return Math.sqrt(f*f+m*m)}function ay(a,o){return a.length<3&&a.push(0),o!==void 0&&a.push(o),a}function dS(a){let o=a;Array.isArray(o)&&Array.isArray(o[0])&&Array.isArray(o[0][0])&&(o=a.flat());let f=0;if(o.length<2)return{results:o,totalDistance:0};{const m=[],w=ay(o[0],f);m.push(w);for(let L=1;L<o.length-1;L++){const F=hS((0,Me.Z)(o[L-1]),(0,Me.Z)(o[L]));f+=F;const V=ay(o[L],f);m.push(V),m.push(V)}const O=hS((0,Me.Z)(o[o.length-2]),(0,Me.Z)(o[o.length-1]));return f+=O,m.push(ay(o[o.length-1],f)),{results:m,totalDistance:f}}}function H0(a){if(a.length<2)return{results:a};{const o=[],f=ay(a[0]);o.push(f);for(let m=1;m<a.length-1;m++){const w=ay(a[m]);o.push(w),o.push(w)}return o.push(ay(a[a.length-1])),{results:o}}}function Uh(a){const{coordinates:o}=a,f=dh().flatten(o),{vertices:m,dimensions:w,holes:O}=f;return{indices:ug(m,O,w),vertices:m,size:w}}function T_(a){const{indices:o,vertices:f,size:m}=Uh(a);return{indices:o,vertices:Ka(f),size:m+4}}function Ka(a){const o=[],{center:f,radius:m}=(0,Me.Rx)(a);for(let w=0;w<a.length;w+=2){const O=a[w],L=a[w+1];o.push(O,L,0,...f,m)}return o}function Mx(a){const o=a.coordinates,{positions:f,index:m,normals:w}=uS(o,!0);return{vertices:f,indices:m,normals:w,size:5}}function H5(a){const{shape:o}=a,{positions:f,index:m}=Yf(o);return{vertices:f,indices:m,size:3}}function U1(a){const o=a.coordinates;return{vertices:[...o[0],0,0,0,...o[1],0,1,0,...o[2],0,1,1,...o[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function Px(a,o){const{segmentNumber:f=30}=o,m=a.coordinates,w=[],O=[];for(let L=0;L<f;L++)w.push(L,1,L,m[0][0],m[0][1],m[1][0],m[1][1],L,-1,L,m[0][0],m[0][1],m[1][0],m[1][1]),L!==f-1&&O.push(...[0,1,2,1,3,2].map(F=>L*2+F));return{vertices:w,indices:O,size:7}}function pS(a){const o=a.coordinates;o.length===2&&o.push(0);const f=W0(-1,1),m=W0(1,1),w=W0(-1,-1),O=W0(1,-1);return{vertices:[...o,...f,...o,...w,...o,...O,...o,...m],indices:[0,1,2,3,0,2],size:5}}function _u(a,o=!1){if(Of&&Of[a])return Of[a];const f=S_[a]?S_[a]():S_.cylinder(),m=uS([f],o);return Of[a]=m,m}function W5(a,o,f=3,m=!1){const w=new Float32Array(a.length/f*3);let O,L,F;const V=vec3.create(),re=vec3.create(),Ee=vec3.create();for(let Te=0,$e=o.length;Te<$e;Te+=3){O=o[Te+0]*3,L=o[Te+1]*3,F=o[Te+2]*3;let Dt=[a[O],a[O+1]],nn=[a[L],a[L+1]],Tn=[a[F],a[F+1]];m&&(Dt=lngLatToMeters(Dt),nn=lngLatToMeters(nn),Tn=lngLatToMeters(Tn));const[sr,Br]=Dt,Er=vec3.fromValues(sr,Br,a[O+2]),[ui,Vi]=nn,Po=vec3.fromValues(ui,Vi,a[L+2]),[no,Wr]=Tn,ro=vec3.fromValues(no,Wr,a[F+2]);vec3.sub(V,ro,Po),vec3.sub(re,Er,Po),vec3.cross(Ee,V,re),w[O]+=V[0],w[O+1]+=V[1],w[O+2]+=V[2],w[L]+=V[0],w[L+1]+=V[1],w[L+2]+=V[2],w[F]+=V[0],w[F+1]+=V[1],w[F+2]+=V[2]}return pm(w),w}function pm(a){for(let o=0,f=a.length;o<f;o+=3){const m=vec3.fromValues(a[o],a[o+1],a[o+2]),w=vec3.create();vec3.normalize(w,m),a.set(w,o)}}function G5(a){const o=a[0][0],f=a[0][a[0].length-1];return o[0]===f[0]&&o[1]===f[1]}function Yf(a){const o=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[a]?geometryShape[a]():geometryShape.circle();return o.indexOf(a)===-1?fillPolygon([f]):extrudePolygon([f])}function W0(a,o){const f=(a+1)/2,m=(o+1)/2;return[f,m]}function ic(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}function w_(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}const IC=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,Cl=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // \u6B63\u5411
    return mid;
  } else {
    // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,A_={solid:0,dash:1};class ud extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.NEAREST,min:Y.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:O=[10,5],forward:L=!0,lineTexture:F=!1,iconStep:V=100,segmentNumber:re=30}=this.layer.getLayerConfig(),{animateOption:Ee}=this.layer.getLayerConfig();let Te=O;w!=="dash"&&(Te=[0,0]),Te.length===2&&Te.push(0,0);let $e=0,Dt=[0,0,0,0],nn=[0,0,0,0];if(o&&f&&(Dt=(0,Me.CI)(o),nn=(0,Me.CI)(f),$e=1),this.rendererService.getDirty()){var Tn;(Tn=this.texture)===null||Tn===void 0||Tn.bind()}const sr={u_animate:this.animateOption2Array(Ee),u_dash_array:Te,u_sourceColor:Dt,u_targetColor:nn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:re,u_lineDir:L?1:-1,u_icon_step:V,u_line_texture:F?1:0,u_textureBlend:m==="normal"?0:1,u_blur:.9,u_line_type:A_[w||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:$e};return this.getUniformsBufferInfo(sr)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:IC,vert:Cl,type:""}}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:O}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc2d"+O,vertexShader:w,fragmentShader:m,defines:o.getDefines(),inject:o.getInject(),triangulation:Px,depth:{enable:!1},styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Y.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Y.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Me.Ks)(m[3]),(0,Me.Ks)(m[4]),(0,Me.Ks)(m[5]),(0,Me.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:O}=f[m]||{x:0,y:0};return[w,O]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Y.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}})}}const vS=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,mS=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,gS={solid:0,dash:1};class Rf extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.NEAREST,min:Y.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:O=[10,5],lineTexture:L=!1,iconStep:F=100,segmentNumber:V=30,globalArcHeight:re=10}=this.layer.getLayerConfig(),{animateOption:Ee}=this.layer.getLayerConfig();O.length===2&&O.push(0,0);let Te=0,$e=[0,0,0,0],Dt=[0,0,0,0];if(o&&f&&($e=(0,Me.CI)(o),Dt=(0,Me.CI)(f),Te=1),this.rendererService.getDirty()){var nn;(nn=this.texture)===null||nn===void 0||nn.bind()}const Tn={u_animate:this.animateOption2Array(Ee),u_dash_array:O,u_sourceColor:$e,u_targetColor:Dt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:E_,u_global_height:re,segmentNumber:V,u_line_type:gS[w]||0,u_icon_step:F,u_line_texture:L?1:0,u_textureBlend:m==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Te};return this.getUniformsBufferInfo(Tn)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:vS,vert:mS,type:""}}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:O}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc3d"+O,vertexShader:w,fragmentShader:m,defines:o.getDefines(),inject:o.getInject(),triangulation:Px,styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Y.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Y.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Me.Ks)(m[3]),(0,Me.Ks)(m[4]),(0,Me.Ks)(m[5]),(0,Me.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:O}=f[m]||{x:0,y:0};return[w,O]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Y.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}})}}const _o={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},xc=1/2;function yS(a,o){const{width:f=2,height:m=1}=o;return{vertices:[0,xc*a,1*a*f,-(m+xc)*a,1*a*f,(m-xc)*a,0,xc*a,1*a*f,-(m+xc)*a,1*a*f,(m-xc)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Ix(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*a*f,1*m,1*a*f,-1*m,0,0,1*a*f,1*m,1*a*f,-1*m],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Lx(a,o){const{width:f=2,height:m=2}=o;return{vertices:[0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2,0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function LC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m,0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function vm(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m,0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function DC(a,o){const{width:f=2,height:m=2}=o,w=ai(),O=dh().flatten([w]),L=dh()(O.vertices,O.holes,O.dimensions),F=w.map(V=>[V[0]*f*a,V[1]*m]).flat();return{vertices:[...F,...F],dimensions:2,indices:L.map(V=>V+w.length),outLineIndices:L,normals:[...w.map(V=>[V[1]*m,V[0]*f*a,1]).flat(),...new Array(w.length*3).fill(0)]}}function NC(a,o=0,f){const m=typeof f.source=="object"?f.source.type:f.source,w=typeof f.target=="object"?f.target.type:f.target,{width:O=m?_o[m]:0}=typeof f.source=="object"?f.source:{},{width:L=w?_o[w]:0}=typeof f.target=="object"?f.target:{};return{vertices:[0,xc,1*O,...a,1,xc,-1*L,...a,1,-xc,-1*L,...a,0,-xc,1*O,...a,0,xc,1*O,...a,1,xc,-1*L,...a,1,-xc,-1*L,...a,0,-xc,1*O,...a],outLineIndices:[0,1,2,0,2,3].map(F=>F+o),indices:[4,5,6,4,6,7].map(F=>F+o),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function _S(a,o){const f=typeof a=="object"?a.type:a,m=o==="source"?1:-1,w=typeof a=="object"?a:{};switch(f){case"circle":return DC(m,w);case"triangle":return Ix(m,w);case"diamond":return LC(m,w);case"rect":return Lx(m,w);case"classic":return vm(m,w);case"halfTriangle":return yS(m,w);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function BC(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function bS(a,o){return o?Dx(a,o):BC(a)}function Dx(a,o){const f=a.coordinates.flat(),{target:m="classic",source:w="circle"}=o,O=C_(_S(w,"source"),f,0,0),L=NC(f,O.vertices.length/7,o),F=C_(_S(m,"target"),f,1,O.vertices.length/7+L.vertices.length/7);return{vertices:[...O.vertices,...L.vertices,...F.vertices],indices:[...O.outLineIndices,...L.outLineIndices,...F.outLineIndices,...O.indices,...L.indices,...F.indices],normals:[...O.normals,...L.normals,...F.normals],size:7}}function C_(a,o,f=1,m=0){const w=[],{vertices:O,indices:L,dimensions:F,outLineIndices:V}=a;for(let re=0;re<O.length;re+=F)w.push(f,O[re+1],O[re],...o);return(0,Cr.Z)((0,Cr.Z)({},a),{},{vertices:w,indices:L.map(re=>re+m),outLineIndices:V.map(re=>re+m)})}const FC=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,G0=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source_world = a_Instance.rg; // \u8D77\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class z1 extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:o=2,strokeWidth:f=1,strokeOpacity:m=1}=this.layer.getLayerConfig(),w={u_gap_width:o,u_stroke_width:f,u_stroke_opacity:m};return this.getUniformsBufferInfo(w)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"flow_line",vertexShader:G0,fragmentShader:FC,defines:o.getDefines(),inject:o.getInject(),triangulation:bS,styleOption:o.layer.getLayerConfig().symbol,primitive:Y.gl.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Y.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Y.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Me.Ks)(m[3]),(0,Me.Ks)(m[4]),(0,Me.Ks)(m[5]),(0,Me.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O)=>O}})}}const fd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,kC=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,xS={solid:0,dash:1};class UC extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.NEAREST,min:Y.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:O=[10,5],lineTexture:L=!1,iconStep:F=100,segmentNumber:V=30}=this.layer.getLayerConfig(),{animateOption:re}=this.layer.getLayerConfig();if(O.length===2&&O.push(0,0),this.rendererService.getDirty()){var Ee;(Ee=this.texture)===null||Ee===void 0||Ee.bind()}let Te=0,$e=[0,0,0,0],Dt=[0,0,0,0];o&&f&&($e=(0,Me.CI)(o),Dt=(0,Me.CI)(f),Te=1);let nn=this.layer.getLayerAnimateTime();isNaN(nn)&&(nn=0);const Tn={u_animate:this.animateOption2Array(re),u_dash_array:O,u_sourceColor:$e,u_targetColor:Dt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:V,u_line_type:xS[w]||0,u_icon_step:F,u_line_texture:L?1:0,u_textureBlend:m==="normal"?0:1,u_time:nn,u_linearColor:Te};return this.getUniformsBufferInfo(Tn)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig();return[yield o.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:kC,fragmentShader:fd,triangulation:Px,styleOption:{segmentNumber:f},defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Y.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Y.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Me.Ks)(m[3]),(0,Me.Ks)(m[4]),(0,Me.Ks)(m[5]),(0,Me.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:O}=f[m]||{x:0,y:0};return[w,O]}}})}}let O_=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),ES=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),Z5=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),Nx=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),SS=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const zC=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,Bx=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class Fl extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"textureEventFlag",!1),(0,Jt.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.NEAREST,min:Y.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:O=[10,5,0,0],lineTexture:L=!1,iconStep:F=100,vertexHeightScale:V=20,strokeWidth:re=0,raisingHeight:Ee=0,heightfixed:Te=!1,linearDir:$e=ES.VERTICAL,blur:Dt=[1,1,1,0]}=this.layer.getLayerConfig();let nn=O;if(w!=="dash"&&(nn=[0,0,0,0]),nn.length===2&&nn.push(0,0),this.rendererService.getDirty()&&this.texture){var Tn;(Tn=this.texture)===null||Tn===void 0||Tn.bind()}const{animateOption:sr}=this.layer.getLayerConfig();let Br=0,Er=[0,0,0,0],ui=[0,0,0,0];o&&f&&(Er=(0,Me.CI)(o),ui=(0,Me.CI)(f),Br=1);const Vi={u_animate:this.animateOption2Array(sr),u_dash_array:nn,u_blur:Dt,u_sourceColor:Er,u_targetColor:ui,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:F,u_heightfixed:Number(Te),u_vertexScale:V,u_raisingHeight:Number(Ee),u_strokeWidth:re,u_textureBlend:m===Z5.NORMAL?0:1,u_line_texture:L?1:0,u_linearDir:$e===ES.VERTICAL?1:0,u_linearColor:Br,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Vi)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.textureEventFlag||(o.textureEventFlag=!0,o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture)),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{depth:f=!1}=o.layer.getLayerConfig(),{frag:m,vert:w,type:O}=o.getShaders();return o.layer.triangulation=Rx,[yield o.layer.buildLayerModel({moduleName:"line"+O,vertexShader:w,fragmentShader:m,triangulation:Rx,defines:o.getDefines(),inject:o.getInject(),depth:{enable:f}})]})()}getShaders(){return{frag:zC,vert:Bx,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Y.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O,L)=>L===void 0?[m[3],10,m[4]]:[m[3],L,m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Y.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m,w,O)=>[...O,m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:O}=f[m]||{x:0,y:0};return[w,O]}}})}}const bu=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,Mp=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class Fx extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,lineType:m="solid",dashArray:w=[10,5,0,0],vertexHeightScale:O=20}=this.layer.getLayerConfig();let L=w;m!=="dash"&&(L=[0,0,0,0]),L.length===2&&L.push(0,0);let F=0,V=[0,0,0,0],re=[0,0,0,0];o&&f&&(V=(0,Me.CI)(o),re=(0,Me.CI)(f),F=1);const Ee={u_sourceColor:V,u_targetColor:re,u_dash_array:L,u_vertexScale:O,u_linearColor:F};return this.getUniformsBufferInfo(Ee)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}getShaders(){return{frag:bu,vert:Mp,type:"lineSimpleNormal"}}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const{frag:f,vert:m,type:w}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,triangulation:PC,defines:o.getDefines(),inject:o.getInject(),primitive:Y.gl.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Y.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:(o,f,m)=>{const{size:w=1}=o,O=Array.isArray(w)?[w[0],w[1]]:[w,0];return[O[0],O[1],m[3],m[5]]}}})}}const Ec=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,jC=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class VC extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.NEAREST,min:Y.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",heightfixed:w=!1,lineTexture:O=!1,iconStep:L=100,iconStepCount:F=1}=this.layer.getLayerConfig(),{animateOption:V}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var re;(re=this.texture)===null||re===void 0||re.bind()}let Ee=0,Te=[0,0,0,0],$e=[0,0,0,0];o&&f&&(Te=(0,Me.CI)(o),$e=(0,Me.CI)(f),Ee=1);const Dt={u_animate:this.animateOption2Array(V),u_sourceColor:Te,u_targetColor:$e,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:L,u_heightfixed:Number(w),u_linearColor:Ee,u_line_texture:O?1:0,u_textureBlend:m==="normal"?0:1,u_iconStepCount:F,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Dt)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"lineWall",vertexShader:jC,fragmentShader:Ec,triangulation:Rx,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O)=>O}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:Y.GC.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m)=>[m[3],m[4],m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:O}=f[m]||{x:0,y:0};return[w,O]}}})}}var kx={arc:ud,arc3d:Rf,greatcircle:UC,wall:VC,line:Fl,simple:Fx,flowline:z1,earthArc3d:Rf};class sy extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","LineLayer"),(0,Jt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Jt.Z)(this,"arrowInsertCount",0),(0,Jt.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new kx[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[o]}getModelType(){var o;if(this.layerType)return this.layerType;const f=this.styleAttributeService.getLayerStyleAttribute("shape");return(f==null||(o=f.scale)===null||o===void 0?void 0:o.field)||"line"}processData(o){if(this.getModelType()!=="simple")return o;const f=[];return o.map(m=>{if(Array.isArray(m.coordinates)&&Array.isArray(m.coordinates[0])&&Array.isArray(m.coordinates[0][0])){const w=(0,Cr.Z)({},m);m.coordinates.map(O=>{f.push((0,Cr.Z)((0,Cr.Z)({},w),{},{coordinates:O}))})}else f.push(m)}),f}}const wS=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,HC=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if (u_heightfixed < 1.0) {
    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
  } else {
    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if (u_linearColor == 1.0) {
    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;class Yl extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"raiseCount",0),(0,Jt.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},sourceColor:f,targetColor:m,pickLight:w=!1,heightfixed:O=!1,opacityLinear:L={enable:!1,dir:"up"},lightEnable:F=!0}=this.layer.getLayerConfig();let V=0,re=[0,0,0,0],Ee=[0,0,0,0];if(f&&m&&(re=(0,Me.CI)(f),Ee=(0,Me.CI)(m),V=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Dt=.01}=o;this.raiseCount+=Dt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Te={u_pickLight:Number(w),u_heightfixed:Number(O),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:V,u_sourceColor:re,u_targetColor:Ee,u_opacitylinear:Number(L.enable),u_opacitylinear_dir:L.dir==="up"?1:0,u_lightEnable:Number(F)};return this.getUniformsBufferInfo(Te)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{depth:f=!0,animateOption:{repeat:m=1}}=o.layer.getLayerConfig();return o.raiseRepeat=m,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:HC,fragmentShader:wS,triangulation:MC,defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Y.gl.FRONT},depth:{enable:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O)=>O}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Y.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:4,update:o=>{const f=(0,Me.SI)(o.coordinates);return[f[0],f[1],(0,Me.Ks)(f[0]),(0,Me.Ks)(f[1])]}}})}}const Ux=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,ly=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class zx extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0,raisingHeight:O=0,heightfixed:L=!1,unit:F="pixel"}=this.layer.getLayerConfig();let V=this.getAnimateUniforms().u_time;isNaN(V)&&(V=-1);const re={u_blur_height_fixed:[w,Number(O),Number(L)],u_stroke_width:f,u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_size_unit:Nx[F],u_time:V,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(re)}getAnimateUniforms(){const{animateOption:o={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ol)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.layer.triangulation=ol,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:ol,depth:{enable:!1}})]})()}getShaders(){return{frag:Ux,vert:ly,type:"pointFill"}}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){const o=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Y.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(f,m,w,O)=>{const L=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],F=O%4*3;return[L[F],L[F+1],L[F+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:f=>{const{size:m=5}=f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Y.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:f=>{const{shape:m=2}=f;return[o.indexOf(m)]}}})}}const Co=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,WC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class AS extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.LINEAR,min:Y.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var o;(o=this.texture)===null||o===void 0||o.bind()}const f=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},f.uniformsOption),m.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1}=this.layer.getLayerConfig(),m={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(o),u_heightfixed:Number(f),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointImage",vertexShader:WC,fragmentShader:Co,triangulation:j5,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},primitive:Y.gl.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:O}=f[m]||{x:-64,y:-64};return[w,O]}}})}}const GC=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,ZC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function CS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class OS extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const o={u_size_scale:.5};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=CS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:ZC,fragmentShader:GC,triangulation:CS,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},primitive:Y.gl.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var jx=D(98333),R_=D(85975);class XC{constructor(o,f,m){(0,Jt.Z)(this,"boxCells",[]),(0,Jt.Z)(this,"xCellCount",void 0),(0,Jt.Z)(this,"yCellCount",void 0),(0,Jt.Z)(this,"boxKeys",void 0),(0,Jt.Z)(this,"bboxes",void 0),(0,Jt.Z)(this,"width",void 0),(0,Jt.Z)(this,"height",void 0),(0,Jt.Z)(this,"xScale",void 0),(0,Jt.Z)(this,"yScale",void 0),(0,Jt.Z)(this,"boxUid",void 0);const w=this.boxCells;this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(f/m);for(let O=0;O<this.xCellCount*this.yCellCount;O++)w.push([]);this.boxKeys=[],this.bboxes=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0}insert(o,f,m,w,O){this.forEachCell(f,m,w,O,this.insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(O)}query(o,f,m,w,O){return this.queryHitTest(o,f,m,w,!1,O)}hitTest(o,f,m,w,O){return this.queryHitTest(o,f,m,w,!0,O)}insertBoxCell(o,f,m,w,O,L){this.boxCells[O].push(L)}queryHitTest(o,f,m,w,O,L){if(m<0||o>this.width||w<0||f>this.height)return O?!1:[];const F=[];if(o<=0&&f<=0&&this.width<=m&&this.height<=w){if(O)return!0;for(let re=0;re<this.boxKeys.length;re++)F.push({key:this.boxKeys[re],x1:this.bboxes[re*4],y1:this.bboxes[re*4+1],x2:this.bboxes[re*4+2],y2:this.bboxes[re*4+3]});return L?F.filter(L):F}const V={hitTest:O,seenUids:{box:{},circle:{}}};return this.forEachCell(o,f,m,w,this.queryCell,F,V,L),O?F.length>0:F}queryCell(o,f,m,w,O,L,F,V){const re=F.seenUids,Ee=this.boxCells[O];if(Ee!==null){const Te=this.bboxes;for(const $e of Ee)if(!re.box[$e]){re.box[$e]=!0;const Dt=$e*4;if(o<=Te[Dt+2]&&f<=Te[Dt+3]&&m>=Te[Dt+0]&&w>=Te[Dt+1]&&(!V||V(this.boxKeys[$e]))){if(F.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[$e],x1:Te[Dt],y1:Te[Dt+1],x2:Te[Dt+2],y2:Te[Dt+3]})}}}return!1}forEachCell(o,f,m,w,O,L,F,V){const re=this.convertToXCellCoord(o),Ee=this.convertToYCellCoord(f),Te=this.convertToXCellCoord(m),$e=this.convertToYCellCoord(w);for(let Dt=re;Dt<=Te;Dt++)for(let nn=Ee;nn<=$e;nn++){const Tn=this.xCellCount*nn+Dt;if(O.call(this,o,f,m,w,Tn,L,F,V))return}}convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}}var $C=XC;class YC{constructor(o,f){(0,Jt.Z)(this,"width",void 0),(0,Jt.Z)(this,"height",void 0),(0,Jt.Z)(this,"grid",void 0),(0,Jt.Z)(this,"viewportPadding",100),(0,Jt.Z)(this,"screenRightBoundary",void 0),(0,Jt.Z)(this,"screenBottomBoundary",void 0),(0,Jt.Z)(this,"gridRightBoundary",void 0),(0,Jt.Z)(this,"gridBottomBoundary",void 0),this.width=o,this.height=f,this.viewportPadding=Math.max(o,f),this.grid=new $C(o+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=o+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=o+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}placeCollisionBox(o){const f=o.x1+o.anchorPointX+this.viewportPadding,m=o.y1+o.anchorPointY+this.viewportPadding,w=o.x2+o.anchorPointX+this.viewportPadding,O=o.y2+o.anchorPointY+this.viewportPadding;return!this.isInsideGrid(f,m,w,O)||this.grid.hitTest(f,m,w,O)?{box:[]}:{box:[f,m,w,O]}}insertCollisionBox(o,f){const m={featureIndex:f};this.grid.insert(m,o[0],o[1],o[2],o[3])}project(o,f,m){const w=jx.al(f,m,0,1),O=jx.Ue(),L=R_.fromValues(...o);return jx.fF(O,w,L),{x:(O[0]/O[3]+1)/2*this.width+this.viewportPadding,y:(-O[1]/O[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(o,f,m,w){return m>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}}function RS(a){let o=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break;default:o=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:o,verticalAlign:f}}function MS(a,o,f,m,w){if(!w)return;const O=a[m],L=O.glyph;if(L){const F=o[L].advance*O.scale,V=(a[m].x+F)*w;for(let re=f;re<=m;re++)a[re].x-=V}}function PS(a,o,f,m,w,O,L){const F=(o-f)*w,V=(-m*L+.5)*O;for(const re of a)re.x+=F,re.y+=V}function KC(a,o,f,m,w,O,L){let V=0,re=-8,Ee=0;const Te=a.positionedGlyphs,$e=O==="right"?1:O==="left"?0:.5,Dt=Te.length;f.forEach(Br=>{if(Br.split("").forEach(Er=>{const ui=o[Er];ui&&(Te.push({glyph:Er,x:V,y:re+0,vertical:!1,scale:1,metrics:ui}),V+=ui.advance+L)}),Te.length!==Dt){const Er=V-L;Ee=Math.max(Er,Ee),MS(Te,o,Dt,Te.length-1,$e)}V=0,re-=m+5});const{horizontalAlign:nn,verticalAlign:Tn}=RS(w);PS(Te,$e,nn,Tn,Ee,m,f.length);const sr=re- -8;a.top+=-Tn*sr,a.bottom=a.top-sr,a.left+=-nn*Ee,a.right=a.left+Ee}function X5(a,o,f,m,w,O,L){let V=0,re=-8,Ee=0;const Te=a.positionedGlyphs,$e=O==="right"?1:O==="left"?0:.5,Dt=Te.length;f.forEach(Br=>{const Er=o[Br];if(Er&&(Te.push({glyph:Br,x:Er.advance/2,y:re+0,vertical:!1,scale:1,metrics:Er}),V+=Er.advance+L),Te.length!==Dt){const Vi=V-L;Ee=Math.max(Vi,Ee),MS(Te,o,Dt,Te.length-1,$e)}V=0,re-=m+5});const{horizontalAlign:nn,verticalAlign:Tn}=RS(w);PS(Te,$e,nn,Tn,Ee,m,f.length);const sr=re- -8;a.top+=-Tn*sr,a.bottom=a.top-sr,a.left+=-nn*Ee,a.right=a.left+Ee}function M_(a,o,f,m,w,O,L=[0,0],F){const V=a.split(`
`),re=[],Ee={positionedGlyphs:re,top:L[1],bottom:L[1],left:L[0],right:L[0],lineCount:V.length,text:a};return F?X5(Ee,o,V,f,m,w,O):KC(Ee,o,V,f,m,w,O),re.length?Ee:!1}function j1(a,o=[0,0],f){const{positionedGlyphs:m=[]}=a,w=[];for(const O of m){const L=O.metrics,F=4,V=L.advance*O.scale/2,re=f?[O.x+V,O.y]:[0,0],Ee=f?[0,0]:[O.x+V+o[0],O.y+o[1]],Te=(0-F)*O.scale-V+Ee[0],$e=(0-F)*O.scale+Ee[1],Dt=Te+L.width*O.scale,nn=$e+L.height*O.scale,Tn={x:Te,y:$e},sr={x:Dt,y:$e},Br={x:Te,y:nn},Er={x:Dt,y:nn};w.push({tl:Tn,tr:sr,bl:Br,br:Er,tex:L,glyphOffset:re})}return w}const Z0=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,IS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:wv}=Me.lodashUtil;function Vx(a){const o=this,f=a.id,m=[],w=[];if(!o.glyphInfoMap||!o.glyphInfoMap[f])return{vertices:[],indices:[],size:7};const O=o.glyphInfoMap[f].centroid,L=O.length===2?[O[0],O[1],0]:O;return o.glyphInfoMap[f].glyphQuads.forEach((F,V)=>{m.push(...L,F.tex.x,F.tex.y+F.tex.height,F.tl.x,F.tl.y,...L,F.tex.x+F.tex.width,F.tex.y+F.tex.height,F.tr.x,F.tr.y,...L,F.tex.x+F.tex.width,F.tex.y,F.br.x,F.br.y,...L,F.tex.x,F.tex.y,F.bl.x,F.bl.y),w.push(0+V*4,1+V*4,2+V*4,2+V*4,3+V*4,0+V*4)}),{vertices:m,indices:w,size:7}}class LS extends Al{constructor(...o){var f;super(...o),f=this,(0,Jt.Z)(this,"glyphInfo",void 0),(0,Jt.Z)(this,"glyphInfoMap",{}),(0,Jt.Z)(this,"rawEncodeData",void 0),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"currentZoom",-1),(0,Jt.Z)(this,"extent",void 0),(0,Jt.Z)(this,"textureHeight",0),(0,Jt.Z)(this,"textCount",0),(0,Jt.Z)(this,"preTextStyle",{}),(0,Jt.Z)(this,"mapping",(0,Ai.Z)(function*(){f.initGlyph(),f.updateTexture(),yield f.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:o="#fff",strokeWidth:f=0,halo:m=.5,gamma:w=2,raisingHeight:O=0}=this.layer.getLayerConfig(),L=this.getFontServiceMapping(),F=this.getFontServiceCanvas();L&&Object.keys(L).length!==this.textCount&&F&&(this.updateTexture(),this.textCount=Object.keys(L).length),this.preTextStyle=this.getTextStyle();const V={u_stroke_color:(0,Me.CI)(o),u_sdf_map_size:[(F==null?void 0:F.width)||1,(F==null?void 0:F.height)||1],u_raisingHeight:Number(O),u_stroke_width:f,u_gamma_scale:w,u_halo_blur:m};return this.getUniformsBufferInfo(V)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.bindEvent(),o.extent=o.textExtent(),o.rawEncodeData=o.layer.getEncodedData(),o.preTextStyle=o.getTextStyle(),o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{textAllowOverlap:f=!1}=o.layer.getLayerConfig();return o.initGlyph(),o.updateTexture(),f||o.filterGlyphs(),[yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:IS,fragmentShader:Z0,defines:o.getDefines(),inject:o.getInject(),triangulation:Vx.bind(o),depth:{enable:!1}})]})()}needUpdate(){var o=this;return(0,Ai.Z)(function*(){const{textAllowOverlap:f=!1,textAnchor:m="center",textOffset:w,padding:O,fontFamily:L,fontWeight:F}=o.getTextStyle();if(!wv(O,o.preTextStyle.padding)||!wv(w,o.preTextStyle.textOffset)||!wv(m,o.preTextStyle.textAnchor)||!wv(L,o.preTextStyle.fontFamily)||!wv(F,o.preTextStyle.fontWeight))return yield o.mapping(),!0;if(f)return!1;const V=o.mapService.getZoom(),re=o.mapService.getBounds(),Ee=(0,Me.oO)(o.extent,re);return Math.abs(o.currentZoom-V)>.5||!Ee||f!==o.preTextStyle.textAllowOverlap?(yield o.reBuildModel(),!0):!1})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Y.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Y.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=12}=o;return Array.isArray(f)?[f[0]]:[f]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const o=this.mapService.getBounds();return(0,Me.yA)(o,.5)}initTextFont(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(O=>{let{shape:L=""}=O;L=L.toString();for(const F of L)w.indexOf(F)===-1&&w.push(F)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!1})}initIconFontTex(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(O=>{let{shape:L=""}=O;L=`${L}`,w.indexOf(L)===-1&&w.push(L)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!0})}getTextStyle(){const{fontWeight:o="400",fontFamily:f="sans-serif",textAllowOverlap:m=!1,padding:w=[0,0],textAnchor:O="center",textOffset:L=[0,0],opacity:F=1,strokeOpacity:V=1,strokeWidth:re=0,stroke:Ee="#000"}=this.layer.getLayerConfig();return{fontWeight:o,fontFamily:f,textAllowOverlap:m,padding:w,textAnchor:O,textOffset:L,opacity:F,strokeOpacity:V,strokeWidth:re,stroke:Ee}}generateGlyphLayout(o){const f=this.getFontServiceMapping(),{spacing:m=2,textAnchor:w="center",textOffset:O}=this.layer.getLayerConfig(),L=this.rawEncodeData;this.glyphInfo=L.map(F=>{const{shape:V="",id:re,size:Ee=1}=F,Te=F.textOffset?F.textOffset:O||[0,0],$e=F.textAnchor?F.textAnchor:w||"center",Dt=M_(V.toString(),f,Ee,$e,"left",m,Te,o),nn=j1(Dt,Te,!1);return F.shaping=Dt,F.glyphQuads=nn,F.centroid=(0,Me.SI)(F.coordinates),this.glyphInfoMap[re]={shaping:Dt,glyphQuads:nn,centroid:(0,Me.SI)(F.coordinates)},F})}getFontServiceMapping(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${f}_${o}`)}getFontServiceCanvas(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${f}_${o}`)}filterGlyphs(){const{padding:o=[0,0],textAllowOverlap:f=!1}=this.layer.getLayerConfig();if(f)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:m,height:w}=this.rendererService.getViewportSize(),O=new YC(m,w);this.glyphInfo.filter(F=>{const{shaping:V,id:re=0}=F,Ee=F.centroid,$e=F.size/16,Dt=this.mapService.lngLatToContainer(Ee),{box:nn}=O.placeCollisionBox({x1:V.left*$e-o[0],x2:V.right*$e+o[0],y1:V.top*$e-o[1],y2:V.bottom*$e+o[1],anchorPointX:Dt.x,anchorPointY:Dt.y});return nn&&nn.length?(O.insertCollisionBox(nn,re),!0):!1}).forEach(F=>{this.glyphInfoMap[F.id]=F})}initGlyph(){const{iconfont:o=!1}=this.layer.getLayerConfig();o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}updateTexture(){const{createTexture2D:o}=this.rendererService,f=this.getFontServiceCanvas();this.textureHeight=f.height,this.texture&&this.texture.destroy(),this.texture=o({data:f,mag:Y.gl.LINEAR,min:Y.gl.LINEAR,width:f.width,height:f.height}),this.textures=[this.texture]}reBuildModel(){var o=this;return(0,Ai.Z)(function*(){o.filterGlyphs();const f=yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:IS,fragmentShader:Z0,triangulation:Vx.bind(o),defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}});o.layer.models=[f]})()}}function qC(a){return vg.apply(this,arguments)}function vg(){return vg=(0,Ai.Z)(function*(a){if(window.createImageBitmap){const o=yield fetch(a);return yield createImageBitmap(yield o.blob())}else{const o=new window.Image;return new Promise(f=>{o.onload=()=>f(o),o.src=a,o.crossOrigin="Anonymous"})}}),vg.apply(this,arguments)}const cy=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,Hx=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,DS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,QC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,hd=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,NS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class BS extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:o,heightfixed:f=!1,raisingHeight:m=0,topsurface:w=!0,sidesurface:O=!0,sourceColor:L,targetColor:F}=this.layer.getLayerConfig();let V=0,re=[1,1,1,1],Ee=[1,1,1,1];L&&F&&(re=(0,Me.CI)(L),Ee=(0,Me.CI)(F),V=1);const Te={u_sourceColor:re,u_targetColor:Ee,u_linearColor:V,u_topsurface:Number(w),u_sidesurface:Number(O),u_heightfixed:Number(f),u_raisingHeight:Number(m)};return o&&this.texture&&(Te.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Te)}initModels(){var o=this;return(0,Ai.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,depth:{enable:!0},defines:o.getDefines(),inject:o.getInject(),triangulation:Mx})]})()}getShaders(){const{pickLight:o,mapTexture:f}=this.layer.getLayerConfig();return f?{frag:hd,vert:NS,type:"polygonExtrudeTexture"}:o?{frag:Hx,vert:DS,type:"polygonExtrudePickLight"}:{frag:cy,vert:QC,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.textures=[]}registerBuiltinAttributes(){const o=this.layer.getSource().extent,f=o[2]-o[0],m=o[3]-o[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Y.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(w,O,L)=>{const F=L[0],V=L[1];return[(F-o[0])/f,(V-o[1])/m,L[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(w,O,L,F,V)=>V}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:w=>{const{size:O=10}=w;return Array.isArray(O)?[O[0]]:[O]}}})}loadTexture(){var o=this;return(0,Ai.Z)(function*(){const{mapTexture:f}=o.layer.getLayerConfig(),{createTexture2D:m}=o.rendererService;if(o.texture=m({height:1,width:1}),f){const w=yield qC(f);o.texture=m({data:w,width:w.width,height:w.height,wrapS:Y.gl.CLAMP_TO_EDGE,wrapT:Y.gl.CLAMP_TO_EDGE,min:Y.gl.LINEAR,mag:Y.gl.LINEAR})}})()}}const qd=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,JC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class eO extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const o={};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:Mx,depth:{enable:!0}})]})()}getShaders(){return{frag:qd,vert:JC,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O)=>O}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=10}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:Y.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{extrusionBase:f=0}=o;return[f]}}})}}const FS=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,kS=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,uy=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,mg=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class Wx extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,opacityLinear:f={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),m={u_raisingHeight:Number(o),u_opacitylinear:Number(f.enable),u_dir:f.dir==="in"?1:0};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,triangulation:w,type:O}=o.getModelParams();return o.initUniformsBuffer(),o.layer.triangulation=w,[yield o.layer.buildLayerModel({moduleName:O,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:w,primitive:Y.gl.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:o={enable:!1,dir:"in"}}=this.layer.getLayerConfig();o.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Y.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(f,m,w)=>[w[3],w[4],w[5]]}})}getModelParams(){const{opacityLinear:o={enable:!1}}=this.layer.getLayerConfig();return o.enable?{frag:kS,vert:uy,type:"polygonLinear",triangulation:T_}:{frag:FS,vert:mg,type:"polygonFill",triangulation:Uh}}}const Gx=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,US=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Zx extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture1",void 0),(0,Jt.Z)(this,"texture2",void 0),(0,Jt.Z)(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{watercolor:o="#6D99A8",watercolor2:f="#0F121C"}=this.layer.getLayerConfig(),m={u_watercolor:(0,Me.CI)(o),u_watercolor2:(0,Me.CI)(f),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(m)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:US,fragmentShader:Gx,defines:o.getDefines(),inject:o.getInject(),triangulation:Uh,primitive:Y.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o,f,m;(o=this.texture1)===null||o===void 0||o.destroy(),(f=this.texture2)===null||f===void 0||f.destroy(),(m=this.texture3)===null||m===void 0||m.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,O]=o,L=w-f,F=O-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Y.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(V,re,Ee)=>{const[Te,$e]=Ee;return[(Te-f)/L,($e-m)/F]}}})}loadTexture(){const{createTexture2D:o}=this.rendererService,f={height:0,width:0};this.texture1=o(f),this.texture2=o(f),this.texture3=o(f),m(O=>{this.texture1=w(O[0]),this.texture2=w(O[1]),this.texture3=w(O[2]),this.layerService.reRender()});function m(O){let L=0;const F=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(re=>{const Ee=new Image;Ee.crossOrigin="",Ee.src=re,F.push(Ee),Ee.onload=()=>{L++,L===3&&O(F)}})}function w(O){return o({data:O,width:O.width,height:O.height,wrapS:Y.gl.MIRRORED_REPEAT,wrapT:Y.gl.MIRRORED_REPEAT,min:Y.gl.LINEAR,mag:Y.gl.LINEAR})}}}const tO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,nO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class rO extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{speed:o=.5}=this.layer.getLayerConfig(),f={u_speed:o,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:nO,fragmentShader:tO,triangulation:Uh,defines:o.getDefines(),inject:o.getInject(),primitive:Y.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,O]=o,L=w-f,F=O-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Y.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(V,re,Ee)=>{const[Te,$e]=Ee;return[(Te-f)/L,($e-m)/F]}}})}loadTexture(){const{waterTexture:o}=this.layer.getLayerConfig(),{createTexture2D:f}=this.rendererService;this.texture=f({height:1,width:1});const m=new Image;m.crossOrigin="",o?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),m.src=o):m.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",m.onload=()=>{this.texture=f({data:m,width:m.width,height:m.height,wrapS:Y.gl.MIRRORED_REPEAT,wrapT:Y.gl.MIRRORED_REPEAT,min:Y.gl.LINEAR,mag:Y.gl.LINEAR}),this.layerService.reRender()}}}var V1={fill:Wx,line:Fl,extrude:BS,text:LS,point_fill:zx,point_image:AS,point_normal:OS,point_extrude:Yl,water:rO,ocean:Zx,extrusion:eO};class Xx extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","PolygonLayer"),(0,Jt.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new V1[f](o),yield o.initLayerModels()})()}getModelType(){var o;const f=this.styleAttributeService.getLayerStyleAttribute("shape"),m=f==null||(o=f.scale)===null||o===void 0?void 0:o.field;return m==="fill"||!m?"fill":m==="extrude"?"extrude":m==="extrusion"?"extrusion":m==="water"?"water":m==="ocean"?"ocean":m==="line"?"line":this.getPointModelType()}getPointModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m}=this.getLayerConfig(),w=this.iconService.getIconMap(),O=o.find(L=>L.hasOwnProperty("shape"));if(O){const L=O.shape;return L==="dot"?"point_normal":(f==null?void 0:f.indexOf(L))!==-1?"point_fill":(m==null?void 0:m.indexOf(L))!==-1?"point_extrude":w.hasOwnProperty(L)?"point_image":"text"}else return"fill"}}class H1{constructor({rendererService:o,layerService:f,parent:m}){(0,Jt.Z)(this,"tileResource",new Map),(0,Jt.Z)(this,"rendererService",void 0),(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"parent",void 0),(0,Jt.Z)(this,"layerTiles",[]),this.rendererService=o,this.layerService=f,this.parent=m}get tiles(){return this.layerTiles}hasTile(o){return this.layerTiles.some(f=>f.key===o)}addTile(o){this.layerTiles.push(o)}getTile(o){return this.layerTiles.find(f=>f.key===o)}getVisibleTileBylngLat(o){return this.layerTiles.find(f=>f.isLoaded&&f.visible&&f.lnglatInBounds(o))}removeTile(o){const f=this.layerTiles.findIndex(w=>w.key===o),m=this.layerTiles.splice(f,1);m[0]&&m[0].destroy()}updateTileVisible(o){const f=this.getTile(o.key);if(o.isVisible)if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(m)}else f==null||f.updateVisible(!0);else if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(!m)}else f==null||f.updateVisible(!1)}isParentLoaded(o){const f=o.parent;if(!f)return!0;const m=this.getTile(f==null?void 0:f.key);return!!(m!=null&&m.isLoaded)}isChildrenLoaded(o){const f=o==null?void 0:o.children;return f.length===0?!0:f.every(m=>{const w=this.getTile(m==null?void 0:m.key);return w?(w==null?void 0:w.isLoaded)===!0:!0})}render(){var o=this;return(0,Ai.Z)(function*(){const m=o.getRenderLayers().map(function(){var w=(0,Ai.Z)(function*(O){yield o.layerService.renderTileLayer(O)});return function(O){return w.apply(this,arguments)}}());yield Promise.all(m)})()}getRenderLayers(){const o=this.layerTiles.filter(m=>m.visible&&m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getLayers(){const o=this.layerTiles.filter(m=>m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(o=>o.destroy()),this.tileResource.clear()}}var zS=D(32676);function jS(a,o,f){f===void 0&&(f={});var m=Ze(a),w=Ze(o),O=zS.union(m.coordinates,w.coordinates);return O.length===0?null:O.length===1?(0,Et.yu)(O[0],f.properties):(0,Et.tw)(O,f.properties)}var VS=jS;class iO{getCombineFeature(o){let f=null;const m=o[0];return o.map(w=>{const O=Et.yu(w.coordinates);f===null?f=O:f=VS(f,O)}),m&&(f.properties=(0,Cr.Z)({},m)),f}}const fy="select",mm="active";class $x{constructor({layerService:o,tileLayerService:f,parent:m}){(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"tileLayerService",void 0),(0,Jt.Z)(this,"tileSourceService",void 0),(0,Jt.Z)(this,"parent",void 0),(0,Jt.Z)(this,"tilePickID",new Map),this.layerService=o,this.tileLayerService=f,this.parent=m,this.tileSourceService=new iO}pickRender(o){const f=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(f){const m=f.getMainLayer();m==null||m.layerPickService.pickRender(o)}}pick(o,f){var m=this;return(0,Ai.Z)(function*(){const O=m.parent.getContainer().pickingService;if(o.type==="RasterLayer"){const L=m.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(L&&L.getMainLayer()!==void 0){const F=L.getMainLayer();return F.layerPickService.pickRasterLayer(F,f,m.parent)}return!1}return m.pickRender(f),O.pickFromPickingFBO(o,f)})()}selectFeature(o){const[f,m,w]=o,O=this.color2PickId(f,m,w);this.tilePickID.set(fy,O),this.updateHighLight(f,m,w,fy)}highlightPickedFeature(o){const[f,m,w]=o,O=this.color2PickId(f,m,w);this.tilePickID.set(mm,O),this.updateHighLight(f,m,w,mm)}updateHighLight(o,f,m,w){this.tileLayerService.tiles.map(O=>{const L=O.getMainLayer();switch(w){case fy:L==null||L.hooks.beforeSelect.call([o,f,m]);break;case mm:L==null||L.hooks.beforeHighlight.call([o,f,m]);break}})}setPickState(){const o=this.tilePickID.get(fy),f=this.tilePickID.get(mm);if(o){const[m,w,O]=this.pickId2Color(o);this.updateHighLight(m,w,O,fy);return}if(f){const[m,w,O]=this.pickId2Color(f);this.updateHighLight(m,w,O,mm);return}}color2PickId(o,f,m){return(0,Me.W0)(new Uint8Array([o,f,m]))}pickId2Color(o){return(0,Me.Z6)(o)}getFeatureById(o){const f=this.tileLayerService.getTiles().filter(w=>w.visible),m=[];return f.forEach(w=>{m.push(...w.getFeatureById(o))}),m}pickRasterLayer(){return!1}}const HS=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,oO=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function WS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class aO extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:o,strokeOpacity:f=1,strokeWidth:m=0,stroke:w="#fff"}=this.layer.getLayerConfig(),O={u_stroke_color:(0,Me.CI)(w),u_additive:o==="additive"?1:0,u_stroke_opacity:f,u_stroke_width:m};return this.getUniformsBufferInfo(O)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=WS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:oO,fragmentShader:HS,defines:o.getDefines(),inject:o.getInject(),triangulation:WS,depth:{enable:!1},primitive:Y.gl.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const GS=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,sO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    //
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:lO}=Me.lodashUtil;class ZS extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"raiseCount",0),(0,Jt.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},opacity:f=1,sourceColor:m,targetColor:w,pickLight:O=!1,heightfixed:L=!0,opacityLinear:F={enable:!1,dir:"up"},lightEnable:V=!0}=this.layer.getLayerConfig();let re=0,Ee=[0,0,0,0],Te=[0,0,0,0];if(m&&w&&(Ee=(0,Me.CI)(m),Te=(0,Me.CI)(w),re=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:nn=.01}=o;this.raiseCount+=nn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const $e={u_sourceColor:Ee,u_targetColor:Te,u_linearColor:re,u_pickLight:Number(O),u_heightfixed:Number(L),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:lO(f)?f:1,u_opacitylinear:Number(F.enable),u_opacitylinear_dir:F.dir==="up"?1:0,u_lightEnable:Number(V)};return this.getUniformsBufferInfo($e)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{animateOption:{repeat:f=1}}=o.layer.getLayerConfig();return o.raiseRepeat=f,[yield o.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:sO,fragmentShader:GS,triangulation:MC,depth:{enable:!0},defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Y.gl.FRONT},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Y.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Y.gl.STATIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w,O)=>O}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Y.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:o=>{const f=(0,Me.SI)(o.coordinates);return c0([f[0],f[1]])}}})}}const Y5=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,XS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;class cO extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const O={u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_stroke_width:f,u_blur:w};return this.getUniformsBufferInfo(O)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=Kd,[yield o.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:XS,fragmentShader:Y5,triangulation:Kd,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!0},blend:o.getBlend()})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Y.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w)=>{const[O,L,F]=m,V=Bl.al(0,0,1),re=Bl.al(O,0,F),Ee=O>=0?Bl.EU(V,re):Math.PI*2-Bl.EU(V,re),Te=Math.PI*2-Math.asin(L/100),$e=R_.create();R_.rotateY($e,$e,Ee),R_.rotateX($e,$e,Te);const Dt=Bl.al(1,1,0);Bl.fF(Dt,Dt,$e),Bl.Fv(Dt,Dt);const nn=Bl.al(-1,1,0);Bl.fF(nn,nn,$e),Bl.Fv(nn,nn);const Tn=Bl.al(-1,-1,0);Bl.fF(Tn,Tn,$e),Bl.Fv(Tn,Tn);const sr=Bl.al(1,-1,0);Bl.fF(sr,sr,$e),Bl.Fv(sr,sr);const Br=[...Dt,...nn,...Tn,...sr],Er=w%4*3;return[Br[Er],Br[Er+1],Br[Er+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Y.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{shape:f=2}=o;return[this.layer.getLayerConfig().shape2d.indexOf(f)]}}})}}const Yx=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,uO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class $S extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"meter2coord",1),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"isMeter",!1),(0,Jt.Z)(this,"radian",0),(0,Jt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=f({data:this.iconService.getCanvas(),mag:Y.gl.LINEAR,min:Y.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1,unit:m="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var w;(w=this.texture)===null||w===void 0||w.bind()}const O={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(f),u_raisingHeight:Number(o),u_size_unit:Nx[m]};return this.getUniformsBufferInfo(O)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ol)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:uO,fragmentShader:Yx,triangulation:ol,depth:{enable:!1},defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Y.gl.FRONT}})]})()}clearModels(){var o;this.iconService.off("imageUpdate",this.updateTexture),(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:O}=f[m]||{x:-64,y:-64};return[w,O]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Y.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w)=>{const O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=w%4*3;return[O[L],O[L+1],O[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const fO=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,su=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class dd extends Al{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:o,speed:f=1,unit:m="pixel"}=this.layer.getLayerConfig(),w={u_additive:o==="additive"?1:0,u_size_unit:Nx[m],u_speed:f,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(w)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ol)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:su,fragmentShader:fO,triangulation:ol,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Y.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:3,update:(o,f,m,w)=>{const O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=w%4*3;return[O[L],O[L+1],O[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Y.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var W1={fillImage:$S,fill:zx,radar:dd,image:AS,normal:OS,simplePoint:aO,extrude:Yl,text:LS,earthFill:cO,earthExtrude:ZS};class P_ extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","PointLayer"),(0,Jt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Jt.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Jt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel&&o.layerModel.clearModels(),o.layerModel=new W1[f](o),yield o.initLayerModels()})()}rebuildModels(){var o=this;return(0,Ai.Z)(function*(){yield o.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:o,values:f}=this.shapeOption,{shape2d:m}=this.getLayerConfig(),w=this.iconService.getIconMap();if(o&&(m==null?void 0:m.indexOf(o))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){for(const O of f)if(typeof O=="string"&&w.hasOwnProperty(O))return"image"}}return"normal"}getDefaultConfig(){const o=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[o]}getModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m,billboard:w=!0}=this.getLayerConfig(),O=this.iconService.getIconMap(),L=o.find(F=>F.hasOwnProperty("shape"));if(L){const F=L.shape;return F==="dot"?"normal":F==="simple"?"simplePoint":F==="radar"?"radar":this.layerType==="fillImage"||w===!1?"fillImage":(f==null?void 0:f.indexOf(F))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(F))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":O.hasOwnProperty(F)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function YS(a){return a==="PolygonLayer"?Xx:a==="LineLayer"?sy:P_}function hO(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class gg extends Vc.EventEmitter{constructor(o,f){super(),(0,Jt.Z)(this,"x",void 0),(0,Jt.Z)(this,"y",void 0),(0,Jt.Z)(this,"z",void 0),(0,Jt.Z)(this,"key",void 0),(0,Jt.Z)(this,"parent",void 0),(0,Jt.Z)(this,"sourceTile",void 0),(0,Jt.Z)(this,"visible",!0),(0,Jt.Z)(this,"layers",[]),(0,Jt.Z)(this,"isLoaded",!1),(0,Jt.Z)(this,"tileMaskLayers",[]),(0,Jt.Z)(this,"tileMask",void 0),this.parent=f,this.sourceTile=o,this.x=o.x,this.y=o.y,this.z=o.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...o){}lnglatInBounds(o){const[f,m,w,O]=this.sourceTile.bounds,{lng:L,lat:F}=o;return L>=f&&L<=w&&F>=m&&F<=O}getLayerOptions(){var o;const f=this.parent.getLayerConfig();return(0,Cr.Z)((0,Cr.Z)({},f),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:hO(this.parent.type),mask:f.mask||((o=f.maskLayers)===null||o===void 0?void 0:o.length)!==0&&f.enableMask})}getMaskLayer(){const{maskLayers:o}=this.parent.getLayerConfig(),f=[];return o==null||o.forEach(m=>{if(!m.tileLayer)return f.push(m),m;const O=m.tileLayer.getTile(this.sourceTile.key),L=O==null?void 0:O.getLayers()[0];L&&f.push(L)}),f}addTileMask(){var o=this;return(0,Ai.Z)(function*(){const f=new Xx({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[o.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),m=(0,Y.e7)(o.parent.container);f.setContainer(m),yield f.init(),o.tileMask=f;const w=o.getMainLayer();return w!==void 0&&(w.tileMask=f),f})()}addMask(o,f){var m=this;return(0,Ai.Z)(function*(){const w=(0,Y.e7)(m.parent.container);f.setContainer(w),yield f.init(),o.addMask(f),m.tileMaskLayers.push(f)})()}addLayer(o){var f=this;return(0,Ai.Z)(function*(){o.isTileLayer=!0;const m=(0,Y.e7)(f.parent.container);o.setContainer(m),f.layers.push(o),yield o.init()})()}updateVisible(o){this.visible=o,this.updateOptions("visible",o)}updateOptions(o,f){this.layers.forEach(m=>{m.updateLayerConfig({[o]:f})})}getMainLayer(){return this.layers[0]}getFeatures(o){return[]}getFeatureById(o){return[]}destroy(){var o;(o=this.tileMask)===null||o===void 0||o.destroy(),this.layers.forEach(f=>f.destroy())}}class dO extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.getSourceOption(),m=f.data.features[0].properties,w=new sy().source(f.data,f.options).size(1).shape("line").color("red"),O=new P_({minZoom:o.z-1,maxZoom:o.z+1,textAllowOverlap:!0}).source([m],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(o.key).style({stroke:"#fff",strokeWidth:2});yield o.addLayer(w),yield o.addLayer(O),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:o.transforms}}}}const KS=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,pO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class vO extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:o,brightness:f,contrast:m,saturation:w,gamma:O}=this.layer.getLayerConfig(),L={u_opacity:(0,Me.LS)(o,1),u_brightness:(0,Me.LS)(f,1),u_contrast:(0,Me.LS)(m,1),u_saturation:(0,Me.LS)(w,1),u_gamma:(0,Me.LS)(O,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(L)}initModels(){var o=this;return(0,Ai.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}loadTexture(){var o=this;return(0,Ai.Z)(function*(){const{createTexture2D:f}=o.rendererService,w=yield o.layer.getSource().data.images;o.texture=f({data:w[0],width:w[0].width,height:w[0].height,mag:Y.gl.LINEAR,min:Y.gl.LINEAR})})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:pO,fragmentShader:KS,defines:o.getDefines(),triangulation:U1,primitive:Y.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var mO={image:vO};class gO extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","ImageLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new mO[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{image:{}}[o]}getModelType(){return"image"}}class Kx extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),O=new gO((0,Cr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(L=>{var F,V;const re=L;O[re]((F=f[re])===null||F===void 0?void 0:F.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(O),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const qx=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,yO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class _O extends Al{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,color:f="#000"}=this.layer.getLayerConfig(),m={u_color:(0,Me.CI)(f),u_opacity:o||1};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"mask",vertexShader:yO,fragmentShader:qx,defines:o.getDefines(),triangulation:Uh,depth:{enable:!1},pick:!1})]})()}clearModels(o=!0){o&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var xO={fill:_O};class I_ extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","MaskLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new xO[f](o),yield o.initLayerModels()})()}getModelType(){return"fill"}}class Qx extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),O=new I_((0,Cr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(L=>{var F,V;const re=L;O[re]((F=f[re])===null||F===void 0?void 0:F.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(O),o.isLoaded=!0})()}getFeatures(o){return o?this.sourceTile.data.getTileData(o):[]}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f,featureId:m}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}}function QS(a,o){return{type:a.type,field:"value",items:a.positions.map((f,m)=>({[o]:m>=a.colors.length?null:a.colors[m],value:f}))}}const gm=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,dy=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class JS extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:O,rampColors:L}=this.layer.getLayerConfig(),F=O||(0,Me.ZB)(L);this.colorTexture=this.layer.textureService.getColorTexture(L,F);const V={u_domain:F,u_opacity:o||1,u_noDataValue:w,u_clampLow:f?1:0,u_clampHigh:(typeof m!="undefined"?m:f)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(V)}getRasterData(o){return(0,Ai.Z)(function*(){if(Array.isArray(o.data))return{data:o.data,width:o.width,height:o.height};{const{rasterData:f,width:m,height:w}=yield o.data;return{data:Array.from(f),width:m,height:w}}})()}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m,queryVerdorInfo:w}=o.rendererService,O=f.data.dataArray[0],{data:L,width:F,height:V}=yield o.getRasterData(O);return o.texture=m({data:new Float32Array(L),width:F,height:V,format:w()==="WebGL1"?Y.gl.LUMINANCE:Y.gl.RED,type:Y.gl.FLOAT,alignment:1}),[yield o.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:dy,fragmentShader:gm,defines:o.getDefines(),triangulation:U1,primitive:Y.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var o,f;(o=this.texture)===null||o===void 0||o.destroy(),(f=this.colorTexture)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const EO=["data"],SO=["rasterData"],TO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,wO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class AO extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0),(0,Jt.Z)(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Cr.Z)((0,Cr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,noDataValue:f=0}=this.layer.getLayerConfig(),{rMinMax:m=[0,255],gMinMax:w=[0,255],bMinMax:O=[0,255]}=this.dataOption,L={u_rminmax:m,u_gminmax:w,u_bminmax:O,u_opacity:o||1,u_noDataValue:f,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(L)}getRasterData(o){var f=this;return(0,Ai.Z)(function*(){if(Array.isArray(o.data)){const{data:L}=o,F=(0,Il.Z)(o,EO);return f.dataOption=F,(0,Cr.Z)({data:L},F)}const m=yield o.data,{rasterData:w}=m,O=(0,Il.Z)(m,SO);return f.dataOption=O,Array.isArray(w)?(0,Cr.Z)({data:w},O):(0,Cr.Z)({data:Array.from(w)},O)})()}initModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=f.data.dataArray[0],{data:O,width:L,height:F}=yield o.getRasterData(w);return o.texture=m({data:new Float32Array(O),width:L,height:F,format:Y.gl.RGB,type:Y.gl.FLOAT}),[yield o.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:wO,fragmentShader:TO,defines:o.getDefines(),triangulation:U1,primitive:Y.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const eT=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,Jx=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class CO extends Al{constructor(...o){super(...o),(0,Jt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:o,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:O,rampColors:L,colorTexture:F,rScaler:V=6553.6,gScaler:re=25.6,bScaler:Ee=.1,offset:Te=1e4}=this.layer.getLayerConfig(),$e=O||(0,Me.ZB)(L);let Dt=F;F?this.layer.textureService.setColorTexture(F,L,$e):Dt=this.layer.textureService.getColorTexture(L,$e);const nn={u_unpack:[V,re,Ee,Te],u_domain:$e,u_opacity:o||1,u_noDataValue:w,u_clampLow:f,u_clampHigh:typeof m!="undefined"?m:f,u_texture:this.texture,u_colorTexture:Dt};return this.textures=[this.texture,Dt],this.getUniformsBufferInfo(nn)}initModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=yield f.data.images;return o.texture=m({data:w[0],width:w[0].width,height:w[0].height,min:Y.gl.LINEAR,mag:Y.gl.LINEAR}),[yield o.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Jx,fragmentShader:eT,defines:o.getDefines(),triangulation:U1,primitive:Y.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Y.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Y.gl.DYNAMIC_DRAW,data:[],type:Y.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var OO={raster:JS,rasterRgb:AO,raster3d:JS,rasterTerrainRgb:CO};class e2 extends xv{constructor(...o){super(...o),(0,Jt.Z)(this,"type","RasterLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new OO[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[o]}getModelType(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(o){if(o!=="color")return{type:void 0,field:void 0,items:[]};const f=this.getLayerConfig().rampColors;return QS(f,o)}}const RO=["rasterData"];class MO extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),O=new e2((0,Cr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(L=>{var F,V;const re=L;O[re]((F=f[re])===null||F===void 0?void 0:F.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(O),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Il.Z)(f,RO);return{data:m,options:{parser:(0,Cr.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}}class PO extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),O=new e2((0,Cr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(L=>{var F,V;const re=L;O[re]((F=f[re])===null||F===void 0?void 0:F.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(O),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const IO=["rasterData"],LO={positions:[0,1],colors:["#000","#fff"]};class DO extends gg{constructor(...o){super(...o),(0,Jt.Z)(this,"colorTexture",void 0)}initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),{rampColors:O,domain:L}=o.getLayerOptions();o.colorTexture=o.parent.textureService.getColorTexture(O,L);const F=new e2((0,Cr.Z)((0,Cr.Z)({},m),{},{colorTexture:o.colorTexture})).source(w.data,w.options);f&&Object.keys(f).forEach(V=>{var re,Ee;const Te=V;F[Te]((re=f[Te])===null||re===void 0?void 0:re.field,(Ee=f[Te])===null||Ee===void 0?void 0:Ee.values)}),yield o.addLayer(F),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Il.Z)(f,IO);return{data:m,options:{parser:(0,Cr.Z)({type:"raster",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}styleUpdate(...o){const{rampColors:f=LO,domain:m}=o;this.colorTexture=this.parent.textureService.getColorTexture(f,m||(0,Me.ZB)(f)),this.layers.forEach(w=>w.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(o=>o.destroy())}}class G1 extends gg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=YS(o.parent.type),O=o.getSourceOption();if(!O){o.isLoaded=!0,o.emit("loaded");return}const L=new w((0,Cr.Z)({},m)).source(O.data,O.options);Object.keys(f).forEach(F=>{var V,re;const Ee=F;L[Ee]((V=f[Ee])===null||V===void 0?void 0:V.field,(re=f[Ee])===null||re===void 0?void 0:re.values)}),yield o.addLayer(L),m.tileMask&&(yield o.addTileMask()),o.setLayerMinMaxZoom(L),o.isLoaded=!0,o.emit("loaded")})()}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f="defaultLayer",featureId:m="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}setLayerMinMaxZoom(o){o.getModelType()==="text"&&o.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(o){return this.sourceTile.data.getTileData(o)}getFeatureById(o){const f=this.getMainLayer();return f?f.getSource().data.dataArray.filter(w=>w._id===o):[]}}function t2(a){switch(a.type){case"PolygonLayer":return G1;case"LineLayer":return G1;case"PointLayer":return G1;case"TileDebugLayer":return dO;case"MaskLayer":return Qx;case"RasterLayer":const{dataType:f}=a.getSource().parser;switch(f){case Y.n3.RGB:case Y.n3.CUSTOMRGB:return MO;case Y.n3.ARRAYBUFFER:case Y.n3.CUSTOMARRAYBUFFER:return DO;case Y.n3.TERRAINRGB:case Y.n3.CUSTOMTERRAINRGB:return PO;default:return Kx}default:return G1}}const NO=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:BO}=Me.lodashUtil;class L_{constructor(o){(0,Jt.Z)(this,"parent",void 0),(0,Jt.Z)(this,"tileLayerService",void 0),(0,Jt.Z)(this,"mapService",void 0),(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"rendererService",void 0),(0,Jt.Z)(this,"pickingService",void 0),(0,Jt.Z)(this,"tilePickService",void 0),(0,Jt.Z)(this,"tilesetManager",void 0),(0,Jt.Z)(this,"initedTileset",!1),(0,Jt.Z)(this,"lastViewStates",void 0),(0,Jt.Z)(this,"mapchange",()=>{var m;if(this.parent.isVisible()===!1)return;const{latLonBounds:w,zoom:O}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===O&&this.lastViewStates.latLonBounds.toString()===w.toString()||(this.lastViewStates={zoom:O,latLonBounds:w},(m=this.tilesetManager)===null||m===void 0||m.throttleUpdate(O,w))}),(0,Jt.Z)(this,"viewchange",BO(this.mapchange,24)),this.parent=o;const f=this.parent.getContainer();this.rendererService=f.rendererService,this.layerService=f.layerService,this.mapService=f.mapService,this.pickingService=f.pickingService,this.tileLayerService=new H1({rendererService:this.rendererService,layerService:this.layerService,parent:o}),this.tilePickService=new $x({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:o}),this.parent.setLayerPickService(this.tilePickService),this.proxy(o),this.initTileSetManager()}initTileSetManager(){var o;const f=this.parent.getSource();if(this.tilesetManager=f.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:m,zoom:w}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(w,m)}getCurrentView(){const o=this.mapService.getBounds(),f=[o[0][0],o[0][1],o[1][0],o[1][1]],m=this.mapService.getZoom();return{latLonBounds:f,zoom:m}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",o=>{}),this.tilesetManager.on("tile-unload",o=>{this.tileUnLoad(o)}),this.tilesetManager.on("tile-error",(o,f)=>{this.tileError(o)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(o){return this.tileLayerService.getTile(o)}tileLoaded(o){}tileError(o){console.warn("error:",o)}destroy(){var o;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(o=this.tilesetManager)===null||o===void 0||o.destroy(),this.tileLayerService.destroy()}reload(){var o;this.tilesetManager.clear();const{latLonBounds:f,zoom:m}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(m,f)}tileUnLoad(o){this.tileLayerService.removeTile(o.key)}tileUpdate(){var o=this;return(0,Ai.Z)(function*(){if(!o.tilesetManager)return;const f=o.parent.getMinZoom(),m=o.parent.getMaxZoom(),w=o.tilesetManager.tiles.filter(O=>O.isLoaded).filter(O=>O.isVisibleChange).filter(O=>O.data).filter(O=>O.z>=f&&O.z<m);yield Promise.all(w.map(function(){var O=(0,Ai.Z)(function*(L){if(o.tileLayerService.hasTile(L.key))o.tileLayerService.updateTileVisible(L),o.tilePickService.setPickState(),o.layerService.reRender();else{const F=t2(o.parent),V=new F(L,o.parent);yield V.initTileLayer(),o.tilePickService.setPickState(),V.getLayers().length!==0&&(o.tileLayerService.addTile(V),o.tileLayerService.updateTileVisible(L),o.layerService.reRender())}});return function(L){return O.apply(this,arguments)}}())),o.tilesetManager.isLoaded&&o.parent.emit("tiles-loaded",o.tilesetManager.currentTiles)})()}setPickState(o){}pickRender(o){this.tilePickService.pickRender(o)}selectFeature(o){this.tilePickService.selectFeature(o)}highlightPickedFeature(o){this.tilePickService.highlightPickedFeature(o)}proxy(o){NO.forEach(f=>{const m=o[f].bind(o);o[f]=(...w)=>(m(...w),this.getLayers().map(O=>{O[f](...w)}),f==="style"&&this.getTiles().forEach(O=>O.styleUpdate(...w)),o)})}}class q5 extends null{constructor(...o){super(...o),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",f=>{switch(f.stopPropagation(),f.type){case"touchcancel":case"touchend":case"mouseup":{var m;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.removeEventListener(w,this.move)}),(m=this.scene)===null||m===void 0||m.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.addEventListener(w,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let w;if("pageX"in f?w=f.pageX:f.touches&&f.touches.length&&f.touches[0].pageX?w=f.touches[0].pageX:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageX),!w)break;const O=this.getContainerDOMRect(),L=this.getContainerSize(),F=L[0],V=(O==null?void 0:O.left)||0,re=w-V+window.scrollX-document.documentElement.clientLeft,Ee=F-Math.min(Math.max(0,F-re),F),Te=Ee/F;this.setOptions({ratio:Te}),this.emit("moving",{size:[Ee,L[1]],ratio:[Te,0]})}else{let w;if("pageY"in f?w=f.pageY:f.touches&&f.touches.length&&f.touches[0].pageY?w=f.touches[0].pageY:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageY),!w)break;const O=this.getContainerDOMRect(),L=this.getContainerSize(),F=L[1],V=(O==null?void 0:O.top)||0,re=w-V+window.scrollY-document.documentElement.clientTop,Ee=F-Math.min(Math.max(0,F-re),F),Te=Ee/F;this.setOptions({ratio:Te}),this.emit("moving",{size:[L[0],Ee],ratio:[0,Te]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var f;if(!this.mapsService)return;const m=this.getMaskGeoData();(f=this.maskLayer)===null||f===void 0||f.setData(m)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const o=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",o);const{orientation:f="vertical",ratio:m=.5}=this.controlOption;return f==="horizontal"?(o.style.top=m*100+"%",o.style.left=""):(o.style.left=m*100+"%",o.style.top=""),o.classList.add(f),o}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd();const{className:f,style:m,layers:w,rightLayers:O}=this.controlOption;f&&this.setClassName(f),m&&this.setStyle(m),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const L=createLayerContainer(o);return this.maskLayer.setContainer(L),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(w,!1),this.addMaskToLayers(O,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var o;const{layers:f,rightLayers:m}=this.controlOption;this.removeMaskFromLayers(f),this.removeMaskFromLayers(m),(o=this.layerService)===null||o===void 0||o.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var o;const f=this.container;DOM.removeClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(O=>O.enableMask()),w.forEach(O=>O.enableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!0,this.emit("show",this)}hide(){var o;const f=this.container;DOM.addClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(O=>O.disableMask()),w.forEach(O=>O.disableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!1,this.emit("hide",this)}setOptions(o){const f=_objectSpread(_objectSpread({},this.controlOption),o);if(o.className&&this.setClassName(o.className),o.style&&this.setStyle(o.style),(o.orientation||o.ratio!==void 0)&&this.setOrientationAndRatio(f.orientation,f.ratio),o.layers){const m=o.layers,w=this.controlOption.layers;this.setLayers(m,w,!1)}if(o.rightLayers){const m=o.rightLayers,w=this.controlOption.rightLayers;this.setLayers(m,w,!0)}this.controlOption=f,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var o;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(o=this.mapsService)===null||o===void 0||o.off("camerachange",this.updateMask)}setOrientationAndRatio(o="vertical",f=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(o),o==="horizontal"?(this.container.style.top=f*100+"%",this.container.style.left=""):(this.container.style.left=f*100+"%",this.container.style.top="")}setLayers(o,f,m=!1){const w=o.filter(L=>f.includes(L)===!1),O=f.filter(L=>o.includes(L)===!1);this.addMaskToLayers(w,m),this.removeMaskFromLayers(O)}addMaskToLayers(o,f){o.forEach(m=>{m.updateLayerConfig({maskInside:!f}),m.addMask(this.maskLayer)})}removeMaskFromLayers(o){o.forEach(f=>{f.updateLayerConfig({maskInside:!0}),f.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:o=.5,orientation:f="vertical"}=this.controlOption,m=f==="vertical",[w,O]=this.getBounds(),[L,F]=w,[V,re]=O;let Ee;if(m){const $e=L+(V-L)*o;Ee=[[L,re],[$e,re],[$e,F],w,[L,re]]}else{const $e=this.getContainerSize(),nn=this.mapsService.containerToLngLat([$e[0],$e[1]*o]).lat;Ee=[[L,re],O,[V,nn],[L,nn],[L,re]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ee]}}]}}getContainerDOMRect(){var o;return(o=this.mapsService.getContainer())===null||o===void 0?void 0:o.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(o,f=!1){const m=Array.isArray(o)?o:[o];if(f){const w=this.controlOption.rightLayers.concat(...m);this.setOptions({rightLayers:w})}else{const w=this.controlOption.layers.concat(...m);this.setOptions({layers:w})}}removeLayer(o){const f=Array.isArray(o)?o:[o],m=this.controlOption.layers.filter(O=>f.includes(O)),w=this.controlOption.rightLayers.filter(O=>f.includes(O));this.setOptions({layers:m,rightLayers:w})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class Q5 extends null{constructor(...o){super(...o),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const f=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||f.getZoom()<=f.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(f.getZoom()))),(this.disabled||f.getZoom()>=f.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const o=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(o),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),o}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(o){DOM.clearChildren(o),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",o,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",o)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",o,this.zoomOut),this.updateDisabled()}createButton(o,f,m,w,O){const L=DOM.create("button",m,w);return typeof o=="string"?L.innerHTML=o:L.append(o),L.title=f,O&&L.addEventListener("click",O),L}}class tT extends Vc.EventEmitter{get lngLat(){var o;return(o=this.popupOption.lngLat)!==null&&o!==void 0?o:{lng:0,lat:0}}set lngLat(o){this.popupOption.lngLat=o}constructor(o){super(),(0,Jt.Z)(this,"popupOption",void 0),(0,Jt.Z)(this,"mapsService",void 0),(0,Jt.Z)(this,"sceneService",void 0),(0,Jt.Z)(this,"layerService",void 0),(0,Jt.Z)(this,"scene",void 0),(0,Jt.Z)(this,"closeButton",void 0),(0,Jt.Z)(this,"container",void 0),(0,Jt.Z)(this,"content",void 0),(0,Jt.Z)(this,"contentTitle",void 0),(0,Jt.Z)(this,"contentPanel",void 0),(0,Jt.Z)(this,"tip",void 0),(0,Jt.Z)(this,"isShow",!0),(0,Jt.Z)(this,"onMouseMove",m=>{var w;const O=this.mapsService.getMapContainer(),{left:L=0,top:F=0}=(w=O==null?void 0:O.getBoundingClientRect())!==null&&w!==void 0?w:{};this.setPopupPosition(m.clientX-L,m.clientY-F)}),(0,Jt.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:m,lat:w}=this.lngLat,{x:O,y:L}=this.mapsService.lngLatToContainer([m,w]);this.setPopupPosition(O,L)}),(0,Jt.Z)(this,"updateLngLatPositionWhenZoom",m=>{if(!this.mapsService||this.popupOption.followCursor)return;const w=m.map,O=w.getSize();O.x=O.x/2,O.y=O.y/2;const L=m.center,F=m.zoom,V=w.DE(this.lngLat,F,L);V.x=Math.round(V.x),V.y=Math.round(V.y),this.setPopupPosition(V.x,V.y,!0)}),(0,Jt.Z)(this,"onKeyDown",m=>{m.keyCode===27&&this.remove()}),(0,Jt.Z)(this,"onCloseButtonClick",m=>{m.stopPropagation&&m.stopPropagation(),this.hide()}),(0,Jt.Z)(this,"updatePosition",(m,w=!0)=>{const O=!!this.lngLat,{className:L,style:F,maxWidth:V,anchor:re,stopPropagation:Ee}=this.popupOption;if(!this.mapsService||!O||!this.content)return;const Te=this.mapsService.getMarkerContainer();if(!this.container&&Te&&(this.container=Me.SO.create("div",`l7-popup ${L!=null?L:""} ${this.isShow?"":"l7-popup-hide"}`,Te),F&&this.container.setAttribute("style",F),this.tip=Me.SO.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Ee&&["mousemove","mousedown","mouseup","click","dblclick"].forEach($e=>{this.container.addEventListener($e,Dt=>{Dt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),w?this.updateLngLatPositionWhenZoom(m):this.updateLngLatPosition(),Me.SO.setTransform(this.container,`${Me.rQ[re]}`),(0,Me.zi)(this.container,re,"popup"),V){const{width:$e}=this.container.getBoundingClientRect();$e>parseFloat(V)&&(this.container.style.width=V)}else this.container.style.removeProperty("width")}),(0,Jt.Z)(this,"updateWhenZoom",m=>{this.updatePosition(m,!0)}),(0,Jt.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,Cr.Z)((0,Cr.Z)({},this.getDefault(o!=null?o:{})),o);const{lngLat:f}=this.popupOption;f&&(this.lngLat=f)}getIsShow(){return this.isShow}addTo(o){this.mapsService=o.mapService,this.sceneService=o.sceneService,this.layerService=o.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=o,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:f,text:m,title:w}=this.popupOption;return f?this.setHTML(f):m&&this.setText(m),w&&this.setTitle(w),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Me.SO.remove(this.content),this.container&&(Me.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(o){this.show();const{className:f}=this.popupOption;if(this.popupOption=(0,Cr.Z)((0,Cr.Z)({},this.popupOption),o),this.checkUpdateOption(o,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Me.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(o,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(o,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(o,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(o,["html"])&&o.html?this.setHTML(o.html):this.checkUpdateOption(o,["text"])&&o.text&&this.setText(o.text),this.checkUpdateOption(o,["className"])){var m;f&&this.container.classList.remove(f!=null?f:""),this.container.classList.add((m=o.className)!==null&&m!==void 0?m:"")}if(this.checkUpdateOption(o,["style"])){var w;Me.SO.addStyle(this.container,(w=o.style)!==null&&w!==void 0?w:"")}return this.checkUpdateOption(o,["lngLat"])&&o.lngLat&&this.setLnglat(o.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Me.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Me.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(o){return this.popupOption.html=o,this.setDOMContent(o)}setText(o){return this.popupOption.text=o,this.setDOMContent(window.document.createTextNode(o))}setTitle(o){this.show(),this.popupOption.title=o,o?(this.contentTitle||(this.contentTitle=Me.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Me.SO.clearChildren(this.contentTitle),Me.SO.appendElementType(this.contentTitle,o)):this.contentTitle&&(Me.SO.remove(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:o,lat:f}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([o,f]),this}setLngLat(o){return this.setLnglat(o)}setLnglat(o){return this.show(),this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(o){return this.popupOption.maxWidth=o,this.update(),this}isOpen(){return!!this.mapsService}getDefault(o){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Me.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(o){return this.show(),this.createContent(),Me.SO.appendElementType(this.contentPanel,o),this.update(),this}updateCloseOnClick(o){const f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!o&&requestAnimationFrame(()=>{f==null||f.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(o){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!o&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(o){var f;const m=(f=this.mapsService)===null||f===void 0?void 0:f.getContainer();m&&(m==null||m.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!o&&(m==null||m.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Me.SO.remove(this.content),this.contentTitle=void 0,this.content=Me.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const o=xl("l7-icon-guanbi");Me.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",()=>{this.hide()}),o.addEventListener("pointerup",f=>{f.stopPropagation()}),o.addEventListener("pointerdown",f=>{f.stopPropagation()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Me.SO.create("div","l7-popup-content__panel",this.content)}setPopupPosition(o,f,m=!1){if(this.container){const{offsets:w}=this.popupOption;this.container.style.left=o+w[0]+"px",this.container.style.top=f-w[1]+"px",m?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(o,f){return f.some(m=>m in o)}}const{get:nT}=Me.lodashUtil;class FO extends null{constructor(...o){super(...o),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(f,m)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(f,m.featureId))this.hide();else{const{title:w,content:O}=this.getLayerInfoFrag(f,m);this.setDOMContent(O),this.setLnglat(m.lngLat),this.setTitle(w),this.setDisplayFeatureInfo({layer:f,featureId:m.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var o;const{config:f,items:m}=this.popupOption;return(o=f!=null?f:m)!==null&&o!==void 0?o:[]}addTo(o){return super.addTo(o),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(o){this.unbindLayerEvent();const f=_objectSpread({},o),m=f.trigger||this.popupOption.trigger,w=f.items||this.popupOption.items,O=(w==null?void 0:w.length)===0;f.followCursor=m==="hover"&&!O;const L=this.isShow;return super.setOptions(f),this.bindLayerEvent(),(O||!L)&&this.hide(),this}getDefault(o){const f=o.trigger!=="click";return _objectSpread(_objectSpread({},super.getDefault(o)),{},{trigger:"hover",followCursor:f,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:o,closeOnClick:f}=this.popupOption;this.layerConfigItems.forEach(m=>{var w;const O=this.getLayerByConfig(m);if(!O)return;const L=_objectSpread({},m);if(o==="hover"){const Ee=this.onLayerMouseMove.bind(this,O),Te=this.onLayerMouseOut.bind(this,O);L.onMouseMove=Ee,L.onMouseOut=Te,O==null||O.on("mousemove",Ee),O==null||O.on("mouseout",Te)}else{var F;const Ee=this.onLayerClick.bind(this,O);L.onClick=Ee,O==null||O.on("click",Ee);const Te=(F=this.mapsService)===null||F===void 0?void 0:F.getMapContainer();Te&&f&&Te.addEventListener("click",this.onSceneClick)}const V=O==null||(w=O.getSource)===null||w===void 0?void 0:w.call(O),re=this.onSourceUpdate.bind(this);V==null||V.on("update",re),L.onSourceUpdate=re,this.layerConfigMap.set(O,L)})}unbindLayerEvent(){this.layerConfigItems.forEach(o=>{var f;const m=this.getLayerByConfig(o),w=m&&this.layerConfigMap.get(m);if(!w)return;const{onMouseMove:O,onMouseOut:L,onClick:F,onSourceUpdate:V}=w;if(O&&m.off("mousemove",O),L&&m.off("mouseout",L),F&&m.off("click",F),V){var re;m==null||(re=m.getSource())===null||re===void 0||re.off("update",V)}const Ee=(f=this.mapsService)===null||f===void 0?void 0:f.getMapContainer();Ee&&Ee.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(o,f){if(!this.isSameFeature(o,f.featureId)){const{title:m,content:w}=this.getLayerInfoFrag(o,f);this.setDOMContent(w),this.setTitle(m),this.setDisplayFeatureInfo({layer:o,featureId:f.featureId}),this.show()}}onLayerMouseOut(o,f){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(o,f){const m=this.layerConfigMap.get(o);let w;const O=document.createDocumentFragment();if(m){let L=f.feature;L.type==="Feature"&&"properties"in L&&"geometry"in L&&(L=L.properties);const{title:F,fields:V,customContent:re}=m;if(F){w=document.createDocumentFragment();const Ee=F instanceof Function?F(L):F;DOM.appendElementType(w,Ee)}if(re){const Ee=re instanceof Function?re(L):re;DOM.appendElementType(O,Ee)}else V!=null&&V.length&&(V==null||V.forEach(Ee=>{var Te,$e;const{field:Dt,formatField:nn,formatValue:Tn,getValue:sr}=typeof Ee=="string"?{field:Ee}:Ee,Br=DOM.create("div","l7-layer-popup__row"),Er=sr?sr(f.feature):nT(L,Dt),ui=(Te=nn instanceof Function?nn(Dt,L):nn)!==null&&Te!==void 0?Te:Dt;let Vi=($e=Tn instanceof Function?Tn(Er,L):Tn)!==null&&$e!==void 0?$e:Er;const Po=DOM.create("span","l7-layer-popup__key",Br);DOM.appendElementType(Po,ui),DOM.appendElementType(Po,document.createTextNode("\uFF1A"));const no=DOM.create("span","l7-layer-popup__value",Br);Array.isArray(Vi)&&Vi.every(Wr=>!(Wr instanceof Object))&&(Vi=Vi.map(Wr=>String(Wr)).join(",")),DOM.appendElementType(no,Vi),O.appendChild(Br)}))}return{title:w,content:O}}getLayerByConfig(o){const f=o.layer;if(f instanceof Object)return f;if(typeof f=="string")return this.layerService.getLayer(f)||this.layerService.getLayerByName(f)}isSameFeature(o,f){const m=this.displayFeatureInfo;return m&&o===m.layer&&f===m.featureId}setDisplayFeatureInfo(o){const f=this.displayFeatureInfo;f&&f.layer.off("hide",this.onLayerHide),o&&o.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=o}}function kO(a,o){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||m)&&(o||(o=document),!!o)){var w=o.head||o.getElementsByTagName("head")[0];if(!w){w=o.createElement("head");var O=o.body||o.getElementsByTagName("body")[0];O?O.parentNode.insertBefore(w,O):o.documentElement.appendChild(w)}var L=o.createElement("style");return L.type="text/css",L.styleSheet?L.styleSheet.cssText=a:L.appendChild(o.createTextNode(a)),w.appendChild(L),L}}kO(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var rT=D(81550),UO=D.n(rT),zO=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:O,size:L,divisor:F}=o;this.buffer=f,this.attribute={buffer:f.get(),offset:m||0,stride:w||0,normalized:O||!1,divisor:F||0},L&&(this.attribute.size=L)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},jO={[Y.gl.POINTS]:"points",[Y.gl.LINES]:"lines",[Y.gl.LINE_LOOP]:"line loop",[Y.gl.LINE_STRIP]:"line strip",[Y.gl.TRIANGLES]:"triangles",[Y.gl.TRIANGLE_FAN]:"triangle fan",[Y.gl.TRIANGLE_STRIP]:"triangle strip"},iT={[Y.gl.STATIC_DRAW]:"static",[Y.gl.DYNAMIC_DRAW]:"dynamic",[Y.gl.STREAM_DRAW]:"stream"},D_={[Y.gl.BYTE]:"int8",[Y.gl.INT]:"int32",[Y.gl.UNSIGNED_BYTE]:"uint8",[Y.gl.UNSIGNED_SHORT]:"uint16",[Y.gl.UNSIGNED_INT]:"uint32",[Y.gl.FLOAT]:"float"},yg={[Y.gl.ALPHA]:"alpha",[Y.gl.LUMINANCE]:"luminance",[Y.gl.LUMINANCE_ALPHA]:"luminance alpha",[Y.gl.RGB]:"rgb",[Y.gl.RGBA]:"rgba",[Y.gl.RGBA4]:"rgba4",[Y.gl.RGB5_A1]:"rgb5 a1",[Y.gl.RGB565]:"rgb565",[Y.gl.DEPTH_COMPONENT]:"depth",[Y.gl.DEPTH_STENCIL]:"depth stencil"},VO={[Y.gl.DONT_CARE]:"dont care",[Y.gl.NICEST]:"nice",[Y.gl.FASTEST]:"fast"},oT={[Y.gl.NEAREST]:"nearest",[Y.gl.LINEAR]:"linear",[Y.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[Y.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[Y.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[Y.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},h0={[Y.gl.REPEAT]:"repeat",[Y.gl.CLAMP_TO_EDGE]:"clamp",[Y.gl.MIRRORED_REPEAT]:"mirror"},HO={[Y.gl.NONE]:"none",[Y.gl.BROWSER_DEFAULT_WEBGL]:"browser"},WO={[Y.gl.NEVER]:"never",[Y.gl.ALWAYS]:"always",[Y.gl.LESS]:"less",[Y.gl.LEQUAL]:"lequal",[Y.gl.GREATER]:"greater",[Y.gl.GEQUAL]:"gequal",[Y.gl.EQUAL]:"equal",[Y.gl.NOTEQUAL]:"notequal"},py={[Y.gl.FUNC_ADD]:"add",[Y.gl.MIN_EXT]:"min",[Y.gl.MAX_EXT]:"max",[Y.gl.FUNC_SUBTRACT]:"subtract",[Y.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},N_={[Y.gl.ZERO]:"zero",[Y.gl.ONE]:"one",[Y.gl.SRC_COLOR]:"src color",[Y.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[Y.gl.SRC_ALPHA]:"src alpha",[Y.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[Y.gl.DST_COLOR]:"dst color",[Y.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[Y.gl.DST_ALPHA]:"dst alpha",[Y.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[Y.gl.CONSTANT_COLOR]:"constant color",[Y.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[Y.gl.CONSTANT_ALPHA]:"constant alpha",[Y.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[Y.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},GO={[Y.gl.NEVER]:"never",[Y.gl.ALWAYS]:"always",[Y.gl.LESS]:"less",[Y.gl.LEQUAL]:"lequal",[Y.gl.GREATER]:"greater",[Y.gl.GEQUAL]:"gequal",[Y.gl.EQUAL]:"equal",[Y.gl.NOTEQUAL]:"notequal"},vy={[Y.gl.ZERO]:"zero",[Y.gl.KEEP]:"keep",[Y.gl.REPLACE]:"replace",[Y.gl.INVERT]:"invert",[Y.gl.INCR]:"increment",[Y.gl.DECR]:"decrement",[Y.gl.INCR_WRAP]:"increment wrap",[Y.gl.DECR_WRAP]:"decrement wrap"},ZO={[Y.gl.FRONT]:"front",[Y.gl.BACK]:"back"},aT=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w}=o;this.buffer=a.buffer({data:f,usage:iT[m||Y.gl.STATIC_DRAW],type:D_[w||Y.gl.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){this.buffer.subdata(a,o)}},XO=class{constructor(a,o){const{data:f,usage:m,type:w,count:O}=o;this.elements=a.elements({data:f,usage:iT[m||Y.gl.STATIC_DRAW],type:D_[w||Y.gl.UNSIGNED_BYTE],count:O})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},$O=class{constructor(a,o){const{width:f,height:m,color:w,colors:O}=o,L={width:f,height:m};Array.isArray(O)&&(L.colors=O.map(F=>F.get())),w&&typeof w!="boolean"&&(L.color=w.get()),this.framebuffer=a.framebuffer(L)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:o}){this.framebuffer.resize(a,o)}},Qd=D(95147),ym=D(25897),sT=D(81957),So=D(97582),YO=D(90857),ph=YO,An;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",a[a.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.CULL_FACE=2884]="CULL_FACE",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.BLEND=3042]="BLEND",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.DITHER=3024]="DITHER",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DOUBLE=5130]="DOUBLE",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.ALWAYS=519]="ALWAYS",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.GEQUAL=518]="GEQUAL",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",a[a.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.READ_BUFFER=3074]="READ_BUFFER",a[a.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",a[a.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",a[a.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",a[a.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",a[a.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",a[a.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",a[a.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",a[a.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",a[a.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",a[a.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",a[a.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",a[a.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",a[a.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",a[a.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",a[a.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",a[a.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",a[a.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",a[a.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",a[a.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",a[a.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",a[a.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",a[a.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",a[a.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",a[a.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",a[a.RED=6403]="RED",a[a.RGB8=32849]="RGB8",a[a.RGBA8=32856]="RGBA8",a[a.RGB10_A2=32857]="RGB10_A2",a[a.TEXTURE_3D=32879]="TEXTURE_3D",a[a.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",a[a.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",a[a.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",a[a.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",a[a.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",a[a.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",a[a.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",a[a.SRGB=35904]="SRGB",a[a.SRGB8=35905]="SRGB8",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",a[a.RGBA32F=34836]="RGBA32F",a[a.RGB32F=34837]="RGB32F",a[a.RGBA16F=34842]="RGBA16F",a[a.RGB16F=34843]="RGB16F",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F",a[a.RGB9_E5=35901]="RGB9_E5",a[a.RGBA32UI=36208]="RGBA32UI",a[a.RGB32UI=36209]="RGB32UI",a[a.RGBA16UI=36214]="RGBA16UI",a[a.RGB16UI=36215]="RGB16UI",a[a.RGBA8UI=36220]="RGBA8UI",a[a.RGB8UI=36221]="RGB8UI",a[a.RGBA32I=36226]="RGBA32I",a[a.RGB32I=36227]="RGB32I",a[a.RGBA16I=36232]="RGBA16I",a[a.RGB16I=36233]="RGB16I",a[a.RGBA8I=36238]="RGBA8I",a[a.RGB8I=36239]="RGB8I",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.R8=33321]="R8",a[a.RG8=33323]="RG8",a[a.R16F=33325]="R16F",a[a.R32F=33326]="R32F",a[a.RG16F=33327]="RG16F",a[a.RG32F=33328]="RG32F",a[a.R8I=33329]="R8I",a[a.R8UI=33330]="R8UI",a[a.R16I=33331]="R16I",a[a.R16UI=33332]="R16UI",a[a.R32I=33333]="R32I",a[a.R32UI=33334]="R32UI",a[a.RG8I=33335]="RG8I",a[a.RG8UI=33336]="RG8UI",a[a.RG16I=33337]="RG16I",a[a.RG16UI=33338]="RG16UI",a[a.RG32I=33339]="RG32I",a[a.RG32UI=33340]="RG32UI",a[a.R8_SNORM=36756]="R8_SNORM",a[a.RG8_SNORM=36757]="RG8_SNORM",a[a.RGB8_SNORM=36758]="RGB8_SNORM",a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGB10_A2UI=36975]="RGB10_A2UI",a[a.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",a[a.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.HALF_FLOAT=5131]="HALF_FLOAT",a[a.RG=33319]="RG",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",a[a.CURRENT_QUERY=34917]="CURRENT_QUERY",a[a.QUERY_RESULT=34918]="QUERY_RESULT",a[a.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",a[a.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",a[a.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",a[a.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",a[a.DRAW_BUFFER0=34853]="DRAW_BUFFER0",a[a.DRAW_BUFFER1=34854]="DRAW_BUFFER1",a[a.DRAW_BUFFER2=34855]="DRAW_BUFFER2",a[a.DRAW_BUFFER3=34856]="DRAW_BUFFER3",a[a.DRAW_BUFFER4=34857]="DRAW_BUFFER4",a[a.DRAW_BUFFER5=34858]="DRAW_BUFFER5",a[a.DRAW_BUFFER6=34859]="DRAW_BUFFER6",a[a.DRAW_BUFFER7=34860]="DRAW_BUFFER7",a[a.DRAW_BUFFER8=34861]="DRAW_BUFFER8",a[a.DRAW_BUFFER9=34862]="DRAW_BUFFER9",a[a.DRAW_BUFFER10=34863]="DRAW_BUFFER10",a[a.DRAW_BUFFER11=34864]="DRAW_BUFFER11",a[a.DRAW_BUFFER12=34865]="DRAW_BUFFER12",a[a.DRAW_BUFFER13=34866]="DRAW_BUFFER13",a[a.DRAW_BUFFER14=34867]="DRAW_BUFFER14",a[a.DRAW_BUFFER15=34868]="DRAW_BUFFER15",a[a.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",a[a.SAMPLER_3D=35679]="SAMPLER_3D",a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",a[a.MAX_SAMPLES=36183]="MAX_SAMPLES",a[a.SAMPLER_BINDING=35097]="SAMPLER_BINDING",a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",a[a.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",a[a.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",a[a.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",a[a.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",a[a.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",a[a.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",a[a.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",a[a.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",a[a.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",a[a.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",a[a.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",a[a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",a[a.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",a[a.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",a[a.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",a[a.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",a[a.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",a[a.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",a[a.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",a[a.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",a[a.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",a[a.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",a[a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a[a.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",a[a.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",a[a.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",a[a.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",a[a.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",a[a.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",a[a.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",a[a.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",a[a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",a[a.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",a[a.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",a[a.UNIFORM_TYPE=35383]="UNIFORM_TYPE",a[a.UNIFORM_SIZE=35384]="UNIFORM_SIZE",a[a.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",a[a.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",a[a.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",a[a.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",a[a.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",a[a.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",a[a.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",a[a.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",a[a.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",a[a.OBJECT_TYPE=37138]="OBJECT_TYPE",a[a.SYNC_CONDITION=37139]="SYNC_CONDITION",a[a.SYNC_STATUS=37140]="SYNC_STATUS",a[a.SYNC_FLAGS=37141]="SYNC_FLAGS",a[a.SYNC_FENCE=37142]="SYNC_FENCE",a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",a[a.UNSIGNALED=37144]="UNSIGNALED",a[a.SIGNALED=37145]="SIGNALED",a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",a[a.WAIT_FAILED=37149]="WAIT_FAILED",a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",a[a.COLOR=6144]="COLOR",a[a.DEPTH=6145]="DEPTH",a[a.STENCIL=6146]="STENCIL",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX",a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",a[a.STREAM_READ=35041]="STREAM_READ",a[a.STREAM_COPY=35042]="STREAM_COPY",a[a.STATIC_READ=35045]="STATIC_READ",a[a.STATIC_COPY=35046]="STATIC_COPY",a[a.DYNAMIC_READ=35049]="DYNAMIC_READ",a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY",a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",a[a.INVALID_INDEX=4294967295]="INVALID_INDEX",a[a.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",a[a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",a[a.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",a[a.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",a[a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",a[a.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",a[a.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",a[a.RGBA32F_EXT=34836]="RGBA32F_EXT",a[a.RGB32F_EXT=34837]="RGB32F_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",a[a.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.SRGB_EXT=35904]="SRGB_EXT",a[a.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",a[a.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",a[a.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",a[a.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",a[a.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",a[a.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",a[a.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",a[a.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",a[a.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",a[a.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",a[a.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",a[a.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",a[a.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",a[a.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",a[a.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",a[a.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",a[a.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",a[a.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",a[a.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",a[a.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",a[a.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",a[a.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",a[a.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",a[a.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",a[a.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",a[a.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",a[a.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",a[a.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",a[a.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",a[a.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",a[a.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",a[a.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",a[a.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",a[a.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",a[a.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",a[a.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",a[a.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",a[a.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",a[a.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",a[a.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",a[a.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",a[a.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",a[a.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",a[a.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(An||(An={}));var Ws;(function(a){a[a.Buffer=0]="Buffer",a[a.Texture=1]="Texture",a[a.RenderTarget=2]="RenderTarget",a[a.Sampler=3]="Sampler",a[a.Program=4]="Program",a[a.Bindings=5]="Bindings",a[a.InputLayout=6]="InputLayout",a[a.RenderPipeline=7]="RenderPipeline",a[a.ComputePipeline=8]="ComputePipeline",a[a.Readback=9]="Readback",a[a.QueryPool=10]="QueryPool",a[a.RenderBundle=11]="RenderBundle"})(Ws||(Ws={}));var rs;(function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"})(rs||(rs={}));var B_;(function(a){a[a.CCW=2305]="CCW",a[a.CW=2304]="CW"})(B_||(B_={}));var vh;(function(a){a[a.NONE=0]="NONE",a[a.FRONT=1]="FRONT",a[a.BACK=2]="BACK",a[a.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(vh||(vh={}));var Ja;(function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC=768]="SRC",a[a.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",a[a.DST=774]="DST",a[a.ONE_MINUS_DST=775]="ONE_MINUS_DST",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.CONST=32769]="CONST",a[a.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Ja||(Ja={}));var ff;(function(a){a[a.ADD=32774]="ADD",a[a.SUBSTRACT=32778]="SUBSTRACT",a[a.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX"})(ff||(ff={}));var al;(function(a){a[a.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",a[a.REPEAT=1]="REPEAT",a[a.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(al||(al={}));var Nc;(function(a){a[a.POINT=0]="POINT",a[a.BILINEAR=1]="BILINEAR"})(Nc||(Nc={}));var $u;(function(a){a[a.NO_MIP=0]="NO_MIP",a[a.NEAREST=1]="NEAREST",a[a.LINEAR=2]="LINEAR"})($u||($u={}));var xu;(function(a){a[a.POINTS=0]="POINTS",a[a.TRIANGLES=1]="TRIANGLES",a[a.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",a[a.LINES=3]="LINES",a[a.LINE_STRIP=4]="LINE_STRIP"})(xu||(xu={}));var Ol;(function(a){a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(Ol||(Ol={}));var d0;(function(a){a[a.STATIC=1]="STATIC",a[a.DYNAMIC=2]="DYNAMIC"})(d0||(d0={}));var _g;(function(a){a[a.VERTEX=1]="VERTEX",a[a.INSTANCE=2]="INSTANCE"})(_g||(_g={}));var lT;(function(a){a.LOADED="loaded"})(lT||(lT={}));var hs;(function(a){a[a.TEXTURE_2D=0]="TEXTURE_2D",a[a.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",a[a.TEXTURE_3D=2]="TEXTURE_3D",a[a.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(hs||(hs={}));var Kf;(function(a){a[a.SAMPLED=1]="SAMPLED",a[a.RENDER_TARGET=2]="RENDER_TARGET",a[a.STORAGE=4]="STORAGE"})(Kf||(Kf={}));var hf;(function(a){a[a.NONE=0]="NONE",a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA",a[a.RGB=7]="RGB",a[a.ALL=15]="ALL"})(hf||(hf={}));var Bc;(function(a){a[a.KEEP=7680]="KEEP",a[a.ZERO=0]="ZERO",a[a.REPLACE=7681]="REPLACE",a[a.INVERT=5386]="INVERT",a[a.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",a[a.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",a[a.INCREMENT_WRAP=34055]="INCREMENT_WRAP",a[a.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Bc||(Bc={}));function J5(a,o,f,m){var w=hs.TEXTURE_2D,O=1,L=Kf.SAMPLED;return{dimension:w,format:a,width:o,height:f,depthOrArrayLayers:O,mipLevelCount:m,usage:L}}var Fc;(function(a){a[a.Float=0]="Float",a[a.UnfilterableFloat=1]="UnfilterableFloat",a[a.Uint=2]="Uint",a[a.Sint=3]="Sint",a[a.Depth=4]="Depth"})(Fc||(Fc={}));var pd;(function(a){a[a.LOWER_LEFT=0]="LOWER_LEFT",a[a.UPPER_LEFT=1]="UPPER_LEFT"})(pd||(pd={}));var bg;(function(a){a[a.NEGATIVE_ONE=0]="NEGATIVE_ONE",a[a.ZERO=1]="ZERO"})(bg||(bg={}));var gy;(function(a){a[a.OcclusionConservative=0]="OcclusionConservative"})(gy||(gy={}));var ri;(function(a){a[a.U8=1]="U8",a[a.U16=2]="U16",a[a.U32=3]="U32",a[a.S8=4]="S8",a[a.S16=5]="S16",a[a.S32=6]="S32",a[a.F16=7]="F16",a[a.F32=8]="F32",a[a.BC1=65]="BC1",a[a.BC2=66]="BC2",a[a.BC3=67]="BC3",a[a.BC4_UNORM=68]="BC4_UNORM",a[a.BC4_SNORM=69]="BC4_SNORM",a[a.BC5_UNORM=70]="BC5_UNORM",a[a.BC5_SNORM=71]="BC5_SNORM",a[a.U16_PACKED_5551=97]="U16_PACKED_5551",a[a.U16_PACKED_565=98]="U16_PACKED_565",a[a.D24=129]="D24",a[a.D32F=130]="D32F",a[a.D24S8=131]="D24S8",a[a.D32FS8=132]="D32FS8"})(ri||(ri={}));var Hi;(function(a){a[a.R=1]="R",a[a.RG=2]="RG",a[a.RGB=3]="RGB",a[a.RGBA=4]="RGBA",a[a.A=5]="A"})(Hi||(Hi={}));function KO(a){return a}var mo;(function(a){a[a.None=0]="None",a[a.Normalized=1]="Normalized",a[a.sRGB=2]="sRGB",a[a.Depth=4]="Depth",a[a.Stencil=8]="Stencil",a[a.RenderTarget=16]="RenderTarget",a[a.Luminance=32]="Luminance"})(mo||(mo={}));function To(a,o,f){return a<<16|o<<8|f}var ir;(function(a){a[a.ALPHA=To(ri.U8,Hi.A,mo.None)]="ALPHA",a[a.U8_LUMINANCE=To(ri.U8,Hi.A,mo.Luminance)]="U8_LUMINANCE",a[a.F16_LUMINANCE=To(ri.F16,Hi.A,mo.Luminance)]="F16_LUMINANCE",a[a.F32_LUMINANCE=To(ri.F32,Hi.A,mo.Luminance)]="F32_LUMINANCE",a[a.F16_R=To(ri.F16,Hi.R,mo.None)]="F16_R",a[a.F16_RG=To(ri.F16,Hi.RG,mo.None)]="F16_RG",a[a.F16_RGB=To(ri.F16,Hi.RGB,mo.None)]="F16_RGB",a[a.F16_RGBA=To(ri.F16,Hi.RGBA,mo.None)]="F16_RGBA",a[a.F32_R=To(ri.F32,Hi.R,mo.None)]="F32_R",a[a.F32_RG=To(ri.F32,Hi.RG,mo.None)]="F32_RG",a[a.F32_RGB=To(ri.F32,Hi.RGB,mo.None)]="F32_RGB",a[a.F32_RGBA=To(ri.F32,Hi.RGBA,mo.None)]="F32_RGBA",a[a.U8_R=To(ri.U8,Hi.R,mo.None)]="U8_R",a[a.U8_R_NORM=To(ri.U8,Hi.R,mo.Normalized)]="U8_R_NORM",a[a.U8_RG=To(ri.U8,Hi.RG,mo.None)]="U8_RG",a[a.U8_RG_NORM=To(ri.U8,Hi.RG,mo.Normalized)]="U8_RG_NORM",a[a.U8_RGB=To(ri.U8,Hi.RGB,mo.None)]="U8_RGB",a[a.U8_RGB_NORM=To(ri.U8,Hi.RGB,mo.Normalized)]="U8_RGB_NORM",a[a.U8_RGB_SRGB=To(ri.U8,Hi.RGB,mo.sRGB|mo.Normalized)]="U8_RGB_SRGB",a[a.U8_RGBA=To(ri.U8,Hi.RGBA,mo.None)]="U8_RGBA",a[a.U8_RGBA_NORM=To(ri.U8,Hi.RGBA,mo.Normalized)]="U8_RGBA_NORM",a[a.U8_RGBA_SRGB=To(ri.U8,Hi.RGBA,mo.sRGB|mo.Normalized)]="U8_RGBA_SRGB",a[a.U16_R=To(ri.U16,Hi.R,mo.None)]="U16_R",a[a.U16_R_NORM=To(ri.U16,Hi.R,mo.Normalized)]="U16_R_NORM",a[a.U16_RG_NORM=To(ri.U16,Hi.RG,mo.Normalized)]="U16_RG_NORM",a[a.U16_RGBA_NORM=To(ri.U16,Hi.RGBA,mo.Normalized)]="U16_RGBA_NORM",a[a.U16_RGBA=To(ri.U16,Hi.RGBA,mo.None)]="U16_RGBA",a[a.U16_RGB=To(ri.U16,Hi.RGB,mo.None)]="U16_RGB",a[a.U16_RG=To(ri.U16,Hi.RG,mo.None)]="U16_RG",a[a.U32_R=To(ri.U32,Hi.R,mo.None)]="U32_R",a[a.U32_RG=To(ri.U32,Hi.RG,mo.None)]="U32_RG",a[a.U32_RGB=To(ri.U32,Hi.RGB,mo.None)]="U32_RGB",a[a.U32_RGBA=To(ri.U32,Hi.RGBA,mo.None)]="U32_RGBA",a[a.S8_R=To(ri.S8,Hi.R,mo.None)]="S8_R",a[a.S8_R_NORM=To(ri.S8,Hi.R,mo.Normalized)]="S8_R_NORM",a[a.S8_RG_NORM=To(ri.S8,Hi.RG,mo.Normalized)]="S8_RG_NORM",a[a.S8_RGB_NORM=To(ri.S8,Hi.RGB,mo.Normalized)]="S8_RGB_NORM",a[a.S8_RGBA_NORM=To(ri.S8,Hi.RGBA,mo.Normalized)]="S8_RGBA_NORM",a[a.S16_R=To(ri.S16,Hi.R,mo.None)]="S16_R",a[a.S16_RG=To(ri.S16,Hi.RG,mo.None)]="S16_RG",a[a.S16_RG_NORM=To(ri.S16,Hi.RG,mo.Normalized)]="S16_RG_NORM",a[a.S16_RGB_NORM=To(ri.S16,Hi.RGB,mo.Normalized)]="S16_RGB_NORM",a[a.S16_RGBA=To(ri.S16,Hi.RGBA,mo.None)]="S16_RGBA",a[a.S16_RGBA_NORM=To(ri.S16,Hi.RGBA,mo.Normalized)]="S16_RGBA_NORM",a[a.S32_R=To(ri.S32,Hi.R,mo.None)]="S32_R",a[a.S32_RG=To(ri.S32,Hi.RG,mo.None)]="S32_RG",a[a.S32_RGB=To(ri.S32,Hi.RGB,mo.None)]="S32_RGB",a[a.S32_RGBA=To(ri.S32,Hi.RGBA,mo.None)]="S32_RGBA",a[a.U16_RGBA_5551=To(ri.U16_PACKED_5551,Hi.RGBA,mo.Normalized)]="U16_RGBA_5551",a[a.U16_RGB_565=To(ri.U16_PACKED_565,Hi.RGB,mo.Normalized)]="U16_RGB_565",a[a.BC1=To(ri.BC1,Hi.RGBA,mo.Normalized)]="BC1",a[a.BC1_SRGB=To(ri.BC1,Hi.RGBA,mo.Normalized|mo.sRGB)]="BC1_SRGB",a[a.BC2=To(ri.BC2,Hi.RGBA,mo.Normalized)]="BC2",a[a.BC2_SRGB=To(ri.BC2,Hi.RGBA,mo.Normalized|mo.sRGB)]="BC2_SRGB",a[a.BC3=To(ri.BC3,Hi.RGBA,mo.Normalized)]="BC3",a[a.BC3_SRGB=To(ri.BC3,Hi.RGBA,mo.Normalized|mo.sRGB)]="BC3_SRGB",a[a.BC4_UNORM=To(ri.BC4_UNORM,Hi.R,mo.Normalized)]="BC4_UNORM",a[a.BC4_SNORM=To(ri.BC4_SNORM,Hi.R,mo.Normalized)]="BC4_SNORM",a[a.BC5_UNORM=To(ri.BC5_UNORM,Hi.RG,mo.Normalized)]="BC5_UNORM",a[a.BC5_SNORM=To(ri.BC5_SNORM,Hi.RG,mo.Normalized)]="BC5_SNORM",a[a.D24=To(ri.D24,Hi.R,mo.Depth)]="D24",a[a.D24_S8=To(ri.D24S8,Hi.RG,mo.Depth|mo.Stencil)]="D24_S8",a[a.D32F=To(ri.D32F,Hi.R,mo.Depth)]="D32F",a[a.D32F_S8=To(ri.D32FS8,Hi.RG,mo.Depth|mo.Stencil)]="D32F_S8",a[a.U8_RGB_RT=To(ri.U8,Hi.RGB,mo.RenderTarget|mo.Normalized)]="U8_RGB_RT",a[a.U8_RGBA_RT=To(ri.U8,Hi.RGBA,mo.RenderTarget|mo.Normalized)]="U8_RGBA_RT",a[a.U8_RGBA_RT_SRGB=To(ri.U8,Hi.RGBA,mo.RenderTarget|mo.Normalized|mo.sRGB)]="U8_RGBA_RT_SRGB"})(ir||(ir={}));function Z1(a){return a>>>8&255}function X0(a){return a>>>16&255}function Jd(a){return a&255}function cT(a){switch(a){case ri.F32:case ri.U32:case ri.S32:return 4;case ri.U16:case ri.S16:case ri.F16:return 2;case ri.U8:case ri.S8:return 1;default:throw new Error("whoops")}}function uT(a){return cT(X0(a))}function e4(a){return Z1(a)}function _m(a){var o=cT(X0(a)),f=Z1(a);return o*f}function Va(a,o){return a&4294967040|o}function qO(a,o){return a&4294902015|o<<8}function fT(a){var o=Jd(a);if(o&mo.Depth)return Fc.Depth;if(o&mo.Normalized)return Fc.Float;var f=X0(a);if(f===ri.F16||f===ri.F32)return Fc.Float;if(f===ri.U8||f===ri.U16||f===ri.U32)return Fc.Uint;if(f===ri.S8||f===ri.S16||f===ri.S32)return Fc.Sint;throw new Error("whoops")}function Ga(a,o){if(o===void 0&&(o=""),!a)throw new Error("Assert fail: ".concat(o))}function ep(a){if(a!=null)return a;throw new Error("Missing object")}function n2(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b&&a.a===o.a}function hT(a,o){a.r=o.r,a.g=o.g,a.b=o.b,a.a=o.a}function dT(a){var o=a.r,f=a.g,m=a.b,w=a.a;return{r:o,g:f,b:m,a:w}}function F_(a,o,f,m){return m===void 0&&(m=1),{r:a,g:o,b:f,a:m}}var X1=F_(0,0,0,0),t4=F_(0,0,0,1),QO=F_(1,1,1,0),n4=F_(1,1,1,1),yy=!0;function r4(a,o){o===void 0&&(o=yy),o&&(a[10]=-a[10],a[14]=-a[14])}function i4(a,o){o===void 0&&(o=yy),o&&(a[10]=-a[10],a[14]=-a[14]+1)}function JO(a,o){if(o===void 0&&(o=yy),o)switch(a){case rs.LESS:return rs.GREATER;case rs.LEQUAL:return rs.GEQUAL;case rs.GEQUAL:return rs.LEQUAL;case rs.GREATER:return rs.LESS;default:return a}else return a}function Yr(a,o){return o===void 0&&(o=yy),o?1-a:a}function o4(a,o){return o===void 0&&(o=yy),o?-a:a}function a4(a,o,f,m){if(m===void 0&&(m=yy),f=JO(f,m),f===rs.LESS)return a<o;if(f===rs.LEQUAL)return a<=o;if(f===rs.GREATER)return a>o;if(f===rs.GEQUAL)return a>=o;throw new Error("whoops")}function $1(a){return!!(a&&!(a&a-1))}function Av(a,o){return a!=null?a:o}function s4(a){return a===void 0?null:a}function e3(a,o,f){a.length=o,a.fill(f)}function k_(a,o){var f=o-1;return a+f&~f}function l4(a,o){return((a+o-1)/o|0)*o}function t3(a,o,f){for(var m=0,w=a.length;m<w;){var O=m+(w-m>>>1),L=f(o,a[O]);L<0?w=O:m=O+1}return m}function ml(a,o,f){var m=t3(a,o,f);a.splice(m,0,o)}function n3(a,o,f){return f?a|=o:a&=~o,a}function Cv(a,o){for(var f=new Array(a),m=0;m<a;m++)f[m]=o();return f}function r3(a,o){o===void 0&&(o=1);var f=a.split(`
`);return f.map(function(m,w){return"".concat(i3(""+(o+w),4," "),"  ").concat(m)}).join(`
`)}function i3(a,o,f){for(f===void 0&&(f="0");a.length<o;)a="".concat(f).concat(a);return a}function c4(a,o){for(var f=[],m=a;m<a+o;m++)f.push(m);return f}function pT(a,o){a.blendDstFactor=o.blendDstFactor,a.blendSrcFactor=o.blendSrcFactor,a.blendMode=o.blendMode}function U_(a,o){return a===void 0&&(a={}),a.compare=o.compare,a.depthFailOp=o.depthFailOp,a.passOp=o.passOp,a.failOp=o.failOp,a.mask=o.mask,a}function qf(a,o){return a===void 0&&(a={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),pT(a.rgbBlendState,o.rgbBlendState),pT(a.alphaBlendState,o.alphaBlendState),a.channelWriteMask=o.channelWriteMask,a}function $0(a,o){a.length!==o.length&&(a.length=o.length);for(var f=0;f<o.length;f++)a[f]=qf(a[f],o[f])}function Y1(a,o){o.attachmentsState!==void 0&&$0(a.attachmentsState,o.attachmentsState),a.blendConstant&&o.blendConstant&&hT(a.blendConstant,o.blendConstant),a.depthCompare=Av(o.depthCompare,a.depthCompare),a.depthWrite=Av(o.depthWrite,a.depthWrite),a.stencilWrite=Av(o.stencilWrite,a.stencilWrite),a.stencilFront&&o.stencilFront&&U_(a.stencilFront,o.stencilFront),a.stencilBack&&o.stencilBack&&U_(a.stencilBack,o.stencilBack),a.cullMode=Av(o.cullMode,a.cullMode),a.frontFace=Av(o.frontFace,a.frontFace),a.polygonOffset=Av(o.polygonOffset,a.polygonOffset),a.polygonOffsetFactor=Av(o.polygonOffsetFactor,a.polygonOffsetFactor),a.polygonOffsetUnits=Av(o.polygonOffsetUnits,a.polygonOffsetUnits)}function bm(a){var o=Object.assign({},a);return o.attachmentsState=[],$0(o.attachmentsState,a.attachmentsState),o.blendConstant=o.blendConstant&&dT(o.blendConstant),o.stencilFront=U_(void 0,a.stencilFront),o.stencilBack=U_(void 0,a.stencilBack),o}function Mf(a,o){o.channelWriteMask!==void 0&&(a.channelWriteMask=o.channelWriteMask),o.rgbBlendMode!==void 0&&(a.rgbBlendState.blendMode=o.rgbBlendMode),o.alphaBlendMode!==void 0&&(a.alphaBlendState.blendMode=o.alphaBlendMode),o.rgbBlendSrcFactor!==void 0&&(a.rgbBlendState.blendSrcFactor=o.rgbBlendSrcFactor),o.alphaBlendSrcFactor!==void 0&&(a.alphaBlendState.blendSrcFactor=o.alphaBlendSrcFactor),o.rgbBlendDstFactor!==void 0&&(a.rgbBlendState.blendDstFactor=o.rgbBlendDstFactor),o.alphaBlendDstFactor!==void 0&&(a.alphaBlendState.blendDstFactor=o.alphaBlendDstFactor)}var z_={blendMode:ff.ADD,blendSrcFactor:Ja.ONE,blendDstFactor:Ja.ZERO},Ov={attachmentsState:[{channelWriteMask:hf.ALL,rgbBlendState:z_,alphaBlendState:z_}],blendConstant:dT(X1),depthWrite:!0,depthCompare:rs.LEQUAL,stencilWrite:!1,stencilFront:{compare:rs.ALWAYS,passOp:Bc.KEEP,depthFailOp:Bc.KEEP,failOp:Bc.KEEP},stencilBack:{compare:rs.ALWAYS,passOp:Bc.KEEP,depthFailOp:Bc.KEEP,failOp:Bc.KEEP},cullMode:vh.NONE,frontFace:B_.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function _y(a,o){a===void 0&&(a=null),o===void 0&&(o=Ov);var f=bm(o);return a!==null&&Y1(f,a),f}var vd=_y({depthCompare:rs.ALWAYS,depthWrite:!1},Ov);function K1(a,o){return a.attachmentsState===void 0&&(a.attachmentsState=[],$0(a.attachmentsState,Ov.attachmentsState)),Mf(a.attachmentsState[0],o),a}var q1={texture:null,sampler:null,formatKind:Fc.Float,dimension:hs.TEXTURE_2D};function md(a,o,f){if(a.length!==o.length)return!1;for(var m=0;m<a.length;m++)if(!f(a[m],o[m]))return!1;return!0}function mh(a,o){for(var f=Array(a.length),m=0;m<a.length;m++)f[m]=o(a[m]);return f}function o3(a,o){return a.texture===o.texture&&a.binding===o.binding}function r2(a,o){return a.buffer===o.buffer&&a.size===o.size&&a.binding===o.binding&&a.offset===o.offset}function a3(a,o){return a===null?o===null:o===null?!1:a.sampler===o.sampler&&a.texture===o.texture&&a.dimension===o.dimension&&a.formatKind===o.formatKind&&a.comparison===o.comparison}function s3(a,o){return a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],a.storageBufferBindings=a.storageBufferBindings||[],a.storageTextureBindings=a.storageTextureBindings||[],o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],!(a.samplerBindings.length!==o.samplerBindings.length||!md(a.samplerBindings,o.samplerBindings,a3)||!md(a.uniformBufferBindings,o.uniformBufferBindings,r2)||!md(a.storageBufferBindings,o.storageBufferBindings,r2)||!md(a.storageTextureBindings,o.storageTextureBindings,o3))}function vT(a,o){return a.blendMode==o.blendMode&&a.blendSrcFactor===o.blendSrcFactor&&a.blendDstFactor===o.blendDstFactor}function l3(a,o){return!(!vT(a.rgbBlendState,o.rgbBlendState)||!vT(a.alphaBlendState,o.alphaBlendState)||a.channelWriteMask!==o.channelWriteMask)}function Q1(a,o){return a.compare==o.compare&&a.depthFailOp===o.depthFailOp&&a.failOp===o.failOp&&a.passOp===o.passOp&&a.mask===o.mask}function c3(a,o){return!md(a.attachmentsState,o.attachmentsState,l3)||a.blendConstant&&o.blendConstant&&!n2(a.blendConstant,o.blendConstant)||a.stencilFront&&o.stencilFront&&!Q1(a.stencilFront,o.stencilFront)||a.stencilBack&&o.stencilBack&&!Q1(a.stencilBack,o.stencilBack)?!1:a.depthCompare===o.depthCompare&&a.depthWrite===o.depthWrite&&a.stencilWrite===o.stencilWrite&&a.cullMode===o.cullMode&&a.frontFace===o.frontFace&&a.polygonOffset===o.polygonOffset&&a.polygonOffsetFactor===o.polygonOffsetFactor&&a.polygonOffsetUnits===o.polygonOffsetUnits}function u3(a,o){return a.id===o.id}function gd(a,o){return a===o}function mT(a,o){return!(a.topology!==o.topology||a.inputLayout!==o.inputLayout||a.sampleCount!==o.sampleCount||a.megaStateDescriptor&&o.megaStateDescriptor&&!c3(a.megaStateDescriptor,o.megaStateDescriptor)||!u3(a.program,o.program)||!md(a.colorAttachmentFormats,o.colorAttachmentFormats,gd)||a.depthStencilAttachmentFormat!==o.depthStencilAttachmentFormat)}function f3(a,o){return a.offset===o.offset&&a.shaderLocation===o.shaderLocation&&a.format===o.format&&a.divisor===o.divisor}function h3(a,o){return(0,Qd.Z)(a)?(0,Qd.Z)(o):(0,Qd.Z)(o)?!1:a.arrayStride===o.arrayStride&&a.stepMode===o.stepMode&&md(a.attributes,o.attributes,f3)}function i2(a,o){return!(a.indexBufferFormat!==o.indexBufferFormat||!md(a.vertexBufferDescriptors,o.vertexBufferDescriptors,h3)||!u3(a.program,o.program))}function gT(a,o){return a.addressModeU===o.addressModeU&&a.addressModeV===o.addressModeV&&a.minFilter===o.minFilter&&a.magFilter===o.magFilter&&a.mipmapFilter===o.mipmapFilter&&a.lodMinClamp===o.lodMinClamp&&a.lodMaxClamp===o.lodMaxClamp&&a.maxAnisotropy===o.maxAnisotropy&&a.compareFunction===o.compareFunction}function yT(a){var o=a.sampler,f=a.texture,m=a.dimension,w=a.formatKind,O=a.comparison;return{sampler:o,texture:f,dimension:m,formatKind:w,comparison:O}}function _T(a){var o=a.buffer,f=a.size,m=a.binding,w=a.offset;return{binding:m,buffer:o,offset:w,size:f}}function bT(a){var o=a.binding,f=a.texture;return{binding:o,texture:f}}function xT(a){var o=a.samplerBindings&&mh(a.samplerBindings,yT),f=a.uniformBufferBindings&&mh(a.uniformBufferBindings,_T),m=a.storageBufferBindings&&mh(a.storageBufferBindings,_T),w=a.storageTextureBindings&&mh(a.storageTextureBindings,bT);return{samplerBindings:o,uniformBufferBindings:f,storageBufferBindings:m,storageTextureBindings:w,pipeline:a.pipeline}}function p3(a){var o=a.inputLayout,f=a.program,m=a.topology,w=a.megaStateDescriptor&&bm(a.megaStateDescriptor),O=a.colorAttachmentFormats.slice(),L=a.depthStencilAttachmentFormat,F=a.sampleCount;return{inputLayout:o,megaStateDescriptor:w,program:f,topology:m,colorAttachmentFormats:O,depthStencilAttachmentFormat:L,sampleCount:F}}function ET(a){var o=a.shaderLocation,f=a.format,m=a.offset,w=a.divisor;return{shaderLocation:o,format:f,offset:m,divisor:w}}function v3(a){if((0,Qd.Z)(a))return a;var o=a.arrayStride,f=a.stepMode,m=mh(a.attributes,ET);return{arrayStride:o,stepMode:f,attributes:m}}function by(a){var o=mh(a.vertexBufferDescriptors,v3),f=a.indexBufferFormat,m=a.program;return{vertexBufferDescriptors:o,indexBufferFormat:f,program:m}}var As,u4=/([^[]*)(\[[0-9]+\])?/;function J1(a){if(a[a.length-1]!=="]")return{name:a,length:1,isArray:!1};var o=a.match(u4);if(!o||o.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(a));return{name:o[1],length:Number(o[2])||1,isArray:!!o[2]}}function lu(){var a=null;return function(o,f,m){var w=a!==m;return w&&(o.uniform1i(f,m),a=m),w}}function Sc(a,o,f,m){var w=null,O=null;return function(L,F,V){var re=o(V,f),Ee=re.length,Te=!1;if(w===null)w=new Float32Array(Ee),O=Ee,Te=!0;else{Ga(O===Ee,"Uniform length cannot change.");for(var $e=0;$e<Ee;++$e)if(re[$e]!==w[$e]){Te=!0;break}}return Te&&(m(L,a,F,re),w.set(re)),Te}}function gh(a,o,f,m){a[o](f,m)}function Rv(a,o,f,m){a[o](f,!1,m)}var m3={},g3={},y3={},o2=[0];function j_(a,o,f,m){o===1&&typeof a=="boolean"&&(a=a?1:0),Number.isFinite(a)&&(o2[0]=a,a=o2);var w=a.length;if(a instanceof f)return a;var O=m[w];O||(O=new f(w),m[w]=O);for(var L=0;L<w;L++)O[L]=a[L];return O}function zh(a,o){return j_(a,o,Float32Array,m3)}function xm(a,o){return j_(a,o,Int32Array,g3)}function xy(a,o){return j_(a,o,Uint32Array,y3)}var a2=(As={},As[An.FLOAT]=Sc.bind(null,"uniform1fv",zh,1,gh),As[An.FLOAT_VEC2]=Sc.bind(null,"uniform2fv",zh,2,gh),As[An.FLOAT_VEC3]=Sc.bind(null,"uniform3fv",zh,3,gh),As[An.FLOAT_VEC4]=Sc.bind(null,"uniform4fv",zh,4,gh),As[An.INT]=Sc.bind(null,"uniform1iv",xm,1,gh),As[An.INT_VEC2]=Sc.bind(null,"uniform2iv",xm,2,gh),As[An.INT_VEC3]=Sc.bind(null,"uniform3iv",xm,3,gh),As[An.INT_VEC4]=Sc.bind(null,"uniform4iv",xm,4,gh),As[An.BOOL]=Sc.bind(null,"uniform1iv",xm,1,gh),As[An.BOOL_VEC2]=Sc.bind(null,"uniform2iv",xm,2,gh),As[An.BOOL_VEC3]=Sc.bind(null,"uniform3iv",xm,3,gh),As[An.BOOL_VEC4]=Sc.bind(null,"uniform4iv",xm,4,gh),As[An.FLOAT_MAT2]=Sc.bind(null,"uniformMatrix2fv",zh,4,Rv),As[An.FLOAT_MAT3]=Sc.bind(null,"uniformMatrix3fv",zh,9,Rv),As[An.FLOAT_MAT4]=Sc.bind(null,"uniformMatrix4fv",zh,16,Rv),As[An.UNSIGNED_INT]=Sc.bind(null,"uniform1uiv",xy,1,gh),As[An.UNSIGNED_INT_VEC2]=Sc.bind(null,"uniform2uiv",xy,2,gh),As[An.UNSIGNED_INT_VEC3]=Sc.bind(null,"uniform3uiv",xy,3,gh),As[An.UNSIGNED_INT_VEC4]=Sc.bind(null,"uniform4uiv",xy,4,gh),As[An.FLOAT_MAT2x3]=Sc.bind(null,"uniformMatrix2x3fv",zh,6,Rv),As[An.FLOAT_MAT2x4]=Sc.bind(null,"uniformMatrix2x4fv",zh,8,Rv),As[An.FLOAT_MAT3x2]=Sc.bind(null,"uniformMatrix3x2fv",zh,6,Rv),As[An.FLOAT_MAT3x4]=Sc.bind(null,"uniformMatrix3x4fv",zh,12,Rv),As[An.FLOAT_MAT4x2]=Sc.bind(null,"uniformMatrix4x2fv",zh,8,Rv),As[An.FLOAT_MAT4x3]=Sc.bind(null,"uniformMatrix4x3fv",zh,12,Rv),As[An.SAMPLER_2D]=lu,As[An.SAMPLER_CUBE]=lu,As[An.SAMPLER_3D]=lu,As[An.SAMPLER_2D_SHADOW]=lu,As[An.SAMPLER_2D_ARRAY]=lu,As[An.SAMPLER_2D_ARRAY_SHADOW]=lu,As[An.SAMPLER_CUBE_SHADOW]=lu,As[An.INT_SAMPLER_2D]=lu,As[An.INT_SAMPLER_3D]=lu,As[An.INT_SAMPLER_CUBE]=lu,As[An.INT_SAMPLER_2D_ARRAY]=lu,As[An.UNSIGNED_INT_SAMPLER_2D]=lu,As[An.UNSIGNED_INT_SAMPLER_3D]=lu,As[An.UNSIGNED_INT_SAMPLER_CUBE]=lu,As[An.UNSIGNED_INT_SAMPLER_2D_ARRAY]=lu,As);function ST(a,o,f){var m=a2[f.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(f.type));return m().bind(null,a,o)}var _3={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function b3(a){return Object.prototype.toString.call(a)in _3}function V_(a,o){return"#define ".concat(a," ").concat(o)}function x3(a){var o={};return a.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,m,w){var O=Number(w);return o[m]=isNaN(O)?w:O,""}),o}function E3(a,o){var f=[];return a.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,w,O){var L=Number(w);return f.push({location:isNaN(L)?o[w]:L,name:O}),""}),f}function eb(a){var o=[],f=[];return a.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,w,O){var L=[];return O.trim().replace(`\r
`,`
`).split(`
`).forEach(function(F){var V=__read(F.trim().split(/\s+/),2),re=V[0],Ee=V[1];L.push({type:re.trim(),name:Ee.replace(";","").trim()})}),f.push({type:w.trim(),uniforms:L}),""}),a.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,w){return w.trim().replace(`\r
`,`
`).split(`
`).forEach(function(O){var L=O.trim().split(" "),F=L[0]||"",V=L[1]||"",re=V.indexOf("[")>-1;if(V=V.replace(";","").replace("[","").trim(),!F.startsWith("#")){if(F){var Ee=f.find(function(Dt){return F===Dt.type});if(Ee)if(re)for(var Te=function(Dt){Ee.uniforms.forEach(function(nn){o.push("".concat(V,"[").concat(Dt,"].").concat(nn.name))})},$e=0;$e<5;$e++)Te($e);else Ee.uniforms.forEach(function(Dt){o.push("".concat(V,".").concat(Dt.name))})}V&&o.push(V)}}),""}),o}function H_(a){if(a===void 0)return null;var o=/binding\s*=\s*(\d+)/.exec(a);if(o!==null){var f=parseInt(o[1],10);if(!Number.isNaN(f))return f}return null}function TT(a){var o="",f=a;return[f,o]}function Mv(a,o,f,m,w){var O;m===void 0&&(m=null),w===void 0&&(w=!0);var L=a.glslVersion==="#version 100",F=o==="frag"&&((O=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||O===void 0?void 0:O.length)>1,V=f.replace(`\r
`,`
`).split(`
`).map(function(no){return no.replace(/[/][/].*$/,"")}).filter(function(no){var Wr=!no||/^\s+$/.test(no);return!Wr}),re="";m!==null&&(re=Object.keys(m).map(function(no){return V_(no,m[no])}).join(`
`));var Ee=V.find(function(no){return no.startsWith("precision")})||"precision mediump float;",Te=w?V.filter(function(no){return!no.startsWith("precision")}).join(`
`):V.join(`
`),$e="";if(a.viewportOrigin===pd.UPPER_LEFT&&($e+="".concat(V_("VIEWPORT_ORIGIN_TL","1"),`
`)),a.clipSpaceNearZ===bg.ZERO&&($e+="".concat(V_("CLIPSPACE_NEAR_ZERO","1"),`
`)),a.explicitBindingLocations){var Dt=0,nn=0,Tn=0;Te=Te.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(no,Wr,ro,Ba){var ls=ro?"".concat(ro,", "):"";return"layout(".concat(ls,"set = ").concat(Dt,", binding = ").concat(nn++,") uniform ").concat(Ba)}),Dt++,nn=0,Ga(a.separateSamplerTextures),Te=Te.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(no,Wr,ro,Ba,ls){var ta=H_(ro);ta===null&&(ta=nn++);var _s=(0,So.CR)(TT(Ba),2),is=_s[0],ds=_s[1];return o==="frag"?`
layout(set = `.concat(Dt,", binding = ").concat(ta*2+0,") uniform texture").concat(is," T_").concat(ls,`;
layout(set = `).concat(Dt,", binding = ").concat(ta*2+1,") uniform sampler").concat(ds," S_").concat(ls,";").trim():""}),Te=Te.replace(o==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(no,Wr){return"layout(location = ".concat(Tn++,") ").concat(Wr)}),$e+="".concat(V_("gl_VertexID","gl_VertexIndex"),`
`),$e+="".concat(V_("gl_InstanceID","gl_InstanceIndex"),`
`),Ee=Ee.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var sr=0;Te=Te.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(no,Wr,ro,Ba,ls){var ta=H_(ro);return ta===null&&(ta=sr++),"uniform sampler".concat(Ba," ").concat(ls,"; // BINDING=").concat(ta)})}if(Te=Te.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return"SAMPLER_".concat(Wr,"(P_").concat(ro,")")}),Te=Te.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return"PP_SAMPLER_".concat(Wr,"(P_").concat(ro,")")}),Te=Te.replace(/\bPU_TEXTURE\((.*?)\)/g,function(no,Wr){return"TEXTURE(P_".concat(Wr,")")}),a.separateSamplerTextures)Te=Te.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){var Ba=(0,So.CR)(TT(Wr),2),ls=Ba[0],ta=Ba[1];return"texture".concat(ls," T_P_").concat(ro,", sampler").concat(ta," S_P_").concat(ro)}),Te=Te.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return"T_".concat(ro,", S_").concat(ro)}),Te=Te.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return"sampler".concat(Wr,"(T_").concat(ro,", S_").concat(ro,")")}),Te=Te.replace(/\bTEXTURE\((.*?)\)/g,function(no,Wr){return"T_".concat(Wr)});else{var Br=[];Te=Te.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return"sampler".concat(Wr," P_").concat(ro)}),Te=Te.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return ro}),Te=Te.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(no,Wr,ro){return Br.push([ro,Wr]),ro}),L&&Br.forEach(function(no){var Wr=(0,So.CR)(no,2),ro=Wr[0],Ba=Wr[1];Te=Te.replace(new RegExp("texture\\(".concat(ro),"g"),function(){return"texture".concat(Ba,"(").concat(ro)})}),Te=Te.replace(/\bTEXTURE\((.*?)\)/g,function(no,Wr){return Wr})}var Er="".concat(L?"":a.glslVersion,`
`).concat(L&&F?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(L&&o==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(w?Ee:"",`
`).concat($e||"").concat(re?re+`
`:"",`
`).concat(Te,`
`).trim();if(a.explicitBindingLocations&&o==="frag"&&(Er=Er.replace(/^\b(out)\b/g,function(no,Wr){return"layout(location = 0) ".concat(Wr)})),L){if(o==="frag"&&(Er=Er.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(no,Wr,ro){return"varying ".concat(Wr," ").concat(ro,`;
`)})),o==="vert"&&(Er=Er.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(no,Wr,ro){return"varying ".concat(Wr," ").concat(ro,`;
`)}),Er=Er.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(no,Wr,ro){return"attribute ".concat(Wr," ").concat(ro,`;
`)})),Er=Er.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(no,Wr){return Wr.trim().replace(/^.*$/gm,function(ro){var Ba=ro.trim();return Ba.startsWith("#")?Ba:ro?"uniform ".concat(Ba):""})}),o==="frag")if(F){var ui=[];Er=Er.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(no,Wr){return ui.push(Wr),"vec4 ".concat(Wr,`;
`)});var Vi=Er.lastIndexOf("}");Er=Er.substring(0,Vi)+`
    `.concat(ui.map(function(no,Wr){return"gl_FragData[".concat(Wr,"] = ").concat(no,`;
    `)}).join(`
`))+Er.substring(Vi)}else{var Po;if(Er=Er.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(no,Wr,ro){return Po=ro,"".concat(Wr," ").concat(ro,`;
`)}),Po){var Vi=Er.lastIndexOf("}");Er=Er.substring(0,Vi)+`
  gl_FragColor = vec4(`.concat(Po,`);
`)+Er.substring(Vi)}}Er=Er.replace(/^\s*layout\((.*)\)/gm,"")}return Er}function S3(a,o,f,m){m===void 0&&(m=null);var w=Mv(a,"vert",o,m),O=Mv(a,"frag",f,m);return{vert:o,frag:f,preprocessedVert:w,preprocessedFrag:O}}var tp=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=a.call(this)||this;return O.id=m,O.device=w,O.device.resourceCreationTracker!==null&&O.device.resourceCreationTracker.trackResourceCreated(O),O}return o.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},o}(ph),tb=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.Bindings;var F=O.uniformBufferBindings,V=O.samplerBindings;return L.uniformBufferBindings=F||[],L.samplerBindings=V||[],L.bindingLayouts=L.createBindingLayouts(),L}return o.prototype.createBindingLayouts=function(){var f=0,m=0,w=[],O=this.uniformBufferBindings.length,L=this.samplerBindings.length;return w.push({firstUniformBuffer:f,numUniformBuffers:O,firstSampler:m,numSamplers:L}),f+=O,m+=L,{numUniformBuffers:f,numSamplers:m,bindingLayoutTables:w}},o}(tp);function Ho(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}function wT(a){var o=X0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_UNORM:case ri.BC4_SNORM:case ri.BC5_UNORM:case ri.BC5_SNORM:return!0;default:return!1}}function AT(a){var o=Jd(a);if(o&mo.Normalized)return!1;var f=X0(a);return f===ri.S8||f===ri.S16||f===ri.S32||f===ri.U8||f===ri.U16||f===ri.U32}function s2(a){switch(a){case d0.STATIC:return An.STATIC_DRAW;case d0.DYNAMIC:return An.DYNAMIC_DRAW}}function CT(a){if(a&Ol.INDEX)return An.ELEMENT_ARRAY_BUFFER;if(a&Ol.VERTEX)return An.ARRAY_BUFFER;if(a&Ol.UNIFORM)return An.UNIFORM_BUFFER}function nb(a){switch(a){case xu.TRIANGLES:return An.TRIANGLES;case xu.POINTS:return An.POINTS;case xu.TRIANGLE_STRIP:return An.TRIANGLE_STRIP;case xu.LINES:return An.LINES;case xu.LINE_STRIP:return An.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function rb(a){switch(a){case ri.U8:return An.UNSIGNED_BYTE;case ri.U16:return An.UNSIGNED_SHORT;case ri.U32:return An.UNSIGNED_INT;case ri.S8:return An.BYTE;case ri.S16:return An.SHORT;case ri.S32:return An.INT;case ri.F16:return An.HALF_FLOAT;case ri.F32:return An.FLOAT;default:throw new Error("whoops")}}function ib(a){switch(a){case Hi.R:return 1;case Hi.RG:return 2;case Hi.RGB:return 3;case Hi.RGBA:return 4;default:return 1}}function ob(a){var o=X0(a),f=Z1(a),m=Jd(a),w=rb(o),O=ib(f),L=!!(m&mo.Normalized);return{size:O,type:w,normalized:L}}function ab(a){switch(a){case ir.U8_R:return An.UNSIGNED_BYTE;case ir.U16_R:return An.UNSIGNED_SHORT;case ir.U32_R:return An.UNSIGNED_INT;default:throw new Error("whoops")}}function Em(a){switch(a){case al.CLAMP_TO_EDGE:return An.CLAMP_TO_EDGE;case al.REPEAT:return An.REPEAT;case al.MIRRORED_REPEAT:return An.MIRRORED_REPEAT;default:throw new Error("whoops")}}function xg(a,o){if(o===$u.LINEAR&&a===Nc.BILINEAR)return An.LINEAR_MIPMAP_LINEAR;if(o===$u.LINEAR&&a===Nc.POINT)return An.NEAREST_MIPMAP_LINEAR;if(o===$u.NEAREST&&a===Nc.BILINEAR)return An.LINEAR_MIPMAP_NEAREST;if(o===$u.NEAREST&&a===Nc.POINT)return An.NEAREST_MIPMAP_NEAREST;if(o===$u.NO_MIP&&a===Nc.BILINEAR)return An.LINEAR;if(o===$u.NO_MIP&&a===Nc.POINT)return An.NEAREST;throw new Error("Unknown texture filter mode")}function Pv(a,o){o===void 0&&(o=0);var f=a;return f.gl_buffer_pages[o/f.pageByteSize|0]}function Iv(a){var o=a;return o.gl_texture}function Ey(a){var o=a;return o.gl_sampler}function Lv(a,o){a.name=o,a.__SPECTOR_Metadata={name:o}}function sb(a,o){for(var f=[];;){var m=o.exec(a);if(!m)break;f.push(m)}return f}function Dv(a){return a.blendMode==ff.ADD&&a.blendSrcFactor==Ja.ONE&&a.blendDstFactor===Ja.ZERO}function lb(a){switch(a){case gy.OcclusionConservative:return An.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function Pp(a){if(a===hs.TEXTURE_2D)return An.TEXTURE_2D;if(a===hs.TEXTURE_2D_ARRAY)return An.TEXTURE_2D_ARRAY;if(a===hs.TEXTURE_CUBE_MAP)return An.TEXTURE_CUBE_MAP;if(a===hs.TEXTURE_3D)return An.TEXTURE_3D;throw new Error("whoops")}function yd(a,o,f,m){return!(a%f!==0||o%m!==0)}var Ip=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.Buffer;var F=O.viewOrSize,V=O.usage,re=O.hint,Ee=re===void 0?d0.STATIC:re,Te=w.uniformBufferMaxPageByteSize,$e=w.gl,Dt=V&Ol.UNIFORM;Dt||(Ho($e)?$e.bindVertexArray(null):w.OES_vertex_array_object.bindVertexArrayOES(null));var nn=(0,ym.Z)(F)?k_(F,4):k_(F.byteLength,4);L.gl_buffer_pages=[];var Tn;if(Dt){for(var sr=nn;sr>0;)L.gl_buffer_pages.push(L.createBufferPage(Math.min(sr,Te),V,Ee)),sr-=Te;Tn=Te}else L.gl_buffer_pages.push(L.createBufferPage(nn,V,Ee)),Tn=nn;return L.pageByteSize=Tn,L.byteSize=nn,L.usage=V,L.gl_target=CT(V),(0,ym.Z)(F)||L.setSubData(0,new Uint8Array(F.buffer)),Dt||(Ho($e)?$e.bindVertexArray(L.device.currentBoundVAO):w.OES_vertex_array_object.bindVertexArrayOES(L.device.currentBoundVAO)),L}return o.prototype.setSubData=function(f,m,w,O){w===void 0&&(w=0),O===void 0&&(O=m.byteLength-w);for(var L=this.device.gl,F=this.pageByteSize,V=f+O,re=f,Ee=f%F;re<V;){var Te=Ho(L)?L.COPY_WRITE_BUFFER:this.gl_target,$e=Pv(this,re);if($e.ubo)return;L.bindBuffer(Te,$e),Ho(L)?L.bufferSubData(Te,Ee,m,w,Math.min(V-re,F)):L.bufferSubData(Te,Ee,m),re+=F,Ee=0,w+=F,this.device.debugGroupStatisticsBufferUpload()}},o.prototype.destroy=function(){a.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},o.prototype.createBufferPage=function(f,m,w){var O=this.device.gl,L=m&Ol.UNIFORM;if(!Ho(O)&&L)return{ubo:!0};var F=this.device.ensureResourceExists(O.createBuffer()),V=CT(m),re=s2(w);return O.bindBuffer(V,F),O.bufferData(V,f,re),F},o}(tp),OT=function(a){(0,So.ZT)(o,a);function o(f){var m,w,O,L,F=f.id,V=f.device,re=f.descriptor,Ee,Te=a.call(this,{id:F,device:V})||this;Te.type=Ws.InputLayout;var $e=re.vertexBufferDescriptors,Dt=re.indexBufferFormat,nn=re.program;Ga(Dt===ir.U16_R||Dt===ir.U32_R||Dt===null);var Tn=Dt!==null?ab(Dt):null,sr=Dt!==null?uT(Dt):null,Br=Te.device.gl,Er=Te.device.ensureResourceExists(Ho(Br)?Br.createVertexArray():V.OES_vertex_array_object.createVertexArrayOES());Ho(Br)?Br.bindVertexArray(Er):V.OES_vertex_array_object.bindVertexArrayOES(Er),Br.bindBuffer(Br.ARRAY_BUFFER,Pv(Te.device.fallbackVertexBuffer));try{for(var ui=(0,So.XA)(re.vertexBufferDescriptors),Vi=ui.next();!Vi.done;Vi=ui.next()){var Po=Vi.value,no=Po.stepMode,Wr=Po.attributes;try{for(var ro=(O=void 0,(0,So.XA)(Wr)),Ba=ro.next();!Ba.done;Ba=ro.next()){var ls=Ba.value,ta=ls.shaderLocation,_s=ls.format,is=ls.divisor,ds=is===void 0?1:is,np=Ho(Br)?ta:(Ee=nn.attributes[ta])===null||Ee===void 0?void 0:Ee.location,rp=ob(_s);if(ls.vertexFormat=rp,!(0,Qd.Z)(np)){AT(_s);var Rm=rp.size,kv=rp.type,Qf=rp.normalized;Br.vertexAttribPointer(np,Rm,kv,Qf,0,0),no===_g.INSTANCE&&(Ho(Br)?Br.vertexAttribDivisor(np,ds):V.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(np,ds)),Br.enableVertexAttribArray(np)}}}catch(My){O={error:My}}finally{try{Ba&&!Ba.done&&(L=ro.return)&&L.call(ro)}finally{if(O)throw O.error}}}}catch(My){m={error:My}}finally{try{Vi&&!Vi.done&&(w=ui.return)&&w.call(ui)}finally{if(m)throw m.error}}return Ho(Br)?Br.bindVertexArray(null):V.OES_vertex_array_object.bindVertexArrayOES(null),Te.vertexBufferDescriptors=$e,Te.vao=Er,Te.indexBufferFormat=Dt,Te.indexBufferType=Tn,Te.indexBufferCompByteSize=sr,Te.program=nn,Te}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(Ho(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},o}(tp),l2=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=f.fake,F=a.call(this,{id:m,device:w})||this;F.type=Ws.Texture,O=(0,So.pi)({dimension:hs.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},O);var V=F.device.gl,re,Ee,Te=F.clampmipLevelCount(O);if(F.immutable=O.usage===Kf.RENDER_TARGET,F.pixelStore=O.pixelStore,F.format=O.format,F.dimension=O.dimension,F.formatKind=fT(O.format),F.width=O.width,F.height=O.height,F.depthOrArrayLayers=O.depthOrArrayLayers,F.mipmaps=Te>=1,!L){Ee=F.device.ensureResourceExists(V.createTexture());var $e=F.device.translateTextureType(O.format),Dt=F.device.translateTextureInternalFormat(O.format);if(F.device.setActiveTexture(V.TEXTURE0),F.device.currentTextures[0]=null,F.preprocessImage(),O.dimension===hs.TEXTURE_2D){if(re=An.TEXTURE_2D,V.bindTexture(re,Ee),F.immutable)if(Ho(V))V.texStorage2D(re,Te,Dt,O.width,O.height);else{var nn=(Dt===An.DEPTH_COMPONENT||F.isNPOT(),0);(F.format===ir.D32F||F.format===ir.D24_S8)&&!Ho(V)&&!w.WEBGL_depth_texture||(V.texImage2D(re,nn,Dt,O.width,O.height,0,Dt,$e,null),F.mipmaps&&(F.mipmaps=!1,V.texParameteri(An.TEXTURE_2D,An.TEXTURE_MIN_FILTER,An.LINEAR),V.texParameteri(An.TEXTURE_2D,An.TEXTURE_WRAP_S,An.CLAMP_TO_EDGE),V.texParameteri(An.TEXTURE_2D,An.TEXTURE_WRAP_T,An.CLAMP_TO_EDGE)))}Ga(O.depthOrArrayLayers===1)}else if(O.dimension===hs.TEXTURE_2D_ARRAY)re=An.TEXTURE_2D_ARRAY,V.bindTexture(re,Ee),F.immutable&&Ho(V)&&V.texStorage3D(re,Te,Dt,O.width,O.height,O.depthOrArrayLayers);else if(O.dimension===hs.TEXTURE_3D)re=An.TEXTURE_3D,V.bindTexture(re,Ee),F.immutable&&Ho(V)&&V.texStorage3D(re,Te,Dt,O.width,O.height,O.depthOrArrayLayers);else if(O.dimension===hs.TEXTURE_CUBE_MAP)re=An.TEXTURE_CUBE_MAP,V.bindTexture(re,Ee),F.immutable&&Ho(V)&&V.texStorage2D(re,Te,Dt,O.width,O.height),Ga(O.depthOrArrayLayers===6);else throw new Error("whoops")}return F.gl_texture=Ee,F.gl_target=re,F.mipLevelCount=Te,F}return o.prototype.setImageData=function(f,m){m===void 0&&(m=0);var w=this.device.gl;wT(this.format);var O=this.gl_target===An.TEXTURE_3D||this.gl_target===An.TEXTURE_2D_ARRAY,L=this.gl_target===An.TEXTURE_CUBE_MAP,F=b3(f[0]);this.device.setActiveTexture(w.TEXTURE0),this.device.currentTextures[0]=null;var V=f[0],re,Ee;F?(re=this.width,Ee=this.height):(re=V.width,Ee=V.height,this.width=re,this.height=Ee),w.bindTexture(this.gl_target,this.gl_texture);var Te=this.device.translateTextureFormat(this.format),$e=Ho(w)?this.device.translateInternalTextureFormat(this.format):Te,Dt=this.device.translateTextureType(this.format);this.preprocessImage();for(var nn=0;nn<this.depthOrArrayLayers;nn++){var Tn=f[nn],sr=this.gl_target;L&&(sr=An.TEXTURE_CUBE_MAP_POSITIVE_X+nn%6),this.immutable?w.texSubImage2D(sr,m,0,0,re,Ee,Te,Dt,Tn):Ho(w)?O?w.texImage3D(sr,m,$e,re,Ee,this.depthOrArrayLayers,0,Te,Dt,Tn):w.texImage2D(sr,m,$e,re,Ee,0,Te,Dt,Tn):F?w.texImage2D(sr,m,Te,re,Ee,0,Te,Dt,Tn):w.texImage2D(sr,m,Te,Te,Dt,Tn)}this.mipmaps&&this.generateMipmap(O)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteTexture(Iv(this))},o.prototype.clampmipLevelCount=function(f){if(f.dimension===hs.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var m=X0(f.format);if(m===ri.BC1)for(var w=f.width,O=f.height,L=0;L<f.mipLevelCount;L++){if(w<=2||O<=2)return L-1;w=Math.max(w/2|0,1),O=Math.max(O/2|0,1)}}return f.mipLevelCount},o.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(An.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(An.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(An.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},o.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var m=this.device.gl;return!Ho(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),f?(m.texParameteri(this.gl_target,An.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,An.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,An.TEXTURE_MIN_FILTER,An.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,An.TEXTURE_MAG_FILTER,An.LINEAR)):m.texParameteri(An.TEXTURE_2D,An.TEXTURE_MIN_FILTER,An.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},o.prototype.isNPOT=function(){var f=this.device.gl;return Ho(f)?!1:!$1(this.width)||!$1(this.height)},o}(tp),T3=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.RenderTarget,L.gl_renderbuffer=null,L.texture=null;var F=L.device.gl,V=O.format,re=O.width,Ee=O.height,Te=O.sampleCount,$e=Te===void 0?1:Te,Dt=O.texture,nn=!1;if((V===ir.D32F||V===ir.D24_S8)&&Dt&&!Ho(F)&&!w.WEBGL_depth_texture&&(Dt.destroy(),L.texture=null,nn=!0),!nn&&Dt)L.texture=Dt;else{L.gl_renderbuffer=L.device.ensureResourceExists(F.createRenderbuffer()),F.bindRenderbuffer(F.RENDERBUFFER,L.gl_renderbuffer);var Tn=L.device.translateTextureInternalFormat(V,!0);Ho(F)&&$e>1?F.renderbufferStorageMultisample(An.RENDERBUFFER,$e,Tn,re,Ee):F.renderbufferStorage(An.RENDERBUFFER,Tn,re,Ee)}return L.format=V,L.width=re,L.height=Ee,L.sampleCount=$e,L}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},o}(tp),_d;(function(a){a[a.NeedsCompile=0]="NeedsCompile",a[a.Compiling=1]="Compiling",a[a.NeedsBind=2]="NeedsBind",a[a.ReadyToUse=3]="ReadyToUse"})(_d||(_d={}));var w3=function(a){(0,So.ZT)(o,a);function o(f,m){var w=f.id,O=f.device,L=f.descriptor,F=a.call(this,{id:w,device:O})||this;F.rawVertexGLSL=m,F.type=Ws.Program,F.uniformSetters={},F.attributes=[];var V=F.device.gl;return F.descriptor=L,F.gl_program=F.device.ensureResourceExists(V.createProgram()),F.gl_shader_vert=null,F.gl_shader_frag=null,F.compileState=_d.NeedsCompile,F.tryCompileProgram(),F}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},o.prototype.tryCompileProgram=function(){Ga(this.compileState===_d.NeedsCompile);var f=this.descriptor,m=f.vertex,w=f.fragment,O=this.device.gl;m!=null&&m.glsl&&(w!=null&&w.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,O.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(w.postprocess?w.postprocess(w.glsl):w.glsl,O.FRAGMENT_SHADER),O.attachShader(this.gl_program,this.gl_shader_vert),O.attachShader(this.gl_program,this.gl_shader_frag),O.linkProgram(this.gl_program),this.compileState=_d.Compiling,Ho(O)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},o.prototype.readAttributesFromLinkedProgram=function(){for(var f,m=this.device.gl,w=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),O=x3(this.descriptor.vertex.glsl),L=E3(this.rawVertexGLSL,O),F=function(Ee){var Te=m.getActiveAttrib(V.gl_program,Ee),$e=Te.name,Dt=Te.type,nn=Te.size,Tn=m.getAttribLocation(V.gl_program,$e),sr=(f=L.find(function(Br){return Br.name===$e}))===null||f===void 0?void 0:f.location;Tn>=0&&!(0,Qd.Z)(sr)&&(V.attributes[sr]={name:$e,location:Tn,type:Dt,size:nn})},V=this,re=0;re<w;re++)F(re)},o.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,m=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),w=0;w<m;w++){var O=f.getActiveUniform(this.gl_program,w),L=J1(O.name).name,F=f.getUniformLocation(this.gl_program,L);if(this.uniformSetters[L]=ST(f,F,O),O&&O.size>1)for(var V=0;V<O.size;V++)F=f.getUniformLocation(this.gl_program,"".concat(L,"[").concat(V,"]")),this.uniformSetters["".concat(L,"[").concat(V,"]")]=ST(f,F,O)}},o.prototype.compileShader=function(f,m){var w=this.device.gl,O=this.device.ensureResourceExists(w.createShader(m));return w.shaderSource(O,f),w.compileShader(O),O},o.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var m=this.device.gl;if(!Ho(m)){var w=!1;for(var O in f){w||(m.useProgram(this.gl_program),w=!0);var L=f[O],F=this.uniformSetters[O];if(F){var V=L;V instanceof l2&&(V=V.textureIndex),F(V)}}}return this},o}(tp),A3=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.QueryPool;var F=L.device.gl;if(Ho(F)){var V=O.elemCount,re=O.type;L.gl_query=Cv(V,function(){return L.device.ensureResourceExists(F.createQuery())}),L.gl_query_type=lb(re)}return L}return o.prototype.queryResultOcclusion=function(f){var m=this.device.gl;if(Ho(m)){var w=this.gl_query[f];return m.getQueryParameter(w,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(w,m.QUERY_RESULT):null}return null},o.prototype.destroy=function(){a.prototype.destroy.call(this);var f=this.device.gl;if(Ho(f))for(var m=0;m<this.gl_query.length;m++)f.deleteQuery(this.gl_query[m])},o}(tp),RT=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=a.call(this,{id:m,device:w})||this;return O.type=Ws.Readback,O.gl_pbo=null,O.gl_sync=null,O}return o.prototype.clientWaitAsync=function(f,m,w){m===void 0&&(m=0),w===void 0&&(w=10);var O=this.device.gl;return new Promise(function(L,F){function V(){var re=O.clientWaitSync(f,m,0);if(re==O.WAIT_FAILED){F();return}if(re==O.TIMEOUT_EXPIRED){setTimeout(V,(0,sT.Z)(w,0,O.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}L()}V()})},o.prototype.getBufferSubDataAsync=function(f,m,w,O,L,F){return(0,So.mG)(this,void 0,void 0,function(){var V;return(0,So.Jh)(this,function(re){switch(re.label){case 0:return V=this.device.gl,Ho(V)?(this.gl_sync=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0),V.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return re.sent(),V.bindBuffer(f,m),V.getBufferSubData(f,w,O,L,F),V.bindBuffer(f,null),[2,O];case 2:return[2]}})})},o.prototype.readTexture=function(f,m,w,O,L,F,V,re){return V===void 0&&(V=0),re===void 0&&(re=F.byteLength||0),(0,So.mG)(this,void 0,void 0,function(){var Ee,Te,$e,Dt,nn;return(0,So.Jh)(this,function(Tn){return Ee=this.device.gl,Te=f,$e=this.device.translateTextureFormat(Te.format),Dt=this.device.translateTextureType(Te.format),nn=_m(Te.format),Ho(Ee)?(this.gl_pbo=this.device.ensureResourceExists(Ee.createBuffer()),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,this.gl_pbo),Ee.bufferData(Ee.PIXEL_PACK_BUFFER,re,Ee.STREAM_READ),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,null),Ee.bindFramebuffer(An.READ_FRAMEBUFFER,this.device.readbackFramebuffer),Ee.framebufferTexture2D(An.READ_FRAMEBUFFER,An.COLOR_ATTACHMENT0,An.TEXTURE_2D,Te.gl_texture,0),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,this.gl_pbo),Ee.readPixels(m,w,O,L,$e,Dt,V*nn),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(Ee.PIXEL_PACK_BUFFER,this.gl_pbo,0,F,V,0)]):[2,this.readTextureSync(f,m,w,O,L,F,V,re)]})})},o.prototype.readTextureSync=function(f,m,w,O,L,F,V,re){re===void 0&&(re=F.byteLength||0);var Ee=this.device.gl,Te=f,$e=this.device.translateTextureType(Te.format);return Ee.bindFramebuffer(An.FRAMEBUFFER,this.device.readbackFramebuffer),Ee.framebufferTexture2D(An.FRAMEBUFFER,An.COLOR_ATTACHMENT0,An.TEXTURE_2D,Te.gl_texture,0),Ee.pixelStorei(Ee.PACK_ALIGNMENT,4),Ee.readPixels(m,w,O,L,Ee.RGBA,$e,F),F},o.prototype.readBuffer=function(f,m,w,O,L){return(0,So.mG)(this,void 0,void 0,function(){var F;return(0,So.Jh)(this,function(V){return F=this.device.gl,Ho(F)?[2,this.getBufferSubDataAsync(F.ARRAY_BUFFER,Pv(f,m),m,w,O,L)]:[2,Promise.reject()]})})},o.prototype.destroy=function(){a.prototype.destroy.call(this),Ho(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},o}(tp),MT=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L,F,V=a.call(this,{id:m,device:w})||this;return V.type=Ws.RenderPipeline,V.drawMode=nb((L=O.topology)!==null&&L!==void 0?L:xu.TRIANGLES),V.program=O.program,V.inputLayout=O.inputLayout,V.megaState=(0,So.pi)((0,So.pi)({},bm(Ov)),O.megaStateDescriptor),V.colorAttachmentFormats=O.colorAttachmentFormats.slice(),V.depthStencilAttachmentFormat=O.depthStencilAttachmentFormat,V.sampleCount=(F=O.sampleCount)!==null&&F!==void 0?F:1,V}return o}(tp),cb=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;return L.type=Ws.ComputePipeline,L.descriptor=O,L}return o}(tp),C3=function(){function a(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return a.prototype.trackResourceCreated=function(o){this.creationStacks.set(o,new Error().stack),this.liveObjects.add(o)},a.prototype.trackResourceDestroyed=function(o){this.deletionStacks.has(o)&&console.warn("Object double freed:",o,`

Creation stack: `,this.creationStacks.get(o),`

Deletion stack: `,this.deletionStacks.get(o),`

This stack: `,new Error().stack),this.deletionStacks.set(o,new Error().stack),this.liveObjects.delete(o)},a.prototype.checkForLeaks=function(){var o,f;try{for(var m=(0,So.XA)(this.liveObjects.values()),w=m.next();!w.done;w=m.next()){var O=w.value;console.warn("Object leaked:",O,"Creation stack:",this.creationStacks.get(O))}}catch(L){o={error:L}}finally{try{w&&!w.done&&(f=m.return)&&f.call(m)}finally{if(o)throw o.error}}},a.prototype.setResourceLeakCheck=function(o,f){f?this.liveObjects.add(o):this.liveObjects.delete(o)},a}(),O3=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L,F,V=a.call(this,{id:m,device:w})||this;V.type=Ws.Sampler;var re=V.device.gl;if(Ho(re)){var Ee=V.device.ensureResourceExists(re.createSampler());re.samplerParameteri(Ee,An.TEXTURE_WRAP_S,Em(O.addressModeU)),re.samplerParameteri(Ee,An.TEXTURE_WRAP_T,Em(O.addressModeV)),re.samplerParameteri(Ee,An.TEXTURE_WRAP_R,Em((L=O.addressModeW)!==null&&L!==void 0?L:O.addressModeU)),re.samplerParameteri(Ee,An.TEXTURE_MIN_FILTER,xg(O.minFilter,O.mipmapFilter)),re.samplerParameteri(Ee,An.TEXTURE_MAG_FILTER,xg(O.magFilter,$u.NO_MIP)),O.lodMinClamp!==void 0&&re.samplerParameterf(Ee,An.TEXTURE_MIN_LOD,O.lodMinClamp),O.lodMaxClamp!==void 0&&re.samplerParameterf(Ee,An.TEXTURE_MAX_LOD,O.lodMaxClamp),O.compareFunction!==void 0&&(re.samplerParameteri(Ee,re.TEXTURE_COMPARE_MODE,re.COMPARE_REF_TO_TEXTURE),re.samplerParameteri(Ee,re.TEXTURE_COMPARE_FUNC,O.compareFunction));var Te=(F=O.maxAnisotropy)!==null&&F!==void 0?F:1;Te>1&&V.device.EXT_texture_filter_anisotropic!==null&&(Ga(O.minFilter===Nc.BILINEAR&&O.magFilter===Nc.BILINEAR&&O.mipmapFilter===$u.LINEAR),re.samplerParameterf(Ee,V.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te)),V.gl_sampler=Ee}else V.descriptor=O;return V}return o.prototype.setTextureParameters=function(f,m,w){var O,L=this.device.gl,F=this.descriptor;this.isNPOT(m,w)?L.texParameteri(An.TEXTURE_2D,An.TEXTURE_MIN_FILTER,An.LINEAR):L.texParameteri(f,An.TEXTURE_MIN_FILTER,xg(F.minFilter,F.mipmapFilter)),L.texParameteri(An.TEXTURE_2D,An.TEXTURE_WRAP_S,Em(F.addressModeU)),L.texParameteri(An.TEXTURE_2D,An.TEXTURE_WRAP_T,Em(F.addressModeV)),L.texParameteri(f,An.TEXTURE_MAG_FILTER,xg(F.magFilter,$u.NO_MIP));var V=(O=F.maxAnisotropy)!==null&&O!==void 0?O:1;V>1&&this.device.EXT_texture_filter_anisotropic!==null&&(Ga(F.minFilter===Nc.BILINEAR&&F.magFilter===Nc.BILINEAR&&F.mipmapFilter===$u.LINEAR),L.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V))},o.prototype.destroy=function(){a.prototype.destroy.call(this),Ho(this.device.gl)&&this.device.gl.deleteSampler(Ey(this))},o.prototype.isNPOT=function(f,m){return!$1(f)||!$1(m)},o}(tp),R3=function(){function a(){}return a.prototype.dispatchWorkgroups=function(o,f,m){},a.prototype.dispatchWorkgroupsIndirect=function(o,f){},a.prototype.setPipeline=function(o){},a.prototype.setBindings=function(o){},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a}(),c2=function(a){(0,So.ZT)(o,a);function o(){var f=a!==null&&a.apply(this,arguments)||this;return f.type=Ws.RenderBundle,f.commands=[],f}return o.prototype.push=function(f){this.commands.push(f)},o.prototype.replay=function(){this.commands.forEach(function(f){return f()})},o}(tp),PT=65536,M3=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,IT=function(){function a(o,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=bm(Ov),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=pd.LOWER_LEFT,this.clipSpaceNearZ=bg.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=o,this.contextAttributes=ep(o.getContextAttributes()),Ho(o)?(this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=o.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=o.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=o.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=o.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=o.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=o.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=o.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_frag_depth"),o.getExtension("OES_element_index_uint"),o.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=o.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=o.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=o.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=o.getExtension("KHR_parallel_shader_compile"),Ho(o)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new l2({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:hs.TEXTURE_2D,mipLevelCount:1,usage:Kf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?ir.U8_RGB_RT:ir.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Fc.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(hs.TEXTURE_2D,Fc.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(hs.TEXTURE_2D,Fc.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:Ol.VERTEX,hint:d0.STATIC}),Ho(o)&&(this.fallbackTexture2DArray=this.createFallbackTexture(hs.TEXTURE_2D_ARRAY,Fc.Float),this.fallbackTexture3D=this.createFallbackTexture(hs.TEXTURE_3D,Fc.Float),this.fallbackTextureCube=this.createFallbackTexture(hs.TEXTURE_CUBE_MAP,Fc.Float)),this.currentMegaState.depthCompare=rs.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=hf.ALL,o.enable(o.DEPTH_TEST),o.enable(o.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new C3)}return a.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},a.prototype.createFallbackTexture=function(o,f){var m=o===hs.TEXTURE_CUBE_MAP?6:1,w=f===Fc.Depth?ir.D32F:ir.U8_RGBA_NORM,O=this.createTexture({dimension:o,format:w,usage:Kf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return f===Fc.Float&&O.setImageData([new Uint8Array(4*m)]),Iv(O)},a.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},a.prototype.checkLimits=function(){var o=this.gl;if(this.maxVertexAttribs=o.getParameter(An.MAX_VERTEX_ATTRIBS),Ho(o)){this.uniformBufferMaxPageByteSize=Math.min(o.getParameter(An.MAX_UNIFORM_BLOCK_SIZE),PT),this.uniformBufferWordAlignment=o.getParameter(o.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=o.getInternalformatParameter(o.RENDERBUFFER,o.DEPTH32F_STENCIL8,o.SAMPLES);this.supportedSampleCounts=f?(0,So.ev)([],(0,So.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=PT;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,w){return m-w})},a.prototype.configureSwapChain=function(o,f,m){var w=this.scTexture;w.width=o,w.height=f,this.scPlatformFramebuffer=s4(m)},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.gl.canvas},a.prototype.getOnscreenTexture=function(){return this.scTexture},a.prototype.beginFrame=function(){},a.prototype.endFrame=function(){},a.prototype.translateTextureInternalFormat=function(o,f){switch(f===void 0&&(f=!1),o){case ir.ALPHA:return An.ALPHA;case ir.U8_LUMINANCE:case ir.F16_LUMINANCE:case ir.F32_LUMINANCE:return An.LUMINANCE;case ir.F16_R:return An.R16F;case ir.F16_RG:return An.RG16F;case ir.F16_RGB:return An.RGB16F;case ir.F16_RGBA:return An.RGBA16F;case ir.F32_R:return An.R32F;case ir.F32_RG:return An.RG32F;case ir.F32_RGB:return An.RGB32F;case ir.F32_RGBA:return Ho(this.gl)?An.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:An.RGBA;case ir.U8_R_NORM:return An.R8;case ir.U8_RG_NORM:return An.RG8;case ir.U8_RGB_NORM:case ir.U8_RGB_RT:return An.RGB8;case ir.U8_RGB_SRGB:return An.SRGB8;case ir.U8_RGBA_NORM:case ir.U8_RGBA_RT:return Ho(this.gl)?An.RGBA8:f?An.RGBA4:An.RGBA;case ir.U8_RGBA:return An.RGBA;case ir.U8_RGBA_SRGB:case ir.U8_RGBA_RT_SRGB:return An.SRGB8_ALPHA8;case ir.U16_R:return An.R16UI;case ir.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case ir.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case ir.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case ir.U16_RGBA_5551:return An.RGB5_A1;case ir.U16_RGB_565:return An.RGB565;case ir.U32_R:return An.R32UI;case ir.S8_RGBA_NORM:return An.RGBA8_SNORM;case ir.S8_RG_NORM:return An.RG8_SNORM;case ir.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case ir.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case ir.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case ir.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case ir.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case ir.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case ir.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case ir.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case ir.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case ir.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case ir.D32F_S8:return Ho(this.gl)?An.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?An.DEPTH_STENCIL:An.DEPTH_COMPONENT16;case ir.D24_S8:return Ho(this.gl)?An.DEPTH24_STENCIL8:this.WEBGL_depth_texture?An.DEPTH_STENCIL:An.DEPTH_COMPONENT16;case ir.D32F:return Ho(this.gl)?An.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?An.DEPTH_COMPONENT:An.DEPTH_COMPONENT16;case ir.D24:return Ho(this.gl)?An.DEPTH_COMPONENT24:this.WEBGL_depth_texture?An.DEPTH_COMPONENT:An.DEPTH_COMPONENT16;default:throw new Error("whoops")}},a.prototype.translateTextureType=function(o){var f=X0(o);switch(f){case ri.U8:return An.UNSIGNED_BYTE;case ri.U16:return An.UNSIGNED_SHORT;case ri.U32:return An.UNSIGNED_INT;case ri.S8:return An.BYTE;case ri.F16:return An.HALF_FLOAT;case ri.F32:return An.FLOAT;case ri.U16_PACKED_5551:return An.UNSIGNED_SHORT_5_5_5_1;case ri.D32F:return Ho(this.gl)?An.FLOAT:this.WEBGL_depth_texture?An.UNSIGNED_INT:An.UNSIGNED_BYTE;case ri.D24:return Ho(this.gl)?An.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?An.UNSIGNED_SHORT:An.UNSIGNED_BYTE;case ri.D24S8:return Ho(this.gl)?An.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?An.UNSIGNED_INT_24_8_WEBGL:An.UNSIGNED_BYTE;case ri.D32FS8:return An.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},a.prototype.translateInternalTextureFormat=function(o){switch(o){case ir.F32_R:return An.R32F;case ir.F32_RG:return An.RG32F;case ir.F32_RGB:return An.RGB32F;case ir.F32_RGBA:return An.RGBA32F;case ir.F16_R:return An.R16F;case ir.F16_RG:return An.RG16F;case ir.F16_RGB:return An.RGB16F;case ir.F16_RGBA:return An.RGBA16F}return this.translateTextureFormat(o)},a.prototype.translateTextureFormat=function(o){if(wT(o)||o===ir.F32_LUMINANCE||o===ir.U8_LUMINANCE)return this.translateTextureInternalFormat(o);var f=Ho(this.gl)||!Ho(this.gl)&&!!this.WEBGL_depth_texture;switch(o){case ir.D24_S8:case ir.D32F_S8:return f?An.DEPTH_STENCIL:An.RGBA;case ir.D24:case ir.D32F:return f?An.DEPTH_COMPONENT:An.RGBA}var m=AT(o),w=Z1(o);switch(w){case Hi.A:return An.ALPHA;case Hi.R:return m?An.RED_INTEGER:An.RED;case Hi.RG:return m?An.RG_INTEGER:An.RG;case Hi.RGB:return m?An.RGB_INTEGER:An.RGB;case Hi.RGBA:return An.RGBA}},a.prototype.setActiveTexture=function(o){this.currentActiveTexture!==o&&(this.gl.activeTexture(o),this.currentActiveTexture=o)},a.prototype.bindVAO=function(o){this.currentBoundVAO!==o&&(Ho(this.gl)?this.gl.bindVertexArray(o):this.OES_vertex_array_object.bindVertexArrayOES(o),this.currentBoundVAO=o)},a.prototype.programCompiled=function(o){Ga(o.compileState!==_d.NeedsCompile),o.compileState===_d.Compiling&&(o.compileState=_d.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(o))},a.prototype.useProgram=function(o){this.currentProgram!==o&&(this.programCompiled(o),this.gl.useProgram(o.gl_program),this.currentProgram=o)},a.prototype.ensureResourceExists=function(o){if(o===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return o},a.prototype.createBuffer=function(o){return new Ip({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new l2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new O3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){return new T3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,O=f.height,L=f.mipLevelCount;return Ga(L===1),this.createRenderTarget({format:m,width:w,height:O,sampleCount:1,texture:o})},a.prototype.createProgram=function(o){var f,m,w,O=(f=o.vertex)===null||f===void 0?void 0:f.glsl;return!((m=o.vertex)===null||m===void 0)&&m.glsl&&(o.vertex.glsl=Mv(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((w=o.fragment)===null||w===void 0)&&w.glsl&&(o.fragment.glsl=Mv(this.queryVendorInfo(),"frag",o.fragment.glsl)),this.createProgramSimple(o,O)},a.prototype.createProgramSimple=function(o,f){var m=new w3({id:this.getNextUniqueId(),device:this,descriptor:o},f);return m},a.prototype.createBindings=function(o){return new tb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new OT({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new MT({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePass=function(){return new R3},a.prototype.createComputePipeline=function(o){return new cb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createReadback=function(){return new RT({id:this.getNextUniqueId(),device:this})},a.prototype.createQueryPool=function(o,f){return new A3({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.formatRenderPassDescriptor=function(o){var f,m,w,O,L,F,V=o.colorAttachment;o.depthClearValue=(f=o.depthClearValue)!==null&&f!==void 0?f:"load",o.stencilClearValue=(m=o.stencilClearValue)!==null&&m!==void 0?m:"load";for(var re=0;re<V.length;re++)o.colorAttachmentLevel||(o.colorAttachmentLevel=[]),o.colorAttachmentLevel[re]=(w=o.colorAttachmentLevel[re])!==null&&w!==void 0?w:0,o.colorResolveToLevel||(o.colorResolveToLevel=[]),o.colorResolveToLevel[re]=(O=o.colorResolveToLevel[re])!==null&&O!==void 0?O:0,o.colorClearColor||(o.colorClearColor=[]),o.colorClearColor[re]=(L=o.colorClearColor[re])!==null&&L!==void 0?L:"load",o.colorStore||(o.colorStore=[]),o.colorStore[re]=(F=o.colorStore[re])!==null&&F!==void 0?F:!1},a.prototype.createRenderBundle=function(){return new c2({id:this.getNextUniqueId(),device:this})},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle=void 0},a.prototype.executeBundles=function(o){o.forEach(function(f){f.replay()})},a.prototype.createRenderPass=function(o){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=o,this.formatRenderPassDescriptor(o);var f=o.colorAttachment,m=o.colorAttachmentLevel,w=o.colorClearColor,O=o.colorResolveTo,L=o.colorResolveToLevel,F=o.depthStencilAttachment,V=o.depthClearValue,re=o.stencilClearValue,Ee=o.depthStencilResolveTo,Te=O&&O.length===1&&O[0]===this.scTexture;this.setRenderPassParametersBegin(f.length,Te);for(var $e=0;$e<f.length;$e++)this.setRenderPassParametersColor($e,f[$e],m[$e],O[$e],L[$e],Te);this.setRenderPassParametersDepthStencil(F,Ee,Te),this.validateCurrentAttachments();for(var $e=0;$e<f.length;$e++){var Dt=w[$e];Dt!=="load"&&this.setRenderPassParametersClearColor($e,Dt.r,Dt.g,Dt.b,Dt.a)}return this.setRenderPassParametersClearDepthStencil(V,re),this},a.prototype.submitPass=function(o){Ga(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},a.prototype.copySubTexture2D=function(o,f,m,w,O,L){var F=this.gl,V=o,re=w;if(Ga(re.mipLevelCount===1),Ga(V.mipLevelCount===1),Ho(F))V===this.scTexture?F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,V,0)),F.bindFramebuffer(F.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,re,0),F.blitFramebuffer(O,L,O+re.width,L+re.height,f,m,f+re.width,m+re.height,F.COLOR_BUFFER_BIT,F.LINEAR),F.bindFramebuffer(F.READ_FRAMEBUFFER,null),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,null);else if(V===this.scTexture){var Ee=this.createRenderTargetFromTexture(w);this.submitBlitRenderPass(Ee,V)}},a.prototype.queryLimits=function(){return this},a.prototype.queryTextureFormatSupported=function(o,f,m){switch(o){case ir.BC1_SRGB:case ir.BC2_SRGB:case ir.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?yd(f,m,4,4):!1;case ir.BC1:case ir.BC2:case ir.BC3:return this.WEBGL_compressed_texture_s3tc!==null?yd(f,m,4,4):!1;case ir.BC4_UNORM:case ir.BC4_SNORM:case ir.BC5_UNORM:case ir.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?yd(f,m,4,4):!1;case ir.U16_R_NORM:case ir.U16_RG_NORM:case ir.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case ir.F32_R:case ir.F32_RG:case ir.F32_RGB:case ir.F32_RGBA:return this.OES_texture_float_linear!==null;case ir.F16_R:case ir.F16_RG:case ir.F16_RGB:case ir.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},a.prototype.queryProgramReady=function(o){var f=this.gl;if(o.compileState===_d.NeedsCompile)throw new Error("whoops");if(o.compileState===_d.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=f.getProgramParameter(o.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(o),m}return o.compileState===_d.NeedsBind||o.compileState===_d.ReadyToUse},a.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){return this.currentRenderPassDescriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Ws.Buffer)for(var m=o.gl_buffer_pages,w=0;w<m.length;w++)Lv(m[w],"".concat(f," Page ").concat(w));else if(o.type===Ws.Texture)Lv(Iv(o),f);else if(o.type===Ws.Sampler)Lv(Ey(o),f);else if(o.type===Ws.RenderTarget){var O=o.gl_renderbuffer;O!==null&&Lv(O,f)}else o.type===Ws.InputLayout&&Lv(o.vao,f)},a.prototype.setResourceLeakCheck=function(o,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(o,f)},a.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a.prototype.programPatched=function(o,f){Ga(this.shaderDebug)},a.prototype.getBufferData=function(o,f,m){m===void 0&&(m=0);var w=this.gl;Ho(w)&&(w.bindBuffer(w.COPY_READ_BUFFER,Pv(o,m*4)),w.getBufferSubData(w.COPY_READ_BUFFER,m*4,f))},a.prototype.debugGroupStatisticsDrawCall=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=o},a.prototype.debugGroupStatisticsBufferUpload=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=o},a.prototype.debugGroupStatisticsTextureBind=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=o},a.prototype.debugGroupStatisticsTriangles=function(o){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=o},a.prototype.reportShaderError=function(o,f){var m=this.gl,w=m.getShaderParameter(o,m.COMPILE_STATUS);if(!w){console.error(r3(f));var O=m.getExtension("WEBGL_debug_shaders");O&&console.error(O.getTranslatedShaderSource(o)),console.error(m.getShaderInfoLog(o))}return w},a.prototype.checkProgramCompilationForErrors=function(o){var f=this.gl,m=o.gl_program;if(!f.getProgramParameter(m,f.LINK_STATUS)){var w=o.descriptor;if(!this.reportShaderError(o.gl_shader_vert,w.vertex.glsl)||!this.reportShaderError(o.gl_shader_frag,w.fragment.glsl))return;console.error(f.getProgramInfoLog(o.gl_program))}},a.prototype.bindFramebufferAttachment=function(o,f,m,w){var O=this.gl;if((0,Qd.Z)(m))O.framebufferRenderbuffer(o,f,O.RENDERBUFFER,null);else if(m.type===Ws.RenderTarget)m.gl_renderbuffer!==null?O.framebufferRenderbuffer(o,f,O.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&O.framebufferTexture2D(o,f,An.TEXTURE_2D,Iv(m.texture),w);else if(m.type===Ws.Texture){var L=Iv(m);m.dimension===hs.TEXTURE_2D?O.framebufferTexture2D(o,f,An.TEXTURE_2D,L,w):Ho(O)&&(m.dimension,hs.TEXTURE_2D_ARRAY)}},a.prototype.bindFramebufferDepthStencilAttachment=function(o,f){var m=this.gl,w=(0,Qd.Z)(f)?mo.Depth|mo.Stencil:Jd(f.format),O=!!(w&mo.Depth),L=!!(w&mo.Stencil);if(O&&L){var F=Ho(this.gl)||!Ho(this.gl)&&!!this.WEBGL_depth_texture;F?this.bindFramebufferAttachment(o,m.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0)}else O?(this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,null,0)):L&&(this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,null,0))},a.prototype.validateCurrentAttachments=function(){for(var o=-1,f=-1,m=-1,w=0;w<this.currentColorAttachments.length;w++){var O=this.currentColorAttachments[w];O!==null&&(o===-1?(o=O.sampleCount,f=O.width,m=O.height):(Ga(o===O.sampleCount),Ga(f===O.width),Ga(m===O.height)))}this.currentDepthStencilAttachment&&(o===-1?o=this.currentDepthStencilAttachment.sampleCount:(Ga(o===this.currentDepthStencilAttachment.sampleCount),Ga(f===this.currentDepthStencilAttachment.width),Ga(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=o},a.prototype.setRenderPassParametersBegin=function(o,f){f===void 0&&(f=!1);var m=this.gl;if(f)m.bindFramebuffer(An.FRAMEBUFFER,null);else if(Ho(m)?m.bindFramebuffer(An.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||m.bindFramebuffer(An.FRAMEBUFFER,this.renderPassDrawFramebuffer),Ho(m)?m.drawBuffers([An.COLOR_ATTACHMENT0,An.COLOR_ATTACHMENT1,An.COLOR_ATTACHMENT2,An.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([An.COLOR_ATTACHMENT0_WEBGL,An.COLOR_ATTACHMENT1_WEBGL,An.COLOR_ATTACHMENT2_WEBGL,An.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var w=o;w<this.currentColorAttachments.length;w++){var O=Ho(m)?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,L=Ho(m)?An.COLOR_ATTACHMENT0:An.COLOR_ATTACHMENT0_WEBGL;m.framebufferRenderbuffer(O,L+w,An.RENDERBUFFER,null),m.framebufferTexture2D(O,L+w,An.TEXTURE_2D,null,0)}this.currentColorAttachments.length=o},a.prototype.setRenderPassParametersColor=function(o,f,m,w,O,L){L===void 0&&(L=!1);var F=this.gl,V=Ho(F);(this.currentColorAttachments[o]!==f||this.currentColorAttachmentLevels[o]!==m)&&(this.currentColorAttachments[o]=f,this.currentColorAttachmentLevels[o]=m,!L&&(V||!V&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(V?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,(V?An.COLOR_ATTACHMENT0:An.COLOR_ATTACHMENT0_WEBGL)+o,f,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[o]!==w||this.currentColorResolveToLevels[o]!==O)&&(this.currentColorResolveTos[o]=w,this.currentColorResolveToLevels[o]=O,w!==null&&(this.resolveColorAttachmentsChanged=!0))},a.prototype.setRenderPassParametersDepthStencil=function(o,f,m){m===void 0&&(m=!1);var w=this.gl;this.currentDepthStencilAttachment!==o&&(this.currentDepthStencilAttachment=o,!m&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(Ho(w)?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},a.prototype.setRenderPassParametersClearColor=function(o,f,m,w,O){var L=this.gl;if(this.OES_draw_buffers_indexed!==null){var F=this.currentMegaState.attachmentsState[o];F&&F.channelWriteMask!==hf.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(o,!0,!0,!0,!0),F.channelWriteMask=hf.ALL)}else{var F=this.currentMegaState.attachmentsState[0];F&&F.channelWriteMask!==hf.ALL&&(L.colorMask(!0,!0,!0,!0),F.channelWriteMask=hf.ALL)}this.setScissorRectEnabled(!1),Ho(L)?L.clearBufferfv(L.COLOR,o,[f,m,w,O]):(L.clearColor(f,m,w,O),L.clear(L.COLOR_BUFFER_BIT))},a.prototype.setRenderPassParametersClearDepthStencil=function(o,f){o===void 0&&(o="load"),f===void 0&&(f="load");var m=this.gl;o!=="load"&&(Ga(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),Ho(m)?m.clearBufferfv(m.DEPTH,0,[o]):(m.clearDepth(o),m.clear(m.DEPTH_BUFFER_BIT))),f!=="load"&&(Ga(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),Ho(m)?m.clearBufferiv(m.STENCIL,0,[f]):(m.clearStencil(f),m.clear(m.STENCIL_BUFFER_BIT)))},a.prototype.setBindings=function(o){var f=this,m;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(o)});return}var w=this.gl,O=o,L=O.uniformBufferBindings,F=O.samplerBindings,V=O.bindingLayouts;Ga(0<V.bindingLayoutTables.length);var re=V.bindingLayoutTables[0];Ga(L.length>=re.numUniformBuffers),Ga(F.length>=re.numSamplers);for(var Ee=0;Ee<L.length;Ee++){var Te=L[Ee];if(Te.size!==0){var $e=re.firstUniformBuffer+Ee,Dt=Te.buffer,nn=Te.offset||0,Tn=Te.size||Dt.byteSize;if(Dt!==this.currentUniformBuffers[$e]||nn!==this.currentUniformBufferByteOffsets[$e]||Tn!==this.currentUniformBufferByteSizes[$e]){var sr=nn%Dt.pageByteSize,Br=Dt.gl_buffer_pages[nn/Dt.pageByteSize|0];Ga(sr+Tn<=Dt.pageByteSize),Ho(w)&&w.bindBufferRange(w.UNIFORM_BUFFER,$e,Br,sr,Tn),this.currentUniformBuffers[$e]=Dt,this.currentUniformBufferByteOffsets[$e]=nn,this.currentUniformBufferByteSizes[$e]=Tn}}}for(var Ee=0;Ee<re.numSamplers;Ee++){var Te=F[Ee],Er=re.firstSampler+Ee,ui=Te!==null&&Te.sampler!==null?Ey(Te.sampler):null,Vi=Te!==null&&Te.texture!==null?Iv(Te.texture):null;if(this.currentSamplers[Er]!==ui&&(Ho(w)&&w.bindSampler(Er,ui),this.currentSamplers[Er]=ui),this.currentTextures[Er]!==Vi){if(this.setActiveTexture(w.TEXTURE0+Er),Vi!==null){var Po=ep(Te).texture,no=Po.gl_target,Wr=Po.width,ro=Po.height;Te.texture.textureIndex=Er,w.bindTexture(no,Vi),Ho(w)||(m=Te.sampler)===null||m===void 0||m.setTextureParameters(no,Wr,ro),this.debugGroupStatisticsTextureBind()}else{var Ba=(0,So.pi)((0,So.pi)({},Te),q1),ls=Ba.dimension,ta=Ba.formatKind,no=Pp(ls);w.bindTexture(no,this.getFallbackTexture((0,So.pi)({gl_target:no,formatKind:ta},Ba)))}this.currentTextures[Er]=Vi}}},a.prototype.setViewport=function(o,f,m,w){var O=this.gl;O.viewport(o,f,m,w)},a.prototype.setScissorRect=function(o,f,m,w){var O=this.gl;this.setScissorRectEnabled(!0),O.scissor(o,f,m,w)},a.prototype.applyAttachmentStateIndexed=function(o,f,m){var w=this.gl,O=this.OES_draw_buffers_indexed;f.channelWriteMask!==m.channelWriteMask&&(O.colorMaskiOES(o,!!(m.channelWriteMask&hf.RED),!!(m.channelWriteMask&hf.GREEN),!!(m.channelWriteMask&hf.BLUE),!!(m.channelWriteMask&hf.ALPHA)),f.channelWriteMask=m.channelWriteMask);var L=f.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,F=f.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(F||L)&&(Dv(f.rgbBlendState)&&Dv(f.alphaBlendState)?O.enableiOES(o,w.BLEND):Dv(m.rgbBlendState)&&Dv(m.alphaBlendState)&&O.disableiOES(o,w.BLEND)),L&&(O.blendEquationSeparateiOES(o,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),f.rgbBlendState.blendMode=m.rgbBlendState.blendMode,f.alphaBlendState.blendMode=m.alphaBlendState.blendMode),F&&(O.blendFuncSeparateiOES(o,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},a.prototype.applyAttachmentState=function(o,f){var m=this.gl;o.channelWriteMask!==f.channelWriteMask&&(m.colorMask(!!(f.channelWriteMask&hf.RED),!!(f.channelWriteMask&hf.GREEN),!!(f.channelWriteMask&hf.BLUE),!!(f.channelWriteMask&hf.ALPHA)),o.channelWriteMask=f.channelWriteMask);var w=o.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||o.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,O=o.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||o.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||o.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||o.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(O||w)&&(Dv(o.rgbBlendState)&&Dv(o.alphaBlendState)?m.enable(m.BLEND):Dv(f.rgbBlendState)&&Dv(f.alphaBlendState)&&m.disable(m.BLEND)),w&&(m.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),o.rgbBlendState.blendMode=f.rgbBlendState.blendMode,o.alphaBlendState.blendMode=f.alphaBlendState.blendMode),O&&(m.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),o.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,o.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,o.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},a.prototype.setMegaState=function(o){var f=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var w=0;w<o.attachmentsState.length;w++)this.applyAttachmentStateIndexed(w,m.attachmentsState[0],o.attachmentsState[0]);else Ga(o.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],o.attachmentsState[0]);n2(m.blendConstant,o.blendConstant)||(f.blendColor(o.blendConstant.r,o.blendConstant.g,o.blendConstant.b,o.blendConstant.a),hT(m.blendConstant,o.blendConstant)),m.depthCompare!==o.depthCompare&&(f.depthFunc(o.depthCompare),m.depthCompare=o.depthCompare),!!m.depthWrite!=!!o.depthWrite&&(f.depthMask(o.depthWrite),m.depthWrite=o.depthWrite),!!m.stencilWrite!=!!o.stencilWrite&&(f.stencilMask(o.stencilWrite?255:0),m.stencilWrite=o.stencilWrite);var O=!1;if(!Q1(m.stencilFront,o.stencilFront)){O=!0;var L=o.stencilFront,F=L.passOp,V=L.failOp,re=L.depthFailOp,Ee=L.compare;(m.stencilFront.passOp!==F||m.stencilFront.failOp!==V||m.stencilFront.depthFailOp!==re)&&(f.stencilOpSeparate(f.FRONT,V,re,F),m.stencilFront.passOp=F,m.stencilFront.failOp=V,m.stencilFront.depthFailOp=re),m.stencilFront.compare!==Ee&&(this.setStencilReference(0),m.stencilFront.compare=Ee)}if(!Q1(m.stencilBack,o.stencilBack)){O=!0;var Te=o.stencilBack,F=Te.passOp,V=Te.failOp,re=Te.depthFailOp,Ee=Te.compare;(m.stencilBack.passOp!==F||m.stencilBack.failOp!==V||m.stencilBack.depthFailOp!==re)&&(f.stencilOpSeparate(f.BACK,V,re,F),m.stencilBack.passOp=F,m.stencilBack.failOp=V,m.stencilBack.depthFailOp=re),m.stencilBack.compare!==Ee&&(this.setStencilReference(0),m.stencilBack.compare=Ee)}(m.stencilFront.mask!==o.stencilFront.mask||m.stencilBack.mask!==o.stencilBack.mask)&&(O=!0,m.stencilFront.mask=o.stencilFront.mask,m.stencilBack.mask=o.stencilBack.mask),O&&this.applyStencil(),m.cullMode!==o.cullMode&&(m.cullMode===vh.NONE?f.enable(f.CULL_FACE):o.cullMode===vh.NONE&&f.disable(f.CULL_FACE),o.cullMode===vh.BACK?f.cullFace(f.BACK):o.cullMode===vh.FRONT?f.cullFace(f.FRONT):o.cullMode===vh.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),m.cullMode=o.cullMode),m.frontFace!==o.frontFace&&(f.frontFace(o.frontFace),m.frontFace=o.frontFace),m.polygonOffset!==o.polygonOffset&&(o.polygonOffset?f.enable(f.POLYGON_OFFSET_FILL):f.disable(f.POLYGON_OFFSET_FILL),m.polygonOffset=o.polygonOffset),(m.polygonOffsetFactor!==o.polygonOffsetFactor||m.polygonOffsetUnits!==o.polygonOffsetUnits)&&(f.polygonOffset(o.polygonOffsetFactor,o.polygonOffsetUnits),m.polygonOffsetFactor=o.polygonOffsetFactor,m.polygonOffsetUnits=o.polygonOffsetUnits)},a.prototype.validatePipelineFormats=function(o){for(var f=0;f<this.currentColorAttachments.length;f++)var m=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&Ga(this.currentDepthStencilAttachment.format===o.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&Ga(this.currentSampleCount===o.sampleCount)},a.prototype.setPipeline=function(o){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(o)});return}this.currentPipeline=o,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===_d.NeedsBind){var w=this.gl,O=m.gl_program,L=m.descriptor,F=sb(L.vertex.glsl,M3);if(Ho(w))for(var V=0;V<F.length;V++){var re=(0,So.CR)(F[V],2),Ee=re[1],Te=w.getUniformBlockIndex(O,Ee);Te!==-1&&Te!==4294967295&&w.uniformBlockBinding(O,Te,V)}for(var $e=sb(L.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),V=0;V<$e.length;V++){var Dt=(0,So.CR)($e[V],3),nn=Dt[1],Tn=Dt[2],sr=w.getUniformLocation(O,nn);w.uniform1i(sr,parseInt(Tn))}m.compileState=_d.ReadyToUse}},a.prototype.setVertexInput=function(o,f,m){var w,O,L=this,F;if(this.renderBundle){this.renderBundle.push(function(){return L.setVertexInput(o,f,m)});return}if(o!==null){Ga(this.currentPipeline.inputLayout===o);var V=o;this.bindVAO(V.vao);for(var re=this.gl,Ee=0;Ee<V.vertexBufferDescriptors.length;Ee++){var Te=V.vertexBufferDescriptors[Ee],$e=Te.arrayStride,Dt=Te.attributes;try{for(var nn=(w=void 0,(0,So.XA)(Dt)),Tn=nn.next();!Tn.done;Tn=nn.next()){var sr=Tn.value,Br=sr.shaderLocation,Er=sr.offset,ui=Ho(re)?Br:(F=V.program.attributes[Br])===null||F===void 0?void 0:F.location;if(!(0,Qd.Z)(ui)){var Vi=f[Ee];if(Vi===null)continue;var Po=sr.vertexFormat;re.bindBuffer(re.ARRAY_BUFFER,Pv(Vi.buffer));var no=(Vi.offset||0)+Er;re.vertexAttribPointer(ui,Po.size,Po.type,Po.normalized,$e,no)}}}catch(ro){w={error:ro}}finally{try{Tn&&!Tn.done&&(O=nn.return)&&O.call(nn)}finally{if(w)throw w.error}}}if(Ga(m!==null==(V.indexBufferFormat!==null)),m!==null){var Wr=m.buffer;Ga(Wr.usage===Ol.INDEX),re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,Pv(Wr)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else Ga(this.currentPipeline.inputLayout===null),Ga(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},a.prototype.setStencilReference=function(o){this.currentStencilRef!==o&&(this.currentStencilRef=o,this.applyStencil())},a.prototype.draw=function(o,f,m,w){var O,L=this;if(this.renderBundle){this.renderBundle.push(function(){return L.draw(o,f,m,w)});return}var F=this.gl,V=this.currentPipeline;if(f){var re=[V.drawMode,m||0,o,f];Ho(F)?F.drawArraysInstanced.apply(F,(0,So.ev)([],(0,So.CR)(re),!1)):(O=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(O,(0,So.ev)([],(0,So.CR)(re),!1))}else F.drawArrays(V.drawMode,m,o);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndexed=function(o,f,m,w,O){var L,F=this;if(this.renderBundle){this.renderBundle.push(function(){return F.drawIndexed(o,f,m,w,O)});return}var V=this.gl,re=this.currentPipeline,Ee=ep(re.inputLayout),Te=ep(this.currentIndexBufferByteOffset)+m*Ee.indexBufferCompByteSize;if(f){var $e=[re.drawMode,o,Ee.indexBufferType,Te,f];Ho(V)?V.drawElementsInstanced.apply(V,(0,So.ev)([],(0,So.CR)($e),!1)):(L=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(L,(0,So.ev)([],(0,So.CR)($e),!1))}else V.drawElements(re.drawMode,o,Ee.indexBufferType,Te);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndirect=function(o,f){},a.prototype.drawIndexedIndirect=function(o,f){},a.prototype.beginOcclusionQuery=function(o){var f=this.gl;if(Ho(f)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(m.gl_query_type,m.gl_query[o])}},a.prototype.endOcclusionQuery=function(){var o=this.gl;if(Ho(o)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;o.endQuery(f.gl_query_type)}},a.prototype.pipelineQueryReady=function(o){var f=o;return this.queryProgramReady(f.program)},a.prototype.pipelineForceReady=function(o){},a.prototype.endPass=function(){for(var o=this.gl,f=Ho(o),m=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,w=!1,O=0;O<this.currentColorAttachments.length;O++){var L=this.currentColorAttachments[O];if(L!==null){var F=this.currentColorResolveTos[O],V=!1;F!==null&&(Ga(L.width===F.width&&L.height===F.height),this.setScissorRectEnabled(!1),m||(f&&o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,L,this.currentColorAttachmentLevels[O])),V=!0,m||(F===this.scTexture?o.bindFramebuffer(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&o.framebufferTexture2D(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,F.gl_texture,this.currentColorResolveToLevels[O]))),m||(f?(o.blitFramebuffer(0,0,L.width,L.height,0,0,F.width,F.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(L,F)),w=!0),this.currentRenderPassDescriptor.colorStore[O]||!m&&!V&&(o.bindFramebuffer(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,o.COLOR_ATTACHMENT0,L,this.currentColorAttachmentLevels[O])),m||o.bindFramebuffer(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var re=this.currentDepthStencilAttachment;if(re){var Ee=this.currentDepthStencilResolveTo,V=!1;Ee&&(Ga(re.width===Ee.width&&re.height===Ee.height),this.setScissorRectEnabled(!1),m||(o.bindFramebuffer(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),o.bindFramebuffer(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,re),this.bindFramebufferDepthStencilAttachment(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,Ee))),V=!0,m||(f&&o.blitFramebuffer(0,0,re.width,re.height,0,0,Ee.width,Ee.height,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,null)),w=!0),!m&&!this.currentRenderPassDescriptor.depthStencilStore&&(V||(o.bindFramebuffer(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,re),V=!0),f&&o.invalidateFramebuffer(o.READ_FRAMEBUFFER,[o.DEPTH_STENCIL_ATTACHMENT])),!m&&V&&o.bindFramebuffer(f?An.READ_FRAMEBUFFER:An.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!m&&!w&&o.bindFramebuffer(f?An.DRAW_FRAMEBUFFER:An.FRAMEBUFFER,null)},a.prototype.setScissorRectEnabled=function(o){if(this.currentScissorEnabled!==o){var f=this.gl;o?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=o}},a.prototype.applyStencil=function(){(0,Qd.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(An.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(An.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},a.prototype.getFallbackTexture=function(o){var f=o.gl_target,m=o.formatKind;if(f===An.TEXTURE_2D)return m===Fc.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===An.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===An.TEXTURE_3D)return this.fallbackTexture3D;if(f===An.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.submitBlitRenderPass=function(o,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:Ol.VERTEX|Ol.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:_g.VERTEX,attributes:[{format:ir.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:xu.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[ir.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:bm(Ov)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:o.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:o}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var w=this.createRenderPass({colorAttachment:[o],colorResolveTo:[f],colorClearColor:[QO]}),O=this.getCanvas(),L=O.width,F=O.height;w.setPipeline(this.blitRenderPipeline),w.setBindings(this.blitBindings),w.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),w.setViewport(0,0,L,F),this.gl.disable(this.gl.BLEND),w.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},a}(),u2=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,So.mG)(this,void 0,void 0,function(){var f,m,w,O,L,F,V,re,Ee,Te,$e,Dt,nn;return(0,So.Jh)(this,function(Tn){return f=this.pluginOptions,m=f.targets,w=f.xrCompatible,O=f.antialias,L=O===void 0?!1:O,F=f.preserveDrawingBuffer,V=F===void 0?!1:F,re=f.premultipliedAlpha,Ee=re===void 0?!0:re,Te=f.shaderDebug,$e=f.trackResources,Dt={antialias:L,preserveDrawingBuffer:V,stencil:!0,premultipliedAlpha:Ee,xrCompatible:w},this.handleContextEvents(o),m.includes("webgl2")&&(nn=o.getContext("webgl2",Dt)||o.getContext("experimental-webgl2",Dt)),!nn&&m.includes("webgl1")&&(nn=o.getContext("webgl",Dt)||o.getContext("experimental-webgl",Dt)),[2,new IT(nn,{shaderDebug:Te,trackResources:$e})]})})},a.prototype.handleContextEvents=function(o){var f=this.pluginOptions,m=f.onContextLost,w=f.onContextRestored,O=f.onContextCreationError;O&&o.addEventListener("webglcontextcreationerror",O,!1),m&&o.addEventListener("webglcontextlost",m,!1),w&&o.addEventListener("webglcontextrestored",w,!1)},a}();let oc;const f2=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&f2.decode();let W_=null;function ub(){return(W_===null||W_.byteLength===0)&&(W_=new Uint8Array(oc.memory.buffer)),W_}function fb(a,o){return a=a>>>0,f2.decode(ub().subarray(a,a+o))}const Nv=new Array(128).fill(void 0);Nv.push(void 0,null,!0,!1);let G_=Nv.length;function P3(a){G_===Nv.length&&Nv.push(Nv.length+1);const o=G_;return G_=Nv[o],Nv[o]=a,o}function hb(a){return Nv[a]}function I3(a){a<132||(Nv[a]=G_,G_=a)}function LT(a){const o=hb(a);return I3(a),o}let Sy=0;const db=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},DT=typeof db.encodeInto=="function"?function(a,o){return db.encodeInto(a,o)}:function(a,o){const f=db.encode(a);return o.set(f),{read:a.length,written:f.length}};function pb(a,o,f){if(f===void 0){const F=db.encode(a),V=o(F.length,1)>>>0;return ub().subarray(V,V+F.length).set(F),Sy=F.length,V}let m=a.length,w=o(m,1)>>>0;const O=ub();let L=0;for(;L<m;L++){const F=a.charCodeAt(L);if(F>127)break;O[w+L]=F}if(L!==m){L!==0&&(a=a.slice(L)),w=f(w,m,m=L+a.length*3,1)>>>0;const F=ub().subarray(w+L,w+m),V=DT(a,F);L+=V.written}return Sy=L,w}let Ty=null;function vb(){return(Ty===null||Ty.byteLength===0)&&(Ty=new Int32Array(oc.memory.buffer)),Ty}function L3(a,o,f){let m,w;try{const F=oc.__wbindgen_add_to_stack_pointer(-16),V=pb(a,oc.__wbindgen_malloc,oc.__wbindgen_realloc),re=Sy,Ee=pb(o,oc.__wbindgen_malloc,oc.__wbindgen_realloc),Te=Sy;oc.glsl_compile(F,V,re,Ee,Te,f);var O=vb()[F/4+0],L=vb()[F/4+1];return m=O,w=L,fb(O,L)}finally{oc.__wbindgen_add_to_stack_pointer(16),oc.__wbindgen_free(m,w,1)}}class wy{static __wrap(o){o=o>>>0;const f=Object.create(wy.prototype);return f.__wbg_ptr=o,f}__destroy_into_raw(){const o=this.__wbg_ptr;return this.__wbg_ptr=0,o}free(){const o=this.__destroy_into_raw();oc.__wbg_wgslcomposer_free(o)}constructor(){const o=oc.wgslcomposer_new();return wy.__wrap(o)}load_composable(o){const f=pb(o,oc.__wbindgen_malloc,oc.__wbindgen_realloc),m=Sy;oc.wgslcomposer_load_composable(this.__wbg_ptr,f,m)}wgsl_compile(o){let f,m;try{const L=oc.__wbindgen_add_to_stack_pointer(-16),F=pb(o,oc.__wbindgen_malloc,oc.__wbindgen_realloc),V=Sy;oc.wgslcomposer_wgsl_compile(L,this.__wbg_ptr,F,V);var w=vb()[L/4+0],O=vb()[L/4+1];return f=w,m=O,fb(w,O)}finally{oc.__wbindgen_add_to_stack_pointer(16),oc.__wbindgen_free(f,m,1)}}}function D3(a,o){return U5(this,null,function*(){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(a,o)}catch(m){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",m);else throw m}const f=yield a.arrayBuffer();return yield WebAssembly.instantiate(f,o)}else{const f=yield WebAssembly.instantiate(a,o);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})}function N3(){const a={};return a.wbg={},a.wbg.__wbindgen_string_new=function(o,f){const m=fb(o,f);return P3(m)},a.wbg.__wbindgen_object_drop_ref=function(o){LT(o)},a.wbg.__wbg_log_1d3ae0273d8f4f8a=function(o){console.log(hb(o))},a.wbg.__wbg_log_576ca876af0d4a77=function(o,f){console.log(hb(o),hb(f))},a.wbg.__wbindgen_throw=function(o,f){throw new Error(fb(o,f))},a}function B3(a,o){return oc=a.exports,NT.__wbindgen_wasm_module=o,Ty=null,W_=null,oc}function NT(a){return U5(this,null,function*(){if(oc!==void 0)return oc;const o=N3();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:f,module:m}=yield D3(yield a,o);return B3(f,m)})}var Yu;(function(a){a[a.COPY_SRC=1]="COPY_SRC",a[a.COPY_DST=2]="COPY_DST",a[a.TEXTURE_BINDING=4]="TEXTURE_BINDING",a[a.STORAGE_BINDING=8]="STORAGE_BINDING",a[a.STORAGE=8]="STORAGE",a[a.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Yu||(Yu={}));var h2;(function(a){a[a.READ=1]="READ",a[a.WRITE=2]="WRITE"})(h2||(h2={}));function BT(a){var o=0;return a&Kf.SAMPLED&&(o|=Yu.TEXTURE_BINDING|Yu.COPY_DST|Yu.COPY_SRC),a&Kf.STORAGE&&(o|=Yu.TEXTURE_BINDING|Yu.STORAGE_BINDING|Yu.COPY_SRC|Yu.COPY_DST),a&Kf.RENDER_TARGET&&(o|=Yu.RENDER_ATTACHMENT|Yu.TEXTURE_BINDING|Yu.COPY_SRC|Yu.COPY_DST),o}function d2(a){if(a===ir.U8_R_NORM)return"r8unorm";if(a===ir.S8_R_NORM)return"r8snorm";if(a===ir.U8_RG_NORM)return"rg8unorm";if(a===ir.S8_RG_NORM)return"rg8snorm";if(a===ir.U32_R)return"r32uint";if(a===ir.S32_R)return"r32sint";if(a===ir.F32_R)return"r32float";if(a===ir.U16_RG)return"rg16uint";if(a===ir.S16_RG)return"rg16sint";if(a===ir.F16_RG)return"rg16float";if(a===ir.U8_RGBA_RT)return"bgra8unorm";if(a===ir.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(a===ir.U8_RGBA_NORM)return"rgba8unorm";if(a===ir.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(a===ir.S8_RGBA_NORM)return"rgba8snorm";if(a===ir.U32_RG)return"rg32uint";if(a===ir.S32_RG)return"rg32sint";if(a===ir.F32_RG)return"rg32float";if(a===ir.U16_RGBA)return"rgba16uint";if(a===ir.S16_RGBA)return"rgba16sint";if(a===ir.F16_RGBA)return"rgba16float";if(a===ir.F32_RGBA)return"rgba32float";if(a===ir.U32_RGBA)return"rgba32uint";if(a===ir.S32_RGBA)return"rgba32sint";if(a===ir.D24)return"depth24plus";if(a===ir.D24_S8)return"depth24plus-stencil8";if(a===ir.D32F)return"depth32float";if(a===ir.D32F_S8)return"depth32float-stencil8";if(a===ir.BC1)return"bc1-rgba-unorm";if(a===ir.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(a===ir.BC2)return"bc2-rgba-unorm";if(a===ir.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(a===ir.BC3)return"bc3-rgba-unorm";if(a===ir.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(a===ir.BC4_SNORM)return"bc4-r-snorm";if(a===ir.BC4_UNORM)return"bc4-r-unorm";if(a===ir.BC5_SNORM)return"bc5-rg-snorm";if(a===ir.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function F3(a){if(a===hs.TEXTURE_2D)return"2d";if(a===hs.TEXTURE_CUBE_MAP)return"2d";if(a===hs.TEXTURE_2D_ARRAY)return"2d";if(a===hs.TEXTURE_3D)return"3d";throw new Error("whoops")}function k3(a){if(a===hs.TEXTURE_2D)return"2d";if(a===hs.TEXTURE_CUBE_MAP)return"cube";if(a===hs.TEXTURE_2D_ARRAY)return"2d-array";if(a===hs.TEXTURE_3D)return"3d";throw new Error("whoops")}function U3(a){var o=0;return a&Ol.INDEX&&(o|=GPUBufferUsage.INDEX),a&Ol.VERTEX&&(o|=GPUBufferUsage.VERTEX),a&Ol.UNIFORM&&(o|=GPUBufferUsage.UNIFORM),a&Ol.STORAGE&&(o|=GPUBufferUsage.STORAGE),a&Ol.COPY_SRC&&(o|=GPUBufferUsage.COPY_SRC),a&Ol.INDIRECT&&(o|=GPUBufferUsage.INDIRECT),o|=GPUBufferUsage.COPY_DST,o}function p2(a){if(a===al.CLAMP_TO_EDGE)return"clamp-to-edge";if(a===al.REPEAT)return"repeat";if(a===al.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function FT(a){if(a===Nc.BILINEAR)return"linear";if(a===Nc.POINT)return"nearest";throw new Error("whoops")}function z3(a){if(a===$u.LINEAR)return"linear";if(a===$u.NEAREST)return"nearest";if(a===$u.NO_MIP)return"nearest";throw new Error("whoops")}function Ay(a){var o=a;return o.gpuBuffer}function j3(a){var o=a;return o.gpuSampler}function V3(a){var o=a;return o.querySet}function H3(a){if(a===gy.OcclusionConservative)return"occlusion";throw new Error("whoops")}function W3(a){switch(a){case xu.TRIANGLES:return"triangle-list";case xu.POINTS:return"point-list";case xu.TRIANGLE_STRIP:return"triangle-strip";case xu.LINES:return"line-list";case xu.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function G3(a){if(a===vh.NONE)return"none";if(a===vh.FRONT)return"front";if(a===vh.BACK)return"back";throw new Error("whoops")}function Z3(a){if(a===B_.CCW)return"ccw";if(a===B_.CW)return"cw";throw new Error("whoops")}function X3(a,o){return{topology:W3(a),cullMode:G3(o.cullMode),frontFace:Z3(o.frontFace)}}function Z_(a){if(a===Ja.ZERO)return"zero";if(a===Ja.ONE)return"one";if(a===Ja.SRC)return"src";if(a===Ja.ONE_MINUS_SRC)return"one-minus-src";if(a===Ja.DST)return"dst";if(a===Ja.ONE_MINUS_DST)return"one-minus-dst";if(a===Ja.SRC_ALPHA)return"src-alpha";if(a===Ja.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(a===Ja.DST_ALPHA)return"dst-alpha";if(a===Ja.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(a===Ja.CONST)return"constant";if(a===Ja.ONE_MINUS_CONSTANT)return"one-minus-constant";if(a===Ja.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function $3(a){if(a===ff.ADD)return"add";if(a===ff.SUBSTRACT)return"subtract";if(a===ff.REVERSE_SUBSTRACT)return"reverse-subtract";if(a===ff.MIN)return"min";if(a===ff.MAX)return"max";throw new Error("whoops")}function Sm(a){return{operation:$3(a.blendMode),srcFactor:Z_(a.blendSrcFactor),dstFactor:Z_(a.blendDstFactor)}}function kT(a){return a.blendMode===ff.ADD&&a.blendSrcFactor===Ja.ONE&&a.blendDstFactor===Ja.ZERO}function mb(a){if(!(kT(a.rgbBlendState)&&kT(a.alphaBlendState)))return{color:Sm(a.rgbBlendState),alpha:Sm(a.alphaBlendState)}}function Tm(a,o){return{format:d2(o),blend:mb(a),writeMask:a.channelWriteMask}}function UT(a,o){return o.attachmentsState.map(function(f,m){return Tm(f,a[m])})}function gb(a){if(a===rs.NEVER)return"never";if(a===rs.LESS)return"less";if(a===rs.EQUAL)return"equal";if(a===rs.LEQUAL)return"less-equal";if(a===rs.GREATER)return"greater";if(a===rs.NOTEQUAL)return"not-equal";if(a===rs.GEQUAL)return"greater-equal";if(a===rs.ALWAYS)return"always";throw new Error("whoops")}function wm(a){if(a===Bc.KEEP)return"keep";if(a===Bc.REPLACE)return"replace";if(a===Bc.ZERO)return"zero";if(a===Bc.DECREMENT_CLAMP)return"decrement-clamp";if(a===Bc.DECREMENT_WRAP)return"decrement-wrap";if(a===Bc.INCREMENT_CLAMP)return"increment-clamp";if(a===Bc.INCREMENT_WRAP)return"increment-wrap";if(a===Bc.INVERT)return"invert";throw new Error("whoops")}function Y3(a,o){if(!(0,Qd.Z)(a))return{format:d2(a),depthWriteEnabled:!!o.depthWrite,depthCompare:gb(o.depthCompare),depthBias:o.polygonOffset?o.polygonOffsetUnits:0,depthBiasSlopeScale:o.polygonOffset?o.polygonOffsetFactor:0,stencilFront:{compare:gb(o.stencilFront.compare),passOp:wm(o.stencilFront.passOp),failOp:wm(o.stencilFront.failOp),depthFailOp:wm(o.stencilFront.depthFailOp)},stencilBack:{compare:gb(o.stencilBack.compare),passOp:wm(o.stencilBack.passOp),failOp:wm(o.stencilBack.failOp),depthFailOp:wm(o.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function zT(a){if(a!==null){if(a===ir.U16_R)return"uint16";if(a===ir.U32_R)return"uint32";throw new Error("whoops")}}function jT(a){if(a===_g.VERTEX)return"vertex";if(a===_g.INSTANCE)return"instance";throw new Error("whoops")}function K3(a){if(a===ir.U8_R)return"uint8x2";if(a===ir.U8_RG)return"uint8x2";if(a===ir.U8_RGB)return"uint8x4";if(a===ir.U8_RGBA)return"uint8x4";if(a===ir.U8_RG_NORM)return"unorm8x2";if(a===ir.U8_RGBA_NORM)return"unorm8x4";if(a===ir.S8_RGB_NORM)return"snorm8x4";if(a===ir.S8_RGBA_NORM)return"snorm8x4";if(a===ir.U16_RG_NORM)return"unorm16x2";if(a===ir.U16_RGBA_NORM)return"unorm16x4";if(a===ir.S16_RG_NORM)return"snorm16x2";if(a===ir.S16_RGBA_NORM)return"snorm16x4";if(a===ir.S16_RG)return"uint16x2";if(a===ir.F16_RG)return"float16x2";if(a===ir.F16_RGBA)return"float16x4";if(a===ir.F32_R)return"float32";if(a===ir.F32_RG)return"float32x2";if(a===ir.F32_RGB)return"float32x3";if(a===ir.F32_RGBA)return"float32x4";throw"whoops"}function q3(a){var o=X0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_SNORM:case ri.BC4_UNORM:case ri.BC5_SNORM:case ri.BC5_UNORM:return!0;default:return!1}}function Q3(a){var o=X0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_SNORM:case ri.BC4_UNORM:case ri.BC5_SNORM:case ri.BC5_UNORM:return 4;default:return 1}}function VT(a,o,f,m){switch(f===void 0&&(f=!1),a){case ir.S8_R:case ir.S8_R_NORM:case ir.S8_RG_NORM:case ir.S8_RGB_NORM:case ir.S8_RGBA_NORM:{var w=o instanceof ArrayBuffer?new Int8Array(o):new Int8Array(o);return m&&w.set(new Int8Array(m)),w}case ir.U8_R:case ir.U8_R_NORM:case ir.U8_RG:case ir.U8_RG_NORM:case ir.U8_RGB:case ir.U8_RGB_NORM:case ir.U8_RGB_SRGB:case ir.U8_RGBA:case ir.U8_RGBA_NORM:case ir.U8_RGBA_SRGB:{var O=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&O.set(new Uint8Array(m)),O}case ir.S16_R:case ir.S16_RG:case ir.S16_RG_NORM:case ir.S16_RGB_NORM:case ir.S16_RGBA:case ir.S16_RGBA_NORM:{var L=o instanceof ArrayBuffer?new Int16Array(o):new Int16Array(f?o/2:o);return m&&L.set(new Int16Array(m)),L}case ir.U16_R:case ir.U16_RGB:case ir.U16_RGBA_5551:case ir.U16_RGBA_NORM:case ir.U16_RG_NORM:case ir.U16_R_NORM:{var F=o instanceof ArrayBuffer?new Uint16Array(o):new Uint16Array(f?o/2:o);return m&&F.set(new Uint16Array(m)),F}case ir.S32_R:{var V=o instanceof ArrayBuffer?new Int32Array(o):new Int32Array(f?o/4:o);return m&&V.set(new Int32Array(m)),V}case ir.U32_R:case ir.U32_RG:{var re=o instanceof ArrayBuffer?new Uint32Array(o):new Uint32Array(f?o/4:o);return m&&re.set(new Uint32Array(m)),re}case ir.F32_R:case ir.F32_RG:case ir.F32_RGB:case ir.F32_RGBA:{var Ee=o instanceof ArrayBuffer?new Float32Array(o):new Float32Array(f?o/4:o);return m&&Ee.set(new Float32Array(m)),Ee}}var Te=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&Te.set(new Uint8Array(m)),Te}function J3(a){var o=(a&32768)>>15,f=(a&31744)>>10,m=a&1023;return f===0?(o?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):f==31?m?NaN:(o?-1:1)*(1/0):(o?-1:1)*Math.pow(2,f-15)*(1+m/Math.pow(2,10))}function HT(a){switch(a){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var p0=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=a.call(this)||this;return O.id=m,O.device=w,O}return o.prototype.destroy=function(){},o}(ph),eR=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L,F,V=a.call(this,{id:m,device:w})||this;V.type=Ws.Bindings;var re=O.pipeline;Ga(!!re);var Ee=O.uniformBufferBindings,Te=O.storageBufferBindings,$e=O.samplerBindings,Dt=O.storageTextureBindings;V.numUniformBuffers=(Ee==null?void 0:Ee.length)||0;var nn=[[],[],[],[]],Tn=0;if(Ee&&Ee.length)for(var sr=0;sr<Ee.length;sr++){var Br=O.uniformBufferBindings[sr],Er=Br.binding,ui=Br.size,Vi=Br.offset,Po=Br.buffer,no={buffer:Ay(Po),offset:Vi!=null?Vi:0,size:ui};nn[0].push({binding:Er!=null?Er:Tn++,resource:no})}if($e&&$e.length){Tn=0;for(var sr=0;sr<$e.length;sr++){var Wr=(0,So.pi)((0,So.pi)({},$e[sr]),q1),Er=O.samplerBindings[sr],ro=Er.texture!==null?Er.texture:V.device.getFallbackTexture(Wr);Wr.dimension=ro.dimension,Wr.formatKind=fT(ro.format);var Ba=ro.gpuTextureView;if(nn[1].push({binding:(L=Er.textureBinding)!==null&&L!==void 0?L:Tn++,resource:Ba}),Er.samplerBinding!==-1){var ls=Er.sampler!==null?Er.sampler:V.device.getFallbackSampler(Wr),ta=j3(ls);nn[1].push({binding:(F=Er.samplerBinding)!==null&&F!==void 0?F:Tn++,resource:ta})}}}if(Te&&Te.length){Tn=0;for(var sr=0;sr<Te.length;sr++){var _s=O.storageBufferBindings[sr],Er=_s.binding,ui=_s.size,Vi=_s.offset,Po=_s.buffer,no={buffer:Ay(Po),offset:Vi!=null?Vi:0,size:ui};nn[2].push({binding:Er!=null?Er:Tn++,resource:no})}}if(Dt&&Dt.length){Tn=0;for(var sr=0;sr<Dt.length;sr++){var is=O.storageTextureBindings[sr],Er=is.binding,ro=is.texture,Ba=ro.gpuTextureView;nn[3].push({binding:Er!=null?Er:Tn++,resource:Ba})}}var ds=nn.findLastIndex(function(np){return!!np.length});return V.gpuBindGroup=nn.map(function(np,rp){return rp<=ds&&V.device.device.createBindGroup({layout:re.getBindGroupLayout(rp),entries:np})}),V}return o}(p0),tR=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.Buffer;var F=O.usage,V=O.viewOrSize,re=!!(F&Ol.MAP_READ);L.usage=U3(F),re&&(L.usage=Ol.MAP_READ|Ol.COPY_DST);var Ee=!(0,ym.Z)(V);if(L.view=(0,ym.Z)(V)?null:V,L.size=(0,ym.Z)(V)?k_(V,4):k_(V.byteLength,4),(0,ym.Z)(V))L.gpuBuffer=L.device.device.createBuffer({usage:L.usage,size:L.size,mappedAtCreation:re?Ee:!1});else{L.gpuBuffer=L.device.device.createBuffer({usage:L.usage,size:L.size,mappedAtCreation:!0});var Te=V&&V.constructor||Float32Array;new Te(L.gpuBuffer.getMappedRange()).set(V),L.gpuBuffer.unmap()}return L}return o.prototype.setSubData=function(f,m,w,O){w===void 0&&(w=0),O===void 0&&(O=0);var L=this.gpuBuffer;O=O||m.byteLength,O=Math.min(O,this.size-f);var F=m.byteOffset+w,V=F+O,re=O+3&-4;if(re!==O){var Ee=new Uint8Array(m.buffer.slice(F,V));m=new Uint8Array(re),m.set(Ee),w=0,F=0,V=re,O=re}for(var Te=1024*1024*15,$e=0;V-(F+$e)>Te;)this.device.device.queue.writeBuffer(L,f+$e,m.buffer,F+$e,Te),$e+=Te;this.device.device.queue.writeBuffer(L,f+$e,m.buffer,F+$e,O-$e)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuBuffer.destroy()},o}(p0),WT=function(){function a(){this.gpuComputePassEncoder=null}return a.prototype.dispatchWorkgroups=function(o,f,m){this.gpuComputePassEncoder.dispatchWorkgroups(o,f,m)},a.prototype.dispatchWorkgroupsIndirect=function(o,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(o.gpuBuffer,f)},a.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},a.prototype.beginComputePass=function(o){Ga(this.gpuComputePassEncoder===null),this.frameCommandEncoder=o,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},a.prototype.setPipeline=function(o){var f=o,m=ep(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},a.prototype.setBindings=function(o){var f=this,m=o;m.gpuBindGroup.forEach(function(w,O){w&&f.gpuComputePassEncoder.setBindGroup(O,m.gpuBindGroup[O])})},a.prototype.pushDebugGroup=function(o){this.gpuComputePassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuComputePassEncoder.insertDebugMarker(o)},a}(),Am=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.ComputePipeline,L.gpuComputePipeline=null,L.descriptor=O;var F=O.program,V=F.computeStage;if(V===null)return L;var re={layout:"auto",compute:(0,So.pi)({},V)};return L.gpuComputePipeline=L.device.device.createComputePipeline(re),L.name!==void 0&&(L.gpuComputePipeline.label=L.name),L}return o.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},o}(p0),yb=function(a){(0,So.ZT)(o,a);function o(f){var m,w,O,L,F=f.id,V=f.device,re=f.descriptor,Ee=a.call(this,{id:F,device:V})||this;Ee.type=Ws.InputLayout;var Te=[];try{for(var $e=(0,So.XA)(re.vertexBufferDescriptors),Dt=$e.next();!Dt.done;Dt=$e.next()){var nn=Dt.value,Tn=nn.arrayStride,sr=nn.stepMode,Br=nn.attributes;Te.push({arrayStride:Tn,stepMode:jT(sr),attributes:[]});try{for(var Er=(O=void 0,(0,So.XA)(Br)),ui=Er.next();!ui.done;ui=Er.next()){var Vi=ui.value,Po=Vi.shaderLocation,no=Vi.format,Wr=Vi.offset;Te[Te.length-1].attributes.push({shaderLocation:Po,format:K3(no),offset:Wr})}}catch(ro){O={error:ro}}finally{try{ui&&!ui.done&&(L=Er.return)&&L.call(Er)}finally{if(O)throw O.error}}}}catch(ro){m={error:ro}}finally{try{Dt&&!Dt.done&&(w=$e.return)&&w.call($e)}finally{if(m)throw m.error}}return Ee.indexFormat=zT(re.indexBufferFormat),Ee.buffers=Te,Ee}return o}(p0),v2=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;return L.type=Ws.Program,L.vertexStage=null,L.fragmentStage=null,L.computeStage=null,L.descriptor=O,O.vertex&&(L.vertexStage=L.createShaderStage(O.vertex,"vertex")),O.fragment&&(L.fragmentStage=L.createShaderStage(O.fragment,"fragment")),O.compute&&(L.computeStage=L.createShaderStage(O.compute,"compute")),L}return o.prototype.setUniformsLegacy=function(f){},o.prototype.createShaderStage=function(f,m){var w,O,L=f.glsl,F=f.wgsl,V=f.entryPoint,re=f.postprocess,Ee=!1,Te=F;if(!Te)try{Te=this.device.glsl_compile(L,m,Ee)}catch(Br){throw console.error(Br,L),new Error("whoops")}var $e=function(Br){if(!Te.includes(Br))return"continue";Te=Te.replace("var T_".concat(Br,": texture_2d<f32>;"),"var T_".concat(Br,": texture_depth_2d;")),Te=Te.replace(new RegExp("textureSample\\(T_".concat(Br,"(.*)\\);$"),"gm"),function(Er,ui){return"vec4<f32>(textureSample(T_".concat(Br).concat(ui,"), 0.0, 0.0, 0.0);")})};try{for(var Dt=(0,So.XA)(["u_TextureFramebufferDepth"]),nn=Dt.next();!nn.done;nn=Dt.next()){var Tn=nn.value;$e(Tn)}}catch(Br){w={error:Br}}finally{try{nn&&!nn.done&&(O=Dt.return)&&O.call(Dt)}finally{if(w)throw w.error}}re&&(Te=re(Te));var sr=this.device.device.createShaderModule({code:Te});return{module:sr,entryPoint:V||"main"}},o}(p0),GT=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;L.type=Ws.QueryPool;var F=O.elemCount,V=O.type;return L.querySet=L.device.device.createQuerySet({type:H3(V),count:F}),L.resolveBuffer=L.device.device.createBuffer({size:F*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),L.cpuBuffer=L.device.device.createBuffer({size:F*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),L.results=null,L}return o.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},o}(p0),ZT=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=a.call(this,{id:m,device:w})||this;return O.type=Ws.Readback,O}return o.prototype.readTexture=function(f,m,w,O,L,F,V,re){return V===void 0&&(V=0),(0,So.mG)(this,void 0,void 0,function(){var Ee,Te,$e,Dt,nn,Tn,sr,Br;return(0,So.Jh)(this,function(Er){return Ee=f,Te=0,$e=HT(Ee.gpuTextureformat),Dt=Math.ceil(O/$e.width)*$e.length,nn=Math.ceil(Dt/256)*256,Tn=nn*L,sr=this.device.createBuffer({usage:Ol.STORAGE|Ol.MAP_READ|Ol.COPY_DST,hint:d0.STATIC,viewOrSize:Tn}),Br=this.device.device.createCommandEncoder(),Br.copyTextureToBuffer({texture:Ee.gpuTexture,mipLevel:0,origin:{x:m,y:w,z:Math.max(Te,0)}},{buffer:sr.gpuBuffer,offset:0,bytesPerRow:nn},{width:O,height:L,depthOrArrayLayers:1}),this.device.device.queue.submit([Br.finish()]),[2,this.readBuffer(sr,0,F.byteLength===Tn?F:null,V,Tn,Ee.format,!0,!1,Dt,nn,L)]})})},o.prototype.readTextureSync=function(f,m,w,O,L,F,V,re){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},o.prototype.readBuffer=function(f,m,w,O,L,F,V,re,Ee,Te,$e){var Dt=this;m===void 0&&(m=0),w===void 0&&(w=null),L===void 0&&(L=0),F===void 0&&(F=ir.U8_RGB),V===void 0&&(V=!1),Ee===void 0&&(Ee=0),Te===void 0&&(Te=0),$e===void 0&&($e=0);var nn=f,Tn=L||nn.size,sr=w||nn.view,Br=sr&&sr.constructor&&sr.constructor.BYTES_PER_ELEMENT||uT(F),Er=nn;if(!(nn.usage&Ol.MAP_READ&&nn.usage&Ol.COPY_DST)){var ui=this.device.device.createCommandEncoder();Er=this.device.createBuffer({usage:Ol.STORAGE|Ol.MAP_READ|Ol.COPY_DST,hint:d0.STATIC,viewOrSize:Tn}),ui.copyBufferToBuffer(nn.gpuBuffer,m,Er.gpuBuffer,0,Tn),this.device.device.queue.submit([ui.finish()])}return new Promise(function(Vi,Po){Er.gpuBuffer.mapAsync(h2.READ,m,Tn).then(function(){var no=Er.gpuBuffer.getMappedRange(m,Tn),Wr=sr;if(V)Wr===null?Wr=VT(F,Tn,!0,no):Wr=VT(F,Wr.buffer,void 0,no);else if(Wr===null)switch(Br){case 1:Wr=new Uint8Array(Tn),Wr.set(new Uint8Array(no));break;case 2:Wr=Dt.getHalfFloatAsFloatRGBAArrayBuffer(Tn/2,no);break;case 4:Wr=new Float32Array(Tn/4),Wr.set(new Float32Array(no));break}else switch(Br){case 1:Wr=new Uint8Array(Wr.buffer),Wr.set(new Uint8Array(no));break;case 2:Wr=Dt.getHalfFloatAsFloatRGBAArrayBuffer(Tn/2,no,sr);break;case 4:var ro=sr&&sr.constructor||Float32Array;Wr=new ro(Wr.buffer),Wr.set(new ro(no));break}if(Ee!==Te){Br===1&&!V&&(Ee*=2,Te*=2);for(var Ba=new Uint8Array(Wr.buffer),ls=Ee,ta=0,_s=1;_s<$e;++_s){ta=_s*Te;for(var is=0;is<Ee;++is)Ba[ls++]=Ba[ta++]}Br!==0&&!V?Wr=new Float32Array(Ba.buffer,0,ls/4):Wr=new Uint8Array(Ba.buffer,0,ls)}Er.gpuBuffer.unmap(),Vi(Wr)},function(no){return Po(no)})})},o.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,m,w){w||(w=new Float32Array(f));for(var O=new Uint16Array(m);f--;)w[f]=J3(O[f]);return w},o}(p0),_b=function(){function a(o){this.device=o,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return a.prototype.getEncoder=function(){var o;return((o=this.renderBundle)===null||o===void 0?void 0:o.renderBundleEncoder)||this.gpuRenderPassEncoder},a.prototype.getTextureView=function(o,f){return Ga(f<o.mipLevelCount),o.mipLevelCount===1?o.gpuTextureView:o.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},a.prototype.setRenderPassDescriptor=function(o){var f,m,w,O,L,F;this.descriptor=o,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var V=o.colorAttachment.length;this.gfxColorAttachment.length=V,this.gfxColorResolveTo.length=V;for(var re=0;re<o.colorAttachment.length;re++){var Ee=o.colorAttachment[re],Te=o.colorResolveTo[re];if(Ee===null&&Te!==null&&(Ee=Te,Te=null),this.gfxColorAttachment[re]=Ee,this.gfxColorResolveTo[re]=Te,this.gfxColorAttachmentLevel[re]=((f=o.colorAttachmentLevel)===null||f===void 0?void 0:f[re])||0,this.gfxColorResolveToLevel[re]=((m=o.colorResolveToLevel)===null||m===void 0?void 0:m[re])||0,Ee!==null){this.gpuColorAttachments[re]===void 0&&(this.gpuColorAttachments[re]={});var $e=this.gpuColorAttachments[re];$e.view=this.getTextureView(Ee,((w=this.gfxColorAttachmentLevel)===null||w===void 0?void 0:w[re])||0);var Dt=(L=(O=o.colorClearColor)===null||O===void 0?void 0:O[re])!==null&&L!==void 0?L:"load";Dt==="load"?$e.loadOp="load":($e.loadOp="clear",$e.clearValue=Dt),$e.storeOp=!((F=o.colorStore)===null||F===void 0)&&F[re]?"store":"discard",$e.resolveTarget=void 0,Te!==null&&(Ee.sampleCount>1?$e.resolveTarget=this.getTextureView(Te,this.gfxColorResolveToLevel[re]):$e.storeOp="store")}else{this.gpuColorAttachments.length=re,this.gfxColorAttachment.length=re,this.gfxColorResolveTo.length=re;break}}if(this.gfxDepthStencilAttachment=o.depthStencilAttachment,this.gfxDepthStencilResolveTo=o.depthStencilResolveTo,o.depthStencilAttachment){var nn=o.depthStencilAttachment,$e=this.gpuDepthStencilAttachment;$e.view=nn.gpuTextureView;var Tn=!!(Jd(nn.format)&mo.Depth);Tn?(o.depthClearValue==="load"?$e.depthLoadOp="load":($e.depthLoadOp="clear",$e.depthClearValue=o.depthClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?$e.depthStoreOp="store":$e.depthStoreOp="discard"):($e.depthLoadOp=void 0,$e.depthStoreOp=void 0);var sr=!!(Jd(nn.format)&mo.Stencil);sr?(o.stencilClearValue==="load"?$e.stencilLoadOp="load":($e.stencilLoadOp="clear",$e.stencilClearValue=o.stencilClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?$e.stencilStoreOp="store":$e.stencilStoreOp="discard"):($e.stencilLoadOp=void 0,$e.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,Qd.Z)(o.occlusionQueryPool)?void 0:V3(o.occlusionQueryPool)},a.prototype.beginRenderPass=function(o,f){Ga(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=o,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},a.prototype.flipY=function(o,f){var m=this.device.swapChainHeight;return m-o-f},a.prototype.setViewport=function(o,f,m,w,O,L){O===void 0&&(O=0),L===void 0&&(L=1),this.gpuRenderPassEncoder.setViewport(o,this.flipY(f,w),m,w,O,L)},a.prototype.setScissorRect=function(o,f,m,w){this.gpuRenderPassEncoder.setScissorRect(o,this.flipY(f,w),m,w)},a.prototype.setPipeline=function(o){var f=o,m=ep(f.gpuRenderPipeline);this.getEncoder().setPipeline(m)},a.prototype.setVertexInput=function(o,f,m){if(o!==null){var w=this.getEncoder(),O=o;m!==null&&w.setIndexBuffer(Ay(m.buffer),ep(O.indexFormat),m.offset);for(var L=0;L<f.length;L++){var F=f[L];F!==null&&w.setVertexBuffer(L,Ay(F.buffer),F.offset)}}},a.prototype.setBindings=function(o){var f=o,m=this.getEncoder();f.gpuBindGroup.forEach(function(w,O){w&&m.setBindGroup(O,f.gpuBindGroup[O])})},a.prototype.setStencilReference=function(o){this.gpuRenderPassEncoder.setStencilReference(o)},a.prototype.draw=function(o,f,m,w){this.getEncoder().draw(o,f,m,w)},a.prototype.drawIndexed=function(o,f,m,w,O){this.getEncoder().drawIndexed(o,f,m,w,O)},a.prototype.drawIndirect=function(o,f){this.getEncoder().drawIndirect(Ay(o),f)},a.prototype.drawIndexedIndirect=function(o,f){this.getEncoder().drawIndexedIndirect(Ay(o),f)},a.prototype.beginOcclusionQuery=function(o){this.gpuRenderPassEncoder.beginOcclusionQuery(o)},a.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},a.prototype.pushDebugGroup=function(o){this.gpuRenderPassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuRenderPassEncoder.insertDebugMarker(o)},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle.finish()},a.prototype.executeBundles=function(o){this.gpuRenderPassEncoder.executeBundles(o.map(function(f){return f.renderBundle}))},a.prototype.finish=function(){var o;(o=this.gpuRenderPassEncoder)===null||o===void 0||o.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var m=this.gfxColorAttachment[f],w=this.gfxColorResolveTo[f];m!==null&&w!==null&&m.sampleCount===1&&this.copyAttachment(w,this.gfxColorAttachmentLevel[f],m,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},a.prototype.copyAttachment=function(o,f,m,w){Ga(m.sampleCount===1);var O={texture:m.gpuTexture,mipLevel:w},L={texture:o.gpuTexture,mipLevel:f};Ga(m.width>>>w===o.width>>>f),Ga(m.height>>>w===o.height>>>f),Ga(!!(m.usage&Yu.COPY_SRC)),Ga(!!(o.usage&Yu.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(O,L,[o.width,o.height,1])},a}(),nR=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=a.call(this,{id:m,device:w})||this;return L.type=Ws.RenderPipeline,L.isCreatingAsync=!1,L.gpuRenderPipeline=null,L.descriptor=O,L.device.createRenderPipelineInternal(L,!1),L}return o.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},o}(p0),rR=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L,F,V=a.call(this,{id:m,device:w})||this;V.type=Ws.Sampler;var re=O.lodMinClamp,Ee=O.mipmapFilter===$u.NO_MIP?O.lodMinClamp:O.lodMaxClamp,Te=(L=O.maxAnisotropy)!==null&&L!==void 0?L:1;return Te>1&&Ga(O.minFilter===Nc.BILINEAR&&O.magFilter===Nc.BILINEAR&&O.mipmapFilter===$u.LINEAR),V.gpuSampler=V.device.device.createSampler({addressModeU:p2(O.addressModeU),addressModeV:p2(O.addressModeV),addressModeW:p2((F=O.addressModeW)!==null&&F!==void 0?F:O.addressModeU),lodMinClamp:re,lodMaxClamp:Ee,minFilter:FT(O.minFilter),magFilter:FT(O.magFilter),mipmapFilter:z3(O.mipmapFilter),compare:O.compareFunction!==void 0?gb(O.compareFunction):void 0,maxAnisotropy:Te}),V}return o}(p0),m2=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=f.descriptor,L=f.skipCreate,F=f.sampleCount,V=a.call(this,{id:m,device:w})||this;V.type=Ws.Texture,V.flipY=!1;var re=O.format,Ee=O.dimension,Te=O.width,$e=O.height,Dt=O.depthOrArrayLayers,nn=O.mipLevelCount,Tn=O.usage,sr=O.pixelStore;return V.flipY=!!(sr!=null&&sr.unpackFlipY),V.device.createTextureShared({format:re,dimension:Ee!=null?Ee:hs.TEXTURE_2D,width:Te,height:$e,depthOrArrayLayers:Dt!=null?Dt:1,mipLevelCount:nn!=null?nn:1,usage:Tn,sampleCount:F!=null?F:1},V,L),V}return o.prototype.textureFromImageBitmapOrCanvas=function(f,m,w){for(var O=m[0].width,L=m[0].height,F={size:{width:O,height:L,depthOrArrayLayers:w},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},V=f.createTexture(F),re=0;re<m.length;re++)f.queue.copyExternalImageToTexture({source:m[re],flipY:this.flipY},{texture:V,origin:[0,0,re]},[O,L]);return[V,O,L]},o.prototype.isImageBitmapOrCanvases=function(f){var m=f[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},o.prototype.isVideo=function(f){var m=f[0];return m instanceof HTMLVideoElement},o.prototype.setImageData=function(f,m){var w,O=this,L=this.device.device,F,V,re;if(this.isImageBitmapOrCanvases(f))w=(0,So.CR)(this.textureFromImageBitmapOrCanvas(L,f,this.depthOrArrayLayers),3),F=w[0],V=w[1],re=w[2];else if(this.isVideo(f))F=L.importExternalTexture({source:f[0]});else{var Ee=HT(this.gpuTextureformat),Te=Math.ceil(this.width/Ee.width)*Ee.length;f.forEach(function($e){L.queue.writeTexture({texture:O.gpuTexture},$e,{bytesPerRow:Te},{width:O.width,height:O.height})})}this.width=V,this.height=re,F&&(this.gpuTexture=F),this.gpuTextureView=this.gpuTexture.createView({dimension:k3(this.dimension)})},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuTexture.destroy()},o}(p0),f4=function(a){(0,So.ZT)(o,a);function o(f){var m=f.id,w=f.device,O=a.call(this,{id:m,device:w})||this;return O.type=Ws.RenderBundle,O.renderBundleEncoder=O.device.device.createRenderBundleEncoder({colorFormats:[O.device.swapChainFormat]}),O}return o.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},o}(p0),h4=function(){function a(o,f,m,w,O,L){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Yu.RENDER_ATTACHMENT|Yu.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=pd.UPPER_LEFT,this.clipSpaceNearZ=bg.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=m,this.canvasContext=w,this.glsl_compile=O,this.WGSLComposer=L,this.fallbackTexture2D=this.createFallbackTexture(hs.TEXTURE_2D,Fc.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(hs.TEXTURE_2D,Fc.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(hs.TEXTURE_2D_ARRAY,Fc.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(hs.TEXTURE_3D,Fc.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(hs.TEXTURE_CUBE_MAP,Fc.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:al.REPEAT,addressModeV:al.REPEAT,minFilter:Nc.POINT,magFilter:Nc.POINT,mipmapFilter:$u.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:al.REPEAT,addressModeV:al.REPEAT,minFilter:Nc.POINT,magFilter:Nc.POINT,mipmapFilter:$u.NEAREST,compareFunction:rs.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(F){console.error(F.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return a.prototype.destroy=function(){},a.prototype.configureSwapChain=function(o,f){this.swapChainWidth===o&&this.swapChainHeight===f||(this.swapChainWidth=o,this.swapChainHeight=f)},a.prototype.getOnscreenTexture=function(){var o=this.canvasContext.getCurrentTexture(),f=o.createView(),m=new m2({id:0,device:this,descriptor:{format:ir.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:hs.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=o,m.gpuTextureView=f,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.canvas},a.prototype.beginFrame=function(){Ga(this.frameCommandEncoderPool.length===0)},a.prototype.endFrame=function(){Ga(this.frameCommandEncoderPool.every(function(o){return o!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(o){return o.finish()})),this.frameCommandEncoderPool=[]},a.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},a.prototype.createBuffer=function(o){return new tR({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new m2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new rR({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){var f=new m2({id:this.getNextUniqueId(),device:this,descriptor:(0,So.pi)((0,So.pi)({},o),{dimension:hs.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Kf.RENDER_TARGET}),sampleCount:o.sampleCount});return f.depthOrArrayLayers=1,f.type=Ws.RenderTarget,f},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,O=f.height,L=f.depthOrArrayLayers,F=f.sampleCount,V=f.mipLevelCount,re=f.gpuTexture,Ee=f.gpuTextureView,Te=f.usage;Ga(!!(Te&Yu.RENDER_ATTACHMENT));var $e=new m2({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:w,height:O,depthOrArrayLayers:L,dimension:hs.TEXTURE_2D,mipLevelCount:V,usage:Te},skipCreate:!0});return $e.depthOrArrayLayers=L,$e.sampleCount=F,$e.gpuTexture=re,$e.gpuTextureView=Ee,$e},a.prototype.createProgram=function(o){var f,m;return!((f=o.vertex)===null||f===void 0)&&f.glsl&&(o.vertex.glsl=Mv(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((m=o.fragment)===null||m===void 0)&&m.glsl&&(o.fragment.glsl=Mv(this.queryVendorInfo(),"frag",o.fragment.glsl)),new v2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createProgramSimple=function(o){return new v2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTextureShared=function(o,f,m){var w={width:o.width,height:o.height,depthOrArrayLayers:o.depthOrArrayLayers},O=o.mipLevelCount,L=d2(o.format),F=F3(o.dimension),V=BT(o.usage);if(f.gpuTextureformat=L,f.dimension=o.dimension,f.format=o.format,f.width=o.width,f.height=o.height,f.depthOrArrayLayers=o.depthOrArrayLayers,f.mipLevelCount=O,f.usage=V,f.sampleCount=o.sampleCount,!m){var re=this.device.createTexture({size:w,mipLevelCount:O,format:L,dimension:F,sampleCount:o.sampleCount,usage:V}),Ee=re.createView();f.gpuTexture=re,f.gpuTextureView=Ee}},a.prototype.getFallbackSampler=function(o){var f=o.formatKind;return f===Fc.Depth&&o.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},a.prototype.getFallbackTexture=function(o){var f=o.dimension,m=o.formatKind;if(f===hs.TEXTURE_2D)return m===Fc.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===hs.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===hs.TEXTURE_3D)return this.fallbackTexture3D;if(f===hs.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.createFallbackTexture=function(o,f){var m=o===hs.TEXTURE_CUBE_MAP?6:1,w=f===Fc.Float?ir.U8_RGBA_NORM:ir.D24;return this.createTexture({dimension:o,format:w,usage:Kf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},a.prototype.createBindings=function(o){return new eR({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new yb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePipeline=function(o){return new Am({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new nR({id:this.getNextUniqueId(),device:this,descriptor:(0,So.pi)({},o)})},a.prototype.createQueryPool=function(o,f){return new GT({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.createRenderPipelineInternal=function(o,f){var m;if(o.gpuRenderPipeline===null){var w=o.descriptor,O=w.program,L=O.vertexStage,F=O.fragmentStage;if(!(L===null||F===null)){var V=w.megaStateDescriptor||{},re=V.stencilBack,Ee=V.stencilFront,Te=(0,So._T)(V,["stencilBack","stencilFront"]),$e=bm(Ov);w.megaStateDescriptor=(0,So.pi)((0,So.pi)((0,So.pi)({},$e),{stencilBack:(0,So.pi)((0,So.pi)({},$e.stencilBack),re),stencilFront:(0,So.pi)((0,So.pi)({},$e.stencilFront),Ee)}),Te);var Dt=w.megaStateDescriptor.attachmentsState[0];w.colorAttachmentFormats.forEach(function(Vi,Po){w.megaStateDescriptor.attachmentsState[Po]||(w.megaStateDescriptor.attachmentsState[Po]=qf(void 0,Dt))});var nn=X3((m=w.topology)!==null&&m!==void 0?m:xu.TRIANGLES,w.megaStateDescriptor),Tn=UT(w.colorAttachmentFormats,w.megaStateDescriptor),sr=Y3(w.depthStencilAttachmentFormat,w.megaStateDescriptor),Br=void 0;w.inputLayout!==null&&(Br=w.inputLayout.buffers);var Er=w.sampleCount,ui={layout:"auto",vertex:(0,So.pi)((0,So.pi)({},L),{buffers:Br}),primitive:nn,depthStencil:sr,multisample:{count:Er},fragment:(0,So.pi)((0,So.pi)({},F),{targets:Tn})};o.gpuRenderPipeline=this.device.createRenderPipeline(ui)}}},a.prototype.createReadback=function(){return new ZT({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderBundle=function(){return new f4({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderPass=function(o){var f=this.renderPassPool.pop();f===void 0&&(f=new _b(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),f.beginRenderPass(m,o),f},a.prototype.createComputePass=function(){var o=this.computePassPool.pop();o===void 0&&(o=new WT);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),o.beginComputePass(f),o},a.prototype.submitPass=function(o){var f=o;f instanceof _b?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof WT&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},a.prototype.copySubTexture2D=function(o,f,m,w,O,L,F){var V=this.device.createCommandEncoder(),re=o,Ee=w,Te={texture:Ee.gpuTexture,origin:[O,L,0],mipLevel:0,aspect:"all"},$e={texture:re.gpuTexture,origin:[f,m,0],mipLevel:0,aspect:"all"};Ga(!!(Ee.usage&Yu.COPY_SRC)),Ga(!!(re.usage&Yu.COPY_DST)),V.copyTextureToTexture(Te,$e,[Ee.width,Ee.height,F||1]),this.device.queue.submit([V.finish()])},a.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},a.prototype.queryTextureFormatSupported=function(o,f,m){if(q3(o)){if(!this.featureTextureCompressionBC)return!1;var w=Q3(o);return f%w!==0||m%w!==0?!1:this.featureTextureCompressionBC}switch(o){case ir.U16_RGBA_NORM:return!1;case ir.F32_RGBA:return!1}return!0},a.prototype.queryPlatformAvailable=function(){return!0},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){var f=o;return f.descriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Ws.Buffer){var m=o;m.gpuBuffer.label=f}else if(o.type===Ws.Texture){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Ws.RenderTarget){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Ws.Sampler){var m=o;m.gpuSampler.label=f}else if(o.type===Ws.RenderPipeline){var m=o;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=f)}},a.prototype.setResourceLeakCheck=function(o,f){},a.prototype.checkForLeaks=function(){},a.prototype.programPatched=function(o){},a.prototype.pipelineQueryReady=function(o){var f=o;return f.gpuRenderPipeline!==null},a.prototype.pipelineForceReady=function(o){var f=o;this.createRenderPipelineInternal(f,!1)},a}(),d4=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,So.mG)(this,void 0,void 0,function(){var f,m,w,O,L,F,V,re;return(0,So.Jh)(this,function(Ee){switch(Ee.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return f=Ee.sent(),[3,4];case 3:return w=Ee.sent(),console.log(w),[3,4];case 4:return f===null?[2,null]:(O=["depth32float-stencil8","texture-compression-bc","float32-filterable"],L=O.filter(function(Te){return f.features.has(Te)}),[4,f.requestDevice({requiredFeatures:L})]);case 5:if(F=Ee.sent(),F&&(V=this.pluginOptions.onContextLost,F.lost.then(function(){V&&V()})),F===null)return[2,null];if(re=o.getContext("webgpu"),!re)return[2,null];Ee.label=6;case 6:return Ee.trys.push([6,8,,9]),[4,NT(this.pluginOptions.shaderCompilerPath)];case 7:return Ee.sent(),[3,9];case 8:return Ee.sent(),[3,9];case 9:return[2,new h4(f,F,o,re,L3,wy&&new wy)]}})})},a}(),p4=Object.defineProperty,v4=Object.defineProperties,m4=Object.getOwnPropertyDescriptors,XT=Object.getOwnPropertySymbols,iR=Object.prototype.hasOwnProperty,oR=Object.prototype.propertyIsEnumerable,$T=(a,o,f)=>o in a?p4(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,X_=(a,o)=>{for(var f in o||(o={}))iR.call(o,f)&&$T(a,f,o[f]);if(XT)for(var f of XT(o))oR.call(o,f)&&$T(a,f,o[f]);return a},aR=(a,o)=>v4(a,m4(o)),{isPlainObject:sR,isTypedArray:lR}=Me.lodashUtil,cR=class{constructor(a,o){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:f,fs:m,attributes:w,uniforms:O,primitive:L,count:F,elements:V,depth:re,cull:Ee,instances:Te}=o,$e={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:pd.LOWER_LEFT,clipSpaceNearZ:bg.NEGATIVE_ONE,supportMRT:!1},Dt={};this.options=o,O&&(this.uniforms=this.extractUniforms(O),Object.keys(O).forEach(Er=>{Dt[Er]=a.prop(Er)}));const nn={};Object.keys(w).forEach(Er=>{nn[Er]=w[Er].get()});const Tn=(0,Y.Vb)(Mv($e,"frag",m,null,!1)),sr=(0,Y.Vb)(Mv($e,"vert",f,null,!1)),Br={attributes:nn,frag:Tn,uniforms:Dt,vert:sr,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:jO[L===void 0?Y.gl.TRIANGLES:L]};Te&&(Br.instances=Te),F?Br.count=F:V&&(Br.elements=V.get()),this.initDepthDrawParams({depth:re},Br),this.initCullDrawParams({cull:Ee},Br),this.drawCommand=a(Br),this.drawParams=Br}updateAttributesAndElements(a,o){const f={};Object.keys(a).forEach(m=>{f[m]=a[m].get()}),this.drawParams.attributes=f,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const o={};Object.keys(a).forEach(f=>{o[f]=a[f].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=X_(X_({},this.uniforms),this.extractUniforms(a))}draw(a,o){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const f=X_(X_({},this.uniforms),this.extractUniforms(a.uniforms||{})),m={};Object.keys(f).forEach(w=>{const O=typeof f[w];O==="boolean"||O==="number"||Array.isArray(f[w])||f[w].BYTES_PER_ELEMENT?m[w]=f[w]:m[w]=f[w].get()}),m.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),m.stencil=this.getStencilDrawParams(a),m.colorMask=this.getColorMaskDrawParams(a,o),this.drawCommand(m)}destroy(){var a,o;(o=(a=this.drawParams)==null?void 0:a.elements)==null||o.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(f=>{f==null||f.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},o){a&&(o.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:WO[a.func||Y.gl.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:N_[f&&f.srcRGB||Y.gl.SRC_ALPHA],srcAlpha:N_[f&&f.srcAlpha||Y.gl.SRC_ALPHA],dstRGB:N_[f&&f.dstRGB||Y.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:N_[f&&f.dstAlpha||Y.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:py[m&&m.rgb||Y.gl.FUNC_ADD],alpha:py[m&&m.alpha||Y.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=-1,func:m={cmp:Y.gl.ALWAYS,ref:0,mask:-1},opFront:w={fail:Y.gl.KEEP,zfail:Y.gl.KEEP,zpass:Y.gl.KEEP},opBack:O={fail:Y.gl.KEEP,zfail:Y.gl.KEEP,zpass:Y.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:aR(X_({},m),{cmp:GO[m.cmp]}),opFront:{fail:vy[w.fail],zfail:vy[w.zfail],zpass:vy[w.zpass]},opBack:{fail:vy[O.fail],zfail:vy[O.zfail],zpass:vy[O.zpass]}}}getColorMaskDrawParams({stencil:a},o){return a!=null&&a.enable&&a.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},o){if(a){const{enable:f,face:m=Y.gl.BACK}=a;o.cull={enable:!!f,face:ZO[m]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||lR(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}sR(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,O)=>{Object.keys(w).forEach(L=>{this.extractUniformsRecursively(L,w[L],f,`${m&&m+"."}${a}[${O}]`)})})}},uR=class{constructor(a,o){this.isDestroy=!1;const{data:f,type:m=Y.gl.UNSIGNED_BYTE,width:w,height:O,flipY:L=!1,format:F=Y.gl.RGBA,mipmap:V=!1,wrapS:re=Y.gl.CLAMP_TO_EDGE,wrapT:Ee=Y.gl.CLAMP_TO_EDGE,aniso:Te=0,alignment:$e=1,premultiplyAlpha:Dt=!1,mag:nn=Y.gl.NEAREST,min:Tn=Y.gl.NEAREST,colorSpace:sr=Y.gl.BROWSER_DEFAULT_WEBGL,x:Br=0,y:Er=0,copy:ui=!1}=o;this.width=w,this.height=O;const Vi={width:w,height:O,type:D_[m],format:yg[F],wrapS:h0[re],wrapT:h0[Ee],mag:oT[nn],min:oT[Tn],alignment:$e,flipY:L,colorSpace:HO[sr],premultiplyAlpha:Dt,aniso:Te,x:Br,y:Er,copy:ui};f&&(Vi.data=f),typeof V=="number"?Vi.mipmap=VO[V]:typeof V=="boolean"&&(Vi.mipmap=V),this.texture=a.texture(Vi)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:o}){this.texture.resize(a,o),this.width=a,this.height=o}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},g2=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),YT=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new cR(this.gl,a),this.createAttribute=a=>new zO(this.gl,a),this.createBuffer=a=>new aT(this.gl,a),this.createElements=a=>new XO(this.gl,a),this.createTexture2D=a=>new uR(this.gl,a),this.createFramebuffer=a=>new $O(this.gl,a),this.useFramebuffer=(a,o)=>{this.gl({framebuffer:a?a.get():null})(o)},this.useFramebufferAsync=(a,o)=>g2(this,null,function*(){this.gl({framebuffer:a?a.get():null})(o)}),this.clear=a=>{var o;const{color:f,depth:m,stencil:w,framebuffer:O=null}=a,L={color:f,depth:m,stencil:w};L.framebuffer=O===null?O:O.get(),(o=this.gl)==null||o.clear(L)},this.viewport=({x:a,y:o,width:f,height:m})=>{this.gl._gl.viewport(a,o,f,m),this.width=f,this.height=m,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:O}=a,L={x:f,y:m,width:w,height:O};return o&&(L.framebuffer=o.get()),this.gl.read(L)},this.readPixelsAsync=a=>g2(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,o,f;this.canvas=null,(f=(o=(a=this.gl)==null?void 0:a._gl)==null?void 0:o.getExtension("WEBGL_lose_context"))==null||f.loseContext(),this.gl.destroy(),this.gl=null}}init(a,o,f){return g2(this,null,function*(){this.canvas=a,f?this.gl=f:this.gl=yield new Promise((m,w)=>{UO()({canvas:this.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(O,L)=>{(O||!L)&&w(O),m(L)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},fR=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:O,size:L,divisor:F,shaderLocation:V}=o;this.buffer=f,this.attribute={shaderLocation:V,buffer:f.get(),offset:m||0,stride:w||0,normalized:O||!1,divisor:F||0},L&&(this.attribute.size=L)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},$_={[Y.gl.FLOAT]:Float32Array,[Y.gl.UNSIGNED_BYTE]:Uint8Array,[Y.gl.SHORT]:Int16Array,[Y.gl.UNSIGNED_SHORT]:Uint16Array,[Y.gl.INT]:Int32Array,[Y.gl.UNSIGNED_INT]:Uint32Array},hR={[Y.gl.POINTS]:xu.POINTS,[Y.gl.LINES]:xu.LINES,[Y.gl.LINE_LOOP]:xu.LINES,[Y.gl.LINE_STRIP]:xu.LINE_STRIP,[Y.gl.TRIANGLES]:xu.TRIANGLES,[Y.gl.TRIANGLE_FAN]:xu.TRIANGLES,[Y.gl.TRIANGLE_STRIP]:xu.TRIANGLE_STRIP},KT={1:ir.F32_R,2:ir.F32_RG,3:ir.F32_RGB,4:ir.F32_RGBA},dR={[Y.gl.STATIC_DRAW]:d0.STATIC,[Y.gl.DYNAMIC_DRAW]:d0.DYNAMIC,[Y.gl.STREAM_DRAW]:d0.DYNAMIC},bb={[Y.gl.REPEAT]:al.REPEAT,[Y.gl.CLAMP_TO_EDGE]:al.CLAMP_TO_EDGE,[Y.gl.MIRRORED_REPEAT]:al.MIRRORED_REPEAT},pR={[Y.gl.NEVER]:rs.NEVER,[Y.gl.ALWAYS]:rs.ALWAYS,[Y.gl.LESS]:rs.LESS,[Y.gl.LEQUAL]:rs.LEQUAL,[Y.gl.GREATER]:rs.GREATER,[Y.gl.GEQUAL]:rs.GEQUAL,[Y.gl.EQUAL]:rs.EQUAL,[Y.gl.NOTEQUAL]:rs.NOTEQUAL},Bv={[Y.gl.FRONT]:vh.FRONT,[Y.gl.BACK]:vh.BACK},qT={[Y.gl.FUNC_ADD]:ff.ADD,[Y.gl.MIN_EXT]:ff.MIN,[Y.gl.MAX_EXT]:ff.MAX,[Y.gl.FUNC_SUBTRACT]:ff.SUBSTRACT,[Y.gl.FUNC_REVERSE_SUBTRACT]:ff.REVERSE_SUBSTRACT},xb={[Y.gl.ZERO]:Ja.ZERO,[Y.gl.ONE]:Ja.ONE,[Y.gl.SRC_COLOR]:Ja.SRC,[Y.gl.ONE_MINUS_SRC_COLOR]:Ja.ONE_MINUS_SRC,[Y.gl.SRC_ALPHA]:Ja.SRC_ALPHA,[Y.gl.ONE_MINUS_SRC_ALPHA]:Ja.ONE_MINUS_SRC_ALPHA,[Y.gl.DST_COLOR]:Ja.DST,[Y.gl.ONE_MINUS_DST_COLOR]:Ja.ONE_MINUS_DST,[Y.gl.DST_ALPHA]:Ja.DST_ALPHA,[Y.gl.ONE_MINUS_DST_ALPHA]:Ja.ONE_MINUS_DST_ALPHA,[Y.gl.CONSTANT_COLOR]:Ja.CONST,[Y.gl.ONE_MINUS_CONSTANT_COLOR]:Ja.ONE_MINUS_CONSTANT,[Y.gl.CONSTANT_ALPHA]:Ja.CONST,[Y.gl.ONE_MINUS_CONSTANT_ALPHA]:Ja.ONE_MINUS_CONSTANT,[Y.gl.SRC_ALPHA_SATURATE]:Ja.SRC_ALPHA_SATURATE},Eg={[Y.gl.REPLACE]:Bc.REPLACE,[Y.gl.KEEP]:Bc.KEEP,[Y.gl.ZERO]:Bc.ZERO,[Y.gl.INVERT]:Bc.INVERT,[Y.gl.INCR]:Bc.INCREMENT_CLAMP,[Y.gl.DECR]:Bc.DECREMENT_CLAMP,[Y.gl.INCR_WRAP]:Bc.INCREMENT_WRAP,[Y.gl.DECR_WRAP]:Bc.DECREMENT_WRAP},vR={[Y.gl.ALWAYS]:rs.ALWAYS,[Y.gl.EQUAL]:rs.EQUAL,[Y.gl.GEQUAL]:rs.GEQUAL,[Y.gl.GREATER]:rs.GREATER,[Y.gl.LEQUAL]:rs.LEQUAL,[Y.gl.LESS]:rs.LESS,[Y.gl.NEVER]:rs.NEVER,[Y.gl.NOTEQUAL]:rs.NOTEQUAL},ti={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Eb(a){return Object.prototype.toString.call(a)in ti}function g4(a,o){const f=a.length,m=Math.ceil(f/3),w=f+m,O=new Float32Array(w);for(let L=0;L<w;L+=4)O[L]=a[L/4*3],O[L+1]=a[L/4*3+1],O[L+2]=a[L/4*3+2],O[L+3]=o;return O}var y2=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w,isUBO:O,label:L}=o;let F;Eb(f)?F=f:F=new $_[this.type||Y.gl.FLOAT](f),this.type=w,this.size=F.byteLength,this.buffer=a.createBuffer({viewOrSize:F,usage:O?Ol.UNIFORM:Ol.VERTEX,hint:dR[m||Y.gl.STATIC_DRAW]}),L&&a.setResourceName(this.buffer,L)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){let f;Eb(a)?f=a:f=new $_[this.type||Y.gl.FLOAT](a),this.buffer.setSubData(o,new Uint8Array(f.buffer))}};function sl(a,o=0){return a+=o,a+=a<<10,a+=a>>>6,a>>>0}function _2(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function b2(){return 0}var Y_=class{constructor(){this.keys=[],this.values=[]}},Kl=class{constructor(a,o){this.keyEqualFunc=a,this.keyHashFunc=o,this.buckets=new Map}findBucketIndex(a,o){for(let f=0;f<a.keys.length;f++)if(this.keyEqualFunc(o,a.keys[f]))return f;return-1}findBucket(a){const o=this.keyHashFunc(a);return this.buckets.get(o)}get(a){const o=this.findBucket(a);if(o===void 0)return null;const f=this.findBucketIndex(o,a);return f<0?null:o.values[f]}add(a,o){const f=this.keyHashFunc(a);this.buckets.get(f)===void 0&&this.buckets.set(f,new Y_);const m=this.buckets.get(f);m.keys.push(a),m.values.push(o)}delete(a){const o=this.findBucket(a);if(o===void 0)return;const f=this.findBucketIndex(o,a);f!==-1&&(o.keys.splice(f,1),o.values.splice(f,1))}clear(){this.buckets.clear()}size(){let a=0;for(const o of this.buckets.values())a+=o.values.length;return a}*values(){for(const a of this.buckets.values())for(let o=a.values.length-1;o>=0;o--)yield a.values[o]}};function K_(a,o){return a=sl(a,o.blendMode),a=sl(a,o.blendSrcFactor),a=sl(a,o.blendDstFactor),a}function QT(a,o){return a=K_(a,o.rgbBlendState),a=K_(a,o.alphaBlendState),a=sl(a,o.channelWriteMask),a}function y4(a,o){return a=sl(a,o.r<<24|o.g<<16|o.b<<8|o.a),a}function _4(a,o){var f,m,w,O,L,F,V,re;for(let Ee=0;Ee<o.attachmentsState.length;Ee++)a=QT(a,o.attachmentsState[Ee]);return a=y4(a,o.blendConstant||X1),a=sl(a,o.depthCompare),a=sl(a,o.depthWrite?1:0),a=sl(a,(f=o.stencilFront)==null?void 0:f.compare),a=sl(a,(m=o.stencilFront)==null?void 0:m.passOp),a=sl(a,(w=o.stencilFront)==null?void 0:w.failOp),a=sl(a,(O=o.stencilFront)==null?void 0:O.depthFailOp),a=sl(a,(L=o.stencilBack)==null?void 0:L.compare),a=sl(a,(F=o.stencilBack)==null?void 0:F.passOp),a=sl(a,(V=o.stencilBack)==null?void 0:V.failOp),a=sl(a,(re=o.stencilBack)==null?void 0:re.depthFailOp),a=sl(a,o.stencilWrite?1:0),a=sl(a,o.cullMode),a=sl(a,o.frontFace?1:0),a=sl(a,o.polygonOffset?1:0),a}function x2(a){let o=0;o=sl(o,a.program.id),a.inputLayout!==null&&(o=sl(o,a.inputLayout.id)),o=_4(o,a.megaStateDescriptor);for(let f=0;f<a.colorAttachmentFormats.length;f++)o=sl(o,a.colorAttachmentFormats[f]||0);return o=sl(o,a.depthStencilAttachmentFormat||0),_2(o)}function Sb(a){let o=0;if(a.samplerBindings)for(let f=0;f<a.samplerBindings.length;f++){const m=a.samplerBindings[f];m!==null&&m.texture!==null&&(o=sl(o,m.texture.id))}if(a.uniformBufferBindings)for(let f=0;f<a.uniformBufferBindings.length;f++){const m=a.uniformBufferBindings[f];m!==null&&m.buffer!==null&&(o=sl(o,m.buffer.id),o=sl(o,m.binding),o=sl(o,m.offset),o=sl(o,m.size))}if(a.storageBufferBindings)for(let f=0;f<a.storageBufferBindings.length;f++){const m=a.storageBufferBindings[f];m!==null&&m.buffer!==null&&(o=sl(o,m.buffer.id),o=sl(o,m.binding),o=sl(o,m.offset),o=sl(o,m.size))}if(a.storageTextureBindings)for(let f=0;f<a.storageTextureBindings.length;f++){const m=a.storageTextureBindings[f];m!==null&&m.texture!==null&&(o=sl(o,m.texture.id),o=sl(o,m.binding))}return _2(o)}function b4(a,o){var f,m,w,O;return((f=a.vertex)==null?void 0:f.glsl)===((m=o.vertex)==null?void 0:m.glsl)&&((w=a.fragment)==null?void 0:w.glsl)===((O=o.fragment)==null?void 0:O.glsl)}function x4(a){var o,f;return{vertex:{glsl:(o=a.vertex)==null?void 0:o.glsl},fragment:{glsl:(f=a.fragment)==null?void 0:f.glsl}}}var JT=class{constructor(a){this.device=a,this.bindingsCache=new Kl(s3,Sb),this.renderPipelinesCache=new Kl(mT,x2),this.inputLayoutsCache=new Kl(i2,b2),this.programCache=new Kl(b4,b2)}createBindings(a){var o;let f=this.bindingsCache.get(a);if(f===null){const m=xT(a);m.uniformBufferBindings=(o=m.uniformBufferBindings)==null?void 0:o.filter(({size:w})=>w&&w>0),f=this.device.createBindings(m),this.bindingsCache.add(m,f)}return f}createRenderPipeline(a){let o=this.renderPipelinesCache.get(a);if(o===null){const f=p3(a);f.colorAttachmentFormats=f.colorAttachmentFormats.filter(m=>m),o=this.device.createRenderPipeline(f),this.renderPipelinesCache.add(f,o)}return o}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(f=>!!f);let o=this.inputLayoutsCache.get(a);if(o===null){const f=by(a);o=this.device.createInputLayout(f),this.inputLayoutsCache.add(f,o)}return o}createProgram(a){let o=this.programCache.get(a);if(o===null){const f=x4(a);o=this.device.createProgram(a),this.programCache.add(f,o)}return o}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Cy=class{constructor(a,o){const{data:f,type:m,count:w=0}=o;let O;Eb(f)?O=f:O=new $_[this.type||Y.gl.UNSIGNED_INT](f),this.type=m,this.count=w,this.indexBuffer=a.createBuffer({viewOrSize:O,usage:Ol.INDEX})}get(){return this.indexBuffer}subData({data:a}){let o;Eb(a)?o=a:o=new $_[this.type||Y.gl.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(o.buffer))}destroy(){this.indexBuffer.destroy()}};function E2(a){return!!(a&&a.texture)}var ew=class{constructor(a,o){this.device=a,this.options=o,this.isDestroy=!1;const{wrapS:f=Y.gl.CLAMP_TO_EDGE,wrapT:m=Y.gl.CLAMP_TO_EDGE,aniso:w,mag:O=Y.gl.NEAREST,min:L=Y.gl.NEAREST}=o;this.createTexture(o),this.sampler=a.createSampler({addressModeU:bb[f],addressModeV:bb[m],minFilter:L===Y.gl.NEAREST?Nc.POINT:Nc.BILINEAR,magFilter:O===Y.gl.NEAREST?Nc.POINT:Nc.BILINEAR,mipmapFilter:$u.NO_MIP,maxAnisotropy:w})}createTexture(a){const{type:o=Y.gl.UNSIGNED_BYTE,width:f,height:m,flipY:w=!1,format:O=Y.gl.RGBA,alignment:L=1,usage:F=Y.v2.SAMPLED,unorm:V=!1,label:re}=a;let{data:Ee}=a;this.width=f,this.height=m;let Te=ir.U8_RGBA_RT;if(o===Y.gl.UNSIGNED_BYTE&&O===Y.gl.RGBA)Te=V?ir.U8_RGBA_NORM:ir.U8_RGBA_RT;else if(o===Y.gl.UNSIGNED_BYTE&&O===Y.gl.LUMINANCE)Te=ir.U8_LUMINANCE;else if(o===Y.gl.FLOAT&&O===Y.gl.LUMINANCE)Te=ir.F32_LUMINANCE;else if(o===Y.gl.FLOAT&&O===Y.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Ee&&(Ee=g4(Ee,0)),Te=ir.F32_RGBA):Te=ir.F32_RGB;else if(o===Y.gl.FLOAT&&O===Y.gl.RGBA)Te=ir.F32_RGBA;else if(o===Y.gl.FLOAT&&O===Y.gl.RED)Te=ir.F32_R;else throw new Error(`create texture error, type: ${o}, format: ${O}`);this.texture=this.device.createTexture({format:Te,width:f,height:m,usage:F===Y.v2.SAMPLED?Kf.SAMPLED:Kf.RENDER_TARGET,pixelStore:{unpackFlipY:w,packAlignment:L},mipLevelCount:1}),re&&this.device.setResourceName(this.texture,re),Ee&&this.texture.setImageData([Ee])}get(){return this.texture}update(a){const{data:o}=a;this.texture.setImageData([o])}bind(){}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&this.destroy(),this.options.width=a,this.options.height=o,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},S2=class{constructor(a,o){this.device=a,this.options=o,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:o,height:f,color:m}=this.options;m&&(E2(m)?(a&&m.resize({width:o,height:f}),this.colorTexture=m.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=m.width,this.height=m.height):o&&f&&(this.colorTexture=this.device.createTexture({format:ir.U8_RGBA_RT,usage:Kf.RENDER_TARGET,width:o,height:f}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=f))}createDepthRenderTarget(a=!1){const{width:o,height:f,depth:m}=this.options;m&&(E2(m)?(a&&m.resize({width:o,height:f}),this.depthTexture=m.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=m.width,this.height=m.height):o&&f&&(this.depthTexture=this.device.createTexture({format:ir.D24_S8,usage:Kf.RENDER_TARGET,width:o,height:f}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=f))}get(){return this.colorRenderTarget}destroy(){var a,o;(a=this.colorRenderTarget)==null||a.destroy(),(o=this.depthRenderTarget)==null||o.destroy()}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=o,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},mR=Object.defineProperty,Sg=Object.defineProperties,T2=Object.getOwnPropertyDescriptors,tw=Object.getOwnPropertySymbols,w2=Object.prototype.hasOwnProperty,Oy=Object.prototype.propertyIsEnumerable,Tb=(a,o,f)=>o in a?mR(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ul=(a,o)=>{for(var f in o||(o={}))w2.call(o,f)&&Tb(a,f,o[f]);if(tw)for(var f of tw(o))Oy.call(o,f)&&Tb(a,f,o[f]);return a},E4=(a,o)=>Sg(a,T2(o)),{isPlainObject:gR,isTypedArray:yR,isNil:go}=Me.lodashUtil,nw=class{constructor(a,o,f){this.device=a,this.options=o,this.service=f,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:m,fs:w,attributes:O,uniforms:L,count:F,elements:V,diagnosticDerivativeUniformityEnabled:re}=o;this.options=o;const Ee=re?"":this.service.viewportOrigin===pd.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=f.renderCache.createProgram({vertex:{glsl:m},fragment:{glsl:w,postprocess:nn=>Ee+nn}}),L&&(this.uniforms=this.extractUniforms(L));const Te=[];let $e=0;Object.keys(O).forEach(nn=>{const Tn=O[nn],sr=Tn.get();this.vertexBuffers.push(sr.get());const{offset:Br=0,stride:Er=0,size:ui=1,divisor:Vi=0,shaderLocation:Po=0}=Tn.attribute;Te.push({arrayStride:Er||ui*4,stepMode:_g.VERTEX,attributes:[{format:KT[ui],shaderLocation:Po,offset:Br,divisor:Vi}]}),$e=sr.size/ui}),F||(this.options.count=$e),V&&(this.indexBuffer=V.get());const Dt=f.renderCache.createInputLayout({vertexBufferDescriptors:Te,indexBufferFormat:V?ir.U32_R:null,program:this.program});this.inputLayout=Dt,this.pipeline=this.createPipeline(o)}createPipeline(a,o){var f;const{primitive:m=Y.gl.TRIANGLES,depth:w,cull:O,blend:L,stencil:F}=a,V=this.initDepthDrawParams({depth:w}),re=!!(V&&V.enable),Ee=this.initCullDrawParams({cull:O}),Te=!!(Ee&&Ee.enable),$e=this.getBlendDrawParams({blend:L}),Dt=!!($e&&$e.enable),nn=this.getStencilDrawParams({stencil:F}),Tn=!!(nn&&nn.enable),sr=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:hR[m],colorAttachmentFormats:[ir.U8_RGBA_RT],depthStencilAttachmentFormat:ir.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:hf.ALL,rgbBlendState:{blendMode:ff.ADD,blendSrcFactor:Ja.ONE,blendDstFactor:Ja.ZERO},alphaBlendState:{blendMode:ff.ADD,blendSrcFactor:Ja.ONE,blendDstFactor:Ja.ZERO}}:{channelWriteMask:Tn&&nn.opFront.zpass===Bc.REPLACE?hf.NONE:hf.ALL,rgbBlendState:{blendMode:Dt&&$e.equation.rgb||ff.ADD,blendSrcFactor:Dt&&$e.func.srcRGB||Ja.SRC_ALPHA,blendDstFactor:Dt&&$e.func.dstRGB||Ja.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:Dt&&$e.equation.alpha||ff.ADD,blendSrcFactor:Dt&&$e.func.srcAlpha||Ja.ONE,blendDstFactor:Dt&&$e.func.dstAlpha||Ja.ONE}}],blendConstant:Dt?X1:void 0,depthWrite:re,depthCompare:re&&V.func||rs.LESS,cullMode:Te&&Ee.face||vh.NONE,stencilWrite:Tn,stencilFront:{compare:Tn?nn.func.cmp:rs.ALWAYS,passOp:nn.opFront.zpass,failOp:nn.opFront.fail,depthFailOp:nn.opFront.zfail,mask:nn.opFront.mask},stencilBack:{compare:Tn?nn.func.cmp:rs.ALWAYS,passOp:nn.opBack.zpass,failOp:nn.opBack.fail,depthFailOp:nn.opBack.zfail,mask:nn.opBack.mask}}});return Tn&&!go((f=F==null?void 0:F.func)==null?void 0:f.ref)&&(sr.stencilFuncReference=F.func.ref),sr}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=ul(ul({},this.uniforms),this.extractUniforms(a))}draw(a,o){const f=ul(ul({},this.options),a),{count:m=0,instances:w,elements:O,uniforms:L={},uniformBuffers:F,textures:V}=f;this.uniforms=ul(ul({},this.uniforms),this.extractUniforms(L));const{renderPass:re,currentFramebuffer:Ee,width:Te,height:$e}=this.service;this.pipeline=this.createPipeline(f,o);const Dt=this.service.device,nn=Dt.swapChainHeight;if(Dt.swapChainHeight=(Ee==null?void 0:Ee.height)||$e,re.setViewport(0,0,(Ee==null?void 0:Ee.width)||Te,(Ee==null?void 0:Ee.height)||$e),Dt.swapChainHeight=nn,re.setPipeline(this.pipeline),go(this.pipeline.stencilFuncReference)||re.setStencilReference(this.pipeline.stencilFuncReference),re.setVertexInput(this.inputLayout,this.vertexBuffers.map(Tn=>({buffer:Tn})),O?{buffer:this.indexBuffer,offset:0}:null),F&&(this.bindings=Dt.createBindings({pipeline:this.pipeline,uniformBufferBindings:F.map((Tn,sr)=>{const Br=Tn;return{binding:sr,buffer:Br.get(),size:Br.size}}),samplerBindings:V==null?void 0:V.map(Tn=>({texture:Tn.texture,sampler:Tn.sampler}))})),this.bindings&&(re.setBindings(this.bindings),Object.keys(this.uniforms).forEach(Tn=>{const sr=this.uniforms[Tn];sr instanceof ew?this.uniforms[Tn]=sr.get():sr instanceof S2&&(this.uniforms[Tn]=sr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),O){const Tn=O.count;Tn===0?re.draw(m,w):re.drawIndexed(Tn,w)}else re.draw(m,w)}destroy(){var a,o,f;(a=this.vertexBuffers)==null||a.forEach(m=>m.destroy()),(o=this.indexBuffer)==null||o.destroy(),(f=this.bindings)==null||f.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:pR[a.func||Y.gl.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:xb[f&&f.srcRGB||Y.gl.SRC_ALPHA],srcAlpha:xb[f&&f.srcAlpha||Y.gl.SRC_ALPHA],dstRGB:xb[f&&f.dstRGB||Y.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:xb[f&&f.dstAlpha||Y.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:qT[m&&m.rgb||Y.gl.FUNC_ADD],alpha:qT[m&&m.alpha||Y.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=4294967295,func:m={cmp:Y.gl.ALWAYS,ref:0,mask:4294967295},opFront:w={fail:Y.gl.KEEP,zfail:Y.gl.KEEP,zpass:Y.gl.KEEP},opBack:O={fail:Y.gl.KEEP,zfail:Y.gl.KEEP,zpass:Y.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:E4(ul({},m),{cmp:vR[m.cmp]}),opFront:{fail:Eg[w.fail],zfail:Eg[w.zfail],zpass:Eg[w.zpass],mask:m.mask},opBack:{fail:Eg[O.fail],zfail:Eg[O.zfail],zpass:Eg[O.zpass],mask:m.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:o,face:f=Y.gl.BACK}=a;return{enable:!!o,face:Bv[f]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||yR(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}gR(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,O)=>{Object.keys(w).forEach(L=>{this.extractUniformsRecursively(L,w[L],f,`${m&&m+"."}${a}[${O}]`)})})}};function S4(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var A2=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),{isUndefined:Ry}=Me.lodashUtil,rw=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new nw(this.device,a,this),this.createAttribute=a=>new fR(this.device,a),this.createBuffer=a=>new y2(this.device,a),this.createElements=a=>new Cy(this.device,a),this.createTexture2D=a=>new ew(this.device,a),this.createFramebuffer=a=>new S2(this.device,a),this.useFramebuffer=(a,o)=>{this.currentFramebuffer=a,this.beginFrame(),o(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,o)=>A2(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield o(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:o,depth:f,stencil:m,framebuffer:w=null}=a;if(w)w.clearOptions={color:o,depth:f,stencil:m};else{const O=this.queryVerdorInfo();if(O==="WebGL1"){const L=this.getGLContext();Ry(m)?Ry(f)||(L.clearDepth(f),L.clear(L.DEPTH_BUFFER_BIT)):(L.clearStencil(m),L.clear(L.STENCIL_BUFFER_BIT))}else if(O==="WebGL2"){const L=this.getGLContext();Ry(m)?Ry(f)||L.clearBufferfv(L.DEPTH,0,[f]):L.clearBufferiv(L.STENCIL,0,[m])}}},this.viewport=({width:a,height:o})=>{this.swapChain.configureSwapChain(a,o),this.createMainColorDepthRT(a,o),this.width=a,this.height=o},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:O}=a,L=this.device.createReadback(),F=o.colorTexture,V=L.readTextureSync(F,f,this.viewportOrigin===pd.LOWER_LEFT?m:this.height-m,w,O,new Uint8Array(w*O*4));if(this.viewportOrigin!==pd.LOWER_LEFT)for(let re=0;re<V.length;re+=4){const Ee=V[re];V[re]=V[re+2],V[re+2]=Ee}return L.destroy(),V},this.readPixelsAsync=a=>A2(this,null,function*(){const{framebuffer:o,x:f,y:m,width:w,height:O}=a,L=this.device.createReadback(),F=o.colorTexture,V=yield L.readTexture(F,f,this.viewportOrigin===pd.LOWER_LEFT?m:this.height-m,w,O,new Uint8Array(w*O*4));if(this.viewportOrigin!==pd.LOWER_LEFT)for(let re=0;re<V.length;re+=4){const Ee=V[re];V[re]=V[re+2],V[re+2]=Ee}return L.destroy(),V}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(o=>{o.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,o){return A2(this,null,function*(){const{enableWebGPU:f,shaderCompilerPath:m,antialias:w}=o;this.canvas=a;const L=yield(f?new d4({shaderCompilerPath:m}):new u2({targets:["webgl2","webgl1"],antialias:w,onContextLost(V){console.warn("context lost",V)},onContextCreationError(V){console.warn("context creation error",V)},onContextRestored(V){console.warn("context restored",V)}})).createSwapChain(a);L.configureSwapChain(a.width,a.height),this.device=L.getDevice(),this.swapChain=L,this.renderCache=new JT(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const F=this.device.gl;this.extensionObject={OES_texture_float:!S4(F)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ir.U8_RGBA_RT,width:a,height:o,usage:Kf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ir.D24_S8,width:a,height:o,usage:Kf.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:o,mainColorRT:f,mainDepthRT:m}=this,w=a?a.colorRenderTarget:f,O=a?null:o.getOnscreenTexture(),L=a?a.depthRenderTarget:m,{color:F=[0,0,0,0],depth:V=1,stencil:re=0}=(a==null?void 0:a.clearOptions)||{},Ee=w?F_(F[0]*255,F[1]*255,F[2]*255,F[3]):X1,Te=L?V:void 0,$e=L?re:void 0,Dt=this.device.createRenderPass({colorAttachment:[w],colorResolveTo:[O],colorClearColor:[Ee],colorStore:[!0],depthStencilAttachment:L,depthClearValue:Te,stencilClearValue:$e});this.renderPass=Dt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},Cm=["selectstart","selecting","selectend"],Fv=class extends Vc.EventEmitter{constructor(a,o={}){super(),this.isEnable=!1,this.onDragStart=f=>{this.box.style.display="block",this.startEvent=this.endEvent=f,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=f=>{this.endEvent=f,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=f=>{this.endEvent=f,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=o}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const o=Me.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),a&&o.classList.add(a),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:o}=this.startEvent,{x:f,y:m}=this.endEvent,w=Math.min(a,f),O=Math.min(o,m),L=Math.abs(a-f),F=Math.abs(o-m);this.box.style.top=`${O}px`,this.box.style.left=`${w}px`,this.box.style.width=`${L}px`,this.box.style.height=`${F}px`}getLngLatBox(){const{lngLat:{lng:a,lat:o}}=this.startEvent,{lngLat:{lng:f,lat:m}}=this.endEvent;return(0,Me.Ol)([[a,o],[f,m]])}},iw=Object.defineProperty,Pa=Object.defineProperties,Iu=Object.getOwnPropertyDescriptors,_l=Object.getOwnPropertySymbols,_R=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,ow=(a,o,f)=>o in a?iw(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,wb=(a,o)=>{for(var f in o||(o={}))_R.call(o,f)&&ow(a,f,o[f]);if(_l)for(var f of _l(o))Om.call(o,f)&&ow(a,f,o[f]);return a},bR=(a,o)=>Pa(a,Iu(o)),q_=(a,o,f)=>new Promise((m,w)=>{var O=V=>{try{F(f.next(V))}catch(re){w(re)}},L=V=>{try{F(f.throw(V))}catch(re){w(re)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(O,L);F((f=f.apply(a,o)).next())}),xR=class{constructor(a){const{id:o,map:f,renderer:m="device"}=a,w=(0,Y.Hp)();this.container=w,f.setContainer(w,o),m==="regl"?w.rendererService=new YT:w.rendererService=new rw,this.sceneService=w.sceneService,this.mapService=w.mapService,this.iconService=w.iconService,this.fontService=w.fontService,this.controlService=w.controlService,this.layerService=w.layerService,this.debugService=w.debugService,this.debugService.setEnable(a.debug),this.markerService=w.markerService,this.interactionService=w.interactionService,this.popupService=w.popupService,this.boxSelect=new Fv(this,{}),this.initComponent(o),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return q_(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return q_(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const o=(0,Y.e7)(this.container);if(a.setContainer(o),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)})}initMask(a){const{mask:o,maskfence:f,maskColor:m="#000",maskOpacity:w=0}=a.getLayerConfig();return!o||!f?void 0:new I_().source(f).shape("fill").style({color:m,opacity:w})}addMask(a,o){if(!a)return;const f=this.getLayer(o);if(f){const m=(0,Y.e7)(this.container);a.setContainer(m),f.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,o){return q_(this,null,function*(){yield this.layerService.remove(a,o)})}removeAllLayer(){return q_(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,o){this.fontService.addIconFont(a,o)}addIconFonts(a){a.forEach(([o,f])=>{this.fontService.addIconFont(o,f)})}addFontFace(a,o){this.fontService.once("fontloaded",f=>{this.emit("fontloaded",f)}),this.fontService.addFontFace(a,o)}addImage(a,o){return q_(this,null,function*(){yield this.iconService.addImage(a,o)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,o){this.fontService.addIconGlyphs(o)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,o){var f;Cm.includes(a)?(f=this.boxSelect)==null||f.on(a,o):Y.P7.includes(a)?this.sceneService.on(a,o):this.mapService.on(a,o)}once(a,o){var f;Cm.includes(a)?(f=this.boxSelect)==null||f.once(a,o):Y.P7.includes(a)?this.sceneService.once(a,o):this.mapService.once(a,o)}emit(a,o){Y.P7.indexOf(a)===-1?this.mapService.on(a,o):this.sceneService.emit(a,o)}off(a,o){var f;Cm.includes(a)?(f=this.boxSelect)==null||f.off(a,o):Y.P7.includes(a)?this.sceneService.off(a,o):this.mapService.off(a,o)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,o){return this.mapService.setCenter(a,o)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,o){this.mapService.panBy(a,o)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,o){const{fitBoundsOptions:f,animate:m}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,o||bR(wb({},f),{animate:m}))}setZoomAndCenter(a,o){this.mapService.setZoomAndCenter(a,o)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,o){Me.SA.REGISTERED_PROTOCOLS[a]=o}static removeProtocol(a){delete Me.SA.REGISTERED_PROTOCOLS[a]}getProtocol(a){return Me.SA.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:Me.SO.getContainer(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:o}=this.sceneService.getSceneConfig();a&&this.addControl(new gp({position:o}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new L_(a))}},T4="2.22.0"},81957:function(Ht,W){"use strict";var D=function(J,Z,E){return J<Z?Z:J>E?E:J};W.Z=D},95147:function(Ht,W){"use strict";var D=function(J){return J==null};W.Z=D},25897:function(Ht,W,D){"use strict";var J=D(95456),Z=function(E){return(0,J.Z)(E,"Number")};W.Z=Z},95456:function(Ht,W){"use strict";var D={}.toString,J=function(Z,E){return D.call(Z)==="[object "+E+"]"};W.Z=J},131:function(Ht,W,D){"use strict";D.r(W),D.d(W,{TinyColor:function(){return J.C},bounds:function(){return ct},convertDecimalToHex:function(){return se.Wl},convertHexToDecimal:function(){return se.T6},default:function(){return lt},fromRatio:function(){return oe},hslToRgb:function(){return se.ve},hsvToRgb:function(){return se.WE},inputToRGB:function(){return ee.uA},isReadable:function(){return ve},isValidCSSUnit:function(){return ee.ky},legacyRandom:function(){return Ge},mostReadable:function(){return te},names:function(){return Z.R},numberInputToObject:function(){return se.Yt},parseIntFromHex:function(){return se.VD},random:function(){return me},readability:function(){return E},rgbToHex:function(){return se.vq},rgbToHsl:function(){return se.lC},rgbToHsv:function(){return se.py},rgbToRgb:function(){return se.rW},rgbaToArgbHex:function(){return se.GC},rgbaToHex:function(){return se.s},stringInputToObject:function(){return ee.uz},tinycolor:function(){return J.H},toMsFilter:function(){return ae}});var J=D(10274),Z=D(48701);function E(Ie,Ae){var pt=new J.C(Ie),ut=new J.C(Ae);return(Math.max(pt.getLuminance(),ut.getLuminance())+.05)/(Math.min(pt.getLuminance(),ut.getLuminance())+.05)}function ve(Ie,Ae,pt){var ut,Et;pt===void 0&&(pt={level:"AA",size:"small"});var cn=E(Ie,Ae);switch(((ut=pt.level)!==null&&ut!==void 0?ut:"AA")+((Et=pt.size)!==null&&Et!==void 0?Et:"small")){case"AAsmall":case"AAAlarge":return cn>=4.5;case"AAlarge":return cn>=3;case"AAAsmall":return cn>=7;default:return!1}}function te(Ie,Ae,pt){pt===void 0&&(pt={includeFallbackColors:!1,level:"AA",size:"small"});for(var ut=null,Et=0,cn=pt.includeFallbackColors,ze=pt.level,St=pt.size,we=0,nt=Ae;we<nt.length;we++){var Xe=nt[we],Ze=E(Ie,Xe);Ze>Et&&(Et=Ze,ut=new J.C(Xe))}return ve(Ie,ut,{level:ze,size:St})||!cn?ut:(pt.includeFallbackColors=!1,te(Ie,["#fff","#000"],pt))}var se=D(86500);function ae(Ie,Ae){var pt=new J.C(Ie),ut="#"+(0,se.GC)(pt.r,pt.g,pt.b,pt.a),Et=ut,cn=pt.gradientType?"GradientType = 1, ":"";if(Ae){var ze=new J.C(Ae);Et="#"+(0,se.GC)(ze.r,ze.g,ze.b,ze.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(cn,"startColorstr=").concat(ut,",endColorstr=").concat(Et,")")}var Se=D(90279);function oe(Ie,Ae){var pt={r:(0,Se.JX)(Ie.r),g:(0,Se.JX)(Ie.g),b:(0,Se.JX)(Ie.b)};return Ie.a!==void 0&&(pt.a=Number(Ie.a)),new J.C(pt,Ae)}function Ge(){return new J.C({r:Math.random(),g:Math.random(),b:Math.random()})}var ee=D(1350);function me(Ie){if(Ie===void 0&&(Ie={}),Ie.count!==void 0&&Ie.count!==null){var Ae=Ie.count,pt=[];for(Ie.count=void 0;Ae>pt.length;)Ie.count=null,Ie.seed&&(Ie.seed+=1),pt.push(me(Ie));return Ie.count=Ae,pt}var ut=Le(Ie.hue,Ie.seed),Et=be(ut,Ie),cn=Oe(ut,Et,Ie),ze={h:ut,s:Et,v:cn};return Ie.alpha!==void 0&&(ze.a=Ie.alpha),new J.C(ze)}function Le(Ie,Ae){var pt=He(Ie),ut=dt(pt,Ae);return ut<0&&(ut=360+ut),ut}function be(Ie,Ae){if(Ae.hue==="monochrome")return 0;if(Ae.luminosity==="random")return dt([0,100],Ae.seed);var pt=bt(Ie).saturationRange,ut=pt[0],Et=pt[1];switch(Ae.luminosity){case"bright":ut=55;break;case"dark":ut=Et-10;break;case"light":Et=55;break;default:break}return dt([ut,Et],Ae.seed)}function Oe(Ie,Ae,pt){var ut=fe(Ie,Ae),Et=100;switch(pt.luminosity){case"dark":Et=ut+20;break;case"light":ut=(Et+ut)/2;break;case"random":ut=0,Et=100;break;default:break}return dt([ut,Et],pt.seed)}function fe(Ie,Ae){for(var pt=bt(Ie).lowerBounds,ut=0;ut<pt.length-1;ut++){var Et=pt[ut][0],cn=pt[ut][1],ze=pt[ut+1][0],St=pt[ut+1][1];if(Ae>=Et&&Ae<=ze){var we=(St-cn)/(ze-Et),nt=cn-we*Et;return we*Ae+nt}}return 0}function He(Ie){var Ae=parseInt(Ie,10);if(!Number.isNaN(Ae)&&Ae<360&&Ae>0)return[Ae,Ae];if(typeof Ie=="string"){var pt=ct.find(function(ze){return ze.name===Ie});if(pt){var ut=Nt(pt);if(ut.hueRange)return ut.hueRange}var Et=new J.C(Ie);if(Et.isValid){var cn=Et.toHsv().h;return[cn,cn]}}return[0,360]}function bt(Ie){Ie>=334&&Ie<=360&&(Ie-=360);for(var Ae=0,pt=ct;Ae<pt.length;Ae++){var ut=pt[Ae],Et=Nt(ut);if(Et.hueRange&&Ie>=Et.hueRange[0]&&Ie<=Et.hueRange[1])return Et}throw Error("Color not found")}function dt(Ie,Ae){if(Ae===void 0)return Math.floor(Ie[0]+Math.random()*(Ie[1]+1-Ie[0]));var pt=Ie[1]||1,ut=Ie[0]||0;Ae=(Ae*9301+49297)%233280;var Et=Ae/233280;return Math.floor(ut+Et*(pt-ut))}function Nt(Ie){var Ae=Ie.lowerBounds[0][0],pt=Ie.lowerBounds[Ie.lowerBounds.length-1][0],ut=Ie.lowerBounds[Ie.lowerBounds.length-1][1],Et=Ie.lowerBounds[0][1];return{name:Ie.name,hueRange:Ie.hueRange,lowerBounds:Ie.lowerBounds,saturationRange:[Ae,pt],brightnessRange:[ut,Et]}}var ct=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],lt=J.H},38163:function(Ht){Ht.exports=W;function W(Z,E){var ve=Z&&Z.type,te;if(ve==="FeatureCollection")for(te=0;te<Z.features.length;te++)W(Z.features[te],E);else if(ve==="GeometryCollection")for(te=0;te<Z.geometries.length;te++)W(Z.geometries[te],E);else if(ve==="Feature")W(Z.geometry,E);else if(ve==="Polygon")D(Z.coordinates,E);else if(ve==="MultiPolygon")for(te=0;te<Z.coordinates.length;te++)D(Z.coordinates[te],E);return Z}function D(Z,E){if(Z.length!==0){J(Z[0],E);for(var ve=1;ve<Z.length;ve++)J(Z[ve],!E)}}function J(Z,E){for(var ve=0,te=0,se=0,ae=Z.length,Se=ae-1;se<ae;Se=se++){var oe=(Z[se][0]-Z[Se][0])*(Z[Se][1]+Z[se][1]),Ge=ve+oe;te+=Math.abs(ve)>=Math.abs(oe)?ve-Ge+oe:oe-Ge+ve,ve=Ge}ve+te>=0!=!!E&&Z.reverse()}},75550:function(Ht){"use strict";Ht.exports=W;function W(D,J){this.x=D,this.y=J}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,J){return this.clone()._rotateAround(D,J)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var J=D.x-this.x,Z=D.y-this.y;return J*J+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,J){return Math.atan2(this.x*J-this.y*D,this.x*D+this.y*J)},_matMult:function(D){var J=D[0]*this.x+D[1]*this.y,Z=D[2]*this.x+D[3]*this.y;return this.x=J,this.y=Z,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var J=Math.cos(D),Z=Math.sin(D),E=J*this.x-Z*this.y,ve=Z*this.x+J*this.y;return this.x=E,this.y=ve,this},_rotateAround:function(D,J){var Z=Math.cos(D),E=Math.sin(D),ve=J.x+Z*(this.x-J.x)-E*(this.y-J.y),te=J.y+E*(this.x-J.x)+Z*(this.y-J.y);return this.x=ve,this.y=te,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(D){return D instanceof W?D:Array.isArray(D)?new W(D[0],D[1]):D}},49296:function(Ht){"use strict";Ht.exports=D,Ht.exports.default=D;var W=1e20;function D(te,se,ae,Se,oe,Ge){this.fontSize=te||24,this.buffer=se===void 0?3:se,this.cutoff=Se||.25,this.fontFamily=oe||"sans-serif",this.fontWeight=Ge||"normal",this.radius=ae||8;var ee=this.size=this.fontSize+this.buffer*2,me=ee+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ee,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Uint16Array(me),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(ee/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function J(te,se,ae,Se,oe,Ge,ee){Ge.fill(W,0,se*ae),ee.fill(0,0,se*ae);for(var me=(se-Se)/2,Le=0;Le<oe;Le++)for(var be=0;be<Se;be++){var Oe=(Le+me)*se+be+me,fe=te.data[4*(Le*Se+be)+3]/255;if(fe===1)Ge[Oe]=0,ee[Oe]=W;else if(fe===0)Ge[Oe]=W,ee[Oe]=0;else{var He=Math.max(0,.5-fe),bt=Math.max(0,fe-.5);Ge[Oe]=He*He,ee[Oe]=bt*bt}}}function Z(te,se,ae,Se,oe,Ge,ee){for(var me=0;me<se*ae;me++){var Le=Math.sqrt(Se[me])-Math.sqrt(oe[me]);te[me]=Math.round(255-255*(Le/Ge+ee))}}D.prototype._draw=function(te,se){var ae=this.ctx.measureText(te),Se=ae.width,oe=2*this.buffer,Ge,ee,me,Le,be,Oe,fe,He;se&&this.useMetrics?(be=Math.floor(ae.actualBoundingBoxAscent),He=this.buffer+Math.ceil(ae.actualBoundingBoxAscent),Oe=this.buffer,fe=this.buffer,ee=Math.min(this.size,Math.ceil(ae.actualBoundingBoxRight-ae.actualBoundingBoxLeft)),Le=Math.min(this.size-Oe,Math.ceil(ae.actualBoundingBoxAscent+ae.actualBoundingBoxDescent)),Ge=ee+oe,me=Le+oe,this.ctx.textBaseline="alphabetic"):(Ge=ee=this.size,me=Le=this.size,be=19*this.fontSize/24,Oe=fe=0,He=this.middle,this.ctx.textBaseline="middle");var bt;ee&&Le&&(this.ctx.clearRect(fe,Oe,ee,Le),this.ctx.fillText(te,this.buffer,He),bt=this.ctx.getImageData(fe,Oe,ee,Le));var dt=new Uint8ClampedArray(Ge*me);return J(bt,Ge,me,ee,Le,this.gridOuter,this.gridInner),E(this.gridOuter,Ge,me,this.f,this.v,this.z),E(this.gridInner,Ge,me,this.f,this.v,this.z),Z(dt,Ge,me,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:dt,metrics:{width:ee,height:Le,sdfWidth:Ge,sdfHeight:me,top:be,left:0,advance:Se}}},D.prototype.draw=function(te){return this._draw(te,!1).data},D.prototype.drawWithMetrics=function(te){return this._draw(te,!0)};function E(te,se,ae,Se,oe,Ge){for(var ee=0;ee<se;ee++)ve(te,ee,se,ae,Se,oe,Ge);for(var me=0;me<ae;me++)ve(te,me*se,1,se,Se,oe,Ge)}function ve(te,se,ae,Se,oe,Ge,ee){var me,Le,be,Oe;for(Ge[0]=0,ee[0]=-W,ee[1]=W,me=0;me<Se;me++)oe[me]=te[se+me*ae];for(me=1,Le=0,be=0;me<Se;me++){do Oe=Ge[Le],be=(oe[me]-oe[Oe]+me*me-Oe*Oe)/(me-Oe)/2;while(be<=ee[Le]&&--Le>-1);Le++,Ge[Le]=me,ee[Le]=be,ee[Le+1]=W}for(me=0,Le=0;me<Se;me++){for(;ee[Le+1]<me;)Le++;Oe=Ge[Le],te[se+me*ae]=oe[Oe]+(me-Oe)*(me-Oe)}}},38929:function(Ht,W,D){Ht.exports.VectorTile=D(22779),D(66024),D(59701)},22779:function(Ht,W,D){"use strict";var J=D(59701);Ht.exports=Z;function Z(ve,te){this.layers=ve.readFields(E,{},te)}function E(ve,te,se){if(ve===3){var ae=new J(se,se.readVarint()+se.pos);ae.length&&(te[ae.name]=ae)}}},66024:function(Ht,W,D){"use strict";var J=D(75550);Ht.exports=Z;function Z(ae,Se,oe,Ge,ee){this.properties={},this.extent=oe,this.type=0,this._pbf=ae,this._geometry=-1,this._keys=Ge,this._values=ee,ae.readFields(E,this,Se)}function E(ae,Se,oe){ae==1?Se.id=oe.readVarint():ae==2?ve(oe,Se):ae==3?Se.type=oe.readVarint():ae==4&&(Se._geometry=oe.pos)}function ve(ae,Se){for(var oe=ae.readVarint()+ae.pos;ae.pos<oe;){var Ge=Se._keys[ae.readVarint()],ee=Se._values[ae.readVarint()];Se.properties[Ge]=ee}}Z.types=["Unknown","Point","LineString","Polygon"],Z.prototype.loadGeometry=function(){var ae=this._pbf;ae.pos=this._geometry;for(var Se=ae.readVarint()+ae.pos,oe=1,Ge=0,ee=0,me=0,Le=[],be;ae.pos<Se;){if(Ge<=0){var Oe=ae.readVarint();oe=Oe&7,Ge=Oe>>3}if(Ge--,oe===1||oe===2)ee+=ae.readSVarint(),me+=ae.readSVarint(),oe===1&&(be&&Le.push(be),be=[]),be.push(new J(ee,me));else if(oe===7)be&&be.push(be[0].clone());else throw new Error("unknown command "+oe)}return be&&Le.push(be),Le},Z.prototype.bbox=function(){var ae=this._pbf;ae.pos=this._geometry;for(var Se=ae.readVarint()+ae.pos,oe=1,Ge=0,ee=0,me=0,Le=1/0,be=-1/0,Oe=1/0,fe=-1/0;ae.pos<Se;){if(Ge<=0){var He=ae.readVarint();oe=He&7,Ge=He>>3}if(Ge--,oe===1||oe===2)ee+=ae.readSVarint(),me+=ae.readSVarint(),ee<Le&&(Le=ee),ee>be&&(be=ee),me<Oe&&(Oe=me),me>fe&&(fe=me);else if(oe!==7)throw new Error("unknown command "+oe)}return[Le,Oe,be,fe]},Z.prototype.toGeoJSON=function(ae,Se,oe){var Ge=this.extent*Math.pow(2,oe),ee=this.extent*ae,me=this.extent*Se,Le=this.loadGeometry(),be=Z.types[this.type],Oe,fe;function He(Nt){for(var ct=0;ct<Nt.length;ct++){var lt=Nt[ct],Ie=180-(lt.y+me)*360/Ge;Nt[ct]=[(lt.x+ee)*360/Ge-180,360/Math.PI*Math.atan(Math.exp(Ie*Math.PI/180))-90]}}switch(this.type){case 1:var bt=[];for(Oe=0;Oe<Le.length;Oe++)bt[Oe]=Le[Oe][0];Le=bt,He(Le);break;case 2:for(Oe=0;Oe<Le.length;Oe++)He(Le[Oe]);break;case 3:for(Le=te(Le),Oe=0;Oe<Le.length;Oe++)for(fe=0;fe<Le[Oe].length;fe++)He(Le[Oe][fe]);break}Le.length===1?Le=Le[0]:be="Multi"+be;var dt={type:"Feature",geometry:{type:be,coordinates:Le},properties:this.properties};return"id"in this&&(dt.id=this.id),dt};function te(ae){var Se=ae.length;if(Se<=1)return[ae];for(var oe=[],Ge,ee,me=0;me<Se;me++){var Le=se(ae[me]);Le!==0&&(ee===void 0&&(ee=Le<0),ee===Le<0?(Ge&&oe.push(Ge),Ge=[ae[me]]):Ge.push(ae[me]))}return Ge&&oe.push(Ge),oe}function se(ae){for(var Se=0,oe=0,Ge=ae.length,ee=Ge-1,me,Le;oe<Ge;ee=oe++)me=ae[oe],Le=ae[ee],Se+=(Le.x-me.x)*(me.y+Le.y);return Se}},59701:function(Ht,W,D){"use strict";var J=D(66024);Ht.exports=Z;function Z(te,se){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=te,this._keys=[],this._values=[],this._features=[],te.readFields(E,this,se),this.length=this._features.length}function E(te,se,ae){te===15?se.version=ae.readVarint():te===1?se.name=ae.readString():te===5?se.extent=ae.readVarint():te===2?se._features.push(ae.pos):te===3?se._keys.push(ae.readString()):te===4&&se._values.push(ve(ae))}function ve(te){for(var se=null,ae=te.readVarint()+te.pos;te.pos<ae;){var Se=te.readVarint()>>3;se=Se===1?te.readString():Se===2?te.readFloat():Se===3?te.readDouble():Se===4?te.readVarint64():Se===5?te.readVarint():Se===6?te.readSVarint():Se===7?te.readBoolean():null}return se}Z.prototype.feature=function(te){if(te<0||te>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[te];var se=this._pbf.readVarint()+this._pbf.pos;return new J(this._pbf,se,this.extent,this._keys,this._values)}},85549:function(Ht,W,D){"use strict";"use client";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294)),E=D(51130),ve=D(46549);const te=ae=>{const{space:Se,form:oe,children:Ge}=ae;if(Ge==null)return null;let ee=Ge;return oe&&(ee=Z.default.createElement(E.NoFormStyle,{override:!0,status:!0},ee)),Se&&(ee=Z.default.createElement(ve.NoCompactStyle,null,ee)),ee};var se=W.default=te},45471:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.PresetStatusColorTypes=void 0,W.isPresetColor=se,W.isPresetStatusColor=ae;var Z=J(D(861)),E=D(36496);const ve=E.PresetColors.map(Se=>`${Se}-inverse`),te=W.PresetStatusColorTypes=["success","processing","error","default","warning"];function se(Se){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,Z.default)(ve),(0,Z.default)(E.PresetColors)).includes(Se):E.PresetColors.includes(Se)}function ae(Se){return te.includes(Se)}},49314:function(Ht,W,D){"use strict";"use client";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294)),E=J(D(43273));const ve=se=>{let ae;return typeof se=="object"&&(se!=null&&se.clearIcon)?ae=se:se&&(ae={clearIcon:Z.default.createElement(E.default,null)}),ae};var te=W.default=ve},63101:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(56690)),E=J(D(89728)),ve=J(D(67294));const te=1e3*60*10;let se=function(){function Ge(){(0,Z.default)(this,Ge),this.map=new Map,this.objectIDMap=new WeakMap,this.nextID=0,this.lastAccessBeat=new Map,this.accessBeat=0}return(0,E.default)(Ge,[{key:"set",value:function(me,Le){this.clear();const be=this.getCompositeKey(me);this.map.set(be,Le),this.lastAccessBeat.set(be,Date.now())}},{key:"get",value:function(me){const Le=this.getCompositeKey(me),be=this.map.get(Le);return this.lastAccessBeat.set(Le,Date.now()),this.accessBeat+=1,be}},{key:"getCompositeKey",value:function(me){return me.map(be=>be&&typeof be=="object"?`obj_${this.getObjectID(be)}`:`${typeof be}_${be}`).join("|")}},{key:"getObjectID",value:function(me){if(this.objectIDMap.has(me))return this.objectIDMap.get(me);const Le=this.nextID;return this.objectIDMap.set(me,Le),this.nextID+=1,Le}},{key:"clear",value:function(){if(this.accessBeat>1e4){const me=Date.now();this.lastAccessBeat.forEach((Le,be)=>{me-Le>te&&(this.map.delete(be),this.lastAccessBeat.delete(be))}),this.accessBeat=0}}}])}();const ae=new se;function Se(Ge,ee){return ve.default.useMemo(()=>{const me=ae.get(ee);if(me)return me;const Le=Ge();return ae.set(ee,Le),Le},ee)}var oe=W.default=Se},56333:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.containerBaseZIndexOffset=W.consumerBaseZIndexOffset=W.CONTAINER_MAX_OFFSET=void 0,W.useZIndex=me;var Z=J(D(67294)),E=J(D(41401)),ve=D(13594),te=J(D(96877));const se=100,ae=10,Se=W.CONTAINER_MAX_OFFSET=se*ae,oe=W.containerBaseZIndexOffset={Modal:se,Drawer:se,Popover:se,Popconfirm:se,Tooltip:se,Tour:se},Ge=W.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function ee(Le){return Le in oe}function me(Le,be){const[,Oe]=(0,E.default)(),fe=Z.default.useContext(te.default),He=ee(Le);let bt;if(be!==void 0)bt=[be,be];else{let dt=fe!=null?fe:0;He?dt+=(fe?0:Oe.zIndexPopupBase)+oe[Le]:dt+=Ge[Le],bt=[fe===void 0?be:dt,dt]}return bt}},53683:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTransitionName=W.default=void 0;const D=()=>({height:0,opacity:0}),J=Se=>{const{scrollHeight:oe}=Se;return{height:oe,opacity:1}},Z=Se=>({height:Se?Se.offsetHeight:0}),E=(Se,oe)=>(oe==null?void 0:oe.deadline)===!0||oe.propertyName==="height",ve=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:D,onEnterStart:D,onAppearActive:J,onEnterActive:J,onLeaveStart:Z,onLeaveActive:D,onAppearEnd:E,onEnterEnd:E,onLeaveEnd:E,motionDeadline:500}},te=null,se=(Se,oe,Ge)=>Ge!==void 0?Ge:`${Se}-${oe}`;W.getTransitionName=se;var ae=W.default=ve},74132:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=se,W.getOverflowOptions=Z;var J=D(9064);function Z(ae,Se,oe,Ge){if(Ge===!1)return{adjustX:!1,adjustY:!1};const ee=Ge&&typeof Ge=="object"?Ge:{},me={};switch(ae){case"top":case"bottom":me.shiftX=Se.arrowOffsetHorizontal*2+oe,me.shiftY=!0,me.adjustY=!0;break;case"left":case"right":me.shiftY=Se.arrowOffsetVertical*2+oe,me.shiftX=!0,me.adjustX=!0;break}const Le=Object.assign(Object.assign({},me),ee);return Le.shiftX||(Le.adjustX=!0),Le.shiftY||(Le.adjustY=!0),Le}const E={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ve={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},te=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function se(ae){const{arrowWidth:Se,autoAdjustOverflow:oe,arrowPointAtCenter:Ge,offset:ee,borderRadius:me,visibleFirst:Le}=ae,be=Se/2,Oe={};return Object.keys(E).forEach(fe=>{const He=Ge&&ve[fe]||E[fe],bt=Object.assign(Object.assign({},He),{offset:[0,0],dynamicInset:!0});switch(Oe[fe]=bt,te.has(fe)&&(bt.autoArrow=!1),fe){case"top":case"topLeft":case"topRight":bt.offset[1]=-be-ee;break;case"bottom":case"bottomLeft":case"bottomRight":bt.offset[1]=be+ee;break;case"left":case"leftTop":case"leftBottom":bt.offset[0]=-be-ee;break;case"right":case"rightTop":case"rightBottom":bt.offset[0]=be+ee;break}const dt=(0,J.getArrowOffsetToken)({contentRadius:me,limitVerticalRadius:!0});if(Ge)switch(fe){case"topLeft":case"bottomLeft":bt.offset[0]=-dt.arrowOffsetHorizontal-be;break;case"topRight":case"bottomRight":bt.offset[0]=dt.arrowOffsetHorizontal+be;break;case"leftTop":case"rightTop":bt.offset[1]=-dt.arrowOffsetHorizontal-be;break;case"leftBottom":case"rightBottom":bt.offset[1]=dt.arrowOffsetHorizontal+be;break}bt.overflow=Z(fe,dt,Se,oe),Le&&(bt.htmlRegion="visibleFirst")}),Oe}},47419:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.cloneElement=te,W.isFragment=E,W.replaceElement=void 0;var Z=J(D(67294));function E(se){return se&&Z.default.isValidElement(se)&&se.type===Z.default.Fragment}const ve=(se,ae,Se)=>Z.default.isValidElement(se)?Z.default.cloneElement(se,typeof Se=="function"?Se(se.props||{}):Se):ae;W.replaceElement=ve;function te(se,ae){return ve(se,se,ae)}},71434:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getMergedStatus=void 0,W.getStatusClassNames=ve;var Z=J(D(93967));const E=null;function ve(se,ae,Se){return(0,Z.default)({[`${se}-status-success`]:ae==="success",[`${se}-status-warning`]:ae==="warning",[`${se}-status-error`]:ae==="error",[`${se}-status-validating`]:ae==="validating",[`${se}-has-feedback`]:Se})}const te=(se,ae)=>ae||se;W.getMergedStatus=te},38882:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.canUseDocElement=void 0,Object.defineProperty(W,"isStyleSupport",{enumerable:!0,get:function(){return E.isStyleSupport}});var Z=J(D(19158)),E=D(3481);const ve=()=>(0,Z.default)()&&window.document.documentElement;W.canUseDocElement=ve},60938:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(27712)),te=function(oe,Ge){var ee={};for(var me in oe)Object.prototype.hasOwnProperty.call(oe,me)&&Ge.indexOf(me)<0&&(ee[me]=oe[me]);if(oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Le=0,me=Object.getOwnPropertySymbols(oe);Le<me.length;Le++)Ge.indexOf(me[Le])<0&&Object.prototype.propertyIsEnumerable.call(oe,me[Le])&&(ee[me[Le]]=oe[me[Le]]);return ee};const se={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-flex"},ae=E.forwardRef((oe,Ge)=>{const ee=dt=>{const{keyCode:Nt}=dt;Nt===ve.default.ENTER&&dt.preventDefault()},me=dt=>{const{keyCode:Nt}=dt,{onClick:ct}=oe;Nt===ve.default.ENTER&&ct&&ct()},{style:Le,noStyle:be,disabled:Oe,tabIndex:fe=0}=oe,He=te(oe,["style","noStyle","disabled","tabIndex"]);let bt={};return be||(bt=Object.assign({},se)),Oe&&(bt.pointerEvents="none"),bt=Object.assign(Object.assign({},bt),Le),E.createElement("div",Object.assign({role:"button",tabIndex:fe,ref:Ge},He,{onKeyDown:ee,onKeyUp:me,style:bt}))});var Se=W.default=ae},13594:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.devUseWarning=W.default=W.WarningContext=void 0,W.noop=ve,W.resetWarned=se;var Z=J(D(67294)),E=J(D(45520));function ve(){}let te=null;function se(){te=null,(0,E.resetWarned)()}let ae=ve;const Se=W.WarningContext=Z.createContext({}),oe=W.devUseWarning=()=>{const ee=()=>{};return ee.deprecated=ve,ee};var Ge=W.default=ae},96877:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294));const E=Z.default.createContext(void 0);var ve=W.default=E},93319:function(Ht,W,D){"use strict";"use client";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.DisabledContextProvider=void 0;var Z=J(D(67294));const E=Z.createContext(!1),ve=se=>{let{children:ae,disabled:Se}=se;const oe=Z.useContext(E);return Z.createElement(E.Provider,{value:Se!=null?Se:oe},ae)};W.DisabledContextProvider=ve;var te=W.default=E},16722:function(Ht,W,D){"use strict";"use client";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=te;var Z=J(D(67294)),E=D(29372),ve=D(3184);function te(se){const{children:ae}=se,[,Se]=(0,ve.useToken)(),{motion:oe}=Se,Ge=Z.useRef(!1);return Ge.current=Ge.current||oe===!1,Ge.current?Z.createElement(E.Provider,{motion:oe},ae):ae}},11380:function(Ht,W,D){"use strict";"use client";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294)),E=D(13594);const ve=null;var te=W.default=()=>null},3236:function(Ht,W,D){"use strict";"use client";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.SizeContextProvider=void 0;var Z=J(D(67294));const E=Z.createContext(void 0),ve=se=>{let{children:ae,size:Se}=se;const oe=Z.useContext(E);return Z.createElement(E.Provider,{value:Se||oe},ae)};W.SizeContextProvider=ve;var te=W.default=E},7177:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultPrefixCls=W.defaultIconPrefixCls=W.Variants=W.ConfigContext=W.ConfigConsumer=void 0;var Z=J(D(67294));const E=W.defaultPrefixCls="ant",ve=W.defaultIconPrefixCls="anticon",te=W.Variants=["outlined","borderless","filled"],se=(oe,Ge)=>Ge||(oe?`${E}-${oe}`:E),ae=W.ConfigContext=Z.createContext({getPrefixCls:se,iconPrefixCls:ve}),{Consumer:Se}=ae;W.ConfigConsumer=Se},56301:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getStyle=Se,W.registerTheme=oe;var Z=D(65409),E=D(131),ve=J(D(19158)),te=D(93399),se=J(D(13594));const ae=`-ant-${Date.now()}-${Math.random()}`;function Se(Ge,ee){const me={},Le=(fe,He)=>{let bt=fe.clone();return bt=(He==null?void 0:He(bt))||bt,bt.toRgbString()},be=(fe,He)=>{const bt=new E.TinyColor(fe),dt=(0,Z.generate)(bt.toRgbString());me[`${He}-color`]=Le(bt),me[`${He}-color-disabled`]=dt[1],me[`${He}-color-hover`]=dt[4],me[`${He}-color-active`]=dt[6],me[`${He}-color-outline`]=bt.clone().setAlpha(.2).toRgbString(),me[`${He}-color-deprecated-bg`]=dt[0],me[`${He}-color-deprecated-border`]=dt[2]};if(ee.primaryColor){be(ee.primaryColor,"primary");const fe=new E.TinyColor(ee.primaryColor),He=(0,Z.generate)(fe.toRgbString());He.forEach((dt,Nt)=>{me[`primary-${Nt+1}`]=dt}),me["primary-color-deprecated-l-35"]=Le(fe,dt=>dt.lighten(35)),me["primary-color-deprecated-l-20"]=Le(fe,dt=>dt.lighten(20)),me["primary-color-deprecated-t-20"]=Le(fe,dt=>dt.tint(20)),me["primary-color-deprecated-t-50"]=Le(fe,dt=>dt.tint(50)),me["primary-color-deprecated-f-12"]=Le(fe,dt=>dt.setAlpha(dt.getAlpha()*.12));const bt=new E.TinyColor(He[0]);me["primary-color-active-deprecated-f-30"]=Le(bt,dt=>dt.setAlpha(dt.getAlpha()*.3)),me["primary-color-active-deprecated-d-02"]=Le(bt,dt=>dt.darken(2))}return ee.successColor&&be(ee.successColor,"success"),ee.warningColor&&be(ee.warningColor,"warning"),ee.errorColor&&be(ee.errorColor,"error"),ee.infoColor&&be(ee.infoColor,"info"),`
  :root {
    ${Object.keys(me).map(fe=>`--${Ge}-${fe}: ${me[fe]};`).join(`
`)}
  }
  `.trim()}function oe(Ge,ee){const me=Se(Ge,ee);(0,ve.default)()&&(0,te.updateCSS)(me,`${ae}-dynamic-theme`)}},14893:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(3184);const Z=ve=>{const[,,,,te]=(0,J.useToken)();return te?`${ve}-css-var`:""};var E=W.default=Z},5819:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=D(67294),E=J(D(93319)),ve=J(D(3236));function te(){const ae=(0,Z.useContext)(E.default),Se=(0,Z.useContext)(ve.default);return{componentDisabled:ae,componentSize:Se}}var se=W.default=te},65693:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294)),E=J(D(3236));const ve=se=>{const ae=Z.default.useContext(E.default);return Z.default.useMemo(()=>se?typeof se=="string"?se!=null?se:ae:se instanceof Function?se(ae):ae:ae,[se,ae])};var te=W.default=ve},25494:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ae;var Z=J(D(67265)),E=J(D(11102)),ve=D(13594),te=D(3184),se=J(D(78459));function ae(Se,oe,Ge){var ee,me;const Le=(0,ve.devUseWarning)("ConfigProvider"),be=Se||{},Oe=be.inherit===!1||!oe?Object.assign(Object.assign({},te.defaultConfig),{hashed:(ee=oe==null?void 0:oe.hashed)!==null&&ee!==void 0?ee:te.defaultConfig.hashed,cssVar:oe==null?void 0:oe.cssVar}):oe,fe=(0,se.default)();return(0,Z.default)(()=>{var He,bt;if(!Se)return oe;const dt=Object.assign({},Oe.components);Object.keys(Se.components||{}).forEach(lt=>{dt[lt]=Object.assign(Object.assign({},dt[lt]),Se.components[lt])});const Nt=`css-var-${fe.replace(/:/g,"")}`,ct=((He=be.cssVar)!==null&&He!==void 0?He:Oe.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:Ge==null?void 0:Ge.prefixCls},typeof Oe.cssVar=="object"?Oe.cssVar:{}),typeof be.cssVar=="object"?be.cssVar:{}),{key:typeof be.cssVar=="object"&&((bt=be.cssVar)===null||bt===void 0?void 0:bt.key)||Nt});return Object.assign(Object.assign(Object.assign({},Oe),be),{token:Object.assign(Object.assign({},Oe.token),be.token),components:dt,cssVar:ct})},[be,Oe],(He,bt)=>He.some((dt,Nt)=>{const ct=bt[Nt];return!(0,E.default)(dt,ct,!0)}))}},78459:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294));const E=Object.assign({},Z),{useId:ve}=E,se=typeof ve=="undefined"?()=>"":ve;var ae=W.default=se},31929:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"ConfigConsumer",{enumerable:!0,get:function(){return Oe.ConfigConsumer}}),Object.defineProperty(W,"ConfigContext",{enumerable:!0,get:function(){return Oe.ConfigContext}}),Object.defineProperty(W,"Variants",{enumerable:!0,get:function(){return Oe.Variants}}),W.default=W.configConsumerProps=void 0,Object.defineProperty(W,"defaultIconPrefixCls",{enumerable:!0,get:function(){return Oe.defaultIconPrefixCls}}),Object.defineProperty(W,"defaultPrefixCls",{enumerable:!0,get:function(){return Oe.defaultPrefixCls}}),W.warnContext=W.globalConfig=void 0;var E=Z(D(67294)),ve=D(85982),te=J(D(13357)),se=J(D(67265)),ae=D(20059),Se=Z(D(13594)),oe=J(D(2197)),Ge=Z(D(64050)),ee=J(D(44805)),me=J(D(18253)),Le=D(89329),be=J(D(98411)),Oe=D(7177),fe=D(56301),He=D(93319),bt=J(D(5819)),dt=J(D(25494)),Nt=J(D(16722)),ct=J(D(11380)),lt=Z(D(3236)),Ie=J(D(82932)),Ae=function(kn,lr){var zt={};for(var Kt in kn)Object.prototype.hasOwnProperty.call(kn,Kt)&&lr.indexOf(Kt)<0&&(zt[Kt]=kn[Kt]);if(kn!=null&&typeof Object.getOwnPropertySymbols=="function")for(var yn=0,Kt=Object.getOwnPropertySymbols(kn);yn<Kt.length;yn++)lr.indexOf(Kt[yn])<0&&Object.prototype.propertyIsEnumerable.call(kn,Kt[yn])&&(zt[Kt[yn]]=kn[Kt[yn]]);return zt};let pt=!1;const ut=W.warnContext=null,Et=W.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],cn=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let ze,St,we,nt;function Xe(){return ze||Oe.defaultPrefixCls}function Ze(){return St||Oe.defaultIconPrefixCls}function Rt(kn){return Object.keys(kn).some(lr=>lr.endsWith("Color"))}const yt=kn=>{const{prefixCls:lr,iconPrefixCls:zt,theme:Kt,holderRender:yn}=kn;lr!==void 0&&(ze=lr),zt!==void 0&&(St=zt),"holderRender"in kn&&(nt=yn),Kt&&(Rt(Kt)?(0,fe.registerTheme)(Xe(),Kt):we=Kt)},Me=()=>({getPrefixCls:(kn,lr)=>lr||(kn?`${Xe()}-${kn}`:Xe()),getIconPrefixCls:Ze,getRootPrefixCls:()=>ze||Xe(),getTheme:()=>we,holderRender:nt});W.globalConfig=Me;const Gt=kn=>{const{children:lr,csp:zt,autoInsertSpaceInButton:Kt,alert:yn,anchor:Kn,form:rn,locale:Wt,componentSize:Pt,direction:Pe,space:Qe,virtual:Bt,dropdownMatchSelectWidth:z,popupMatchSelectWidth:ue,popupOverflow:ot,legacyLocale:le,parentContext:$t,iconPrefixCls:an,theme:hn,componentDisabled:Dn,segmented:Xn,statistic:Gn,spin:dn,calendar:mt,carousel:Ct,cascader:Cn,collapse:Pn,typography:Zn,checkbox:ht,descriptions:ye,divider:Be,drawer:rt,skeleton:Mt,steps:Ot,image:En,layout:$n,list:yr,mentions:qn,modal:Ce,progress:xe,result:ke,slider:et,breadcrumb:Tt,menu:Yt,pagination:pn,input:_t,textArea:qt,empty:Qn,badge:_r,radio:Vr,rate:pr,switch:Ur,transfer:mi,avatar:wi,message:Sr,tag:Ti,table:hi,card:si,tabs:Mo,timeline:bi,timePicker:na,upload:_a,notification:Ro,tree:qo,colorPicker:Ne,datePicker:Je,rangePicker:kt,flex:sn,wave:Nn,dropdown:Bn,warning:gn,tour:On,floatButtonGroup:dr,variant:hr,inputNumber:ii,treeSelect:Gi}=kn,ao=E.useCallback((Ha,ia)=>{const{prefixCls:Wo}=kn;if(ia)return ia;const Fa=Wo||$t.getPrefixCls("");return Ha?`${Fa}-${Ha}`:Fa},[$t.getPrefixCls,kn.prefixCls]),Qr=an||$t.iconPrefixCls||Oe.defaultIconPrefixCls,ji=zt||$t.csp;(0,Ie.default)(Qr,ji);const Li=(0,dt.default)(hn,$t.theme,{prefixCls:ao("")}),Zr={csp:ji,autoInsertSpaceInButton:Kt,alert:yn,anchor:Kn,locale:Wt||le,direction:Pe,space:Qe,virtual:Bt,popupMatchSelectWidth:ue!=null?ue:z,popupOverflow:ot,getPrefixCls:ao,iconPrefixCls:Qr,theme:Li,segmented:Xn,statistic:Gn,spin:dn,calendar:mt,carousel:Ct,cascader:Cn,collapse:Pn,typography:Zn,checkbox:ht,descriptions:ye,divider:Be,drawer:rt,skeleton:Mt,steps:Ot,image:En,input:_t,textArea:qt,layout:$n,list:yr,mentions:qn,modal:Ce,progress:xe,result:ke,slider:et,breadcrumb:Tt,menu:Yt,pagination:pn,empty:Qn,badge:_r,radio:Vr,rate:pr,switch:Ur,transfer:mi,avatar:wi,message:Sr,tag:Ti,table:hi,card:si,tabs:Mo,timeline:bi,timePicker:na,upload:_a,notification:Ro,tree:qo,colorPicker:Ne,datePicker:Je,rangePicker:kt,flex:sn,wave:Nn,dropdown:Bn,warning:gn,tour:On,floatButtonGroup:dr,variant:hr,inputNumber:ii,treeSelect:Gi},yo=Object.assign({},$t);Object.keys(Zr).forEach(Ha=>{Zr[Ha]!==void 0&&(yo[Ha]=Zr[Ha])}),cn.forEach(Ha=>{const ia=kn[Ha];ia&&(yo[Ha]=ia)}),typeof Kt!="undefined"&&(yo.button=Object.assign({autoInsertSpace:Kt},yo.button));const Mi=(0,se.default)(()=>yo,yo,(Ha,ia)=>{const Wo=Object.keys(Ha),Fa=Object.keys(ia);return Wo.length!==Fa.length||Wo.some(cs=>Ha[cs]!==ia[cs])}),xo=E.useMemo(()=>({prefixCls:Qr,csp:ji}),[Qr,ji]);let xi=E.createElement(E.Fragment,null,E.createElement(ct.default,{dropdownMatchSelectWidth:z}),lr);const Oo=E.useMemo(()=>{var Ha,ia,Wo,Fa;return(0,ae.merge)(((Ha=me.default.Form)===null||Ha===void 0?void 0:Ha.defaultValidateMessages)||{},((Wo=(ia=Mi.locale)===null||ia===void 0?void 0:ia.Form)===null||Wo===void 0?void 0:Wo.defaultValidateMessages)||{},((Fa=Mi.form)===null||Fa===void 0?void 0:Fa.validateMessages)||{},(rn==null?void 0:rn.validateMessages)||{})},[Mi,rn==null?void 0:rn.validateMessages]);Object.keys(Oo).length>0&&(xi=E.createElement(oe.default.Provider,{value:Oo},xi)),Wt&&(xi=E.createElement(Ge.default,{locale:Wt,_ANT_MARK__:Ge.ANT_MARK},xi)),(Qr||ji)&&(xi=E.createElement(te.default.Provider,{value:xo},xi)),Pt&&(xi=E.createElement(lt.SizeContextProvider,{size:Pt},xi)),xi=E.createElement(Nt.default,null,xi);const ra=E.useMemo(()=>{const Ha=Li||{},{algorithm:ia,token:Wo,components:Fa,cssVar:cs}=Ha,wt=Ae(Ha,["algorithm","token","components","cssVar"]),Zt=ia&&(!Array.isArray(ia)||ia.length>0)?(0,ve.createTheme)(ia):Le.defaultTheme,Un={};Object.entries(Fa||{}).forEach(Ci=>{let[oo,Yo]=Ci;const ns=Object.assign({},Yo);"algorithm"in ns&&(ns.algorithm===!0?ns.theme=Zt:(Array.isArray(ns.algorithm)||typeof ns.algorithm=="function")&&(ns.theme=(0,ve.createTheme)(ns.algorithm)),delete ns.algorithm),Un[oo]=ns});const Ir=Object.assign(Object.assign({},be.default),Wo);return Object.assign(Object.assign({},wt),{theme:Zt,token:Ir,components:Un,override:Object.assign({override:Ir},Un),cssVar:cs})},[Li]);return hn&&(xi=E.createElement(Le.DesignTokenContext.Provider,{value:ra},xi)),Mi.warning&&(xi=E.createElement(Se.WarningContext.Provider,{value:Mi.warning},xi)),Dn!==void 0&&(xi=E.createElement(He.DisabledContextProvider,{disabled:Dn},xi)),E.createElement(Oe.ConfigContext.Provider,{value:Mi},xi)},ln=kn=>{const lr=E.useContext(Oe.ConfigContext),zt=E.useContext(ee.default);return E.createElement(Gt,Object.assign({parentContext:lr,legacyLocale:zt},kn))};ln.ConfigContext=Oe.ConfigContext,ln.SizeContext=lt.default,ln.config=yt,ln.useConfig=bt.default,Object.defineProperty(ln,"SizeContext",{get:()=>lt.default});var Ln=W.default=ln},82932:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return J.useResetIconStyle}});var J=D(3184)},51130:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.VariantContext=W.NoStyleItemContext=W.NoFormStyle=W.FormProvider=W.FormItemPrefixContext=W.FormItemInputContext=W.FormContext=void 0;var E=Z(D(67294)),ve=E,te=D(88692),se=J(D(18475));const ae=W.FormContext=ve.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Se=W.NoStyleItemContext=ve.createContext(null),oe=be=>{const Oe=(0,se.default)(be,["prefixCls"]);return ve.createElement(te.FormProvider,Object.assign({},Oe))};W.FormProvider=oe;const Ge=W.FormItemPrefixContext=ve.createContext({prefixCls:""}),ee=W.FormItemInputContext=ve.createContext({}),me=be=>{let{children:Oe,status:fe,override:He}=be;const bt=(0,E.useContext)(ee),dt=(0,E.useMemo)(()=>{const Nt=Object.assign({},bt);return He&&delete Nt.isFormItemInput,fe&&(delete Nt.status,delete Nt.hasFeedback,delete Nt.feedbackIcon),Nt},[fe,He,bt]);return ve.createElement(ee.Provider,{value:dt},Oe)};W.NoFormStyle=me;const Le=W.VariantContext=(0,E.createContext)(void 0)},96424:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(67294),Z=D(51130),E=D(31929);const ve=function(se,ae){let Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var oe,Ge;const{variant:ee,[se]:me}=(0,J.useContext)(E.ConfigContext),Le=(0,J.useContext)(Z.VariantContext),be=me==null?void 0:me.variant;let Oe;typeof ae!="undefined"?Oe=ae:Se===!1?Oe="borderless":Oe=(Ge=(oe=Le!=null?Le:be)!==null&&oe!==void 0?oe:ee)!==null&&Ge!==void 0?Ge:"outlined";const fe=E.Variants.includes(Oe);return[Oe,fe]};var te=W.default=ve},2197:function(Ht,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(67294),Z=W.default=(0,J.createContext)(void 0)},10815:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0,W.triggerFocus=lt;var E=Z(D(67294)),ve=J(D(93967)),te=J(D(67656)),se=D(75531),ae=J(D(85549)),Se=J(D(49314)),oe=D(71434),Ge=D(13594),ee=D(31929),me=J(D(93319)),Le=J(D(14893)),be=J(D(65693)),Oe=D(51130),fe=J(D(96424)),He=D(46549),bt=J(D(81722)),dt=J(D(89858)),Nt=D(36714),ct=function(pt,ut){var Et={};for(var cn in pt)Object.prototype.hasOwnProperty.call(pt,cn)&&ut.indexOf(cn)<0&&(Et[cn]=pt[cn]);if(pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,cn=Object.getOwnPropertySymbols(pt);ze<cn.length;ze++)ut.indexOf(cn[ze])<0&&Object.prototype.propertyIsEnumerable.call(pt,cn[ze])&&(Et[cn[ze]]=pt[cn[ze]]);return Et};function lt(pt,ut){if(!pt)return;pt.focus(ut);const{cursor:Et}=ut||{};if(Et){const cn=pt.value.length;switch(Et){case"start":pt.setSelectionRange(0,0);break;case"end":pt.setSelectionRange(cn,cn);break;default:pt.setSelectionRange(0,cn)}}}const Ie=(0,E.forwardRef)((pt,ut)=>{var Et;const{prefixCls:cn,bordered:ze=!0,status:St,size:we,disabled:nt,onBlur:Xe,onFocus:Ze,suffix:Rt,allowClear:yt,addonAfter:Me,addonBefore:Gt,className:ln,style:Ln,styles:kn,rootClassName:lr,onChange:zt,classNames:Kt,variant:yn}=pt,Kn=ct(pt,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:rn,direction:Wt,input:Pt}=E.default.useContext(ee.ConfigContext),Pe=rn("input",cn),Qe=(0,E.useRef)(null),Bt=(0,Le.default)(Pe),[z,ue,ot]=(0,dt.default)(Pe,Bt),{compactSize:le,compactItemClassnames:$t}=(0,He.useCompactItemContext)(Pe,Wt),an=(0,be.default)(En=>{var $n;return($n=we!=null?we:le)!==null&&$n!==void 0?$n:En}),hn=E.default.useContext(me.default),Dn=nt!=null?nt:hn,{status:Xn,hasFeedback:Gn,feedbackIcon:dn}=(0,E.useContext)(Oe.FormItemInputContext),mt=(0,oe.getMergedStatus)(Xn,St),Ct=(0,Nt.hasPrefixSuffix)(pt)||!!Gn,Cn=(0,E.useRef)(Ct),Pn=(0,bt.default)(Qe,!0),Zn=En=>{Pn(),Xe==null||Xe(En)},ht=En=>{Pn(),Ze==null||Ze(En)},ye=En=>{Pn(),zt==null||zt(En)},Be=(Gn||Rt)&&E.default.createElement(E.default.Fragment,null,Rt,Gn&&dn),rt=(0,Se.default)(yt!=null?yt:Pt==null?void 0:Pt.allowClear),[Mt,Ot]=(0,fe.default)("input",yn,ze);return z(E.default.createElement(te.default,Object.assign({ref:(0,se.composeRef)(ut,Qe),prefixCls:Pe,autoComplete:Pt==null?void 0:Pt.autoComplete},Kn,{disabled:Dn,onBlur:Zn,onFocus:ht,style:Object.assign(Object.assign({},Pt==null?void 0:Pt.style),Ln),styles:Object.assign(Object.assign({},Pt==null?void 0:Pt.styles),kn),suffix:Be,allowClear:rt,className:(0,ve.default)(ln,lr,ot,Bt,$t,Pt==null?void 0:Pt.className),onChange:ye,addonBefore:Gt&&E.default.createElement(ae.default,{form:!0,space:!0},Gt),addonAfter:Me&&E.default.createElement(ae.default,{form:!0,space:!0},Me),classNames:Object.assign(Object.assign(Object.assign({},Kt),Pt==null?void 0:Pt.classNames),{input:(0,ve.default)({[`${Pe}-sm`]:an==="small",[`${Pe}-lg`]:an==="large",[`${Pe}-rtl`]:Wt==="rtl"},Kt==null?void 0:Kt.input,(Et=Pt==null?void 0:Pt.classNames)===null||Et===void 0?void 0:Et.input,ue),variant:(0,ve.default)({[`${Pe}-${Mt}`]:Ot},(0,oe.getStatusClassNames)(Pe,mt)),affixWrapper:(0,ve.default)({[`${Pe}-affix-wrapper-sm`]:an==="small",[`${Pe}-affix-wrapper-lg`]:an==="large",[`${Pe}-affix-wrapper-rtl`]:Wt==="rtl"},ue),wrapper:(0,ve.default)({[`${Pe}-group-rtl`]:Wt==="rtl"},ue),groupWrapper:(0,ve.default)({[`${Pe}-group-wrapper-sm`]:an==="small",[`${Pe}-group-wrapper-lg`]:an==="large",[`${Pe}-group-wrapper-rtl`]:Wt==="rtl",[`${Pe}-group-wrapper-${Mt}`]:Ot},(0,oe.getStatusClassNames)(`${Pe}-group-wrapper`,mt,Gn),ue)})})))});var Ae=W.default=Ie},14104:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=E,te=J(D(93967)),se=J(D(43961)),ae=J(D(49314)),Se=D(71434),oe=D(13594),Ge=D(31929),ee=J(D(93319)),me=J(D(14893)),Le=J(D(65693)),be=D(51130),Oe=J(D(96424)),fe=D(10815),He=J(D(89858)),bt=function(ct,lt){var Ie={};for(var Ae in ct)Object.prototype.hasOwnProperty.call(ct,Ae)&&lt.indexOf(Ae)<0&&(Ie[Ae]=ct[Ae]);if(ct!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pt=0,Ae=Object.getOwnPropertySymbols(ct);pt<Ae.length;pt++)lt.indexOf(Ae[pt])<0&&Object.prototype.propertyIsEnumerable.call(ct,Ae[pt])&&(Ie[Ae[pt]]=ct[Ae[pt]]);return Ie};const dt=(0,E.forwardRef)((ct,lt)=>{var Ie,Ae;const{prefixCls:pt,bordered:ut=!0,size:Et,disabled:cn,status:ze,allowClear:St,classNames:we,rootClassName:nt,className:Xe,style:Ze,styles:Rt,variant:yt}=ct,Me=bt(ct,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Gt,direction:ln,textArea:Ln}=ve.useContext(Ge.ConfigContext),kn=(0,Le.default)(Et),lr=ve.useContext(ee.default),zt=cn!=null?cn:lr,{status:Kt,hasFeedback:yn,feedbackIcon:Kn}=ve.useContext(be.FormItemInputContext),rn=(0,Se.getMergedStatus)(Kt,ze),Wt=ve.useRef(null);ve.useImperativeHandle(lt,()=>{var $t;return{resizableTextArea:($t=Wt.current)===null||$t===void 0?void 0:$t.resizableTextArea,focus:an=>{var hn,Dn;(0,fe.triggerFocus)((Dn=(hn=Wt.current)===null||hn===void 0?void 0:hn.resizableTextArea)===null||Dn===void 0?void 0:Dn.textArea,an)},blur:()=>{var an;return(an=Wt.current)===null||an===void 0?void 0:an.blur()}}});const Pt=Gt("input",pt),Pe=(0,me.default)(Pt),[Qe,Bt,z]=(0,He.default)(Pt,Pe),[ue,ot]=(0,Oe.default)("textArea",yt,ut),le=(0,ae.default)(St!=null?St:Ln==null?void 0:Ln.allowClear);return Qe(ve.createElement(se.default,Object.assign({autoComplete:Ln==null?void 0:Ln.autoComplete},Me,{style:Object.assign(Object.assign({},Ln==null?void 0:Ln.style),Ze),styles:Object.assign(Object.assign({},Ln==null?void 0:Ln.styles),Rt),disabled:zt,allowClear:le,className:(0,te.default)(z,Pe,Xe,nt,Ln==null?void 0:Ln.className),classNames:Object.assign(Object.assign(Object.assign({},we),Ln==null?void 0:Ln.classNames),{textarea:(0,te.default)({[`${Pt}-sm`]:kn==="small",[`${Pt}-lg`]:kn==="large"},Bt,we==null?void 0:we.textarea,(Ie=Ln==null?void 0:Ln.classNames)===null||Ie===void 0?void 0:Ie.textarea),variant:(0,te.default)({[`${Pt}-${ue}`]:ot},(0,Se.getStatusClassNames)(Pt,rn)),affixWrapper:(0,te.default)(`${Pt}-textarea-affix-wrapper`,{[`${Pt}-affix-wrapper-rtl`]:ln==="rtl",[`${Pt}-affix-wrapper-sm`]:kn==="small",[`${Pt}-affix-wrapper-lg`]:kn==="large",[`${Pt}-textarea-show-count`]:ct.showCount||((Ae=ct.count)===null||Ae===void 0?void 0:Ae.show)},Bt)}),prefixCls:Pt,suffix:yn&&ve.createElement("span",{className:`${Pt}-textarea-suffix`},Kn),ref:Wt})))});var Nt=W.default=dt},81722:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=Z;var J=D(67294);function Z(E,ve){const te=(0,J.useRef)([]),se=()=>{te.current.push(setTimeout(()=>{var ae,Se,oe,Ge;!((ae=E.current)===null||ae===void 0)&&ae.input&&((Se=E.current)===null||Se===void 0?void 0:Se.input.getAttribute("type"))==="password"&&(!((oe=E.current)===null||oe===void 0)&&oe.input.hasAttribute("value"))&&((Ge=E.current)===null||Ge===void 0||Ge.input.removeAttribute("value"))}))};return(0,J.useEffect)(()=>(ve&&se(),()=>te.current.forEach(ae=>{ae&&clearTimeout(ae)})),[]),se}},89858:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genPlaceholderStyle=W.genInputSmallStyle=W.genInputGroupStyle=W.genBasicInputStyle=W.genActiveStyle=W.default=void 0,Object.defineProperty(W,"initComponentToken",{enumerable:!0,get:function(){return te.initComponentToken}}),Object.defineProperty(W,"initInputToken",{enumerable:!0,get:function(){return te.initInputToken}});var J=D(85982),Z=D(98078),E=D(78793),ve=D(3184),te=D(25735),se=D(58594);const ae=ct=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:ct,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});W.genPlaceholderStyle=ae;const Se=ct=>({borderColor:ct.activeBorderColor,boxShadow:ct.activeShadow,outline:0,backgroundColor:ct.activeBg});W.genActiveStyle=Se;const oe=ct=>{const{paddingBlockLG:lt,lineHeightLG:Ie,borderRadiusLG:Ae,paddingInlineLG:pt}=ct;return{padding:`${(0,J.unit)(lt)} ${(0,J.unit)(pt)}`,fontSize:ct.inputFontSizeLG,lineHeight:Ie,borderRadius:Ae}},Ge=ct=>({padding:`${(0,J.unit)(ct.paddingBlockSM)} ${(0,J.unit)(ct.paddingInlineSM)}`,fontSize:ct.inputFontSizeSM,borderRadius:ct.borderRadiusSM});W.genInputSmallStyle=Ge;const ee=ct=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,J.unit)(ct.paddingBlock)} ${(0,J.unit)(ct.paddingInline)}`,color:ct.colorText,fontSize:ct.inputFontSize,lineHeight:ct.lineHeight,borderRadius:ct.borderRadius,transition:`all ${ct.motionDurationMid}`},ae(ct.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:ct.controlHeight,lineHeight:ct.lineHeight,verticalAlign:"bottom",transition:`all ${ct.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},oe(ct)),"&-sm":Object.assign({},Ge(ct)),"&-rtl, &-textarea-rtl":{direction:"rtl"}});W.genBasicInputStyle=ee;const me=ct=>{const{componentCls:lt,antCls:Ie}=ct;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:ct.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${lt}, &-lg > ${lt}-group-addon`]:Object.assign({},oe(ct)),[`&-sm ${lt}, &-sm > ${lt}-group-addon`]:Object.assign({},Ge(ct)),[`&-lg ${Ie}-select-single ${Ie}-select-selector`]:{height:ct.controlHeightLG},[`&-sm ${Ie}-select-single ${Ie}-select-selector`]:{height:ct.controlHeightSM},[`> ${lt}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${lt}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,J.unit)(ct.paddingInline)}`,color:ct.colorText,fontWeight:"normal",fontSize:ct.inputFontSize,textAlign:"center",borderRadius:ct.borderRadius,transition:`all ${ct.motionDurationSlow}`,lineHeight:1,[`${Ie}-select`]:{margin:`${(0,J.unit)(ct.calc(ct.paddingBlock).add(1).mul(-1).equal())} ${(0,J.unit)(ct.calc(ct.paddingInline).mul(-1).equal())}`,[`&${Ie}-select-single:not(${Ie}-select-customize-input):not(${Ie}-pagination-size-changer)`]:{[`${Ie}-select-selector`]:{backgroundColor:"inherit",border:`${(0,J.unit)(ct.lineWidth)} ${ct.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ie}-select-selector`]:{color:ct.colorPrimary}}},[`${Ie}-cascader-picker`]:{margin:`-9px ${(0,J.unit)(ct.calc(ct.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Ie}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${lt}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${lt}-search-with-button &`]:{zIndex:0}}},[`> ${lt}:first-child, ${lt}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ie}-select ${Ie}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${lt}-affix-wrapper`]:{[`&:not(:first-child) ${lt}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${lt}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${lt}:last-child, ${lt}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ie}-select ${Ie}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${lt}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${lt}-search &`]:{borderStartStartRadius:ct.borderRadius,borderEndStartRadius:ct.borderRadius}},[`&:not(:first-child), ${lt}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${lt}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,Z.clearFix)()),{[`${lt}-group-addon, ${lt}-group-wrap, > ${lt}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:ct.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${lt}-affix-wrapper,
        & > ${lt}-number-affix-wrapper,
        & > ${Ie}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:ct.calc(ct.lineWidth).mul(-1).equal(),borderInlineEndWidth:ct.lineWidth},[`${lt}`]:{float:"none"},[`& > ${Ie}-select > ${Ie}-select-selector,
      & > ${Ie}-select-auto-complete ${lt},
      & > ${Ie}-cascader-picker ${lt},
      & > ${lt}-group-wrapper ${lt}`]:{borderInlineEndWidth:ct.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${Ie}-select-focused`]:{zIndex:1},[`& > ${Ie}-select > ${Ie}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ie}-select:first-child > ${Ie}-select-selector,
      & > ${Ie}-select-auto-complete:first-child ${lt},
      & > ${Ie}-cascader-picker:first-child ${lt}`]:{borderStartStartRadius:ct.borderRadius,borderEndStartRadius:ct.borderRadius},[`& > *:last-child,
      & > ${Ie}-select:last-child > ${Ie}-select-selector,
      & > ${Ie}-cascader-picker:last-child ${lt},
      & > ${Ie}-cascader-picker-focused:last-child ${lt}`]:{borderInlineEndWidth:ct.lineWidth,borderStartEndRadius:ct.borderRadius,borderEndEndRadius:ct.borderRadius},[`& > ${Ie}-select-auto-complete ${lt}`]:{verticalAlign:"top"},[`${lt}-group-wrapper + ${lt}-group-wrapper`]:{marginInlineStart:ct.calc(ct.lineWidth).mul(-1).equal(),[`${lt}-affix-wrapper`]:{borderRadius:0}},[`${lt}-group-wrapper:not(:last-child)`]:{[`&${lt}-search > ${lt}-group`]:{[`& > ${lt}-group-addon > ${lt}-search-button`]:{borderRadius:0},[`& > ${lt}`]:{borderStartStartRadius:ct.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:ct.borderRadius}}}})}};W.genInputGroupStyle=me;const Le=ct=>{const{componentCls:lt,controlHeightSM:Ie,lineWidth:Ae,calc:pt}=ct,Et=pt(Ie).sub(pt(Ae).mul(2)).sub(16).div(2).equal();return{[lt]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,Z.resetComponent)(ct)),ee(ct)),(0,se.genOutlinedStyle)(ct)),(0,se.genFilledStyle)(ct)),(0,se.genBorderlessStyle)(ct)),{'&[type="color"]':{height:ct.controlHeight,[`&${lt}-lg`]:{height:ct.controlHeightLG},[`&${lt}-sm`]:{height:Ie,paddingTop:Et,paddingBottom:Et}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},be=ct=>{const{componentCls:lt}=ct;return{[`${lt}-clear-icon`]:{margin:0,color:ct.colorTextQuaternary,fontSize:ct.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${ct.motionDurationSlow}`,"&:hover":{color:ct.colorTextTertiary},"&:active":{color:ct.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,J.unit)(ct.inputAffixPadding)}`}}}},Oe=ct=>{const{componentCls:lt,inputAffixPadding:Ie,colorTextDescription:Ae,motionDurationSlow:pt,colorIcon:ut,colorIconHover:Et,iconCls:cn}=ct;return{[`${lt}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},ee(ct)),{display:"inline-flex",[`&:not(${lt}-disabled):hover`]:{zIndex:1,[`${lt}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${lt}`]:{padding:0},[`> input${lt}, > textarea${lt}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${lt}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:ct.paddingXS}},"&-show-count-suffix":{color:Ae},"&-show-count-has-suffix":{marginInlineEnd:ct.paddingXXS},"&-prefix":{marginInlineEnd:Ie},"&-suffix":{marginInlineStart:Ie}}}),be(ct)),{[`${cn}${lt}-password-icon`]:{color:ut,cursor:"pointer",transition:`all ${pt}`,"&:hover":{color:Et}}})}},fe=ct=>{const{componentCls:lt,borderRadiusLG:Ie,borderRadiusSM:Ae}=ct;return{[`${lt}-group`]:Object.assign(Object.assign(Object.assign({},(0,Z.resetComponent)(ct)),me(ct)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${lt}-group-addon`]:{borderRadius:Ie,fontSize:ct.inputFontSizeLG}},"&-sm":{[`${lt}-group-addon`]:{borderRadius:Ae}}},(0,se.genOutlinedGroupStyle)(ct)),(0,se.genFilledGroupStyle)(ct)),{[`&:not(${lt}-compact-first-item):not(${lt}-compact-last-item)${lt}-compact-item`]:{[`${lt}, ${lt}-group-addon`]:{borderRadius:0}},[`&:not(${lt}-compact-last-item)${lt}-compact-first-item`]:{[`${lt}, ${lt}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${lt}-compact-first-item)${lt}-compact-last-item`]:{[`${lt}, ${lt}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${lt}-compact-last-item)${lt}-compact-item`]:{[`${lt}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},He=ct=>{const{componentCls:lt,antCls:Ie}=ct,Ae=`${lt}-search`;return{[Ae]:{[`${lt}`]:{"&:hover, &:focus":{borderColor:ct.colorPrimaryHover,[`+ ${lt}-group-addon ${Ae}-button:not(${Ie}-btn-primary)`]:{borderInlineStartColor:ct.colorPrimaryHover}}},[`${lt}-affix-wrapper`]:{borderRadius:0},[`${lt}-lg`]:{lineHeight:ct.calc(ct.lineHeightLG).sub(2e-4).equal()},[`> ${lt}-group`]:{[`> ${lt}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ae}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:ct.borderRadius,borderEndEndRadius:ct.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ae}-button:not(${Ie}-btn-primary)`]:{color:ct.colorTextDescription,"&:hover":{color:ct.colorPrimaryHover},"&:active":{color:ct.colorPrimaryActive},[`&${Ie}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ae}-button`]:{height:ct.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ae}-button`]:{height:ct.controlHeightLG},[`&-small ${Ae}-button`]:{height:ct.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${lt}-compact-item`]:{[`&:not(${lt}-compact-last-item)`]:{[`${lt}-group-addon`]:{[`${lt}-search-button`]:{marginInlineEnd:ct.calc(ct.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${lt}-compact-first-item)`]:{[`${lt},${lt}-affix-wrapper`]:{borderRadius:0}},[`> ${lt}-group-addon ${lt}-search-button,
        > ${lt},
        ${lt}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${lt}-affix-wrapper-focused`]:{zIndex:2}}}}},bt=ct=>{const{componentCls:lt,paddingLG:Ie}=ct,Ae=`${lt}-textarea`;return{[Ae]:{position:"relative","&-show-count":{[`> ${lt}`]:{height:"100%"},[`${lt}-data-count`]:{position:"absolute",bottom:ct.calc(ct.fontSize).mul(ct.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:ct.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${lt},
        &-affix-wrapper${Ae}-has-feedback ${lt}
      `]:{paddingInlineEnd:Ie},[`&-affix-wrapper${lt}-affix-wrapper`]:{padding:0,[`> textarea${lt}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${lt}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${lt}-clear-icon`]:{position:"absolute",insetInlineEnd:ct.paddingInline,insetBlockStart:ct.paddingXS},[`${Ae}-suffix`]:{position:"absolute",top:0,insetInlineEnd:ct.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${lt}-affix-wrapper-sm`]:{[`${lt}-suffix`]:{[`${lt}-clear-icon`]:{insetInlineEnd:ct.paddingInlineSM}}}}}},dt=ct=>{const{componentCls:lt}=ct;return{[`${lt}-out-of-range`]:{[`&, & input, & textarea, ${lt}-show-count-suffix, ${lt}-data-count`]:{color:ct.colorError}}}};var Nt=W.default=(0,ve.genStyleHooks)("Input",ct=>{const lt=(0,ve.mergeToken)(ct,(0,te.initInputToken)(ct));return[Le(lt),bt(lt),Oe(lt),fe(lt),He(lt),dt(lt),(0,E.genCompactItemStyle)(lt)]},te.initComponentToken,{resetFont:!1})},25735:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initComponentToken=void 0,W.initInputToken=Z;var J=D(3184);function Z(ve){return(0,J.mergeToken)(ve,{inputAffixPadding:ve.paddingXXS})}const E=ve=>{const{controlHeight:te,fontSize:se,lineHeight:ae,lineWidth:Se,controlHeightSM:oe,controlHeightLG:Ge,fontSizeLG:ee,lineHeightLG:me,paddingSM:Le,controlPaddingHorizontalSM:be,controlPaddingHorizontal:Oe,colorFillAlter:fe,colorPrimaryHover:He,colorPrimary:bt,controlOutlineWidth:dt,controlOutline:Nt,colorErrorOutline:ct,colorWarningOutline:lt,colorBgContainer:Ie}=ve;return{paddingBlock:Math.max(Math.round((te-se*ae)/2*10)/10-Se,0),paddingBlockSM:Math.max(Math.round((oe-se*ae)/2*10)/10-Se,0),paddingBlockLG:Math.ceil((Ge-ee*me)/2*10)/10-Se,paddingInline:Le-Se,paddingInlineSM:be-Se,paddingInlineLG:Oe-Se,addonBg:fe,activeBorderColor:bt,hoverBorderColor:He,activeShadow:`0 0 0 ${dt}px ${Nt}`,errorActiveShadow:`0 0 0 ${dt}px ${ct}`,warningActiveShadow:`0 0 0 ${dt}px ${lt}`,hoverBg:Ie,activeBg:Ie,inputFontSize:se,inputFontSizeLG:ee,inputFontSizeSM:se}};W.initComponentToken=E},58594:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genOutlinedStyle=W.genOutlinedGroupStyle=W.genHoverStyle=W.genFilledStyle=W.genFilledGroupStyle=W.genDisabledStyle=W.genBorderlessStyle=W.genBaseOutlinedStyle=void 0;var J=D(85982),Z=D(3184);const E=fe=>({borderColor:fe.hoverBorderColor,backgroundColor:fe.hoverBg});W.genHoverStyle=E;const ve=fe=>({color:fe.colorTextDisabled,backgroundColor:fe.colorBgContainerDisabled,borderColor:fe.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},E((0,Z.mergeToken)(fe,{hoverBorderColor:fe.colorBorder,hoverBg:fe.colorBgContainerDisabled})))});W.genDisabledStyle=ve;const te=(fe,He)=>({background:fe.colorBgContainer,borderWidth:fe.lineWidth,borderStyle:fe.lineType,borderColor:He.borderColor,"&:hover":{borderColor:He.hoverBorderColor,backgroundColor:fe.hoverBg},"&:focus, &:focus-within":{borderColor:He.activeBorderColor,boxShadow:He.activeShadow,outline:0,backgroundColor:fe.activeBg}});W.genBaseOutlinedStyle=te;const se=(fe,He)=>({[`&${fe.componentCls}-status-${He.status}:not(${fe.componentCls}-disabled)`]:Object.assign(Object.assign({},te(fe,He)),{[`${fe.componentCls}-prefix, ${fe.componentCls}-suffix`]:{color:He.affixColor}}),[`&${fe.componentCls}-status-${He.status}${fe.componentCls}-disabled`]:{borderColor:He.borderColor}}),ae=(fe,He)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te(fe,{borderColor:fe.colorBorder,hoverBorderColor:fe.hoverBorderColor,activeBorderColor:fe.activeBorderColor,activeShadow:fe.activeShadow})),{[`&${fe.componentCls}-disabled, &[disabled]`]:Object.assign({},ve(fe))}),se(fe,{status:"error",borderColor:fe.colorError,hoverBorderColor:fe.colorErrorBorderHover,activeBorderColor:fe.colorError,activeShadow:fe.errorActiveShadow,affixColor:fe.colorError})),se(fe,{status:"warning",borderColor:fe.colorWarning,hoverBorderColor:fe.colorWarningBorderHover,activeBorderColor:fe.colorWarning,activeShadow:fe.warningActiveShadow,affixColor:fe.colorWarning})),He)});W.genOutlinedStyle=ae;const Se=(fe,He)=>({[`&${fe.componentCls}-group-wrapper-status-${He.status}`]:{[`${fe.componentCls}-group-addon`]:{borderColor:He.addonBorderColor,color:He.addonColor}}}),oe=fe=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${fe.componentCls}-group`]:{"&-addon":{background:fe.addonBg,border:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Se(fe,{status:"error",addonBorderColor:fe.colorError,addonColor:fe.colorErrorText})),Se(fe,{status:"warning",addonBorderColor:fe.colorWarning,addonColor:fe.colorWarningText})),{[`&${fe.componentCls}-group-wrapper-disabled`]:{[`${fe.componentCls}-group-addon`]:Object.assign({},ve(fe))}})});W.genOutlinedGroupStyle=oe;const Ge=(fe,He)=>{const{componentCls:bt}=fe;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${bt}-disabled, &[disabled]`]:{color:fe.colorTextDisabled},[`&${bt}-status-error`]:{"&, & input, & textarea":{color:fe.colorError}},[`&${bt}-status-warning`]:{"&, & input, & textarea":{color:fe.colorWarning}}},He)}};W.genBorderlessStyle=Ge;const ee=(fe,He)=>({background:He.bg,borderWidth:fe.lineWidth,borderStyle:fe.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:He==null?void 0:He.inputColor},"&:hover":{background:He.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:He.activeBorderColor,backgroundColor:fe.activeBg}}),me=(fe,He)=>({[`&${fe.componentCls}-status-${He.status}:not(${fe.componentCls}-disabled)`]:Object.assign(Object.assign({},ee(fe,He)),{[`${fe.componentCls}-prefix, ${fe.componentCls}-suffix`]:{color:He.affixColor}})}),Le=(fe,He)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ee(fe,{bg:fe.colorFillTertiary,hoverBg:fe.colorFillSecondary,activeBorderColor:fe.activeBorderColor})),{[`&${fe.componentCls}-disabled, &[disabled]`]:Object.assign({},ve(fe))}),me(fe,{status:"error",bg:fe.colorErrorBg,hoverBg:fe.colorErrorBgHover,activeBorderColor:fe.colorError,inputColor:fe.colorErrorText,affixColor:fe.colorError})),me(fe,{status:"warning",bg:fe.colorWarningBg,hoverBg:fe.colorWarningBgHover,activeBorderColor:fe.colorWarning,inputColor:fe.colorWarningText,affixColor:fe.colorWarning})),He)});W.genFilledStyle=Le;const be=(fe,He)=>({[`&${fe.componentCls}-group-wrapper-status-${He.status}`]:{[`${fe.componentCls}-group-addon`]:{background:He.addonBg,color:He.addonColor}}}),Oe=fe=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${fe.componentCls}-group`]:{"&-addon":{background:fe.colorFillTertiary},[`${fe.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorSplit}`}}}},be(fe,{status:"error",addonBg:fe.colorErrorBg,addonColor:fe.colorErrorText})),be(fe,{status:"warning",addonBg:fe.colorWarningBg,addonColor:fe.colorWarningText})),{[`&${fe.componentCls}-group-wrapper-disabled`]:{[`${fe.componentCls}-group`]:{"&-addon":{background:fe.colorFillTertiary,color:fe.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`,borderTop:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`,borderBottom:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`,borderTop:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`,borderBottom:`${(0,J.unit)(fe.lineWidth)} ${fe.lineType} ${fe.colorBorder}`}}}})});W.genFilledGroupStyle=Oe},36714:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.hasPrefixSuffix=D;function D(J){return!!(J.prefix||J.suffix||J.allowClear||J.showCount)}},44805:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(67294);const Z=(0,J.createContext)(void 0);var E=W.default=Z},64050:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.ANT_MARK=void 0,Object.defineProperty(W,"useLocale",{enumerable:!0,get:function(){return ae.default}});var E=Z(D(67294)),ve=D(13594),te=D(10625),se=J(D(44805)),ae=J(D(76647));const Se=W.ANT_MARK="internalMark",oe=ee=>{const{locale:me={},children:Le,_ANT_MARK__:be}=ee;E.useEffect(()=>(0,te.changeConfirmLocale)(me==null?void 0:me.Modal),[me]);const Oe=E.useMemo(()=>Object.assign(Object.assign({},me),{exist:!0}),[me]);return E.createElement(se.default.Provider,{value:Oe},Le)};var Ge=W.default=oe},76647:function(Ht,W,D){"use strict";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(44805)),te=J(D(18253));const se=(Se,oe)=>{const Ge=E.useContext(ve.default),ee=E.useMemo(()=>{var Le;const be=oe||te.default[Se],Oe=(Le=Ge==null?void 0:Ge[Se])!==null&&Le!==void 0?Le:{};return Object.assign(Object.assign({},typeof be=="function"?be():be),Oe||{})},[Se,oe,Ge]),me=E.useMemo(()=>{const Le=Ge==null?void 0:Ge.locale;return Ge!=null&&Ge.exist&&!Le?te.default.locale:Le},[Ge]);return[ee,me]};var ae=W.default=se},10625:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.changeConfirmLocale=se,W.getConfirmLocale=ae;var Z=J(D(18253));let E=Object.assign({},Z.default.Modal),ve=[];const te=()=>ve.reduce((Se,oe)=>Object.assign(Object.assign({},Se),oe),Z.default.Modal);function se(Se){if(Se){const oe=Object.assign({},Se);return ve.push(oe),E=te(),()=>{ve=ve.filter(Ge=>Ge!==oe),E=te()}}E=Object.assign({},Z.default.Modal)}function ae(){return E}},46549:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useCompactItemContext=W.default=W.SpaceCompactItemContext=W.NoCompactStyle=void 0;var E=Z(D(67294)),ve=J(D(93967)),te=J(D(45598)),se=D(31929),ae=J(D(65693)),Se=J(D(54277)),oe=function(fe,He){var bt={};for(var dt in fe)Object.prototype.hasOwnProperty.call(fe,dt)&&He.indexOf(dt)<0&&(bt[dt]=fe[dt]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Nt=0,dt=Object.getOwnPropertySymbols(fe);Nt<dt.length;Nt++)He.indexOf(dt[Nt])<0&&Object.prototype.propertyIsEnumerable.call(fe,dt[Nt])&&(bt[dt[Nt]]=fe[dt[Nt]]);return bt};const Ge=W.SpaceCompactItemContext=E.createContext(null),ee=(fe,He)=>{const bt=E.useContext(Ge),dt=E.useMemo(()=>{if(!bt)return"";const{compactDirection:Nt,isFirstItem:ct,isLastItem:lt}=bt,Ie=Nt==="vertical"?"-vertical-":"-";return(0,ve.default)(`${fe}-compact${Ie}item`,{[`${fe}-compact${Ie}first-item`]:ct,[`${fe}-compact${Ie}last-item`]:lt,[`${fe}-compact${Ie}item-rtl`]:He==="rtl"})},[fe,He,bt]);return{compactSize:bt==null?void 0:bt.compactSize,compactDirection:bt==null?void 0:bt.compactDirection,compactItemClassnames:dt}};W.useCompactItemContext=ee;const me=fe=>{let{children:He}=fe;return E.createElement(Ge.Provider,{value:null},He)};W.NoCompactStyle=me;const Le=fe=>{var{children:He}=fe,bt=oe(fe,["children"]);return E.createElement(Ge.Provider,{value:bt},He)},be=fe=>{const{getPrefixCls:He,direction:bt}=E.useContext(se.ConfigContext),{size:dt,direction:Nt,block:ct,prefixCls:lt,className:Ie,rootClassName:Ae,children:pt}=fe,ut=oe(fe,["size","direction","block","prefixCls","className","rootClassName","children"]),Et=(0,ae.default)(Rt=>dt!=null?dt:Rt),cn=He("space-compact",lt),[ze,St]=(0,Se.default)(cn),we=(0,ve.default)(cn,St,{[`${cn}-rtl`]:bt==="rtl",[`${cn}-block`]:ct,[`${cn}-vertical`]:Nt==="vertical"},Ie,Ae),nt=E.useContext(Ge),Xe=(0,te.default)(pt),Ze=E.useMemo(()=>Xe.map((Rt,yt)=>{const Me=(Rt==null?void 0:Rt.key)||`${cn}-item-${yt}`;return E.createElement(Le,{key:Me,compactSize:Et,compactDirection:Nt,isFirstItem:yt===0&&(!nt||(nt==null?void 0:nt.isFirstItem)),isLastItem:yt===Xe.length-1&&(!nt||(nt==null?void 0:nt.isLastItem))},Rt)}),[dt,Xe,nt]);return Xe.length===0?null:ze(E.createElement("div",Object.assign({className:we},ut),Ze))};var Oe=W.default=be},35969:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=Z=>{const{componentCls:E}=Z;return{[E]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var J=W.default=D},54277:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var Z=D(3184),E=J(D(35969));const ve=Se=>{const{componentCls:oe,antCls:Ge}=Se;return{[oe]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${oe}-item:empty`]:{display:"none"},[`${oe}-item > ${Ge}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},te=Se=>{const{componentCls:oe}=Se;return{[oe]:{"&-gap-row-small":{rowGap:Se.spaceGapSmallSize},"&-gap-row-middle":{rowGap:Se.spaceGapMiddleSize},"&-gap-row-large":{rowGap:Se.spaceGapLargeSize},"&-gap-col-small":{columnGap:Se.spaceGapSmallSize},"&-gap-col-middle":{columnGap:Se.spaceGapMiddleSize},"&-gap-col-large":{columnGap:Se.spaceGapLargeSize}}}},se=()=>({});W.prepareComponentToken=se;var ae=W.default=(0,Z.genStyleHooks)("Space",Se=>{const oe=(0,Z.mergeToken)(Se,{spaceGapSmallSize:Se.paddingXS,spaceGapMiddleSize:Se.padding,spaceGapLargeSize:Se.paddingLG});return[ve(oe),te(oe),(0,E.default)(oe)]},()=>({}),{resetStyle:!1})},78793:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genCompactItemStyle=Z;function D(E,ve,te){const{focusElCls:se,focus:ae,borderElCls:Se}=te,oe=Se?"> *":"",Ge=["hover",ae?"focus":null,"active"].filter(Boolean).map(ee=>`&:${ee} ${oe}`).join(",");return{[`&-item:not(${ve}-last-item)`]:{marginInlineEnd:E.calc(E.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[Ge]:{zIndex:2}},se?{[`&${se}`]:{zIndex:2}}:{}),{[`&[disabled] ${oe}`]:{zIndex:0}})}}function J(E,ve,te){const{borderElCls:se}=te,ae=se?`> ${se}`:"";return{[`&-item:not(${ve}-first-item):not(${ve}-last-item) ${ae}`]:{borderRadius:0},[`&-item:not(${ve}-last-item)${ve}-first-item`]:{[`& ${ae}, &${E}-sm ${ae}, &${E}-lg ${ae}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${ve}-first-item)${ve}-last-item`]:{[`& ${ae}, &${E}-sm ${ae}, &${E}-lg ${ae}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Z(E){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:te}=E,se=`${te}-compact`;return{[se]:Object.assign(Object.assign({},D(E,se,ve)),J(te,se,ve))}}},98078:function(Ht,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.genLinkStyle=W.genFocusStyle=W.genFocusOutline=W.genCommonStyle=W.clearFix=void 0,Object.defineProperty(W,"operationUnit",{enumerable:!0,get:function(){return Z.operationUnit}}),W.textEllipsis=W.resetIcon=W.resetComponent=void 0;var J=D(85982),Z=D(22548);const E=W.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ve=function(ee){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:ee.colorText,fontSize:ee.fontSize,lineHeight:ee.lineHeight,listStyle:"none",fontFamily:me?"inherit":ee.fontFamily}};W.resetComponent=ve;const te=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});W.resetIcon=te;const se=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});W.clearFix=se;const ae=ee=>({a:{color:ee.colorLink,textDecoration:ee.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${ee.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:ee.colorLinkHover},"&:active":{color:ee.colorLinkActive},"&:active, &:hover":{textDecoration:ee.linkHoverDecoration,outline:0},"&:focus":{textDecoration:ee.linkFocusDecoration,outline:0},"&[disabled]":{color:ee.colorTextDisabled,cursor:"not-allowed"}}});W.genLinkStyle=ae;const Se=(ee,me,Le,be)=>{const Oe=`[class^="${me}"], [class*=" ${me}"]`,fe=Le?`.${Le}`:Oe,He={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let bt={};return be!==!1&&(bt={fontFamily:ee.fontFamily,fontSize:ee.fontSize}),{[fe]:Object.assign(Object.assign(Object.assign({},bt),He),{[Oe]:He})}};W.genCommonStyle=Se;const oe=ee=>({outline:`${(0,J.unit)(ee.lineWidthFocus)} solid ${ee.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});W.genFocusOutline=oe;const Ge=ee=>({"&:focus-visible":Object.assign({},oe(ee))});W.genFocusStyle=Ge},57253:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=Z=>({[Z.componentCls]:{[`${Z.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${Z.motionDurationMid} ${Z.motionEaseInOut},
        opacity ${Z.motionDurationMid} ${Z.motionEaseInOut} !important`}},[`${Z.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${Z.motionDurationMid} ${Z.motionEaseInOut},
        opacity ${Z.motionDurationMid} ${Z.motionEaseInOut} !important`}}});var J=W.default=D},84460:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initFadeMotion=W.fadeOut=W.fadeIn=void 0;var J=D(85982),Z=D(94631);const E=W.fadeIn=new J.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),ve=W.fadeOut=new J.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),te=function(se){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:Se}=se,oe=`${Se}-fade`,Ge=ae?"&":"";return[(0,Z.initMotion)(oe,E,ve,se.motionDurationMid,ae),{[`
        ${Ge}${oe}-enter,
        ${Ge}${oe}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${Ge}${oe}-leave`]:{animationTimingFunction:"linear"}}]};W.initFadeMotion=te},42836:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"fadeIn",{enumerable:!0,get:function(){return E.fadeIn}}),Object.defineProperty(W,"fadeOut",{enumerable:!0,get:function(){return E.fadeOut}}),Object.defineProperty(W,"genCollapseMotion",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(W,"initFadeMotion",{enumerable:!0,get:function(){return E.initFadeMotion}}),Object.defineProperty(W,"initMoveMotion",{enumerable:!0,get:function(){return ve.initMoveMotion}}),Object.defineProperty(W,"initSlideMotion",{enumerable:!0,get:function(){return te.initSlideMotion}}),Object.defineProperty(W,"initZoomMotion",{enumerable:!0,get:function(){return se.initZoomMotion}}),Object.defineProperty(W,"moveDownIn",{enumerable:!0,get:function(){return ve.moveDownIn}}),Object.defineProperty(W,"moveDownOut",{enumerable:!0,get:function(){return ve.moveDownOut}}),Object.defineProperty(W,"moveLeftIn",{enumerable:!0,get:function(){return ve.moveLeftIn}}),Object.defineProperty(W,"moveLeftOut",{enumerable:!0,get:function(){return ve.moveLeftOut}}),Object.defineProperty(W,"moveRightIn",{enumerable:!0,get:function(){return ve.moveRightIn}}),Object.defineProperty(W,"moveRightOut",{enumerable:!0,get:function(){return ve.moveRightOut}}),Object.defineProperty(W,"moveUpIn",{enumerable:!0,get:function(){return ve.moveUpIn}}),Object.defineProperty(W,"moveUpOut",{enumerable:!0,get:function(){return ve.moveUpOut}}),Object.defineProperty(W,"slideDownIn",{enumerable:!0,get:function(){return te.slideDownIn}}),Object.defineProperty(W,"slideDownOut",{enumerable:!0,get:function(){return te.slideDownOut}}),Object.defineProperty(W,"slideLeftIn",{enumerable:!0,get:function(){return te.slideLeftIn}}),Object.defineProperty(W,"slideLeftOut",{enumerable:!0,get:function(){return te.slideLeftOut}}),Object.defineProperty(W,"slideRightIn",{enumerable:!0,get:function(){return te.slideRightIn}}),Object.defineProperty(W,"slideRightOut",{enumerable:!0,get:function(){return te.slideRightOut}}),Object.defineProperty(W,"slideUpIn",{enumerable:!0,get:function(){return te.slideUpIn}}),Object.defineProperty(W,"slideUpOut",{enumerable:!0,get:function(){return te.slideUpOut}}),Object.defineProperty(W,"zoomBigIn",{enumerable:!0,get:function(){return se.zoomBigIn}}),Object.defineProperty(W,"zoomBigOut",{enumerable:!0,get:function(){return se.zoomBigOut}}),Object.defineProperty(W,"zoomDownIn",{enumerable:!0,get:function(){return se.zoomDownIn}}),Object.defineProperty(W,"zoomDownOut",{enumerable:!0,get:function(){return se.zoomDownOut}}),Object.defineProperty(W,"zoomIn",{enumerable:!0,get:function(){return se.zoomIn}}),Object.defineProperty(W,"zoomLeftIn",{enumerable:!0,get:function(){return se.zoomLeftIn}}),Object.defineProperty(W,"zoomLeftOut",{enumerable:!0,get:function(){return se.zoomLeftOut}}),Object.defineProperty(W,"zoomOut",{enumerable:!0,get:function(){return se.zoomOut}}),Object.defineProperty(W,"zoomRightIn",{enumerable:!0,get:function(){return se.zoomRightIn}}),Object.defineProperty(W,"zoomRightOut",{enumerable:!0,get:function(){return se.zoomRightOut}}),Object.defineProperty(W,"zoomUpIn",{enumerable:!0,get:function(){return se.zoomUpIn}}),Object.defineProperty(W,"zoomUpOut",{enumerable:!0,get:function(){return se.zoomUpOut}});var Z=J(D(57253)),E=D(84460),ve=D(17060),te=D(17581),se=D(99269)},94631:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initMotion=void 0;const D=E=>({animationDuration:E,animationFillMode:"both"}),J=E=>({animationDuration:E,animationFillMode:"both"}),Z=function(E,ve,te,se){const Se=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${Se}${E}-enter,
      ${Se}${E}-appear
    `]:Object.assign(Object.assign({},D(se)),{animationPlayState:"paused"}),[`${Se}${E}-leave`]:Object.assign(Object.assign({},J(se)),{animationPlayState:"paused"}),[`
      ${Se}${E}-enter${E}-enter-active,
      ${Se}${E}-appear${E}-appear-active
    `]:{animationName:ve,animationPlayState:"running"},[`${Se}${E}-leave${E}-leave-active`]:{animationName:te,animationPlayState:"running",pointerEvents:"none"}}};W.initMotion=Z},17060:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.moveUpOut=W.moveUpIn=W.moveRightOut=W.moveRightIn=W.moveLeftOut=W.moveLeftIn=W.moveDownOut=W.moveDownIn=W.initMoveMotion=void 0;var J=D(85982),Z=D(94631);const E=W.moveDownIn=new J.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ve=W.moveDownOut=new J.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),te=W.moveLeftIn=new J.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),se=W.moveLeftOut=new J.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ae=W.moveRightIn=new J.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Se=W.moveRightOut=new J.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),oe=W.moveUpIn=new J.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Ge=W.moveUpOut=new J.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),ee={"move-up":{inKeyframes:oe,outKeyframes:Ge},"move-down":{inKeyframes:E,outKeyframes:ve},"move-left":{inKeyframes:te,outKeyframes:se},"move-right":{inKeyframes:ae,outKeyframes:Se}},me=(Le,be)=>{const{antCls:Oe}=Le,fe=`${Oe}-${be}`,{inKeyframes:He,outKeyframes:bt}=ee[be];return[(0,Z.initMotion)(fe,He,bt,Le.motionDurationMid),{[`
        ${fe}-enter,
        ${fe}-appear
      `]:{opacity:0,animationTimingFunction:Le.motionEaseOutCirc},[`${fe}-leave`]:{animationTimingFunction:Le.motionEaseInOutCirc}}]};W.initMoveMotion=me},17581:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.slideUpOut=W.slideUpIn=W.slideRightOut=W.slideRightIn=W.slideLeftOut=W.slideLeftIn=W.slideDownOut=W.slideDownIn=W.initSlideMotion=void 0;var J=D(85982),Z=D(94631);const E=W.slideUpIn=new J.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),ve=W.slideUpOut=new J.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),te=W.slideDownIn=new J.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),se=W.slideDownOut=new J.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ae=W.slideLeftIn=new J.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Se=W.slideLeftOut=new J.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),oe=W.slideRightIn=new J.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Ge=W.slideRightOut=new J.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),ee={"slide-up":{inKeyframes:E,outKeyframes:ve},"slide-down":{inKeyframes:te,outKeyframes:se},"slide-left":{inKeyframes:ae,outKeyframes:Se},"slide-right":{inKeyframes:oe,outKeyframes:Ge}},me=(Le,be)=>{const{antCls:Oe}=Le,fe=`${Oe}-${be}`,{inKeyframes:He,outKeyframes:bt}=ee[be];return[(0,Z.initMotion)(fe,He,bt,Le.motionDurationMid),{[`
      ${fe}-enter,
      ${fe}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:Le.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${fe}-leave`]:{animationTimingFunction:Le.motionEaseInQuint}}]};W.initSlideMotion=me},99269:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.zoomUpOut=W.zoomUpIn=W.zoomRightOut=W.zoomRightIn=W.zoomOut=W.zoomLeftOut=W.zoomLeftIn=W.zoomIn=W.zoomDownOut=W.zoomDownIn=W.zoomBigOut=W.zoomBigIn=W.initZoomMotion=void 0;var J=D(85982),Z=D(94631);const E=W.zoomIn=new J.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ve=W.zoomOut=new J.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),te=W.zoomBigIn=new J.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),se=W.zoomBigOut=new J.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),ae=W.zoomUpIn=new J.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Se=W.zoomUpOut=new J.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),oe=W.zoomLeftIn=new J.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Ge=W.zoomLeftOut=new J.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),ee=W.zoomRightIn=new J.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),me=W.zoomRightOut=new J.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Le=W.zoomDownIn=new J.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),be=W.zoomDownOut=new J.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Oe={zoom:{inKeyframes:E,outKeyframes:ve},"zoom-big":{inKeyframes:te,outKeyframes:se},"zoom-big-fast":{inKeyframes:te,outKeyframes:se},"zoom-left":{inKeyframes:oe,outKeyframes:Ge},"zoom-right":{inKeyframes:ee,outKeyframes:me},"zoom-up":{inKeyframes:ae,outKeyframes:Se},"zoom-down":{inKeyframes:Le,outKeyframes:be}},fe=(He,bt)=>{const{antCls:dt}=He,Nt=`${dt}-${bt}`,{inKeyframes:ct,outKeyframes:lt}=Oe[bt];return[(0,Z.initMotion)(Nt,ct,lt,bt==="zoom-big-fast"?He.motionDurationFast:He.motionDurationMid),{[`
        ${Nt}-enter,
        ${Nt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:He.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Nt}-leave`]:{animationTimingFunction:He.motionEaseInOutCirc}}]};W.initZoomMotion=fe},22548:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.operationUnit=void 0;const D=J=>({color:J.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${J.motionDurationSlow}`,"&:focus, &:hover":{color:J.colorLinkHover},"&:active":{color:J.colorLinkActive}});W.operationUnit=D},9064:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.MAX_VERTICAL_CONTENT_RADIUS=void 0,W.default=te,W.getArrowOffsetToken=E;var J=D(51337);const Z=W.MAX_VERTICAL_CONTENT_RADIUS=8;function E(se){const{contentRadius:ae,limitVerticalRadius:Se}=se,oe=ae>12?ae+2:12;return{arrowOffsetHorizontal:oe,arrowOffsetVertical:Se?Z:oe}}function ve(se,ae){return se?ae:{}}function te(se,ae,Se){const{componentCls:oe,boxShadowPopoverArrow:Ge,arrowOffsetVertical:ee,arrowOffsetHorizontal:me}=se,{arrowDistance:Le=0,arrowPlacement:be={left:!0,right:!0,top:!0,bottom:!0}}=Se||{};return{[oe]:Object.assign(Object.assign(Object.assign(Object.assign({[`${oe}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,J.genRoundedArrow)(se,ae,Ge)),{"&:before":{background:ae}})]},ve(!!be.top,{[[`&-placement-top > ${oe}-arrow`,`&-placement-topLeft > ${oe}-arrow`,`&-placement-topRight > ${oe}-arrow`].join(",")]:{bottom:Le,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-topRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),ve(!!be.bottom,{[[`&-placement-bottom > ${oe}-arrow`,`&-placement-bottomLeft > ${oe}-arrow`,`&-placement-bottomRight > ${oe}-arrow`].join(",")]:{top:Le,transform:"translateY(-100%)"},[`&-placement-bottom > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-bottomRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),ve(!!be.left,{[[`&-placement-left > ${oe}-arrow`,`&-placement-leftTop > ${oe}-arrow`,`&-placement-leftBottom > ${oe}-arrow`].join(",")]:{right:{_skip_check_:!0,value:Le},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${oe}-arrow`]:{top:ee},[`&-placement-leftBottom > ${oe}-arrow`]:{bottom:ee}})),ve(!!be.right,{[[`&-placement-right > ${oe}-arrow`,`&-placement-rightTop > ${oe}-arrow`,`&-placement-rightBottom > ${oe}-arrow`].join(",")]:{left:{_skip_check_:!0,value:Le},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${oe}-arrow`]:{top:ee},[`&-placement-rightBottom > ${oe}-arrow`]:{bottom:ee}}))}}},51337:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genRoundedArrow=void 0,W.getArrowToken=Z;var J=D(85982);function Z(ve){const{sizePopupArrow:te,borderRadiusXS:se,borderRadiusOuter:ae}=ve,Se=te/2,oe=0,Ge=Se,ee=ae*1/Math.sqrt(2),me=Se-ae*(1-1/Math.sqrt(2)),Le=Se-se*(1/Math.sqrt(2)),be=ae*(Math.sqrt(2)-1)+se*(1/Math.sqrt(2)),Oe=2*Se-Le,fe=be,He=2*Se-ee,bt=me,dt=2*Se-oe,Nt=Ge,ct=Se*Math.sqrt(2)+ae*(Math.sqrt(2)-2),lt=ae*(Math.sqrt(2)-1),Ie=`polygon(${lt}px 100%, 50% ${lt}px, ${2*Se-lt}px 100%, ${lt}px 100%)`,Ae=`path('M ${oe} ${Ge} A ${ae} ${ae} 0 0 0 ${ee} ${me} L ${Le} ${be} A ${se} ${se} 0 0 1 ${Oe} ${fe} L ${He} ${bt} A ${ae} ${ae} 0 0 0 ${dt} ${Nt} Z')`;return{arrowShadowWidth:ct,arrowPath:Ae,arrowPolygon:Ie}}const E=(ve,te,se)=>{const{sizePopupArrow:ae,arrowPolygon:Se,arrowPath:oe,arrowShadowWidth:Ge,borderRadiusXS:ee,calc:me}=ve;return{pointerEvents:"none",width:ae,height:ae,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:ae,height:me(ae).div(2).equal(),background:te,clipPath:{_multi_value_:!0,value:[Se,oe]},content:'""'},"&::after":{content:'""',position:"absolute",width:Ge,height:Ge,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,J.unit)(ee)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:se,zIndex:0,background:"transparent"}}};W.genRoundedArrow=E},89329:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultTheme=W.defaultConfig=W.DesignTokenContext=void 0;var Z=J(D(67294)),E=D(85982),ve=J(D(9924)),te=J(D(98411));const se=W.defaultTheme=(0,E.createTheme)(ve.default),ae=W.defaultConfig={token:te.default,override:{override:te.default},hashed:!0},Se=W.DesignTokenContext=Z.default.createContext(ae)},36496:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return J.PresetColors}});var J=D(81342)},81342:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.PresetColors=void 0;const D=W.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"DesignTokenContext",{enumerable:!0,get:function(){return ee.DesignTokenContext}}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return ve.PresetColors}}),Object.defineProperty(W,"calc",{enumerable:!0,get:function(){return E.genCalc}}),Object.defineProperty(W,"defaultConfig",{enumerable:!0,get:function(){return ee.defaultConfig}}),Object.defineProperty(W,"genComponentStyleHook",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(W,"genPresetColor",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(W,"genStyleHooks",{enumerable:!0,get:function(){return ae.genStyleHooks}}),Object.defineProperty(W,"genSubStyleComponent",{enumerable:!0,get:function(){return ae.genSubStyleComponent}}),Object.defineProperty(W,"getLineHeight",{enumerable:!0,get:function(){return te.getLineHeight}}),Object.defineProperty(W,"mergeToken",{enumerable:!0,get:function(){return oe.merge}}),Object.defineProperty(W,"statisticToken",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(W,"useResetIconStyle",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(W,"useStyleRegister",{enumerable:!0,get:function(){return E.useStyleRegister}}),Object.defineProperty(W,"useToken",{enumerable:!0,get:function(){return se.default}});var E=D(85982),ve=D(36496),te=D(62231),se=Z(D(41401)),ae=J(D(3737)),Se=Z(D(36219)),oe=J(D(99636)),Ge=Z(D(54894)),ee=D(89329)},26162:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getSolidColor=W.getAlphaColor=void 0;var J=D(131);const Z=(ve,te)=>new J.TinyColor(ve).setAlpha(te).toRgbString();W.getAlphaColor=Z;const E=(ve,te)=>new J.TinyColor(ve).darken(te).toHexString();W.getSolidColor=E},80373:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.generateNeutralColorPalettes=W.generateColorPalettes=void 0;var J=D(65409),Z=D(26162);const E=te=>{const se=(0,J.generate)(te);return{1:se[0],2:se[1],3:se[2],4:se[3],5:se[4],6:se[5],7:se[6],8:se[4],9:se[5],10:se[6]}};W.generateColorPalettes=E;const ve=(te,se)=>{const ae=te||"#fff",Se=se||"#000";return{colorBgBase:ae,colorTextBase:Se,colorText:(0,Z.getAlphaColor)(Se,.88),colorTextSecondary:(0,Z.getAlphaColor)(Se,.65),colorTextTertiary:(0,Z.getAlphaColor)(Se,.45),colorTextQuaternary:(0,Z.getAlphaColor)(Se,.25),colorFill:(0,Z.getAlphaColor)(Se,.15),colorFillSecondary:(0,Z.getAlphaColor)(Se,.06),colorFillTertiary:(0,Z.getAlphaColor)(Se,.04),colorFillQuaternary:(0,Z.getAlphaColor)(Se,.02),colorBgLayout:(0,Z.getSolidColor)(ae,4),colorBgContainer:(0,Z.getSolidColor)(ae,0),colorBgElevated:(0,Z.getSolidColor)(ae,0),colorBgSpotlight:(0,Z.getAlphaColor)(Se,.85),colorBgBlur:"transparent",colorBorder:(0,Z.getSolidColor)(ae,15),colorBorderSecondary:(0,Z.getSolidColor)(ae,6)}};W.generateNeutralColorPalettes=ve},9924:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Ge;var Z=D(65409),E=D(98411),ve=J(D(10805)),te=J(D(81594)),se=J(D(54730)),ae=J(D(69853)),Se=J(D(19216)),oe=D(80373);function Ge(ee){Z.presetPrimaryColors.pink=Z.presetPrimaryColors.magenta,Z.presetPalettes.pink=Z.presetPalettes.magenta;const me=Object.keys(E.defaultPresetColors).map(Le=>{const be=ee[Le]===Z.presetPrimaryColors[Le]?Z.presetPalettes[Le]:(0,Z.generate)(ee[Le]);return new Array(10).fill(1).reduce((Oe,fe,He)=>(Oe[`${Le}-${He+1}`]=be[He],Oe[`${Le}${He+1}`]=be[He],Oe),{})}).reduce((Le,be)=>(Le=Object.assign(Object.assign({},Le),be),Le),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ee),me),(0,ve.default)(ee,{generateColorPalettes:oe.generateColorPalettes,generateNeutralColorPalettes:oe.generateNeutralColorPalettes})),(0,ae.default)(ee.fontSize)),(0,Se.default)(ee)),(0,se.default)(ee)),(0,te.default)(ee))}},98411:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.defaultPresetColors=W.default=void 0;const D=W.defaultPresetColors={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},J=Object.assign(Object.assign({},D),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var Z=W.default=J},10805:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=Z;var J=D(131);function Z(E,ve){let{generateColorPalettes:te,generateNeutralColorPalettes:se}=ve;const{colorSuccess:ae,colorWarning:Se,colorError:oe,colorInfo:Ge,colorPrimary:ee,colorBgBase:me,colorTextBase:Le}=E,be=te(ee),Oe=te(ae),fe=te(Se),He=te(oe),bt=te(Ge),dt=se(me,Le),Nt=E.colorLink||E.colorInfo,ct=te(Nt);return Object.assign(Object.assign({},dt),{colorPrimaryBg:be[1],colorPrimaryBgHover:be[2],colorPrimaryBorder:be[3],colorPrimaryBorderHover:be[4],colorPrimaryHover:be[5],colorPrimary:be[6],colorPrimaryActive:be[7],colorPrimaryTextHover:be[8],colorPrimaryText:be[9],colorPrimaryTextActive:be[10],colorSuccessBg:Oe[1],colorSuccessBgHover:Oe[2],colorSuccessBorder:Oe[3],colorSuccessBorderHover:Oe[4],colorSuccessHover:Oe[4],colorSuccess:Oe[6],colorSuccessActive:Oe[7],colorSuccessTextHover:Oe[8],colorSuccessText:Oe[9],colorSuccessTextActive:Oe[10],colorErrorBg:He[1],colorErrorBgHover:He[2],colorErrorBgActive:He[3],colorErrorBorder:He[3],colorErrorBorderHover:He[4],colorErrorHover:He[5],colorError:He[6],colorErrorActive:He[7],colorErrorTextHover:He[8],colorErrorText:He[9],colorErrorTextActive:He[10],colorWarningBg:fe[1],colorWarningBgHover:fe[2],colorWarningBorder:fe[3],colorWarningBorderHover:fe[4],colorWarningHover:fe[4],colorWarning:fe[6],colorWarningActive:fe[7],colorWarningTextHover:fe[8],colorWarningText:fe[9],colorWarningTextActive:fe[10],colorInfoBg:bt[1],colorInfoBgHover:bt[2],colorInfoBorder:bt[3],colorInfoBorderHover:bt[4],colorInfoHover:bt[4],colorInfo:bt[6],colorInfoActive:bt[7],colorInfoTextHover:bt[8],colorInfoText:bt[9],colorInfoTextActive:bt[10],colorLinkHover:ct[4],colorLink:ct[6],colorLinkActive:ct[7],colorBgMask:new J.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var Z=J(D(78117));function E(ve){const{motionUnit:te,motionBase:se,borderRadius:ae,lineWidth:Se}=ve;return Object.assign({motionDurationFast:`${(se+te).toFixed(1)}s`,motionDurationMid:`${(se+te*2).toFixed(1)}s`,motionDurationSlow:`${(se+te*3).toFixed(1)}s`,lineWidthBold:Se+1},(0,Z.default)(ae))}},54730:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=Z=>{const{controlHeight:E}=Z;return{controlHeightSM:E*.75,controlHeightXS:E*.5,controlHeightLG:E*1.25}};var J=W.default=D},69853:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(62231));const E=te=>{const se=(0,Z.default)(te),ae=se.map(Oe=>Oe.size),Se=se.map(Oe=>Oe.lineHeight),oe=ae[1],Ge=ae[0],ee=ae[2],me=Se[1],Le=Se[0],be=Se[2];return{fontSizeSM:Ge,fontSize:oe,fontSizeLG:ee,fontSizeXL:ae[3],fontSizeHeading1:ae[6],fontSizeHeading2:ae[5],fontSizeHeading3:ae[4],fontSizeHeading4:ae[3],fontSizeHeading5:ae[2],lineHeight:me,lineHeightLG:be,lineHeightSM:Le,fontHeight:Math.round(me*oe),fontHeightLG:Math.round(be*ee),fontHeightSM:Math.round(Le*Ge),lineHeightHeading1:Se[6],lineHeightHeading2:Se[5],lineHeightHeading3:Se[4],lineHeightHeading4:Se[3],lineHeightHeading5:Se[2]}};var ve=W.default=E},62231:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=J,W.getLineHeight=D;function D(Z){return(Z+8)/Z}function J(Z){const E=new Array(10).fill(null).map((ve,te)=>{const se=te-1,ae=Z*Math.pow(Math.E,se/5),Se=te>1?Math.floor(ae):Math.ceil(ae);return Math.floor(Se/2)*2});return E[1]=Z,E.map(ve=>({size:ve,lineHeight:D(ve)}))}},78117:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=Z=>{let E=Z,ve=Z,te=Z,se=Z;return Z<6&&Z>=5?E=Z+1:Z<16&&Z>=6?E=Z+2:Z>=16&&(E=16),Z<7&&Z>=5?ve=4:Z<8&&Z>=7?ve=5:Z<14&&Z>=8?ve=6:Z<16&&Z>=14?ve=7:Z>=16&&(ve=8),Z<6&&Z>=2?te=1:Z>=6&&(te=2),Z>4&&Z<8?se=4:Z>=8&&(se=6),{borderRadius:Z,borderRadiusXS:te,borderRadiusSM:ve,borderRadiusLG:E,borderRadiusOuter:se}};var J=W.default=D},19216:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(J){const{sizeUnit:Z,sizeStep:E}=J;return{sizeXXL:Z*(E+8),sizeXL:Z*(E+4),sizeLG:Z*(E+2),sizeMD:Z*(E+1),sizeMS:Z*E,size:Z*E,sizeSM:Z*(E-1),sizeXS:Z*(E-2),sizeXXS:Z*(E-3)}}},41401:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Le,W.unitless=W.ignore=W.getComputedToken=void 0;var Z=J(D(67294)),E=D(85982),ve=J(D(87629)),te=D(89329),se=J(D(98411)),ae=J(D(27722)),Se=function(be,Oe){var fe={};for(var He in be)Object.prototype.hasOwnProperty.call(be,He)&&Oe.indexOf(He)<0&&(fe[He]=be[He]);if(be!=null&&typeof Object.getOwnPropertySymbols=="function")for(var bt=0,He=Object.getOwnPropertySymbols(be);bt<He.length;bt++)Oe.indexOf(He[bt])<0&&Object.prototype.propertyIsEnumerable.call(be,He[bt])&&(fe[He[bt]]=be[He[bt]]);return fe};const oe=W.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Ge=W.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},ee={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},me=(be,Oe,fe)=>{const He=fe.getDerivativeToken(be),{override:bt}=Oe,dt=Se(Oe,["override"]);let Nt=Object.assign(Object.assign({},He),{override:bt});return Nt=(0,ae.default)(Nt),dt&&Object.entries(dt).forEach(ct=>{let[lt,Ie]=ct;const{theme:Ae}=Ie,pt=Se(Ie,["theme"]);let ut=pt;Ae&&(ut=me(Object.assign(Object.assign({},Nt),pt),{override:pt},Ae)),Nt[lt]=ut}),Nt};W.getComputedToken=me;function Le(){const{token:be,hashed:Oe,theme:fe,override:He,cssVar:bt}=Z.default.useContext(te.DesignTokenContext),dt=`${ve.default}-${Oe||""}`,Nt=fe||te.defaultTheme,[ct,lt,Ie]=(0,E.useCacheToken)(Nt,[se.default,be],{salt:dt,override:He,getComputedToken:me,formatToken:ae.default,cssVar:bt&&{prefix:bt.prefix,key:bt.key,unitless:oe,ignore:Ge,preserve:ee}});return[Nt,Ie,Oe?lt:"",ct,bt]}},27722:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=se;var Z=D(131),E=J(D(98411)),ve=J(D(83609)),te=function(ae,Se){var oe={};for(var Ge in ae)Object.prototype.hasOwnProperty.call(ae,Ge)&&Se.indexOf(Ge)<0&&(oe[Ge]=ae[Ge]);if(ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,Ge=Object.getOwnPropertySymbols(ae);ee<Ge.length;ee++)Se.indexOf(Ge[ee])<0&&Object.prototype.propertyIsEnumerable.call(ae,Ge[ee])&&(oe[Ge[ee]]=ae[Ge[ee]]);return oe};function se(ae){const{override:Se}=ae,oe=te(ae,["override"]),Ge=Object.assign({},Se);Object.keys(E.default).forEach(dt=>{delete Ge[dt]});const ee=Object.assign(Object.assign({},oe),Ge),me=480,Le=576,be=768,Oe=992,fe=1200,He=1600;if(ee.motion===!1){const dt="0s";ee.motionDurationFast=dt,ee.motionDurationMid=dt,ee.motionDurationSlow=dt}return Object.assign(Object.assign(Object.assign({},ee),{colorFillContent:ee.colorFillSecondary,colorFillContentHover:ee.colorFill,colorFillAlter:ee.colorFillQuaternary,colorBgContainerDisabled:ee.colorFillTertiary,colorBorderBg:ee.colorBgContainer,colorSplit:(0,ve.default)(ee.colorBorderSecondary,ee.colorBgContainer),colorTextPlaceholder:ee.colorTextQuaternary,colorTextDisabled:ee.colorTextQuaternary,colorTextHeading:ee.colorText,colorTextLabel:ee.colorTextSecondary,colorTextDescription:ee.colorTextTertiary,colorTextLightSolid:ee.colorWhite,colorHighlight:ee.colorError,colorBgTextHover:ee.colorFillSecondary,colorBgTextActive:ee.colorFill,colorIcon:ee.colorTextTertiary,colorIconHover:ee.colorText,colorErrorOutline:(0,ve.default)(ee.colorErrorBg,ee.colorBgContainer),colorWarningOutline:(0,ve.default)(ee.colorWarningBg,ee.colorBgContainer),fontSizeIcon:ee.fontSizeSM,lineWidthFocus:ee.lineWidth*4,lineWidth:ee.lineWidth,controlOutlineWidth:ee.lineWidth*2,controlInteractiveSize:ee.controlHeight/2,controlItemBgHover:ee.colorFillTertiary,controlItemBgActive:ee.colorPrimaryBg,controlItemBgActiveHover:ee.colorPrimaryBgHover,controlItemBgActiveDisabled:ee.colorFill,controlTmpOutline:ee.colorFillQuaternary,controlOutline:(0,ve.default)(ee.colorPrimaryBg,ee.colorBgContainer),lineType:ee.lineType,borderRadius:ee.borderRadius,borderRadiusXS:ee.borderRadiusXS,borderRadiusSM:ee.borderRadiusSM,borderRadiusLG:ee.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:ee.sizeXXS,paddingXS:ee.sizeXS,paddingSM:ee.sizeSM,padding:ee.size,paddingMD:ee.sizeMD,paddingLG:ee.sizeLG,paddingXL:ee.sizeXL,paddingContentHorizontalLG:ee.sizeLG,paddingContentVerticalLG:ee.sizeMS,paddingContentHorizontal:ee.sizeMS,paddingContentVertical:ee.sizeSM,paddingContentHorizontalSM:ee.size,paddingContentVerticalSM:ee.sizeXS,marginXXS:ee.sizeXXS,marginXS:ee.sizeXS,marginSM:ee.sizeSM,margin:ee.size,marginMD:ee.sizeMD,marginLG:ee.sizeLG,marginXL:ee.sizeXL,marginXXL:ee.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:me,screenXSMin:me,screenXSMax:Le-1,screenSM:Le,screenSMMin:Le,screenSMMax:be-1,screenMD:be,screenMDMin:be,screenMDMax:Oe-1,screenLG:Oe,screenLGMin:Oe,screenLGMax:fe-1,screenXL:fe,screenXLMin:fe,screenXLMax:He-1,screenXXL:He,screenXXLMin:He,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Z.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Z.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Z.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Ge)}},3737:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=fe,W.genSubStyleComponent=W.genStyleHooks=void 0;var E=Z(D(67294)),ve=D(85982),te=D(56790),se=J(D(63101)),ae=D(7177),Se=D(98078),oe=Z(D(41401)),Ge=J(D(1657)),ee=Z(D(99636)),me=J(D(54894));const Le=(Nt,ct,lt)=>{var Ie;return typeof lt=="function"?lt((0,ee.merge)(ct,(Ie=ct[Nt])!==null&&Ie!==void 0?Ie:{})):lt!=null?lt:{}},be=(Nt,ct,lt,Ie)=>{const Ae=Object.assign({},ct[Nt]);if(Ie!=null&&Ie.deprecatedTokens){const{deprecatedTokens:ut}=Ie;ut.forEach(Et=>{let[cn,ze]=Et;var St;(Ae!=null&&Ae[cn]||Ae!=null&&Ae[ze])&&((St=Ae[ze])!==null&&St!==void 0||(Ae[ze]=Ae==null?void 0:Ae[cn]))})}const pt=Object.assign(Object.assign({},lt),Ae);return Object.keys(pt).forEach(ut=>{pt[ut]===ct[ut]&&delete pt[ut]}),pt},Oe=(Nt,ct)=>`${[ct,Nt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function fe(Nt,ct,lt){let Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Ae=Array.isArray(Nt)?Nt:[Nt,Nt],[pt]=Ae,ut=Ae.join("-");return function(Et){let cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Et;const[ze,St,we,nt,Xe]=(0,oe.default)(),{getPrefixCls:Ze,iconPrefixCls:Rt,csp:yt}=(0,E.useContext)(ae.ConfigContext),Me=Ze(),Gt=Xe?"css":"js",ln=(0,se.default)(()=>{const Kt=new Set;return Xe&&Object.keys(Ie.unitless||{}).forEach(yn=>{Kt.add((0,ve.token2CSSVar)(yn,Xe.prefix)),Kt.add((0,ve.token2CSSVar)(yn,Oe(pt,Xe.prefix)))}),(0,ve.genCalc)(Gt,Kt)},[Gt,pt,Xe==null?void 0:Xe.prefix]),{max:Ln,min:kn}=(0,Ge.default)(Gt),lr={theme:ze,token:nt,hashId:we,nonce:()=>yt==null?void 0:yt.nonce,clientOnly:Ie.clientOnly,layer:{name:"antd"},order:Ie.order||-999};return(0,ve.useStyleRegister)(Object.assign(Object.assign({},lr),{clientOnly:!1,path:["Shared",Me]}),()=>[{"&":(0,Se.genLinkStyle)(nt)}]),(0,me.default)(Rt,yt),[(0,ve.useStyleRegister)(Object.assign(Object.assign({},lr),{path:[ut,Et,Rt]}),()=>{if(Ie.injectStyle===!1)return[];const{token:Kt,flush:yn}=(0,ee.default)(nt),Kn=Le(pt,St,lt),rn=`.${Et}`,Wt=be(pt,St,Kn,{deprecatedTokens:Ie.deprecatedTokens});Xe&&Object.keys(Kn).forEach(Qe=>{Kn[Qe]=`var(${(0,ve.token2CSSVar)(Qe,Oe(pt,Xe.prefix))})`});const Pt=(0,ee.merge)(Kt,{componentCls:rn,prefixCls:Et,iconCls:`.${Rt}`,antCls:`.${Me}`,calc:ln,max:Ln,min:kn},Xe?Kn:Wt),Pe=ct(Pt,{hashId:we,prefixCls:Et,rootPrefixCls:Me,iconPrefixCls:Rt});return yn(pt,Wt),[Ie.resetStyle===!1?null:(0,Se.genCommonStyle)(Pt,Et,cn,Ie.resetFont),Pe]}),we]}}const He=(Nt,ct,lt,Ie)=>{const Ae=fe(Nt,ct,lt,Object.assign({resetStyle:!1,order:-998},Ie));return ut=>{let{prefixCls:Et,rootCls:cn=Et}=ut;return Ae(Et,cn),null}};W.genSubStyleComponent=He;const bt=(Nt,ct,lt)=>{const{unitless:Ie,injectStyle:Ae=!0,prefixToken:pt}=lt,ut=cn=>{let{rootCls:ze,cssVar:St}=cn;const[,we]=(0,oe.default)();return(0,ve.useCSSVarRegister)({path:[Nt],prefix:St.prefix,key:St==null?void 0:St.key,unitless:Ie,ignore:oe.ignore,token:we,scope:ze},()=>{const nt=Le(Nt,we,ct),Xe=be(Nt,we,nt,{deprecatedTokens:lt==null?void 0:lt.deprecatedTokens});return Object.keys(nt).forEach(Ze=>{Xe[pt(Ze)]=Xe[Ze],delete Xe[Ze]}),Xe}),null};return cn=>{const[,,,,ze]=(0,oe.default)();return[St=>Ae&&ze?E.default.createElement(E.default.Fragment,null,E.default.createElement(ut,{rootCls:cn,cssVar:ze,component:Nt}),St):St,ze==null?void 0:ze.key]}},dt=(Nt,ct,lt,Ie)=>{const Ae=Array.isArray(Nt)?Nt[0]:Nt;function pt(we){return`${Ae}${we.slice(0,1).toUpperCase()}${we.slice(1)}`}const ut=(Ie==null?void 0:Ie.unitless)||{},Et=Object.assign(Object.assign({},oe.unitless),{[pt("zIndexPopup")]:!0});Object.keys(ut).forEach(we=>{Et[pt(we)]=ut[we]});const cn=Object.assign(Object.assign({},Ie),{unitless:Et,prefixToken:pt}),ze=fe(Nt,ct,lt,cn),St=bt(Ae,lt,cn);return function(we){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:we;const[,Xe]=ze(we,nt),[Ze,Rt]=St(nt);return[Ze,Xe,Rt]}};W.genStyleHooks=dt},36219:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=Z;var J=D(36496);function Z(E,ve){return J.PresetColors.reduce((te,se)=>{const ae=E[`${se}1`],Se=E[`${se}3`],oe=E[`${se}6`],Ge=E[`${se}7`];return Object.assign(Object.assign({},te),ve(se,{lightColor:ae,lightBorderColor:Se,darkColor:oe,textColor:Ge}))},{})}},83609:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(131);function Z(te){return te>=0&&te<=255}function E(te,se){const{r:ae,g:Se,b:oe,a:Ge}=new J.TinyColor(te).toRgb();if(Ge<1)return te;const{r:ee,g:me,b:Le}=new J.TinyColor(se).toRgb();for(let be=.01;be<=1;be+=.01){const Oe=Math.round((ae-ee*(1-be))/be),fe=Math.round((Se-me*(1-be))/be),He=Math.round((oe-Le*(1-be))/be);if(Z(Oe)&&Z(fe)&&Z(He))return new J.TinyColor({r:Oe,g:fe,b:He,a:Math.round(be*100)/100}).toRgbString()}return new J.TinyColor({r:ae,g:Se,b:oe,a:1}).toRgbString()}var ve=W.default=E},1657:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=Z;var J=D(85982);function Z(E){return E==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var ve=arguments.length,te=new Array(ve),se=0;se<ve;se++)te[se]=arguments[se];return`max(${te.map(ae=>(0,J.unit)(ae)).join(",")})`},min:function(){for(var ve=arguments.length,te=new Array(ve),se=0;se<ve;se++)te[se]=arguments[se];return`min(${te.map(ae=>(0,J.unit)(ae)).join(",")})`}}}},99636:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=W._statistic_build_=void 0,W.merge=Z,W.statistic=void 0;const D=typeof CSSINJS_STATISTIC!="undefined";let J=!0;function Z(){for(var Se=arguments.length,oe=new Array(Se),Ge=0;Ge<Se;Ge++)oe[Ge]=arguments[Ge];if(!D)return Object.assign.apply(Object,[{}].concat(oe));J=!1;const ee={};return oe.forEach(me=>{Object.keys(me).forEach(be=>{Object.defineProperty(ee,be,{configurable:!0,enumerable:!0,get:()=>me[be]})})}),J=!0,ee}const E=W.statistic={},ve=W._statistic_build_={};function te(){}const se=Se=>{let oe,Ge=Se,ee=te;return D&&typeof Proxy!="undefined"&&(oe=new Set,Ge=new Proxy(Se,{get(me,Le){return J&&oe.add(Le),me[Le]}}),ee=(me,Le)=>{var be;E[me]={global:Array.from(oe),component:Object.assign(Object.assign({},(be=E[me])===null||be===void 0?void 0:be.component),Le)}}),{token:Ge,keys:oe,flush:ee}};var ae=W.default=se},54894:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=D(85982),E=D(98078),ve=J(D(41401));const te=(ae,Se)=>{const[oe,Ge]=(0,ve.default)();return(0,Z.useStyleRegister)({theme:oe,token:Ge,hashId:"",path:["ant-design-icons",ae],nonce:()=>Se==null?void 0:Se.nonce,layer:{name:"antd"}},()=>[{[`.${ae}`]:Object.assign(Object.assign({},(0,E.resetIcon)()),{[`.${ae} .${ae}-icon`]:{display:"block"}})}])};var se=W.default=te},92125:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(93967)),te=D(92419),se=D(31929),ae=J(D(15086)),Se=D(48125);const oe=ee=>{const{prefixCls:me,className:Le,placement:be="top",title:Oe,color:fe,overlayInnerStyle:He}=ee,{getPrefixCls:bt}=E.useContext(se.ConfigContext),dt=bt("tooltip",me),[Nt,ct,lt]=(0,ae.default)(dt),Ie=(0,Se.parseColor)(dt,fe),Ae=Ie.arrowStyle,pt=Object.assign(Object.assign({},He),Ie.overlayStyle),ut=(0,ve.default)(ct,lt,dt,`${dt}-pure`,`${dt}-placement-${be}`,Le,Ie.className);return Nt(E.createElement("div",{className:ut,style:Ae},E.createElement("div",{className:`${dt}-arrow`}),E.createElement(te.Popup,Object.assign({},ee,{className:ct,prefixCls:dt,overlayInnerStyle:pt}),Oe)))};var Ge=W.default=oe},94055:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(93967)),te=J(D(92419)),se=J(D(60869)),ae=J(D(85549)),Se=D(56333),oe=D(53683),Ge=J(D(74132)),ee=D(47419),me=D(13594),Le=J(D(96877)),be=D(31929),Oe=D(3184),fe=J(D(92125)),He=J(D(15086)),bt=D(48125),dt=function(Ie,Ae){var pt={};for(var ut in Ie)Object.prototype.hasOwnProperty.call(Ie,ut)&&Ae.indexOf(ut)<0&&(pt[ut]=Ie[ut]);if(Ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Et=0,ut=Object.getOwnPropertySymbols(Ie);Et<ut.length;Et++)Ae.indexOf(ut[Et])<0&&Object.prototype.propertyIsEnumerable.call(Ie,ut[Et])&&(pt[ut[Et]]=Ie[ut[Et]]);return pt};const ct=E.forwardRef((Ie,Ae)=>{var pt,ut;const{prefixCls:Et,openClassName:cn,getTooltipContainer:ze,overlayClassName:St,color:we,overlayInnerStyle:nt,children:Xe,afterOpenChange:Ze,afterVisibleChange:Rt,destroyTooltipOnHide:yt,arrow:Me=!0,title:Gt,overlay:ln,builtinPlacements:Ln,arrowPointAtCenter:kn=!1,autoAdjustOverflow:lr=!0}=Ie,zt=!!Me,[,Kt]=(0,Oe.useToken)(),{getPopupContainer:yn,getPrefixCls:Kn,direction:rn}=E.useContext(be.ConfigContext),Wt=(0,me.devUseWarning)("Tooltip"),Pt=E.useRef(null),Pe=()=>{var et;(et=Pt.current)===null||et===void 0||et.forceAlign()};E.useImperativeHandle(Ae,()=>{var et;return{forceAlign:Pe,forcePopupAlign:()=>{Wt.deprecated(!1,"forcePopupAlign","forceAlign"),Pe()},nativeElement:(et=Pt.current)===null||et===void 0?void 0:et.nativeElement}});const[Qe,Bt]=(0,se.default)(!1,{value:(pt=Ie.open)!==null&&pt!==void 0?pt:Ie.visible,defaultValue:(ut=Ie.defaultOpen)!==null&&ut!==void 0?ut:Ie.defaultVisible}),z=!Gt&&!ln&&Gt!==0,ue=et=>{var Tt,Yt;Bt(z?!1:et),z||((Tt=Ie.onOpenChange)===null||Tt===void 0||Tt.call(Ie,et),(Yt=Ie.onVisibleChange)===null||Yt===void 0||Yt.call(Ie,et))},ot=E.useMemo(()=>{var et,Tt;let Yt=kn;return typeof Me=="object"&&(Yt=(Tt=(et=Me.pointAtCenter)!==null&&et!==void 0?et:Me.arrowPointAtCenter)!==null&&Tt!==void 0?Tt:kn),Ln||(0,Ge.default)({arrowPointAtCenter:Yt,autoAdjustOverflow:lr,arrowWidth:zt?Kt.sizePopupArrow:0,borderRadius:Kt.borderRadius,offset:Kt.marginXXS,visibleFirst:!0})},[kn,Me,Ln,Kt]),le=E.useMemo(()=>Gt===0?Gt:ln||Gt||"",[ln,Gt]),$t=E.createElement(ae.default,{space:!0},typeof le=="function"?le():le),{getPopupContainer:an,placement:hn="top",mouseEnterDelay:Dn=.1,mouseLeaveDelay:Xn=.1,overlayStyle:Gn,rootClassName:dn}=Ie,mt=dt(Ie,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Ct=Kn("tooltip",Et),Cn=Kn(),Pn=Ie["data-popover-inject"];let Zn=Qe;!("open"in Ie)&&!("visible"in Ie)&&z&&(Zn=!1);const ht=E.isValidElement(Xe)&&!(0,ee.isFragment)(Xe)?Xe:E.createElement("span",null,Xe),ye=ht.props,Be=!ye.className||typeof ye.className=="string"?(0,ve.default)(ye.className,cn||`${Ct}-open`):ye.className,[rt,Mt,Ot]=(0,He.default)(Ct,!Pn),En=(0,bt.parseColor)(Ct,we),$n=En.arrowStyle,yr=Object.assign(Object.assign({},nt),En.overlayStyle),qn=(0,ve.default)(St,{[`${Ct}-rtl`]:rn==="rtl"},En.className,dn,Mt,Ot),[Ce,xe]=(0,Se.useZIndex)("Tooltip",mt.zIndex),ke=E.createElement(te.default,Object.assign({},mt,{zIndex:Ce,showArrow:zt,placement:hn,mouseEnterDelay:Dn,mouseLeaveDelay:Xn,prefixCls:Ct,overlayClassName:qn,overlayStyle:Object.assign(Object.assign({},$n),Gn),getTooltipContainer:an||ze||yn,ref:Pt,builtinPlacements:ot,overlay:$t,visible:Zn,onVisibleChange:ue,afterVisibleChange:Ze!=null?Ze:Rt,overlayInnerStyle:yr,arrowContent:E.createElement("span",{className:`${Ct}-arrow-content`}),motion:{motionName:(0,oe.getTransitionName)(Cn,"zoom-big-fast",Ie.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!yt}),Zn?(0,ee.cloneElement)(ht,{className:Be}):ht);return rt(E.createElement(Le.default.Provider,{value:xe},ke))});ct._InternalPanelDoNotUseOrYouWillBeFired=fe.default;var lt=W.default=ct},15086:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var Z=D(85982),E=D(98078),ve=D(42836),te=J(D(9064)),se=D(51337),ae=D(3184);const Se=ee=>{const{componentCls:me,tooltipMaxWidth:Le,tooltipColor:be,tooltipBg:Oe,tooltipBorderRadius:fe,zIndexPopup:He,controlHeight:bt,boxShadowSecondary:dt,paddingSM:Nt,paddingXS:ct}=ee;return[{[me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,E.resetComponent)(ee)),{position:"absolute",zIndex:He,display:"block",width:"max-content",maxWidth:Le,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":Oe,[`${me}-inner`]:{minWidth:"1em",minHeight:bt,padding:`${(0,Z.unit)(ee.calc(Nt).div(2).equal())} ${(0,Z.unit)(ct)}`,color:be,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:Oe,borderRadius:fe,boxShadow:dt,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${me}-inner`]:{borderRadius:ee.min(fe,te.MAX_VERTICAL_CONTENT_RADIUS)}},[`${me}-content`]:{position:"relative"}}),(0,ae.genPresetColor)(ee,(lt,Ie)=>{let{darkColor:Ae}=Ie;return{[`&${me}-${lt}`]:{[`${me}-inner`]:{backgroundColor:Ae},[`${me}-arrow`]:{"--antd-arrow-background-color":Ae}}}})),{"&-rtl":{direction:"rtl"}})},(0,te.default)(ee,"var(--antd-arrow-background-color)"),{[`${me}-pure`]:{position:"relative",maxWidth:"none",margin:ee.sizePopupArrow}}]},oe=ee=>Object.assign(Object.assign({zIndexPopup:ee.zIndexPopupBase+70},(0,te.getArrowOffsetToken)({contentRadius:ee.borderRadius,limitVerticalRadius:!0})),(0,se.getArrowToken)((0,ae.mergeToken)(ee,{borderRadiusOuter:Math.min(ee.borderRadiusOuter,4)})));W.prepareComponentToken=oe;var Ge=W.default=function(me){let Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,ae.genStyleHooks)("Tooltip",Oe=>{const{borderRadius:fe,colorTextLightSolid:He,colorBgSpotlight:bt}=Oe,dt=(0,ae.mergeToken)(Oe,{tooltipMaxWidth:250,tooltipColor:He,tooltipBorderRadius:fe,tooltipBg:bt});return[Se(dt),(0,ve.initZoomMotion)(Oe,"zoom-big-fast")]},oe,{resetStyle:!1,injectStyle:Le})(me)}},48125:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.parseColor=ve;var Z=J(D(93967)),E=D(45471);function ve(te,se){const ae=(0,E.isPresetColor)(se),Se=(0,Z.default)({[`${te}-${se}`]:se&&ae}),oe={},Ge={};return se&&!ae&&(oe.background=se,Ge["--antd-arrow-background-color"]=se),{className:Se,overlayStyle:oe,arrowStyle:Ge}}},6847:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(83874)),te=J(D(90091)),se=J(D(4121)),ae=J(D(93967)),Se=J(D(60938)),oe=J(D(94055)),Ge=D(81410);const ee=Le=>{const{prefixCls:be,copied:Oe,locale:fe,iconOnly:He,tooltips:bt,icon:dt,loading:Nt,tabIndex:ct,onCopy:lt}=Le,Ie=(0,Ge.toList)(bt),Ae=(0,Ge.toList)(dt),{copied:pt,copy:ut}=fe!=null?fe:{},Et=Oe?(0,Ge.getNode)(Ie[1],pt):(0,Ge.getNode)(Ie[0],ut),ze=typeof Et=="string"?Et:Oe?pt:ut;return E.createElement(oe.default,{key:"copy",title:Et},E.createElement(Se.default,{className:(0,ae.default)(`${be}-copy`,{[`${be}-copy-success`]:Oe,[`${be}-copy-icon-only`]:He}),onClick:lt,"aria-label":ze,tabIndex:ct},Oe?(0,Ge.getNode)(Ae[1],E.createElement(ve.default,null),!0):(0,Ge.getNode)(Ae[0],Nt?E.createElement(se.default,null):E.createElement(te.default,null),!0)))};var me=W.default=ee},12385:function(Ht,W,D){"use strict";"use client";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=He;var E=Z(D(861)),ve=J(D(67294)),te=Z(D(45598)),se=Z(D(82546));const ae=ve.forwardRef((bt,dt)=>{let{style:Nt,children:ct}=bt;const lt=ve.useRef(null);return ve.useImperativeHandle(dt,()=>({isExceed:()=>{const Ie=lt.current;return Ie.scrollHeight>Ie.clientHeight},getHeight:()=>lt.current.clientHeight})),ve.createElement("span",{"aria-hidden":!0,ref:lt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},Nt)},ct)});function Se(bt){const dt=typeof bt;return dt==="string"||dt==="number"}function oe(bt){let dt=0;return bt.forEach(Nt=>{Se(Nt)?dt+=String(Nt).length:dt+=1}),dt}function Ge(bt,dt){let Nt=0;const ct=[];for(let lt=0;lt<bt.length;lt+=1){if(Nt===dt)return ct;const Ie=bt[lt],pt=Se(Ie)?String(Ie).length:1,ut=Nt+pt;if(ut>dt){const Et=dt-Nt;return ct.push(String(Ie).slice(0,Et)),ct}ct.push(Ie),Nt=ut}return bt}const ee=0,me=1,Le=2,be=3,Oe=4,fe={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function He(bt){const{enableMeasure:dt,width:Nt,text:ct,children:lt,rows:Ie,expanded:Ae,miscDeps:pt,onEllipsis:ut}=bt,Et=ve.useMemo(()=>(0,te.default)(ct),[ct]),cn=ve.useMemo(()=>oe(Et),[ct]),ze=ve.useMemo(()=>lt(Et,!1),[ct]),[St,we]=ve.useState(null),nt=ve.useRef(null),Xe=ve.useRef(null),Ze=ve.useRef(null),Rt=ve.useRef(null),yt=ve.useRef(null),[Me,Gt]=ve.useState(!1),[ln,Ln]=ve.useState(ee),[kn,lr]=ve.useState(0),[zt,Kt]=ve.useState(null);(0,se.default)(()=>{Ln(dt&&Nt&&cn?me:ee)},[Nt,ct,Ie,dt,Et]),(0,se.default)(()=>{var Wt,Pt,Pe,Qe;if(ln===me){Ln(Le);const Bt=Xe.current&&getComputedStyle(Xe.current).whiteSpace;Kt(Bt)}else if(ln===Le){const Bt=!!(!((Wt=Ze.current)===null||Wt===void 0)&&Wt.isExceed());Ln(Bt?be:Oe),we(Bt?[0,cn]:null),Gt(Bt);const z=((Pt=Ze.current)===null||Pt===void 0?void 0:Pt.getHeight())||0,ue=Ie===1?0:((Pe=Rt.current)===null||Pe===void 0?void 0:Pe.getHeight())||0,ot=((Qe=yt.current)===null||Qe===void 0?void 0:Qe.getHeight())||0,le=ue+ot,$t=Math.max(z,le);lr($t+1),ut(Bt)}},[ln]);const yn=St?Math.ceil((St[0]+St[1])/2):0;(0,se.default)(()=>{var Wt;const[Pt,Pe]=St||[0,0];if(Pt!==Pe){const Bt=(((Wt=nt.current)===null||Wt===void 0?void 0:Wt.getHeight())||0)>kn;let z=yn;Pe-Pt===1&&(z=Bt?Pt:Pe),we(Bt?[Pt,z]:[z,Pe])}},[St,yn]);const Kn=ve.useMemo(()=>{if(ln!==be||!St||St[0]!==St[1]){const Wt=lt(Et,!1);return ln!==Oe&&ln!==ee?ve.createElement("span",{style:Object.assign(Object.assign({},fe),{WebkitLineClamp:Ie})},Wt):Wt}return lt(Ae?Et:Ge(Et,St[0]),Me)},[Ae,ln,St,Et].concat((0,E.default)(pt))),rn={width:Nt,margin:0,padding:0,whiteSpace:zt==="nowrap"?"normal":"inherit"};return ve.createElement(ve.Fragment,null,Kn,ln===Le&&ve.createElement(ve.Fragment,null,ve.createElement(ae,{style:Object.assign(Object.assign(Object.assign({},rn),fe),{WebkitLineClamp:Ie}),ref:Ze},ze),ve.createElement(ae,{style:Object.assign(Object.assign(Object.assign({},rn),fe),{WebkitLineClamp:Ie-1}),ref:Rt},ze),ve.createElement(ae,{style:Object.assign(Object.assign(Object.assign({},rn),fe),{WebkitLineClamp:1}),ref:yt},lt([],!0))),ln===be&&St&&St[0]!==St[1]&&ve.createElement(ae,{style:Object.assign(Object.assign({},rn),{top:400}),ref:nt},lt(Ge(Et,yn),!0)),ln===me&&ve.createElement("span",{style:{whiteSpace:"inherit"},ref:Xe}))}},69274:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(94055));const te=ae=>{let{enableEllipsis:Se,isEllipsis:oe,children:Ge,tooltipProps:ee}=ae;return!(ee!=null&&ee.title)||!Se?Ge:E.createElement(ve.default,Object.assign({open:oe?void 0:!1},ee),Ge)};var se=W.default=te},28460:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(10875)),te=J(D(93967)),se=J(D(9220)),ae=J(D(45598)),Se=J(D(82546)),oe=J(D(60869)),Ge=J(D(18475)),ee=D(75531),me=D(38882),Le=J(D(60938)),be=D(31929),Oe=J(D(76647)),fe=J(D(94055)),He=J(D(69425)),bt=J(D(63985)),dt=J(D(92759)),Nt=J(D(28991)),ct=J(D(67312)),lt=J(D(89652)),Ie=J(D(6847)),Ae=J(D(12385)),pt=J(D(69274)),ut=function(we,nt){var Xe={};for(var Ze in we)Object.prototype.hasOwnProperty.call(we,Ze)&&nt.indexOf(Ze)<0&&(Xe[Ze]=we[Ze]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Rt=0,Ze=Object.getOwnPropertySymbols(we);Rt<Ze.length;Rt++)nt.indexOf(Ze[Rt])<0&&Object.prototype.propertyIsEnumerable.call(we,Ze[Rt])&&(Xe[Ze[Rt]]=we[Ze[Rt]]);return Xe};function Et(we,nt){let{mark:Xe,code:Ze,underline:Rt,delete:yt,strong:Me,keyboard:Gt,italic:ln}=we,Ln=nt;function kn(lr,zt){zt&&(Ln=E.createElement(lr,{},Ln))}return kn("strong",Me),kn("u",Rt),kn("del",yt),kn("code",Ze),kn("mark",Xe),kn("kbd",Gt),kn("i",ln),Ln}const cn="...",ze=E.forwardRef((we,nt)=>{var Xe,Ze,Rt;const{prefixCls:yt,className:Me,style:Gt,type:ln,disabled:Ln,children:kn,ellipsis:lr,editable:zt,copyable:Kt,component:yn,title:Kn}=we,rn=ut(we,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:Wt,direction:Pt}=E.useContext(be.ConfigContext),[Pe]=(0,Oe.default)("Text"),Qe=E.useRef(null),Bt=E.useRef(null),z=Wt("typography",yt),ue=(0,Ge.default)(rn,["mark","code","delete","underline","strong","keyboard","italic"]),[ot,le]=(0,dt.default)(zt),[$t,an]=(0,oe.default)(!1,{value:le.editing}),{triggerType:hn=["icon"]}=le,Dn=Ne=>{var Je;Ne&&((Je=le.onStart)===null||Je===void 0||Je.call(le)),an(Ne)},Xn=(0,Nt.default)($t);(0,ct.default)(()=>{var Ne;!$t&&Xn&&((Ne=Bt.current)===null||Ne===void 0||Ne.focus())},[$t]);const Gn=Ne=>{Ne==null||Ne.preventDefault(),Dn(!0)},dn=Ne=>{var Je;(Je=le.onChange)===null||Je===void 0||Je.call(le,Ne),Dn(!1)},mt=()=>{var Ne;(Ne=le.onCancel)===null||Ne===void 0||Ne.call(le),Dn(!1)},[Ct,Cn]=(0,dt.default)(Kt),{copied:Pn,copyLoading:Zn,onClick:ht}=(0,bt.default)({copyConfig:Cn,children:kn}),[ye,Be]=E.useState(!1),[rt,Mt]=E.useState(!1),[Ot,En]=E.useState(!1),[$n,yr]=E.useState(!1),[qn,Ce]=E.useState(!0),[xe,ke]=(0,dt.default)(lr,{expandable:!1,symbol:Ne=>Ne?Pe==null?void 0:Pe.collapse:Pe==null?void 0:Pe.expand}),[et,Tt]=(0,oe.default)(ke.defaultExpanded||!1,{value:ke.expanded}),Yt=xe&&(!et||ke.expandable==="collapsible"),{rows:pn=1}=ke,_t=E.useMemo(()=>Yt&&(ke.suffix!==void 0||ke.onEllipsis||ke.expandable||ot||Ct),[Yt,ke,ot,Ct]);(0,Se.default)(()=>{xe&&!_t&&(Be((0,me.isStyleSupport)("webkitLineClamp")),Mt((0,me.isStyleSupport)("textOverflow")))},[_t,xe]);const[qt,Qn]=E.useState(Yt),_r=E.useMemo(()=>_t?!1:pn===1?rt:ye,[_t,rt,ye]);(0,Se.default)(()=>{Qn(_r&&Yt)},[_r,Yt]);const Vr=Yt&&(qt?$n:Ot),pr=Yt&&pn===1&&qt,Ur=Yt&&pn>1&&qt,mi=(Ne,Je)=>{var kt;Tt(Je.expanded),(kt=ke.onExpand)===null||kt===void 0||kt.call(ke,Ne,Je)},[wi,Sr]=E.useState(0),Ti=Ne=>{let{offsetWidth:Je}=Ne;Sr(Je)},hi=Ne=>{var Je;En(Ne),Ot!==Ne&&((Je=ke.onEllipsis)===null||Je===void 0||Je.call(ke,Ne))};E.useEffect(()=>{const Ne=Qe.current;if(xe&&qt&&Ne){const Je=Ur?Ne.offsetHeight<Ne.scrollHeight:Ne.offsetWidth<Ne.scrollWidth;$n!==Je&&yr(Je)}},[xe,qt,kn,Ur,qn,wi]),E.useEffect(()=>{const Ne=Qe.current;if(typeof IntersectionObserver=="undefined"||!Ne||!qt||!Yt)return;const Je=new IntersectionObserver(()=>{Ce(!!Ne.offsetParent)});return Je.observe(Ne),()=>{Je.disconnect()}},[qt,Yt]);let si={};ke.tooltip===!0?si={title:(Xe=le.text)!==null&&Xe!==void 0?Xe:kn}:E.isValidElement(ke.tooltip)?si={title:ke.tooltip}:typeof ke.tooltip=="object"?si=Object.assign({title:(Ze=le.text)!==null&&Ze!==void 0?Ze:kn},ke.tooltip):si={title:ke.tooltip};const Mo=E.useMemo(()=>{const Ne=Je=>["string","number"].includes(typeof Je);if(!(!xe||qt)){if(Ne(le.text))return le.text;if(Ne(kn))return kn;if(Ne(Kn))return Kn;if(Ne(si.title))return si.title}},[xe,qt,Kn,si.title,Vr]);if($t)return E.createElement(He.default,{value:(Rt=le.text)!==null&&Rt!==void 0?Rt:typeof kn=="string"?kn:"",onSave:dn,onCancel:mt,onEnd:le.onEnd,prefixCls:z,className:Me,style:Gt,direction:Pt,component:yn,maxLength:le.maxLength,autoSize:le.autoSize,enterIcon:le.enterIcon});const bi=()=>{const{expandable:Ne,symbol:Je}=ke;return!Ne||et&&Ne!=="collapsible"?null:E.createElement(Le.default,{key:"expand",className:`${z}-${et?"collapse":"expand"}`,onClick:kt=>mi(kt,{expanded:!et}),"aria-label":et?Pe.collapse:Pe==null?void 0:Pe.expand},typeof Je=="function"?Je(et):Je)},na=()=>{if(!ot)return;const{icon:Ne,tooltip:Je,tabIndex:kt}=le,sn=(0,ae.default)(Je)[0]||(Pe==null?void 0:Pe.edit),Nn=typeof sn=="string"?sn:"";return hn.includes("icon")?E.createElement(fe.default,{key:"edit",title:Je===!1?"":sn},E.createElement(Le.default,{ref:Bt,className:`${z}-edit`,onClick:Gn,"aria-label":Nn,tabIndex:kt},Ne||E.createElement(ve.default,{role:"button"}))):null},_a=()=>Ct?E.createElement(Ie.default,Object.assign({key:"copy"},Cn,{prefixCls:z,copied:Pn,locale:Pe,onCopy:ht,loading:Zn,iconOnly:kn==null})):null,Ro=Ne=>[Ne&&bi(),na(),_a()],qo=Ne=>[Ne&&!et&&E.createElement("span",{"aria-hidden":!0,key:"ellipsis"},cn),ke.suffix,Ro(Ne)];return E.createElement(se.default,{onResize:Ti,disabled:!Yt},Ne=>E.createElement(pt.default,{tooltipProps:si,enableEllipsis:Yt,isEllipsis:Vr},E.createElement(lt.default,Object.assign({className:(0,te.default)({[`${z}-${ln}`]:ln,[`${z}-disabled`]:Ln,[`${z}-ellipsis`]:xe,[`${z}-ellipsis-single-line`]:pr,[`${z}-ellipsis-multiple-line`]:Ur},Me),prefixCls:yt,style:Object.assign(Object.assign({},Gt),{WebkitLineClamp:Ur?pn:void 0}),component:yn,ref:(0,ee.composeRef)(Ne,Qe,nt),direction:Pt,onClick:hn.includes("text")?Gn:void 0,"aria-label":Mo==null?void 0:Mo.toString(),title:Kn},ue),E.createElement(Ae.default,{enableMeasure:Yt&&!qt,text:kn,rows:pn,width:wi,onEllipsis:hi,expanded:et,miscDeps:[Pn,et,Zn,ot,Ct]},(Je,kt)=>Et(we,E.createElement(E.Fragment,null,Je.length>0&&kt&&!et&&Mo?E.createElement("span",{key:"show-content","aria-hidden":!0},Je):Je,qo(kt)))))))});var St=W.default=ze},81410:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getNode=J,W.toList=D;function D(Z){return Z===!1?[!1,!1]:Array.isArray(Z)?Z:[Z]}function J(Z,E,ve){return Z===!0||Z===void 0?E:Z||ve&&E}},69425:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(7224)),te=J(D(93967)),se=J(D(27712)),ae=D(47419),Se=J(D(14104)),oe=J(D(23461));const Ge=me=>{const{prefixCls:Le,"aria-label":be,className:Oe,style:fe,direction:He,maxLength:bt,autoSize:dt=!0,value:Nt,onSave:ct,onCancel:lt,onEnd:Ie,component:Ae,enterIcon:pt=E.createElement(ve.default,null)}=me,ut=E.useRef(null),Et=E.useRef(!1),cn=E.useRef(),[ze,St]=E.useState(Nt);E.useEffect(()=>{St(Nt)},[Nt]),E.useEffect(()=>{var zt;if(!((zt=ut.current)===null||zt===void 0)&&zt.resizableTextArea){const{textArea:Kt}=ut.current.resizableTextArea;Kt.focus();const{length:yn}=Kt.value;Kt.setSelectionRange(yn,yn)}},[]);const we=zt=>{let{target:Kt}=zt;St(Kt.value.replace(/[\n\r]/g,""))},nt=()=>{Et.current=!0},Xe=()=>{Et.current=!1},Ze=zt=>{let{keyCode:Kt}=zt;Et.current||(cn.current=Kt)},Rt=()=>{ct(ze.trim())},yt=zt=>{let{keyCode:Kt,ctrlKey:yn,altKey:Kn,metaKey:rn,shiftKey:Wt}=zt;cn.current===Kt&&!Et.current&&!yn&&!Kn&&!rn&&!Wt&&(Kt===se.default.ENTER?(Rt(),Ie==null||Ie()):Kt===se.default.ESC&&lt())},Me=()=>{Rt()},Gt=Ae?`${Le}-${Ae}`:"",[ln,Ln,kn]=(0,oe.default)(Le),lr=(0,te.default)(Le,`${Le}-edit-content`,{[`${Le}-rtl`]:He==="rtl"},Oe,Gt,Ln,kn);return ln(E.createElement("div",{className:lr,style:fe},E.createElement(Se.default,{ref:ut,maxLength:bt,value:ze,onChange:we,onKeyDown:Ze,onKeyUp:yt,onCompositionStart:nt,onCompositionEnd:Xe,onBlur:Me,"aria-label":be,rows:1,autoSize:dt}),pt!==null?(0,ae.cloneElement)(pt,{className:`${Le}-edit-content-confirm`}):null))};var ee=W.default=Ge},34528:function(Ht,W,D){"use strict";var J,Z=D(64836).default,E=D(75263).default;J={value:!0},W.Z=void 0;var ve=E(D(67294)),te=D(13594),se=Z(D(28460)),ae=function(ee,me){var Le={};for(var be in ee)Object.prototype.hasOwnProperty.call(ee,be)&&me.indexOf(be)<0&&(Le[be]=ee[be]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Oe=0,be=Object.getOwnPropertySymbols(ee);Oe<be.length;Oe++)me.indexOf(be[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ee,be[Oe])&&(Le[be[Oe]]=ee[be[Oe]]);return Le};const Se=[1,2,3,4,5],oe=ve.forwardRef((ee,me)=>{const{level:Le=1}=ee,be=ae(ee,["level"]);let Oe;return Se.includes(Le)?Oe=`h${Le}`:Oe="h1",ve.createElement(se.default,Object.assign({ref:me},be,{component:Oe}))});var Ge=W.Z=oe},89652:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(93967)),te=D(75531),se=D(13594),ae=D(31929),Se=J(D(23461)),oe=function(me,Le){var be={};for(var Oe in me)Object.prototype.hasOwnProperty.call(me,Oe)&&Le.indexOf(Oe)<0&&(be[Oe]=me[Oe]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,Oe=Object.getOwnPropertySymbols(me);fe<Oe.length;fe++)Le.indexOf(Oe[fe])<0&&Object.prototype.propertyIsEnumerable.call(me,Oe[fe])&&(be[Oe[fe]]=me[Oe[fe]]);return be};const Ge=E.forwardRef((me,Le)=>{const{prefixCls:be,component:Oe="article",className:fe,rootClassName:He,setContentRef:bt,children:dt,direction:Nt,style:ct}=me,lt=oe(me,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Ie,direction:Ae,typography:pt}=E.useContext(ae.ConfigContext),ut=Nt!=null?Nt:Ae;let Et=Le;bt&&(Et=(0,te.composeRef)(Le,bt));const cn=Ie("typography",be),[ze,St,we]=(0,Se.default)(cn),nt=(0,ve.default)(cn,pt==null?void 0:pt.className,{[`${cn}-rtl`]:ut==="rtl"},fe,He,St,we),Xe=Object.assign(Object.assign({},pt==null?void 0:pt.style),ct);return ze(E.createElement(Oe,Object.assign({className:nt,style:Xe,ref:Et},lt),dt))});var ee=W.default=Ge},63985:function(Ht,W,D){"use strict";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(67294)),ve=J(D(20640)),te=D(56790),se=function(oe,Ge,ee,me){function Le(be){return be instanceof ee?be:new ee(function(Oe){Oe(be)})}return new(ee||(ee=Promise))(function(be,Oe){function fe(dt){try{bt(me.next(dt))}catch(Nt){Oe(Nt)}}function He(dt){try{bt(me.throw(dt))}catch(Nt){Oe(Nt)}}function bt(dt){dt.done?be(dt.value):Le(dt.value).then(fe,He)}bt((me=me.apply(oe,Ge||[])).next())})};const ae=oe=>{let{copyConfig:Ge,children:ee}=oe;const[me,Le]=E.useState(!1),[be,Oe]=E.useState(!1),fe=E.useRef(null),He=()=>{fe.current&&clearTimeout(fe.current)},bt={};Ge.format&&(bt.format=Ge.format),E.useEffect(()=>He,[]);const dt=(0,te.useEvent)(Nt=>se(void 0,void 0,void 0,function*(){var ct;Nt==null||Nt.preventDefault(),Nt==null||Nt.stopPropagation(),Oe(!0);try{const lt=typeof Ge.text=="function"?yield Ge.text():Ge.text;(0,ve.default)(lt||String(ee)||"",bt),Oe(!1),Le(!0),He(),fe.current=setTimeout(()=>{Le(!1)},3e3),(ct=Ge.onCopy)===null||ct===void 0||ct.call(Ge,Nt)}catch(lt){throw Oe(!1),lt}}));return{copied:me,copyLoading:be,onClick:dt}};var Se=W.default=ae},92759:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var Z=J(D(67294));function E(ve,te){return Z.useMemo(()=>{const se=!!ve;return[se,Object.assign(Object.assign({},te),se&&typeof ve=="object"?ve:null)]},[ve])}},28991:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(67294);const Z=ve=>{const te=(0,J.useRef)();return(0,J.useEffect)(()=>{te.current=ve}),te.current};var E=W.default=Z},67312:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(67294));const E=(te,se)=>{const ae=Z.useRef(!1);Z.useEffect(()=>{ae.current?te():ae.current=!0},se)};var ve=W.default=E},23461:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var J=D(98078),Z=D(3184),E=D(48385);const ve=ae=>{const{componentCls:Se,titleMarginTop:oe}=ae;return{[Se]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:ae.colorText,wordBreak:"break-word",lineHeight:ae.lineHeight,[`&${Se}-secondary`]:{color:ae.colorTextDescription},[`&${Se}-success`]:{color:ae.colorSuccess},[`&${Se}-warning`]:{color:ae.colorWarning},[`&${Se}-danger`]:{color:ae.colorError,"a&:active, a&:focus":{color:ae.colorErrorActive},"a&:hover":{color:ae.colorErrorHover}},[`&${Se}-disabled`]:{color:ae.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},(0,E.getTitleStyles)(ae)),{[`
      & + h1${Se},
      & + h2${Se},
      & + h3${Se},
      & + h4${Se},
      & + h5${Se}
      `]:{marginTop:oe},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:oe}}}),(0,E.getResetStyles)(ae)),(0,E.getLinkStyles)(ae)),{[`
        ${Se}-expand,
        ${Se}-collapse,
        ${Se}-edit,
        ${Se}-copy
      `]:Object.assign(Object.assign({},(0,J.operationUnit)(ae)),{marginInlineStart:ae.marginXXS})}),(0,E.getEditableStyles)(ae)),(0,E.getCopyableStyles)(ae)),(0,E.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},te=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});W.prepareComponentToken=te;var se=W.default=(0,Z.genStyleHooks)("Typography",ae=>[ve(ae)],te)},48385:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTitleStyles=W.getResetStyles=W.getLinkStyles=W.getEllipsisStyles=W.getEditableStyles=W.getCopyableStyles=void 0;var J=D(65409),Z=D(85982),E=D(98078);const ve=(ee,me,Le,be)=>{const{titleMarginBottom:Oe,fontWeightStrong:fe}=be;return{marginBottom:Oe,color:Le,fontWeight:fe,fontSize:ee,lineHeight:me}},te=ee=>{const me=[1,2,3,4,5],Le={};return me.forEach(be=>{Le[`
      h${be}&,
      div&-h${be},
      div&-h${be} > textarea,
      h${be}
    `]=ve(ee[`fontSizeHeading${be}`],ee[`lineHeightHeading${be}`],ee.colorTextHeading,ee)}),Le};W.getTitleStyles=te;const se=ee=>{const{componentCls:me}=ee;return{"a&, a":Object.assign(Object.assign({},(0,E.operationUnit)(ee)),{textDecoration:ee.linkDecoration,"&:active, &:hover":{textDecoration:ee.linkHoverDecoration},[`&[disabled], &${me}-disabled`]:{color:ee.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:ee.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};W.getLinkStyles=se;const ae=ee=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:ee.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:ee.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:J.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:ee.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});W.getResetStyles=ae;const Se=ee=>{const{componentCls:me,paddingSM:Le}=ee,be=Le;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:ee.calc(ee.paddingSM).mul(-1).equal(),marginTop:ee.calc(be).mul(-1).equal(),marginBottom:`calc(1em - ${(0,Z.unit)(be)})`},[`${me}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:ee.calc(ee.marginXS).add(2).equal(),insetBlockEnd:ee.marginXS,color:ee.colorTextDescription,fontWeight:"normal",fontSize:ee.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};W.getEditableStyles=Se;const oe=ee=>({[`${ee.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:ee.colorSuccess}},[`${ee.componentCls}-copy-icon-only`]:{marginInlineStart:0}});W.getCopyableStyles=oe;const Ge=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});W.getEllipsisStyles=Ge},87629:function(Ht,W,D){"use strict";"use client";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(36245)),E=W.default=Z.default},36245:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D=W.default="5.19.3"},83874:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(71079));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},43273:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(72225));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},90091:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(29539));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},10875:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(54825));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},7224:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(43552));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},4121:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const J=Z(D(61929));function Z(ve){return ve&&ve.__esModule?ve:{default:ve}}const E=J;W.default=E,Ht.exports=E},26545:function(Ht,W,D){"use strict";"use client";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=J(D(10434)),ve=J(D(27424)),te=J(D(38416)),se=J(D(70215)),ae=Z(D(67294)),Se=J(D(93967)),oe=D(65409),Ge=J(D(13357)),ee=J(D(46648)),me=D(46338),Le=D(49458),be=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,me.setTwoToneColor)(oe.blue.primary);var Oe=ae.forwardRef(function(He,bt){var dt=He.className,Nt=He.icon,ct=He.spin,lt=He.rotate,Ie=He.tabIndex,Ae=He.onClick,pt=He.twoToneColor,ut=(0,se.default)(He,be),Et=ae.useContext(Ge.default),cn=Et.prefixCls,ze=cn===void 0?"anticon":cn,St=Et.rootClassName,we=(0,Se.default)(St,ze,(0,te.default)((0,te.default)({},"".concat(ze,"-").concat(Nt.name),!!Nt.name),"".concat(ze,"-spin"),!!ct||Nt.name==="loading"),dt),nt=Ie;nt===void 0&&Ae&&(nt=-1);var Xe=lt?{msTransform:"rotate(".concat(lt,"deg)"),transform:"rotate(".concat(lt,"deg)")}:void 0,Ze=(0,Le.normalizeTwoToneColors)(pt),Rt=(0,ve.default)(Ze,2),yt=Rt[0],Me=Rt[1];return ae.createElement("span",(0,E.default)({role:"img","aria-label":Nt.name},ut,{ref:bt,tabIndex:nt,onClick:Ae,className:we}),ae.createElement(ee.default,{icon:Nt,primaryColor:yt,secondaryColor:Me,style:Xe}))});Oe.displayName="AntdIcon",Oe.getTwoToneColor=me.getTwoToneColor,Oe.setTwoToneColor=me.setTwoToneColor;var fe=W.default=Oe},13357:function(Ht,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var J=D(67294),Z=(0,J.createContext)({}),E=W.default=Z},46648:function(Ht,W,D){"use strict";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=J(D(70215)),ve=J(D(42122)),te=Z(D(67294)),se=D(49458),ae=["icon","className","onClick","style","primaryColor","secondaryColor"],Se={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function oe(Le){var be=Le.primaryColor,Oe=Le.secondaryColor;Se.primaryColor=be,Se.secondaryColor=Oe||(0,se.getSecondaryColor)(be),Se.calculated=!!Oe}function Ge(){return(0,ve.default)({},Se)}var ee=function(be){var Oe=be.icon,fe=be.className,He=be.onClick,bt=be.style,dt=be.primaryColor,Nt=be.secondaryColor,ct=(0,E.default)(be,ae),lt=te.useRef(),Ie=Se;if(dt&&(Ie={primaryColor:dt,secondaryColor:Nt||(0,se.getSecondaryColor)(dt)}),(0,se.useInsertStyles)(lt),(0,se.warning)((0,se.isIconDefinition)(Oe),"icon should be icon definiton, but got ".concat(Oe)),!(0,se.isIconDefinition)(Oe))return null;var Ae=Oe;return Ae&&typeof Ae.icon=="function"&&(Ae=(0,ve.default)((0,ve.default)({},Ae),{},{icon:Ae.icon(Ie.primaryColor,Ie.secondaryColor)})),(0,se.generate)(Ae.icon,"svg-".concat(Ae.name),(0,ve.default)((0,ve.default)({className:fe,onClick:He,style:bt,"data-icon":Ae.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},ct),{},{ref:lt}))};ee.displayName="IconReact",ee.getTwoToneColors=Ge,ee.setTwoToneColors=oe;var me=W.default=ee},46338:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getTwoToneColor=se,W.setTwoToneColor=te;var Z=J(D(27424)),E=J(D(46648)),ve=D(49458);function te(ae){var Se=(0,ve.normalizeTwoToneColors)(ae),oe=(0,Z.default)(Se,2),Ge=oe[0],ee=oe[1];return E.default.setTwoToneColors({primaryColor:Ge,secondaryColor:ee})}function se(){var ae=E.default.getTwoToneColors();return ae.calculated?[ae.primaryColor,ae.secondaryColor]:ae.primaryColor}},71079:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(25330)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},72225:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(67303)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},29539:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(83647)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},54825:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(57583)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},43552:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(29260)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},61929:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=Z(D(10434)),ve=J(D(67294)),te=Z(D(25828)),se=Z(D(26545)),ae=function(ee,me){return ve.createElement(se.default,(0,E.default)({},ee,{ref:me,icon:te.default}))},Se=ve.forwardRef(ae),oe=W.default=Se},49458:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.generate=Oe,W.getSecondaryColor=fe,W.iconStyles=void 0,W.isIconDefinition=Le,W.normalizeAttrs=be,W.normalizeTwoToneColors=He,W.useInsertStyles=W.svgBaseProps=void 0,W.warning=me;var E=Z(D(42122)),ve=Z(D(18698)),te=D(65409),se=D(93399),ae=D(63298),Se=Z(D(45520)),oe=J(D(67294)),Ge=Z(D(13357));function ee(ct){return ct.replace(/-(.)/g,function(lt,Ie){return Ie.toUpperCase()})}function me(ct,lt){(0,Se.default)(ct,"[@ant-design/icons] ".concat(lt))}function Le(ct){return(0,ve.default)(ct)==="object"&&typeof ct.name=="string"&&typeof ct.theme=="string"&&((0,ve.default)(ct.icon)==="object"||typeof ct.icon=="function")}function be(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(ct).reduce(function(lt,Ie){var Ae=ct[Ie];switch(Ie){case"class":lt.className=Ae,delete lt.class;break;default:delete lt[Ie],lt[ee(Ie)]=Ae}return lt},{})}function Oe(ct,lt,Ie){return Ie?oe.default.createElement(ct.tag,(0,E.default)((0,E.default)({key:lt},be(ct.attrs)),Ie),(ct.children||[]).map(function(Ae,pt){return Oe(Ae,"".concat(lt,"-").concat(ct.tag,"-").concat(pt))})):oe.default.createElement(ct.tag,(0,E.default)({key:lt},be(ct.attrs)),(ct.children||[]).map(function(Ae,pt){return Oe(Ae,"".concat(lt,"-").concat(ct.tag,"-").concat(pt))}))}function fe(ct){return(0,te.generate)(ct)[0]}function He(ct){return ct?Array.isArray(ct)?ct:[ct]:[]}var bt=W.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},dt=W.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Nt=W.useInsertStyles=function(lt){var Ie=(0,oe.useContext)(Ge.default),Ae=Ie.csp,pt=Ie.prefixCls,ut=dt;pt&&(ut=ut.replace(/anticon/g,pt)),(0,oe.useEffect)(function(){var Et=lt.current,cn=(0,ae.getShadowRoot)(Et);(0,se.updateCSS)(ut,"@ant-design-icons",{prepend:!0,csp:Ae,attachTo:cn})},[])}},98129:function(Ht,W,D){"use strict";var J=D(60690);Ht.exports=function(ve){ve=ve||{};var te=ve.reporter,se=J.getOption(ve,"async",!0),ae=J.getOption(ve,"auto",!0);ae&&!se&&(te&&te.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),se=!0);var Se=Z(),oe,Ge=!1;function ee(bt,dt){!Ge&&ae&&se&&Se.size()===0&&be(),Se.add(bt,dt)}function me(){for(Ge=!0;Se.size();){var bt=Se;Se=Z(),bt.process()}Ge=!1}function Le(bt){Ge||(bt===void 0&&(bt=se),oe&&(fe(oe),oe=null),bt?be():me())}function be(){oe=He(me)}function Oe(){Se={},batchSize=0,topLevel=0,bottomLevel=0}function fe(bt){var dt=clearTimeout;return dt(bt)}function He(bt){var dt=function(Nt){return setTimeout(Nt,0)};return dt(bt)}return{add:ee,force:Le}};function Z(){var E={},ve=0,te=0,se=0;function ae(Ge,ee){ee||(ee=Ge,Ge=0),Ge>te?te=Ge:Ge<se&&(se=Ge),E[Ge]||(E[Ge]=[]),E[Ge].push(ee),ve++}function Se(){for(var Ge=se;Ge<=te;Ge++)for(var ee=E[Ge],me=0;me<ee.length;me++){var Le=ee[me];Le()}}function oe(){return ve}return{add:ae,process:Se,size:oe}}},60690:function(Ht){"use strict";var W=Ht.exports={};W.getOption=D;function D(J,Z,E){var ve=J[Z];return ve==null&&E!==void 0?E:ve}},8874:function(Ht){"use strict";Ht.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Ht,W,D){var J=D(8874),Z=D(86851),E=Object.hasOwnProperty,ve=Object.create(null);for(var te in J)E.call(J,te)&&(ve[J[te]]=te);var se=Ht.exports={to:{},get:{}};se.get=function(oe){var Ge=oe.substring(0,3).toLowerCase(),ee,me;switch(Ge){case"hsl":ee=se.get.hsl(oe),me="hsl";break;case"hwb":ee=se.get.hwb(oe),me="hwb";break;default:ee=se.get.rgb(oe),me="rgb";break}return ee?{model:me,value:ee}:null},se.get.rgb=function(oe){if(!oe)return null;var Ge=/^#([a-f0-9]{3,4})$/i,ee=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,me=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Le=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,be=/^(\w+)$/,Oe=[0,0,0,1],fe,He,bt;if(fe=oe.match(ee)){for(bt=fe[2],fe=fe[1],He=0;He<3;He++){var dt=He*2;Oe[He]=parseInt(fe.slice(dt,dt+2),16)}bt&&(Oe[3]=parseInt(bt,16)/255)}else if(fe=oe.match(Ge)){for(fe=fe[1],bt=fe[3],He=0;He<3;He++)Oe[He]=parseInt(fe[He]+fe[He],16);bt&&(Oe[3]=parseInt(bt+bt,16)/255)}else if(fe=oe.match(me)){for(He=0;He<3;He++)Oe[He]=parseInt(fe[He+1],0);fe[4]&&(fe[5]?Oe[3]=parseFloat(fe[4])*.01:Oe[3]=parseFloat(fe[4]))}else if(fe=oe.match(Le)){for(He=0;He<3;He++)Oe[He]=Math.round(parseFloat(fe[He+1])*2.55);fe[4]&&(fe[5]?Oe[3]=parseFloat(fe[4])*.01:Oe[3]=parseFloat(fe[4]))}else return(fe=oe.match(be))?fe[1]==="transparent"?[0,0,0,0]:E.call(J,fe[1])?(Oe=J[fe[1]],Oe[3]=1,Oe):null:null;for(He=0;He<3;He++)Oe[He]=ae(Oe[He],0,255);return Oe[3]=ae(Oe[3],0,1),Oe},se.get.hsl=function(oe){if(!oe)return null;var Ge=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ee=oe.match(Ge);if(ee){var me=parseFloat(ee[4]),Le=(parseFloat(ee[1])%360+360)%360,be=ae(parseFloat(ee[2]),0,100),Oe=ae(parseFloat(ee[3]),0,100),fe=ae(isNaN(me)?1:me,0,1);return[Le,be,Oe,fe]}return null},se.get.hwb=function(oe){if(!oe)return null;var Ge=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ee=oe.match(Ge);if(ee){var me=parseFloat(ee[4]),Le=(parseFloat(ee[1])%360+360)%360,be=ae(parseFloat(ee[2]),0,100),Oe=ae(parseFloat(ee[3]),0,100),fe=ae(isNaN(me)?1:me,0,1);return[Le,be,Oe,fe]}return null},se.to.hex=function(){var oe=Z(arguments);return"#"+Se(oe[0])+Se(oe[1])+Se(oe[2])+(oe[3]<1?Se(Math.round(oe[3]*255)):"")},se.to.rgb=function(){var oe=Z(arguments);return oe.length<4||oe[3]===1?"rgb("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+")":"rgba("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+", "+oe[3]+")"},se.to.rgb.percent=function(){var oe=Z(arguments),Ge=Math.round(oe[0]/255*100),ee=Math.round(oe[1]/255*100),me=Math.round(oe[2]/255*100);return oe.length<4||oe[3]===1?"rgb("+Ge+"%, "+ee+"%, "+me+"%)":"rgba("+Ge+"%, "+ee+"%, "+me+"%, "+oe[3]+")"},se.to.hsl=function(){var oe=Z(arguments);return oe.length<4||oe[3]===1?"hsl("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%)":"hsla("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%, "+oe[3]+")"},se.to.hwb=function(){var oe=Z(arguments),Ge="";return oe.length>=4&&oe[3]!==1&&(Ge=", "+oe[3]),"hwb("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%"+Ge+")"},se.to.keyword=function(oe){return ve[oe.slice(0,3)]};function ae(oe,Ge,ee){return Math.min(Math.max(Ge,oe),ee)}function Se(oe){var Ge=Math.round(oe).toString(16).toUpperCase();return Ge.length<2?"0"+Ge:Ge}},37620:function(Ht,W,D){"use strict";D.d(W,{ZP:function(){return Nt},B8:function(){return Ae}});function J(Ze,Rt,yt){Ze.prototype=Rt.prototype=yt,yt.constructor=Ze}function Z(Ze,Rt){var yt=Object.create(Ze.prototype);for(var Me in Rt)yt[Me]=Rt[Me];return yt}function E(){}var ve=.7,te=1/ve,se="\\s*([+-]?\\d+)\\s*",ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,Ge=new RegExp("^rgb\\("+[se,se,se]+"\\)$"),ee=new RegExp("^rgb\\("+[Se,Se,Se]+"\\)$"),me=new RegExp("^rgba\\("+[se,se,se,ae]+"\\)$"),Le=new RegExp("^rgba\\("+[Se,Se,Se,ae]+"\\)$"),be=new RegExp("^hsl\\("+[ae,Se,Se]+"\\)$"),Oe=new RegExp("^hsla\\("+[ae,Se,Se,ae]+"\\)$"),fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J(E,Nt,{copy:function(Ze){return Object.assign(new this.constructor,this,Ze)},displayable:function(){return this.rgb().displayable()},hex:He,formatHex:He,formatHsl:bt,formatRgb:dt,toString:dt});function He(){return this.rgb().formatHex()}function bt(){return St(this).formatHsl()}function dt(){return this.rgb().formatRgb()}function Nt(Ze){var Rt,yt;return Ze=(Ze+"").trim().toLowerCase(),(Rt=oe.exec(Ze))?(yt=Rt[1].length,Rt=parseInt(Rt[1],16),yt===6?ct(Rt):yt===3?new pt(Rt>>8&15|Rt>>4&240,Rt>>4&15|Rt&240,(Rt&15)<<4|Rt&15,1):yt===8?lt(Rt>>24&255,Rt>>16&255,Rt>>8&255,(Rt&255)/255):yt===4?lt(Rt>>12&15|Rt>>8&240,Rt>>8&15|Rt>>4&240,Rt>>4&15|Rt&240,((Rt&15)<<4|Rt&15)/255):null):(Rt=Ge.exec(Ze))?new pt(Rt[1],Rt[2],Rt[3],1):(Rt=ee.exec(Ze))?new pt(Rt[1]*255/100,Rt[2]*255/100,Rt[3]*255/100,1):(Rt=me.exec(Ze))?lt(Rt[1],Rt[2],Rt[3],Rt[4]):(Rt=Le.exec(Ze))?lt(Rt[1]*255/100,Rt[2]*255/100,Rt[3]*255/100,Rt[4]):(Rt=be.exec(Ze))?ze(Rt[1],Rt[2]/100,Rt[3]/100,1):(Rt=Oe.exec(Ze))?ze(Rt[1],Rt[2]/100,Rt[3]/100,Rt[4]):fe.hasOwnProperty(Ze)?ct(fe[Ze]):Ze==="transparent"?new pt(NaN,NaN,NaN,0):null}function ct(Ze){return new pt(Ze>>16&255,Ze>>8&255,Ze&255,1)}function lt(Ze,Rt,yt,Me){return Me<=0&&(Ze=Rt=yt=NaN),new pt(Ze,Rt,yt,Me)}function Ie(Ze){return Ze instanceof E||(Ze=Nt(Ze)),Ze?(Ze=Ze.rgb(),new pt(Ze.r,Ze.g,Ze.b,Ze.opacity)):new pt}function Ae(Ze,Rt,yt,Me){return arguments.length===1?Ie(Ze):new pt(Ze,Rt,yt,Me==null?1:Me)}function pt(Ze,Rt,yt,Me){this.r=+Ze,this.g=+Rt,this.b=+yt,this.opacity=+Me}J(pt,Ae,Z(E,{brighter:function(Ze){return Ze=Ze==null?te:Math.pow(te,Ze),new pt(this.r*Ze,this.g*Ze,this.b*Ze,this.opacity)},darker:function(Ze){return Ze=Ze==null?ve:Math.pow(ve,Ze),new pt(this.r*Ze,this.g*Ze,this.b*Ze,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ut,formatHex:ut,formatRgb:Et,toString:Et}));function ut(){return"#"+cn(this.r)+cn(this.g)+cn(this.b)}function Et(){var Ze=this.opacity;return Ze=isNaN(Ze)?1:Math.max(0,Math.min(1,Ze)),(Ze===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ze===1?")":", "+Ze+")")}function cn(Ze){return Ze=Math.max(0,Math.min(255,Math.round(Ze)||0)),(Ze<16?"0":"")+Ze.toString(16)}function ze(Ze,Rt,yt,Me){return Me<=0?Ze=Rt=yt=NaN:yt<=0||yt>=1?Ze=Rt=NaN:Rt<=0&&(Ze=NaN),new nt(Ze,Rt,yt,Me)}function St(Ze){if(Ze instanceof nt)return new nt(Ze.h,Ze.s,Ze.l,Ze.opacity);if(Ze instanceof E||(Ze=Nt(Ze)),!Ze)return new nt;if(Ze instanceof nt)return Ze;Ze=Ze.rgb();var Rt=Ze.r/255,yt=Ze.g/255,Me=Ze.b/255,Gt=Math.min(Rt,yt,Me),ln=Math.max(Rt,yt,Me),Ln=NaN,kn=ln-Gt,lr=(ln+Gt)/2;return kn?(Rt===ln?Ln=(yt-Me)/kn+(yt<Me)*6:yt===ln?Ln=(Me-Rt)/kn+2:Ln=(Rt-yt)/kn+4,kn/=lr<.5?ln+Gt:2-ln-Gt,Ln*=60):kn=lr>0&&lr<1?0:Ln,new nt(Ln,kn,lr,Ze.opacity)}function we(Ze,Rt,yt,Me){return arguments.length===1?St(Ze):new nt(Ze,Rt,yt,Me==null?1:Me)}function nt(Ze,Rt,yt,Me){this.h=+Ze,this.s=+Rt,this.l=+yt,this.opacity=+Me}J(nt,we,Z(E,{brighter:function(Ze){return Ze=Ze==null?te:Math.pow(te,Ze),new nt(this.h,this.s,this.l*Ze,this.opacity)},darker:function(Ze){return Ze=Ze==null?ve:Math.pow(ve,Ze),new nt(this.h,this.s,this.l*Ze,this.opacity)},rgb:function(){var Ze=this.h%360+(this.h<0)*360,Rt=isNaN(Ze)||isNaN(this.s)?0:this.s,yt=this.l,Me=yt+(yt<.5?yt:1-yt)*Rt,Gt=2*yt-Me;return new pt(Xe(Ze>=240?Ze-240:Ze+120,Gt,Me),Xe(Ze,Gt,Me),Xe(Ze<120?Ze+240:Ze-120,Gt,Me),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ze=this.opacity;return Ze=isNaN(Ze)?1:Math.max(0,Math.min(1,Ze)),(Ze===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ze===1?")":", "+Ze+")")}}));function Xe(Ze,Rt,yt){return(Ze<60?Rt+(yt-Rt)*Ze/60:Ze<180?yt:Ze<240?Rt+(yt-Rt)*(240-Ze)/60:Rt)*255}},9187:function(Ht){"use strict";Ht.exports=W,Ht.exports.default=W;function W(we,nt,Xe){Xe=Xe||2;var Ze=nt&&nt.length,Rt=Ze?nt[0]*Xe:we.length,yt=D(we,0,Rt,Xe,!0),Me=[];if(!yt||yt.next===yt.prev)return Me;var Gt,ln,Ln,kn,lr,zt,Kt;if(Ze&&(yt=ae(we,nt,yt,Xe)),we.length>80*Xe){Gt=Ln=we[0],ln=kn=we[1];for(var yn=Xe;yn<Rt;yn+=Xe)lr=we[yn],zt=we[yn+1],lr<Gt&&(Gt=lr),zt<ln&&(ln=zt),lr>Ln&&(Ln=lr),zt>kn&&(kn=zt);Kt=Math.max(Ln-Gt,kn-ln),Kt=Kt!==0?32767/Kt:0}return Z(yt,Me,Xe,Gt,ln,Kt,0),Me}function D(we,nt,Xe,Ze,Rt){var yt,Me;if(Rt===St(we,nt,Xe,Ze)>0)for(yt=nt;yt<Xe;yt+=Ze)Me=Et(yt,we[yt],we[yt+1],Me);else for(yt=Xe-Ze;yt>=nt;yt-=Ze)Me=Et(yt,we[yt],we[yt+1],Me);return Me&&dt(Me,Me.next)&&(cn(Me),Me=Me.next),Me}function J(we,nt){if(!we)return we;nt||(nt=we);var Xe=we,Ze;do if(Ze=!1,!Xe.steiner&&(dt(Xe,Xe.next)||bt(Xe.prev,Xe,Xe.next)===0)){if(cn(Xe),Xe=nt=Xe.prev,Xe===Xe.next)break;Ze=!0}else Xe=Xe.next;while(Ze||Xe!==nt);return nt}function Z(we,nt,Xe,Ze,Rt,yt,Me){if(we){!Me&&yt&&me(we,Ze,Rt,yt);for(var Gt=we,ln,Ln;we.prev!==we.next;){if(ln=we.prev,Ln=we.next,yt?ve(we,Ze,Rt,yt):E(we)){nt.push(ln.i/Xe|0),nt.push(we.i/Xe|0),nt.push(Ln.i/Xe|0),cn(we),we=Ln.next,Gt=Ln.next;continue}if(we=Ln,we===Gt){Me?Me===1?(we=te(J(we),nt,Xe),Z(we,nt,Xe,Ze,Rt,yt,2)):Me===2&&se(we,nt,Xe,Ze,Rt,yt):Z(J(we),nt,Xe,Ze,Rt,yt,1);break}}}}function E(we){var nt=we.prev,Xe=we,Ze=we.next;if(bt(nt,Xe,Ze)>=0)return!1;for(var Rt=nt.x,yt=Xe.x,Me=Ze.x,Gt=nt.y,ln=Xe.y,Ln=Ze.y,kn=Rt<yt?Rt<Me?Rt:Me:yt<Me?yt:Me,lr=Gt<ln?Gt<Ln?Gt:Ln:ln<Ln?ln:Ln,zt=Rt>yt?Rt>Me?Rt:Me:yt>Me?yt:Me,Kt=Gt>ln?Gt>Ln?Gt:Ln:ln>Ln?ln:Ln,yn=Ze.next;yn!==nt;){if(yn.x>=kn&&yn.x<=zt&&yn.y>=lr&&yn.y<=Kt&&fe(Rt,Gt,yt,ln,Me,Ln,yn.x,yn.y)&&bt(yn.prev,yn,yn.next)>=0)return!1;yn=yn.next}return!0}function ve(we,nt,Xe,Ze){var Rt=we.prev,yt=we,Me=we.next;if(bt(Rt,yt,Me)>=0)return!1;for(var Gt=Rt.x,ln=yt.x,Ln=Me.x,kn=Rt.y,lr=yt.y,zt=Me.y,Kt=Gt<ln?Gt<Ln?Gt:Ln:ln<Ln?ln:Ln,yn=kn<lr?kn<zt?kn:zt:lr<zt?lr:zt,Kn=Gt>ln?Gt>Ln?Gt:Ln:ln>Ln?ln:Ln,rn=kn>lr?kn>zt?kn:zt:lr>zt?lr:zt,Wt=be(Kt,yn,nt,Xe,Ze),Pt=be(Kn,rn,nt,Xe,Ze),Pe=we.prevZ,Qe=we.nextZ;Pe&&Pe.z>=Wt&&Qe&&Qe.z<=Pt;){if(Pe.x>=Kt&&Pe.x<=Kn&&Pe.y>=yn&&Pe.y<=rn&&Pe!==Rt&&Pe!==Me&&fe(Gt,kn,ln,lr,Ln,zt,Pe.x,Pe.y)&&bt(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,Qe.x>=Kt&&Qe.x<=Kn&&Qe.y>=yn&&Qe.y<=rn&&Qe!==Rt&&Qe!==Me&&fe(Gt,kn,ln,lr,Ln,zt,Qe.x,Qe.y)&&bt(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;Pe&&Pe.z>=Wt;){if(Pe.x>=Kt&&Pe.x<=Kn&&Pe.y>=yn&&Pe.y<=rn&&Pe!==Rt&&Pe!==Me&&fe(Gt,kn,ln,lr,Ln,zt,Pe.x,Pe.y)&&bt(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;Qe&&Qe.z<=Pt;){if(Qe.x>=Kt&&Qe.x<=Kn&&Qe.y>=yn&&Qe.y<=rn&&Qe!==Rt&&Qe!==Me&&fe(Gt,kn,ln,lr,Ln,zt,Qe.x,Qe.y)&&bt(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function te(we,nt,Xe){var Ze=we;do{var Rt=Ze.prev,yt=Ze.next.next;!dt(Rt,yt)&&Nt(Rt,Ze,Ze.next,yt)&&Ae(Rt,yt)&&Ae(yt,Rt)&&(nt.push(Rt.i/Xe|0),nt.push(Ze.i/Xe|0),nt.push(yt.i/Xe|0),cn(Ze),cn(Ze.next),Ze=we=yt),Ze=Ze.next}while(Ze!==we);return J(Ze)}function se(we,nt,Xe,Ze,Rt,yt){var Me=we;do{for(var Gt=Me.next.next;Gt!==Me.prev;){if(Me.i!==Gt.i&&He(Me,Gt)){var ln=ut(Me,Gt);Me=J(Me,Me.next),ln=J(ln,ln.next),Z(Me,nt,Xe,Ze,Rt,yt,0),Z(ln,nt,Xe,Ze,Rt,yt,0);return}Gt=Gt.next}Me=Me.next}while(Me!==we)}function ae(we,nt,Xe,Ze){var Rt=[],yt,Me,Gt,ln,Ln;for(yt=0,Me=nt.length;yt<Me;yt++)Gt=nt[yt]*Ze,ln=yt<Me-1?nt[yt+1]*Ze:we.length,Ln=D(we,Gt,ln,Ze,!1),Ln===Ln.next&&(Ln.steiner=!0),Rt.push(Oe(Ln));for(Rt.sort(Se),yt=0;yt<Rt.length;yt++)Xe=oe(Rt[yt],Xe);return Xe}function Se(we,nt){return we.x-nt.x}function oe(we,nt){var Xe=Ge(we,nt);if(!Xe)return nt;var Ze=ut(Xe,we);return J(Ze,Ze.next),J(Xe,Xe.next)}function Ge(we,nt){var Xe=nt,Ze=we.x,Rt=we.y,yt=-1/0,Me;do{if(Rt<=Xe.y&&Rt>=Xe.next.y&&Xe.next.y!==Xe.y){var Gt=Xe.x+(Rt-Xe.y)*(Xe.next.x-Xe.x)/(Xe.next.y-Xe.y);if(Gt<=Ze&&Gt>yt&&(yt=Gt,Me=Xe.x<Xe.next.x?Xe:Xe.next,Gt===Ze))return Me}Xe=Xe.next}while(Xe!==nt);if(!Me)return null;var ln=Me,Ln=Me.x,kn=Me.y,lr=1/0,zt;Xe=Me;do Ze>=Xe.x&&Xe.x>=Ln&&Ze!==Xe.x&&fe(Rt<kn?Ze:yt,Rt,Ln,kn,Rt<kn?yt:Ze,Rt,Xe.x,Xe.y)&&(zt=Math.abs(Rt-Xe.y)/(Ze-Xe.x),Ae(Xe,we)&&(zt<lr||zt===lr&&(Xe.x>Me.x||Xe.x===Me.x&&ee(Me,Xe)))&&(Me=Xe,lr=zt)),Xe=Xe.next;while(Xe!==ln);return Me}function ee(we,nt){return bt(we.prev,we,nt.prev)<0&&bt(nt.next,we,we.next)<0}function me(we,nt,Xe,Ze){var Rt=we;do Rt.z===0&&(Rt.z=be(Rt.x,Rt.y,nt,Xe,Ze)),Rt.prevZ=Rt.prev,Rt.nextZ=Rt.next,Rt=Rt.next;while(Rt!==we);Rt.prevZ.nextZ=null,Rt.prevZ=null,Le(Rt)}function Le(we){var nt,Xe,Ze,Rt,yt,Me,Gt,ln,Ln=1;do{for(Xe=we,we=null,yt=null,Me=0;Xe;){for(Me++,Ze=Xe,Gt=0,nt=0;nt<Ln&&(Gt++,Ze=Ze.nextZ,!!Ze);nt++);for(ln=Ln;Gt>0||ln>0&&Ze;)Gt!==0&&(ln===0||!Ze||Xe.z<=Ze.z)?(Rt=Xe,Xe=Xe.nextZ,Gt--):(Rt=Ze,Ze=Ze.nextZ,ln--),yt?yt.nextZ=Rt:we=Rt,Rt.prevZ=yt,yt=Rt;Xe=Ze}yt.nextZ=null,Ln*=2}while(Me>1);return we}function be(we,nt,Xe,Ze,Rt){return we=(we-Xe)*Rt|0,nt=(nt-Ze)*Rt|0,we=(we|we<<8)&16711935,we=(we|we<<4)&252645135,we=(we|we<<2)&858993459,we=(we|we<<1)&1431655765,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,we|nt<<1}function Oe(we){var nt=we,Xe=we;do(nt.x<Xe.x||nt.x===Xe.x&&nt.y<Xe.y)&&(Xe=nt),nt=nt.next;while(nt!==we);return Xe}function fe(we,nt,Xe,Ze,Rt,yt,Me,Gt){return(Rt-Me)*(nt-Gt)>=(we-Me)*(yt-Gt)&&(we-Me)*(Ze-Gt)>=(Xe-Me)*(nt-Gt)&&(Xe-Me)*(yt-Gt)>=(Rt-Me)*(Ze-Gt)}function He(we,nt){return we.next.i!==nt.i&&we.prev.i!==nt.i&&!Ie(we,nt)&&(Ae(we,nt)&&Ae(nt,we)&&pt(we,nt)&&(bt(we.prev,we,nt.prev)||bt(we,nt.prev,nt))||dt(we,nt)&&bt(we.prev,we,we.next)>0&&bt(nt.prev,nt,nt.next)>0)}function bt(we,nt,Xe){return(nt.y-we.y)*(Xe.x-nt.x)-(nt.x-we.x)*(Xe.y-nt.y)}function dt(we,nt){return we.x===nt.x&&we.y===nt.y}function Nt(we,nt,Xe,Ze){var Rt=lt(bt(we,nt,Xe)),yt=lt(bt(we,nt,Ze)),Me=lt(bt(Xe,Ze,we)),Gt=lt(bt(Xe,Ze,nt));return!!(Rt!==yt&&Me!==Gt||Rt===0&&ct(we,Xe,nt)||yt===0&&ct(we,Ze,nt)||Me===0&&ct(Xe,we,Ze)||Gt===0&&ct(Xe,nt,Ze))}function ct(we,nt,Xe){return nt.x<=Math.max(we.x,Xe.x)&&nt.x>=Math.min(we.x,Xe.x)&&nt.y<=Math.max(we.y,Xe.y)&&nt.y>=Math.min(we.y,Xe.y)}function lt(we){return we>0?1:we<0?-1:0}function Ie(we,nt){var Xe=we;do{if(Xe.i!==we.i&&Xe.next.i!==we.i&&Xe.i!==nt.i&&Xe.next.i!==nt.i&&Nt(Xe,Xe.next,we,nt))return!0;Xe=Xe.next}while(Xe!==we);return!1}function Ae(we,nt){return bt(we.prev,we,we.next)<0?bt(we,nt,we.next)>=0&&bt(we,we.prev,nt)>=0:bt(we,nt,we.prev)<0||bt(we,we.next,nt)<0}function pt(we,nt){var Xe=we,Ze=!1,Rt=(we.x+nt.x)/2,yt=(we.y+nt.y)/2;do Xe.y>yt!=Xe.next.y>yt&&Xe.next.y!==Xe.y&&Rt<(Xe.next.x-Xe.x)*(yt-Xe.y)/(Xe.next.y-Xe.y)+Xe.x&&(Ze=!Ze),Xe=Xe.next;while(Xe!==we);return Ze}function ut(we,nt){var Xe=new ze(we.i,we.x,we.y),Ze=new ze(nt.i,nt.x,nt.y),Rt=we.next,yt=nt.prev;return we.next=nt,nt.prev=we,Xe.next=Rt,Rt.prev=Xe,Ze.next=Xe,Xe.prev=Ze,yt.next=Ze,Ze.prev=yt,Ze}function Et(we,nt,Xe,Ze){var Rt=new ze(we,nt,Xe);return Ze?(Rt.next=Ze.next,Rt.prev=Ze,Ze.next.prev=Rt,Ze.next=Rt):(Rt.prev=Rt,Rt.next=Rt),Rt}function cn(we){we.next.prev=we.prev,we.prev.next=we.next,we.prevZ&&(we.prevZ.nextZ=we.nextZ),we.nextZ&&(we.nextZ.prevZ=we.prevZ)}function ze(we,nt,Xe){this.i=we,this.x=nt,this.y=Xe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}W.deviation=function(we,nt,Xe,Ze){var Rt=nt&&nt.length,yt=Rt?nt[0]*Xe:we.length,Me=Math.abs(St(we,0,yt,Xe));if(Rt)for(var Gt=0,ln=nt.length;Gt<ln;Gt++){var Ln=nt[Gt]*Xe,kn=Gt<ln-1?nt[Gt+1]*Xe:we.length;Me-=Math.abs(St(we,Ln,kn,Xe))}var lr=0;for(Gt=0;Gt<Ze.length;Gt+=3){var zt=Ze[Gt]*Xe,Kt=Ze[Gt+1]*Xe,yn=Ze[Gt+2]*Xe;lr+=Math.abs((we[zt]-we[yn])*(we[Kt+1]-we[zt+1])-(we[zt]-we[Kt])*(we[yn+1]-we[zt+1]))}return Me===0&&lr===0?0:Math.abs((lr-Me)/Me)};function St(we,nt,Xe,Ze){for(var Rt=0,yt=nt,Me=Xe-Ze;yt<Xe;yt+=Ze)Rt+=(we[Me]-we[yt])*(we[yt+1]+we[Me+1]),Me=yt;return Rt}W.flatten=function(we){for(var nt=we[0][0].length,Xe={vertices:[],holes:[],dimensions:nt},Ze=0,Rt=0;Rt<we.length;Rt++){for(var yt=0;yt<we[Rt].length;yt++)for(var Me=0;Me<nt;Me++)Xe.vertices.push(we[Rt][yt][Me]);Rt>0&&(Ze+=we[Rt-1].length,Xe.holes.push(Ze))}return Xe}},2268:function(Ht){"use strict";var W=Ht.exports={};W.isIE=function(D){function J(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!J())return!1;if(!D)return!0;var Z=function(){var E,ve=3,te=document.createElement("div"),se=te.getElementsByTagName("i");do te.innerHTML="<!--[if gt IE "+ ++ve+"]><i></i><![endif]-->";while(se[0]);return ve>4?ve:E}();return D===Z},W.isLegacyOpera=function(){return!!window.opera}},17900:function(Ht){"use strict";var W=Ht.exports={};W.forEach=function(D,J){for(var Z=0;Z<D.length;Z++){var E=J(D[Z]);if(E)return E}}},58229:function(Ht,W,D){"use strict";var J=D(2268);Ht.exports=function(Z){Z=Z||{};var E=Z.reporter,ve=Z.batchProcessor,te=Z.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function se(ee,me){function Le(){me(ee)}if(J.isIE(8))te(ee).object={proxy:Le},ee.attachEvent("onresize",Le);else{var be=oe(ee);if(!be)throw new Error("Element is not detectable by this strategy.");be.contentDocument.defaultView.addEventListener("resize",Le)}}function ae(ee){var me=Z.important?" !important; ":"; ";return(ee.join(me)+me).trim()}function Se(ee,me,Le){Le||(Le=me,me=ee,ee=null),ee=ee||{};var be=ee.debug;function Oe(fe,He){var bt=ae(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),dt=!1,Nt=window.getComputedStyle(fe),ct=fe.offsetWidth,lt=fe.offsetHeight;te(fe).startSize={width:ct,height:lt};function Ie(){function Ae(){if(Nt.position==="static"){fe.style.setProperty("position","relative",ee.important?"important":"");var Et=function(cn,ze,St,we){function nt(Ze){return Ze.replace(/[^-\d\.]/g,"")}var Xe=St[we];Xe!=="auto"&&nt(Xe)!=="0"&&(cn.warn("An element that is positioned static has style."+we+"="+Xe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+we+" will be set to 0. Element: ",ze),ze.style.setProperty(we,"0",ee.important?"important":""))};Et(E,fe,Nt,"top"),Et(E,fe,Nt,"right"),Et(E,fe,Nt,"bottom"),Et(E,fe,Nt,"left")}}function pt(){dt||Ae();function Et(ze,St){if(!ze.contentDocument){var we=te(ze);we.checkForObjectDocumentTimeoutId&&window.clearTimeout(we.checkForObjectDocumentTimeoutId),we.checkForObjectDocumentTimeoutId=setTimeout(function(){we.checkForObjectDocumentTimeoutId=0,Et(ze,St)},100);return}St(ze.contentDocument)}var cn=this;Et(cn,function(St){He(fe)})}Nt.position!==""&&(Ae(Nt),dt=!0);var ut=document.createElement("object");ut.style.cssText=bt,ut.tabIndex=-1,ut.type="text/html",ut.setAttribute("aria-hidden","true"),ut.onload=pt,J.isIE()||(ut.data="about:blank"),te(fe)&&(fe.appendChild(ut),te(fe).object=ut,J.isIE()&&(ut.data="about:blank"))}ve?ve.add(Ie):Ie()}J.isIE(8)?Le(me):Oe(me,Le)}function oe(ee){return te(ee).object}function Ge(ee){if(te(ee)){var me=oe(ee);me&&(J.isIE(8)?ee.detachEvent("onresize",me.proxy):ee.removeChild(me),te(ee).checkForObjectDocumentTimeoutId&&window.clearTimeout(te(ee).checkForObjectDocumentTimeoutId),delete te(ee).object)}}return{makeDetectable:Se,addListener:se,uninstall:Ge}}},60787:function(Ht,W,D){"use strict";var J=D(17900).forEach;Ht.exports=function(Z){Z=Z||{};var E=Z.reporter,ve=Z.batchProcessor,te=Z.stateHandler.getState,se=Z.stateHandler.hasState,ae=Z.idHandler;if(!ve)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var Se=Le(),oe="erd_scroll_detection_scrollbar_style",Ge="erd_scroll_detection_container";function ee(Ie){be(Ie,oe,Ge)}ee(window.document);function me(Ie){var Ae=Z.important?" !important; ":"; ";return(Ie.join(Ae)+Ae).trim()}function Le(){var Ie=500,Ae=500,pt=document.createElement("div");pt.style.cssText=me(["position: absolute","width: "+Ie*2+"px","height: "+Ae*2+"px","visibility: hidden","margin: 0","padding: 0"]);var ut=document.createElement("div");ut.style.cssText=me(["position: absolute","width: "+Ie+"px","height: "+Ae+"px","overflow: scroll","visibility: none","top: "+-Ie*3+"px","left: "+-Ae*3+"px","visibility: hidden","margin: 0","padding: 0"]),ut.appendChild(pt),document.body.insertBefore(ut,document.body.firstChild);var Et=Ie-ut.clientWidth,cn=Ae-ut.clientHeight;return document.body.removeChild(ut),{width:Et,height:cn}}function be(Ie,Ae,pt){function ut(St,we){we=we||function(Xe){Ie.head.appendChild(Xe)};var nt=Ie.createElement("style");return nt.innerHTML=St,nt.id=Ae,we(nt),nt}if(!Ie.getElementById(Ae)){var Et=pt+"_animation",cn=pt+"_animation_active",ze=`/* Created by the element-resize-detector library. */
`;ze+="."+pt+" > div::-webkit-scrollbar { "+me(["display: none"])+` }

`,ze+="."+cn+" { "+me(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Et,"animation-name: "+Et])+` }
`,ze+="@-webkit-keyframes "+Et+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,ze+="@keyframes "+Et+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",ut(ze)}}function Oe(Ie){Ie.className+=" "+Ge+"_animation_active"}function fe(Ie,Ae,pt){if(Ie.addEventListener)Ie.addEventListener(Ae,pt);else if(Ie.attachEvent)Ie.attachEvent("on"+Ae,pt);else return E.error("[scroll] Don't know how to add event listeners.")}function He(Ie,Ae,pt){if(Ie.removeEventListener)Ie.removeEventListener(Ae,pt);else if(Ie.detachEvent)Ie.detachEvent("on"+Ae,pt);else return E.error("[scroll] Don't know how to remove event listeners.")}function bt(Ie){return te(Ie).container.childNodes[0].childNodes[0].childNodes[0]}function dt(Ie){return te(Ie).container.childNodes[0].childNodes[0].childNodes[1]}function Nt(Ie,Ae){var pt=te(Ie).listeners;if(!pt.push)throw new Error("Cannot add listener to an element that is not detectable.");te(Ie).listeners.push(Ae)}function ct(Ie,Ae,pt){pt||(pt=Ae,Ae=Ie,Ie=null),Ie=Ie||{};function ut(){if(Ie.debug){var Wt=Array.prototype.slice.call(arguments);if(Wt.unshift(ae.get(Ae),"Scroll: "),E.log.apply)E.log.apply(null,Wt);else for(var Pt=0;Pt<Wt.length;Pt++)E.log(Wt[Pt])}}function Et(Wt){function Pt(Pe){var Qe=Pe.getRootNode&&Pe.getRootNode().contains(Pe);return Pe===Pe.ownerDocument.body||Pe.ownerDocument.body.contains(Pe)||Qe}return!Pt(Wt)||window.getComputedStyle(Wt)===null}function cn(Wt){var Pt=te(Wt).container.childNodes[0],Pe=window.getComputedStyle(Pt);return!Pe.width||Pe.width.indexOf("px")===-1}function ze(){var Wt=window.getComputedStyle(Ae),Pt={};return Pt.position=Wt.position,Pt.width=Ae.offsetWidth,Pt.height=Ae.offsetHeight,Pt.top=Wt.top,Pt.right=Wt.right,Pt.bottom=Wt.bottom,Pt.left=Wt.left,Pt.widthCSS=Wt.width,Pt.heightCSS=Wt.height,Pt}function St(){var Wt=ze();te(Ae).startSize={width:Wt.width,height:Wt.height},ut("Element start size",te(Ae).startSize)}function we(){te(Ae).listeners=[]}function nt(){if(ut("storeStyle invoked."),!te(Ae)){ut("Aborting because element has been uninstalled");return}var Wt=ze();te(Ae).style=Wt}function Xe(Wt,Pt,Pe){te(Wt).lastWidth=Pt,te(Wt).lastHeight=Pe}function Ze(Wt){return bt(Wt).childNodes[0]}function Rt(){return 2*Se.width+1}function yt(){return 2*Se.height+1}function Me(Wt){return Wt+10+Rt()}function Gt(Wt){return Wt+10+yt()}function ln(Wt){return Wt*2+Rt()}function Ln(Wt){return Wt*2+yt()}function kn(Wt,Pt,Pe){var Qe=bt(Wt),Bt=dt(Wt),z=Me(Pt),ue=Gt(Pe),ot=ln(Pt),le=Ln(Pe);Qe.scrollLeft=z,Qe.scrollTop=ue,Bt.scrollLeft=ot,Bt.scrollTop=le}function lr(){var Wt=te(Ae).container;if(!Wt){Wt=document.createElement("div"),Wt.className=Ge,Wt.style.cssText=me(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),te(Ae).container=Wt,Oe(Wt),Ae.appendChild(Wt);var Pt=function(){te(Ae).onRendered&&te(Ae).onRendered()};fe(Wt,"animationstart",Pt),te(Ae).onAnimationStart=Pt}return Wt}function zt(){function Wt(){var Pn=te(Ae).style;if(Pn.position==="static"){Ae.style.setProperty("position","relative",Ie.important?"important":"");var Zn=function(ht,ye,Be,rt){function Mt(En){return En.replace(/[^-\d\.]/g,"")}var Ot=Be[rt];Ot!=="auto"&&Mt(Ot)!=="0"&&(ht.warn("An element that is positioned static has style."+rt+"="+Ot+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+rt+" will be set to 0. Element: ",ye),ye.style[rt]=0)};Zn(E,Ae,Pn,"top"),Zn(E,Ae,Pn,"right"),Zn(E,Ae,Pn,"bottom"),Zn(E,Ae,Pn,"left")}}function Pt(Pn,Zn,ht,ye){return Pn=Pn?Pn+"px":"0",Zn=Zn?Zn+"px":"0",ht=ht?ht+"px":"0",ye=ye?ye+"px":"0",["left: "+Pn,"top: "+Zn,"right: "+ye,"bottom: "+ht]}if(ut("Injecting elements"),!te(Ae)){ut("Aborting because element has been uninstalled");return}Wt();var Pe=te(Ae).container;Pe||(Pe=lr());var Qe=Se.width,Bt=Se.height,z=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ue=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Pt(-(1+Qe),-(1+Bt),-Bt,-Qe))),ot=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),le=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),$t=me(["position: absolute","left: 0","top: 0"]),an=me(["position: absolute","width: 200%","height: 200%"]),hn=document.createElement("div"),Dn=document.createElement("div"),Xn=document.createElement("div"),Gn=document.createElement("div"),dn=document.createElement("div"),mt=document.createElement("div");hn.dir="ltr",hn.style.cssText=z,hn.className=Ge,Dn.className=Ge,Dn.style.cssText=ue,Xn.style.cssText=ot,Gn.style.cssText=$t,dn.style.cssText=le,mt.style.cssText=an,Xn.appendChild(Gn),dn.appendChild(mt),Dn.appendChild(Xn),Dn.appendChild(dn),hn.appendChild(Dn),Pe.appendChild(hn);function Ct(){var Pn=te(Ae);Pn&&Pn.onExpand?Pn.onExpand():ut("Aborting expand scroll handler: element has been uninstalled")}function Cn(){var Pn=te(Ae);Pn&&Pn.onShrink?Pn.onShrink():ut("Aborting shrink scroll handler: element has been uninstalled")}fe(Xn,"scroll",Ct),fe(dn,"scroll",Cn),te(Ae).onExpandScroll=Ct,te(Ae).onShrinkScroll=Cn}function Kt(){function Wt(ot,le,$t){var an=Ze(ot),hn=Me(le),Dn=Gt($t);an.style.setProperty("width",hn+"px",Ie.important?"important":""),an.style.setProperty("height",Dn+"px",Ie.important?"important":"")}function Pt(ot){var le=Ae.offsetWidth,$t=Ae.offsetHeight,an=le!==te(Ae).lastWidth||$t!==te(Ae).lastHeight;ut("Storing current size",le,$t),Xe(Ae,le,$t),ve.add(0,function(){if(an){if(!te(Ae)){ut("Aborting because element has been uninstalled");return}if(!Pe()){ut("Aborting because element container has not been initialized");return}if(Ie.debug){var Dn=Ae.offsetWidth,Xn=Ae.offsetHeight;(Dn!==le||Xn!==$t)&&E.warn(ae.get(Ae),"Scroll: Size changed before updating detector elements.")}Wt(Ae,le,$t)}}),ve.add(1,function(){if(!te(Ae)){ut("Aborting because element has been uninstalled");return}if(!Pe()){ut("Aborting because element container has not been initialized");return}kn(Ae,le,$t)}),an&&ot&&ve.add(2,function(){if(!te(Ae)){ut("Aborting because element has been uninstalled");return}if(!Pe()){ut("Aborting because element container has not been initialized");return}ot()})}function Pe(){return!!te(Ae).container}function Qe(){function ot(){return te(Ae).lastNotifiedWidth===void 0}ut("notifyListenersIfNeeded invoked");var le=te(Ae);if(ot()&&le.lastWidth===le.startSize.width&&le.lastHeight===le.startSize.height)return ut("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(le.lastWidth===le.lastNotifiedWidth&&le.lastHeight===le.lastNotifiedHeight)return ut("Not notifying: Size already notified");ut("Current size not notified, notifying..."),le.lastNotifiedWidth=le.lastWidth,le.lastNotifiedHeight=le.lastHeight,J(te(Ae).listeners,function($t){$t(Ae)})}function Bt(){if(ut("startanimation triggered."),cn(Ae)){ut("Ignoring since element is still unrendered...");return}ut("Element rendered.");var ot=bt(Ae),le=dt(Ae);(ot.scrollLeft===0||ot.scrollTop===0||le.scrollLeft===0||le.scrollTop===0)&&(ut("Scrollbars out of sync. Updating detector elements..."),Pt(Qe))}function z(){if(ut("Scroll detected."),cn(Ae)){ut("Scroll event fired while unrendered. Ignoring...");return}Pt(Qe)}if(ut("registerListenersAndPositionElements invoked."),!te(Ae)){ut("Aborting because element has been uninstalled");return}te(Ae).onRendered=Bt,te(Ae).onExpand=z,te(Ae).onShrink=z;var ue=te(Ae).style;Wt(Ae,ue.width,ue.height)}function yn(){if(ut("finalizeDomMutation invoked."),!te(Ae)){ut("Aborting because element has been uninstalled");return}var Wt=te(Ae).style;Xe(Ae,Wt.width,Wt.height),kn(Ae,Wt.width,Wt.height)}function Kn(){pt(Ae)}function rn(){ut("Installing..."),we(),St(),ve.add(0,nt),ve.add(1,zt),ve.add(2,Kt),ve.add(3,yn),ve.add(4,Kn)}ut("Making detectable..."),Et(Ae)?(ut("Element is detached"),lr(),ut("Waiting until element is attached..."),te(Ae).onRendered=function(){ut("Element is now attached"),rn()}):rn()}function lt(Ie){var Ae=te(Ie);Ae&&(Ae.onExpandScroll&&He(bt(Ie),"scroll",Ae.onExpandScroll),Ae.onShrinkScroll&&He(dt(Ie),"scroll",Ae.onShrinkScroll),Ae.onAnimationStart&&He(Ae.container,"animationstart",Ae.onAnimationStart),Ae.container&&Ie.removeChild(Ae.container))}return{makeDetectable:ct,addListener:Nt,uninstall:lt,initDocument:ee}}},63844:function(Ht,W,D){"use strict";var J=D(17900).forEach,Z=D(68452),E=D(96199),ve=D(75805),te=D(79799),se=D(71724),ae=D(2268),Se=D(98129),oe=D(21931),Ge=D(58229),ee=D(60787);function me(fe){return Array.isArray(fe)||fe.length!==void 0}function Le(fe){if(Array.isArray(fe))return fe;var He=[];return J(fe,function(bt){He.push(bt)}),He}function be(fe){return fe&&fe.nodeType===1}Ht.exports=function(fe){fe=fe||{};var He;if(fe.idHandler)He={get:function(Ze){return fe.idHandler.get(Ze,!0)},set:fe.idHandler.set};else{var bt=ve(),dt=te({idGenerator:bt,stateHandler:oe});He=dt}var Nt=fe.reporter;if(!Nt){var ct=Nt===!1;Nt=se(ct)}var lt=Oe(fe,"batchProcessor",Se({reporter:Nt})),Ie={};Ie.callOnAdd=!!Oe(fe,"callOnAdd",!0),Ie.debug=!!Oe(fe,"debug",!1);var Ae=E(He),pt=Z({stateHandler:oe}),ut,Et=Oe(fe,"strategy","object"),cn=Oe(fe,"important",!1),ze={reporter:Nt,batchProcessor:lt,stateHandler:oe,idHandler:He,important:cn};if(Et==="scroll"&&(ae.isLegacyOpera()?(Nt.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),Et="object"):ae.isIE(9)&&(Nt.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),Et="object")),Et==="scroll")ut=ee(ze);else if(Et==="object")ut=Ge(ze);else throw new Error("Invalid strategy name: "+Et);var St={};function we(Ze,Rt,yt){function Me(zt){var Kt=Ae.get(zt);J(Kt,function(Kn){Kn(zt)})}function Gt(zt,Kt,yn){Ae.add(Kt,yn),zt&&yn(Kt)}if(yt||(yt=Rt,Rt=Ze,Ze={}),!Rt)throw new Error("At least one element required.");if(!yt)throw new Error("Listener required.");if(be(Rt))Rt=[Rt];else if(me(Rt))Rt=Le(Rt);else return Nt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var ln=0,Ln=Oe(Ze,"callOnAdd",Ie.callOnAdd),kn=Oe(Ze,"onReady",function(){}),lr=Oe(Ze,"debug",Ie.debug);J(Rt,function(Kt){oe.getState(Kt)||(oe.initState(Kt),He.set(Kt));var yn=He.get(Kt);if(lr&&Nt.log("Attaching listener to element",yn,Kt),!pt.isDetectable(Kt)){if(lr&&Nt.log(yn,"Not detectable."),pt.isBusy(Kt)){lr&&Nt.log(yn,"System busy making it detectable"),Gt(Ln,Kt,yt),St[yn]=St[yn]||[],St[yn].push(function(){ln++,ln===Rt.length&&kn()});return}return lr&&Nt.log(yn,"Making detectable..."),pt.markBusy(Kt,!0),ut.makeDetectable({debug:lr,important:cn},Kt,function(rn){if(lr&&Nt.log(yn,"onElementDetectable"),oe.getState(rn)){pt.markAsDetectable(rn),pt.markBusy(rn,!1),ut.addListener(rn,Me),Gt(Ln,rn,yt);var Wt=oe.getState(rn);if(Wt&&Wt.startSize){var Pt=rn.offsetWidth,Pe=rn.offsetHeight;(Wt.startSize.width!==Pt||Wt.startSize.height!==Pe)&&Me(rn)}St[yn]&&J(St[yn],function(Qe){Qe()})}else lr&&Nt.log(yn,"Element uninstalled before being detectable.");delete St[yn],ln++,ln===Rt.length&&kn()})}lr&&Nt.log(yn,"Already detecable, adding listener."),Gt(Ln,Kt,yt),ln++}),ln===Rt.length&&kn()}function nt(Ze){if(!Ze)return Nt.error("At least one element is required.");if(be(Ze))Ze=[Ze];else if(me(Ze))Ze=Le(Ze);else return Nt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");J(Ze,function(Rt){Ae.removeAllListeners(Rt),ut.uninstall(Rt),oe.cleanState(Rt)})}function Xe(Ze){ut.initDocument&&ut.initDocument(Ze)}return{listenTo:we,removeListener:Ae.removeListener,removeAllListeners:Ae.removeAllListeners,uninstall:nt,initDocument:Xe}};function Oe(fe,He,bt){var dt=fe[He];return dt==null&&bt!==void 0?bt:dt}},68452:function(Ht){"use strict";Ht.exports=function(W){var D=W.stateHandler.getState;function J(te){var se=D(te);return se&&!!se.isDetectable}function Z(te){D(te).isDetectable=!0}function E(te){return!!D(te).busy}function ve(te,se){D(te).busy=!!se}return{isDetectable:J,markAsDetectable:Z,isBusy:E,markBusy:ve}}},75805:function(Ht){"use strict";Ht.exports=function(){var W=1;function D(){return W++}return{generate:D}}},79799:function(Ht){"use strict";Ht.exports=function(W){var D=W.idGenerator,J=W.stateHandler.getState;function Z(ve){var te=J(ve);return te&&te.id!==void 0?te.id:null}function E(ve){var te=J(ve);if(!te)throw new Error("setId required the element to have a resize detection state.");var se=D.generate();return te.id=se,se}return{get:Z,set:E}}},96199:function(Ht){"use strict";Ht.exports=function(W){var D={};function J(te){var se=W.get(te);return se===void 0?[]:D[se]||[]}function Z(te,se){var ae=W.get(te);D[ae]||(D[ae]=[]),D[ae].push(se)}function E(te,se){for(var ae=J(te),Se=0,oe=ae.length;Se<oe;++Se)if(ae[Se]===se){ae.splice(Se,1);break}}function ve(te){var se=J(te);se&&(se.length=0)}return{get:J,add:Z,removeListener:E,removeAllListeners:ve}}},71724:function(Ht){"use strict";Ht.exports=function(W){function D(){}var J={log:D,warn:D,error:D};if(!W&&window.console){var Z=function(E,ve){E[ve]=function(){var se=console[ve];if(se.apply)se.apply(console,arguments);else for(var ae=0;ae<arguments.length;ae++)se(arguments[ae])}};Z(J,"log"),Z(J,"warn"),Z(J,"error")}return J}},21931:function(Ht){"use strict";var W="_erd";function D(E){return E[W]={},J(E)}function J(E){return E[W]}function Z(E){delete E[W]}Ht.exports={initState:D,getState:J,cleanState:Z}},26729:function(Ht){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function J(){}Object.create&&(J.prototype=Object.create(null),new J().__proto__||(D=!1));function Z(se,ae,Se){this.fn=se,this.context=ae,this.once=Se||!1}function E(se,ae,Se,oe,Ge){if(typeof Se!="function")throw new TypeError("The listener must be a function");var ee=new Z(Se,oe||se,Ge),me=D?D+ae:ae;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],ee]:se._events[me].push(ee):(se._events[me]=ee,se._eventsCount++),se}function ve(se,ae){--se._eventsCount===0?se._events=new J:delete se._events[ae]}function te(){this._events=new J,this._eventsCount=0}te.prototype.eventNames=function(){var ae=[],Se,oe;if(this._eventsCount===0)return ae;for(oe in Se=this._events)W.call(Se,oe)&&ae.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ae.concat(Object.getOwnPropertySymbols(Se)):ae},te.prototype.listeners=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,ee=oe.length,me=new Array(ee);Ge<ee;Ge++)me[Ge]=oe[Ge].fn;return me},te.prototype.listenerCount=function(ae){var Se=D?D+ae:ae,oe=this._events[Se];return oe?oe.fn?1:oe.length:0},te.prototype.emit=function(ae,Se,oe,Ge,ee,me){var Le=D?D+ae:ae;if(!this._events[Le])return!1;var be=this._events[Le],Oe=arguments.length,fe,He;if(be.fn){switch(be.once&&this.removeListener(ae,be.fn,void 0,!0),Oe){case 1:return be.fn.call(be.context),!0;case 2:return be.fn.call(be.context,Se),!0;case 3:return be.fn.call(be.context,Se,oe),!0;case 4:return be.fn.call(be.context,Se,oe,Ge),!0;case 5:return be.fn.call(be.context,Se,oe,Ge,ee),!0;case 6:return be.fn.call(be.context,Se,oe,Ge,ee,me),!0}for(He=1,fe=new Array(Oe-1);He<Oe;He++)fe[He-1]=arguments[He];be.fn.apply(be.context,fe)}else{var bt=be.length,dt;for(He=0;He<bt;He++)switch(be[He].once&&this.removeListener(ae,be[He].fn,void 0,!0),Oe){case 1:be[He].fn.call(be[He].context);break;case 2:be[He].fn.call(be[He].context,Se);break;case 3:be[He].fn.call(be[He].context,Se,oe);break;case 4:be[He].fn.call(be[He].context,Se,oe,Ge);break;default:if(!fe)for(dt=1,fe=new Array(Oe-1);dt<Oe;dt++)fe[dt-1]=arguments[dt];be[He].fn.apply(be[He].context,fe)}}return!0},te.prototype.on=function(ae,Se,oe){return E(this,ae,Se,oe,!1)},te.prototype.once=function(ae,Se,oe){return E(this,ae,Se,oe,!0)},te.prototype.removeListener=function(ae,Se,oe,Ge){var ee=D?D+ae:ae;if(!this._events[ee])return this;if(!Se)return ve(this,ee),this;var me=this._events[ee];if(me.fn)me.fn===Se&&(!Ge||me.once)&&(!oe||me.context===oe)&&ve(this,ee);else{for(var Le=0,be=[],Oe=me.length;Le<Oe;Le++)(me[Le].fn!==Se||Ge&&!me[Le].once||oe&&me[Le].context!==oe)&&be.push(me[Le]);be.length?this._events[ee]=be.length===1?be[0]:be:ve(this,ee)}return this},te.prototype.removeAllListeners=function(ae){var Se;return ae?(Se=D?D+ae:ae,this._events[Se]&&ve(this,Se)):(this._events=new J,this._eventsCount=0),this},te.prototype.off=te.prototype.removeListener,te.prototype.addListener=te.prototype.on,te.prefixed=D,te.EventEmitter=te,Ht.exports=te},69916:function(Ht,W){(function(D,J){J(W)})(this,function(D){"use strict";function J(Le,be,Oe,fe){fe=fe||{};var He=fe.maxIterations||100,bt=fe.tolerance||1e-10,dt=Le(be),Nt=Le(Oe),ct=Oe-be;if(dt*Nt>0)throw"Initial bisect points must have opposite signs";if(dt===0)return be;if(Nt===0)return Oe;for(var lt=0;lt<He;++lt){ct/=2;var Ie=be+ct,Ae=Le(Ie);if(Ae*dt>=0&&(be=Ie),Math.abs(ct)<bt||Ae===0)return Ie}return be+ct}function Z(Le){for(var be=new Array(Le),Oe=0;Oe<Le;++Oe)be[Oe]=0;return be}function E(Le,be){return Z(Le).map(function(){return Z(be)})}function ve(Le,be){for(var Oe=0,fe=0;fe<Le.length;++fe)Oe+=Le[fe]*be[fe];return Oe}function te(Le){return Math.sqrt(ve(Le,Le))}function se(Le,be,Oe){for(var fe=0;fe<be.length;++fe)Le[fe]=be[fe]*Oe}function ae(Le,be,Oe,fe,He){for(var bt=0;bt<Le.length;++bt)Le[bt]=be*Oe[bt]+fe*He[bt]}function Se(Le,be,Oe){Oe=Oe||{};var fe=Oe.maxIterations||be.length*200,He=Oe.nonZeroDelta||1.05,bt=Oe.zeroDelta||.001,dt=Oe.minErrorDelta||1e-6,Nt=Oe.minErrorDelta||1e-5,ct=Oe.rho!==void 0?Oe.rho:1,lt=Oe.chi!==void 0?Oe.chi:2,Ie=Oe.psi!==void 0?Oe.psi:-.5,Ae=Oe.sigma!==void 0?Oe.sigma:.5,pt,ut=be.length,Et=new Array(ut+1);Et[0]=be,Et[0].fx=Le(be),Et[0].id=0;for(var cn=0;cn<ut;++cn){var ze=be.slice();ze[cn]=ze[cn]?ze[cn]*He:bt,Et[cn+1]=ze,Et[cn+1].fx=Le(ze),Et[cn+1].id=cn+1}function St(kn){for(var lr=0;lr<kn.length;lr++)Et[ut][lr]=kn[lr];Et[ut].fx=kn.fx}for(var we=function(kn,lr){return kn.fx-lr.fx},nt=be.slice(),Xe=be.slice(),Ze=be.slice(),Rt=be.slice(),yt=0;yt<fe;++yt){if(Et.sort(we),Oe.history){var Me=Et.map(function(kn){var lr=kn.slice();return lr.fx=kn.fx,lr.id=kn.id,lr});Me.sort(function(kn,lr){return kn.id-lr.id}),Oe.history.push({x:Et[0].slice(),fx:Et[0].fx,simplex:Me})}for(pt=0,cn=0;cn<ut;++cn)pt=Math.max(pt,Math.abs(Et[0][cn]-Et[1][cn]));if(Math.abs(Et[0].fx-Et[ut].fx)<dt&&pt<Nt)break;for(cn=0;cn<ut;++cn){nt[cn]=0;for(var Gt=0;Gt<ut;++Gt)nt[cn]+=Et[Gt][cn];nt[cn]/=ut}var ln=Et[ut];if(ae(Xe,1+ct,nt,-ct,ln),Xe.fx=Le(Xe),Xe.fx<Et[0].fx)ae(Rt,1+lt,nt,-lt,ln),Rt.fx=Le(Rt),Rt.fx<Xe.fx?St(Rt):St(Xe);else if(Xe.fx>=Et[ut-1].fx){var Ln=!1;if(Xe.fx>ln.fx?(ae(Ze,1+Ie,nt,-Ie,ln),Ze.fx=Le(Ze),Ze.fx<ln.fx?St(Ze):Ln=!0):(ae(Ze,1-Ie*ct,nt,Ie*ct,ln),Ze.fx=Le(Ze),Ze.fx<Xe.fx?St(Ze):Ln=!0),Ln){if(Ae>=1)break;for(cn=1;cn<Et.length;++cn)ae(Et[cn],1-Ae,Et[0],Ae,Et[cn]),Et[cn].fx=Le(Et[cn])}}else St(Xe)}return Et.sort(we),{fx:Et[0].fx,x:Et[0]}}function oe(Le,be,Oe,fe,He,bt,dt){var Nt=Oe.fx,ct=ve(Oe.fxprime,be),lt=Nt,Ie=Nt,Ae=ct,pt=0;He=He||1,bt=bt||1e-6,dt=dt||.1;function ut(cn,ze,St){for(var we=0;we<16;++we)if(He=(cn+ze)/2,ae(fe.x,1,Oe.x,He,be),lt=fe.fx=Le(fe.x,fe.fxprime),Ae=ve(fe.fxprime,be),lt>Nt+bt*He*ct||lt>=St)ze=He;else{if(Math.abs(Ae)<=-dt*ct)return He;Ae*(ze-cn)>=0&&(ze=cn),cn=He,St=lt}return 0}for(var Et=0;Et<10;++Et){if(ae(fe.x,1,Oe.x,He,be),lt=fe.fx=Le(fe.x,fe.fxprime),Ae=ve(fe.fxprime,be),lt>Nt+bt*He*ct||Et&&lt>=Ie)return ut(pt,He,Ie);if(Math.abs(Ae)<=-dt*ct)return He;if(Ae>=0)return ut(He,pt,lt);Ie=lt,pt=He,He*=2}return He}function Ge(Le,be,Oe){var fe={x:be.slice(),fx:0,fxprime:be.slice()},He={x:be.slice(),fx:0,fxprime:be.slice()},bt=be.slice(),dt,Nt,ct=1,lt;Oe=Oe||{},lt=Oe.maxIterations||be.length*20,fe.fx=Le(fe.x,fe.fxprime),dt=fe.fxprime.slice(),se(dt,fe.fxprime,-1);for(var Ie=0;Ie<lt;++Ie){if(ct=oe(Le,dt,fe,He,ct),Oe.history&&Oe.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),alpha:ct}),!ct)se(dt,fe.fxprime,-1);else{ae(bt,1,He.fxprime,-1,fe.fxprime);var Ae=ve(fe.fxprime,fe.fxprime),pt=Math.max(0,ve(bt,He.fxprime)/Ae);ae(dt,pt,dt,-1,He.fxprime),Nt=fe,fe=He,He=Nt}if(te(fe.fxprime)<=1e-5)break}return Oe.history&&Oe.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),alpha:ct}),fe}function ee(Le,be,Oe){Oe=Oe||{};for(var fe=Oe.maxIterations||be.length*100,He=Oe.learnRate||.001,bt={x:be.slice(),fx:0,fxprime:be.slice()},dt=0;dt<fe&&(bt.fx=Le(bt.x,bt.fxprime),Oe.history&&Oe.history.push({x:bt.x.slice(),fx:bt.fx,fxprime:bt.fxprime.slice()}),ae(bt.x,1,bt.x,-He,bt.fxprime),!(te(bt.fxprime)<=1e-5));++dt);return bt}function me(Le,be,Oe){Oe=Oe||{};var fe={x:be.slice(),fx:0,fxprime:be.slice()},He={x:be.slice(),fx:0,fxprime:be.slice()},bt=Oe.maxIterations||be.length*100,dt=Oe.learnRate||1,Nt=be.slice(),ct=Oe.c1||.001,lt=Oe.c2||.1,Ie,Ae=[];if(Oe.history){var pt=Le;Le=function(Et,cn){return Ae.push(Et.slice()),pt(Et,cn)}}fe.fx=Le(fe.x,fe.fxprime);for(var ut=0;ut<bt&&(se(Nt,fe.fxprime,-1),dt=oe(Le,Nt,fe,He,dt,ct,lt),Oe.history&&(Oe.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),functionCalls:Ae,learnRate:dt,alpha:dt}),Ae=[]),Ie=fe,fe=He,He=Ie,!(dt===0||te(fe.fxprime)<1e-5));++ut);return fe}D.bisect=J,D.nelderMead=Se,D.conjugateGradient=Ge,D.gradientDescent=ee,D.gradientDescentLineSearch=me,D.zeros=Z,D.zerosM=E,D.norm2=te,D.weightedSum=ae,D.scale=se})},49685:function(Ht,W,D){"use strict";D.d(W,{Ib:function(){return J},WT:function(){return Z}});var J=1e-6,Z=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function ve(Se){Z=Se}var te=Math.PI/180;function se(Se){return Se*te}function ae(Se,oe){return Math.abs(Se-oe)<=J*Math.max(1,Math.abs(Se),Math.abs(oe))}Math.hypot||(Math.hypot=function(){for(var Se=0,oe=arguments.length;oe--;)Se+=arguments[oe]*arguments[oe];return Math.sqrt(Se)})},85975:function(Ht,W,D){"use strict";D.r(W),D.d(W,{add:function(){return yn},adjoint:function(){return Ge},clone:function(){return E},copy:function(){return ve},create:function(){return Z},determinant:function(){return ee},equals:function(){return Pe},exactEquals:function(){return Pt},frob:function(){return Kt},fromQuat:function(){return nt},fromQuat2:function(){return ut},fromRotation:function(){return ct},fromRotationTranslation:function(){return pt},fromRotationTranslationScale:function(){return St},fromRotationTranslationScaleOrigin:function(){return we},fromScaling:function(){return Nt},fromTranslation:function(){return dt},fromValues:function(){return te},fromXRotation:function(){return lt},fromYRotation:function(){return Ie},fromZRotation:function(){return Ae},frustum:function(){return Xe},getRotation:function(){return ze},getScaling:function(){return cn},getTranslation:function(){return Et},identity:function(){return ae},invert:function(){return oe},lookAt:function(){return kn},mul:function(){return Qe},multiply:function(){return me},multiplyScalar:function(){return rn},multiplyScalarAndAdd:function(){return Wt},ortho:function(){return ln},orthoNO:function(){return Gt},orthoZO:function(){return Ln},perspective:function(){return Rt},perspectiveFromFieldOfView:function(){return Me},perspectiveNO:function(){return Ze},perspectiveZO:function(){return yt},rotate:function(){return Oe},rotateX:function(){return fe},rotateY:function(){return He},rotateZ:function(){return bt},scale:function(){return be},set:function(){return se},str:function(){return zt},sub:function(){return Bt},subtract:function(){return Kn},targetTo:function(){return lr},translate:function(){return Le},transpose:function(){return Se}});var J=D(49685);function Z(){var z=new J.WT(16);return J.WT!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function E(z){var ue=new J.WT(16);return ue[0]=z[0],ue[1]=z[1],ue[2]=z[2],ue[3]=z[3],ue[4]=z[4],ue[5]=z[5],ue[6]=z[6],ue[7]=z[7],ue[8]=z[8],ue[9]=z[9],ue[10]=z[10],ue[11]=z[11],ue[12]=z[12],ue[13]=z[13],ue[14]=z[14],ue[15]=z[15],ue}function ve(z,ue){return z[0]=ue[0],z[1]=ue[1],z[2]=ue[2],z[3]=ue[3],z[4]=ue[4],z[5]=ue[5],z[6]=ue[6],z[7]=ue[7],z[8]=ue[8],z[9]=ue[9],z[10]=ue[10],z[11]=ue[11],z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15],z}function te(z,ue,ot,le,$t,an,hn,Dn,Xn,Gn,dn,mt,Ct,Cn,Pn,Zn){var ht=new J.WT(16);return ht[0]=z,ht[1]=ue,ht[2]=ot,ht[3]=le,ht[4]=$t,ht[5]=an,ht[6]=hn,ht[7]=Dn,ht[8]=Xn,ht[9]=Gn,ht[10]=dn,ht[11]=mt,ht[12]=Ct,ht[13]=Cn,ht[14]=Pn,ht[15]=Zn,ht}function se(z,ue,ot,le,$t,an,hn,Dn,Xn,Gn,dn,mt,Ct,Cn,Pn,Zn,ht){return z[0]=ue,z[1]=ot,z[2]=le,z[3]=$t,z[4]=an,z[5]=hn,z[6]=Dn,z[7]=Xn,z[8]=Gn,z[9]=dn,z[10]=mt,z[11]=Ct,z[12]=Cn,z[13]=Pn,z[14]=Zn,z[15]=ht,z}function ae(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function Se(z,ue){if(z===ue){var ot=ue[1],le=ue[2],$t=ue[3],an=ue[6],hn=ue[7],Dn=ue[11];z[1]=ue[4],z[2]=ue[8],z[3]=ue[12],z[4]=ot,z[6]=ue[9],z[7]=ue[13],z[8]=le,z[9]=an,z[11]=ue[14],z[12]=$t,z[13]=hn,z[14]=Dn}else z[0]=ue[0],z[1]=ue[4],z[2]=ue[8],z[3]=ue[12],z[4]=ue[1],z[5]=ue[5],z[6]=ue[9],z[7]=ue[13],z[8]=ue[2],z[9]=ue[6],z[10]=ue[10],z[11]=ue[14],z[12]=ue[3],z[13]=ue[7],z[14]=ue[11],z[15]=ue[15];return z}function oe(z,ue){var ot=ue[0],le=ue[1],$t=ue[2],an=ue[3],hn=ue[4],Dn=ue[5],Xn=ue[6],Gn=ue[7],dn=ue[8],mt=ue[9],Ct=ue[10],Cn=ue[11],Pn=ue[12],Zn=ue[13],ht=ue[14],ye=ue[15],Be=ot*Dn-le*hn,rt=ot*Xn-$t*hn,Mt=ot*Gn-an*hn,Ot=le*Xn-$t*Dn,En=le*Gn-an*Dn,$n=$t*Gn-an*Xn,yr=dn*Zn-mt*Pn,qn=dn*ht-Ct*Pn,Ce=dn*ye-Cn*Pn,xe=mt*ht-Ct*Zn,ke=mt*ye-Cn*Zn,et=Ct*ye-Cn*ht,Tt=Be*et-rt*ke+Mt*xe+Ot*Ce-En*qn+$n*yr;return Tt?(Tt=1/Tt,z[0]=(Dn*et-Xn*ke+Gn*xe)*Tt,z[1]=($t*ke-le*et-an*xe)*Tt,z[2]=(Zn*$n-ht*En+ye*Ot)*Tt,z[3]=(Ct*En-mt*$n-Cn*Ot)*Tt,z[4]=(Xn*Ce-hn*et-Gn*qn)*Tt,z[5]=(ot*et-$t*Ce+an*qn)*Tt,z[6]=(ht*Mt-Pn*$n-ye*rt)*Tt,z[7]=(dn*$n-Ct*Mt+Cn*rt)*Tt,z[8]=(hn*ke-Dn*Ce+Gn*yr)*Tt,z[9]=(le*Ce-ot*ke-an*yr)*Tt,z[10]=(Pn*En-Zn*Mt+ye*Be)*Tt,z[11]=(mt*Mt-dn*En-Cn*Be)*Tt,z[12]=(Dn*qn-hn*xe-Xn*yr)*Tt,z[13]=(ot*xe-le*qn+$t*yr)*Tt,z[14]=(Zn*rt-Pn*Ot-ht*Be)*Tt,z[15]=(dn*Ot-mt*rt+Ct*Be)*Tt,z):null}function Ge(z,ue){var ot=ue[0],le=ue[1],$t=ue[2],an=ue[3],hn=ue[4],Dn=ue[5],Xn=ue[6],Gn=ue[7],dn=ue[8],mt=ue[9],Ct=ue[10],Cn=ue[11],Pn=ue[12],Zn=ue[13],ht=ue[14],ye=ue[15];return z[0]=Dn*(Ct*ye-Cn*ht)-mt*(Xn*ye-Gn*ht)+Zn*(Xn*Cn-Gn*Ct),z[1]=-(le*(Ct*ye-Cn*ht)-mt*($t*ye-an*ht)+Zn*($t*Cn-an*Ct)),z[2]=le*(Xn*ye-Gn*ht)-Dn*($t*ye-an*ht)+Zn*($t*Gn-an*Xn),z[3]=-(le*(Xn*Cn-Gn*Ct)-Dn*($t*Cn-an*Ct)+mt*($t*Gn-an*Xn)),z[4]=-(hn*(Ct*ye-Cn*ht)-dn*(Xn*ye-Gn*ht)+Pn*(Xn*Cn-Gn*Ct)),z[5]=ot*(Ct*ye-Cn*ht)-dn*($t*ye-an*ht)+Pn*($t*Cn-an*Ct),z[6]=-(ot*(Xn*ye-Gn*ht)-hn*($t*ye-an*ht)+Pn*($t*Gn-an*Xn)),z[7]=ot*(Xn*Cn-Gn*Ct)-hn*($t*Cn-an*Ct)+dn*($t*Gn-an*Xn),z[8]=hn*(mt*ye-Cn*Zn)-dn*(Dn*ye-Gn*Zn)+Pn*(Dn*Cn-Gn*mt),z[9]=-(ot*(mt*ye-Cn*Zn)-dn*(le*ye-an*Zn)+Pn*(le*Cn-an*mt)),z[10]=ot*(Dn*ye-Gn*Zn)-hn*(le*ye-an*Zn)+Pn*(le*Gn-an*Dn),z[11]=-(ot*(Dn*Cn-Gn*mt)-hn*(le*Cn-an*mt)+dn*(le*Gn-an*Dn)),z[12]=-(hn*(mt*ht-Ct*Zn)-dn*(Dn*ht-Xn*Zn)+Pn*(Dn*Ct-Xn*mt)),z[13]=ot*(mt*ht-Ct*Zn)-dn*(le*ht-$t*Zn)+Pn*(le*Ct-$t*mt),z[14]=-(ot*(Dn*ht-Xn*Zn)-hn*(le*ht-$t*Zn)+Pn*(le*Xn-$t*Dn)),z[15]=ot*(Dn*Ct-Xn*mt)-hn*(le*Ct-$t*mt)+dn*(le*Xn-$t*Dn),z}function ee(z){var ue=z[0],ot=z[1],le=z[2],$t=z[3],an=z[4],hn=z[5],Dn=z[6],Xn=z[7],Gn=z[8],dn=z[9],mt=z[10],Ct=z[11],Cn=z[12],Pn=z[13],Zn=z[14],ht=z[15],ye=ue*hn-ot*an,Be=ue*Dn-le*an,rt=ue*Xn-$t*an,Mt=ot*Dn-le*hn,Ot=ot*Xn-$t*hn,En=le*Xn-$t*Dn,$n=Gn*Pn-dn*Cn,yr=Gn*Zn-mt*Cn,qn=Gn*ht-Ct*Cn,Ce=dn*Zn-mt*Pn,xe=dn*ht-Ct*Pn,ke=mt*ht-Ct*Zn;return ye*ke-Be*xe+rt*Ce+Mt*qn-Ot*yr+En*$n}function me(z,ue,ot){var le=ue[0],$t=ue[1],an=ue[2],hn=ue[3],Dn=ue[4],Xn=ue[5],Gn=ue[6],dn=ue[7],mt=ue[8],Ct=ue[9],Cn=ue[10],Pn=ue[11],Zn=ue[12],ht=ue[13],ye=ue[14],Be=ue[15],rt=ot[0],Mt=ot[1],Ot=ot[2],En=ot[3];return z[0]=rt*le+Mt*Dn+Ot*mt+En*Zn,z[1]=rt*$t+Mt*Xn+Ot*Ct+En*ht,z[2]=rt*an+Mt*Gn+Ot*Cn+En*ye,z[3]=rt*hn+Mt*dn+Ot*Pn+En*Be,rt=ot[4],Mt=ot[5],Ot=ot[6],En=ot[7],z[4]=rt*le+Mt*Dn+Ot*mt+En*Zn,z[5]=rt*$t+Mt*Xn+Ot*Ct+En*ht,z[6]=rt*an+Mt*Gn+Ot*Cn+En*ye,z[7]=rt*hn+Mt*dn+Ot*Pn+En*Be,rt=ot[8],Mt=ot[9],Ot=ot[10],En=ot[11],z[8]=rt*le+Mt*Dn+Ot*mt+En*Zn,z[9]=rt*$t+Mt*Xn+Ot*Ct+En*ht,z[10]=rt*an+Mt*Gn+Ot*Cn+En*ye,z[11]=rt*hn+Mt*dn+Ot*Pn+En*Be,rt=ot[12],Mt=ot[13],Ot=ot[14],En=ot[15],z[12]=rt*le+Mt*Dn+Ot*mt+En*Zn,z[13]=rt*$t+Mt*Xn+Ot*Ct+En*ht,z[14]=rt*an+Mt*Gn+Ot*Cn+En*ye,z[15]=rt*hn+Mt*dn+Ot*Pn+En*Be,z}function Le(z,ue,ot){var le=ot[0],$t=ot[1],an=ot[2],hn,Dn,Xn,Gn,dn,mt,Ct,Cn,Pn,Zn,ht,ye;return ue===z?(z[12]=ue[0]*le+ue[4]*$t+ue[8]*an+ue[12],z[13]=ue[1]*le+ue[5]*$t+ue[9]*an+ue[13],z[14]=ue[2]*le+ue[6]*$t+ue[10]*an+ue[14],z[15]=ue[3]*le+ue[7]*$t+ue[11]*an+ue[15]):(hn=ue[0],Dn=ue[1],Xn=ue[2],Gn=ue[3],dn=ue[4],mt=ue[5],Ct=ue[6],Cn=ue[7],Pn=ue[8],Zn=ue[9],ht=ue[10],ye=ue[11],z[0]=hn,z[1]=Dn,z[2]=Xn,z[3]=Gn,z[4]=dn,z[5]=mt,z[6]=Ct,z[7]=Cn,z[8]=Pn,z[9]=Zn,z[10]=ht,z[11]=ye,z[12]=hn*le+dn*$t+Pn*an+ue[12],z[13]=Dn*le+mt*$t+Zn*an+ue[13],z[14]=Xn*le+Ct*$t+ht*an+ue[14],z[15]=Gn*le+Cn*$t+ye*an+ue[15]),z}function be(z,ue,ot){var le=ot[0],$t=ot[1],an=ot[2];return z[0]=ue[0]*le,z[1]=ue[1]*le,z[2]=ue[2]*le,z[3]=ue[3]*le,z[4]=ue[4]*$t,z[5]=ue[5]*$t,z[6]=ue[6]*$t,z[7]=ue[7]*$t,z[8]=ue[8]*an,z[9]=ue[9]*an,z[10]=ue[10]*an,z[11]=ue[11]*an,z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15],z}function Oe(z,ue,ot,le){var $t=le[0],an=le[1],hn=le[2],Dn=Math.hypot($t,an,hn),Xn,Gn,dn,mt,Ct,Cn,Pn,Zn,ht,ye,Be,rt,Mt,Ot,En,$n,yr,qn,Ce,xe,ke,et,Tt,Yt;return Dn<J.Ib?null:(Dn=1/Dn,$t*=Dn,an*=Dn,hn*=Dn,Xn=Math.sin(ot),Gn=Math.cos(ot),dn=1-Gn,mt=ue[0],Ct=ue[1],Cn=ue[2],Pn=ue[3],Zn=ue[4],ht=ue[5],ye=ue[6],Be=ue[7],rt=ue[8],Mt=ue[9],Ot=ue[10],En=ue[11],$n=$t*$t*dn+Gn,yr=an*$t*dn+hn*Xn,qn=hn*$t*dn-an*Xn,Ce=$t*an*dn-hn*Xn,xe=an*an*dn+Gn,ke=hn*an*dn+$t*Xn,et=$t*hn*dn+an*Xn,Tt=an*hn*dn-$t*Xn,Yt=hn*hn*dn+Gn,z[0]=mt*$n+Zn*yr+rt*qn,z[1]=Ct*$n+ht*yr+Mt*qn,z[2]=Cn*$n+ye*yr+Ot*qn,z[3]=Pn*$n+Be*yr+En*qn,z[4]=mt*Ce+Zn*xe+rt*ke,z[5]=Ct*Ce+ht*xe+Mt*ke,z[6]=Cn*Ce+ye*xe+Ot*ke,z[7]=Pn*Ce+Be*xe+En*ke,z[8]=mt*et+Zn*Tt+rt*Yt,z[9]=Ct*et+ht*Tt+Mt*Yt,z[10]=Cn*et+ye*Tt+Ot*Yt,z[11]=Pn*et+Be*Tt+En*Yt,ue!==z&&(z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15]),z)}function fe(z,ue,ot){var le=Math.sin(ot),$t=Math.cos(ot),an=ue[4],hn=ue[5],Dn=ue[6],Xn=ue[7],Gn=ue[8],dn=ue[9],mt=ue[10],Ct=ue[11];return ue!==z&&(z[0]=ue[0],z[1]=ue[1],z[2]=ue[2],z[3]=ue[3],z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15]),z[4]=an*$t+Gn*le,z[5]=hn*$t+dn*le,z[6]=Dn*$t+mt*le,z[7]=Xn*$t+Ct*le,z[8]=Gn*$t-an*le,z[9]=dn*$t-hn*le,z[10]=mt*$t-Dn*le,z[11]=Ct*$t-Xn*le,z}function He(z,ue,ot){var le=Math.sin(ot),$t=Math.cos(ot),an=ue[0],hn=ue[1],Dn=ue[2],Xn=ue[3],Gn=ue[8],dn=ue[9],mt=ue[10],Ct=ue[11];return ue!==z&&(z[4]=ue[4],z[5]=ue[5],z[6]=ue[6],z[7]=ue[7],z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15]),z[0]=an*$t-Gn*le,z[1]=hn*$t-dn*le,z[2]=Dn*$t-mt*le,z[3]=Xn*$t-Ct*le,z[8]=an*le+Gn*$t,z[9]=hn*le+dn*$t,z[10]=Dn*le+mt*$t,z[11]=Xn*le+Ct*$t,z}function bt(z,ue,ot){var le=Math.sin(ot),$t=Math.cos(ot),an=ue[0],hn=ue[1],Dn=ue[2],Xn=ue[3],Gn=ue[4],dn=ue[5],mt=ue[6],Ct=ue[7];return ue!==z&&(z[8]=ue[8],z[9]=ue[9],z[10]=ue[10],z[11]=ue[11],z[12]=ue[12],z[13]=ue[13],z[14]=ue[14],z[15]=ue[15]),z[0]=an*$t+Gn*le,z[1]=hn*$t+dn*le,z[2]=Dn*$t+mt*le,z[3]=Xn*$t+Ct*le,z[4]=Gn*$t-an*le,z[5]=dn*$t-hn*le,z[6]=mt*$t-Dn*le,z[7]=Ct*$t-Xn*le,z}function dt(z,ue){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=ue[0],z[13]=ue[1],z[14]=ue[2],z[15]=1,z}function Nt(z,ue){return z[0]=ue[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=ue[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=ue[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function ct(z,ue,ot){var le=ot[0],$t=ot[1],an=ot[2],hn=Math.hypot(le,$t,an),Dn,Xn,Gn;return hn<J.Ib?null:(hn=1/hn,le*=hn,$t*=hn,an*=hn,Dn=Math.sin(ue),Xn=Math.cos(ue),Gn=1-Xn,z[0]=le*le*Gn+Xn,z[1]=$t*le*Gn+an*Dn,z[2]=an*le*Gn-$t*Dn,z[3]=0,z[4]=le*$t*Gn-an*Dn,z[5]=$t*$t*Gn+Xn,z[6]=an*$t*Gn+le*Dn,z[7]=0,z[8]=le*an*Gn+$t*Dn,z[9]=$t*an*Gn-le*Dn,z[10]=an*an*Gn+Xn,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function lt(z,ue){var ot=Math.sin(ue),le=Math.cos(ue);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=le,z[6]=ot,z[7]=0,z[8]=0,z[9]=-ot,z[10]=le,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function Ie(z,ue){var ot=Math.sin(ue),le=Math.cos(ue);return z[0]=le,z[1]=0,z[2]=-ot,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=ot,z[9]=0,z[10]=le,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function Ae(z,ue){var ot=Math.sin(ue),le=Math.cos(ue);return z[0]=le,z[1]=ot,z[2]=0,z[3]=0,z[4]=-ot,z[5]=le,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function pt(z,ue,ot){var le=ue[0],$t=ue[1],an=ue[2],hn=ue[3],Dn=le+le,Xn=$t+$t,Gn=an+an,dn=le*Dn,mt=le*Xn,Ct=le*Gn,Cn=$t*Xn,Pn=$t*Gn,Zn=an*Gn,ht=hn*Dn,ye=hn*Xn,Be=hn*Gn;return z[0]=1-(Cn+Zn),z[1]=mt+Be,z[2]=Ct-ye,z[3]=0,z[4]=mt-Be,z[5]=1-(dn+Zn),z[6]=Pn+ht,z[7]=0,z[8]=Ct+ye,z[9]=Pn-ht,z[10]=1-(dn+Cn),z[11]=0,z[12]=ot[0],z[13]=ot[1],z[14]=ot[2],z[15]=1,z}function ut(z,ue){var ot=new J.WT(3),le=-ue[0],$t=-ue[1],an=-ue[2],hn=ue[3],Dn=ue[4],Xn=ue[5],Gn=ue[6],dn=ue[7],mt=le*le+$t*$t+an*an+hn*hn;return mt>0?(ot[0]=(Dn*hn+dn*le+Xn*an-Gn*$t)*2/mt,ot[1]=(Xn*hn+dn*$t+Gn*le-Dn*an)*2/mt,ot[2]=(Gn*hn+dn*an+Dn*$t-Xn*le)*2/mt):(ot[0]=(Dn*hn+dn*le+Xn*an-Gn*$t)*2,ot[1]=(Xn*hn+dn*$t+Gn*le-Dn*an)*2,ot[2]=(Gn*hn+dn*an+Dn*$t-Xn*le)*2),pt(z,ue,ot),z}function Et(z,ue){return z[0]=ue[12],z[1]=ue[13],z[2]=ue[14],z}function cn(z,ue){var ot=ue[0],le=ue[1],$t=ue[2],an=ue[4],hn=ue[5],Dn=ue[6],Xn=ue[8],Gn=ue[9],dn=ue[10];return z[0]=Math.hypot(ot,le,$t),z[1]=Math.hypot(an,hn,Dn),z[2]=Math.hypot(Xn,Gn,dn),z}function ze(z,ue){var ot=new J.WT(3);cn(ot,ue);var le=1/ot[0],$t=1/ot[1],an=1/ot[2],hn=ue[0]*le,Dn=ue[1]*$t,Xn=ue[2]*an,Gn=ue[4]*le,dn=ue[5]*$t,mt=ue[6]*an,Ct=ue[8]*le,Cn=ue[9]*$t,Pn=ue[10]*an,Zn=hn+dn+Pn,ht=0;return Zn>0?(ht=Math.sqrt(Zn+1)*2,z[3]=.25*ht,z[0]=(mt-Cn)/ht,z[1]=(Ct-Xn)/ht,z[2]=(Dn-Gn)/ht):hn>dn&&hn>Pn?(ht=Math.sqrt(1+hn-dn-Pn)*2,z[3]=(mt-Cn)/ht,z[0]=.25*ht,z[1]=(Dn+Gn)/ht,z[2]=(Ct+Xn)/ht):dn>Pn?(ht=Math.sqrt(1+dn-hn-Pn)*2,z[3]=(Ct-Xn)/ht,z[0]=(Dn+Gn)/ht,z[1]=.25*ht,z[2]=(mt+Cn)/ht):(ht=Math.sqrt(1+Pn-hn-dn)*2,z[3]=(Dn-Gn)/ht,z[0]=(Ct+Xn)/ht,z[1]=(mt+Cn)/ht,z[2]=.25*ht),z}function St(z,ue,ot,le){var $t=ue[0],an=ue[1],hn=ue[2],Dn=ue[3],Xn=$t+$t,Gn=an+an,dn=hn+hn,mt=$t*Xn,Ct=$t*Gn,Cn=$t*dn,Pn=an*Gn,Zn=an*dn,ht=hn*dn,ye=Dn*Xn,Be=Dn*Gn,rt=Dn*dn,Mt=le[0],Ot=le[1],En=le[2];return z[0]=(1-(Pn+ht))*Mt,z[1]=(Ct+rt)*Mt,z[2]=(Cn-Be)*Mt,z[3]=0,z[4]=(Ct-rt)*Ot,z[5]=(1-(mt+ht))*Ot,z[6]=(Zn+ye)*Ot,z[7]=0,z[8]=(Cn+Be)*En,z[9]=(Zn-ye)*En,z[10]=(1-(mt+Pn))*En,z[11]=0,z[12]=ot[0],z[13]=ot[1],z[14]=ot[2],z[15]=1,z}function we(z,ue,ot,le,$t){var an=ue[0],hn=ue[1],Dn=ue[2],Xn=ue[3],Gn=an+an,dn=hn+hn,mt=Dn+Dn,Ct=an*Gn,Cn=an*dn,Pn=an*mt,Zn=hn*dn,ht=hn*mt,ye=Dn*mt,Be=Xn*Gn,rt=Xn*dn,Mt=Xn*mt,Ot=le[0],En=le[1],$n=le[2],yr=$t[0],qn=$t[1],Ce=$t[2],xe=(1-(Zn+ye))*Ot,ke=(Cn+Mt)*Ot,et=(Pn-rt)*Ot,Tt=(Cn-Mt)*En,Yt=(1-(Ct+ye))*En,pn=(ht+Be)*En,_t=(Pn+rt)*$n,qt=(ht-Be)*$n,Qn=(1-(Ct+Zn))*$n;return z[0]=xe,z[1]=ke,z[2]=et,z[3]=0,z[4]=Tt,z[5]=Yt,z[6]=pn,z[7]=0,z[8]=_t,z[9]=qt,z[10]=Qn,z[11]=0,z[12]=ot[0]+yr-(xe*yr+Tt*qn+_t*Ce),z[13]=ot[1]+qn-(ke*yr+Yt*qn+qt*Ce),z[14]=ot[2]+Ce-(et*yr+pn*qn+Qn*Ce),z[15]=1,z}function nt(z,ue){var ot=ue[0],le=ue[1],$t=ue[2],an=ue[3],hn=ot+ot,Dn=le+le,Xn=$t+$t,Gn=ot*hn,dn=le*hn,mt=le*Dn,Ct=$t*hn,Cn=$t*Dn,Pn=$t*Xn,Zn=an*hn,ht=an*Dn,ye=an*Xn;return z[0]=1-mt-Pn,z[1]=dn+ye,z[2]=Ct-ht,z[3]=0,z[4]=dn-ye,z[5]=1-Gn-Pn,z[6]=Cn+Zn,z[7]=0,z[8]=Ct+ht,z[9]=Cn-Zn,z[10]=1-Gn-mt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function Xe(z,ue,ot,le,$t,an,hn){var Dn=1/(ot-ue),Xn=1/($t-le),Gn=1/(an-hn);return z[0]=an*2*Dn,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=an*2*Xn,z[6]=0,z[7]=0,z[8]=(ot+ue)*Dn,z[9]=($t+le)*Xn,z[10]=(hn+an)*Gn,z[11]=-1,z[12]=0,z[13]=0,z[14]=hn*an*2*Gn,z[15]=0,z}function Ze(z,ue,ot,le,$t){var an=1/Math.tan(ue/2),hn;return z[0]=an/ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=an,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,$t!=null&&$t!==1/0?(hn=1/(le-$t),z[10]=($t+le)*hn,z[14]=2*$t*le*hn):(z[10]=-1,z[14]=-2*le),z}var Rt=Ze;function yt(z,ue,ot,le,$t){var an=1/Math.tan(ue/2),hn;return z[0]=an/ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=an,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,$t!=null&&$t!==1/0?(hn=1/(le-$t),z[10]=$t*hn,z[14]=$t*le*hn):(z[10]=-1,z[14]=-le),z}function Me(z,ue,ot,le){var $t=Math.tan(ue.upDegrees*Math.PI/180),an=Math.tan(ue.downDegrees*Math.PI/180),hn=Math.tan(ue.leftDegrees*Math.PI/180),Dn=Math.tan(ue.rightDegrees*Math.PI/180),Xn=2/(hn+Dn),Gn=2/($t+an);return z[0]=Xn,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=Gn,z[6]=0,z[7]=0,z[8]=-((hn-Dn)*Xn*.5),z[9]=($t-an)*Gn*.5,z[10]=le/(ot-le),z[11]=-1,z[12]=0,z[13]=0,z[14]=le*ot/(ot-le),z[15]=0,z}function Gt(z,ue,ot,le,$t,an,hn){var Dn=1/(ue-ot),Xn=1/(le-$t),Gn=1/(an-hn);return z[0]=-2*Dn,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*Xn,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*Gn,z[11]=0,z[12]=(ue+ot)*Dn,z[13]=($t+le)*Xn,z[14]=(hn+an)*Gn,z[15]=1,z}var ln=Gt;function Ln(z,ue,ot,le,$t,an,hn){var Dn=1/(ue-ot),Xn=1/(le-$t),Gn=1/(an-hn);return z[0]=-2*Dn,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*Xn,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=Gn,z[11]=0,z[12]=(ue+ot)*Dn,z[13]=($t+le)*Xn,z[14]=an*Gn,z[15]=1,z}function kn(z,ue,ot,le){var $t,an,hn,Dn,Xn,Gn,dn,mt,Ct,Cn,Pn=ue[0],Zn=ue[1],ht=ue[2],ye=le[0],Be=le[1],rt=le[2],Mt=ot[0],Ot=ot[1],En=ot[2];return Math.abs(Pn-Mt)<J.Ib&&Math.abs(Zn-Ot)<J.Ib&&Math.abs(ht-En)<J.Ib?ae(z):(dn=Pn-Mt,mt=Zn-Ot,Ct=ht-En,Cn=1/Math.hypot(dn,mt,Ct),dn*=Cn,mt*=Cn,Ct*=Cn,$t=Be*Ct-rt*mt,an=rt*dn-ye*Ct,hn=ye*mt-Be*dn,Cn=Math.hypot($t,an,hn),Cn?(Cn=1/Cn,$t*=Cn,an*=Cn,hn*=Cn):($t=0,an=0,hn=0),Dn=mt*hn-Ct*an,Xn=Ct*$t-dn*hn,Gn=dn*an-mt*$t,Cn=Math.hypot(Dn,Xn,Gn),Cn?(Cn=1/Cn,Dn*=Cn,Xn*=Cn,Gn*=Cn):(Dn=0,Xn=0,Gn=0),z[0]=$t,z[1]=Dn,z[2]=dn,z[3]=0,z[4]=an,z[5]=Xn,z[6]=mt,z[7]=0,z[8]=hn,z[9]=Gn,z[10]=Ct,z[11]=0,z[12]=-($t*Pn+an*Zn+hn*ht),z[13]=-(Dn*Pn+Xn*Zn+Gn*ht),z[14]=-(dn*Pn+mt*Zn+Ct*ht),z[15]=1,z)}function lr(z,ue,ot,le){var $t=ue[0],an=ue[1],hn=ue[2],Dn=le[0],Xn=le[1],Gn=le[2],dn=$t-ot[0],mt=an-ot[1],Ct=hn-ot[2],Cn=dn*dn+mt*mt+Ct*Ct;Cn>0&&(Cn=1/Math.sqrt(Cn),dn*=Cn,mt*=Cn,Ct*=Cn);var Pn=Xn*Ct-Gn*mt,Zn=Gn*dn-Dn*Ct,ht=Dn*mt-Xn*dn;return Cn=Pn*Pn+Zn*Zn+ht*ht,Cn>0&&(Cn=1/Math.sqrt(Cn),Pn*=Cn,Zn*=Cn,ht*=Cn),z[0]=Pn,z[1]=Zn,z[2]=ht,z[3]=0,z[4]=mt*ht-Ct*Zn,z[5]=Ct*Pn-dn*ht,z[6]=dn*Zn-mt*Pn,z[7]=0,z[8]=dn,z[9]=mt,z[10]=Ct,z[11]=0,z[12]=$t,z[13]=an,z[14]=hn,z[15]=1,z}function zt(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function Kt(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function yn(z,ue,ot){return z[0]=ue[0]+ot[0],z[1]=ue[1]+ot[1],z[2]=ue[2]+ot[2],z[3]=ue[3]+ot[3],z[4]=ue[4]+ot[4],z[5]=ue[5]+ot[5],z[6]=ue[6]+ot[6],z[7]=ue[7]+ot[7],z[8]=ue[8]+ot[8],z[9]=ue[9]+ot[9],z[10]=ue[10]+ot[10],z[11]=ue[11]+ot[11],z[12]=ue[12]+ot[12],z[13]=ue[13]+ot[13],z[14]=ue[14]+ot[14],z[15]=ue[15]+ot[15],z}function Kn(z,ue,ot){return z[0]=ue[0]-ot[0],z[1]=ue[1]-ot[1],z[2]=ue[2]-ot[2],z[3]=ue[3]-ot[3],z[4]=ue[4]-ot[4],z[5]=ue[5]-ot[5],z[6]=ue[6]-ot[6],z[7]=ue[7]-ot[7],z[8]=ue[8]-ot[8],z[9]=ue[9]-ot[9],z[10]=ue[10]-ot[10],z[11]=ue[11]-ot[11],z[12]=ue[12]-ot[12],z[13]=ue[13]-ot[13],z[14]=ue[14]-ot[14],z[15]=ue[15]-ot[15],z}function rn(z,ue,ot){return z[0]=ue[0]*ot,z[1]=ue[1]*ot,z[2]=ue[2]*ot,z[3]=ue[3]*ot,z[4]=ue[4]*ot,z[5]=ue[5]*ot,z[6]=ue[6]*ot,z[7]=ue[7]*ot,z[8]=ue[8]*ot,z[9]=ue[9]*ot,z[10]=ue[10]*ot,z[11]=ue[11]*ot,z[12]=ue[12]*ot,z[13]=ue[13]*ot,z[14]=ue[14]*ot,z[15]=ue[15]*ot,z}function Wt(z,ue,ot,le){return z[0]=ue[0]+ot[0]*le,z[1]=ue[1]+ot[1]*le,z[2]=ue[2]+ot[2]*le,z[3]=ue[3]+ot[3]*le,z[4]=ue[4]+ot[4]*le,z[5]=ue[5]+ot[5]*le,z[6]=ue[6]+ot[6]*le,z[7]=ue[7]+ot[7]*le,z[8]=ue[8]+ot[8]*le,z[9]=ue[9]+ot[9]*le,z[10]=ue[10]+ot[10]*le,z[11]=ue[11]+ot[11]*le,z[12]=ue[12]+ot[12]*le,z[13]=ue[13]+ot[13]*le,z[14]=ue[14]+ot[14]*le,z[15]=ue[15]+ot[15]*le,z}function Pt(z,ue){return z[0]===ue[0]&&z[1]===ue[1]&&z[2]===ue[2]&&z[3]===ue[3]&&z[4]===ue[4]&&z[5]===ue[5]&&z[6]===ue[6]&&z[7]===ue[7]&&z[8]===ue[8]&&z[9]===ue[9]&&z[10]===ue[10]&&z[11]===ue[11]&&z[12]===ue[12]&&z[13]===ue[13]&&z[14]===ue[14]&&z[15]===ue[15]}function Pe(z,ue){var ot=z[0],le=z[1],$t=z[2],an=z[3],hn=z[4],Dn=z[5],Xn=z[6],Gn=z[7],dn=z[8],mt=z[9],Ct=z[10],Cn=z[11],Pn=z[12],Zn=z[13],ht=z[14],ye=z[15],Be=ue[0],rt=ue[1],Mt=ue[2],Ot=ue[3],En=ue[4],$n=ue[5],yr=ue[6],qn=ue[7],Ce=ue[8],xe=ue[9],ke=ue[10],et=ue[11],Tt=ue[12],Yt=ue[13],pn=ue[14],_t=ue[15];return Math.abs(ot-Be)<=J.Ib*Math.max(1,Math.abs(ot),Math.abs(Be))&&Math.abs(le-rt)<=J.Ib*Math.max(1,Math.abs(le),Math.abs(rt))&&Math.abs($t-Mt)<=J.Ib*Math.max(1,Math.abs($t),Math.abs(Mt))&&Math.abs(an-Ot)<=J.Ib*Math.max(1,Math.abs(an),Math.abs(Ot))&&Math.abs(hn-En)<=J.Ib*Math.max(1,Math.abs(hn),Math.abs(En))&&Math.abs(Dn-$n)<=J.Ib*Math.max(1,Math.abs(Dn),Math.abs($n))&&Math.abs(Xn-yr)<=J.Ib*Math.max(1,Math.abs(Xn),Math.abs(yr))&&Math.abs(Gn-qn)<=J.Ib*Math.max(1,Math.abs(Gn),Math.abs(qn))&&Math.abs(dn-Ce)<=J.Ib*Math.max(1,Math.abs(dn),Math.abs(Ce))&&Math.abs(mt-xe)<=J.Ib*Math.max(1,Math.abs(mt),Math.abs(xe))&&Math.abs(Ct-ke)<=J.Ib*Math.max(1,Math.abs(Ct),Math.abs(ke))&&Math.abs(Cn-et)<=J.Ib*Math.max(1,Math.abs(Cn),Math.abs(et))&&Math.abs(Pn-Tt)<=J.Ib*Math.max(1,Math.abs(Pn),Math.abs(Tt))&&Math.abs(Zn-Yt)<=J.Ib*Math.max(1,Math.abs(Zn),Math.abs(Yt))&&Math.abs(ht-pn)<=J.Ib*Math.max(1,Math.abs(ht),Math.abs(pn))&&Math.abs(ye-_t)<=J.Ib*Math.max(1,Math.abs(ye),Math.abs(_t))}var Qe=me,Bt=Kn},31437:function(Ht,W,D){"use strict";D.d(W,{$X:function(){return Se},AK:function(){return pt},Fv:function(){return Ae},I6:function(){return Me},IH:function(){return ae},JG:function(){return te},Ue:function(){return Z},al:function(){return ve},lu:function(){return Ln},t7:function(){return Et},t8:function(){return se},tk:function(){return lt}});var J=D(49685);function Z(){var rn=new J.WT(2);return J.WT!=Float32Array&&(rn[0]=0,rn[1]=0),rn}function E(rn){var Wt=new glMatrix.ARRAY_TYPE(2);return Wt[0]=rn[0],Wt[1]=rn[1],Wt}function ve(rn,Wt){var Pt=new J.WT(2);return Pt[0]=rn,Pt[1]=Wt,Pt}function te(rn,Wt){return rn[0]=Wt[0],rn[1]=Wt[1],rn}function se(rn,Wt,Pt){return rn[0]=Wt,rn[1]=Pt,rn}function ae(rn,Wt,Pt){return rn[0]=Wt[0]+Pt[0],rn[1]=Wt[1]+Pt[1],rn}function Se(rn,Wt,Pt){return rn[0]=Wt[0]-Pt[0],rn[1]=Wt[1]-Pt[1],rn}function oe(rn,Wt,Pt){return rn[0]=Wt[0]*Pt[0],rn[1]=Wt[1]*Pt[1],rn}function Ge(rn,Wt,Pt){return rn[0]=Wt[0]/Pt[0],rn[1]=Wt[1]/Pt[1],rn}function ee(rn,Wt){return rn[0]=Math.ceil(Wt[0]),rn[1]=Math.ceil(Wt[1]),rn}function me(rn,Wt){return rn[0]=Math.floor(Wt[0]),rn[1]=Math.floor(Wt[1]),rn}function Le(rn,Wt,Pt){return rn[0]=Math.min(Wt[0],Pt[0]),rn[1]=Math.min(Wt[1],Pt[1]),rn}function be(rn,Wt,Pt){return rn[0]=Math.max(Wt[0],Pt[0]),rn[1]=Math.max(Wt[1],Pt[1]),rn}function Oe(rn,Wt){return rn[0]=Math.round(Wt[0]),rn[1]=Math.round(Wt[1]),rn}function fe(rn,Wt,Pt){return rn[0]=Wt[0]*Pt,rn[1]=Wt[1]*Pt,rn}function He(rn,Wt,Pt,Pe){return rn[0]=Wt[0]+Pt[0]*Pe,rn[1]=Wt[1]+Pt[1]*Pe,rn}function bt(rn,Wt){var Pt=Wt[0]-rn[0],Pe=Wt[1]-rn[1];return Math.hypot(Pt,Pe)}function dt(rn,Wt){var Pt=Wt[0]-rn[0],Pe=Wt[1]-rn[1];return Pt*Pt+Pe*Pe}function Nt(rn){var Wt=rn[0],Pt=rn[1];return Math.hypot(Wt,Pt)}function ct(rn){var Wt=rn[0],Pt=rn[1];return Wt*Wt+Pt*Pt}function lt(rn,Wt){return rn[0]=-Wt[0],rn[1]=-Wt[1],rn}function Ie(rn,Wt){return rn[0]=1/Wt[0],rn[1]=1/Wt[1],rn}function Ae(rn,Wt){var Pt=Wt[0],Pe=Wt[1],Qe=Pt*Pt+Pe*Pe;return Qe>0&&(Qe=1/Math.sqrt(Qe)),rn[0]=Wt[0]*Qe,rn[1]=Wt[1]*Qe,rn}function pt(rn,Wt){return rn[0]*Wt[0]+rn[1]*Wt[1]}function ut(rn,Wt,Pt){var Pe=Wt[0]*Pt[1]-Wt[1]*Pt[0];return rn[0]=rn[1]=0,rn[2]=Pe,rn}function Et(rn,Wt,Pt,Pe){var Qe=Wt[0],Bt=Wt[1];return rn[0]=Qe+Pe*(Pt[0]-Qe),rn[1]=Bt+Pe*(Pt[1]-Bt),rn}function cn(rn,Wt){Wt=Wt||1;var Pt=glMatrix.RANDOM()*2*Math.PI;return rn[0]=Math.cos(Pt)*Wt,rn[1]=Math.sin(Pt)*Wt,rn}function ze(rn,Wt,Pt){var Pe=Wt[0],Qe=Wt[1];return rn[0]=Pt[0]*Pe+Pt[2]*Qe,rn[1]=Pt[1]*Pe+Pt[3]*Qe,rn}function St(rn,Wt,Pt){var Pe=Wt[0],Qe=Wt[1];return rn[0]=Pt[0]*Pe+Pt[2]*Qe+Pt[4],rn[1]=Pt[1]*Pe+Pt[3]*Qe+Pt[5],rn}function we(rn,Wt,Pt){var Pe=Wt[0],Qe=Wt[1];return rn[0]=Pt[0]*Pe+Pt[3]*Qe+Pt[6],rn[1]=Pt[1]*Pe+Pt[4]*Qe+Pt[7],rn}function nt(rn,Wt,Pt){var Pe=Wt[0],Qe=Wt[1];return rn[0]=Pt[0]*Pe+Pt[4]*Qe+Pt[12],rn[1]=Pt[1]*Pe+Pt[5]*Qe+Pt[13],rn}function Xe(rn,Wt,Pt,Pe){var Qe=Wt[0]-Pt[0],Bt=Wt[1]-Pt[1],z=Math.sin(Pe),ue=Math.cos(Pe);return rn[0]=Qe*ue-Bt*z+Pt[0],rn[1]=Qe*z+Bt*ue+Pt[1],rn}function Ze(rn,Wt){var Pt=rn[0],Pe=rn[1],Qe=Wt[0],Bt=Wt[1],z=Math.sqrt(Pt*Pt+Pe*Pe)*Math.sqrt(Qe*Qe+Bt*Bt),ue=z&&(Pt*Qe+Pe*Bt)/z;return Math.acos(Math.min(Math.max(ue,-1),1))}function Rt(rn){return rn[0]=0,rn[1]=0,rn}function yt(rn){return"vec2("+rn[0]+", "+rn[1]+")"}function Me(rn,Wt){return rn[0]===Wt[0]&&rn[1]===Wt[1]}function Gt(rn,Wt){var Pt=rn[0],Pe=rn[1],Qe=Wt[0],Bt=Wt[1];return Math.abs(Pt-Qe)<=glMatrix.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Qe))&&Math.abs(Pe-Bt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Bt))}var ln=null,Ln=Se,kn=null,lr=null,zt=null,Kt=null,yn=null,Kn=function(){var rn=Z();return function(Wt,Pt,Pe,Qe,Bt,z){var ue,ot;for(Pt||(Pt=2),Pe||(Pe=0),Qe?ot=Math.min(Qe*Pt+Pe,Wt.length):ot=Wt.length,ue=Pe;ue<ot;ue+=Pt)rn[0]=Wt[ue],rn[1]=Wt[ue+1],Bt(rn,rn,z),Wt[ue]=rn[0],Wt[ue+1]=rn[1];return Wt}}()},77160:function(Ht,W,D){"use strict";D.d(W,{$X:function(){return oe},AK:function(){return pt},EU:function(){return Me},Fv:function(){return Ae},IH:function(){return Se},JG:function(){return se},Jp:function(){return Ge},TK:function(){return yn},Ue:function(){return Z},VC:function(){return Xe},Zh:function(){return rn},al:function(){return te},bA:function(){return He},d9:function(){return E},fF:function(){return we},fS:function(){return kn},kC:function(){return ut},kE:function(){return ve},kK:function(){return nt},lu:function(){return lr},t7:function(){return Et},t8:function(){return ae},tk:function(){return lt}});var J=D(49685);function Z(){var Pe=new J.WT(3);return J.WT!=Float32Array&&(Pe[0]=0,Pe[1]=0,Pe[2]=0),Pe}function E(Pe){var Qe=new J.WT(3);return Qe[0]=Pe[0],Qe[1]=Pe[1],Qe[2]=Pe[2],Qe}function ve(Pe){var Qe=Pe[0],Bt=Pe[1],z=Pe[2];return Math.hypot(Qe,Bt,z)}function te(Pe,Qe,Bt){var z=new J.WT(3);return z[0]=Pe,z[1]=Qe,z[2]=Bt,z}function se(Pe,Qe){return Pe[0]=Qe[0],Pe[1]=Qe[1],Pe[2]=Qe[2],Pe}function ae(Pe,Qe,Bt,z){return Pe[0]=Qe,Pe[1]=Bt,Pe[2]=z,Pe}function Se(Pe,Qe,Bt){return Pe[0]=Qe[0]+Bt[0],Pe[1]=Qe[1]+Bt[1],Pe[2]=Qe[2]+Bt[2],Pe}function oe(Pe,Qe,Bt){return Pe[0]=Qe[0]-Bt[0],Pe[1]=Qe[1]-Bt[1],Pe[2]=Qe[2]-Bt[2],Pe}function Ge(Pe,Qe,Bt){return Pe[0]=Qe[0]*Bt[0],Pe[1]=Qe[1]*Bt[1],Pe[2]=Qe[2]*Bt[2],Pe}function ee(Pe,Qe,Bt){return Pe[0]=Qe[0]/Bt[0],Pe[1]=Qe[1]/Bt[1],Pe[2]=Qe[2]/Bt[2],Pe}function me(Pe,Qe){return Pe[0]=Math.ceil(Qe[0]),Pe[1]=Math.ceil(Qe[1]),Pe[2]=Math.ceil(Qe[2]),Pe}function Le(Pe,Qe){return Pe[0]=Math.floor(Qe[0]),Pe[1]=Math.floor(Qe[1]),Pe[2]=Math.floor(Qe[2]),Pe}function be(Pe,Qe,Bt){return Pe[0]=Math.min(Qe[0],Bt[0]),Pe[1]=Math.min(Qe[1],Bt[1]),Pe[2]=Math.min(Qe[2],Bt[2]),Pe}function Oe(Pe,Qe,Bt){return Pe[0]=Math.max(Qe[0],Bt[0]),Pe[1]=Math.max(Qe[1],Bt[1]),Pe[2]=Math.max(Qe[2],Bt[2]),Pe}function fe(Pe,Qe){return Pe[0]=Math.round(Qe[0]),Pe[1]=Math.round(Qe[1]),Pe[2]=Math.round(Qe[2]),Pe}function He(Pe,Qe,Bt){return Pe[0]=Qe[0]*Bt,Pe[1]=Qe[1]*Bt,Pe[2]=Qe[2]*Bt,Pe}function bt(Pe,Qe,Bt,z){return Pe[0]=Qe[0]+Bt[0]*z,Pe[1]=Qe[1]+Bt[1]*z,Pe[2]=Qe[2]+Bt[2]*z,Pe}function dt(Pe,Qe){var Bt=Qe[0]-Pe[0],z=Qe[1]-Pe[1],ue=Qe[2]-Pe[2];return Math.hypot(Bt,z,ue)}function Nt(Pe,Qe){var Bt=Qe[0]-Pe[0],z=Qe[1]-Pe[1],ue=Qe[2]-Pe[2];return Bt*Bt+z*z+ue*ue}function ct(Pe){var Qe=Pe[0],Bt=Pe[1],z=Pe[2];return Qe*Qe+Bt*Bt+z*z}function lt(Pe,Qe){return Pe[0]=-Qe[0],Pe[1]=-Qe[1],Pe[2]=-Qe[2],Pe}function Ie(Pe,Qe){return Pe[0]=1/Qe[0],Pe[1]=1/Qe[1],Pe[2]=1/Qe[2],Pe}function Ae(Pe,Qe){var Bt=Qe[0],z=Qe[1],ue=Qe[2],ot=Bt*Bt+z*z+ue*ue;return ot>0&&(ot=1/Math.sqrt(ot)),Pe[0]=Qe[0]*ot,Pe[1]=Qe[1]*ot,Pe[2]=Qe[2]*ot,Pe}function pt(Pe,Qe){return Pe[0]*Qe[0]+Pe[1]*Qe[1]+Pe[2]*Qe[2]}function ut(Pe,Qe,Bt){var z=Qe[0],ue=Qe[1],ot=Qe[2],le=Bt[0],$t=Bt[1],an=Bt[2];return Pe[0]=ue*an-ot*$t,Pe[1]=ot*le-z*an,Pe[2]=z*$t-ue*le,Pe}function Et(Pe,Qe,Bt,z){var ue=Qe[0],ot=Qe[1],le=Qe[2];return Pe[0]=ue+z*(Bt[0]-ue),Pe[1]=ot+z*(Bt[1]-ot),Pe[2]=le+z*(Bt[2]-le),Pe}function cn(Pe,Qe,Bt,z,ue,ot){var le=ot*ot,$t=le*(2*ot-3)+1,an=le*(ot-2)+ot,hn=le*(ot-1),Dn=le*(3-2*ot);return Pe[0]=Qe[0]*$t+Bt[0]*an+z[0]*hn+ue[0]*Dn,Pe[1]=Qe[1]*$t+Bt[1]*an+z[1]*hn+ue[1]*Dn,Pe[2]=Qe[2]*$t+Bt[2]*an+z[2]*hn+ue[2]*Dn,Pe}function ze(Pe,Qe,Bt,z,ue,ot){var le=1-ot,$t=le*le,an=ot*ot,hn=$t*le,Dn=3*ot*$t,Xn=3*an*le,Gn=an*ot;return Pe[0]=Qe[0]*hn+Bt[0]*Dn+z[0]*Xn+ue[0]*Gn,Pe[1]=Qe[1]*hn+Bt[1]*Dn+z[1]*Xn+ue[1]*Gn,Pe[2]=Qe[2]*hn+Bt[2]*Dn+z[2]*Xn+ue[2]*Gn,Pe}function St(Pe,Qe){Qe=Qe||1;var Bt=glMatrix.RANDOM()*2*Math.PI,z=glMatrix.RANDOM()*2-1,ue=Math.sqrt(1-z*z)*Qe;return Pe[0]=Math.cos(Bt)*ue,Pe[1]=Math.sin(Bt)*ue,Pe[2]=z*Qe,Pe}function we(Pe,Qe,Bt){var z=Qe[0],ue=Qe[1],ot=Qe[2],le=Bt[3]*z+Bt[7]*ue+Bt[11]*ot+Bt[15];return le=le||1,Pe[0]=(Bt[0]*z+Bt[4]*ue+Bt[8]*ot+Bt[12])/le,Pe[1]=(Bt[1]*z+Bt[5]*ue+Bt[9]*ot+Bt[13])/le,Pe[2]=(Bt[2]*z+Bt[6]*ue+Bt[10]*ot+Bt[14])/le,Pe}function nt(Pe,Qe,Bt){var z=Qe[0],ue=Qe[1],ot=Qe[2];return Pe[0]=z*Bt[0]+ue*Bt[3]+ot*Bt[6],Pe[1]=z*Bt[1]+ue*Bt[4]+ot*Bt[7],Pe[2]=z*Bt[2]+ue*Bt[5]+ot*Bt[8],Pe}function Xe(Pe,Qe,Bt){var z=Bt[0],ue=Bt[1],ot=Bt[2],le=Bt[3],$t=Qe[0],an=Qe[1],hn=Qe[2],Dn=ue*hn-ot*an,Xn=ot*$t-z*hn,Gn=z*an-ue*$t,dn=ue*Gn-ot*Xn,mt=ot*Dn-z*Gn,Ct=z*Xn-ue*Dn,Cn=le*2;return Dn*=Cn,Xn*=Cn,Gn*=Cn,dn*=2,mt*=2,Ct*=2,Pe[0]=$t+Dn+dn,Pe[1]=an+Xn+mt,Pe[2]=hn+Gn+Ct,Pe}function Ze(Pe,Qe,Bt,z){var ue=[],ot=[];return ue[0]=Qe[0]-Bt[0],ue[1]=Qe[1]-Bt[1],ue[2]=Qe[2]-Bt[2],ot[0]=ue[0],ot[1]=ue[1]*Math.cos(z)-ue[2]*Math.sin(z),ot[2]=ue[1]*Math.sin(z)+ue[2]*Math.cos(z),Pe[0]=ot[0]+Bt[0],Pe[1]=ot[1]+Bt[1],Pe[2]=ot[2]+Bt[2],Pe}function Rt(Pe,Qe,Bt,z){var ue=[],ot=[];return ue[0]=Qe[0]-Bt[0],ue[1]=Qe[1]-Bt[1],ue[2]=Qe[2]-Bt[2],ot[0]=ue[2]*Math.sin(z)+ue[0]*Math.cos(z),ot[1]=ue[1],ot[2]=ue[2]*Math.cos(z)-ue[0]*Math.sin(z),Pe[0]=ot[0]+Bt[0],Pe[1]=ot[1]+Bt[1],Pe[2]=ot[2]+Bt[2],Pe}function yt(Pe,Qe,Bt,z){var ue=[],ot=[];return ue[0]=Qe[0]-Bt[0],ue[1]=Qe[1]-Bt[1],ue[2]=Qe[2]-Bt[2],ot[0]=ue[0]*Math.cos(z)-ue[1]*Math.sin(z),ot[1]=ue[0]*Math.sin(z)+ue[1]*Math.cos(z),ot[2]=ue[2],Pe[0]=ot[0]+Bt[0],Pe[1]=ot[1]+Bt[1],Pe[2]=ot[2]+Bt[2],Pe}function Me(Pe,Qe){var Bt=Pe[0],z=Pe[1],ue=Pe[2],ot=Qe[0],le=Qe[1],$t=Qe[2],an=Math.sqrt(Bt*Bt+z*z+ue*ue),hn=Math.sqrt(ot*ot+le*le+$t*$t),Dn=an*hn,Xn=Dn&&pt(Pe,Qe)/Dn;return Math.acos(Math.min(Math.max(Xn,-1),1))}function Gt(Pe){return Pe[0]=0,Pe[1]=0,Pe[2]=0,Pe}function ln(Pe){return"vec3("+Pe[0]+", "+Pe[1]+", "+Pe[2]+")"}function Ln(Pe,Qe){return Pe[0]===Qe[0]&&Pe[1]===Qe[1]&&Pe[2]===Qe[2]}function kn(Pe,Qe){var Bt=Pe[0],z=Pe[1],ue=Pe[2],ot=Qe[0],le=Qe[1],$t=Qe[2];return Math.abs(Bt-ot)<=J.Ib*Math.max(1,Math.abs(Bt),Math.abs(ot))&&Math.abs(z-le)<=J.Ib*Math.max(1,Math.abs(z),Math.abs(le))&&Math.abs(ue-$t)<=J.Ib*Math.max(1,Math.abs(ue),Math.abs($t))}var lr=oe,zt=null,Kt=null,yn=dt,Kn=null,rn=ve,Wt=null,Pt=function(){var Pe=Z();return function(Qe,Bt,z,ue,ot,le){var $t,an;for(Bt||(Bt=3),z||(z=0),ue?an=Math.min(ue*Bt+z,Qe.length):an=Qe.length,$t=z;$t<an;$t+=Bt)Pe[0]=Qe[$t],Pe[1]=Qe[$t+1],Pe[2]=Qe[$t+2],ot(Pe,Pe,le),Qe[$t]=Pe[0],Qe[$t+1]=Pe[1],Qe[$t+2]=Pe[2];return Qe}}()},98333:function(Ht,W,D){"use strict";D.d(W,{AK:function(){return pt},Fv:function(){return Ae},I6:function(){return Xe},IH:function(){return ae},JG:function(){return te},Ue:function(){return Z},al:function(){return ve},bA:function(){return fe},d9:function(){return E},fF:function(){return ze},fS:function(){return Ze},kE:function(){return Nt},t7:function(){return Et},t8:function(){return se},we:function(){return ct}});var J=D(49685);function Z(){var zt=new J.WT(4);return J.WT!=Float32Array&&(zt[0]=0,zt[1]=0,zt[2]=0,zt[3]=0),zt}function E(zt){var Kt=new J.WT(4);return Kt[0]=zt[0],Kt[1]=zt[1],Kt[2]=zt[2],Kt[3]=zt[3],Kt}function ve(zt,Kt,yn,Kn){var rn=new J.WT(4);return rn[0]=zt,rn[1]=Kt,rn[2]=yn,rn[3]=Kn,rn}function te(zt,Kt){return zt[0]=Kt[0],zt[1]=Kt[1],zt[2]=Kt[2],zt[3]=Kt[3],zt}function se(zt,Kt,yn,Kn,rn){return zt[0]=Kt,zt[1]=yn,zt[2]=Kn,zt[3]=rn,zt}function ae(zt,Kt,yn){return zt[0]=Kt[0]+yn[0],zt[1]=Kt[1]+yn[1],zt[2]=Kt[2]+yn[2],zt[3]=Kt[3]+yn[3],zt}function Se(zt,Kt,yn){return zt[0]=Kt[0]-yn[0],zt[1]=Kt[1]-yn[1],zt[2]=Kt[2]-yn[2],zt[3]=Kt[3]-yn[3],zt}function oe(zt,Kt,yn){return zt[0]=Kt[0]*yn[0],zt[1]=Kt[1]*yn[1],zt[2]=Kt[2]*yn[2],zt[3]=Kt[3]*yn[3],zt}function Ge(zt,Kt,yn){return zt[0]=Kt[0]/yn[0],zt[1]=Kt[1]/yn[1],zt[2]=Kt[2]/yn[2],zt[3]=Kt[3]/yn[3],zt}function ee(zt,Kt){return zt[0]=Math.ceil(Kt[0]),zt[1]=Math.ceil(Kt[1]),zt[2]=Math.ceil(Kt[2]),zt[3]=Math.ceil(Kt[3]),zt}function me(zt,Kt){return zt[0]=Math.floor(Kt[0]),zt[1]=Math.floor(Kt[1]),zt[2]=Math.floor(Kt[2]),zt[3]=Math.floor(Kt[3]),zt}function Le(zt,Kt,yn){return zt[0]=Math.min(Kt[0],yn[0]),zt[1]=Math.min(Kt[1],yn[1]),zt[2]=Math.min(Kt[2],yn[2]),zt[3]=Math.min(Kt[3],yn[3]),zt}function be(zt,Kt,yn){return zt[0]=Math.max(Kt[0],yn[0]),zt[1]=Math.max(Kt[1],yn[1]),zt[2]=Math.max(Kt[2],yn[2]),zt[3]=Math.max(Kt[3],yn[3]),zt}function Oe(zt,Kt){return zt[0]=Math.round(Kt[0]),zt[1]=Math.round(Kt[1]),zt[2]=Math.round(Kt[2]),zt[3]=Math.round(Kt[3]),zt}function fe(zt,Kt,yn){return zt[0]=Kt[0]*yn,zt[1]=Kt[1]*yn,zt[2]=Kt[2]*yn,zt[3]=Kt[3]*yn,zt}function He(zt,Kt,yn,Kn){return zt[0]=Kt[0]+yn[0]*Kn,zt[1]=Kt[1]+yn[1]*Kn,zt[2]=Kt[2]+yn[2]*Kn,zt[3]=Kt[3]+yn[3]*Kn,zt}function bt(zt,Kt){var yn=Kt[0]-zt[0],Kn=Kt[1]-zt[1],rn=Kt[2]-zt[2],Wt=Kt[3]-zt[3];return Math.hypot(yn,Kn,rn,Wt)}function dt(zt,Kt){var yn=Kt[0]-zt[0],Kn=Kt[1]-zt[1],rn=Kt[2]-zt[2],Wt=Kt[3]-zt[3];return yn*yn+Kn*Kn+rn*rn+Wt*Wt}function Nt(zt){var Kt=zt[0],yn=zt[1],Kn=zt[2],rn=zt[3];return Math.hypot(Kt,yn,Kn,rn)}function ct(zt){var Kt=zt[0],yn=zt[1],Kn=zt[2],rn=zt[3];return Kt*Kt+yn*yn+Kn*Kn+rn*rn}function lt(zt,Kt){return zt[0]=-Kt[0],zt[1]=-Kt[1],zt[2]=-Kt[2],zt[3]=-Kt[3],zt}function Ie(zt,Kt){return zt[0]=1/Kt[0],zt[1]=1/Kt[1],zt[2]=1/Kt[2],zt[3]=1/Kt[3],zt}function Ae(zt,Kt){var yn=Kt[0],Kn=Kt[1],rn=Kt[2],Wt=Kt[3],Pt=yn*yn+Kn*Kn+rn*rn+Wt*Wt;return Pt>0&&(Pt=1/Math.sqrt(Pt)),zt[0]=yn*Pt,zt[1]=Kn*Pt,zt[2]=rn*Pt,zt[3]=Wt*Pt,zt}function pt(zt,Kt){return zt[0]*Kt[0]+zt[1]*Kt[1]+zt[2]*Kt[2]+zt[3]*Kt[3]}function ut(zt,Kt,yn,Kn){var rn=yn[0]*Kn[1]-yn[1]*Kn[0],Wt=yn[0]*Kn[2]-yn[2]*Kn[0],Pt=yn[0]*Kn[3]-yn[3]*Kn[0],Pe=yn[1]*Kn[2]-yn[2]*Kn[1],Qe=yn[1]*Kn[3]-yn[3]*Kn[1],Bt=yn[2]*Kn[3]-yn[3]*Kn[2],z=Kt[0],ue=Kt[1],ot=Kt[2],le=Kt[3];return zt[0]=ue*Bt-ot*Qe+le*Pe,zt[1]=-(z*Bt)+ot*Pt-le*Wt,zt[2]=z*Qe-ue*Pt+le*rn,zt[3]=-(z*Pe)+ue*Wt-ot*rn,zt}function Et(zt,Kt,yn,Kn){var rn=Kt[0],Wt=Kt[1],Pt=Kt[2],Pe=Kt[3];return zt[0]=rn+Kn*(yn[0]-rn),zt[1]=Wt+Kn*(yn[1]-Wt),zt[2]=Pt+Kn*(yn[2]-Pt),zt[3]=Pe+Kn*(yn[3]-Pe),zt}function cn(zt,Kt){Kt=Kt||1;var yn,Kn,rn,Wt,Pt,Pe;do yn=glMatrix.RANDOM()*2-1,Kn=glMatrix.RANDOM()*2-1,Pt=yn*yn+Kn*Kn;while(Pt>=1);do rn=glMatrix.RANDOM()*2-1,Wt=glMatrix.RANDOM()*2-1,Pe=rn*rn+Wt*Wt;while(Pe>=1);var Qe=Math.sqrt((1-Pt)/Pe);return zt[0]=Kt*yn,zt[1]=Kt*Kn,zt[2]=Kt*rn*Qe,zt[3]=Kt*Wt*Qe,zt}function ze(zt,Kt,yn){var Kn=Kt[0],rn=Kt[1],Wt=Kt[2],Pt=Kt[3];return zt[0]=yn[0]*Kn+yn[4]*rn+yn[8]*Wt+yn[12]*Pt,zt[1]=yn[1]*Kn+yn[5]*rn+yn[9]*Wt+yn[13]*Pt,zt[2]=yn[2]*Kn+yn[6]*rn+yn[10]*Wt+yn[14]*Pt,zt[3]=yn[3]*Kn+yn[7]*rn+yn[11]*Wt+yn[15]*Pt,zt}function St(zt,Kt,yn){var Kn=Kt[0],rn=Kt[1],Wt=Kt[2],Pt=yn[0],Pe=yn[1],Qe=yn[2],Bt=yn[3],z=Bt*Kn+Pe*Wt-Qe*rn,ue=Bt*rn+Qe*Kn-Pt*Wt,ot=Bt*Wt+Pt*rn-Pe*Kn,le=-Pt*Kn-Pe*rn-Qe*Wt;return zt[0]=z*Bt+le*-Pt+ue*-Qe-ot*-Pe,zt[1]=ue*Bt+le*-Pe+ot*-Pt-z*-Qe,zt[2]=ot*Bt+le*-Qe+z*-Pe-ue*-Pt,zt[3]=Kt[3],zt}function we(zt){return zt[0]=0,zt[1]=0,zt[2]=0,zt[3]=0,zt}function nt(zt){return"vec4("+zt[0]+", "+zt[1]+", "+zt[2]+", "+zt[3]+")"}function Xe(zt,Kt){return zt[0]===Kt[0]&&zt[1]===Kt[1]&&zt[2]===Kt[2]&&zt[3]===Kt[3]}function Ze(zt,Kt){var yn=zt[0],Kn=zt[1],rn=zt[2],Wt=zt[3],Pt=Kt[0],Pe=Kt[1],Qe=Kt[2],Bt=Kt[3];return Math.abs(yn-Pt)<=J.Ib*Math.max(1,Math.abs(yn),Math.abs(Pt))&&Math.abs(Kn-Pe)<=J.Ib*Math.max(1,Math.abs(Kn),Math.abs(Pe))&&Math.abs(rn-Qe)<=J.Ib*Math.max(1,Math.abs(rn),Math.abs(Qe))&&Math.abs(Wt-Bt)<=J.Ib*Math.max(1,Math.abs(Wt),Math.abs(Bt))}var Rt=null,yt=null,Me=null,Gt=null,ln=null,Ln=null,kn=null,lr=function(){var zt=Z();return function(Kt,yn,Kn,rn,Wt,Pt){var Pe,Qe;for(yn||(yn=4),Kn||(Kn=0),rn?Qe=Math.min(rn*yn+Kn,Kt.length):Qe=Kt.length,Pe=Kn;Pe<Qe;Pe+=yn)zt[0]=Kt[Pe],zt[1]=Kt[Pe+1],zt[2]=Kt[Pe+2],zt[3]=Kt[Pe+3],Wt(zt,zt,Pt),Kt[Pe]=zt[0],Kt[Pe+1]=zt[1],Kt[Pe+2]=zt[2],Kt[Pe+3]=zt[3];return Kt}}()},50840:function(Ht,W,D){var J;(function(Z,E,ve,te){"use strict";var se=["","webkit","Moz","MS","ms","o"],ae=E.createElement("div"),Se="function",oe=Math.round,Ge=Math.abs,ee=Date.now;function me(wt,Zt,Un){return setTimeout(Nt(wt,Un),Zt)}function Le(wt,Zt,Un){return Array.isArray(wt)?(be(wt,Un[Zt],Un),!0):!1}function be(wt,Zt,Un){var Ir;if(wt)if(wt.forEach)wt.forEach(Zt,Un);else if(wt.length!==te)for(Ir=0;Ir<wt.length;)Zt.call(Un,wt[Ir],Ir,wt),Ir++;else for(Ir in wt)wt.hasOwnProperty(Ir)&&Zt.call(Un,wt[Ir],Ir,wt)}function Oe(wt,Zt,Un){var Ir="DEPRECATED METHOD: "+Zt+`
`+Un+` AT 
`;return function(){var Ci=new Error("get-stack-trace"),oo=Ci&&Ci.stack?Ci.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yo=Z.console&&(Z.console.warn||Z.console.log);return Yo&&Yo.call(Z.console,Ir,oo),wt.apply(this,arguments)}}var fe;typeof Object.assign!="function"?fe=function(Zt){if(Zt===te||Zt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Un=Object(Zt),Ir=1;Ir<arguments.length;Ir++){var Ci=arguments[Ir];if(Ci!==te&&Ci!==null)for(var oo in Ci)Ci.hasOwnProperty(oo)&&(Un[oo]=Ci[oo])}return Un}:fe=Object.assign;var He=Oe(function(Zt,Un,Ir){for(var Ci=Object.keys(Un),oo=0;oo<Ci.length;)(!Ir||Ir&&Zt[Ci[oo]]===te)&&(Zt[Ci[oo]]=Un[Ci[oo]]),oo++;return Zt},"extend","Use `assign`."),bt=Oe(function(Zt,Un){return He(Zt,Un,!0)},"merge","Use `assign`.");function dt(wt,Zt,Un){var Ir=Zt.prototype,Ci;Ci=wt.prototype=Object.create(Ir),Ci.constructor=wt,Ci._super=Ir,Un&&fe(Ci,Un)}function Nt(wt,Zt){return function(){return wt.apply(Zt,arguments)}}function ct(wt,Zt){return typeof wt==Se?wt.apply(Zt&&Zt[0]||te,Zt):wt}function lt(wt,Zt){return wt===te?Zt:wt}function Ie(wt,Zt,Un){be(Et(Zt),function(Ir){wt.addEventListener(Ir,Un,!1)})}function Ae(wt,Zt,Un){be(Et(Zt),function(Ir){wt.removeEventListener(Ir,Un,!1)})}function pt(wt,Zt){for(;wt;){if(wt==Zt)return!0;wt=wt.parentNode}return!1}function ut(wt,Zt){return wt.indexOf(Zt)>-1}function Et(wt){return wt.trim().split(/\s+/g)}function cn(wt,Zt,Un){if(wt.indexOf&&!Un)return wt.indexOf(Zt);for(var Ir=0;Ir<wt.length;){if(Un&&wt[Ir][Un]==Zt||!Un&&wt[Ir]===Zt)return Ir;Ir++}return-1}function ze(wt){return Array.prototype.slice.call(wt,0)}function St(wt,Zt,Un){for(var Ir=[],Ci=[],oo=0;oo<wt.length;){var Yo=Zt?wt[oo][Zt]:wt[oo];cn(Ci,Yo)<0&&Ir.push(wt[oo]),Ci[oo]=Yo,oo++}return Un&&(Zt?Ir=Ir.sort(function(Ds,Us){return Ds[Zt]>Us[Zt]}):Ir=Ir.sort()),Ir}function we(wt,Zt){for(var Un,Ir,Ci=Zt[0].toUpperCase()+Zt.slice(1),oo=0;oo<se.length;){if(Un=se[oo],Ir=Un?Un+Ci:Zt,Ir in wt)return Ir;oo++}return te}var nt=1;function Xe(){return nt++}function Ze(wt){var Zt=wt.ownerDocument||wt;return Zt.defaultView||Zt.parentWindow||Z}var Rt=/mobile|tablet|ip(ad|hone|od)|android/i,yt="ontouchstart"in Z,Me=we(Z,"PointerEvent")!==te,Gt=yt&&Rt.test(navigator.userAgent),ln="touch",Ln="pen",kn="mouse",lr="kinect",zt=25,Kt=1,yn=2,Kn=4,rn=8,Wt=1,Pt=2,Pe=4,Qe=8,Bt=16,z=Pt|Pe,ue=Qe|Bt,ot=z|ue,le=["x","y"],$t=["clientX","clientY"];function an(wt,Zt){var Un=this;this.manager=wt,this.callback=Zt,this.element=wt.element,this.target=wt.options.inputTarget,this.domHandler=function(Ir){ct(wt.options.enable,[wt])&&Un.handler(Ir)},this.init()}an.prototype={handler:function(){},init:function(){this.evEl&&Ie(this.element,this.evEl,this.domHandler),this.evTarget&&Ie(this.target,this.evTarget,this.domHandler),this.evWin&&Ie(Ze(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ae(this.element,this.evEl,this.domHandler),this.evTarget&&Ae(this.target,this.evTarget,this.domHandler),this.evWin&&Ae(Ze(this.element),this.evWin,this.domHandler)}};function hn(wt){var Zt,Un=wt.options.inputClass;return Un?Zt=Un:Me?Zt=xe:Gt?Zt=Qn:yt?Zt=Ur:Zt=En,new Zt(wt,Dn)}function Dn(wt,Zt,Un){var Ir=Un.pointers.length,Ci=Un.changedPointers.length,oo=Zt&Kt&&Ir-Ci===0,Yo=Zt&(Kn|rn)&&Ir-Ci===0;Un.isFirst=!!oo,Un.isFinal=!!Yo,oo&&(wt.session={}),Un.eventType=Zt,Xn(wt,Un),wt.emit("hammer.input",Un),wt.recognize(Un),wt.session.prevInput=Un}function Xn(wt,Zt){var Un=wt.session,Ir=Zt.pointers,Ci=Ir.length;Un.firstInput||(Un.firstInput=mt(Zt)),Ci>1&&!Un.firstMultiple?Un.firstMultiple=mt(Zt):Ci===1&&(Un.firstMultiple=!1);var oo=Un.firstInput,Yo=Un.firstMultiple,ns=Yo?Yo.center:oo.center,Ds=Zt.center=Ct(Ir);Zt.timeStamp=ee(),Zt.deltaTime=Zt.timeStamp-oo.timeStamp,Zt.angle=ht(ns,Ds),Zt.distance=Zn(ns,Ds),Gn(Un,Zt),Zt.offsetDirection=Pn(Zt.deltaX,Zt.deltaY);var Us=Cn(Zt.deltaTime,Zt.deltaX,Zt.deltaY);Zt.overallVelocityX=Us.x,Zt.overallVelocityY=Us.y,Zt.overallVelocity=Ge(Us.x)>Ge(Us.y)?Us.x:Us.y,Zt.scale=Yo?Be(Yo.pointers,Ir):1,Zt.rotation=Yo?ye(Yo.pointers,Ir):0,Zt.maxPointers=Un.prevInput?Zt.pointers.length>Un.prevInput.maxPointers?Zt.pointers.length:Un.prevInput.maxPointers:Zt.pointers.length,dn(Un,Zt);var fl=wt.element;pt(Zt.srcEvent.target,fl)&&(fl=Zt.srcEvent.target),Zt.target=fl}function Gn(wt,Zt){var Un=Zt.center,Ir=wt.offsetDelta||{},Ci=wt.prevDelta||{},oo=wt.prevInput||{};(Zt.eventType===Kt||oo.eventType===Kn)&&(Ci=wt.prevDelta={x:oo.deltaX||0,y:oo.deltaY||0},Ir=wt.offsetDelta={x:Un.x,y:Un.y}),Zt.deltaX=Ci.x+(Un.x-Ir.x),Zt.deltaY=Ci.y+(Un.y-Ir.y)}function dn(wt,Zt){var Un=wt.lastInterval||Zt,Ir=Zt.timeStamp-Un.timeStamp,Ci,oo,Yo,ns;if(Zt.eventType!=rn&&(Ir>zt||Un.velocity===te)){var Ds=Zt.deltaX-Un.deltaX,Us=Zt.deltaY-Un.deltaY,fl=Cn(Ir,Ds,Us);oo=fl.x,Yo=fl.y,Ci=Ge(fl.x)>Ge(fl.y)?fl.x:fl.y,ns=Pn(Ds,Us),wt.lastInterval=Zt}else Ci=Un.velocity,oo=Un.velocityX,Yo=Un.velocityY,ns=Un.direction;Zt.velocity=Ci,Zt.velocityX=oo,Zt.velocityY=Yo,Zt.direction=ns}function mt(wt){for(var Zt=[],Un=0;Un<wt.pointers.length;)Zt[Un]={clientX:oe(wt.pointers[Un].clientX),clientY:oe(wt.pointers[Un].clientY)},Un++;return{timeStamp:ee(),pointers:Zt,center:Ct(Zt),deltaX:wt.deltaX,deltaY:wt.deltaY}}function Ct(wt){var Zt=wt.length;if(Zt===1)return{x:oe(wt[0].clientX),y:oe(wt[0].clientY)};for(var Un=0,Ir=0,Ci=0;Ci<Zt;)Un+=wt[Ci].clientX,Ir+=wt[Ci].clientY,Ci++;return{x:oe(Un/Zt),y:oe(Ir/Zt)}}function Cn(wt,Zt,Un){return{x:Zt/wt||0,y:Un/wt||0}}function Pn(wt,Zt){return wt===Zt?Wt:Ge(wt)>=Ge(Zt)?wt<0?Pt:Pe:Zt<0?Qe:Bt}function Zn(wt,Zt,Un){Un||(Un=le);var Ir=Zt[Un[0]]-wt[Un[0]],Ci=Zt[Un[1]]-wt[Un[1]];return Math.sqrt(Ir*Ir+Ci*Ci)}function ht(wt,Zt,Un){Un||(Un=le);var Ir=Zt[Un[0]]-wt[Un[0]],Ci=Zt[Un[1]]-wt[Un[1]];return Math.atan2(Ci,Ir)*180/Math.PI}function ye(wt,Zt){return ht(Zt[1],Zt[0],$t)+ht(wt[1],wt[0],$t)}function Be(wt,Zt){return Zn(Zt[0],Zt[1],$t)/Zn(wt[0],wt[1],$t)}var rt={mousedown:Kt,mousemove:yn,mouseup:Kn},Mt="mousedown",Ot="mousemove mouseup";function En(){this.evEl=Mt,this.evWin=Ot,this.pressed=!1,an.apply(this,arguments)}dt(En,an,{handler:function(Zt){var Un=rt[Zt.type];Un&Kt&&Zt.button===0&&(this.pressed=!0),Un&yn&&Zt.which!==1&&(Un=Kn),this.pressed&&(Un&Kn&&(this.pressed=!1),this.callback(this.manager,Un,{pointers:[Zt],changedPointers:[Zt],pointerType:kn,srcEvent:Zt}))}});var $n={pointerdown:Kt,pointermove:yn,pointerup:Kn,pointercancel:rn,pointerout:rn},yr={2:ln,3:Ln,4:kn,5:lr},qn="pointerdown",Ce="pointermove pointerup pointercancel";Z.MSPointerEvent&&!Z.PointerEvent&&(qn="MSPointerDown",Ce="MSPointerMove MSPointerUp MSPointerCancel");function xe(){this.evEl=qn,this.evWin=Ce,an.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}dt(xe,an,{handler:function(Zt){var Un=this.store,Ir=!1,Ci=Zt.type.toLowerCase().replace("ms",""),oo=$n[Ci],Yo=yr[Zt.pointerType]||Zt.pointerType,ns=Yo==ln,Ds=cn(Un,Zt.pointerId,"pointerId");oo&Kt&&(Zt.button===0||ns)?Ds<0&&(Un.push(Zt),Ds=Un.length-1):oo&(Kn|rn)&&(Ir=!0),!(Ds<0)&&(Un[Ds]=Zt,this.callback(this.manager,oo,{pointers:Un,changedPointers:[Zt],pointerType:Yo,srcEvent:Zt}),Ir&&Un.splice(Ds,1))}});var ke={touchstart:Kt,touchmove:yn,touchend:Kn,touchcancel:rn},et="touchstart",Tt="touchstart touchmove touchend touchcancel";function Yt(){this.evTarget=et,this.evWin=Tt,this.started=!1,an.apply(this,arguments)}dt(Yt,an,{handler:function(Zt){var Un=ke[Zt.type];if(Un===Kt&&(this.started=!0),!!this.started){var Ir=pn.call(this,Zt,Un);Un&(Kn|rn)&&Ir[0].length-Ir[1].length===0&&(this.started=!1),this.callback(this.manager,Un,{pointers:Ir[0],changedPointers:Ir[1],pointerType:ln,srcEvent:Zt})}}});function pn(wt,Zt){var Un=ze(wt.touches),Ir=ze(wt.changedTouches);return Zt&(Kn|rn)&&(Un=St(Un.concat(Ir),"identifier",!0)),[Un,Ir]}var _t={touchstart:Kt,touchmove:yn,touchend:Kn,touchcancel:rn},qt="touchstart touchmove touchend touchcancel";function Qn(){this.evTarget=qt,this.targetIds={},an.apply(this,arguments)}dt(Qn,an,{handler:function(Zt){var Un=_t[Zt.type],Ir=_r.call(this,Zt,Un);Ir&&this.callback(this.manager,Un,{pointers:Ir[0],changedPointers:Ir[1],pointerType:ln,srcEvent:Zt})}});function _r(wt,Zt){var Un=ze(wt.touches),Ir=this.targetIds;if(Zt&(Kt|yn)&&Un.length===1)return Ir[Un[0].identifier]=!0,[Un,Un];var Ci,oo,Yo=ze(wt.changedTouches),ns=[],Ds=this.target;if(oo=Un.filter(function(Us){return pt(Us.target,Ds)}),Zt===Kt)for(Ci=0;Ci<oo.length;)Ir[oo[Ci].identifier]=!0,Ci++;for(Ci=0;Ci<Yo.length;)Ir[Yo[Ci].identifier]&&ns.push(Yo[Ci]),Zt&(Kn|rn)&&delete Ir[Yo[Ci].identifier],Ci++;if(ns.length)return[St(oo.concat(ns),"identifier",!0),ns]}var Vr=2500,pr=25;function Ur(){an.apply(this,arguments);var wt=Nt(this.handler,this);this.touch=new Qn(this.manager,wt),this.mouse=new En(this.manager,wt),this.primaryTouch=null,this.lastTouches=[]}dt(Ur,an,{handler:function(Zt,Un,Ir){var Ci=Ir.pointerType==ln,oo=Ir.pointerType==kn;if(!(oo&&Ir.sourceCapabilities&&Ir.sourceCapabilities.firesTouchEvents)){if(Ci)mi.call(this,Un,Ir);else if(oo&&Sr.call(this,Ir))return;this.callback(Zt,Un,Ir)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function mi(wt,Zt){wt&Kt?(this.primaryTouch=Zt.changedPointers[0].identifier,wi.call(this,Zt)):wt&(Kn|rn)&&wi.call(this,Zt)}function wi(wt){var Zt=wt.changedPointers[0];if(Zt.identifier===this.primaryTouch){var Un={x:Zt.clientX,y:Zt.clientY};this.lastTouches.push(Un);var Ir=this.lastTouches,Ci=function(){var oo=Ir.indexOf(Un);oo>-1&&Ir.splice(oo,1)};setTimeout(Ci,Vr)}}function Sr(wt){for(var Zt=wt.srcEvent.clientX,Un=wt.srcEvent.clientY,Ir=0;Ir<this.lastTouches.length;Ir++){var Ci=this.lastTouches[Ir],oo=Math.abs(Zt-Ci.x),Yo=Math.abs(Un-Ci.y);if(oo<=pr&&Yo<=pr)return!0}return!1}var Ti=we(ae.style,"touchAction"),hi=Ti!==te,si="compute",Mo="auto",bi="manipulation",na="none",_a="pan-x",Ro="pan-y",qo=kt();function Ne(wt,Zt){this.manager=wt,this.set(Zt)}Ne.prototype={set:function(wt){wt==si&&(wt=this.compute()),hi&&this.manager.element.style&&qo[wt]&&(this.manager.element.style[Ti]=wt),this.actions=wt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var wt=[];return be(this.manager.recognizers,function(Zt){ct(Zt.options.enable,[Zt])&&(wt=wt.concat(Zt.getTouchAction()))}),Je(wt.join(" "))},preventDefaults:function(wt){var Zt=wt.srcEvent,Un=wt.offsetDirection;if(this.manager.session.prevented){Zt.preventDefault();return}var Ir=this.actions,Ci=ut(Ir,na)&&!qo[na],oo=ut(Ir,Ro)&&!qo[Ro],Yo=ut(Ir,_a)&&!qo[_a];if(Ci){var ns=wt.pointers.length===1,Ds=wt.distance<2,Us=wt.deltaTime<250;if(ns&&Ds&&Us)return}if(!(Yo&&oo)&&(Ci||oo&&Un&z||Yo&&Un&ue))return this.preventSrc(Zt)},preventSrc:function(wt){this.manager.session.prevented=!0,wt.preventDefault()}};function Je(wt){if(ut(wt,na))return na;var Zt=ut(wt,_a),Un=ut(wt,Ro);return Zt&&Un?na:Zt||Un?Zt?_a:Ro:ut(wt,bi)?bi:Mo}function kt(){if(!hi)return!1;var wt={},Zt=Z.CSS&&Z.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Un){wt[Un]=Zt?Z.CSS.supports("touch-action",Un):!0}),wt}var sn=1,Nn=2,Bn=4,gn=8,On=gn,dr=16,hr=32;function ii(wt){this.options=fe({},this.defaults,wt||{}),this.id=Xe(),this.manager=null,this.options.enable=lt(this.options.enable,!0),this.state=sn,this.simultaneous={},this.requireFail=[]}ii.prototype={defaults:{},set:function(wt){return fe(this.options,wt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(wt){if(Le(wt,"recognizeWith",this))return this;var Zt=this.simultaneous;return wt=Qr(wt,this),Zt[wt.id]||(Zt[wt.id]=wt,wt.recognizeWith(this)),this},dropRecognizeWith:function(wt){return Le(wt,"dropRecognizeWith",this)?this:(wt=Qr(wt,this),delete this.simultaneous[wt.id],this)},requireFailure:function(wt){if(Le(wt,"requireFailure",this))return this;var Zt=this.requireFail;return wt=Qr(wt,this),cn(Zt,wt)===-1&&(Zt.push(wt),wt.requireFailure(this)),this},dropRequireFailure:function(wt){if(Le(wt,"dropRequireFailure",this))return this;wt=Qr(wt,this);var Zt=cn(this.requireFail,wt);return Zt>-1&&this.requireFail.splice(Zt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(wt){return!!this.simultaneous[wt.id]},emit:function(wt){var Zt=this,Un=this.state;function Ir(Ci){Zt.manager.emit(Ci,wt)}Un<gn&&Ir(Zt.options.event+Gi(Un)),Ir(Zt.options.event),wt.additionalEvent&&Ir(wt.additionalEvent),Un>=gn&&Ir(Zt.options.event+Gi(Un))},tryEmit:function(wt){if(this.canEmit())return this.emit(wt);this.state=hr},canEmit:function(){for(var wt=0;wt<this.requireFail.length;){if(!(this.requireFail[wt].state&(hr|sn)))return!1;wt++}return!0},recognize:function(wt){var Zt=fe({},wt);if(!ct(this.options.enable,[this,Zt])){this.reset(),this.state=hr;return}this.state&(On|dr|hr)&&(this.state=sn),this.state=this.process(Zt),this.state&(Nn|Bn|gn|dr)&&this.tryEmit(Zt)},process:function(wt){},getTouchAction:function(){},reset:function(){}};function Gi(wt){return wt&dr?"cancel":wt&gn?"end":wt&Bn?"move":wt&Nn?"start":""}function ao(wt){return wt==Bt?"down":wt==Qe?"up":wt==Pt?"left":wt==Pe?"right":""}function Qr(wt,Zt){var Un=Zt.manager;return Un?Un.get(wt):wt}function ji(){ii.apply(this,arguments)}dt(ji,ii,{defaults:{pointers:1},attrTest:function(wt){var Zt=this.options.pointers;return Zt===0||wt.pointers.length===Zt},process:function(wt){var Zt=this.state,Un=wt.eventType,Ir=Zt&(Nn|Bn),Ci=this.attrTest(wt);return Ir&&(Un&rn||!Ci)?Zt|dr:Ir||Ci?Un&Kn?Zt|gn:Zt&Nn?Zt|Bn:Nn:hr}});function Li(){ji.apply(this,arguments),this.pX=null,this.pY=null}dt(Li,ji,{defaults:{event:"pan",threshold:10,pointers:1,direction:ot},getTouchAction:function(){var wt=this.options.direction,Zt=[];return wt&z&&Zt.push(Ro),wt&ue&&Zt.push(_a),Zt},directionTest:function(wt){var Zt=this.options,Un=!0,Ir=wt.distance,Ci=wt.direction,oo=wt.deltaX,Yo=wt.deltaY;return Ci&Zt.direction||(Zt.direction&z?(Ci=oo===0?Wt:oo<0?Pt:Pe,Un=oo!=this.pX,Ir=Math.abs(wt.deltaX)):(Ci=Yo===0?Wt:Yo<0?Qe:Bt,Un=Yo!=this.pY,Ir=Math.abs(wt.deltaY))),wt.direction=Ci,Un&&Ir>Zt.threshold&&Ci&Zt.direction},attrTest:function(wt){return ji.prototype.attrTest.call(this,wt)&&(this.state&Nn||!(this.state&Nn)&&this.directionTest(wt))},emit:function(wt){this.pX=wt.deltaX,this.pY=wt.deltaY;var Zt=ao(wt.direction);Zt&&(wt.additionalEvent=this.options.event+Zt),this._super.emit.call(this,wt)}});function Zr(){ji.apply(this,arguments)}dt(Zr,ji,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[na]},attrTest:function(wt){return this._super.attrTest.call(this,wt)&&(Math.abs(wt.scale-1)>this.options.threshold||this.state&Nn)},emit:function(wt){if(wt.scale!==1){var Zt=wt.scale<1?"in":"out";wt.additionalEvent=this.options.event+Zt}this._super.emit.call(this,wt)}});function yo(){ii.apply(this,arguments),this._timer=null,this._input=null}dt(yo,ii,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mo]},process:function(wt){var Zt=this.options,Un=wt.pointers.length===Zt.pointers,Ir=wt.distance<Zt.threshold,Ci=wt.deltaTime>Zt.time;if(this._input=wt,!Ir||!Un||wt.eventType&(Kn|rn)&&!Ci)this.reset();else if(wt.eventType&Kt)this.reset(),this._timer=me(function(){this.state=On,this.tryEmit()},Zt.time,this);else if(wt.eventType&Kn)return On;return hr},reset:function(){clearTimeout(this._timer)},emit:function(wt){this.state===On&&(wt&&wt.eventType&Kn?this.manager.emit(this.options.event+"up",wt):(this._input.timeStamp=ee(),this.manager.emit(this.options.event,this._input)))}});function Mi(){ji.apply(this,arguments)}dt(Mi,ji,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[na]},attrTest:function(wt){return this._super.attrTest.call(this,wt)&&(Math.abs(wt.rotation)>this.options.threshold||this.state&Nn)}});function xo(){ji.apply(this,arguments)}dt(xo,ji,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:z|ue,pointers:1},getTouchAction:function(){return Li.prototype.getTouchAction.call(this)},attrTest:function(wt){var Zt=this.options.direction,Un;return Zt&(z|ue)?Un=wt.overallVelocity:Zt&z?Un=wt.overallVelocityX:Zt&ue&&(Un=wt.overallVelocityY),this._super.attrTest.call(this,wt)&&Zt&wt.offsetDirection&&wt.distance>this.options.threshold&&wt.maxPointers==this.options.pointers&&Ge(Un)>this.options.velocity&&wt.eventType&Kn},emit:function(wt){var Zt=ao(wt.offsetDirection);Zt&&this.manager.emit(this.options.event+Zt,wt),this.manager.emit(this.options.event,wt)}});function xi(){ii.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}dt(xi,ii,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[bi]},process:function(wt){var Zt=this.options,Un=wt.pointers.length===Zt.pointers,Ir=wt.distance<Zt.threshold,Ci=wt.deltaTime<Zt.time;if(this.reset(),wt.eventType&Kt&&this.count===0)return this.failTimeout();if(Ir&&Ci&&Un){if(wt.eventType!=Kn)return this.failTimeout();var oo=this.pTime?wt.timeStamp-this.pTime<Zt.interval:!0,Yo=!this.pCenter||Zn(this.pCenter,wt.center)<Zt.posThreshold;this.pTime=wt.timeStamp,this.pCenter=wt.center,!Yo||!oo?this.count=1:this.count+=1,this._input=wt;var ns=this.count%Zt.taps;if(ns===0)return this.hasRequireFailures()?(this._timer=me(function(){this.state=On,this.tryEmit()},Zt.interval,this),Nn):On}return hr},failTimeout:function(){return this._timer=me(function(){this.state=hr},this.options.interval,this),hr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==On&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Oo(wt,Zt){return Zt=Zt||{},Zt.recognizers=lt(Zt.recognizers,Oo.defaults.preset),new ia(wt,Zt)}Oo.VERSION="2.0.7",Oo.defaults={domEvents:!1,touchAction:si,enable:!0,inputTarget:null,inputClass:null,preset:[[Mi,{enable:!1}],[Zr,{enable:!1},["rotate"]],[xo,{direction:z}],[Li,{direction:z},["swipe"]],[xi],[xi,{event:"doubletap",taps:2},["tap"]],[yo]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ra=1,Ha=2;function ia(wt,Zt){this.options=fe({},Oo.defaults,Zt||{}),this.options.inputTarget=this.options.inputTarget||wt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=wt,this.input=hn(this),this.touchAction=new Ne(this,this.options.touchAction),Wo(this,!0),be(this.options.recognizers,function(Un){var Ir=this.add(new Un[0](Un[1]));Un[2]&&Ir.recognizeWith(Un[2]),Un[3]&&Ir.requireFailure(Un[3])},this)}ia.prototype={set:function(wt){return fe(this.options,wt),wt.touchAction&&this.touchAction.update(),wt.inputTarget&&(this.input.destroy(),this.input.target=wt.inputTarget,this.input.init()),this},stop:function(wt){this.session.stopped=wt?Ha:ra},recognize:function(wt){var Zt=this.session;if(!Zt.stopped){this.touchAction.preventDefaults(wt);var Un,Ir=this.recognizers,Ci=Zt.curRecognizer;(!Ci||Ci&&Ci.state&On)&&(Ci=Zt.curRecognizer=null);for(var oo=0;oo<Ir.length;)Un=Ir[oo],Zt.stopped!==Ha&&(!Ci||Un==Ci||Un.canRecognizeWith(Ci))?Un.recognize(wt):Un.reset(),!Ci&&Un.state&(Nn|Bn|gn)&&(Ci=Zt.curRecognizer=Un),oo++}},get:function(wt){if(wt instanceof ii)return wt;for(var Zt=this.recognizers,Un=0;Un<Zt.length;Un++)if(Zt[Un].options.event==wt)return Zt[Un];return null},add:function(wt){if(Le(wt,"add",this))return this;var Zt=this.get(wt.options.event);return Zt&&this.remove(Zt),this.recognizers.push(wt),wt.manager=this,this.touchAction.update(),wt},remove:function(wt){if(Le(wt,"remove",this))return this;if(wt=this.get(wt),wt){var Zt=this.recognizers,Un=cn(Zt,wt);Un!==-1&&(Zt.splice(Un,1),this.touchAction.update())}return this},on:function(wt,Zt){if(wt!==te&&Zt!==te){var Un=this.handlers;return be(Et(wt),function(Ir){Un[Ir]=Un[Ir]||[],Un[Ir].push(Zt)}),this}},off:function(wt,Zt){if(wt!==te){var Un=this.handlers;return be(Et(wt),function(Ir){Zt?Un[Ir]&&Un[Ir].splice(cn(Un[Ir],Zt),1):delete Un[Ir]}),this}},emit:function(wt,Zt){this.options.domEvents&&Fa(wt,Zt);var Un=this.handlers[wt]&&this.handlers[wt].slice();if(!(!Un||!Un.length)){Zt.type=wt,Zt.preventDefault=function(){Zt.srcEvent.preventDefault()};for(var Ir=0;Ir<Un.length;)Un[Ir](Zt),Ir++}},destroy:function(){this.element&&Wo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Wo(wt,Zt){var Un=wt.element;if(Un.style){var Ir;be(wt.options.cssProps,function(Ci,oo){Ir=we(Un.style,oo),Zt?(wt.oldCssProps[Ir]=Un.style[Ir],Un.style[Ir]=Ci):Un.style[Ir]=wt.oldCssProps[Ir]||""}),Zt||(wt.oldCssProps={})}}function Fa(wt,Zt){var Un=E.createEvent("Event");Un.initEvent(wt,!0,!0),Un.gesture=Zt,Zt.target.dispatchEvent(Un)}fe(Oo,{INPUT_START:Kt,INPUT_MOVE:yn,INPUT_END:Kn,INPUT_CANCEL:rn,STATE_POSSIBLE:sn,STATE_BEGAN:Nn,STATE_CHANGED:Bn,STATE_ENDED:gn,STATE_RECOGNIZED:On,STATE_CANCELLED:dr,STATE_FAILED:hr,DIRECTION_NONE:Wt,DIRECTION_LEFT:Pt,DIRECTION_RIGHT:Pe,DIRECTION_UP:Qe,DIRECTION_DOWN:Bt,DIRECTION_HORIZONTAL:z,DIRECTION_VERTICAL:ue,DIRECTION_ALL:ot,Manager:ia,Input:an,TouchAction:Ne,TouchInput:Qn,MouseInput:En,PointerEventInput:xe,TouchMouseInput:Ur,SingleTouchInput:Yt,Recognizer:ii,AttrRecognizer:ji,Tap:xi,Pan:Li,Swipe:xo,Pinch:Zr,Rotate:Mi,Press:yo,on:Ie,off:Ae,each:be,merge:bt,extend:He,assign:fe,inherit:dt,bindFn:Nt,prefixed:we});var cs=typeof Z!="undefined"?Z:typeof self!="undefined"?self:{};cs.Hammer=Oo,J=function(){return Oo}.call(W,D,W,Ht),J!==te&&(Ht.exports=J)})(window,document,"Hammer")},47443:function(Ht,W,D){var J=D(42118);function Z(E,ve){var te=E==null?0:E.length;return!!te&&J(E,ve,0)>-1}Ht.exports=Z},1196:function(Ht){function W(D,J,Z){for(var E=-1,ve=D==null?0:D.length;++E<ve;)if(Z(J,D[E]))return!0;return!1}Ht.exports=W},29750:function(Ht){function W(D,J,Z){return D===D&&(Z!==void 0&&(D=D<=Z?D:Z),J!==void 0&&(D=D>=J?D:J)),D}Ht.exports=W},41848:function(Ht){function W(D,J,Z,E){for(var ve=D.length,te=Z+(E?1:-1);E?te--:++te<ve;)if(J(D[te],te,D))return te;return-1}Ht.exports=W},42118:function(Ht,W,D){var J=D(41848),Z=D(62722),E=D(39375);function ve(te,se,ae){return se===se?E(te,se,ae):J(te,Z,ae)}Ht.exports=ve},74221:function(Ht){function W(D,J,Z,E){for(var ve=Z-1,te=D.length;++ve<te;)if(E(D[ve],J))return ve;return-1}Ht.exports=W},62722:function(Ht){function W(D){return D!==D}Ht.exports=W},65464:function(Ht,W,D){var J=D(29932),Z=D(42118),E=D(74221),ve=D(51717),te=D(6450),se=Array.prototype,ae=se.splice;function Se(oe,Ge,ee,me){var Le=me?E:Z,be=-1,Oe=Ge.length,fe=oe;for(oe===Ge&&(Ge=te(Ge)),ee&&(fe=J(oe,ve(ee)));++be<Oe;)for(var He=0,bt=Ge[be],dt=ee?ee(bt):bt;(He=Le(fe,dt,He,me))>-1;)fe!==oe&&ae.call(fe,He,1),ae.call(oe,He,1);return oe}Ht.exports=Se},45652:function(Ht,W,D){var J=D(88668),Z=D(47443),E=D(1196),ve=D(74757),te=D(23593),se=D(21814),ae=200;function Se(oe,Ge,ee){var me=-1,Le=Z,be=oe.length,Oe=!0,fe=[],He=fe;if(ee)Oe=!1,Le=E;else if(be>=ae){var bt=Ge?null:te(oe);if(bt)return se(bt);Oe=!1,Le=ve,He=new J}else He=Ge?[]:fe;e:for(;++me<be;){var dt=oe[me],Nt=Ge?Ge(dt):dt;if(dt=ee||dt!==0?dt:0,Oe&&Nt===Nt){for(var ct=He.length;ct--;)if(He[ct]===Nt)continue e;Ge&&He.push(Nt),fe.push(dt)}else Le(He,Nt,ee)||(He!==fe&&He.push(Nt),fe.push(dt))}return fe}Ht.exports=Se},23593:function(Ht,W,D){var J=D(58525),Z=D(28117),E=D(21814),ve=1/0,te=J&&1/E(new J([,-0]))[1]==ve?function(se){return new J(se)}:Z;Ht.exports=te},39375:function(Ht){function W(D,J,Z){for(var E=Z-1,ve=D.length;++E<ve;)if(D[E]===J)return E;return-1}Ht.exports=W},74691:function(Ht,W,D){var J=D(29750),Z=D(14841);function E(ve,te,se){return se===void 0&&(se=te,te=void 0),se!==void 0&&(se=Z(se),se=se===se?se:0),te!==void 0&&(te=Z(te),te=te===te?te:0),J(Z(ve),te,se)}Ht.exports=E},51584:function(Ht,W,D){var J=D(44239),Z=D(37005),E="[object Boolean]";function ve(te){return te===!0||te===!1||Z(te)&&J(te)==E}Ht.exports=ve},18446:function(Ht,W,D){var J=D(90939);function Z(E,ve){return J(E,ve)}Ht.exports=Z},14293:function(Ht){function W(D){return D==null}Ht.exports=W},81763:function(Ht,W,D){var J=D(44239),Z=D(37005),E="[object Number]";function ve(te){return typeof te=="number"||Z(te)&&J(te)==E}Ht.exports=ve},52353:function(Ht){function W(D){return D===void 0}Ht.exports=W},30236:function(Ht,W,D){var J=D(42980),Z=D(21463),E=Z(function(ve,te,se,ae){J(ve,te,se,ae)});Ht.exports=E},28117:function(Ht){function W(){}Ht.exports=W},97019:function(Ht,W,D){var J=D(5976),Z=D(45604),E=J(Z);Ht.exports=E},45604:function(Ht,W,D){var J=D(65464);function Z(E,ve){return E&&E.length&&ve&&ve.length?J(E,ve):E}Ht.exports=Z},44908:function(Ht,W,D){var J=D(45652);function Z(E){return E&&E.length?J(E):[]}Ht.exports=Z},73955:function(Ht,W,D){var J=D(79833),Z=0;function E(ve){var te=++Z;return J(ve)+te}Ht.exports=E},6158:function(Ht){(function(W,D){Ht.exports=D()})(this,function(){"use strict";var W,D,J;function Z(E,ve){if(!W)W=ve;else if(!D)D=ve;else{var te="var sharedChunk = {}; ("+W+")(sharedChunk); ("+D+")(sharedChunk);",se={};W(se),J=ve(se),typeof window!="undefined"&&(J.workerUrl=window.URL.createObjectURL(new Blob([te],{type:"text/javascript"})))}}return Z(["exports"],function(E){"use strict";function ve(c,d){return c(d={exports:{}},d.exports),d.exports}var te=se;function se(c,d,g,A){this.cx=3*c,this.bx=3*(g-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(A-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=A,this.p2x=g,this.p2y=A}se.prototype.sampleCurveX=function(c){return((this.ax*c+this.bx)*c+this.cx)*c},se.prototype.sampleCurveY=function(c){return((this.ay*c+this.by)*c+this.cy)*c},se.prototype.sampleCurveDerivativeX=function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},se.prototype.solveCurveX=function(c,d){var g,A,P,B,j;for(d===void 0&&(d=1e-6),P=c,j=0;j<8;j++){if(B=this.sampleCurveX(P)-c,Math.abs(B)<d)return P;var q=this.sampleCurveDerivativeX(P);if(Math.abs(q)<1e-6)break;P-=B/q}if((P=c)<(g=0))return g;if(P>(A=1))return A;for(;g<A;){if(B=this.sampleCurveX(P),Math.abs(B-c)<d)return P;c>B?g=P:A=P,P=.5*(A-g)+g}return P},se.prototype.solve=function(c,d){return this.sampleCurveY(this.solveCurveX(c,d))};var ae=Se;function Se(c,d){this.x=c,this.y=d}Se.prototype={clone:function(){return new Se(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,d){return this.clone()._rotateAround(c,d)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var d=c.x-this.x,g=c.y-this.y;return d*d+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,d){return Math.atan2(this.x*d-this.y*c,this.x*c+this.y*d)},_matMult:function(c){var d=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=d,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var d=Math.cos(c),g=Math.sin(c),A=g*this.x+d*this.y;return this.x=d*this.x-g*this.y,this.y=A,this},_rotateAround:function(c,d){var g=Math.cos(c),A=Math.sin(c),P=d.y+A*(this.x-d.x)+g*(this.y-d.y);return this.x=d.x+g*(this.x-d.x)-A*(this.y-d.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Se.convert=function(c){return c instanceof Se?c:Array.isArray(c)?new Se(c[0],c[1]):c};var oe=typeof self!="undefined"?self:{},Ge=Math.pow(2,53)-1;function ee(c,d,g,A){var P=new te(c,d,g,A);return function(B){return P.solve(B)}}var me=ee(.25,.1,.25,1);function Le(c,d,g){return Math.min(g,Math.max(d,c))}function be(c,d,g){var A=g-d,P=((c-d)%A+A)%A+d;return P===d?g:P}function Oe(c){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var B=P[A];for(var j in B)c[j]=B[j]}return c}var fe=1;function He(){return fe++}function bt(){return function c(d){return d?(d^16*Math.random()>>d/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()}function dt(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function Nt(c,d){c.forEach(function(g){d[g]&&(d[g]=d[g].bind(d))})}function ct(c,d){return c.indexOf(d,c.length-d.length)!==-1}function lt(c,d,g){var A={};for(var P in c)A[P]=d.call(g||this,c[P],P,c);return A}function Ie(c,d,g){var A={};for(var P in c)d.call(g||this,c[P],P,c)&&(A[P]=c[P]);return A}function Ae(c){return Array.isArray(c)?c.map(Ae):typeof c=="object"&&c?lt(c,Ae):c}var pt={};function ut(c){pt[c]||(typeof console!="undefined"&&console.warn(c),pt[c]=!0)}function Et(c,d,g){return(g.y-c.y)*(d.x-c.x)>(d.y-c.y)*(g.x-c.x)}function cn(c){for(var d=0,g=0,A=c.length,P=A-1,B=void 0,j=void 0;g<A;P=g++)d+=((j=c[P]).x-(B=c[g]).x)*(B.y+j.y);return d}function ze(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function St(c){var d={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,P,B,j){var q=B||j;return d[P]=!q||q.toLowerCase(),""}),d["max-age"]){var g=parseInt(d["max-age"],10);isNaN(g)?delete d["max-age"]:d["max-age"]=g}return d}var we=null;function nt(c){if(we==null){var d=c.navigator?c.navigator.userAgent:null;we=!!c.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return we}function Xe(c){try{var d=oe[c];return d.setItem("_mapbox_test_",1),d.removeItem("_mapbox_test_"),!0}catch(g){return!1}}var Ze,Rt,yt,Me,Gt=oe.performance&&oe.performance.now?oe.performance.now.bind(oe.performance):Date.now.bind(Date),ln=oe.requestAnimationFrame||oe.mozRequestAnimationFrame||oe.webkitRequestAnimationFrame||oe.msRequestAnimationFrame,Ln=oe.cancelAnimationFrame||oe.mozCancelAnimationFrame||oe.webkitCancelAnimationFrame||oe.msCancelAnimationFrame,kn={now:Gt,frame:function(c){var d=ln(c);return{cancel:function(){return Ln(d)}}},getImageData:function(c,d){d===void 0&&(d=0);var g=oe.document.createElement("canvas"),A=g.getContext("2d");if(!A)throw new Error("failed to create canvas 2d context");return g.width=c.width,g.height=c.height,A.drawImage(c,0,0,c.width,c.height),A.getImageData(-d,-d,c.width+2*d,c.height+2*d)},resolveURL:function(c){return Ze||(Ze=oe.document.createElement("a")),Ze.href=c,Ze.href},hardwareConcurrency:oe.navigator&&oe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return oe.devicePixelRatio},get prefersReducedMotion(){return!!oe.matchMedia&&(Rt==null&&(Rt=oe.matchMedia("(prefers-reduced-motion: reduce)")),Rt.matches)}},lr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},zt={supported:!1,testSupport:function(c){!Kt&&Me&&(yn?Kn(c):yt=c)}},Kt=!1,yn=!1;function Kn(c){var d=c.createTexture();c.bindTexture(c.TEXTURE_2D,d);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Me),c.isContextLost())return;zt.supported=!0}catch(g){}c.deleteTexture(d),Kt=!0}oe.document&&((Me=oe.document.createElement("img")).onload=function(){yt&&Kn(yt),yt=null,yn=!0},Me.onerror=function(){Kt=!0,yt=null},Me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var rn="01",Wt=function(c,d){this._transformRequestFn=c,this._customAccessToken=d,this._createSkuToken()};function Pt(c){return c.indexOf("mapbox:")===0}Wt.prototype._createSkuToken=function(){var c=function(){for(var d="",g=0;g<10;g++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rn,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt},Wt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Wt.prototype.transformRequest=function(c,d){return this._transformRequestFn&&this._transformRequestFn(c,d)||{url:c}},Wt.prototype.normalizeStyleURL=function(c,d){if(!Pt(c))return c;var g=z(c);return g.path="/styles/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Wt.prototype.normalizeGlyphsURL=function(c,d){if(!Pt(c))return c;var g=z(c);return g.path="/fonts/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Wt.prototype.normalizeSourceURL=function(c,d){if(!Pt(c))return c;var g=z(c);return g.path="/v4/"+g.authority+".json",g.params.push("secure"),this._makeAPIURL(g,this._customAccessToken||d)},Wt.prototype.normalizeSpriteURL=function(c,d,g,A){var P=z(c);return Pt(c)?(P.path="/styles/v1"+P.path+"/sprite"+d+g,this._makeAPIURL(P,this._customAccessToken||A)):(P.path+=""+d+g,ue(P))},Wt.prototype.normalizeTileURL=function(c,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!Pt(c))return c;var g=z(c);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,(kn.devicePixelRatio>=2||d===512?"@2x":"")+(zt.supported?".webp":"$1")),g.path=g.path.replace(/^.+\/v4\//,"/"),g.path="/v4"+g.path;var A=this._customAccessToken||function(P){for(var B=0,j=P;B<j.length;B+=1){var q=j[B].match(/^access_token=(.*)$/);if(q)return q[1]}return null}(g.params)||lr.ACCESS_TOKEN;return lr.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&g.params.push("sku="+this._skuToken),this._makeAPIURL(g,A)},Wt.prototype.canonicalizeTileURL=function(c,d){var g=z(c);if(!g.path.match(/(^\/v4\/)/)||!g.path.match(/\.[\w]+$/))return c;var A="mapbox://tiles/";A+=g.path.replace("/v4/","");var P=g.params;return d&&(P=P.filter(function(B){return!B.match(/^access_token=/)})),P.length&&(A+="?"+P.join("&")),A},Wt.prototype.canonicalizeTileset=function(c,d){for(var g=!!d&&Pt(d),A=[],P=0,B=c.tiles||[];P<B.length;P+=1){var j=B[P];Qe(j)?A.push(this.canonicalizeTileURL(j,g)):A.push(j)}return A},Wt.prototype._makeAPIURL=function(c,d){var g="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",A=z(lr.API_URL);if(c.protocol=A.protocol,c.authority=A.authority,c.protocol==="http"){var P=c.params.indexOf("secure");P>=0&&c.params.splice(P,1)}if(A.path!=="/"&&(c.path=""+A.path+c.path),!lr.REQUIRE_ACCESS_TOKEN)return ue(c);if(!(d=d||lr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if(d[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return c.params=c.params.filter(function(B){return B.indexOf("access_token")===-1}),c.params.push("access_token="+d),ue(c)};var Pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qe(c){return Pe.test(c)}var Bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function z(c){var d=c.match(Bt);if(!d)throw new Error("Unable to parse URL object");return{protocol:d[1],authority:d[2],path:d[3]||"/",params:d[4]?d[4].split("&"):[]}}function ue(c){var d=c.params.length?"?"+c.params.join("&"):"";return c.protocol+"://"+c.authority+c.path+d}function ot(c){if(!c)return null;var d=c.split(".");if(!d||d.length!==3)return null;try{return JSON.parse(decodeURIComponent(oe.atob(d[1]).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(g){return null}}var le=function(c){this.type=c,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};le.prototype.getStorageKey=function(c){var d,g=ot(lr.ACCESS_TOKEN);return d=g&&g.u?oe.btoa(encodeURIComponent(g.u).replace(/%([0-9A-F]{2})/g,function(A,P){return String.fromCharCode(+("0x"+P))})):lr.ACCESS_TOKEN||"",c?"mapbox.eventData."+c+":"+d:"mapbox.eventData:"+d},le.prototype.fetchEventData=function(){var c=Xe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(c)try{var A=oe.localStorage.getItem(d);A&&(this.eventData=JSON.parse(A));var P=oe.localStorage.getItem(g);P&&(this.anonId=P)}catch(B){ut("Unable to read from LocalStorage")}},le.prototype.saveEventData=function(){var c=Xe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(c)try{oe.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&oe.localStorage.setItem(d,JSON.stringify(this.eventData))}catch(A){ut("Unable to write to LocalStorage")}},le.prototype.processRequests=function(c){},le.prototype.postEvent=function(c,d,g,A){var P=this;if(lr.EVENTS_URL){var B=z(lr.EVENTS_URL);B.params.push("access_token="+(A||lr.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(c).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:rn,userId:this.anonId},q=d?Oe(j,d):j,ge={url:ue(B),headers:{"Content-Type":"text/plain"},body:JSON.stringify([q])};this.pendingRequest=qn(ge,function(De){P.pendingRequest=null,g(De),P.saveEventData(),P.processRequests(A)})}},le.prototype.queueRequest=function(c,d){this.queue.push(c),this.processRequests(d)};var $t,an,hn=function(c){function d(){c.call(this,"map.load"),this.success={},this.skuToken=""}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.postMapLoadEvent=function(g,A,P,B){this.skuToken=P;var j=!(!B&&!lr.ACCESS_TOKEN),q=Array.isArray(g)&&g.some(function(ge){return Pt(ge)||Qe(ge)});lr.EVENTS_URL&&j&&q&&this.queueRequest({id:A,timestamp:Date.now()},B)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),B=P.id,j=P.timestamp;B&&this.success[B]||(this.anonId||this.fetchEventData(),dt(this.anonId)||(this.anonId=bt()),this.postEvent(j,{skuToken:this.skuToken},function(q){q||B&&(A.success[B]=!0)},g))}},d}(le),Dn=new(function(c){function d(g){c.call(this,"appUserTurnstile"),this._customAccessToken=g}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.postTurnstileEvent=function(g,A){lr.EVENTS_URL&&lr.ACCESS_TOKEN&&Array.isArray(g)&&g.some(function(P){return Pt(P)||Qe(P)})&&this.queueRequest(Date.now(),A)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=ot(lr.ACCESS_TOKEN),B=P?P.u:lr.ACCESS_TOKEN,j=B!==this.eventData.tokenU;dt(this.anonId)||(this.anonId=bt(),j=!0);var q=this.queue.shift();if(this.eventData.lastSuccess){var ge=new Date(this.eventData.lastSuccess),De=new Date(q),We=(q-this.eventData.lastSuccess)/864e5;j=j||We>=1||We<-1||ge.getDate()!==De.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(q,{"enabled.telemetry":!1},function(tt){tt||(A.eventData.lastSuccess=q,A.eventData.tokenU=B)},g)}},d}(le)),Xn=Dn.postTurnstileEvent.bind(Dn),Gn=new hn,dn=Gn.postMapLoadEvent.bind(Gn),mt=500,Ct=50;function Cn(){oe.caches&&!$t&&($t=oe.caches.open("mapbox-tiles"))}function Pn(c){var d=c.indexOf("?");return d<0?c:c.slice(0,d)}var Zn,ht=1/0;function ye(){return Zn==null&&(Zn=oe.OffscreenCanvas&&new oe.OffscreenCanvas(1,1).getContext("2d")&&typeof oe.createImageBitmap=="function"),Zn}var Be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Be);var rt=function(c){function d(g,A,P){A===401&&Qe(P)&&(g+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),c.call(this,g),this.status=A,this.url=P,this.name=this.constructor.name,this.message=g}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},d}(Error),Mt=ze()?function(){return self.worker&&self.worker.referrer}:function(){return(oe.location.protocol==="blob:"?oe.parent:oe).location.href},Ot,En,$n=function(c,d){if(!(/^file:/.test(g=c.url)||/^file:/.test(Mt())&&!/^\w+:/.test(g))){if(oe.fetch&&oe.Request&&oe.AbortController&&oe.Request.prototype.hasOwnProperty("signal"))return function(A,P){var B,j=new oe.AbortController,q=new oe.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Mt(),signal:j.signal}),ge=!1,De=!1,We=(B=q.url).indexOf("sku=")>0&&Qe(B);A.type==="json"&&q.headers.set("Accept","application/json");var tt=function(Lt,fn,_n){if(!De){if(Lt&&Lt.message!=="SecurityError"&&ut(Lt),fn&&_n)return xt(fn);var Hn=Date.now();oe.fetch(q).then(function(In){if(In.ok){var cr=We?In.clone():null;return xt(In,cr,Hn)}return P(new rt(In.statusText,In.status,A.url))}).catch(function(In){In.code!==20&&P(new Error(In.message))})}},xt=function(Lt,fn,_n){(A.type==="arrayBuffer"?Lt.arrayBuffer():A.type==="json"?Lt.json():Lt.text()).then(function(Hn){De||(fn&&_n&&function(In,cr,gr){if(Cn(),$t){var Lr={status:cr.status,statusText:cr.statusText,headers:new oe.Headers};cr.headers.forEach(function(Gr,Pi){return Lr.headers.set(Pi,Gr)});var Nr=St(cr.headers.get("Cache-Control")||"");Nr["no-store"]||(Nr["max-age"]&&Lr.headers.set("Expires",new Date(gr+1e3*Nr["max-age"]).toUTCString()),new Date(Lr.headers.get("Expires")).getTime()-gr<42e4||function(Gr,Pi){if(an===void 0)try{new Response(new ReadableStream),an=!0}catch(Yi){an=!1}an?Pi(Gr.body):Gr.blob().then(Pi)}(cr,function(Gr){var Pi=new oe.Response(Gr,Lr);Cn(),$t&&$t.then(function(Yi){return Yi.put(Pn(In.url),Pi)}).catch(function(Yi){return ut(Yi.message)})}))}}(q,fn,_n),ge=!0,P(null,Hn,Lt.headers.get("Cache-Control"),Lt.headers.get("Expires")))}).catch(function(Hn){De||P(new Error(Hn.message))})};return We?function(Lt,fn){if(Cn(),!$t)return fn(null);var _n=Pn(Lt.url);$t.then(function(Hn){Hn.match(_n).then(function(In){var cr=function(gr){if(!gr)return!1;var Lr=new Date(gr.headers.get("Expires")||0),Nr=St(gr.headers.get("Cache-Control")||"");return Lr>Date.now()&&!Nr["no-cache"]}(In);Hn.delete(_n),cr&&Hn.put(_n,In.clone()),fn(null,In,cr)}).catch(fn)}).catch(fn)}(q,tt):tt(null,null),{cancel:function(){De=!0,ge||j.abort()}}}(c,d);if(ze()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,d,void 0,!0)}var g;return function(A,P){var B=new oe.XMLHttpRequest;for(var j in B.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(B.responseType="arraybuffer"),A.headers)B.setRequestHeader(j,A.headers[j]);return A.type==="json"&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials=A.credentials==="include",B.onerror=function(){P(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){var q=B.response;if(A.type==="json")try{q=JSON.parse(B.response)}catch(ge){return P(ge)}P(null,q,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else P(new rt(B.statusText,B.status,A.url))},B.send(A.body),{cancel:function(){return B.abort()}}}(c,d)},yr=function(c,d){return $n(Oe(c,{type:"arrayBuffer"}),d)},qn=function(c,d){return $n(Oe(c,{method:"POST"}),d)},Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ot=[],En=0;var xe=function(c,d){if(zt.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),En>=lr.MAX_PARALLEL_IMAGE_REQUESTS){var g={requestParameters:c,callback:d,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(g),g}En++;var A=!1,P=function(){if(!A)for(A=!0,En--;Ot.length&&En<lr.MAX_PARALLEL_IMAGE_REQUESTS;){var j=Ot.shift();j.cancelled||(j.cancel=xe(j.requestParameters,j.callback).cancel)}},B=yr(c,function(j,q,ge,De){P(),j?d(j):q&&(ye()?function(We,tt){var xt=new oe.Blob([new Uint8Array(We)],{type:"image/png"});oe.createImageBitmap(xt).then(function(Lt){tt(null,Lt)}).catch(function(Lt){tt(new Error("Could not load image because of "+Lt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(q,d):function(We,tt,xt,Lt){var fn=new oe.Image,_n=oe.URL;fn.onload=function(){tt(null,fn),_n.revokeObjectURL(fn.src),fn.onload=null,oe.requestAnimationFrame(function(){fn.src=Ce})},fn.onerror=function(){return tt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Hn=new oe.Blob([new Uint8Array(We)],{type:"image/png"});fn.cacheControl=xt,fn.expires=Lt,fn.src=We.byteLength?_n.createObjectURL(Hn):Ce}(q,d,ge,De))});return{cancel:function(){B.cancel(),P()}}};function ke(c,d,g){g[c]&&g[c].indexOf(d)!==-1||(g[c]=g[c]||[],g[c].push(d))}function et(c,d,g){if(g&&g[c]){var A=g[c].indexOf(d);A!==-1&&g[c].splice(A,1)}}var Tt=function(c,d){d===void 0&&(d={}),Oe(this,d),this.type=c},Yt=function(c){function d(g,A){A===void 0&&(A={}),c.call(this,"error",Oe({error:g},A))}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(Tt),pn=function(){};pn.prototype.on=function(c,d){return this._listeners=this._listeners||{},ke(c,d,this._listeners),this},pn.prototype.off=function(c,d){return et(c,d,this._listeners),et(c,d,this._oneTimeListeners),this},pn.prototype.once=function(c,d){return this._oneTimeListeners=this._oneTimeListeners||{},ke(c,d,this._oneTimeListeners),this},pn.prototype.fire=function(c,d){typeof c=="string"&&(c=new Tt(c,d||{}));var g=c.type;if(this.listens(g)){c.target=this;for(var A=0,P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];A<P.length;A+=1)P[A].call(this,c);for(var B=0,j=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];B<j.length;B+=1){var q=j[B];et(g,q,this._oneTimeListeners),q.call(this,c)}var ge=this._eventedParent;ge&&(Oe(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ge.fire(c))}else c instanceof Yt&&console.error(c.error);return this},pn.prototype.listens=function(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)},pn.prototype.setEventedParent=function(c,d){return this._eventedParent=c,this._eventedParentData=d,this};var _t={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},qt=function(c,d,g,A){this.message=(c?c+": ":"")+g,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)};function Qn(c){var d=c.value;return d?[new qt(c.key,d,"constants have been deprecated as of v8")]:[]}function _r(c){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var B=P[A];for(var j in B)c[j]=B[j]}return c}function Vr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function pr(c){if(Array.isArray(c))return c.map(pr);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){var d={};for(var g in c)d[g]=pr(c[g]);return d}return Vr(c)}var Ur=function(c){function d(g,A){c.call(this,A),this.message=A,this.key=g}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(Error),mi=function(c,d){d===void 0&&(d=[]),this.parent=c,this.bindings={};for(var g=0,A=d;g<A.length;g+=1){var P=A[g];this.bindings[P[0]]=P[1]}};mi.prototype.concat=function(c){return new mi(this,c)},mi.prototype.get=function(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(c+" not found in scope.")},mi.prototype.has=function(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)};var wi={kind:"null"},Sr={kind:"number"},Ti={kind:"string"},hi={kind:"boolean"},si={kind:"color"},Mo={kind:"object"},bi={kind:"value"},na={kind:"collator"},_a={kind:"formatted"},Ro={kind:"resolvedImage"};function qo(c,d){return{kind:"array",itemType:c,N:d}}function Ne(c){if(c.kind==="array"){var d=Ne(c.itemType);return typeof c.N=="number"?"array<"+d+", "+c.N+">":c.itemType.kind==="value"?"array":"array<"+d+">"}return c.kind}var Je=[wi,Sr,Ti,hi,si,_a,Mo,qo(bi),Ro];function kt(c,d){if(d.kind==="error")return null;if(c.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!kt(c.itemType,d.itemType))&&(typeof c.N!="number"||c.N===d.N))return null}else{if(c.kind===d.kind)return null;if(c.kind==="value"){for(var g=0,A=Je;g<A.length;g+=1)if(!kt(A[g],d))return null}}return"Expected "+Ne(c)+" but found "+Ne(d)+" instead."}function sn(c,d){return d.some(function(g){return g.kind===c.kind})}function Nn(c,d){return d.some(function(g){return g==="null"?c===null:g==="array"?Array.isArray(c):g==="object"?c&&!Array.isArray(c)&&typeof c=="object":g===typeof c})}var Bn=ve(function(c,d){var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function A(q){return(q=Math.round(q))<0?0:q>255?255:q}function P(q){return A(q[q.length-1]==="%"?parseFloat(q)/100*255:parseInt(q))}function B(q){return(ge=q[q.length-1]==="%"?parseFloat(q)/100:parseFloat(q))<0?0:ge>1?1:ge;var ge}function j(q,ge,De){return De<0?De+=1:De>1&&(De-=1),6*De<1?q+(ge-q)*De*6:2*De<1?ge:3*De<2?q+(ge-q)*(2/3-De)*6:q}try{d.parseCSSColor=function(q){var ge,De=q.replace(/ /g,"").toLowerCase();if(De in g)return g[De].slice();if(De[0]==="#")return De.length===4?(ge=parseInt(De.substr(1),16))>=0&&ge<=4095?[(3840&ge)>>4|(3840&ge)>>8,240&ge|(240&ge)>>4,15&ge|(15&ge)<<4,1]:null:De.length===7&&(ge=parseInt(De.substr(1),16))>=0&&ge<=16777215?[(16711680&ge)>>16,(65280&ge)>>8,255&ge,1]:null;var We=De.indexOf("("),tt=De.indexOf(")");if(We!==-1&&tt+1===De.length){var xt=De.substr(0,We),Lt=De.substr(We+1,tt-(We+1)).split(","),fn=1;switch(xt){case"rgba":if(Lt.length!==4)return null;fn=B(Lt.pop());case"rgb":return Lt.length!==3?null:[P(Lt[0]),P(Lt[1]),P(Lt[2]),fn];case"hsla":if(Lt.length!==4)return null;fn=B(Lt.pop());case"hsl":if(Lt.length!==3)return null;var _n=(parseFloat(Lt[0])%360+360)%360/360,Hn=B(Lt[1]),In=B(Lt[2]),cr=In<=.5?In*(Hn+1):In+Hn-In*Hn,gr=2*In-cr;return[A(255*j(gr,cr,_n+1/3)),A(255*j(gr,cr,_n)),A(255*j(gr,cr,_n-1/3)),fn];default:return null}}return null}}catch(q){}}).parseCSSColor,gn=function(c,d,g,A){A===void 0&&(A=1),this.r=c,this.g=d,this.b=g,this.a=A};gn.parse=function(c){if(c){if(c instanceof gn)return c;if(typeof c=="string"){var d=Bn(c);if(d)return new gn(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3])}}},gn.prototype.toString=function(){var c=this.toArray(),d=c[1],g=c[2],A=c[3];return"rgba("+Math.round(c[0])+","+Math.round(d)+","+Math.round(g)+","+A+")"},gn.prototype.toArray=function(){var c=this.a;return c===0?[0,0,0,0]:[255*this.r/c,255*this.g/c,255*this.b/c,c]},gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);var On=function(c,d,g){this.sensitivity=c?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};On.prototype.compare=function(c,d){return this.collator.compare(c,d)},On.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var dr=function(c,d,g,A,P){this.text=c,this.image=d,this.scale=g,this.fontStack=A,this.textColor=P},hr=function(c){this.sections=c};hr.fromString=function(c){return new hr([new dr(c,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(c){return c.text.length!==0||c.image&&c.image.name.length!==0})},hr.factory=function(c){return c instanceof hr?c:hr.fromString(c)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(c){return c.text}).join("")},hr.prototype.serialize=function(){for(var c=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];if(A.image)c.push(["image",A.image.name]);else{c.push(A.text);var P={};A.fontStack&&(P["text-font"]=["literal",A.fontStack.split(",")]),A.scale&&(P["font-scale"]=A.scale),A.textColor&&(P["text-color"]=["rgba"].concat(A.textColor.toArray())),c.push(P)}}return c};var ii=function(c){this.name=c.name,this.available=c.available};function Gi(c,d,g,A){return typeof c=="number"&&c>=0&&c<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof g=="number"&&g>=0&&g<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:"Invalid rgba value ["+[c,d,g,A].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof A=="number"?[c,d,g,A]:[c,d,g]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ao(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof gn||c instanceof On||c instanceof hr||c instanceof ii)return!0;if(Array.isArray(c)){for(var d=0,g=c;d<g.length;d+=1)if(!ao(g[d]))return!1;return!0}if(typeof c=="object"){for(var A in c)if(!ao(c[A]))return!1;return!0}return!1}function Qr(c){if(c===null)return wi;if(typeof c=="string")return Ti;if(typeof c=="boolean")return hi;if(typeof c=="number")return Sr;if(c instanceof gn)return si;if(c instanceof On)return na;if(c instanceof hr)return _a;if(c instanceof ii)return Ro;if(Array.isArray(c)){for(var d,g=c.length,A=0,P=c;A<P.length;A+=1){var B=Qr(P[A]);if(d){if(d===B)continue;d=bi;break}d=B}return qo(d||bi,g)}return Mo}function ji(c){var d=typeof c;return c===null?"":d==="string"||d==="number"||d==="boolean"?String(c):c instanceof gn||c instanceof hr||c instanceof ii?c.toString():JSON.stringify(c)}ii.prototype.toString=function(){return this.name},ii.fromString=function(c){return c?new ii({name:c,available:!1}):null},ii.prototype.serialize=function(){return["image",this.name]};var Li=function(c,d){this.type=c,this.value=d};Li.parse=function(c,d){if(c.length!==2)return d.error("'literal' expression requires exactly one argument, but found "+(c.length-1)+" instead.");if(!ao(c[1]))return d.error("invalid value");var g=c[1],A=Qr(g),P=d.expectedType;return A.kind!=="array"||A.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(A=P),new Li(A,g)},Li.prototype.evaluate=function(){return this.value},Li.prototype.eachChild=function(){},Li.prototype.outputDefined=function(){return!0},Li.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof gn?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var Zr=function(c){this.name="ExpressionEvaluationError",this.message=c};Zr.prototype.toJSON=function(){return this.message};var yo={string:Ti,number:Sr,boolean:hi,object:Mo},Mi=function(c,d){this.type=c,this.args=d};Mi.parse=function(c,d){if(c.length<2)return d.error("Expected at least one argument.");var g,A=1,P=c[0];if(P==="array"){var B,j;if(c.length>2){var q=c[1];if(typeof q!="string"||!(q in yo)||q==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);B=yo[q],A++}else B=bi;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return d.error('The length argument to "array" must be a positive integer literal',2);j=c[2],A++}g=qo(B,j)}else g=yo[P];for(var ge=[];A<c.length;A++){var De=d.parse(c[A],A,bi);if(!De)return null;ge.push(De)}return new Mi(g,ge)},Mi.prototype.evaluate=function(c){for(var d=0;d<this.args.length;d++){var g=this.args[d].evaluate(c);if(!kt(this.type,Qr(g)))return g;if(d===this.args.length-1)throw new Zr("Expected value to be of type "+Ne(this.type)+", but found "+Ne(Qr(g))+" instead.")}return null},Mi.prototype.eachChild=function(c){this.args.forEach(c)},Mi.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})},Mi.prototype.serialize=function(){var c=this.type,d=[c.kind];if(c.kind==="array"){var g=c.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){d.push(g.kind);var A=c.N;(typeof A=="number"||this.args.length>1)&&d.push(A)}}return d.concat(this.args.map(function(P){return P.serialize()}))};var xo=function(c){this.type=_a,this.sections=c};xo.parse=function(c,d){if(c.length<2)return d.error("Expected at least one argument.");var g=c[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");for(var A=[],P=!1,B=1;B<=c.length-1;++B){var j=c[B];if(P&&typeof j=="object"&&!Array.isArray(j)){P=!1;var q=null;if(j["font-scale"]&&!(q=d.parse(j["font-scale"],1,Sr)))return null;var ge=null;if(j["text-font"]&&!(ge=d.parse(j["text-font"],1,qo(Ti))))return null;var De=null;if(j["text-color"]&&!(De=d.parse(j["text-color"],1,si)))return null;var We=A[A.length-1];We.scale=q,We.font=ge,We.textColor=De}else{var tt=d.parse(c[B],1,bi);if(!tt)return null;var xt=tt.type.kind;if(xt!=="string"&&xt!=="value"&&xt!=="null"&&xt!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,A.push({content:tt,scale:null,font:null,textColor:null})}}return new xo(A)},xo.prototype.evaluate=function(c){return new hr(this.sections.map(function(d){var g=d.content.evaluate(c);return Qr(g)===Ro?new dr("",g,null,null,null):new dr(ji(g),null,d.scale?d.scale.evaluate(c):null,d.font?d.font.evaluate(c).join(","):null,d.textColor?d.textColor.evaluate(c):null)}))},xo.prototype.eachChild=function(c){for(var d=0,g=this.sections;d<g.length;d+=1){var A=g[d];c(A.content),A.scale&&c(A.scale),A.font&&c(A.font),A.textColor&&c(A.textColor)}},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){for(var c=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];c.push(A.content.serialize());var P={};A.scale&&(P["font-scale"]=A.scale.serialize()),A.font&&(P["text-font"]=A.font.serialize()),A.textColor&&(P["text-color"]=A.textColor.serialize()),c.push(P)}return c};var xi=function(c){this.type=Ro,this.input=c};xi.parse=function(c,d){if(c.length!==2)return d.error("Expected two arguments.");var g=d.parse(c[1],1,Ti);return g?new xi(g):d.error("No image name provided.")},xi.prototype.evaluate=function(c){var d=this.input.evaluate(c),g=ii.fromString(d);return g&&c.availableImages&&(g.available=c.availableImages.indexOf(d)>-1),g},xi.prototype.eachChild=function(c){c(this.input)},xi.prototype.outputDefined=function(){return!1},xi.prototype.serialize=function(){return["image",this.input.serialize()]};var Oo={"to-boolean":hi,"to-color":si,"to-number":Sr,"to-string":Ti},ra=function(c,d){this.type=c,this.args=d};ra.parse=function(c,d){if(c.length<2)return d.error("Expected at least one argument.");var g=c[0];if((g==="to-boolean"||g==="to-string")&&c.length!==2)return d.error("Expected one argument.");for(var A=Oo[g],P=[],B=1;B<c.length;B++){var j=d.parse(c[B],B,bi);if(!j)return null;P.push(j)}return new ra(A,P)},ra.prototype.evaluate=function(c){if(this.type.kind==="boolean")return!!this.args[0].evaluate(c);if(this.type.kind==="color"){for(var d,g,A=0,P=this.args;A<P.length;A+=1){if(g=null,(d=P[A].evaluate(c))instanceof gn)return d;if(typeof d=="string"){var B=c.parseColor(d);if(B)return B}else if(Array.isArray(d)&&!(g=d.length<3||d.length>4?"Invalid rbga value "+JSON.stringify(d)+": expected an array containing either three or four numeric values.":Gi(d[0],d[1],d[2],d[3])))return new gn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Zr(g||"Could not parse color from value '"+(typeof d=="string"?d:String(JSON.stringify(d)))+"'")}if(this.type.kind==="number"){for(var j=null,q=0,ge=this.args;q<ge.length;q+=1){if((j=ge[q].evaluate(c))===null)return 0;var De=Number(j);if(!isNaN(De))return De}throw new Zr("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?hr.fromString(ji(this.args[0].evaluate(c))):this.type.kind==="resolvedImage"?ii.fromString(ji(this.args[0].evaluate(c))):ji(this.args[0].evaluate(c))},ra.prototype.eachChild=function(c){this.args.forEach(c)},ra.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})},ra.prototype.serialize=function(){if(this.type.kind==="formatted")return new xo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new xi(this.args[0]).serialize();var c=["to-"+this.type.kind];return this.eachChild(function(d){c.push(d.serialize())}),c};var Ha=["Unknown","Point","LineString","Polygon"],ia=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ia.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ia.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Ha[this.feature.type]:this.feature.type:null},ia.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ia.prototype.canonicalID=function(){return this.canonical},ia.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ia.prototype.parseColor=function(c){var d=this._parseColorCache[c];return d||(d=this._parseColorCache[c]=gn.parse(c)),d};var Wo=function(c,d,g,A){this.name=c,this.type=d,this._evaluate=g,this.args=A};Wo.prototype.evaluate=function(c){return this._evaluate(c,this.args)},Wo.prototype.eachChild=function(c){this.args.forEach(c)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(c){return c.serialize()}))},Wo.parse=function(c,d){var g,A=c[0],P=Wo.definitions[A];if(!P)return d.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0);for(var B=Array.isArray(P)?P[0]:P.type,j=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,q=j.filter(function($o){var po=$o[0];return!Array.isArray(po)||po.length===c.length-1}),ge=null,De=0,We=q;De<We.length;De+=1){var tt=We[De],xt=tt[0],Lt=tt[1];ge=new cu(d.registry,d.path,null,d.scope);for(var fn=[],_n=!1,Hn=1;Hn<c.length;Hn++){var In=c[Hn],cr=Array.isArray(xt)?xt[Hn-1]:xt.type,gr=ge.parse(In,1+fn.length,cr);if(!gr){_n=!0;break}fn.push(gr)}if(!_n)if(Array.isArray(xt)&&xt.length!==fn.length)ge.error("Expected "+xt.length+" arguments, but found "+fn.length+" instead.");else{for(var Lr=0;Lr<fn.length;Lr++){var Nr=Array.isArray(xt)?xt[Lr]:xt.type,Gr=fn[Lr];ge.concat(Lr+1).checkSubtype(Nr,Gr.type)}if(ge.errors.length===0)return new Wo(A,B,Lt,fn)}}if(q.length===1)(g=d.errors).push.apply(g,ge.errors);else{for(var Pi=(q.length?q:j).map(function($o){var po;return po=$o[0],Array.isArray(po)?"("+po.map(Ne).join(", ")+")":"("+Ne(po.type)+"...)"}).join(" | "),Yi=[],Do=1;Do<c.length;Do++){var ho=d.parse(c[Do],1+Yi.length);if(!ho)return null;Yi.push(Ne(ho.type))}d.error("Expected arguments of type "+Pi+", but found ("+Yi.join(", ")+") instead.")}return null},Wo.register=function(c,d){for(var g in Wo.definitions=d,d)c[g]=Wo};var Fa=function(c,d,g){this.type=na,this.locale=g,this.caseSensitive=c,this.diacriticSensitive=d};function cs(c,d){c[0]=Math.min(c[0],d[0]),c[1]=Math.min(c[1],d[1]),c[2]=Math.max(c[2],d[0]),c[3]=Math.max(c[3],d[1])}function wt(c,d){return!(c[0]<=d[0]||c[2]>=d[2]||c[1]<=d[1]||c[3]>=d[3])}function Zt(c,d){var g=(180+c[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,P=Math.pow(2,d.z);return[Math.round(g*P*8192),Math.round(A*P*8192)]}function Un(c,d,g){return d[1]>c[1]!=g[1]>c[1]&&c[0]<(g[0]-d[0])*(c[1]-d[1])/(g[1]-d[1])+d[0]}function Ir(c,d){for(var g,A,P,B,j,q,ge,De=!1,We=0,tt=d.length;We<tt;We++)for(var xt=d[We],Lt=0,fn=xt.length;Lt<fn-1;Lt++){if((B=(g=c)[0]-(A=xt[Lt])[0])*(ge=g[1]-(P=xt[Lt+1])[1])-(q=g[0]-P[0])*(j=g[1]-A[1])==0&&B*q<=0&&j*ge<=0)return!1;Un(c,xt[Lt],xt[Lt+1])&&(De=!De)}return De}function Ci(c,d){for(var g=0;g<d.length;g++)if(Ir(c,d[g]))return!0;return!1}function oo(c,d,g,A){var P=A[0]-g[0],B=A[1]-g[1],j=(c[0]-g[0])*B-P*(c[1]-g[1]),q=(d[0]-g[0])*B-P*(d[1]-g[1]);return j>0&&q<0||j<0&&q>0}function Yo(c,d,g){for(var A=0,P=g;A<P.length;A+=1)for(var B=P[A],j=0;j<B.length-1;++j)if((tt=[(We=B[j+1])[0]-(De=B[j])[0],We[1]-De[1]])[0]*(xt=[(ge=d)[0]-(q=c)[0],ge[1]-q[1]])[1]-tt[1]*xt[0]!=0&&oo(q,ge,De,We)&&oo(De,We,q,ge))return!0;var q,ge,De,We,tt,xt;return!1}function ns(c,d){for(var g=0;g<c.length;++g)if(!Ir(c[g],d))return!1;for(var A=0;A<c.length-1;++A)if(Yo(c[A],c[A+1],d))return!1;return!0}function Ds(c,d){for(var g=0;g<d.length;g++)if(ns(c,d[g]))return!0;return!1}function Us(c,d,g){for(var A=[],P=0;P<c.length;P++){for(var B=[],j=0;j<c[P].length;j++){var q=Zt(c[P][j],g);cs(d,q),B.push(q)}A.push(B)}return A}function fl(c,d,g){for(var A=[],P=0;P<c.length;P++){var B=Us(c[P],d,g);A.push(B)}return A}function xh(c,d,g,A){if(c[0]<g[0]||c[0]>g[2]){var P=.5*A,B=c[0]-g[0]>P?-A:g[0]-c[0]>P?A:0;B===0&&(B=c[0]-g[2]>P?-A:g[2]-c[0]>P?A:0),c[0]+=B}cs(d,c)}function kp(c,d,g,A){for(var P=8192*Math.pow(2,A.z),B=[8192*A.x,8192*A.y],j=[],q=0,ge=c;q<ge.length;q+=1)for(var De=0,We=ge[q];De<We.length;De+=1){var tt=We[De],xt=[tt.x+B[0],tt.y+B[1]];xh(xt,d,g,P),j.push(xt)}return j}function Ad(c,d,g,A){for(var P,B=8192*Math.pow(2,A.z),j=[8192*A.x,8192*A.y],q=[],ge=0,De=c;ge<De.length;ge+=1){for(var We=[],tt=0,xt=De[ge];tt<xt.length;tt+=1){var Lt=xt[tt],fn=[Lt.x+j[0],Lt.y+j[1]];cs(d,fn),We.push(fn)}q.push(We)}if(d[2]-d[0]<=B/2){(P=d)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var _n=0,Hn=q;_n<Hn.length;_n+=1)for(var In=0,cr=Hn[_n];In<cr.length;In+=1)xh(cr[In],d,g,B)}return q}Fa.parse=function(c,d){if(c.length!==2)return d.error("Expected one argument.");var g=c[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");var A=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,hi);if(!A)return null;var P=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,hi);if(!P)return null;var B=null;return g.locale&&!(B=d.parse(g.locale,1,Ti))?null:new Fa(A,P,B)},Fa.prototype.evaluate=function(c){return new On(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)},Fa.prototype.eachChild=function(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)},Fa.prototype.outputDefined=function(){return!1},Fa.prototype.serialize=function(){var c={};return c["case-sensitive"]=this.caseSensitive.serialize(),c["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(c.locale=this.locale.serialize()),["collator",c]};var Vl=function(c,d){this.type=hi,this.geojson=c,this.geometries=d};function If(c){if(c instanceof Wo&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Vl)return!1;var d=!0;return c.eachChild(function(g){d&&!If(g)&&(d=!1)}),d}function Lf(c){if(c instanceof Wo&&c.name==="feature-state")return!1;var d=!0;return c.eachChild(function(g){d&&!Lf(g)&&(d=!1)}),d}function sc(c,d){if(c instanceof Wo&&d.indexOf(c.name)>=0)return!1;var g=!0;return c.eachChild(function(A){g&&!sc(A,d)&&(g=!1)}),g}Vl.parse=function(c,d){if(c.length!==2)return d.error("'within' expression requires exactly one argument, but found "+(c.length-1)+" instead.");if(ao(c[1])){var g=c[1];if(g.type==="FeatureCollection")for(var A=0;A<g.features.length;++A){var P=g.features[A].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Vl(g,g.features[A].geometry)}else if(g.type==="Feature"){var B=g.geometry.type;if(B==="Polygon"||B==="MultiPolygon")return new Vl(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Vl(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vl.prototype.evaluate=function(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],B=d.canonicalID();if(g.type==="Polygon"){var j=Us(g.coordinates,P,B),q=kp(d.geometry(),A,P,B);if(!wt(A,P))return!1;for(var ge=0,De=q;ge<De.length;ge+=1)if(!Ir(De[ge],j))return!1}if(g.type==="MultiPolygon"){var We=fl(g.coordinates,P,B),tt=kp(d.geometry(),A,P,B);if(!wt(A,P))return!1;for(var xt=0,Lt=tt;xt<Lt.length;xt+=1)if(!Ci(Lt[xt],We))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],B=d.canonicalID();if(g.type==="Polygon"){var j=Us(g.coordinates,P,B),q=Ad(d.geometry(),A,P,B);if(!wt(A,P))return!1;for(var ge=0,De=q;ge<De.length;ge+=1)if(!ns(De[ge],j))return!1}if(g.type==="MultiPolygon"){var We=fl(g.coordinates,P,B),tt=Ad(d.geometry(),A,P,B);if(!wt(A,P))return!1;for(var xt=0,Lt=tt;xt<Lt.length;xt+=1)if(!Ds(Lt[xt],We))return!1}return!0}(c,this.geometries)}return!1},Vl.prototype.eachChild=function(){},Vl.prototype.outputDefined=function(){return!0},Vl.prototype.serialize=function(){return["within",this.geojson]};var zc=function(c,d){this.type=d.type,this.name=c,this.boundExpression=d};zc.parse=function(c,d){if(c.length!==2||typeof c[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");var g=c[1];return d.scope.has(g)?new zc(g,d.scope.get(g)):d.error('Unknown variable "'+g+'". Make sure "'+g+'" has been bound in an enclosing "let" expression before using it.',1)},zc.prototype.evaluate=function(c){return this.boundExpression.evaluate(c)},zc.prototype.eachChild=function(){},zc.prototype.outputDefined=function(){return!1},zc.prototype.serialize=function(){return["var",this.name]};var cu=function(c,d,g,A,P){d===void 0&&(d=[]),A===void 0&&(A=new mi),P===void 0&&(P=[]),this.registry=c,this.path=d,this.key=d.map(function(B){return"["+B+"]"}).join(""),this.scope=A,this.errors=P,this.expectedType=g};function eh(c,d){for(var g,A=c.length-1,P=0,B=A,j=0;P<=B;)if((g=c[j=Math.floor((P+B)/2)])<=d){if(j===A||d<c[j+1])return j;P=j+1}else{if(!(g>d))throw new Zr("Input is not a number.");B=j-1}return 0}cu.prototype.parse=function(c,d,g,A,P){return P===void 0&&(P={}),d?this.concat(d,g,A)._parse(c,P):this._parse(c,P)},cu.prototype._parse=function(c,d){function g(De,We,tt){return tt==="assert"?new Mi(We,[De]):tt==="coerce"?new ra(We,[De]):De}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var A=c[0];if(typeof A!="string")return this.error("Expression name must be a string, but found "+typeof A+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[A];if(P){var B=P.parse(c,this);if(!B)return null;if(this.expectedType){var j=this.expectedType,q=B.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||q.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||q.kind!=="value"&&q.kind!=="string"){if(this.checkSubtype(j,q))return null}else B=g(B,j,d.typeAnnotation||"coerce");else B=g(B,j,d.typeAnnotation||"assert")}if(!(B instanceof Li)&&B.type.kind!=="resolvedImage"&&function De(We){if(We instanceof zc)return De(We.boundExpression);if(We instanceof Wo&&We.name==="error"||We instanceof Fa||We instanceof Vl)return!1;var tt=We instanceof ra||We instanceof Mi,xt=!0;return We.eachChild(function(Lt){xt=tt?xt&&De(Lt):xt&&Lt instanceof Li}),!!xt&&If(We)&&sc(We,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(B)){var ge=new ia;try{B=new Li(B.type,B.evaluate(ge))}catch(De){return this.error(De.message),null}}return B}return this.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof c+" instead.")},cu.prototype.concat=function(c,d,g){var A=typeof c=="number"?this.path.concat(c):this.path,P=g?this.scope.concat(g):this.scope;return new cu(this.registry,A,d||null,P,this.errors)},cu.prototype.error=function(c){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];var A=""+this.key+d.map(function(P){return"["+P+"]"}).join("");this.errors.push(new Ur(A,c))},cu.prototype.checkSubtype=function(c,d){var g=kt(c,d);return g&&this.error(g),g};var pc=function(c,d,g){this.type=c,this.input=d,this.labels=[],this.outputs=[];for(var A=0,P=g;A<P.length;A+=1){var B=P[A],j=B[1];this.labels.push(B[0]),this.outputs.push(j)}};function Os(c,d,g){return c*(1-g)+d*g}pc.parse=function(c,d){if(c.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if((c.length-1)%2!=0)return d.error("Expected an even number of arguments.");var g=d.parse(c[1],1,Sr);if(!g)return null;var A=[],P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(var B=1;B<c.length;B+=2){var j=B===1?-1/0:c[B],q=c[B+1],ge=B,De=B+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ge);if(A.length&&A[A.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ge);var We=d.parse(q,De,P);if(!We)return null;P=P||We.type,A.push([j,We])}return new pc(P,g,A)},pc.prototype.evaluate=function(c){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(c);var A=this.input.evaluate(c);if(A<=d[0])return g[0].evaluate(c);var P=d.length;return A>=d[P-1]?g[P-1].evaluate(c):g[eh(d,A)].evaluate(c)},pc.prototype.eachChild=function(c){c(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)c(g[d])},pc.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})},pc.prototype.serialize=function(){for(var c=["step",this.input.serialize()],d=0;d<this.labels.length;d++)d>0&&c.push(this.labels[d]),c.push(this.outputs[d].serialize());return c};var Oc=Object.freeze({__proto__:null,number:Os,color:function(c,d,g){return new gn(Os(c.r,d.r,g),Os(c.g,d.g,g),Os(c.b,d.b,g),Os(c.a,d.a,g))},array:function(c,d,g){return c.map(function(A,P){return Os(A,d[P],g)})}}),gf=6/29*3*(6/29),Zh=Math.PI/180,Up=180/Math.PI;function Eh(c){return c>.008856451679035631?Math.pow(c,1/3):c/gf+4/29}function Cd(c){return c>6/29?c*c*c:gf*(c-4/29)}function th(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Xh(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Od(c){var d=Xh(c.r),g=Xh(c.g),A=Xh(c.b),P=Eh((.4124564*d+.3575761*g+.1804375*A)/.95047),B=Eh((.2126729*d+.7151522*g+.072175*A)/1);return{l:116*B-16,a:500*(P-B),b:200*(B-Eh((.0193339*d+.119192*g+.9503041*A)/1.08883)),alpha:c.a}}function Rd(c){var d=(c.l+16)/116,g=isNaN(c.a)?d:d+c.a/500,A=isNaN(c.b)?d:d-c.b/200;return d=1*Cd(d),g=.95047*Cd(g),A=1.08883*Cd(A),new gn(th(3.2404542*g-1.5371385*d-.4985314*A),th(-.969266*g+1.8760108*d+.041556*A),th(.0556434*g-.2040259*d+1.0572252*A),c.alpha)}function _0(c,d,g){var A=d-c;return c+g*(A>180||A<-180?A-360*Math.round(A/360):A)}var Df={forward:Od,reverse:Rd,interpolate:function(c,d,g){return{l:Os(c.l,d.l,g),a:Os(c.a,d.a,g),b:Os(c.b,d.b,g),alpha:Os(c.alpha,d.alpha,g)}}},Uu={forward:function(c){var d=Od(c),g=d.l,A=d.a,P=d.b,B=Math.atan2(P,A)*Up;return{h:B<0?B+360:B,c:Math.sqrt(A*A+P*P),l:g,alpha:c.a}},reverse:function(c){var d=c.h*Zh,g=c.c;return Rd({l:c.l,a:Math.cos(d)*g,b:Math.sin(d)*g,alpha:c.alpha})},interpolate:function(c,d,g){return{h:_0(c.h,d.h,g),c:Os(c.c,d.c,g),l:Os(c.l,d.l,g),alpha:Os(c.alpha,d.alpha,g)}}},up=Object.freeze({__proto__:null,lab:Df,hcl:Uu}),Hl=function(c,d,g,A,P){this.type=c,this.operator=d,this.interpolation=g,this.input=A,this.labels=[],this.outputs=[];for(var B=0,j=P;B<j.length;B+=1){var q=j[B],ge=q[1];this.labels.push(q[0]),this.outputs.push(ge)}};function Su(c,d,g,A){var P=A-g,B=c-g;return P===0?0:d===1?B/P:(Math.pow(d,B)-1)/(Math.pow(d,P)-1)}Hl.interpolationFactor=function(c,d,g,A){var P=0;if(c.name==="exponential")P=Su(d,c.base,g,A);else if(c.name==="linear")P=Su(d,1,g,A);else if(c.name==="cubic-bezier"){var B=c.controlPoints;P=new te(B[0],B[1],B[2],B[3]).solve(Su(d,1,g,A))}return P},Hl.parse=function(c,d){var g=c[0],A=c[1],P=c[2],B=c.slice(3);if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){var j=A[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:j}}else{if(A[0]!=="cubic-bezier")return d.error("Unknown interpolation type "+String(A[0]),1,0);var q=A.slice(1);if(q.length!==4||q.some(function(Hn){return typeof Hn!="number"||Hn<0||Hn>1}))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:q}}if(c.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if((c.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(!(P=d.parse(P,2,Sr)))return null;var ge=[],De=null;g==="interpolate-hcl"||g==="interpolate-lab"?De=si:d.expectedType&&d.expectedType.kind!=="value"&&(De=d.expectedType);for(var We=0;We<B.length;We+=2){var tt=B[We],xt=B[We+1],Lt=We+3,fn=We+4;if(typeof tt!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Lt);if(ge.length&&ge[ge.length-1][0]>=tt)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Lt);var _n=d.parse(xt,fn,De);if(!_n)return null;De=De||_n.type,ge.push([tt,_n])}return De.kind==="number"||De.kind==="color"||De.kind==="array"&&De.itemType.kind==="number"&&typeof De.N=="number"?new Hl(De,g,A,P,ge):d.error("Type "+Ne(De)+" is not interpolatable.")},Hl.prototype.evaluate=function(c){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(c);var A=this.input.evaluate(c);if(A<=d[0])return g[0].evaluate(c);var P=d.length;if(A>=d[P-1])return g[P-1].evaluate(c);var B=eh(d,A),j=Hl.interpolationFactor(this.interpolation,A,d[B],d[B+1]),q=g[B].evaluate(c),ge=g[B+1].evaluate(c);return this.operator==="interpolate"?Oc[this.type.kind.toLowerCase()](q,ge,j):this.operator==="interpolate-hcl"?Uu.reverse(Uu.interpolate(Uu.forward(q),Uu.forward(ge),j)):Df.reverse(Df.interpolate(Df.forward(q),Df.forward(ge),j))},Hl.prototype.eachChild=function(c){c(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)c(g[d])},Hl.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})},Hl.prototype.serialize=function(){var c;c=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var d=[this.operator,c,this.input.serialize()],g=0;g<this.labels.length;g++)d.push(this.labels[g],this.outputs[g].serialize());return d};var ef=function(c,d){this.type=c,this.args=d};ef.parse=function(c,d){if(c.length<2)return d.error("Expectected at least one argument.");var g=null,A=d.expectedType;A&&A.kind!=="value"&&(g=A);for(var P=[],B=0,j=c.slice(1);B<j.length;B+=1){var q=d.parse(j[B],1+P.length,g,void 0,{typeAnnotation:"omit"});if(!q)return null;g=g||q.type,P.push(q)}var ge=A&&P.some(function(De){return kt(A,De.type)});return new ef(ge?bi:g,P)},ef.prototype.evaluate=function(c){for(var d,g=null,A=0,P=0,B=this.args;P<B.length&&(A++,(g=B[P].evaluate(c))&&g instanceof ii&&!g.available&&(d||(d=g.name),g=null,A===this.args.length&&(g=d)),g===null);P+=1);return g},ef.prototype.eachChild=function(c){this.args.forEach(c)},ef.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})},ef.prototype.serialize=function(){var c=["coalesce"];return this.eachChild(function(d){c.push(d.serialize())}),c};var vc=function(c,d){this.type=d.type,this.bindings=[].concat(c),this.result=d};vc.prototype.evaluate=function(c){return this.result.evaluate(c)},vc.prototype.eachChild=function(c){for(var d=0,g=this.bindings;d<g.length;d+=1)c(g[d][1]);c(this.result)},vc.parse=function(c,d){if(c.length<4)return d.error("Expected at least 3 arguments, but found "+(c.length-1)+" instead.");for(var g=[],A=1;A<c.length-1;A+=2){var P=c[A];if(typeof P!="string")return d.error("Expected string, but found "+typeof P+" instead.",A);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);var B=d.parse(c[A+1],A+1);if(!B)return null;g.push([P,B])}var j=d.parse(c[c.length-1],c.length-1,d.expectedType,g);return j?new vc(g,j):null},vc.prototype.outputDefined=function(){return this.result.outputDefined()},vc.prototype.serialize=function(){for(var c=["let"],d=0,g=this.bindings;d<g.length;d+=1){var A=g[d];c.push(A[0],A[1].serialize())}return c.push(this.result.serialize()),c};var tf=function(c,d,g){this.type=c,this.index=d,this.input=g};tf.parse=function(c,d){if(c.length!==3)return d.error("Expected 2 arguments, but found "+(c.length-1)+" instead.");var g=d.parse(c[1],1,Sr),A=d.parse(c[2],2,qo(d.expectedType||bi));return g&&A?new tf(A.type.itemType,g,A):null},tf.prototype.evaluate=function(c){var d=this.index.evaluate(c),g=this.input.evaluate(c);if(d<0)throw new Zr("Array index out of bounds: "+d+" < 0.");if(d>=g.length)throw new Zr("Array index out of bounds: "+d+" > "+(g.length-1)+".");if(d!==Math.floor(d))throw new Zr("Array index must be an integer, but found "+d+" instead.");return g[d]},tf.prototype.eachChild=function(c){c(this.index),c(this.input)},tf.prototype.outputDefined=function(){return!1},tf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var uu=function(c,d){this.type=hi,this.needle=c,this.haystack=d};uu.parse=function(c,d){if(c.length!==3)return d.error("Expected 2 arguments, but found "+(c.length-1)+" instead.");var g=d.parse(c[1],1,bi),A=d.parse(c[2],2,bi);return g&&A?sn(g.type,[hi,Ti,Sr,wi,bi])?new uu(g,A):d.error("Expected first argument to be of type boolean, string, number or null, but found "+Ne(g.type)+" instead"):null},uu.prototype.evaluate=function(c){var d=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(!g)return!1;if(!Nn(d,["boolean","string","number","null"]))throw new Zr("Expected first argument to be of type boolean, string, number or null, but found "+Ne(Qr(d))+" instead.");if(!Nn(g,["string","array"]))throw new Zr("Expected second argument to be of type array or string, but found "+Ne(Qr(g))+" instead.");return g.indexOf(d)>=0},uu.prototype.eachChild=function(c){c(this.needle),c(this.haystack)},uu.prototype.outputDefined=function(){return!0},uu.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var nf=function(c,d,g){this.type=Sr,this.needle=c,this.haystack=d,this.fromIndex=g};nf.parse=function(c,d){if(c.length<=2||c.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(c.length-1)+" instead.");var g=d.parse(c[1],1,bi),A=d.parse(c[2],2,bi);if(!g||!A)return null;if(!sn(g.type,[hi,Ti,Sr,wi,bi]))return d.error("Expected first argument to be of type boolean, string, number or null, but found "+Ne(g.type)+" instead");if(c.length===4){var P=d.parse(c[3],3,Sr);return P?new nf(g,A,P):null}return new nf(g,A)},nf.prototype.evaluate=function(c){var d=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(!Nn(d,["boolean","string","number","null"]))throw new Zr("Expected first argument to be of type boolean, string, number or null, but found "+Ne(Qr(d))+" instead.");if(!Nn(g,["string","array"]))throw new Zr("Expected second argument to be of type array or string, but found "+Ne(Qr(g))+" instead.");if(this.fromIndex){var A=this.fromIndex.evaluate(c);return g.indexOf(d,A)}return g.indexOf(d)},nf.prototype.eachChild=function(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)},nf.prototype.outputDefined=function(){return!1},nf.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var c=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),c]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pl=function(c,d,g,A,P,B){this.inputType=c,this.type=d,this.input=g,this.cases=A,this.outputs=P,this.otherwise=B};Pl.parse=function(c,d){if(c.length<5)return d.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if(c.length%2!=1)return d.error("Expected an even number of arguments.");var g,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(var P={},B=[],j=2;j<c.length-1;j+=2){var q=c[j],ge=c[j+1];Array.isArray(q)||(q=[q]);var De=d.concat(j);if(q.length===0)return De.error("Expected at least one branch label.");for(var We=0,tt=q;We<tt.length;We+=1){var xt=tt[We];if(typeof xt!="number"&&typeof xt!="string")return De.error("Branch labels must be numbers or strings.");if(typeof xt=="number"&&Math.abs(xt)>Number.MAX_SAFE_INTEGER)return De.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof xt=="number"&&Math.floor(xt)!==xt)return De.error("Numeric branch labels must be integer values.");if(g){if(De.checkSubtype(g,Qr(xt)))return null}else g=Qr(xt);if(P[String(xt)]!==void 0)return De.error("Branch labels must be unique.");P[String(xt)]=B.length}var Lt=d.parse(ge,j,A);if(!Lt)return null;A=A||Lt.type,B.push(Lt)}var fn=d.parse(c[1],1,bi);if(!fn)return null;var _n=d.parse(c[c.length-1],c.length-1,A);return _n?fn.type.kind!=="value"&&d.concat(1).checkSubtype(g,fn.type)?null:new Pl(g,A,fn,P,B,_n):null},Pl.prototype.evaluate=function(c){var d=this.input.evaluate(c);return(Qr(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(c)},Pl.prototype.eachChild=function(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)},Pl.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})&&this.otherwise.outputDefined()},Pl.prototype.serialize=function(){for(var c=this,d=["match",this.input.serialize()],g=[],A={},P=0,B=Object.keys(this.cases).sort();P<B.length;P+=1){var j=B[P];(tt=A[this.cases[j]])===void 0?(A[this.cases[j]]=g.length,g.push([this.cases[j],[j]])):g[tt][1].push(j)}for(var q=function(Lt){return c.inputType.kind==="number"?Number(Lt):Lt},ge=0,De=g;ge<De.length;ge+=1){var We=De[ge],tt=We[0],xt=We[1];d.push(xt.length===1?q(xt[0]):xt.map(q)),d.push(this.outputs[outputIndex$1].serialize())}return d.push(this.otherwise.serialize()),d};var zu=function(c,d,g){this.type=c,this.branches=d,this.otherwise=g};zu.parse=function(c,d){if(c.length<4)return d.error("Expected at least 3 arguments, but found only "+(c.length-1)+".");if(c.length%2!=0)return d.error("Expected an odd number of arguments.");var g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);for(var A=[],P=1;P<c.length-1;P+=2){var B=d.parse(c[P],P,hi);if(!B)return null;var j=d.parse(c[P+1],P+1,g);if(!j)return null;A.push([B,j]),g=g||j.type}var q=d.parse(c[c.length-1],c.length-1,g);return q?new zu(g,A,q):null},zu.prototype.evaluate=function(c){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];if(A[0].evaluate(c))return P.evaluate(c)}return this.otherwise.evaluate(c)},zu.prototype.eachChild=function(c){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];c(A[0]),c(P)}c(this.otherwise)},zu.prototype.outputDefined=function(){return this.branches.every(function(c){return c[1].outputDefined()})&&this.otherwise.outputDefined()},zu.prototype.serialize=function(){var c=["case"];return this.eachChild(function(d){c.push(d.serialize())}),c};var yf=function(c,d,g,A){this.type=c,this.input=d,this.beginIndex=g,this.endIndex=A};function fp(c,d){return c==="=="||c==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function $h(c,d,g,A){return A.compare(d,g)===0}function bs(c,d,g){var A=c!=="=="&&c!=="!=";return function(){function P(B,j,q){this.type=hi,this.lhs=B,this.rhs=j,this.collator=q,this.hasUntypedArgument=B.type.kind==="value"||j.type.kind==="value"}return P.parse=function(B,j){if(B.length!==3&&B.length!==4)return j.error("Expected two or three arguments.");var q=B[0],ge=j.parse(B[1],1,bi);if(!ge)return null;if(!fp(q,ge.type))return j.concat(1).error('"'+q+`" comparisons are not supported for type '`+Ne(ge.type)+"'.");var De=j.parse(B[2],2,bi);if(!De)return null;if(!fp(q,De.type))return j.concat(2).error('"'+q+`" comparisons are not supported for type '`+Ne(De.type)+"'.");if(ge.type.kind!==De.type.kind&&ge.type.kind!=="value"&&De.type.kind!=="value")return j.error("Cannot compare types '"+Ne(ge.type)+"' and '"+Ne(De.type)+"'.");A&&(ge.type.kind==="value"&&De.type.kind!=="value"?ge=new Mi(De.type,[ge]):ge.type.kind!=="value"&&De.type.kind==="value"&&(De=new Mi(ge.type,[De])));var We=null;if(B.length===4){if(ge.type.kind!=="string"&&De.type.kind!=="string"&&ge.type.kind!=="value"&&De.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!(We=j.parse(B[3],3,na)))return null}return new P(ge,De,We)},P.prototype.evaluate=function(B){var j=this.lhs.evaluate(B),q=this.rhs.evaluate(B);if(A&&this.hasUntypedArgument){var ge=Qr(j),De=Qr(q);if(ge.kind!==De.kind||ge.kind!=="string"&&ge.kind!=="number")throw new Zr('Expected arguments for "'+c+'" to be (string, string) or (number, number), but found ('+ge.kind+", "+De.kind+") instead.")}if(this.collator&&!A&&this.hasUntypedArgument){var We=Qr(j),tt=Qr(q);if(We.kind!=="string"||tt.kind!=="string")return d(B,j,q)}return this.collator?g(B,j,q,this.collator.evaluate(B)):d(B,j,q)},P.prototype.eachChild=function(B){B(this.lhs),B(this.rhs),this.collator&&B(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var B=[c];return this.eachChild(function(j){B.push(j.serialize())}),B},P}()}yf.parse=function(c,d){if(c.length<=2||c.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(c.length-1)+" instead.");var g=d.parse(c[1],1,bi),A=d.parse(c[2],2,Sr);if(!g||!A)return null;if(!sn(g.type,[qo(bi),Ti,bi]))return d.error("Expected first argument to be of type array or string, but found "+Ne(g.type)+" instead");if(c.length===4){var P=d.parse(c[3],3,Sr);return P?new yf(g.type,g,A,P):null}return new yf(g.type,g,A)},yf.prototype.evaluate=function(c){var d=this.input.evaluate(c),g=this.beginIndex.evaluate(c);if(!Nn(d,["string","array"]))throw new Zr("Expected first argument to be of type array or string, but found "+Ne(Qr(d))+" instead.");if(this.endIndex){var A=this.endIndex.evaluate(c);return d.slice(g,A)}return d.slice(g)},yf.prototype.eachChild=function(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)},yf.prototype.outputDefined=function(){return!1},yf.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var c=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),c]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Md=bs("==",function(c,d,g){return d===g},$h),Yh=bs("!=",function(c,d,g){return d!==g},function(c,d,g,A){return!$h(0,d,g,A)}),Pd=bs("<",function(c,d,g){return d<g},function(c,d,g,A){return A.compare(d,g)<0}),cl=bs(">",function(c,d,g){return d>g},function(c,d,g,A){return A.compare(d,g)>0}),Sh=bs("<=",function(c,d,g){return d<=g},function(c,d,g,A){return A.compare(d,g)<=0}),Th=bs(">=",function(c,d,g){return d>=g},function(c,d,g,A){return A.compare(d,g)>=0}),ne=function(c,d,g,A,P){this.type=Ti,this.number=c,this.locale=d,this.currency=g,this.minFractionDigits=A,this.maxFractionDigits=P};ne.parse=function(c,d){if(c.length!==3)return d.error("Expected two arguments.");var g=d.parse(c[1],1,Sr);if(!g)return null;var A=c[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");var P=null;if(A.locale&&!(P=d.parse(A.locale,1,Ti)))return null;var B=null;if(A.currency&&!(B=d.parse(A.currency,1,Ti)))return null;var j=null;if(A["min-fraction-digits"]&&!(j=d.parse(A["min-fraction-digits"],1,Sr)))return null;var q=null;return A["max-fraction-digits"]&&!(q=d.parse(A["max-fraction-digits"],1,Sr))?null:new ne(g,P,B,j,q)},ne.prototype.evaluate=function(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))},ne.prototype.eachChild=function(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)},ne.prototype.outputDefined=function(){return!1},ne.prototype.serialize=function(){var c={};return this.locale&&(c.locale=this.locale.serialize()),this.currency&&(c.currency=this.currency.serialize()),this.minFractionDigits&&(c["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(c["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),c]};var _e=function(c){this.type=Sr,this.input=c};_e.parse=function(c,d){if(c.length!==2)return d.error("Expected 1 argument, but found "+(c.length-1)+" instead.");var g=d.parse(c[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error("Expected argument of type string or array, but found "+Ne(g.type)+" instead."):new _e(g):null},_e.prototype.evaluate=function(c){var d=this.input.evaluate(c);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Zr("Expected value to be of type string or array, but found "+Ne(Qr(d))+" instead.")},_e.prototype.eachChild=function(c){c(this.input)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){var c=["length"];return this.eachChild(function(d){c.push(d.serialize())}),c};var qe={"==":Md,"!=":Yh,">":cl,"<":Pd,">=":Th,"<=":Sh,array:Mi,at:tf,boolean:Mi,case:zu,coalesce:ef,collator:Fa,format:xo,image:xi,in:uu,"index-of":nf,interpolate:Hl,"interpolate-hcl":Hl,"interpolate-lab":Hl,length:_e,let:vc,literal:Li,match:Pl,number:Mi,"number-format":ne,object:Mi,slice:yf,step:pc,string:Mi,"to-boolean":ra,"to-color":ra,"to-number":ra,"to-string":ra,var:zc,within:Vl};function un(c,d){var g=d[0],A=d[1],P=d[2],B=d[3];g=g.evaluate(c),A=A.evaluate(c),P=P.evaluate(c);var j=B?B.evaluate(c):1,q=Gi(g,A,P,j);if(q)throw new Zr(q);return new gn(g/255*j,A/255*j,P/255*j,j)}function Y(c,d){return c in d}function tr(c,d){var g=d[c];return g===void 0?null:g}function Rr(c){return{type:c}}function Di(c){return{result:"success",value:c}}function zi(c){return{result:"error",value:c}}function lo(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function uo(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function wa(c){return!!c.expression&&c.expression.interpolated}function No(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Aa(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function os(c){return c}function ga(c,d,g){return c!==void 0?c:d!==void 0?d:g!==void 0?g:void 0}function Ra(c,d,g,A,P){return ga(typeof g===P?A[g]:void 0,c.default,d.default)}function Rs(c,d,g){if(No(g)!=="number")return ga(c.default,d.default);var A=c.stops.length;if(A===1||g<=c.stops[0][0])return c.stops[0][1];if(g>=c.stops[A-1][0])return c.stops[A-1][1];var P=eh(c.stops.map(function(B){return B[0]}),g);return c.stops[P][1]}function ka(c,d,g){var A=c.base!==void 0?c.base:1;if(No(g)!=="number")return ga(c.default,d.default);var P=c.stops.length;if(P===1||g<=c.stops[0][0])return c.stops[0][1];if(g>=c.stops[P-1][0])return c.stops[P-1][1];var B=eh(c.stops.map(function(tt){return tt[0]}),g),j=function(tt,xt,Lt,fn){var _n=fn-Lt,Hn=tt-Lt;return _n===0?0:xt===1?Hn/_n:(Math.pow(xt,Hn)-1)/(Math.pow(xt,_n)-1)}(g,A,c.stops[B][0],c.stops[B+1][0]),q=c.stops[B][1],ge=c.stops[B+1][1],De=Oc[d.type]||os;if(c.colorSpace&&c.colorSpace!=="rgb"){var We=up[c.colorSpace];De=function(tt,xt){return We.reverse(We.interpolate(We.forward(tt),We.forward(xt),j))}}return typeof q.evaluate=="function"?{evaluate:function(){for(var tt=[],xt=arguments.length;xt--;)tt[xt]=arguments[xt];var Lt=q.evaluate.apply(void 0,tt),fn=ge.evaluate.apply(void 0,tt);if(Lt!==void 0&&fn!==void 0)return De(Lt,fn,j)}}:De(q,ge,j)}function Za(c,d,g){return d.type==="color"?g=gn.parse(g):d.type==="formatted"?g=hr.fromString(g.toString()):d.type==="resolvedImage"?g=ii.fromString(g.toString()):No(g)===d.type||d.type==="enum"&&d.values[g]||(g=void 0),ga(g,c.default,d.default)}Wo.register(qe,{error:[{kind:"error"},[Ti],function(c,d){throw new Zr(d[0].evaluate(c))}],typeof:[Ti,[bi],function(c,d){return Ne(Qr(d[0].evaluate(c)))}],"to-rgba":[qo(Sr,4),[si],function(c,d){return d[0].evaluate(c).toArray()}],rgb:[si,[Sr,Sr,Sr],un],rgba:[si,[Sr,Sr,Sr,Sr],un],has:{type:hi,overloads:[[[Ti],function(c,d){return Y(d[0].evaluate(c),c.properties())}],[[Ti,Mo],function(c,d){var g=d[1];return Y(d[0].evaluate(c),g.evaluate(c))}]]},get:{type:bi,overloads:[[[Ti],function(c,d){return tr(d[0].evaluate(c),c.properties())}],[[Ti,Mo],function(c,d){var g=d[1];return tr(d[0].evaluate(c),g.evaluate(c))}]]},"feature-state":[bi,[Ti],function(c,d){return tr(d[0].evaluate(c),c.featureState||{})}],properties:[Mo,[],function(c){return c.properties()}],"geometry-type":[Ti,[],function(c){return c.geometryType()}],id:[bi,[],function(c){return c.id()}],zoom:[Sr,[],function(c){return c.globals.zoom}],"heatmap-density":[Sr,[],function(c){return c.globals.heatmapDensity||0}],"line-progress":[Sr,[],function(c){return c.globals.lineProgress||0}],accumulated:[bi,[],function(c){return c.globals.accumulated===void 0?null:c.globals.accumulated}],"+":[Sr,Rr(Sr),function(c,d){for(var g=0,A=0,P=d;A<P.length;A+=1)g+=P[A].evaluate(c);return g}],"*":[Sr,Rr(Sr),function(c,d){for(var g=1,A=0,P=d;A<P.length;A+=1)g*=P[A].evaluate(c);return g}],"-":{type:Sr,overloads:[[[Sr,Sr],function(c,d){var g=d[1];return d[0].evaluate(c)-g.evaluate(c)}],[[Sr],function(c,d){return-d[0].evaluate(c)}]]},"/":[Sr,[Sr,Sr],function(c,d){var g=d[1];return d[0].evaluate(c)/g.evaluate(c)}],"%":[Sr,[Sr,Sr],function(c,d){var g=d[1];return d[0].evaluate(c)%g.evaluate(c)}],ln2:[Sr,[],function(){return Math.LN2}],pi:[Sr,[],function(){return Math.PI}],e:[Sr,[],function(){return Math.E}],"^":[Sr,[Sr,Sr],function(c,d){var g=d[1];return Math.pow(d[0].evaluate(c),g.evaluate(c))}],sqrt:[Sr,[Sr],function(c,d){return Math.sqrt(d[0].evaluate(c))}],log10:[Sr,[Sr],function(c,d){return Math.log(d[0].evaluate(c))/Math.LN10}],ln:[Sr,[Sr],function(c,d){return Math.log(d[0].evaluate(c))}],log2:[Sr,[Sr],function(c,d){return Math.log(d[0].evaluate(c))/Math.LN2}],sin:[Sr,[Sr],function(c,d){return Math.sin(d[0].evaluate(c))}],cos:[Sr,[Sr],function(c,d){return Math.cos(d[0].evaluate(c))}],tan:[Sr,[Sr],function(c,d){return Math.tan(d[0].evaluate(c))}],asin:[Sr,[Sr],function(c,d){return Math.asin(d[0].evaluate(c))}],acos:[Sr,[Sr],function(c,d){return Math.acos(d[0].evaluate(c))}],atan:[Sr,[Sr],function(c,d){return Math.atan(d[0].evaluate(c))}],min:[Sr,Rr(Sr),function(c,d){return Math.min.apply(Math,d.map(function(g){return g.evaluate(c)}))}],max:[Sr,Rr(Sr),function(c,d){return Math.max.apply(Math,d.map(function(g){return g.evaluate(c)}))}],abs:[Sr,[Sr],function(c,d){return Math.abs(d[0].evaluate(c))}],round:[Sr,[Sr],function(c,d){var g=d[0].evaluate(c);return g<0?-Math.round(-g):Math.round(g)}],floor:[Sr,[Sr],function(c,d){return Math.floor(d[0].evaluate(c))}],ceil:[Sr,[Sr],function(c,d){return Math.ceil(d[0].evaluate(c))}],"filter-==":[hi,[Ti,bi],function(c,d){var g=d[0],A=d[1];return c.properties()[g.value]===A.value}],"filter-id-==":[hi,[bi],function(c,d){var g=d[0];return c.id()===g.value}],"filter-type-==":[hi,[Ti],function(c,d){var g=d[0];return c.geometryType()===g.value}],"filter-<":[hi,[Ti,bi],function(c,d){var g=d[0],A=d[1],P=c.properties()[g.value],B=A.value;return typeof P==typeof B&&P<B}],"filter-id-<":[hi,[bi],function(c,d){var g=d[0],A=c.id(),P=g.value;return typeof A==typeof P&&A<P}],"filter->":[hi,[Ti,bi],function(c,d){var g=d[0],A=d[1],P=c.properties()[g.value],B=A.value;return typeof P==typeof B&&P>B}],"filter-id->":[hi,[bi],function(c,d){var g=d[0],A=c.id(),P=g.value;return typeof A==typeof P&&A>P}],"filter-<=":[hi,[Ti,bi],function(c,d){var g=d[0],A=d[1],P=c.properties()[g.value],B=A.value;return typeof P==typeof B&&P<=B}],"filter-id-<=":[hi,[bi],function(c,d){var g=d[0],A=c.id(),P=g.value;return typeof A==typeof P&&A<=P}],"filter->=":[hi,[Ti,bi],function(c,d){var g=d[0],A=d[1],P=c.properties()[g.value],B=A.value;return typeof P==typeof B&&P>=B}],"filter-id->=":[hi,[bi],function(c,d){var g=d[0],A=c.id(),P=g.value;return typeof A==typeof P&&A>=P}],"filter-has":[hi,[bi],function(c,d){return d[0].value in c.properties()}],"filter-has-id":[hi,[],function(c){return c.id()!==null&&c.id()!==void 0}],"filter-type-in":[hi,[qo(Ti)],function(c,d){return d[0].value.indexOf(c.geometryType())>=0}],"filter-id-in":[hi,[qo(bi)],function(c,d){return d[0].value.indexOf(c.id())>=0}],"filter-in-small":[hi,[Ti,qo(bi)],function(c,d){var g=d[0];return d[1].value.indexOf(c.properties()[g.value])>=0}],"filter-in-large":[hi,[Ti,qo(bi)],function(c,d){var g=d[0],A=d[1];return function(P,B,j,q){for(;j<=q;){var ge=j+q>>1;if(B[ge]===P)return!0;B[ge]>P?q=ge-1:j=ge+1}return!1}(c.properties()[g.value],A.value,0,A.value.length-1)}],all:{type:hi,overloads:[[[hi,hi],function(c,d){var g=d[1];return d[0].evaluate(c)&&g.evaluate(c)}],[Rr(hi),function(c,d){for(var g=0,A=d;g<A.length;g+=1)if(!A[g].evaluate(c))return!1;return!0}]]},any:{type:hi,overloads:[[[hi,hi],function(c,d){var g=d[1];return d[0].evaluate(c)||g.evaluate(c)}],[Rr(hi),function(c,d){for(var g=0,A=d;g<A.length;g+=1)if(A[g].evaluate(c))return!0;return!1}]]},"!":[hi,[hi],function(c,d){return!d[0].evaluate(c)}],"is-supported-script":[hi,[Ti],function(c,d){var g=c.globals&&c.globals.isSupportedScript;return!g||g(d[0].evaluate(c))}],upcase:[Ti,[Ti],function(c,d){return d[0].evaluate(c).toUpperCase()}],downcase:[Ti,[Ti],function(c,d){return d[0].evaluate(c).toLowerCase()}],concat:[Ti,Rr(bi),function(c,d){return d.map(function(g){return ji(g.evaluate(c))}).join("")}],"resolved-locale":[Ti,[na],function(c,d){return d[0].evaluate(c).resolvedLocale()}]});var ms=function(c,d){this.expression=c,this._warningHistory={},this._evaluator=new ia,this._defaultValue=d?function(g){return g.type==="color"&&Aa(g.default)?new gn(0,0,0,0):g.type==="color"?gn.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null};function nl(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in qe}function Wa(c,d){var g=new cu(qe,[],d?function(P){var B={color:si,string:Ti,number:Sr,enum:Ti,boolean:hi,formatted:_a,resolvedImage:Ro};return P.type==="array"?qo(B[P.value]||bi,P.length):B[P.type]}(d):void 0),A=g.parse(c,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?Di(new ms(A,d)):zi(g.errors)}ms.prototype.evaluateWithoutErrorHandling=function(c,d,g,A,P,B){return this._evaluator.globals=c,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)},ms.prototype.evaluate=function(c,d,g,A,P,B){this._evaluator.globals=c,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=B||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(q){return JSON.stringify(q)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console!="undefined"&&console.warn(q.message)),this._defaultValue}};var Rc=function(c,d){this.kind=c,this._styleExpression=d,this.isStateDependent=c!=="constant"&&!Lf(d.expression)};Rc.prototype.evaluateWithoutErrorHandling=function(c,d,g,A,P,B){return this._styleExpression.evaluateWithoutErrorHandling(c,d,g,A,P,B)},Rc.prototype.evaluate=function(c,d,g,A,P,B){return this._styleExpression.evaluate(c,d,g,A,P,B)};var us=function(c,d,g,A){this.kind=c,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=c!=="camera"&&!Lf(d.expression),this.interpolationType=A};function Tu(c,d){if((c=Wa(c,d)).result==="error")return c;var g=c.value.expression,A=If(g);if(!A&&!lo(d))return zi([new Ur("","data expressions not supported")]);var P=sc(g,["zoom"]);if(!P&&!uo(d))return zi([new Ur("","zoom expressions not supported")]);var B=function j(q){var ge=null;if(q instanceof vc)ge=j(q.result);else if(q instanceof ef)for(var De=0,We=q.args;De<We.length&&!(ge=j(We[De]));De+=1);else(q instanceof pc||q instanceof Hl)&&q.input instanceof Wo&&q.input.name==="zoom"&&(ge=q);return ge instanceof Ur||q.eachChild(function(tt){var xt=j(tt);xt instanceof Ur?ge=xt:!ge&&xt?ge=new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ge&&xt&&ge!==xt&&(ge=new Ur("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ge}(g);return B||P?B instanceof Ur?zi([B]):B instanceof Hl&&!wa(d)?zi([new Ur("",'"interpolate" expressions cannot be used with this property')]):Di(B?new us(A?"camera":"composite",c.value,B.labels,B instanceof Hl?B.interpolation:void 0):new Rc(A?"constant":"source",c.value)):zi([new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}us.prototype.evaluateWithoutErrorHandling=function(c,d,g,A,P,B){return this._styleExpression.evaluateWithoutErrorHandling(c,d,g,A,P,B)},us.prototype.evaluate=function(c,d,g,A,P,B){return this._styleExpression.evaluate(c,d,g,A,P,B)},us.prototype.interpolationFactor=function(c,d,g){return this.interpolationType?Hl.interpolationFactor(this.interpolationType,c,d,g):0};var fu=function(c,d){this._parameters=c,this._specification=d,_r(this,function g(A,P){var B,j,q,ge=P.type==="color",De=A.stops&&typeof A.stops[0][0]=="object",We=De||!(De||A.property!==void 0),tt=A.type||(wa(P)?"exponential":"interval");if(ge&&((A=_r({},A)).stops&&(A.stops=A.stops.map(function(ho){return[ho[0],gn.parse(ho[1])]})),A.default=gn.parse(A.default?A.default:P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!up[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(tt==="exponential")B=ka;else if(tt==="interval")B=Rs;else if(tt==="categorical"){B=Ra,j=Object.create(null);for(var xt=0,Lt=A.stops;xt<Lt.length;xt+=1){var fn=Lt[xt];j[fn[0]]=fn[1]}q=typeof A.stops[0][0]}else{if(tt!=="identity")throw new Error('Unknown function type "'+tt+'"');B=Za}if(De){for(var _n={},Hn=[],In=0;In<A.stops.length;In++){var cr=A.stops[In],gr=cr[0].zoom;_n[gr]===void 0&&(_n[gr]={zoom:gr,type:A.type,property:A.property,default:A.default,stops:[]},Hn.push(gr)),_n[gr].stops.push([cr[0].value,cr[1]])}for(var Lr=[],Nr=0,Gr=Hn;Nr<Gr.length;Nr+=1){var Pi=Gr[Nr];Lr.push([_n[Pi].zoom,g(_n[Pi],P)])}var Yi={name:"linear"};return{kind:"composite",interpolationType:Yi,interpolationFactor:Hl.interpolationFactor.bind(void 0,Yi),zoomStops:Lr.map(function(ho){return ho[0]}),evaluate:function(ho,$o){var po=ho.zoom;return ka({stops:Lr,base:A.base},P,po).evaluate(po,$o)}}}if(We){var Do=tt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Do,interpolationFactor:Hl.interpolationFactor.bind(void 0,Do),zoomStops:A.stops.map(function(ho){return ho[0]}),evaluate:function(ho){return B(A,P,ho.zoom,j,q)}}}return{kind:"source",evaluate:function(ho,$o){var po=$o&&$o.properties?$o.properties[A.property]:void 0;return po===void 0?ga(A.default,P.default):B(A,P,po,j,q)}}}(this._parameters,this._specification))};function jc(c){var d=c.key,g=c.value,A=c.valueSpec||{},P=c.objectElementValidators||{},B=c.style,j=c.styleSpec,q=[],ge=No(g);if(ge!=="object")return[new qt(d,g,"object expected, "+ge+" found")];for(var De in g){var We=De.split(".")[0],tt=A[We]||A["*"],xt=void 0;if(P[We])xt=P[We];else if(A[We])xt=Fe;else if(P["*"])xt=P["*"];else{if(!A["*"]){q.push(new qt(d,g[De],'unknown property "'+De+'"'));continue}xt=Fe}q=q.concat(xt({key:(d&&d+".")+De,value:g[De],valueSpec:tt,style:B,styleSpec:j,object:g,objectKey:De},g))}for(var Lt in A)P[Lt]||A[Lt].required&&A[Lt].default===void 0&&g[Lt]===void 0&&q.push(new qt(d,g,'missing required property "'+Lt+'"'));return q}function nh(c){var d=c.value,g=c.valueSpec,A=c.style,P=c.styleSpec,B=c.key,j=c.arrayElementValidator||Fe;if(No(d)!=="array")return[new qt(B,d,"array expected, "+No(d)+" found")];if(g.length&&d.length!==g.length)return[new qt(B,d,"array length "+g.length+" expected, length "+d.length+" found")];if(g["min-length"]&&d.length<g["min-length"])return[new qt(B,d,"array length at least "+g["min-length"]+" expected, length "+d.length+" found")];var q={type:g.value,values:g.values};P.$version<7&&(q.function=g.function),No(g.value)==="object"&&(q=g.value);for(var ge=[],De=0;De<d.length;De++)ge=ge.concat(j({array:d,arrayIndex:De,value:d[De],valueSpec:q,style:A,styleSpec:P,key:B+"["+De+"]"}));return ge}function Id(c){var d=c.key,g=c.value,A=c.valueSpec,P=No(g);return P==="number"&&g!=g&&(P="NaN"),P!=="number"?[new qt(d,g,"number expected, "+P+" found")]:"minimum"in A&&g<A.minimum?[new qt(d,g,g+" is less than the minimum value "+A.minimum)]:"maximum"in A&&g>A.maximum?[new qt(d,g,g+" is greater than the maximum value "+A.maximum)]:[]}function _f(c){var d,g,A,P=c.valueSpec,B=Vr(c.value.type),j={},q=B!=="categorical"&&c.value.property===void 0,ge=!q,De=No(c.value.stops)==="array"&&No(c.value.stops[0])==="array"&&No(c.value.stops[0][0])==="object",We=jc({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Lt){if(B==="identity")return[new qt(Lt.key,Lt.value,'identity function may not have a "stops" property')];var fn=[],_n=Lt.value;return fn=fn.concat(nh({key:Lt.key,value:_n,valueSpec:Lt.valueSpec,style:Lt.style,styleSpec:Lt.styleSpec,arrayElementValidator:tt})),No(_n)==="array"&&_n.length===0&&fn.push(new qt(Lt.key,_n,"array must have at least one stop")),fn},default:function(Lt){return Fe({key:Lt.key,value:Lt.value,valueSpec:P,style:Lt.style,styleSpec:Lt.styleSpec})}}});return B==="identity"&&q&&We.push(new qt(c.key,c.value,'missing required property "property"')),B==="identity"||c.value.stops||We.push(new qt(c.key,c.value,'missing required property "stops"')),B==="exponential"&&c.valueSpec.expression&&!wa(c.valueSpec)&&We.push(new qt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(ge&&!lo(c.valueSpec)?We.push(new qt(c.key,c.value,"property functions not supported")):q&&!uo(c.valueSpec)&&We.push(new qt(c.key,c.value,"zoom functions not supported"))),B!=="categorical"&&!De||c.value.property!==void 0||We.push(new qt(c.key,c.value,'"property" property is required')),We;function tt(Lt){var fn=[],_n=Lt.value,Hn=Lt.key;if(No(_n)!=="array")return[new qt(Hn,_n,"array expected, "+No(_n)+" found")];if(_n.length!==2)return[new qt(Hn,_n,"array length 2 expected, length "+_n.length+" found")];if(De){if(No(_n[0])!=="object")return[new qt(Hn,_n,"object expected, "+No(_n[0])+" found")];if(_n[0].zoom===void 0)return[new qt(Hn,_n,"object stop key must have zoom")];if(_n[0].value===void 0)return[new qt(Hn,_n,"object stop key must have value")];if(A&&A>Vr(_n[0].zoom))return[new qt(Hn,_n[0].zoom,"stop zoom values must appear in ascending order")];Vr(_n[0].zoom)!==A&&(A=Vr(_n[0].zoom),g=void 0,j={}),fn=fn.concat(jc({key:Hn+"[0]",value:_n[0],valueSpec:{zoom:{}},style:Lt.style,styleSpec:Lt.styleSpec,objectElementValidators:{zoom:Id,value:xt}}))}else fn=fn.concat(xt({key:Hn+"[0]",value:_n[0],valueSpec:{},style:Lt.style,styleSpec:Lt.styleSpec},_n));return nl(pr(_n[1]))?fn.concat([new qt(Hn+"[1]",_n[1],"expressions are not allowed in function stops.")]):fn.concat(Fe({key:Hn+"[1]",value:_n[1],valueSpec:P,style:Lt.style,styleSpec:Lt.styleSpec}))}function xt(Lt,fn){var _n=No(Lt.value),Hn=Vr(Lt.value),In=Lt.value!==null?Lt.value:fn;if(d){if(_n!==d)return[new qt(Lt.key,In,_n+" stop domain type must match previous stop domain type "+d)]}else d=_n;if(_n!=="number"&&_n!=="string"&&_n!=="boolean")return[new qt(Lt.key,In,"stop domain value must be a number, string, or boolean")];if(_n!=="number"&&B!=="categorical"){var cr="number expected, "+_n+" found";return lo(P)&&B===void 0&&(cr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qt(Lt.key,In,cr)]}return B!=="categorical"||_n!=="number"||isFinite(Hn)&&Math.floor(Hn)===Hn?B!=="categorical"&&_n==="number"&&g!==void 0&&Hn<g?[new qt(Lt.key,In,"stop domain values must appear in ascending order")]:(g=Hn,B==="categorical"&&Hn in j?[new qt(Lt.key,In,"stop domain values must be unique")]:(j[Hn]=!0,[])):[new qt(Lt.key,In,"integer expected, found "+Hn)]}}function Nf(c){var d=(c.expressionContext==="property"?Tu:Wa)(pr(c.value),c.valueSpec);if(d.result==="error")return d.value.map(function(A){return new qt(""+c.key+A.key,c.value,A.message)});var g=d.value.expression||d.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!g.outputDefined())return[new qt(c.key,c.value,'Invalid data expression for "'+c.propertyKey+'". Output values must be contained as literals within the expression.')];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Lf(g))return[new qt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Lf(g))return[new qt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!sc(g,["zoom","feature-state"]))return[new qt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!If(g))return[new qt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rf(c){var d=c.key,g=c.value,A=c.valueSpec,P=[];return Array.isArray(A.values)?A.values.indexOf(Vr(g))===-1&&P.push(new qt(d,g,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(g)+" found")):Object.keys(A.values).indexOf(Vr(g))===-1&&P.push(new qt(d,g,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(g)+" found")),P}function wh(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(var d=0,g=c.slice(1);d<g.length;d+=1){var A=g[d];if(!wh(A)&&typeof A!="boolean")return!1}return!0;default:return!0}}fu.deserialize=function(c){return new fu(c._parameters,c._specification)},fu.serialize=function(c){return{_parameters:c._parameters,_specification:c._specification}};var Ah={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bf(c){if(c==null)return{filter:function(){return!0},needGeometry:!1};wh(c)||(c=Ld(c));var d=Wa(c,Ah);if(d.result==="error")throw new Error(d.value.map(function(g){return g.key+": "+g.message}).join(", "));return{filter:function(g,A,P){return d.value.evaluate(g,A,{},P)},needGeometry:function g(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(g(A[P]))return!0;return!1}(c)}}function b0(c,d){return c<d?-1:c>d?1:0}function Ld(c){if(!c)return!0;var d,g=c[0];return c.length<=1?g!=="any":g==="=="?zp(c[1],c[2],"=="):g==="!="?Dd(zp(c[1],c[2],"==")):g==="<"||g===">"||g==="<="||g===">="?zp(c[1],c[2],g):g==="any"?(d=c.slice(1),["any"].concat(d.map(Ld))):g==="all"?["all"].concat(c.slice(1).map(Ld)):g==="none"?["all"].concat(c.slice(1).map(Ld).map(Dd)):g==="in"?Ff(c[1],c.slice(2)):g==="!in"?Dd(Ff(c[1],c.slice(2))):g==="has"?jp(c[1]):g==="!has"?Dd(jp(c[1])):g!=="within"||c}function zp(c,d,g){switch(c){case"$type":return["filter-type-"+g,d];case"$id":return["filter-id-"+g,d];default:return["filter-"+g,c,d]}}function Ff(c,d){if(d.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(function(g){return typeof g!=typeof d[0]})?["filter-in-large",c,["literal",d.sort(b0)]]:["filter-in-small",c,["literal",d]]}}function jp(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Dd(c){return["!",c]}function hp(c){return wh(pr(c.value))?Nf(_r({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function d(g){var A=g.value,P=g.key;if(No(A)!=="array")return[new qt(P,A,"array expected, "+No(A)+" found")];var B,j=g.styleSpec,q=[];if(A.length<1)return[new qt(P,A,"filter array must have at least 1 element")];switch(q=q.concat(rf({key:P+"[0]",value:A[0],valueSpec:j.filter_operator,style:g.style,styleSpec:g.styleSpec})),Vr(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&Vr(A[1])==="$type"&&q.push(new qt(P,A,'"$type" cannot be use with operator "'+A[0]+'"'));case"==":case"!=":A.length!==3&&q.push(new qt(P,A,'filter array for operator "'+A[0]+'" must have 3 elements'));case"in":case"!in":A.length>=2&&(B=No(A[1]))!=="string"&&q.push(new qt(P+"[1]",A[1],"string expected, "+B+" found"));for(var ge=2;ge<A.length;ge++)B=No(A[ge]),Vr(A[1])==="$type"?q=q.concat(rf({key:P+"["+ge+"]",value:A[ge],valueSpec:j.geometry_type,style:g.style,styleSpec:g.styleSpec})):B!=="string"&&B!=="number"&&B!=="boolean"&&q.push(new qt(P+"["+ge+"]",A[ge],"string, number, or boolean expected, "+B+" found"));break;case"any":case"all":case"none":for(var De=1;De<A.length;De++)q=q.concat(d({key:P+"["+De+"]",value:A[De],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":B=No(A[1]),A.length!==2?q.push(new qt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):B!=="string"&&q.push(new qt(P+"[1]",A[1],"string expected, "+B+" found"));break;case"within":B=No(A[1]),A.length!==2?q.push(new qt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):B!=="object"&&q.push(new qt(P+"[1]",A[1],"object expected, "+B+" found"))}return q}(c)}function kf(c,d){var g=c.key,A=c.style,P=c.styleSpec,B=c.value,j=c.objectKey,q=P[d+"_"+c.layerType];if(!q)return[];var ge=j.match(/^(.*)-transition$/);if(d==="paint"&&ge&&q[ge[1]]&&q[ge[1]].transition)return Fe({key:g,value:B,valueSpec:P.transition,style:A,styleSpec:P});var De,We=c.valueSpec||q[j];if(!We)return[new qt(g,B,'unknown property "'+j+'"')];if(No(B)==="string"&&lo(We)&&!We.tokens&&(De=/^{([^}]+)}$/.exec(B)))return[new qt(g,B,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(De[1])+" }`.")];var tt=[];return c.layerType==="symbol"&&(j==="text-field"&&A&&!A.glyphs&&tt.push(new qt(g,B,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Aa(pr(B))&&Vr(B.type)==="identity"&&tt.push(new qt(g,B,'"text-font" does not support identity functions'))),tt.concat(Fe({key:c.key,value:B,valueSpec:We,style:A,styleSpec:P,expressionContext:"property",propertyType:d,propertyKey:j}))}function Vp(c){return kf(c,"paint")}function Ch(c){return kf(c,"layout")}function Hp(c){var d=[],g=c.value,A=c.key,P=c.style,B=c.styleSpec;g.type||g.ref||d.push(new qt(A,g,'either "type" or "ref" is required'));var j,q=Vr(g.type),ge=Vr(g.ref);if(g.id)for(var De=Vr(g.id),We=0;We<c.arrayIndex;We++){var tt=P.layers[We];Vr(tt.id)===De&&d.push(new qt(A,g.id,'duplicate layer id "'+g.id+'", previously used at line '+tt.id.__line__))}if("ref"in g)["type","source","source-layer","filter","layout"].forEach(function(fn){fn in g&&d.push(new qt(A,g[fn],'"'+fn+'" is prohibited for ref layers'))}),P.layers.forEach(function(fn){Vr(fn.id)===ge&&(j=fn)}),j?j.ref?d.push(new qt(A,g.ref,"ref cannot reference another ref layer")):q=Vr(j.type):d.push(new qt(A,g.ref,'ref layer "'+ge+'" not found'));else if(q!=="background")if(g.source){var xt=P.sources&&P.sources[g.source],Lt=xt&&Vr(xt.type);xt?Lt==="vector"&&q==="raster"?d.push(new qt(A,g.source,'layer "'+g.id+'" requires a raster source')):Lt==="raster"&&q!=="raster"?d.push(new qt(A,g.source,'layer "'+g.id+'" requires a vector source')):Lt!=="vector"||g["source-layer"]?Lt==="raster-dem"&&q!=="hillshade"?d.push(new qt(A,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="line"||!g.paint||!g.paint["line-gradient"]||Lt==="geojson"&&xt.lineMetrics||d.push(new qt(A,g,'layer "'+g.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):d.push(new qt(A,g,'layer "'+g.id+'" must specify a "source-layer"')):d.push(new qt(A,g.source,'source "'+g.source+'" not found'))}else d.push(new qt(A,g,'missing required property "source"'));return d=d.concat(jc({key:A,value:g,valueSpec:B.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Fe({key:A+".type",value:g.type,valueSpec:B.layer.type,style:c.style,styleSpec:c.styleSpec,object:g,objectKey:"type"})},filter:hp,layout:function(fn){return jc({layer:g,key:fn.key,value:fn.value,style:fn.style,styleSpec:fn.styleSpec,objectElementValidators:{"*":function(_n){return Ch(_r({layerType:q},_n))}}})},paint:function(fn){return jc({layer:g,key:fn.key,value:fn.value,style:fn.style,styleSpec:fn.styleSpec,objectElementValidators:{"*":function(_n){return Vp(_r({layerType:q},_n))}}})}}}))}function Uf(c){var d=c.value,g=c.key,A=No(d);return A!=="string"?[new qt(g,d,"string expected, "+A+" found")]:[]}var Xs={promoteId:function(c){var d=c.key,g=c.value;if(No(g)==="string")return Uf({key:d,value:g});var A=[];for(var P in g)A.push.apply(A,Uf({key:d+"."+P,value:g[P]}));return A}};function dp(c){var d=c.value,g=c.key,A=c.styleSpec,P=c.style;if(!d.type)return[new qt(g,d,'"type" is required')];var B,j=Vr(d.type);switch(j){case"vector":case"raster":case"raster-dem":return jc({key:g,value:d,valueSpec:A["source_"+j.replace("-","_")],style:c.style,styleSpec:A,objectElementValidators:Xs});case"geojson":if(B=jc({key:g,value:d,valueSpec:A.source_geojson,style:P,styleSpec:A,objectElementValidators:Xs}),d.cluster)for(var q in d.clusterProperties){var ge=d.clusterProperties[q],De=ge[0],We=typeof De=="string"?[De,["accumulated"],["get",q]]:De;B.push.apply(B,Nf({key:g+"."+q+".map",value:ge[1],expressionContext:"cluster-map"})),B.push.apply(B,Nf({key:g+"."+q+".reduce",value:We,expressionContext:"cluster-reduce"}))}return B;case"video":return jc({key:g,value:d,valueSpec:A.source_video,style:P,styleSpec:A});case"image":return jc({key:g,value:d,valueSpec:A.source_image,style:P,styleSpec:A});case"canvas":return[new qt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rf({key:g+".type",value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:A})}}function bf(c){var d=c.value,g=c.styleSpec,A=g.light,P=c.style,B=[],j=No(d);if(d===void 0)return B;if(j!=="object")return B.concat([new qt("light",d,"object expected, "+j+" found")]);for(var q in d){var ge=q.match(/^(.*)-transition$/);B=B.concat(ge&&A[ge[1]]&&A[ge[1]].transition?Fe({key:q,value:d[q],valueSpec:g.transition,style:P,styleSpec:g}):A[q]?Fe({key:q,value:d[q],valueSpec:A[q],style:P,styleSpec:g}):[new qt(q,d[q],'unknown property "'+q+'"')])}return B}var he={"*":function(){return[]},array:nh,boolean:function(c){var d=c.value,g=c.key,A=No(d);return A!=="boolean"?[new qt(g,d,"boolean expected, "+A+" found")]:[]},number:Id,color:function(c){var d=c.key,g=c.value,A=No(g);return A!=="string"?[new qt(d,g,"color expected, "+A+" found")]:Bn(g)===null?[new qt(d,g,'color expected, "'+g+'" found')]:[]},constants:Qn,enum:rf,filter:hp,function:_f,layer:Hp,object:jc,source:dp,light:bf,string:Uf,formatted:function(c){return Uf(c).length===0?[]:Nf(c)},resolvedImage:function(c){return Uf(c).length===0?[]:Nf(c)}};function Fe(c){var d=c.value,g=c.valueSpec,A=c.styleSpec;return g.expression&&Aa(Vr(d))?_f(c):g.expression&&nl(pr(d))?Nf(c):g.type&&he[g.type]?he[g.type](c):jc(_r({},c,{valueSpec:g.type?A[g.type]:g}))}function gt(c){var d=c.value,g=c.key,A=Uf(c);return A.length||(d.indexOf("{fontstack}")===-1&&A.push(new qt(g,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&A.push(new qt(g,d,'"glyphs" url must include a "{range}" token'))),A}function wn(c,d){d===void 0&&(d=_t);var g=[];return g=g.concat(Fe({key:"",value:c,valueSpec:d.$root,styleSpec:d,style:c,objectElementValidators:{glyphs:gt,"*":function(){return[]}}})),c.constants&&(g=g.concat(Qn({key:"constants",value:c.constants,style:c,styleSpec:d}))),ar(g)}function ar(c){return[].concat(c).sort(function(d,g){return d.line-g.line})}function zr(c){return function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];return ar(c.apply(this,d))}}wn.source=zr(dp),wn.light=zr(bf),wn.layer=zr(Hp),wn.filter=zr(hp),wn.paintProperty=zr(Vp),wn.layoutProperty=zr(Ch);var gi=wn,Ki=gi.light,ya=gi.paintProperty,Ea=gi.layoutProperty;function Es(c,d){var g=!1;if(d&&d.length)for(var A=0,P=d;A<P.length;A+=1)c.fire(new Yt(new Error(P[A].message))),g=!0;return g}var Ua=Da;function Da(c,d,g){var A=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var P=new Int32Array(this.arrayBuffer);c=P[0],this.d=(d=P[1])+2*(g=P[2]);for(var B=0;B<this.d*this.d;B++){var j=P[3+B],q=P[3+B+1];A.push(j===q?null:P.subarray(j,q))}var ge=P[3+A.length+1];this.keys=P.subarray(P[3+A.length],ge),this.bboxes=P.subarray(ge),this.insert=this._insertReadonly}else{this.d=d+2*g;for(var De=0;De<this.d*this.d;De++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=c,this.padding=g,this.scale=d/c,this.uid=0;var We=g/d*c;this.min=-We,this.max=c+We}Da.prototype.insert=function(c,d,g,A,P){this._forEachCell(d,g,A,P,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(A),this.bboxes.push(P)},Da.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Da.prototype._insertCell=function(c,d,g,A,P,B){this.cells[P].push(B)},Da.prototype.query=function(c,d,g,A,P){var B=this.min,j=this.max;if(c<=B&&d<=B&&j<=g&&j<=A&&!P)return Array.prototype.slice.call(this.keys);var q=[];return this._forEachCell(c,d,g,A,this._queryCell,q,{},P),q},Da.prototype._queryCell=function(c,d,g,A,P,B,j,q){var ge=this.cells[P];if(ge!==null)for(var De=this.keys,We=this.bboxes,tt=0;tt<ge.length;tt++){var xt=ge[tt];if(j[xt]===void 0){var Lt=4*xt;(q?q(We[Lt+0],We[Lt+1],We[Lt+2],We[Lt+3]):c<=We[Lt+2]&&d<=We[Lt+3]&&g>=We[Lt+0]&&A>=We[Lt+1])?(j[xt]=!0,B.push(De[xt])):j[xt]=!1}}},Da.prototype._forEachCell=function(c,d,g,A,P,B,j,q){for(var ge=this._convertToCellCoord(c),De=this._convertToCellCoord(d),We=this._convertToCellCoord(g),tt=this._convertToCellCoord(A),xt=ge;xt<=We;xt++)for(var Lt=De;Lt<=tt;Lt++){var fn=this.d*Lt+xt;if((!q||q(this._convertFromCellCoord(xt),this._convertFromCellCoord(Lt),this._convertFromCellCoord(xt+1),this._convertFromCellCoord(Lt+1)))&&P.call(this,c,d,g,A,fn,B,j,q))return}},Da.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},Da.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},Da.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,d=3+this.cells.length+1+1,g=0,A=0;A<this.cells.length;A++)g+=this.cells[A].length;var P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var B=d,j=0;j<c.length;j++){var q=c[j];P[3+j]=B,P.set(q,B),B+=q.length}return P[3+c.length]=B,P.set(this.keys,B),P[3+c.length+1]=B+=this.keys.length,P.set(this.bboxes,B),B+=this.bboxes.length,P.buffer};var Mc=oe.ImageData,of=oe.ImageBitmap,rl={};function fo(c,d,g){g===void 0&&(g={}),Object.defineProperty(d,"_classRegistryKey",{value:c,writeable:!1}),rl[c]={klass:d,omit:g.omit||[],shallow:g.shallow||[]}}for(var Yc in fo("Object",Object),Ua.serialize=function(c,d){var g=c.toArrayBuffer();return d&&d.push(g),{buffer:g}},Ua.deserialize=function(c){return new Ua(c.buffer)},fo("Grid",Ua),fo("Color",gn),fo("Error",Error),fo("ResolvedImage",ii),fo("StylePropertyFunction",fu),fo("StyleExpression",ms,{omit:["_evaluator"]}),fo("ZoomDependentExpression",us),fo("ZoomConstantExpression",Rc),fo("CompoundExpression",Wo,{omit:["_evaluate"]}),qe)qe[Yc]._classRegistryKey||fo("Expression_"+Yc,qe[Yc]);function Nd(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Oh(c){return of&&c instanceof of}function Ma(c,d){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Nd(c)||Oh(c))return d&&d.push(c),c;if(ArrayBuffer.isView(c)){var g=c;return d&&d.push(g.buffer),g}if(c instanceof Mc)return d&&d.push(c.data.buffer),c;if(Array.isArray(c)){for(var A=[],P=0,B=c;P<B.length;P+=1)A.push(Ma(B[P],d));return A}if(typeof c=="object"){var j=c.constructor,q=j._classRegistryKey;if(!q)throw new Error("can't serialize object of unregistered class");var ge=j.serialize?j.serialize(c,d):{};if(!j.serialize){for(var De in c)if(c.hasOwnProperty(De)&&!(rl[q].omit.indexOf(De)>=0)){var We=c[De];ge[De]=rl[q].shallow.indexOf(De)>=0?We:Ma(We,d)}c instanceof Error&&(ge.message=c.message)}if(ge.$name)throw new Error("$name property is reserved for worker serialization logic.");return q!=="Object"&&(ge.$name=q),ge}throw new Error("can't serialize object of type "+typeof c)}function as(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Nd(c)||Oh(c)||ArrayBuffer.isView(c)||c instanceof Mc)return c;if(Array.isArray(c))return c.map(as);if(typeof c=="object"){var d=c.$name||"Object",g=rl[d].klass;if(!g)throw new Error("can't deserialize unregistered class "+d);if(g.deserialize)return g.deserialize(c);for(var A=Object.create(g.prototype),P=0,B=Object.keys(c);P<B.length;P+=1){var j=B[P];if(j!=="$name"){var q=c[j];A[j]=rl[d].shallow.indexOf(j)>=0?q:as(q)}}return A}throw new Error("can't deserialize object of type "+typeof c)}var x0=function(){this.first=!0};x0.prototype.update=function(c,d){var g=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=g,!0))};var Zi={"Latin-1 Supplement":function(c){return c>=128&&c<=255},Arabic:function(c){return c>=1536&&c<=1791},"Arabic Supplement":function(c){return c>=1872&&c<=1919},"Arabic Extended-A":function(c){return c>=2208&&c<=2303},"Hangul Jamo":function(c){return c>=4352&&c<=4607},"Unified Canadian Aboriginal Syllabics":function(c){return c>=5120&&c<=5759},Khmer:function(c){return c>=6016&&c<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(c){return c>=6320&&c<=6399},"General Punctuation":function(c){return c>=8192&&c<=8303},"Letterlike Symbols":function(c){return c>=8448&&c<=8527},"Number Forms":function(c){return c>=8528&&c<=8591},"Miscellaneous Technical":function(c){return c>=8960&&c<=9215},"Control Pictures":function(c){return c>=9216&&c<=9279},"Optical Character Recognition":function(c){return c>=9280&&c<=9311},"Enclosed Alphanumerics":function(c){return c>=9312&&c<=9471},"Geometric Shapes":function(c){return c>=9632&&c<=9727},"Miscellaneous Symbols":function(c){return c>=9728&&c<=9983},"Miscellaneous Symbols and Arrows":function(c){return c>=11008&&c<=11263},"CJK Radicals Supplement":function(c){return c>=11904&&c<=12031},"Kangxi Radicals":function(c){return c>=12032&&c<=12255},"Ideographic Description Characters":function(c){return c>=12272&&c<=12287},"CJK Symbols and Punctuation":function(c){return c>=12288&&c<=12351},Hiragana:function(c){return c>=12352&&c<=12447},Katakana:function(c){return c>=12448&&c<=12543},Bopomofo:function(c){return c>=12544&&c<=12591},"Hangul Compatibility Jamo":function(c){return c>=12592&&c<=12687},Kanbun:function(c){return c>=12688&&c<=12703},"Bopomofo Extended":function(c){return c>=12704&&c<=12735},"CJK Strokes":function(c){return c>=12736&&c<=12783},"Katakana Phonetic Extensions":function(c){return c>=12784&&c<=12799},"Enclosed CJK Letters and Months":function(c){return c>=12800&&c<=13055},"CJK Compatibility":function(c){return c>=13056&&c<=13311},"CJK Unified Ideographs Extension A":function(c){return c>=13312&&c<=19903},"Yijing Hexagram Symbols":function(c){return c>=19904&&c<=19967},"CJK Unified Ideographs":function(c){return c>=19968&&c<=40959},"Yi Syllables":function(c){return c>=40960&&c<=42127},"Yi Radicals":function(c){return c>=42128&&c<=42191},"Hangul Jamo Extended-A":function(c){return c>=43360&&c<=43391},"Hangul Syllables":function(c){return c>=44032&&c<=55215},"Hangul Jamo Extended-B":function(c){return c>=55216&&c<=55295},"Private Use Area":function(c){return c>=57344&&c<=63743},"CJK Compatibility Ideographs":function(c){return c>=63744&&c<=64255},"Arabic Presentation Forms-A":function(c){return c>=64336&&c<=65023},"Vertical Forms":function(c){return c>=65040&&c<=65055},"CJK Compatibility Forms":function(c){return c>=65072&&c<=65103},"Small Form Variants":function(c){return c>=65104&&c<=65135},"Arabic Presentation Forms-B":function(c){return c>=65136&&c<=65279},"Halfwidth and Fullwidth Forms":function(c){return c>=65280&&c<=65519}};function xf(c){for(var d=0,g=c;d<g.length;d+=1)if(Bd(g[d].charCodeAt(0)))return!0;return!1}function Bd(c){return!(c!==746&&c!==747&&(c<4352||!(Zi["Bopomofo Extended"](c)||Zi.Bopomofo(c)||Zi["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Zi["CJK Compatibility Ideographs"](c)||Zi["CJK Compatibility"](c)||Zi["CJK Radicals Supplement"](c)||Zi["CJK Strokes"](c)||!(!Zi["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Zi["CJK Unified Ideographs Extension A"](c)||Zi["CJK Unified Ideographs"](c)||Zi["Enclosed CJK Letters and Months"](c)||Zi["Hangul Compatibility Jamo"](c)||Zi["Hangul Jamo Extended-A"](c)||Zi["Hangul Jamo Extended-B"](c)||Zi["Hangul Jamo"](c)||Zi["Hangul Syllables"](c)||Zi.Hiragana(c)||Zi["Ideographic Description Characters"](c)||Zi.Kanbun(c)||Zi["Kangxi Radicals"](c)||Zi["Katakana Phonetic Extensions"](c)||Zi.Katakana(c)&&c!==12540||!(!Zi["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Zi["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Zi["Unified Canadian Aboriginal Syllabics"](c)||Zi["Unified Canadian Aboriginal Syllabics Extended"](c)||Zi["Vertical Forms"](c)||Zi["Yijing Hexagram Symbols"](c)||Zi["Yi Syllables"](c)||Zi["Yi Radicals"](c))))}function Rh(c){return!(Bd(c)||function(d){return!!(Zi["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||Zi["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||Zi["Letterlike Symbols"](d)||Zi["Number Forms"](d)||Zi["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||Zi["Control Pictures"](d)&&d!==9251||Zi["Optical Character Recognition"](d)||Zi["Enclosed Alphanumerics"](d)||Zi["Geometric Shapes"](d)||Zi["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||Zi["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||Zi["CJK Symbols and Punctuation"](d)||Zi.Katakana(d)||Zi["Private Use Area"](d)||Zi["CJK Compatibility Forms"](d)||Zi["Small Form Variants"](d)||Zi["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(c))}function Ef(c){return c>=1424&&c<=2303||Zi["Arabic Presentation Forms-A"](c)||Zi["Arabic Presentation Forms-B"](c)}function hu(c,d){return!(!d&&Ef(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Zi.Khmer(c))}function E0(c){for(var d=0,g=c;d<g.length;d+=1)if(Ef(g[d].charCodeAt(0)))return!0;return!1}var Mh=null,Kc="unavailable",rh=null,S0=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Kc="error"),Mh&&Mh(c)};function Fd(){T0.fire(new Tt("pluginStateChange",{pluginStatus:Kc,pluginURL:rh}))}var T0=new pn,sv=function(){return Kc},du=function(){if(Kc!=="deferred"||!rh)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kc="loading",Fd(),rh&&yr({url:rh},function(c){c?S0(c):(Kc="loaded",Fd())})},ju={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Kc==="loaded"||ju.applyArabicShaping!=null},isLoading:function(){return Kc==="loading"},setState:function(c){Kc=c.pluginStatus,rh=c.pluginURL},isParsed:function(){return ju.applyArabicShaping!=null&&ju.processBidirectionalText!=null&&ju.processStyledBidirectionalText!=null},getPluginURL:function(){return rh}},Sa=function(c,d){this.zoom=c,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new x0,this.transition={})};Sa.prototype.isSupportedScript=function(c){return function(d,g){for(var A=0,P=d;A<P.length;A+=1)if(!hu(P[A].charCodeAt(0),g))return!1;return!0}(c,ju.isLoaded())},Sa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sa.prototype.getCrossfadeParameters=function(){var c=this.zoom,d=c-Math.floor(c),g=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}};var pu=function(c,d){this.property=c,this.value=d,this.expression=function(g,A){if(Aa(g))return new fu(g,A);if(nl(g)){var P=Tu(g,A);if(P.result==="error")throw new Error(P.value.map(function(j){return j.key+": "+j.message}).join(", "));return P.value}var B=g;return typeof g=="string"&&A.type==="color"&&(B=gn.parse(g)),{kind:"constant",evaluate:function(){return B}}}(d===void 0?c.specification.default:d,c.specification)};pu.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},pu.prototype.possiblyEvaluate=function(c,d,g){return this.property.possiblyEvaluate(this,c,d,g)};var af=function(c){this.property=c,this.value=new pu(c,void 0)};af.prototype.transitioned=function(c,d){return new Kh(this.property,this.value,d,Oe({},c.transition,this.transition),c.now)},af.prototype.untransitioned=function(){return new Kh(this.property,this.value,null,{},0)};var mc=function(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)};mc.prototype.getValue=function(c){return Ae(this._values[c].value.value)},mc.prototype.setValue=function(c,d){this._values.hasOwnProperty(c)||(this._values[c]=new af(this._values[c].property)),this._values[c].value=new pu(this._values[c].property,d===null?void 0:Ae(d))},mc.prototype.getTransition=function(c){return Ae(this._values[c].transition)},mc.prototype.setTransition=function(c,d){this._values.hasOwnProperty(c)||(this._values[c]=new af(this._values[c].property)),this._values[c].transition=Ae(d)||void 0},mc.prototype.serialize=function(){for(var c={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(c[A]=P);var B=this.getTransition(A);B!==void 0&&(c[A+"-transition"]=B)}return c},mc.prototype.transitioned=function(c,d){for(var g=new Ql(this._properties),A=0,P=Object.keys(this._values);A<P.length;A+=1){var B=P[A];g._values[B]=this._values[B].transitioned(c,d._values[B])}return g},mc.prototype.untransitioned=function(){for(var c=new Ql(this._properties),d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d];c._values[A]=this._values[A].untransitioned()}return c};var Kh=function(c,d,g,A,P){this.property=c,this.value=d,this.begin=P+A.delay||0,this.end=this.begin+A.duration||0,c.specification.transition&&(A.delay||A.duration)&&(this.prior=g)};Kh.prototype.possiblyEvaluate=function(c,d,g){var A=c.now||0,P=this.value.possiblyEvaluate(c,d,g),B=this.prior;if(B){if(A>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(A<this.begin)return B.possiblyEvaluate(c,d,g);var j=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(c,d,g),P,function(q){if(q<=0)return 0;if(q>=1)return 1;var ge=q*q,De=ge*q;return 4*(q<.5?De:3*(q-ge)+De-.75)}(j))}return P};var Ql=function(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)};Ql.prototype.possiblyEvaluate=function(c,d,g){for(var A=new pp(this._properties),P=0,B=Object.keys(this._values);P<B.length;P+=1){var j=B[P];A._values[j]=this._values[j].possiblyEvaluate(c,d,g)}return A},Ql.prototype.hasTransition=function(){for(var c=0,d=Object.keys(this._values);c<d.length;c+=1)if(this._values[d[c]].prior)return!0;return!1};var Vc=function(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)};Vc.prototype.getValue=function(c){return Ae(this._values[c].value)},Vc.prototype.setValue=function(c,d){this._values[c]=new pu(this._values[c].property,d===null?void 0:Ae(d))},Vc.prototype.serialize=function(){for(var c={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(c[A]=P)}return c},Vc.prototype.possiblyEvaluate=function(c,d,g){for(var A=new pp(this._properties),P=0,B=Object.keys(this._values);P<B.length;P+=1){var j=B[P];A._values[j]=this._values[j].possiblyEvaluate(c,d,g)}return A};var qc=function(c,d,g){this.property=c,this.value=d,this.parameters=g};qc.prototype.isConstant=function(){return this.value.kind==="constant"},qc.prototype.constantOr=function(c){return this.value.kind==="constant"?this.value.value:c},qc.prototype.evaluate=function(c,d,g,A){return this.property.evaluate(this.value,this.parameters,c,d,g,A)};var pp=function(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)};pp.prototype.get=function(c){return this._values[c]};var Bo=function(c){this.specification=c};Bo.prototype.possiblyEvaluate=function(c,d){return c.expression.evaluate(d)},Bo.prototype.interpolate=function(c,d,g){var A=Oc[this.specification.type];return A?A(c,d,g):c};var Eo=function(c,d){this.specification=c,this.overrides=d};Eo.prototype.possiblyEvaluate=function(c,d,g,A){return new qc(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(d,null,{},g,A)}:c.expression,d)},Eo.prototype.interpolate=function(c,d,g){if(c.value.kind!=="constant"||d.value.kind!=="constant")return c;if(c.value.value===void 0||d.value.value===void 0)return new qc(this,{kind:"constant",value:void 0},c.parameters);var A=Oc[this.specification.type];return A?new qc(this,{kind:"constant",value:A(c.value.value,d.value.value,g)},c.parameters):c},Eo.prototype.evaluate=function(c,d,g,A,P,B){return c.kind==="constant"?c.value:c.evaluate(d,g,A,P,B)};var Jl=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A,P,B){if(g.value===void 0)return new qc(this,{kind:"constant",value:void 0},A);if(g.expression.kind==="constant"){var j=g.expression.evaluate(A,null,{},P,B),q=g.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,ge=this._calculate(q,q,q,A);return new qc(this,{kind:"constant",value:ge},A)}if(g.expression.kind==="camera"){var De=this._calculate(g.expression.evaluate({zoom:A.zoom-1}),g.expression.evaluate({zoom:A.zoom}),g.expression.evaluate({zoom:A.zoom+1}),A);return new qc(this,{kind:"constant",value:De},A)}return new qc(this,g.expression,A)},d.prototype.evaluate=function(g,A,P,B,j,q){if(g.kind==="source"){var ge=g.evaluate(A,P,B,j,q);return this._calculate(ge,ge,ge,A)}return g.kind==="composite"?this._calculate(g.evaluate({zoom:Math.floor(A.zoom)-1},P,B),g.evaluate({zoom:Math.floor(A.zoom)},P,B),g.evaluate({zoom:Math.floor(A.zoom)+1},P,B),A):g.value},d.prototype._calculate=function(g,A,P,B){return B.zoom>B.zoomHistory.lastIntegerZoom?{from:g,to:A}:{from:P,to:A}},d.prototype.interpolate=function(g){return g},d}(Eo),Qc=function(c){this.specification=c};Qc.prototype.possiblyEvaluate=function(c,d,g,A){if(c.value!==void 0){if(c.expression.kind==="constant"){var P=c.expression.evaluate(d,null,{},g,A);return this._calculate(P,P,P,d)}return this._calculate(c.expression.evaluate(new Sa(Math.floor(d.zoom-1),d)),c.expression.evaluate(new Sa(Math.floor(d.zoom),d)),c.expression.evaluate(new Sa(Math.floor(d.zoom+1),d)),d)}},Qc.prototype._calculate=function(c,d,g,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:c,to:d}:{from:g,to:d}},Qc.prototype.interpolate=function(c){return c};var Jc=function(c){this.specification=c};Jc.prototype.possiblyEvaluate=function(c,d,g,A){return!!c.expression.evaluate(d,null,{},g,A)},Jc.prototype.interpolate=function(){return!1};var hl=function(c){for(var d in this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],c){var g=c[d];g.specification.overridable&&this.overridableProperties.push(d);var A=this.defaultPropertyValues[d]=new pu(g,void 0),P=this.defaultTransitionablePropertyValues[d]=new af(g);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}};fo("DataDrivenProperty",Eo),fo("DataConstantProperty",Bo),fo("CrossFadedDataDrivenProperty",Jl),fo("CrossFadedProperty",Qc),fo("ColorRampProperty",Jc);var wu=function(c){function d(g,A){if(c.call(this),this.id=g.id,this.type=g.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},g.type!=="custom"&&(this.metadata=(g=g).metadata,this.minzoom=g.minzoom,this.maxzoom=g.maxzoom,g.type!=="background"&&(this.source=g.source,this.sourceLayer=g["source-layer"],this.filter=g.filter),A.layout&&(this._unevaluatedLayout=new Vc(A.layout)),A.paint)){for(var P in this._transitionablePaint=new mc(A.paint),g.paint)this.setPaintProperty(P,g.paint[P],{validate:!1});for(var B in g.layout)this.setLayoutProperty(B,g.layout[B],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pp(A.paint)}}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},d.prototype.getLayoutProperty=function(g){return g==="visibility"?this.visibility:this._unevaluatedLayout.getValue(g)},d.prototype.setLayoutProperty=function(g,A,P){P===void 0&&(P={}),A!=null&&this._validate(Ea,"layers."+this.id+".layout."+g,g,A,P)||(g!=="visibility"?this._unevaluatedLayout.setValue(g,A):this.visibility=A)},d.prototype.getPaintProperty=function(g){return ct(g,"-transition")?this._transitionablePaint.getTransition(g.slice(0,-11)):this._transitionablePaint.getValue(g)},d.prototype.setPaintProperty=function(g,A,P){if(P===void 0&&(P={}),A!=null&&this._validate(ya,"layers."+this.id+".paint."+g,g,A,P))return!1;if(ct(g,"-transition"))return this._transitionablePaint.setTransition(g.slice(0,-11),A||void 0),!1;var B=this._transitionablePaint._values[g],j=B.property.specification["property-type"]==="cross-faded-data-driven",q=B.value.isDataDriven(),ge=B.value;this._transitionablePaint.setValue(g,A),this._handleSpecialPaintPropertyUpdate(g);var De=this._transitionablePaint._values[g].value;return De.isDataDriven()||q||j||this._handleOverridablePaintPropertyUpdate(g,ge,De)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!1},d.prototype.isHidden=function(g){return!!(this.minzoom&&g<this.minzoom)||!!(this.maxzoom&&g>=this.maxzoom)||this.visibility==="none"},d.prototype.updateTransitions=function(g){this._transitioningPaint=this._transitionablePaint.transitioned(g,this._transitioningPaint)},d.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},d.prototype.recalculate=function(g,A){g.getCrossfadeParameters&&(this._crossfadeParameters=g.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(g,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(g,void 0,A)},d.prototype.serialize=function(){var g={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(g.layout=g.layout||{},g.layout.visibility=this.visibility),Ie(g,function(A,P){return!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length)})},d.prototype._validate=function(g,A,P,B,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Es(this,g.call(gi,{key:A,layerType:this.type,objectKey:P,value:B,styleSpec:_t,style:{glyphs:!0,sprite:!0}}))},d.prototype.is3D=function(){return!1},d.prototype.isTileClipped=function(){return!1},d.prototype.hasOffscreenPass=function(){return!1},d.prototype.resize=function(){},d.prototype.isStateDependent=function(){for(var g in this.paint._values){var A=this.paint.get(g);if(A instanceof qc&&lo(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1},d}(pn),ih={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},kd=function(c,d){this._structArray=c,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ms=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function gc(c,d){d===void 0&&(d=1);var g=0,A=0;return{members:c.map(function(P){var B=ih[P.type].BYTES_PER_ELEMENT,j=g=w0(g,Math.max(d,B)),q=P.components||1;return A=Math.max(A,B),g+=B*q,{name:P.name,type:P.type,components:q,offset:j}}),size:w0(g,Math.max(A,d)),alignment:d}}function w0(c,d){return Math.ceil(c/d)*d}Ms.serialize=function(c,d){return c._trim(),d&&(c.isTransferred=!0,d.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}},Ms.deserialize=function(c){var d=Object.create(this.prototype);return d.arrayBuffer=c.arrayBuffer,d.length=c.length,d.capacity=c.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d},Ms.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ms.prototype.clear=function(){this.length=0},Ms.prototype.resize=function(c){this.reserve(c),this.length=c},Ms.prototype.reserve=function(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}},Ms.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var qh=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.int16[B+0]=A,this.int16[B+1]=P,g},d}(Ms);qh.prototype.bytesPerElement=4,fo("StructArrayLayout2i4",qh);var vp=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var q=4*g;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=B,this.int16[q+3]=j,g},d}(Ms);vp.prototype.bytesPerElement=8,fo("StructArrayLayout4i8",vp);var Ph=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q){var ge=this.length;return this.resize(ge+1),this.emplace(ge,g,A,P,B,j,q)},d.prototype.emplace=function(g,A,P,B,j,q,ge){var De=6*g;return this.int16[De+0]=A,this.int16[De+1]=P,this.int16[De+2]=B,this.int16[De+3]=j,this.int16[De+4]=q,this.int16[De+5]=ge,g},d}(Ms);Ph.prototype.bytesPerElement=12,fo("StructArrayLayout2i4i12",Ph);var eu=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q){var ge=this.length;return this.resize(ge+1),this.emplace(ge,g,A,P,B,j,q)},d.prototype.emplace=function(g,A,P,B,j,q,ge){var De=4*g,We=8*g;return this.int16[De+0]=A,this.int16[De+1]=P,this.uint8[We+4]=B,this.uint8[We+5]=j,this.uint8[We+6]=q,this.uint8[We+7]=ge,g},d}(Ms);eu.prototype.bytesPerElement=8,fo("StructArrayLayout2i4ub8",eu);var mp=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.float32[B+0]=A,this.float32[B+1]=P,g},d}(Ms);mp.prototype.bytesPerElement=8,fo("StructArrayLayout2f8",mp);var Au=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q,ge,De,We,tt){var xt=this.length;return this.resize(xt+1),this.emplace(xt,g,A,P,B,j,q,ge,De,We,tt)},d.prototype.emplace=function(g,A,P,B,j,q,ge,De,We,tt,xt){var Lt=10*g;return this.uint16[Lt+0]=A,this.uint16[Lt+1]=P,this.uint16[Lt+2]=B,this.uint16[Lt+3]=j,this.uint16[Lt+4]=q,this.uint16[Lt+5]=ge,this.uint16[Lt+6]=De,this.uint16[Lt+7]=We,this.uint16[Lt+8]=tt,this.uint16[Lt+9]=xt,g},d}(Ms);Au.prototype.bytesPerElement=20,fo("StructArrayLayout10ui20",Au);var Wp=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt){var fn=this.length;return this.resize(fn+1),this.emplace(fn,g,A,P,B,j,q,ge,De,We,tt,xt,Lt)},d.prototype.emplace=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn){var _n=12*g;return this.int16[_n+0]=A,this.int16[_n+1]=P,this.int16[_n+2]=B,this.int16[_n+3]=j,this.uint16[_n+4]=q,this.uint16[_n+5]=ge,this.uint16[_n+6]=De,this.uint16[_n+7]=We,this.int16[_n+8]=tt,this.int16[_n+9]=xt,this.int16[_n+10]=Lt,this.int16[_n+11]=fn,g},d}(Ms);Wp.prototype.bytesPerElement=24,fo("StructArrayLayout4i4ui4i24",Wp);var Vu=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.float32[j+0]=A,this.float32[j+1]=P,this.float32[j+2]=B,g},d}(Ms);Vu.prototype.bytesPerElement=12,fo("StructArrayLayout3f12",Vu);var Ud=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint32[1*g+0]=A,g},d}(Ms);Ud.prototype.bytesPerElement=4,fo("StructArrayLayout1ul4",Ud);var A0=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q,ge,De,We){var tt=this.length;return this.resize(tt+1),this.emplace(tt,g,A,P,B,j,q,ge,De,We)},d.prototype.emplace=function(g,A,P,B,j,q,ge,De,We,tt){var xt=10*g,Lt=5*g;return this.int16[xt+0]=A,this.int16[xt+1]=P,this.int16[xt+2]=B,this.int16[xt+3]=j,this.int16[xt+4]=q,this.int16[xt+5]=ge,this.uint32[Lt+3]=De,this.uint16[xt+8]=We,this.uint16[xt+9]=tt,g},d}(Ms);A0.prototype.bytesPerElement=20,fo("StructArrayLayout6i1ul2ui20",A0);var Ih=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q){var ge=this.length;return this.resize(ge+1),this.emplace(ge,g,A,P,B,j,q)},d.prototype.emplace=function(g,A,P,B,j,q,ge){var De=6*g;return this.int16[De+0]=A,this.int16[De+1]=P,this.int16[De+2]=B,this.int16[De+3]=j,this.int16[De+4]=q,this.int16[De+5]=ge,g},d}(Ms);Ih.prototype.bytesPerElement=12,fo("StructArrayLayout2i2i2i12",Ih);var Qh=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j){var q=this.length;return this.resize(q+1),this.emplace(q,g,A,P,B,j)},d.prototype.emplace=function(g,A,P,B,j,q){var ge=4*g,De=8*g;return this.float32[ge+0]=A,this.float32[ge+1]=P,this.float32[ge+2]=B,this.int16[De+6]=j,this.int16[De+7]=q,g},d}(Ms);Qh.prototype.bytesPerElement=16,fo("StructArrayLayout2f1f2i16",Qh);var C0=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var q=12*g,ge=3*g;return this.uint8[q+0]=A,this.uint8[q+1]=P,this.float32[ge+1]=B,this.float32[ge+2]=j,g},d}(Ms);C0.prototype.bytesPerElement=12,fo("StructArrayLayout2ub2f12",C0);var zf=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.uint16[j+0]=A,this.uint16[j+1]=P,this.uint16[j+2]=B,g},d}(Ms);zf.prototype.bytesPerElement=6,fo("StructArrayLayout3ui6",zf);var jf=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr){var gr=this.length;return this.resize(gr+1),this.emplace(gr,g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr)},d.prototype.emplace=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr,gr){var Lr=24*g,Nr=12*g,Gr=48*g;return this.int16[Lr+0]=A,this.int16[Lr+1]=P,this.uint16[Lr+2]=B,this.uint16[Lr+3]=j,this.uint32[Nr+2]=q,this.uint32[Nr+3]=ge,this.uint32[Nr+4]=De,this.uint16[Lr+10]=We,this.uint16[Lr+11]=tt,this.uint16[Lr+12]=xt,this.float32[Nr+7]=Lt,this.float32[Nr+8]=fn,this.uint8[Gr+36]=_n,this.uint8[Gr+37]=Hn,this.uint8[Gr+38]=In,this.uint32[Nr+10]=cr,this.int16[Lr+22]=gr,g},d}(Ms);jf.prototype.bytesPerElement=48,fo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jf);var O0=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr,gr,Lr,Nr,Gr,Pi,Yi,Do,ho,$o,po,ja){var ua=this.length;return this.resize(ua+1),this.emplace(ua,g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr,gr,Lr,Nr,Gr,Pi,Yi,Do,ho,$o,po,ja)},d.prototype.emplace=function(g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n,Hn,In,cr,gr,Lr,Nr,Gr,Pi,Yi,Do,ho,$o,po,ja,ua){var Ao=34*g,Ya=17*g;return this.int16[Ao+0]=A,this.int16[Ao+1]=P,this.int16[Ao+2]=B,this.int16[Ao+3]=j,this.int16[Ao+4]=q,this.int16[Ao+5]=ge,this.int16[Ao+6]=De,this.int16[Ao+7]=We,this.uint16[Ao+8]=tt,this.uint16[Ao+9]=xt,this.uint16[Ao+10]=Lt,this.uint16[Ao+11]=fn,this.uint16[Ao+12]=_n,this.uint16[Ao+13]=Hn,this.uint16[Ao+14]=In,this.uint16[Ao+15]=cr,this.uint16[Ao+16]=gr,this.uint16[Ao+17]=Lr,this.uint16[Ao+18]=Nr,this.uint16[Ao+19]=Gr,this.uint16[Ao+20]=Pi,this.uint16[Ao+21]=Yi,this.uint16[Ao+22]=Do,this.uint32[Ya+12]=ho,this.float32[Ya+13]=$o,this.float32[Ya+14]=po,this.float32[Ya+15]=ja,this.float32[Ya+16]=ua,g},d}(Ms);O0.prototype.bytesPerElement=68,fo("StructArrayLayout8i15ui1ul4f68",O0);var oh=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.float32[1*g+0]=A,g},d}(Ms);oh.prototype.bytesPerElement=4,fo("StructArrayLayout1f4",oh);var Sf=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.int16[j+0]=A,this.int16[j+1]=P,this.int16[j+2]=B,g},d}(Ms);Sf.prototype.bytesPerElement=6,fo("StructArrayLayout3i6",Sf);var lv=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=4*g;return this.uint32[2*g+0]=A,this.uint16[j+2]=P,this.uint16[j+3]=B,g},d}(Ms);lv.prototype.bytesPerElement=8,fo("StructArrayLayout1ul2ui8",lv);var Vf=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.uint16[B+0]=A,this.uint16[B+1]=P,g},d}(Ms);Vf.prototype.bytesPerElement=4,fo("StructArrayLayout2ui4",Vf);var Jh=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint16[1*g+0]=A,g},d}(Ms);Jh.prototype.bytesPerElement=2,fo("StructArrayLayout1ui2",Jh);var R0=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var q=4*g;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=B,this.float32[q+3]=j,g},d}(Ms);R0.prototype.bytesPerElement=16,fo("StructArrayLayout4f16",R0);var _=function(c){function d(){c.apply(this,arguments)}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var g={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return g.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},g.x1.get=function(){return this._structArray.int16[this._pos2+2]},g.y1.get=function(){return this._structArray.int16[this._pos2+3]},g.x2.get=function(){return this._structArray.int16[this._pos2+4]},g.y2.get=function(){return this._structArray.int16[this._pos2+5]},g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.anchorPoint.get=function(){return new ae(this.anchorPointX,this.anchorPointY)},Object.defineProperties(d.prototype,g),d}(kd);_.prototype.size=20;var S=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.get=function(g){return new _(this,g)},d}(A0);fo("CollisionBoxArray",S);var x=function(c){function d(){c.apply(this,arguments)}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},g.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},g.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},g.segment.get=function(){return this._structArray.uint16[this._pos2+10]},g.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},g.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},g.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},g.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},g.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},g.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},g.placedOrientation.set=function(A){this._structArray.uint8[this._pos1+37]=A},g.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},g.hidden.set=function(A){this._structArray.uint8[this._pos1+38]=A},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+10]=A},g.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(d.prototype,g),d}(kd);x.prototype.size=48;var C=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.get=function(g){return new x(this,g)},d}(jf);fo("PlacedSymbolArray",C);var k=function(c){function d(){c.apply(this,arguments)}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},g.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},g.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},g.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},g.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},g.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},g.key.get=function(){return this._structArray.uint16[this._pos2+8]},g.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},g.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},g.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},g.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},g.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},g.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},g.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},g.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},g.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},g.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},g.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},g.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},g.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+12]=A},g.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},g.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},g.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},g.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(d.prototype,g),d}(kd);k.prototype.size=68;var G=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.get=function(g){return new k(this,g)},d}(O0);fo("SymbolInstanceArray",G);var K=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getoffsetX=function(g){return this.float32[1*g+0]},d}(oh);fo("GlyphOffsetArray",K);var de=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getx=function(g){return this.int16[3*g+0]},d.prototype.gety=function(g){return this.int16[3*g+1]},d.prototype.gettileUnitDistanceFromAnchor=function(g){return this.int16[3*g+2]},d}(Sf);fo("SymbolLineVertexArray",de);var Ve=function(c){function d(){c.apply(this,arguments)}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var g={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(d.prototype,g),d}(kd);Ve.prototype.size=8;var st=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.get=function(g){return new Ve(this,g)},d}(lv);fo("FeatureIndexArray",st);var Ft=gc([{name:"a_pos",components:2,type:"Int16"}],4).members,jt=function(c){c===void 0&&(c=[]),this.segments=c};function Xt(c,d){return 256*(c=Le(Math.floor(c),0,255))+Le(Math.floor(d),0,255)}jt.prototype.prepareSegment=function(c,d,g,A){var P=this.segments[this.segments.length-1];return c>jt.MAX_VERTEX_ARRAY_LENGTH&&ut("Max vertices per segment is "+jt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+c),(!P||P.vertexLength+c>jt.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==A)&&(P={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},A!==void 0&&(P.sortKey=A),this.segments.push(P)),P},jt.prototype.get=function(){return this.segments},jt.prototype.destroy=function(){for(var c=0,d=this.segments;c<d.length;c+=1){var g=d[c];for(var A in g.vaos)g.vaos[A].destroy()}},jt.simpleSegment=function(c,d,g,A){return new jt([{vertexOffset:c,primitiveOffset:d,vertexLength:g,primitiveLength:A,vaos:{},sortKey:0}])},jt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fo("SegmentVector",jt);var bn=gc([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),vn=ve(function(c){c.exports=function(d,g){var A,P,B,j,q,ge,De,We;for(P=d.length-(A=3&d.length),B=g,q=3432918353,ge=461845907,We=0;We<P;)De=255&d.charCodeAt(We)|(255&d.charCodeAt(++We))<<8|(255&d.charCodeAt(++We))<<16|(255&d.charCodeAt(++We))<<24,++We,B=27492+(65535&(j=5*(65535&(B=(B^=De=(65535&(De=(De=(65535&De)*q+(((De>>>16)*q&65535)<<16)&4294967295)<<15|De>>>17))*ge+(((De>>>16)*ge&65535)<<16)&4294967295)<<13|B>>>19))+((5*(B>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(De=0,A){case 3:De^=(255&d.charCodeAt(We+2))<<16;case 2:De^=(255&d.charCodeAt(We+1))<<8;case 1:B^=De=(65535&(De=(De=(65535&(De^=255&d.charCodeAt(We)))*q+(((De>>>16)*q&65535)<<16)&4294967295)<<15|De>>>17))*ge+(((De>>>16)*ge&65535)<<16)&4294967295}return B^=d.length,B=2246822507*(65535&(B^=B>>>16))+((2246822507*(B>>>16)&65535)<<16)&4294967295,B=3266489909*(65535&(B^=B>>>13))+((3266489909*(B>>>16)&65535)<<16)&4294967295,(B^=B>>>16)>>>0}}),zn=ve(function(c){c.exports=function(d,g){for(var A,P=d.length,B=g^P,j=0;P>=4;)A=1540483477*(65535&(A=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(A>>>16)&65535)<<16),B=1540483477*(65535&B)+((1540483477*(B>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++j;switch(P){case 3:B^=(255&d.charCodeAt(j+2))<<16;case 2:B^=(255&d.charCodeAt(j+1))<<8;case 1:B=1540483477*(65535&(B^=255&d.charCodeAt(j)))+((1540483477*(B>>>16)&65535)<<16)}return B=1540483477*(65535&(B^=B>>>13))+((1540483477*(B>>>16)&65535)<<16),(B^=B>>>15)>>>0}}),on=vn,Fn=zn;on.murmur3=vn,on.murmur2=Fn;var er=function(){this.ids=[],this.positions=[],this.indexed=!1};er.prototype.add=function(c,d,g,A){this.ids.push(Mr(c)),this.positions.push(d,g,A)},er.prototype.getPositions=function(c){for(var d=Mr(c),g=0,A=this.ids.length-1;g<A;){var P=g+A>>1;this.ids[P]>=d?A=P:g=P+1}for(var B=[];this.ids[g]===d;)B.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return B},er.serialize=function(c,d){var g=new Float64Array(c.ids),A=new Uint32Array(c.positions);return function P(B,j,q,ge){for(;q<ge;){for(var De=B[q+ge>>1],We=q-1,tt=ge+1;;){do We++;while(B[We]<De);do tt--;while(B[tt]>De);if(We>=tt)break;wr(B,We,tt),wr(j,3*We,3*tt),wr(j,3*We+1,3*tt+1),wr(j,3*We+2,3*tt+2)}tt-q<ge-tt?(P(B,j,q,tt),q=tt+1):(P(B,j,tt+1,ge),ge=tt)}}(g,A,0,g.length-1),d&&d.push(g.buffer,A.buffer),{ids:g,positions:A}},er.deserialize=function(c){var d=new er;return d.ids=c.ids,d.positions=c.positions,d.indexed=!0,d};var vr=Math.pow(2,53)-1;function Mr(c){var d=+c;return!isNaN(d)&&d<=vr?d:on(String(c))}function wr(c,d,g){var A=c[d];c[d]=c[g],c[g]=A}fo("FeaturePositionMap",er);var Fr=function(c,d){this.gl=c.gl,this.location=d},ni=function(c){function d(g,A){c.call(this,g,A),this.current=0}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))},d}(Fr),Bi=function(c){function d(g,A){c.call(this,g,A),this.current=0}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))},d}(Fr),Ii=function(c){function d(g,A){c.call(this,g,A),this.current=[0,0]}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))},d}(Fr),co=function(c){function d(g,A){c.call(this,g,A),this.current=[0,0,0]}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))},d}(Fr),Uo=function(c){function d(g,A){c.call(this,g,A),this.current=[0,0,0,0]}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3]))},d}(Fr),Go=function(c){function d(g,A){c.call(this,g,A),this.current=gn.transparent}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a))},d}(Fr),Zo=new Float32Array(16),fs=function(c){function d(g,A){c.call(this,g,A),this.current=Zo}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(var A=1;A<16;A++)if(g[A]!==this.current[A]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}},d}(Fr);function Cr(c){return[Xt(255*c.r,255*c.g),Xt(255*c.b,255*c.a)]}var Jt=function(c,d,g){this.value=c,this.uniformNames=d.map(function(A){return"u_"+A}),this.type=g};Jt.prototype.setUniform=function(c,d,g){c.set(g.constantOr(this.value))},Jt.prototype.getBinding=function(c,d,g){return this.type==="color"?new Go(c,d):new Bi(c,d)};var ma=function(c,d){this.uniformNames=d.map(function(g){return"u_"+g}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ma.prototype.setConstantPatternPositions=function(c,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=c.tlbr},ma.prototype.setUniform=function(c,d,g,A){var P=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&c.set(P)},ma.prototype.getBinding=function(c,d,g){return g.substr(0,9)==="u_pattern"?new Uo(c,d):new Bi(c,d)};var fa=function(c,d,g,A){this.expression=c,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(function(P){return{name:"a_"+P,type:"Float32",components:g==="color"?2:1,offset:0}}),this.paintVertexArray=new A};fa.prototype.populatePaintArray=function(c,d,g,A,P){var B=this.paintVertexArray.length,j=this.expression.evaluate(new Sa(0),d,{},A,[],P);this.paintVertexArray.resize(c),this._setPaintValue(B,c,j)},fa.prototype.updatePaintArray=function(c,d,g,A){var P=this.expression.evaluate({zoom:0},g,A);this._setPaintValue(c,d,P)},fa.prototype._setPaintValue=function(c,d,g){if(this.type==="color")for(var A=Cr(g),P=c;P<d;P++)this.paintVertexArray.emplace(P,A[0],A[1]);else{for(var B=c;B<d;B++)this.paintVertexArray.emplace(B,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}},fa.prototype.upload=function(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qo=function(c,d,g,A,P,B){this.expression=c,this.uniformNames=d.map(function(j){return"u_"+j+"_t"}),this.type=g,this.useIntegerZoom=A,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map(function(j){return{name:"a_"+j,type:"Float32",components:g==="color"?4:2,offset:0}}),this.paintVertexArray=new B};Qo.prototype.populatePaintArray=function(c,d,g,A,P){var B=this.expression.evaluate(new Sa(this.zoom),d,{},A,[],P),j=this.expression.evaluate(new Sa(this.zoom+1),d,{},A,[],P),q=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(q,c,B,j)},Qo.prototype.updatePaintArray=function(c,d,g,A){var P=this.expression.evaluate({zoom:this.zoom},g,A),B=this.expression.evaluate({zoom:this.zoom+1},g,A);this._setPaintValue(c,d,P,B)},Qo.prototype._setPaintValue=function(c,d,g,A){if(this.type==="color")for(var P=Cr(g),B=Cr(A),j=c;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1],B[0],B[1]);else{for(var q=c;q<d;q++)this.paintVertexArray.emplace(q,g,A);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(A))}},Qo.prototype.upload=function(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Qo.prototype.setUniform=function(c,d){var g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=Le(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);c.set(A)},Qo.prototype.getBinding=function(c,d,g){return new Bi(c,d)};var ba=function(c,d,g,A,P,B){this.expression=c,this.type=d,this.useIntegerZoom=g,this.zoom=A,this.layerId=B,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};ba.prototype.populatePaintArray=function(c,d,g){var A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(A,c,d.patterns&&d.patterns[this.layerId],g)},ba.prototype.updatePaintArray=function(c,d,g,A,P){this._setPaintValues(c,d,g.patterns&&g.patterns[this.layerId],P)},ba.prototype._setPaintValues=function(c,d,g,A){if(A&&g){var P=A[g.min],B=A[g.mid],j=A[g.max];if(P&&B&&j)for(var q=c;q<d;q++)this.zoomInPaintVertexArray.emplace(q,B.tl[0],B.tl[1],B.br[0],B.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],B.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,B.tl[0],B.tl[1],B.br[0],B.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],B.pixelRatio,j.pixelRatio)}},ba.prototype.upload=function(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,bn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,bn.members,this.expression.isStateDependent))},ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var sa=function(c,d,g){this.binders={},this._buffers=[];var A=[];for(var P in c.paint._values)if(g(P)){var B=c.paint.get(P);if(B instanceof qc&&lo(B.property.specification)){var j=lc(P,c.type),q=B.value,ge=B.property.specification.type,De=B.property.useIntegerZoom,We=B.property.specification["property-type"],tt=We==="cross-faded"||We==="cross-faded-data-driven";if(q.kind==="constant")this.binders[P]=tt?new ma(q.value,j):new Jt(q.value,j,ge),A.push("/u_"+P);else if(q.kind==="source"||tt){var xt=xl(P,ge,"source");this.binders[P]=tt?new ba(q,ge,De,d,xt,c.id):new fa(q,j,ge,xt),A.push("/a_"+P)}else{var Lt=xl(P,ge,"composite");this.binders[P]=new Qo(q,j,ge,De,d,Lt),A.push("/z_"+P)}}}this.cacheKey=A.sort().join("")};sa.prototype.getMaxValue=function(c){var d=this.binders[c];return d instanceof fa||d instanceof Qo?d.maxValue:0},sa.prototype.populatePaintArrays=function(c,d,g,A,P){for(var B in this.binders){var j=this.binders[B];(j instanceof fa||j instanceof Qo||j instanceof ba)&&j.populatePaintArray(c,d,g,A,P)}},sa.prototype.setConstantPatternPositions=function(c,d){for(var g in this.binders){var A=this.binders[g];A instanceof ma&&A.setConstantPatternPositions(c,d)}},sa.prototype.updatePaintArrays=function(c,d,g,A,P){var B=!1;for(var j in c)for(var q=0,ge=d.getPositions(j);q<ge.length;q+=1){var De=ge[q],We=g.feature(De.index);for(var tt in this.binders){var xt=this.binders[tt];if((xt instanceof fa||xt instanceof Qo||xt instanceof ba)&&xt.expression.isStateDependent===!0){var Lt=A.paint.get(tt);xt.expression=Lt.value,xt.updatePaintArray(De.start,De.end,We,c[j],P),B=!0}}}return B},sa.prototype.defines=function(){var c=[];for(var d in this.binders){var g=this.binders[d];(g instanceof Jt||g instanceof ma)&&c.push.apply(c,g.uniformNames.map(function(A){return"#define HAS_UNIFORM_"+A}))}return c},sa.prototype.getBinderAttributes=function(){var c=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof fa||g instanceof Qo)for(var A=0;A<g.paintVertexAttributes.length;A++)c.push(g.paintVertexAttributes[A].name);else if(g instanceof ba)for(var P=0;P<bn.members.length;P++)c.push(bn.members[P].name)}return c},sa.prototype.getBinderUniforms=function(){var c=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof Jt||g instanceof ma||g instanceof Qo)for(var A=0,P=g.uniformNames;A<P.length;A+=1)c.push(P[A])}return c},sa.prototype.getPaintVertexBuffers=function(){return this._buffers},sa.prototype.getUniforms=function(c,d){var g=[];for(var A in this.binders){var P=this.binders[A];if(P instanceof Jt||P instanceof ma||P instanceof Qo)for(var B=0,j=P.uniformNames;B<j.length;B+=1){var q=j[B];if(d[q]){var ge=P.getBinding(c,d[q],q);g.push({name:q,property:A,binding:ge})}}}return g},sa.prototype.setUniforms=function(c,d,g,A){for(var P=0,B=d;P<B.length;P+=1){var j=B[P],q=j.name,ge=j.property;this.binders[ge].setUniform(j.binding,A,g.get(ge),q)}},sa.prototype.updatePaintBuffers=function(c){for(var d in this._buffers=[],this.binders){var g=this.binders[d];if(c&&g instanceof ba){var A=c.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(g instanceof fa||g instanceof Qo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}},sa.prototype.upload=function(c){for(var d in this.binders){var g=this.binders[d];(g instanceof fa||g instanceof Qo||g instanceof ba)&&g.upload(c)}this.updatePaintBuffers()},sa.prototype.destroy=function(){for(var c in this.binders){var d=this.binders[c];(d instanceof fa||d instanceof Qo||d instanceof ba)&&d.destroy()}};var Fo=function(c,d,g){g===void 0&&(g=function(){return!0}),this.programConfigurations={};for(var A=0,P=c;A<P.length;A+=1){var B=P[A];this.programConfigurations[B.id]=new sa(B,d,g)}this.needsUpload=!1,this._featureMap=new er,this._bufferOffset=0};function lc(c,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(d+"-","").replace(/-/g,"_")]}function xl(c,d,g){var A={color:{source:mp,composite:R0},number:{source:oh,composite:mp}},P=function(B){return{"line-pattern":{source:Au,composite:Au},"fill-pattern":{source:Au,composite:Au},"fill-extrusion-pattern":{source:Au,composite:Au}}[B]}(c);return P&&P[g]||A[d][g]}Fo.prototype.populatePaintArrays=function(c,d,g,A,P,B){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(c,d,A,P,B);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0},Fo.prototype.updatePaintArrays=function(c,d,g,A){for(var P=0,B=g;P<B.length;P+=1){var j=B[P];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(c,this._featureMap,d,j,A)||this.needsUpload}},Fo.prototype.get=function(c){return this.programConfigurations[c]},Fo.prototype.upload=function(c){if(this.needsUpload){for(var d in this.programConfigurations)this.programConfigurations[d].upload(c);this.needsUpload=!1}},Fo.prototype.destroy=function(){for(var c in this.programConfigurations)this.programConfigurations[c].destroy()},fo("ConstantBinder",Jt),fo("CrossFadedConstantBinder",ma),fo("SourceExpressionBinder",fa),fo("CrossFadedCompositeBinder",ba),fo("CompositeExpressionBinder",Qo),fo("ProgramConfiguration",sa,{omit:["_buffers"]}),fo("ProgramConfigurationSet",Fo);var Pc=Math.pow(2,14)-1,cc=-Pc-1;function Ss(c){for(var d=8192/c.extent,g=c.loadGeometry(),A=0;A<g.length;A++)for(var P=g[A],B=0;B<P.length;B++){var j=P[B],q=Math.round(j.x*d),ge=Math.round(j.y*d);j.x=Le(q,cc,Pc),j.y=Le(ge,cc,Pc),(q<j.x||q>j.x+1||ge<j.y||ge>j.y+1)&&ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return g}function yl(c,d){return{type:c.type,id:c.id,properties:c.properties,geometry:d?Ss(c):[]}}function dl(c,d,g,A,P){c.emplaceBack(2*d+(A+1)/2,2*g+(P+1)/2)}var vu=function(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new qh,this.indexArray=new zf,this.segments=new jt,this.programConfigurations=new Fo(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Hf(c,d){for(var g=0;g<c.length;g++)if(ah(d,c[g]))return!0;for(var A=0;A<d.length;A++)if(ah(c,d[A]))return!0;return!!gp(c,d)}function Cu(c,d,g){return!!ah(c,d)||!!Lh(d,c,g)}function sf(c,d){if(c.length===1)return td(d,c[0]);for(var g=0;g<d.length;g++)for(var A=d[g],P=0;P<A.length;P++)if(ah(c,A[P]))return!0;for(var B=0;B<c.length;B++)if(td(d,c[B]))return!0;for(var j=0;j<d.length;j++)if(gp(c,d[j]))return!0;return!1}function Hu(c,d,g){if(c.length>1){if(gp(c,d))return!0;for(var A=0;A<d.length;A++)if(Lh(d[A],c,g))return!0}for(var P=0;P<c.length;P++)if(Lh(c[P],d,g))return!0;return!1}function gp(c,d){if(c.length===0||d.length===0)return!1;for(var g=0;g<c.length-1;g++)for(var A=c[g],P=c[g+1],B=0;B<d.length-1;B++)if(yp(A,P,d[B],d[B+1]))return!0;return!1}function yp(c,d,g,A){return Et(c,g,A)!==Et(d,g,A)&&Et(c,d,g)!==Et(c,d,A)}function Lh(c,d,g){var A=g*g;if(d.length===1)return c.distSqr(d[0])<A;for(var P=1;P<d.length;P++)if(ed(c,d[P-1],d[P])<A)return!0;return!1}function ed(c,d,g){var A=d.distSqr(g);if(A===0)return c.distSqr(d);var P=((c.x-d.x)*(g.x-d.x)+(c.y-d.y)*(g.y-d.y))/A;return c.distSqr(P<0?d:P>1?g:g.sub(d)._mult(P)._add(d))}function td(c,d){for(var g,A,P,B=!1,j=0;j<c.length;j++)for(var q=0,ge=(g=c[j]).length-1;q<g.length;ge=q++)(A=g[q]).y>d.y!=(P=g[ge]).y>d.y&&d.x<(P.x-A.x)*(d.y-A.y)/(P.y-A.y)+A.x&&(B=!B);return B}function ah(c,d){for(var g=!1,A=0,P=c.length-1;A<c.length;P=A++){var B=c[A],j=c[P];B.y>d.y!=j.y>d.y&&d.x<(j.x-B.x)*(d.y-B.y)/(j.y-B.y)+B.x&&(g=!g)}return g}function Ai(c,d,g){var A=g[0],P=g[2];if(c.x<A.x&&d.x<A.x||c.x>P.x&&d.x>P.x||c.y<A.y&&d.y<A.y||c.y>P.y&&d.y>P.y)return!1;var B=Et(c,d,g[0]);return B!==Et(c,d,g[1])||B!==Et(c,d,g[2])||B!==Et(c,d,g[3])}function Il(c,d,g){var A=d.paint.get(c).value;return A.kind==="constant"?A.value:g.programConfigurations.get(d.id).getMaxValue(c)}function Ll(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function tu(c,d,g,A,P){if(!d[0]&&!d[1])return c;var B=ae.convert(d)._mult(P);g==="viewport"&&B._rotate(-A);for(var j=[],q=0;q<c.length;q++)j.push(c[q].sub(B));return j}vu.prototype.populate=function(c,d,g){var A=this.layers[0],P=[],B=null;A.type==="circle"&&(B=A.layout.get("circle-sort-key"));for(var j=0,q=c;j<q.length;j+=1){var ge=q[j],De=ge.feature,We=ge.id,tt=ge.index,xt=ge.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,fn=yl(De,Lt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),fn,g)){var _n=B?B.evaluate(fn,{},g):void 0,Hn={id:We,properties:De.properties,type:De.type,sourceLayerIndex:xt,index:tt,geometry:Lt?fn.geometry:Ss(De),patterns:{},sortKey:_n};P.push(Hn)}}B&&P.sort(function(Yi,Do){return Yi.sortKey-Do.sortKey});for(var In=0,cr=P;In<cr.length;In+=1){var gr=cr[In],Lr=gr.geometry,Nr=gr.index,Gr=gr.sourceLayerIndex,Pi=c[Nr].feature;this.addFeature(gr,Lr,Nr,g),d.featureIndex.insert(Pi,Lr,Nr,Gr,this.index)}},vu.prototype.update=function(c,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,g)},vu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vu.prototype.upload=function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ft),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0},vu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vu.prototype.addFeature=function(c,d,g,A){for(var P=0,B=d;P<B.length;P+=1)for(var j=0,q=B[P];j<q.length;j+=1){var ge=q[j],De=ge.x,We=ge.y;if(!(De<0||De>=8192||We<0||We>=8192)){var tt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),xt=tt.vertexLength;dl(this.layoutVertexArray,De,We,-1,-1),dl(this.layoutVertexArray,De,We,1,-1),dl(this.layoutVertexArray,De,We,1,1),dl(this.layoutVertexArray,De,We,-1,1),this.indexArray.emplaceBack(xt,xt+1,xt+2),this.indexArray.emplaceBack(xt,xt+3,xt+2),tt.vertexLength+=4,tt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,{},A)},fo("CircleBucket",vu,{omit:["layers"]});var Tf=new hl({"circle-sort-key":new Eo(_t.layout_circle["circle-sort-key"])}),wf={paint:new hl({"circle-radius":new Eo(_t.paint_circle["circle-radius"]),"circle-color":new Eo(_t.paint_circle["circle-color"]),"circle-blur":new Eo(_t.paint_circle["circle-blur"]),"circle-opacity":new Eo(_t.paint_circle["circle-opacity"]),"circle-translate":new Bo(_t.paint_circle["circle-translate"]),"circle-translate-anchor":new Bo(_t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bo(_t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bo(_t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Eo(_t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Eo(_t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Eo(_t.paint_circle["circle-stroke-opacity"])}),layout:Tf},Xa=typeof Float32Array!="undefined"?Float32Array:Array;function Wl(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ec(c,d,g){var A=d[0],P=d[1],B=d[2],j=d[3],q=d[4],ge=d[5],De=d[6],We=d[7],tt=d[8],xt=d[9],Lt=d[10],fn=d[11],_n=d[12],Hn=d[13],In=d[14],cr=d[15],gr=g[0],Lr=g[1],Nr=g[2],Gr=g[3];return c[0]=gr*A+Lr*q+Nr*tt+Gr*_n,c[1]=gr*P+Lr*ge+Nr*xt+Gr*Hn,c[2]=gr*B+Lr*De+Nr*Lt+Gr*In,c[3]=gr*j+Lr*We+Nr*fn+Gr*cr,c[4]=(gr=g[4])*A+(Lr=g[5])*q+(Nr=g[6])*tt+(Gr=g[7])*_n,c[5]=gr*P+Lr*ge+Nr*xt+Gr*Hn,c[6]=gr*B+Lr*De+Nr*Lt+Gr*In,c[7]=gr*j+Lr*We+Nr*fn+Gr*cr,c[8]=(gr=g[8])*A+(Lr=g[9])*q+(Nr=g[10])*tt+(Gr=g[11])*_n,c[9]=gr*P+Lr*ge+Nr*xt+Gr*Hn,c[10]=gr*B+Lr*De+Nr*Lt+Gr*In,c[11]=gr*j+Lr*We+Nr*fn+Gr*cr,c[12]=(gr=g[12])*A+(Lr=g[13])*q+(Nr=g[14])*tt+(Gr=g[15])*_n,c[13]=gr*P+Lr*ge+Nr*xt+Gr*Hn,c[14]=gr*B+Lr*De+Nr*Lt+Gr*In,c[15]=gr*j+Lr*We+Nr*fn+Gr*cr,c}Math.hypot||(Math.hypot=function(){for(var c=arguments,d=0,g=arguments.length;g--;)d+=c[g]*c[g];return Math.sqrt(d)});var Wf,Gp=ec;function sh(c,d,g){var A=d[0],P=d[1],B=d[2],j=d[3];return c[0]=g[0]*A+g[4]*P+g[8]*B+g[12]*j,c[1]=g[1]*A+g[5]*P+g[9]*B+g[13]*j,c[2]=g[2]*A+g[6]*P+g[10]*B+g[14]*j,c[3]=g[3]*A+g[7]*P+g[11]*B+g[15]*j,c}Wf=new Xa(3),Xa!=Float32Array&&(Wf[0]=0,Wf[1]=0,Wf[2]=0),function(){var c=new Xa(4);Xa!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0)}();var M0=(function(){var c=new Xa(2);Xa!=Float32Array&&(c[0]=0,c[1]=0)}(),function(c){function d(g){c.call(this,g,wf)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.createBucket=function(g){return new vu(g)},d.prototype.queryRadius=function(g){var A=g;return Il("circle-radius",this,A)+Il("circle-stroke-width",this,A)+Ll(this.paint.get("circle-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,q,ge,De){for(var We=tu(g,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,ge),tt=this.paint.get("circle-radius").evaluate(A,P)+this.paint.get("circle-stroke-width").evaluate(A,P),xt=this.paint.get("circle-pitch-alignment")==="map",Lt=xt?We:function(Pi,Yi){return Pi.map(function(Do){return zd(Do,Yi)})}(We,De),fn=xt?tt*ge:tt,_n=0,Hn=B;_n<Hn.length;_n+=1)for(var In=0,cr=Hn[_n];In<cr.length;In+=1){var gr=cr[In],Lr=xt?gr:zd(gr,De),Nr=fn,Gr=sh([],[gr.x,gr.y,0,1],De);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Nr*=Gr[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Nr*=q.cameraToCenterDistance/Gr[3]),Cu(Lt,Lr,Nr))return!0}return!1},d}(wu));function zd(c,d){var g=sh([],[c.x,c.y,0,1],d);return new ae(g[0]/g[3],g[1]/g[3])}var jd=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(vu);function Gf(c,d,g,A){var P=d.width,B=d.height;if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==P*B*g)throw new RangeError("mismatched image size")}else A=new Uint8Array(P*B*g);return c.width=P,c.height=B,c.data=A,c}function Zp(c,d,g){var A=d.width,P=d.height;if(A!==c.width||P!==c.height){var B=Gf({},{width:A,height:P},g);Xv(c,B,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,A),height:Math.min(c.height,P)},g),c.width=A,c.height=P,c.data=B.data}}function Xv(c,d,g,A,P,B){if(P.width===0||P.height===0)return d;if(P.width>c.width||P.height>c.height||g.x>c.width-P.width||g.y>c.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>d.width||P.height>d.height||A.x>d.width-P.width||A.y>d.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=c.data,q=d.data,ge=0;ge<P.height;ge++)for(var De=((g.y+ge)*c.width+g.x)*B,We=((A.y+ge)*d.width+A.x)*B,tt=0;tt<P.width*B;tt++)q[We+tt]=j[De+tt];return d}fo("HeatmapBucket",jd,{omit:["layers"]});var Vd=function(c,d){Gf(this,c,1,d)};Vd.prototype.resize=function(c){Zp(this,c,1)},Vd.prototype.clone=function(){return new Vd({width:this.width,height:this.height},new Uint8Array(this.data))},Vd.copy=function(c,d,g,A,P){Xv(c,d,g,A,P,1)};var Ou=function(c,d){Gf(this,c,4,d)};Ou.prototype.resize=function(c){Zp(this,c,4)},Ou.prototype.replace=function(c,d){d?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c},Ou.prototype.clone=function(){return new Ou({width:this.width,height:this.height},new Uint8Array(this.data))},Ou.copy=function(c,d,g,A,P){Xv(c,d,g,A,P,4)},fo("AlphaImage",Vd),fo("RGBAImage",Ou);var Qy={paint:new hl({"heatmap-radius":new Eo(_t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Eo(_t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bo(_t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jc(_t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bo(_t.paint_heatmap["heatmap-opacity"])})};function $v(c){var d={},g=c.resolution||256,A=c.clips?c.clips.length:1,P=c.image||new Ou({width:g,height:A}),B=function(fn,_n,Hn){d[c.evaluationKey]=Hn;var In=c.expression.evaluate(d);P.data[fn+_n+0]=Math.floor(255*In.r/In.a),P.data[fn+_n+1]=Math.floor(255*In.g/In.a),P.data[fn+_n+2]=Math.floor(255*In.b/In.a),P.data[fn+_n+3]=Math.floor(255*In.a)};if(c.clips)for(var j=0,q=0;j<A;++j,q+=4*g)for(var ge=0,De=0;ge<g;ge++,De+=4){var We=ge/(g-1),tt=c.clips[j];B(q,De,tt.start*(1-We)+tt.end*We)}else for(var xt=0,Lt=0;xt<g;xt++,Lt+=4)B(0,Lt,xt/(g-1));return P}var Xp=function(c){function d(g){c.call(this,g,Qy),this._updateColorRamp()}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.createBucket=function(g){return new jd(g)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="heatmap-color"&&this._updateColorRamp()},d.prototype._updateColorRamp=function(){this.colorRamp=$v({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},d.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},d}(wu),Jy={paint:new hl({"hillshade-illumination-direction":new Bo(_t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bo(_t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bo(_t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bo(_t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bo(_t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bo(_t.paint_hillshade["hillshade-accent-color"])})},Ug=function(c){function d(g){c.call(this,g,Jy)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},d}(wu),e_=gc([{name:"a_pos",components:2,type:"Int16"}],4).members,Gm=cv,Yv=cv;function cv(c,d,g){g=g||2;var A,P,B,j,q,ge,De,We=d&&d.length,tt=We?d[0]*g:c.length,xt=t_(c,0,tt,g,!0),Lt=[];if(!xt||xt.next===xt.prev)return Lt;if(We&&(xt=function(_n,Hn,In,cr){var gr,Lr,Nr,Gr=[];for(gr=0,Lr=Hn.length;gr<Lr;gr++)(Nr=t_(_n,Hn[gr]*cr,gr<Lr-1?Hn[gr+1]*cr:_n.length,cr,!1))===Nr.next&&(Nr.steiner=!0),Gr.push(fv(Nr));for(Gr.sort(qv),gr=0;gr<Gr.length;gr++)jg(Gr[gr],In),In=$p(In,In.next);return In}(c,d,xt,g)),c.length>80*g){A=B=c[0],P=j=c[1];for(var fn=g;fn<tt;fn+=g)(q=c[fn])<A&&(A=q),(ge=c[fn+1])<P&&(P=ge),q>B&&(B=q),ge>j&&(j=ge);De=(De=Math.max(B-A,j-P))!==0?1/De:0}return Yp(xt,Lt,g,A,P,De),Lt}function t_(c,d,g,A,P){var B,j;if(P===I0(c,d,g,A)>0)for(B=d;B<g;B+=A)j=rd(B,c[B],c[B+1],j);else for(B=g-A;B>=d;B-=A)j=rd(B,c[B],c[B+1],j);return j&&nd(j,j.next)&&(lf(j),j=j.next),j}function $p(c,d){if(!c)return c;d||(d=c);var g,A=c;do if(g=!1,A.steiner||!nd(A,A.next)&&El(A.prev,A,A.next)!==0)A=A.next;else{if(lf(A),(A=d=A.prev)===A.next)break;g=!0}while(g||A!==d);return d}function Yp(c,d,g,A,P,B,j){if(c){!j&&B&&function(We,tt,xt,Lt){var fn=We;do fn.z===null&&(fn.z=P0(fn.x,fn.y,tt,xt,Lt)),fn.prevZ=fn.prev,fn.nextZ=fn.next,fn=fn.next;while(fn!==We);fn.prevZ.nextZ=null,fn.prevZ=null,function(_n){var Hn,In,cr,gr,Lr,Nr,Gr,Pi,Yi=1;do{for(In=_n,_n=null,Lr=null,Nr=0;In;){for(Nr++,cr=In,Gr=0,Hn=0;Hn<Yi&&(Gr++,cr=cr.nextZ);Hn++);for(Pi=Yi;Gr>0||Pi>0&&cr;)Gr!==0&&(Pi===0||!cr||In.z<=cr.z)?(gr=In,In=In.nextZ,Gr--):(gr=cr,cr=cr.nextZ,Pi--),Lr?Lr.nextZ=gr:_n=gr,gr.prevZ=Lr,Lr=gr;In=cr}Lr.nextZ=null,Yi*=2}while(Nr>1)}(fn)}(c,A,P,B);for(var q,ge,De=c;c.prev!==c.next;)if(q=c.prev,ge=c.next,B?Xm(c,A,P,B):Zm(c))d.push(q.i/g),d.push(c.i/g),d.push(ge.i/g),lf(c),c=ge.next,De=ge.next;else if((c=ge)===De){j?j===1?Yp(c=zg($p(c),d,g),d,g,A,P,B,2):j===2&&Kv(c,d,g,A,P,B):Yp($p(c),d,g,A,P,B,1);break}}}function Zm(c){var d=c.prev,g=c,A=c.next;if(El(d,g,A)>=0)return!1;for(var P=c.next.next;P!==c.prev;){if(nu(d.x,d.y,g.x,g.y,A.x,A.y,P.x,P.y)&&El(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function Xm(c,d,g,A){var P=c.prev,B=c,j=c.next;if(El(P,B,j)>=0)return!1;for(var q=P.x>B.x?P.x>j.x?P.x:j.x:B.x>j.x?B.x:j.x,ge=P.y>B.y?P.y>j.y?P.y:j.y:B.y>j.y?B.y:j.y,De=P0(P.x<B.x?P.x<j.x?P.x:j.x:B.x<j.x?B.x:j.x,P.y<B.y?P.y<j.y?P.y:j.y:B.y<j.y?B.y:j.y,d,g,A),We=P0(q,ge,d,g,A),tt=c.prevZ,xt=c.nextZ;tt&&tt.z>=De&&xt&&xt.z<=We;){if(tt!==c.prev&&tt!==c.next&&nu(P.x,P.y,B.x,B.y,j.x,j.y,tt.x,tt.y)&&El(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,xt!==c.prev&&xt!==c.next&&nu(P.x,P.y,B.x,B.y,j.x,j.y,xt.x,xt.y)&&El(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;tt&&tt.z>=De;){if(tt!==c.prev&&tt!==c.next&&nu(P.x,P.y,B.x,B.y,j.x,j.y,tt.x,tt.y)&&El(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;xt&&xt.z<=We;){if(xt!==c.prev&&xt!==c.next&&nu(P.x,P.y,B.x,B.y,j.x,j.y,xt.x,xt.y)&&El(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function zg(c,d,g){var A=c;do{var P=A.prev,B=A.next.next;!nd(P,B)&&$m(P,A,A.next,B)&&Hd(P,B)&&Hd(B,P)&&(d.push(P.i/g),d.push(A.i/g),d.push(B.i/g),lf(A),lf(A.next),A=c=B),A=A.next}while(A!==c);return $p(A)}function Kv(c,d,g,A,P,B){var j=c;do{for(var q=j.next.next;q!==j.prev;){if(j.i!==q.i&&Kp(j,q)){var ge=Jp(j,q);return j=$p(j,j.next),ge=$p(ge,ge.next),Yp(j,d,g,A,P,B),void Yp(ge,d,g,A,P,B)}q=q.next}j=j.next}while(j!==c)}function qv(c,d){return c.x-d.x}function jg(c,d){if(d=function(A,P){var B,j=P,q=A.x,ge=A.y,De=-1/0;do{if(ge<=j.y&&ge>=j.next.y&&j.next.y!==j.y){var We=j.x+(ge-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(We<=q&&We>De){if(De=We,We===q){if(ge===j.y)return j;if(ge===j.next.y)return j.next}B=j.x<j.next.x?j:j.next}}j=j.next}while(j!==P);if(!B)return null;if(q===De)return B;var tt,xt=B,Lt=B.x,fn=B.y,_n=1/0;j=B;do q>=j.x&&j.x>=Lt&&q!==j.x&&nu(ge<fn?q:De,ge,Lt,fn,ge<fn?De:q,ge,j.x,j.y)&&(tt=Math.abs(ge-j.y)/(q-j.x),Hd(j,A)&&(tt<_n||tt===_n&&(j.x>B.x||j.x===B.x&&uv(B,j)))&&(B=j,_n=tt)),j=j.next;while(j!==xt);return B}(c,d)){var g=Jp(d,c);$p(d,d.next),$p(g,g.next)}}function uv(c,d){return El(c.prev,c,d.prev)<0&&El(d.next,c,c.next)<0}function P0(c,d,g,A,P){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-g)*P)|c<<8))|c<<4))|c<<2))|c<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-A)*P)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function fv(c){var d=c,g=c;do(d.x<g.x||d.x===g.x&&d.y<g.y)&&(g=d),d=d.next;while(d!==c);return g}function nu(c,d,g,A,P,B,j,q){return(P-j)*(d-q)-(c-j)*(B-q)>=0&&(c-j)*(A-q)-(g-j)*(d-q)>=0&&(g-j)*(B-q)-(P-j)*(A-q)>=0}function Kp(c,d){return c.next.i!==d.i&&c.prev.i!==d.i&&!function(g,A){var P=g;do{if(P.i!==g.i&&P.next.i!==g.i&&P.i!==A.i&&P.next.i!==A.i&&$m(P,P.next,g,A))return!0;P=P.next}while(P!==g);return!1}(c,d)&&(Hd(c,d)&&Hd(d,c)&&function(g,A){var P=g,B=!1,j=(g.x+A.x)/2,q=(g.y+A.y)/2;do P.y>q!=P.next.y>q&&P.next.y!==P.y&&j<(P.next.x-P.x)*(q-P.y)/(P.next.y-P.y)+P.x&&(B=!B),P=P.next;while(P!==g);return B}(c,d)&&(El(c.prev,c,d.prev)||El(c,d.prev,d))||nd(c,d)&&El(c.prev,c,c.next)>0&&El(d.prev,d,d.next)>0)}function El(c,d,g){return(d.y-c.y)*(g.x-d.x)-(d.x-c.x)*(g.y-d.y)}function nd(c,d){return c.x===d.x&&c.y===d.y}function $m(c,d,g,A){var P=Qp(El(c,d,g)),B=Qp(El(c,d,A)),j=Qp(El(g,A,c)),q=Qp(El(g,A,d));return P!==B&&j!==q||!(P!==0||!qp(c,g,d))||!(B!==0||!qp(c,A,d))||!(j!==0||!qp(g,c,A))||!(q!==0||!qp(g,d,A))}function qp(c,d,g){return d.x<=Math.max(c.x,g.x)&&d.x>=Math.min(c.x,g.x)&&d.y<=Math.max(c.y,g.y)&&d.y>=Math.min(c.y,g.y)}function Qp(c){return c>0?1:c<0?-1:0}function Hd(c,d){return El(c.prev,c,c.next)<0?El(c,d,c.next)>=0&&El(c,c.prev,d)>=0:El(c,d,c.prev)<0||El(c,c.next,d)<0}function Jp(c,d){var g=new e0(c.i,c.x,c.y),A=new e0(d.i,d.x,d.y),P=c.next,B=d.prev;return c.next=d,d.prev=c,g.next=P,P.prev=g,A.next=g,g.prev=A,B.next=A,A.prev=B,A}function rd(c,d,g,A){var P=new e0(c,d,g);return A?(P.next=A.next,P.prev=A,A.next.prev=P,A.next=P):(P.prev=P,P.next=P),P}function lf(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function e0(c,d,g){this.i=c,this.x=d,this.y=g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I0(c,d,g,A){for(var P=0,B=d,j=g-A;B<g;B+=A)P+=(c[j]-c[B])*(c[B+1]+c[j+1]),j=B;return P}function Ym(c,d,g,A,P){(function B(j,q,ge,De,We){for(;De>ge;){if(De-ge>600){var tt=De-ge+1,xt=q-ge+1,Lt=Math.log(tt),fn=.5*Math.exp(2*Lt/3),_n=.5*Math.sqrt(Lt*fn*(tt-fn)/tt)*(xt-tt/2<0?-1:1);B(j,q,Math.max(ge,Math.floor(q-xt*fn/tt+_n)),Math.min(De,Math.floor(q+(tt-xt)*fn/tt+_n)),We)}var Hn=j[q],In=ge,cr=De;for(id(j,ge,q),We(j[De],Hn)>0&&id(j,ge,De);In<cr;){for(id(j,In,cr),In++,cr--;We(j[In],Hn)<0;)In++;for(;We(j[cr],Hn)>0;)cr--}We(j[ge],Hn)===0?id(j,ge,cr):id(j,++cr,De),cr<=q&&(ge=cr+1),q<=cr&&(De=cr-1)}})(c,d,g||0,A||c.length-1,P||Af)}function id(c,d,g){var A=c[d];c[d]=c[g],c[g]=A}function Af(c,d){return c<d?-1:c>d?1:0}function Dh(c,d){var g=c.length;if(g<=1)return[c];for(var A,P,B=[],j=0;j<g;j++){var q=cn(c[j]);q!==0&&(c[j].area=Math.abs(q),P===void 0&&(P=q<0),P===q<0?(A&&B.push(A),A=[c[j]]):A.push(c[j]))}if(A&&B.push(A),d>1)for(var ge=0;ge<B.length;ge++)B[ge].length<=d||(Ym(B[ge],d,1,B[ge].length-1,Qv),B[ge]=B[ge].slice(0,d));return B}function Qv(c,d){return d.area-c.area}function Jv(c,d,g){for(var A=g.patternDependencies,P=!1,B=0,j=d;B<j.length;B+=1){var q=j[B].paint.get(c+"-pattern");q.isConstant()||(P=!0);var ge=q.constantOr(null);ge&&(P=!0,A[ge.to]=!0,A[ge.from]=!0)}return P}function L0(c,d,g,A,P){for(var B=P.patternDependencies,j=0,q=d;j<q.length;j+=1){var ge=q[j],De=ge.paint.get(c+"-pattern").value;if(De.kind!=="constant"){var We=De.evaluate({zoom:A-1},g,{},P.availableImages),tt=De.evaluate({zoom:A},g,{},P.availableImages),xt=De.evaluate({zoom:A+1},g,{},P.availableImages);tt=tt&&tt.name?tt.name:tt,xt=xt&&xt.name?xt.name:xt,B[We=We&&We.name?We.name:We]=!0,B[tt]=!0,B[xt]=!0,g.patterns[ge.id]={min:We,mid:tt,max:xt}}}return g}cv.deviation=function(c,d,g,A){var P=d&&d.length,B=Math.abs(I0(c,0,P?d[0]*g:c.length,g));if(P)for(var j=0,q=d.length;j<q;j++)B-=Math.abs(I0(c,d[j]*g,j<q-1?d[j+1]*g:c.length,g));var ge=0;for(j=0;j<A.length;j+=3){var De=A[j]*g,We=A[j+1]*g,tt=A[j+2]*g;ge+=Math.abs((c[De]-c[tt])*(c[We+1]-c[De+1])-(c[De]-c[We])*(c[tt+1]-c[De+1]))}return B===0&&ge===0?0:Math.abs((ge-B)/B)},cv.flatten=function(c){for(var d=c[0][0].length,g={vertices:[],holes:[],dimensions:d},A=0,P=0;P<c.length;P++){for(var B=0;B<c[P].length;B++)for(var j=0;j<d;j++)g.vertices.push(c[P][B][j]);P>0&&g.holes.push(A+=c[P-1].length)}return g},Gm.default=Yv;var Zf=function(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qh,this.indexArray=new zf,this.indexArray2=new Vf,this.programConfigurations=new Fo(c.layers,c.zoom),this.segments=new jt,this.segments2=new jt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};Zf.prototype.populate=function(c,d,g){this.hasPattern=Jv("fill",this.layers,d);for(var A=this.layers[0].layout.get("fill-sort-key"),P=[],B=0,j=c;B<j.length;B+=1){var q=j[B],ge=q.feature,De=q.id,We=q.index,tt=q.sourceLayerIndex,xt=this.layers[0]._featureFilter.needGeometry,Lt=yl(ge,xt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Lt,g)){var fn=A?A.evaluate(Lt,{},g,d.availableImages):void 0,_n={id:De,properties:ge.properties,type:ge.type,sourceLayerIndex:tt,index:We,geometry:xt?Lt.geometry:Ss(ge),patterns:{},sortKey:fn};P.push(_n)}}A&&P.sort(function(Pi,Yi){return Pi.sortKey-Yi.sortKey});for(var Hn=0,In=P;Hn<In.length;Hn+=1){var cr=In[Hn],gr=cr.geometry,Lr=cr.index,Nr=cr.sourceLayerIndex;if(this.hasPattern){var Gr=L0("fill",this.layers,cr,this.zoom,d);this.patternFeatures.push(Gr)}else this.addFeature(cr,gr,Lr,g,{});d.featureIndex.insert(c[Lr].feature,gr,Lr,Nr,this.index)}},Zf.prototype.update=function(c,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,g)},Zf.prototype.addFeatures=function(c,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},Zf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zf.prototype.upload=function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,e_),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0},Zf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Zf.prototype.addFeature=function(c,d,g,A,P){for(var B=0,j=Dh(d,500);B<j.length;B+=1){for(var q=j[B],ge=0,De=0,We=q;De<We.length;De+=1)ge+=We[De].length;for(var tt=this.segments.prepareSegment(ge,this.layoutVertexArray,this.indexArray),xt=tt.vertexLength,Lt=[],fn=[],_n=0,Hn=q;_n<Hn.length;_n+=1){var In=Hn[_n];if(In.length!==0){In!==q[0]&&fn.push(Lt.length/2);var cr=this.segments2.prepareSegment(In.length,this.layoutVertexArray,this.indexArray2),gr=cr.vertexLength;this.layoutVertexArray.emplaceBack(In[0].x,In[0].y),this.indexArray2.emplaceBack(gr+In.length-1,gr),Lt.push(In[0].x),Lt.push(In[0].y);for(var Lr=1;Lr<In.length;Lr++)this.layoutVertexArray.emplaceBack(In[Lr].x,In[Lr].y),this.indexArray2.emplaceBack(gr+Lr-1,gr+Lr),Lt.push(In[Lr].x),Lt.push(In[Lr].y);cr.vertexLength+=In.length,cr.primitiveLength+=In.length}}for(var Nr=Gm(Lt,fn),Gr=0;Gr<Nr.length;Gr+=3)this.indexArray.emplaceBack(xt+Nr[Gr],xt+Nr[Gr+1],xt+Nr[Gr+2]);tt.vertexLength+=ge,tt.primitiveLength+=Nr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,P,A)},fo("FillBucket",Zf,{omit:["layers","patternFeatures"]});var Wd=new hl({"fill-sort-key":new Eo(_t.layout_fill["fill-sort-key"])}),n_={paint:new hl({"fill-antialias":new Bo(_t.paint_fill["fill-antialias"]),"fill-opacity":new Eo(_t.paint_fill["fill-opacity"]),"fill-color":new Eo(_t.paint_fill["fill-color"]),"fill-outline-color":new Eo(_t.paint_fill["fill-outline-color"]),"fill-translate":new Bo(_t.paint_fill["fill-translate"]),"fill-translate-anchor":new Bo(_t.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jl(_t.paint_fill["fill-pattern"])}),layout:Wd},r_=function(c){function d(g){c.call(this,g,n_)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.recalculate=function(g,A){c.prototype.recalculate.call(this,g,A);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},d.prototype.createBucket=function(g){return new Zf(g)},d.prototype.queryRadius=function(){return Ll(this.paint.get("fill-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,q,ge){return sf(tu(g,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,ge),B)},d.prototype.isTileClipped=function(){return!0},d}(wu),em=gc([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Vg=od;function od(c,d,g,A,P){this.properties={},this.extent=g,this.type=0,this._pbf=c,this._geometry=-1,this._keys=A,this._values=P,c.readFields(i_,this,d)}function i_(c,d,g){c==1?d.id=g.readVarint():c==2?function(A,P){for(var B=A.readVarint()+A.pos;A.pos<B;){var j=P._keys[A.readVarint()],q=P._values[A.readVarint()];P.properties[j]=q}}(g,d):c==3?d.type=g.readVarint():c==4&&(d._geometry=g.pos)}function lh(c){for(var d,g,A=0,P=0,B=c.length,j=B-1;P<B;j=P++)A+=((g=c[j]).x-(d=c[P]).x)*(d.y+g.y);return A}od.types=["Unknown","Point","LineString","Polygon"],od.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var d,g=c.readVarint()+c.pos,A=1,P=0,B=0,j=0,q=[];c.pos<g;){if(P<=0){var ge=c.readVarint();A=7&ge,P=ge>>3}if(P--,A===1||A===2)B+=c.readSVarint(),j+=c.readSVarint(),A===1&&(d&&q.push(d),d=[]),d.push(new ae(B,j));else{if(A!==7)throw new Error("unknown command "+A);d&&d.push(d[0].clone())}}return d&&q.push(d),q},od.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var d=c.readVarint()+c.pos,g=1,A=0,P=0,B=0,j=1/0,q=-1/0,ge=1/0,De=-1/0;c.pos<d;){if(A<=0){var We=c.readVarint();g=7&We,A=We>>3}if(A--,g===1||g===2)(P+=c.readSVarint())<j&&(j=P),P>q&&(q=P),(B+=c.readSVarint())<ge&&(ge=B),B>De&&(De=B);else if(g!==7)throw new Error("unknown command "+g)}return[j,ge,q,De]},od.prototype.toGeoJSON=function(c,d,g){var A,P,B=this.extent*Math.pow(2,g),j=this.extent*c,q=this.extent*d,ge=this.loadGeometry(),De=od.types[this.type];function We(Lt){for(var fn=0;fn<Lt.length;fn++){var _n=Lt[fn];Lt[fn]=[360*(_n.x+j)/B-180,360/Math.PI*Math.atan(Math.exp((180-360*(_n.y+q)/B)*Math.PI/180))-90]}}switch(this.type){case 1:var tt=[];for(A=0;A<ge.length;A++)tt[A]=ge[A][0];We(ge=tt);break;case 2:for(A=0;A<ge.length;A++)We(ge[A]);break;case 3:for(ge=function(Lt){var fn=Lt.length;if(fn<=1)return[Lt];for(var _n,Hn,In=[],cr=0;cr<fn;cr++){var gr=lh(Lt[cr]);gr!==0&&(Hn===void 0&&(Hn=gr<0),Hn===gr<0?(_n&&In.push(_n),_n=[Lt[cr]]):_n.push(Lt[cr]))}return _n&&In.push(_n),In}(ge),A=0;A<ge.length;A++)for(P=0;P<ge[A].length;P++)We(ge[A][P])}ge.length===1?ge=ge[0]:De="Multi"+De;var xt={type:"Feature",geometry:{type:De,coordinates:ge},properties:this.properties};return"id"in this&&(xt.id=this.id),xt};var hv=t0;function t0(c,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(_p,this,d),this.length=this._features.length}function _p(c,d,g){c===15?d.version=g.readVarint():c===1?d.name=g.readString():c===5?d.extent=g.readVarint():c===2?d._features.push(g.pos):c===3?d._keys.push(g.readString()):c===4&&d._values.push(function(A){for(var P=null,B=A.readVarint()+A.pos;A.pos<B;){var j=A.readVarint()>>3;P=j===1?A.readString():j===2?A.readFloat():j===3?A.readDouble():j===4?A.readVarint64():j===5?A.readVarint():j===6?A.readSVarint():j===7?A.readBoolean():null}return P}(g))}function Hg(c,d,g){if(c===3){var A=new hv(g,g.readVarint()+g.pos);A.length&&(d[A.name]=A)}}t0.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var d=this._pbf.readVarint()+this._pbf.pos;return new Vg(this._pbf,d,this.extent,this._keys,this._values)};var bp={VectorTile:function(c,d){this.layers=c.readFields(Hg,{},d)},VectorTileFeature:Vg,VectorTileLayer:hv},tm=bp.VectorTileFeature.types,D0=Math.pow(2,13);function Ru(c,d,g,A,P,B,j,q){c.emplaceBack(d,g,2*Math.floor(A*D0)+j,P*D0*2,B*D0*2,Math.round(q))}var mu=function(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Ph,this.indexArray=new zf,this.programConfigurations=new Fo(c.layers,c.zoom),this.segments=new jt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function yc(c,d){return c.x===d.x&&(c.x<0||c.x>8192)||c.y===d.y&&(c.y<0||c.y>8192)}mu.prototype.populate=function(c,d,g){this.features=[],this.hasPattern=Jv("fill-extrusion",this.layers,d);for(var A=0,P=c;A<P.length;A+=1){var B=P[A],j=B.feature,q=B.id,ge=B.index,De=B.sourceLayerIndex,We=this.layers[0]._featureFilter.needGeometry,tt=yl(j,We);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),tt,g)){var xt={id:q,sourceLayerIndex:De,index:ge,geometry:We?tt.geometry:Ss(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(L0("fill-extrusion",this.layers,xt,this.zoom,d)):this.addFeature(xt,xt.geometry,ge,g,{}),d.featureIndex.insert(j,xt.geometry,ge,De,this.index,!0)}}},mu.prototype.addFeatures=function(c,d,g){for(var A=0,P=this.features;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},mu.prototype.update=function(c,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,g)},mu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mu.prototype.upload=function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,em),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0},mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mu.prototype.addFeature=function(c,d,g,A,P){for(var B=0,j=Dh(d,500);B<j.length;B+=1){for(var q=j[B],ge=0,De=0,We=q;De<We.length;De+=1)ge+=We[De].length;for(var tt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),xt=0,Lt=q;xt<Lt.length;xt+=1){var fn=Lt[xt];if(fn.length!==0&&!((Ya=fn).every(function(jo){return jo.x<0})||Ya.every(function(jo){return jo.x>8192})||Ya.every(function(jo){return jo.y<0})||Ya.every(function(jo){return jo.y>8192})))for(var _n=0,Hn=0;Hn<fn.length;Hn++){var In=fn[Hn];if(Hn>=1){var cr=fn[Hn-1];if(!yc(In,cr)){tt.vertexLength+4>jt.MAX_VERTEX_ARRAY_LENGTH&&(tt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gr=In.sub(cr)._perp()._unit(),Lr=cr.dist(In);_n+Lr>32768&&(_n=0),Ru(this.layoutVertexArray,In.x,In.y,gr.x,gr.y,0,0,_n),Ru(this.layoutVertexArray,In.x,In.y,gr.x,gr.y,0,1,_n),Ru(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,0,_n+=Lr),Ru(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,1,_n);var Nr=tt.vertexLength;this.indexArray.emplaceBack(Nr,Nr+2,Nr+1),this.indexArray.emplaceBack(Nr+1,Nr+2,Nr+3),tt.vertexLength+=4,tt.primitiveLength+=2}}}}if(tt.vertexLength+ge>jt.MAX_VERTEX_ARRAY_LENGTH&&(tt=this.segments.prepareSegment(ge,this.layoutVertexArray,this.indexArray)),tm[c.type]==="Polygon"){for(var Gr=[],Pi=[],Yi=tt.vertexLength,Do=0,ho=q;Do<ho.length;Do+=1){var $o=ho[Do];if($o.length!==0){$o!==q[0]&&Pi.push(Gr.length/2);for(var po=0;po<$o.length;po++){var ja=$o[po];Ru(this.layoutVertexArray,ja.x,ja.y,0,0,1,1,0),Gr.push(ja.x),Gr.push(ja.y)}}}for(var ua=Gm(Gr,Pi),Ao=0;Ao<ua.length;Ao+=3)this.indexArray.emplaceBack(Yi+ua[Ao],Yi+ua[Ao+2],Yi+ua[Ao+1]);tt.primitiveLength+=ua.length/3,tt.vertexLength+=ge}}var Ya;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,P,A)},fo("FillExtrusionBucket",mu,{omit:["layers","features"]});var cf={paint:new hl({"fill-extrusion-opacity":new Bo(_t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Eo(_t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bo(_t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bo(_t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jl(_t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Eo(_t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Eo(_t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bo(_t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Mu=function(c){function d(g){c.call(this,g,cf)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.createBucket=function(g){return new mu(g)},d.prototype.queryRadius=function(){return Ll(this.paint.get("fill-extrusion-translate"))},d.prototype.is3D=function(){return!0},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,q,ge,De){var We=tu(g,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,ge),tt=this.paint.get("fill-extrusion-height").evaluate(A,P),xt=this.paint.get("fill-extrusion-base").evaluate(A,P),Lt=function(_n,Hn,In,cr){for(var gr=[],Lr=0,Nr=_n;Lr<Nr.length;Lr+=1){var Gr=Nr[Lr],Pi=[Gr.x,Gr.y,0,1];sh(Pi,Pi,Hn),gr.push(new ae(Pi[0]/Pi[3],Pi[1]/Pi[3]))}return gr}(We,De),fn=function(_n,Hn,In,cr){for(var gr=[],Lr=[],Nr=cr[8]*Hn,Gr=cr[9]*Hn,Pi=cr[10]*Hn,Yi=cr[11]*Hn,Do=cr[8]*In,ho=cr[9]*In,$o=cr[10]*In,po=cr[11]*In,ja=0,ua=_n;ja<ua.length;ja+=1){for(var Ao=[],Ya=[],jo=0,qa=ua[ja];jo<qa.length;jo+=1){var Vo=qa[jo],Is=Vo.x,il=Vo.y,Xl=cr[0]*Is+cr[4]*il+cr[12],Nl=cr[1]*Is+cr[5]*il+cr[13],wl=cr[2]*Is+cr[6]*il+cr[14],rc=cr[3]*Is+cr[7]*il+cr[15],fc=wl+Pi,_c=rc+Yi,Wu=Xl+Do,Lc=Nl+ho,Gu=wl+$o,$l=rc+po,au=new ae((Xl+Nr)/_c,(Nl+Gr)/_c);au.z=fc/_c,Ao.push(au);var Qa=new ae(Wu/$l,Lc/$l);Qa.z=Gu/$l,Ya.push(Qa)}gr.push(Ao),Lr.push(Ya)}return[gr,Lr]}(B,xt,tt,De);return function(_n,Hn,In){var cr=1/0;sf(In,Hn)&&(cr=N0(In,Hn[0]));for(var gr=0;gr<Hn.length;gr++)for(var Lr=Hn[gr],Nr=_n[gr],Gr=0;Gr<Lr.length-1;Gr++){var Pi=Lr[Gr],Yi=[Pi,Lr[Gr+1],Nr[Gr+1],Nr[Gr],Pi];Hf(In,Yi)&&(cr=Math.min(cr,N0(In,Yi)))}return cr!==1/0&&cr}(fn[0],fn[1],Lt)},d}(wu);function Ks(c,d){return c.x*d.x+c.y*d.y}function N0(c,d){if(c.length===1){for(var g,A=0,P=d[A++];!g||P.equals(g);)if(!(g=d[A++]))return 1/0;for(;A<d.length;A++){var B=d[A],j=c[0],q=g.sub(P),ge=B.sub(P),De=j.sub(P),We=Ks(q,q),tt=Ks(q,ge),xt=Ks(ge,ge),Lt=Ks(De,q),fn=Ks(De,ge),_n=We*xt-tt*tt,Hn=(xt*Lt-tt*fn)/_n,In=(We*fn-tt*Lt)/_n,cr=P.z*(1-Hn-In)+g.z*Hn+B.z*In;if(isFinite(cr))return cr}return 1/0}for(var gr=1/0,Lr=0,Nr=d;Lr<Nr.length;Lr+=1)gr=Math.min(gr,Nr[Lr].z);return gr}var Wg=gc([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,o_=gc([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,dv=bp.VectorTileFeature.types,Km=Math.cos(Math.PI/180*37.5),nm=Math.pow(2,14)/.5,Pu=function(c){var d=this;this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(function(g){return g.id}),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(g){d.gradients[g.id]={}}),this.layoutVertexArray=new eu,this.layoutVertexArray2=new mp,this.indexArray=new zf,this.programConfigurations=new Fo(c.layers,c.zoom),this.segments=new jt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(g){return g.isStateDependent()}).map(function(g){return g.id})};Pu.prototype.populate=function(c,d,g){this.hasPattern=Jv("line",this.layers,d);for(var A=this.layers[0].layout.get("line-sort-key"),P=[],B=0,j=c;B<j.length;B+=1){var q=j[B],ge=q.feature,De=q.id,We=q.index,tt=q.sourceLayerIndex,xt=this.layers[0]._featureFilter.needGeometry,Lt=yl(ge,xt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Lt,g)){var fn=A?A.evaluate(Lt,{},g):void 0,_n={id:De,properties:ge.properties,type:ge.type,sourceLayerIndex:tt,index:We,geometry:xt?Lt.geometry:Ss(ge),patterns:{},sortKey:fn};P.push(_n)}}A&&P.sort(function(Pi,Yi){return Pi.sortKey-Yi.sortKey});for(var Hn=0,In=P;Hn<In.length;Hn+=1){var cr=In[Hn],gr=cr.geometry,Lr=cr.index,Nr=cr.sourceLayerIndex;if(this.hasPattern){var Gr=L0("line",this.layers,cr,this.zoom,d);this.patternFeatures.push(Gr)}else this.addFeature(cr,gr,Lr,g,{});d.featureIndex.insert(c[Lr].feature,gr,Lr,Nr,this.index)}},Pu.prototype.update=function(c,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,d,this.stateDependentLayers,g)},Pu.prototype.addFeatures=function(c,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},Pu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pu.prototype.upload=function(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,o_)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Wg),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0},Pu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pu.prototype.lineFeatureClips=function(c){if(c.properties&&c.properties.hasOwnProperty("mapbox_clip_start")&&c.properties.hasOwnProperty("mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}},Pu.prototype.addFeature=function(c,d,g,A,P){var B=this.layers[0].layout,j=B.get("line-join").evaluate(c,{}),q=B.get("line-cap"),ge=B.get("line-miter-limit"),De=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(var We=0,tt=d;We<tt.length;We+=1)this.addLine(tt[We],c,j,q,ge,De);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,P,A)},Pu.prototype.addLine=function(c,d,g,A,P,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<c.length-1;j++)this.totalDistance+=c[j].dist(c[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var q=dv[d.type]==="Polygon",ge=c.length;ge>=2&&c[ge-1].equals(c[ge-2]);)ge--;for(var De=0;De<ge-1&&c[De].equals(c[De+1]);)De++;if(!(ge<(q?3:2))){g==="bevel"&&(P=1.05);var We,tt=this.overscaling<=16?122880/(512*this.overscaling):0,xt=this.segments.prepareSegment(10*ge,this.layoutVertexArray,this.indexArray),Lt=void 0,fn=void 0,_n=void 0,Hn=void 0;this.e1=this.e2=-1,q&&(Hn=c[De].sub(We=c[ge-2])._unit()._perp());for(var In=De;In<ge;In++)if(!(fn=In===ge-1?q?c[De+1]:void 0:c[In+1])||!c[In].equals(fn)){Hn&&(_n=Hn),We&&(Lt=We),We=c[In],Hn=fn?fn.sub(We)._unit()._perp():_n;var cr=(_n=_n||Hn).add(Hn);cr.x===0&&cr.y===0||cr._unit();var gr=_n.x*Hn.x+_n.y*Hn.y,Lr=cr.x*Hn.x+cr.y*Hn.y,Nr=Lr!==0?1/Lr:1/0,Gr=2*Math.sqrt(2-2*Lr),Pi=Lr<Km&&Lt&&fn,Yi=_n.x*Hn.y-_n.y*Hn.x>0;if(Pi&&In>De){var Do=We.dist(Lt);if(Do>2*tt){var ho=We.sub(We.sub(Lt)._mult(tt/Do)._round());this.updateDistance(Lt,ho),this.addCurrentVertex(ho,_n,0,0,xt),Lt=ho}}var $o=Lt&&fn,po=$o?g:q?"butt":A;if($o&&po==="round"&&(Nr<B?po="miter":Nr<=2&&(po="fakeround")),po==="miter"&&Nr>P&&(po="bevel"),po==="bevel"&&(Nr>2&&(po="flipbevel"),Nr<P&&(po="miter")),Lt&&this.updateDistance(Lt,We),po==="miter")cr._mult(Nr),this.addCurrentVertex(We,cr,0,0,xt);else if(po==="flipbevel"){if(Nr>100)cr=Hn.mult(-1);else{var ja=Nr*_n.add(Hn).mag()/_n.sub(Hn).mag();cr._perp()._mult(ja*(Yi?-1:1))}this.addCurrentVertex(We,cr,0,0,xt),this.addCurrentVertex(We,cr.mult(-1),0,0,xt)}else if(po==="bevel"||po==="fakeround"){var ua=-Math.sqrt(Nr*Nr-1),Ao=Yi?ua:0,Ya=Yi?0:ua;if(Lt&&this.addCurrentVertex(We,_n,Ao,Ya,xt),po==="fakeround")for(var jo=Math.round(180*Gr/Math.PI/20),qa=1;qa<jo;qa++){var Vo=qa/jo;if(Vo!==.5){var Is=Vo-.5;Vo+=Vo*Is*(Vo-1)*((1.0904+gr*(gr*(3.55645-1.43519*gr)-3.2452))*Is*Is+(.848013+gr*(.215638*gr-1.06021)))}var il=Hn.sub(_n)._mult(Vo)._add(_n)._unit()._mult(Yi?-1:1);this.addHalfVertex(We,il.x,il.y,!1,Yi,0,xt)}fn&&this.addCurrentVertex(We,Hn,-Ao,-Ya,xt)}else if(po==="butt")this.addCurrentVertex(We,cr,0,0,xt);else if(po==="square"){var Xl=Lt?1:-1;this.addCurrentVertex(We,cr,Xl,Xl,xt)}else po==="round"&&(Lt&&(this.addCurrentVertex(We,_n,0,0,xt),this.addCurrentVertex(We,_n,1,1,xt,!0)),fn&&(this.addCurrentVertex(We,Hn,-1,-1,xt,!0),this.addCurrentVertex(We,Hn,0,0,xt)));if(Pi&&In<ge-1){var Nl=We.dist(fn);if(Nl>2*tt){var wl=We.add(fn.sub(We)._mult(tt/Nl)._round());this.updateDistance(We,wl),this.addCurrentVertex(wl,Hn,0,0,xt),We=wl}}}}},Pu.prototype.addCurrentVertex=function(c,d,g,A,P,B){B===void 0&&(B=!1);var j=d.y*A-d.x,q=-d.y-d.x*A;this.addHalfVertex(c,d.x+d.y*g,d.y-d.x*g,B,!1,g,P),this.addHalfVertex(c,j,q,B,!0,-A,P),this.distance>nm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(c,d,g,A,P,B))},Pu.prototype.addHalfVertex=function(c,d,g,A,P,B,j){var q=.5*(this.lineClips?this.scaledDistance*(nm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c.x<<1)+(A?1:0),(c.y<<1)+(P?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(B===0?0:B<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var ge=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ge),j.primitiveLength++),P?this.e2=ge:this.e1=ge},Pu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Pu.prototype.updateDistance=function(c,d){this.distance+=c.dist(d),this.updateScaledDistance()},fo("LineBucket",Pu,{omit:["layers","patternFeatures"]});var rm=new hl({"line-cap":new Bo(_t.layout_line["line-cap"]),"line-join":new Eo(_t.layout_line["line-join"]),"line-miter-limit":new Bo(_t.layout_line["line-miter-limit"]),"line-round-limit":new Bo(_t.layout_line["line-round-limit"]),"line-sort-key":new Eo(_t.layout_line["line-sort-key"])}),xp={paint:new hl({"line-opacity":new Eo(_t.paint_line["line-opacity"]),"line-color":new Eo(_t.paint_line["line-color"]),"line-translate":new Bo(_t.paint_line["line-translate"]),"line-translate-anchor":new Bo(_t.paint_line["line-translate-anchor"]),"line-width":new Eo(_t.paint_line["line-width"]),"line-gap-width":new Eo(_t.paint_line["line-gap-width"]),"line-offset":new Eo(_t.paint_line["line-offset"]),"line-blur":new Eo(_t.paint_line["line-blur"]),"line-dasharray":new Qc(_t.paint_line["line-dasharray"]),"line-pattern":new Jl(_t.paint_line["line-pattern"]),"line-gradient":new Jc(_t.paint_line["line-gradient"])}),layout:rm},qm=new(function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A){return A=new Sa(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),c.prototype.possiblyEvaluate.call(this,g,A)},d.prototype.evaluate=function(g,A,P,B){return A=Oe({},A,{zoom:Math.floor(A.zoom)}),c.prototype.evaluate.call(this,g,A,P,B)},d}(Eo))(xp.paint.properties["line-width"].specification);qm.useIntegerZoom=!0;var pv=function(c){function d(g){c.call(this,g,xp),this.gradientVersion=0}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof pc,this.gradientVersion=(this.gradientVersion+1)%Ge)},d.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},d.prototype.recalculate=function(g,A){c.prototype.recalculate.call(this,g,A),this.paint._values["line-floorwidth"]=qm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)},d.prototype.createBucket=function(g){return new Pu(g)},d.prototype.queryRadius=function(g){var A=g,P=Ep(Il("line-width",this,A),Il("line-gap-width",this,A)),B=Il("line-offset",this,A);return P/2+Math.abs(B)+Ll(this.paint.get("line-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,q,ge){var De=tu(g,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,ge),We=ge/2*Ep(this.paint.get("line-width").evaluate(A,P),this.paint.get("line-gap-width").evaluate(A,P)),tt=this.paint.get("line-offset").evaluate(A,P);return tt&&(B=function(xt,Lt){for(var fn=[],_n=new ae(0,0),Hn=0;Hn<xt.length;Hn++){for(var In=xt[Hn],cr=[],gr=0;gr<In.length;gr++){var Lr=In[gr],Nr=In[gr+1],Gr=gr===0?_n:Lr.sub(In[gr-1])._unit()._perp(),Pi=gr===In.length-1?_n:Nr.sub(Lr)._unit()._perp(),Yi=Gr._add(Pi)._unit();Yi._mult(1/(Yi.x*Pi.x+Yi.y*Pi.y)),cr.push(Yi._mult(Lt)._add(Lr))}fn.push(cr)}return fn}(B,tt*ge)),function(xt,Lt,fn){for(var _n=0;_n<Lt.length;_n++){var Hn=Lt[_n];if(xt.length>=3){for(var In=0;In<Hn.length;In++)if(ah(xt,Hn[In]))return!0}if(Hu(xt,Hn,fn))return!0}return!1}(De,B,We)},d.prototype.isTileClipped=function(){return!0},d}(wu);function Ep(c,d){return d>0?d+2*c:c}var Qm=gc([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a_=gc([{name:"a_projected_pos",components:3,type:"Float32"}],4),im=(gc([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),gc([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Gg=(gc([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),gc([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ue=gc([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Qt(c,d,g){return c.sections.forEach(function(A){A.text=function(P,B,j){var q=B.layout.get("text-transform").evaluate(j,{});return q==="uppercase"?P=P.toLocaleUpperCase():q==="lowercase"&&(P=P.toLocaleLowerCase()),ju.applyArabicShaping&&(P=ju.applyArabicShaping(P)),P}(A.text,d,g)}),c}gc([{name:"triangle",components:3,type:"Uint16"}]),gc([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gc([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gc([{type:"Float32",name:"offsetX"}]),gc([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ar=function(c,d,g,A,P){var B,j,q=8*P-A-1,ge=(1<<q)-1,De=ge>>1,We=-7,tt=g?P-1:0,xt=g?-1:1,Lt=c[d+tt];for(tt+=xt,B=Lt&(1<<-We)-1,Lt>>=-We,We+=q;We>0;B=256*B+c[d+tt],tt+=xt,We-=8);for(j=B&(1<<-We)-1,B>>=-We,We+=A;We>0;j=256*j+c[d+tt],tt+=xt,We-=8);if(B===0)B=1-De;else{if(B===ge)return j?NaN:1/0*(Lt?-1:1);j+=Math.pow(2,A),B-=De}return(Lt?-1:1)*j*Math.pow(2,B-A)},Xr=function(c,d,g,A,P,B){var j,q,ge,De=8*B-P-1,We=(1<<De)-1,tt=We>>1,xt=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Lt=A?0:B-1,fn=A?1:-1,_n=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(q=isNaN(d)?1:0,j=We):(j=Math.floor(Math.log(d)/Math.LN2),d*(ge=Math.pow(2,-j))<1&&(j--,ge*=2),(d+=j+tt>=1?xt/ge:xt*Math.pow(2,1-tt))*ge>=2&&(j++,ge/=2),j+tt>=We?(q=0,j=We):j+tt>=1?(q=(d*ge-1)*Math.pow(2,P),j+=tt):(q=d*Math.pow(2,tt-1)*Math.pow(2,P),j=0));P>=8;c[g+Lt]=255&q,Lt+=fn,q/=256,P-=8);for(j=j<<P|q,De+=P;De>0;c[g+Lt]=255&j,Lt+=fn,j/=256,De-=8);c[g+Lt-fn]|=128*_n},Or=mr;function mr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var Oi=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ci(c){return c.type===mr.Bytes?c.readVarint()+c.pos:c.pos+1}function Fi(c,d,g){return g?4294967296*d+(c>>>0):4294967296*(d>>>0)+(c>>>0)}function Ri(c,d,g){var A=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));g.realloc(A);for(var P=g.pos-1;P>=c;P--)g.buf[P+A]=g.buf[P]}function Ni(c,d){for(var g=0;g<c.length;g++)d.writeVarint(c[g])}function Xi(c,d){for(var g=0;g<c.length;g++)d.writeSVarint(c[g])}function pi(c,d){for(var g=0;g<c.length;g++)d.writeFloat(c[g])}function Ui(c,d){for(var g=0;g<c.length;g++)d.writeDouble(c[g])}function ur(c,d){for(var g=0;g<c.length;g++)d.writeBoolean(c[g])}function kr(c,d){for(var g=0;g<c.length;g++)d.writeFixed32(c[g])}function yi(c,d){for(var g=0;g<c.length;g++)d.writeSFixed32(c[g])}function io(c,d){for(var g=0;g<c.length;g++)d.writeFixed64(c[g])}function oi(c,d){for(var g=0;g<c.length;g++)d.writeSFixed64(c[g])}function eo(c,d){return(c[d]|c[d+1]<<8|c[d+2]<<16)+16777216*c[d+3]}function Ei(c,d,g){c[g]=d,c[g+1]=d>>>8,c[g+2]=d>>>16,c[g+3]=d>>>24}function to(c,d){return(c[d]|c[d+1]<<8|c[d+2]<<16)+(c[d+3]<<24)}function li(c,d,g){c===1&&g.readMessage(di,d)}function di(c,d,g){if(c===3){var A=g.readMessage(zo,{}),P=A.width,B=A.height,j=A.left,q=A.top,ge=A.advance;d.push({id:A.id,bitmap:new Vd({width:P+6,height:B+6},A.bitmap),metrics:{width:P,height:B,left:j,top:q,advance:ge}})}}function zo(c,d,g){c===1?d.id=g.readVarint():c===2?d.bitmap=g.readBytes():c===3?d.width=g.readVarint():c===4?d.height=g.readVarint():c===5?d.left=g.readSVarint():c===6?d.top=g.readSVarint():c===7&&(d.advance=g.readVarint())}function pa(c){for(var d=0,g=0,A=0,P=c;A<P.length;A+=1){var B=P[A];d+=B.w*B.h,g=Math.max(g,B.w)}c.sort(function(_n,Hn){return Hn.h-_n.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),g),h:1/0}],q=0,ge=0,De=0,We=c;De<We.length;De+=1)for(var tt=We[De],xt=j.length-1;xt>=0;xt--){var Lt=j[xt];if(!(tt.w>Lt.w||tt.h>Lt.h)){if(tt.x=Lt.x,tt.y=Lt.y,ge=Math.max(ge,tt.y+tt.h),q=Math.max(q,tt.x+tt.w),tt.w===Lt.w&&tt.h===Lt.h){var fn=j.pop();xt<j.length&&(j[xt]=fn)}else tt.h===Lt.h?(Lt.x+=tt.w,Lt.w-=tt.w):tt.w===Lt.w?(Lt.y+=tt.h,Lt.h-=tt.h):(j.push({x:Lt.x+tt.w,y:Lt.y,w:Lt.w-tt.w,h:tt.h}),Lt.y+=tt.h,Lt.h-=tt.h);break}}return{w:q,h:ge,fill:d/(q*ge)||0}}mr.prototype={destroy:function(){this.buf=null},readFields:function(c,d,g){for(g=g||this.length;this.pos<g;){var A=this.readVarint(),P=A>>3,B=this.pos;this.type=7&A,c(P,d,this),this.pos===B&&this.skip(A)}return d},readMessage:function(c,d){return this.readFields(c,d,this.readVarint()+this.pos)},readFixed32:function(){var c=eo(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=to(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=eo(this.buf,this.pos)+4294967296*eo(this.buf,this.pos+4);return this.pos+=8,c},readSFixed64:function(){var c=eo(this.buf,this.pos)+4294967296*to(this.buf,this.pos+4);return this.pos+=8,c},readFloat:function(){var c=Ar(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Ar(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var d,g,A=this.buf;return d=127&(g=A[this.pos++]),g<128?d:(d|=(127&(g=A[this.pos++]))<<7,g<128?d:(d|=(127&(g=A[this.pos++]))<<14,g<128?d:(d|=(127&(g=A[this.pos++]))<<21,g<128?d:function(P,B,j){var q,ge,De=j.buf;if(q=(112&(ge=De[j.pos++]))>>4,ge<128||(q|=(127&(ge=De[j.pos++]))<<3,ge<128)||(q|=(127&(ge=De[j.pos++]))<<10,ge<128)||(q|=(127&(ge=De[j.pos++]))<<17,ge<128)||(q|=(127&(ge=De[j.pos++]))<<24,ge<128)||(q|=(1&(ge=De[j.pos++]))<<31,ge<128))return Fi(P,q,B);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(g=A[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,d=this.pos;return this.pos=c,c-d>=12&&Oi?function(g,A,P){return Oi.decode(g.subarray(A,P))}(this.buf,d,c):function(g,A,P){for(var B="",j=A;j<P;){var q,ge,De,We=g[j],tt=null,xt=We>239?4:We>223?3:We>191?2:1;if(j+xt>P)break;xt===1?We<128&&(tt=We):xt===2?(192&(q=g[j+1]))==128&&(tt=(31&We)<<6|63&q)<=127&&(tt=null):xt===3?(ge=g[j+2],(192&(q=g[j+1]))==128&&(192&ge)==128&&((tt=(15&We)<<12|(63&q)<<6|63&ge)<=2047||tt>=55296&&tt<=57343)&&(tt=null)):xt===4&&(ge=g[j+2],De=g[j+3],(192&(q=g[j+1]))==128&&(192&ge)==128&&(192&De)==128&&((tt=(15&We)<<18|(63&q)<<12|(63&ge)<<6|63&De)<=65535||tt>=1114112)&&(tt=null)),tt===null?(tt=65533,xt=1):tt>65535&&(tt-=65536,B+=String.fromCharCode(tt>>>10&1023|55296),tt=56320|1023&tt),B+=String.fromCharCode(tt),j+=xt}return B}(this.buf,d,c)},readBytes:function(){var c=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,c);return this.pos=c,d},readPackedVarint:function(c,d){if(this.type!==mr.Bytes)return c.push(this.readVarint(d));var g=ci(this);for(c=c||[];this.pos<g;)c.push(this.readVarint(d));return c},readPackedSVarint:function(c){if(this.type!==mr.Bytes)return c.push(this.readSVarint());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==mr.Bytes)return c.push(this.readBoolean());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==mr.Bytes)return c.push(this.readFloat());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==mr.Bytes)return c.push(this.readDouble());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==mr.Bytes)return c.push(this.readFixed32());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==mr.Bytes)return c.push(this.readSFixed32());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==mr.Bytes)return c.push(this.readFixed64());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==mr.Bytes)return c.push(this.readSFixed64());var d=ci(this);for(c=c||[];this.pos<d;)c.push(this.readSFixed64());return c},skip:function(c){var d=7&c;if(d===mr.Varint)for(;this.buf[this.pos++]>127;);else if(d===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(d===mr.Fixed32)this.pos+=4;else{if(d!==mr.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(c,d){this.writeVarint(c<<3|d)},realloc:function(c){for(var d=this.length||16;d<this.pos+c;)d*=2;if(d!==this.length){var g=new Uint8Array(d);g.set(this.buf),this.buf=g,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Ei(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Ei(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Ei(this.buf,-1&c,this.pos),Ei(this.buf,Math.floor(c*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Ei(this.buf,-1&c,this.pos),Ei(this.buf,Math.floor(c*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(d,g){var A,P;if(d>=0?(A=d%4294967296|0,P=d/4294967296|0):(P=~(-d/4294967296),4294967295^(A=~(-d%4294967296))?A=A+1|0:(A=0,P=P+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(B,j,q){q.buf[q.pos++]=127&B|128,B>>>=7,q.buf[q.pos++]=127&B|128,B>>>=7,q.buf[q.pos++]=127&B|128,B>>>=7,q.buf[q.pos++]=127&B|128,q.buf[q.pos]=127&(B>>>=7)}(A,0,g),function(B,j){var q=(7&B)<<4;j.buf[j.pos++]|=q|((B>>>=3)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B)))))}(P,g)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var d=this.pos;this.pos=function(A,P,B){for(var j,q,ge=0;ge<P.length;ge++){if((j=P.charCodeAt(ge))>55295&&j<57344){if(!q){j>56319||ge+1===P.length?(A[B++]=239,A[B++]=191,A[B++]=189):q=j;continue}if(j<56320){A[B++]=239,A[B++]=191,A[B++]=189,q=j;continue}j=q-55296<<10|j-56320|65536,q=null}else q&&(A[B++]=239,A[B++]=191,A[B++]=189,q=null);j<128?A[B++]=j:(j<2048?A[B++]=j>>6|192:(j<65536?A[B++]=j>>12|224:(A[B++]=j>>18|240,A[B++]=j>>12&63|128),A[B++]=j>>6&63|128),A[B++]=63&j|128)}return B}(this.buf,c,this.pos);var g=this.pos-d;g>=128&&Ri(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeFloat:function(c){this.realloc(4),Xr(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Xr(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var d=c.length;this.writeVarint(d),this.realloc(d);for(var g=0;g<d;g++)this.buf[this.pos++]=c[g]},writeRawMessage:function(c,d){this.pos++;var g=this.pos;c(d,this);var A=this.pos-g;A>=128&&Ri(g,A,this),this.pos=g-1,this.writeVarint(A),this.pos+=A},writeMessage:function(c,d,g){this.writeTag(c,mr.Bytes),this.writeRawMessage(d,g)},writePackedVarint:function(c,d){d.length&&this.writeMessage(c,Ni,d)},writePackedSVarint:function(c,d){d.length&&this.writeMessage(c,Xi,d)},writePackedBoolean:function(c,d){d.length&&this.writeMessage(c,ur,d)},writePackedFloat:function(c,d){d.length&&this.writeMessage(c,pi,d)},writePackedDouble:function(c,d){d.length&&this.writeMessage(c,Ui,d)},writePackedFixed32:function(c,d){d.length&&this.writeMessage(c,kr,d)},writePackedSFixed32:function(c,d){d.length&&this.writeMessage(c,yi,d)},writePackedFixed64:function(c,d){d.length&&this.writeMessage(c,io,d)},writePackedSFixed64:function(c,d){d.length&&this.writeMessage(c,oi,d)},writeBytesField:function(c,d){this.writeTag(c,mr.Bytes),this.writeBytes(d)},writeFixed32Field:function(c,d){this.writeTag(c,mr.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(c,d){this.writeTag(c,mr.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(c,d){this.writeTag(c,mr.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(c,d){this.writeTag(c,mr.Fixed64),this.writeSFixed64(d)},writeVarintField:function(c,d){this.writeTag(c,mr.Varint),this.writeVarint(d)},writeSVarintField:function(c,d){this.writeTag(c,mr.Varint),this.writeSVarint(d)},writeStringField:function(c,d){this.writeTag(c,mr.Bytes),this.writeString(d)},writeFloatField:function(c,d){this.writeTag(c,mr.Fixed32),this.writeFloat(d)},writeDoubleField:function(c,d){this.writeTag(c,mr.Fixed64),this.writeDouble(d)},writeBooleanField:function(c,d){this.writeVarintField(c,!!d)}};var qi=function(c,d){var g=d.pixelRatio,A=d.version,P=d.stretchX,B=d.stretchY,j=d.content;this.paddedRect=c,this.pixelRatio=g,this.stretchX=P,this.stretchY=B,this.content=j,this.version=A},Si={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Si.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Si.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Si.tlbr.get=function(){return this.tl.concat(this.br)},Si.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(qi.prototype,Si);var $r=function(c,d){var g={},A={};this.haveRenderCallbacks=[];var P=[];this.addImages(c,g,P),this.addImages(d,A,P);var B=pa(P),j=new Ou({width:B.w||1,height:B.h||1});for(var q in c){var ge=c[q],De=g[q].paddedRect;Ou.copy(ge.data,j,{x:0,y:0},{x:De.x+1,y:De.y+1},ge.data)}for(var We in d){var tt=d[We],xt=A[We].paddedRect,Lt=xt.x+1,fn=xt.y+1,_n=tt.data.width,Hn=tt.data.height;Ou.copy(tt.data,j,{x:0,y:0},{x:Lt,y:fn},tt.data),Ou.copy(tt.data,j,{x:0,y:Hn-1},{x:Lt,y:fn-1},{width:_n,height:1}),Ou.copy(tt.data,j,{x:0,y:0},{x:Lt,y:fn+Hn},{width:_n,height:1}),Ou.copy(tt.data,j,{x:_n-1,y:0},{x:Lt-1,y:fn},{width:1,height:Hn}),Ou.copy(tt.data,j,{x:0,y:0},{x:Lt+_n,y:fn},{width:1,height:Hn})}this.image=j,this.iconPositions=g,this.patternPositions=A};$r.prototype.addImages=function(c,d,g){for(var A in c){var P=c[A],B={x:0,y:0,w:P.data.width+2,h:P.data.height+2};g.push(B),d[A]=new qi(B,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(A)}},$r.prototype.patchUpdatedImages=function(c,d){for(var g in c.dispatchRenderCallbacks(this.haveRenderCallbacks),c.updatedImages)this.patchUpdatedImage(this.iconPositions[g],c.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],c.getImage(g),d)},$r.prototype.patchUpdatedImage=function(c,d,g){if(c&&d&&c.version!==d.version){c.version=d.version;var A=c.tl;g.update(d.data,void 0,{x:A[0],y:A[1]})}},fo("ImagePosition",qi),fo("ImageAtlas",$r);var ko={horizontal:1,vertical:2,horizontalOnly:3},Na=function(){this.scale=1,this.fontStack="",this.imageName=null};Na.forText=function(c,d){var g=new Na;return g.scale=c||1,g.fontStack=d,g},Na.forImage=function(c){var d=new Na;return d.imageName=c,d};var so=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function va(c,d,g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n){var Hn,In=so.fromFeature(c,P);tt===ko.vertical&&In.verticalizePunctuation();var cr=ju.processBidirectionalText,gr=ju.processStyledBidirectionalText;if(cr&&In.sections.length===1){Hn=[];for(var Lr=0,Nr=cr(In.toString(),Gl(In,De,B,d,A,Lt,fn));Lr<Nr.length;Lr+=1){var Gr=Nr[Lr],Pi=new so;Pi.text=Gr,Pi.sections=In.sections;for(var Yi=0;Yi<Gr.length;Yi++)Pi.sectionIndex.push(0);Hn.push(Pi)}}else if(gr){Hn=[];for(var Do=0,ho=gr(In.text,In.sectionIndex,Gl(In,De,B,d,A,Lt,fn));Do<ho.length;Do+=1){var $o=ho[Do],po=new so;po.text=$o[0],po.sectionIndex=$o[1],po.sections=In.sections,Hn.push(po)}}else Hn=function(Ao,Ya){for(var jo=[],qa=Ao.text,Vo=0,Is=0,il=Ya;Is<il.length;Is+=1){var Xl=il[Is];jo.push(Ao.substring(Vo,Xl)),Vo=Xl}return Vo<qa.length&&jo.push(Ao.substring(Vo,qa.length)),jo}(In,Gl(In,De,B,d,A,Lt,fn));var ja=[],ua={positionedLines:ja,text:In.toString(),top:We[1],bottom:We[1],left:We[0],right:We[0],writingMode:tt,iconsInText:!1,verticalizable:!1};return function(Ao,Ya,jo,qa,Vo,Is,il,Xl,Nl,wl,rc,fc){for(var _c=0,Wu=-17,Lc=0,Gu=0,$l=Xl==="right"?1:Xl==="left"?0:.5,au=0,Qa=0,el=Vo;Qa<el.length;Qa+=1){var $s=el[Qa];$s.trim();var xs=$s.getMaxScale(),Zu=24*(xs-1),gu={positionedGlyphs:[],lineOffset:0};Ao.positionedLines[au]=gu;var pl=gu.positionedGlyphs,hc=0;if($s.length()){for(var bc=0;bc<$s.length();bc++){var Ts=$s.getSection(bc),js=$s.getSectionIndex(bc),ch=$s.getCharCode(bc),Gd=0,vl=null,uh=null,Xu=null,Zd=24,Xf=!(Nl===ko.horizontal||!rc&&!Bd(ch)||rc&&(ha[ch]||(sd=ch,Zi.Arabic(sd)||Zi["Arabic Supplement"](sd)||Zi["Arabic Extended-A"](sd)||Zi["Arabic Presentation Forms-A"](sd)||Zi["Arabic Presentation Forms-B"](sd))));if(Ts.imageName){var Ap=qa[Ts.imageName];if(!Ap)continue;Xu=Ts.imageName,Ao.iconsInText=Ao.iconsInText||!0,uh=Ap.paddedRect;var Bh=Ap.displaySize;Ts.scale=24*Ts.scale/fc,Gd=Zu+(24-Bh[1]*Ts.scale),Zd=(vl={width:Bh[0],height:Bh[1],left:1,top:-3,advance:Xf?Bh[1]:Bh[0]}).advance;var Fh=Xf?Bh[0]*Ts.scale-24*xs:Bh[1]*Ts.scale-24*xs;Fh>0&&Fh>hc&&(hc=Fh)}else{var k0=jo[Ts.fontStack],$f=k0&&k0[ch];if($f&&$f.rect)uh=$f.rect,vl=$f.metrics;else{var sm=Ya[Ts.fontStack],$g=sm&&sm[ch];if(!$g)continue;vl=$g.metrics}Gd=24*(xs-Ts.scale)}Xf?(Ao.verticalizable=!0,pl.push({glyph:ch,imageName:Xu,x:_c,y:Wu+Gd,vertical:Xf,scale:Ts.scale,fontStack:Ts.fontStack,sectionIndex:js,metrics:vl,rect:uh}),_c+=Zd*Ts.scale+wl):(pl.push({glyph:ch,imageName:Xu,x:_c,y:Wu+Gd,vertical:Xf,scale:Ts.scale,fontStack:Ts.fontStack,sectionIndex:js,metrics:vl,rect:uh}),_c+=vl.advance*Ts.scale+wl)}pl.length!==0&&(Lc=Math.max(_c-wl,Lc),ie(pl,0,pl.length-1,$l,hc)),_c=0;var u_=Is*xs+hc;gu.lineOffset=Math.max(hc,Zu),Wu+=u_,Gu=Math.max(u_,Gu),++au}else Wu+=Is,++au}var sd,i0=Wu- -17,mv=qs(il),U0=mv.horizontalAlign,gv=mv.verticalAlign;(function(lm,f_,ig,o0,z0,cm,j0,um,h_){var yu,yv=(f_-ig)*z0;yu=cm!==j0?-um*o0- -17:(-o0*h_+.5)*j0;for(var fm=0,hm=lm;fm<hm.length;fm+=1)for(var Cp=0,Xd=hm[fm].positionedGlyphs;Cp<Xd.length;Cp+=1){var ld=Xd[Cp];ld.x+=yv,ld.y+=yu}})(Ao.positionedLines,$l,U0,gv,Lc,Gu,Is,i0,Vo.length),Ao.top+=-gv*i0,Ao.bottom=Ao.top+i0,Ao.left+=-U0*Lc,Ao.right=Ao.left+Lc}(ua,d,g,A,Hn,j,q,ge,tt,De,xt,_n),!function(Ao){for(var Ya=0,jo=Ao;Ya<jo.length;Ya+=1)if(jo[Ya].positionedGlyphs.length!==0)return!1;return!0}(ja)&&ua}so.fromFeature=function(c,d){for(var g=new so,A=0;A<c.sections.length;A++){var P=c.sections[A];P.image?g.addImageSection(P):g.addTextSection(P,d)}return g},so.prototype.length=function(){return this.text.length},so.prototype.getSection=function(c){return this.sections[this.sectionIndex[c]]},so.prototype.getSectionIndex=function(c){return this.sectionIndex[c]},so.prototype.getCharCode=function(c){return this.text.charCodeAt(c)},so.prototype.verticalizePunctuation=function(){this.text=function(c){for(var d="",g=0;g<c.length;g++){var A=c.charCodeAt(g+1)||null,P=c.charCodeAt(g-1)||null;d+=A&&Rh(A)&&!Rn[c[g+1]]||P&&Rh(P)&&!Rn[c[g-1]]||!Rn[c[g]]?c[g]:Rn[c[g]]}return d}(this.text)},so.prototype.trim=function(){for(var c=0,d=0;d<this.text.length&&ha[this.text.charCodeAt(d)];d++)c++;for(var g=this.text.length,A=this.text.length-1;A>=0&&A>=c&&ha[this.text.charCodeAt(A)];A--)g--;this.text=this.text.substring(c,g),this.sectionIndex=this.sectionIndex.slice(c,g)},so.prototype.substring=function(c,d){var g=new so;return g.text=this.text.substring(c,d),g.sectionIndex=this.sectionIndex.slice(c,d),g.sections=this.sections,g},so.prototype.toString=function(){return this.text},so.prototype.getMaxScale=function(){var c=this;return this.sectionIndex.reduce(function(d,g){return Math.max(d,c.sections[g].scale)},0)},so.prototype.addTextSection=function(c,d){this.text+=c.text,this.sections.push(Na.forText(c.scale,c.fontStack||d));for(var g=this.sections.length-1,A=0;A<c.text.length;++A)this.sectionIndex.push(g)},so.prototype.addImageSection=function(c){var d=c.image?c.image.name:"";if(d.length!==0){var g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Na.forImage(d)),this.sectionIndex.push(this.sections.length-1)):ut("Reached maximum number of images 6401")}else ut("Can't add FormattedSection with an empty image.")},so.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ha={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jo={};function gs(c,d,g,A,P,B){if(d.imageName){var j=A[d.imageName];return j?j.displaySize[0]*d.scale*24/B+P:0}var q=g[d.fontStack],ge=q&&q[c];return ge?ge.metrics.advance*d.scale+P:0}function Sl(c,d,g,A){var P=Math.pow(c-d,2);return A?c<d?P/2:2*P:P+Math.abs(g)*g}function Hc(c,d,g){var A=0;return c===10&&(A-=1e4),g&&(A+=150),c!==40&&c!==65288||(A+=50),d!==41&&d!==65289||(A+=50),A}function $a(c,d,g,A,P,B){for(var j=null,q=Sl(d,g,P,B),ge=0,De=A;ge<De.length;ge+=1){var We=De[ge],tt=Sl(d-We.x,g,P,B)+We.badness;tt<=q&&(j=We,q=tt)}return{index:c,x:d,priorBreak:j,badness:q}}function Gl(c,d,g,A,P,B,j){if(B!=="point")return[];if(!c)return[];for(var q,ge=[],De=function(Hn,In,cr,gr,Lr,Nr){for(var Gr=0,Pi=0;Pi<Hn.length();Pi++){var Yi=Hn.getSection(Pi);Gr+=gs(Hn.getCharCode(Pi),Yi,gr,Lr,In,Nr)}return Gr/Math.max(1,Math.ceil(Gr/cr))}(c,d,g,A,P,j),We=c.text.indexOf("\u200B")>=0,tt=0,xt=0;xt<c.length();xt++){var Lt=c.getSection(xt),fn=c.getCharCode(xt);if(ha[fn]||(tt+=gs(fn,Lt,A,P,d,j)),xt<c.length()-1){var _n=!((q=fn)<11904||!(Zi["Bopomofo Extended"](q)||Zi.Bopomofo(q)||Zi["CJK Compatibility Forms"](q)||Zi["CJK Compatibility Ideographs"](q)||Zi["CJK Compatibility"](q)||Zi["CJK Radicals Supplement"](q)||Zi["CJK Strokes"](q)||Zi["CJK Symbols and Punctuation"](q)||Zi["CJK Unified Ideographs Extension A"](q)||Zi["CJK Unified Ideographs"](q)||Zi["Enclosed CJK Letters and Months"](q)||Zi["Halfwidth and Fullwidth Forms"](q)||Zi.Hiragana(q)||Zi["Ideographic Description Characters"](q)||Zi["Kangxi Radicals"](q)||Zi["Katakana Phonetic Extensions"](q)||Zi.Katakana(q)||Zi["Vertical Forms"](q)||Zi["Yi Radicals"](q)||Zi["Yi Syllables"](q)));(Jo[fn]||_n||Lt.imageName)&&ge.push($a(xt+1,tt,De,ge,Hc(fn,c.getCharCode(xt+1),_n&&We),!1))}}return function Hn(In){return In?Hn(In.priorBreak).concat(In.index):[]}($a(c.length(),tt,De,ge,0,!0))}function qs(c){var d=.5,g=.5;switch(c){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:d,verticalAlign:g}}function ie(c,d,g,A,P){if(A||P)for(var B=c[g],j=(c[g].x+B.metrics.advance*B.scale)*A,q=d;q<=g;q++)c[q].x-=j,c[q].y+=P}function tc(c,d,g,A,P,B){var j,q=c.image;if(q.content){var ge=q.content,De=q.pixelRatio||1;j=[ge[0]/De,ge[1]/De,q.displaySize[0]-ge[2]/De,q.displaySize[1]-ge[3]/De]}var We,tt,xt,Lt,fn=d.left*B,_n=d.right*B;g==="width"||g==="both"?(Lt=P[0]+fn-A[3],tt=P[0]+_n+A[1]):tt=(Lt=P[0]+(fn+_n-q.displaySize[0])/2)+q.displaySize[0];var Hn=d.top*B,In=d.bottom*B;return g==="height"||g==="both"?(We=P[1]+Hn-A[0],xt=P[1]+In+A[2]):xt=(We=P[1]+(Hn+In-q.displaySize[1])/2)+q.displaySize[1],{image:q,top:We,right:tt,bottom:xt,left:Lt,collisionPadding:j}}Jo[10]=!0,Jo[32]=!0,Jo[38]=!0,Jo[40]=!0,Jo[41]=!0,Jo[43]=!0,Jo[45]=!0,Jo[47]=!0,Jo[173]=!0,Jo[183]=!0,Jo[8203]=!0,Jo[8208]=!0,Jo[8211]=!0,Jo[8231]=!0;var ss=function(c){function d(g,A,P,B){c.call(this,g,A),this.angle=P,B!==void 0&&(this.segment=B)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(ae);function fr(c,d){var g=d.expression;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new Sa(c+1))};if(g.kind==="source")return{kind:"source"};for(var A=g.zoomStops,P=g.interpolationType,B=0;B<A.length&&A[B]<=c;)B++;for(var j=B=Math.max(0,B-1);j<A.length&&A[j]<c+1;)j++;j=Math.min(A.length-1,j);var q=A[B],ge=A[j];return g.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:ge,interpolationType:P}:{kind:"camera",minZoom:q,maxZoom:ge,minSize:g.evaluate(new Sa(q)),maxSize:g.evaluate(new Sa(ge)),interpolationType:P}}function Kr(c,d,g){var A=d.uSize,P=g.lowerSize;return c.kind==="source"?P/128:c.kind==="composite"?Os(P/128,g.upperSize/128,d.uSizeT):A}function Dl(c,d){var g=0,A=0;if(c.kind==="constant")A=c.layoutSize;else if(c.kind!=="source"){var P=c.interpolationType,B=P?Le(Hl.interpolationFactor(P,d,c.minZoom,c.maxZoom),0,1):0;c.kind==="camera"?A=Os(c.minSize,c.maxSize,B):g=B}return{uSizeT:g,uSize:A}}fo("Anchor",ss);var Ca=Object.freeze({__proto__:null,getSizeData:fr,evaluateSizeForFeature:Kr,evaluateSizeForZoom:Dl,SIZE_PACK_FACTOR:128});function ru(c,d,g,A,P){if(d.segment===void 0)return!0;for(var B=d,j=d.segment+1,q=0;q>-g/2;){if(--j<0)return!1;q-=c[j].dist(B),B=c[j]}q+=c[j].dist(c[j+1]),j++;for(var ge=[],De=0;q<g/2;){var We=c[j],tt=c[j+1];if(!tt)return!1;var xt=c[j-1].angleTo(We)-We.angleTo(tt);for(xt=Math.abs((xt+3*Math.PI)%(2*Math.PI)-Math.PI),ge.push({distance:q,angleDelta:xt}),De+=xt;q-ge[0].distance>A;)De-=ge.shift().angleDelta;if(De>P)return!1;j++,q+=We.dist(tt)}return!0}function zs(c){for(var d=0,g=0;g<c.length-1;g++)d+=c[g].dist(c[g+1]);return d}function ea(c,d,g){return c?.6*d*g:0}function Ia(c,d){return Math.max(c?c.right-c.left:0,d?d.right-d.left:0)}function ys(c,d,g,A,P,B){for(var j=ea(g,P,B),q=Ia(g,A)*B,ge=0,De=zs(c)/2,We=0;We<c.length-1;We++){var tt=c[We],xt=c[We+1],Lt=tt.dist(xt);if(ge+Lt>De){var fn=(De-ge)/Lt,_n=Os(tt.x,xt.x,fn),Hn=Os(tt.y,xt.y,fn),In=new ss(_n,Hn,xt.angleTo(tt),We);return In._round(),!j||ru(c,In,q,j,d)?In:void 0}ge+=Lt}}function uc(c,d,g,A,P,B,j,q,ge){var De=ea(A,B,j),We=Ia(A,P),tt=We*j,xt=c[0].x===0||c[0].x===ge||c[0].y===0||c[0].y===ge;return d-tt<d/4&&(d=tt+d/4),function Lt(fn,_n,Hn,In,cr,gr,Lr,Nr,Gr){for(var Pi=gr/2,Yi=zs(fn),Do=0,ho=_n-Hn,$o=[],po=0;po<fn.length-1;po++){for(var ja=fn[po],ua=fn[po+1],Ao=ja.dist(ua),Ya=ua.angleTo(ja);ho+Hn<Do+Ao;){var jo=((ho+=Hn)-Do)/Ao,qa=Os(ja.x,ua.x,jo),Vo=Os(ja.y,ua.y,jo);if(qa>=0&&qa<Gr&&Vo>=0&&Vo<Gr&&ho-Pi>=0&&ho+Pi<=Yi){var Is=new ss(qa,Vo,Ya,po);Is._round(),In&&!ru(fn,Is,gr,In,cr)||$o.push(Is)}}Do+=Ao}return Nr||$o.length||Lr||($o=Lt(fn,Do/2,Hn,In,cr,gr,Lr,!0,Gr)),$o}(c,xt?d/2*q%d:(We/2+2*B)*j*q%d,d,De,g,tt,xt,!1,ge)}function Nh(c,d,g,A,P){for(var B=[],j=0;j<c.length;j++)for(var q=c[j],ge=void 0,De=0;De<q.length-1;De++){var We=q[De],tt=q[De+1];We.x<d&&tt.x<d||(We.x<d?We=new ae(d,We.y+(d-We.x)/(tt.x-We.x)*(tt.y-We.y))._round():tt.x<d&&(tt=new ae(d,We.y+(d-We.x)/(tt.x-We.x)*(tt.y-We.y))._round()),We.y<g&&tt.y<g||(We.y<g?We=new ae(We.x+(g-We.y)/(tt.y-We.y)*(tt.x-We.x),g)._round():tt.y<g&&(tt=new ae(We.x+(g-We.y)/(tt.y-We.y)*(tt.x-We.x),g)._round()),We.x>=A&&tt.x>=A||(We.x>=A?We=new ae(A,We.y+(A-We.x)/(tt.x-We.x)*(tt.y-We.y))._round():tt.x>=A&&(tt=new ae(A,We.y+(A-We.x)/(tt.x-We.x)*(tt.y-We.y))._round()),We.y>=P&&tt.y>=P||(We.y>=P?We=new ae(We.x+(P-We.y)/(tt.y-We.y)*(tt.x-We.x),P)._round():tt.y>=P&&(tt=new ae(We.x+(P-We.y)/(tt.y-We.y)*(tt.x-We.x),P)._round()),ge&&We.equals(ge[ge.length-1])||B.push(ge=[We]),ge.push(tt)))))}return B}function mn(c,d,g,A){var P=[],B=c.image,j=B.pixelRatio,q=B.paddedRect.w-2,ge=B.paddedRect.h-2,De=c.right-c.left,We=c.bottom-c.top,tt=B.stretchX||[[0,q]],xt=B.stretchY||[[0,ge]],Lt=function(qa,Vo){return qa+Vo[1]-Vo[0]},fn=tt.reduce(Lt,0),_n=xt.reduce(Lt,0),Hn=q-fn,In=ge-_n,cr=0,gr=fn,Lr=0,Nr=_n,Gr=0,Pi=Hn,Yi=0,Do=In;if(B.content&&A){var ho=B.content;cr=Pr(tt,0,ho[0]),Lr=Pr(xt,0,ho[1]),gr=Pr(tt,ho[0],ho[2]),Nr=Pr(xt,ho[1],ho[3]),Gr=ho[0]-cr,Yi=ho[1]-Lr,Pi=ho[2]-ho[0]-gr,Do=ho[3]-ho[1]-Nr}var $o=function(qa,Vo,Is,il){var Xl=vo(qa.stretch-cr,gr,De,c.left),Nl=za(qa.fixed-Gr,Pi,qa.stretch,fn),wl=vo(Vo.stretch-Lr,Nr,We,c.top),rc=za(Vo.fixed-Yi,Do,Vo.stretch,_n),fc=vo(Is.stretch-cr,gr,De,c.left),_c=za(Is.fixed-Gr,Pi,Is.stretch,fn),Wu=vo(il.stretch-Lr,Nr,We,c.top),Lc=za(il.fixed-Yi,Do,il.stretch,_n),Gu=new ae(Xl,wl),$l=new ae(fc,wl),au=new ae(fc,Wu),Qa=new ae(Xl,Wu),el=new ae(Nl/j,rc/j),$s=new ae(_c/j,Lc/j),xs=d*Math.PI/180;if(xs){var Zu=Math.sin(xs),gu=Math.cos(xs),pl=[gu,-Zu,Zu,gu];Gu._matMult(pl),$l._matMult(pl),Qa._matMult(pl),au._matMult(pl)}var hc=qa.stretch+qa.fixed,bc=Vo.stretch+Vo.fixed;return{tl:Gu,tr:$l,bl:Qa,br:au,tex:{x:B.paddedRect.x+1+hc,y:B.paddedRect.y+1+bc,w:Is.stretch+Is.fixed-hc,h:il.stretch+il.fixed-bc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:el,pixelOffsetBR:$s,minFontScaleX:Pi/j/De,minFontScaleY:Do/j/We,isSDF:g}};if(A&&(B.stretchX||B.stretchY))for(var po=xr(tt,Hn,fn),ja=xr(xt,In,_n),ua=0;ua<po.length-1;ua++)for(var Ao=po[ua],Ya=po[ua+1],jo=0;jo<ja.length-1;jo++)P.push($o(Ao,ja[jo],Ya,ja[jo+1]));else P.push($o({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:ge+1}));return P}function Pr(c,d,g){for(var A=0,P=0,B=c;P<B.length;P+=1){var j=B[P];A+=Math.max(d,Math.min(g,j[1]))-Math.max(d,Math.min(g,j[0]))}return A}function xr(c,d,g){for(var A=[{fixed:-1,stretch:0}],P=0,B=c;P<B.length;P+=1){var j=B[P],q=j[0],ge=j[1],De=A[A.length-1];A.push({fixed:q-De.stretch,stretch:De.stretch}),A.push({fixed:q-De.stretch,stretch:De.stretch+(ge-q)})}return A.push({fixed:d+1,stretch:g}),A}function vo(c,d,g,A){return c/d*g+A}function za(c,d,g,A){return c-d*g/A}var Ps=function(c,d,g,A,P,B,j,q,ge,De){if(this.boxStartIndex=c.length,ge){var We=B.top,tt=B.bottom,xt=B.collisionPadding;xt&&(We-=xt[1],tt+=xt[3]);var Lt=tt-We;Lt>0&&(Lt=Math.max(10,Lt),this.circleDiameter=Lt)}else{var fn=B.top*j-q,_n=B.bottom*j+q,Hn=B.left*j-q,In=B.right*j+q,cr=B.collisionPadding;if(cr&&(Hn-=cr[0]*j,fn-=cr[1]*j,In+=cr[2]*j,_n+=cr[3]*j),De){var gr=new ae(Hn,fn),Lr=new ae(In,fn),Nr=new ae(Hn,_n),Gr=new ae(In,_n),Pi=De*Math.PI/180;gr._rotate(Pi),Lr._rotate(Pi),Nr._rotate(Pi),Gr._rotate(Pi),Hn=Math.min(gr.x,Lr.x,Nr.x,Gr.x),In=Math.max(gr.x,Lr.x,Nr.x,Gr.x),fn=Math.min(gr.y,Lr.y,Nr.y,Gr.y),_n=Math.max(gr.y,Lr.y,Nr.y,Gr.y)}c.emplaceBack(d.x,d.y,Hn,fn,In,_n,g,A,P)}this.boxEndIndex=c.length},It=function(c,d){if(c===void 0&&(c=[]),d===void 0&&(d=tn),this.data=c,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function tn(c,d){return c<d?-1:c>d?1:0}function Mn(c,d,g){d===void 0&&(d=1),g===void 0&&(g=!1);for(var A=1/0,P=1/0,B=-1/0,j=-1/0,q=c[0],ge=0;ge<q.length;ge++){var De=q[ge];(!ge||De.x<A)&&(A=De.x),(!ge||De.y<P)&&(P=De.y),(!ge||De.x>B)&&(B=De.x),(!ge||De.y>j)&&(j=De.y)}var We=Math.min(B-A,j-P),tt=We/2,xt=new It([],Tr);if(We===0)return new ae(A,P);for(var Lt=A;Lt<B;Lt+=We)for(var fn=P;fn<j;fn+=We)xt.push(new br(Lt+tt,fn+tt,tt,c));for(var _n=function(cr){for(var gr=0,Lr=0,Nr=0,Gr=cr[0],Pi=0,Yi=Gr.length,Do=Yi-1;Pi<Yi;Do=Pi++){var ho=Gr[Pi],$o=Gr[Do],po=ho.x*$o.y-$o.x*ho.y;Lr+=(ho.x+$o.x)*po,Nr+=(ho.y+$o.y)*po,gr+=3*po}return new br(Lr/gr,Nr/gr,0,cr)}(c),Hn=xt.length;xt.length;){var In=xt.pop();(In.d>_n.d||!_n.d)&&(_n=In,g&&console.log("found best %d after %d probes",Math.round(1e4*In.d)/1e4,Hn)),In.max-_n.d<=d||(xt.push(new br(In.p.x-(tt=In.h/2),In.p.y-tt,tt,c)),xt.push(new br(In.p.x+tt,In.p.y-tt,tt,c)),xt.push(new br(In.p.x-tt,In.p.y+tt,tt,c)),xt.push(new br(In.p.x+tt,In.p.y+tt,tt,c)),Hn+=4)}return g&&(console.log("num probes: "+Hn),console.log("best distance: "+_n.d)),_n.p}function Tr(c,d){return d.max-c.max}function br(c,d,g,A){this.p=new ae(c,d),this.h=g,this.d=function(P,B){for(var j=!1,q=1/0,ge=0;ge<B.length;ge++)for(var De=B[ge],We=0,tt=De.length,xt=tt-1;We<tt;xt=We++){var Lt=De[We],fn=De[xt];Lt.y>P.y!=fn.y>P.y&&P.x<(fn.x-Lt.x)*(P.y-Lt.y)/(fn.y-Lt.y)+Lt.x&&(j=!j),q=Math.min(q,ed(P,Lt,fn))}return(j?1:-1)*Math.sqrt(q)}(this.p,A),this.max=this.d+this.h*Math.SQRT2}It.prototype.push=function(c){this.data.push(c),this.length++,this._up(this.length-1)},It.prototype.pop=function(){if(this.length!==0){var c=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),c}},It.prototype.peek=function(){return this.data[0]},It.prototype._up=function(c){for(var d=this.data,g=this.compare,A=d[c];c>0;){var P=c-1>>1,B=d[P];if(g(A,B)>=0)break;d[c]=B,c=P}d[c]=A},It.prototype._down=function(c){for(var d=this.data,g=this.compare,A=this.length>>1,P=d[c];c<A;){var B=1+(c<<1),j=d[B],q=B+1;if(q<this.length&&g(d[q],j)<0&&(B=q,j=d[q]),g(j,P)>=0)break;d[c]=j,c=B}d[c]=P};var jn=Number.POSITIVE_INFINITY;function Jn(c,d){return d[1]!==jn?function(g,A,P){var B=0,j=0;switch(A=Math.abs(A),P=Math.abs(P),g){case"top-right":case"top-left":case"top":j=P-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-P}switch(g){case"top-right":case"bottom-right":case"right":B=-A;break;case"top-left":case"bottom-left":case"left":B=A}return[B,j]}(c,d[0],d[1]):function(g,A){var P=0,B=0;A<0&&(A=0);var j=A/Math.sqrt(2);switch(g){case"top-right":case"top-left":B=j-7;break;case"bottom-right":case"bottom-left":B=7-j;break;case"bottom":B=7-A;break;case"top":B=A-7}switch(g){case"top-right":case"bottom-right":P=-j;break;case"top-left":case"bottom-left":P=j;break;case"left":P=A;break;case"right":P=-A}return[P,B]}(c,d[0])}function nr(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xn(c,d,g,A,P,B,j,q,ge,De,We,tt,xt,Lt,fn){var _n=function(Lr,Nr,Gr,Pi,Yi,Do,ho,$o){for(var po=Pi.layout.get("text-rotate").evaluate(Do,{})*Math.PI/180,ja=[],ua=0,Ao=Nr.positionedLines;ua<Ao.length;ua+=1)for(var Ya=Ao[ua],jo=0,qa=Ya.positionedGlyphs;jo<qa.length;jo+=1){var Vo=qa[jo];if(Vo.rect){var Is=Vo.rect||{},il=4,Xl=!0,Nl=1,wl=0,rc=(Yi||$o)&&Vo.vertical,fc=Vo.metrics.advance*Vo.scale/2;if($o&&Nr.verticalizable&&(wl=Ya.lineOffset/2-(Vo.imageName?-(24-Vo.metrics.width*Vo.scale)/2:24*(Vo.scale-1))),Vo.imageName){var _c=ho[Vo.imageName];Xl=_c.sdf,il=1/(Nl=_c.pixelRatio)}var Wu=Yi?[Vo.x+fc,Vo.y]:[0,0],Lc=Yi?[0,0]:[Vo.x+fc+Gr[0],Vo.y+Gr[1]-wl],Gu=[0,0];rc&&(Gu=Lc,Lc=[0,0]);var $l=(Vo.metrics.left-il)*Vo.scale-fc+Lc[0],au=(-Vo.metrics.top-il)*Vo.scale+Lc[1],Qa=$l+Is.w*Vo.scale/Nl,el=au+Is.h*Vo.scale/Nl,$s=new ae($l,au),xs=new ae(Qa,au),Zu=new ae($l,el),gu=new ae(Qa,el);if(rc){var pl=new ae(-fc,fc- -17),hc=-Math.PI/2,bc=12-fc,Ts=new ae(22-bc,-(Vo.imageName?bc:0)),js=new(Function.prototype.bind.apply(ae,[null].concat(Gu)));$s._rotateAround(hc,pl)._add(Ts)._add(js),xs._rotateAround(hc,pl)._add(Ts)._add(js),Zu._rotateAround(hc,pl)._add(Ts)._add(js),gu._rotateAround(hc,pl)._add(Ts)._add(js)}if(po){var ch=Math.sin(po),Gd=Math.cos(po),vl=[Gd,-ch,ch,Gd];$s._matMult(vl),xs._matMult(vl),Zu._matMult(vl),gu._matMult(vl)}var uh=new ae(0,0),Xu=new ae(0,0);ja.push({tl:$s,tr:xs,bl:Zu,br:gu,tex:Is,writingMode:Nr.writingMode,glyphOffset:Wu,sectionIndex:Vo.sectionIndex,isSDF:Xl,pixelOffsetTL:uh,pixelOffsetBR:Xu,minFontScaleX:0,minFontScaleY:0})}}return ja}(0,g,q,P,B,j,A,c.allowVerticalPlacement),Hn=c.textSizeData,In=null;Hn.kind==="source"?(In=[128*P.layout.get("text-size").evaluate(j,{})])[0]>32640&&ut(c.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Hn.kind==="composite"&&((In=[128*Lt.compositeTextSizes[0].evaluate(j,{},fn),128*Lt.compositeTextSizes[1].evaluate(j,{},fn)])[0]>32640||In[1]>32640)&&ut(c.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),c.addSymbols(c.text,_n,In,q,B,j,De,d,ge.lineStartIndex,ge.lineLength,xt,fn);for(var cr=0,gr=We;cr<gr.length;cr+=1)tt[gr[cr]]=c.text.placedSymbolArray.length-1;return 4*_n.length}function Wn(c){for(var d in c)return c[d];return null}function en(c,d,g,A){var P=c.compareText;if(d in P){for(var B=P[d],j=B.length-1;j>=0;j--)if(A.dist(B[j])<g)return!0}else P[d]=[];return P[d].push(A),!1}var Yn=bp.VectorTileFeature.types,Dr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jr(c,d,g,A,P,B,j,q,ge,De,We,tt,xt){var Lt=q?Math.min(32640,Math.round(q[0])):0,fn=q?Math.min(32640,Math.round(q[1])):0;c.emplaceBack(d,g,Math.round(32*A),Math.round(32*P),B,j,(Lt<<1)+(ge?1:0),fn,16*De,16*We,256*tt,256*xt)}function vi(c,d,g){c.emplaceBack(d.x,d.y,g),c.emplaceBack(d.x,d.y,g),c.emplaceBack(d.x,d.y,g),c.emplaceBack(d.x,d.y,g)}function ei(c){for(var d=0,g=c.sections;d<g.length;d+=1)if(E0(g[d].text))return!0;return!1}var _i=function(c){this.layoutVertexArray=new Wp,this.indexArray=new zf,this.programConfigurations=c,this.segments=new jt,this.dynamicLayoutVertexArray=new Vu,this.opacityVertexArray=new Ud,this.placedSymbolArray=new C};_i.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},_i.prototype.upload=function(c,d,g,A){this.isEmpty()||(g&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Qm.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,a_.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Dr,!0),this.opacityVertexBuffer.itemSize=1),(g||A)&&this.programConfigurations.upload(c))},_i.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},fo("SymbolBuffers",_i);var Lo=function(c,d,g){this.layoutVertexArray=new c,this.layoutAttributes=d,this.indexArray=new g,this.segments=new jt,this.collisionVertexArray=new C0};Lo.prototype.upload=function(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,im.members,!0)},Lo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},fo("CollisionBuffers",Lo);var ki=function(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Wl([]),this.placementViewportMatrix=Wl([]);var d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fr(this.zoom,d["text-size"]),this.iconSizeData=fr(this.zoom,d["icon-size"]);var g=this.layers[0].layout,A=g.get("symbol-sort-key"),P=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&A.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(function(B){return ko[B]})),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id}),this.sourceID=c.sourceID};ki.prototype.createArrays=function(){this.text=new _i(new Fo(this.layers,this.zoom,function(c){return/^text/.test(c)})),this.icon=new _i(new Fo(this.layers,this.zoom,function(c){return/^icon/.test(c)})),this.glyphOffsetArray=new K,this.lineVertexArray=new de,this.symbolInstances=new G},ki.prototype.calculateGlyphDependencies=function(c,d,g,A,P){for(var B=0;B<c.length;B++)if(d[c.charCodeAt(B)]=!0,(g||A)&&P){var j=Rn[c.charAt(B)];j&&(d[j.charCodeAt(0)]=!0)}},ki.prototype.populate=function(c,d,g){var A=this.layers[0],P=A.layout,B=P.get("text-font"),j=P.get("text-field"),q=P.get("icon-image"),ge=(j.value.kind!=="constant"||j.value.value instanceof hr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),De=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,We=P.get("symbol-sort-key");if(this.features=[],ge||De){for(var tt=d.iconDependencies,xt=d.glyphDependencies,Lt=d.availableImages,fn=new Sa(this.zoom),_n=0,Hn=c;_n<Hn.length;_n+=1){var In=Hn[_n],cr=In.feature,gr=In.id,Lr=In.index,Nr=In.sourceLayerIndex,Gr=A._featureFilter.needGeometry,Pi=yl(cr,Gr);if(A._featureFilter.filter(fn,Pi,g)){Gr||(Pi.geometry=Ss(cr));var Yi=void 0;if(ge){var Do=A.getValueAndResolveTokens("text-field",Pi,g,Lt),ho=hr.factory(Do);ei(ho)&&(this.hasRTLText=!0),(!this.hasRTLText||sv()==="unavailable"||this.hasRTLText&&ju.isParsed())&&(Yi=Qt(ho,A,Pi))}var $o=void 0;if(De){var po=A.getValueAndResolveTokens("icon-image",Pi,g,Lt);$o=po instanceof ii?po:ii.fromString(po)}if(Yi||$o){var ja=this.sortFeaturesByKey?We.evaluate(Pi,{},g):void 0;if(this.features.push({id:gr,text:Yi,icon:$o,index:Lr,sourceLayerIndex:Nr,geometry:Pi.geometry,properties:cr.properties,type:Yn[cr.type],sortKey:ja}),$o&&(tt[$o.name]=!0),Yi){var ua=B.evaluate(Pi,{},g).join(","),Ao=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ko.vertical)>=0;for(var Ya=0,jo=Yi.sections;Ya<jo.length;Ya+=1){var qa=jo[Ya];if(qa.image)tt[qa.image.name]=!0;else{var Vo=xf(Yi.toString()),Is=qa.fontStack||ua,il=xt[Is]=xt[Is]||{};this.calculateGlyphDependencies(qa.text,il,Ao,this.allowVerticalPlacement,Vo)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Xl){var Nl={},wl={},rc=[],fc=0;function _c(pl){rc.push(Xl[pl]),fc++}function Wu(pl,hc,bc){var Ts=wl[pl];return delete wl[pl],wl[hc]=Ts,rc[Ts].geometry[0].pop(),rc[Ts].geometry[0]=rc[Ts].geometry[0].concat(bc[0]),Ts}function Lc(pl,hc,bc){var Ts=Nl[hc];return delete Nl[hc],Nl[pl]=Ts,rc[Ts].geometry[0].shift(),rc[Ts].geometry[0]=bc[0].concat(rc[Ts].geometry[0]),Ts}function Gu(pl,hc,bc){var Ts=bc?hc[0][hc[0].length-1]:hc[0][0];return pl+":"+Ts.x+":"+Ts.y}for(var $l=0;$l<Xl.length;$l++){var au=Xl[$l],Qa=au.geometry,el=au.text?au.text.toString():null;if(el){var $s=Gu(el,Qa),xs=Gu(el,Qa,!0);if($s in wl&&xs in Nl&&wl[$s]!==Nl[xs]){var Zu=Lc($s,xs,Qa),gu=Wu($s,xs,rc[Zu].geometry);delete Nl[$s],delete wl[xs],wl[Gu(el,rc[gu].geometry,!0)]=gu,rc[Zu].geometry=null}else $s in wl?Wu($s,xs,Qa):xs in Nl?Lc($s,xs,Qa):(_c($l),Nl[$s]=fc-1,wl[xs]=fc-1)}else _c($l)}return rc.filter(function(pl){return pl.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Xl,Nl){return Xl.sortKey-Nl.sortKey})}},ki.prototype.update=function(c,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(c,d,this.layers,g))},ki.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ki.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ki.prototype.upload=function(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ki.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ki.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ki.prototype.addToLineVertexArray=function(c,d){var g=this.lineVertexArray.length;if(c.segment!==void 0){for(var A=c.dist(d[c.segment+1]),P=c.dist(d[c.segment]),B={},j=c.segment+1;j<d.length;j++)B[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:A},j<d.length-1&&(A+=d[j+1].dist(d[j]));for(var q=c.segment||0;q>=0;q--)B[q]={x:d[q].x,y:d[q].y,tileUnitDistanceFromAnchor:P},q>0&&(P+=d[q-1].dist(d[q]));for(var ge=0;ge<d.length;ge++){var De=B[ge];this.lineVertexArray.emplaceBack(De.x,De.y,De.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}},ki.prototype.addSymbols=function(c,d,g,A,P,B,j,q,ge,De,We,tt){for(var xt=c.indexArray,Lt=c.layoutVertexArray,fn=c.segments.prepareSegment(4*d.length,Lt,xt,this.canOverlap?B.sortKey:void 0),_n=this.glyphOffsetArray.length,Hn=fn.vertexLength,In=this.allowVerticalPlacement&&j===ko.vertical?Math.PI/2:0,cr=B.text&&B.text.sections,gr=0;gr<d.length;gr++){var Lr=d[gr],Nr=Lr.tl,Gr=Lr.tr,Pi=Lr.bl,Yi=Lr.br,Do=Lr.tex,ho=Lr.pixelOffsetTL,$o=Lr.pixelOffsetBR,po=Lr.minFontScaleX,ja=Lr.minFontScaleY,ua=Lr.glyphOffset,Ao=Lr.isSDF,Ya=Lr.sectionIndex,jo=fn.vertexLength,qa=ua[1];jr(Lt,q.x,q.y,Nr.x,qa+Nr.y,Do.x,Do.y,g,Ao,ho.x,ho.y,po,ja),jr(Lt,q.x,q.y,Gr.x,qa+Gr.y,Do.x+Do.w,Do.y,g,Ao,$o.x,ho.y,po,ja),jr(Lt,q.x,q.y,Pi.x,qa+Pi.y,Do.x,Do.y+Do.h,g,Ao,ho.x,$o.y,po,ja),jr(Lt,q.x,q.y,Yi.x,qa+Yi.y,Do.x+Do.w,Do.y+Do.h,g,Ao,$o.x,$o.y,po,ja),vi(c.dynamicLayoutVertexArray,q,In),xt.emplaceBack(jo,jo+1,jo+2),xt.emplaceBack(jo+1,jo+2,jo+3),fn.vertexLength+=4,fn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ua[0]),gr!==d.length-1&&Ya===d[gr+1].sectionIndex||c.programConfigurations.populatePaintArrays(Lt.length,B,B.index,{},tt,cr&&cr[Ya])}c.placedSymbolArray.emplaceBack(q.x,q.y,_n,this.glyphOffsetArray.length-_n,Hn,ge,De,q.segment,g?g[0]:0,g?g[1]:0,A[0],A[1],j,0,!1,0,We)},ki.prototype._addCollisionDebugVertex=function(c,d,g,A,P,B){return d.emplaceBack(0,0),c.emplaceBack(g.x,g.y,A,P,Math.round(B.x),Math.round(B.y))},ki.prototype.addCollisionDebugVertices=function(c,d,g,A,P,B,j){var q=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),ge=q.vertexLength,De=P.layoutVertexArray,We=P.collisionVertexArray,tt=j.anchorX,xt=j.anchorY;this._addCollisionDebugVertex(De,We,B,tt,xt,new ae(c,d)),this._addCollisionDebugVertex(De,We,B,tt,xt,new ae(g,d)),this._addCollisionDebugVertex(De,We,B,tt,xt,new ae(g,A)),this._addCollisionDebugVertex(De,We,B,tt,xt,new ae(c,A)),q.vertexLength+=4;var Lt=P.indexArray;Lt.emplaceBack(ge,ge+1),Lt.emplaceBack(ge+1,ge+2),Lt.emplaceBack(ge+2,ge+3),Lt.emplaceBack(ge+3,ge),q.primitiveLength+=4},ki.prototype.addDebugCollisionBoxes=function(c,d,g,A){for(var P=c;P<d;P++){var B=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,A?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,g)}},ki.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lo(Ih,Gg.members,Vf),this.iconCollisionBox=new Lo(Ih,Gg.members,Vf);for(var c=0;c<this.symbolInstances.length;c++){var d=this.symbolInstances.get(c);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}},ki.prototype._deserializeCollisionBoxesForSymbol=function(c,d,g,A,P,B,j,q,ge){for(var De={},We=d;We<g;We++){var tt=c.get(We);De.textBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},De.textFeatureIndex=tt.featureIndex;break}for(var xt=A;xt<P;xt++){var Lt=c.get(xt);De.verticalTextBox={x1:Lt.x1,y1:Lt.y1,x2:Lt.x2,y2:Lt.y2,anchorPointX:Lt.anchorPointX,anchorPointY:Lt.anchorPointY},De.verticalTextFeatureIndex=Lt.featureIndex;break}for(var fn=B;fn<j;fn++){var _n=c.get(fn);De.iconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},De.iconFeatureIndex=_n.featureIndex;break}for(var Hn=q;Hn<ge;Hn++){var In=c.get(Hn);De.verticalIconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},De.verticalIconFeatureIndex=In.featureIndex;break}return De},ki.prototype.deserializeCollisionBoxes=function(c){this.collisionArrays=[];for(var d=0;d<this.symbolInstances.length;d++){var g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}},ki.prototype.hasTextData=function(){return this.text.segments.get().length>0},ki.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ki.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ki.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ki.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ki.prototype.addIndicesForPlacedSymbol=function(c,d){for(var g=c.placedSymbolArray.get(d),A=g.vertexStartIndex+4*g.numGlyphs,P=g.vertexStartIndex;P<A;P+=4)c.indexArray.emplaceBack(P,P+1,P+2),c.indexArray.emplaceBack(P+1,P+2,P+3)},ki.prototype.getSortedSymbolIndexes=function(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var d=Math.sin(c),g=Math.cos(c),A=[],P=[],B=[],j=0;j<this.symbolInstances.length;++j){B.push(j);var q=this.symbolInstances.get(j);A.push(0|Math.round(d*q.anchorX+g*q.anchorY)),P.push(q.featureIndex)}return B.sort(function(ge,De){return A[ge]-A[De]||P[De]-P[ge]}),B},ki.prototype.addToSortKeyRanges=function(c,d){var g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:c,symbolInstanceEnd:c+1})},ki.prototype.sortFeatures=function(c){var d=this;if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var g=0,A=this.symbolInstanceIndexes;g<A.length;g+=1){var P=this.symbolInstances.get(A[g]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(B,j,q){B>=0&&q.indexOf(B)===j&&d.addIndicesForPlacedSymbol(d.text,B)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},fo("SymbolBucket",ki,{omit:["layers","collisionBoxArray","features","compareText"]}),ki.MAX_GLYPHS=65535,ki.addDynamicAttributes=vi;var $i=new hl({"symbol-placement":new Bo(_t.layout_symbol["symbol-placement"]),"symbol-spacing":new Bo(_t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bo(_t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Eo(_t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bo(_t.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bo(_t.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Bo(_t.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bo(_t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bo(_t.layout_symbol["icon-rotation-alignment"]),"icon-size":new Eo(_t.layout_symbol["icon-size"]),"icon-text-fit":new Bo(_t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bo(_t.layout_symbol["icon-text-fit-padding"]),"icon-image":new Eo(_t.layout_symbol["icon-image"]),"icon-rotate":new Eo(_t.layout_symbol["icon-rotate"]),"icon-padding":new Bo(_t.layout_symbol["icon-padding"]),"icon-keep-upright":new Bo(_t.layout_symbol["icon-keep-upright"]),"icon-offset":new Eo(_t.layout_symbol["icon-offset"]),"icon-anchor":new Eo(_t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bo(_t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bo(_t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bo(_t.layout_symbol["text-rotation-alignment"]),"text-field":new Eo(_t.layout_symbol["text-field"]),"text-font":new Eo(_t.layout_symbol["text-font"]),"text-size":new Eo(_t.layout_symbol["text-size"]),"text-max-width":new Eo(_t.layout_symbol["text-max-width"]),"text-line-height":new Bo(_t.layout_symbol["text-line-height"]),"text-letter-spacing":new Eo(_t.layout_symbol["text-letter-spacing"]),"text-justify":new Eo(_t.layout_symbol["text-justify"]),"text-radial-offset":new Eo(_t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bo(_t.layout_symbol["text-variable-anchor"]),"text-anchor":new Eo(_t.layout_symbol["text-anchor"]),"text-max-angle":new Bo(_t.layout_symbol["text-max-angle"]),"text-writing-mode":new Bo(_t.layout_symbol["text-writing-mode"]),"text-rotate":new Eo(_t.layout_symbol["text-rotate"]),"text-padding":new Bo(_t.layout_symbol["text-padding"]),"text-keep-upright":new Bo(_t.layout_symbol["text-keep-upright"]),"text-transform":new Eo(_t.layout_symbol["text-transform"]),"text-offset":new Eo(_t.layout_symbol["text-offset"]),"text-allow-overlap":new Bo(_t.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Bo(_t.layout_symbol["text-ignore-placement"]),"text-optional":new Bo(_t.layout_symbol["text-optional"])}),oa={paint:new hl({"icon-opacity":new Eo(_t.paint_symbol["icon-opacity"]),"icon-color":new Eo(_t.paint_symbol["icon-color"]),"icon-halo-color":new Eo(_t.paint_symbol["icon-halo-color"]),"icon-halo-width":new Eo(_t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Eo(_t.paint_symbol["icon-halo-blur"]),"icon-translate":new Bo(_t.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bo(_t.paint_symbol["icon-translate-anchor"]),"text-opacity":new Eo(_t.paint_symbol["text-opacity"]),"text-color":new Eo(_t.paint_symbol["text-color"],{runtimeType:si,getOverride:function(c){return c.textColor},hasOverride:function(c){return!!c.textColor}}),"text-halo-color":new Eo(_t.paint_symbol["text-halo-color"]),"text-halo-width":new Eo(_t.paint_symbol["text-halo-width"]),"text-halo-blur":new Eo(_t.paint_symbol["text-halo-blur"]),"text-translate":new Bo(_t.paint_symbol["text-translate"]),"text-translate-anchor":new Bo(_t.paint_symbol["text-translate-anchor"])}),layout:$i},Xo=function(c){this.type=c.property.overrides?c.property.overrides.runtimeType:wi,this.defaultValue=c};Xo.prototype.evaluate=function(c){if(c.formattedSection){var d=this.defaultValue.property.overrides;if(d&&d.hasOverride(c.formattedSection))return d.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default},Xo.prototype.eachChild=function(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){return null},fo("FormatSectionOverride",Xo,{omit:["defaultValue"]});var Ns=function(c){function d(g){c.call(this,g,oa)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.recalculate=function(g,A){if(c.prototype.recalculate.call(this,g,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var B=[],j=0,q=P;j<q.length;j+=1){var ge=q[j];B.indexOf(ge)<0&&B.push(ge)}this.layout._values["text-writing-mode"]=B}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},d.prototype.getValueAndResolveTokens=function(g,A,P,B){var j=this.layout.get(g).evaluate(A,{},P,B),q=this._unevaluatedLayout._values[g];return q.isDataDriven()||nl(q.value)||!j?j:function(ge,De){return De.replace(/{([^{}]+)}/g,function(We,tt){return tt in ge?String(ge[tt]):""})}(A.properties,j)},d.prototype.createBucket=function(g){return new ki(g)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype._setPaintOverrides=function(){for(var g=0,A=oa.paint.overridableProperties;g<A.length;g+=1){var P=A[g];if(d.hasPaintOverride(this.layout,P)){var B,j=this.paint.get(P),q=new Xo(j),ge=new ms(q,j.property.specification);B=j.value.kind==="constant"||j.value.kind==="source"?new Rc("source",ge):new us("composite",ge,j.value.zoomStops,j.value._interpolationType),this.paint._values[P]=new qc(j.property,B,j.parameters)}}},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&d.hasPaintOverride(this.layout,g)},d.hasPaintOverride=function(g,A){var P=g.get("text-field"),B=oa.paint.properties[A],j=!1,q=function(We){for(var tt=0,xt=We;tt<xt.length;tt+=1)if(B.overrides&&B.overrides.hasOverride(xt[tt]))return void(j=!0)};if(P.value.kind==="constant"&&P.value.value instanceof hr)q(P.value.value.sections);else if(P.value.kind==="source"){var ge=function(We){j||(We instanceof Li&&Qr(We.value)===_a?q(We.value.sections):We instanceof xo?q(We.sections):We.eachChild(ge))},De=P.value;De._styleExpression&&ge(De._styleExpression.expression)}return j},d}(wu),Wc={paint:new hl({"background-color":new Bo(_t.paint_background["background-color"]),"background-pattern":new Qc(_t.paint_background["background-pattern"]),"background-opacity":new Bo(_t.paint_background["background-opacity"])})},nc=function(c){function d(g){c.call(this,g,Wc)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(wu),Jm={paint:new hl({"raster-opacity":new Bo(_t.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bo(_t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bo(_t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bo(_t.paint_raster["raster-brightness-max"]),"raster-saturation":new Bo(_t.paint_raster["raster-saturation"]),"raster-contrast":new Bo(_t.paint_raster["raster-contrast"]),"raster-resampling":new Bo(_t.paint_raster["raster-resampling"]),"raster-fade-duration":new Bo(_t.paint_raster["raster-fade-duration"])})},Cf=function(c){function d(g){c.call(this,g,Jm)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(wu),s_=function(c){function d(g){c.call(this,g,{}),this.implementation=g}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},d.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},d.prototype.recalculate=function(){},d.prototype.updateTransitions=function(){},d.prototype.hasTransition=function(){},d.prototype.serialize=function(){},d.prototype.onAdd=function(g){this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},d.prototype.onRemove=function(g){this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},d}(wu),Sp={circle:M0,heatmap:Xp,hillshade:Ug,fill:r_,"fill-extrusion":Mu,line:pv,symbol:Ns,background:nc,raster:Cf},Tp=oe.HTMLImageElement,R1=oe.HTMLCanvasElement,yx=oe.HTMLVideoElement,l_=oe.ImageData,M1=oe.ImageBitmap,B0=function(c,d,g,A){this.context=c,this.format=g,this.texture=c.gl.createTexture(),this.update(d,A)};B0.prototype.update=function(c,d,g){var A=c.width,P=c.height,B=!(this.size&&this.size[0]===A&&this.size[1]===P||g),j=this.context,q=j.gl;if(this.useMipmap=!!(d&&d.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!d||d.premultiply!==!1)),B)this.size=[A,P],c instanceof Tp||c instanceof R1||c instanceof yx||c instanceof l_||M1&&c instanceof M1?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,c):q.texImage2D(q.TEXTURE_2D,0,this.format,A,P,0,this.format,q.UNSIGNED_BYTE,c.data);else{var ge=g||{x:0,y:0},De=ge.x,We=ge.y;c instanceof Tp||c instanceof R1||c instanceof yx||c instanceof l_||M1&&c instanceof M1?q.texSubImage2D(q.TEXTURE_2D,0,De,We,q.RGBA,q.UNSIGNED_BYTE,c):q.texSubImage2D(q.TEXTURE_2D,0,De,We,A,P,q.RGBA,q.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)},B0.prototype.bind=function(c,d,g){var A=this.context.gl;A.bindTexture(A.TEXTURE_2D,this.texture),g!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=A.LINEAR),c!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,c),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g||c),this.filter=c),d!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,d),this.wrap=d)},B0.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},B0.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var _x=function(c){var d=this;this._callback=c,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){d._triggered=!1,d._callback()})};_x.prototype.trigger=function(){var c=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){c._triggered=!1,c._callback()},0))},_x.prototype.remove=function(){delete this._channel,this._callback=function(){}};var eg=function(c,d,g){this.target=c,this.parent=d,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Nt(["receive","process"],this),this.invoker=new _x(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ze()?c:oe};function Zg(c,d,g){var A=2*Math.PI*6378137/256/Math.pow(2,g);return[c*A-2*Math.PI*6378137/2,d*A-2*Math.PI*6378137/2]}eg.prototype.send=function(c,d,g,A,P){var B=this;P===void 0&&(P=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[j]=g);var q=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:c,hasCallback:!!g,targetMapId:A,mustQueue:P,sourceMapId:this.mapId,data:Ma(d,q)},q),{cancel:function(){g&&delete B.callbacks[j],B.target.postMessage({id:j,type:"<cancel>",targetMapId:A,sourceMapId:B.mapId})}}},eg.prototype.receive=function(c){var d=c.data,g=d.id;if(g&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){delete this.tasks[g];var A=this.cancelCallbacks[g];delete this.cancelCallbacks[g],A&&A()}else ze()||d.mustQueue?(this.tasks[g]=d,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,d)},eg.prototype.process=function(){if(this.taskQueue.length){var c=this.taskQueue.shift(),d=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),d&&this.processTask(c,d)}},eg.prototype.processTask=function(c,d){var g=this;if(d.type==="<response>"){var A=this.callbacks[c];delete this.callbacks[c],A&&(d.error?A(as(d.error)):A(null,as(d.data)))}else{var P=!1,B=nt(this.globalScope)?void 0:[],j=d.hasCallback?function(We,tt){P=!0,delete g.cancelCallbacks[c],g.target.postMessage({id:c,type:"<response>",sourceMapId:g.mapId,error:We?Ma(We):null,data:Ma(tt,B)},B)}:function(We){P=!0},q=null,ge=as(d.data);if(this.parent[d.type])q=this.parent[d.type](d.sourceMapId,ge,j);else if(this.parent.getWorkerSource){var De=d.type.split(".");q=this.parent.getWorkerSource(d.sourceMapId,De[0],ge.source)[De[1]](ge,j)}else j(new Error("Could not find function "+d.type));!P&&q&&q.cancel&&(this.cancelCallbacks[c]=q.cancel)}},eg.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var iu=function(c,d){c&&(d?this.setSouthWest(c).setNorthEast(d):c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))};iu.prototype.setNorthEast=function(c){return this._ne=c instanceof Tl?new Tl(c.lng,c.lat):Tl.convert(c),this},iu.prototype.setSouthWest=function(c){return this._sw=c instanceof Tl?new Tl(c.lng,c.lat):Tl.convert(c),this},iu.prototype.extend=function(c){var d,g,A=this._sw,P=this._ne;if(c instanceof Tl)d=c,g=c;else{if(!(c instanceof iu))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(iu.convert(c)):this.extend(Tl.convert(c)):this;if(g=c._ne,!(d=c._sw)||!g)return this}return A||P?(A.lng=Math.min(d.lng,A.lng),A.lat=Math.min(d.lat,A.lat),P.lng=Math.max(g.lng,P.lng),P.lat=Math.max(g.lat,P.lat)):(this._sw=new Tl(d.lng,d.lat),this._ne=new Tl(g.lng,g.lat)),this},iu.prototype.getCenter=function(){return new Tl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},iu.prototype.getSouthWest=function(){return this._sw},iu.prototype.getNorthEast=function(){return this._ne},iu.prototype.getNorthWest=function(){return new Tl(this.getWest(),this.getNorth())},iu.prototype.getSouthEast=function(){return new Tl(this.getEast(),this.getSouth())},iu.prototype.getWest=function(){return this._sw.lng},iu.prototype.getSouth=function(){return this._sw.lat},iu.prototype.getEast=function(){return this._ne.lng},iu.prototype.getNorth=function(){return this._ne.lat},iu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},iu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},iu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},iu.prototype.contains=function(c){var d=Tl.convert(c),g=d.lng,A=d.lat,P=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P},iu.convert=function(c){return!c||c instanceof iu?c:new iu(c)};var Tl=function(c,d){if(isNaN(c)||isNaN(d))throw new Error("Invalid LngLat object: ("+c+", "+d+")");if(this.lng=+c,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Tl.prototype.wrap=function(){return new Tl(be(this.lng,-180,180),this.lat)},Tl.prototype.toArray=function(){return[this.lng,this.lat]},Tl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Tl.prototype.distanceTo=function(c){var d=Math.PI/180,g=this.lat*d,A=c.lat*d,P=Math.sin(g)*Math.sin(A)+Math.cos(g)*Math.cos(A)*Math.cos((c.lng-this.lng)*d);return 63710088e-1*Math.acos(Math.min(P,1))},Tl.prototype.toBounds=function(c){c===void 0&&(c=0);var d=360*c/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new iu(new Tl(this.lng-g,this.lat-d),new Tl(this.lng+g,this.lat+d))},Tl.convert=function(c){if(c instanceof Tl)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Tl(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Tl(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var tg=2*Math.PI*63710088e-1;function Xg(c){return tg*Math.cos(c*Math.PI/180)}function c_(c){return(180+c)/360}function ng(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function P1(c,d){return c/Xg(d)}function rg(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}var n0=function(c,d,g){g===void 0&&(g=0),this.x=+c,this.y=+d,this.z=+g};n0.fromLngLat=function(c,d){d===void 0&&(d=0);var g=Tl.convert(c);return new n0(c_(g.lng),ng(g.lat),P1(d,g.lat))},n0.prototype.toLngLat=function(){return new Tl(360*this.x-180,rg(this.y))},n0.prototype.toAltitude=function(){return this.z*Xg(rg(this.y))},n0.prototype.meterInMercatorCoordinateUnits=function(){return 1/tg*(c=rg(this.y),1/Math.cos(c*Math.PI/180));var c};var wp=function(c,d,g){this.z=c,this.x=d,this.y=g,this.key=ou(0,c,c,d,g)};wp.prototype.equals=function(c){return this.z===c.z&&this.x===c.x&&this.y===c.y},wp.prototype.url=function(c,d){var g,A,P,B,j,q=(A=this.y,P=this.z,B=Zg(256*(g=this.x),256*(A=Math.pow(2,P)-A-1),P),j=Zg(256*(g+1),256*(A+1),P),B[0]+","+B[1]+","+j[0]+","+j[1]),ge=function(De,We,tt){for(var xt,Lt="",fn=De;fn>0;fn--)Lt+=(We&(xt=1<<fn-1)?1:0)+(tt&xt?2:0);return Lt}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ge).replace("{bbox-epsg-3857}",q)},wp.prototype.getTilePoint=function(c){var d=Math.pow(2,this.z);return new ae(8192*(c.x*d-this.x),8192*(c.y*d-this.y))},wp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var bx=function(c,d){this.wrap=c,this.canonical=d,this.key=ou(c,d.z,d.z,d.x,d.y)},Ic=function(c,d,g,A,P){this.overscaledZ=c,this.wrap=d,this.canonical=new wp(g,+A,+P),this.key=ou(d,c,g,A,P)};function ou(c,d,g,A,P){(c*=2)<0&&(c=-1*c-1);var B=1<<g;return(B*B*c+B*P+A).toString(36)+g.toString(36)+d.toString(36)}Ic.prototype.equals=function(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)},Ic.prototype.scaledTo=function(c){var d=this.canonical.z-c;return c>this.canonical.z?new Ic(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ic(c,this.wrap,c,this.canonical.x>>d,this.canonical.y>>d)},Ic.prototype.calculateScaledKey=function(c,d){var g=this.canonical.z-c;return c>this.canonical.z?ou(this.wrap*+d,c,this.canonical.z,this.canonical.x,this.canonical.y):ou(this.wrap*+d,c,c,this.canonical.x>>g,this.canonical.y>>g)},Ic.prototype.isChildOf=function(c){if(c.wrap!==this.wrap)return!1;var d=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>d&&c.canonical.y===this.canonical.y>>d},Ic.prototype.children=function(c){if(this.overscaledZ>=c)return[new Ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var d=this.canonical.z+1,g=2*this.canonical.x,A=2*this.canonical.y;return[new Ic(d,this.wrap,d,g,A),new Ic(d,this.wrap,d,g+1,A),new Ic(d,this.wrap,d,g,A+1),new Ic(d,this.wrap,d,g+1,A+1)]},Ic.prototype.isLessThan=function(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))},Ic.prototype.wrapped=function(){return new Ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ic.prototype.unwrapTo=function(c){return new Ic(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)},Ic.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ic.prototype.toUnwrapped=function(){return new bx(this.wrap,this.canonical)},Ic.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ic.prototype.getTilePoint=function(c){return this.canonical.getTilePoint(new n0(c.x-this.wrap,c.y))},fo("CanonicalTileID",wp),fo("OverscaledTileID",Ic,{omit:["posMatrix"]});var F0=function(c,d,g){if(this.uid=c,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return ut('"'+g+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=d.height;var A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(var P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};F0.prototype.get=function(c,d){var g=new Uint8Array(this.data.buffer),A=4*this._idx(c,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[A],g[A+1],g[A+2])},F0.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},F0.prototype._idx=function(c,d){if(c<-1||c>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(c+1)},F0.prototype._unpackMapbox=function(c,d,g){return(256*c*256+256*d+g)/10-1e4},F0.prototype._unpackTerrarium=function(c,d,g){return 256*c+d+g/256-32768},F0.prototype.getPixels=function(){return new Ou({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},F0.prototype.backfillBorder=function(c,d,g){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");var A=d*this.dim,P=d*this.dim+this.dim,B=g*this.dim,j=g*this.dim+this.dim;switch(d){case-1:A=P-1;break;case 1:P=A+1}switch(g){case-1:B=j-1;break;case 1:j=B+1}for(var q=-d*this.dim,ge=-g*this.dim,De=B;De<j;De++)for(var We=A;We<P;We++)this.data[this._idx(We,De)]=c.data[this._idx(We+q,De+ge)]},fo("DEMData",F0);var vv=function(c){this._stringToNumber={},this._numberToString=[];for(var d=0;d<c.length;d++){var g=c[d];this._stringToNumber[g]=d,this._numberToString[d]=g}};vv.prototype.encode=function(c){return this._stringToNumber[c]},vv.prototype.decode=function(c){return this._numberToString[c]};var Qs=function(c,d,g,A,P){this.type="Feature",this._vectorTileFeature=c,c._z=d,c._x=g,c._y=A,this.properties=c.properties,this.id=P},I1={geometry:{configurable:!0}};I1.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},I1.geometry.set=function(c){this._geometry=c},Qs.prototype.toJSON=function(){var c={geometry:this.geometry};for(var d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(c[d]=this[d]);return c},Object.defineProperties(Qs.prototype,I1);var r0=function(){this.state={},this.stateChanges={},this.deletedStates={}};r0.prototype.updateState=function(c,d,g){var A=String(d);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][A]=this.stateChanges[c][A]||{},Oe(this.stateChanges[c][A],g),this.deletedStates[c]===null)for(var P in this.deletedStates[c]={},this.state[c])P!==A&&(this.deletedStates[c][P]=null);else if(this.deletedStates[c]&&this.deletedStates[c][A]===null)for(var B in this.deletedStates[c][A]={},this.state[c][A])g[B]||(this.deletedStates[c][A][B]=null);else for(var j in g)this.deletedStates[c]&&this.deletedStates[c][A]&&this.deletedStates[c][A][j]===null&&delete this.deletedStates[c][A][j]},r0.prototype.removeFeatureState=function(c,d,g){if(this.deletedStates[c]!==null){var A=String(d);if(this.deletedStates[c]=this.deletedStates[c]||{},g&&d!==void 0)this.deletedStates[c][A]!==null&&(this.deletedStates[c][A]=this.deletedStates[c][A]||{},this.deletedStates[c][A][g]=null);else if(d!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][A])for(g in this.deletedStates[c][A]={},this.stateChanges[c][A])this.deletedStates[c][A][g]=null;else this.deletedStates[c][A]=null;else this.deletedStates[c]=null}},r0.prototype.getState=function(c,d){var g=String(d),A=Oe({},(this.state[c]||{})[g],(this.stateChanges[c]||{})[g]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){var P=this.deletedStates[c][d];if(P===null)return{};for(var B in P)delete A[B]}return A},r0.prototype.initializeTileState=function(c,d){c.setFeatureState(this.state,d)},r0.prototype.coalesceChanges=function(c,d){var g={};for(var A in this.stateChanges){this.state[A]=this.state[A]||{};var P={};for(var B in this.stateChanges[A])this.state[A][B]||(this.state[A][B]={}),Oe(this.state[A][B],this.stateChanges[A][B]),P[B]=this.state[A][B];g[A]=P}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var q={};if(this.deletedStates[j]===null)for(var ge in this.state[j])q[ge]={},this.state[j][ge]={};else for(var De in this.deletedStates[j]){if(this.deletedStates[j][De]===null)this.state[j][De]={};else for(var We=0,tt=Object.keys(this.deletedStates[j][De]);We<tt.length;We+=1)delete this.state[j][De][tt[We]];q[De]=this.state[j][De]}g[j]=g[j]||{},Oe(g[j],q)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(var xt in c)c[xt].setFeatureState(g,d)};var ad=function(c,d){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new Ua(8192,16,0),this.grid3D=new Ua(8192,16,0),this.featureIndexArray=new st,this.promoteId=d};function xx(c,d,g,A,P){return lt(c,function(B,j){var q=d instanceof pp?d.get(j):null;return q&&q.evaluate?q.evaluate(g,A,P):q})}function om(c){for(var d=1/0,g=1/0,A=-1/0,P=-1/0,B=0,j=c;B<j.length;B+=1){var q=j[B];d=Math.min(d,q.x),g=Math.min(g,q.y),A=Math.max(A,q.x),P=Math.max(P,q.y)}return{minX:d,minY:g,maxX:A,maxY:P}}function Zl(c,d){return d-c}ad.prototype.insert=function(c,d,g,A,P,B){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,A,P);for(var q=B?this.grid3D:this.grid,ge=0;ge<d.length;ge++){for(var De=d[ge],We=[1/0,1/0,-1/0,-1/0],tt=0;tt<De.length;tt++){var xt=De[tt];We[0]=Math.min(We[0],xt.x),We[1]=Math.min(We[1],xt.y),We[2]=Math.max(We[2],xt.x),We[3]=Math.max(We[3],xt.y)}We[0]<8192&&We[1]<8192&&We[2]>=0&&We[3]>=0&&q.insert(j,We[0],We[1],We[2],We[3])}},ad.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new bp.VectorTile(new Or(this.rawTileData)).layers,this.sourceLayerCoder=new vv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ad.prototype.query=function(c,d,g,A){var P=this;this.loadVTLayers();for(var B=c.params||{},j=8192/c.tileSize/c.scale,q=Bf(B.filter),ge=c.queryGeometry,De=c.queryPadding*j,We=om(ge),tt=this.grid.query(We.minX-De,We.minY-De,We.maxX+De,We.maxY+De),xt=om(c.cameraQueryGeometry),Lt=this.grid3D.query(xt.minX-De,xt.minY-De,xt.maxX+De,xt.maxY+De,function(Lr,Nr,Gr,Pi){return function(Yi,Do,ho,$o,po){for(var ja=0,ua=Yi;ja<ua.length;ja+=1){var Ao=ua[ja];if(Do<=Ao.x&&ho<=Ao.y&&$o>=Ao.x&&po>=Ao.y)return!0}var Ya=[new ae(Do,ho),new ae(Do,po),new ae($o,po),new ae($o,ho)];if(Yi.length>2){for(var jo=0,qa=Ya;jo<qa.length;jo+=1)if(ah(Yi,qa[jo]))return!0}for(var Vo=0;Vo<Yi.length-1;Vo++)if(Ai(Yi[Vo],Yi[Vo+1],Ya))return!0;return!1}(c.cameraQueryGeometry,Lr-De,Nr-De,Gr+De,Pi+De)}),fn=0,_n=Lt;fn<_n.length;fn+=1)tt.push(_n[fn]);tt.sort(Zl);for(var Hn,In={},cr=function(Lr){var Nr=tt[Lr];if(Nr!==Hn){Hn=Nr;var Gr=P.featureIndexArray.get(Nr),Pi=null;P.loadMatchingFeature(In,Gr.bucketIndex,Gr.sourceLayerIndex,Gr.featureIndex,q,B.layers,B.availableImages,d,g,A,function(Yi,Do,ho){return Pi||(Pi=Ss(Yi)),Do.queryIntersectsFeature(ge,Yi,ho,Pi,P.z,c.transform,j,c.pixelPosMatrix)})}},gr=0;gr<tt.length;gr++)cr(gr);return In},ad.prototype.loadMatchingFeature=function(c,d,g,A,P,B,j,q,ge,De,We){var tt=this.bucketLayerIDs[d];if(!B||function(Yi,Do){for(var ho=0;ho<Yi.length;ho++)if(Do.indexOf(Yi[ho])>=0)return!0;return!1}(B,tt)){var xt=this.sourceLayerCoder.decode(g),Lt=this.vtLayers[xt].feature(A);if(P.needGeometry){var fn=yl(Lt,!0);if(!P.filter(new Sa(this.tileID.overscaledZ),fn,this.tileID.canonical))return}else if(!P.filter(new Sa(this.tileID.overscaledZ),Lt))return;for(var _n=this.getId(Lt,xt),Hn=0;Hn<tt.length;Hn++){var In=tt[Hn];if(!(B&&B.indexOf(In)<0)){var cr=q[In];if(cr){var gr={};_n!==void 0&&De&&(gr=De.getState(cr.sourceLayer||"_geojsonTileLayer",_n));var Lr=Oe({},ge[In]);Lr.paint=xx(Lr.paint,cr.paint,Lt,gr,j),Lr.layout=xx(Lr.layout,cr.layout,Lt,gr,j);var Nr=!We||We(Lt,cr,gr);if(Nr){var Gr=new Qs(Lt,this.z,this.x,this.y,_n);Gr.layer=Lr;var Pi=c[In];Pi===void 0&&(Pi=c[In]=[]),Pi.push({featureIndex:A,feature:Gr,intersectionZ:Nr})}}}}}},ad.prototype.lookupSymbolFeatures=function(c,d,g,A,P,B,j,q){var ge={};this.loadVTLayers();for(var De=Bf(P),We=0,tt=c;We<tt.length;We+=1)this.loadMatchingFeature(ge,g,A,tt[We],De,B,j,q,d);return ge},ad.prototype.hasLayer=function(c){for(var d=0,g=this.bucketLayerIDs;d<g.length;d+=1)for(var A=0,P=g[d];A<P.length;A+=1)if(c===P[A])return!0;return!1},ad.prototype.getId=function(c,d){var g=c.id;return this.promoteId&&typeof(g=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]])=="boolean"&&(g=Number(g)),g},fo("FeatureIndex",ad,{omit:["rawTileData","sourceLayerCoder"]});var Js=function(c,d){this.tileID=c,this.uid=He(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Js.prototype.registerFadeDuration=function(c){var d=c+this.timeAdded;d<kn.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)},Js.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Js.prototype.loadVectorData=function(c,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){for(var A in c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(De,We){var tt={};if(!We)return tt;for(var xt=function(){var _n=fn[Lt],Hn=_n.layerIds.map(function(gr){return We.getLayer(gr)}).filter(Boolean);if(Hn.length!==0){_n.layers=Hn,_n.stateDependentLayerIds&&(_n.stateDependentLayers=_n.stateDependentLayerIds.map(function(gr){return Hn.filter(function(Lr){return Lr.id===gr})[0]}));for(var In=0,cr=Hn;In<cr.length;In+=1)tt[cr[In].id]=_n}},Lt=0,fn=De;Lt<fn.length;Lt+=1)xt();return tt}(c.buckets,d.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[A];if(P instanceof ki){if(this.hasSymbolBuckets=!0,!g)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var B in this.buckets){var j=this.buckets[B];if(j instanceof ki&&j.hasRTLText){this.hasRTLText=!0,ju.isLoading()||ju.isLoaded()||sv()!=="deferred"||du();break}}for(var q in this.queryPadding=0,this.buckets){var ge=this.buckets[q];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(q).queryRadius(ge))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new S},Js.prototype.unloadVectorData=function(){for(var c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Js.prototype.getBucket=function(c){return this.buckets[c.id]},Js.prototype.upload=function(c){for(var d in this.buckets){var g=this.buckets[d];g.uploadPending()&&g.upload(c)}var A=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new B0(c,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new B0(c,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)},Js.prototype.prepare=function(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)},Js.prototype.queryRenderedFeatures=function(c,d,g,A,P,B,j,q,ge,De){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:P,scale:B,tileSize:this.tileSize,pixelPosMatrix:De,transform:q,params:j,queryPadding:this.queryPadding*ge},c,d,g):{}},Js.prototype.querySourceFeatures=function(c,d){var g=this.latestFeatureIndex;if(g&&g.rawTileData){var A=g.loadVTLayers(),P=d?d.sourceLayer:"",B=A._geojsonTileLayer||A[P];if(B)for(var j=Bf(d&&d.filter),q=this.tileID.canonical,ge=q.z,De=q.x,We=q.y,tt={z:ge,x:De,y:We},xt=0;xt<B.length;xt++){var Lt=B.feature(xt);if(j.needGeometry){var fn=yl(Lt,!0);if(!j.filter(new Sa(this.tileID.overscaledZ),fn,this.tileID.canonical))continue}else if(!j.filter(new Sa(this.tileID.overscaledZ),Lt))continue;var _n=g.getId(Lt,P),Hn=new Qs(Lt,ge,De,We,_n);Hn.tile=tt,c.push(Hn)}}},Js.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Js.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Js.prototype.setExpiryData=function(c){var d=this.expirationTime;if(c.cacheControl){var g=St(c.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){var A=Date.now(),P=!1;if(this.expirationTime>A)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{var B=this.expirationTime-d;B?this.expirationTime=A+Math.max(B,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Js.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Js.prototype.setFeatureState=function(c,d){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(c).length!==0){var g=this.latestFeatureIndex.loadVTLayers();for(var A in this.buckets)if(d.style.hasLayer(A)){var P=this.buckets[A],B=P.layers[0].sourceLayer||"_geojsonTileLayer",j=g[B],q=c[B];if(j&&q&&Object.keys(q).length!==0){P.update(q,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ge=d&&d.style&&d.style.getLayer(A);ge&&(this.queryPadding=Math.max(this.queryPadding,ge.queryRadius(P)))}}}},Js.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Js.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<kn.now()},Js.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Js.prototype.setHoldDuration=function(c){this.symbolFadeHoldUntil=kn.now()+c},Js.prototype.setDependencies=function(c,d){for(var g={},A=0,P=d;A<P.length;A+=1)g[P[A]]=!0;this.dependencies[c]=g},Js.prototype.hasDependency=function(c,d){for(var g=0,A=c;g<A.length;g+=1){var P=this.dependencies[A[g]];if(P){for(var B=0,j=d;B<j.length;B+=1)if(P[j[B]])return!0}}return!1};var xa=oe.performance,am=function(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},xa.mark(this._marks.start)};am.prototype.finish=function(){xa.mark(this._marks.end);var c=xa.getEntriesByName(this._marks.measure);return c.length===0&&(xa.measure(this._marks.measure,this._marks.start,this._marks.end),c=xa.getEntriesByName(this._marks.measure),xa.clearMarks(this._marks.start),xa.clearMarks(this._marks.end),xa.clearMeasures(this._marks.measure)),c},E.Actor=eg,E.AlphaImage=Vd,E.CanonicalTileID=wp,E.CollisionBoxArray=S,E.Color=gn,E.DEMData=F0,E.DataConstantProperty=Bo,E.DictionaryCoder=vv,E.EXTENT=8192,E.ErrorEvent=Yt,E.EvaluationParameters=Sa,E.Event=Tt,E.Evented=pn,E.FeatureIndex=ad,E.FillBucket=Zf,E.FillExtrusionBucket=mu,E.ImageAtlas=$r,E.ImagePosition=qi,E.LineBucket=Pu,E.LngLat=Tl,E.LngLatBounds=iu,E.MercatorCoordinate=n0,E.ONE_EM=24,E.OverscaledTileID=Ic,E.Point=ae,E.Point$1=ae,E.Properties=hl,E.Protobuf=Or,E.RGBAImage=Ou,E.RequestManager=Wt,E.RequestPerformance=am,E.ResourceType=Be,E.SegmentVector=jt,E.SourceFeatureState=r0,E.StructArrayLayout1ui2=Jh,E.StructArrayLayout2f1f2i16=Qh,E.StructArrayLayout2i4=qh,E.StructArrayLayout3ui6=zf,E.StructArrayLayout4i8=vp,E.SymbolBucket=ki,E.Texture=B0,E.Tile=Js,E.Transitionable=mc,E.Uniform1f=Bi,E.Uniform1i=ni,E.Uniform2f=Ii,E.Uniform3f=co,E.Uniform4f=Uo,E.UniformColor=Go,E.UniformMatrix4f=fs,E.UnwrappedTileID=bx,E.ValidationError=qt,E.WritingMode=ko,E.ZoomHistory=x0,E.add=function(c,d,g){return c[0]=d[0]+g[0],c[1]=d[1]+g[1],c[2]=d[2]+g[2],c},E.addDynamicAttributes=vi,E.asyncAll=function(c,d,g){if(!c.length)return g(null,[]);var A=c.length,P=new Array(c.length),B=null;c.forEach(function(j,q){d(j,function(ge,De){ge&&(B=ge),P[q]=De,--A==0&&g(B,P)})})},E.bezier=ee,E.bindAll=Nt,E.browser=kn,E.cacheEntryPossiblyAdded=function(c){++ht>Ct&&(c.getActor().send("enforceCacheSizeLimit",mt),ht=0)},E.clamp=Le,E.clearTileCache=function(c){var d=oe.caches.delete("mapbox-tiles");c&&d.catch(c).then(function(){return c()})},E.clipLine=Nh,E.clone=function(c){var d=new Xa(16);return d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]=c[6],d[7]=c[7],d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},E.clone$1=Ae,E.clone$2=function(c){var d=new Xa(3);return d[0]=c[0],d[1]=c[1],d[2]=c[2],d},E.collisionCircleLayout=Ue,E.config=lr,E.create=function(){var c=new Xa(16);return Xa!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},E.create$1=function(){var c=new Xa(9);return Xa!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c},E.create$2=function(){var c=new Xa(4);return Xa!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c},E.createCommonjsModule=ve,E.createExpression=Wa,E.createLayout=gc,E.createStyleLayer=function(c){return c.type==="custom"?new s_(c):new Sp[c.type](c)},E.cross=function(c,d,g){var A=d[0],P=d[1],B=d[2],j=g[0],q=g[1],ge=g[2];return c[0]=P*ge-B*q,c[1]=B*j-A*ge,c[2]=A*q-P*j,c},E.deepEqual=function c(d,g){if(Array.isArray(d)){if(!Array.isArray(g)||d.length!==g.length)return!1;for(var A=0;A<d.length;A++)if(!c(d[A],g[A]))return!1;return!0}if(typeof d=="object"&&d!==null&&g!==null){if(typeof g!="object"||Object.keys(d).length!==Object.keys(g).length)return!1;for(var P in d)if(!c(d[P],g[P]))return!1;return!0}return d===g},E.dot=function(c,d){return c[0]*d[0]+c[1]*d[1]+c[2]*d[2]},E.dot$1=function(c,d){return c[0]*d[0]+c[1]*d[1]+c[2]*d[2]+c[3]*d[3]},E.ease=me,E.emitValidationErrors=Es,E.endsWith=ct,E.enforceCacheSizeLimit=function(c){Cn(),$t&&$t.then(function(d){d.keys().then(function(g){for(var A=0;A<g.length-c;A++)d.delete(g[A])})})},E.evaluateSizeForFeature=Kr,E.evaluateSizeForZoom=Dl,E.evaluateVariableOffset=Jn,E.evented=T0,E.extend=Oe,E.featureFilter=Bf,E.filterObject=Ie,E.fromRotation=function(c,d){var g=Math.sin(d),A=Math.cos(d);return c[0]=A,c[1]=g,c[2]=0,c[3]=-g,c[4]=A,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},E.getAnchorAlignment=qs,E.getAnchorJustification=nr,E.getArrayBuffer=yr,E.getImage=xe,E.getJSON=function(c,d){return $n(Oe(c,{type:"json"}),d)},E.getRTLTextPluginStatus=sv,E.getReferrer=Mt,E.getVideo=function(c,d){var g,A,P=oe.document.createElement("video");P.muted=!0,P.onloadstart=function(){d(null,P)};for(var B=0;B<c.length;B++){var j=oe.document.createElement("source");g=c[B],A=void 0,(A=oe.document.createElement("a")).href=g,(A.protocol!==oe.document.location.protocol||A.host!==oe.document.location.host)&&(P.crossOrigin="Anonymous"),j.src=c[B],P.appendChild(j)}return{cancel:function(){}}},E.identity=Wl,E.invert=function(c,d){var g=d[0],A=d[1],P=d[2],B=d[3],j=d[4],q=d[5],ge=d[6],De=d[7],We=d[8],tt=d[9],xt=d[10],Lt=d[11],fn=d[12],_n=d[13],Hn=d[14],In=d[15],cr=g*q-A*j,gr=g*ge-P*j,Lr=g*De-B*j,Nr=A*ge-P*q,Gr=A*De-B*q,Pi=P*De-B*ge,Yi=We*_n-tt*fn,Do=We*Hn-xt*fn,ho=We*In-Lt*fn,$o=tt*Hn-xt*_n,po=tt*In-Lt*_n,ja=xt*In-Lt*Hn,ua=cr*ja-gr*po+Lr*$o+Nr*ho-Gr*Do+Pi*Yi;return ua?(c[0]=(q*ja-ge*po+De*$o)*(ua=1/ua),c[1]=(P*po-A*ja-B*$o)*ua,c[2]=(_n*Pi-Hn*Gr+In*Nr)*ua,c[3]=(xt*Gr-tt*Pi-Lt*Nr)*ua,c[4]=(ge*ho-j*ja-De*Do)*ua,c[5]=(g*ja-P*ho+B*Do)*ua,c[6]=(Hn*Lr-fn*Pi-In*gr)*ua,c[7]=(We*Pi-xt*Lr+Lt*gr)*ua,c[8]=(j*po-q*ho+De*Yi)*ua,c[9]=(A*ho-g*po-B*Yi)*ua,c[10]=(fn*Gr-_n*Lr+In*cr)*ua,c[11]=(tt*Lr-We*Gr-Lt*cr)*ua,c[12]=(q*Do-j*$o-ge*Yi)*ua,c[13]=(g*$o-A*Do+P*Yi)*ua,c[14]=(_n*gr-fn*Nr-Hn*cr)*ua,c[15]=(We*Nr-tt*gr+xt*cr)*ua,c):null},E.isChar=Zi,E.isMapboxURL=Pt,E.keysDifference=function(c,d){var g=[];for(var A in c)A in d||g.push(A);return g},E.makeRequest=$n,E.mapObject=lt,E.mercatorXfromLng=c_,E.mercatorYfromLat=ng,E.mercatorZfromAltitude=P1,E.mul=Gp,E.multiply=ec,E.mvt=bp,E.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},E.normalize=function(c,d){var g=d[0],A=d[1],P=d[2],B=g*g+A*A+P*P;return B>0&&(B=1/Math.sqrt(B)),c[0]=d[0]*B,c[1]=d[1]*B,c[2]=d[2]*B,c},E.number=Os,E.offscreenCanvasSupported=ye,E.ortho=function(c,d,g,A,P,B,j){var q=1/(d-g),ge=1/(A-P),De=1/(B-j);return c[0]=-2*q,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*ge,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*De,c[11]=0,c[12]=(d+g)*q,c[13]=(P+A)*ge,c[14]=(j+B)*De,c[15]=1,c},E.parseGlyphPBF=function(c){return new Or(c).readFields(li,[])},E.pbf=Or,E.performSymbolLayout=function(c,d,g,A,P,B,j){c.createArrays(),c.tilePixelRatio=8192/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;var q=c.layers[0].layout,ge=c.layers[0]._unevaluatedLayout._values,De={};if(c.textSizeData.kind==="composite"){var We=c.textSizeData,tt=We.maxZoom;De.compositeTextSizes=[ge["text-size"].possiblyEvaluate(new Sa(We.minZoom),j),ge["text-size"].possiblyEvaluate(new Sa(tt),j)]}if(c.iconSizeData.kind==="composite"){var xt=c.iconSizeData,Lt=xt.maxZoom;De.compositeIconSizes=[ge["icon-size"].possiblyEvaluate(new Sa(xt.minZoom),j),ge["icon-size"].possiblyEvaluate(new Sa(Lt),j)]}De.layoutTextSize=ge["text-size"].possiblyEvaluate(new Sa(c.zoom+1),j),De.layoutIconSize=ge["icon-size"].possiblyEvaluate(new Sa(c.zoom+1),j),De.textMaxSize=ge["text-size"].possiblyEvaluate(new Sa(18));for(var fn=24*q.get("text-line-height"),_n=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Hn=q.get("text-keep-upright"),In=q.get("text-size"),cr=function(){var Nr=Lr[gr],Gr=q.get("text-font").evaluate(Nr,{},j).join(","),Pi=In.evaluate(Nr,{},j),Yi=De.layoutTextSize.evaluate(Nr,{},j),Do=De.layoutIconSize.evaluate(Nr,{},j),ho={horizontal:{},vertical:void 0},$o=Nr.text,po=[0,0];if($o){var ja=$o.toString(),ua=24*q.get("text-letter-spacing").evaluate(Nr,{},j),Ao=function(Qa){for(var el=0,$s=Qa;el<$s.length;el+=1)if(xs=$s[el].charCodeAt(0),Zi.Arabic(xs)||Zi["Arabic Supplement"](xs)||Zi["Arabic Extended-A"](xs)||Zi["Arabic Presentation Forms-A"](xs)||Zi["Arabic Presentation Forms-B"](xs))return!1;var xs;return!0}(ja)?ua:0,Ya=q.get("text-anchor").evaluate(Nr,{},j),jo=q.get("text-variable-anchor");if(!jo){var qa=q.get("text-radial-offset").evaluate(Nr,{},j);po=qa?Jn(Ya,[24*qa,jn]):q.get("text-offset").evaluate(Nr,{},j).map(function(Qa){return 24*Qa})}var Vo=_n?"center":q.get("text-justify").evaluate(Nr,{},j),Is=q.get("symbol-placement"),il=Is==="point"?24*q.get("text-max-width").evaluate(Nr,{},j):0,Xl=function(){c.allowVerticalPlacement&&xf(ja)&&(ho.vertical=va($o,d,g,P,Gr,il,fn,Ya,"left",Ao,po,ko.vertical,!0,Is,Yi,Pi))};if(!_n&&jo){for(var Nl=Vo==="auto"?jo.map(function(Qa){return nr(Qa)}):[Vo],wl=!1,rc=0;rc<Nl.length;rc++){var fc=Nl[rc];if(!ho.horizontal[fc])if(wl)ho.horizontal[fc]=ho.horizontal[0];else{var _c=va($o,d,g,P,Gr,il,fn,"center",fc,Ao,po,ko.horizontal,!1,Is,Yi,Pi);_c&&(ho.horizontal[fc]=_c,wl=_c.positionedLines.length===1)}}Xl()}else{Vo==="auto"&&(Vo=nr(Ya));var Wu=va($o,d,g,P,Gr,il,fn,Ya,Vo,Ao,po,ko.horizontal,!1,Is,Yi,Pi);Wu&&(ho.horizontal[Vo]=Wu),Xl(),xf(ja)&&_n&&Hn&&(ho.vertical=va($o,d,g,P,Gr,il,fn,Ya,Vo,Ao,po,ko.vertical,!1,Is,Yi,Pi))}}var Lc=void 0,Gu=!1;if(Nr.icon&&Nr.icon.name){var $l=A[Nr.icon.name];$l&&(Lc=function(Qa,el,$s){var xs=qs($s),Zu=el[0]-Qa.displaySize[0]*xs.horizontalAlign,gu=el[1]-Qa.displaySize[1]*xs.verticalAlign;return{image:Qa,top:gu,bottom:gu+Qa.displaySize[1],left:Zu,right:Zu+Qa.displaySize[0]}}(P[Nr.icon.name],q.get("icon-offset").evaluate(Nr,{},j),q.get("icon-anchor").evaluate(Nr,{},j)),Gu=$l.sdf,c.sdfIcons===void 0?c.sdfIcons=$l.sdf:c.sdfIcons!==$l.sdf&&ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($l.pixelRatio!==c.pixelRatio||q.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}var au=Wn(ho.horizontal)||ho.vertical;c.iconsInText=!!au&&au.iconsInText,(au||Lc)&&function(Qa,el,$s,xs,Zu,gu,pl,hc,bc,Ts,js){var ch=gu.textMaxSize.evaluate(el,{});ch===void 0&&(ch=pl);var Gd,vl=Qa.layers[0].layout,uh=vl.get("icon-offset").evaluate(el,{},js),Xu=Wn($s.horizontal),Zd=pl/24,Xf=Qa.tilePixelRatio*Zd,Ap=Qa.tilePixelRatio*ch/24,Bh=Qa.tilePixelRatio*hc,Fh=Qa.tilePixelRatio*vl.get("symbol-spacing"),k0=vl.get("text-padding")*Qa.tilePixelRatio,$f=vl.get("icon-padding")*Qa.tilePixelRatio,sm=vl.get("text-max-angle")/180*Math.PI,$g=vl.get("text-rotation-alignment")==="map"&&vl.get("symbol-placement")!=="point",u_=vl.get("icon-rotation-alignment")==="map"&&vl.get("symbol-placement")!=="point",sd=vl.get("symbol-placement"),i0=Fh/2,mv=vl.get("icon-text-fit");xs&&mv!=="none"&&(Qa.allowVerticalPlacement&&$s.vertical&&(Gd=tc(xs,$s.vertical,mv,vl.get("icon-text-fit-padding"),uh,Zd)),Xu&&(xs=tc(xs,Xu,mv,vl.get("icon-text-fit-padding"),uh,Zd)));var U0=function(og,_v){_v.x<0||_v.x>=8192||_v.y<0||_v.y>=8192||function(ws,fh,L1,a0,qg,v_,Qg,uf,Jg,ag,s0,ey,ty,m_,sg,Ex,Sx,D1,g_,y_,kh,lg,$d,Op,ny){var N1,hh,Dc,bv,dm,l0=ws.addToLineVertexArray(fh,L1),xv=0,Tx=0,__=0,b_=0,cg=-1,B1=-1,dh={},ry=on(""),ug=0,fg=0;if(uf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ug=(N1=uf.layout.get("text-offset").evaluate(kh,{},Op).map(function(f0){return 24*f0}))[0],fg=N1[1]):(ug=24*uf.layout.get("text-radial-offset").evaluate(kh,{},Op),fg=jn),ws.allowVerticalPlacement&&a0.vertical){var Al=uf.layout.get("text-rotate").evaluate(kh,{},Op)+90;bv=new Ps(Jg,fh,ag,s0,ey,a0.vertical,ty,m_,sg,Al),Qg&&(dm=new Ps(Jg,fh,ag,s0,ey,Qg,Sx,D1,sg,Al))}if(qg){var x_=uf.layout.get("icon-rotate").evaluate(kh,{}),E_=uf.layout.get("icon-text-fit")!=="none",oS=mn(qg,x_,$d,E_),Ax=Qg?mn(Qg,x_,$d,E_):void 0;Dc=new Ps(Jg,fh,ag,s0,ey,qg,Sx,D1,!1,x_),xv=4*oS.length;var F1=ws.iconSizeData,c0=null;F1.kind==="source"?(c0=[128*uf.layout.get("icon-size").evaluate(kh,{})])[0]>32640&&ut(ws.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):F1.kind==="composite"&&((c0=[128*lg.compositeIconSizes[0].evaluate(kh,{},Op),128*lg.compositeIconSizes[1].evaluate(kh,{},Op)])[0]>32640||c0[1]>32640)&&ut(ws.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ws.addSymbols(ws.icon,oS,c0,y_,g_,kh,!1,fh,l0.lineStartIndex,l0.lineLength,-1,Op),cg=ws.icon.placedSymbolArray.length-1,Ax&&(Tx=4*Ax.length,ws.addSymbols(ws.icon,Ax,c0,y_,g_,kh,ko.vertical,fh,l0.lineStartIndex,l0.lineLength,-1,Op),B1=ws.icon.placedSymbolArray.length-1)}for(var aS in a0.horizontal){var Ls=a0.horizontal[aS];if(!hh){ry=on(Ls.text);var Cx=uf.layout.get("text-rotate").evaluate(kh,{},Op);hh=new Ps(Jg,fh,ag,s0,ey,Ls,ty,m_,sg,Cx)}var sS=Ls.positionedLines.length===1;if(__+=xn(ws,fh,Ls,v_,uf,sg,kh,Ex,l0,a0.vertical?ko.horizontal:ko.horizontalOnly,sS?Object.keys(a0.horizontal):[aS],dh,cg,lg,Op),sS)break}a0.vertical&&(b_+=xn(ws,fh,a0.vertical,v_,uf,sg,kh,Ex,l0,ko.vertical,["vertical"],dh,B1,lg,Op));var Yd=hh?hh.boxStartIndex:ws.collisionBoxArray.length,u0=hh?hh.boxEndIndex:ws.collisionBoxArray.length,hg=bv?bv.boxStartIndex:ws.collisionBoxArray.length,k1=bv?bv.boxEndIndex:ws.collisionBoxArray.length,Ev=Dc?Dc.boxStartIndex:ws.collisionBoxArray.length,iy=Dc?Dc.boxEndIndex:ws.collisionBoxArray.length,Ox=dm?dm.boxStartIndex:ws.collisionBoxArray.length,lS=dm?dm.boxEndIndex:ws.collisionBoxArray.length,Rp=-1,V0=function(f0,ai){return f0&&f0.circleDiameter?Math.max(f0.circleDiameter,ai):ai};Rp=V0(hh,Rp),Rp=V0(bv,Rp),Rp=V0(Dc,Rp);var Sv=(Rp=V0(dm,Rp))>-1?1:0;Sv&&(Rp*=ny/24),ws.glyphOffsetArray.length>=ki.MAX_GLYPHS&&ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kh.sortKey!==void 0&&ws.addToSortKeyRanges(ws.symbolInstances.length,kh.sortKey),ws.symbolInstances.emplaceBack(fh.x,fh.y,dh.right>=0?dh.right:-1,dh.center>=0?dh.center:-1,dh.left>=0?dh.left:-1,dh.vertical||-1,cg,B1,ry,Yd,u0,hg,k1,Ev,iy,Ox,lS,ag,__,b_,xv,Tx,Sv,0,ty,ug,fg,Rp)}(Qa,_v,og,$s,xs,Zu,Gd,Qa.layers[0],Qa.collisionBoxArray,el.index,el.sourceLayerIndex,Qa.index,Xf,k0,$g,bc,Bh,$f,u_,uh,el,gu,Ts,js,pl)};if(sd==="line")for(var gv=0,lm=Nh(el.geometry,0,0,8192,8192);gv<lm.length;gv+=1)for(var f_=lm[gv],ig=0,o0=uc(f_,Fh,sm,$s.vertical||Xu,xs,24,Ap,Qa.overscaling,8192);ig<o0.length;ig+=1){var z0=o0[ig];Xu&&en(Qa,Xu.text,i0,z0)||U0(f_,z0)}else if(sd==="line-center")for(var cm=0,j0=el.geometry;cm<j0.length;cm+=1){var um=j0[cm];if(um.length>1){var h_=ys(um,sm,$s.vertical||Xu,xs,24,Ap);h_&&U0(um,h_)}}else if(el.type==="Polygon")for(var yu=0,yv=Dh(el.geometry,0);yu<yv.length;yu+=1){var fm=yv[yu],hm=Mn(fm,16);U0(fm[0],new ss(hm.x,hm.y,0))}else if(el.type==="LineString")for(var Cp=0,Xd=el.geometry;Cp<Xd.length;Cp+=1){var ld=Xd[Cp];U0(ld,new ss(ld[0].x,ld[0].y,0))}else if(el.type==="Point")for(var Yg=0,d_=el.geometry;Yg<d_.length;Yg+=1)for(var p_=0,cd=d_[Yg];p_<cd.length;p_+=1){var Kg=cd[p_];U0([Kg],new ss(Kg.x,Kg.y,0))}}(c,Nr,ho,Lc,A,De,Yi,Do,po,Gu,j)},gr=0,Lr=c.features;gr<Lr.length;gr+=1)cr();B&&c.generateCollisionDebugBuffers()},E.perspective=function(c,d,g,A,P){var B,j=1/Math.tan(d/2);return c[0]=j/g,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=j,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,P!=null&&P!==1/0?(c[10]=(P+A)*(B=1/(A-P)),c[14]=2*P*A*B):(c[10]=-1,c[14]=-2*A),c},E.pick=function(c,d){for(var g={},A=0;A<d.length;A++){var P=d[A];P in c&&(g[P]=c[P])}return g},E.plugin=ju,E.polygonIntersectsPolygon=Hf,E.postMapLoadEvent=dn,E.postTurnstileEvent=Xn,E.potpack=pa,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=fo,E.registerForPluginStateChange=function(c){return c({pluginStatus:Kc,pluginURL:rh}),T0.on("pluginStateChange",c),c},E.renderColorRamp=$v,E.rotate=function(c,d,g){var A=d[0],P=d[1],B=d[2],j=d[3],q=Math.sin(g),ge=Math.cos(g);return c[0]=A*ge+B*q,c[1]=P*ge+j*q,c[2]=A*-q+B*ge,c[3]=P*-q+j*ge,c},E.rotateX=function(c,d,g){var A=Math.sin(g),P=Math.cos(g),B=d[4],j=d[5],q=d[6],ge=d[7],De=d[8],We=d[9],tt=d[10],xt=d[11];return d!==c&&(c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15]),c[4]=B*P+De*A,c[5]=j*P+We*A,c[6]=q*P+tt*A,c[7]=ge*P+xt*A,c[8]=De*P-B*A,c[9]=We*P-j*A,c[10]=tt*P-q*A,c[11]=xt*P-ge*A,c},E.rotateZ=function(c,d,g){var A=Math.sin(g),P=Math.cos(g),B=d[0],j=d[1],q=d[2],ge=d[3],De=d[4],We=d[5],tt=d[6],xt=d[7];return d!==c&&(c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15]),c[0]=B*P+De*A,c[1]=j*P+We*A,c[2]=q*P+tt*A,c[3]=ge*P+xt*A,c[4]=De*P-B*A,c[5]=We*P-j*A,c[6]=tt*P-q*A,c[7]=xt*P-ge*A,c},E.scale=function(c,d,g){var A=g[0],P=g[1],B=g[2];return c[0]=d[0]*A,c[1]=d[1]*A,c[2]=d[2]*A,c[3]=d[3]*A,c[4]=d[4]*P,c[5]=d[5]*P,c[6]=d[6]*P,c[7]=d[7]*P,c[8]=d[8]*B,c[9]=d[9]*B,c[10]=d[10]*B,c[11]=d[11]*B,c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],c},E.scale$1=function(c,d,g){return c[0]=d[0]*g,c[1]=d[1]*g,c[2]=d[2]*g,c[3]=d[3]*g,c},E.scale$2=function(c,d,g){return c[0]=d[0]*g,c[1]=d[1]*g,c[2]=d[2]*g,c},E.setCacheLimits=function(c,d){mt=c,Ct=d},E.setRTLTextPlugin=function(c,d,g){if(g===void 0&&(g=!1),Kc==="deferred"||Kc==="loading"||Kc==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");rh=kn.resolveURL(c),Kc="deferred",Mh=d,Fd(),g||du()},E.sphericalToCartesian=function(c){var d=c[0],g=c[1],A=c[2];return g+=90,g*=Math.PI/180,A*=Math.PI/180,{x:d*Math.cos(g)*Math.sin(A),y:d*Math.sin(g)*Math.sin(A),z:d*Math.cos(A)}},E.sqrLen=function(c){var d=c[0],g=c[1];return d*d+g*g},E.styleSpec=_t,E.sub=function(c,d,g){return c[0]=d[0]-g[0],c[1]=d[1]-g[1],c[2]=d[2]-g[2],c},E.symbolSize=Ca,E.transformMat3=function(c,d,g){var A=d[0],P=d[1],B=d[2];return c[0]=A*g[0]+P*g[3]+B*g[6],c[1]=A*g[1]+P*g[4]+B*g[7],c[2]=A*g[2]+P*g[5]+B*g[8],c},E.transformMat4=sh,E.translate=function(c,d,g){var A,P,B,j,q,ge,De,We,tt,xt,Lt,fn,_n=g[0],Hn=g[1],In=g[2];return d===c?(c[12]=d[0]*_n+d[4]*Hn+d[8]*In+d[12],c[13]=d[1]*_n+d[5]*Hn+d[9]*In+d[13],c[14]=d[2]*_n+d[6]*Hn+d[10]*In+d[14],c[15]=d[3]*_n+d[7]*Hn+d[11]*In+d[15]):(P=d[1],B=d[2],j=d[3],q=d[4],ge=d[5],De=d[6],We=d[7],tt=d[8],xt=d[9],Lt=d[10],fn=d[11],c[0]=A=d[0],c[1]=P,c[2]=B,c[3]=j,c[4]=q,c[5]=ge,c[6]=De,c[7]=We,c[8]=tt,c[9]=xt,c[10]=Lt,c[11]=fn,c[12]=A*_n+q*Hn+tt*In+d[12],c[13]=P*_n+ge*Hn+xt*In+d[13],c[14]=B*_n+De*Hn+Lt*In+d[14],c[15]=j*_n+We*Hn+fn*In+d[15]),c},E.triggerPluginCompletionEvent=S0,E.uniqueId=He,E.validateCustomStyleLayer=function(c){var d=[],g=c.id;return g===void 0&&d.push({message:"layers."+g+': missing required property "id"'}),c.render===void 0&&d.push({message:"layers."+g+': missing required method "render"'}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&d.push({message:"layers."+g+': property "renderingMode" must be either "2d" or "3d"'}),d},E.validateLight=Ki,E.validateStyle=gi,E.values=function(c){var d=[];for(var g in c)d.push(c[g]);return d},E.vectorTile=bp,E.version="1.13.3",E.warnOnce=ut,E.webpSupported=zt,E.window=oe,E.wrap=be}),Z(["./shared"],function(E){"use strict";function ve(Ce){var xe=typeof Ce;if(xe==="number"||xe==="boolean"||xe==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){for(var ke="[",et=0,Tt=Ce;et<Tt.length;et+=1)ke+=ve(Tt[et])+",";return ke+"]"}for(var Yt=Object.keys(Ce).sort(),pn="{",_t=0;_t<Yt.length;_t++)pn+=JSON.stringify(Yt[_t])+":"+ve(Ce[Yt[_t]])+",";return pn+"}"}function te(Ce){for(var xe="",ke=0,et=E.refProperties;ke<et.length;ke+=1)xe+="/"+ve(Ce[et[ke]]);return xe}var se=function(Ce){this.keyCache={},Ce&&this.replace(Ce)};se.prototype.replace=function(Ce){this._layerConfigs={},this._layers={},this.update(Ce,[])},se.prototype.update=function(Ce,xe){for(var ke=this,et=0,Tt=Ce;et<Tt.length;et+=1){var Yt=Tt[et];this._layerConfigs[Yt.id]=Yt;var pn=this._layers[Yt.id]=E.createStyleLayer(Yt);pn._featureFilter=E.featureFilter(pn.filter),this.keyCache[Yt.id]&&delete this.keyCache[Yt.id]}for(var _t=0,qt=xe;_t<qt.length;_t+=1){var Qn=qt[_t];delete this.keyCache[Qn],delete this._layerConfigs[Qn],delete this._layers[Qn]}this.familiesBySource={};for(var _r=0,Vr=function(hi,si){for(var Mo={},bi=0;bi<hi.length;bi++){var na=si&&si[hi[bi].id]||te(hi[bi]);si&&(si[hi[bi].id]=na);var _a=Mo[na];_a||(_a=Mo[na]=[]),_a.push(hi[bi])}var Ro=[];for(var qo in Mo)Ro.push(Mo[qo]);return Ro}(E.values(this._layerConfigs),this.keyCache);_r<Vr.length;_r+=1){var pr=Vr[_r].map(function(hi){return ke._layers[hi.id]}),Ur=pr[0];if(Ur.visibility!=="none"){var mi=Ur.source||"",wi=this.familiesBySource[mi];wi||(wi=this.familiesBySource[mi]={});var Sr=Ur.sourceLayer||"_geojsonTileLayer",Ti=wi[Sr];Ti||(Ti=wi[Sr]=[]),Ti.push(pr)}}};var ae=function(Ce){var xe={},ke=[];for(var et in Ce){var Tt=Ce[et],Yt=xe[et]={};for(var pn in Tt){var _t=Tt[+pn];if(_t&&_t.bitmap.width!==0&&_t.bitmap.height!==0){var qt={x:0,y:0,w:_t.bitmap.width+2,h:_t.bitmap.height+2};ke.push(qt),Yt[pn]={rect:qt,metrics:_t.metrics}}}}var Qn=E.potpack(ke),_r=new E.AlphaImage({width:Qn.w||1,height:Qn.h||1});for(var Vr in Ce){var pr=Ce[Vr];for(var Ur in pr){var mi=pr[+Ur];if(mi&&mi.bitmap.width!==0&&mi.bitmap.height!==0){var wi=xe[Vr][Ur].rect;E.AlphaImage.copy(mi.bitmap,_r,{x:0,y:0},{x:wi.x+1,y:wi.y+1},mi.bitmap)}}}this.image=_r,this.positions=xe};E.register("GlyphAtlas",ae);var Se=function(Ce){this.tileID=new E.OverscaledTileID(Ce.tileID.overscaledZ,Ce.tileID.wrap,Ce.tileID.canonical.z,Ce.tileID.canonical.x,Ce.tileID.canonical.y),this.uid=Ce.uid,this.zoom=Ce.zoom,this.pixelRatio=Ce.pixelRatio,this.tileSize=Ce.tileSize,this.source=Ce.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ce.showCollisionBoxes,this.collectResourceTiming=!!Ce.collectResourceTiming,this.returnDependencies=!!Ce.returnDependencies,this.promoteId=Ce.promoteId};function oe(Ce,xe,ke){for(var et=new E.EvaluationParameters(xe),Tt=0,Yt=Ce;Tt<Yt.length;Tt+=1)Yt[Tt].recalculate(et,ke)}function Ge(Ce,xe){var ke=E.getArrayBuffer(Ce.request,function(et,Tt,Yt,pn){et?xe(et):Tt&&xe(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(Tt)),rawData:Tt,cacheControl:Yt,expires:pn})});return function(){ke.cancel(),xe()}}Se.prototype.parse=function(Ce,xe,ke,et,Tt){var Yt=this;this.status="parsing",this.data=Ce,this.collisionBoxArray=new E.CollisionBoxArray;var pn=new E.DictionaryCoder(Object.keys(Ce.layers).sort()),_t=new E.FeatureIndex(this.tileID,this.promoteId);_t.bucketLayerIDs=[];var qt,Qn,_r,Vr,pr={},Ur={featureIndex:_t,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ke},mi=xe.familiesBySource[this.source];for(var wi in mi){var Sr=Ce.layers[wi];if(Sr){Sr.version===1&&E.warnOnce('Vector tile source "'+this.source+'" layer "'+wi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ti=pn.encode(wi),hi=[],si=0;si<Sr.length;si++){var Mo=Sr.feature(si),bi=_t.getId(Mo,wi);hi.push({feature:Mo,id:bi,index:si,sourceLayerIndex:Ti})}for(var na=0,_a=mi[wi];na<_a.length;na+=1){var Ro=_a[na],qo=Ro[0];qo.minzoom&&this.zoom<Math.floor(qo.minzoom)||qo.maxzoom&&this.zoom>=qo.maxzoom||qo.visibility!=="none"&&(oe(Ro,this.zoom,ke),(pr[qo.id]=qo.createBucket({index:_t.bucketLayerIDs.length,layers:Ro,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ti,sourceID:this.source})).populate(hi,Ur,this.tileID.canonical),_t.bucketLayerIDs.push(Ro.map(function(Nn){return Nn.id})))}}}var Ne=E.mapObject(Ur.glyphDependencies,function(Nn){return Object.keys(Nn).map(Number)});Object.keys(Ne).length?et.send("getGlyphs",{uid:this.uid,stacks:Ne},function(Nn,Bn){qt||(qt=Nn,Qn=Bn,sn.call(Yt))}):Qn={};var Je=Object.keys(Ur.iconDependencies);Je.length?et.send("getImages",{icons:Je,source:this.source,tileID:this.tileID,type:"icons"},function(Nn,Bn){qt||(qt=Nn,_r=Bn,sn.call(Yt))}):_r={};var kt=Object.keys(Ur.patternDependencies);function sn(){if(qt)return Tt(qt);if(Qn&&_r&&Vr){var Nn=new ae(Qn),Bn=new E.ImageAtlas(_r,Vr);for(var gn in pr){var On=pr[gn];On instanceof E.SymbolBucket?(oe(On.layers,this.zoom,ke),E.performSymbolLayout(On,Qn,Nn.positions,_r,Bn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):On.hasPattern&&(On instanceof E.LineBucket||On instanceof E.FillBucket||On instanceof E.FillExtrusionBucket)&&(oe(On.layers,this.zoom,ke),On.addFeatures(Ur,this.tileID.canonical,Bn.patternPositions))}this.status="done",Tt(null,{buckets:E.values(pr).filter(function(dr){return!dr.isEmpty()}),featureIndex:_t,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Qn:null,iconMap:this.returnDependencies?_r:null,glyphPositions:this.returnDependencies?Nn.positions:null})}}kt.length?et.send("getImages",{icons:kt,source:this.source,tileID:this.tileID,type:"patterns"},function(Nn,Bn){qt||(qt=Nn,Vr=Bn,sn.call(Yt))}):Vr={},sn.call(this)};var ee=function(Ce,xe,ke,et){this.actor=Ce,this.layerIndex=xe,this.availableImages=ke,this.loadVectorData=et||Ge,this.loading={},this.loaded={}};ee.prototype.loadTile=function(Ce,xe){var ke=this,et=Ce.uid;this.loading||(this.loading={});var Tt=!!(Ce&&Ce.request&&Ce.request.collectResourceTiming)&&new E.RequestPerformance(Ce.request),Yt=this.loading[et]=new Se(Ce);Yt.abort=this.loadVectorData(Ce,function(pn,_t){if(delete ke.loading[et],pn||!_t)return Yt.status="done",ke.loaded[et]=Yt,xe(pn);var qt=_t.rawData,Qn={};_t.expires&&(Qn.expires=_t.expires),_t.cacheControl&&(Qn.cacheControl=_t.cacheControl);var _r={};if(Tt){var Vr=Tt.finish();Vr&&(_r.resourceTiming=JSON.parse(JSON.stringify(Vr)))}Yt.vectorTile=_t.vectorTile,Yt.parse(_t.vectorTile,ke.layerIndex,ke.availableImages,ke.actor,function(pr,Ur){if(pr||!Ur)return xe(pr);xe(null,E.extend({rawTileData:qt.slice(0)},Ur,Qn,_r))}),ke.loaded=ke.loaded||{},ke.loaded[et]=Yt})},ee.prototype.reloadTile=function(Ce,xe){var ke=this,et=this.loaded,Tt=Ce.uid,Yt=this;if(et&&et[Tt]){var pn=et[Tt];pn.showCollisionBoxes=Ce.showCollisionBoxes;var _t=function(qt,Qn){var _r=pn.reloadCallback;_r&&(delete pn.reloadCallback,pn.parse(pn.vectorTile,Yt.layerIndex,ke.availableImages,Yt.actor,_r)),xe(qt,Qn)};pn.status==="parsing"?pn.reloadCallback=_t:pn.status==="done"&&(pn.vectorTile?pn.parse(pn.vectorTile,this.layerIndex,this.availableImages,this.actor,_t):_t())}},ee.prototype.abortTile=function(Ce,xe){var ke=this.loading,et=Ce.uid;ke&&ke[et]&&ke[et].abort&&(ke[et].abort(),delete ke[et]),xe()},ee.prototype.removeTile=function(Ce,xe){var ke=this.loaded,et=Ce.uid;ke&&ke[et]&&delete ke[et],xe()};var me=E.window.ImageBitmap,Le=function(){this.loaded={}};function be(Ce,xe){if(Ce.length!==0){Oe(Ce[0],xe);for(var ke=1;ke<Ce.length;ke++)Oe(Ce[ke],!xe)}}function Oe(Ce,xe){for(var ke=0,et=0,Tt=0,Yt=Ce.length,pn=Yt-1;Tt<Yt;pn=Tt++){var _t=(Ce[Tt][0]-Ce[pn][0])*(Ce[pn][1]+Ce[Tt][1]),qt=ke+_t;et+=Math.abs(ke)>=Math.abs(_t)?ke-qt+_t:_t-qt+ke,ke=qt}ke+et>=0!=!!xe&&Ce.reverse()}Le.prototype.loadTile=function(Ce,xe){var ke=Ce.uid,et=Ce.encoding,Tt=Ce.rawImageData,Yt=me&&Tt instanceof me?this.getImageData(Tt):Tt,pn=new E.DEMData(ke,Yt,et);this.loaded=this.loaded||{},this.loaded[ke]=pn,xe(null,pn)},Le.prototype.getImageData=function(Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ce.width,Ce.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ce.width,this.offscreenCanvas.height=Ce.height,this.offscreenCanvasContext.drawImage(Ce,0,0,Ce.width,Ce.height);var xe=this.offscreenCanvasContext.getImageData(-1,-1,Ce.width+2,Ce.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:xe.width,height:xe.height},xe.data)},Le.prototype.removeTile=function(Ce){var xe=this.loaded,ke=Ce.uid;xe&&xe[ke]&&delete xe[ke]};var fe=E.vectorTile.VectorTileFeature.prototype.toGeoJSON,He=function(Ce){this._feature=Ce,this.extent=E.EXTENT,this.type=Ce.type,this.properties=Ce.tags,"id"in Ce&&!isNaN(Ce.id)&&(this.id=parseInt(Ce.id,10))};He.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ce=[],xe=0,ke=this._feature.geometry;xe<ke.length;xe+=1){var et=ke[xe];Ce.push([new E.Point$1(et[0],et[1])])}return Ce}for(var Tt=[],Yt=0,pn=this._feature.geometry;Yt<pn.length;Yt+=1){for(var _t=[],qt=0,Qn=pn[Yt];qt<Qn.length;qt+=1){var _r=Qn[qt];_t.push(new E.Point$1(_r[0],_r[1]))}Tt.push(_t)}return Tt},He.prototype.toGeoJSON=function(Ce,xe,ke){return fe.call(this,Ce,xe,ke)};var bt=function(Ce){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=Ce.length,this._features=Ce};bt.prototype.feature=function(Ce){return new He(this._features[Ce])};var dt=E.vectorTile.VectorTileFeature,Nt=ct;function ct(Ce,xe){this.options=xe||{},this.features=Ce,this.length=Ce.length}function lt(Ce,xe){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=xe||4096}ct.prototype.feature=function(Ce){return new lt(this.features[Ce],this.options.extent)},lt.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var xe=0;xe<Ce.length;xe++){for(var ke=Ce[xe],et=[],Tt=0;Tt<ke.length;Tt++)et.push(new E.Point$1(ke[Tt][0],ke[Tt][1]));this.geometry.push(et)}return this.geometry},lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,xe=1/0,ke=-1/0,et=1/0,Tt=-1/0,Yt=0;Yt<Ce.length;Yt++)for(var pn=Ce[Yt],_t=0;_t<pn.length;_t++){var qt=pn[_t];xe=Math.min(xe,qt.x),ke=Math.max(ke,qt.x),et=Math.min(et,qt.y),Tt=Math.max(Tt,qt.y)}return[xe,et,ke,Tt]},lt.prototype.toGeoJSON=dt.prototype.toGeoJSON;var Ie=pt,Ae=Nt;function pt(Ce){var xe=new E.pbf;return function(ke,et){for(var Tt in ke.layers)et.writeMessage(3,ut,ke.layers[Tt])}(Ce,xe),xe.finish()}function ut(Ce,xe){var ke;xe.writeVarintField(15,Ce.version||1),xe.writeStringField(1,Ce.name||""),xe.writeVarintField(5,Ce.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<Ce.length;ke++)et.feature=Ce.feature(ke),xe.writeMessage(2,Et,et);var Tt=et.keys;for(ke=0;ke<Tt.length;ke++)xe.writeStringField(3,Tt[ke]);var Yt=et.values;for(ke=0;ke<Yt.length;ke++)xe.writeMessage(4,nt,Yt[ke])}function Et(Ce,xe){var ke=Ce.feature;ke.id!==void 0&&xe.writeVarintField(1,ke.id),xe.writeMessage(2,cn,Ce),xe.writeVarintField(3,ke.type),xe.writeMessage(4,we,ke)}function cn(Ce,xe){var ke=Ce.feature,et=Ce.keys,Tt=Ce.values,Yt=Ce.keycache,pn=Ce.valuecache;for(var _t in ke.properties){var qt=Yt[_t];qt===void 0&&(et.push(_t),Yt[_t]=qt=et.length-1),xe.writeVarint(qt);var Qn=ke.properties[_t],_r=typeof Qn;_r!=="string"&&_r!=="boolean"&&_r!=="number"&&(Qn=JSON.stringify(Qn));var Vr=_r+":"+Qn,pr=pn[Vr];pr===void 0&&(Tt.push(Qn),pn[Vr]=pr=Tt.length-1),xe.writeVarint(pr)}}function ze(Ce,xe){return(xe<<3)+(7&Ce)}function St(Ce){return Ce<<1^Ce>>31}function we(Ce,xe){for(var ke=Ce.loadGeometry(),et=Ce.type,Tt=0,Yt=0,pn=ke.length,_t=0;_t<pn;_t++){var qt=ke[_t],Qn=1;et===1&&(Qn=qt.length),xe.writeVarint(ze(1,Qn));for(var _r=et===3?qt.length-1:qt.length,Vr=0;Vr<_r;Vr++){Vr===1&&et!==1&&xe.writeVarint(ze(2,_r-1));var pr=qt[Vr].x-Tt,Ur=qt[Vr].y-Yt;xe.writeVarint(St(pr)),xe.writeVarint(St(Ur)),Tt+=pr,Yt+=Ur}et===3&&xe.writeVarint(ze(7,1))}}function nt(Ce,xe){var ke=typeof Ce;ke==="string"?xe.writeStringField(1,Ce):ke==="boolean"?xe.writeBooleanField(7,Ce):ke==="number"&&(Ce%1!=0?xe.writeDoubleField(3,Ce):Ce<0?xe.writeSVarintField(6,Ce):xe.writeVarintField(5,Ce))}function Xe(Ce,xe,ke,et){Ze(Ce,ke,et),Ze(xe,2*ke,2*et),Ze(xe,2*ke+1,2*et+1)}function Ze(Ce,xe,ke){var et=Ce[xe];Ce[xe]=Ce[ke],Ce[ke]=et}function Rt(Ce,xe,ke,et){var Tt=Ce-ke,Yt=xe-et;return Tt*Tt+Yt*Yt}Ie.fromVectorTileJs=pt,Ie.fromGeojsonVt=function(Ce,xe){xe=xe||{};var ke={};for(var et in Ce)ke[et]=new Nt(Ce[et].features,xe),ke[et].name=et,ke[et].version=xe.version,ke[et].extent=xe.extent;return pt({layers:ke})},Ie.GeoJSONWrapper=Ae;var yt=function(Ce){return Ce[0]},Me=function(Ce){return Ce[1]},Gt=function(Ce,xe,ke,et,Tt){xe===void 0&&(xe=yt),ke===void 0&&(ke=Me),et===void 0&&(et=64),Tt===void 0&&(Tt=Float64Array),this.nodeSize=et,this.points=Ce;for(var Yt=Ce.length<65536?Uint16Array:Uint32Array,pn=this.ids=new Yt(Ce.length),_t=this.coords=new Tt(2*Ce.length),qt=0;qt<Ce.length;qt++)pn[qt]=qt,_t[2*qt]=xe(Ce[qt]),_t[2*qt+1]=ke(Ce[qt]);(function Qn(_r,Vr,pr,Ur,mi,wi){if(!(mi-Ur<=pr)){var Sr=Ur+mi>>1;(function Ti(hi,si,Mo,bi,na,_a){for(;na>bi;){if(na-bi>600){var Ro=na-bi+1,qo=Mo-bi+1,Ne=Math.log(Ro),Je=.5*Math.exp(2*Ne/3),kt=.5*Math.sqrt(Ne*Je*(Ro-Je)/Ro)*(qo-Ro/2<0?-1:1);Ti(hi,si,Mo,Math.max(bi,Math.floor(Mo-qo*Je/Ro+kt)),Math.min(na,Math.floor(Mo+(Ro-qo)*Je/Ro+kt)),_a)}var sn=si[2*Mo+_a],Nn=bi,Bn=na;for(Xe(hi,si,bi,Mo),si[2*na+_a]>sn&&Xe(hi,si,bi,na);Nn<Bn;){for(Xe(hi,si,Nn,Bn),Nn++,Bn--;si[2*Nn+_a]<sn;)Nn++;for(;si[2*Bn+_a]>sn;)Bn--}si[2*bi+_a]===sn?Xe(hi,si,bi,Bn):Xe(hi,si,++Bn,na),Bn<=Mo&&(bi=Bn+1),Mo<=Bn&&(na=Bn-1)}})(_r,Vr,Sr,Ur,mi,wi%2),Qn(_r,Vr,pr,Ur,Sr-1,wi+1),Qn(_r,Vr,pr,Sr+1,mi,wi+1)}})(pn,_t,et,0,pn.length-1,0)};Gt.prototype.range=function(Ce,xe,ke,et){return function(Tt,Yt,pn,_t,qt,Qn,_r){for(var Vr,pr,Ur=[0,Tt.length-1,0],mi=[];Ur.length;){var wi=Ur.pop(),Sr=Ur.pop(),Ti=Ur.pop();if(Sr-Ti<=_r)for(var hi=Ti;hi<=Sr;hi++)pr=Yt[2*hi+1],(Vr=Yt[2*hi])>=pn&&Vr<=qt&&pr>=_t&&pr<=Qn&&mi.push(Tt[hi]);else{var si=Math.floor((Ti+Sr)/2);pr=Yt[2*si+1],(Vr=Yt[2*si])>=pn&&Vr<=qt&&pr>=_t&&pr<=Qn&&mi.push(Tt[si]);var Mo=(wi+1)%2;(wi===0?pn<=Vr:_t<=pr)&&(Ur.push(Ti),Ur.push(si-1),Ur.push(Mo)),(wi===0?qt>=Vr:Qn>=pr)&&(Ur.push(si+1),Ur.push(Sr),Ur.push(Mo))}}return mi}(this.ids,this.coords,Ce,xe,ke,et,this.nodeSize)},Gt.prototype.within=function(Ce,xe,ke){return function(et,Tt,Yt,pn,_t,qt){for(var Qn=[0,et.length-1,0],_r=[],Vr=_t*_t;Qn.length;){var pr=Qn.pop(),Ur=Qn.pop(),mi=Qn.pop();if(Ur-mi<=qt)for(var wi=mi;wi<=Ur;wi++)Rt(Tt[2*wi],Tt[2*wi+1],Yt,pn)<=Vr&&_r.push(et[wi]);else{var Sr=Math.floor((mi+Ur)/2),Ti=Tt[2*Sr],hi=Tt[2*Sr+1];Rt(Ti,hi,Yt,pn)<=Vr&&_r.push(et[Sr]);var si=(pr+1)%2;(pr===0?Yt-_t<=Ti:pn-_t<=hi)&&(Qn.push(mi),Qn.push(Sr-1),Qn.push(si)),(pr===0?Yt+_t>=Ti:pn+_t>=hi)&&(Qn.push(Sr+1),Qn.push(Ur),Qn.push(si))}}return _r}(this.ids,this.coords,Ce,xe,ke,this.nodeSize)};var ln={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ce){return Ce}},Ln=function(Ce){this.options=rn(Object.create(ln),Ce),this.trees=new Array(this.options.maxZoom+1)};function kn(Ce,xe,ke,et,Tt){return{x:Ce,y:xe,zoom:1/0,id:ke,parentId:-1,numPoints:et,properties:Tt}}function lr(Ce,xe){var ke=Ce.geometry.coordinates,et=ke[1];return{x:yn(ke[0]),y:Kn(et),zoom:1/0,index:xe,parentId:-1}}function zt(Ce){return{type:"Feature",id:Ce.id,properties:Kt(Ce),geometry:{type:"Point",coordinates:[(et=Ce.x,360*(et-.5)),(xe=Ce.y,ke=(180-360*xe)*Math.PI/180,360*Math.atan(Math.exp(ke))/Math.PI-90)]}};var xe,ke,et}function Kt(Ce){var xe=Ce.numPoints,ke=xe>=1e4?Math.round(xe/1e3)+"k":xe>=1e3?Math.round(xe/100)/10+"k":xe;return rn(rn({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:xe,point_count_abbreviated:ke})}function yn(Ce){return Ce/360+.5}function Kn(Ce){var xe=Math.sin(Ce*Math.PI/180),ke=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return ke<0?0:ke>1?1:ke}function rn(Ce,xe){for(var ke in xe)Ce[ke]=xe[ke];return Ce}function Wt(Ce){return Ce.x}function Pt(Ce){return Ce.y}function Pe(Ce,xe,ke,et,Tt,Yt){var pn=Tt-ke,_t=Yt-et;if(pn!==0||_t!==0){var qt=((Ce-ke)*pn+(xe-et)*_t)/(pn*pn+_t*_t);qt>1?(ke=Tt,et=Yt):qt>0&&(ke+=pn*qt,et+=_t*qt)}return(pn=Ce-ke)*pn+(_t=xe-et)*_t}function Qe(Ce,xe,ke,et){var Tt={id:Ce===void 0?null:Ce,type:xe,geometry:ke,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Yt){var pn=Yt.geometry,_t=Yt.type;if(_t==="Point"||_t==="MultiPoint"||_t==="LineString")Bt(Yt,pn);else if(_t==="Polygon"||_t==="MultiLineString")for(var qt=0;qt<pn.length;qt++)Bt(Yt,pn[qt]);else if(_t==="MultiPolygon")for(qt=0;qt<pn.length;qt++)for(var Qn=0;Qn<pn[qt].length;Qn++)Bt(Yt,pn[qt][Qn])}(Tt),Tt}function Bt(Ce,xe){for(var ke=0;ke<xe.length;ke+=3)Ce.minX=Math.min(Ce.minX,xe[ke]),Ce.minY=Math.min(Ce.minY,xe[ke+1]),Ce.maxX=Math.max(Ce.maxX,xe[ke]),Ce.maxY=Math.max(Ce.maxY,xe[ke+1])}function z(Ce,xe,ke,et){if(xe.geometry){var Tt=xe.geometry.coordinates,Yt=xe.geometry.type,pn=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),_t=[],qt=xe.id;if(ke.promoteId?qt=xe.properties[ke.promoteId]:ke.generateId&&(qt=et||0),Yt==="Point")ue(Tt,_t);else if(Yt==="MultiPoint")for(var Qn=0;Qn<Tt.length;Qn++)ue(Tt[Qn],_t);else if(Yt==="LineString")ot(Tt,_t,pn,!1);else if(Yt==="MultiLineString"){if(ke.lineMetrics){for(Qn=0;Qn<Tt.length;Qn++)ot(Tt[Qn],_t=[],pn,!1),Ce.push(Qe(qt,"LineString",_t,xe.properties));return}le(Tt,_t,pn,!1)}else if(Yt==="Polygon")le(Tt,_t,pn,!0);else{if(Yt!=="MultiPolygon"){if(Yt==="GeometryCollection"){for(Qn=0;Qn<xe.geometry.geometries.length;Qn++)z(Ce,{id:qt,geometry:xe.geometry.geometries[Qn],properties:xe.properties},ke,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qn=0;Qn<Tt.length;Qn++){var _r=[];le(Tt[Qn],_r,pn,!0),_t.push(_r)}}Ce.push(Qe(qt,Yt,_t,xe.properties))}}function ue(Ce,xe){xe.push($t(Ce[0])),xe.push(an(Ce[1])),xe.push(0)}function ot(Ce,xe,ke,et){for(var Tt,Yt,pn=0,_t=0;_t<Ce.length;_t++){var qt=$t(Ce[_t][0]),Qn=an(Ce[_t][1]);xe.push(qt),xe.push(Qn),xe.push(0),_t>0&&(pn+=et?(Tt*Qn-qt*Yt)/2:Math.sqrt(Math.pow(qt-Tt,2)+Math.pow(Qn-Yt,2))),Tt=qt,Yt=Qn}var _r=xe.length-3;xe[2]=1,function Vr(pr,Ur,mi,wi){for(var Sr,Ti=wi,hi=mi-Ur>>1,si=mi-Ur,Mo=pr[Ur],bi=pr[Ur+1],na=pr[mi],_a=pr[mi+1],Ro=Ur+3;Ro<mi;Ro+=3){var qo=Pe(pr[Ro],pr[Ro+1],Mo,bi,na,_a);if(qo>Ti)Sr=Ro,Ti=qo;else if(qo===Ti){var Ne=Math.abs(Ro-hi);Ne<si&&(Sr=Ro,si=Ne)}}Ti>wi&&(Sr-Ur>3&&Vr(pr,Ur,Sr,wi),pr[Sr+2]=Ti,mi-Sr>3&&Vr(pr,Sr,mi,wi))}(xe,0,_r,ke),xe[_r+2]=1,xe.size=Math.abs(pn),xe.start=0,xe.end=xe.size}function le(Ce,xe,ke,et){for(var Tt=0;Tt<Ce.length;Tt++){var Yt=[];ot(Ce[Tt],Yt,ke,et),xe.push(Yt)}}function $t(Ce){return Ce/360+.5}function an(Ce){var xe=Math.sin(Ce*Math.PI/180),ke=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return ke<0?0:ke>1?1:ke}function hn(Ce,xe,ke,et,Tt,Yt,pn,_t){if(et/=xe,Yt>=(ke/=xe)&&pn<et)return Ce;if(pn<ke||Yt>=et)return null;for(var qt=[],Qn=0;Qn<Ce.length;Qn++){var _r=Ce[Qn],Vr=_r.geometry,pr=_r.type,Ur=Tt===0?_r.minX:_r.minY,mi=Tt===0?_r.maxX:_r.maxY;if(Ur>=ke&&mi<et)qt.push(_r);else if(!(mi<ke||Ur>=et)){var wi=[];if(pr==="Point"||pr==="MultiPoint")Dn(Vr,wi,ke,et,Tt);else if(pr==="LineString")Xn(Vr,wi,ke,et,Tt,!1,_t.lineMetrics);else if(pr==="MultiLineString")dn(Vr,wi,ke,et,Tt,!1);else if(pr==="Polygon")dn(Vr,wi,ke,et,Tt,!0);else if(pr==="MultiPolygon")for(var Sr=0;Sr<Vr.length;Sr++){var Ti=[];dn(Vr[Sr],Ti,ke,et,Tt,!0),Ti.length&&wi.push(Ti)}if(wi.length){if(_t.lineMetrics&&pr==="LineString"){for(Sr=0;Sr<wi.length;Sr++)qt.push(Qe(_r.id,pr,wi[Sr],_r.tags));continue}pr!=="LineString"&&pr!=="MultiLineString"||(wi.length===1?(pr="LineString",wi=wi[0]):pr="MultiLineString"),pr!=="Point"&&pr!=="MultiPoint"||(pr=wi.length===3?"Point":"MultiPoint"),qt.push(Qe(_r.id,pr,wi,_r.tags))}}}return qt.length?qt:null}function Dn(Ce,xe,ke,et,Tt){for(var Yt=0;Yt<Ce.length;Yt+=3){var pn=Ce[Yt+Tt];pn>=ke&&pn<=et&&(xe.push(Ce[Yt]),xe.push(Ce[Yt+1]),xe.push(Ce[Yt+2]))}}function Xn(Ce,xe,ke,et,Tt,Yt,pn){for(var _t,qt,Qn=Gn(Ce),_r=Tt===0?Ct:Cn,Vr=Ce.start,pr=0;pr<Ce.length-3;pr+=3){var Ur=Ce[pr],mi=Ce[pr+1],wi=Ce[pr+2],Sr=Ce[pr+3],Ti=Ce[pr+4],hi=Tt===0?Ur:mi,si=Tt===0?Sr:Ti,Mo=!1;pn&&(_t=Math.sqrt(Math.pow(Ur-Sr,2)+Math.pow(mi-Ti,2))),hi<ke?si>ke&&(qt=_r(Qn,Ur,mi,Sr,Ti,ke),pn&&(Qn.start=Vr+_t*qt)):hi>et?si<et&&(qt=_r(Qn,Ur,mi,Sr,Ti,et),pn&&(Qn.start=Vr+_t*qt)):mt(Qn,Ur,mi,wi),si<ke&&hi>=ke&&(qt=_r(Qn,Ur,mi,Sr,Ti,ke),Mo=!0),si>et&&hi<=et&&(qt=_r(Qn,Ur,mi,Sr,Ti,et),Mo=!0),!Yt&&Mo&&(pn&&(Qn.end=Vr+_t*qt),xe.push(Qn),Qn=Gn(Ce)),pn&&(Vr+=_t)}var bi=Ce.length-3;Ur=Ce[bi],mi=Ce[bi+1],wi=Ce[bi+2],(hi=Tt===0?Ur:mi)>=ke&&hi<=et&&mt(Qn,Ur,mi,wi),bi=Qn.length-3,Yt&&bi>=3&&(Qn[bi]!==Qn[0]||Qn[bi+1]!==Qn[1])&&mt(Qn,Qn[0],Qn[1],Qn[2]),Qn.length&&xe.push(Qn)}function Gn(Ce){var xe=[];return xe.size=Ce.size,xe.start=Ce.start,xe.end=Ce.end,xe}function dn(Ce,xe,ke,et,Tt,Yt){for(var pn=0;pn<Ce.length;pn++)Xn(Ce[pn],xe,ke,et,Tt,Yt,!1)}function mt(Ce,xe,ke,et){Ce.push(xe),Ce.push(ke),Ce.push(et)}function Ct(Ce,xe,ke,et,Tt,Yt){var pn=(Yt-xe)/(et-xe);return Ce.push(Yt),Ce.push(ke+(Tt-ke)*pn),Ce.push(1),pn}function Cn(Ce,xe,ke,et,Tt,Yt){var pn=(Yt-ke)/(Tt-ke);return Ce.push(xe+(et-xe)*pn),Ce.push(Yt),Ce.push(1),pn}function Pn(Ce,xe){for(var ke=[],et=0;et<Ce.length;et++){var Tt,Yt=Ce[et],pn=Yt.type;if(pn==="Point"||pn==="MultiPoint"||pn==="LineString")Tt=Zn(Yt.geometry,xe);else if(pn==="MultiLineString"||pn==="Polygon"){Tt=[];for(var _t=0;_t<Yt.geometry.length;_t++)Tt.push(Zn(Yt.geometry[_t],xe))}else if(pn==="MultiPolygon")for(Tt=[],_t=0;_t<Yt.geometry.length;_t++){for(var qt=[],Qn=0;Qn<Yt.geometry[_t].length;Qn++)qt.push(Zn(Yt.geometry[_t][Qn],xe));Tt.push(qt)}ke.push(Qe(Yt.id,pn,Tt,Yt.tags))}return ke}function Zn(Ce,xe){var ke=[];ke.size=Ce.size,Ce.start!==void 0&&(ke.start=Ce.start,ke.end=Ce.end);for(var et=0;et<Ce.length;et+=3)ke.push(Ce[et]+xe,Ce[et+1],Ce[et+2]);return ke}function ht(Ce,xe){if(Ce.transformed)return Ce;var ke,et,Tt,Yt=1<<Ce.z,pn=Ce.x,_t=Ce.y;for(ke=0;ke<Ce.features.length;ke++){var qt=Ce.features[ke],Qn=qt.geometry,_r=qt.type;if(qt.geometry=[],_r===1)for(et=0;et<Qn.length;et+=2)qt.geometry.push(ye(Qn[et],Qn[et+1],xe,Yt,pn,_t));else for(et=0;et<Qn.length;et++){var Vr=[];for(Tt=0;Tt<Qn[et].length;Tt+=2)Vr.push(ye(Qn[et][Tt],Qn[et][Tt+1],xe,Yt,pn,_t));qt.geometry.push(Vr)}}return Ce.transformed=!0,Ce}function ye(Ce,xe,ke,et,Tt,Yt){return[Math.round(ke*(Ce*et-Tt)),Math.round(ke*(xe*et-Yt))]}function Be(Ce,xe,ke,et,Tt){for(var Yt=xe===Tt.maxZoom?0:Tt.tolerance/((1<<xe)*Tt.extent),pn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:et,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_t=0;_t<Ce.length;_t++){pn.numFeatures++,rt(pn,Ce[_t],Yt,Tt);var qt=Ce[_t].minX,Qn=Ce[_t].minY,_r=Ce[_t].maxX,Vr=Ce[_t].maxY;qt<pn.minX&&(pn.minX=qt),Qn<pn.minY&&(pn.minY=Qn),_r>pn.maxX&&(pn.maxX=_r),Vr>pn.maxY&&(pn.maxY=Vr)}return pn}function rt(Ce,xe,ke,et){var Tt=xe.geometry,Yt=xe.type,pn=[];if(Yt==="Point"||Yt==="MultiPoint")for(var _t=0;_t<Tt.length;_t+=3)pn.push(Tt[_t]),pn.push(Tt[_t+1]),Ce.numPoints++,Ce.numSimplified++;else if(Yt==="LineString")Mt(pn,Tt,Ce,ke,!1,!1);else if(Yt==="MultiLineString"||Yt==="Polygon")for(_t=0;_t<Tt.length;_t++)Mt(pn,Tt[_t],Ce,ke,Yt==="Polygon",_t===0);else if(Yt==="MultiPolygon")for(var qt=0;qt<Tt.length;qt++){var Qn=Tt[qt];for(_t=0;_t<Qn.length;_t++)Mt(pn,Qn[_t],Ce,ke,!0,_t===0)}if(pn.length){var _r=xe.tags||null;if(Yt==="LineString"&&et.lineMetrics){for(var Vr in _r={},xe.tags)_r[Vr]=xe.tags[Vr];_r.mapbox_clip_start=Tt.start/Tt.size,_r.mapbox_clip_end=Tt.end/Tt.size}var pr={geometry:pn,type:Yt==="Polygon"||Yt==="MultiPolygon"?3:Yt==="LineString"||Yt==="MultiLineString"?2:1,tags:_r};xe.id!==null&&(pr.id=xe.id),Ce.features.push(pr)}}function Mt(Ce,xe,ke,et,Tt,Yt){var pn=et*et;if(et>0&&xe.size<(Tt?pn:et))ke.numPoints+=xe.length/3;else{for(var _t=[],qt=0;qt<xe.length;qt+=3)(et===0||xe[qt+2]>pn)&&(ke.numSimplified++,_t.push(xe[qt]),_t.push(xe[qt+1])),ke.numPoints++;Tt&&function(Qn,_r){for(var Vr=0,pr=0,Ur=Qn.length,mi=Ur-2;pr<Ur;mi=pr,pr+=2)Vr+=(Qn[pr]-Qn[mi])*(Qn[pr+1]+Qn[mi+1]);if(Vr>0===_r)for(pr=0,Ur=Qn.length;pr<Ur/2;pr+=2){var wi=Qn[pr],Sr=Qn[pr+1];Qn[pr]=Qn[Ur-2-pr],Qn[pr+1]=Qn[Ur-1-pr],Qn[Ur-2-pr]=wi,Qn[Ur-1-pr]=Sr}}(_t,Yt),Ce.push(_t)}}function Ot(Ce,xe){var ke=(xe=this.options=function(Tt,Yt){for(var pn in Yt)Tt[pn]=Yt[pn];return Tt}(Object.create(this.options),xe)).debug;if(ke&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var et=function(Tt,Yt){var pn=[];if(Tt.type==="FeatureCollection")for(var _t=0;_t<Tt.features.length;_t++)z(pn,Tt.features[_t],Yt,_t);else z(pn,Tt.type==="Feature"?Tt:{geometry:Tt},Yt);return pn}(Ce,xe);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=function(Tt,Yt){var pn=Yt.buffer/Yt.extent,_t=Tt,qt=hn(Tt,1,-1-pn,pn,0,-1,2,Yt),Qn=hn(Tt,1,1-pn,2+pn,0,-1,2,Yt);return(qt||Qn)&&(_t=hn(Tt,1,-pn,1+pn,0,-1,2,Yt)||[],qt&&(_t=Pn(qt,1).concat(_t)),Qn&&(_t=_t.concat(Pn(Qn,-1)))),_t}(et,xe)).length&&this.splitTile(et,0,0,0),ke&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function En(Ce,xe,ke){return 32*((1<<Ce)*ke+xe)+Ce}function $n(Ce,xe){var ke=Ce.tileID.canonical;if(!this._geoJSONIndex)return xe(null,null);var et=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!et)return xe(null,null);var Tt=new bt(et.features),Yt=Ie(Tt);Yt.byteOffset===0&&Yt.byteLength===Yt.buffer.byteLength||(Yt=new Uint8Array(Yt)),xe(null,{vectorTile:Tt,rawData:Yt.buffer})}Ln.prototype.load=function(Ce){var xe=this.options,ke=xe.log,et=xe.minZoom,Tt=xe.maxZoom,Yt=xe.nodeSize;ke&&console.time("total time");var pn="prepare "+Ce.length+" points";ke&&console.time(pn),this.points=Ce;for(var _t=[],qt=0;qt<Ce.length;qt++)Ce[qt].geometry&&_t.push(lr(Ce[qt],qt));this.trees[Tt+1]=new Gt(_t,Wt,Pt,Yt,Float32Array),ke&&console.timeEnd(pn);for(var Qn=Tt;Qn>=et;Qn--){var _r=+Date.now();_t=this._cluster(_t,Qn),this.trees[Qn]=new Gt(_t,Wt,Pt,Yt,Float32Array),ke&&console.log("z%d: %d clusters in %dms",Qn,_t.length,+Date.now()-_r)}return ke&&console.timeEnd("total time"),this},Ln.prototype.getClusters=function(Ce,xe){var ke=((Ce[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Ce[1])),Tt=Ce[2]===180?180:((Ce[2]+180)%360+360)%360-180,Yt=Math.max(-90,Math.min(90,Ce[3]));if(Ce[2]-Ce[0]>=360)ke=-180,Tt=180;else if(ke>Tt){var pn=this.getClusters([ke,et,180,Yt],xe),_t=this.getClusters([-180,et,Tt,Yt],xe);return pn.concat(_t)}for(var qt=this.trees[this._limitZoom(xe)],Qn=[],_r=0,Vr=qt.range(yn(ke),Kn(Yt),yn(Tt),Kn(et));_r<Vr.length;_r+=1){var pr=qt.points[Vr[_r]];Qn.push(pr.numPoints?zt(pr):this.points[pr.index])}return Qn},Ln.prototype.getChildren=function(Ce){var xe=this._getOriginId(Ce),ke=this._getOriginZoom(Ce),et="No cluster with the specified id.",Tt=this.trees[ke];if(!Tt)throw new Error(et);var Yt=Tt.points[xe];if(!Yt)throw new Error(et);for(var pn=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),_t=[],qt=0,Qn=Tt.within(Yt.x,Yt.y,pn);qt<Qn.length;qt+=1){var _r=Tt.points[Qn[qt]];_r.parentId===Ce&&_t.push(_r.numPoints?zt(_r):this.points[_r.index])}if(_t.length===0)throw new Error(et);return _t},Ln.prototype.getLeaves=function(Ce,xe,ke){var et=[];return this._appendLeaves(et,Ce,xe=xe||10,ke=ke||0,0),et},Ln.prototype.getTile=function(Ce,xe,ke){var et=this.trees[this._limitZoom(Ce)],Tt=Math.pow(2,Ce),Yt=this.options,pn=Yt.radius/Yt.extent,_t=(ke-pn)/Tt,qt=(ke+1+pn)/Tt,Qn={features:[]};return this._addTileFeatures(et.range((xe-pn)/Tt,_t,(xe+1+pn)/Tt,qt),et.points,xe,ke,Tt,Qn),xe===0&&this._addTileFeatures(et.range(1-pn/Tt,_t,1,qt),et.points,Tt,ke,Tt,Qn),xe===Tt-1&&this._addTileFeatures(et.range(0,_t,pn/Tt,qt),et.points,-1,ke,Tt,Qn),Qn.features.length?Qn:null},Ln.prototype.getClusterExpansionZoom=function(Ce){for(var xe=this._getOriginZoom(Ce)-1;xe<=this.options.maxZoom;){var ke=this.getChildren(Ce);if(xe++,ke.length!==1)break;Ce=ke[0].properties.cluster_id}return xe},Ln.prototype._appendLeaves=function(Ce,xe,ke,et,Tt){for(var Yt=0,pn=this.getChildren(xe);Yt<pn.length;Yt+=1){var _t=pn[Yt],qt=_t.properties;if(qt&&qt.cluster?Tt+qt.point_count<=et?Tt+=qt.point_count:Tt=this._appendLeaves(Ce,qt.cluster_id,ke,et,Tt):Tt<et?Tt++:Ce.push(_t),Ce.length===ke)break}return Tt},Ln.prototype._addTileFeatures=function(Ce,xe,ke,et,Tt,Yt){for(var pn=0,_t=Ce;pn<_t.length;pn+=1){var qt=xe[_t[pn]],Qn=qt.numPoints,_r={type:1,geometry:[[Math.round(this.options.extent*(qt.x*Tt-ke)),Math.round(this.options.extent*(qt.y*Tt-et))]],tags:Qn?Kt(qt):this.points[qt.index].properties},Vr=void 0;Qn?Vr=qt.id:this.options.generateId?Vr=qt.index:this.points[qt.index].id&&(Vr=this.points[qt.index].id),Vr!==void 0&&(_r.id=Vr),Yt.features.push(_r)}},Ln.prototype._limitZoom=function(Ce){return Math.max(this.options.minZoom,Math.min(+Ce,this.options.maxZoom+1))},Ln.prototype._cluster=function(Ce,xe){for(var ke=[],et=this.options,Tt=et.reduce,Yt=et.minPoints,pn=et.radius/(et.extent*Math.pow(2,xe)),_t=0;_t<Ce.length;_t++){var qt=Ce[_t];if(!(qt.zoom<=xe)){qt.zoom=xe;for(var Qn=this.trees[xe+1],_r=Qn.within(qt.x,qt.y,pn),Vr=qt.numPoints||1,pr=Vr,Ur=0,mi=_r;Ur<mi.length;Ur+=1){var wi=Qn.points[mi[Ur]];wi.zoom>xe&&(pr+=wi.numPoints||1)}if(pr>=Yt){for(var Sr=qt.x*Vr,Ti=qt.y*Vr,hi=Tt&&Vr>1?this._map(qt,!0):null,si=(_t<<5)+(xe+1)+this.points.length,Mo=0,bi=_r;Mo<bi.length;Mo+=1){var na=Qn.points[bi[Mo]];if(!(na.zoom<=xe)){na.zoom=xe;var _a=na.numPoints||1;Sr+=na.x*_a,Ti+=na.y*_a,na.parentId=si,Tt&&(hi||(hi=this._map(qt,!0)),Tt(hi,this._map(na)))}}qt.parentId=si,ke.push(kn(Sr/pr,Ti/pr,si,pr,hi))}else if(ke.push(qt),pr>1)for(var Ro=0,qo=_r;Ro<qo.length;Ro+=1){var Ne=Qn.points[qo[Ro]];Ne.zoom<=xe||(Ne.zoom=xe,ke.push(Ne))}}}return ke},Ln.prototype._getOriginId=function(Ce){return Ce-this.points.length>>5},Ln.prototype._getOriginZoom=function(Ce){return(Ce-this.points.length)%32},Ln.prototype._map=function(Ce,xe){if(Ce.numPoints)return xe?rn({},Ce.properties):Ce.properties;var ke=this.points[Ce.index].properties,et=this.options.map(ke);return xe&&et===ke?rn({},et):et},Ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ot.prototype.splitTile=function(Ce,xe,ke,et,Tt,Yt,pn){for(var _t=[Ce,xe,ke,et],qt=this.options,Qn=qt.debug;_t.length;){et=_t.pop(),ke=_t.pop(),xe=_t.pop(),Ce=_t.pop();var _r=1<<xe,Vr=En(xe,ke,et),pr=this.tiles[Vr];if(!pr&&(Qn>1&&console.time("creation"),pr=this.tiles[Vr]=Be(Ce,xe,ke,et,qt),this.tileCoords.push({z:xe,x:ke,y:et}),Qn)){Qn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,ke,et,pr.numFeatures,pr.numPoints,pr.numSimplified),console.timeEnd("creation"));var Ur="z"+xe;this.stats[Ur]=(this.stats[Ur]||0)+1,this.total++}if(pr.source=Ce,Tt){if(xe===qt.maxZoom||xe===Tt)continue;var mi=1<<Tt-xe;if(ke!==Math.floor(Yt/mi)||et!==Math.floor(pn/mi))continue}else if(xe===qt.indexMaxZoom||pr.numPoints<=qt.indexMaxPoints)continue;if(pr.source=null,Ce.length!==0){Qn>1&&console.time("clipping");var wi,Sr,Ti,hi,si,Mo,bi=.5*qt.buffer/qt.extent,na=.5-bi,_a=.5+bi,Ro=1+bi;wi=Sr=Ti=hi=null,si=hn(Ce,_r,ke-bi,ke+_a,0,pr.minX,pr.maxX,qt),Mo=hn(Ce,_r,ke+na,ke+Ro,0,pr.minX,pr.maxX,qt),Ce=null,si&&(wi=hn(si,_r,et-bi,et+_a,1,pr.minY,pr.maxY,qt),Sr=hn(si,_r,et+na,et+Ro,1,pr.minY,pr.maxY,qt),si=null),Mo&&(Ti=hn(Mo,_r,et-bi,et+_a,1,pr.minY,pr.maxY,qt),hi=hn(Mo,_r,et+na,et+Ro,1,pr.minY,pr.maxY,qt),Mo=null),Qn>1&&console.timeEnd("clipping"),_t.push(wi||[],xe+1,2*ke,2*et),_t.push(Sr||[],xe+1,2*ke,2*et+1),_t.push(Ti||[],xe+1,2*ke+1,2*et),_t.push(hi||[],xe+1,2*ke+1,2*et+1)}}},Ot.prototype.getTile=function(Ce,xe,ke){var et=this.options,Tt=et.extent,Yt=et.debug;if(Ce<0||Ce>24)return null;var pn=1<<Ce,_t=En(Ce,xe=(xe%pn+pn)%pn,ke);if(this.tiles[_t])return ht(this.tiles[_t],Tt);Yt>1&&console.log("drilling down to z%d-%d-%d",Ce,xe,ke);for(var qt,Qn=Ce,_r=xe,Vr=ke;!qt&&Qn>0;)Qn--,_r=Math.floor(_r/2),Vr=Math.floor(Vr/2),qt=this.tiles[En(Qn,_r,Vr)];return qt&&qt.source?(Yt>1&&console.log("found parent tile z%d-%d-%d",Qn,_r,Vr),Yt>1&&console.time("drilling down"),this.splitTile(qt.source,Qn,_r,Vr,Ce,xe,ke),Yt>1&&console.timeEnd("drilling down"),this.tiles[_t]?ht(this.tiles[_t],Tt):null):null};var yr=function(Ce){function xe(ke,et,Tt,Yt){Ce.call(this,ke,et,Tt,$n),Yt&&(this.loadGeoJSON=Yt)}return Ce&&(xe.__proto__=Ce),(xe.prototype=Object.create(Ce&&Ce.prototype)).constructor=xe,xe.prototype.loadData=function(ke,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=ke,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},xe.prototype._loadData=function(){var ke=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,Tt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Yt=!!(Tt&&Tt.request&&Tt.request.collectResourceTiming)&&new E.RequestPerformance(Tt.request);this.loadGeoJSON(Tt,function(pn,_t){if(pn||!_t)return et(pn);if(typeof _t!="object")return et(new Error("Input data given to '"+Tt.source+"' is not a valid GeoJSON object."));(function pr(Ur,mi){var wi,Sr=Ur&&Ur.type;if(Sr==="FeatureCollection")for(wi=0;wi<Ur.features.length;wi++)pr(Ur.features[wi],mi);else if(Sr==="GeometryCollection")for(wi=0;wi<Ur.geometries.length;wi++)pr(Ur.geometries[wi],mi);else if(Sr==="Feature")pr(Ur.geometry,mi);else if(Sr==="Polygon")be(Ur.coordinates,mi);else if(Sr==="MultiPolygon")for(wi=0;wi<Ur.coordinates.length;wi++)be(Ur.coordinates[wi],mi);return Ur})(_t,!0);try{if(Tt.filter){var qt=E.createExpression(Tt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qt.result==="error")throw new Error(qt.value.map(function(pr){return pr.key+": "+pr.message}).join(", "));var Qn=_t.features.filter(function(pr){return qt.value.evaluate({zoom:0},pr)});_t={type:"FeatureCollection",features:Qn}}ke._geoJSONIndex=Tt.cluster?new Ln(function(pr){var Ur=pr.superclusterOptions,mi=pr.clusterProperties;if(!mi||!Ur)return Ur;for(var wi={},Sr={},Ti={accumulated:null,zoom:0},hi={properties:null},si=Object.keys(mi),Mo=0,bi=si;Mo<bi.length;Mo+=1){var na=bi[Mo],_a=mi[na],Ro=_a[0],qo=E.createExpression(_a[1]),Ne=E.createExpression(typeof Ro=="string"?[Ro,["accumulated"],["get",na]]:Ro);wi[na]=qo.value,Sr[na]=Ne.value}return Ur.map=function(Je){hi.properties=Je;for(var kt={},sn=0,Nn=si;sn<Nn.length;sn+=1){var Bn=Nn[sn];kt[Bn]=wi[Bn].evaluate(Ti,hi)}return kt},Ur.reduce=function(Je,kt){hi.properties=kt;for(var sn=0,Nn=si;sn<Nn.length;sn+=1){var Bn=Nn[sn];Ti.accumulated=Je[Bn],Je[Bn]=Sr[Bn].evaluate(Ti,hi)}},Ur}(Tt)).load(_t.features):function(pr,Ur){return new Ot(pr,Ur)}(_t,Tt.geojsonVtOptions)}catch(pr){return et(pr)}ke.loaded={};var _r={};if(Yt){var Vr=Yt.finish();Vr&&(_r.resourceTiming={},_r.resourceTiming[Tt.source]=JSON.parse(JSON.stringify(Vr)))}et(null,_r)})}},xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},xe.prototype.reloadTile=function(ke,et){var Tt=this.loaded;return Tt&&Tt[ke.uid]?Ce.prototype.reloadTile.call(this,ke,et):this.loadTile(ke,et)},xe.prototype.loadGeoJSON=function(ke,et){if(ke.request)E.getJSON(ke.request,et);else{if(typeof ke.data!="string")return et(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(ke.data))}catch(Tt){return et(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."))}}},xe.prototype.removeSource=function(ke,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},xe.prototype.getClusterExpansionZoom=function(ke,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(ke.clusterId))}catch(Tt){et(Tt)}},xe.prototype.getClusterChildren=function(ke,et){try{et(null,this._geoJSONIndex.getChildren(ke.clusterId))}catch(Tt){et(Tt)}},xe.prototype.getClusterLeaves=function(ke,et){try{et(null,this._geoJSONIndex.getLeaves(ke.clusterId,ke.limit,ke.offset))}catch(Tt){et(Tt)}},xe}(ee),qn=function(Ce){var xe=this;this.self=Ce,this.actor=new E.Actor(Ce,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:yr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ke,et){if(xe.workerSourceTypes[ke])throw new Error('Worker source with name "'+ke+'" already registered.');xe.workerSourceTypes[ke]=et},this.self.registerRTLTextPlugin=function(ke){if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=ke.applyArabicShaping,E.plugin.processBidirectionalText=ke.processBidirectionalText,E.plugin.processStyledBidirectionalText=ke.processStyledBidirectionalText}};return qn.prototype.setReferrer=function(Ce,xe){this.referrer=xe},qn.prototype.setImages=function(Ce,xe,ke){for(var et in this.availableImages[Ce]=xe,this.workerSources[Ce]){var Tt=this.workerSources[Ce][et];for(var Yt in Tt)Tt[Yt].availableImages=xe}ke()},qn.prototype.setLayers=function(Ce,xe,ke){this.getLayerIndex(Ce).replace(xe),ke()},qn.prototype.updateLayers=function(Ce,xe,ke){this.getLayerIndex(Ce).update(xe.layers,xe.removedIds),ke()},qn.prototype.loadTile=function(Ce,xe,ke){this.getWorkerSource(Ce,xe.type,xe.source).loadTile(xe,ke)},qn.prototype.loadDEMTile=function(Ce,xe,ke){this.getDEMWorkerSource(Ce,xe.source).loadTile(xe,ke)},qn.prototype.reloadTile=function(Ce,xe,ke){this.getWorkerSource(Ce,xe.type,xe.source).reloadTile(xe,ke)},qn.prototype.abortTile=function(Ce,xe,ke){this.getWorkerSource(Ce,xe.type,xe.source).abortTile(xe,ke)},qn.prototype.removeTile=function(Ce,xe,ke){this.getWorkerSource(Ce,xe.type,xe.source).removeTile(xe,ke)},qn.prototype.removeDEMTile=function(Ce,xe){this.getDEMWorkerSource(Ce,xe.source).removeTile(xe)},qn.prototype.removeSource=function(Ce,xe,ke){if(this.workerSources[Ce]&&this.workerSources[Ce][xe.type]&&this.workerSources[Ce][xe.type][xe.source]){var et=this.workerSources[Ce][xe.type][xe.source];delete this.workerSources[Ce][xe.type][xe.source],et.removeSource!==void 0?et.removeSource(xe,ke):ke()}},qn.prototype.loadWorkerSource=function(Ce,xe,ke){try{this.self.importScripts(xe.url),ke()}catch(et){ke(et.toString())}},qn.prototype.syncRTLPluginState=function(Ce,xe,ke){try{E.plugin.setState(xe);var et=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&et!=null){this.self.importScripts(et);var Tt=E.plugin.isParsed();ke(Tt?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),Tt)}}catch(Yt){ke(Yt.toString())}},qn.prototype.getAvailableImages=function(Ce){var xe=this.availableImages[Ce];return xe||(xe=[]),xe},qn.prototype.getLayerIndex=function(Ce){var xe=this.layerIndexes[Ce];return xe||(xe=this.layerIndexes[Ce]=new se),xe},qn.prototype.getWorkerSource=function(Ce,xe,ke){var et=this;return this.workerSources[Ce]||(this.workerSources[Ce]={}),this.workerSources[Ce][xe]||(this.workerSources[Ce][xe]={}),this.workerSources[Ce][xe][ke]||(this.workerSources[Ce][xe][ke]=new this.workerSourceTypes[xe]({send:function(Tt,Yt,pn){et.actor.send(Tt,Yt,pn,Ce)}},this.getLayerIndex(Ce),this.getAvailableImages(Ce))),this.workerSources[Ce][xe][ke]},qn.prototype.getDEMWorkerSource=function(Ce,xe){return this.demWorkerSources[Ce]||(this.demWorkerSources[Ce]={}),this.demWorkerSources[Ce][xe]||(this.demWorkerSources[Ce][xe]=new Le),this.demWorkerSources[Ce][xe]},qn.prototype.enforceCacheSizeLimit=function(Ce,xe){E.enforceCacheSizeLimit(xe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new qn(self)),qn}),Z(["./shared"],function(E){"use strict";var ve=E.createCommonjsModule(function(_){function S(k){return!x(k)}function x(k){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var K,de,Ve=new Blob([""],{type:"text/javascript"}),st=URL.createObjectURL(Ve);try{de=new Worker(st),K=!0}catch(Ft){K=!1}return de&&de.terminate(),URL.revokeObjectURL(st),K}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var K=document.createElement("canvas");K.width=K.height=1;var de=K.getContext("2d");if(!de)return!1;var Ve=de.getImageData(0,0,1,1);return Ve&&Ve.width===K.width}()?(C[G=k&&k.failIfMajorPerformanceCaveat]===void 0&&(C[G]=function(K){var de=function(st){var Ft=document.createElement("canvas"),jt=Object.create(S.webGLContextAttributes);return jt.failIfMajorPerformanceCaveat=st,Ft.probablySupportsContext?Ft.probablySupportsContext("webgl",jt)||Ft.probablySupportsContext("experimental-webgl",jt):Ft.supportsContext?Ft.supportsContext("webgl",jt)||Ft.supportsContext("experimental-webgl",jt):Ft.getContext("webgl",jt)||Ft.getContext("experimental-webgl",jt)}(K);if(!de)return!1;var Ve=de.createShader(de.VERTEX_SHADER);return!(!Ve||de.isContextLost())&&(de.shaderSource(Ve,"void main() {}"),de.compileShader(Ve),de.getShaderParameter(Ve,de.COMPILE_STATUS)===!0)}(G)),C[G]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var G}_.exports?_.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=x);var C={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),te={create:function(_,S,x){var C=E.window.document.createElement(_);return S!==void 0&&(C.className=S),x&&x.appendChild(C),C},createNS:function(_,S){return E.window.document.createElementNS(_,S)}},se=E.window.document&&E.window.document.documentElement.style;function ae(_){if(!se)return _[0];for(var S=0;S<_.length;S++)if(_[S]in se)return _[S];return _[0]}var Se,oe=ae(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);te.disableDrag=function(){se&&oe&&(Se=se[oe],se[oe]="none")},te.enableDrag=function(){se&&oe&&(se[oe]=Se)};var Ge=ae(["transform","WebkitTransform"]);te.setTransform=function(_,S){_.style[Ge]=S};var ee=!1;try{var me=Object.defineProperty({},"passive",{get:function(){ee=!0}});E.window.addEventListener("test",me,me),E.window.removeEventListener("test",me,me)}catch(_){ee=!1}te.addEventListener=function(_,S,x,C){C===void 0&&(C={}),_.addEventListener(S,x,"passive"in C&&ee?C:C.capture)},te.removeEventListener=function(_,S,x,C){C===void 0&&(C={}),_.removeEventListener(S,x,"passive"in C&&ee?C:C.capture)};var Le=function(_){_.preventDefault(),_.stopPropagation(),E.window.removeEventListener("click",Le,!0)};function be(_){var S=_.userImage;return!!(S&&S.render&&S.render())&&(_.data.replace(new Uint8Array(S.data.buffer)),!0)}te.suppressClick=function(){E.window.addEventListener("click",Le,!0),E.window.setTimeout(function(){E.window.removeEventListener("click",Le,!0)},0)},te.mousePos=function(_,S){var x=_.getBoundingClientRect();return new E.Point(S.clientX-x.left-_.clientLeft,S.clientY-x.top-_.clientTop)},te.touchPos=function(_,S){for(var x=_.getBoundingClientRect(),C=[],k=0;k<S.length;k++)C.push(new E.Point(S[k].clientX-x.left-_.clientLeft,S[k].clientY-x.top-_.clientTop));return C},te.mouseButton=function(_){return E.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&E.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},te.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var Oe=function(_){function S(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(x){if(this.loaded!==x&&(this.loaded=x,x)){for(var C=0,k=this.requestors;C<k.length;C+=1){var G=k[C];this._notify(G.ids,G.callback)}this.requestors=[]}},S.prototype.getImage=function(x){return this.images[x]},S.prototype.addImage=function(x,C){this._validate(x,C)&&(this.images[x]=C)},S.prototype._validate=function(x,C){var k=!0;return this._validateStretch(C.stretchX,C.data&&C.data.width)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchX" value'))),k=!1),this._validateStretch(C.stretchY,C.data&&C.data.height)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchY" value'))),k=!1),this._validateContent(C.content,C)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "content" value'))),k=!1),k},S.prototype._validateStretch=function(x,C){if(!x)return!0;for(var k=0,G=0,K=x;G<K.length;G+=1){var de=K[G];if(de[0]<k||de[1]<de[0]||C<de[1])return!1;k=de[1]}return!0},S.prototype._validateContent=function(x,C){return!(x&&(x.length!==4||x[0]<0||C.data.width<x[0]||x[1]<0||C.data.height<x[1]||x[2]<0||C.data.width<x[2]||x[3]<0||C.data.height<x[3]||x[2]<x[0]||x[3]<x[1]))},S.prototype.updateImage=function(x,C){C.version=this.images[x].version+1,this.images[x]=C,this.updatedImages[x]=!0},S.prototype.removeImage=function(x){var C=this.images[x];delete this.images[x],delete this.patterns[x],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(x,C){var k=!0;if(!this.isLoaded())for(var G=0,K=x;G<K.length;G+=1)this.images[K[G]]||(k=!1);this.isLoaded()||k?this._notify(x,C):this.requestors.push({ids:x,callback:C})},S.prototype._notify=function(x,C){for(var k={},G=0,K=x;G<K.length;G+=1){var de=K[G];this.images[de]||this.fire(new E.Event("styleimagemissing",{id:de}));var Ve=this.images[de];Ve?k[de]={data:Ve.data.clone(),pixelRatio:Ve.pixelRatio,sdf:Ve.sdf,version:Ve.version,stretchX:Ve.stretchX,stretchY:Ve.stretchY,content:Ve.content,hasRenderCallback:!!(Ve.userImage&&Ve.userImage.render)}:E.warnOnce('Image "'+de+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}C(null,k)},S.prototype.getPixelSize=function(){var x=this.atlasImage;return{width:x.width,height:x.height}},S.prototype.getPattern=function(x){var C=this.patterns[x],k=this.getImage(x);if(!k)return null;if(C&&C.position.version===k.version)return C.position;if(C)C.position.version=k.version;else{var G={w:k.data.width+2,h:k.data.height+2,x:0,y:0},K=new E.ImagePosition(G,k);this.patterns[x]={bin:G,position:K}}return this._updatePatternAtlas(),this.patterns[x].position},S.prototype.bind=function(x){var C=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E.Texture(x,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var x=[];for(var C in this.patterns)x.push(this.patterns[C].bin);var k=E.potpack(x),G=k.w,K=k.h,de=this.atlasImage;for(var Ve in de.resize({width:G||1,height:K||1}),this.patterns){var st=this.patterns[Ve].bin,Ft=st.x+1,jt=st.y+1,Xt=this.images[Ve].data,bn=Xt.width,vn=Xt.height;E.RGBAImage.copy(Xt,de,{x:0,y:0},{x:Ft,y:jt},{width:bn,height:vn}),E.RGBAImage.copy(Xt,de,{x:0,y:vn-1},{x:Ft,y:jt-1},{width:bn,height:1}),E.RGBAImage.copy(Xt,de,{x:0,y:0},{x:Ft,y:jt+vn},{width:bn,height:1}),E.RGBAImage.copy(Xt,de,{x:bn-1,y:0},{x:Ft-1,y:jt},{width:1,height:vn}),E.RGBAImage.copy(Xt,de,{x:0,y:0},{x:Ft+bn,y:jt},{width:1,height:vn})}this.dirty=!0},S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},S.prototype.dispatchRenderCallbacks=function(x){for(var C=0,k=x;C<k.length;C+=1){var G=k[C];if(!this.callbackDispatchedThisFrame[G]){this.callbackDispatchedThisFrame[G]=!0;var K=this.images[G];be(K)&&this.updateImage(G,K)}}},S}(E.Evented),fe=dt,He=dt,bt=1e20;function dt(_,S,x,C,k,G){this.fontSize=_||24,this.buffer=S===void 0?3:S,this.cutoff=C||.25,this.fontFamily=k||"sans-serif",this.fontWeight=G||"normal",this.radius=x||8;var K=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=K,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(K*K),this.gridInner=new Float64Array(K*K),this.f=new Float64Array(K),this.d=new Float64Array(K),this.z=new Float64Array(K+1),this.v=new Int16Array(K),this.middle=Math.round(K/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Nt(_,S,x,C,k,G,K){for(var de=0;de<S;de++){for(var Ve=0;Ve<x;Ve++)C[Ve]=_[Ve*S+de];for(ct(C,k,G,K,x),Ve=0;Ve<x;Ve++)_[Ve*S+de]=k[Ve]}for(Ve=0;Ve<x;Ve++){for(de=0;de<S;de++)C[de]=_[Ve*S+de];for(ct(C,k,G,K,S),de=0;de<S;de++)_[Ve*S+de]=Math.sqrt(k[de])}}function ct(_,S,x,C,k){x[0]=0,C[0]=-bt,C[1]=+bt;for(var G=1,K=0;G<k;G++){for(var de=(_[G]+G*G-(_[x[K]]+x[K]*x[K]))/(2*G-2*x[K]);de<=C[K];)K--,de=(_[G]+G*G-(_[x[K]]+x[K]*x[K]))/(2*G-2*x[K]);x[++K]=G,C[K]=de,C[K+1]=+bt}for(G=0,K=0;G<k;G++){for(;C[K+1]<G;)K++;S[G]=(G-x[K])*(G-x[K])+_[x[K]]}}dt.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var S=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),C=0;C<this.size*this.size;C++){var k=S.data[4*C+3]/255;this.gridOuter[C]=k===1?0:k===0?bt:Math.pow(Math.max(0,.5-k),2),this.gridInner[C]=k===1?bt:k===0?0:Math.pow(Math.max(0,k-.5),2)}for(Nt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Nt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),C=0;C<this.size*this.size;C++)x[C]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[C]-this.gridInner[C])/this.radius+this.cutoff))));return x},fe.default=He;var lt=function(_,S){this.requestManager=_,this.localIdeographFontFamily=S,this.entries={}};lt.prototype.setURL=function(_){this.url=_},lt.prototype.getGlyphs=function(_,S){var x=this,C=[];for(var k in _)for(var G=0,K=_[k];G<K.length;G+=1)C.push({stack:k,id:K[G]});E.asyncAll(C,function(de,Ve){var st=de.stack,Ft=de.id,jt=x.entries[st];jt||(jt=x.entries[st]={glyphs:{},requests:{},ranges:{}});var Xt=jt.glyphs[Ft];if(Xt===void 0){if(Xt=x._tinySDF(jt,st,Ft))return jt.glyphs[Ft]=Xt,void Ve(null,{stack:st,id:Ft,glyph:Xt});var bn=Math.floor(Ft/256);if(256*bn>65535)Ve(new Error("glyphs > 65535 not supported"));else if(jt.ranges[bn])Ve(null,{stack:st,id:Ft,glyph:Xt});else{var vn=jt.requests[bn];vn||(vn=jt.requests[bn]=[],lt.loadGlyphRange(st,bn,x.url,x.requestManager,function(zn,on){if(on){for(var Fn in on)x._doesCharSupportLocalGlyph(+Fn)||(jt.glyphs[+Fn]=on[+Fn]);jt.ranges[bn]=!0}for(var er=0,vr=vn;er<vr.length;er+=1)(0,vr[er])(zn,on);delete jt.requests[bn]})),vn.push(function(zn,on){zn?Ve(zn):on&&Ve(null,{stack:st,id:Ft,glyph:on[Ft]||null})})}}else Ve(null,{stack:st,id:Ft,glyph:Xt})},function(de,Ve){if(de)S(de);else if(Ve){for(var st={},Ft=0,jt=Ve;Ft<jt.length;Ft+=1){var Xt=jt[Ft],bn=Xt.stack,vn=Xt.id,zn=Xt.glyph;(st[bn]||(st[bn]={}))[vn]=zn&&{id:zn.id,bitmap:zn.bitmap.clone(),metrics:zn.metrics}}S(null,st)}})},lt.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(E.isChar["CJK Unified Ideographs"](_)||E.isChar["Hangul Syllables"](_)||E.isChar.Hiragana(_)||E.isChar.Katakana(_))},lt.prototype._tinySDF=function(_,S,x){var C=this.localIdeographFontFamily;if(C&&this._doesCharSupportLocalGlyph(x)){var k=_.tinySDF;if(!k){var G="400";/bold/i.test(S)?G="900":/medium/i.test(S)?G="500":/light/i.test(S)&&(G="200"),k=_.tinySDF=new lt.TinySDF(24,3,8,.25,C,G)}return{id:x,bitmap:new E.AlphaImage({width:30,height:30},k.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},lt.loadGlyphRange=function(_,S,x,C,k){var G=256*S,K=G+255,de=C.transformRequest(C.normalizeGlyphsURL(x).replace("{fontstack}",_).replace("{range}",G+"-"+K),E.ResourceType.Glyphs);E.getArrayBuffer(de,function(Ve,st){if(Ve)k(Ve);else if(st){for(var Ft={},jt=0,Xt=E.parseGlyphPBF(st);jt<Xt.length;jt+=1){var bn=Xt[jt];Ft[bn.id]=bn}k(null,Ft)}})},lt.TinySDF=fe;var Ie=function(){this.specification=E.styleSpec.light.position};Ie.prototype.possiblyEvaluate=function(_,S){return E.sphericalToCartesian(_.expression.evaluate(S))},Ie.prototype.interpolate=function(_,S,x){return{x:E.number(_.x,S.x,x),y:E.number(_.y,S.y,x),z:E.number(_.z,S.z,x)}};var Ae=new E.Properties({anchor:new E.DataConstantProperty(E.styleSpec.light.anchor),position:new Ie,color:new E.DataConstantProperty(E.styleSpec.light.color),intensity:new E.DataConstantProperty(E.styleSpec.light.intensity)}),pt=function(_){function S(x){_.call(this),this._transitionable=new E.Transitionable(Ae),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(x,C){if(C===void 0&&(C={}),!this._validate(E.validateLight,x,C))for(var k in x){var G=x[k];E.endsWith(k,"-transition")?this._transitionable.setTransition(k.slice(0,-11),G):this._transitionable.setValue(k,G)}},S.prototype.updateTransitions=function(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(x){this.properties=this._transitioning.possiblyEvaluate(x)},S.prototype._validate=function(x,C,k){return(!k||k.validate!==!1)&&E.emitValidationErrors(this,x.call(E.validateStyle,E.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:E.styleSpec})))},S}(E.Evented),ut=function(_,S){this.width=_,this.height=S,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ut.prototype.getDash=function(_,S){var x=_.join(",")+String(S);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(_,S)),this.dashEntry[x]},ut.prototype.getDashRanges=function(_,S,x){var C=[],k=_.length%2==1?-_[_.length-1]*x:0,G=_[0]*x,K=!0;C.push({left:k,right:G,isDash:K,zeroLength:_[0]===0});for(var de=_[0],Ve=1;Ve<_.length;Ve++){var st=_[Ve];C.push({left:k=de*x,right:G=(de+=st)*x,isDash:K=!K,zeroLength:st===0})}return C},ut.prototype.addRoundDash=function(_,S,x){for(var C=S/2,k=-x;k<=x;k++)for(var G=this.width*(this.nextRow+x+k),K=0,de=_[K],Ve=0;Ve<this.width;Ve++){Ve/de.right>1&&(de=_[++K]);var st=Math.abs(Ve-de.left),Ft=Math.abs(Ve-de.right),jt=Math.min(st,Ft),Xt=void 0,bn=k/x*(C+1);if(de.isDash){var vn=C-Math.abs(bn);Xt=Math.sqrt(jt*jt+vn*vn)}else Xt=C-Math.sqrt(jt*jt+bn*bn);this.data[G+Ve]=Math.max(0,Math.min(255,Xt+128))}},ut.prototype.addRegularDash=function(_){for(var S=_.length-1;S>=0;--S){var x=_[S],C=_[S+1];x.zeroLength?_.splice(S,1):C&&C.isDash===x.isDash&&(C.left=x.left,_.splice(S,1))}var k=_[0],G=_[_.length-1];k.isDash===G.isDash&&(k.left=G.left-this.width,G.right=k.right+this.width);for(var K=this.width*this.nextRow,de=0,Ve=_[de],st=0;st<this.width;st++){st/Ve.right>1&&(Ve=_[++de]);var Ft=Math.abs(st-Ve.left),jt=Math.abs(st-Ve.right),Xt=Math.min(Ft,jt);this.data[K+st]=Math.max(0,Math.min(255,(Ve.isDash?Xt:-Xt)+128))}},ut.prototype.addDash=function(_,S){var x=S?7:0,C=2*x+1;if(this.nextRow+C>this.height)return E.warnOnce("LineAtlas out of space"),null;for(var k=0,G=0;G<_.length;G++)k+=_[G];if(k!==0){var K=this.width/k,de=this.getDashRanges(_,this.width,K);S?this.addRoundDash(de,K,x):this.addRegularDash(de)}var Ve={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:k};return this.nextRow+=C,this.dirty=!0,Ve},ut.prototype.bind=function(_){var S=_.gl;this.texture?(S.bindTexture(S.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,S.texSubImage2D(S.TEXTURE_2D,0,0,0,this.width,this.height,S.ALPHA,S.UNSIGNED_BYTE,this.data))):(this.texture=S.createTexture(),S.bindTexture(S.TEXTURE_2D,this.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.ALPHA,this.width,this.height,0,S.ALPHA,S.UNSIGNED_BYTE,this.data))};var Et=function _(S,x){this.workerPool=S,this.actors=[],this.currentActor=0,this.id=E.uniqueId();for(var C=this.workerPool.acquire(this.id),k=0;k<C.length;k++){var G=new _.Actor(C[k],x,this.id);G.name="Worker "+k,this.actors.push(G)}};function cn(_,S,x){var C=function(k,G){if(k)return x(k);if(G){var K=E.pick(E.extend(G,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);G.vector_layers&&(K.vectorLayers=G.vector_layers,K.vectorLayerIds=K.vectorLayers.map(function(de){return de.id})),K.tiles=S.canonicalizeTileset(K,_.url),x(null,K)}};return _.url?E.getJSON(S.transformRequest(S.normalizeSourceURL(_.url),E.ResourceType.Source),C):E.browser.frame(function(){return C(null,_)})}Et.prototype.broadcast=function(_,S,x){E.asyncAll(this.actors,function(C,k){C.send(_,S,k)},x=x||function(){})},Et.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Et.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},Et.Actor=E.Actor;var ze=function(_,S,x){this.bounds=E.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=S||0,this.maxzoom=x||24};ze.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},ze.prototype.contains=function(_){var S=Math.pow(2,_.z),x=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*S),C=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*S),k=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*S),G=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*S);return _.x>=x&&_.x<k&&_.y>=C&&_.y<G};var St=function(_){function S(x,C,k,G){if(_.call(this),this.id=x,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(C,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(G)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,function(C,k){x._tileJSONRequest=null,x._loaded=!0,C?x.fire(new E.ErrorEvent(C)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new ze(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles,x.map._requestManager._customAccessToken),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken,x.map._requestManager._customAccessToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setSourceProperty=function(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},S.prototype.setTiles=function(x){var C=this;return this.setSourceProperty(function(){C._options.tiles=x}),this},S.prototype.setUrl=function(x){var C=this;return this.setSourceProperty(function(){C.url=x,C._options.url=x}),this},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.loadTile=function(x,C){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme)),G={request:this.map._requestManager.transformRequest(k,E.ResourceType.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function K(de,Ve){return delete x.request,x.aborted?C(null):de&&de.status!==404?C(de):(Ve&&Ve.resourceTiming&&(x.resourceTiming=Ve.resourceTiming),this.map._refreshExpiredTiles&&Ve&&x.setExpiryData(Ve),x.loadVectorData(Ve,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),C(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}G.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=C:x.request=x.actor.send("reloadTile",G,K.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",G,K.bind(this)))},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.unloadTile=function(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.hasTransition=function(){return!1},S}(E.Evented),we=function(_){function S(x,C,k,G){_.call(this),this.id=x,this.dispatcher=k,this.setEventedParent(G),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},C),E.extend(this,E.pick(C,["url","scheme","tileSize"]))}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,function(C,k){x._tileJSONRequest=null,x._loaded=!0,C?x.fire(new E.ErrorEvent(C)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new ze(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.loadTile=function(x,C){var k=this,G=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);x.request=E.getImage(this.map._requestManager.transformRequest(G,E.ResourceType.Tile),function(K,de){if(delete x.request,x.aborted)x.state="unloaded",C(null);else if(K)x.state="errored",C(K);else if(de){k.map._refreshExpiredTiles&&x.setExpiryData(de),delete de.cacheControl,delete de.expires;var Ve=k.map.painter.context,st=Ve.gl;x.texture=k.map.painter.getTileTexture(de.width),x.texture?x.texture.update(de,{useMipmap:!0}):(x.texture=new E.Texture(Ve,de,st.RGBA,{useMipmap:!0}),x.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE,st.LINEAR_MIPMAP_NEAREST),Ve.extTextureFilterAnisotropic&&st.texParameterf(st.TEXTURE_2D,Ve.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ve.extTextureFilterAnisotropicMax)),x.state="loaded",E.cacheEntryPossiblyAdded(k.dispatcher),C(null)}})},S.prototype.abortTile=function(x,C){x.request&&(x.request.cancel(),delete x.request),C()},S.prototype.unloadTile=function(x,C){x.texture&&this.map.painter.saveTileTexture(x.texture),C()},S.prototype.hasTransition=function(){return!1},S}(E.Evented),nt=function(_){function S(x,C,k,G){_.call(this,x,C,k,G),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},S.prototype.loadTile=function(x,C){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function G(K,de){K&&(x.state="errored",C(K)),de&&(x.dem=de,x.needsHillshadePrepare=!0,x.state="loaded",C(null))}x.request=E.getImage(this.map._requestManager.transformRequest(k,E.ResourceType.Tile),function(K,de){if(delete x.request,x.aborted)x.state="unloaded",C(null);else if(K)x.state="errored",C(K);else if(de){this.map._refreshExpiredTiles&&x.setExpiryData(de),delete de.cacheControl,delete de.expires;var Ve=E.window.ImageBitmap&&de instanceof E.window.ImageBitmap&&E.offscreenCanvasSupported()?de:E.browser.getImageData(de,1),st={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:Ve,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",st,G.bind(this)))}}.bind(this)),x.neighboringTiles=this._getNeighboringTiles(x.tileID)},S.prototype._getNeighboringTiles=function(x){var C=x.canonical,k=Math.pow(2,C.z),G=(C.x-1+k)%k,K=C.x===0?x.wrap-1:x.wrap,de=(C.x+1+k)%k,Ve=C.x+1===k?x.wrap+1:x.wrap,st={};return st[new E.OverscaledTileID(x.overscaledZ,K,C.z,G,C.y).key]={backfilled:!1},st[new E.OverscaledTileID(x.overscaledZ,Ve,C.z,de,C.y).key]={backfilled:!1},C.y>0&&(st[new E.OverscaledTileID(x.overscaledZ,K,C.z,G,C.y-1).key]={backfilled:!1},st[new E.OverscaledTileID(x.overscaledZ,x.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},st[new E.OverscaledTileID(x.overscaledZ,Ve,C.z,de,C.y-1).key]={backfilled:!1}),C.y+1<k&&(st[new E.OverscaledTileID(x.overscaledZ,K,C.z,G,C.y+1).key]={backfilled:!1},st[new E.OverscaledTileID(x.overscaledZ,x.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},st[new E.OverscaledTileID(x.overscaledZ,Ve,C.z,de,C.y+1).key]={backfilled:!1}),st},S.prototype.unloadTile=function(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})},S}(we),Xe=function(_){function S(x,C,k,G){_.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=k.getActor(),this.setEventedParent(G),this._data=C.data,this._options=E.extend({},C),this._collectResourceTiming=C.collectResourceTiming,this._resourceTiming=[],C.maxzoom!==void 0&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;var K=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(C.buffer!==void 0?C.buffer:128)*K,tolerance:(C.tolerance!==void 0?C.tolerance:.375)*K,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:C.clusterMaxZoom!==void 0?Math.min(C.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:E.EXTENT,radius:(C.clusterRadius||50)*K,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)x.fire(new E.ErrorEvent(C));else{var k={dataType:"source",sourceDataType:"metadata"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(k.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new E.Event("data",k))}})},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setData=function(x){var C=this;return this._data=x,this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(k){if(k)C.fire(new E.ErrorEvent(k));else{var G={dataType:"source",sourceDataType:"content"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(G.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new E.Event("data",G))}}),this},S.prototype.getClusterExpansionZoom=function(x,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},C),this},S.prototype.getClusterChildren=function(x,C){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},C),this},S.prototype.getClusterLeaves=function(x,C,k,G){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:C,offset:k},G),this},S.prototype._updateWorkerData=function(x){var C=this;this._loaded=!1;var k=E.extend({},this.workerOptions),G=this._data;typeof G=="string"?(k.request=this.map._requestManager.transformRequest(E.browser.resolveURL(G),E.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(G),this.actor.send(this.type+".loadData",k,function(K,de){C._removed||de&&de.abandoned||(C._loaded=!0,de&&de.resourceTiming&&de.resourceTiming[C.id]&&(C._resourceTiming=de.resourceTiming[C.id].slice(0)),C.actor.send(C.type+".coalesce",{source:k.source},null),x(K))})},S.prototype.loaded=function(){return this._loaded},S.prototype.loadTile=function(x,C){var k=this,G=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(G,{type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(K,de){return delete x.request,x.unloadVectorData(),x.aborted?C(null):K?C(K):(x.loadVectorData(de,k.map.painter,G==="reloadTile"),C(null))})},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0},S.prototype.unloadTile=function(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})},S.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},S.prototype.serialize=function(){return E.extend({},this._options,{type:this.type,data:this._data})},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Ze=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Rt=function(_){function S(x,C,k,G){_.call(this),this.id=x,this.dispatcher=k,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(G),this.options=C}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(x,C){var k=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),function(G,K){k._loaded=!0,G?k.fire(new E.ErrorEvent(G)):K&&(k.image=K,x&&(k.coordinates=x),C&&C(),k._finishLoading())})},S.prototype.loaded=function(){return this._loaded},S.prototype.updateImage=function(x){var C=this;return this.image&&x.url?(this.options.url=x.url,this.load(x.coordinates,function(){C.texture=null}),this):this},S.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setCoordinates=function(x){var C=this;this.coordinates=x;var k=x.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(K){for(var de=1/0,Ve=1/0,st=-1/0,Ft=-1/0,jt=0,Xt=K;jt<Xt.length;jt+=1){var bn=Xt[jt];de=Math.min(de,bn.x),Ve=Math.min(Ve,bn.y),st=Math.max(st,bn.x),Ft=Math.max(Ft,bn.y)}var vn=Math.max(st-de,Ft-Ve),zn=Math.max(0,Math.floor(-Math.log(vn)/Math.LN2)),on=Math.pow(2,zn);return new E.CanonicalTileID(zn,Math.floor((de+st)/2*on),Math.floor((Ve+Ft)/2*on))}(k),this.minzoom=this.maxzoom=this.tileID.z;var G=k.map(function(K){return C.tileID.getTilePoint(K)._round()});return this._boundsArray=new E.StructArrayLayout4i8,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this},S.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var x=this.map.painter.context,C=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ze.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E.Texture(x,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[k];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},S.prototype.loadTile=function(x,C){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},C(null)):(x.state="errored",C(null))},S.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return!1},S}(E.Evented),yt=function(_){function S(x,C,k,G){_.call(this,x,C,k,G),this.roundZoom=!0,this.type="video",this.options=C}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1;var C=this.options;this.urls=[];for(var k=0,G=C.urls;k<G.length;k+=1)this.urls.push(this.map._requestManager.transformRequest(G[k],E.ResourceType.Source).url);E.getVideo(this.urls,function(K,de){x._loaded=!0,K?x.fire(new E.ErrorEvent(K)):de&&(x.video=de,x.video.loop=!0,x.video.setAttribute("playsinline",""),x.video.addEventListener("playing",function(){x.map.triggerRepaint()}),x.map&&x.video.play(),x._finishLoading())})},S.prototype.pause=function(){this.video&&this.video.pause()},S.prototype.play=function(){this.video&&this.video.play()},S.prototype.seek=function(x){if(this.video){var C=this.video.seekable;x<C.start(0)||x>C.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+C.start(0)+" and "+C.end(0)+"-second mark."))):this.video.currentTime=x}},S.prototype.getVideo=function(){return this.video},S.prototype.onAdd=function(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},S.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var x=this.map.painter.context,C=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ze.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new E.Texture(x,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[k];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this.video&&!this.video.paused},S}(Rt),Me=function(_){function S(x,C,k,G){_.call(this,x,C,k,G),C.coordinates?Array.isArray(C.coordinates)&&C.coordinates.length===4&&!C.coordinates.some(function(K){return!Array.isArray(K)||K.length!==2||K.some(function(de){return typeof de!="number"})})||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "coordinates"'))),C.animate&&typeof C.animate!="boolean"&&this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),C.canvas?typeof C.canvas=="string"||C.canvas instanceof E.window.HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=C,this.animate=C.animate===void 0||C.animate}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof E.window.HTMLCanvasElement?this.options.canvas:E.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},S.prototype.getCanvas=function(){return this.canvas},S.prototype.onAdd=function(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()},S.prototype.onRemove=function(){this.pause()},S.prototype.prepare=function(){var x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var C=this.map.painter.context,k=C.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Ze.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E.Texture(C,this.canvas,k.RGBA,{premultiply:!0}),this.tiles){var K=this.tiles[G];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this._playing},S.prototype._hasInvalidDimensions=function(){for(var x=0,C=[this.canvas.width,this.canvas.height];x<C.length;x+=1){var k=C[x];if(isNaN(k)||k<=0)return!0}return!1},S}(Rt),Gt={vector:St,raster:we,"raster-dem":nt,geojson:Xe,video:yt,image:Rt,canvas:Me};function ln(_,S){var x=E.identity([]);return E.translate(x,x,[1,1,0]),E.scale(x,x,[.5*_.width,.5*_.height,1]),E.multiply(x,x,_.calculatePosMatrix(S.toUnwrapped()))}function Ln(_,S,x,C,k,G){var K=function(zn,on,Fn){if(zn)for(var er=0,vr=zn;er<vr.length;er+=1){var Mr=on[vr[er]];if(Mr&&Mr.source===Fn&&Mr.type==="fill-extrusion")return!0}else for(var wr in on){var Fr=on[wr];if(Fr.source===Fn&&Fr.type==="fill-extrusion")return!0}return!1}(k&&k.layers,S,_.id),de=G.maxPitchScaleFactor(),Ve=_.tilesIn(C,de,K);Ve.sort(kn);for(var st=[],Ft=0,jt=Ve;Ft<jt.length;Ft+=1){var Xt=jt[Ft];st.push({wrappedTileID:Xt.tileID.wrapped().key,queryResults:Xt.tile.queryRenderedFeatures(S,x,_._state,Xt.queryGeometry,Xt.cameraQueryGeometry,Xt.scale,k,G,de,ln(_.transform,Xt.tileID))})}var bn=function(zn){for(var on={},Fn={},er=0,vr=zn;er<vr.length;er+=1){var Mr=vr[er],wr=Mr.queryResults,Fr=Mr.wrappedTileID,ni=Fn[Fr]=Fn[Fr]||{};for(var Bi in wr)for(var Ii=wr[Bi],co=ni[Bi]=ni[Bi]||{},Uo=on[Bi]=on[Bi]||[],Go=0,Zo=Ii;Go<Zo.length;Go+=1){var fs=Zo[Go];co[fs.featureIndex]||(co[fs.featureIndex]=!0,Uo.push(fs))}}return on}(st);for(var vn in bn)bn[vn].forEach(function(zn){var on=zn.feature,Fn=_.getFeatureState(on.layer["source-layer"],on.id);on.source=on.layer.source,on.layer["source-layer"]&&(on.sourceLayer=on.layer["source-layer"]),on.state=Fn});return bn}function kn(_,S){var x=_.tileID,C=S.tileID;return x.overscaledZ-C.overscaledZ||x.canonical.y-C.canonical.y||x.wrap-C.wrap||x.canonical.x-C.canonical.x}var lr=function(_,S){this.max=_,this.onRemove=S,this.reset()};lr.prototype.reset=function(){for(var _ in this.data)for(var S=0,x=this.data[_];S<x.length;S+=1){var C=x[S];C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value)}return this.data={},this.order=[],this},lr.prototype.add=function(_,S,x){var C=this,k=_.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);var G={value:S,timeout:void 0};if(x!==void 0&&(G.timeout=setTimeout(function(){C.remove(_,G)},x)),this.data[k].push(G),this.order.push(k),this.order.length>this.max){var K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this},lr.prototype.has=function(_){return _.wrapped().key in this.data},lr.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},lr.prototype._getAndRemoveByKey=function(_){var S=this.data[_].shift();return S.timeout&&clearTimeout(S.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),S.value},lr.prototype.getByKey=function(_){var S=this.data[_];return S?S[0].value:null},lr.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},lr.prototype.remove=function(_,S){if(!this.has(_))return this;var x=_.wrapped().key,C=S===void 0?0:this.data[x].indexOf(S),k=this.data[x][C];return this.data[x].splice(C,1),k.timeout&&clearTimeout(k.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(k.value),this.order.splice(this.order.indexOf(x),1),this},lr.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},lr.prototype.filter=function(_){var S=[];for(var x in this.data)for(var C=0,k=this.data[x];C<k.length;C+=1){var G=k[C];_(G.value)||S.push(G)}for(var K=0,de=S;K<de.length;K+=1){var Ve=de[K];this.remove(Ve.value.tileID,Ve)}};var zt=function(_,S,x){this.context=_;var C=_.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};zt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},zt.prototype.updateData=function(_){var S=this.context.gl;this.context.unbindVAO(),this.bind(),S.bufferSubData(S.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},zt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},yn=function(_,S,x,C){this.length=S.length,this.attributes=x,this.itemSize=S.bytesPerElement,this.dynamicDraw=C,this.context=_;var k=_.gl;this.buffer=k.createBuffer(),_.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};yn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},yn.prototype.updateData=function(_){var S=this.context.gl;this.bind(),S.bufferSubData(S.ARRAY_BUFFER,0,_.arrayBuffer)},yn.prototype.enableAttributes=function(_,S){for(var x=0;x<this.attributes.length;x++){var C=S.attributes[this.attributes[x].name];C!==void 0&&_.enableVertexAttribArray(C)}},yn.prototype.setVertexAttribPointers=function(_,S,x){for(var C=0;C<this.attributes.length;C++){var k=this.attributes[C],G=S.attributes[k.name];G!==void 0&&_.vertexAttribPointer(G,k.components,_[Kt[k.type]],!1,this.itemSize,k.offset+this.itemSize*(x||0))}},yn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kn=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Kn.prototype.get=function(){return this.current},Kn.prototype.set=function(_){},Kn.prototype.getDefault=function(){return this.default},Kn.prototype.setDefault=function(){this.set(this.default)};var rn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var C=this.current;(x.r!==C.r||x.g!==C.g||x.b!==C.b||x.a!==C.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Kn),Wt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 1},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)},S}(Kn),Pt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)},S}(Kn),Pe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[!0,!0,!0,!0]},S.prototype.set=function(x){var C=this.current;(x[0]!==C[0]||x[1]!==C[1]||x[2]!==C[2]||x[3]!==C[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Kn),Qe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)},S}(Kn),Bt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 255},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)},S}(Kn),z=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},S.prototype.set=function(x){var C=this.current;(x.func!==C.func||x.ref!==C.ref||x.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)},S}(Kn),ue=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]},S.prototype.set=function(x){var C=this.current;(x[0]!==C[0]||x[1]!==C[1]||x[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)},S}(Kn),ot=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;x?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=x,this.dirty=!1}},S}(Kn),le=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[0,1]},S.prototype.set=function(x){var C=this.current;(x[0]!==C[0]||x[1]!==C[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Kn),$t=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;x?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=x,this.dirty=!1}},S}(Kn),an=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.LESS},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)},S}(Kn),hn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;x?C.enable(C.BLEND):C.disable(C.BLEND),this.current=x,this.dirty=!1}},S}(Kn),Dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.ONE,x.ZERO]},S.prototype.set=function(x){var C=this.current;(x[0]!==C[0]||x[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Kn),Xn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var C=this.current;(x.r!==C.r||x.g!==C.g||x.b!==C.b||x.a!==C.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Kn),Gn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.FUNC_ADD},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)},S}(Kn),dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;x?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=x,this.dirty=!1}},S}(Kn),mt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.BACK},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)},S}(Kn),Ct=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.CCW},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)},S}(Kn),Cn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)},S}(Kn),Pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.TEXTURE0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)},S}(Kn),Zn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]},S.prototype.set=function(x){var C=this.current;(x[0]!==C[0]||x[1]!==C[1]||x[2]!==C[2]||x[3]!==C[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Kn),ht=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,x),this.current=x,this.dirty=!1}},S}(Kn),ye=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Kn),Be=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.bindTexture(C.TEXTURE_2D,x),this.current=x,this.dirty=!1}},S}(Kn),rt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}},S}(Kn),Mt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){var C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1},S}(Kn),Ot=function(_){function S(x){_.call(this,x),this.vao=x.extVertexArrayObject}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){this.vao&&(x!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(x),this.current=x,this.dirty=!1)},S}(Kn),En=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 4},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}},S}(Kn),$n=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}},S}(Kn),yr=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}},S}(Kn),qn=function(_){function S(x,C){_.call(this,x),this.context=x,this.parent=C}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S}(Kn),Ce=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.setDirty=function(){this.dirty=!0},S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}},S}(qn),xe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(qn),ke=function(_,S,x,C){this.context=_,this.width=S,this.height=x;var k=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new Ce(_,k),C&&(this.depthAttachment=new xe(_,k))};ke.prototype.destroy=function(){var _=this.context.gl,S=this.colorAttachment.get();if(S&&_.deleteTexture(S),this.depthAttachment){var x=this.depthAttachment.get();x&&_.deleteRenderbuffer(x)}_.deleteFramebuffer(this.framebuffer)};var et=function(_,S,x){this.func=_,this.mask=S,this.range=x};et.ReadOnly=!1,et.ReadWrite=!0,et.disabled=new et(519,et.ReadOnly,[0,1]);var Tt=function(_,S,x,C,k,G){this.test=_,this.ref=S,this.mask=x,this.fail=C,this.depthFail=k,this.pass=G};Tt.disabled=new Tt({func:519,mask:0},0,0,7680,7680,7680);var Yt=function(_,S,x){this.blendFunction=_,this.blendColor=S,this.mask=x};Yt.disabled=new Yt(Yt.Replace=[1,0],E.Color.transparent,[!1,!1,!1,!1]),Yt.unblended=new Yt(Yt.Replace,E.Color.transparent,[!0,!0,!0,!0]),Yt.alphaBlended=new Yt([1,771],E.Color.transparent,[!0,!0,!0,!0]);var pn=function(_,S,x){this.enable=_,this.mode=S,this.frontFace=x};pn.disabled=new pn(!1,1029,2305),pn.backCCW=new pn(!0,1029,2305);var _t=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rn(this),this.clearDepth=new Wt(this),this.clearStencil=new Pt(this),this.colorMask=new Pe(this),this.depthMask=new Qe(this),this.stencilMask=new Bt(this),this.stencilFunc=new z(this),this.stencilOp=new ue(this),this.stencilTest=new ot(this),this.depthRange=new le(this),this.depthTest=new $t(this),this.depthFunc=new an(this),this.blend=new hn(this),this.blendFunc=new Dn(this),this.blendColor=new Xn(this),this.blendEquation=new Gn(this),this.cullFace=new dn(this),this.cullFaceSide=new mt(this),this.frontFace=new Ct(this),this.program=new Cn(this),this.activeTexture=new Pn(this),this.viewport=new Zn(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new ye(this),this.bindTexture=new Be(this),this.bindVertexBuffer=new rt(this),this.bindElementBuffer=new Mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ot(this),this.pixelStoreUnpack=new En(this),this.pixelStoreUnpackPremultiplyAlpha=new $n(this),this.pixelStoreUnpackFlipY=new yr(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};_t.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},_t.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},_t.prototype.createIndexBuffer=function(_,S){return new zt(this,_,S)},_t.prototype.createVertexBuffer=function(_,S,x){return new yn(this,_,S,x)},_t.prototype.createRenderbuffer=function(_,S,x){var C=this.gl,k=C.createRenderbuffer();return this.bindRenderbuffer.set(k),C.renderbufferStorage(C.RENDERBUFFER,_,S,x),this.bindRenderbuffer.set(null),k},_t.prototype.createFramebuffer=function(_,S,x){return new ke(this,_,S,x)},_t.prototype.clear=function(_){var S=_.color,x=_.depth,C=this.gl,k=0;S&&(k|=C.COLOR_BUFFER_BIT,this.clearColor.set(S),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(k|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),C.clear(k)},_t.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},_t.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},_t.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},_t.prototype.setColorMode=function(_){E.deepEqual(_.blendFunction,Yt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},_t.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var qt=function(_){function S(x,C,k){var G=this;_.call(this),this.id=x,this.dispatcher=k,this.on("data",function(K){K.dataType==="source"&&K.sourceDataType==="metadata"&&(G._sourceLoaded=!0),G._sourceLoaded&&!G._paused&&K.dataType==="source"&&K.sourceDataType==="content"&&(G.reload(),G.transform&&G.update(G.transform))}),this.on("error",function(){G._sourceErrored=!0}),this._source=function(K,de,Ve,st){var Ft=new Gt[de.type](K,de,Ve,st);if(Ft.id!==K)throw new Error("Expected Source id to be "+K+" instead of "+Ft.id);return E.bindAll(["load","abort","unload","serialize","prepare"],Ft),Ft}(x,C,k,this),this._tiles={},this._cache=new lr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new E.SourceFeatureState}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(x)},S.prototype.onRemove=function(x){this._source&&this._source.onRemove&&this._source.onRemove(x)},S.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var x in this._tiles){var C=this._tiles[x];if(C.state!=="loaded"&&C.state!=="errored")return!1}return!0},S.prototype.getSource=function(){return this._source},S.prototype.pause=function(){this._paused=!0},S.prototype.resume=function(){if(this._paused){var x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform)}},S.prototype._loadTile=function(x,C){return this._source.loadTile(x,C)},S.prototype._unloadTile=function(x){if(this._source.unloadTile)return this._source.unloadTile(x,function(){})},S.prototype._abortTile=function(x){if(this._source.abortTile)return this._source.abortTile(x,function(){})},S.prototype.serialize=function(){return this._source.serialize()},S.prototype.prepare=function(x){for(var C in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var k=this._tiles[C];k.upload(x),k.prepare(this.map.style.imageManager)}},S.prototype.getIds=function(){return E.values(this._tiles).map(function(x){return x.tileID}).sort(Qn).map(function(x){return x.key})},S.prototype.getRenderableIds=function(x){var C=this,k=[];for(var G in this._tiles)this._isIdRenderable(G,x)&&k.push(this._tiles[G]);return x?k.sort(function(K,de){var Ve=K.tileID,st=de.tileID,Ft=new E.Point(Ve.canonical.x,Ve.canonical.y)._rotate(C.transform.angle),jt=new E.Point(st.canonical.x,st.canonical.y)._rotate(C.transform.angle);return Ve.overscaledZ-st.overscaledZ||jt.y-Ft.y||jt.x-Ft.x}).map(function(K){return K.tileID.key}):k.map(function(K){return K.tileID}).sort(Qn).map(function(K){return K.key})},S.prototype.hasRenderableParent=function(x){var C=this.findLoadedParent(x,0);return!!C&&this._isIdRenderable(C.tileID.key)},S.prototype._isIdRenderable=function(x,C){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(C||!this._tiles[x].holdingForFade())},S.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var x in this._cache.reset(),this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")},S.prototype._reloadTile=function(x,C){var k=this._tiles[x];k&&(k.state!=="loading"&&(k.state=C),this._loadTile(k,this._tileLoaded.bind(this,k,x,C)))},S.prototype._tileLoaded=function(x,C,k,G){if(G)return x.state="errored",void(G.status!==404?this._source.fire(new E.ErrorEvent(G,{tile:x})):this.update(this.transform));x.timeAdded=E.browser.now(),k==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(C,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),this._source.fire(new E.Event("data",{dataType:"source",tile:x,coord:x.tileID}))},S.prototype._backfillDEM=function(x){for(var C=this.getRenderableIds(),k=0;k<C.length;k++){var G=C[k];if(x.neighboringTiles&&x.neighboringTiles[G]){var K=this.getTileByID(G);de(x,K),de(K,x)}}function de(Ve,st){Ve.needsHillshadePrepare=!0;var Ft=st.tileID.canonical.x-Ve.tileID.canonical.x,jt=st.tileID.canonical.y-Ve.tileID.canonical.y,Xt=Math.pow(2,Ve.tileID.canonical.z),bn=st.tileID.key;Ft===0&&jt===0||Math.abs(jt)>1||(Math.abs(Ft)>1&&(Math.abs(Ft+Xt)===1?Ft+=Xt:Math.abs(Ft-Xt)===1&&(Ft-=Xt)),st.dem&&Ve.dem&&(Ve.dem.backfillBorder(st.dem,Ft,jt),Ve.neighboringTiles&&Ve.neighboringTiles[bn]&&(Ve.neighboringTiles[bn].backfilled=!0)))}},S.prototype.getTile=function(x){return this.getTileByID(x.key)},S.prototype.getTileByID=function(x){return this._tiles[x]},S.prototype._retainLoadedChildren=function(x,C,k,G){for(var K in this._tiles){var de=this._tiles[K];if(!(G[K]||!de.hasData()||de.tileID.overscaledZ<=C||de.tileID.overscaledZ>k)){for(var Ve=de.tileID;de&&de.tileID.overscaledZ>C+1;){var st=de.tileID.scaledTo(de.tileID.overscaledZ-1);(de=this._tiles[st.key])&&de.hasData()&&(Ve=st)}for(var Ft=Ve;Ft.overscaledZ>C;)if(x[(Ft=Ft.scaledTo(Ft.overscaledZ-1)).key]){G[Ve.key]=Ve;break}}}},S.prototype.findLoadedParent=function(x,C){if(x.key in this._loadedParentTiles){var k=this._loadedParentTiles[x.key];return k&&k.tileID.overscaledZ>=C?k:null}for(var G=x.overscaledZ-1;G>=C;G--){var K=x.scaledTo(G),de=this._getLoadedTile(K);if(de)return de}},S.prototype._getLoadedTile=function(x){var C=this._tiles[x.key];return C&&C.hasData()?C:this._cache.getByKey(x.wrapped().key)},S.prototype.updateCacheSize=function(x){var C=Math.ceil(x.width/this._source.tileSize)+1,k=Math.ceil(x.height/this._source.tileSize)+1,G=Math.floor(C*k*5),K=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(K)},S.prototype.handleWrapJump=function(x){var C=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,C){var k={};for(var G in this._tiles){var K=this._tiles[G];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+C),k[K.tileID.key]=K}for(var de in this._tiles=k,this._timers)clearTimeout(this._timers[de]),delete this._timers[de];for(var Ve in this._tiles)this._setTileReloadTimer(Ve,this._tiles[Ve])}},S.prototype.update=function(x){var C=this;if(this.transform=x,this._sourceLoaded&&!this._paused){var k;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?k=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ni){return new E.OverscaledTileID(ni.canonical.z,ni.wrap,ni.canonical.z,ni.canonical.x,ni.canonical.y)}):(k=x.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(k=k.filter(function(ni){return C._source.hasTile(ni)}))):k=[];var G=x.coveringZoomLevel(this._source),K=Math.max(G-S.maxOverzooming,this._source.minzoom),de=Math.max(G+S.maxUnderzooming,this._source.minzoom),Ve=this._updateRetainedTiles(k,G);if(_r(this._source.type)){for(var st={},Ft={},jt=0,Xt=Object.keys(Ve);jt<Xt.length;jt+=1){var bn=Xt[jt],vn=Ve[bn],zn=this._tiles[bn];if(zn&&!(zn.fadeEndTime&&zn.fadeEndTime<=E.browser.now())){var on=this.findLoadedParent(vn,K);on&&(this._addTile(on.tileID),st[on.tileID.key]=on.tileID),Ft[bn]=vn}}for(var Fn in this._retainLoadedChildren(Ft,G,de,Ve),st)Ve[Fn]||(this._coveredTiles[Fn]=!0,Ve[Fn]=st[Fn])}for(var er in Ve)this._tiles[er].clearFadeHold();for(var vr=0,Mr=E.keysDifference(this._tiles,Ve);vr<Mr.length;vr+=1){var wr=Mr[vr],Fr=this._tiles[wr];Fr.hasSymbolBuckets&&!Fr.holdingForFade()?Fr.setHoldDuration(this.map._fadeDuration):Fr.hasSymbolBuckets&&!Fr.symbolFadeFinished()||this._removeTile(wr)}this._updateLoadedParentTileCache()}},S.prototype.releaseSymbolFadeTiles=function(){for(var x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)},S.prototype._updateRetainedTiles=function(x,C){for(var k={},G={},K=Math.max(C-S.maxOverzooming,this._source.minzoom),de=Math.max(C+S.maxUnderzooming,this._source.minzoom),Ve={},st=0,Ft=x;st<Ft.length;st+=1){var jt=Ft[st],Xt=this._addTile(jt);k[jt.key]=jt,Xt.hasData()||C<this._source.maxzoom&&(Ve[jt.key]=jt)}this._retainLoadedChildren(Ve,C,de,k);for(var bn=0,vn=x;bn<vn.length;bn+=1){var zn=vn[bn],on=this._tiles[zn.key];if(!on.hasData()){if(C+1>this._source.maxzoom){var Fn=zn.children(this._source.maxzoom)[0],er=this.getTile(Fn);if(er&&er.hasData()){k[Fn.key]=Fn;continue}}else{var vr=zn.children(this._source.maxzoom);if(k[vr[0].key]&&k[vr[1].key]&&k[vr[2].key]&&k[vr[3].key])continue}for(var Mr=on.wasRequested(),wr=zn.overscaledZ-1;wr>=K;--wr){var Fr=zn.scaledTo(wr);if(G[Fr.key]||(G[Fr.key]=!0,!(on=this.getTile(Fr))&&Mr&&(on=this._addTile(Fr)),on&&(k[Fr.key]=Fr,Mr=on.wasRequested(),on.hasData())))break}}}return k},S.prototype._updateLoadedParentTileCache=function(){for(var x in this._loadedParentTiles={},this._tiles){for(var C=[],k=void 0,G=this._tiles[x].tileID;G.overscaledZ>0;){if(G.key in this._loadedParentTiles){k=this._loadedParentTiles[G.key];break}C.push(G.key);var K=G.scaledTo(G.overscaledZ-1);if(k=this._getLoadedTile(K))break;G=K}for(var de=0,Ve=C;de<Ve.length;de+=1)this._loadedParentTiles[Ve[de]]=k}},S.prototype._addTile=function(x){var C=this._tiles[x.key];if(C)return C;(C=this._cache.getAndRemove(x))&&(this._setTileReloadTimer(x.key,C),C.tileID=x,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,C)));var k=!!C;return k||(C=new E.Tile(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,x.key,C.state))),C?(C.uses++,this._tiles[x.key]=C,k||this._source.fire(new E.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C):null},S.prototype._setTileReloadTimer=function(x,C){var k=this;x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);var G=C.getExpiryTimeout();G&&(this._timers[x]=setTimeout(function(){k._reloadTile(x,"expired"),delete k._timers[x]},G))},S.prototype._removeTile=function(x){var C=this._tiles[x];C&&(C.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),C.uses>0||(C.hasData()&&C.state!=="reloading"?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))},S.prototype.clearTiles=function(){for(var x in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(x);this._cache.reset()},S.prototype.tilesIn=function(x,C,k){var G=this,K=[],de=this.transform;if(!de)return K;for(var Ve=k?de.getCameraQueryGeometry(x):x,st=x.map(function(wr){return de.pointCoordinate(wr)}),Ft=Ve.map(function(wr){return de.pointCoordinate(wr)}),jt=this.getIds(),Xt=1/0,bn=1/0,vn=-1/0,zn=-1/0,on=0,Fn=Ft;on<Fn.length;on+=1){var er=Fn[on];Xt=Math.min(Xt,er.x),bn=Math.min(bn,er.y),vn=Math.max(vn,er.x),zn=Math.max(zn,er.y)}for(var vr=function(wr){var Fr=G._tiles[jt[wr]];if(!Fr.holdingForFade()){var ni=Fr.tileID,Bi=Math.pow(2,de.zoom-Fr.tileID.overscaledZ),Ii=C*Fr.queryPadding*E.EXTENT/Fr.tileSize/Bi,co=[ni.getTilePoint(new E.MercatorCoordinate(Xt,bn)),ni.getTilePoint(new E.MercatorCoordinate(vn,zn))];if(co[0].x-Ii<E.EXTENT&&co[0].y-Ii<E.EXTENT&&co[1].x+Ii>=0&&co[1].y+Ii>=0){var Uo=st.map(function(Zo){return ni.getTilePoint(Zo)}),Go=Ft.map(function(Zo){return ni.getTilePoint(Zo)});K.push({tile:Fr,tileID:ni,queryGeometry:Uo,cameraQueryGeometry:Go,scale:Bi})}}},Mr=0;Mr<jt.length;Mr++)vr(Mr);return K},S.prototype.getVisibleCoordinates=function(x){for(var C=this,k=this.getRenderableIds(x).map(function(Ve){return C._tiles[Ve].tileID}),G=0,K=k;G<K.length;G+=1){var de=K[G];de.posMatrix=this.transform.calculatePosMatrix(de.toUnwrapped())}return k},S.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(_r(this._source.type))for(var x in this._tiles){var C=this._tiles[x];if(C.fadeEndTime!==void 0&&C.fadeEndTime>=E.browser.now())return!0}return!1},S.prototype.setFeatureState=function(x,C,k){this._state.updateState(x=x||"_geojsonTileLayer",C,k)},S.prototype.removeFeatureState=function(x,C,k){this._state.removeFeatureState(x=x||"_geojsonTileLayer",C,k)},S.prototype.getFeatureState=function(x,C){return this._state.getState(x=x||"_geojsonTileLayer",C)},S.prototype.setDependencies=function(x,C,k){var G=this._tiles[x];G&&G.setDependencies(C,k)},S.prototype.reloadTilesForDependencies=function(x,C){for(var k in this._tiles)this._tiles[k].hasDependency(x,C)&&this._reloadTile(k,"reloading");this._cache.filter(function(G){return!G.hasDependency(x,C)})},S}(E.Evented);function Qn(_,S){var x=Math.abs(2*_.wrap)-+(_.wrap<0),C=Math.abs(2*S.wrap)-+(S.wrap<0);return _.overscaledZ-S.overscaledZ||C-x||S.canonical.y-_.canonical.y||S.canonical.x-_.canonical.x}function _r(_){return _==="raster"||_==="image"||_==="video"}function Vr(){return new E.window.Worker(R0.workerUrl)}qt.maxOverzooming=10,qt.maxUnderzooming=3;var pr="mapboxgl_preloaded_worker_pool",Ur=function(){this.active={}};Ur.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<Ur.workerCount;)this.workers.push(new Vr);return this.active[_]=!0,this.workers.slice()},Ur.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(S){S.terminate()}),this.workers=null)},Ur.prototype.isPreloaded=function(){return!!this.active[pr]},Ur.prototype.numActive=function(){return Object.keys(this.active).length};var mi,wi=Math.floor(E.browser.hardwareConcurrency/2);function Sr(){return mi||(mi=new Ur),mi}function Ti(_,S){var x={};for(var C in _)C!=="ref"&&(x[C]=_[C]);return E.refProperties.forEach(function(k){k in S&&(x[k]=S[k])}),x}function hi(_){_=_.slice();for(var S=Object.create(null),x=0;x<_.length;x++)S[_[x].id]=_[x];for(var C=0;C<_.length;C++)"ref"in _[C]&&(_[C]=Ti(_[C],S[_[C].ref]));return _}Ur.workerCount=Math.max(Math.min(wi,6),1);var si={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mo(_,S,x){x.push({command:si.addSource,args:[_,S[_]]})}function bi(_,S,x){S.push({command:si.removeSource,args:[_]}),x[_]=!0}function na(_,S,x,C){bi(_,x,C),Mo(_,S,x)}function _a(_,S,x){var C;for(C in _[x])if(_[x].hasOwnProperty(C)&&C!=="data"&&!E.deepEqual(_[x][C],S[x][C]))return!1;for(C in S[x])if(S[x].hasOwnProperty(C)&&C!=="data"&&!E.deepEqual(_[x][C],S[x][C]))return!1;return!0}function Ro(_,S,x,C,k,G){var K;for(K in S=S||{},_=_||{})_.hasOwnProperty(K)&&(E.deepEqual(_[K],S[K])||x.push({command:G,args:[C,K,S[K],k]}));for(K in S)S.hasOwnProperty(K)&&!_.hasOwnProperty(K)&&(E.deepEqual(_[K],S[K])||x.push({command:G,args:[C,K,S[K],k]}))}function qo(_){return _.id}function Ne(_,S){return _[S.id]=S,_}var Je=function(_,S){this.reset(_,S)};Je.prototype.reset=function(_,S){this.points=_||[],this._distances=[0];for(var x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(S||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Je.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=E.clamp(_,0,1);for(var S=1,x=this._distances[S],C=_*this.paddedLength+this.padding;x<C&&S<this._distances.length;)x=this._distances[++S];var k=S-1,G=this._distances[k],K=x-G,de=K>0?(C-G)/K:0;return this.points[k].mult(1-de).add(this.points[S].mult(de))};var kt=function(_,S,x){var C=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(_/x),this.yCellCount=Math.ceil(S/x);for(var G=0;G<this.xCellCount*this.yCellCount;G++)C.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=S,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/S,this.boxUid=0,this.circleUid=0};function sn(_,S,x,C,k){var G=E.create();return S?(E.scale(G,G,[1/k,1/k,1]),x||E.rotateZ(G,G,C.angle)):E.multiply(G,C.labelPlaneMatrix,_),G}function Nn(_,S,x,C,k){if(S){var G=E.clone(_);return E.scale(G,G,[k,k,1]),x||E.rotateZ(G,G,-C.angle),G}return C.glCoordMatrix}function Bn(_,S){var x=[_.x,_.y,0,1];Zr(x,x,S);var C=x[3];return{point:new E.Point(x[0]/C,x[1]/C),signedDistanceFromCamera:C}}function gn(_,S){return .5+_/S*.5}function On(_,S){var x=_[0]/_[3],C=_[1]/_[3];return x>=-S[0]&&x<=S[0]&&C>=-S[1]&&C<=S[1]}function dr(_,S,x,C,k,G,K,de){var Ve=C?_.textSizeData:_.iconSizeData,st=E.evaluateSizeForZoom(Ve,x.transform.zoom),Ft=[256/x.width*2+1,256/x.height*2+1],jt=C?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;jt.clear();for(var Xt=_.lineVertexArray,bn=C?_.text.placedSymbolArray:_.icon.placedSymbolArray,vn=x.transform.width/x.transform.height,zn=!1,on=0;on<bn.length;on++){var Fn=bn.get(on);if(Fn.hidden||Fn.writingMode===E.WritingMode.vertical&&!zn)Li(Fn.numGlyphs,jt);else{zn=!1;var er=[Fn.anchorX,Fn.anchorY,0,1];if(E.transformMat4(er,er,S),On(er,Ft)){var vr=gn(x.transform.cameraToCenterDistance,er[3]),Mr=E.evaluateSizeForFeature(Ve,st,Fn),wr=K?Mr/vr:Mr*vr,Fr=new E.Point(Fn.anchorX,Fn.anchorY),ni=Bn(Fr,k).point,Bi={},Ii=Gi(Fn,wr,!1,de,S,k,G,_.glyphOffsetArray,Xt,jt,ni,Fr,Bi,vn);zn=Ii.useVertical,(Ii.notEnoughRoom||zn||Ii.needsFlipping&&Gi(Fn,wr,!0,de,S,k,G,_.glyphOffsetArray,Xt,jt,ni,Fr,Bi,vn).notEnoughRoom)&&Li(Fn.numGlyphs,jt)}else Li(Fn.numGlyphs,jt)}}C?_.text.dynamicLayoutVertexBuffer.updateData(jt):_.icon.dynamicLayoutVertexBuffer.updateData(jt)}function hr(_,S,x,C,k,G,K,de,Ve,st,Ft){var jt=de.glyphStartIndex+de.numGlyphs,Xt=de.lineStartIndex,bn=de.lineStartIndex+de.lineLength,vn=S.getoffsetX(de.glyphStartIndex),zn=S.getoffsetX(jt-1),on=Qr(_*vn,x,C,k,G,K,de.segment,Xt,bn,Ve,st,Ft);if(!on)return null;var Fn=Qr(_*zn,x,C,k,G,K,de.segment,Xt,bn,Ve,st,Ft);return Fn?{first:on,last:Fn}:null}function ii(_,S,x,C){return _===E.WritingMode.horizontal&&Math.abs(x.y-S.y)>Math.abs(x.x-S.x)*C?{useVertical:!0}:(_===E.WritingMode.vertical?S.y<x.y:S.x>x.x)?{needsFlipping:!0}:null}function Gi(_,S,x,C,k,G,K,de,Ve,st,Ft,jt,Xt,bn){var vn,zn=S/24,on=_.lineOffsetX*zn,Fn=_.lineOffsetY*zn;if(_.numGlyphs>1){var er=_.glyphStartIndex+_.numGlyphs,vr=_.lineStartIndex,Mr=_.lineStartIndex+_.lineLength,wr=hr(zn,de,on,Fn,x,Ft,jt,_,Ve,G,Xt);if(!wr)return{notEnoughRoom:!0};var Fr=Bn(wr.first.point,K).point,ni=Bn(wr.last.point,K).point;if(C&&!x){var Bi=ii(_.writingMode,Fr,ni,bn);if(Bi)return Bi}vn=[wr.first];for(var Ii=_.glyphStartIndex+1;Ii<er-1;Ii++)vn.push(Qr(zn*de.getoffsetX(Ii),on,Fn,x,Ft,jt,_.segment,vr,Mr,Ve,G,Xt));vn.push(wr.last)}else{if(C&&!x){var co=Bn(jt,k).point,Uo=_.lineStartIndex+_.segment+1,Go=new E.Point(Ve.getx(Uo),Ve.gety(Uo)),Zo=Bn(Go,k),fs=Zo.signedDistanceFromCamera>0?Zo.point:ao(jt,Go,co,1,k),Cr=ii(_.writingMode,co,fs,bn);if(Cr)return Cr}var Jt=Qr(zn*de.getoffsetX(_.glyphStartIndex),on,Fn,x,Ft,jt,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,Ve,G,Xt);if(!Jt)return{notEnoughRoom:!0};vn=[Jt]}for(var ma=0,fa=vn;ma<fa.length;ma+=1){var Qo=fa[ma];E.addDynamicAttributes(st,Qo.point,Qo.angle)}return{}}function ao(_,S,x,C,k){var G=Bn(_.add(_.sub(S)._unit()),k).point,K=x.sub(G);return x.add(K._mult(C/K.mag()))}function Qr(_,S,x,C,k,G,K,de,Ve,st,Ft,jt){var Xt=C?_-S:_+S,bn=Xt>0?1:-1,vn=0;C&&(bn*=-1,vn=Math.PI),bn<0&&(vn+=Math.PI);for(var zn=bn>0?de+K:de+K+1,on=k,Fn=k,er=0,vr=0,Mr=Math.abs(Xt),wr=[];er+vr<=Mr;){if((zn+=bn)<de||zn>=Ve)return null;if(Fn=on,wr.push(on),(on=jt[zn])===void 0){var Fr=new E.Point(st.getx(zn),st.gety(zn)),ni=Bn(Fr,Ft);if(ni.signedDistanceFromCamera>0)on=jt[zn]=ni.point;else{var Bi=zn-bn;on=ao(er===0?G:new E.Point(st.getx(Bi),st.gety(Bi)),Fr,Fn,Mr-er+1,Ft)}}er+=vr,vr=Fn.dist(on)}var Ii=(Mr-er)/vr,co=on.sub(Fn),Uo=co.mult(Ii)._add(Fn);Uo._add(co._unit()._perp()._mult(x*bn));var Go=vn+Math.atan2(on.y-Fn.y,on.x-Fn.x);return wr.push(Uo),{point:Uo,angle:Go,path:wr}}kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kt.prototype.insert=function(_,S,x,C,k){this._forEachCell(S,x,C,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(S),this.bboxes.push(x),this.bboxes.push(C),this.bboxes.push(k)},kt.prototype.insertCircle=function(_,S,x,C){this._forEachCell(S-C,x-C,S+C,x+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(S),this.circles.push(x),this.circles.push(C)},kt.prototype._insertBoxCell=function(_,S,x,C,k,G){this.boxCells[k].push(G)},kt.prototype._insertCircleCell=function(_,S,x,C,k,G){this.circleCells[k].push(G)},kt.prototype._query=function(_,S,x,C,k,G){if(x<0||_>this.width||C<0||S>this.height)return!k&&[];var K=[];if(_<=0&&S<=0&&this.width<=x&&this.height<=C){if(k)return!0;for(var de=0;de<this.boxKeys.length;de++)K.push({key:this.boxKeys[de],x1:this.bboxes[4*de],y1:this.bboxes[4*de+1],x2:this.bboxes[4*de+2],y2:this.bboxes[4*de+3]});for(var Ve=0;Ve<this.circleKeys.length;Ve++){var st=this.circles[3*Ve],Ft=this.circles[3*Ve+1],jt=this.circles[3*Ve+2];K.push({key:this.circleKeys[Ve],x1:st-jt,y1:Ft-jt,x2:st+jt,y2:Ft+jt})}return G?K.filter(G):K}return this._forEachCell(_,S,x,C,this._queryCell,K,{hitTest:k,seenUids:{box:{},circle:{}}},G),k?K.length>0:K},kt.prototype._queryCircle=function(_,S,x,C,k){var G=_-x,K=_+x,de=S-x,Ve=S+x;if(K<0||G>this.width||Ve<0||de>this.height)return!C&&[];var st=[];return this._forEachCell(G,de,K,Ve,this._queryCellCircle,st,{hitTest:C,circle:{x:_,y:S,radius:x},seenUids:{box:{},circle:{}}},k),C?st.length>0:st},kt.prototype.query=function(_,S,x,C,k){return this._query(_,S,x,C,!1,k)},kt.prototype.hitTest=function(_,S,x,C,k){return this._query(_,S,x,C,!0,k)},kt.prototype.hitTestCircle=function(_,S,x,C){return this._queryCircle(_,S,x,!0,C)},kt.prototype._queryCell=function(_,S,x,C,k,G,K,de){var Ve=K.seenUids,st=this.boxCells[k];if(st!==null)for(var Ft=this.bboxes,jt=0,Xt=st;jt<Xt.length;jt+=1){var bn=Xt[jt];if(!Ve.box[bn]){Ve.box[bn]=!0;var vn=4*bn;if(_<=Ft[vn+2]&&S<=Ft[vn+3]&&x>=Ft[vn+0]&&C>=Ft[vn+1]&&(!de||de(this.boxKeys[bn]))){if(K.hitTest)return G.push(!0),!0;G.push({key:this.boxKeys[bn],x1:Ft[vn],y1:Ft[vn+1],x2:Ft[vn+2],y2:Ft[vn+3]})}}}var zn=this.circleCells[k];if(zn!==null)for(var on=this.circles,Fn=0,er=zn;Fn<er.length;Fn+=1){var vr=er[Fn];if(!Ve.circle[vr]){Ve.circle[vr]=!0;var Mr=3*vr;if(this._circleAndRectCollide(on[Mr],on[Mr+1],on[Mr+2],_,S,x,C)&&(!de||de(this.circleKeys[vr]))){if(K.hitTest)return G.push(!0),!0;var wr=on[Mr],Fr=on[Mr+1],ni=on[Mr+2];G.push({key:this.circleKeys[vr],x1:wr-ni,y1:Fr-ni,x2:wr+ni,y2:Fr+ni})}}}},kt.prototype._queryCellCircle=function(_,S,x,C,k,G,K,de){var Ve=K.circle,st=K.seenUids,Ft=this.boxCells[k];if(Ft!==null)for(var jt=this.bboxes,Xt=0,bn=Ft;Xt<bn.length;Xt+=1){var vn=bn[Xt];if(!st.box[vn]){st.box[vn]=!0;var zn=4*vn;if(this._circleAndRectCollide(Ve.x,Ve.y,Ve.radius,jt[zn+0],jt[zn+1],jt[zn+2],jt[zn+3])&&(!de||de(this.boxKeys[vn])))return G.push(!0),!0}}var on=this.circleCells[k];if(on!==null)for(var Fn=this.circles,er=0,vr=on;er<vr.length;er+=1){var Mr=vr[er];if(!st.circle[Mr]){st.circle[Mr]=!0;var wr=3*Mr;if(this._circlesCollide(Fn[wr],Fn[wr+1],Fn[wr+2],Ve.x,Ve.y,Ve.radius)&&(!de||de(this.circleKeys[Mr])))return G.push(!0),!0}}},kt.prototype._forEachCell=function(_,S,x,C,k,G,K,de){for(var Ve=this._convertToXCellCoord(_),st=this._convertToYCellCoord(S),Ft=this._convertToXCellCoord(x),jt=this._convertToYCellCoord(C),Xt=Ve;Xt<=Ft;Xt++)for(var bn=st;bn<=jt;bn++)if(k.call(this,_,S,x,C,this.xCellCount*bn+Xt,G,K,de))return},kt.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},kt.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},kt.prototype._circlesCollide=function(_,S,x,C,k,G){var K=C-_,de=k-S,Ve=x+G;return Ve*Ve>K*K+de*de},kt.prototype._circleAndRectCollide=function(_,S,x,C,k,G,K){var de=(G-C)/2,Ve=Math.abs(_-(C+de));if(Ve>de+x)return!1;var st=(K-k)/2,Ft=Math.abs(S-(k+st));if(Ft>st+x)return!1;if(Ve<=de||Ft<=st)return!0;var jt=Ve-de,Xt=Ft-st;return jt*jt+Xt*Xt<=x*x};var ji=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Li(_,S){for(var x=0;x<_;x++){var C=S.length;S.resize(C+4),S.float32.set(ji,3*C)}}function Zr(_,S,x){var C=S[0],k=S[1];return _[0]=x[0]*C+x[4]*k+x[12],_[1]=x[1]*C+x[5]*k+x[13],_[3]=x[3]*C+x[7]*k+x[15],_}var yo=function(_,S,x){S===void 0&&(S=new kt(_.width+200,_.height+200,25)),x===void 0&&(x=new kt(_.width+200,_.height+200,25)),this.transform=_,this.grid=S,this.ignoredGrid=x,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function Mi(_,S,x){return S*(E.EXTENT/(_.tileSize*Math.pow(2,x-_.tileID.overscaledZ)))}yo.prototype.placeCollisionBox=function(_,S,x,C,k){var G=this.projectAndGetPerspectiveRatio(C,_.anchorPointX,_.anchorPointY),K=x*G.perspectiveRatio,de=_.x1*K+G.point.x,Ve=_.y1*K+G.point.y,st=_.x2*K+G.point.x,Ft=_.y2*K+G.point.y;return!this.isInsideGrid(de,Ve,st,Ft)||!S&&this.grid.hitTest(de,Ve,st,Ft,k)?{box:[],offscreen:!1}:{box:[de,Ve,st,Ft],offscreen:this.isOffscreen(de,Ve,st,Ft)}},yo.prototype.placeCollisionCircles=function(_,S,x,C,k,G,K,de,Ve,st,Ft,jt,Xt){var bn=[],vn=new E.Point(S.anchorX,S.anchorY),zn=Bn(vn,G),on=gn(this.transform.cameraToCenterDistance,zn.signedDistanceFromCamera),Fn=(st?k/on:k*on)/E.ONE_EM,er=Bn(vn,K).point,vr=hr(Fn,C,S.lineOffsetX*Fn,S.lineOffsetY*Fn,!1,er,vn,S,x,K,{}),Mr=!1,wr=!1,Fr=!0;if(vr){for(var ni=.5*jt*on+Xt,Bi=new E.Point(-100,-100),Ii=new E.Point(this.screenRightBoundary,this.screenBottomBoundary),co=new Je,Uo=vr.first,Go=vr.last,Zo=[],fs=Uo.path.length-1;fs>=1;fs--)Zo.push(Uo.path[fs]);for(var Cr=1;Cr<Go.path.length;Cr++)Zo.push(Go.path[Cr]);var Jt=2.5*ni;if(de){var ma=Zo.map(function(Hu){return Bn(Hu,de)});Zo=ma.some(function(Hu){return Hu.signedDistanceFromCamera<=0})?[]:ma.map(function(Hu){return Hu.point})}var fa=[];if(Zo.length>0){for(var Qo=Zo[0].clone(),ba=Zo[0].clone(),sa=1;sa<Zo.length;sa++)Qo.x=Math.min(Qo.x,Zo[sa].x),Qo.y=Math.min(Qo.y,Zo[sa].y),ba.x=Math.max(ba.x,Zo[sa].x),ba.y=Math.max(ba.y,Zo[sa].y);fa=Qo.x>=Bi.x&&ba.x<=Ii.x&&Qo.y>=Bi.y&&ba.y<=Ii.y?[Zo]:ba.x<Bi.x||Qo.x>Ii.x||ba.y<Bi.y||Qo.y>Ii.y?[]:E.clipLine([Zo],Bi.x,Bi.y,Ii.x,Ii.y)}for(var Fo=0,lc=fa;Fo<lc.length;Fo+=1){var xl;co.reset(lc[Fo],.25*ni),xl=co.length<=.5*ni?1:Math.ceil(co.paddedLength/Jt)+1;for(var Pc=0;Pc<xl;Pc++){var cc=Pc/Math.max(xl-1,1),Ss=co.lerp(cc),yl=Ss.x+100,dl=Ss.y+100;bn.push(yl,dl,ni,0);var vu=yl-ni,Hf=dl-ni,Cu=yl+ni,sf=dl+ni;if(Fr=Fr&&this.isOffscreen(vu,Hf,Cu,sf),wr=wr||this.isInsideGrid(vu,Hf,Cu,sf),!_&&this.grid.hitTestCircle(yl,dl,ni,Ft)&&(Mr=!0,!Ve))return{circles:[],offscreen:!1,collisionDetected:Mr}}}}return{circles:!Ve&&Mr||!wr?[]:bn,offscreen:Fr,collisionDetected:Mr}},yo.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var S=[],x=1/0,C=1/0,k=-1/0,G=-1/0,K=0,de=_;K<de.length;K+=1){var Ve=de[K],st=new E.Point(Ve.x+100,Ve.y+100);x=Math.min(x,st.x),C=Math.min(C,st.y),k=Math.max(k,st.x),G=Math.max(G,st.y),S.push(st)}for(var Ft={},jt={},Xt=0,bn=this.grid.query(x,C,k,G).concat(this.ignoredGrid.query(x,C,k,G));Xt<bn.length;Xt+=1){var vn=bn[Xt],zn=vn.key;if(Ft[zn.bucketInstanceId]===void 0&&(Ft[zn.bucketInstanceId]={}),!Ft[zn.bucketInstanceId][zn.featureIndex]){var on=[new E.Point(vn.x1,vn.y1),new E.Point(vn.x2,vn.y1),new E.Point(vn.x2,vn.y2),new E.Point(vn.x1,vn.y2)];E.polygonIntersectsPolygon(S,on)&&(Ft[zn.bucketInstanceId][zn.featureIndex]=!0,jt[zn.bucketInstanceId]===void 0&&(jt[zn.bucketInstanceId]=[]),jt[zn.bucketInstanceId].push(zn.featureIndex))}}return jt},yo.prototype.insertCollisionBox=function(_,S,x,C,k){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:C,collisionGroupID:k},_[0],_[1],_[2],_[3])},yo.prototype.insertCollisionCircles=function(_,S,x,C,k){for(var G=S?this.ignoredGrid:this.grid,K={bucketInstanceId:x,featureIndex:C,collisionGroupID:k},de=0;de<_.length;de+=4)G.insertCircle(K,_[de],_[de+1],_[de+2])},yo.prototype.projectAndGetPerspectiveRatio=function(_,S,x){var C=[S,x,0,1];return Zr(C,C,_),{point:new E.Point((C[0]/C[3]+1)/2*this.transform.width+100,(-C[1]/C[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}},yo.prototype.isOffscreen=function(_,S,x,C){return x<100||_>=this.screenRightBoundary||C<100||S>this.screenBottomBoundary},yo.prototype.isInsideGrid=function(_,S,x,C){return x>=0&&_<this.gridRightBoundary&&C>=0&&S<this.gridBottomBoundary},yo.prototype.getViewportMatrix=function(){var _=E.identity([]);return E.translate(_,_,[-100,-100,0]),_};var xo=function(_,S,x,C){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?S:-S))):C&&x?1:0,this.placed=x};xo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var xi=function(_,S,x,C,k){this.text=new xo(_?_.text:null,S,x,k),this.icon=new xo(_?_.icon:null,S,C,k)};xi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Oo=function(_,S,x){this.text=_,this.icon=S,this.skipFade=x},ra=function(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]},Ha=function(_,S,x,C,k){this.bucketInstanceId=_,this.featureIndex=S,this.sourceLayerIndex=x,this.bucketIndex=C,this.tileID=k},ia=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function Wo(_,S,x,C,k){var G=E.getAnchorAlignment(_),K=-(G.horizontalAlign-.5)*S,de=-(G.verticalAlign-.5)*x,Ve=E.evaluateVariableOffset(_,C);return new E.Point(K+Ve[0]*k,de+Ve[1]*k)}function Fa(_,S,x,C,k,G){var K=_.x1,de=_.x2,Ve=_.y1,st=_.y2,Ft=_.anchorPointX,jt=_.anchorPointY,Xt=new E.Point(S,x);return C&&Xt._rotate(k?G:-G),{x1:K+Xt.x,y1:Ve+Xt.y,x2:de+Xt.x,y2:st+Xt.y,anchorPointX:Ft,anchorPointY:jt}}ia.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var S=++this.maxGroupID;this.collisionGroups[_]={ID:S,predicate:function(x){return x.collisionGroupID===S}}}return this.collisionGroups[_]};var cs=function(_,S,x,C){this.transform=_.clone(),this.collisionIndex=new yo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new ia(x),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}};function wt(_,S,x,C,k){_.emplaceBack(S?1:0,x?1:0,C||0,k||0),_.emplaceBack(S?1:0,x?1:0,C||0,k||0),_.emplaceBack(S?1:0,x?1:0,C||0,k||0),_.emplaceBack(S?1:0,x?1:0,C||0,k||0)}cs.prototype.getBucketParts=function(_,S,x,C){var k=x.getBucket(S),G=x.latestFeatureIndex;if(k&&G&&S.id===k.layerIds[0]){var K=x.collisionBoxArray,de=k.layers[0].layout,Ve=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),st=x.tileSize/E.EXTENT,Ft=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),jt=de.get("text-pitch-alignment")==="map",Xt=de.get("text-rotation-alignment")==="map",bn=Mi(x,1,this.transform.zoom),vn=sn(Ft,jt,Xt,this.transform,bn),zn=null;if(jt){var on=Nn(Ft,jt,Xt,this.transform,bn);zn=E.multiply([],this.transform.labelPlaneMatrix,on)}this.retainedQueryData[k.bucketInstanceId]=new Ha(k.bucketInstanceId,G,k.sourceLayerIndex,k.index,x.tileID);var Fn={bucket:k,layout:de,posMatrix:Ft,textLabelPlaneMatrix:vn,labelToScreenMatrix:zn,scale:Ve,textPixelRatio:st,holdingForFade:x.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(C)for(var er=0,vr=k.sortKeyRanges;er<vr.length;er+=1){var Mr=vr[er];_.push({sortKey:Mr.sortKey,symbolInstanceStart:Mr.symbolInstanceStart,symbolInstanceEnd:Mr.symbolInstanceEnd,parameters:Fn})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:Fn})}},cs.prototype.attemptAnchorPlacement=function(_,S,x,C,k,G,K,de,Ve,st,Ft,jt,Xt,bn,vn){var zn,on=[jt.textOffset0,jt.textOffset1],Fn=Wo(_,x,C,on,k),er=this.collisionIndex.placeCollisionBox(Fa(S,Fn.x,Fn.y,G,K,this.transform.angle),Ft,de,Ve,st.predicate);if(!vn||this.collisionIndex.placeCollisionBox(Fa(vn,Fn.x,Fn.y,G,K,this.transform.angle),Ft,de,Ve,st.predicate).box.length!==0)return er.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[jt.crossTileID]&&this.prevPlacement.placements[jt.crossTileID]&&this.prevPlacement.placements[jt.crossTileID].text&&(zn=this.prevPlacement.variableOffsets[jt.crossTileID].anchor),this.variableOffsets[jt.crossTileID]={textOffset:on,width:x,height:C,anchor:_,textBoxScale:k,prevAnchor:zn},this.markUsedJustification(Xt,_,jt,bn),Xt.allowVerticalPlacement&&(this.markUsedOrientation(Xt,bn,jt),this.placedOrientations[jt.crossTileID]=bn),{shift:Fn,placedGlyphBoxes:er}):void 0},cs.prototype.placeLayerBucketPart=function(_,S,x){var C=this,k=_.parameters,G=k.bucket,K=k.layout,de=k.posMatrix,Ve=k.textLabelPlaneMatrix,st=k.labelToScreenMatrix,Ft=k.textPixelRatio,jt=k.holdingForFade,Xt=k.collisionBoxArray,bn=k.partiallyEvaluatedTextSize,vn=k.collisionGroup,zn=K.get("text-optional"),on=K.get("icon-optional"),Fn=K.get("text-allow-overlap"),er=K.get("icon-allow-overlap"),vr=K.get("text-rotation-alignment")==="map",Mr=K.get("text-pitch-alignment")==="map",wr=K.get("icon-text-fit")!=="none",Fr=K.get("symbol-z-order")==="viewport-y",ni=Fn&&(er||!G.hasIconData()||on),Bi=er&&(Fn||!G.hasTextData()||zn);!G.collisionArrays&&Xt&&G.deserializeCollisionBoxes(Xt);var Ii=function(Cr,Jt){if(!S[Cr.crossTileID])if(jt)C.placements[Cr.crossTileID]=new Oo(!1,!1,!1);else{var ma,fa=!1,Qo=!1,ba=!0,sa=null,Fo={box:null,offscreen:null},lc={box:null,offscreen:null},xl=null,Pc=null,cc=0,Ss=0,yl=0;Jt.textFeatureIndex?cc=Jt.textFeatureIndex:Cr.useRuntimeCollisionCircles&&(cc=Cr.featureIndex),Jt.verticalTextFeatureIndex&&(Ss=Jt.verticalTextFeatureIndex);var dl=Jt.textBox;if(dl){var vu=function(Xa){var Wl=E.WritingMode.horizontal;if(G.allowVerticalPlacement&&!Xa&&C.prevPlacement){var ec=C.prevPlacement.placedOrientations[Cr.crossTileID];ec&&(C.placedOrientations[Cr.crossTileID]=ec,C.markUsedOrientation(G,Wl=ec,Cr))}return Wl},Hf=function(Xa,Wl){if(G.allowVerticalPlacement&&Cr.numVerticalGlyphVertices>0&&Jt.verticalTextBox)for(var ec=0,Wf=G.writingModes;ec<Wf.length&&(Wf[ec]===E.WritingMode.vertical?(Fo=Wl(),lc=Fo):Fo=Xa(),!(Fo&&Fo.box&&Fo.box.length));ec+=1);else Fo=Xa()};if(K.get("text-variable-anchor")){var Cu=K.get("text-variable-anchor");if(C.prevPlacement&&C.prevPlacement.variableOffsets[Cr.crossTileID]){var sf=C.prevPlacement.variableOffsets[Cr.crossTileID];Cu.indexOf(sf.anchor)>0&&(Cu=Cu.filter(function(Xa){return Xa!==sf.anchor})).unshift(sf.anchor)}var Hu=function(Xa,Wl,ec){for(var Wf=Xa.x2-Xa.x1,Gp=Xa.y2-Xa.y1,sh=Cr.textBoxScale,M0=wr&&!er?Wl:null,zd={box:[],offscreen:!1},jd=Fn?2*Cu.length:Cu.length,Gf=0;Gf<jd;++Gf){var Zp=C.attemptAnchorPlacement(Cu[Gf%Cu.length],Xa,Wf,Gp,sh,vr,Mr,Ft,de,vn,Gf>=Cu.length,Cr,G,ec,M0);if(Zp&&(zd=Zp.placedGlyphBoxes)&&zd.box&&zd.box.length){fa=!0,sa=Zp.shift;break}}return zd};Hf(function(){return Hu(dl,Jt.iconBox,E.WritingMode.horizontal)},function(){var Xa=Jt.verticalTextBox;return G.allowVerticalPlacement&&!(Fo&&Fo.box&&Fo.box.length)&&Cr.numVerticalGlyphVertices>0&&Xa?Hu(Xa,Jt.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),Fo&&(fa=Fo.box,ba=Fo.offscreen);var gp=vu(Fo&&Fo.box);if(!fa&&C.prevPlacement){var yp=C.prevPlacement.variableOffsets[Cr.crossTileID];yp&&(C.variableOffsets[Cr.crossTileID]=yp,C.markUsedJustification(G,yp.anchor,Cr,gp))}}else{var Lh=function(Xa,Wl){var ec=C.collisionIndex.placeCollisionBox(Xa,Fn,Ft,de,vn.predicate);return ec&&ec.box&&ec.box.length&&(C.markUsedOrientation(G,Wl,Cr),C.placedOrientations[Cr.crossTileID]=Wl),ec};Hf(function(){return Lh(dl,E.WritingMode.horizontal)},function(){var Xa=Jt.verticalTextBox;return G.allowVerticalPlacement&&Cr.numVerticalGlyphVertices>0&&Xa?Lh(Xa,E.WritingMode.vertical):{box:null,offscreen:null}}),vu(Fo&&Fo.box&&Fo.box.length)}}if(fa=(ma=Fo)&&ma.box&&ma.box.length>0,ba=ma&&ma.offscreen,Cr.useRuntimeCollisionCircles){var ed=G.text.placedSymbolArray.get(Cr.centerJustifiedTextSymbolIndex),td=E.evaluateSizeForFeature(G.textSizeData,bn,ed),ah=K.get("text-padding");xl=C.collisionIndex.placeCollisionCircles(Fn,ed,G.lineVertexArray,G.glyphOffsetArray,td,de,Ve,st,x,Mr,vn.predicate,Cr.collisionCircleDiameter,ah),fa=Fn||xl.circles.length>0&&!xl.collisionDetected,ba=ba&&xl.offscreen}if(Jt.iconFeatureIndex&&(yl=Jt.iconFeatureIndex),Jt.iconBox){var Ai=function(Xa){var Wl=wr&&sa?Fa(Xa,sa.x,sa.y,vr,Mr,C.transform.angle):Xa;return C.collisionIndex.placeCollisionBox(Wl,er,Ft,de,vn.predicate)};Qo=lc&&lc.box&&lc.box.length&&Jt.verticalIconBox?(Pc=Ai(Jt.verticalIconBox)).box.length>0:(Pc=Ai(Jt.iconBox)).box.length>0,ba=ba&&Pc.offscreen}var Il=zn||Cr.numHorizontalGlyphVertices===0&&Cr.numVerticalGlyphVertices===0,Ll=on||Cr.numIconVertices===0;if(Il||Ll?Ll?Il||(Qo=Qo&&fa):fa=Qo&&fa:Qo=fa=Qo&&fa,fa&&ma&&ma.box&&C.collisionIndex.insertCollisionBox(ma.box,K.get("text-ignore-placement"),G.bucketInstanceId,lc&&lc.box&&Ss?Ss:cc,vn.ID),Qo&&Pc&&C.collisionIndex.insertCollisionBox(Pc.box,K.get("icon-ignore-placement"),G.bucketInstanceId,yl,vn.ID),xl&&(fa&&C.collisionIndex.insertCollisionCircles(xl.circles,K.get("text-ignore-placement"),G.bucketInstanceId,cc,vn.ID),x)){var tu=G.bucketInstanceId,Tf=C.collisionCircleArrays[tu];Tf===void 0&&(Tf=C.collisionCircleArrays[tu]=new ra);for(var wf=0;wf<xl.circles.length;wf+=4)Tf.circles.push(xl.circles[wf+0]),Tf.circles.push(xl.circles[wf+1]),Tf.circles.push(xl.circles[wf+2]),Tf.circles.push(xl.collisionDetected?1:0)}C.placements[Cr.crossTileID]=new Oo(fa||ni,Qo||Bi,ba||G.justReloaded),S[Cr.crossTileID]=!0}};if(Fr)for(var co=G.getSortedSymbolIndexes(this.transform.angle),Uo=co.length-1;Uo>=0;--Uo){var Go=co[Uo];Ii(G.symbolInstances.get(Go),G.collisionArrays[Go])}else for(var Zo=_.symbolInstanceStart;Zo<_.symbolInstanceEnd;Zo++)Ii(G.symbolInstances.get(Zo),G.collisionArrays[Zo]);if(x&&G.bucketInstanceId in this.collisionCircleArrays){var fs=this.collisionCircleArrays[G.bucketInstanceId];E.invert(fs.invProjMatrix,de),fs.viewportMatrix=this.collisionIndex.getViewportMatrix()}G.justReloaded=!1},cs.prototype.markUsedJustification=function(_,S,x,C){var k;k=C===E.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(S)];for(var G=0,K=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];G<K.length;G+=1){var de=K[G];de>=0&&(_.text.placedSymbolArray.get(de).crossTileID=k>=0&&de!==k?0:x.crossTileID)}},cs.prototype.markUsedOrientation=function(_,S,x){for(var C=S===E.WritingMode.horizontal||S===E.WritingMode.horizontalOnly?S:0,k=S===E.WritingMode.vertical?S:0,G=0,K=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];G<K.length;G+=1)_.text.placedSymbolArray.get(K[G]).placedOrientation=C;x.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=k)},cs.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var S=this.prevPlacement,x=!1;this.prevZoomAdjustment=S?S.zoomAdjustment(this.transform.zoom):0;var C=S?S.symbolFadeChange(_):1,k=S?S.opacities:{},G=S?S.variableOffsets:{},K=S?S.placedOrientations:{};for(var de in this.placements){var Ve=this.placements[de],st=k[de];st?(this.opacities[de]=new xi(st,C,Ve.text,Ve.icon),x=x||Ve.text!==st.text.placed||Ve.icon!==st.icon.placed):(this.opacities[de]=new xi(null,C,Ve.text,Ve.icon,Ve.skipFade),x=x||Ve.text||Ve.icon)}for(var Ft in k){var jt=k[Ft];if(!this.opacities[Ft]){var Xt=new xi(jt,C,!1,!1);Xt.isHidden()||(this.opacities[Ft]=Xt,x=x||jt.text.placed||jt.icon.placed)}}for(var bn in G)this.variableOffsets[bn]||!this.opacities[bn]||this.opacities[bn].isHidden()||(this.variableOffsets[bn]=G[bn]);for(var vn in K)this.placedOrientations[vn]||!this.opacities[vn]||this.opacities[vn].isHidden()||(this.placedOrientations[vn]=K[vn]);x?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=S?S.lastPlacementChangeTime:_)},cs.prototype.updateLayerOpacities=function(_,S){for(var x={},C=0,k=S;C<k.length;C+=1){var G=k[C],K=G.getBucket(_);K&&G.latestFeatureIndex&&_.id===K.layerIds[0]&&this.updateBucketOpacities(K,x,G.collisionBoxArray)}},cs.prototype.updateBucketOpacities=function(_,S,x){var C=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var k=_.layers[0].layout,G=new xi(null,0,!1,!1,!0),K=k.get("text-allow-overlap"),de=k.get("icon-allow-overlap"),Ve=k.get("text-variable-anchor"),st=k.get("text-rotation-alignment")==="map",Ft=k.get("text-pitch-alignment")==="map",jt=k.get("icon-text-fit")!=="none",Xt=new xi(null,0,K&&(de||!_.hasIconData()||k.get("icon-optional")),de&&(K||!_.hasTextData()||k.get("text-optional")),!0);!_.collisionArrays&&x&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(x);for(var bn=function(Fn,er,vr){for(var Mr=0;Mr<er/4;Mr++)Fn.opacityVertexArray.emplaceBack(vr)},vn=function(Fn){var er=_.symbolInstances.get(Fn),vr=er.numHorizontalGlyphVertices,Mr=er.numVerticalGlyphVertices,wr=er.crossTileID,Fr=C.opacities[wr];S[wr]?Fr=G:Fr||(C.opacities[wr]=Fr=Xt),S[wr]=!0;var ni=er.numIconVertices>0,Bi=C.placedOrientations[er.crossTileID],Ii=Bi===E.WritingMode.vertical,co=Bi===E.WritingMode.horizontal||Bi===E.WritingMode.horizontalOnly;if(vr>0||Mr>0){var Uo=Ds(Fr.text);bn(_.text,vr,Ii?Us:Uo),bn(_.text,Mr,co?Us:Uo);var Go=Fr.text.isHidden();[er.rightJustifiedTextSymbolIndex,er.centerJustifiedTextSymbolIndex,er.leftJustifiedTextSymbolIndex].forEach(function(Fo){Fo>=0&&(_.text.placedSymbolArray.get(Fo).hidden=Go||Ii?1:0)}),er.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(er.verticalPlacedTextSymbolIndex).hidden=Go||co?1:0);var Zo=C.variableOffsets[er.crossTileID];Zo&&C.markUsedJustification(_,Zo.anchor,er,Bi);var fs=C.placedOrientations[er.crossTileID];fs&&(C.markUsedJustification(_,"left",er,fs),C.markUsedOrientation(_,fs,er))}if(ni){var Cr=Ds(Fr.icon),Jt=!(jt&&er.verticalPlacedIconSymbolIndex&&Ii);er.placedIconSymbolIndex>=0&&(bn(_.icon,er.numIconVertices,Jt?Cr:Us),_.icon.placedSymbolArray.get(er.placedIconSymbolIndex).hidden=Fr.icon.isHidden()),er.verticalPlacedIconSymbolIndex>=0&&(bn(_.icon,er.numVerticalIconVertices,Jt?Us:Cr),_.icon.placedSymbolArray.get(er.verticalPlacedIconSymbolIndex).hidden=Fr.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var ma=_.collisionArrays[Fn];if(ma){var fa=new E.Point(0,0);if(ma.textBox||ma.verticalTextBox){var Qo=!0;if(Ve){var ba=C.variableOffsets[wr];ba?(fa=Wo(ba.anchor,ba.width,ba.height,ba.textOffset,ba.textBoxScale),st&&fa._rotate(Ft?C.transform.angle:-C.transform.angle)):Qo=!1}ma.textBox&&wt(_.textCollisionBox.collisionVertexArray,Fr.text.placed,!Qo||Ii,fa.x,fa.y),ma.verticalTextBox&&wt(_.textCollisionBox.collisionVertexArray,Fr.text.placed,!Qo||co,fa.x,fa.y)}var sa=!!(!co&&ma.verticalIconBox);ma.iconBox&&wt(_.iconCollisionBox.collisionVertexArray,Fr.icon.placed,sa,jt?fa.x:0,jt?fa.y:0),ma.verticalIconBox&&wt(_.iconCollisionBox.collisionVertexArray,Fr.icon.placed,!sa,jt?fa.x:0,jt?fa.y:0)}}},zn=0;zn<_.symbolInstances.length;zn++)vn(zn);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var on=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=on.invProjMatrix,_.placementViewportMatrix=on.viewportMatrix,_.collisionCircleArray=on.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},cs.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},cs.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},cs.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},cs.prototype.stillRecent=function(_,S){var x=this.zoomAtLastRecencyCheck===S?1-this.zoomAdjustment(S):1;return this.zoomAtLastRecencyCheck=S,this.commitTime+this.fadeDuration*x>_},cs.prototype.setStale=function(){this.stale=!0};var Zt=Math.pow(2,25),Un=Math.pow(2,24),Ir=Math.pow(2,17),Ci=Math.pow(2,16),oo=Math.pow(2,9),Yo=Math.pow(2,8),ns=Math.pow(2,1);function Ds(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var S=_.placed?1:0,x=Math.floor(127*_.opacity);return x*Zt+S*Un+x*Ir+S*Ci+x*oo+S*Yo+x*ns+S}var Us=0,fl=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};fl.prototype.continuePlacement=function(_,S,x,C,k){for(var G=this._bucketParts;this._currentTileIndex<_.length;)if(S.getBucketParts(G,C,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,G.sort(function(K,de){return K.sortKey-de.sortKey}));this._currentPartIndex<G.length;)if(S.placeLayerBucketPart(G[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,k())return!0;return!1};var xh=function(_,S,x,C,k,G,K){this.placement=new cs(_,k,G,K),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=C,this._done=!1};xh.prototype.isDone=function(){return this._done},xh.prototype.continuePlacement=function(_,S,x){for(var C=this,k=E.browser.now(),G=function(){var Ve=E.browser.now()-k;return!C._forceFullPlacement&&Ve>2};this._currentPlacementIndex>=0;){var K=S[_[this._currentPlacementIndex]],de=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=de)&&(!K.maxzoom||K.maxzoom>de)){if(this._inProgressLayer||(this._inProgressLayer=new fl(K)),this._inProgressLayer.continuePlacement(x[K.source],this.placement,this._showCollisionBoxes,K,G))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},xh.prototype.commit=function(_){return this.placement.commit(_),this.placement};var kp=512/E.EXTENT/2,Ad=function(_,S,x){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(var C=0;C<S.length;C++){var k=S.get(C),G=k.key;this.indexedSymbolInstances[G]||(this.indexedSymbolInstances[G]=[]),this.indexedSymbolInstances[G].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,_)})}};Ad.prototype.getScaledCoordinates=function(_,S){var x=kp/Math.pow(2,S.canonical.z-this.tileID.canonical.z);return{x:Math.floor((S.canonical.x*E.EXTENT+_.anchorX)*x),y:Math.floor((S.canonical.y*E.EXTENT+_.anchorY)*x)}},Ad.prototype.findMatches=function(_,S,x){for(var C=this.tileID.canonical.z<S.canonical.z?1:Math.pow(2,this.tileID.canonical.z-S.canonical.z),k=0;k<_.length;k++){var G=_.get(k);if(!G.crossTileID){var K=this.indexedSymbolInstances[G.key];if(K)for(var de=this.getScaledCoordinates(G,S),Ve=0,st=K;Ve<st.length;Ve+=1){var Ft=st[Ve];if(Math.abs(Ft.coord.x-de.x)<=C&&Math.abs(Ft.coord.y-de.y)<=C&&!x[Ft.crossTileID]){x[Ft.crossTileID]=!0,G.crossTileID=Ft.crossTileID;break}}}}};var Vl=function(){this.maxCrossTileID=0};Vl.prototype.generate=function(){return++this.maxCrossTileID};var If=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};If.prototype.handleWrapJump=function(_){var S=Math.round((_-this.lng)/360);if(S!==0)for(var x in this.indexes){var C=this.indexes[x],k={};for(var G in C){var K=C[G];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+S),k[K.tileID.key]=K}this.indexes[x]=k}this.lng=_},If.prototype.addBucket=function(_,S,x){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===S.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var C=0;C<S.symbolInstances.length;C++)S.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var k=this.usedCrossTileIDs[_.overscaledZ];for(var G in this.indexes){var K=this.indexes[G];if(Number(G)>_.overscaledZ)for(var de in K){var Ve=K[de];Ve.tileID.isChildOf(_)&&Ve.findMatches(S.symbolInstances,_,k)}else{var st=K[_.scaledTo(Number(G)).key];st&&st.findMatches(S.symbolInstances,_,k)}}for(var Ft=0;Ft<S.symbolInstances.length;Ft++){var jt=S.symbolInstances.get(Ft);jt.crossTileID||(jt.crossTileID=x.generate(),k[jt.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new Ad(_,S.symbolInstances,S.bucketInstanceId),!0},If.prototype.removeBucketCrossTileIDs=function(_,S){for(var x in S.indexedSymbolInstances)for(var C=0,k=S.indexedSymbolInstances[x];C<k.length;C+=1)delete this.usedCrossTileIDs[_][k[C].crossTileID]},If.prototype.removeStaleBuckets=function(_){var S=!1;for(var x in this.indexes){var C=this.indexes[x];for(var k in C)_[C[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,C[k]),delete C[k],S=!0)}return S};var Lf=function(){this.layerIndexes={},this.crossTileIDs=new Vl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Lf.prototype.addLayer=function(_,S,x){var C=this.layerIndexes[_.id];C===void 0&&(C=this.layerIndexes[_.id]=new If);var k=!1,G={};C.handleWrapJump(x);for(var K=0,de=S;K<de.length;K+=1){var Ve=de[K],st=Ve.getBucket(_);st&&_.id===st.layerIds[0]&&(st.bucketInstanceId||(st.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(Ve.tileID,st,this.crossTileIDs)&&(k=!0),G[st.bucketInstanceId]=!0)}return C.removeStaleBuckets(G)&&(k=!0),k},Lf.prototype.pruneUnusedLayers=function(_){var S={};for(var x in _.forEach(function(C){S[C]=!0}),this.layerIndexes)S[x]||delete this.layerIndexes[x]};var sc=function(_,S){return E.emitValidationErrors(_,S&&S.filter(function(x){return x.identifier!=="source.canvas"}))},zc=E.pick(si,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),cu=E.pick(si,["setCenter","setZoom","setBearing","setPitch"]),eh=function(){var _={},S=E.styleSpec.$version;for(var x in E.styleSpec.$root){var C,k=E.styleSpec.$root[x];k.required&&(C=x==="version"?S:k.type==="array"?[]:{})!=null&&(_[x]=C)}return _}(),pc=function(_){function S(x,C){var k=this;C===void 0&&(C={}),_.call(this),this.map=x,this.dispatcher=new Et(Sr(),this),this.imageManager=new Oe,this.imageManager.setEventedParent(this),this.glyphManager=new lt(x._requestManager,C.localIdeographFontFamily),this.lineAtlas=new ut(256,512),this.crossTileSymbolIndex=new Lf,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());var G=this;this._rtlTextPluginCallback=S.registerForPluginStateChange(function(K){G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:K.pluginStatus,pluginURL:K.pluginURL},function(de,Ve){if(E.triggerPluginCompletionEvent(de),Ve&&Ve.every(function(Ft){return Ft}))for(var st in G.sourceCaches)G.sourceCaches[st].reload()})}),this.on("data",function(K){if(K.dataType==="source"&&K.sourceDataType==="metadata"){var de=k.sourceCaches[K.sourceId];if(de){var Ve=de.getSource();if(Ve&&Ve.vectorLayerIds)for(var st in k._layers){var Ft=k._layers[st];Ft.source===Ve.id&&k._validateLayer(Ft)}}}})}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.loadURL=function(x,C){var k=this;C===void 0&&(C={}),this.fire(new E.Event("dataloading",{dataType:"style"}));var G=typeof C.validate=="boolean"?C.validate:!E.isMapboxURL(x);x=this.map._requestManager.normalizeStyleURL(x,C.accessToken);var K=this.map._requestManager.transformRequest(x,E.ResourceType.Style);this._request=E.getJSON(K,function(de,Ve){k._request=null,de?k.fire(new E.ErrorEvent(de)):Ve&&k._load(Ve,G)})},S.prototype.loadJSON=function(x,C){var k=this;C===void 0&&(C={}),this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.browser.frame(function(){k._request=null,k._load(x,C.validate!==!1)})},S.prototype.loadEmpty=function(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(eh,!1)},S.prototype._load=function(x,C){if(!C||!sc(this,E.validateStyle(x))){for(var k in this._loaded=!0,this.stylesheet=x,x.sources)this.addSource(k,x.sources[k],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs);var G=hi(this.stylesheet.layers);this._order=G.map(function(st){return st.id}),this._layers={},this._serializedLayers={};for(var K=0,de=G;K<de.length;K+=1){var Ve=de[K];(Ve=E.createStyleLayer(Ve)).setEventedParent(this,{layer:{id:Ve.id}}),this._layers[Ve.id]=Ve,this._serializedLayers[Ve.id]=Ve.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new pt(this.stylesheet.light),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}},S.prototype._loadSprite=function(x){var C=this;this._spriteRequest=function(k,G,K){var de,Ve,st,Ft=E.browser.devicePixelRatio>1?"@2x":"",jt=E.getJSON(G.transformRequest(G.normalizeSpriteURL(k,Ft,".json"),E.ResourceType.SpriteJSON),function(vn,zn){jt=null,st||(st=vn,de=zn,bn())}),Xt=E.getImage(G.transformRequest(G.normalizeSpriteURL(k,Ft,".png"),E.ResourceType.SpriteImage),function(vn,zn){Xt=null,st||(st=vn,Ve=zn,bn())});function bn(){if(st)K(st);else if(de&&Ve){var vn=E.browser.getImageData(Ve),zn={};for(var on in de){var Fn=de[on],er=Fn.width,vr=Fn.height,Mr=Fn.x,wr=Fn.y,Fr=Fn.sdf,ni=Fn.pixelRatio,Bi=Fn.stretchX,Ii=Fn.stretchY,co=Fn.content,Uo=new E.RGBAImage({width:er,height:vr});E.RGBAImage.copy(vn,Uo,{x:Mr,y:wr},{x:0,y:0},{width:er,height:vr}),zn[on]={data:Uo,pixelRatio:ni,sdf:Fr,stretchX:Bi,stretchY:Ii,content:co}}K(null,zn)}}return{cancel:function(){jt&&(jt.cancel(),jt=null),Xt&&(Xt.cancel(),Xt=null)}}}(x,this.map._requestManager,function(k,G){if(C._spriteRequest=null,k)C.fire(new E.ErrorEvent(k));else if(G)for(var K in G)C.imageManager.addImage(K,G[K]);C.imageManager.setLoaded(!0),C._availableImages=C.imageManager.listImages(),C.dispatcher.broadcast("setImages",C._availableImages),C.fire(new E.Event("data",{dataType:"style"}))})},S.prototype._validateLayer=function(x){var C=this.sourceCaches[x.source];if(C){var k=x.sourceLayer;if(k){var G=C.getSource();(G.type==="geojson"||G.vectorLayerIds&&G.vectorLayerIds.indexOf(k)===-1)&&this.fire(new E.ErrorEvent(new Error('Source layer "'+k+'" does not exist on source "'+G.id+'" as specified by style layer "'+x.id+'"')))}}},S.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()},S.prototype._serializeLayers=function(x){for(var C=[],k=0,G=x;k<G.length;k+=1){var K=this._layers[G[k]];K.type!=="custom"&&C.push(K.serialize())}return C},S.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(var C in this._layers)if(this._layers[C].hasTransition())return!0;return!1},S.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},S.prototype.update=function(x){if(this._loaded){var C=this._changed;if(this._changed){var k=Object.keys(this._updatedLayers),G=Object.keys(this._removedLayers);for(var K in(k.length||G.length)&&this._updateWorkerLayers(k,G),this._updatedSources){var de=this._updatedSources[K];de==="reload"?this._reloadSource(K):de==="clear"&&this._clearSource(K)}for(var Ve in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ve].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}var st={};for(var Ft in this.sourceCaches){var jt=this.sourceCaches[Ft];st[Ft]=jt.used,jt.used=!1}for(var Xt=0,bn=this._order;Xt<bn.length;Xt+=1){var vn=this._layers[bn[Xt]];vn.recalculate(x,this._availableImages),!vn.isHidden(x.zoom)&&vn.source&&(this.sourceCaches[vn.source].used=!0)}for(var zn in st){var on=this.sourceCaches[zn];st[zn]!==on.used&&on.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:zn}))}this.light.recalculate(x),this.z=x.zoom,C&&this.fire(new E.Event("data",{dataType:"style"}))}},S.prototype._updateTilesForChangedImages=function(){var x=Object.keys(this._changedImages);if(x.length){for(var C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}},S.prototype._updateWorkerLayers=function(x,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(x),removedIds:C})},S.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},S.prototype.setState=function(x){var C=this;if(this._checkLoaded(),sc(this,E.validateStyle(x)))return!1;(x=E.clone$1(x)).layers=hi(x.layers);var k=function(K,de){if(!K)return[{command:si.setStyle,args:[de]}];var Ve=[];try{if(!E.deepEqual(K.version,de.version))return[{command:si.setStyle,args:[de]}];E.deepEqual(K.center,de.center)||Ve.push({command:si.setCenter,args:[de.center]}),E.deepEqual(K.zoom,de.zoom)||Ve.push({command:si.setZoom,args:[de.zoom]}),E.deepEqual(K.bearing,de.bearing)||Ve.push({command:si.setBearing,args:[de.bearing]}),E.deepEqual(K.pitch,de.pitch)||Ve.push({command:si.setPitch,args:[de.pitch]}),E.deepEqual(K.sprite,de.sprite)||Ve.push({command:si.setSprite,args:[de.sprite]}),E.deepEqual(K.glyphs,de.glyphs)||Ve.push({command:si.setGlyphs,args:[de.glyphs]}),E.deepEqual(K.transition,de.transition)||Ve.push({command:si.setTransition,args:[de.transition]}),E.deepEqual(K.light,de.light)||Ve.push({command:si.setLight,args:[de.light]});var st={},Ft=[];(function(Xt,bn,vn,zn){var on;for(on in bn=bn||{},Xt=Xt||{})Xt.hasOwnProperty(on)&&(bn.hasOwnProperty(on)||bi(on,vn,zn));for(on in bn)bn.hasOwnProperty(on)&&(Xt.hasOwnProperty(on)?E.deepEqual(Xt[on],bn[on])||(Xt[on].type==="geojson"&&bn[on].type==="geojson"&&_a(Xt,bn,on)?vn.push({command:si.setGeoJSONSourceData,args:[on,bn[on].data]}):na(on,bn,vn,zn)):Mo(on,bn,vn))})(K.sources,de.sources,Ft,st);var jt=[];K.layers&&K.layers.forEach(function(Xt){st[Xt.source]?Ve.push({command:si.removeLayer,args:[Xt.id]}):jt.push(Xt)}),Ve=Ve.concat(Ft),function(Xt,bn,vn){bn=bn||[];var zn,on,Fn,er,vr,Mr,wr,Fr=(Xt=Xt||[]).map(qo),ni=bn.map(qo),Bi=Xt.reduce(Ne,{}),Ii=bn.reduce(Ne,{}),co=Fr.slice(),Uo=Object.create(null);for(zn=0,on=0;zn<Fr.length;zn++)Ii.hasOwnProperty(Fn=Fr[zn])?on++:(vn.push({command:si.removeLayer,args:[Fn]}),co.splice(co.indexOf(Fn,on),1));for(zn=0,on=0;zn<ni.length;zn++)co[co.length-1-zn]!==(Fn=ni[ni.length-1-zn])&&(Bi.hasOwnProperty(Fn)?(vn.push({command:si.removeLayer,args:[Fn]}),co.splice(co.lastIndexOf(Fn,co.length-on),1)):on++,vn.push({command:si.addLayer,args:[Ii[Fn],Mr=co[co.length-zn]]}),co.splice(co.length-zn,0,Fn),Uo[Fn]=!0);for(zn=0;zn<ni.length;zn++)if(er=Bi[Fn=ni[zn]],vr=Ii[Fn],!Uo[Fn]&&!E.deepEqual(er,vr))if(E.deepEqual(er.source,vr.source)&&E.deepEqual(er["source-layer"],vr["source-layer"])&&E.deepEqual(er.type,vr.type)){for(wr in Ro(er.layout,vr.layout,vn,Fn,null,si.setLayoutProperty),Ro(er.paint,vr.paint,vn,Fn,null,si.setPaintProperty),E.deepEqual(er.filter,vr.filter)||vn.push({command:si.setFilter,args:[Fn,vr.filter]}),E.deepEqual(er.minzoom,vr.minzoom)&&E.deepEqual(er.maxzoom,vr.maxzoom)||vn.push({command:si.setLayerZoomRange,args:[Fn,vr.minzoom,vr.maxzoom]}),er)er.hasOwnProperty(wr)&&wr!=="layout"&&wr!=="paint"&&wr!=="filter"&&wr!=="metadata"&&wr!=="minzoom"&&wr!=="maxzoom"&&(wr.indexOf("paint.")===0?Ro(er[wr],vr[wr],vn,Fn,wr.slice(6),si.setPaintProperty):E.deepEqual(er[wr],vr[wr])||vn.push({command:si.setLayerProperty,args:[Fn,wr,vr[wr]]}));for(wr in vr)vr.hasOwnProperty(wr)&&!er.hasOwnProperty(wr)&&wr!=="layout"&&wr!=="paint"&&wr!=="filter"&&wr!=="metadata"&&wr!=="minzoom"&&wr!=="maxzoom"&&(wr.indexOf("paint.")===0?Ro(er[wr],vr[wr],vn,Fn,wr.slice(6),si.setPaintProperty):E.deepEqual(er[wr],vr[wr])||vn.push({command:si.setLayerProperty,args:[Fn,wr,vr[wr]]}))}else vn.push({command:si.removeLayer,args:[Fn]}),Mr=co[co.lastIndexOf(Fn)+1],vn.push({command:si.addLayer,args:[vr,Mr]})}(jt,de.layers,Ve)}catch(Xt){console.warn("Unable to compute style diff:",Xt),Ve=[{command:si.setStyle,args:[de]}]}return Ve}(this.serialize(),x).filter(function(K){return!(K.command in cu)});if(k.length===0)return!1;var G=k.filter(function(K){return!(K.command in zc)});if(G.length>0)throw new Error("Unimplemented: "+G.map(function(K){return K.command}).join(", ")+".");return k.forEach(function(K){K.command!=="setTransition"&&C[K.command].apply(C,K.args)}),this.stylesheet=x,!0},S.prototype.addImage=function(x,C){if(this.getImage(x))return this.fire(new E.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(x,C),this._afterImageUpdated(x)},S.prototype.updateImage=function(x,C){this.imageManager.updateImage(x,C)},S.prototype.getImage=function(x){return this.imageManager.getImage(x)},S.prototype.removeImage=function(x){if(!this.getImage(x))return this.fire(new E.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(x),this._afterImageUpdated(x)},S.prototype._afterImageUpdated=function(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))},S.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},S.prototype.addSource=function(x,C,k){var G=this;if(k===void 0&&(k={}),this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error("There is already a source with this ID");if(!C.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(C).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(E.validateStyle.source,"sources."+x,C,null,k))){this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);var K=this.sourceCaches[x]=new qt(x,C,this.dispatcher);K.style=this,K.setEventedParent(this,function(){return{isSourceLoaded:G.loaded(),source:K.serialize(),sourceId:x}}),K.onAdd(this.map),this._changed=!0}},S.prototype.removeSource=function(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(var C in this._layers)if(this._layers[C].source===x)return this.fire(new E.ErrorEvent(new Error('Source "'+x+'" cannot be removed while layer "'+C+'" is using it.')));var k=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],k.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),k.setEventedParent(null),k.clearTiles(),k.onRemove&&k.onRemove(this.map),this._changed=!0},S.prototype.setGeoJSONSourceData=function(x,C){this._checkLoaded(),this.sourceCaches[x].getSource().setData(C),this._changed=!0},S.prototype.getSource=function(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()},S.prototype.addLayer=function(x,C,k){k===void 0&&(k={}),this._checkLoaded();var G=x.id;if(this.getLayer(G))this.fire(new E.ErrorEvent(new Error('Layer with id "'+G+'" already exists on this map')));else{var K;if(x.type==="custom"){if(sc(this,E.validateCustomStyleLayer(x)))return;K=E.createStyleLayer(x)}else{if(typeof x.source=="object"&&(this.addSource(G,x.source),x=E.clone$1(x),x=E.extend(x,{source:G})),this._validate(E.validateStyle.layer,"layers."+G,x,{arrayIndex:-1},k))return;K=E.createStyleLayer(x),this._validateLayer(K),K.setEventedParent(this,{layer:{id:G}}),this._serializedLayers[K.id]=K.serialize()}var de=C?this._order.indexOf(C):this._order.length;if(C&&de===-1)this.fire(new E.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.')));else{if(this._order.splice(de,0,G),this._layerOrderChanged=!0,this._layers[G]=K,this._removedLayers[G]&&K.source&&K.type!=="custom"){var Ve=this._removedLayers[G];delete this._removedLayers[G],Ve.type!==K.type?this._updatedSources[K.source]="clear":(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause())}this._updateLayer(K),K.onAdd&&K.onAdd(this.map)}}},S.prototype.moveLayer=function(x,C){if(this._checkLoaded(),this._changed=!0,this._layers[x]){if(x!==C){var k=this._order.indexOf(x);this._order.splice(k,1);var G=C?this._order.indexOf(C):this._order.length;C&&G===-1?this.fire(new E.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.'))):(this._order.splice(G,0,x),this._layerOrderChanged=!0)}}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be moved.")))},S.prototype.removeLayer=function(x){this._checkLoaded();var C=this._layers[x];if(C){C.setEventedParent(null);var k=this._order.indexOf(x);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=C,delete this._layers[x],delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],C.onRemove&&C.onRemove(this.map)}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be removed.")))},S.prototype.getLayer=function(x){return this._layers[x]},S.prototype.hasLayer=function(x){return x in this._layers},S.prototype.setLayerZoomRange=function(x,C,k){this._checkLoaded();var G=this.getLayer(x);G?G.minzoom===C&&G.maxzoom===k||(C!=null&&(G.minzoom=C),k!=null&&(G.maxzoom=k),this._updateLayer(G)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot have zoom extent.")))},S.prototype.setFilter=function(x,C,k){k===void 0&&(k={}),this._checkLoaded();var G=this.getLayer(x);if(G){if(!E.deepEqual(G.filter,C))return C==null?(G.filter=void 0,void this._updateLayer(G)):void(this._validate(E.validateStyle.filter,"layers."+G.id+".filter",C,null,k)||(G.filter=E.clone$1(C),this._updateLayer(G)))}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be filtered.")))},S.prototype.getFilter=function(x){return E.clone$1(this.getLayer(x).filter)},S.prototype.setLayoutProperty=function(x,C,k,G){G===void 0&&(G={}),this._checkLoaded();var K=this.getLayer(x);K?E.deepEqual(K.getLayoutProperty(C),k)||(K.setLayoutProperty(C,k,G),this._updateLayer(K)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getLayoutProperty=function(x,C){var k=this.getLayer(x);if(k)return k.getLayoutProperty(C);this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style.")))},S.prototype.setPaintProperty=function(x,C,k,G){G===void 0&&(G={}),this._checkLoaded();var K=this.getLayer(x);K?E.deepEqual(K.getPaintProperty(C),k)||(K.setPaintProperty(C,k,G)&&this._updateLayer(K),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getPaintProperty=function(x,C){return this.getLayer(x).getPaintProperty(C)},S.prototype.setFeatureState=function(x,C){this._checkLoaded();var k=x.source,G=x.sourceLayer,K=this.sourceCaches[k];if(K!==void 0){var de=K.getSource().type;de==="geojson"&&G?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):de!=="vector"||G?(x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),K.setFeatureState(G,x.id,C)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.removeFeatureState=function(x,C){this._checkLoaded();var k=x.source,G=this.sourceCaches[k];if(G!==void 0){var K=G.getSource().type,de=K==="vector"?x.sourceLayer:void 0;K!=="vector"||de?C&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):G.removeFeatureState(de,x.id,C):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.getFeatureState=function(x){this._checkLoaded();var C=x.source,k=x.sourceLayer,G=this.sourceCaches[C];if(G!==void 0){if(G.getSource().type!=="vector"||k)return x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),G.getFeatureState(k,x.id);this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},S.prototype.getTransition=function(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},S.prototype.serialize=function(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,function(x){return x.serialize()}),layers:this._serializeLayers(this._order)},function(x){return x!==void 0})},S.prototype._updateLayer=function(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._changed=!0},S.prototype._flattenAndSortRenderedFeatures=function(x){for(var C=this,k=function(Bi){return C._layers[Bi].type==="fill-extrusion"},G={},K=[],de=this._order.length-1;de>=0;de--){var Ve=this._order[de];if(k(Ve)){G[Ve]=de;for(var st=0,Ft=x;st<Ft.length;st+=1){var jt=Ft[st][Ve];if(jt)for(var Xt=0,bn=jt;Xt<bn.length;Xt+=1)K.push(bn[Xt])}}}K.sort(function(Bi,Ii){return Ii.intersectionZ-Bi.intersectionZ});for(var vn=[],zn=this._order.length-1;zn>=0;zn--){var on=this._order[zn];if(k(on))for(var Fn=K.length-1;Fn>=0;Fn--){var er=K[Fn].feature;if(G[er.layer.id]<zn)break;vn.push(er),K.pop()}else for(var vr=0,Mr=x;vr<Mr.length;vr+=1){var wr=Mr[vr][on];if(wr)for(var Fr=0,ni=wr;Fr<ni.length;Fr+=1)vn.push(ni[Fr].feature)}}return vn},S.prototype.queryRenderedFeatures=function(x,C,k){C&&C.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);var G={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var K=0,de=C.layers;K<de.length;K+=1){var Ve=de[K],st=this._layers[Ve];if(!st)return this.fire(new E.ErrorEvent(new Error("The layer '"+Ve+"' does not exist in the map's style and cannot be queried for features."))),[];G[st.source]=!0}}var Ft=[];for(var jt in C.availableImages=this._availableImages,this.sourceCaches)C.layers&&!G[jt]||Ft.push(Ln(this.sourceCaches[jt],this._layers,this._serializedLayers,x,C,k));return this.placement&&Ft.push(function(Xt,bn,vn,zn,on,Fn,er){for(var vr={},Mr=Fn.queryRenderedSymbols(zn),wr=[],Fr=0,ni=Object.keys(Mr).map(Number);Fr<ni.length;Fr+=1)wr.push(er[ni[Fr]]);wr.sort(kn);for(var Bi=function(){var Zo=co[Ii],fs=Zo.featureIndex.lookupSymbolFeatures(Mr[Zo.bucketInstanceId],bn,Zo.bucketIndex,Zo.sourceLayerIndex,on.filter,on.layers,on.availableImages,Xt);for(var Cr in fs){var Jt=vr[Cr]=vr[Cr]||[],ma=fs[Cr];ma.sort(function(ba,sa){var Fo=Zo.featureSortOrder;if(Fo){var lc=Fo.indexOf(ba.featureIndex);return Fo.indexOf(sa.featureIndex)-lc}return sa.featureIndex-ba.featureIndex});for(var fa=0,Qo=ma;fa<Qo.length;fa+=1)Jt.push(Qo[fa])}},Ii=0,co=wr;Ii<co.length;Ii+=1)Bi();var Uo=function(Zo){vr[Zo].forEach(function(fs){var Cr=fs.feature,Jt=vn[Xt[Zo].source].getFeatureState(Cr.layer["source-layer"],Cr.id);Cr.source=Cr.layer.source,Cr.layer["source-layer"]&&(Cr.sourceLayer=Cr.layer["source-layer"]),Cr.state=Jt})};for(var Go in vr)Uo(Go);return vr}(this._layers,this._serializedLayers,this.sourceCaches,x,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ft)},S.prototype.querySourceFeatures=function(x,C){C&&C.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);var k=this.sourceCaches[x];return k?function(G,K){for(var de=G.getRenderableIds().map(function(bn){return G.getTileByID(bn)}),Ve=[],st={},Ft=0;Ft<de.length;Ft++){var jt=de[Ft],Xt=jt.tileID.canonical.key;st[Xt]||(st[Xt]=!0,jt.querySourceFeatures(Ve,K))}return Ve}(k,C):[]},S.prototype.addSourceType=function(x,C,k){return S.getSourceType(x)?k(new Error('A source type called "'+x+'" already exists.')):(S.setSourceType(x,C),C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:C.workerSourceURL},k):k(null,null))},S.prototype.getLight=function(){return this.light.getLight()},S.prototype.setLight=function(x,C){C===void 0&&(C={}),this._checkLoaded();var k=this.light.getLight(),G=!1;for(var K in x)if(!E.deepEqual(x[K],k[K])){G=!0;break}if(G){var de={now:E.browser.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,C),this.light.updateTransitions(de)}},S.prototype._validate=function(x,C,k,G,K){return K===void 0&&(K={}),(!K||K.validate!==!1)&&sc(this,x.call(E.validateStyle,E.extend({key:C,style:this.serialize(),value:k,styleSpec:E.styleSpec},G)))},S.prototype._remove=function(){for(var x in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[x].setEventedParent(null);for(var C in this.sourceCaches)this.sourceCaches[C].clearTiles(),this.sourceCaches[C].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},S.prototype._clearSource=function(x){this.sourceCaches[x].clearTiles()},S.prototype._reloadSource=function(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()},S.prototype._updateSources=function(x){for(var C in this.sourceCaches)this.sourceCaches[C].update(x)},S.prototype._generateCollisionBoxes=function(){for(var x in this.sourceCaches)this._reloadSource(x)},S.prototype._updatePlacement=function(x,C,k,G,K){K===void 0&&(K=!1);for(var de=!1,Ve=!1,st={},Ft=0,jt=this._order;Ft<jt.length;Ft+=1){var Xt=this._layers[jt[Ft]];if(Xt.type==="symbol"){if(!st[Xt.source]){var bn=this.sourceCaches[Xt.source];st[Xt.source]=bn.getRenderableIds(!0).map(function(er){return bn.getTileByID(er)}).sort(function(er,vr){return vr.tileID.overscaledZ-er.tileID.overscaledZ||(er.tileID.isLessThan(vr.tileID)?-1:1)})}var vn=this.crossTileSymbolIndex.addLayer(Xt,st[Xt.source],x.center.lng);de=de||vn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((K=K||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.browser.now(),x.zoom))&&(this.pauseablePlacement=new xh(x,this._order,K,C,k,G,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,st),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.browser.now()),Ve=!0),de&&this.pauseablePlacement.placement.setStale()),Ve||de)for(var zn=0,on=this._order;zn<on.length;zn+=1){var Fn=this._layers[on[zn]];Fn.type==="symbol"&&this.placement.updateLayerOpacities(Fn,st[Fn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.browser.now())},S.prototype._releaseSymbolFadeTiles=function(){for(var x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()},S.prototype.getImages=function(x,C,k){this.imageManager.getImages(C.icons,k),this._updateTilesForChangedImages();var G=this.sourceCaches[C.source];G&&G.setDependencies(C.tileID.key,C.type,C.icons)},S.prototype.getGlyphs=function(x,C,k){this.glyphManager.getGlyphs(C.stacks,k)},S.prototype.getResource=function(x,C,k){return E.makeRequest(C,k)},S}(E.Evented);pc.getSourceType=function(_){return Gt[_]},pc.setSourceType=function(_,S){Gt[_]=S},pc.registerForPluginStateChange=E.registerForPluginStateChange;var Os=E.createLayout([{name:"a_pos",type:"Int16",components:2}]),Oc=bs(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),gf=bs(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zh=bs(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Up=bs(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Eh=bs("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Cd=bs(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),th=bs(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Xh=bs("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Od=bs("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Rd=bs("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),_0=bs(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Df=bs(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Uu=bs(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),up=bs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Hl=bs(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Su=bs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ef=bs(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),vc=bs(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),tf=bs(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),uu=bs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),nf=bs(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Pl=bs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),zu=bs(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),yf=bs(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),fp=bs(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),$h=bs(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function bs(_,S){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=S.match(/attribute ([\w]+) ([\w]+)/g),k=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),G=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=G?G.concat(k):k,de={};return{fragmentSource:_=_.replace(x,function(Ve,st,Ft,jt,Xt){return de[Xt]=!0,st==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
varying `+Ft+" "+jt+" "+Xt+`;
#else
uniform `+Ft+" "+jt+" u_"+Xt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Xt+`
    `+Ft+" "+jt+" "+Xt+" = u_"+Xt+`;
#endif
`}),vertexSource:S=S.replace(x,function(Ve,st,Ft,jt,Xt){var bn=jt==="float"?"vec2":"vec4",vn=Xt.match(/color/)?"color":bn;return de[Xt]?st==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+Ft+" "+bn+" a_"+Xt+`;
varying `+Ft+" "+jt+" "+Xt+`;
#else
uniform `+Ft+" "+jt+" u_"+Xt+`;
#endif
`:vn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = a_"+Xt+`;
#else
    `+Ft+" "+jt+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = unpack_mix_"+vn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+Ft+" "+jt+" "+Xt+" = u_"+Xt+`;
#endif
`:st==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+Ft+" "+bn+" a_"+Xt+`;
#else
uniform `+Ft+" "+jt+" u_"+Xt+`;
#endif
`:vn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Ft+" "+jt+" "+Xt+" = a_"+Xt+`;
#else
    `+Ft+" "+jt+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Ft+" "+jt+" "+Xt+" = unpack_mix_"+vn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+Ft+" "+jt+" "+Xt+" = u_"+Xt+`;
#endif
`}),staticAttributes:C,staticUniforms:K}}var Md=Object.freeze({__proto__:null,prelude:Oc,background:gf,backgroundPattern:Zh,circle:Up,clippingMask:Eh,heatmap:Cd,heatmapTexture:th,collisionBox:Xh,collisionCircle:Od,debug:Rd,fill:_0,fillOutline:Df,fillOutlinePattern:Uu,fillPattern:up,fillExtrusion:Hl,fillExtrusionPattern:Su,hillshadePrepare:ef,hillshade:vc,line:tf,lineGradient:uu,linePattern:nf,lineSDF:Pl,raster:zu,symbolIcon:yf,symbolSDF:fp,symbolTextAndIcon:$h}),Yh=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Pd(_){for(var S=[],x=0;x<_.length;x++)if(_[x]!==null){var C=_[x].split(" ");S.push(C.pop())}return S}Yh.prototype.bind=function(_,S,x,C,k,G,K,de){this.context=_;for(var Ve=this.boundPaintVertexBuffers.length!==C.length,st=0;!Ve&&st<C.length;st++)this.boundPaintVertexBuffers[st]!==C[st]&&(Ve=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===S&&this.boundLayoutVertexBuffer===x&&!Ve&&this.boundIndexBuffer===k&&this.boundVertexOffset===G&&this.boundDynamicVertexBuffer===K&&this.boundDynamicVertexBuffer2===de?(_.bindVertexArrayOES.set(this.vao),K&&K.bind(),k&&k.dynamicDraw&&k.bind(),de&&de.bind()):this.freshBind(S,x,C,k,G,K,de)},Yh.prototype.freshBind=function(_,S,x,C,k,G,K){var de,Ve=_.numAttributes,st=this.context,Ft=st.gl;if(st.extVertexArrayObject)this.vao&&this.destroy(),this.vao=st.extVertexArrayObject.createVertexArrayOES(),st.bindVertexArrayOES.set(this.vao),de=0,this.boundProgram=_,this.boundLayoutVertexBuffer=S,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=C,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=G,this.boundDynamicVertexBuffer2=K;else{de=st.currentNumAttributes||0;for(var jt=Ve;jt<de;jt++)Ft.disableVertexAttribArray(jt)}S.enableAttributes(Ft,_);for(var Xt=0,bn=x;Xt<bn.length;Xt+=1)bn[Xt].enableAttributes(Ft,_);G&&G.enableAttributes(Ft,_),K&&K.enableAttributes(Ft,_),S.bind(),S.setVertexAttribPointers(Ft,_,k);for(var vn=0,zn=x;vn<zn.length;vn+=1){var on=zn[vn];on.bind(),on.setVertexAttribPointers(Ft,_,k)}G&&(G.bind(),G.setVertexAttribPointers(Ft,_,k)),C&&C.bind(),K&&(K.bind(),K.setVertexAttribPointers(Ft,_,k)),st.currentNumAttributes=Ve},Yh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cl=function(_,S,x,C,k,G){var K=_.gl;this.program=K.createProgram();for(var de=Pd(x.staticAttributes),Ve=C?C.getBinderAttributes():[],st=de.concat(Ve),Ft=x.staticUniforms?Pd(x.staticUniforms):[],jt=C?C.getBinderUniforms():[],Xt=[],bn=0,vn=Ft.concat(jt);bn<vn.length;bn+=1){var zn=vn[bn];Xt.indexOf(zn)<0&&Xt.push(zn)}var on=C?C.defines():[];G&&on.push("#define OVERDRAW_INSPECTOR;");var Fn=on.concat(Oc.fragmentSource,x.fragmentSource).join(`
`),er=on.concat(Oc.vertexSource,x.vertexSource).join(`
`),vr=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(vr,Fn),K.compileShader(vr),K.attachShader(this.program,vr);var Mr=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(Mr,er),K.compileShader(Mr),K.attachShader(this.program,Mr),this.attributes={};var wr={};this.numAttributes=st.length;for(var Fr=0;Fr<this.numAttributes;Fr++)st[Fr]&&(K.bindAttribLocation(this.program,Fr,st[Fr]),this.attributes[st[Fr]]=Fr);K.linkProgram(this.program),K.deleteShader(Mr),K.deleteShader(vr);for(var ni=0;ni<Xt.length;ni++){var Bi=Xt[ni];if(Bi&&!wr[Bi]){var Ii=K.getUniformLocation(this.program,Bi);Ii&&(wr[Bi]=Ii)}}this.fixedUniforms=k(_,wr),this.binderUniforms=C?C.getUniforms(_,wr):[]}}};function Sh(_,S,x){var C=1/Mi(x,1,S.transform.tileZoom),k=Math.pow(2,x.tileID.overscaledZ),G=x.tileSize*Math.pow(2,S.transform.tileZoom)/k,K=G*(x.tileID.canonical.x+x.tileID.wrap*k),de=G*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[C,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[K>>16,de>>16],u_pixel_coord_lower:[65535&K,65535&de]}}cl.prototype.draw=function(_,S,x,C,k,G,K,de,Ve,st,Ft,jt,Xt,bn,vn,zn){var on,Fn=_.gl;if(!this.failedToCreate){for(var er in _.program.set(this.program),_.setDepthMode(x),_.setStencilMode(C),_.setColorMode(k),_.setCullFace(G),this.fixedUniforms)this.fixedUniforms[er].set(K[er]);bn&&bn.setUniforms(_,this.binderUniforms,jt,{zoom:Xt});for(var vr=(on={},on[Fn.LINES]=2,on[Fn.TRIANGLES]=3,on[Fn.LINE_STRIP]=1,on)[S],Mr=0,wr=Ft.get();Mr<wr.length;Mr+=1){var Fr=wr[Mr],ni=Fr.vaos||(Fr.vaos={});(ni[de]||(ni[de]=new Yh)).bind(_,this,Ve,bn?bn.getPaintVertexBuffers():[],st,Fr.vertexOffset,vn,zn),Fn.drawElements(S,Fr.primitiveLength*vr,Fn.UNSIGNED_SHORT,Fr.primitiveOffset*vr*2)}}};var Th=function(_,S,x,C){var k=S.style.light,G=k.properties.get("position"),K=[G.x,G.y,G.z],de=E.create$1();k.properties.get("anchor")==="viewport"&&E.fromRotation(de,-S.transform.angle),E.transformMat3(K,K,de);var Ve=k.properties.get("color");return{u_matrix:_,u_lightpos:K,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[Ve.r,Ve.g,Ve.b],u_vertical_gradient:+x,u_opacity:C}},ne=function(_,S,x,C,k,G,K){return E.extend(Th(_,S,x,C),Sh(G,S,K),{u_height_factor:-Math.pow(2,k.overscaledZ)/K.tileSize/8})},_e=function(_){return{u_matrix:_}},qe=function(_,S,x,C){return E.extend(_e(_),Sh(x,S,C))},un=function(_,S){return{u_matrix:_,u_world:S}},Y=function(_,S,x,C,k){return E.extend(qe(_,S,x,C),{u_world:k})},tr=function(_,S,x,C){var k,G,K=_.transform;if(C.paint.get("circle-pitch-alignment")==="map"){var de=Mi(x,1,K.zoom);k=!0,G=[de,de]}else k=!1,G=K.pixelsToGLUnits;return{u_camera_to_center_distance:K.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(S.posMatrix,x,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:E.browser.devicePixelRatio,u_extrude_scale:G}},Rr=function(_,S,x){var C=Mi(x,1,S.zoom),k=Math.pow(2,S.zoom-x.tileID.overscaledZ),G=x.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:S.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[S.pixelsToGLUnits[0]/(C*k),S.pixelsToGLUnits[1]/(C*k)],u_overscale_factor:G}},Di=function(_,S,x){return{u_matrix:_,u_inv_matrix:S,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},zi=function(_,S,x){return x===void 0&&(x=1),{u_matrix:_,u_color:S,u_overlay:0,u_overlay_scale:x}},lo=function(_){return{u_matrix:_}},uo=function(_,S,x,C){return{u_matrix:_,u_extrude_scale:Mi(S,1,x),u_intensity:C}},wa=function(_,S,x){var C=_.transform;return{u_matrix:Ra(_,S,x),u_ratio:1/Mi(S,1,C.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},No=function(_,S,x,C){return E.extend(wa(_,S,x),{u_image:0,u_image_height:C})},Aa=function(_,S,x,C){var k=_.transform,G=ga(S,k);return{u_matrix:Ra(_,S,x),u_texsize:S.imageAtlasTexture.size,u_ratio:1/Mi(S,1,k.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_image:0,u_scale:[G,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},os=function(_,S,x,C,k){var G=_.lineAtlas,K=ga(S,_.transform),de=x.layout.get("line-cap")==="round",Ve=G.getDash(C.from,de),st=G.getDash(C.to,de),Ft=Ve.width*k.fromScale,jt=st.width*k.toScale;return E.extend(wa(_,S,x),{u_patternscale_a:[K/Ft,-Ve.height/2],u_patternscale_b:[K/jt,-st.height/2],u_sdfgamma:G.width/(256*Math.min(Ft,jt)*E.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ve.y,u_tex_y_b:st.y,u_mix:k.t})};function ga(_,S){return 1/Mi(_,1,S.tileZoom)}function Ra(_,S,x){return _.translatePosMatrix(S.tileID.posMatrix,S,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var Rs=function(_,S,x,C,k){return{u_matrix:_,u_tl_parent:S,u_scale_parent:x,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(K=k.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(G=k.paint.get("raster-contrast"),G>0?1/(1-G):1+G),u_spin_weights:ka(k.paint.get("raster-hue-rotate"))};var G,K};function ka(_){_*=Math.PI/180;var S=Math.sin(_),x=Math.cos(_);return[(2*x+1)/3,(-Math.sqrt(3)*S-x+1)/3,(Math.sqrt(3)*S-x+1)/3]}var Za,ms=function(_,S,x,C,k,G,K,de,Ve,st){var Ft=k.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:S?S.uSizeT:0,u_size:S?S.uSize:0,u_camera_to_center_distance:Ft.cameraToCenterDistance,u_pitch:Ft.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:Ft.width/Ft.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:G,u_label_plane_matrix:K,u_coord_matrix:de,u_is_text:+Ve,u_pitch_with_map:+C,u_texsize:st,u_texture:0}},nl=function(_,S,x,C,k,G,K,de,Ve,st,Ft){var jt=k.transform;return E.extend(ms(_,S,x,C,k,G,K,de,Ve,st),{u_gamma_scale:C?Math.cos(jt._pitch)*jt.cameraToCenterDistance:1,u_device_pixel_ratio:E.browser.devicePixelRatio,u_is_halo:+Ft})},Wa=function(_,S,x,C,k,G,K,de,Ve,st){return E.extend(nl(_,S,x,C,k,G,K,de,!0,Ve,!0),{u_texsize_icon:st,u_texture_icon:1})},Rc=function(_,S,x){return{u_matrix:_,u_opacity:S,u_color:x}},us=function(_,S,x,C,k,G){return E.extend(function(K,de,Ve,st){var Ft=Ve.imageManager.getPattern(K.from.toString()),jt=Ve.imageManager.getPattern(K.to.toString()),Xt=Ve.imageManager.getPixelSize(),bn=Xt.width,vn=Xt.height,zn=Math.pow(2,st.tileID.overscaledZ),on=st.tileSize*Math.pow(2,Ve.transform.tileZoom)/zn,Fn=on*(st.tileID.canonical.x+st.tileID.wrap*zn),er=on*st.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ft.tl,u_pattern_br_a:Ft.br,u_pattern_tl_b:jt.tl,u_pattern_br_b:jt.br,u_texsize:[bn,vn],u_mix:de.t,u_pattern_size_a:Ft.displaySize,u_pattern_size_b:jt.displaySize,u_scale_a:de.fromScale,u_scale_b:de.toScale,u_tile_units_to_pixels:1/Mi(st,1,Ve.transform.tileZoom),u_pixel_coord_upper:[Fn>>16,er>>16],u_pixel_coord_lower:[65535&Fn,65535&er]}}(C,G,x,k),{u_matrix:_,u_opacity:S})},Tu={fillExtrusion:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fillExtrusionPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_height_factor:new E.Uniform1f(_,S.u_height_factor),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fill:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},fillPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},fillOutline:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world)}},fillOutlinePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},circle:function(_,S){return{u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(_,S.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},collisionBox:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(_,S.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_overscale_factor:new E.Uniform1f(_,S.u_overscale_factor)}},collisionCircle:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_inv_matrix:new E.UniformMatrix4f(_,S.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(_,S.u_viewport_size)}},debug:function(_,S){return{u_color:new E.UniformColor(_,S.u_color),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_overlay:new E.Uniform1i(_,S.u_overlay),u_overlay_scale:new E.Uniform1f(_,S.u_overlay_scale)}},clippingMask:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmap:function(_,S){return{u_extrude_scale:new E.Uniform1f(_,S.u_extrude_scale),u_intensity:new E.Uniform1f(_,S.u_intensity),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmapTexture:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_color_ramp:new E.Uniform1i(_,S.u_color_ramp),u_opacity:new E.Uniform1f(_,S.u_opacity)}},hillshade:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_latrange:new E.Uniform2f(_,S.u_latrange),u_light:new E.Uniform2f(_,S.u_light),u_shadow:new E.UniformColor(_,S.u_shadow),u_highlight:new E.UniformColor(_,S.u_highlight),u_accent:new E.UniformColor(_,S.u_accent)}},hillshadePrepare:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_dimension:new E.Uniform2f(_,S.u_dimension),u_zoom:new E.Uniform1f(_,S.u_zoom),u_unpack:new E.Uniform4f(_,S.u_unpack)}},line:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels)}},lineGradient:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_image:new E.Uniform1i(_,S.u_image),u_image_height:new E.Uniform1f(_,S.u_image_height)}},linePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_texsize:new E.Uniform2f(_,S.u_texsize),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_image:new E.Uniform1i(_,S.u_image),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},lineSDF:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(_,S.u_patternscale_a),u_patternscale_b:new E.Uniform2f(_,S.u_patternscale_b),u_sdfgamma:new E.Uniform1f(_,S.u_sdfgamma),u_image:new E.Uniform1i(_,S.u_image),u_tex_y_a:new E.Uniform1f(_,S.u_tex_y_a),u_tex_y_b:new E.Uniform1f(_,S.u_tex_y_b),u_mix:new E.Uniform1f(_,S.u_mix)}},raster:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_tl_parent:new E.Uniform2f(_,S.u_tl_parent),u_scale_parent:new E.Uniform1f(_,S.u_scale_parent),u_buffer_scale:new E.Uniform1f(_,S.u_buffer_scale),u_fade_t:new E.Uniform1f(_,S.u_fade_t),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image0:new E.Uniform1i(_,S.u_image0),u_image1:new E.Uniform1i(_,S.u_image1),u_brightness_low:new E.Uniform1f(_,S.u_brightness_low),u_brightness_high:new E.Uniform1f(_,S.u_brightness_high),u_saturation_factor:new E.Uniform1f(_,S.u_saturation_factor),u_contrast_factor:new E.Uniform1f(_,S.u_contrast_factor),u_spin_weights:new E.Uniform3f(_,S.u_spin_weights)}},symbolIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture)}},symbolSDF:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},symbolTextAndIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texsize_icon:new E.Uniform2f(_,S.u_texsize_icon),u_texture:new E.Uniform1i(_,S.u_texture),u_texture_icon:new E.Uniform1i(_,S.u_texture_icon),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},background:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_color:new E.UniformColor(_,S.u_color)}},backgroundPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image:new E.Uniform1i(_,S.u_image),u_pattern_tl_a:new E.Uniform2f(_,S.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(_,S.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(_,S.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(_,S.u_pattern_br_b),u_texsize:new E.Uniform2f(_,S.u_texsize),u_mix:new E.Uniform1f(_,S.u_mix),u_pattern_size_a:new E.Uniform2f(_,S.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(_,S.u_pattern_size_b),u_scale_a:new E.Uniform1f(_,S.u_scale_a),u_scale_b:new E.Uniform1f(_,S.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(_,S.u_tile_units_to_pixels)}}};function fu(_,S,x,C,k,G,K){for(var de=_.context,Ve=de.gl,st=_.useProgram("collisionBox"),Ft=[],jt=0,Xt=0,bn=0;bn<C.length;bn++){var vn=C[bn],zn=S.getTile(vn),on=zn.getBucket(x);if(on){var Fn=vn.posMatrix;k[0]===0&&k[1]===0||(Fn=_.translatePosMatrix(vn.posMatrix,zn,k,G));var er=K?on.textCollisionBox:on.iconCollisionBox,vr=on.collisionCircleArray;if(vr.length>0){var Mr=E.create(),wr=Fn;E.mul(Mr,on.placementInvProjMatrix,_.transform.glCoordMatrix),E.mul(Mr,Mr,on.placementViewportMatrix),Ft.push({circleArray:vr,circleOffset:Xt,transform:wr,invTransform:Mr}),Xt=jt+=vr.length/4}er&&st.draw(de,Ve.LINES,et.disabled,Tt.disabled,_.colorModeForRenderPass(),pn.disabled,Rr(Fn,_.transform,zn),x.id,er.layoutVertexBuffer,er.indexBuffer,er.segments,null,_.transform.zoom,null,null,er.collisionVertexBuffer)}}if(K&&Ft.length){var Fr=_.useProgram("collisionCircle"),ni=new E.StructArrayLayout2f1f2i16;ni.resize(4*jt),ni._trim();for(var Bi=0,Ii=0,co=Ft;Ii<co.length;Ii+=1)for(var Uo=co[Ii],Go=0;Go<Uo.circleArray.length/4;Go++){var Zo=4*Go,fs=Uo.circleArray[Zo+0],Cr=Uo.circleArray[Zo+1],Jt=Uo.circleArray[Zo+2],ma=Uo.circleArray[Zo+3];ni.emplace(Bi++,fs,Cr,Jt,ma,0),ni.emplace(Bi++,fs,Cr,Jt,ma,1),ni.emplace(Bi++,fs,Cr,Jt,ma,2),ni.emplace(Bi++,fs,Cr,Jt,ma,3)}(!Za||Za.length<2*jt)&&(Za=function(xl){var Pc=2*xl,cc=new E.StructArrayLayout3ui6;cc.resize(Pc),cc._trim();for(var Ss=0;Ss<Pc;Ss++){var yl=6*Ss;cc.uint16[yl+0]=4*Ss+0,cc.uint16[yl+1]=4*Ss+1,cc.uint16[yl+2]=4*Ss+2,cc.uint16[yl+3]=4*Ss+2,cc.uint16[yl+4]=4*Ss+3,cc.uint16[yl+5]=4*Ss+0}return cc}(jt));for(var fa=de.createIndexBuffer(Za,!0),Qo=de.createVertexBuffer(ni,E.collisionCircleLayout.members,!0),ba=0,sa=Ft;ba<sa.length;ba+=1){var Fo=sa[ba],lc=Di(Fo.transform,Fo.invTransform,_.transform);Fr.draw(de,Ve.TRIANGLES,et.disabled,Tt.disabled,_.colorModeForRenderPass(),pn.disabled,lc,x.id,Qo,fa,E.SegmentVector.simpleSegment(0,2*Fo.circleOffset,Fo.circleArray.length,Fo.circleArray.length/2),null,_.transform.zoom,null,null,null)}Qo.destroy(),fa.destroy()}}var jc=E.identity(new Float32Array(16));function nh(_,S,x,C,k,G){var K=E.getAnchorAlignment(_),de=-(K.horizontalAlign-.5)*S,Ve=-(K.verticalAlign-.5)*x,st=E.evaluateVariableOffset(_,C);return new E.Point((de/k+st[0])*G,(Ve/k+st[1])*G)}function Id(_,S,x,C,k,G,K,de,Ve,st,Ft){var jt=_.text.placedSymbolArray,Xt=_.text.dynamicLayoutVertexArray,bn=_.icon.dynamicLayoutVertexArray,vn={};Xt.clear();for(var zn=0;zn<jt.length;zn++){var on=jt.get(zn),Fn=on.hidden||!on.crossTileID||_.allowVerticalPlacement&&!on.placedOrientation?null:C[on.crossTileID];if(Fn){var er=new E.Point(on.anchorX,on.anchorY),vr=Bn(er,x?de:K),Mr=gn(G.cameraToCenterDistance,vr.signedDistanceFromCamera),wr=k.evaluateSizeForFeature(_.textSizeData,st,on)*Mr/E.ONE_EM;x&&(wr*=_.tilePixelRatio/Ve);for(var Fr=nh(Fn.anchor,Fn.width,Fn.height,Fn.textOffset,Fn.textBoxScale,wr),ni=x?Bn(er.add(Fr),K).point:vr.point.add(S?Fr.rotate(-G.angle):Fr),Bi=_.allowVerticalPlacement&&on.placedOrientation===E.WritingMode.vertical?Math.PI/2:0,Ii=0;Ii<on.numGlyphs;Ii++)E.addDynamicAttributes(Xt,ni,Bi);Ft&&on.associatedIconIndex>=0&&(vn[on.associatedIconIndex]={shiftedAnchor:ni,angle:Bi})}else Li(on.numGlyphs,Xt)}if(Ft){bn.clear();for(var co=_.icon.placedSymbolArray,Uo=0;Uo<co.length;Uo++){var Go=co.get(Uo);if(Go.hidden)Li(Go.numGlyphs,bn);else{var Zo=vn[Uo];if(Zo)for(var fs=0;fs<Go.numGlyphs;fs++)E.addDynamicAttributes(bn,Zo.shiftedAnchor,Zo.angle);else Li(Go.numGlyphs,bn)}}_.icon.dynamicLayoutVertexBuffer.updateData(bn)}_.text.dynamicLayoutVertexBuffer.updateData(Xt)}function _f(_,S,x){return x.iconsInText&&S?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Nf(_,S,x,C,k,G,K,de,Ve,st,Ft,jt){for(var Xt=_.context,bn=Xt.gl,vn=_.transform,zn=de==="map",on=Ve==="map",Fn=zn&&x.layout.get("symbol-placement")!=="point",er=zn&&!on&&!Fn,vr=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,Mr=!1,wr=_.depthModeForSublayer(0,et.ReadOnly),Fr=x.layout.get("text-variable-anchor"),ni=[],Bi=0,Ii=C;Bi<Ii.length;Bi+=1){var co=Ii[Bi],Uo=S.getTile(co),Go=Uo.getBucket(x);if(Go){var Zo=k?Go.text:Go.icon;if(Zo&&Zo.segments.get().length){var fs=Zo.programConfigurations.get(x.id),Cr=k||Go.sdfIcons,Jt=k?Go.textSizeData:Go.iconSizeData,ma=on||vn.pitch!==0,fa=_.useProgram(_f(Cr,k,Go),fs),Qo=E.evaluateSizeForZoom(Jt,vn.zoom),ba=void 0,sa=[0,0],Fo=void 0,lc=void 0,xl=null,Pc=void 0;if(k)Fo=Uo.glyphAtlasTexture,lc=bn.LINEAR,ba=Uo.glyphAtlasTexture.size,Go.iconsInText&&(sa=Uo.imageAtlasTexture.size,xl=Uo.imageAtlasTexture,Pc=ma||_.options.rotating||_.options.zooming||Jt.kind==="composite"||Jt.kind==="camera"?bn.LINEAR:bn.NEAREST);else{var cc=x.layout.get("icon-size").constantOr(0)!==1||Go.iconsNeedLinear;Fo=Uo.imageAtlasTexture,lc=Cr||_.options.rotating||_.options.zooming||cc||ma?bn.LINEAR:bn.NEAREST,ba=Uo.imageAtlasTexture.size}var Ss=Mi(Uo,1,_.transform.zoom),yl=sn(co.posMatrix,on,zn,_.transform,Ss),dl=Nn(co.posMatrix,on,zn,_.transform,Ss),vu=Fr&&Go.hasTextData(),Hf=x.layout.get("icon-text-fit")!=="none"&&vu&&Go.hasIconData();Fn&&dr(Go,co.posMatrix,_,k,yl,dl,on,st);var Cu=_.translatePosMatrix(co.posMatrix,Uo,G,K),sf=Fn||k&&Fr||Hf?jc:yl,Hu=_.translatePosMatrix(dl,Uo,G,K,!0),gp=Cr&&x.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0,yp={program:fa,buffers:Zo,uniformValues:Cr?Go.iconsInText?Wa(Jt.kind,Qo,er,on,_,Cu,sf,Hu,ba,sa):nl(Jt.kind,Qo,er,on,_,Cu,sf,Hu,k,ba,!0):ms(Jt.kind,Qo,er,on,_,Cu,sf,Hu,k,ba),atlasTexture:Fo,atlasTextureIcon:xl,atlasInterpolation:lc,atlasInterpolationIcon:Pc,isSDF:Cr,hasHalo:gp};if(vr&&Go.canOverlap){Mr=!0;for(var Lh=0,ed=Zo.segments.get();Lh<ed.length;Lh+=1){var td=ed[Lh];ni.push({segments:new E.SegmentVector([td]),sortKey:td.sortKey,state:yp})}}else ni.push({segments:Zo.segments,sortKey:0,state:yp})}}}Mr&&ni.sort(function(Tf,wf){return Tf.sortKey-wf.sortKey});for(var ah=0,Ai=ni;ah<Ai.length;ah+=1){var Il=Ai[ah],Ll=Il.state;if(Xt.activeTexture.set(bn.TEXTURE0),Ll.atlasTexture.bind(Ll.atlasInterpolation,bn.CLAMP_TO_EDGE),Ll.atlasTextureIcon&&(Xt.activeTexture.set(bn.TEXTURE1),Ll.atlasTextureIcon&&Ll.atlasTextureIcon.bind(Ll.atlasInterpolationIcon,bn.CLAMP_TO_EDGE)),Ll.isSDF){var tu=Ll.uniformValues;Ll.hasHalo&&(tu.u_is_halo=1,rf(Ll.buffers,Il.segments,x,_,Ll.program,wr,Ft,jt,tu)),tu.u_is_halo=0}rf(Ll.buffers,Il.segments,x,_,Ll.program,wr,Ft,jt,Ll.uniformValues)}}function rf(_,S,x,C,k,G,K,de,Ve){var st=C.context;k.draw(st,st.gl.TRIANGLES,G,K,de,pn.disabled,Ve,x.id,_.layoutVertexBuffer,_.indexBuffer,S,x.paint,C.transform.zoom,_.programConfigurations.get(x.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function wh(_,S,x,C,k,G,K){var de,Ve,st,Ft,jt,Xt=_.context.gl,bn=x.paint.get("fill-pattern"),vn=bn&&bn.constantOr(1),zn=x.getCrossfadeParameters();K?(Ve=vn&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=Xt.LINES):(Ve=vn?"fillPattern":"fill",de=Xt.TRIANGLES);for(var on=0,Fn=C;on<Fn.length;on+=1){var er=Fn[on],vr=S.getTile(er);if(!vn||vr.patternsLoaded()){var Mr=vr.getBucket(x);if(Mr){var wr=Mr.programConfigurations.get(x.id),Fr=_.useProgram(Ve,wr);vn&&(_.context.activeTexture.set(Xt.TEXTURE0),vr.imageAtlasTexture.bind(Xt.LINEAR,Xt.CLAMP_TO_EDGE),wr.updatePaintBuffers(zn));var ni=bn.constantOr(null);if(ni&&vr.imageAtlas){var Bi=vr.imageAtlas,Ii=Bi.patternPositions[ni.to.toString()],co=Bi.patternPositions[ni.from.toString()];Ii&&co&&wr.setConstantPatternPositions(Ii,co)}var Uo=_.translatePosMatrix(er.posMatrix,vr,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(K){Ft=Mr.indexBuffer2,jt=Mr.segments2;var Go=[Xt.drawingBufferWidth,Xt.drawingBufferHeight];st=Ve==="fillOutlinePattern"&&vn?Y(Uo,_,zn,vr,Go):un(Uo,Go)}else Ft=Mr.indexBuffer,jt=Mr.segments,st=vn?qe(Uo,_,zn,vr):_e(Uo);Fr.draw(_.context,de,k,_.stencilModeForClipping(er),G,pn.disabled,st,x.id,Mr.layoutVertexBuffer,Ft,jt,x.paint,_.transform.zoom,wr)}}}}function Ah(_,S,x,C,k,G,K){for(var de=_.context,Ve=de.gl,st=x.paint.get("fill-extrusion-pattern"),Ft=st.constantOr(1),jt=x.getCrossfadeParameters(),Xt=x.paint.get("fill-extrusion-opacity"),bn=0,vn=C;bn<vn.length;bn+=1){var zn=vn[bn],on=S.getTile(zn),Fn=on.getBucket(x);if(Fn){var er=Fn.programConfigurations.get(x.id),vr=_.useProgram(Ft?"fillExtrusionPattern":"fillExtrusion",er);Ft&&(_.context.activeTexture.set(Ve.TEXTURE0),on.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),er.updatePaintBuffers(jt));var Mr=st.constantOr(null);if(Mr&&on.imageAtlas){var wr=on.imageAtlas,Fr=wr.patternPositions[Mr.to.toString()],ni=wr.patternPositions[Mr.from.toString()];Fr&&ni&&er.setConstantPatternPositions(Fr,ni)}var Bi=_.translatePosMatrix(zn.posMatrix,on,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),Ii=x.paint.get("fill-extrusion-vertical-gradient"),co=Ft?ne(Bi,_,Ii,Xt,zn,jt,on):Th(Bi,_,Ii,Xt);vr.draw(de,de.gl.TRIANGLES,k,G,K,pn.backCCW,co,x.id,Fn.layoutVertexBuffer,Fn.indexBuffer,Fn.segments,x.paint,_.transform.zoom,er)}}}function Bf(_,S,x,C,k,G){var K=_.context,de=K.gl,Ve=S.fbo;if(Ve){var st=_.useProgram("hillshade");K.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ve.colorAttachment.get());var Ft=function(jt,Xt,bn){var vn=bn.paint.get("hillshade-shadow-color"),zn=bn.paint.get("hillshade-highlight-color"),on=bn.paint.get("hillshade-accent-color"),Fn=bn.paint.get("hillshade-illumination-direction")*(Math.PI/180);bn.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fn-=jt.transform.angle);var er,vr,Mr,wr=!jt.options.moving;return{u_matrix:jt.transform.calculatePosMatrix(Xt.tileID.toUnwrapped(),wr),u_image:0,u_latrange:(er=Xt.tileID,vr=Math.pow(2,er.canonical.z),Mr=er.canonical.y,[new E.MercatorCoordinate(0,Mr/vr).toLngLat().lat,new E.MercatorCoordinate(0,(Mr+1)/vr).toLngLat().lat]),u_light:[bn.paint.get("hillshade-exaggeration"),Fn],u_shadow:vn,u_highlight:zn,u_accent:on}}(_,S,x);st.draw(K,de.TRIANGLES,C,k,G,pn.disabled,Ft,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function b0(_,S,x,C,k,G){var K=_.context,de=K.gl,Ve=S.dem;if(Ve&&Ve.data){var st=Ve.dim,Ft=Ve.stride,jt=Ve.getPixels();if(K.activeTexture.set(de.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),S.demTexture=S.demTexture||_.getTileTexture(Ft),S.demTexture){var Xt=S.demTexture;Xt.update(jt,{premultiply:!1}),Xt.bind(de.NEAREST,de.CLAMP_TO_EDGE)}else S.demTexture=new E.Texture(K,jt,de.RGBA,{premultiply:!1}),S.demTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE);K.activeTexture.set(de.TEXTURE0);var bn=S.fbo;if(!bn){var vn=new E.Texture(K,{width:st,height:st,data:null},de.RGBA);vn.bind(de.LINEAR,de.CLAMP_TO_EDGE),(bn=S.fbo=K.createFramebuffer(st,st,!0)).colorAttachment.set(vn.texture)}K.bindFramebuffer.set(bn.framebuffer),K.viewport.set([0,0,st,st]),_.useProgram("hillshadePrepare").draw(K,de.TRIANGLES,C,k,G,pn.disabled,function(zn,on){var Fn=on.stride,er=E.create();return E.ortho(er,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(er,er,[0,-E.EXTENT,0]),{u_matrix:er,u_image:1,u_dimension:[Fn,Fn],u_zoom:zn.overscaledZ,u_unpack:on.getUnpackVector()}}(S.tileID,Ve),x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),S.needsHillshadePrepare=!1}}function Ld(_,S,x,C,k){var G=C.paint.get("raster-fade-duration");if(G>0){var K=E.browser.now(),de=(K-_.timeAdded)/G,Ve=S?(K-S.timeAdded)/G:-1,st=x.getSource(),Ft=k.coveringZoomLevel({tileSize:st.tileSize,roundZoom:st.roundZoom}),jt=!S||Math.abs(S.tileID.overscaledZ-Ft)>Math.abs(_.tileID.overscaledZ-Ft),Xt=jt&&_.refreshedUponExpiration?1:E.clamp(jt?de:1-Ve,0,1);return _.refreshedUponExpiration&&de>=1&&(_.refreshedUponExpiration=!1),S?{opacity:1,mix:1-Xt}:{opacity:Xt,mix:0}}return{opacity:1,mix:0}}var zp=new E.Color(1,0,0,1),Ff=new E.Color(0,1,0,1),jp=new E.Color(0,0,1,1),Dd=new E.Color(1,0,1,1),hp=new E.Color(0,1,1,1);function kf(_,S,x,C){Ch(_,0,S+x/2,_.transform.width,x,C)}function Vp(_,S,x,C){Ch(_,S-x/2,0,x,_.transform.height,C)}function Ch(_,S,x,C,k,G){var K=_.context,de=K.gl;de.enable(de.SCISSOR_TEST),de.scissor(S*E.browser.devicePixelRatio,x*E.browser.devicePixelRatio,C*E.browser.devicePixelRatio,k*E.browser.devicePixelRatio),K.clear({color:G}),de.disable(de.SCISSOR_TEST)}function Hp(_,S,x){var C=_.context,k=C.gl,G=x.posMatrix,K=_.useProgram("debug"),de=et.disabled,Ve=Tt.disabled,st=_.colorModeForRenderPass();C.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),K.draw(C,k.LINE_STRIP,de,Ve,st,pn.disabled,zi(G,E.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var Ft=S.getTileByID(x.key).latestRawTileData,jt=Math.floor((Ft&&Ft.byteLength||0)/1024),Xt=S.getTile(x).tileSize,bn=512/Math.min(Xt,512)*(x.overscaledZ/_.transform.zoom)*.5,vn=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(vn+=" => "+x.overscaledZ),function(zn,on){zn.initDebugOverlayCanvas();var Fn=zn.debugOverlayCanvas,er=zn.context.gl,vr=zn.debugOverlayCanvas.getContext("2d");vr.clearRect(0,0,Fn.width,Fn.height),vr.shadowColor="white",vr.shadowBlur=2,vr.lineWidth=1.5,vr.strokeStyle="white",vr.textBaseline="top",vr.font="bold 36px Open Sans, sans-serif",vr.fillText(on,5,5),vr.strokeText(on,5,5),zn.debugOverlayTexture.update(Fn),zn.debugOverlayTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE)}(_,vn+" "+jt+"kb"),K.draw(C,k.TRIANGLES,de,Ve,Yt.alphaBlended,pn.disabled,zi(G,E.Color.transparent,bn),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var Uf={symbol:function(_,S,x,C,k){if(_.renderPass==="translucent"){var G=Tt.disabled,K=_.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(de,Ve,st,Ft,jt,Xt,bn){for(var vn=Ve.transform,zn=jt==="map",on=Xt==="map",Fn=0,er=de;Fn<er.length;Fn+=1){var vr=er[Fn],Mr=Ft.getTile(vr),wr=Mr.getBucket(st);if(wr&&wr.text&&wr.text.segments.get().length){var Fr=E.evaluateSizeForZoom(wr.textSizeData,vn.zoom),ni=Mi(Mr,1,Ve.transform.zoom),Bi=sn(vr.posMatrix,on,zn,Ve.transform,ni),Ii=st.layout.get("icon-text-fit")!=="none"&&wr.hasIconData();if(Fr){var co=Math.pow(2,vn.zoom-Mr.tileID.overscaledZ);Id(wr,zn,on,bn,E.symbolSize,vn,Bi,vr.posMatrix,co,Fr,Ii)}}}}(C,_,x,S,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),k),x.paint.get("icon-opacity").constantOr(1)!==0&&Nf(_,S,x,C,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),G,K),x.paint.get("text-opacity").constantOr(1)!==0&&Nf(_,S,x,C,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),G,K),S.map.showCollisionBoxes&&(fu(_,S,x,C,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),fu(_,S,x,C,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(_,S,x,C){if(_.renderPass==="translucent"){var k=x.paint.get("circle-opacity"),G=x.paint.get("circle-stroke-width"),K=x.paint.get("circle-stroke-opacity"),de=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)!==0||G.constantOr(1)!==0&&K.constantOr(1)!==0){for(var Ve=_.context,st=Ve.gl,Ft=_.depthModeForSublayer(0,et.ReadOnly),jt=Tt.disabled,Xt=_.colorModeForRenderPass(),bn=[],vn=0;vn<C.length;vn++){var zn=C[vn],on=S.getTile(zn),Fn=on.getBucket(x);if(Fn){var er=Fn.programConfigurations.get(x.id),vr={programConfiguration:er,program:_.useProgram("circle",er),layoutVertexBuffer:Fn.layoutVertexBuffer,indexBuffer:Fn.indexBuffer,uniformValues:tr(_,zn,on,x)};if(de)for(var Mr=0,wr=Fn.segments.get();Mr<wr.length;Mr+=1){var Fr=wr[Mr];bn.push({segments:new E.SegmentVector([Fr]),sortKey:Fr.sortKey,state:vr})}else bn.push({segments:Fn.segments,sortKey:0,state:vr})}}de&&bn.sort(function(Uo,Go){return Uo.sortKey-Go.sortKey});for(var ni=0,Bi=bn;ni<Bi.length;ni+=1){var Ii=Bi[ni],co=Ii.state;co.program.draw(Ve,st.TRIANGLES,Ft,jt,Xt,pn.disabled,co.uniformValues,x.id,co.layoutVertexBuffer,co.indexBuffer,Ii.segments,x.paint,_.transform.zoom,co.programConfiguration)}}}},heatmap:function(_,S,x,C){if(x.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var k=_.context,G=k.gl,K=Tt.disabled,de=new Yt([G.ONE,G.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(bn,vn,zn){var on=bn.gl;bn.activeTexture.set(on.TEXTURE1),bn.viewport.set([0,0,vn.width/4,vn.height/4]);var Fn=zn.heatmapFbo;if(Fn)on.bindTexture(on.TEXTURE_2D,Fn.colorAttachment.get()),bn.bindFramebuffer.set(Fn.framebuffer);else{var er=on.createTexture();on.bindTexture(on.TEXTURE_2D,er),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_WRAP_S,on.CLAMP_TO_EDGE),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_WRAP_T,on.CLAMP_TO_EDGE),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_MIN_FILTER,on.LINEAR),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_MAG_FILTER,on.LINEAR),Fn=zn.heatmapFbo=bn.createFramebuffer(vn.width/4,vn.height/4,!1),function(vr,Mr,wr,Fr){var ni=vr.gl;ni.texImage2D(ni.TEXTURE_2D,0,ni.RGBA,Mr.width/4,Mr.height/4,0,ni.RGBA,vr.extRenderToTextureHalfFloat?vr.extTextureHalfFloat.HALF_FLOAT_OES:ni.UNSIGNED_BYTE,null),Fr.colorAttachment.set(wr)}(bn,vn,er,Fn)}})(k,_,x),k.clear({color:E.Color.transparent});for(var Ve=0;Ve<C.length;Ve++){var st=C[Ve];if(!S.hasRenderableParent(st)){var Ft=S.getTile(st),jt=Ft.getBucket(x);if(jt){var Xt=jt.programConfigurations.get(x.id);_.useProgram("heatmap",Xt).draw(k,G.TRIANGLES,et.disabled,K,de,pn.disabled,uo(st.posMatrix,Ft,_.transform.zoom,x.paint.get("heatmap-intensity")),x.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,x.paint,_.transform.zoom,Xt)}}}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(bn,vn){var zn=bn.context,on=zn.gl,Fn=vn.heatmapFbo;if(Fn){zn.activeTexture.set(on.TEXTURE0),on.bindTexture(on.TEXTURE_2D,Fn.colorAttachment.get()),zn.activeTexture.set(on.TEXTURE1);var er=vn.colorRampTexture;er||(er=vn.colorRampTexture=new E.Texture(zn,vn.colorRamp,on.RGBA)),er.bind(on.LINEAR,on.CLAMP_TO_EDGE),bn.useProgram("heatmapTexture").draw(zn,on.TRIANGLES,et.disabled,Tt.disabled,bn.colorModeForRenderPass(),pn.disabled,function(vr,Mr,wr,Fr){var ni=E.create();E.ortho(ni,0,vr.width,vr.height,0,0,1);var Bi=vr.context.gl;return{u_matrix:ni,u_world:[Bi.drawingBufferWidth,Bi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Mr.paint.get("heatmap-opacity")}}(bn,vn),vn.id,bn.viewportBuffer,bn.quadTriangleIndexBuffer,bn.viewportSegments,vn.paint,bn.transform.zoom)}}(_,x))},line:function(_,S,x,C){if(_.renderPass==="translucent"){var k=x.paint.get("line-opacity"),G=x.paint.get("line-width");if(k.constantOr(1)!==0&&G.constantOr(1)!==0)for(var K=_.depthModeForSublayer(0,et.ReadOnly),de=_.colorModeForRenderPass(),Ve=x.paint.get("line-dasharray"),st=x.paint.get("line-pattern"),Ft=st.constantOr(1),jt=x.paint.get("line-gradient"),Xt=x.getCrossfadeParameters(),bn=Ft?"linePattern":Ve?"lineSDF":jt?"lineGradient":"line",vn=_.context,zn=vn.gl,on=!0,Fn=0,er=C;Fn<er.length;Fn+=1){var vr=er[Fn],Mr=S.getTile(vr);if(!Ft||Mr.patternsLoaded()){var wr=Mr.getBucket(x);if(wr){var Fr=wr.programConfigurations.get(x.id),ni=_.context.program.get(),Bi=_.useProgram(bn,Fr),Ii=on||Bi.program!==ni,co=st.constantOr(null);if(co&&Mr.imageAtlas){var Uo=Mr.imageAtlas,Go=Uo.patternPositions[co.to.toString()],Zo=Uo.patternPositions[co.from.toString()];Go&&Zo&&Fr.setConstantPatternPositions(Go,Zo)}var fs=Ft?Aa(_,Mr,x,Xt):Ve?os(_,Mr,x,Ve,Xt):jt?No(_,Mr,x,wr.lineClipsArray.length):wa(_,Mr,x);if(Ft)vn.activeTexture.set(zn.TEXTURE0),Mr.imageAtlasTexture.bind(zn.LINEAR,zn.CLAMP_TO_EDGE),Fr.updatePaintBuffers(Xt);else if(Ve&&(Ii||_.lineAtlas.dirty))vn.activeTexture.set(zn.TEXTURE0),_.lineAtlas.bind(vn);else if(jt){var Cr=wr.gradients[x.id],Jt=Cr.texture;if(x.gradientVersion!==Cr.version){var ma=256;if(x.stepInterpolant){var fa=S.getSource().maxzoom,Qo=vr.canonical.z===fa?Math.ceil(1<<_.transform.maxZoom-vr.canonical.z):1;ma=E.clamp(E.nextPowerOfTwo(wr.maxLineLength/E.EXTENT*1024*Qo),256,vn.maxTextureSize)}Cr.gradient=E.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:ma,image:Cr.gradient||void 0,clips:wr.lineClipsArray}),Cr.texture?Cr.texture.update(Cr.gradient):Cr.texture=new E.Texture(vn,Cr.gradient,zn.RGBA),Cr.version=x.gradientVersion,Jt=Cr.texture}vn.activeTexture.set(zn.TEXTURE0),Jt.bind(x.stepInterpolant?zn.NEAREST:zn.LINEAR,zn.CLAMP_TO_EDGE)}Bi.draw(vn,zn.TRIANGLES,K,_.stencilModeForClipping(vr),de,pn.disabled,fs,x.id,wr.layoutVertexBuffer,wr.indexBuffer,wr.segments,x.paint,_.transform.zoom,Fr,wr.layoutVertexBuffer2),on=!1}}}}},fill:function(_,S,x,C){var k=x.paint.get("fill-color"),G=x.paint.get("fill-opacity");if(G.constantOr(1)!==0){var K=_.colorModeForRenderPass(),de=x.paint.get("fill-pattern"),Ve=_.opaquePassEnabledForLayer()&&!de.constantOr(1)&&k.constantOr(E.Color.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Ve){var st=_.depthModeForSublayer(1,_.renderPass==="opaque"?et.ReadWrite:et.ReadOnly);wh(_,S,x,C,st,K,!1)}if(_.renderPass==="translucent"&&x.paint.get("fill-antialias")){var Ft=_.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,et.ReadOnly);wh(_,S,x,C,Ft,K,!0)}}},"fill-extrusion":function(_,S,x,C){var k=x.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){var G=new et(_.context.gl.LEQUAL,et.ReadWrite,_.depthRangeFor3D);if(k!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))Ah(_,S,x,C,G,Tt.disabled,Yt.disabled),Ah(_,S,x,C,G,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var K=_.colorModeForRenderPass();Ah(_,S,x,C,G,Tt.disabled,K)}}},hillshade:function(_,S,x,C){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var k=_.context,G=_.depthModeForSublayer(0,et.ReadOnly),K=_.colorModeForRenderPass(),de=_.renderPass==="translucent"?_.stencilConfigForOverlap(C):[{},C],Ve=de[0],st=0,Ft=de[1];st<Ft.length;st+=1){var jt=Ft[st],Xt=S.getTile(jt);Xt.needsHillshadePrepare&&_.renderPass==="offscreen"?b0(_,Xt,x,G,Tt.disabled,K):_.renderPass==="translucent"&&Bf(_,Xt,x,G,Ve[jt.overscaledZ],K)}k.viewport.set([0,0,_.width,_.height])}},raster:function(_,S,x,C){if(_.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&C.length)for(var k=_.context,G=k.gl,K=S.getSource(),de=_.useProgram("raster"),Ve=_.colorModeForRenderPass(),st=K instanceof Rt?[{},C]:_.stencilConfigForOverlap(C),Ft=st[0],jt=st[1],Xt=jt[jt.length-1].overscaledZ,bn=!_.options.moving,vn=0,zn=jt;vn<zn.length;vn+=1){var on=zn[vn],Fn=_.depthModeForSublayer(on.overscaledZ-Xt,x.paint.get("raster-opacity")===1?et.ReadWrite:et.ReadOnly,G.LESS),er=S.getTile(on),vr=_.transform.calculatePosMatrix(on.toUnwrapped(),bn);er.registerFadeDuration(x.paint.get("raster-fade-duration"));var Mr=S.findLoadedParent(on,0),wr=Ld(er,Mr,S,x,_.transform),Fr=void 0,ni=void 0,Bi=x.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;k.activeTexture.set(G.TEXTURE0),er.texture.bind(Bi,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(G.TEXTURE1),Mr?(Mr.texture.bind(Bi,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Fr=Math.pow(2,Mr.tileID.overscaledZ-er.tileID.overscaledZ),ni=[er.tileID.canonical.x*Fr%1,er.tileID.canonical.y*Fr%1]):er.texture.bind(Bi,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST);var Ii=Rs(vr,ni||[0,0],Fr||1,wr,x);K instanceof Rt?de.draw(k,G.TRIANGLES,Fn,Tt.disabled,Ve,pn.disabled,Ii,x.id,K.boundsBuffer,_.quadTriangleIndexBuffer,K.boundsSegments):de.draw(k,G.TRIANGLES,Fn,Ft[on.overscaledZ],Ve,pn.disabled,Ii,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,S,x){var C=x.paint.get("background-color"),k=x.paint.get("background-opacity");if(k!==0){var G=_.context,K=G.gl,de=_.transform,Ve=de.tileSize,st=x.paint.get("background-pattern");if(!_.isPatternMissing(st)){var Ft=!st&&C.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===Ft){var jt=Tt.disabled,Xt=_.depthModeForSublayer(0,Ft==="opaque"?et.ReadWrite:et.ReadOnly),bn=_.colorModeForRenderPass(),vn=_.useProgram(st?"backgroundPattern":"background"),zn=de.coveringTiles({tileSize:Ve});st&&(G.activeTexture.set(K.TEXTURE0),_.imageManager.bind(_.context));for(var on=x.getCrossfadeParameters(),Fn=0,er=zn;Fn<er.length;Fn+=1){var vr=er[Fn],Mr=_.transform.calculatePosMatrix(vr.toUnwrapped()),wr=st?us(Mr,k,_,st,{tileID:vr,tileSize:Ve},on):Rc(Mr,k,C);vn.draw(G,K.TRIANGLES,Xt,jt,bn,pn.disabled,wr,x.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,S,x){for(var C=0;C<x.length;C++)Hp(_,S,x[C])},custom:function(_,S,x){var C=_.context,k=x.implementation;if(_.renderPass==="offscreen"){var G=k.prerender;G&&(_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),G.call(k,C.gl,_.transform.customLayerMatrix()),C.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),C.setStencilMode(Tt.disabled);var K=k.renderingMode==="3d"?new et(_.context.gl.LEQUAL,et.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,et.ReadOnly);C.setDepthMode(K),k.render(C.gl,_.transform.customLayerMatrix()),C.setDirty(),_.setBaseState(),C.bindFramebuffer.set(null)}}},Xs=function(_,S){this.context=new _t(_),this.transform=S,this._tileTextures={},this.setup(),this.numSublayers=qt.maxUnderzooming+qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Lf,this.gpuTimers={}};Xs.prototype.resize=function(_,S){if(this.width=_*E.browser.devicePixelRatio,this.height=S*E.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,C=this.style._order;x<C.length;x+=1)this.style._layers[C[x]].resize()},Xs.prototype.setup=function(){var _=this.context,S=new E.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(E.EXTENT,0),S.emplaceBack(0,E.EXTENT),S.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(S,Os.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);var x=new E.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(E.EXTENT,0),x.emplaceBack(0,E.EXTENT),x.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=_.createVertexBuffer(x,Os.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);var C=new E.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(E.EXTENT,0,E.EXTENT,0),C.emplaceBack(0,E.EXTENT,0,E.EXTENT),C.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(C,Ze.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);var k=new E.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(k,Os.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);var G=new E.StructArrayLayout1ui2;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(G);var K=new E.StructArrayLayout3ui6;K.emplaceBack(0,1,2),K.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(K),this.emptyTexture=new E.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var de=this.context.gl;this.stencilClearMode=new Tt({func:de.ALWAYS,mask:0},0,255,de.ZERO,de.ZERO,de.ZERO)},Xs.prototype.clearStencil=function(){var _=this.context,S=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=E.create();E.ortho(x,0,this.width,this.height,0,0,1),E.scale(x,x,[S.drawingBufferWidth,S.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,S.TRIANGLES,et.disabled,this.stencilClearMode,Yt.disabled,pn.disabled,lo(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Xs.prototype._renderTileClippingMasks=function(_,S){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&S&&S.length){this.currentStencilSource=_.source;var x=this.context,C=x.gl;this.nextStencilID+S.length>256&&this.clearStencil(),x.setColorMode(Yt.disabled),x.setDepthMode(et.disabled);var k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var G=0,K=S;G<K.length;G+=1){var de=K[G],Ve=this._tileClippingMaskIDs[de.key]=this.nextStencilID++;k.draw(x,C.TRIANGLES,et.disabled,new Tt({func:C.ALWAYS,mask:0},Ve,255,C.KEEP,C.KEEP,C.REPLACE),Yt.disabled,pn.disabled,lo(de.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Xs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,S=this.context.gl;return new Tt({func:S.NOTEQUAL,mask:255},_,255,S.KEEP,S.KEEP,S.REPLACE)},Xs.prototype.stencilModeForClipping=function(_){var S=this.context.gl;return new Tt({func:S.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,S.KEEP,S.KEEP,S.REPLACE)},Xs.prototype.stencilConfigForOverlap=function(_){var S,x=this.context.gl,C=_.sort(function(Ve,st){return st.overscaledZ-Ve.overscaledZ}),k=C[C.length-1].overscaledZ,G=C[0].overscaledZ-k+1;if(G>1){this.currentStencilSource=void 0,this.nextStencilID+G>256&&this.clearStencil();for(var K={},de=0;de<G;de++)K[de+k]=new Tt({func:x.GEQUAL,mask:255},de+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=G,[K,C]}return[(S={},S[k]=Tt.disabled,S),C]},Xs.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new Yt([_.CONSTANT_COLOR,_.ONE],new E.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yt.unblended:Yt.alphaBlended},Xs.prototype.depthModeForSublayer=function(_,S,x){if(!this.opaquePassEnabledForLayer())return et.disabled;var C=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new et(x||this.context.gl.LEQUAL,S,[C,C])},Xs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Xs.prototype.render=function(_,S){var x=this;this.style=_,this.options=S,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(E.browser.now()),this.imageManager.beginFrame();var C=this.style._order,k=this.style.sourceCaches;for(var G in k){var K=k[G];K.used&&K.prepare(this.context)}var de,Ve,st={},Ft={},jt={};for(var Xt in k){var bn=k[Xt];st[Xt]=bn.getVisibleCoordinates(),Ft[Xt]=st[Xt].slice().reverse(),jt[Xt]=bn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var vn=0;vn<C.length;vn++)if(this.style._layers[C[vn]].is3D()){this.opaquePassCutoff=vn;break}this.renderPass="offscreen";for(var zn=0,on=C;zn<on.length;zn+=1){var Fn=this.style._layers[on[zn]];if(Fn.hasOffscreenPass()&&!Fn.isHidden(this.transform.zoom)){var er=Ft[Fn.source];(Fn.type==="custom"||er.length)&&this.renderLayer(this,k[Fn.source],Fn,er)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:S.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=S.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){var vr=this.style._layers[C[this.currentLayer]],Mr=k[vr.source],wr=st[vr.source];this._renderTileClippingMasks(vr,wr),this.renderLayer(this,Mr,vr,wr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){var Fr=this.style._layers[C[this.currentLayer]],ni=k[Fr.source],Bi=(Fr.type==="symbol"?jt:Ft)[Fr.source];this._renderTileClippingMasks(Fr,st[Fr.source]),this.renderLayer(this,ni,Fr,Bi)}this.options.showTileBoundaries&&(E.values(this.style._layers).forEach(function(Ii){Ii.source&&!Ii.isHidden(x.transform.zoom)&&(Ii.source!==(Ve&&Ve.id)&&(Ve=x.style.sourceCaches[Ii.source]),(!de||de.getSource().maxzoom<Ve.getSource().maxzoom)&&(de=Ve))}),de&&Uf.debug(this,de,de.getVisibleCoordinates())),this.options.showPadding&&function(Ii){var co=Ii.transform.padding;kf(Ii,Ii.transform.height-(co.top||0),3,zp),kf(Ii,co.bottom||0,3,Ff),Vp(Ii,co.left||0,3,jp),Vp(Ii,Ii.transform.width-(co.right||0),3,Dd);var Uo=Ii.transform.centerPoint;(function(Go,Zo,fs,Cr){Ch(Go,Zo-1,fs-10,2,20,Cr),Ch(Go,Zo-10,fs-1,20,2,Cr)})(Ii,Uo.x,Ii.transform.height-Uo.y,hp)}(this),this.context.setDefault()},Xs.prototype.renderLayer=function(_,S,x,C){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||C.length)&&(this.id=x.id,this.gpuTimingStart(x),Uf[x.type](_,S,x,C,this.style.placement.variableOffsets),this.gpuTimingEnd())},Xs.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var S=this.context.extTimerQuery,x=this.gpuTimers[_.id];x||(x=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:S.createQueryEXT()}),x.calls++,S.beginQueryEXT(S.TIME_ELAPSED_EXT,x.query)}},Xs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},Xs.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},Xs.prototype.queryGpuTimers=function(_){var S={};for(var x in _){var C=_[x],k=this.context.extTimerQuery,G=k.getQueryObjectEXT(C.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(C.query),S[x]=G}return S},Xs.prototype.translatePosMatrix=function(_,S,x,C,k){if(!x[0]&&!x[1])return _;var G=k?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(G){var K=Math.sin(G),de=Math.cos(G);x=[x[0]*de-x[1]*K,x[0]*K+x[1]*de]}var Ve=[k?x[0]:Mi(S,x[0],this.transform.zoom),k?x[1]:Mi(S,x[1],this.transform.zoom),0],st=new Float32Array(16);return E.translate(st,_,Ve),st},Xs.prototype.saveTileTexture=function(_){var S=this._tileTextures[_.size[0]];S?S.push(_):this._tileTextures[_.size[0]]=[_]},Xs.prototype.getTileTexture=function(_){var S=this._tileTextures[_];return S&&S.length>0?S.pop():null},Xs.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var S=this.imageManager.getPattern(_.from.toString()),x=this.imageManager.getPattern(_.to.toString());return!S||!x},Xs.prototype.useProgram=function(_,S){this.cache=this.cache||{};var x=""+_+(S?S.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[x]||(this.cache[x]=new cl(this.context,_,Md[_],S,Tu[_],this._showOverdrawInspector)),this.cache[x]},Xs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Xs.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},Xs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=E.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Xs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var dp=function(_,S){this.points=_,this.planes=S};dp.fromInvProjectionMatrix=function(_,S,x){var C=Math.pow(2,x),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(K){return E.transformMat4([],K,_)}).map(function(K){return E.scale$1([],K,1/K[3]/S*C)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(K){var de=E.sub([],k[K[0]],k[K[1]]),Ve=E.sub([],k[K[2]],k[K[1]]),st=E.normalize([],E.cross([],de,Ve)),Ft=-E.dot(st,k[K[1]]);return st.concat(Ft)});return new dp(k,G)};var bf=function(_,S){this.min=_,this.max=S,this.center=E.scale$2([],E.add([],this.min,this.max),.5)};bf.prototype.quadrant=function(_){for(var S=[_%2==0,_<2],x=E.clone$2(this.min),C=E.clone$2(this.max),k=0;k<S.length;k++)x[k]=S[k]?this.min[k]:this.center[k],C[k]=S[k]?this.center[k]:this.max[k];return C[2]=this.max[2],new bf(x,C)},bf.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},bf.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},bf.prototype.intersects=function(_){for(var S=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,C=0;C<_.planes.length;C++){for(var k=_.planes[C],G=0,K=0;K<S.length;K++)G+=E.dot$1(k,S[K])>=0;if(G===0)return 0;G!==S.length&&(x=!1)}if(x)return 2;for(var de=0;de<3;de++){for(var Ve=Number.MAX_VALUE,st=-Number.MAX_VALUE,Ft=0;Ft<_.points.length;Ft++){var jt=_.points[Ft][de]-this.min[de];Ve=Math.min(Ve,jt),st=Math.max(st,jt)}if(st<0||Ve>this.max[de]-this.min[de])return 0}return 1};var he=function(_,S,x,C){if(_===void 0&&(_=0),S===void 0&&(S=0),x===void 0&&(x=0),C===void 0&&(C=0),isNaN(_)||_<0||isNaN(S)||S<0||isNaN(x)||x<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=S,this.left=x,this.right=C};he.prototype.interpolate=function(_,S,x){return S.top!=null&&_.top!=null&&(this.top=E.number(_.top,S.top,x)),S.bottom!=null&&_.bottom!=null&&(this.bottom=E.number(_.bottom,S.bottom,x)),S.left!=null&&_.left!=null&&(this.left=E.number(_.left,S.left,x)),S.right!=null&&_.right!=null&&(this.right=E.number(_.right,S.right,x)),this},he.prototype.getCenter=function(_,S){var x=E.clamp((this.left+_-this.right)/2,0,_),C=E.clamp((this.top+S-this.bottom)/2,0,S);return new E.Point(x,C)},he.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},he.prototype.clone=function(){return new he(this.top,this.bottom,this.left,this.right)},he.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Fe=function(_,S,x,C,k){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=k===void 0||k,this._minZoom=_||0,this._maxZoom=S||22,this._minPitch=x==null?0:x,this._maxPitch=C==null?60:C,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new he,this._posMatrixCache={},this._alignedPosMatrixCache={}},gt={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Fe.prototype.clone=function(){var _=new Fe(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},gt.minZoom.get=function(){return this._minZoom},gt.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},gt.maxZoom.get=function(){return this._maxZoom},gt.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},gt.minPitch.get=function(){return this._minPitch},gt.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},gt.maxPitch.get=function(){return this._maxPitch},gt.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},gt.renderWorldCopies.get=function(){return this._renderWorldCopies},gt.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},gt.worldSize.get=function(){return this.tileSize*this.scale},gt.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gt.size.get=function(){return new E.Point(this.width,this.height)},gt.bearing.get=function(){return-this.angle/Math.PI*180},gt.bearing.set=function(_){var S=-E.wrap(_,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=E.create$2(),E.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gt.pitch.get=function(){return this._pitch/Math.PI*180},gt.pitch.set=function(_){var S=E.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())},gt.fov.get=function(){return this._fov/Math.PI*180},gt.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},gt.zoom.get=function(){return this._zoom},gt.zoom.set=function(_){var S=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())},gt.center.get=function(){return this._center},gt.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},gt.padding.get=function(){return this._edgeInsets.toJSON()},gt.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},gt.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Fe.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},Fe.prototype.interpolatePadding=function(_,S,x){this._unmodified=!1,this._edgeInsets.interpolate(_,S,x),this._constrain(),this._calcMatrices()},Fe.prototype.coveringZoomLevel=function(_){var S=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,S)},Fe.prototype.getVisibleUnwrappedCoordinates=function(_){var S=[new E.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new E.Point(0,0)),C=this.pointCoordinate(new E.Point(this.width,0)),k=this.pointCoordinate(new E.Point(this.width,this.height)),G=this.pointCoordinate(new E.Point(0,this.height)),K=Math.floor(Math.min(x.x,C.x,k.x,G.x)),de=Math.floor(Math.max(x.x,C.x,k.x,G.x)),Ve=K-1;Ve<=de+1;Ve++)Ve!==0&&S.push(new E.UnwrappedTileID(Ve,_));return S},Fe.prototype.coveringTiles=function(_){var S=this.coveringZoomLevel(_),x=S;if(_.minzoom!==void 0&&S<_.minzoom)return[];_.maxzoom!==void 0&&S>_.maxzoom&&(S=_.maxzoom);var C=E.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,S),G=[k*C.x,k*C.y,0],K=dp.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S),de=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(de=S);var Ve=function(Ii){return{aabb:new bf([Ii*k,0,0],[(Ii+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Ii,fullyVisible:!1}},st=[],Ft=[],jt=S,Xt=_.reparseOverscaled?x:S;if(this._renderWorldCopies)for(var bn=1;bn<=3;bn++)st.push(Ve(-bn)),st.push(Ve(bn));for(st.push(Ve(0));st.length>0;){var vn=st.pop(),zn=vn.x,on=vn.y,Fn=vn.fullyVisible;if(!Fn){var er=vn.aabb.intersects(K);if(er===0)continue;Fn=er===2}var vr=vn.aabb.distanceX(G),Mr=vn.aabb.distanceY(G),wr=Math.max(Math.abs(vr),Math.abs(Mr));if(vn.zoom===jt||wr>3+(1<<jt-vn.zoom)-2&&vn.zoom>=de)Ft.push({tileID:new E.OverscaledTileID(vn.zoom===jt?Xt:vn.zoom,vn.wrap,vn.zoom,zn,on),distanceSq:E.sqrLen([G[0]-.5-zn,G[1]-.5-on])});else for(var Fr=0;Fr<4;Fr++){var ni=(zn<<1)+Fr%2,Bi=(on<<1)+(Fr>>1);st.push({aabb:vn.aabb.quadrant(Fr),zoom:vn.zoom+1,x:ni,y:Bi,wrap:vn.wrap,fullyVisible:Fn})}}return Ft.sort(function(Ii,co){return Ii.distanceSq-co.distanceSq}).map(function(Ii){return Ii.tileID})},Fe.prototype.resize=function(_,S){this.width=_,this.height=S,this.pixelsToGLUnits=[2/_,-2/S],this._constrain(),this._calcMatrices()},gt.unmodified.get=function(){return this._unmodified},Fe.prototype.zoomScale=function(_){return Math.pow(2,_)},Fe.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},Fe.prototype.project=function(_){var S=E.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.Point(E.mercatorXfromLng(_.lng)*this.worldSize,E.mercatorYfromLat(S)*this.worldSize)},Fe.prototype.unproject=function(_){return new E.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},gt.point.get=function(){return this.project(this.center)},Fe.prototype.setLocationAtPoint=function(_,S){var x=this.pointCoordinate(S),C=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(_),G=new E.MercatorCoordinate(k.x-(x.x-C.x),k.y-(x.y-C.y));this.center=this.coordinateLocation(G),this._renderWorldCopies&&(this.center=this.center.wrap())},Fe.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},Fe.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},Fe.prototype.locationCoordinate=function(_){return E.MercatorCoordinate.fromLngLat(_)},Fe.prototype.coordinateLocation=function(_){return _.toLngLat()},Fe.prototype.pointCoordinate=function(_){var S=[_.x,_.y,0,1],x=[_.x,_.y,1,1];E.transformMat4(S,S,this.pixelMatrixInverse),E.transformMat4(x,x,this.pixelMatrixInverse);var C=S[3],k=x[3],G=S[1]/C,K=x[1]/k,de=S[2]/C,Ve=x[2]/k,st=de===Ve?0:(0-de)/(Ve-de);return new E.MercatorCoordinate(E.number(S[0]/C,x[0]/k,st)/this.worldSize,E.number(G,K,st)/this.worldSize)},Fe.prototype.coordinatePoint=function(_){var S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix),new E.Point(S[0]/S[3],S[1]/S[3])},Fe.prototype.getBounds=function(){return new E.LngLatBounds().extend(this.pointLocation(new E.Point(0,0))).extend(this.pointLocation(new E.Point(this.width,0))).extend(this.pointLocation(new E.Point(this.width,this.height))).extend(this.pointLocation(new E.Point(0,this.height)))},Fe.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Fe.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Fe.prototype.calculatePosMatrix=function(_,S){S===void 0&&(S=!1);var x=_.key,C=S?this._alignedPosMatrixCache:this._posMatrixCache;if(C[x])return C[x];var k=_.canonical,G=this.worldSize/this.zoomScale(k.z),K=k.x+Math.pow(2,k.z)*_.wrap,de=E.identity(new Float64Array(16));return E.translate(de,de,[K*G,k.y*G,0]),E.scale(de,de,[G/E.EXTENT,G/E.EXTENT,1]),E.multiply(de,S?this.alignedProjMatrix:this.projMatrix,de),C[x]=new Float32Array(de),C[x]},Fe.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Fe.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,S,x,C,k=-90,G=90,K=-180,de=180,Ve=this.size,st=this._unmodified;if(this.latRange){var Ft=this.latRange;k=E.mercatorYfromLat(Ft[1])*this.worldSize,_=(G=E.mercatorYfromLat(Ft[0])*this.worldSize)-k<Ve.y?Ve.y/(G-k):0}if(this.lngRange){var jt=this.lngRange;K=E.mercatorXfromLng(jt[0])*this.worldSize,S=(de=E.mercatorXfromLng(jt[1])*this.worldSize)-K<Ve.x?Ve.x/(de-K):0}var Xt=this.point,bn=Math.max(S||0,_||0);if(bn)return this.center=this.unproject(new E.Point(S?(de+K)/2:Xt.x,_?(G+k)/2:Xt.y)),this.zoom+=this.scaleZoom(bn),this._unmodified=st,void(this._constraining=!1);if(this.latRange){var vn=Xt.y,zn=Ve.y/2;vn-zn<k&&(C=k+zn),vn+zn>G&&(C=G-zn)}if(this.lngRange){var on=Xt.x,Fn=Ve.x/2;on-Fn<K&&(x=K+Fn),on+Fn>de&&(x=de-Fn)}x===void 0&&C===void 0||(this.center=this.unproject(new E.Point(x!==void 0?x:Xt.x,C!==void 0?C:Xt.y))),this._unmodified=st,this._constraining=!1}},Fe.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var S=Math.PI/2+this._pitch,x=this._fov*(.5+_.y/this.height),C=Math.sin(x)*this.cameraToCenterDistance/Math.sin(E.clamp(Math.PI-S-x,.01,Math.PI-.01)),k=this.point,G=k.x,K=k.y,de=1.01*(Math.cos(Math.PI/2-this._pitch)*C+this.cameraToCenterDistance),Ve=this.height/50,st=new Float64Array(16);E.perspective(st,this._fov,this.width/this.height,Ve,de),st[8]=2*-_.x/this.width,st[9]=2*_.y/this.height,E.scale(st,st,[1,-1,1]),E.translate(st,st,[0,0,-this.cameraToCenterDistance]),E.rotateX(st,st,this._pitch),E.rotateZ(st,st,this.angle),E.translate(st,st,[-G,-K,0]),this.mercatorMatrix=E.scale([],st,[this.worldSize,this.worldSize,this.worldSize]),E.scale(st,st,[1,1,E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=st,this.invProjMatrix=E.invert([],this.projMatrix);var Ft=this.width%2/2,jt=this.height%2/2,Xt=Math.cos(this.angle),bn=Math.sin(this.angle),vn=G-Math.round(G)+Xt*Ft+bn*jt,zn=K-Math.round(K)+Xt*jt+bn*Ft,on=new Float64Array(st);if(E.translate(on,on,[vn>.5?vn-1:vn,zn>.5?zn-1:zn,0]),this.alignedProjMatrix=on,st=E.create(),E.scale(st,st,[this.width/2,-this.height/2,1]),E.translate(st,st,[1,-1,0]),this.labelPlaneMatrix=st,st=E.create(),E.scale(st,st,[1,-1,1]),E.translate(st,st,[-1,-1,0]),E.scale(st,st,[2/this.width,2/this.height,1]),this.glCoordMatrix=st,this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(st=E.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=st,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Fe.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new E.Point(0,0)),S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance},Fe.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.Point(0,_))},Fe.prototype.getCameraQueryGeometry=function(_){var S=this.getCameraPoint();if(_.length===1)return[_[0],S];for(var x=S.x,C=S.y,k=S.x,G=S.y,K=0,de=_;K<de.length;K+=1){var Ve=de[K];x=Math.min(x,Ve.x),C=Math.min(C,Ve.y),k=Math.max(k,Ve.x),G=Math.max(G,Ve.y)}return[new E.Point(x,C),new E.Point(k,C),new E.Point(k,G),new E.Point(x,G),new E.Point(x,C)]},Object.defineProperties(Fe.prototype,gt);var wn=function(_){var S,x,C,k;this._hashName=_&&encodeURIComponent(_),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(S=this._updateHashUnthrottled.bind(this),x=!1,C=null,k=function(){C=null,x&&(S(),C=setTimeout(k,300),x=!1)},function(){return x=!0,C||k(),C})};wn.prototype.addTo=function(_){return this._map=_,E.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},wn.prototype.remove=function(){return E.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},wn.prototype.getHashString=function(_){var S=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,C=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,C),G=Math.round(S.lng*k)/k,K=Math.round(S.lat*k)/k,de=this._map.getBearing(),Ve=this._map.getPitch(),st="";if(st+=_?"/"+G+"/"+K+"/"+x:x+"/"+K+"/"+G,(de||Ve)&&(st+="/"+Math.round(10*de)/10),Ve&&(st+="/"+Math.round(Ve)),this._hashName){var Ft=this._hashName,jt=!1,Xt=E.window.location.hash.slice(1).split("&").map(function(bn){var vn=bn.split("=")[0];return vn===Ft?(jt=!0,vn+"="+st):bn}).filter(function(bn){return bn});return jt||Xt.push(Ft+"="+st),"#"+Xt.join("&")}return"#"+st},wn.prototype._getCurrentHash=function(){var _,S=this,x=E.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(C){return C.split("=")}).forEach(function(C){C[0]===S._hashName&&(_=C)}),(_&&_[1]||"").split("/")):x.split("/")},wn.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(x){return isNaN(x)})){var S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:S,pitch:+(_[4]||0)}),!0}return!1},wn.prototype._updateHashUnthrottled=function(){var _=E.window.location.href.replace(/(#.+)?$/,this.getHashString());try{E.window.history.replaceState(E.window.history.state,null,_)}catch(S){}};var ar={linearity:.3,easing:E.bezier(0,0,.3,1)},zr=E.extend({deceleration:2500,maxSpeed:1400},ar),gi=E.extend({deceleration:20,maxSpeed:1400},ar),Ki=E.extend({deceleration:1e3,maxSpeed:360},ar),ya=E.extend({deceleration:1e3,maxSpeed:90},ar),Ea=function(_){this._map=_,this.clear()};function Es(_,S){(!_.duration||_.duration<S.duration)&&(_.duration=S.duration,_.easing=S.easing)}function Ua(_,S,x){var C=x.maxSpeed,k=x.linearity,G=x.deceleration,K=E.clamp(_*k/(S/1e3),-C,C),de=Math.abs(K)/(G*k);return{easing:x.easing,duration:1e3*de,amount:K*(de/2)}}Ea.prototype.clear=function(){this._inertiaBuffer=[]},Ea.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.browser.now(),settings:_})},Ea.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,S=E.browser.now();_.length>0&&S-_[0].time>160;)_.shift()},Ea.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var S={zoom:0,bearing:0,pitch:0,pan:new E.Point(0,0),pinchAround:void 0,around:void 0},x=0,C=this._inertiaBuffer;x<C.length;x+=1){var k=C[x].settings;S.zoom+=k.zoomDelta||0,S.bearing+=k.bearingDelta||0,S.pitch+=k.pitchDelta||0,k.panDelta&&S.pan._add(k.panDelta),k.around&&(S.around=k.around),k.pinchAround&&(S.pinchAround=k.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,K={};if(S.pan.mag()){var de=Ua(S.pan.mag(),G,E.extend({},zr,_||{}));K.offset=S.pan.mult(de.amount/S.pan.mag()),K.center=this._map.transform.center,Es(K,de)}if(S.zoom){var Ve=Ua(S.zoom,G,gi);K.zoom=this._map.transform.zoom+Ve.amount,Es(K,Ve)}if(S.bearing){var st=Ua(S.bearing,G,Ki);K.bearing=this._map.transform.bearing+E.clamp(st.amount,-179,179),Es(K,st)}if(S.pitch){var Ft=Ua(S.pitch,G,ya);K.pitch=this._map.transform.pitch+Ft.amount,Es(K,Ft)}if(K.zoom||K.bearing){var jt=S.pinchAround===void 0?S.around:S.pinchAround;K.around=jt?this._map.unproject(jt):this._map.getCenter()}return this.clear(),E.extend(K,{noMoveStart:!0})}};var Da=function(_){function S(C,k,G,K){K===void 0&&(K={});var de=te.mousePos(k.getCanvasContainer(),G),Ve=k.unproject(de);_.call(this,C,E.extend({point:de,lngLat:Ve,originalEvent:G},K)),this._defaultPrevented=!1,this.target=k}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Mc=function(_){function S(C,k,G){var K=C==="touchend"?G.changedTouches:G.touches,de=te.touchPos(k.getCanvasContainer(),K),Ve=de.map(function(jt){return k.unproject(jt)}),st=de.reduce(function(jt,Xt,bn,vn){return jt.add(Xt.div(vn.length))},new E.Point(0,0)),Ft=k.unproject(st);_.call(this,C,{points:de,point:st,lngLats:Ve,lngLat:Ft,originalEvent:G}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),of=function(_){function S(C,k,G){_.call(this,C,{originalEvent:G}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),rl=function(_,S){this._map=_,this._clickTolerance=S.clickTolerance};rl.prototype.reset=function(){delete this._mousedownPos},rl.prototype.wheel=function(_){return this._firePreventable(new of(_.type,this._map,_))},rl.prototype.mousedown=function(_,S){return this._mousedownPos=S,this._firePreventable(new Da(_.type,this._map,_))},rl.prototype.mouseup=function(_){this._map.fire(new Da(_.type,this._map,_))},rl.prototype.click=function(_,S){this._mousedownPos&&this._mousedownPos.dist(S)>=this._clickTolerance||this._map.fire(new Da(_.type,this._map,_))},rl.prototype.dblclick=function(_){return this._firePreventable(new Da(_.type,this._map,_))},rl.prototype.mouseover=function(_){this._map.fire(new Da(_.type,this._map,_))},rl.prototype.mouseout=function(_){this._map.fire(new Da(_.type,this._map,_))},rl.prototype.touchstart=function(_){return this._firePreventable(new Mc(_.type,this._map,_))},rl.prototype.touchmove=function(_){this._map.fire(new Mc(_.type,this._map,_))},rl.prototype.touchend=function(_){this._map.fire(new Mc(_.type,this._map,_))},rl.prototype.touchcancel=function(_){this._map.fire(new Mc(_.type,this._map,_))},rl.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},rl.prototype.isEnabled=function(){return!0},rl.prototype.isActive=function(){return!1},rl.prototype.enable=function(){},rl.prototype.disable=function(){};var fo=function(_){this._map=_};fo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},fo.prototype.mousemove=function(_){this._map.fire(new Da(_.type,this._map,_))},fo.prototype.mousedown=function(){this._delayContextMenu=!0},fo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Da("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},fo.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new Da(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},fo.prototype.isEnabled=function(){return!0},fo.prototype.isActive=function(){return!1},fo.prototype.enable=function(){},fo.prototype.disable=function(){};var Yc=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=S.clickTolerance||1};function Nd(_,S){for(var x={},C=0;C<_.length;C++)x[_[C].identifier]=S[C];return x}Yc.prototype.isEnabled=function(){return!!this._enabled},Yc.prototype.isActive=function(){return!!this._active},Yc.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Yc.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yc.prototype.mousedown=function(_,S){this.isEnabled()&&_.shiftKey&&_.button===0&&(te.disableDrag(),this._startPos=this._lastPos=S,this._active=!0)},Yc.prototype.mousemoveWindow=function(_,S){if(this._active){var x=S;if(!(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)){var C=this._startPos;this._lastPos=x,this._box||(this._box=te.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var k=Math.min(C.x,x.x),G=Math.max(C.x,x.x),K=Math.min(C.y,x.y),de=Math.max(C.y,x.y);te.setTransform(this._box,"translate("+k+"px,"+K+"px)"),this._box.style.width=G-k+"px",this._box.style.height=de-K+"px"}}},Yc.prototype.mouseupWindow=function(_,S){var x=this;if(this._active&&_.button===0){var C=this._startPos,k=S;if(this.reset(),te.suppressClick(),C.x!==k.x||C.y!==k.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(G){return G.fitScreenCoordinates(C,k,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},Yc.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},Yc.prototype.blur=function(){this.reset()},Yc.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(te.remove(this._box),this._box=null),te.enableDrag(),delete this._startPos,delete this._lastPos},Yc.prototype._fireEvent=function(_,S){return this._map.fire(new E.Event(_,{originalEvent:S}))};var Oh=function(_){this.reset(),this.numTouches=_.numTouches};Oh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Oh.prototype.touchstart=function(_,S,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),x.length===this.numTouches&&(this.centroid=function(C){for(var k=new E.Point(0,0),G=0,K=C;G<K.length;G+=1)k._add(K[G]);return k.div(C.length)}(S),this.touches=Nd(x,S)))},Oh.prototype.touchmove=function(_,S,x){if(!this.aborted&&this.centroid){var C=Nd(x,S);for(var k in this.touches){var G=C[k];(!G||G.dist(this.touches[k])>30)&&(this.aborted=!0)}}},Oh.prototype.touchend=function(_,S,x){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){var C=!this.aborted&&this.centroid;if(this.reset(),C)return C}};var Ma=function(_){this.singleTap=new Oh(_),this.numTaps=_.numTaps,this.reset()};Ma.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ma.prototype.touchstart=function(_,S,x){this.singleTap.touchstart(_,S,x)},Ma.prototype.touchmove=function(_,S,x){this.singleTap.touchmove(_,S,x)},Ma.prototype.touchend=function(_,S,x){var C=this.singleTap.touchend(_,S,x);if(C){var k=_.timeStamp-this.lastTime<500,G=!this.lastTap||this.lastTap.dist(C)<30;if(k&&G||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}};var as=function(){this._zoomIn=new Ma({numTouches:1,numTaps:2}),this._zoomOut=new Ma({numTouches:2,numTaps:1}),this.reset()};as.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},as.prototype.touchstart=function(_,S,x){this._zoomIn.touchstart(_,S,x),this._zoomOut.touchstart(_,S,x)},as.prototype.touchmove=function(_,S,x){this._zoomIn.touchmove(_,S,x),this._zoomOut.touchmove(_,S,x)},as.prototype.touchend=function(_,S,x){var C=this,k=this._zoomIn.touchend(_,S,x),G=this._zoomOut.touchend(_,S,x);return k?(this._active=!0,_.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()+1,around:K.unproject(k)},{originalEvent:_})}}):G?(this._active=!0,_.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()-1,around:K.unproject(G)},{originalEvent:_})}}):void 0},as.prototype.touchcancel=function(){this.reset()},as.prototype.enable=function(){this._enabled=!0},as.prototype.disable=function(){this._enabled=!1,this.reset()},as.prototype.isEnabled=function(){return this._enabled},as.prototype.isActive=function(){return this._active};var x0={0:1,2:2},Zi=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Zi.prototype.blur=function(){this.reset()},Zi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Zi.prototype._correctButton=function(_,S){return!1},Zi.prototype._move=function(_,S){return{}},Zi.prototype.mousedown=function(_,S){if(!this._lastPoint){var x=te.mouseButton(_);this._correctButton(_,x)&&(this._lastPoint=S,this._eventButton=x)}},Zi.prototype.mousemoveWindow=function(_,S){var x=this._lastPoint;if(x){if(_.preventDefault(),function(C,k){var G=x0[k];return C.buttons===void 0||(C.buttons&G)!==G}(_,this._eventButton))this.reset();else if(this._moved||!(S.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=S,this._move(x,S)}},Zi.prototype.mouseupWindow=function(_){this._lastPoint&&te.mouseButton(_)===this._eventButton&&(this._moved&&te.suppressClick(),this.reset())},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var xf=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.mousedown=function(x,C){_.prototype.mousedown.call(this,x,C),this._lastPoint&&(this._active=!0)},S.prototype._correctButton=function(x,C){return C===0&&!x.ctrlKey},S.prototype._move=function(x,C){return{around:C,panDelta:C.sub(x)}},S}(Zi),Bd=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,C){return C===0&&x.ctrlKey||C===2},S.prototype._move=function(x,C){var k=.8*(C.x-x.x);if(k)return this._active=!0,{bearingDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Zi),Rh=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,C){return C===0&&x.ctrlKey||C===2},S.prototype._move=function(x,C){var k=-.5*(C.y-x.y);if(k)return this._active=!0,{pitchDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Zi),Ef=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Ef.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new E.Point(0,0)},Ef.prototype.touchstart=function(_,S,x){return this._calculateTransform(_,S,x)},Ef.prototype.touchmove=function(_,S,x){if(this._active&&!(x.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,S,x)},Ef.prototype.touchend=function(_,S,x){this._calculateTransform(_,S,x),this._active&&x.length<this._minTouches&&this.reset()},Ef.prototype.touchcancel=function(){this.reset()},Ef.prototype._calculateTransform=function(_,S,x){x.length>0&&(this._active=!0);var C=Nd(x,S),k=new E.Point(0,0),G=new E.Point(0,0),K=0;for(var de in C){var Ve=C[de],st=this._touches[de];st&&(k._add(Ve),G._add(Ve.sub(st)),K++,C[de]=Ve)}if(this._touches=C,!(K<this._minTouches)&&G.mag()){var Ft=G.div(K);if(this._sum._add(Ft),!(this._sum.mag()<this._clickTolerance))return{around:k.div(K),panDelta:Ft}}},Ef.prototype.enable=function(){this._enabled=!0},Ef.prototype.disable=function(){this._enabled=!1,this.reset()},Ef.prototype.isEnabled=function(){return this._enabled},Ef.prototype.isActive=function(){return this._active};var hu=function(){this.reset()};function E0(_,S,x){for(var C=0;C<_.length;C++)if(_[C].identifier===x)return S[C]}function Mh(_,S){return Math.log(_/S)/Math.LN2}hu.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},hu.prototype._start=function(_){},hu.prototype._move=function(_,S,x){return{}},hu.prototype.touchstart=function(_,S,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([S[0],S[1]]))},hu.prototype.touchmove=function(_,S,x){if(this._firstTwoTouches){_.preventDefault();var C=this._firstTwoTouches,k=C[1],G=E0(x,S,C[0]),K=E0(x,S,k);if(G&&K){var de=this._aroundCenter?null:G.add(K).div(2);return this._move([G,K],de,_)}}},hu.prototype.touchend=function(_,S,x){if(this._firstTwoTouches){var C=this._firstTwoTouches,k=C[1],G=E0(x,S,C[0]),K=E0(x,S,k);G&&K||(this._active&&te.suppressClick(),this.reset())}},hu.prototype.touchcancel=function(){this.reset()},hu.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},hu.prototype.disable=function(){this._enabled=!1,this.reset()},hu.prototype.isEnabled=function(){return this._enabled},hu.prototype.isActive=function(){return this._active};var Kc=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},S.prototype._start=function(x){this._startDistance=this._distance=x[0].dist(x[1])},S.prototype._move=function(x,C){var k=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(Mh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mh(this._distance,k),pinchAround:C}},S}(hu);function rh(_,S){return 180*_.angleWith(S)/Math.PI}var S0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},S.prototype._start=function(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])},S.prototype._move=function(x,C){var k=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rh(this._vector,k),pinchAround:C}},S.prototype._isBelowThreshold=function(x){this._minDiameter=Math.min(this._minDiameter,x.mag());var C=25/(Math.PI*this._minDiameter)*360,k=rh(x,this._startVector);return Math.abs(k)<C},S}(hu);function Fd(_){return Math.abs(_.y)>Math.abs(_.x)}var T0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},S.prototype._start=function(x){this._lastPoints=x,Fd(x[0].sub(x[1]))&&(this._valid=!1)},S.prototype._move=function(x,C,k){var G=x[0].sub(this._lastPoints[0]),K=x[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(G,K,k.timeStamp),this._valid)return this._lastPoints=x,this._active=!0,{pitchDelta:(G.y+K.y)/2*-.5}},S.prototype.gestureBeginsVertically=function(x,C,k){if(this._valid!==void 0)return this._valid;var G=x.mag()>=2,K=C.mag()>=2;if(G||K){if(!G||!K)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;var de=x.y>0==C.y>0;return Fd(x)&&Fd(C)&&de}},S}(hu),sv={panStep:100,bearingStep:15,pitchStep:10},du=function(){var _=sv;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function ju(_){return _*(2-_)}du.prototype.blur=function(){this.reset()},du.prototype.reset=function(){this._active=!1},du.prototype.keydown=function(_){var S=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var x=0,C=0,k=0,G=0,K=0;switch(_.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:_.shiftKey?C=-1:(_.preventDefault(),G=-1);break;case 39:_.shiftKey?C=1:(_.preventDefault(),G=1);break;case 38:_.shiftKey?k=1:(_.preventDefault(),K=-1);break;case 40:_.shiftKey?k=-1:(_.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(C=0,k=0),{cameraAnimation:function(de){var Ve=de.getZoom();de.easeTo({duration:300,easeId:"keyboardHandler",easing:ju,zoom:x?Math.round(Ve)+x*(_.shiftKey?2:1):Ve,bearing:de.getBearing()+C*S._bearingStep,pitch:de.getPitch()+k*S._pitchStep,offset:[-G*S._panStep,-K*S._panStep],center:de.getCenter()},{originalEvent:_})}}}},du.prototype.enable=function(){this._enabled=!0},du.prototype.disable=function(){this._enabled=!1,this.reset()},du.prototype.isEnabled=function(){return this._enabled},du.prototype.isActive=function(){return this._active},du.prototype.disableRotation=function(){this._rotationDisabled=!0},du.prototype.enableRotation=function(){this._rotationDisabled=!1};var Sa=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._handler=S,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,E.bindAll(["_onTimeout"],this)};Sa.prototype.setZoomRate=function(_){this._defaultZoomRate=_},Sa.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},Sa.prototype.isEnabled=function(){return!!this._enabled},Sa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Sa.prototype.isZooming=function(){return!!this._zooming},Sa.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},Sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Sa.prototype.wheel=function(_){if(this.isEnabled()){var S=_.deltaMode===E.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,x=E.browser.now(),C=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,S!==0&&S%4.000244140625==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(C*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),_.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=_,this._delta-=S,this._active||this._start(_)),_.preventDefault()}},Sa.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},Sa.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var S=te.mousePos(this._el,_);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Sa.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var S=this._map.transform;if(this._delta!==0){var x=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&C!==0&&(C=1/C);var k=typeof this._targetZoom=="number"?S.zoomScale(this._targetZoom):S.scale;this._targetZoom=Math.min(S.maxZoom,Math.max(S.minZoom,S.scaleZoom(k*C))),this._type==="wheel"&&(this._startZoom=S.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var G,K=typeof this._targetZoom=="number"?this._targetZoom:S.zoom,de=this._startZoom,Ve=this._easing,st=!1;if(this._type==="wheel"&&de&&Ve){var Ft=Math.min((E.browser.now()-this._lastWheelEventTime)/200,1),jt=Ve(Ft);G=E.number(de,K,jt),Ft<1?this._frameId||(this._frameId=!0):st=!0}else G=K,st=!0;return this._active=!0,st&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!st,zoomDelta:G-S.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Sa.prototype._smoothOutEasing=function(_){var S=E.ease;if(this._prevEase){var x=this._prevEase,C=(E.browser.now()-x.start)/x.duration,k=x.easing(C+.01)-x.easing(C),G=.27/Math.sqrt(k*k+1e-4)*.01,K=Math.sqrt(.0729-G*G);S=E.bezier(G,K,.25,1)}return this._prevEase={start:E.browser.now(),duration:_,easing:S},S},Sa.prototype.blur=function(){this.reset()},Sa.prototype.reset=function(){this._active=!1};var pu=function(_,S){this._clickZoom=_,this._tapZoom=S};pu.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},pu.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},pu.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},pu.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var af=function(){this.reset()};af.prototype.reset=function(){this._active=!1},af.prototype.blur=function(){this.reset()},af.prototype.dblclick=function(_,S){return _.preventDefault(),{cameraAnimation:function(x){x.easeTo({duration:300,zoom:x.getZoom()+(_.shiftKey?-1:1),around:x.unproject(S)},{originalEvent:_})}}},af.prototype.enable=function(){this._enabled=!0},af.prototype.disable=function(){this._enabled=!1,this.reset()},af.prototype.isEnabled=function(){return this._enabled},af.prototype.isActive=function(){return this._active};var mc=function(){this._tap=new Ma({numTouches:1,numTaps:1}),this.reset()};mc.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},mc.prototype.touchstart=function(_,S,x){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=S[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(_,S,x))},mc.prototype.touchmove=function(_,S,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;var C=S[0],k=C.y-this._swipePoint.y;return this._swipePoint=C,_.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(_,S,x)},mc.prototype.touchend=function(_,S,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(_,S,x)&&(this._tapTime=_.timeStamp)},mc.prototype.touchcancel=function(){this.reset()},mc.prototype.enable=function(){this._enabled=!0},mc.prototype.disable=function(){this._enabled=!1,this.reset()},mc.prototype.isEnabled=function(){return this._enabled},mc.prototype.isActive=function(){return this._active};var Kh=function(_,S,x){this._el=_,this._mousePan=S,this._touchPan=x};Kh.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Kh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Kh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Kh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ql=function(_,S,x){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=S,this._mousePitch=x};Ql.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ql.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ql.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ql.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Vc=function(_,S,x,C){this._el=_,this._touchZoom=S,this._touchRotate=x,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0};Vc.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Vc.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Vc.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Vc.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Vc.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Vc.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var qc=function(_){return _.zoom||_.drag||_.pitch||_.rotate},pp=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S}(E.Event);function Bo(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var Eo=function(_,S){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ea(_),this._bearingSnap=S.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(S),E.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[E.window.document,"mousemove",{capture:!0}],[E.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[E.window,"blur",void 0]];for(var C=0,k=this._listeners;C<k.length;C+=1){var G=k[C],K=G[0];te.addEventListener(K,G[1],K===E.window.document?this.handleWindowEvent:this.handleEvent,G[2])}};Eo.prototype.destroy=function(){for(var _=0,S=this._listeners;_<S.length;_+=1){var x=S[_],C=x[0];te.removeEventListener(C,x[1],C===E.window.document?this.handleWindowEvent:this.handleEvent,x[2])}},Eo.prototype._addDefaultHandlers=function(_){var S=this._map,x=S.getCanvasContainer();this._add("mapEvent",new rl(S,_));var C=S.boxZoom=new Yc(S,_);this._add("boxZoom",C);var k=new as,G=new af;S.doubleClickZoom=new pu(G,k),this._add("tapZoom",k),this._add("clickZoom",G);var K=new mc;this._add("tapDragZoom",K);var de=S.touchPitch=new T0;this._add("touchPitch",de);var Ve=new Bd(_),st=new Rh(_);S.dragRotate=new Ql(_,Ve,st),this._add("mouseRotate",Ve,["mousePitch"]),this._add("mousePitch",st,["mouseRotate"]);var Ft=new xf(_),jt=new Ef(_);S.dragPan=new Kh(x,Ft,jt),this._add("mousePan",Ft),this._add("touchPan",jt,["touchZoom","touchRotate"]);var Xt=new S0,bn=new Kc;S.touchZoomRotate=new Vc(x,bn,Xt,K),this._add("touchRotate",Xt,["touchPan","touchZoom"]),this._add("touchZoom",bn,["touchPan","touchRotate"]);var vn=S.scrollZoom=new Sa(S,this);this._add("scrollZoom",vn,["mousePan"]);var zn=S.keyboard=new du;this._add("keyboard",zn),this._add("blockableMapEvent",new fo(S));for(var on=0,Fn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];on<Fn.length;on+=1){var er=Fn[on];_.interactive&&_[er]&&S[er].enable(_[er])}},Eo.prototype._add=function(_,S,x){this._handlers.push({handlerName:_,handler:S,allowed:x}),this._handlersById[_]=S},Eo.prototype.stop=function(_){if(!this._updatingCamera){for(var S=0,x=this._handlers;S<x.length;S+=1)x[S].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},Eo.prototype.isActive=function(){for(var _=0,S=this._handlers;_<S.length;_+=1)if(S[_].handler.isActive())return!0;return!1},Eo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Eo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Eo.prototype.isMoving=function(){return!!qc(this._eventsInProgress)||this.isZooming()},Eo.prototype._blockedByActive=function(_,S,x){for(var C in _)if(C!==x&&(!S||S.indexOf(C)<0))return!0;return!1},Eo.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},Eo.prototype._getMapTouches=function(_){for(var S=[],x=0,C=_;x<C.length;x+=1){var k=C[x];this._el.contains(k.target)&&S.push(k)}return S},Eo.prototype.handleEvent=function(_,S){this._updatingCamera=!0;for(var x=_.type==="renderFrame"?void 0:_,C={needsRenderFrame:!1},k={},G={},K=_.touches?this._getMapTouches(_.touches):void 0,de=K?te.touchPos(this._el,K):te.mousePos(this._el,_),Ve=0,st=this._handlers;Ve<st.length;Ve+=1){var Ft=st[Ve],jt=Ft.handlerName,Xt=Ft.handler,bn=Ft.allowed;if(Xt.isEnabled()){var vn=void 0;this._blockedByActive(G,bn,jt)?Xt.reset():Xt[S||_.type]&&(vn=Xt[S||_.type](_,de,K),this.mergeHandlerResult(C,k,vn,jt,x),vn&&vn.needsRenderFrame&&this._triggerRenderFrame()),(vn||Xt.isActive())&&(G[jt]=Xt)}}var zn={};for(var on in this._previousActiveHandlers)G[on]||(zn[on]=x);this._previousActiveHandlers=G,(Object.keys(zn).length||Bo(C))&&(this._changes.push([C,k,zn]),this._triggerRenderFrame()),(Object.keys(G).length||Bo(C))&&this._map._stop(!0),this._updatingCamera=!1;var Fn=C.cameraAnimation;Fn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fn(this._map))},Eo.prototype.mergeHandlerResult=function(_,S,x,C,k){if(x){E.extend(_,x);var G={handlerName:C,originalEvent:x.originalEvent||k};x.zoomDelta!==void 0&&(S.zoom=G),x.panDelta!==void 0&&(S.drag=G),x.pitchDelta!==void 0&&(S.pitch=G),x.bearingDelta!==void 0&&(S.rotate=G)}},Eo.prototype._applyChanges=function(){for(var _={},S={},x={},C=0,k=this._changes;C<k.length;C+=1){var G=k[C],K=G[0],de=G[1],Ve=G[2];K.panDelta&&(_.panDelta=(_.panDelta||new E.Point(0,0))._add(K.panDelta)),K.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+K.zoomDelta),K.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+K.bearingDelta),K.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+K.pitchDelta),K.around!==void 0&&(_.around=K.around),K.pinchAround!==void 0&&(_.pinchAround=K.pinchAround),K.noInertia&&(_.noInertia=K.noInertia),E.extend(S,de),E.extend(x,Ve)}this._updateMapTransform(_,S,x),this._changes=[]},Eo.prototype._updateMapTransform=function(_,S,x){var C=this._map,k=C.transform;if(!Bo(_))return this._fireEvents(S,x,!0);var G=_.panDelta,K=_.zoomDelta,de=_.bearingDelta,Ve=_.pitchDelta,st=_.around,Ft=_.pinchAround;Ft!==void 0&&(st=Ft),C._stop(!0),st=st||C.transform.centerPoint;var jt=k.pointLocation(G?st.sub(G):st);de&&(k.bearing+=de),Ve&&(k.pitch+=Ve),K&&(k.zoom+=K),k.setLocationAtPoint(jt,st),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(S,x,!0)},Eo.prototype._fireEvents=function(_,S,x){var C=this,k=qc(this._eventsInProgress),G=qc(_),K={};for(var de in _)this._eventsInProgress[de]||(K[de+"start"]=_[de].originalEvent),this._eventsInProgress[de]=_[de];for(var Ve in!k&&G&&this._fireEvent("movestart",G.originalEvent),K)this._fireEvent(Ve,K[Ve]);for(var st in G&&this._fireEvent("move",G.originalEvent),_)this._fireEvent(st,_[st].originalEvent);var Ft,jt={};for(var Xt in this._eventsInProgress){var bn=this._eventsInProgress[Xt],vn=bn.handlerName,zn=bn.originalEvent;this._handlersById[vn].isActive()||(delete this._eventsInProgress[Xt],jt[Xt+"end"]=Ft=S[vn]||zn)}for(var on in jt)this._fireEvent(on,jt[on]);var Fn=qc(this._eventsInProgress);if(x&&(k||G)&&!Fn){this._updatingCamera=!0;var er=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),vr=function(Mr){return Mr!==0&&-C._bearingSnap<Mr&&Mr<C._bearingSnap};er?(vr(er.bearing||this._map.getBearing())&&(er.bearing=0),this._map.easeTo(er,{originalEvent:Ft})):(this._map.fire(new E.Event("moveend",{originalEvent:Ft})),vr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Eo.prototype._fireEvent=function(_,S){this._map.fire(new E.Event(_,S?{originalEvent:S}:{}))},Eo.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(S){delete _._frameId,_.handleEvent(new pp("renderFrame",{timeStamp:S})),_._applyChanges()})},Eo.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Jl=function(_){function S(x,C){_.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=C.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getCenter=function(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)},S.prototype.setCenter=function(x,C){return this.jumpTo({center:x},C)},S.prototype.panBy=function(x,C,k){return x=E.Point.convert(x).mult(-1),this.panTo(this.transform.center,E.extend({offset:x},C),k)},S.prototype.panTo=function(x,C,k){return this.easeTo(E.extend({center:x},C),k)},S.prototype.getZoom=function(){return this.transform.zoom},S.prototype.setZoom=function(x,C){return this.jumpTo({zoom:x},C),this},S.prototype.zoomTo=function(x,C,k){return this.easeTo(E.extend({zoom:x},C),k)},S.prototype.zoomIn=function(x,C){return this.zoomTo(this.getZoom()+1,x,C),this},S.prototype.zoomOut=function(x,C){return this.zoomTo(this.getZoom()-1,x,C),this},S.prototype.getBearing=function(){return this.transform.bearing},S.prototype.setBearing=function(x,C){return this.jumpTo({bearing:x},C),this},S.prototype.getPadding=function(){return this.transform.padding},S.prototype.setPadding=function(x,C){return this.jumpTo({padding:x},C),this},S.prototype.rotateTo=function(x,C,k){return this.easeTo(E.extend({bearing:x},C),k)},S.prototype.resetNorth=function(x,C){return this.rotateTo(0,E.extend({duration:1e3},x),C),this},S.prototype.resetNorthPitch=function(x,C){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},x),C),this},S.prototype.snapToNorth=function(x,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,C):this},S.prototype.getPitch=function(){return this.transform.pitch},S.prototype.setPitch=function(x,C){return this.jumpTo({pitch:x},C),this},S.prototype.cameraForBounds=function(x,C){x=E.LngLatBounds.convert(x);var k=C&&C.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),k,C)},S.prototype._cameraForBoxAndBearing=function(x,C,k,G){var K={top:0,bottom:0,right:0,left:0};if(typeof(G=E.extend({padding:K,offset:[0,0],maxZoom:this.transform.maxZoom},G)).padding=="number"){var de=G.padding;G.padding={top:de,bottom:de,right:de,left:de}}G.padding=E.extend(K,G.padding);var Ve=this.transform,st=Ve.padding,Ft=Ve.project(E.LngLat.convert(x)),jt=Ve.project(E.LngLat.convert(C)),Xt=Ft.rotate(-k*Math.PI/180),bn=jt.rotate(-k*Math.PI/180),vn=new E.Point(Math.max(Xt.x,bn.x),Math.max(Xt.y,bn.y)),zn=new E.Point(Math.min(Xt.x,bn.x),Math.min(Xt.y,bn.y)),on=vn.sub(zn),Fn=(Ve.width-(st.left+st.right+G.padding.left+G.padding.right))/on.x,er=(Ve.height-(st.top+st.bottom+G.padding.top+G.padding.bottom))/on.y;if(!(er<0||Fn<0)){var vr=Math.min(Ve.scaleZoom(Ve.scale*Math.min(Fn,er)),G.maxZoom),Mr=typeof G.offset.x=="number"?new E.Point(G.offset.x,G.offset.y):E.Point.convert(G.offset),wr=new E.Point((G.padding.left-G.padding.right)/2,(G.padding.top-G.padding.bottom)/2).rotate(k*Math.PI/180),Fr=Mr.add(wr).mult(Ve.scale/Ve.zoomScale(vr));return{center:Ve.unproject(Ft.add(jt).div(2).sub(Fr)),zoom:vr,bearing:k}}E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},S.prototype.fitBounds=function(x,C,k){return this._fitInternal(this.cameraForBounds(x,C),C,k)},S.prototype.fitScreenCoordinates=function(x,C,k,G,K){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.Point.convert(x)),this.transform.pointLocation(E.Point.convert(C)),k,G),G,K)},S.prototype._fitInternal=function(x,C,k){return x?(delete(C=E.extend(x,C)).padding,C.linear?this.easeTo(C,k):this.flyTo(C,k)):this},S.prototype.jumpTo=function(x,C){this.stop();var k=this.transform,G=!1,K=!1,de=!1;return"zoom"in x&&k.zoom!==+x.zoom&&(G=!0,k.zoom=+x.zoom),x.center!==void 0&&(k.center=E.LngLat.convert(x.center)),"bearing"in x&&k.bearing!==+x.bearing&&(K=!0,k.bearing=+x.bearing),"pitch"in x&&k.pitch!==+x.pitch&&(de=!0,k.pitch=+x.pitch),x.padding==null||k.isPaddingEqual(x.padding)||(k.padding=x.padding),this.fire(new E.Event("movestart",C)).fire(new E.Event("move",C)),G&&this.fire(new E.Event("zoomstart",C)).fire(new E.Event("zoom",C)).fire(new E.Event("zoomend",C)),K&&this.fire(new E.Event("rotatestart",C)).fire(new E.Event("rotate",C)).fire(new E.Event("rotateend",C)),de&&this.fire(new E.Event("pitchstart",C)).fire(new E.Event("pitch",C)).fire(new E.Event("pitchend",C)),this.fire(new E.Event("moveend",C))},S.prototype.easeTo=function(x,C){var k=this;this._stop(!1,x.easeId),((x=E.extend({offset:[0,0],duration:500,easing:E.ease},x)).animate===!1||!x.essential&&E.browser.prefersReducedMotion)&&(x.duration=0);var G=this.transform,K=this.getZoom(),de=this.getBearing(),Ve=this.getPitch(),st=this.getPadding(),Ft="zoom"in x?+x.zoom:K,jt="bearing"in x?this._normalizeBearing(x.bearing,de):de,Xt="pitch"in x?+x.pitch:Ve,bn="padding"in x?x.padding:G.padding,vn=E.Point.convert(x.offset),zn=G.centerPoint.add(vn),on=G.pointLocation(zn),Fn=E.LngLat.convert(x.center||on);this._normalizeCenter(Fn);var er,vr,Mr=G.project(on),wr=G.project(Fn).sub(Mr),Fr=G.zoomScale(Ft-K);x.around&&(er=E.LngLat.convert(x.around),vr=G.locationPoint(er));var ni={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ft!==K,this._rotating=this._rotating||de!==jt,this._pitching=this._pitching||Xt!==Ve,this._padding=!G.isPaddingEqual(bn),this._easeId=x.easeId,this._prepareEase(C,x.noMoveStart,ni),this._ease(function(Bi){if(k._zooming&&(G.zoom=E.number(K,Ft,Bi)),k._rotating&&(G.bearing=E.number(de,jt,Bi)),k._pitching&&(G.pitch=E.number(Ve,Xt,Bi)),k._padding&&(G.interpolatePadding(st,bn,Bi),zn=G.centerPoint.add(vn)),er)G.setLocationAtPoint(er,vr);else{var Ii=G.zoomScale(G.zoom-K),co=Ft>K?Math.min(2,Fr):Math.max(.5,Fr),Uo=Math.pow(co,1-Bi),Go=G.unproject(Mr.add(wr.mult(Bi*Uo)).mult(Ii));G.setLocationAtPoint(G.renderWorldCopies?Go.wrap():Go,zn)}k._fireMoveEvents(C)},function(Bi){k._afterEase(C,Bi)},x),this},S.prototype._prepareEase=function(x,C,k){k===void 0&&(k={}),this._moving=!0,C||k.moving||this.fire(new E.Event("movestart",x)),this._zooming&&!k.zooming&&this.fire(new E.Event("zoomstart",x)),this._rotating&&!k.rotating&&this.fire(new E.Event("rotatestart",x)),this._pitching&&!k.pitching&&this.fire(new E.Event("pitchstart",x))},S.prototype._fireMoveEvents=function(x){this.fire(new E.Event("move",x)),this._zooming&&this.fire(new E.Event("zoom",x)),this._rotating&&this.fire(new E.Event("rotate",x)),this._pitching&&this.fire(new E.Event("pitch",x))},S.prototype._afterEase=function(x,C){if(!this._easeId||!C||this._easeId!==C){delete this._easeId;var k=this._zooming,G=this._rotating,K=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new E.Event("zoomend",x)),G&&this.fire(new E.Event("rotateend",x)),K&&this.fire(new E.Event("pitchend",x)),this.fire(new E.Event("moveend",x))}},S.prototype.flyTo=function(x,C){var k=this;if(!x.essential&&E.browser.prefersReducedMotion){var G=E.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(G,C)}this.stop(),x=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},x);var K=this.transform,de=this.getZoom(),Ve=this.getBearing(),st=this.getPitch(),Ft=this.getPadding(),jt="zoom"in x?E.clamp(+x.zoom,K.minZoom,K.maxZoom):de,Xt="bearing"in x?this._normalizeBearing(x.bearing,Ve):Ve,bn="pitch"in x?+x.pitch:st,vn="padding"in x?x.padding:K.padding,zn=K.zoomScale(jt-de),on=E.Point.convert(x.offset),Fn=K.centerPoint.add(on),er=K.pointLocation(Fn),vr=E.LngLat.convert(x.center||er);this._normalizeCenter(vr);var Mr=K.project(er),wr=K.project(vr).sub(Mr),Fr=x.curve,ni=Math.max(K.width,K.height),Bi=ni/zn,Ii=wr.mag();if("minZoom"in x){var co=E.clamp(Math.min(x.minZoom,de,jt),K.minZoom,K.maxZoom),Uo=ni/K.zoomScale(co-de);Fr=Math.sqrt(Uo/Ii*2)}var Go=Fr*Fr;function Zo(sa){var Fo=(Bi*Bi-ni*ni+(sa?-1:1)*Go*Go*Ii*Ii)/(2*(sa?Bi:ni)*Go*Ii);return Math.log(Math.sqrt(Fo*Fo+1)-Fo)}function fs(sa){return(Math.exp(sa)-Math.exp(-sa))/2}function Cr(sa){return(Math.exp(sa)+Math.exp(-sa))/2}var Jt=Zo(0),ma=function(sa){return Cr(Jt)/Cr(Jt+Fr*sa)},fa=function(sa){return ni*((Cr(Jt)*(fs(Fo=Jt+Fr*sa)/Cr(Fo))-fs(Jt))/Go)/Ii;var Fo},Qo=(Zo(1)-Jt)/Fr;if(Math.abs(Ii)<1e-6||!isFinite(Qo)){if(Math.abs(ni-Bi)<1e-6)return this.easeTo(x,C);var ba=Bi<ni?-1:1;Qo=Math.abs(Math.log(Bi/ni))/Fr,fa=function(){return 0},ma=function(sa){return Math.exp(ba*Fr*sa)}}return x.duration="duration"in x?+x.duration:1e3*Qo/("screenSpeed"in x?+x.screenSpeed/Fr:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=Ve!==Xt,this._pitching=bn!==st,this._padding=!K.isPaddingEqual(vn),this._prepareEase(C,!1),this._ease(function(sa){var Fo=sa*Qo,lc=1/ma(Fo);K.zoom=sa===1?jt:de+K.scaleZoom(lc),k._rotating&&(K.bearing=E.number(Ve,Xt,sa)),k._pitching&&(K.pitch=E.number(st,bn,sa)),k._padding&&(K.interpolatePadding(Ft,vn,sa),Fn=K.centerPoint.add(on));var xl=sa===1?vr:K.unproject(Mr.add(wr.mult(fa(Fo))).mult(lc));K.setLocationAtPoint(K.renderWorldCopies?xl.wrap():xl,Fn),k._fireMoveEvents(C)},function(){return k._afterEase(C)},x),this},S.prototype.isEasing=function(){return!!this._easeFrameId},S.prototype.stop=function(){return this._stop()},S.prototype._stop=function(x,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,C)}if(!x){var G=this.handlers;G&&G.stop(!1)}return this},S.prototype._ease=function(x,C,k){k.animate===!1||k.duration===0?(x(1),C()):(this._easeStart=E.browser.now(),this._easeOptions=k,this._onEaseFrame=x,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},S.prototype._renderFrameCallback=function(){var x=Math.min((E.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},S.prototype._normalizeBearing=function(x,C){x=E.wrap(x,-180,180);var k=Math.abs(x-C);return Math.abs(x-360-C)<k&&(x-=360),Math.abs(x+360-C)<k&&(x+=360),x},S.prototype._normalizeCenter=function(x){var C=this.transform;if(C.renderWorldCopies&&!C.lngRange){var k=x.lng-C.center.lng;x.lng+=k>180?-360:k<-180?360:0}},S}(E.Evented),Qc=function(_){_===void 0&&(_={}),this.options=_,E.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Qc.prototype.getDefaultPosition=function(){return"bottom-right"},Qc.prototype.onAdd=function(_){var S=this.options&&this.options.compact;return this._map=_,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=te.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=te.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),S&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),S===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qc.prototype.onRemove=function(){te.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qc.prototype._setElementTitle=function(_,S){var x=this._map._getUIString("AttributionControl."+S);_.title=x,_.setAttribute("aria-label",x)},Qc.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Qc.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var S=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||E.config.ACCESS_TOKEN}];if(_){var x=S.reduce(function(C,k,G){return k.value&&(C+=k.key+"="+k.value+(G<S.length-1?"&":"")),C},"?");_.href=E.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},Qc.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Qc.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(de){return typeof de!="string"?"":de})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}var x=this._map.style.sourceCaches;for(var C in x){var k=x[C];if(k.used){var G=k.getSource();G.attribution&&_.indexOf(G.attribution)<0&&_.push(G.attribution)}}_.sort(function(de,Ve){return de.length-Ve.length});var K=(_=_.filter(function(de,Ve){for(var st=Ve+1;st<_.length;st++)if(_[st].indexOf(de)>=0)return!1;return!0})).join(" | ");K!==this._attribHTML&&(this._attribHTML=K,_.length?(this._innerContainer.innerHTML=K,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qc.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Jc=function(){E.bindAll(["_updateLogo"],this),E.bindAll(["_updateCompact"],this)};Jc.prototype.onAdd=function(_){this._map=_,this._container=te.create("div","mapboxgl-ctrl");var S=te.create("a","mapboxgl-ctrl-logo");return S.target="_blank",S.rel="noopener nofollow",S.href="https://www.mapbox.com/",S.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),S.setAttribute("rel","noopener nofollow"),this._container.appendChild(S),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Jc.prototype.onRemove=function(){te.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Jc.prototype.getDefaultPosition=function(){return"bottom-left"},Jc.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Jc.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var S in _)if(_[S].getSource().mapbox_logo)return!0;return!1}},Jc.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var S=_[0];this._map.getCanvasContainer().offsetWidth<250?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact")}};var hl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};hl.prototype.add=function(_){var S=++this._id;return this._queue.push({callback:_,id:S,cancelled:!1}),S},hl.prototype.remove=function(_){for(var S=this._currentlyRunning,x=0,C=S?this._queue.concat(S):this._queue;x<C.length;x+=1){var k=C[x];if(k.id===_)return void(k.cancelled=!0)}},hl.prototype.run=function(_){_===void 0&&(_=0);var S=this._currentlyRunning=this._queue;this._queue=[];for(var x=0,C=S;x<C.length;x+=1){var k=C[x];if(!k.cancelled&&(k.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},hl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ih=E.window.HTMLImageElement,kd=E.window.HTMLElement,Ms=E.window.ImageBitmap,gc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},w0=function(_){function S(C){var k=this;if((C=E.extend({},gc,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var G=new Fe(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies);if(_.call(this,G,C),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new hl,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},wu,C.locale),this._clickTolerance=C.clickTolerance,this._requestManager=new E.RequestManager(C.transformRequest,C.accessToken),typeof C.container=="string"){if(this._container=E.window.document.getElementById(C.container),!this._container)throw new Error("Container '"+C.container+"' not found.")}else{if(!(C.container instanceof kd))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return k._update(!1)}),this.on("moveend",function(){return k._update(!1)}),this.on("zoom",function(){return k._update(!0)}),E.window!==void 0&&(E.window.addEventListener("online",this._onWindowOnline,!1),E.window.addEventListener("resize",this._onWindowResize,!1),E.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Eo(this,C),this._hash=C.hash&&new wn(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,E.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Qc({customAttribution:C.customAttribution})),this.addControl(new Jc,C.logoPosition),this.on("style.load",function(){k.transform.unmodified&&k.jumpTo(k.style.stylesheet)}),this.on("data",function(K){k._update(K.dataType==="style"),k.fire(new E.Event(K.dataType+"data",K))}),this.on("dataloading",function(K){k.fire(new E.Event(K.dataType+"dataloading",K))})}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return S.prototype._getMapId=function(){return this._mapId},S.prototype.addControl=function(C,k){if(k===void 0&&(k=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var G=C.onAdd(this);this._controls.push(C);var K=this._controlPositions[k];return k.indexOf("bottom")!==-1?K.insertBefore(G,K.firstChild):K.appendChild(G),this},S.prototype.removeControl=function(C){if(!C||!C.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var k=this._controls.indexOf(C);return k>-1&&this._controls.splice(k,1),C.onRemove(this),this},S.prototype.hasControl=function(C){return this._controls.indexOf(C)>-1},S.prototype.resize=function(C){var k=this._containerDimensions(),G=k[0],K=k[1];if(G===this.transform.width&&K===this.transform.height)return this;this._resizeCanvas(G,K),this.transform.resize(G,K),this.painter.resize(G,K);var de=!this._moving;return de&&this.fire(new E.Event("movestart",C)).fire(new E.Event("move",C)),this.fire(new E.Event("resize",C)),de&&this.fire(new E.Event("moveend",C)),this},S.prototype.getBounds=function(){return this.transform.getBounds()},S.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},S.prototype.setMaxBounds=function(C){return this.transform.setMaxBounds(E.LngLatBounds.convert(C)),this._update()},S.prototype.setMinZoom=function(C){if((C=C==null?-2:C)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},S.prototype.getMinZoom=function(){return this.transform.minZoom},S.prototype.setMaxZoom=function(C){if((C=C==null?22:C)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")},S.prototype.getMaxZoom=function(){return this.transform.maxZoom},S.prototype.setMinPitch=function(C){if((C=C==null?0:C)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},S.prototype.getMinPitch=function(){return this.transform.minPitch},S.prototype.setMaxPitch=function(C){if((C=C==null?60:C)>60)throw new Error("maxPitch must be less than or equal to 60");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")},S.prototype.getMaxPitch=function(){return this.transform.maxPitch},S.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},S.prototype.setRenderWorldCopies=function(C){return this.transform.renderWorldCopies=C,this._update()},S.prototype.project=function(C){return this.transform.locationPoint(E.LngLat.convert(C))},S.prototype.unproject=function(C){return this.transform.pointLocation(E.Point.convert(C))},S.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},S.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},S.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},S.prototype._createDelegatedListener=function(C,k,G){var K,de=this;if(C==="mouseenter"||C==="mouseover"){var Ve=!1;return{layer:k,listener:G,delegates:{mousemove:function(Ft){var jt=de.getLayer(k)?de.queryRenderedFeatures(Ft.point,{layers:[k]}):[];jt.length?Ve||(Ve=!0,G.call(de,new Da(C,de,Ft.originalEvent,{features:jt}))):Ve=!1},mouseout:function(){Ve=!1}}}}if(C==="mouseleave"||C==="mouseout"){var st=!1;return{layer:k,listener:G,delegates:{mousemove:function(Ft){(de.getLayer(k)?de.queryRenderedFeatures(Ft.point,{layers:[k]}):[]).length?st=!0:st&&(st=!1,G.call(de,new Da(C,de,Ft.originalEvent)))},mouseout:function(Ft){st&&(st=!1,G.call(de,new Da(C,de,Ft.originalEvent)))}}}}return{layer:k,listener:G,delegates:(K={},K[C]=function(Ft){var jt=de.getLayer(k)?de.queryRenderedFeatures(Ft.point,{layers:[k]}):[];jt.length&&(Ft.features=jt,G.call(de,Ft),delete Ft.features)},K)}},S.prototype.on=function(C,k,G){if(G===void 0)return _.prototype.on.call(this,C,k);var K=this._createDelegatedListener(C,k,G);for(var de in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(K),K.delegates)this.on(de,K.delegates[de]);return this},S.prototype.once=function(C,k,G){if(G===void 0)return _.prototype.once.call(this,C,k);var K=this._createDelegatedListener(C,k,G);for(var de in K.delegates)this.once(de,K.delegates[de]);return this},S.prototype.off=function(C,k,G){var K=this;return G===void 0?_.prototype.off.call(this,C,k):(this._delegatedListeners&&this._delegatedListeners[C]&&function(de){for(var Ve=de[C],st=0;st<Ve.length;st++){var Ft=Ve[st];if(Ft.layer===k&&Ft.listener===G){for(var jt in Ft.delegates)K.off(jt,Ft.delegates[jt]);return Ve.splice(st,1),K}}}(this._delegatedListeners),this)},S.prototype.queryRenderedFeatures=function(C,k){if(!this.style)return[];var G;if(k!==void 0||C===void 0||C instanceof E.Point||Array.isArray(C)||(k=C,C=void 0),k=k||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof E.Point||typeof C[0]=="number")G=[E.Point.convert(C)];else{var K=E.Point.convert(C[0]),de=E.Point.convert(C[1]);G=[K,new E.Point(de.x,K.y),de,new E.Point(K.x,de.y),K]}return this.style.queryRenderedFeatures(G,k,this.transform)},S.prototype.querySourceFeatures=function(C,k){return this.style.querySourceFeatures(C,k)},S.prototype.setStyle=function(C,k){return(k=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},k)).diff!==!1&&k.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,k),this):(this._localIdeographFontFamily=k.localIdeographFontFamily,this._updateStyle(C,k))},S.prototype._getUIString=function(C){var k=this._locale[C];if(k==null)throw new Error("Missing UI string '"+C+"'");return k},S.prototype._updateStyle=function(C,k){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new pc(this,k||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)},S.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new pc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},S.prototype._diffStyle=function(C,k){var G=this;if(typeof C=="string"){var K=this._requestManager.normalizeStyleURL(C),de=this._requestManager.transformRequest(K,E.ResourceType.Style);E.getJSON(de,function(Ve,st){Ve?G.fire(new E.ErrorEvent(Ve)):st&&G._updateDiff(st,k)})}else typeof C=="object"&&this._updateDiff(C,k)},S.prototype._updateDiff=function(C,k){try{this.style.setState(C)&&this._update(!0)}catch(G){E.warnOnce("Unable to perform style diff: "+(G.message||G.error||G)+".  Rebuilding the style from scratch."),this._updateStyle(C,k)}},S.prototype.getStyle=function(){if(this.style)return this.style.serialize()},S.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")},S.prototype.addSource=function(C,k){return this._lazyInitEmptyStyle(),this.style.addSource(C,k),this._update(!0)},S.prototype.isSourceLoaded=function(C){var k=this.style&&this.style.sourceCaches[C];if(k!==void 0)return k.loaded();this.fire(new E.ErrorEvent(new Error("There is no source with ID '"+C+"'")))},S.prototype.areTilesLoaded=function(){var C=this.style&&this.style.sourceCaches;for(var k in C){var G=C[k]._tiles;for(var K in G){var de=G[K];if(de.state!=="loaded"&&de.state!=="errored")return!1}}return!0},S.prototype.addSourceType=function(C,k,G){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,k,G)},S.prototype.removeSource=function(C){return this.style.removeSource(C),this._update(!0)},S.prototype.getSource=function(C){return this.style.getSource(C)},S.prototype.addImage=function(C,k,G){G===void 0&&(G={});var K=G.pixelRatio;K===void 0&&(K=1);var de=G.sdf;de===void 0&&(de=!1);var Ve=G.stretchX,st=G.stretchY,Ft=G.content;if(this._lazyInitEmptyStyle(),k instanceof ih||Ms&&k instanceof Ms){var jt=E.browser.getImageData(k);this.style.addImage(C,{data:new E.RGBAImage({width:jt.width,height:jt.height},jt.data),pixelRatio:K,stretchX:Ve,stretchY:st,content:Ft,sdf:de,version:0})}else{if(k.width===void 0||k.height===void 0)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xt=k;this.style.addImage(C,{data:new E.RGBAImage({width:k.width,height:k.height},new Uint8Array(k.data)),pixelRatio:K,stretchX:Ve,stretchY:st,content:Ft,sdf:de,version:0,userImage:Xt}),Xt.onAdd&&Xt.onAdd(this,C)}},S.prototype.updateImage=function(C,k){var G=this.style.getImage(C);if(!G)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var K=k instanceof ih||Ms&&k instanceof Ms?E.browser.getImageData(k):k,de=K.width,Ve=K.height,st=K.data;return de===void 0||Ve===void 0?this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):de!==G.data.width||Ve!==G.data.height?this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(G.data.replace(st,!(k instanceof ih||Ms&&k instanceof Ms)),void this.style.updateImage(C,G))},S.prototype.hasImage=function(C){return C?!!this.style.getImage(C):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)},S.prototype.removeImage=function(C){this.style.removeImage(C)},S.prototype.loadImage=function(C,k){E.getImage(this._requestManager.transformRequest(C,E.ResourceType.Image),k)},S.prototype.listImages=function(){return this.style.listImages()},S.prototype.addLayer=function(C,k){return this._lazyInitEmptyStyle(),this.style.addLayer(C,k),this._update(!0)},S.prototype.moveLayer=function(C,k){return this.style.moveLayer(C,k),this._update(!0)},S.prototype.removeLayer=function(C){return this.style.removeLayer(C),this._update(!0)},S.prototype.getLayer=function(C){return this.style.getLayer(C)},S.prototype.setLayerZoomRange=function(C,k,G){return this.style.setLayerZoomRange(C,k,G),this._update(!0)},S.prototype.setFilter=function(C,k,G){return G===void 0&&(G={}),this.style.setFilter(C,k,G),this._update(!0)},S.prototype.getFilter=function(C){return this.style.getFilter(C)},S.prototype.setPaintProperty=function(C,k,G,K){return K===void 0&&(K={}),this.style.setPaintProperty(C,k,G,K),this._update(!0)},S.prototype.getPaintProperty=function(C,k){return this.style.getPaintProperty(C,k)},S.prototype.setLayoutProperty=function(C,k,G,K){return K===void 0&&(K={}),this.style.setLayoutProperty(C,k,G,K),this._update(!0)},S.prototype.getLayoutProperty=function(C,k){return this.style.getLayoutProperty(C,k)},S.prototype.setLight=function(C,k){return k===void 0&&(k={}),this._lazyInitEmptyStyle(),this.style.setLight(C,k),this._update(!0)},S.prototype.getLight=function(){return this.style.getLight()},S.prototype.setFeatureState=function(C,k){return this.style.setFeatureState(C,k),this._update()},S.prototype.removeFeatureState=function(C,k){return this.style.removeFeatureState(C,k),this._update()},S.prototype.getFeatureState=function(C){return this.style.getFeatureState(C)},S.prototype.getContainer=function(){return this._container},S.prototype.getCanvasContainer=function(){return this._canvasContainer},S.prototype.getCanvas=function(){return this._canvas},S.prototype._containerDimensions=function(){var C=0,k=0;return this._container&&(C=this._container.clientWidth||400,k=this._container.clientHeight||300),[C,k]},S.prototype._detectMissingCSS=function(){E.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&E.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},S.prototype._setupContainer=function(){var C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=te.create("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();var k=this._canvasContainer=te.create("div","mapboxgl-canvas-container",C);this._interactive&&k.classList.add("mapboxgl-interactive"),this._canvas=te.create("canvas","mapboxgl-canvas",k),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var K=this._controlContainer=te.create("div","mapboxgl-control-container",C),de=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ve){de[Ve]=te.create("div","mapboxgl-ctrl-"+Ve,K)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},S.prototype._resizeCanvas=function(C,k){var G=E.browser.devicePixelRatio||1;this._canvas.width=G*C,this._canvas.height=G*k,this._canvas.style.width=C+"px",this._canvas.style.height=k+"px"},S.prototype._setupPainter=function(){var C=E.extend({},ve.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),k=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);k?(this.painter=new Xs(k,this.transform),E.webpSupported.testSupport(k)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))},S.prototype._contextLost=function(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:C}))},S.prototype._contextRestored=function(C){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:C}))},S.prototype._onMapScroll=function(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},S.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},S.prototype._update=function(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this},S.prototype._requestRenderFrame=function(C){return this._update(),this._renderTaskQueue.add(C)},S.prototype._cancelRenderFrame=function(C){this._renderTaskQueue.remove(C)},S.prototype._render=function(C){var k,G=this,K=0,de=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(k=de.createQueryEXT(),de.beginQueryEXT(de.TIME_ELAPSED_EXT,k),K=E.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),!this._removed){var Ve=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var st=this.transform.zoom,Ft=E.browser.now();this.style.zoomHistory.update(st,Ft);var jt=new E.EvaluationParameters(st,{now:Ft,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xt=jt.crossFadingFactor();Xt===1&&Xt===this._crossFadingFactor||(Ve=!0,this._crossFadingFactor=Xt),this.style.update(jt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||Ve)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var bn=E.browser.now()-K;de.endQueryEXT(de.TIME_ELAPSED_EXT,k),setTimeout(function(){var on=de.getQueryObjectEXT(k,de.QUERY_RESULT_EXT)/1e6;de.deleteQueryEXT(k),G.fire(new E.Event("gpu-timing-frame",{cpuTime:bn,gpuTime:on}))},50)}if(this.listens("gpu-timing-layer")){var vn=this.painter.collectGpuTimers();setTimeout(function(){var on=G.painter.queryGpuTimers(vn);G.fire(new E.Event("gpu-timing-layer",{layerTimes:on}))},50)}var zn=this._sourcesDirty||this._styleDirty||this._placementDirty;return zn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||zn||(this._fullyLoaded=!0),this}},S.prototype.remove=function(){this._hash&&this._hash.remove();for(var C=0,k=this._controls;C<k.length;C+=1)k[C].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),E.window!==void 0&&(E.window.removeEventListener("resize",this._onWindowResize,!1),E.window.removeEventListener("orientationchange",this._onWindowResize,!1),E.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext(),qh(this._canvasContainer),qh(this._controlContainer),qh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new E.Event("remove"))},S.prototype.triggerRepaint=function(){var C=this;this.style&&!this._frame&&(this._frame=E.browser.frame(function(k){C._frame=null,C._render(k)}))},S.prototype._onWindowOnline=function(){this._update()},S.prototype._onWindowResize=function(C){this._trackResize&&this.resize({originalEvent:C})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(C){this._showPadding!==C&&(this._showPadding=C,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(C){this._vertices=C,this._update()},S.prototype._setCacheLimits=function(C,k){E.setCacheLimits(C,k)},x.version.get=function(){return E.version},Object.defineProperties(S.prototype,x),S}(Jl);function qh(_){_.parentNode&&_.parentNode.removeChild(_)}var vp={showCompass:!0,showZoom:!0,visualizePitch:!1},Ph=function(_){var S=this;this.options=E.extend({},vp,_),this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(x){return S._map.zoomIn({},{originalEvent:x})}),te.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(x){return S._map.zoomOut({},{originalEvent:x})}),te.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(x){S.options.visualizePitch?S._map.resetNorthPitch({},{originalEvent:x}):S._map.resetNorth({},{originalEvent:x})}),this._compassIcon=te.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ph.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),S=_===this._map.getMaxZoom(),x=_===this._map.getMinZoom();this._zoomInButton.disabled=S,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",S.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},Ph.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},Ph.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new eu(this._map,this._compass,this.options.visualizePitch)),this._container},Ph.prototype.onRemove=function(){te.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ph.prototype._createButton=function(_,S){var x=te.create("button",_,this._container);return x.type="button",x.addEventListener("click",S),x},Ph.prototype._setButtonTitle=function(_,S){var x=this._map._getUIString("NavigationControl."+S);_.title=x,_.setAttribute("aria-label",x)};var eu=function(_,S,x){x===void 0&&(x=!1),this._clickTolerance=10,this.element=S,this.mouseRotate=new Bd({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,x&&(this.mousePitch=new Rh({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),te.addEventListener(S,"mousedown",this.mousedown),te.addEventListener(S,"touchstart",this.touchstart,{passive:!1}),te.addEventListener(S,"touchmove",this.touchmove),te.addEventListener(S,"touchend",this.touchend),te.addEventListener(S,"touchcancel",this.reset)};function mp(_,S,x){if(_=new E.LngLat(_.lng,_.lat),S){var C=new E.LngLat(_.lng-360,_.lat),k=new E.LngLat(_.lng+360,_.lat),G=x.locationPoint(_).distSqr(S);x.locationPoint(C).distSqr(S)<G?_=C:x.locationPoint(k).distSqr(S)<G&&(_=k)}for(;Math.abs(_.lng-x.center.lng)>180;){var K=x.locationPoint(_);if(K.x>=0&&K.y>=0&&K.x<=x.width&&K.y<=x.height)break;_.lng>x.center.lng?_.lng-=360:_.lng+=360}return _}eu.prototype.down=function(_,S){this.mouseRotate.mousedown(_,S),this.mousePitch&&this.mousePitch.mousedown(_,S),te.disableDrag()},eu.prototype.move=function(_,S){var x=this.map,C=this.mouseRotate.mousemoveWindow(_,S);if(C&&C.bearingDelta&&x.setBearing(x.getBearing()+C.bearingDelta),this.mousePitch){var k=this.mousePitch.mousemoveWindow(_,S);k&&k.pitchDelta&&x.setPitch(x.getPitch()+k.pitchDelta)}},eu.prototype.off=function(){var _=this.element;te.removeEventListener(_,"mousedown",this.mousedown),te.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),te.removeEventListener(_,"touchmove",this.touchmove),te.removeEventListener(_,"touchend",this.touchend),te.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},eu.prototype.offTemp=function(){te.enableDrag(),te.removeEventListener(E.window,"mousemove",this.mousemove),te.removeEventListener(E.window,"mouseup",this.mouseup)},eu.prototype.mousedown=function(_){this.down(E.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),te.mousePos(this.element,_)),te.addEventListener(E.window,"mousemove",this.mousemove),te.addEventListener(E.window,"mouseup",this.mouseup)},eu.prototype.mousemove=function(_){this.move(_,te.mousePos(this.element,_))},eu.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},eu.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=te.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},eu.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=te.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},eu.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},eu.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Au={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wp(_,S,x){var C=_.classList;for(var k in Au)C.remove("mapboxgl-"+x+"-anchor-"+k);C.add("mapboxgl-"+x+"-anchor-"+S)}var Vu,Ud=function(_){function S(x,C){if(_.call(this),(x instanceof E.window.HTMLElement||C)&&(x=E.extend({element:x},C)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=E.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=te.create("div"),this._element.setAttribute("aria-label","Map marker");var k=te.createNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height","41px"),k.setAttributeNS(null,"width","27px"),k.setAttributeNS(null,"viewBox","0 0 27 41");var G=te.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var K=te.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var de=te.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(3.0, 29.0)"),de.setAttributeNS(null,"fill","#000000");for(var Ve=0,st=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ve<st.length;Ve+=1){var Ft=st[Ve],jt=te.createNS("http://www.w3.org/2000/svg","ellipse");jt.setAttributeNS(null,"opacity","0.04"),jt.setAttributeNS(null,"cx","10.5"),jt.setAttributeNS(null,"cy","5.80029008"),jt.setAttributeNS(null,"rx",Ft.rx),jt.setAttributeNS(null,"ry",Ft.ry),de.appendChild(jt)}var Xt=te.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"fill",this._color);var bn=te.createNS("http://www.w3.org/2000/svg","path");bn.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Xt.appendChild(bn);var vn=te.createNS("http://www.w3.org/2000/svg","g");vn.setAttributeNS(null,"opacity","0.25"),vn.setAttributeNS(null,"fill","#000000");var zn=te.createNS("http://www.w3.org/2000/svg","path");zn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),vn.appendChild(zn);var on=te.createNS("http://www.w3.org/2000/svg","g");on.setAttributeNS(null,"transform","translate(6.0, 7.0)"),on.setAttributeNS(null,"fill","#FFFFFF");var Fn=te.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var er=te.createNS("http://www.w3.org/2000/svg","circle");er.setAttributeNS(null,"fill","#000000"),er.setAttributeNS(null,"opacity","0.25"),er.setAttributeNS(null,"cx","5.5"),er.setAttributeNS(null,"cy","5.5"),er.setAttributeNS(null,"r","5.4999962");var vr=te.createNS("http://www.w3.org/2000/svg","circle");vr.setAttributeNS(null,"fill","#FFFFFF"),vr.setAttributeNS(null,"cx","5.5"),vr.setAttributeNS(null,"cy","5.5"),vr.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(er),Fn.appendChild(vr),K.appendChild(de),K.appendChild(Xt),K.appendChild(vn),K.appendChild(on),K.appendChild(Fn),k.appendChild(K),k.setAttributeNS(null,"height",41*this._scale+"px"),k.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(k),this._offset=E.Point.convert(x&&x.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Mr){Mr.preventDefault()}),this._element.addEventListener("mousedown",function(Mr){Mr.preventDefault()}),Wp(this._element,this._anchor,"marker"),this._popup=null}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},S.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),te.remove(this._element),this._popup&&this._popup.remove(),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},S.prototype.getElement=function(){return this._element},S.prototype.setPopup=function(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){var C=Math.sqrt(Math.pow(13.5,2)/2);x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(24.6+C)],"bottom-right":[-C,-1*(24.6+C)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},S.prototype._onKeyPress=function(x){var C=x.code,k=x.charCode||x.keyCode;C!=="Space"&&C!=="Enter"&&k!==32&&k!==13||this.togglePopup()},S.prototype._onMapClick=function(x){var C=x.originalEvent.target,k=this._element;this._popup&&(C===k||k.contains(C))&&this.togglePopup()},S.prototype.getPopup=function(){return this._popup},S.prototype.togglePopup=function(){var x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this},S.prototype._update=function(x){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mp(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(C="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k="rotateX("+this._map.getPitch()+"deg)"),x&&x.type!=="moveend"||(this._pos=this._pos.round()),te.setTransform(this._element,Au[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+k+" "+C)}},S.prototype.getOffset=function(){return this._offset},S.prototype.setOffset=function(x){return this._offset=E.Point.convert(x),this._update(),this},S.prototype._onMove=function(x){if(!this._isDragging){var C=this._clickTolerance||this._map._clickTolerance;this._isDragging=x.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=x.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))},S.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new E.Event("dragend")),this._state="inactive"},S.prototype._addDragHandler=function(x){this._element.contains(x.originalEvent.target)&&(x.preventDefault(),this._positionDelta=x.point.sub(this._pos).add(this._offset),this._pointerdownPos=x.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},S.prototype.setDraggable=function(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},S.prototype.isDraggable=function(){return this._draggable},S.prototype.setRotation=function(x){return this._rotation=x||0,this._update(),this},S.prototype.getRotation=function(){return this._rotation},S.prototype.setRotationAlignment=function(x){return this._rotationAlignment=x||"auto",this._update(),this},S.prototype.getRotationAlignment=function(){return this._rotationAlignment},S.prototype.setPitchAlignment=function(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this},S.prototype.getPitchAlignment=function(){return this._pitchAlignment},S}(E.Evented),A0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ih=0,Qh=!1,C0=function(_){function S(x){_.call(this),this.options=E.extend({},A0,x),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){var C;return this._map=x,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),C=this._setupUI,Vu!==void 0?C(Vu):E.window.navigator.permissions!==void 0?E.window.navigator.permissions.query({name:"geolocation"}).then(function(k){C(Vu=k.state!=="denied")}):C(Vu=!!E.window.navigator.geolocation),this._container},S.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),te.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ih=0,Qh=!1},S.prototype._isOutOfMapMaxBounds=function(x){var C=this._map.getMaxBounds(),k=x.coords;return C&&(k.longitude<C.getWest()||k.longitude>C.getEast()||k.latitude<C.getSouth()||k.latitude>C.getNorth())},S.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},S.prototype._onSuccess=function(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",x)),this._finish()}},S.prototype._updateCamera=function(x){var C=new E.LngLat(x.coords.longitude,x.coords.latitude),k=x.coords.accuracy,G=this._map.getBearing(),K=E.extend({bearing:G},this.options.fitBoundsOptions);this._map.fitBounds(C.toBounds(k),K,{geolocateSource:!0})},S.prototype._updateMarker=function(x){if(x){var C=new E.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},S.prototype._updateCircleRadius=function(){var x=this._map._container.clientHeight/2,C=this._map.unproject([0,x]),k=this._map.unproject([1,x]),G=C.distanceTo(k),K=Math.ceil(2*this._accuracy/G);this._circleElement.style.width=K+"px",this._circleElement.style.height=K+"px"},S.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},S.prototype._onError=function(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Qh)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",x)),this._finish()}},S.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},S.prototype._setupUI=function(x){var C=this;if(this._container.addEventListener("contextmenu",function(K){return K.preventDefault()}),this._geolocateButton=te.create("button","mapboxgl-ctrl-geolocate",this._container),te.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",x===!1){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{var G=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=te.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ud(this._dotElement),this._circleElement=te.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ud({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(K){K.geolocateSource||C._watchState!=="ACTIVE_LOCK"||K.originalEvent&&K.originalEvent.type==="resize"||(C._watchState="BACKGROUND",C._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),C._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),C.fire(new E.Event("trackuserlocationend")))})},S.prototype.trigger=function(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ih--,Qh=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ih>1?(x={maximumAge:6e5,timeout:0},Qh=!0):(x=this.options.positionOptions,Qh=!1),this._geolocationWatchID=E.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else E.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},S.prototype._clearWatch=function(){E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},S}(E.Evented),zf={maxWidth:100,unit:"metric"},jf=function(_){this.options=E.extend({},zf,_),E.bindAll(["_onMove","setUnit"],this)};function O0(_,S,x){var C=x&&x.maxWidth||100,k=_._container.clientHeight/2,G=_.unproject([0,k]),K=_.unproject([C,k]),de=G.distanceTo(K);if(x&&x.unit==="imperial"){var Ve=3.2808*de;Ve>5280?oh(S,C,Ve/5280,_._getUIString("ScaleControl.Miles")):oh(S,C,Ve,_._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?oh(S,C,de/1852,_._getUIString("ScaleControl.NauticalMiles")):de>=1e3?oh(S,C,de/1e3,_._getUIString("ScaleControl.Kilometers")):oh(S,C,de,_._getUIString("ScaleControl.Meters"))}function oh(_,S,x,C){var k,G,K,de=(k=x,(G=Math.pow(10,(""+Math.floor(k)).length-1))*(K=(K=k/G)>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(Ve){var st=Math.pow(10,Math.ceil(-Math.log(Ve)/Math.LN10));return Math.round(Ve*st)/st}(K)));_.style.width=S*(de/x)+"px",_.innerHTML=de+"&nbsp;"+C}jf.prototype.getDefaultPosition=function(){return"bottom-left"},jf.prototype._onMove=function(){O0(this._map,this._container,this.options)},jf.prototype.onAdd=function(_){return this._map=_,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jf.prototype.onRemove=function(){te.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jf.prototype.setUnit=function(_){this.options.unit=_,O0(this._map,this._container,this.options)};var Sf=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof E.window.HTMLElement?this._container=_.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in E.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in E.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in E.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in E.window.document&&(this._fullscreenchange="MSFullscreenChange")};Sf.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Sf.prototype.onRemove=function(){te.remove(this._controlContainer),this._map=null,E.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Sf.prototype._checkFullscreenSupport=function(){return!!(E.window.document.fullscreenEnabled||E.window.document.mozFullScreenEnabled||E.window.document.msFullscreenEnabled||E.window.document.webkitFullscreenEnabled)},Sf.prototype._setupUI=function(){var _=this._fullscreenButton=te.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);te.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),E.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Sf.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},Sf.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Sf.prototype._isFullscreen=function(){return this._fullscreen},Sf.prototype._changeIcon=function(){(E.window.document.fullscreenElement||E.window.document.mozFullScreenElement||E.window.document.webkitFullscreenElement||E.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Sf.prototype._onClickFullscreen=function(){this._isFullscreen()?E.window.document.exitFullscreen?E.window.document.exitFullscreen():E.window.document.mozCancelFullScreen?E.window.document.mozCancelFullScreen():E.window.document.msExitFullscreen?E.window.document.msExitFullscreen():E.window.document.webkitCancelFullScreen&&E.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var lv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Vf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Jh=function(_){function S(x){_.call(this),this.options=E.extend(Object.create(lv),x),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this},S.prototype.isOpen=function(){return!!this._map},S.prototype.remove=function(){return this._content&&te.remove(this._content),this._container&&(te.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},S.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},S.prototype.getElement=function(){return this._container},S.prototype.setText=function(x){return this.setDOMContent(E.window.document.createTextNode(x))},S.prototype.setHTML=function(x){var C,k=E.window.document.createDocumentFragment(),G=E.window.document.createElement("body");for(G.innerHTML=x;C=G.firstChild;)k.appendChild(C);return this.setDOMContent(k)},S.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},S.prototype.setMaxWidth=function(x){return this.options.maxWidth=x,this._update(),this},S.prototype.setDOMContent=function(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=te.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this},S.prototype.addClassName=function(x){this._container&&this._container.classList.add(x)},S.prototype.removeClassName=function(x){this._container&&this._container.classList.remove(x)},S.prototype.setOffset=function(x){return this.options.offset=x,this._update(),this},S.prototype.toggleClassName=function(x){if(this._container)return this._container.classList.toggle(x)},S.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=te.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},S.prototype._onMouseUp=function(x){this._update(x.point)},S.prototype._onMouseMove=function(x){this._update(x.point)},S.prototype._onDrag=function(x){this._update(x.point)},S.prototype._update=function(x){var C=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=te.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=te.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(jt){return C._container.classList.add(jt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mp(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||x)){var k=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat),G=this.options.anchor,K=function jt(Xt){if(Xt){if(typeof Xt=="number"){var bn=Math.round(Math.sqrt(.5*Math.pow(Xt,2)));return{center:new E.Point(0,0),top:new E.Point(0,Xt),"top-left":new E.Point(bn,bn),"top-right":new E.Point(-bn,bn),bottom:new E.Point(0,-Xt),"bottom-left":new E.Point(bn,-bn),"bottom-right":new E.Point(-bn,-bn),left:new E.Point(Xt,0),right:new E.Point(-Xt,0)}}if(Xt instanceof E.Point||Array.isArray(Xt)){var vn=E.Point.convert(Xt);return{center:vn,top:vn,"top-left":vn,"top-right":vn,bottom:vn,"bottom-left":vn,"bottom-right":vn,left:vn,right:vn}}return{center:E.Point.convert(Xt.center||[0,0]),top:E.Point.convert(Xt.top||[0,0]),"top-left":E.Point.convert(Xt["top-left"]||[0,0]),"top-right":E.Point.convert(Xt["top-right"]||[0,0]),bottom:E.Point.convert(Xt.bottom||[0,0]),"bottom-left":E.Point.convert(Xt["bottom-left"]||[0,0]),"bottom-right":E.Point.convert(Xt["bottom-right"]||[0,0]),left:E.Point.convert(Xt.left||[0,0]),right:E.Point.convert(Xt.right||[0,0])}}return jt(new E.Point(0,0))}(this.options.offset);if(!G){var de,Ve=this._container.offsetWidth,st=this._container.offsetHeight;de=k.y+K.bottom.y<st?["top"]:k.y>this._map.transform.height-st?["bottom"]:[],k.x<Ve/2?de.push("left"):k.x>this._map.transform.width-Ve/2&&de.push("right"),G=de.length===0?"bottom":de.join("-")}var Ft=k.add(K[G]).round();te.setTransform(this._container,Au[G]+" translate("+Ft.x+"px,"+Ft.y+"px)"),Wp(this._container,G,"popup")}},S.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var x=this._container.querySelector(Vf);x&&x.focus()}},S.prototype._onClose=function(){this.remove()},S}(E.Evented),R0={version:E.version,supported:ve,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:w0,NavigationControl:Ph,GeolocateControl:C0,AttributionControl:Qc,ScaleControl:jf,FullscreenControl:Sf,Popup:Jh,Marker:Ud,Style:pc,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.Point,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,config:E.config,prewarm:function(){Sr().acquire(pr)},clearPrewarmedResources:function(){var _=mi;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(pr),mi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return E.config.ACCESS_TOKEN},set accessToken(_){E.config.ACCESS_TOKEN=_},get baseApiUrl(){return E.config.API_URL},set baseApiUrl(_){E.config.API_URL=_},get workerCount(){return Ur.workerCount},set workerCount(_){Ur.workerCount=_},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){E.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){E.clearTileCache(_)},workerUrl:""};return R0}),J})},92077:function(Ht,W,D){var J,Z;(function(E,ve){J=ve,Z=typeof J=="function"?J.call(W,D,W,Ht):J,Z!==void 0&&(Ht.exports=Z)})(this,function(){var E,ve,te="2.0.6",se={},ae={},Se={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},oe={currentLocale:Se.currentLocale,zeroFormat:Se.zeroFormat,nullFormat:Se.nullFormat,defaultFormat:Se.defaultFormat,scalePercentBy100:Se.scalePercentBy100};function Ge(ee,me){this._input=ee,this._value=me}return E=function(ee){var me,Le,be,Oe;if(E.isNumeral(ee))me=ee.value();else if(ee===0||typeof ee=="undefined")me=0;else if(ee===null||ve.isNaN(ee))me=null;else if(typeof ee=="string")if(oe.zeroFormat&&ee===oe.zeroFormat)me=0;else if(oe.nullFormat&&ee===oe.nullFormat||!ee.replace(/[^0-9]+/g,"").length)me=null;else{for(Le in se)if(Oe=typeof se[Le].regexps.unformat=="function"?se[Le].regexps.unformat():se[Le].regexps.unformat,Oe&&ee.match(Oe)){be=se[Le].unformat;break}be=be||E._.stringToNumber,me=be(ee)}else me=Number(ee)||null;return new Ge(ee,me)},E.version=te,E.isNumeral=function(ee){return ee instanceof Ge},E._=ve={numberToFormat:function(ee,me,Le){var be=ae[E.options.currentLocale],Oe=!1,fe=!1,He=0,bt="",dt=1e12,Nt=1e9,ct=1e6,lt=1e3,Ie="",Ae=!1,pt,ut,Et,cn,ze,St,we,nt,Xe,Ze;if(ee=ee||0,ut=Math.abs(ee),E._.includes(me,"(")?(Oe=!0,me=me.replace(/[\(|\)]/g,"")):(E._.includes(me,"+")||E._.includes(me,"-"))&&(nt=E._.includes(me,"+")?me.indexOf("+"):ee<0?me.indexOf("-"):-1,me=me.replace(/[\+|\-]/g,"")),E._.includes(me,"a")&&(pt=me.match(/a(k|m|b|t)?/),pt=pt?pt[1]:!1,E._.includes(me," a")&&(bt=" "),me=me.replace(new RegExp(bt+"a[kmbt]?"),""),ut>=dt&&!pt||pt==="t"?(bt+=be.abbreviations.trillion,ee=ee/dt):ut<dt&&ut>=Nt&&!pt||pt==="b"?(bt+=be.abbreviations.billion,ee=ee/Nt):ut<Nt&&ut>=ct&&!pt||pt==="m"?(bt+=be.abbreviations.million,ee=ee/ct):(ut<ct&&ut>=lt&&!pt||pt==="k")&&(bt+=be.abbreviations.thousand,ee=ee/lt)),E._.includes(me,"[.]")&&(fe=!0,me=me.replace("[.]",".")),St=ee.toString().split(".")[0],we=me.split(".")[1],Xe=me.indexOf(","),He=(me.split(".")[0].split(",")[0].match(/0/g)||[]).length,we?(E._.includes(we,"[")?(we=we.replace("]",""),we=we.split("["),Ie=E._.toFixed(ee,we[0].length+we[1].length,Le,we[1].length)):Ie=E._.toFixed(ee,we.length,Le),St=Ie.split(".")[0],E._.includes(Ie,".")?Ie=be.delimiters.decimal+Ie.split(".")[1]:Ie="",fe&&Number(Ie.slice(1))===0&&(Ie="")):St=E._.toFixed(ee,0,Le),bt&&!pt&&Number(St)>=1e3&&bt!==be.abbreviations.trillion)switch(St=String(Number(St)/1e3),bt){case be.abbreviations.thousand:bt=be.abbreviations.million;break;case be.abbreviations.million:bt=be.abbreviations.billion;break;case be.abbreviations.billion:bt=be.abbreviations.trillion;break}if(E._.includes(St,"-")&&(St=St.slice(1),Ae=!0),St.length<He)for(var Rt=He-St.length;Rt>0;Rt--)St="0"+St;return Xe>-1&&(St=St.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+be.delimiters.thousands)),me.indexOf(".")===0&&(St=""),Ze=St+Ie+(bt||""),Oe?Ze=(Oe&&Ae?"(":"")+Ze+(Oe&&Ae?")":""):nt>=0?Ze=nt===0?(Ae?"-":"+")+Ze:Ze+(Ae?"-":"+"):Ae&&(Ze="-"+Ze),Ze},stringToNumber:function(ee){var me=ae[oe.currentLocale],Le=ee,be={thousand:3,million:6,billion:9,trillion:12},Oe,fe,He,bt;if(oe.zeroFormat&&ee===oe.zeroFormat)fe=0;else if(oe.nullFormat&&ee===oe.nullFormat||!ee.replace(/[^0-9]+/g,"").length)fe=null;else{fe=1,me.delimiters.decimal!=="."&&(ee=ee.replace(/\./g,"").replace(me.delimiters.decimal,"."));for(Oe in be)if(bt=new RegExp("[^a-zA-Z]"+me.abbreviations[Oe]+"(?:\\)|(\\"+me.currency.symbol+")?(?:\\))?)?$"),Le.match(bt)){fe*=Math.pow(10,be[Oe]);break}fe*=(ee.split("-").length+Math.min(ee.split("(").length-1,ee.split(")").length-1))%2?1:-1,ee=ee.replace(/[^0-9\.]+/g,""),fe*=Number(ee)}return fe},isNaN:function(ee){return typeof ee=="number"&&isNaN(ee)},includes:function(ee,me){return ee.indexOf(me)!==-1},insert:function(ee,me,Le){return ee.slice(0,Le)+me+ee.slice(Le)},reduce:function(ee,me){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof me!="function")throw new TypeError(me+" is not a function");var Le=Object(ee),be=Le.length>>>0,Oe=0,fe;if(arguments.length===3)fe=arguments[2];else{for(;Oe<be&&!(Oe in Le);)Oe++;if(Oe>=be)throw new TypeError("Reduce of empty array with no initial value");fe=Le[Oe++]}for(;Oe<be;Oe++)Oe in Le&&(fe=me(fe,Le[Oe],Oe,Le));return fe},multiplier:function(ee){var me=ee.toString().split(".");return me.length<2?1:Math.pow(10,me[1].length)},correctionFactor:function(){var ee=Array.prototype.slice.call(arguments);return ee.reduce(function(me,Le){var be=ve.multiplier(Le);return me>be?me:be},1)},toFixed:function(ee,me,Le,be){var Oe=ee.toString().split("."),fe=me-(be||0),He,bt,dt,Nt;return Oe.length===2?He=Math.min(Math.max(Oe[1].length,fe),me):He=fe,dt=Math.pow(10,He),Nt=(Le(ee+"e+"+He)/dt).toFixed(He),be>me-He&&(bt=new RegExp("\\.?0{1,"+(be-(me-He))+"}$"),Nt=Nt.replace(bt,"")),Nt}},E.options=oe,E.formats=se,E.locales=ae,E.locale=function(ee){return ee&&(oe.currentLocale=ee.toLowerCase()),oe.currentLocale},E.localeData=function(ee){if(!ee)return ae[oe.currentLocale];if(ee=ee.toLowerCase(),!ae[ee])throw new Error("Unknown locale : "+ee);return ae[ee]},E.reset=function(){for(var ee in Se)oe[ee]=Se[ee]},E.zeroFormat=function(ee){oe.zeroFormat=typeof ee=="string"?ee:null},E.nullFormat=function(ee){oe.nullFormat=typeof ee=="string"?ee:null},E.defaultFormat=function(ee){oe.defaultFormat=typeof ee=="string"?ee:"0.0"},E.register=function(ee,me,Le){if(me=me.toLowerCase(),this[ee+"s"][me])throw new TypeError(me+" "+ee+" already registered.");return this[ee+"s"][me]=Le,Le},E.validate=function(ee,me){var Le,be,Oe,fe,He,bt,dt,Nt;if(typeof ee!="string"&&(ee+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",ee)),ee=ee.trim(),ee.match(/^\d+$/))return!0;if(ee==="")return!1;try{dt=E.localeData(me)}catch(ct){dt=E.localeData(E.locale())}return Oe=dt.currency.symbol,He=dt.abbreviations,Le=dt.delimiters.decimal,dt.delimiters.thousands==="."?be="\\.":be=dt.delimiters.thousands,Nt=ee.match(/^[^\d]+/),Nt!==null&&(ee=ee.substr(1),Nt[0]!==Oe)||(Nt=ee.match(/[^\d]+$/),Nt!==null&&(ee=ee.slice(0,-1),Nt[0]!==He.thousand&&Nt[0]!==He.million&&Nt[0]!==He.billion&&Nt[0]!==He.trillion))?!1:(bt=new RegExp(be+"{2}"),ee.match(/[^\d.,]/g)?!1:(fe=ee.split(Le),fe.length>2?!1:fe.length<2?!!fe[0].match(/^\d+.*\d$/)&&!fe[0].match(bt):fe[0].length===1?!!fe[0].match(/^\d+$/)&&!fe[0].match(bt)&&!!fe[1].match(/^\d+$/):!!fe[0].match(/^\d+.*\d$/)&&!fe[0].match(bt)&&!!fe[1].match(/^\d+$/)))},E.fn=Ge.prototype={clone:function(){return E(this)},format:function(ee,me){var Le=this._value,be=ee||oe.defaultFormat,Oe,fe,He;if(me=me||Math.round,Le===0&&oe.zeroFormat!==null)fe=oe.zeroFormat;else if(Le===null&&oe.nullFormat!==null)fe=oe.nullFormat;else{for(Oe in se)if(be.match(se[Oe].regexps.format)){He=se[Oe].format;break}He=He||E._.numberToFormat,fe=He(Le,be,me)}return fe},value:function(){return this._value},input:function(){return this._input},set:function(ee){return this._value=Number(ee),this},add:function(ee){var me=ve.correctionFactor.call(null,this._value,ee);function Le(be,Oe,fe,He){return be+Math.round(me*Oe)}return this._value=ve.reduce([this._value,ee],Le,0)/me,this},subtract:function(ee){var me=ve.correctionFactor.call(null,this._value,ee);function Le(be,Oe,fe,He){return be-Math.round(me*Oe)}return this._value=ve.reduce([ee],Le,Math.round(this._value*me))/me,this},multiply:function(ee){function me(Le,be,Oe,fe){var He=ve.correctionFactor(Le,be);return Math.round(Le*He)*Math.round(be*He)/Math.round(He*He)}return this._value=ve.reduce([this._value,ee],me,1),this},divide:function(ee){function me(Le,be,Oe,fe){var He=ve.correctionFactor(Le,be);return Math.round(Le*He)/Math.round(be*He)}return this._value=ve.reduce([this._value,ee],me),this},difference:function(ee){return Math.abs(E(this._value).subtract(ee).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(ee){var me=ee%10;return~~(ee%100/10)===1?"th":me===1?"st":me===2?"nd":me===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(ee,me,Le){var be=E._.includes(me," BPS")?" ":"",Oe;return ee=ee*1e4,me=me.replace(/\s?BPS/,""),Oe=E._.numberToFormat(ee,me,Le),E._.includes(Oe,")")?(Oe=Oe.split(""),Oe.splice(-1,0,be+"BPS"),Oe=Oe.join("")):Oe=Oe+be+"BPS",Oe},unformat:function(ee){return+(E._.stringToNumber(ee)*1e-4).toFixed(15)}})}(),function(){var ee={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},me={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Le=ee.suffixes.concat(me.suffixes.filter(function(Oe){return ee.suffixes.indexOf(Oe)<0})),be=Le.join("|");be="("+be.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(be)},format:function(Oe,fe,He){var bt,dt=E._.includes(fe,"ib")?me:ee,Nt=E._.includes(fe," b")||E._.includes(fe," ib")?" ":"",ct,lt,Ie;for(fe=fe.replace(/\s?i?b/,""),ct=0;ct<=dt.suffixes.length;ct++)if(lt=Math.pow(dt.base,ct),Ie=Math.pow(dt.base,ct+1),Oe===null||Oe===0||Oe>=lt&&Oe<Ie){Nt+=dt.suffixes[ct],lt>0&&(Oe=Oe/lt);break}return bt=E._.numberToFormat(Oe,fe,He),bt+Nt},unformat:function(Oe){var fe=E._.stringToNumber(Oe),He,bt;if(fe){for(He=ee.suffixes.length-1;He>=0;He--){if(E._.includes(Oe,ee.suffixes[He])){bt=Math.pow(ee.base,He);break}if(E._.includes(Oe,me.suffixes[He])){bt=Math.pow(me.base,He);break}}fe*=bt||1}return fe}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(ee,me,Le){var be=E.locales[E.options.currentLocale],Oe={before:me.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:me.match(/([\+|\-|\)|\s|\$]*)$/)[0]},fe,He,bt;for(me=me.replace(/\s?\$\s?/,""),fe=E._.numberToFormat(ee,me,Le),ee>=0?(Oe.before=Oe.before.replace(/[\-\(]/,""),Oe.after=Oe.after.replace(/[\-\)]/,"")):ee<0&&!E._.includes(Oe.before,"-")&&!E._.includes(Oe.before,"(")&&(Oe.before="-"+Oe.before),bt=0;bt<Oe.before.length;bt++)switch(He=Oe.before[bt],He){case"$":fe=E._.insert(fe,be.currency.symbol,bt);break;case" ":fe=E._.insert(fe," ",bt+be.currency.symbol.length-1);break}for(bt=Oe.after.length-1;bt>=0;bt--)switch(He=Oe.after[bt],He){case"$":fe=bt===Oe.after.length-1?fe+be.currency.symbol:E._.insert(fe,be.currency.symbol,-(Oe.after.length-(1+bt)));break;case" ":fe=bt===Oe.after.length-1?fe+" ":E._.insert(fe," ",-(Oe.after.length-(1+bt)+be.currency.symbol.length-1));break}return fe}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(ee,me,Le){var be,Oe=typeof ee=="number"&&!E._.isNaN(ee)?ee.toExponential():"0e+0",fe=Oe.split("e");return me=me.replace(/e[\+|\-]{1}0/,""),be=E._.numberToFormat(Number(fe[0]),me,Le),be+"e"+fe[1]},unformat:function(ee){var me=E._.includes(ee,"e+")?ee.split("e+"):ee.split("e-"),Le=Number(me[0]),be=Number(me[1]);be=E._.includes(ee,"e-")?be*=-1:be;function Oe(fe,He,bt,dt){var Nt=E._.correctionFactor(fe,He),ct=fe*Nt*(He*Nt)/(Nt*Nt);return ct}return E._.reduce([Le,Math.pow(10,be)],Oe,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(ee,me,Le){var be=E.locales[E.options.currentLocale],Oe,fe=E._.includes(me," o")?" ":"";return me=me.replace(/\s?o/,""),fe+=be.ordinal(ee),Oe=E._.numberToFormat(ee,me,Le),Oe+fe}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(ee,me,Le){var be=E._.includes(me," %")?" ":"",Oe;return E.options.scalePercentBy100&&(ee=ee*100),me=me.replace(/\s?\%/,""),Oe=E._.numberToFormat(ee,me,Le),E._.includes(Oe,")")?(Oe=Oe.split(""),Oe.splice(-1,0,be+"%"),Oe=Oe.join("")):Oe=Oe+be+"%",Oe},unformat:function(ee){var me=E._.stringToNumber(ee);return E.options.scalePercentBy100?me*.01:me}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(ee,me,Le){var be=Math.floor(ee/60/60),Oe=Math.floor((ee-be*60*60)/60),fe=Math.round(ee-be*60*60-Oe*60);return be+":"+(Oe<10?"0"+Oe:Oe)+":"+(fe<10?"0"+fe:fe)},unformat:function(ee){var me=ee.split(":"),Le=0;return me.length===3?(Le=Le+Number(me[0])*60*60,Le=Le+Number(me[1])*60,Le=Le+Number(me[2])):me.length===2&&(Le=Le+Number(me[0])*60,Le=Le+Number(me[1])),Number(Le)}})}(),E})},3614:function(Ht,W,D){"use strict";Ht.exports=Z;var J=D(80645);function Z(ze){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ze)?ze:new Uint8Array(ze||0),this.pos=0,this.type=0,this.length=this.buf.length}Z.Varint=0,Z.Fixed64=1,Z.Bytes=2,Z.Fixed32=5;var E=65536*65536,ve=1/E,te=12,se=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");Z.prototype={destroy:function(){this.buf=null},readFields:function(ze,St,we){for(we=we||this.length;this.pos<we;){var nt=this.readVarint(),Xe=nt>>3,Ze=this.pos;this.type=nt&7,ze(Xe,St,this),this.pos===Ze&&this.skip(nt)}return St},readMessage:function(ze,St){return this.readFields(ze,St,this.readVarint()+this.pos)},readFixed32:function(){var ze=Ie(this.buf,this.pos);return this.pos+=4,ze},readSFixed32:function(){var ze=pt(this.buf,this.pos);return this.pos+=4,ze},readFixed64:function(){var ze=Ie(this.buf,this.pos)+Ie(this.buf,this.pos+4)*E;return this.pos+=8,ze},readSFixed64:function(){var ze=Ie(this.buf,this.pos)+pt(this.buf,this.pos+4)*E;return this.pos+=8,ze},readFloat:function(){var ze=J.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ze},readDouble:function(){var ze=J.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ze},readVarint:function(ze){var St=this.buf,we,nt;return nt=St[this.pos++],we=nt&127,nt<128||(nt=St[this.pos++],we|=(nt&127)<<7,nt<128)||(nt=St[this.pos++],we|=(nt&127)<<14,nt<128)||(nt=St[this.pos++],we|=(nt&127)<<21,nt<128)?we:(nt=St[this.pos],we|=(nt&15)<<28,ae(we,ze,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ze=this.readVarint();return ze%2===1?(ze+1)/-2:ze/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ze=this.readVarint()+this.pos,St=this.pos;return this.pos=ze,ze-St>=te&&se?Et(this.buf,St,ze):ut(this.buf,St,ze)},readBytes:function(){var ze=this.readVarint()+this.pos,St=this.buf.subarray(this.pos,ze);return this.pos=ze,St},readPackedVarint:function(ze,St){if(this.type!==Z.Bytes)return ze.push(this.readVarint(St));var we=Se(this);for(ze=ze||[];this.pos<we;)ze.push(this.readVarint(St));return ze},readPackedSVarint:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readSVarint());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readSVarint());return ze},readPackedBoolean:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readBoolean());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readBoolean());return ze},readPackedFloat:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readFloat());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readFloat());return ze},readPackedDouble:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readDouble());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readDouble());return ze},readPackedFixed32:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readFixed32());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readFixed32());return ze},readPackedSFixed32:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readSFixed32());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readSFixed32());return ze},readPackedFixed64:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readFixed64());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readFixed64());return ze},readPackedSFixed64:function(ze){if(this.type!==Z.Bytes)return ze.push(this.readSFixed64());var St=Se(this);for(ze=ze||[];this.pos<St;)ze.push(this.readSFixed64());return ze},skip:function(ze){var St=ze&7;if(St===Z.Varint)for(;this.buf[this.pos++]>127;);else if(St===Z.Bytes)this.pos=this.readVarint()+this.pos;else if(St===Z.Fixed32)this.pos+=4;else if(St===Z.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+St)},writeTag:function(ze,St){this.writeVarint(ze<<3|St)},realloc:function(ze){for(var St=this.length||16;St<this.pos+ze;)St*=2;if(St!==this.length){var we=new Uint8Array(St);we.set(this.buf),this.buf=we,this.length=St}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ze){this.realloc(4),Ae(this.buf,ze,this.pos),this.pos+=4},writeSFixed32:function(ze){this.realloc(4),Ae(this.buf,ze,this.pos),this.pos+=4},writeFixed64:function(ze){this.realloc(8),Ae(this.buf,ze&-1,this.pos),Ae(this.buf,Math.floor(ze*ve),this.pos+4),this.pos+=8},writeSFixed64:function(ze){this.realloc(8),Ae(this.buf,ze&-1,this.pos),Ae(this.buf,Math.floor(ze*ve),this.pos+4),this.pos+=8},writeVarint:function(ze){if(ze=+ze||0,ze>268435455||ze<0){Ge(ze,this);return}this.realloc(4),this.buf[this.pos++]=ze&127|(ze>127?128:0),!(ze<=127)&&(this.buf[this.pos++]=(ze>>>=7)&127|(ze>127?128:0),!(ze<=127)&&(this.buf[this.pos++]=(ze>>>=7)&127|(ze>127?128:0),!(ze<=127)&&(this.buf[this.pos++]=ze>>>7&127)))},writeSVarint:function(ze){this.writeVarint(ze<0?-ze*2-1:ze*2)},writeBoolean:function(ze){this.writeVarint(!!ze)},writeString:function(ze){ze=String(ze),this.realloc(ze.length*4),this.pos++;var St=this.pos;this.pos=cn(this.buf,ze,this.pos);var we=this.pos-St;we>=128&&Le(St,we,this),this.pos=St-1,this.writeVarint(we),this.pos+=we},writeFloat:function(ze){this.realloc(4),J.write(this.buf,ze,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ze){this.realloc(8),J.write(this.buf,ze,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ze){var St=ze.length;this.writeVarint(St),this.realloc(St);for(var we=0;we<St;we++)this.buf[this.pos++]=ze[we]},writeRawMessage:function(ze,St){this.pos++;var we=this.pos;ze(St,this);var nt=this.pos-we;nt>=128&&Le(we,nt,this),this.pos=we-1,this.writeVarint(nt),this.pos+=nt},writeMessage:function(ze,St,we){this.writeTag(ze,Z.Bytes),this.writeRawMessage(St,we)},writePackedVarint:function(ze,St){St.length&&this.writeMessage(ze,be,St)},writePackedSVarint:function(ze,St){St.length&&this.writeMessage(ze,Oe,St)},writePackedBoolean:function(ze,St){St.length&&this.writeMessage(ze,bt,St)},writePackedFloat:function(ze,St){St.length&&this.writeMessage(ze,fe,St)},writePackedDouble:function(ze,St){St.length&&this.writeMessage(ze,He,St)},writePackedFixed32:function(ze,St){St.length&&this.writeMessage(ze,dt,St)},writePackedSFixed32:function(ze,St){St.length&&this.writeMessage(ze,Nt,St)},writePackedFixed64:function(ze,St){St.length&&this.writeMessage(ze,ct,St)},writePackedSFixed64:function(ze,St){St.length&&this.writeMessage(ze,lt,St)},writeBytesField:function(ze,St){this.writeTag(ze,Z.Bytes),this.writeBytes(St)},writeFixed32Field:function(ze,St){this.writeTag(ze,Z.Fixed32),this.writeFixed32(St)},writeSFixed32Field:function(ze,St){this.writeTag(ze,Z.Fixed32),this.writeSFixed32(St)},writeFixed64Field:function(ze,St){this.writeTag(ze,Z.Fixed64),this.writeFixed64(St)},writeSFixed64Field:function(ze,St){this.writeTag(ze,Z.Fixed64),this.writeSFixed64(St)},writeVarintField:function(ze,St){this.writeTag(ze,Z.Varint),this.writeVarint(St)},writeSVarintField:function(ze,St){this.writeTag(ze,Z.Varint),this.writeSVarint(St)},writeStringField:function(ze,St){this.writeTag(ze,Z.Bytes),this.writeString(St)},writeFloatField:function(ze,St){this.writeTag(ze,Z.Fixed32),this.writeFloat(St)},writeDoubleField:function(ze,St){this.writeTag(ze,Z.Fixed64),this.writeDouble(St)},writeBooleanField:function(ze,St){this.writeVarintField(ze,!!St)}};function ae(ze,St,we){var nt=we.buf,Xe,Ze;if(Ze=nt[we.pos++],Xe=(Ze&112)>>4,Ze<128||(Ze=nt[we.pos++],Xe|=(Ze&127)<<3,Ze<128)||(Ze=nt[we.pos++],Xe|=(Ze&127)<<10,Ze<128)||(Ze=nt[we.pos++],Xe|=(Ze&127)<<17,Ze<128)||(Ze=nt[we.pos++],Xe|=(Ze&127)<<24,Ze<128)||(Ze=nt[we.pos++],Xe|=(Ze&1)<<31,Ze<128))return oe(ze,Xe,St);throw new Error("Expected varint not more than 10 bytes")}function Se(ze){return ze.type===Z.Bytes?ze.readVarint()+ze.pos:ze.pos+1}function oe(ze,St,we){return we?St*4294967296+(ze>>>0):(St>>>0)*4294967296+(ze>>>0)}function Ge(ze,St){var we,nt;if(ze>=0?(we=ze%4294967296|0,nt=ze/4294967296|0):(we=~(-ze%4294967296),nt=~(-ze/4294967296),we^4294967295?we=we+1|0:(we=0,nt=nt+1|0)),ze>=18446744073709552e3||ze<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");St.realloc(10),ee(we,nt,St),me(nt,St)}function ee(ze,St,we){we.buf[we.pos++]=ze&127|128,ze>>>=7,we.buf[we.pos++]=ze&127|128,ze>>>=7,we.buf[we.pos++]=ze&127|128,ze>>>=7,we.buf[we.pos++]=ze&127|128,ze>>>=7,we.buf[we.pos]=ze&127}function me(ze,St){var we=(ze&7)<<4;St.buf[St.pos++]|=we|((ze>>>=3)?128:0),ze&&(St.buf[St.pos++]=ze&127|((ze>>>=7)?128:0),ze&&(St.buf[St.pos++]=ze&127|((ze>>>=7)?128:0),ze&&(St.buf[St.pos++]=ze&127|((ze>>>=7)?128:0),ze&&(St.buf[St.pos++]=ze&127|((ze>>>=7)?128:0),ze&&(St.buf[St.pos++]=ze&127)))))}function Le(ze,St,we){var nt=St<=16383?1:St<=2097151?2:St<=268435455?3:Math.floor(Math.log(St)/(Math.LN2*7));we.realloc(nt);for(var Xe=we.pos-1;Xe>=ze;Xe--)we.buf[Xe+nt]=we.buf[Xe]}function be(ze,St){for(var we=0;we<ze.length;we++)St.writeVarint(ze[we])}function Oe(ze,St){for(var we=0;we<ze.length;we++)St.writeSVarint(ze[we])}function fe(ze,St){for(var we=0;we<ze.length;we++)St.writeFloat(ze[we])}function He(ze,St){for(var we=0;we<ze.length;we++)St.writeDouble(ze[we])}function bt(ze,St){for(var we=0;we<ze.length;we++)St.writeBoolean(ze[we])}function dt(ze,St){for(var we=0;we<ze.length;we++)St.writeFixed32(ze[we])}function Nt(ze,St){for(var we=0;we<ze.length;we++)St.writeSFixed32(ze[we])}function ct(ze,St){for(var we=0;we<ze.length;we++)St.writeFixed64(ze[we])}function lt(ze,St){for(var we=0;we<ze.length;we++)St.writeSFixed64(ze[we])}function Ie(ze,St){return(ze[St]|ze[St+1]<<8|ze[St+2]<<16)+ze[St+3]*16777216}function Ae(ze,St,we){ze[we]=St,ze[we+1]=St>>>8,ze[we+2]=St>>>16,ze[we+3]=St>>>24}function pt(ze,St){return(ze[St]|ze[St+1]<<8|ze[St+2]<<16)+(ze[St+3]<<24)}function ut(ze,St,we){for(var nt="",Xe=St;Xe<we;){var Ze=ze[Xe],Rt=null,yt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(Xe+yt>we)break;var Me,Gt,ln;yt===1?Ze<128&&(Rt=Ze):yt===2?(Me=ze[Xe+1],(Me&192)===128&&(Rt=(Ze&31)<<6|Me&63,Rt<=127&&(Rt=null))):yt===3?(Me=ze[Xe+1],Gt=ze[Xe+2],(Me&192)===128&&(Gt&192)===128&&(Rt=(Ze&15)<<12|(Me&63)<<6|Gt&63,(Rt<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null))):yt===4&&(Me=ze[Xe+1],Gt=ze[Xe+2],ln=ze[Xe+3],(Me&192)===128&&(Gt&192)===128&&(ln&192)===128&&(Rt=(Ze&15)<<18|(Me&63)<<12|(Gt&63)<<6|ln&63,(Rt<=65535||Rt>=1114112)&&(Rt=null))),Rt===null?(Rt=65533,yt=1):Rt>65535&&(Rt-=65536,nt+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|Rt&1023),nt+=String.fromCharCode(Rt),Xe+=yt}return nt}function Et(ze,St,we){return se.decode(ze.subarray(St,we))}function cn(ze,St,we){for(var nt=0,Xe,Ze;nt<St.length;nt++){if(Xe=St.charCodeAt(nt),Xe>55295&&Xe<57344)if(Ze)if(Xe<56320){ze[we++]=239,ze[we++]=191,ze[we++]=189,Ze=Xe;continue}else Xe=Ze-55296<<10|Xe-56320|65536,Ze=null;else{Xe>56319||nt+1===St.length?(ze[we++]=239,ze[we++]=191,ze[we++]=189):Ze=Xe;continue}else Ze&&(ze[we++]=239,ze[we++]=191,ze[we++]=189,Ze=null);Xe<128?ze[we++]=Xe:(Xe<2048?ze[we++]=Xe>>6|192:(Xe<65536?ze[we++]=Xe>>12|224:(ze[we++]=Xe>>18|240,ze[we++]=Xe>>12&63|128),ze[we++]=Xe>>6&63|128),ze[we++]=Xe&63|128)}return we}},73807:function(Ht){"use strict";var W=Ht.exports;Ht.exports.isNumber=function(D){return typeof D=="number"},Ht.exports.findMin=function(D){if(D.length===0)return 1/0;for(var J=D[0],Z=1;Z<D.length;Z++)J=Math.min(J,D[Z]);return J},Ht.exports.findMax=function(D){if(D.length===0)return-1/0;for(var J=D[0],Z=1;Z<D.length;Z++)J=Math.max(J,D[Z]);return J},Ht.exports.findMinMulti=function(D){for(var J=W.findMin(D[0]),Z=1;Z<D.length;Z++)J=Math.min(J,W.findMin(D[Z]));return J},Ht.exports.findMaxMulti=function(D){for(var J=W.findMax(D[0]),Z=1;Z<D.length;Z++)J=Math.max(J,W.findMax(D[Z]));return J},Ht.exports.inside=function(D,J,Z){return D<=Z&&Z<=J}},53843:function(Ht,W,D){"use strict";var J=50,Z=2,E=Math.log(2),ve=Ht.exports,te=D(73807);function se(Se){return 1-Math.abs(Se)}Ht.exports.getUnifiedMinMax=function(Se,oe){return ve.getUnifiedMinMaxMulti([Se],oe)},Ht.exports.getUnifiedMinMaxMulti=function(Se,oe){oe=oe||{};var Ge=!1,ee=!1,me=te.isNumber(oe.width)?oe.width:Z,Le=te.isNumber(oe.size)?oe.size:J,be=te.isNumber(oe.min)?oe.min:(Ge=!0,te.findMinMulti(Se)),Oe=te.isNumber(oe.max)?oe.max:(ee=!0,te.findMaxMulti(Se)),fe=Oe-be,He=fe/(Le-1);return Ge&&(be=be-2*me*He),ee&&(Oe=Oe+2*me*He),{min:be,max:Oe}},Ht.exports.create=function(Se,oe){if(oe=oe||{},!Se||Se.length===0)return[];var Ge=te.isNumber(oe.size)?oe.size:J,ee=te.isNumber(oe.width)?oe.width:Z,me=ve.getUnifiedMinMax(Se,{size:Ge,width:ee,min:oe.min,max:oe.max}),Le=me.min,be=me.max,Oe=be-Le,fe=Oe/(Ge-1);if(Oe===0)return[{x:Le,y:1}];for(var He=[],bt=0;bt<Ge;bt++)He.push({x:Le+bt*fe,y:0});var dt=function(Et){return Math.floor((Et-Le)/fe)},Nt=ae(se,ee),ct=Nt[ee],lt=Nt[ee-1]-Nt[ee-2],Ie=0;Se.forEach(function(Et){var cn=dt(Et);if(!(cn+ee<0||cn-ee>=He.length)){var ze=Math.max(cn-ee,0),St=cn,we=Math.min(cn+ee,He.length-1),nt=ze-(cn-ee),Xe=cn+ee-we,Ze=Nt[-ee-1+nt]||0,Rt=Nt[-ee-1+Xe]||0,yt=ct/(ct-Ze-Rt);nt>0&&(Ie+=yt*(nt-1)*lt);var Me=Math.max(0,cn-ee+1);te.inside(0,He.length-1,Me)&&(He[Me].y+=yt*1*lt),te.inside(0,He.length-1,St+1)&&(He[St+1].y-=yt*2*lt),te.inside(0,He.length-1,we+1)&&(He[we+1].y+=yt*1*lt)}});var Ae=Ie,pt=0,ut=0;return He.forEach(function(Et){pt+=Et.y,Ae+=pt,Et.y=Ae,ut+=Ae}),ut>0&&He.forEach(function(Et){Et.y/=ut}),He};function ae(Se,oe){for(var Ge={},ee=0,me=-oe;me<=oe;me++)ee+=Se(me/oe),Ge[me]=ee;return Ge}Ht.exports.getExpectedValueFromPdf=function(Se){if(!(!Se||Se.length===0)){var oe=0;return Se.forEach(function(Ge){oe+=Ge.x*Ge.y}),oe}},Ht.exports.getXWithLeftTailArea=function(Se,oe){if(!(!Se||Se.length===0)){for(var Ge=0,ee=0,me=0;me<Se.length&&(ee=me,Ge+=Se[me].y,!(Ge>=oe));me++);return Se[ee].x}},Ht.exports.getPerplexity=function(Se){if(!(!Se||Se.length===0)){var oe=0;return Se.forEach(function(Ge){var ee=Math.log(Ge.y);isFinite(ee)&&(oe+=Ge.y*ee)}),oe=-oe/E,Math.pow(2,oe)}}},32676:function(Ht,W,D){var J=D(34155);(function(Z,E){Ht.exports=E()})(this,function(){"use strict";function Z(ht,ye){var Be={label:0,sent:function(){if(Ot[0]&1)throw Ot[1];return Ot[1]},trys:[],ops:[]},rt,Mt,Ot,En;return En={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(En[Symbol.iterator]=function(){return this}),En;function $n(qn){return function(Ce){return yr([qn,Ce])}}function yr(qn){if(rt)throw new TypeError("Generator is already executing.");for(;Be;)try{if(rt=1,Mt&&(Ot=qn[0]&2?Mt.return:qn[0]?Mt.throw||((Ot=Mt.return)&&Ot.call(Mt),0):Mt.next)&&!(Ot=Ot.call(Mt,qn[1])).done)return Ot;switch(Mt=0,Ot&&(qn=[qn[0]&2,Ot.value]),qn[0]){case 0:case 1:Ot=qn;break;case 4:return Be.label++,{value:qn[1],done:!1};case 5:Be.label++,Mt=qn[1],qn=[0];continue;case 7:qn=Be.ops.pop(),Be.trys.pop();continue;default:if(Ot=Be.trys,!(Ot=Ot.length>0&&Ot[Ot.length-1])&&(qn[0]===6||qn[0]===2)){Be=0;continue}if(qn[0]===3&&(!Ot||qn[1]>Ot[0]&&qn[1]<Ot[3])){Be.label=qn[1];break}if(qn[0]===6&&Be.label<Ot[1]){Be.label=Ot[1],Ot=qn;break}if(Ot&&Be.label<Ot[2]){Be.label=Ot[2],Be.ops.push(qn);break}Ot[2]&&Be.ops.pop(),Be.trys.pop();continue}qn=ye.call(ht,Be)}catch(Ce){qn=[6,Ce],Mt=0}finally{rt=Ot=0}if(qn[0]&5)throw qn[1];return{value:qn[0]?qn[1]:void 0,done:!0}}}var E=function(){function ht(ye,Be){this.next=null,this.key=ye,this.data=Be,this.left=null,this.right=null}return ht}();function ve(ht,ye){return ht>ye?1:ht<ye?-1:0}function te(ht,ye,Be){for(var rt=new E(null,null),Mt=rt,Ot=rt;;){var En=Be(ht,ye.key);if(En<0){if(ye.left===null)break;if(Be(ht,ye.left.key)<0){var $n=ye.left;if(ye.left=$n.right,$n.right=ye,ye=$n,ye.left===null)break}Ot.left=ye,Ot=ye,ye=ye.left}else if(En>0){if(ye.right===null)break;if(Be(ht,ye.right.key)>0){var $n=ye.right;if(ye.right=$n.left,$n.left=ye,ye=$n,ye.right===null)break}Mt.right=ye,Mt=ye,ye=ye.right}else break}return Mt.right=ye.left,Ot.left=ye.right,ye.left=rt.right,ye.right=rt.left,ye}function se(ht,ye,Be,rt){var Mt=new E(ht,ye);if(Be===null)return Mt.left=Mt.right=null,Mt;Be=te(ht,Be,rt);var Ot=rt(ht,Be.key);return Ot<0?(Mt.left=Be.left,Mt.right=Be,Be.left=null):Ot>=0&&(Mt.right=Be.right,Mt.left=Be,Be.right=null),Mt}function ae(ht,ye,Be){var rt=null,Mt=null;if(ye){ye=te(ht,ye,Be);var Ot=Be(ye.key,ht);Ot===0?(rt=ye.left,Mt=ye.right):Ot<0?(Mt=ye.right,ye.right=null,rt=ye):(rt=ye.left,ye.left=null,Mt=ye)}return{left:rt,right:Mt}}function Se(ht,ye,Be){return ye===null?ht:(ht===null||(ye=te(ht.key,ye,Be),ye.left=ht),ye)}function oe(ht,ye,Be,rt,Mt){if(ht){rt(""+ye+(Be?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Mt(ht)+`
`);var Ot=ye+(Be?"    ":"\u2502   ");ht.left&&oe(ht.left,Ot,!1,rt,Mt),ht.right&&oe(ht.right,Ot,!0,rt,Mt)}}var Ge=function(){function ht(ye){ye===void 0&&(ye=ve),this._root=null,this._size=0,this._comparator=ye}return ht.prototype.insert=function(ye,Be){return this._size++,this._root=se(ye,Be,this._root,this._comparator)},ht.prototype.add=function(ye,Be){var rt=new E(ye,Be);this._root===null&&(rt.left=rt.right=null,this._size++,this._root=rt);var Mt=this._comparator,Ot=te(ye,this._root,Mt),En=Mt(ye,Ot.key);return En===0?this._root=Ot:(En<0?(rt.left=Ot.left,rt.right=Ot,Ot.left=null):En>0&&(rt.right=Ot.right,rt.left=Ot,Ot.right=null),this._size++,this._root=rt),this._root},ht.prototype.remove=function(ye){this._root=this._remove(ye,this._root,this._comparator)},ht.prototype._remove=function(ye,Be,rt){var Mt;if(Be===null)return null;Be=te(ye,Be,rt);var Ot=rt(ye,Be.key);return Ot===0?(Be.left===null?Mt=Be.right:(Mt=te(ye,Be.left,rt),Mt.right=Be.right),this._size--,Mt):Be},ht.prototype.pop=function(){var ye=this._root;if(ye){for(;ye.left;)ye=ye.left;return this._root=te(ye.key,this._root,this._comparator),this._root=this._remove(ye.key,this._root,this._comparator),{key:ye.key,data:ye.data}}return null},ht.prototype.findStatic=function(ye){for(var Be=this._root,rt=this._comparator;Be;){var Mt=rt(ye,Be.key);if(Mt===0)return Be;Mt<0?Be=Be.left:Be=Be.right}return null},ht.prototype.find=function(ye){return this._root&&(this._root=te(ye,this._root,this._comparator),this._comparator(ye,this._root.key)!==0)?null:this._root},ht.prototype.contains=function(ye){for(var Be=this._root,rt=this._comparator;Be;){var Mt=rt(ye,Be.key);if(Mt===0)return!0;Mt<0?Be=Be.left:Be=Be.right}return!1},ht.prototype.forEach=function(ye,Be){for(var rt=this._root,Mt=[],Ot=!1;!Ot;)rt!==null?(Mt.push(rt),rt=rt.left):Mt.length!==0?(rt=Mt.pop(),ye.call(Be,rt),rt=rt.right):Ot=!0;return this},ht.prototype.range=function(ye,Be,rt,Mt){for(var Ot=[],En=this._comparator,$n=this._root,yr;Ot.length!==0||$n;)if($n)Ot.push($n),$n=$n.left;else{if($n=Ot.pop(),yr=En($n.key,Be),yr>0)break;if(En($n.key,ye)>=0&&rt.call(Mt,$n))return this;$n=$n.right}return this},ht.prototype.keys=function(){var ye=[];return this.forEach(function(Be){var rt=Be.key;return ye.push(rt)}),ye},ht.prototype.values=function(){var ye=[];return this.forEach(function(Be){var rt=Be.data;return ye.push(rt)}),ye},ht.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ht.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ht.prototype.minNode=function(ye){if(ye===void 0&&(ye=this._root),ye)for(;ye.left;)ye=ye.left;return ye},ht.prototype.maxNode=function(ye){if(ye===void 0&&(ye=this._root),ye)for(;ye.right;)ye=ye.right;return ye},ht.prototype.at=function(ye){for(var Be=this._root,rt=!1,Mt=0,Ot=[];!rt;)if(Be)Ot.push(Be),Be=Be.left;else if(Ot.length>0){if(Be=Ot.pop(),Mt===ye)return Be;Mt++,Be=Be.right}else rt=!0;return null},ht.prototype.next=function(ye){var Be=this._root,rt=null;if(ye.right){for(rt=ye.right;rt.left;)rt=rt.left;return rt}for(var Mt=this._comparator;Be;){var Ot=Mt(ye.key,Be.key);if(Ot===0)break;Ot<0?(rt=Be,Be=Be.left):Be=Be.right}return rt},ht.prototype.prev=function(ye){var Be=this._root,rt=null;if(ye.left!==null){for(rt=ye.left;rt.right;)rt=rt.right;return rt}for(var Mt=this._comparator;Be;){var Ot=Mt(ye.key,Be.key);if(Ot===0)break;Ot<0?Be=Be.left:(rt=Be,Be=Be.right)}return rt},ht.prototype.clear=function(){return this._root=null,this._size=0,this},ht.prototype.toList=function(){return Le(this._root)},ht.prototype.load=function(ye,Be,rt){Be===void 0&&(Be=[]),rt===void 0&&(rt=!1);var Mt=ye.length,Ot=this._comparator;if(rt&&fe(ye,Be,0,Mt-1,Ot),this._root===null)this._root=ee(ye,Be,0,Mt),this._size=Mt;else{var En=Oe(this.toList(),me(ye,Be),Ot);Mt=this._size+Mt,this._root=be({head:En},0,Mt)}return this},ht.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ht.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ht.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ht.prototype.toString=function(ye){ye===void 0&&(ye=function(rt){return String(rt.key)});var Be=[];return oe(this._root,"",!0,function(rt){return Be.push(rt)},ye),Be.join("")},ht.prototype.update=function(ye,Be,rt){var Mt=this._comparator,Ot=ae(ye,this._root,Mt),En=Ot.left,$n=Ot.right;Mt(ye,Be)<0?$n=se(Be,rt,$n,Mt):En=se(Be,rt,En,Mt),this._root=Se(En,$n,Mt)},ht.prototype.split=function(ye){return ae(ye,this._root,this._comparator)},ht.prototype[Symbol.iterator]=function(){var ye,Be,rt;return Z(this,function(Mt){switch(Mt.label){case 0:ye=this._root,Be=[],rt=!1,Mt.label=1;case 1:return rt?[3,6]:ye===null?[3,2]:(Be.push(ye),ye=ye.left,[3,5]);case 2:return Be.length===0?[3,4]:(ye=Be.pop(),[4,ye]);case 3:return Mt.sent(),ye=ye.right,[3,5];case 4:rt=!0,Mt.label=5;case 5:return[3,1];case 6:return[2]}})},ht}();function ee(ht,ye,Be,rt){var Mt=rt-Be;if(Mt>0){var Ot=Be+Math.floor(Mt/2),En=ht[Ot],$n=ye[Ot],yr=new E(En,$n);return yr.left=ee(ht,ye,Be,Ot),yr.right=ee(ht,ye,Ot+1,rt),yr}return null}function me(ht,ye){for(var Be=new E(null,null),rt=Be,Mt=0;Mt<ht.length;Mt++)rt=rt.next=new E(ht[Mt],ye[Mt]);return rt.next=null,Be.next}function Le(ht){for(var ye=ht,Be=[],rt=!1,Mt=new E(null,null),Ot=Mt;!rt;)ye?(Be.push(ye),ye=ye.left):Be.length>0?(ye=Ot=Ot.next=Be.pop(),ye=ye.right):rt=!0;return Ot.next=null,Mt.next}function be(ht,ye,Be){var rt=Be-ye;if(rt>0){var Mt=ye+Math.floor(rt/2),Ot=be(ht,ye,Mt),En=ht.head;return En.left=Ot,ht.head=ht.head.next,En.right=be(ht,Mt+1,Be),En}return null}function Oe(ht,ye,Be){for(var rt=new E(null,null),Mt=rt,Ot=ht,En=ye;Ot!==null&&En!==null;)Be(Ot.key,En.key)<0?(Mt.next=Ot,Ot=Ot.next):(Mt.next=En,En=En.next),Mt=Mt.next;return Ot!==null?Mt.next=Ot:En!==null&&(Mt.next=En),rt.next}function fe(ht,ye,Be,rt,Mt){if(!(Be>=rt)){for(var Ot=ht[Be+rt>>1],En=Be-1,$n=rt+1;;){do En++;while(Mt(ht[En],Ot)<0);do $n--;while(Mt(ht[$n],Ot)>0);if(En>=$n)break;var yr=ht[En];ht[En]=ht[$n],ht[$n]=yr,yr=ye[En],ye[En]=ye[$n],ye[$n]=yr}fe(ht,ye,Be,$n,Mt),fe(ht,ye,$n+1,rt,Mt)}}const He=(ht,ye)=>ht.ll.x<=ye.x&&ye.x<=ht.ur.x&&ht.ll.y<=ye.y&&ye.y<=ht.ur.y,bt=(ht,ye)=>{if(ye.ur.x<ht.ll.x||ht.ur.x<ye.ll.x||ye.ur.y<ht.ll.y||ht.ur.y<ye.ll.y)return null;const Be=ht.ll.x<ye.ll.x?ye.ll.x:ht.ll.x,rt=ht.ur.x<ye.ur.x?ht.ur.x:ye.ur.x,Mt=ht.ll.y<ye.ll.y?ye.ll.y:ht.ll.y,Ot=ht.ur.y<ye.ur.y?ht.ur.y:ye.ur.y;return{ll:{x:Be,y:Mt},ur:{x:rt,y:Ot}}};let dt=Number.EPSILON;dt===void 0&&(dt=Math.pow(2,-52));const Nt=dt*dt,ct=(ht,ye)=>{if(-dt<ht&&ht<dt&&-dt<ye&&ye<dt)return 0;const Be=ht-ye;return Be*Be<Nt*ht*ye?0:ht<ye?-1:1};class lt{constructor(){this.reset()}reset(){this.xRounder=new Ie,this.yRounder=new Ie}round(ye,Be){return{x:this.xRounder.round(ye),y:this.yRounder.round(Be)}}}class Ie{constructor(){this.tree=new Ge,this.round(0)}round(ye){const Be=this.tree.add(ye),rt=this.tree.prev(Be);if(rt!==null&&ct(Be.key,rt.key)===0)return this.tree.remove(ye),rt.key;const Mt=this.tree.next(Be);return Mt!==null&&ct(Be.key,Mt.key)===0?(this.tree.remove(ye),Mt.key):ye}}const Ae=new lt,pt=11102230246251565e-32,ut=134217729,Et=(3+8*pt)*pt;function cn(ht,ye,Be,rt,Mt){let Ot,En,$n,yr,qn=ye[0],Ce=rt[0],xe=0,ke=0;Ce>qn==Ce>-qn?(Ot=qn,qn=ye[++xe]):(Ot=Ce,Ce=rt[++ke]);let et=0;if(xe<ht&&ke<Be)for(Ce>qn==Ce>-qn?(En=qn+Ot,$n=Ot-(En-qn),qn=ye[++xe]):(En=Ce+Ot,$n=Ot-(En-Ce),Ce=rt[++ke]),Ot=En,$n!==0&&(Mt[et++]=$n);xe<ht&&ke<Be;)Ce>qn==Ce>-qn?(En=Ot+qn,yr=En-Ot,$n=Ot-(En-yr)+(qn-yr),qn=ye[++xe]):(En=Ot+Ce,yr=En-Ot,$n=Ot-(En-yr)+(Ce-yr),Ce=rt[++ke]),Ot=En,$n!==0&&(Mt[et++]=$n);for(;xe<ht;)En=Ot+qn,yr=En-Ot,$n=Ot-(En-yr)+(qn-yr),qn=ye[++xe],Ot=En,$n!==0&&(Mt[et++]=$n);for(;ke<Be;)En=Ot+Ce,yr=En-Ot,$n=Ot-(En-yr)+(Ce-yr),Ce=rt[++ke],Ot=En,$n!==0&&(Mt[et++]=$n);return(Ot!==0||et===0)&&(Mt[et++]=Ot),et}function ze(ht,ye){let Be=ye[0];for(let rt=1;rt<ht;rt++)Be+=ye[rt];return Be}function St(ht){return new Float64Array(ht)}const we=(3+16*pt)*pt,nt=(2+12*pt)*pt,Xe=(9+64*pt)*pt*pt,Ze=St(4),Rt=St(8),yt=St(12),Me=St(16),Gt=St(4);function ln(ht,ye,Be,rt,Mt,Ot,En){let $n,yr,qn,Ce,xe,ke,et,Tt,Yt,pn,_t,qt,Qn,_r,Vr,pr,Ur,mi;const wi=ht-Mt,Sr=Be-Mt,Ti=ye-Ot,hi=rt-Ot;_r=wi*hi,ke=ut*wi,et=ke-(ke-wi),Tt=wi-et,ke=ut*hi,Yt=ke-(ke-hi),pn=hi-Yt,Vr=Tt*pn-(_r-et*Yt-Tt*Yt-et*pn),pr=Ti*Sr,ke=ut*Ti,et=ke-(ke-Ti),Tt=Ti-et,ke=ut*Sr,Yt=ke-(ke-Sr),pn=Sr-Yt,Ur=Tt*pn-(pr-et*Yt-Tt*Yt-et*pn),_t=Vr-Ur,xe=Vr-_t,Ze[0]=Vr-(_t+xe)+(xe-Ur),qt=_r+_t,xe=qt-_r,Qn=_r-(qt-xe)+(_t-xe),_t=Qn-pr,xe=Qn-_t,Ze[1]=Qn-(_t+xe)+(xe-pr),mi=qt+_t,xe=mi-qt,Ze[2]=qt-(mi-xe)+(_t-xe),Ze[3]=mi;let si=ze(4,Ze),Mo=nt*En;if(si>=Mo||-si>=Mo||(xe=ht-wi,$n=ht-(wi+xe)+(xe-Mt),xe=Be-Sr,qn=Be-(Sr+xe)+(xe-Mt),xe=ye-Ti,yr=ye-(Ti+xe)+(xe-Ot),xe=rt-hi,Ce=rt-(hi+xe)+(xe-Ot),$n===0&&yr===0&&qn===0&&Ce===0)||(Mo=Xe*En+Et*Math.abs(si),si+=wi*Ce+hi*$n-(Ti*qn+Sr*yr),si>=Mo||-si>=Mo))return si;_r=$n*hi,ke=ut*$n,et=ke-(ke-$n),Tt=$n-et,ke=ut*hi,Yt=ke-(ke-hi),pn=hi-Yt,Vr=Tt*pn-(_r-et*Yt-Tt*Yt-et*pn),pr=yr*Sr,ke=ut*yr,et=ke-(ke-yr),Tt=yr-et,ke=ut*Sr,Yt=ke-(ke-Sr),pn=Sr-Yt,Ur=Tt*pn-(pr-et*Yt-Tt*Yt-et*pn),_t=Vr-Ur,xe=Vr-_t,Gt[0]=Vr-(_t+xe)+(xe-Ur),qt=_r+_t,xe=qt-_r,Qn=_r-(qt-xe)+(_t-xe),_t=Qn-pr,xe=Qn-_t,Gt[1]=Qn-(_t+xe)+(xe-pr),mi=qt+_t,xe=mi-qt,Gt[2]=qt-(mi-xe)+(_t-xe),Gt[3]=mi;const bi=cn(4,Ze,4,Gt,Rt);_r=wi*Ce,ke=ut*wi,et=ke-(ke-wi),Tt=wi-et,ke=ut*Ce,Yt=ke-(ke-Ce),pn=Ce-Yt,Vr=Tt*pn-(_r-et*Yt-Tt*Yt-et*pn),pr=Ti*qn,ke=ut*Ti,et=ke-(ke-Ti),Tt=Ti-et,ke=ut*qn,Yt=ke-(ke-qn),pn=qn-Yt,Ur=Tt*pn-(pr-et*Yt-Tt*Yt-et*pn),_t=Vr-Ur,xe=Vr-_t,Gt[0]=Vr-(_t+xe)+(xe-Ur),qt=_r+_t,xe=qt-_r,Qn=_r-(qt-xe)+(_t-xe),_t=Qn-pr,xe=Qn-_t,Gt[1]=Qn-(_t+xe)+(xe-pr),mi=qt+_t,xe=mi-qt,Gt[2]=qt-(mi-xe)+(_t-xe),Gt[3]=mi;const na=cn(bi,Rt,4,Gt,yt);_r=$n*Ce,ke=ut*$n,et=ke-(ke-$n),Tt=$n-et,ke=ut*Ce,Yt=ke-(ke-Ce),pn=Ce-Yt,Vr=Tt*pn-(_r-et*Yt-Tt*Yt-et*pn),pr=yr*qn,ke=ut*yr,et=ke-(ke-yr),Tt=yr-et,ke=ut*qn,Yt=ke-(ke-qn),pn=qn-Yt,Ur=Tt*pn-(pr-et*Yt-Tt*Yt-et*pn),_t=Vr-Ur,xe=Vr-_t,Gt[0]=Vr-(_t+xe)+(xe-Ur),qt=_r+_t,xe=qt-_r,Qn=_r-(qt-xe)+(_t-xe),_t=Qn-pr,xe=Qn-_t,Gt[1]=Qn-(_t+xe)+(xe-pr),mi=qt+_t,xe=mi-qt,Gt[2]=qt-(mi-xe)+(_t-xe),Gt[3]=mi;const _a=cn(na,yt,4,Gt,Me);return Me[_a-1]}function Ln(ht,ye,Be,rt,Mt,Ot){const En=(ye-Ot)*(Be-Mt),$n=(ht-Mt)*(rt-Ot),yr=En-$n,qn=Math.abs(En+$n);return Math.abs(yr)>=we*qn?yr:-ln(ht,ye,Be,rt,Mt,Ot,qn)}const kn=(ht,ye)=>ht.x*ye.y-ht.y*ye.x,lr=(ht,ye)=>ht.x*ye.x+ht.y*ye.y,zt=(ht,ye,Be)=>{const rt=Ln(ht.x,ht.y,ye.x,ye.y,Be.x,Be.y);return rt>0?-1:rt<0?1:0},Kt=ht=>Math.sqrt(lr(ht,ht)),yn=(ht,ye,Be)=>{const rt={x:ye.x-ht.x,y:ye.y-ht.y},Mt={x:Be.x-ht.x,y:Be.y-ht.y};return kn(Mt,rt)/Kt(Mt)/Kt(rt)},Kn=(ht,ye,Be)=>{const rt={x:ye.x-ht.x,y:ye.y-ht.y},Mt={x:Be.x-ht.x,y:Be.y-ht.y};return lr(Mt,rt)/Kt(Mt)/Kt(rt)},rn=(ht,ye,Be)=>ye.y===0?null:{x:ht.x+ye.x/ye.y*(Be-ht.y),y:Be},Wt=(ht,ye,Be)=>ye.x===0?null:{x:Be,y:ht.y+ye.y/ye.x*(Be-ht.x)},Pt=(ht,ye,Be,rt)=>{if(ye.x===0)return Wt(Be,rt,ht.x);if(rt.x===0)return Wt(ht,ye,Be.x);if(ye.y===0)return rn(Be,rt,ht.y);if(rt.y===0)return rn(ht,ye,Be.y);const Mt=kn(ye,rt);if(Mt==0)return null;const Ot={x:Be.x-ht.x,y:Be.y-ht.y},En=kn(Ot,ye)/Mt,$n=kn(Ot,rt)/Mt,yr=ht.x+$n*ye.x,qn=Be.x+En*rt.x,Ce=ht.y+$n*ye.y,xe=Be.y+En*rt.y,ke=(yr+qn)/2,et=(Ce+xe)/2;return{x:ke,y:et}};class Pe{static compare(ye,Be){const rt=Pe.comparePoints(ye.point,Be.point);return rt!==0?rt:(ye.point!==Be.point&&ye.link(Be),ye.isLeft!==Be.isLeft?ye.isLeft?1:-1:Bt.compare(ye.segment,Be.segment))}static comparePoints(ye,Be){return ye.x<Be.x?-1:ye.x>Be.x?1:ye.y<Be.y?-1:ye.y>Be.y?1:0}constructor(ye,Be){ye.events===void 0?ye.events=[this]:ye.events.push(this),this.point=ye,this.isLeft=Be}link(ye){if(ye.point===this.point)throw new Error("Tried to link already linked events");const Be=ye.point.events;for(let rt=0,Mt=Be.length;rt<Mt;rt++){const Ot=Be[rt];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}checkForConsuming(){const ye=this.point.events.length;for(let Be=0;Be<ye;Be++){const rt=this.point.events[Be];if(rt.segment.consumedBy===void 0)for(let Mt=Be+1;Mt<ye;Mt++){const Ot=this.point.events[Mt];Ot.consumedBy===void 0&&rt.otherSE.point.events===Ot.otherSE.point.events&&rt.segment.consume(Ot.segment)}}}getAvailableLinkedEvents(){const ye=[];for(let Be=0,rt=this.point.events.length;Be<rt;Be++){const Mt=this.point.events[Be];Mt!==this&&!Mt.segment.ringOut&&Mt.segment.isInResult()&&ye.push(Mt)}return ye}getLeftmostComparator(ye){const Be=new Map,rt=Mt=>{const Ot=Mt.otherSE;Be.set(Mt,{sine:yn(this.point,ye.point,Ot.point),cosine:Kn(this.point,ye.point,Ot.point)})};return(Mt,Ot)=>{Be.has(Mt)||rt(Mt),Be.has(Ot)||rt(Ot);const{sine:En,cosine:$n}=Be.get(Mt),{sine:yr,cosine:qn}=Be.get(Ot);return En>=0&&yr>=0?$n<qn?1:$n>qn?-1:0:En<0&&yr<0?$n<qn?-1:$n>qn?1:0:yr<En?-1:yr>En?1:0}}}let Qe=0;class Bt{static compare(ye,Be){const rt=ye.leftSE.point.x,Mt=Be.leftSE.point.x,Ot=ye.rightSE.point.x,En=Be.rightSE.point.x;if(En<rt)return 1;if(Ot<Mt)return-1;const $n=ye.leftSE.point.y,yr=Be.leftSE.point.y,qn=ye.rightSE.point.y,Ce=Be.rightSE.point.y;if(rt<Mt){if(yr<$n&&yr<qn)return 1;if(yr>$n&&yr>qn)return-1;const xe=ye.comparePoint(Be.leftSE.point);if(xe<0)return 1;if(xe>0)return-1;const ke=Be.comparePoint(ye.rightSE.point);return ke!==0?ke:-1}if(rt>Mt){if($n<yr&&$n<Ce)return-1;if($n>yr&&$n>Ce)return 1;const xe=Be.comparePoint(ye.leftSE.point);if(xe!==0)return xe;const ke=ye.comparePoint(Be.rightSE.point);return ke<0?1:ke>0?-1:1}if($n<yr)return-1;if($n>yr)return 1;if(Ot<En){const xe=Be.comparePoint(ye.rightSE.point);if(xe!==0)return xe}if(Ot>En){const xe=ye.comparePoint(Be.rightSE.point);if(xe<0)return 1;if(xe>0)return-1}if(Ot!==En){const xe=qn-$n,ke=Ot-rt,et=Ce-yr,Tt=En-Mt;if(xe>ke&&et<Tt)return 1;if(xe<ke&&et>Tt)return-1}return Ot>En?1:Ot<En||qn<Ce?-1:qn>Ce?1:ye.id<Be.id?-1:ye.id>Be.id?1:0}constructor(ye,Be,rt,Mt){this.id=++Qe,this.leftSE=ye,ye.segment=this,ye.otherSE=Be,this.rightSE=Be,Be.segment=this,Be.otherSE=ye,this.rings=rt,this.windings=Mt}static fromRing(ye,Be,rt){let Mt,Ot,En;const $n=Pe.comparePoints(ye,Be);if($n<0)Mt=ye,Ot=Be,En=1;else if($n>0)Mt=Be,Ot=ye,En=-1;else throw new Error(`Tried to create degenerate segment at [${ye.x}, ${ye.y}]`);const yr=new Pe(Mt,!0),qn=new Pe(Ot,!1);return new Bt(yr,qn,[rt],[En])}replaceRightSE(ye){this.rightSE=ye,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const ye=this.leftSE.point.y,Be=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ye<Be?ye:Be},ur:{x:this.rightSE.point.x,y:ye>Be?ye:Be}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(ye){return ye.x===this.leftSE.point.x&&ye.y===this.leftSE.point.y||ye.x===this.rightSE.point.x&&ye.y===this.rightSE.point.y}comparePoint(ye){if(this.isAnEndpoint(ye))return 0;const Be=this.leftSE.point,rt=this.rightSE.point,Mt=this.vector();if(Be.x===rt.x)return ye.x===Be.x?0:ye.x<Be.x?1:-1;const Ot=(ye.y-Be.y)/Mt.y,En=Be.x+Ot*Mt.x;if(ye.x===En)return 0;const $n=(ye.x-Be.x)/Mt.x,yr=Be.y+$n*Mt.y;return ye.y===yr?0:ye.y<yr?-1:1}getIntersection(ye){const Be=this.bbox(),rt=ye.bbox(),Mt=bt(Be,rt);if(Mt===null)return null;const Ot=this.leftSE.point,En=this.rightSE.point,$n=ye.leftSE.point,yr=ye.rightSE.point,qn=He(Be,$n)&&this.comparePoint($n)===0,Ce=He(rt,Ot)&&ye.comparePoint(Ot)===0,xe=He(Be,yr)&&this.comparePoint(yr)===0,ke=He(rt,En)&&ye.comparePoint(En)===0;if(Ce&&qn)return ke&&!xe?En:!ke&&xe?yr:null;if(Ce)return xe&&Ot.x===yr.x&&Ot.y===yr.y?null:Ot;if(qn)return ke&&En.x===$n.x&&En.y===$n.y?null:$n;if(ke&&xe)return null;if(ke)return En;if(xe)return yr;const et=Pt(Ot,this.vector(),$n,ye.vector());return et===null||!He(Mt,et)?null:Ae.round(et.x,et.y)}split(ye){const Be=[],rt=ye.events!==void 0,Mt=new Pe(ye,!0),Ot=new Pe(ye,!1),En=this.rightSE;this.replaceRightSE(Ot),Be.push(Ot),Be.push(Mt);const $n=new Bt(Mt,En,this.rings.slice(),this.windings.slice());return Pe.comparePoints($n.leftSE.point,$n.rightSE.point)>0&&$n.swapEvents(),Pe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),rt&&(Mt.checkForConsuming(),Ot.checkForConsuming()),Be}swapEvents(){const ye=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ye,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let Be=0,rt=this.windings.length;Be<rt;Be++)this.windings[Be]*=-1}consume(ye){let Be=this,rt=ye;for(;Be.consumedBy;)Be=Be.consumedBy;for(;rt.consumedBy;)rt=rt.consumedBy;const Mt=Bt.compare(Be,rt);if(Mt!==0){if(Mt>0){const Ot=Be;Be=rt,rt=Ot}if(Be.prev===rt){const Ot=Be;Be=rt,rt=Ot}for(let Ot=0,En=rt.rings.length;Ot<En;Ot++){const $n=rt.rings[Ot],yr=rt.windings[Ot],qn=Be.rings.indexOf($n);qn===-1?(Be.rings.push($n),Be.windings.push(yr)):Be.windings[qn]+=yr}rt.rings=null,rt.windings=null,rt.consumedBy=Be,rt.leftSE.consumedBy=Be.leftSE,rt.rightSE.consumedBy=Be.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const ye=this.prev.consumedBy||this.prev;this._beforeState=ye.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const ye=this.beforeState();this._afterState={rings:ye.rings.slice(0),windings:ye.windings.slice(0),multiPolys:[]};const Be=this._afterState.rings,rt=this._afterState.windings,Mt=this._afterState.multiPolys;for(let $n=0,yr=this.rings.length;$n<yr;$n++){const qn=this.rings[$n],Ce=this.windings[$n],xe=Be.indexOf(qn);xe===-1?(Be.push(qn),rt.push(Ce)):rt[xe]+=Ce}const Ot=[],En=[];for(let $n=0,yr=Be.length;$n<yr;$n++){if(rt[$n]===0)continue;const qn=Be[$n],Ce=qn.poly;if(En.indexOf(Ce)===-1)if(qn.isExterior)Ot.push(Ce);else{En.indexOf(Ce)===-1&&En.push(Ce);const xe=Ot.indexOf(qn.poly);xe!==-1&&Ot.splice(xe,1)}}for(let $n=0,yr=Ot.length;$n<yr;$n++){const qn=Ot[$n].multiPoly;Mt.indexOf(qn)===-1&&Mt.push(qn)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const ye=this.beforeState().multiPolys,Be=this.afterState().multiPolys;switch(dn.type){case"union":{const rt=ye.length===0,Mt=Be.length===0;this._isInResult=rt!==Mt;break}case"intersection":{let rt,Mt;ye.length<Be.length?(rt=ye.length,Mt=Be.length):(rt=Be.length,Mt=ye.length),this._isInResult=Mt===dn.numMultiPolys&&rt<Mt;break}case"xor":{const rt=Math.abs(ye.length-Be.length);this._isInResult=rt%2===1;break}case"difference":{const rt=Mt=>Mt.length===1&&Mt[0].isSubject;this._isInResult=rt(ye)!==rt(Be);break}default:throw new Error(`Unrecognized operation type found ${dn.type}`)}return this._isInResult}}class z{constructor(ye,Be,rt){if(!Array.isArray(ye)||ye.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Be,this.isExterior=rt,this.segments=[],typeof ye[0][0]!="number"||typeof ye[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Mt=Ae.round(ye[0][0],ye[0][1]);this.bbox={ll:{x:Mt.x,y:Mt.y},ur:{x:Mt.x,y:Mt.y}};let Ot=Mt;for(let En=1,$n=ye.length;En<$n;En++){if(typeof ye[En][0]!="number"||typeof ye[En][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let yr=Ae.round(ye[En][0],ye[En][1]);yr.x===Ot.x&&yr.y===Ot.y||(this.segments.push(Bt.fromRing(Ot,yr,this)),yr.x<this.bbox.ll.x&&(this.bbox.ll.x=yr.x),yr.y<this.bbox.ll.y&&(this.bbox.ll.y=yr.y),yr.x>this.bbox.ur.x&&(this.bbox.ur.x=yr.x),yr.y>this.bbox.ur.y&&(this.bbox.ur.y=yr.y),Ot=yr)}(Mt.x!==Ot.x||Mt.y!==Ot.y)&&this.segments.push(Bt.fromRing(Ot,Mt,this))}getSweepEvents(){const ye=[];for(let Be=0,rt=this.segments.length;Be<rt;Be++){const Mt=this.segments[Be];ye.push(Mt.leftSE),ye.push(Mt.rightSE)}return ye}}class ue{constructor(ye,Be){if(!Array.isArray(ye))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z(ye[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let rt=1,Mt=ye.length;rt<Mt;rt++){const Ot=new z(ye[rt],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=Be}getSweepEvents(){const ye=this.exteriorRing.getSweepEvents();for(let Be=0,rt=this.interiorRings.length;Be<rt;Be++){const Mt=this.interiorRings[Be].getSweepEvents();for(let Ot=0,En=Mt.length;Ot<En;Ot++)ye.push(Mt[Ot])}return ye}}class ot{constructor(ye,Be){if(!Array.isArray(ye))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ye[0][0][0]=="number"&&(ye=[ye])}catch(rt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let rt=0,Mt=ye.length;rt<Mt;rt++){const Ot=new ue(ye[rt],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=Be}getSweepEvents(){const ye=[];for(let Be=0,rt=this.polys.length;Be<rt;Be++){const Mt=this.polys[Be].getSweepEvents();for(let Ot=0,En=Mt.length;Ot<En;Ot++)ye.push(Mt[Ot])}return ye}}class le{static factory(ye){const Be=[];for(let rt=0,Mt=ye.length;rt<Mt;rt++){const Ot=ye[rt];if(!Ot.isInResult()||Ot.ringOut)continue;let En=null,$n=Ot.leftSE,yr=Ot.rightSE;const qn=[$n],Ce=$n.point,xe=[];for(;En=$n,$n=yr,qn.push($n),$n.point!==Ce;)for(;;){const ke=$n.getAvailableLinkedEvents();if(ke.length===0){const Yt=qn[0].point,pn=qn[qn.length-1].point;throw new Error(`Unable to complete output ring starting at [${Yt.x}, ${Yt.y}]. Last matching segment found ends at [${pn.x}, ${pn.y}].`)}if(ke.length===1){yr=ke[0].otherSE;break}let et=null;for(let Yt=0,pn=xe.length;Yt<pn;Yt++)if(xe[Yt].point===$n.point){et=Yt;break}if(et!==null){const Yt=xe.splice(et)[0],pn=qn.splice(Yt.index);pn.unshift(pn[0].otherSE),Be.push(new le(pn.reverse()));continue}xe.push({index:qn.length,point:$n.point});const Tt=$n.getLeftmostComparator(En);yr=ke.sort(Tt)[0].otherSE;break}Be.push(new le(qn))}return Be}constructor(ye){this.events=ye;for(let Be=0,rt=ye.length;Be<rt;Be++)ye[Be].segment.ringOut=this;this.poly=null}getGeom(){let ye=this.events[0].point;const Be=[ye];for(let qn=1,Ce=this.events.length-1;qn<Ce;qn++){const xe=this.events[qn].point,ke=this.events[qn+1].point;zt(xe,ye,ke)!==0&&(Be.push(xe),ye=xe)}if(Be.length===1)return null;const rt=Be[0],Mt=Be[1];zt(rt,ye,Mt)===0&&Be.shift(),Be.push(Be[0]);const Ot=this.isExteriorRing()?1:-1,En=this.isExteriorRing()?0:Be.length-1,$n=this.isExteriorRing()?Be.length:-1,yr=[];for(let qn=En;qn!=$n;qn+=Ot)yr.push([Be[qn].x,Be[qn].y]);return yr}isExteriorRing(){if(this._isExteriorRing===void 0){const ye=this.enclosingRing();this._isExteriorRing=ye?!ye.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let ye=this.events[0];for(let Mt=1,Ot=this.events.length;Mt<Ot;Mt++){const En=this.events[Mt];Pe.compare(ye,En)>0&&(ye=En)}let Be=ye.segment.prevInResult(),rt=Be?Be.prevInResult():null;for(;;){if(!Be)return null;if(!rt)return Be.ringOut;if(rt.ringOut!==Be.ringOut)return rt.ringOut.enclosingRing()!==Be.ringOut?Be.ringOut:Be.ringOut.enclosingRing();Be=rt.prevInResult(),rt=Be?Be.prevInResult():null}}}class $t{constructor(ye){this.exteriorRing=ye,ye.poly=this,this.interiorRings=[]}addInterior(ye){this.interiorRings.push(ye),ye.poly=this}getGeom(){const ye=[this.exteriorRing.getGeom()];if(ye[0]===null)return null;for(let Be=0,rt=this.interiorRings.length;Be<rt;Be++){const Mt=this.interiorRings[Be].getGeom();Mt!==null&&ye.push(Mt)}return ye}}class an{constructor(ye){this.rings=ye,this.polys=this._composePolys(ye)}getGeom(){const ye=[];for(let Be=0,rt=this.polys.length;Be<rt;Be++){const Mt=this.polys[Be].getGeom();Mt!==null&&ye.push(Mt)}return ye}_composePolys(ye){const Be=[];for(let rt=0,Mt=ye.length;rt<Mt;rt++){const Ot=ye[rt];if(!Ot.poly)if(Ot.isExteriorRing())Be.push(new $t(Ot));else{const En=Ot.enclosingRing();En.poly||Be.push(new $t(En)),En.poly.addInterior(Ot)}}return Be}}class hn{constructor(ye){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt.compare;this.queue=ye,this.tree=new Ge(Be),this.segments=[]}process(ye){const Be=ye.segment,rt=[];if(ye.consumedBy)return ye.isLeft?this.queue.remove(ye.otherSE):this.tree.remove(Be),rt;const Mt=ye.isLeft?this.tree.add(Be):this.tree.find(Be);if(!Mt)throw new Error(`Unable to find segment #${Be.id} [${Be.leftSE.point.x}, ${Be.leftSE.point.y}] -> [${Be.rightSE.point.x}, ${Be.rightSE.point.y}] in SweepLine tree.`);let Ot=Mt,En=Mt,$n,yr;for(;$n===void 0;)Ot=this.tree.prev(Ot),Ot===null?$n=null:Ot.key.consumedBy===void 0&&($n=Ot.key);for(;yr===void 0;)En=this.tree.next(En),En===null?yr=null:En.key.consumedBy===void 0&&(yr=En.key);if(ye.isLeft){let qn=null;if($n){const xe=$n.getIntersection(Be);if(xe!==null&&(Be.isAnEndpoint(xe)||(qn=xe),!$n.isAnEndpoint(xe))){const ke=this._splitSafely($n,xe);for(let et=0,Tt=ke.length;et<Tt;et++)rt.push(ke[et])}}let Ce=null;if(yr){const xe=yr.getIntersection(Be);if(xe!==null&&(Be.isAnEndpoint(xe)||(Ce=xe),!yr.isAnEndpoint(xe))){const ke=this._splitSafely(yr,xe);for(let et=0,Tt=ke.length;et<Tt;et++)rt.push(ke[et])}}if(qn!==null||Ce!==null){let xe=null;qn===null?xe=Ce:Ce===null?xe=qn:xe=Pe.comparePoints(qn,Ce)<=0?qn:Ce,this.queue.remove(Be.rightSE),rt.push(Be.rightSE);const ke=Be.split(xe);for(let et=0,Tt=ke.length;et<Tt;et++)rt.push(ke[et])}rt.length>0?(this.tree.remove(Be),rt.push(ye)):(this.segments.push(Be),Be.prev=$n)}else{if($n&&yr){const qn=$n.getIntersection(yr);if(qn!==null){if(!$n.isAnEndpoint(qn)){const Ce=this._splitSafely($n,qn);for(let xe=0,ke=Ce.length;xe<ke;xe++)rt.push(Ce[xe])}if(!yr.isAnEndpoint(qn)){const Ce=this._splitSafely(yr,qn);for(let xe=0,ke=Ce.length;xe<ke;xe++)rt.push(Ce[xe])}}}this.tree.remove(Be)}return rt}_splitSafely(ye,Be){this.tree.remove(ye);const rt=ye.rightSE;this.queue.remove(rt);const Mt=ye.split(Be);return Mt.push(rt),ye.consumedBy===void 0&&this.tree.add(ye),Mt}}const Dn=typeof J!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Xn=typeof J!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Gn{run(ye,Be,rt){dn.type=ye,Ae.reset();const Mt=[new ot(Be,!0)];for(let xe=0,ke=rt.length;xe<ke;xe++)Mt.push(new ot(rt[xe],!1));if(dn.numMultiPolys=Mt.length,dn.type==="difference"){const xe=Mt[0];let ke=1;for(;ke<Mt.length;)bt(Mt[ke].bbox,xe.bbox)!==null?ke++:Mt.splice(ke,1)}if(dn.type==="intersection")for(let xe=0,ke=Mt.length;xe<ke;xe++){const et=Mt[xe];for(let Tt=xe+1,Yt=Mt.length;Tt<Yt;Tt++)if(bt(et.bbox,Mt[Tt].bbox)===null)return[]}const Ot=new Ge(Pe.compare);for(let xe=0,ke=Mt.length;xe<ke;xe++){const et=Mt[xe].getSweepEvents();for(let Tt=0,Yt=et.length;Tt<Yt;Tt++)if(Ot.insert(et[Tt]),Ot.size>Dn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const En=new hn(Ot);let $n=Ot.size,yr=Ot.pop();for(;yr;){const xe=yr.key;if(Ot.size===$n){const et=xe.segment;throw new Error(`Unable to pop() ${xe.isLeft?"left":"right"} SweepEvent [${xe.point.x}, ${xe.point.y}] from segment #${et.id} [${et.leftSE.point.x}, ${et.leftSE.point.y}] -> [${et.rightSE.point.x}, ${et.rightSE.point.y}] from queue.`)}if(Ot.size>Dn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(En.segments.length>Xn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const ke=En.process(xe);for(let et=0,Tt=ke.length;et<Tt;et++){const Yt=ke[et];Yt.consumedBy===void 0&&Ot.insert(Yt)}$n=Ot.size,yr=Ot.pop()}Ae.reset();const qn=le.factory(En.segments);return new an(qn).getGeom()}}const dn=new Gn;var Zn={union:function(ht){for(var ye=arguments.length,Be=new Array(ye>1?ye-1:0),rt=1;rt<ye;rt++)Be[rt-1]=arguments[rt];return dn.run("union",ht,Be)},intersection:function(ht){for(var ye=arguments.length,Be=new Array(ye>1?ye-1:0),rt=1;rt<ye;rt++)Be[rt-1]=arguments[rt];return dn.run("intersection",ht,Be)},xor:function(ht){for(var ye=arguments.length,Be=new Array(ye>1?ye-1:0),rt=1;rt<ye;rt++)Be[rt-1]=arguments[rt];return dn.run("xor",ht,Be)},difference:function(ht){for(var ye=arguments.length,Be=new Array(ye>1?ye-1:0),rt=1;rt<ye;rt++)Be[rt-1]=arguments[rt];return dn.run("difference",ht,Be)}};return Zn})},45598:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ve;var Z=J(D(67294)),E=D(11805);function ve(te){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=[];return Z.default.Children.forEach(te,function(Se){Se==null&&!se.keepEmpty||(Array.isArray(Se)?ae=ae.concat(ve(Se)):(0,E.isFragment)(Se)&&Se.props?ae=ae.concat(ve(Se.props.children,se)):ae.push(Se))}),ae}},3481:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.isStyleSupport=te;var Z=J(D(19158)),E=function(ae){if((0,Z.default)()&&window.document.documentElement){var Se=Array.isArray(ae)?ae:[ae],oe=window.document.documentElement;return Se.some(function(Ge){return Ge in oe.style})}return!1},ve=function(ae,Se){if(!E(ae))return!1;var oe=document.createElement("div"),Ge=oe.style[ae];return oe.style[ae]=Se,oe.style[ae]!==Ge};function te(se,ae){return!Array.isArray(se)&&ae!==void 0?ve(se,ae):E(se)}},27712:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(E){var ve=E.keyCode;if(E.altKey&&!E.ctrlKey||E.metaKey||ve>=D.F1&&ve<=D.F12)return!1;switch(ve){case D.ALT:case D.CAPS_LOCK:case D.CONTEXT_MENU:case D.CTRL:case D.DOWN:case D.END:case D.ESC:case D.HOME:case D.INSERT:case D.LEFT:case D.MAC_FF_META:case D.META:case D.NUMLOCK:case D.NUM_CENTER:case D.PAGE_DOWN:case D.PAGE_UP:case D.PAUSE:case D.PRINT_SCREEN:case D.RIGHT:case D.SHIFT:case D.UP:case D.WIN_KEY:case D.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(E){if(E>=D.ZERO&&E<=D.NINE||E>=D.NUM_ZERO&&E<=D.NUM_MULTIPLY||E>=D.A&&E<=D.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&E===0)return!0;switch(E){case D.SPACE:case D.QUESTION_MARK:case D.NUM_PLUS:case D.NUM_MINUS:case D.NUM_PERIOD:case D.NUM_DIVISION:case D.SEMICOLON:case D.DASH:case D.EQUALS:case D.COMMA:case D.PERIOD:case D.SLASH:case D.APOSTROPHE:case D.SINGLE_QUOTE:case D.OPEN_SQUARE_BRACKET:case D.BACKSLASH:case D.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},J=W.default=D},18545:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var Z=J(D(67294));function E(ve){var te=Z.useRef();te.current=ve;var se=Z.useCallback(function(){for(var ae,Se=arguments.length,oe=new Array(Se),Ge=0;Ge<Se;Ge++)oe[Ge]=arguments[Ge];return(ae=te.current)===null||ae===void 0?void 0:ae.call.apply(ae,[te].concat(oe))},[]);return se}},82546:function(Ht,W,D){"use strict";var J=D(64836).default,Z=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useLayoutUpdateEffect=W.default=void 0;var E=Z(D(67294)),ve=J(D(19158)),te=(0,ve.default)()?E.useLayoutEffect:E.useEffect,se=function(Ge,ee){var me=E.useRef(!0);te(function(){return Ge(me.current)},ee),te(function(){return me.current=!1,function(){me.current=!0}},[])},ae=W.useLayoutUpdateEffect=function(Ge,ee){se(function(me){if(!me)return Ge()},ee)},Se=W.default=se},67265:function(Ht,W,D){"use strict";var J=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var Z=J(D(67294));function E(ve,te,se){var ae=Z.useRef({});return(!("value"in ae.current)||se(ae.current.condition,te))&&(ae.current.value=ve(),ae.current.condition=te),ae.current.value}},60869:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ae;var Z=J(D(27424)),E=J(D(18545)),ve=D(82546),te=J(D(78423));function se(Se){return Se!==void 0}function ae(Se,oe){var Ge=oe||{},ee=Ge.defaultValue,me=Ge.value,Le=Ge.onChange,be=Ge.postState,Oe=(0,te.default)(function(){return se(me)?me:se(ee)?typeof ee=="function"?ee():ee:typeof Se=="function"?Se():Se}),fe=(0,Z.default)(Oe,2),He=fe[0],bt=fe[1],dt=me!==void 0?me:He,Nt=be?be(dt):dt,ct=(0,E.default)(Le),lt=(0,te.default)([dt]),Ie=(0,Z.default)(lt,2),Ae=Ie[0],pt=Ie[1];(0,ve.useLayoutUpdateEffect)(function(){var Et=Ae[0];He!==Et&&ct(He,Et)},[Ae]),(0,ve.useLayoutUpdateEffect)(function(){se(me)||bt(me)},[me]);var ut=(0,E.default)(function(Et,cn){bt(Et,cn),pt([dt],cn)});return[Nt,ut]}},78423:function(Ht,W,D){"use strict";var J=D(75263).default,Z=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=te;var E=Z(D(27424)),ve=J(D(67294));function te(se){var ae=ve.useRef(!1),Se=ve.useState(se),oe=(0,E.default)(Se,2),Ge=oe[0],ee=oe[1];ve.useEffect(function(){return ae.current=!1,function(){ae.current=!0}},[]);function me(Le,be){be&&ae.current||ee(Le)}return[Ge,me]}},11102:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Z=J(D(18698)),E=J(D(45520));function ve(se,ae){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,oe=new Set;function Ge(ee,me){var Le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,be=oe.has(ee);if((0,E.default)(!be,"Warning: There may be circular references"),be)return!1;if(ee===me)return!0;if(Se&&Le>1)return!1;oe.add(ee);var Oe=Le+1;if(Array.isArray(ee)){if(!Array.isArray(me)||ee.length!==me.length)return!1;for(var fe=0;fe<ee.length;fe++)if(!Ge(ee[fe],me[fe],Oe))return!1;return!0}if(ee&&me&&(0,Z.default)(ee)==="object"&&(0,Z.default)(me)==="object"){var He=Object.keys(ee);return He.length!==Object.keys(me).length?!1:He.every(function(bt){return Ge(ee[bt],me[bt],Oe)})}return!1}return Ge(se,ae)}var te=W.default=ve},18475:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(J,Z){var E=Object.assign({},J);return Array.isArray(Z)&&Z.forEach(function(ve){delete E[ve]}),E}},75531:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useComposeRef=W.supportRef=W.supportNodeRef=W.getNodeRef=W.fillRef=W.composeRef=void 0;var Z=J(D(18698)),E=D(67294),ve=D(11805),te=J(D(67265)),se=W.fillRef=function(be,Oe){typeof be=="function"?be(Oe):(0,Z.default)(be)==="object"&&be&&"current"in be&&(be.current=Oe)},ae=W.composeRef=function(){for(var be=arguments.length,Oe=new Array(be),fe=0;fe<be;fe++)Oe[fe]=arguments[fe];var He=Oe.filter(Boolean);return He.length<=1?He[0]:function(bt){Oe.forEach(function(dt){se(dt,bt)})}},Se=W.useComposeRef=function(){for(var be=arguments.length,Oe=new Array(be),fe=0;fe<be;fe++)Oe[fe]=arguments[fe];return(0,te.default)(function(){return ae.apply(void 0,Oe)},Oe,function(He,bt){return He.length!==bt.length||He.every(function(dt,Nt){return dt!==bt[Nt]})})},oe=W.supportRef=function(be){var Oe,fe,He=(0,ve.isMemo)(be)?be.type.type:be.type;return!(typeof He=="function"&&!((Oe=He.prototype)!==null&&Oe!==void 0&&Oe.render)&&He.$$typeof!==ve.ForwardRef||typeof be=="function"&&!((fe=be.prototype)!==null&&fe!==void 0&&fe.render)&&be.$$typeof!==ve.ForwardRef)};function Ge(Le){return(0,E.isValidElement)(Le)&&!(0,ve.isFragment)(Le)}var ee=W.supportNodeRef=function(be){return Ge(be)&&oe(be)},me=W.getNodeRef=Number(E.version.split(".")[0])>=19?function(Le){return Ge(Le)?Le.props.ref:null}:function(Le){return Ge(Le)?Le.ref:null}},94787:function(Ht,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(J,Z){for(var E=J,ve=0;ve<Z.length;ve+=1){if(E==null)return;E=E[Z[ve]]}return E}},20059:function(Ht,W,D){"use strict";var J=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Se,W.merge=me;var Z=J(D(18698)),E=J(D(42122)),ve=J(D(861)),te=J(D(51589)),se=J(D(94787));function ae(Le,be,Oe,fe){if(!be.length)return Oe;var He=(0,te.default)(be),bt=He[0],dt=He.slice(1),Nt;return!Le&&typeof bt=="number"?Nt=[]:Array.isArray(Le)?Nt=(0,ve.default)(Le):Nt=(0,E.default)({},Le),fe&&Oe===void 0&&dt.length===1?delete Nt[bt][dt[0]]:Nt[bt]=ae(Nt[bt],dt,Oe,fe),Nt}function Se(Le,be,Oe){var fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return be.length&&fe&&Oe===void 0&&!(0,se.default)(Le,be.slice(0,-1))?Le:ae(Le,be,Oe,fe)}function oe(Le){return(0,Z.default)(Le)==="object"&&Le!==null&&Object.getPrototypeOf(Le)===Object.prototype}function Ge(Le){return Array.isArray(Le)?[]:{}}var ee=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function me(){for(var Le=arguments.length,be=new Array(Le),Oe=0;Oe<Le;Oe++)be[Oe]=arguments[Oe];var fe=Ge(be[0]);return be.forEach(function(He){function bt(dt,Nt){var ct=new Set(Nt),lt=(0,se.default)(He,dt),Ie=Array.isArray(lt);if(Ie||oe(lt)){if(!ct.has(lt)){ct.add(lt);var Ae=(0,se.default)(fe,dt);Ie?fe=Se(fe,dt,[]):(!Ae||(0,Z.default)(Ae)!=="object")&&(fe=Se(fe,dt,Ge(lt))),ee(lt).forEach(function(pt){bt([].concat((0,ve.default)(dt),[pt]),ct)})}}else fe=Se(fe,dt,lt)}bt([])}),fe}},81550:function(Ht){(function(W,D){Ht.exports=D()})(this,function(){"use strict";var W=function(Ue){return Ue instanceof Uint8Array||Ue instanceof Uint16Array||Ue instanceof Uint32Array||Ue instanceof Int8Array||Ue instanceof Int16Array||Ue instanceof Int32Array||Ue instanceof Float32Array||Ue instanceof Float64Array||Ue instanceof Uint8ClampedArray},D=function(Ue,Qt){for(var Rn=Object.keys(Qt),Ar=0;Ar<Rn.length;++Ar)Ue[Rn[Ar]]=Qt[Rn[Ar]];return Ue},J=`
`;function Z(Ue){return typeof atob!="undefined"?atob(Ue):"base64:"+Ue}function E(Ue){var Qt=new Error("(regl) "+Ue);throw console.error(Qt),Qt}function ve(Ue,Qt){Ue||E(Qt)}function te(Ue){return Ue?": "+Ue:""}function se(Ue,Qt,Rn){Ue in Qt||E("unknown parameter ("+Ue+")"+te(Rn)+". possible values: "+Object.keys(Qt).join())}function ae(Ue,Qt){W(Ue)||E("invalid parameter type"+te(Qt)+". must be a typed array")}function Se(Ue,Qt){switch(Qt){case"number":return typeof Ue=="number";case"object":return typeof Ue=="object";case"string":return typeof Ue=="string";case"boolean":return typeof Ue=="boolean";case"function":return typeof Ue=="function";case"undefined":return typeof Ue=="undefined";case"symbol":return typeof Ue=="symbol"}}function oe(Ue,Qt,Rn){Se(Ue,Qt)||E("invalid parameter type"+te(Rn)+". expected "+Qt+", got "+typeof Ue)}function Ge(Ue,Qt){Ue>=0&&(Ue|0)===Ue||E("invalid parameter type, ("+Ue+")"+te(Qt)+". must be a nonnegative integer")}function ee(Ue,Qt,Rn){Qt.indexOf(Ue)<0&&E("invalid value"+te(Rn)+". must be one of: "+Qt)}var me=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Le(Ue){Object.keys(Ue).forEach(function(Qt){me.indexOf(Qt)<0&&E('invalid regl constructor argument "'+Qt+'". must be one of '+me)})}function be(Ue,Qt){for(Ue=Ue+"";Ue.length<Qt;)Ue=" "+Ue;return Ue}function Oe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function fe(Ue,Qt){this.number=Ue,this.line=Qt,this.errors=[]}function He(Ue,Qt,Rn){this.file=Ue,this.line=Qt,this.message=Rn}function bt(){var Ue=new Error,Qt=(Ue.stack||Ue).toString(),Rn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Qt);if(Rn)return Rn[1];var Ar=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Qt);return Ar?Ar[1]:"unknown"}function dt(){var Ue=new Error,Qt=(Ue.stack||Ue).toString(),Rn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Qt);if(Rn)return Rn[1];var Ar=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Qt);return Ar?Ar[1]:"unknown"}function Nt(Ue,Qt){var Rn=Ue.split(`
`),Ar=1,Xr=0,Or={unknown:new Oe,0:new Oe};Or.unknown.name=Or[0].name=Qt||bt(),Or.unknown.lines.push(new fe(0,""));for(var mr=0;mr<Rn.length;++mr){var Oi=Rn[mr],ci=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Oi);if(ci)switch(ci[1]){case"line":var Fi=/(\d+)(\s+\d+)?/.exec(ci[2]);Fi&&(Ar=Fi[1]|0,Fi[2]&&(Xr=Fi[2]|0,Xr in Or||(Or[Xr]=new Oe)));break;case"define":var Ri=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ci[2]);Ri&&(Or[Xr].name=Ri[1]?Z(Ri[2]):Ri[2]);break}Or[Xr].lines.push(new fe(Ar++,Oi))}return Object.keys(Or).forEach(function(Ni){var Xi=Or[Ni];Xi.lines.forEach(function(pi){Xi.index[pi.number]=pi})}),Or}function ct(Ue){var Qt=[];return Ue.split(`
`).forEach(function(Rn){if(!(Rn.length<5)){var Ar=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Rn);Ar?Qt.push(new He(Ar[1]|0,Ar[2]|0,Ar[3].trim())):Rn.length>0&&Qt.push(new He("unknown",0,Rn))}}),Qt}function lt(Ue,Qt){Qt.forEach(function(Rn){var Ar=Ue[Rn.file];if(Ar){var Xr=Ar.index[Rn.line];if(Xr){Xr.errors.push(Rn),Ar.hasErrors=!0;return}}Ue.unknown.hasErrors=!0,Ue.unknown.lines[0].errors.push(Rn)})}function Ie(Ue,Qt,Rn,Ar,Xr){if(!Ue.getShaderParameter(Qt,Ue.COMPILE_STATUS)){var Or=Ue.getShaderInfoLog(Qt),mr=Ar===Ue.FRAGMENT_SHADER?"fragment":"vertex";St(Rn,"string",mr+" shader source must be a string",Xr);var Oi=Nt(Rn,Xr),ci=ct(Or);lt(Oi,ci),Object.keys(Oi).forEach(function(Fi){var Ri=Oi[Fi];if(!Ri.hasErrors)return;var Ni=[""],Xi=[""];function pi(Ui,ur){Ni.push(Ui),Xi.push(ur||"")}pi("file number "+Fi+": "+Ri.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ri.lines.forEach(function(Ui){if(Ui.errors.length>0){pi(be(Ui.number,4)+"|  ","background-color:yellow; font-weight:bold"),pi(Ui.line+J,"color:red; background-color:yellow; font-weight:bold");var ur=0;Ui.errors.forEach(function(kr){var yi=kr.message,io=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yi);if(io){var oi=io[1];switch(yi=io[2],oi){case"assign":oi="=";break}ur=Math.max(Ui.line.indexOf(oi,ur),0)}else ur=0;pi(be("| ",6)),pi(be("^^^",ur+3)+J,"font-weight:bold"),pi(be("| ",6)),pi(yi+J,"font-weight:bold")}),pi(be("| ",6)+J)}else pi(be(Ui.number,4)+"|  "),pi(Ui.line+J,"color:red")}),typeof document!="undefined"&&!window.chrome?(Xi[0]=Ni.join("%c"),console.log.apply(console,Xi)):console.log(Ni.join(""))}),ve.raise("Error compiling "+mr+" shader, "+Oi[0].name)}}function Ae(Ue,Qt,Rn,Ar,Xr){if(!Ue.getProgramParameter(Qt,Ue.LINK_STATUS)){var Or=Ue.getProgramInfoLog(Qt),mr=Nt(Rn,Xr),Oi=Nt(Ar,Xr),ci='Error linking program with vertex shader, "'+Oi[0].name+'", and fragment shader "'+mr[0].name+'"';typeof document!="undefined"?console.log("%c"+ci+J+"%c"+Or,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ci+J+Or),ve.raise(ci)}}function pt(Ue){Ue._commandRef=bt()}function ut(Ue,Qt,Rn,Ar){pt(Ue);function Xr(ci){return ci?Ar.id(ci):0}Ue._fragId=Xr(Ue.static.frag),Ue._vertId=Xr(Ue.static.vert);function Or(ci,Fi){Object.keys(Fi).forEach(function(Ri){ci[Ar.id(Ri)]=!0})}var mr=Ue._uniformSet={};Or(mr,Qt.static),Or(mr,Qt.dynamic);var Oi=Ue._attributeSet={};Or(Oi,Rn.static),Or(Oi,Rn.dynamic),Ue._hasCount="count"in Ue.static||"count"in Ue.dynamic||"elements"in Ue.static||"elements"in Ue.dynamic}function Et(Ue,Qt){var Rn=dt();E(Ue+" in command "+(Qt||bt())+(Rn==="unknown"?"":" called from "+Rn))}function cn(Ue,Qt,Rn){Ue||Et(Qt,Rn||bt())}function ze(Ue,Qt,Rn,Ar){Ue in Qt||Et("unknown parameter ("+Ue+")"+te(Rn)+". possible values: "+Object.keys(Qt).join(),Ar||bt())}function St(Ue,Qt,Rn,Ar){Se(Ue,Qt)||Et("invalid parameter type"+te(Rn)+". expected "+Qt+", got "+typeof Ue,Ar||bt())}function we(Ue){Ue()}function nt(Ue,Qt,Rn){Ue.texture?ee(Ue.texture._texture.internalformat,Qt,"unsupported texture format for attachment"):ee(Ue.renderbuffer._renderbuffer.format,Rn,"unsupported renderbuffer format for attachment")}var Xe=33071,Ze=9728,Rt=9984,yt=9985,Me=9986,Gt=9987,ln=5120,Ln=5121,kn=5122,lr=5123,zt=5124,Kt=5125,yn=5126,Kn=32819,rn=32820,Wt=33635,Pt=34042,Pe=36193,Qe={};Qe[ln]=Qe[Ln]=1,Qe[kn]=Qe[lr]=Qe[Pe]=Qe[Wt]=Qe[Kn]=Qe[rn]=2,Qe[zt]=Qe[Kt]=Qe[yn]=Qe[Pt]=4;function Bt(Ue,Qt){return Ue===rn||Ue===Kn||Ue===Wt?2:Ue===Pt?4:Qe[Ue]*Qt}function z(Ue){return!(Ue&Ue-1)&&!!Ue}function ue(Ue,Qt,Rn){var Ar,Xr=Qt.width,Or=Qt.height,mr=Qt.channels;ve(Xr>0&&Xr<=Rn.maxTextureSize&&Or>0&&Or<=Rn.maxTextureSize,"invalid texture shape"),(Ue.wrapS!==Xe||Ue.wrapT!==Xe)&&ve(z(Xr)&&z(Or),"incompatible wrap mode for texture, both width and height must be power of 2"),Qt.mipmask===1?Xr!==1&&Or!==1&&ve(Ue.minFilter!==Rt&&Ue.minFilter!==Me&&Ue.minFilter!==yt&&Ue.minFilter!==Gt,"min filter requires mipmap"):(ve(z(Xr)&&z(Or),"texture must be a square power of 2 to support mipmapping"),ve(Qt.mipmask===(Xr<<1)-1,"missing or incomplete mipmap data")),Qt.type===yn&&(Rn.extensions.indexOf("oes_texture_float_linear")<0&&ve(Ue.minFilter===Ze&&Ue.magFilter===Ze,"filter not supported, must enable oes_texture_float_linear"),ve(!Ue.genMipmaps,"mipmap generation not supported with float textures"));var Oi=Qt.images;for(Ar=0;Ar<16;++Ar)if(Oi[Ar]){var ci=Xr>>Ar,Fi=Or>>Ar;ve(Qt.mipmask&1<<Ar,"missing mipmap data");var Ri=Oi[Ar];if(ve(Ri.width===ci&&Ri.height===Fi,"invalid shape for mip images"),ve(Ri.format===Qt.format&&Ri.internalformat===Qt.internalformat&&Ri.type===Qt.type,"incompatible type for mip image"),!Ri.compressed)if(Ri.data){var Ni=Math.ceil(Bt(Ri.type,mr)*ci/Ri.unpackAlignment)*Ri.unpackAlignment;ve(Ri.data.byteLength===Ni*Fi,"invalid data for image, buffer size is inconsistent with image format")}else Ri.element||Ri.copy}else Ue.genMipmaps||ve((Qt.mipmask&1<<Ar)===0,"extra mipmap data");Qt.compressed&&ve(!Ue.genMipmaps,"mipmap generation for compressed images not supported")}function ot(Ue,Qt,Rn,Ar){var Xr=Ue.width,Or=Ue.height,mr=Ue.channels;ve(Xr>0&&Xr<=Ar.maxTextureSize&&Or>0&&Or<=Ar.maxTextureSize,"invalid texture shape"),ve(Xr===Or,"cube map must be square"),ve(Qt.wrapS===Xe&&Qt.wrapT===Xe,"wrap mode not supported by cube map");for(var Oi=0;Oi<Rn.length;++Oi){var ci=Rn[Oi];ve(ci.width===Xr&&ci.height===Or,"inconsistent cube map face shape"),Qt.genMipmaps&&(ve(!ci.compressed,"can not generate mipmap for compressed textures"),ve(ci.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Fi=ci.images,Ri=0;Ri<16;++Ri){var Ni=Fi[Ri];if(Ni){var Xi=Xr>>Ri,pi=Or>>Ri;ve(ci.mipmask&1<<Ri,"missing mipmap data"),ve(Ni.width===Xi&&Ni.height===pi,"invalid shape for mip images"),ve(Ni.format===Ue.format&&Ni.internalformat===Ue.internalformat&&Ni.type===Ue.type,"incompatible type for mip image"),Ni.compressed||(Ni.data?ve(Ni.data.byteLength===Xi*pi*Math.max(Bt(Ni.type,mr),Ni.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ni.element||Ni.copy)}}}}var le=D(ve,{optional:we,raise:E,commandRaise:Et,command:cn,parameter:se,commandParameter:ze,constructor:Le,type:oe,commandType:St,isTypedArray:ae,nni:Ge,oneOf:ee,shaderError:Ie,linkError:Ae,callSite:dt,saveCommandRef:pt,saveDrawInfo:ut,framebufferFormat:nt,guessCommand:bt,texture2D:ue,textureCube:ot}),$t=0,an=0;function hn(Ue,Qt){this.id=$t++,this.type=Ue,this.data=Qt}function Dn(Ue){return Ue.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Xn(Ue){if(Ue.length===0)return[];var Qt=Ue.charAt(0),Rn=Ue.charAt(Ue.length-1);if(Ue.length>1&&Qt===Rn&&(Qt==='"'||Qt==="'"))return['"'+Dn(Ue.substr(1,Ue.length-2))+'"'];var Ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ue);if(Ar)return Xn(Ue.substr(0,Ar.index)).concat(Xn(Ar[1])).concat(Xn(Ue.substr(Ar.index+Ar[0].length)));var Xr=Ue.split(".");if(Xr.length===1)return['"'+Dn(Ue)+'"'];for(var Or=[],mr=0;mr<Xr.length;++mr)Or=Or.concat(Xn(Xr[mr]));return Or}function Gn(Ue){return"["+Xn(Ue).join("][")+"]"}function dn(Ue,Qt){return new hn(Ue,Gn(Qt+""))}function mt(Ue){return typeof Ue=="function"&&!Ue._reglType||Ue instanceof hn}function Ct(Ue,Qt){return typeof Ue=="function"?new hn(an,Ue):Ue}var Cn={DynamicVariable:hn,define:dn,isDynamic:mt,unbox:Ct,accessor:Gn},Pn={next:typeof requestAnimationFrame=="function"?function(Ue){return requestAnimationFrame(Ue)}:function(Ue){return setTimeout(Ue,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ue){return cancelAnimationFrame(Ue)}:clearTimeout},Zn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ht(){var Ue={"":0},Qt=[""];return{id:function(Rn){var Ar=Ue[Rn];return Ar||(Ar=Ue[Rn]=Qt.length,Qt.push(Rn),Ar)},str:function(Rn){return Qt[Rn]}}}function ye(Ue,Qt,Rn){var Ar=document.createElement("canvas");D(Ar.style,{border:0,margin:0,padding:0,top:0,left:0}),Ue.appendChild(Ar),Ue===document.body&&(Ar.style.position="absolute",D(Ue.style,{margin:0,padding:0}));function Xr(){var Oi=window.innerWidth,ci=window.innerHeight;if(Ue!==document.body){var Fi=Ue.getBoundingClientRect();Oi=Fi.right-Fi.left,ci=Fi.bottom-Fi.top}Ar.width=Rn*Oi,Ar.height=Rn*ci,D(Ar.style,{width:Oi+"px",height:ci+"px"})}var Or;Ue!==document.body&&typeof ResizeObserver=="function"?(Or=new ResizeObserver(function(){setTimeout(Xr)}),Or.observe(Ue)):window.addEventListener("resize",Xr,!1);function mr(){Or?Or.disconnect():window.removeEventListener("resize",Xr),Ue.removeChild(Ar)}return Xr(),{canvas:Ar,onDestroy:mr}}function Be(Ue,Qt){function Rn(Ar){try{return Ue.getContext(Ar,Qt)}catch(Xr){return null}}return Rn("webgl")||Rn("experimental-webgl")||Rn("webgl-experimental")}function rt(Ue){return typeof Ue.nodeName=="string"&&typeof Ue.appendChild=="function"&&typeof Ue.getBoundingClientRect=="function"}function Mt(Ue){return typeof Ue.drawArrays=="function"||typeof Ue.drawElements=="function"}function Ot(Ue){return typeof Ue=="string"?Ue.split():(le(Array.isArray(Ue),"invalid extension array"),Ue)}function En(Ue){return typeof Ue=="string"?(le(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ue)):Ue}function $n(Ue){var Qt=Ue||{},Rn,Ar,Xr,Or,mr={},Oi=[],ci=[],Fi=typeof window=="undefined"?1:window.devicePixelRatio,Ri=!1,Ni=function(Ui){Ui&&le.raise(Ui)},Xi=function(){};if(typeof Qt=="string"?(le(typeof document!="undefined","selector queries only supported in DOM enviroments"),Rn=document.querySelector(Qt),le(Rn,"invalid query string for element")):typeof Qt=="object"?rt(Qt)?Rn=Qt:Mt(Qt)?(Or=Qt,Xr=Or.canvas):(le.constructor(Qt),"gl"in Qt?Or=Qt.gl:"canvas"in Qt?Xr=En(Qt.canvas):"container"in Qt&&(Ar=En(Qt.container)),"attributes"in Qt&&(mr=Qt.attributes,le.type(mr,"object","invalid context attributes")),"extensions"in Qt&&(Oi=Ot(Qt.extensions)),"optionalExtensions"in Qt&&(ci=Ot(Qt.optionalExtensions)),"onDone"in Qt&&(le.type(Qt.onDone,"function","invalid or missing onDone callback"),Ni=Qt.onDone),"profile"in Qt&&(Ri=!!Qt.profile),"pixelRatio"in Qt&&(Fi=+Qt.pixelRatio,le(Fi>0,"invalid pixel ratio"))):le.raise("invalid arguments to regl"),Rn&&(Rn.nodeName.toLowerCase()==="canvas"?Xr=Rn:Ar=Rn),!Or){if(!Xr){le(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var pi=ye(Ar||document.body,Ni,Fi);if(!pi)return null;Xr=pi.canvas,Xi=pi.onDestroy}mr.premultipliedAlpha===void 0&&(mr.premultipliedAlpha=!0),Or=Be(Xr,mr)}return Or?{gl:Or,canvas:Xr,container:Ar,extensions:Oi,optionalExtensions:ci,pixelRatio:Fi,profile:Ri,onDone:Ni,onDestroy:Xi}:(Xi(),Ni("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function yr(Ue,Qt){var Rn={};function Ar(mr){le.type(mr,"string","extension name must be string");var Oi=mr.toLowerCase(),ci;try{ci=Rn[Oi]=Ue.getExtension(Oi)}catch(Fi){}return!!ci}for(var Xr=0;Xr<Qt.extensions.length;++Xr){var Or=Qt.extensions[Xr];if(!Ar(Or))return Qt.onDestroy(),Qt.onDone('"'+Or+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qt.optionalExtensions.forEach(Ar),{extensions:Rn,restore:function(){Object.keys(Rn).forEach(function(mr){if(Rn[mr]&&!Ar(mr))throw new Error("(regl): error restoring extension "+mr)})}}}function qn(Ue,Qt){for(var Rn=Array(Ue),Ar=0;Ar<Ue;++Ar)Rn[Ar]=Qt(Ar);return Rn}var Ce=5120,xe=5121,ke=5122,et=5123,Tt=5124,Yt=5125,pn=5126;function _t(Ue){for(var Qt=16;Qt<=1<<28;Qt*=16)if(Ue<=Qt)return Qt;return 0}function qt(Ue){var Qt,Rn;return Qt=(Ue>65535)<<4,Ue>>>=Qt,Rn=(Ue>255)<<3,Ue>>>=Rn,Qt|=Rn,Rn=(Ue>15)<<2,Ue>>>=Rn,Qt|=Rn,Rn=(Ue>3)<<1,Ue>>>=Rn,Qt|=Rn,Qt|Ue>>1}function Qn(){var Ue=qn(8,function(){return[]});function Qt(Or){var mr=_t(Or),Oi=Ue[qt(mr)>>2];return Oi.length>0?Oi.pop():new ArrayBuffer(mr)}function Rn(Or){Ue[qt(Or.byteLength)>>2].push(Or)}function Ar(Or,mr){var Oi=null;switch(Or){case Ce:Oi=new Int8Array(Qt(mr),0,mr);break;case xe:Oi=new Uint8Array(Qt(mr),0,mr);break;case ke:Oi=new Int16Array(Qt(2*mr),0,mr);break;case et:Oi=new Uint16Array(Qt(2*mr),0,mr);break;case Tt:Oi=new Int32Array(Qt(4*mr),0,mr);break;case Yt:Oi=new Uint32Array(Qt(4*mr),0,mr);break;case pn:Oi=new Float32Array(Qt(4*mr),0,mr);break;default:return null}return Oi.length!==mr?Oi.subarray(0,mr):Oi}function Xr(Or){Rn(Or.buffer)}return{alloc:Qt,free:Rn,allocType:Ar,freeType:Xr}}var _r=Qn();_r.zero=Qn();var Vr=3408,pr=3410,Ur=3411,mi=3412,wi=3413,Sr=3414,Ti=3415,hi=33901,si=33902,Mo=3379,bi=3386,na=34921,_a=36347,Ro=36348,qo=35661,Ne=35660,Je=34930,kt=36349,sn=34076,Nn=34024,Bn=7936,gn=7937,On=7938,dr=35724,hr=34047,ii=36063,Gi=34852,ao=3553,Qr=34067,ji=34069,Li=33984,Zr=6408,yo=5126,Mi=5121,xo=36160,xi=36053,Oo=36064,ra=16384,Ha=function(Ue,Qt){var Rn=1;Qt.ext_texture_filter_anisotropic&&(Rn=Ue.getParameter(hr));var Ar=1,Xr=1;Qt.webgl_draw_buffers&&(Ar=Ue.getParameter(Gi),Xr=Ue.getParameter(ii));var Or=!!Qt.oes_texture_float;if(Or){var mr=Ue.createTexture();Ue.bindTexture(ao,mr),Ue.texImage2D(ao,0,Zr,1,1,0,Zr,yo,null);var Oi=Ue.createFramebuffer();if(Ue.bindFramebuffer(xo,Oi),Ue.framebufferTexture2D(xo,Oo,ao,mr,0),Ue.bindTexture(ao,null),Ue.checkFramebufferStatus(xo)!==xi)Or=!1;else{Ue.viewport(0,0,1,1),Ue.clearColor(1,0,0,1),Ue.clear(ra);var ci=_r.allocType(yo,4);Ue.readPixels(0,0,1,1,Zr,yo,ci),Ue.getError()?Or=!1:(Ue.deleteFramebuffer(Oi),Ue.deleteTexture(mr),Or=ci[0]===1),_r.freeType(ci)}}var Fi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ri=!0;if(!Fi){var Ni=Ue.createTexture(),Xi=_r.allocType(Mi,36);Ue.activeTexture(Li),Ue.bindTexture(Qr,Ni),Ue.texImage2D(ji,0,Zr,3,3,0,Zr,Mi,Xi),_r.freeType(Xi),Ue.bindTexture(Qr,null),Ue.deleteTexture(Ni),Ri=!Ue.getError()}return{colorBits:[Ue.getParameter(pr),Ue.getParameter(Ur),Ue.getParameter(mi),Ue.getParameter(wi)],depthBits:Ue.getParameter(Sr),stencilBits:Ue.getParameter(Ti),subpixelBits:Ue.getParameter(Vr),extensions:Object.keys(Qt).filter(function(pi){return!!Qt[pi]}),maxAnisotropic:Rn,maxDrawbuffers:Ar,maxColorAttachments:Xr,pointSizeDims:Ue.getParameter(hi),lineWidthDims:Ue.getParameter(si),maxViewportDims:Ue.getParameter(bi),maxCombinedTextureUnits:Ue.getParameter(qo),maxCubeMapSize:Ue.getParameter(sn),maxRenderbufferSize:Ue.getParameter(Nn),maxTextureUnits:Ue.getParameter(Je),maxTextureSize:Ue.getParameter(Mo),maxAttributes:Ue.getParameter(na),maxVertexUniforms:Ue.getParameter(_a),maxVertexTextureUnits:Ue.getParameter(Ne),maxVaryingVectors:Ue.getParameter(Ro),maxFragmentUniforms:Ue.getParameter(kt),glsl:Ue.getParameter(dr),renderer:Ue.getParameter(gn),vendor:Ue.getParameter(Bn),version:Ue.getParameter(On),readFloat:Or,npotTextureCube:Ri}};function ia(Ue){return!!Ue&&typeof Ue=="object"&&Array.isArray(Ue.shape)&&Array.isArray(Ue.stride)&&typeof Ue.offset=="number"&&Ue.shape.length===Ue.stride.length&&(Array.isArray(Ue.data)||W(Ue.data))}var Wo=function(Ue){return Object.keys(Ue).map(function(Qt){return Ue[Qt]})},Fa={shape:Ci,flatten:Ir};function cs(Ue,Qt,Rn){for(var Ar=0;Ar<Qt;++Ar)Rn[Ar]=Ue[Ar]}function wt(Ue,Qt,Rn,Ar){for(var Xr=0,Or=0;Or<Qt;++Or)for(var mr=Ue[Or],Oi=0;Oi<Rn;++Oi)Ar[Xr++]=mr[Oi]}function Zt(Ue,Qt,Rn,Ar,Xr,Or){for(var mr=Or,Oi=0;Oi<Qt;++Oi)for(var ci=Ue[Oi],Fi=0;Fi<Rn;++Fi)for(var Ri=ci[Fi],Ni=0;Ni<Ar;++Ni)Xr[mr++]=Ri[Ni]}function Un(Ue,Qt,Rn,Ar,Xr){for(var Or=1,mr=Rn+1;mr<Qt.length;++mr)Or*=Qt[mr];var Oi=Qt[Rn];if(Qt.length-Rn===4){var ci=Qt[Rn+1],Fi=Qt[Rn+2],Ri=Qt[Rn+3];for(mr=0;mr<Oi;++mr)Zt(Ue[mr],ci,Fi,Ri,Ar,Xr),Xr+=Or}else for(mr=0;mr<Oi;++mr)Un(Ue[mr],Qt,Rn+1,Ar,Xr),Xr+=Or}function Ir(Ue,Qt,Rn,Ar){var Xr=1;if(Qt.length)for(var Or=0;Or<Qt.length;++Or)Xr*=Qt[Or];else Xr=0;var mr=Ar||_r.allocType(Rn,Xr);switch(Qt.length){case 0:break;case 1:cs(Ue,Qt[0],mr);break;case 2:wt(Ue,Qt[0],Qt[1],mr);break;case 3:Zt(Ue,Qt[0],Qt[1],Qt[2],mr,0);break;default:Un(Ue,Qt,0,mr,0)}return mr}function Ci(Ue){for(var Qt=[],Rn=Ue;Rn.length;Rn=Rn[0])Qt.push(Rn.length);return Qt}var oo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Yo=5120,ns=5122,Ds=5124,Us=5121,fl=5123,xh=5125,kp=5126,Ad=5126,Vl={int8:Yo,int16:ns,int32:Ds,uint8:Us,uint16:fl,uint32:xh,float:kp,float32:Ad},If=35048,Lf=35040,sc={dynamic:If,stream:Lf,static:35044},zc=Fa.flatten,cu=Fa.shape,eh=35044,pc=35040,Os=5121,Oc=5126,gf=[];gf[5120]=1,gf[5122]=2,gf[5124]=4,gf[5121]=1,gf[5123]=2,gf[5125]=4,gf[5126]=4;function Zh(Ue){return oo[Object.prototype.toString.call(Ue)]|0}function Up(Ue,Qt){for(var Rn=0;Rn<Qt.length;++Rn)Ue[Rn]=Qt[Rn]}function Eh(Ue,Qt,Rn,Ar,Xr,Or,mr){for(var Oi=0,ci=0;ci<Rn;++ci)for(var Fi=0;Fi<Ar;++Fi)Ue[Oi++]=Qt[Xr*ci+Or*Fi+mr]}function Cd(Ue,Qt,Rn,Ar){var Xr=0,Or={};function mr(ur){this.id=Xr++,this.buffer=Ue.createBuffer(),this.type=ur,this.usage=eh,this.byteLength=0,this.dimension=1,this.dtype=Os,this.persistentData=null,Rn.profile&&(this.stats={size:0})}mr.prototype.bind=function(){Ue.bindBuffer(this.type,this.buffer)},mr.prototype.destroy=function(){Xi(this)};var Oi=[];function ci(ur,kr){var yi=Oi.pop();return yi||(yi=new mr(ur)),yi.bind(),Ni(yi,kr,pc,0,1,!1),yi}function Fi(ur){Oi.push(ur)}function Ri(ur,kr,yi){ur.byteLength=kr.byteLength,Ue.bufferData(ur.type,kr,yi)}function Ni(ur,kr,yi,io,oi,eo){var Ei;if(ur.usage=yi,Array.isArray(kr)){if(ur.dtype=io||Oc,kr.length>0){var to;if(Array.isArray(kr[0])){Ei=cu(kr);for(var li=1,di=1;di<Ei.length;++di)li*=Ei[di];ur.dimension=li,to=zc(kr,Ei,ur.dtype),Ri(ur,to,yi),eo?ur.persistentData=to:_r.freeType(to)}else if(typeof kr[0]=="number"){ur.dimension=oi;var zo=_r.allocType(ur.dtype,kr.length);Up(zo,kr),Ri(ur,zo,yi),eo?ur.persistentData=zo:_r.freeType(zo)}else W(kr[0])?(ur.dimension=kr[0].length,ur.dtype=io||Zh(kr[0])||Oc,to=zc(kr,[kr.length,kr[0].length],ur.dtype),Ri(ur,to,yi),eo?ur.persistentData=to:_r.freeType(to)):le.raise("invalid buffer data")}}else if(W(kr))ur.dtype=io||Zh(kr),ur.dimension=oi,Ri(ur,kr,yi),eo&&(ur.persistentData=new Uint8Array(new Uint8Array(kr.buffer)));else if(ia(kr)){Ei=kr.shape;var pa=kr.stride,qi=kr.offset,Si=0,$r=0,ko=0,Na=0;Ei.length===1?(Si=Ei[0],$r=1,ko=pa[0],Na=0):Ei.length===2?(Si=Ei[0],$r=Ei[1],ko=pa[0],Na=pa[1]):le.raise("invalid shape"),ur.dtype=io||Zh(kr.data)||Oc,ur.dimension=$r;var so=_r.allocType(ur.dtype,Si*$r);Eh(so,kr.data,Si,$r,ko,Na,qi),Ri(ur,so,yi),eo?ur.persistentData=so:_r.freeType(so)}else kr instanceof ArrayBuffer?(ur.dtype=Os,ur.dimension=oi,Ri(ur,kr,yi),eo&&(ur.persistentData=new Uint8Array(new Uint8Array(kr)))):le.raise("invalid buffer data")}function Xi(ur){Qt.bufferCount--,Ar(ur);var kr=ur.buffer;le(kr,"buffer must not be deleted already"),Ue.deleteBuffer(kr),ur.buffer=null,delete Or[ur.id]}function pi(ur,kr,yi,io){Qt.bufferCount++;var oi=new mr(kr);Or[oi.id]=oi;function eo(li){var di=eh,zo=null,pa=0,qi=0,Si=1;return Array.isArray(li)||W(li)||ia(li)||li instanceof ArrayBuffer?zo=li:typeof li=="number"?pa=li|0:li&&(le.type(li,"object","buffer arguments must be an object, a number or an array"),"data"in li&&(le(zo===null||Array.isArray(zo)||W(zo)||ia(zo),"invalid data for buffer"),zo=li.data),"usage"in li&&(le.parameter(li.usage,sc,"invalid buffer usage"),di=sc[li.usage]),"type"in li&&(le.parameter(li.type,Vl,"invalid buffer type"),qi=Vl[li.type]),"dimension"in li&&(le.type(li.dimension,"number","invalid dimension"),Si=li.dimension|0),"length"in li&&(le.nni(pa,"buffer length must be a nonnegative integer"),pa=li.length|0)),oi.bind(),zo?Ni(oi,zo,di,qi,Si,io):(pa&&Ue.bufferData(oi.type,pa,di),oi.dtype=qi||Os,oi.usage=di,oi.dimension=Si,oi.byteLength=pa),Rn.profile&&(oi.stats.size=oi.byteLength*gf[oi.dtype]),eo}function Ei(li,di){le(di+li.byteLength<=oi.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+li.byteLength+" starting from offset "+di+" to a buffer of size "+oi.byteLength),Ue.bufferSubData(oi.type,di,li)}function to(li,di){var zo=(di||0)|0,pa;if(oi.bind(),W(li)||li instanceof ArrayBuffer)Ei(li,zo);else if(Array.isArray(li)){if(li.length>0)if(typeof li[0]=="number"){var qi=_r.allocType(oi.dtype,li.length);Up(qi,li),Ei(qi,zo),_r.freeType(qi)}else if(Array.isArray(li[0])||W(li[0])){pa=cu(li);var Si=zc(li,pa,oi.dtype);Ei(Si,zo),_r.freeType(Si)}else le.raise("invalid buffer data")}else if(ia(li)){pa=li.shape;var $r=li.stride,ko=0,Na=0,so=0,va=0;pa.length===1?(ko=pa[0],Na=1,so=$r[0],va=0):pa.length===2?(ko=pa[0],Na=pa[1],so=$r[0],va=$r[1]):le.raise("invalid shape");var ha=Array.isArray(li.data)?oi.dtype:Zh(li.data),Jo=_r.allocType(ha,ko*Na);Eh(Jo,li.data,ko,Na,so,va,li.offset),Ei(Jo,zo),_r.freeType(Jo)}else le.raise("invalid data for buffer subdata");return eo}return yi||eo(ur),eo._reglType="buffer",eo._buffer=oi,eo.subdata=to,Rn.profile&&(eo.stats=oi.stats),eo.destroy=function(){Xi(oi)},eo}function Ui(){Wo(Or).forEach(function(ur){ur.buffer=Ue.createBuffer(),Ue.bindBuffer(ur.type,ur.buffer),Ue.bufferData(ur.type,ur.persistentData||ur.byteLength,ur.usage)})}return Rn.profile&&(Qt.getTotalBufferSize=function(){var ur=0;return Object.keys(Or).forEach(function(kr){ur+=Or[kr].stats.size}),ur}),{create:pi,createStream:ci,destroyStream:Fi,clear:function(){Wo(Or).forEach(Xi),Oi.forEach(Xi)},getBuffer:function(ur){return ur&&ur._buffer instanceof mr?ur._buffer:null},restore:Ui,_initBuffer:Ni}}var th=0,Xh=0,Od=1,Rd=1,_0=4,Df=4,Uu={points:th,point:Xh,lines:Od,line:Rd,triangles:_0,triangle:Df,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},up=0,Hl=1,Su=4,ef=5120,vc=5121,tf=5122,uu=5123,nf=5124,Pl=5125,zu=34963,yf=35040,fp=35044;function $h(Ue,Qt,Rn,Ar){var Xr={},Or=0,mr={uint8:vc,uint16:uu};Qt.oes_element_index_uint&&(mr.uint32=Pl);function Oi(Ui){this.id=Or++,Xr[this.id]=this,this.buffer=Ui,this.primType=Su,this.vertCount=0,this.type=0}Oi.prototype.bind=function(){this.buffer.bind()};var ci=[];function Fi(Ui){var ur=ci.pop();return ur||(ur=new Oi(Rn.create(null,zu,!0,!1)._buffer)),Ni(ur,Ui,yf,-1,-1,0,0),ur}function Ri(Ui){ci.push(Ui)}function Ni(Ui,ur,kr,yi,io,oi,eo){Ui.buffer.bind();var Ei;if(ur){var to=eo;!eo&&(!W(ur)||ia(ur)&&!W(ur.data))&&(to=Qt.oes_element_index_uint?Pl:uu),Rn._initBuffer(Ui.buffer,ur,kr,to,3)}else Ue.bufferData(zu,oi,kr),Ui.buffer.dtype=Ei||vc,Ui.buffer.usage=kr,Ui.buffer.dimension=3,Ui.buffer.byteLength=oi;if(Ei=eo,!eo){switch(Ui.buffer.dtype){case vc:case ef:Ei=vc;break;case uu:case tf:Ei=uu;break;case Pl:case nf:Ei=Pl;break;default:le.raise("unsupported type for element array")}Ui.buffer.dtype=Ei}Ui.type=Ei,le(Ei!==Pl||!!Qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var li=io;li<0&&(li=Ui.buffer.byteLength,Ei===uu?li>>=1:Ei===Pl&&(li>>=2)),Ui.vertCount=li;var di=yi;if(yi<0){di=Su;var zo=Ui.buffer.dimension;zo===1&&(di=up),zo===2&&(di=Hl),zo===3&&(di=Su)}Ui.primType=di}function Xi(Ui){Ar.elementsCount--,le(Ui.buffer!==null,"must not double destroy elements"),delete Xr[Ui.id],Ui.buffer.destroy(),Ui.buffer=null}function pi(Ui,ur){var kr=Rn.create(null,zu,!0),yi=new Oi(kr._buffer);Ar.elementsCount++;function io(oi){if(!oi)kr(),yi.primType=Su,yi.vertCount=0,yi.type=vc;else if(typeof oi=="number")kr(oi),yi.primType=Su,yi.vertCount=oi|0,yi.type=vc;else{var eo=null,Ei=fp,to=-1,li=-1,di=0,zo=0;Array.isArray(oi)||W(oi)||ia(oi)?eo=oi:(le.type(oi,"object","invalid arguments for elements"),"data"in oi&&(eo=oi.data,le(Array.isArray(eo)||W(eo)||ia(eo),"invalid data for element buffer")),"usage"in oi&&(le.parameter(oi.usage,sc,"invalid element buffer usage"),Ei=sc[oi.usage]),"primitive"in oi&&(le.parameter(oi.primitive,Uu,"invalid element buffer primitive"),to=Uu[oi.primitive]),"count"in oi&&(le(typeof oi.count=="number"&&oi.count>=0,"invalid vertex count for elements"),li=oi.count|0),"type"in oi&&(le.parameter(oi.type,mr,"invalid buffer type"),zo=mr[oi.type]),"length"in oi?di=oi.length|0:(di=li,zo===uu||zo===tf?di*=2:(zo===Pl||zo===nf)&&(di*=4))),Ni(yi,eo,Ei,to,li,di,zo)}return io}return io(Ui),io._reglType="elements",io._elements=yi,io.subdata=function(oi,eo){return kr.subdata(oi,eo),io},io.destroy=function(){Xi(yi)},io}return{create:pi,createStream:Fi,destroyStream:Ri,getElements:function(Ui){return typeof Ui=="function"&&Ui._elements instanceof Oi?Ui._elements:null},clear:function(){Wo(Xr).forEach(Xi)}}}var bs=new Float32Array(1),Md=new Uint32Array(bs.buffer),Yh=5123;function Pd(Ue){for(var Qt=_r.allocType(Yh,Ue.length),Rn=0;Rn<Ue.length;++Rn)if(isNaN(Ue[Rn]))Qt[Rn]=65535;else if(Ue[Rn]===1/0)Qt[Rn]=31744;else if(Ue[Rn]===-1/0)Qt[Rn]=64512;else{bs[0]=Ue[Rn];var Ar=Md[0],Xr=Ar>>>31<<15,Or=(Ar<<1>>>24)-127,mr=Ar>>13&1023;if(Or<-24)Qt[Rn]=Xr;else if(Or<-14){var Oi=-14-Or;Qt[Rn]=Xr+(mr+1024>>Oi)}else Or>15?Qt[Rn]=Xr+31744:Qt[Rn]=Xr+(Or+15<<10)+mr}return Qt}function cl(Ue){return Array.isArray(Ue)||W(Ue)}var Sh=function(Ue){return!(Ue&Ue-1)&&!!Ue},Th=34467,ne=3553,_e=34067,qe=34069,un=6408,Y=6406,tr=6407,Rr=6409,Di=6410,zi=32854,lo=32855,uo=36194,wa=32819,No=32820,Aa=33635,os=34042,ga=6402,Ra=34041,Rs=35904,ka=35906,Za=36193,ms=33776,nl=33777,Wa=33778,Rc=33779,us=35986,Tu=35987,fu=34798,jc=35840,nh=35841,Id=35842,_f=35843,Nf=36196,rf=5121,wh=5123,Ah=5125,Bf=5126,b0=10242,Ld=10243,zp=10497,Ff=33071,jp=33648,Dd=10240,hp=10241,kf=9728,Vp=9729,Ch=9984,Hp=9985,Uf=9986,Xs=9987,dp=33170,bf=4352,he=4353,Fe=4354,gt=34046,wn=3317,ar=37440,zr=37441,gi=37443,Ki=37444,ya=33984,Ea=[Ch,Uf,Hp,Xs],Es=[0,Rr,Di,tr,un],Ua={};Ua[Rr]=Ua[Y]=Ua[ga]=1,Ua[Ra]=Ua[Di]=2,Ua[tr]=Ua[Rs]=3,Ua[un]=Ua[ka]=4;function Da(Ue){return"[object "+Ue+"]"}var Mc=Da("HTMLCanvasElement"),of=Da("OffscreenCanvas"),rl=Da("CanvasRenderingContext2D"),fo=Da("ImageBitmap"),Yc=Da("HTMLImageElement"),Nd=Da("HTMLVideoElement"),Oh=Object.keys(oo).concat([Mc,of,rl,fo,Yc,Nd]),Ma=[];Ma[rf]=1,Ma[Bf]=4,Ma[Za]=2,Ma[wh]=2,Ma[Ah]=4;var as=[];as[zi]=2,as[lo]=2,as[uo]=2,as[Ra]=4,as[ms]=.5,as[nl]=.5,as[Wa]=1,as[Rc]=1,as[us]=.5,as[Tu]=1,as[fu]=1,as[jc]=.5,as[nh]=.25,as[Id]=.5,as[_f]=.25,as[Nf]=.5;function x0(Ue){return Array.isArray(Ue)&&(Ue.length===0||typeof Ue[0]=="number")}function Zi(Ue){if(!Array.isArray(Ue))return!1;var Qt=Ue.length;return!(Qt===0||!cl(Ue[0]))}function xf(Ue){return Object.prototype.toString.call(Ue)}function Bd(Ue){return xf(Ue)===Mc}function Rh(Ue){return xf(Ue)===of}function Ef(Ue){return xf(Ue)===rl}function hu(Ue){return xf(Ue)===fo}function E0(Ue){return xf(Ue)===Yc}function Mh(Ue){return xf(Ue)===Nd}function Kc(Ue){if(!Ue)return!1;var Qt=xf(Ue);return Oh.indexOf(Qt)>=0?!0:x0(Ue)||Zi(Ue)||ia(Ue)}function rh(Ue){return oo[Object.prototype.toString.call(Ue)]|0}function S0(Ue,Qt){var Rn=Qt.length;switch(Ue.type){case rf:case wh:case Ah:case Bf:var Ar=_r.allocType(Ue.type,Rn);Ar.set(Qt),Ue.data=Ar;break;case Za:Ue.data=Pd(Qt);break;default:le.raise("unsupported texture type, must specify a typed array")}}function Fd(Ue,Qt){return _r.allocType(Ue.type===Za?Bf:Ue.type,Qt)}function T0(Ue,Qt){Ue.type===Za?(Ue.data=Pd(Qt),_r.freeType(Qt)):Ue.data=Qt}function sv(Ue,Qt,Rn,Ar,Xr,Or){for(var mr=Ue.width,Oi=Ue.height,ci=Ue.channels,Fi=mr*Oi*ci,Ri=Fd(Ue,Fi),Ni=0,Xi=0;Xi<Oi;++Xi)for(var pi=0;pi<mr;++pi)for(var Ui=0;Ui<ci;++Ui)Ri[Ni++]=Qt[Rn*pi+Ar*Xi+Xr*Ui+Or];T0(Ue,Ri)}function du(Ue,Qt,Rn,Ar,Xr,Or){var mr;if(typeof as[Ue]!="undefined"?mr=as[Ue]:mr=Ua[Ue]*Ma[Qt],Or&&(mr*=6),Xr){for(var Oi=0,ci=Rn;ci>=1;)Oi+=mr*ci*ci,ci/=2;return Oi}else return mr*Rn*Ar}function ju(Ue,Qt,Rn,Ar,Xr,Or,mr){var Oi={"don't care":bf,"dont care":bf,nice:Fe,fast:he},ci={repeat:zp,clamp:Ff,mirror:jp},Fi={nearest:kf,linear:Vp},Ri=D({mipmap:Xs,"nearest mipmap nearest":Ch,"linear mipmap nearest":Hp,"nearest mipmap linear":Uf,"linear mipmap linear":Xs},Fi),Ni={none:0,browser:Ki},Xi={uint8:rf,rgba4:wa,rgb565:Aa,"rgb5 a1":No},pi={alpha:Y,luminance:Rr,"luminance alpha":Di,rgb:tr,rgba:un,rgba4:zi,"rgb5 a1":lo,rgb565:uo},Ui={};Qt.ext_srgb&&(pi.srgb=Rs,pi.srgba=ka),Qt.oes_texture_float&&(Xi.float32=Xi.float=Bf),Qt.oes_texture_half_float&&(Xi.float16=Xi["half float"]=Za),Qt.webgl_depth_texture&&(D(pi,{depth:ga,"depth stencil":Ra}),D(Xi,{uint16:wh,uint32:Ah,"depth stencil":os})),Qt.webgl_compressed_texture_s3tc&&D(Ui,{"rgb s3tc dxt1":ms,"rgba s3tc dxt1":nl,"rgba s3tc dxt3":Wa,"rgba s3tc dxt5":Rc}),Qt.webgl_compressed_texture_atc&&D(Ui,{"rgb atc":us,"rgba atc explicit alpha":Tu,"rgba atc interpolated alpha":fu}),Qt.webgl_compressed_texture_pvrtc&&D(Ui,{"rgb pvrtc 4bppv1":jc,"rgb pvrtc 2bppv1":nh,"rgba pvrtc 4bppv1":Id,"rgba pvrtc 2bppv1":_f}),Qt.webgl_compressed_texture_etc1&&(Ui["rgb etc1"]=Nf);var ur=Array.prototype.slice.call(Ue.getParameter(Th));Object.keys(Ui).forEach(function(mn){var Pr=Ui[mn];ur.indexOf(Pr)>=0&&(pi[mn]=Pr)});var kr=Object.keys(pi);Rn.textureFormats=kr;var yi=[];Object.keys(pi).forEach(function(mn){var Pr=pi[mn];yi[Pr]=mn});var io=[];Object.keys(Xi).forEach(function(mn){var Pr=Xi[mn];io[Pr]=mn});var oi=[];Object.keys(Fi).forEach(function(mn){var Pr=Fi[mn];oi[Pr]=mn});var eo=[];Object.keys(Ri).forEach(function(mn){var Pr=Ri[mn];eo[Pr]=mn});var Ei=[];Object.keys(ci).forEach(function(mn){var Pr=ci[mn];Ei[Pr]=mn});var to=kr.reduce(function(mn,Pr){var xr=pi[Pr];return xr===Rr||xr===Y||xr===Rr||xr===Di||xr===ga||xr===Ra||Qt.ext_srgb&&(xr===Rs||xr===ka)?mn[xr]=xr:xr===lo||Pr.indexOf("rgba")>=0?mn[xr]=un:mn[xr]=tr,mn},{});function li(){this.internalformat=un,this.format=un,this.type=rf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Ki,this.width=0,this.height=0,this.channels=0}function di(mn,Pr){mn.internalformat=Pr.internalformat,mn.format=Pr.format,mn.type=Pr.type,mn.compressed=Pr.compressed,mn.premultiplyAlpha=Pr.premultiplyAlpha,mn.flipY=Pr.flipY,mn.unpackAlignment=Pr.unpackAlignment,mn.colorSpace=Pr.colorSpace,mn.width=Pr.width,mn.height=Pr.height,mn.channels=Pr.channels}function zo(mn,Pr){if(!(typeof Pr!="object"||!Pr)){if("premultiplyAlpha"in Pr&&(le.type(Pr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),mn.premultiplyAlpha=Pr.premultiplyAlpha),"flipY"in Pr&&(le.type(Pr.flipY,"boolean","invalid texture flip"),mn.flipY=Pr.flipY),"alignment"in Pr&&(le.oneOf(Pr.alignment,[1,2,4,8],"invalid texture unpack alignment"),mn.unpackAlignment=Pr.alignment),"colorSpace"in Pr&&(le.parameter(Pr.colorSpace,Ni,"invalid colorSpace"),mn.colorSpace=Ni[Pr.colorSpace]),"type"in Pr){var xr=Pr.type;le(Qt.oes_texture_float||!(xr==="float"||xr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),le(Qt.oes_texture_half_float||!(xr==="half float"||xr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),le(Qt.webgl_depth_texture||!(xr==="uint16"||xr==="uint32"||xr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(xr,Xi,"invalid texture type"),mn.type=Xi[xr]}var vo=mn.width,za=mn.height,Ps=mn.channels,It=!1;"shape"in Pr?(le(Array.isArray(Pr.shape)&&Pr.shape.length>=2,"shape must be an array"),vo=Pr.shape[0],za=Pr.shape[1],Pr.shape.length===3&&(Ps=Pr.shape[2],le(Ps>0&&Ps<=4,"invalid number of channels"),It=!0),le(vo>=0&&vo<=Rn.maxTextureSize,"invalid width"),le(za>=0&&za<=Rn.maxTextureSize,"invalid height")):("radius"in Pr&&(vo=za=Pr.radius,le(vo>=0&&vo<=Rn.maxTextureSize,"invalid radius")),"width"in Pr&&(vo=Pr.width,le(vo>=0&&vo<=Rn.maxTextureSize,"invalid width")),"height"in Pr&&(za=Pr.height,le(za>=0&&za<=Rn.maxTextureSize,"invalid height")),"channels"in Pr&&(Ps=Pr.channels,le(Ps>0&&Ps<=4,"invalid number of channels"),It=!0)),mn.width=vo|0,mn.height=za|0,mn.channels=Ps|0;var tn=!1;if("format"in Pr){var Mn=Pr.format;le(Qt.webgl_depth_texture||!(Mn==="depth"||Mn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(Mn,pi,"invalid texture format");var Tr=mn.internalformat=pi[Mn];mn.format=to[Tr],Mn in Xi&&("type"in Pr||(mn.type=Xi[Mn])),Mn in Ui&&(mn.compressed=!0),tn=!0}!It&&tn?mn.channels=Ua[mn.format]:It&&!tn?mn.channels!==Es[mn.format]&&(mn.format=mn.internalformat=Es[mn.channels]):tn&&It&&le(mn.channels===Ua[mn.format],"number of channels inconsistent with specified format")}}function pa(mn){Ue.pixelStorei(ar,mn.flipY),Ue.pixelStorei(zr,mn.premultiplyAlpha),Ue.pixelStorei(gi,mn.colorSpace),Ue.pixelStorei(wn,mn.unpackAlignment)}function qi(){li.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Si(mn,Pr){var xr=null;if(Kc(Pr)?xr=Pr:Pr&&(le.type(Pr,"object","invalid pixel data type"),zo(mn,Pr),"x"in Pr&&(mn.xOffset=Pr.x|0),"y"in Pr&&(mn.yOffset=Pr.y|0),Kc(Pr.data)&&(xr=Pr.data)),le(!mn.compressed||xr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Pr.copy){le(!xr,"can not specify copy and data field for the same texture");var vo=Xr.viewportWidth,za=Xr.viewportHeight;mn.width=mn.width||vo-mn.xOffset,mn.height=mn.height||za-mn.yOffset,mn.needsCopy=!0,le(mn.xOffset>=0&&mn.xOffset<vo&&mn.yOffset>=0&&mn.yOffset<za&&mn.width>0&&mn.width<=vo&&mn.height>0&&mn.height<=za,"copy texture read out of bounds")}else if(!xr)mn.width=mn.width||1,mn.height=mn.height||1,mn.channels=mn.channels||4;else if(W(xr))mn.channels=mn.channels||4,mn.data=xr,!("type"in Pr)&&mn.type===rf&&(mn.type=rh(xr));else if(x0(xr))mn.channels=mn.channels||4,S0(mn,xr),mn.alignment=1,mn.needsFree=!0;else if(ia(xr)){var Ps=xr.data;!Array.isArray(Ps)&&mn.type===rf&&(mn.type=rh(Ps));var It=xr.shape,tn=xr.stride,Mn,Tr,br,jn,Jn,nr;It.length===3?(br=It[2],nr=tn[2]):(le(It.length===2,"invalid ndarray pixel data, must be 2 or 3D"),br=1,nr=1),Mn=It[0],Tr=It[1],jn=tn[0],Jn=tn[1],mn.alignment=1,mn.width=Mn,mn.height=Tr,mn.channels=br,mn.format=mn.internalformat=Es[br],mn.needsFree=!0,sv(mn,Ps,jn,Jn,nr,xr.offset)}else if(Bd(xr)||Rh(xr)||Ef(xr))Bd(xr)||Rh(xr)?mn.element=xr:mn.element=xr.canvas,mn.width=mn.element.width,mn.height=mn.element.height,mn.channels=4;else if(hu(xr))mn.element=xr,mn.width=xr.width,mn.height=xr.height,mn.channels=4;else if(E0(xr))mn.element=xr,mn.width=xr.naturalWidth,mn.height=xr.naturalHeight,mn.channels=4;else if(Mh(xr))mn.element=xr,mn.width=xr.videoWidth,mn.height=xr.videoHeight,mn.channels=4;else if(Zi(xr)){var xn=mn.width||xr[0].length,Wn=mn.height||xr.length,en=mn.channels;cl(xr[0][0])?en=en||xr[0][0].length:en=en||1;for(var Yn=Fa.shape(xr),Dr=1,jr=0;jr<Yn.length;++jr)Dr*=Yn[jr];var vi=Fd(mn,Dr);Fa.flatten(xr,Yn,"",vi),T0(mn,vi),mn.alignment=1,mn.width=xn,mn.height=Wn,mn.channels=en,mn.format=mn.internalformat=Es[en],mn.needsFree=!0}mn.type===Bf?le(Rn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):mn.type===Za&&le(Rn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function $r(mn,Pr,xr){var vo=mn.element,za=mn.data,Ps=mn.internalformat,It=mn.format,tn=mn.type,Mn=mn.width,Tr=mn.height;pa(mn),vo?Ue.texImage2D(Pr,xr,It,It,tn,vo):mn.compressed?Ue.compressedTexImage2D(Pr,xr,Ps,Mn,Tr,0,za):mn.needsCopy?(Ar(),Ue.copyTexImage2D(Pr,xr,It,mn.xOffset,mn.yOffset,Mn,Tr,0)):Ue.texImage2D(Pr,xr,It,Mn,Tr,0,It,tn,za||null)}function ko(mn,Pr,xr,vo,za){var Ps=mn.element,It=mn.data,tn=mn.internalformat,Mn=mn.format,Tr=mn.type,br=mn.width,jn=mn.height;pa(mn),Ps?Ue.texSubImage2D(Pr,za,xr,vo,Mn,Tr,Ps):mn.compressed?Ue.compressedTexSubImage2D(Pr,za,xr,vo,tn,br,jn,It):mn.needsCopy?(Ar(),Ue.copyTexSubImage2D(Pr,za,xr,vo,mn.xOffset,mn.yOffset,br,jn)):Ue.texSubImage2D(Pr,za,xr,vo,br,jn,Mn,Tr,It)}var Na=[];function so(){return Na.pop()||new qi}function va(mn){mn.needsFree&&_r.freeType(mn.data),qi.call(mn),Na.push(mn)}function ha(){li.call(this),this.genMipmaps=!1,this.mipmapHint=bf,this.mipmask=0,this.images=Array(16)}function Jo(mn,Pr,xr){var vo=mn.images[0]=so();mn.mipmask=1,vo.width=mn.width=Pr,vo.height=mn.height=xr,vo.channels=mn.channels=4}function gs(mn,Pr){var xr=null;if(Kc(Pr))xr=mn.images[0]=so(),di(xr,mn),Si(xr,Pr),mn.mipmask=1;else if(zo(mn,Pr),Array.isArray(Pr.mipmap))for(var vo=Pr.mipmap,za=0;za<vo.length;++za)xr=mn.images[za]=so(),di(xr,mn),xr.width>>=za,xr.height>>=za,Si(xr,vo[za]),mn.mipmask|=1<<za;else xr=mn.images[0]=so(),di(xr,mn),Si(xr,Pr),mn.mipmask=1;di(mn,mn.images[0]),mn.compressed&&(mn.internalformat===ms||mn.internalformat===nl||mn.internalformat===Wa||mn.internalformat===Rc)&&le(mn.width%4===0&&mn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Sl(mn,Pr){for(var xr=mn.images,vo=0;vo<xr.length;++vo){if(!xr[vo])return;$r(xr[vo],Pr,vo)}}var Hc=[];function $a(){var mn=Hc.pop()||new ha;li.call(mn),mn.mipmask=0;for(var Pr=0;Pr<16;++Pr)mn.images[Pr]=null;return mn}function Gl(mn){for(var Pr=mn.images,xr=0;xr<Pr.length;++xr)Pr[xr]&&va(Pr[xr]),Pr[xr]=null;Hc.push(mn)}function qs(){this.minFilter=kf,this.magFilter=kf,this.wrapS=Ff,this.wrapT=Ff,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=bf}function ie(mn,Pr){if("min"in Pr){var xr=Pr.min;le.parameter(xr,Ri),mn.minFilter=Ri[xr],Ea.indexOf(mn.minFilter)>=0&&!("faces"in Pr)&&(mn.genMipmaps=!0)}if("mag"in Pr){var vo=Pr.mag;le.parameter(vo,Fi),mn.magFilter=Fi[vo]}var za=mn.wrapS,Ps=mn.wrapT;if("wrap"in Pr){var It=Pr.wrap;typeof It=="string"?(le.parameter(It,ci),za=Ps=ci[It]):Array.isArray(It)&&(le.parameter(It[0],ci),le.parameter(It[1],ci),za=ci[It[0]],Ps=ci[It[1]])}else{if("wrapS"in Pr){var tn=Pr.wrapS;le.parameter(tn,ci),za=ci[tn]}if("wrapT"in Pr){var Mn=Pr.wrapT;le.parameter(Mn,ci),Ps=ci[Mn]}}if(mn.wrapS=za,mn.wrapT=Ps,"anisotropic"in Pr){var Tr=Pr.anisotropic;le(typeof Tr=="number"&&Tr>=1&&Tr<=Rn.maxAnisotropic,"aniso samples must be between 1 and "),mn.anisotropic=Pr.anisotropic}if("mipmap"in Pr){var br=!1;switch(typeof Pr.mipmap){case"string":le.parameter(Pr.mipmap,Oi,"invalid mipmap hint"),mn.mipmapHint=Oi[Pr.mipmap],mn.genMipmaps=!0,br=!0;break;case"boolean":br=mn.genMipmaps=Pr.mipmap;break;case"object":le(Array.isArray(Pr.mipmap),"invalid mipmap type"),mn.genMipmaps=!1,br=!0;break;default:le.raise("invalid mipmap type")}br&&!("min"in Pr)&&(mn.minFilter=Ch)}}function tc(mn,Pr){Ue.texParameteri(Pr,hp,mn.minFilter),Ue.texParameteri(Pr,Dd,mn.magFilter),Ue.texParameteri(Pr,b0,mn.wrapS),Ue.texParameteri(Pr,Ld,mn.wrapT),Qt.ext_texture_filter_anisotropic&&Ue.texParameteri(Pr,gt,mn.anisotropic),mn.genMipmaps&&(Ue.hint(dp,mn.mipmapHint),Ue.generateMipmap(Pr))}var ss=0,fr={},Kr=Rn.maxTextureUnits,Dl=Array(Kr).map(function(){return null});function Ca(mn){li.call(this),this.mipmask=0,this.internalformat=un,this.id=ss++,this.refCount=1,this.target=mn,this.texture=Ue.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qs,mr.profile&&(this.stats={size:0})}function ru(mn){Ue.activeTexture(ya),Ue.bindTexture(mn.target,mn.texture)}function zs(){var mn=Dl[0];mn?Ue.bindTexture(mn.target,mn.texture):Ue.bindTexture(ne,null)}function ea(mn){var Pr=mn.texture;le(Pr,"must not double destroy texture");var xr=mn.unit,vo=mn.target;xr>=0&&(Ue.activeTexture(ya+xr),Ue.bindTexture(vo,null),Dl[xr]=null),Ue.deleteTexture(Pr),mn.texture=null,mn.params=null,mn.pixels=null,mn.refCount=0,delete fr[mn.id],Or.textureCount--}D(Ca.prototype,{bind:function(){var mn=this;mn.bindCount+=1;var Pr=mn.unit;if(Pr<0){for(var xr=0;xr<Kr;++xr){var vo=Dl[xr];if(vo){if(vo.bindCount>0)continue;vo.unit=-1}Dl[xr]=mn,Pr=xr;break}Pr>=Kr&&le.raise("insufficient number of texture units"),mr.profile&&Or.maxTextureUnits<Pr+1&&(Or.maxTextureUnits=Pr+1),mn.unit=Pr,Ue.activeTexture(ya+Pr),Ue.bindTexture(mn.target,mn.texture)}return Pr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ea(this)}});function Ia(mn,Pr){var xr=new Ca(ne);fr[xr.id]=xr,Or.textureCount++;function vo(It,tn){var Mn=xr.texInfo;qs.call(Mn);var Tr=$a();return typeof It=="number"?typeof tn=="number"?Jo(Tr,It|0,tn|0):Jo(Tr,It|0,It|0):It?(le.type(It,"object","invalid arguments to regl.texture"),ie(Mn,It),gs(Tr,It)):Jo(Tr,1,1),Mn.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),xr.mipmask=Tr.mipmask,di(xr,Tr),le.texture2D(Mn,Tr,Rn),xr.internalformat=Tr.internalformat,vo.width=Tr.width,vo.height=Tr.height,ru(xr),Sl(Tr,ne),tc(Mn,ne),zs(),Gl(Tr),mr.profile&&(xr.stats.size=du(xr.internalformat,xr.type,Tr.width,Tr.height,Mn.genMipmaps,!1)),vo.format=yi[xr.internalformat],vo.type=io[xr.type],vo.mag=oi[Mn.magFilter],vo.min=eo[Mn.minFilter],vo.wrapS=Ei[Mn.wrapS],vo.wrapT=Ei[Mn.wrapT],vo}function za(It,tn,Mn,Tr){le(!!It,"must specify image data");var br=tn|0,jn=Mn|0,Jn=Tr|0,nr=so();return di(nr,xr),nr.width=0,nr.height=0,Si(nr,It),nr.width=nr.width||(xr.width>>Jn)-br,nr.height=nr.height||(xr.height>>Jn)-jn,le(xr.type===nr.type&&xr.format===nr.format&&xr.internalformat===nr.internalformat,"incompatible format for texture.subimage"),le(br>=0&&jn>=0&&br+nr.width<=xr.width&&jn+nr.height<=xr.height,"texture.subimage write out of bounds"),le(xr.mipmask&1<<Jn,"missing mipmap data"),le(nr.data||nr.element||nr.needsCopy,"missing image data"),ru(xr),ko(nr,ne,br,jn,Jn),zs(),va(nr),vo}function Ps(It,tn){var Mn=It|0,Tr=tn|0||Mn;if(Mn===xr.width&&Tr===xr.height)return vo;vo.width=xr.width=Mn,vo.height=xr.height=Tr,ru(xr);for(var br=0;xr.mipmask>>br;++br){var jn=Mn>>br,Jn=Tr>>br;if(!jn||!Jn)break;Ue.texImage2D(ne,br,xr.format,jn,Jn,0,xr.format,xr.type,null)}return zs(),mr.profile&&(xr.stats.size=du(xr.internalformat,xr.type,Mn,Tr,!1,!1)),vo}return vo(mn,Pr),vo.subimage=za,vo.resize=Ps,vo._reglType="texture2d",vo._texture=xr,mr.profile&&(vo.stats=xr.stats),vo.destroy=function(){xr.decRef()},vo}function ys(mn,Pr,xr,vo,za,Ps){var It=new Ca(_e);fr[It.id]=It,Or.cubeCount++;var tn=new Array(6);function Mn(jn,Jn,nr,xn,Wn,en){var Yn,Dr=It.texInfo;for(qs.call(Dr),Yn=0;Yn<6;++Yn)tn[Yn]=$a();if(typeof jn=="number"||!jn){var jr=jn|0||1;for(Yn=0;Yn<6;++Yn)Jo(tn[Yn],jr,jr)}else if(typeof jn=="object")if(Jn)gs(tn[0],jn),gs(tn[1],Jn),gs(tn[2],nr),gs(tn[3],xn),gs(tn[4],Wn),gs(tn[5],en);else if(ie(Dr,jn),zo(It,jn),"faces"in jn){var vi=jn.faces;for(le(Array.isArray(vi)&&vi.length===6,"cube faces must be a length 6 array"),Yn=0;Yn<6;++Yn)le(typeof vi[Yn]=="object"&&!!vi[Yn],"invalid input for cube map face"),di(tn[Yn],It),gs(tn[Yn],vi[Yn])}else for(Yn=0;Yn<6;++Yn)gs(tn[Yn],jn);else le.raise("invalid arguments to cube map");for(di(It,tn[0]),Rn.npotTextureCube||le(Sh(It.width)&&Sh(It.height),"your browser does not support non power or two texture dimensions"),Dr.genMipmaps?It.mipmask=(tn[0].width<<1)-1:It.mipmask=tn[0].mipmask,le.textureCube(It,Dr,tn,Rn),It.internalformat=tn[0].internalformat,Mn.width=tn[0].width,Mn.height=tn[0].height,ru(It),Yn=0;Yn<6;++Yn)Sl(tn[Yn],qe+Yn);for(tc(Dr,_e),zs(),mr.profile&&(It.stats.size=du(It.internalformat,It.type,Mn.width,Mn.height,Dr.genMipmaps,!0)),Mn.format=yi[It.internalformat],Mn.type=io[It.type],Mn.mag=oi[Dr.magFilter],Mn.min=eo[Dr.minFilter],Mn.wrapS=Ei[Dr.wrapS],Mn.wrapT=Ei[Dr.wrapT],Yn=0;Yn<6;++Yn)Gl(tn[Yn]);return Mn}function Tr(jn,Jn,nr,xn,Wn){le(!!Jn,"must specify image data"),le(typeof jn=="number"&&jn===(jn|0)&&jn>=0&&jn<6,"invalid face");var en=nr|0,Yn=xn|0,Dr=Wn|0,jr=so();return di(jr,It),jr.width=0,jr.height=0,Si(jr,Jn),jr.width=jr.width||(It.width>>Dr)-en,jr.height=jr.height||(It.height>>Dr)-Yn,le(It.type===jr.type&&It.format===jr.format&&It.internalformat===jr.internalformat,"incompatible format for texture.subimage"),le(en>=0&&Yn>=0&&en+jr.width<=It.width&&Yn+jr.height<=It.height,"texture.subimage write out of bounds"),le(It.mipmask&1<<Dr,"missing mipmap data"),le(jr.data||jr.element||jr.needsCopy,"missing image data"),ru(It),ko(jr,qe+jn,en,Yn,Dr),zs(),va(jr),Mn}function br(jn){var Jn=jn|0;if(Jn!==It.width){Mn.width=It.width=Jn,Mn.height=It.height=Jn,ru(It);for(var nr=0;nr<6;++nr)for(var xn=0;It.mipmask>>xn;++xn)Ue.texImage2D(qe+nr,xn,It.format,Jn>>xn,Jn>>xn,0,It.format,It.type,null);return zs(),mr.profile&&(It.stats.size=du(It.internalformat,It.type,Mn.width,Mn.height,!1,!0)),Mn}}return Mn(mn,Pr,xr,vo,za,Ps),Mn.subimage=Tr,Mn.resize=br,Mn._reglType="textureCube",Mn._texture=It,mr.profile&&(Mn.stats=It.stats),Mn.destroy=function(){It.decRef()},Mn}function uc(){for(var mn=0;mn<Kr;++mn)Ue.activeTexture(ya+mn),Ue.bindTexture(ne,null),Dl[mn]=null;Wo(fr).forEach(ea),Or.cubeCount=0,Or.textureCount=0}mr.profile&&(Or.getTotalTextureSize=function(){var mn=0;return Object.keys(fr).forEach(function(Pr){mn+=fr[Pr].stats.size}),mn});function Nh(){for(var mn=0;mn<Kr;++mn){var Pr=Dl[mn];Pr&&(Pr.bindCount=0,Pr.unit=-1,Dl[mn]=null)}Wo(fr).forEach(function(xr){xr.texture=Ue.createTexture(),Ue.bindTexture(xr.target,xr.texture);for(var vo=0;vo<32;++vo)if(xr.mipmask&1<<vo)if(xr.target===ne)Ue.texImage2D(ne,vo,xr.internalformat,xr.width>>vo,xr.height>>vo,0,xr.internalformat,xr.type,null);else for(var za=0;za<6;++za)Ue.texImage2D(qe+za,vo,xr.internalformat,xr.width>>vo,xr.height>>vo,0,xr.internalformat,xr.type,null);tc(xr.texInfo,xr.target)})}return{create2D:Ia,createCube:ys,clear:uc,getTexture:function(mn){return null},restore:Nh}}var Sa=36161,pu=32854,af=32855,mc=36194,Kh=33189,Ql=36168,Vc=34041,qc=35907,pp=34836,Bo=34842,Eo=34843,Jl=[];Jl[pu]=2,Jl[af]=2,Jl[mc]=2,Jl[Kh]=2,Jl[Ql]=1,Jl[Vc]=4,Jl[qc]=4,Jl[pp]=16,Jl[Bo]=8,Jl[Eo]=6;function Qc(Ue,Qt,Rn){return Jl[Ue]*Qt*Rn}var Jc=function(Ue,Qt,Rn,Ar,Xr){var Or={rgba4:pu,rgb565:mc,"rgb5 a1":af,depth:Kh,stencil:Ql,"depth stencil":Vc};Qt.ext_srgb&&(Or.srgba=qc),Qt.ext_color_buffer_half_float&&(Or.rgba16f=Bo,Or.rgb16f=Eo),Qt.webgl_color_buffer_float&&(Or.rgba32f=pp);var mr=[];Object.keys(Or).forEach(function(pi){var Ui=Or[pi];mr[Ui]=pi});var Oi=0,ci={};function Fi(pi){this.id=Oi++,this.refCount=1,this.renderbuffer=pi,this.format=pu,this.width=0,this.height=0,Xr.profile&&(this.stats={size:0})}Fi.prototype.decRef=function(){--this.refCount<=0&&Ri(this)};function Ri(pi){var Ui=pi.renderbuffer;le(Ui,"must not double destroy renderbuffer"),Ue.bindRenderbuffer(Sa,null),Ue.deleteRenderbuffer(Ui),pi.renderbuffer=null,pi.refCount=0,delete ci[pi.id],Ar.renderbufferCount--}function Ni(pi,Ui){var ur=new Fi(Ue.createRenderbuffer());ci[ur.id]=ur,Ar.renderbufferCount++;function kr(io,oi){var eo=0,Ei=0,to=pu;if(typeof io=="object"&&io){var li=io;if("shape"in li){var di=li.shape;le(Array.isArray(di)&&di.length>=2,"invalid renderbuffer shape"),eo=di[0]|0,Ei=di[1]|0}else"radius"in li&&(eo=Ei=li.radius|0),"width"in li&&(eo=li.width|0),"height"in li&&(Ei=li.height|0);"format"in li&&(le.parameter(li.format,Or,"invalid renderbuffer format"),to=Or[li.format])}else typeof io=="number"?(eo=io|0,typeof oi=="number"?Ei=oi|0:Ei=eo):io?le.raise("invalid arguments to renderbuffer constructor"):eo=Ei=1;if(le(eo>0&&Ei>0&&eo<=Rn.maxRenderbufferSize&&Ei<=Rn.maxRenderbufferSize,"invalid renderbuffer size"),!(eo===ur.width&&Ei===ur.height&&to===ur.format))return kr.width=ur.width=eo,kr.height=ur.height=Ei,ur.format=to,Ue.bindRenderbuffer(Sa,ur.renderbuffer),Ue.renderbufferStorage(Sa,to,eo,Ei),le(Ue.getError()===0,"invalid render buffer format"),Xr.profile&&(ur.stats.size=Qc(ur.format,ur.width,ur.height)),kr.format=mr[ur.format],kr}function yi(io,oi){var eo=io|0,Ei=oi|0||eo;return eo===ur.width&&Ei===ur.height||(le(eo>0&&Ei>0&&eo<=Rn.maxRenderbufferSize&&Ei<=Rn.maxRenderbufferSize,"invalid renderbuffer size"),kr.width=ur.width=eo,kr.height=ur.height=Ei,Ue.bindRenderbuffer(Sa,ur.renderbuffer),Ue.renderbufferStorage(Sa,ur.format,eo,Ei),le(Ue.getError()===0,"invalid render buffer format"),Xr.profile&&(ur.stats.size=Qc(ur.format,ur.width,ur.height))),kr}return kr(pi,Ui),kr.resize=yi,kr._reglType="renderbuffer",kr._renderbuffer=ur,Xr.profile&&(kr.stats=ur.stats),kr.destroy=function(){ur.decRef()},kr}Xr.profile&&(Ar.getTotalRenderbufferSize=function(){var pi=0;return Object.keys(ci).forEach(function(Ui){pi+=ci[Ui].stats.size}),pi});function Xi(){Wo(ci).forEach(function(pi){pi.renderbuffer=Ue.createRenderbuffer(),Ue.bindRenderbuffer(Sa,pi.renderbuffer),Ue.renderbufferStorage(Sa,pi.format,pi.width,pi.height)}),Ue.bindRenderbuffer(Sa,null)}return{create:Ni,clear:function(){Wo(ci).forEach(Ri)},restore:Xi}},hl=36160,wu=36161,ih=3553,kd=34069,Ms=36064,gc=36096,w0=36128,qh=33306,vp=36053,Ph=36054,eu=36055,mp=36057,Au=36061,Wp=36193,Vu=5121,Ud=5126,A0=6407,Ih=6408,Qh=6402,C0=[A0,Ih],zf=[];zf[Ih]=4,zf[A0]=3;var jf=[];jf[Vu]=1,jf[Ud]=4,jf[Wp]=2;var O0=32854,oh=32855,Sf=36194,lv=33189,Vf=36168,Jh=34041,R0=35907,_=34836,S=34842,x=34843,C=[O0,oh,Sf,R0,S,x,_],k={};k[vp]="complete",k[Ph]="incomplete attachment",k[mp]="incomplete dimensions",k[eu]="incomplete, missing attachment",k[Au]="unsupported";function G(Ue,Qt,Rn,Ar,Xr,Or){var mr={cur:null,next:null,dirty:!1,setFBO:null},Oi=["rgba"],ci=["rgba4","rgb565","rgb5 a1"];Qt.ext_srgb&&ci.push("srgba"),Qt.ext_color_buffer_half_float&&ci.push("rgba16f","rgb16f"),Qt.webgl_color_buffer_float&&ci.push("rgba32f");var Fi=["uint8"];Qt.oes_texture_half_float&&Fi.push("half float","float16"),Qt.oes_texture_float&&Fi.push("float","float32");function Ri(qi,Si,$r){this.target=qi,this.texture=Si,this.renderbuffer=$r;var ko=0,Na=0;Si?(ko=Si.width,Na=Si.height):$r&&(ko=$r.width,Na=$r.height),this.width=ko,this.height=Na}function Ni(qi){qi&&(qi.texture&&qi.texture._texture.decRef(),qi.renderbuffer&&qi.renderbuffer._renderbuffer.decRef())}function Xi(qi,Si,$r){if(qi)if(qi.texture){var ko=qi.texture._texture,Na=Math.max(1,ko.width),so=Math.max(1,ko.height);le(Na===Si&&so===$r,"inconsistent width/height for supplied texture"),ko.refCount+=1}else{var va=qi.renderbuffer._renderbuffer;le(va.width===Si&&va.height===$r,"inconsistent width/height for renderbuffer"),va.refCount+=1}}function pi(qi,Si){Si&&(Si.texture?Ue.framebufferTexture2D(hl,qi,Si.target,Si.texture._texture.texture,0):Ue.framebufferRenderbuffer(hl,qi,wu,Si.renderbuffer._renderbuffer.renderbuffer))}function Ui(qi){var Si=ih,$r=null,ko=null,Na=qi;typeof qi=="object"&&(Na=qi.data,"target"in qi&&(Si=qi.target|0)),le.type(Na,"function","invalid attachment data");var so=Na._reglType;return so==="texture2d"?($r=Na,le(Si===ih)):so==="textureCube"?($r=Na,le(Si>=kd&&Si<kd+6,"invalid cube map target")):so==="renderbuffer"?(ko=Na,Si=wu):le.raise("invalid regl object for attachment"),new Ri(Si,$r,ko)}function ur(qi,Si,$r,ko,Na){if($r){var so=Ar.create2D({width:qi,height:Si,format:ko,type:Na});return so._texture.refCount=0,new Ri(ih,so,null)}else{var va=Xr.create({width:qi,height:Si,format:ko});return va._renderbuffer.refCount=0,new Ri(wu,null,va)}}function kr(qi){return qi&&(qi.texture||qi.renderbuffer)}function yi(qi,Si,$r){qi&&(qi.texture?qi.texture.resize(Si,$r):qi.renderbuffer&&qi.renderbuffer.resize(Si,$r),qi.width=Si,qi.height=$r)}var io=0,oi={};function eo(){this.id=io++,oi[this.id]=this,this.framebuffer=Ue.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ei(qi){qi.colorAttachments.forEach(Ni),Ni(qi.depthAttachment),Ni(qi.stencilAttachment),Ni(qi.depthStencilAttachment)}function to(qi){var Si=qi.framebuffer;le(Si,"must not double destroy framebuffer"),Ue.deleteFramebuffer(Si),qi.framebuffer=null,Or.framebufferCount--,delete oi[qi.id]}function li(qi){var Si;Ue.bindFramebuffer(hl,qi.framebuffer);var $r=qi.colorAttachments;for(Si=0;Si<$r.length;++Si)pi(Ms+Si,$r[Si]);for(Si=$r.length;Si<Rn.maxColorAttachments;++Si)Ue.framebufferTexture2D(hl,Ms+Si,ih,null,0);Ue.framebufferTexture2D(hl,qh,ih,null,0),Ue.framebufferTexture2D(hl,gc,ih,null,0),Ue.framebufferTexture2D(hl,w0,ih,null,0),pi(gc,qi.depthAttachment),pi(w0,qi.stencilAttachment),pi(qh,qi.depthStencilAttachment);var ko=Ue.checkFramebufferStatus(hl);!Ue.isContextLost()&&ko!==vp&&le.raise("framebuffer configuration not supported, status = "+k[ko]),Ue.bindFramebuffer(hl,mr.next?mr.next.framebuffer:null),mr.cur=mr.next,Ue.getError()}function di(qi,Si){var $r=new eo;Or.framebufferCount++;function ko(so,va){var ha;le(mr.next!==$r,"can not update framebuffer which is currently in use");var Jo=0,gs=0,Sl=!0,Hc=!0,$a=null,Gl=!0,qs="rgba",ie="uint8",tc=1,ss=null,fr=null,Kr=null,Dl=!1;if(typeof so=="number")Jo=so|0,gs=va|0||Jo;else if(!so)Jo=gs=1;else{le.type(so,"object","invalid arguments for framebuffer");var Ca=so;if("shape"in Ca){var ru=Ca.shape;le(Array.isArray(ru)&&ru.length>=2,"invalid shape for framebuffer"),Jo=ru[0],gs=ru[1]}else"radius"in Ca&&(Jo=gs=Ca.radius),"width"in Ca&&(Jo=Ca.width),"height"in Ca&&(gs=Ca.height);("color"in Ca||"colors"in Ca)&&($a=Ca.color||Ca.colors,Array.isArray($a)&&le($a.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),$a||("colorCount"in Ca&&(tc=Ca.colorCount|0,le(tc>0,"invalid color buffer count")),"colorTexture"in Ca&&(Gl=!!Ca.colorTexture,qs="rgba4"),"colorType"in Ca&&(ie=Ca.colorType,Gl?(le(Qt.oes_texture_float||!(ie==="float"||ie==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),le(Qt.oes_texture_half_float||!(ie==="half float"||ie==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ie==="half float"||ie==="float16"?(le(Qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),qs="rgba16f"):(ie==="float"||ie==="float32")&&(le(Qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),qs="rgba32f"),le.oneOf(ie,Fi,"invalid color type")),"colorFormat"in Ca&&(qs=Ca.colorFormat,Oi.indexOf(qs)>=0?Gl=!0:ci.indexOf(qs)>=0?Gl=!1:Gl?le.oneOf(Ca.colorFormat,Oi,"invalid color format for texture"):le.oneOf(Ca.colorFormat,ci,"invalid color format for renderbuffer"))),("depthTexture"in Ca||"depthStencilTexture"in Ca)&&(Dl=!!(Ca.depthTexture||Ca.depthStencilTexture),le(!Dl||Qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ca&&(typeof Ca.depth=="boolean"?Sl=Ca.depth:(ss=Ca.depth,Hc=!1)),"stencil"in Ca&&(typeof Ca.stencil=="boolean"?Hc=Ca.stencil:(fr=Ca.stencil,Sl=!1)),"depthStencil"in Ca&&(typeof Ca.depthStencil=="boolean"?Sl=Hc=Ca.depthStencil:(Kr=Ca.depthStencil,Sl=!1,Hc=!1))}var zs=null,ea=null,Ia=null,ys=null;if(Array.isArray($a))zs=$a.map(Ui);else if($a)zs=[Ui($a)];else for(zs=new Array(tc),ha=0;ha<tc;++ha)zs[ha]=ur(Jo,gs,Gl,qs,ie);le(Qt.webgl_draw_buffers||zs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),le(zs.length<=Rn.maxColorAttachments,"too many color attachments, not supported"),Jo=Jo||zs[0].width,gs=gs||zs[0].height,ss?ea=Ui(ss):Sl&&!Hc&&(ea=ur(Jo,gs,Dl,"depth","uint32")),fr?Ia=Ui(fr):Hc&&!Sl&&(Ia=ur(Jo,gs,!1,"stencil","uint8")),Kr?ys=Ui(Kr):!ss&&!fr&&Hc&&Sl&&(ys=ur(Jo,gs,Dl,"depth stencil","depth stencil")),le(!!ss+!!fr+!!Kr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var uc=null;for(ha=0;ha<zs.length;++ha)if(Xi(zs[ha],Jo,gs),le(!zs[ha]||zs[ha].texture&&C0.indexOf(zs[ha].texture._texture.format)>=0||zs[ha].renderbuffer&&C.indexOf(zs[ha].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ha+" is invalid"),zs[ha]&&zs[ha].texture){var Nh=zf[zs[ha].texture._texture.format]*jf[zs[ha].texture._texture.type];uc===null?uc=Nh:le(uc===Nh,"all color attachments much have the same number of bits per pixel.")}return Xi(ea,Jo,gs),le(!ea||ea.texture&&ea.texture._texture.format===Qh||ea.renderbuffer&&ea.renderbuffer._renderbuffer.format===lv,"invalid depth attachment for framebuffer object"),Xi(Ia,Jo,gs),le(!Ia||Ia.renderbuffer&&Ia.renderbuffer._renderbuffer.format===Vf,"invalid stencil attachment for framebuffer object"),Xi(ys,Jo,gs),le(!ys||ys.texture&&ys.texture._texture.format===Jh||ys.renderbuffer&&ys.renderbuffer._renderbuffer.format===Jh,"invalid depth-stencil attachment for framebuffer object"),Ei($r),$r.width=Jo,$r.height=gs,$r.colorAttachments=zs,$r.depthAttachment=ea,$r.stencilAttachment=Ia,$r.depthStencilAttachment=ys,ko.color=zs.map(kr),ko.depth=kr(ea),ko.stencil=kr(Ia),ko.depthStencil=kr(ys),ko.width=$r.width,ko.height=$r.height,li($r),ko}function Na(so,va){le(mr.next!==$r,"can not resize a framebuffer which is currently in use");var ha=Math.max(so|0,1),Jo=Math.max(va|0||ha,1);if(ha===$r.width&&Jo===$r.height)return ko;for(var gs=$r.colorAttachments,Sl=0;Sl<gs.length;++Sl)yi(gs[Sl],ha,Jo);return yi($r.depthAttachment,ha,Jo),yi($r.stencilAttachment,ha,Jo),yi($r.depthStencilAttachment,ha,Jo),$r.width=ko.width=ha,$r.height=ko.height=Jo,li($r),ko}return ko(qi,Si),D(ko,{resize:Na,_reglType:"framebuffer",_framebuffer:$r,destroy:function(){to($r),Ei($r)},use:function(so){mr.setFBO({framebuffer:ko},so)}})}function zo(qi){var Si=Array(6);function $r(Na){var so;le(Si.indexOf(mr.next)<0,"can not update framebuffer which is currently in use");var va={color:null},ha=0,Jo=null,gs="rgba",Sl="uint8",Hc=1;if(typeof Na=="number")ha=Na|0;else if(!Na)ha=1;else{le.type(Na,"object","invalid arguments for framebuffer");var $a=Na;if("shape"in $a){var Gl=$a.shape;le(Array.isArray(Gl)&&Gl.length>=2,"invalid shape for framebuffer"),le(Gl[0]===Gl[1],"cube framebuffer must be square"),ha=Gl[0]}else"radius"in $a&&(ha=$a.radius|0),"width"in $a?(ha=$a.width|0,"height"in $a&&le($a.height===ha,"must be square")):"height"in $a&&(ha=$a.height|0);("color"in $a||"colors"in $a)&&(Jo=$a.color||$a.colors,Array.isArray(Jo)&&le(Jo.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),Jo||("colorCount"in $a&&(Hc=$a.colorCount|0,le(Hc>0,"invalid color buffer count")),"colorType"in $a&&(le.oneOf($a.colorType,Fi,"invalid color type"),Sl=$a.colorType),"colorFormat"in $a&&(gs=$a.colorFormat,le.oneOf($a.colorFormat,Oi,"invalid color format for texture"))),"depth"in $a&&(va.depth=$a.depth),"stencil"in $a&&(va.stencil=$a.stencil),"depthStencil"in $a&&(va.depthStencil=$a.depthStencil)}var qs;if(Jo)if(Array.isArray(Jo))for(qs=[],so=0;so<Jo.length;++so)qs[so]=Jo[so];else qs=[Jo];else{qs=Array(Hc);var ie={radius:ha,format:gs,type:Sl};for(so=0;so<Hc;++so)qs[so]=Ar.createCube(ie)}for(va.color=Array(qs.length),so=0;so<qs.length;++so){var tc=qs[so];le(typeof tc=="function"&&tc._reglType==="textureCube","invalid cube map"),ha=ha||tc.width,le(tc.width===ha&&tc.height===ha,"invalid cube map shape"),va.color[so]={target:kd,data:qs[so]}}for(so=0;so<6;++so){for(var ss=0;ss<qs.length;++ss)va.color[ss].target=kd+so;so>0&&(va.depth=Si[0].depth,va.stencil=Si[0].stencil,va.depthStencil=Si[0].depthStencil),Si[so]?Si[so](va):Si[so]=di(va)}return D($r,{width:ha,height:ha,color:qs})}function ko(Na){var so,va=Na|0;if(le(va>0&&va<=Rn.maxCubeMapSize,"invalid radius for cube fbo"),va===$r.width)return $r;var ha=$r.color;for(so=0;so<ha.length;++so)ha[so].resize(va);for(so=0;so<6;++so)Si[so].resize(va);return $r.width=$r.height=va,$r}return $r(qi),D($r,{faces:Si,resize:ko,_reglType:"framebufferCube",destroy:function(){Si.forEach(function(Na){Na.destroy()})}})}function pa(){mr.cur=null,mr.next=null,mr.dirty=!0,Wo(oi).forEach(function(qi){qi.framebuffer=Ue.createFramebuffer(),li(qi)})}return D(mr,{getFramebuffer:function(qi){if(typeof qi=="function"&&qi._reglType==="framebuffer"){var Si=qi._framebuffer;if(Si instanceof eo)return Si}return null},create:di,createCube:zo,clear:function(){Wo(oi).forEach(to)},restore:pa})}var K=5126,de=34962;function Ve(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=K,this.offset=0,this.stride=0,this.divisor=0}function st(Ue,Qt,Rn,Ar,Xr){for(var Or=Rn.maxAttributes,mr=new Array(Or),Oi=0;Oi<Or;++Oi)mr[Oi]=new Ve;var ci=0,Fi={},Ri={Record:Ve,scope:{},state:mr,currentVAO:null,targetVAO:null,restore:Xi()?oi:function(){},createVAO:eo,getVAO:Ui,destroyBuffer:Ni,setVAO:Xi()?ur:kr,clear:Xi()?yi:function(){}};function Ni(Ei){for(var to=0;to<mr.length;++to){var li=mr[to];li.buffer===Ei&&(Ue.disableVertexAttribArray(to),li.buffer=null)}}function Xi(){return Qt.oes_vertex_array_object}function pi(){return Qt.angle_instanced_arrays}function Ui(Ei){return typeof Ei=="function"&&Ei._vao?Ei._vao:null}function ur(Ei){if(Ei!==Ri.currentVAO){var to=Xi();Ei?to.bindVertexArrayOES(Ei.vao):to.bindVertexArrayOES(null),Ri.currentVAO=Ei}}function kr(Ei){if(Ei!==Ri.currentVAO){if(Ei)Ei.bindAttrs();else for(var to=pi(),li=0;li<mr.length;++li){var di=mr[li];di.buffer?(Ue.enableVertexAttribArray(li),Ue.vertexAttribPointer(li,di.size,di.type,di.normalized,di.stride,di.offfset),to&&to.vertexAttribDivisorANGLE(li,di.divisor)):(Ue.disableVertexAttribArray(li),Ue.vertexAttrib4f(li,di.x,di.y,di.z,di.w))}Ri.currentVAO=Ei}}function yi(){Wo(Fi).forEach(function(Ei){Ei.destroy()})}function io(){this.id=++ci,this.attributes=[];var Ei=Xi();Ei?this.vao=Ei.createVertexArrayOES():this.vao=null,Fi[this.id]=this,this.buffers=[]}io.prototype.bindAttrs=function(){for(var Ei=pi(),to=this.attributes,li=0;li<to.length;++li){var di=to[li];di.buffer?(Ue.enableVertexAttribArray(li),Ue.bindBuffer(de,di.buffer.buffer),Ue.vertexAttribPointer(li,di.size,di.type,di.normalized,di.stride,di.offset),Ei&&Ei.vertexAttribDivisorANGLE(li,di.divisor)):(Ue.disableVertexAttribArray(li),Ue.vertexAttrib4f(li,di.x,di.y,di.z,di.w))}for(var zo=to.length;zo<Or;++zo)Ue.disableVertexAttribArray(zo)},io.prototype.refresh=function(){var Ei=Xi();Ei&&(Ei.bindVertexArrayOES(this.vao),this.bindAttrs(),Ri.currentVAO=this)},io.prototype.destroy=function(){if(this.vao){var Ei=Xi();this===Ri.currentVAO&&(Ri.currentVAO=null,Ei.bindVertexArrayOES(null)),Ei.deleteVertexArrayOES(this.vao),this.vao=null}Fi[this.id]&&(delete Fi[this.id],Ar.vaoCount-=1)};function oi(){var Ei=Xi();Ei&&Wo(Fi).forEach(function(to){to.refresh()})}function eo(Ei){var to=new io;Ar.vaoCount+=1;function li(di){le(Array.isArray(di),"arguments to vertex array constructor must be an array"),le(di.length<Or,"too many attributes"),le(di.length>0,"must specify at least one attribute");for(var zo=0;zo<to.buffers.length;++zo)to.buffers[zo].destroy();to.buffers.length=0;var pa=to.attributes;pa.length=di.length;for(var qi=0;qi<di.length;++qi){var Si=di[qi],$r=pa[qi]=new Ve;if(Array.isArray(Si)||W(Si)||ia(Si)){var ko=Xr.create(Si,de,!1,!0);$r.buffer=Xr.getBuffer(ko),$r.size=$r.buffer.dimension|0,$r.normalized=!1,$r.type=$r.buffer.dtype,$r.offset=0,$r.stride=0,$r.divisor=0,$r.state=1,to.buffers.push(ko)}else Xr.getBuffer(Si)?($r.buffer=Xr.getBuffer(Si),$r.size=$r.buffer.dimension|0,$r.normalized=!1,$r.type=$r.buffer.dtype,$r.offset=0,$r.stride=0,$r.divisor=0,$r.state=1):Xr.getBuffer(Si.buffer)?($r.buffer=Xr.getBuffer(Si.buffer),$r.size=(+Si.size||$r.buffer.dimension)|0,$r.normalized=!!Si.normalized||!1,"type"in Si?(le.parameter(Si.type,Vl,"invalid buffer type"),$r.type=Vl[Si.type]):$r.type=$r.buffer.dtype,$r.offset=(Si.offset||0)|0,$r.stride=(Si.stride||0)|0,$r.divisor=(Si.divisor||0)|0,$r.state=1,le($r.size>=1&&$r.size<=4,"size must be between 1 and 4"),le($r.offset>=0,"invalid offset"),le($r.stride>=0&&$r.stride<=255,"stride must be between 0 and 255"),le($r.divisor>=0,"divisor must be positive"),le(!$r.divisor||!!Qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Si?(le(qi>0,"first attribute must not be a constant"),$r.x=+Si.x||0,$r.y=+Si.y||0,$r.z=+Si.z||0,$r.w=+Si.w||0,$r.state=2):le(!1,"invalid attribute spec for location "+qi)}return to.refresh(),li}return li.destroy=function(){to.destroy()},li._vao=to,li._reglType="vao",li(Ei)}return Ri}var Ft=35632,jt=35633,Xt=35718,bn=35721;function vn(Ue,Qt,Rn,Ar){var Xr={},Or={};function mr(ur,kr,yi,io){this.name=ur,this.id=kr,this.location=yi,this.info=io}function Oi(ur,kr){for(var yi=0;yi<ur.length;++yi)if(ur[yi].id===kr.id){ur[yi].location=kr.location;return}ur.push(kr)}function ci(ur,kr,yi){var io=ur===Ft?Xr:Or,oi=io[kr];if(!oi){var eo=Qt.str(kr);oi=Ue.createShader(ur),Ue.shaderSource(oi,eo),Ue.compileShader(oi),le.shaderError(Ue,oi,eo,ur,yi),io[kr]=oi}return oi}var Fi={},Ri=[],Ni=0;function Xi(ur,kr){this.id=Ni++,this.fragId=ur,this.vertId=kr,this.program=null,this.uniforms=[],this.attributes=[],Ar.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pi(ur,kr,yi){var io,oi,eo=ci(Ft,ur.fragId),Ei=ci(jt,ur.vertId),to=ur.program=Ue.createProgram();if(Ue.attachShader(to,eo),Ue.attachShader(to,Ei),yi)for(io=0;io<yi.length;++io){var li=yi[io];Ue.bindAttribLocation(to,li[0],li[1])}Ue.linkProgram(to),le.linkError(Ue,to,Qt.str(ur.fragId),Qt.str(ur.vertId),kr);var di=Ue.getProgramParameter(to,Xt);Ar.profile&&(ur.stats.uniformsCount=di);var zo=ur.uniforms;for(io=0;io<di;++io)if(oi=Ue.getActiveUniform(to,io),oi)if(oi.size>1)for(var pa=0;pa<oi.size;++pa){var qi=oi.name.replace("[0]","["+pa+"]");Oi(zo,new mr(qi,Qt.id(qi),Ue.getUniformLocation(to,qi),oi))}else Oi(zo,new mr(oi.name,Qt.id(oi.name),Ue.getUniformLocation(to,oi.name),oi));var Si=Ue.getProgramParameter(to,bn);Ar.profile&&(ur.stats.attributesCount=Si);var $r=ur.attributes;for(io=0;io<Si;++io)oi=Ue.getActiveAttrib(to,io),oi&&Oi($r,new mr(oi.name,Qt.id(oi.name),Ue.getAttribLocation(to,oi.name),oi))}Ar.profile&&(Rn.getMaxUniformsCount=function(){var ur=0;return Ri.forEach(function(kr){kr.stats.uniformsCount>ur&&(ur=kr.stats.uniformsCount)}),ur},Rn.getMaxAttributesCount=function(){var ur=0;return Ri.forEach(function(kr){kr.stats.attributesCount>ur&&(ur=kr.stats.attributesCount)}),ur});function Ui(){Xr={},Or={};for(var ur=0;ur<Ri.length;++ur)pi(Ri[ur],null,Ri[ur].attributes.map(function(kr){return[kr.location,kr.name]}))}return{clear:function(){var ur=Ue.deleteShader.bind(Ue);Wo(Xr).forEach(ur),Xr={},Wo(Or).forEach(ur),Or={},Ri.forEach(function(kr){Ue.deleteProgram(kr.program)}),Ri.length=0,Fi={},Rn.shaderCount=0},program:function(ur,kr,yi,io){le.command(ur>=0,"missing vertex shader",yi),le.command(kr>=0,"missing fragment shader",yi);var oi=Fi[kr];oi||(oi=Fi[kr]={});var eo=oi[ur];if(eo&&!io)return eo;var Ei=new Xi(kr,ur);return Rn.shaderCount++,pi(Ei,yi,io),eo||(oi[ur]=Ei),Ri.push(Ei),Ei},restore:Ui,shader:ci,frag:-1,vert:-1}}var zn=6408,on=5121,Fn=3333,er=5126;function vr(Ue,Qt,Rn,Ar,Xr,Or,mr){function Oi(Ri){var Ni;Qt.next===null?(le(Xr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ni=on):(le(Qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ni=Qt.next.colorAttachments[0].texture._texture.type,Or.oes_texture_float?(le(Ni===on||Ni===er,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ni===er&&le(mr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):le(Ni===on,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Xi=0,pi=0,Ui=Ar.framebufferWidth,ur=Ar.framebufferHeight,kr=null;W(Ri)?kr=Ri:Ri&&(le.type(Ri,"object","invalid arguments to regl.read()"),Xi=Ri.x|0,pi=Ri.y|0,le(Xi>=0&&Xi<Ar.framebufferWidth,"invalid x offset for regl.read"),le(pi>=0&&pi<Ar.framebufferHeight,"invalid y offset for regl.read"),Ui=(Ri.width||Ar.framebufferWidth-Xi)|0,ur=(Ri.height||Ar.framebufferHeight-pi)|0,kr=Ri.data||null),kr&&(Ni===on?le(kr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ni===er&&le(kr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),le(Ui>0&&Ui+Xi<=Ar.framebufferWidth,"invalid width for read pixels"),le(ur>0&&ur+pi<=Ar.framebufferHeight,"invalid height for read pixels"),Rn();var yi=Ui*ur*4;return kr||(Ni===on?kr=new Uint8Array(yi):Ni===er&&(kr=kr||new Float32Array(yi))),le.isTypedArray(kr,"data buffer for regl.read() must be a typedarray"),le(kr.byteLength>=yi,"data buffer for regl.read() too small"),Ue.pixelStorei(Fn,4),Ue.readPixels(Xi,pi,Ui,ur,zn,Ni,kr),kr}function ci(Ri){var Ni;return Qt.setFBO({framebuffer:Ri.framebuffer},function(){Ni=Oi(Ri)}),Ni}function Fi(Ri){return!Ri||!("framebuffer"in Ri)?Oi(Ri):ci(Ri)}return Fi}function Mr(Ue){return Array.prototype.slice.call(Ue)}function wr(Ue){return Mr(Ue).join("")}function Fr(){var Ue=0,Qt=[],Rn=[];function Ar(Ni){for(var Xi=0;Xi<Rn.length;++Xi)if(Rn[Xi]===Ni)return Qt[Xi];var pi="g"+Ue++;return Qt.push(pi),Rn.push(Ni),pi}function Xr(){var Ni=[];function Xi(){Ni.push.apply(Ni,Mr(arguments))}var pi=[];function Ui(){var ur="v"+Ue++;return pi.push(ur),arguments.length>0&&(Ni.push(ur,"="),Ni.push.apply(Ni,Mr(arguments)),Ni.push(";")),ur}return D(Xi,{def:Ui,toString:function(){return wr([pi.length>0?"var "+pi.join(",")+";":"",wr(Ni)])}})}function Or(){var Ni=Xr(),Xi=Xr(),pi=Ni.toString,Ui=Xi.toString;function ur(kr,yi){Xi(kr,yi,"=",Ni.def(kr,yi),";")}return D(function(){Ni.apply(Ni,Mr(arguments))},{def:Ni.def,entry:Ni,exit:Xi,save:ur,set:function(kr,yi,io){ur(kr,yi),Ni(kr,yi,"=",io,";")},toString:function(){return pi()+Ui()}})}function mr(){var Ni=wr(arguments),Xi=Or(),pi=Or(),Ui=Xi.toString,ur=pi.toString;return D(Xi,{then:function(){return Xi.apply(Xi,Mr(arguments)),this},else:function(){return pi.apply(pi,Mr(arguments)),this},toString:function(){var kr=ur();return kr&&(kr="else{"+kr+"}"),wr(["if(",Ni,"){",Ui(),"}",kr])}})}var Oi=Xr(),ci={};function Fi(Ni,Xi){var pi=[];function Ui(){var oi="a"+pi.length;return pi.push(oi),oi}Xi=Xi||0;for(var ur=0;ur<Xi;++ur)Ui();var kr=Or(),yi=kr.toString,io=ci[Ni]=D(kr,{arg:Ui,toString:function(){return wr(["function(",pi.join(),"){",yi(),"}"])}});return io}function Ri(){var Ni=['"use strict";',Oi,"return {"];Object.keys(ci).forEach(function(Ui){Ni.push('"',Ui,'":',ci[Ui].toString(),",")}),Ni.push("}");var Xi=wr(Ni).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),pi=Function.apply(null,Qt.concat(Xi));return pi.apply(null,Rn)}return{global:Oi,link:Ar,block:Xr,proc:Fi,scope:Or,cond:mr,compile:Ri}}var ni="xyzw".split(""),Bi=5121,Ii=1,co=2,Uo=0,Go=1,Zo=2,fs=3,Cr=4,Jt="dither",ma="blend.enable",fa="blend.color",Qo="blend.equation",ba="blend.func",sa="depth.enable",Fo="depth.func",lc="depth.range",xl="depth.mask",Pc="colorMask",cc="cull.enable",Ss="cull.face",yl="frontFace",dl="lineWidth",vu="polygonOffset.enable",Hf="polygonOffset.offset",Cu="sample.alpha",sf="sample.enable",Hu="sample.coverage",gp="stencil.enable",yp="stencil.mask",Lh="stencil.func",ed="stencil.opFront",td="stencil.opBack",ah="scissor.enable",Ai="scissor.box",Il="viewport",Ll="profile",tu="framebuffer",Tf="vert",wf="frag",Xa="elements",Wl="primitive",ec="count",Wf="offset",Gp="instances",sh="vao",M0="Width",zd="Height",jd=tu+M0,Gf=tu+zd,Zp=Il+M0,Xv=Il+zd,Vd="drawingBuffer",Ou=Vd+M0,Qy=Vd+zd,$v=[ba,Qo,Lh,ed,td,Hu,Il,Ai,Hf],Xp=34962,Jy=34963,Ug=35632,e_=35633,Gm=3553,Yv=34067,cv=2884,t_=3042,$p=3024,Yp=2960,Zm=2929,Xm=3089,zg=32823,Kv=32926,qv=32928,jg=5126,uv=35664,P0=35665,fv=35666,nu=5124,Kp=35667,El=35668,nd=35669,$m=35670,qp=35671,Qp=35672,Hd=35673,Jp=35674,rd=35675,lf=35676,e0=35678,I0=35680,Ym=4,id=1028,Af=1029,Dh=2304,Qv=2305,Jv=32775,L0=32776,Zf=519,Wd=7680,n_=0,r_=1,em=32774,Vg=513,od=36160,i_=36064,lh={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},hv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],t0={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},_p={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Hg={frag:Ug,vert:e_},bp={cw:Dh,ccw:Qv};function tm(Ue){return Array.isArray(Ue)||W(Ue)||ia(Ue)}function D0(Ue){return Ue.sort(function(Qt,Rn){return Qt===Il?-1:Rn===Il?1:Qt<Rn?-1:1})}function Ru(Ue,Qt,Rn,Ar){this.thisDep=Ue,this.contextDep=Qt,this.propDep=Rn,this.append=Ar}function mu(Ue){return Ue&&!(Ue.thisDep||Ue.contextDep||Ue.propDep)}function yc(Ue){return new Ru(!1,!1,!1,Ue)}function cf(Ue,Qt){var Rn=Ue.type;if(Rn===Uo){var Ar=Ue.data.length;return new Ru(!0,Ar>=1,Ar>=2,Qt)}else if(Rn===Cr){var Xr=Ue.data;return new Ru(Xr.thisDep,Xr.contextDep,Xr.propDep,Qt)}else return new Ru(Rn===fs,Rn===Zo,Rn===Go,Qt)}var Mu=new Ru(!1,!1,!1,function(){});function Ks(Ue,Qt,Rn,Ar,Xr,Or,mr,Oi,ci,Fi,Ri,Ni,Xi,pi,Ui){var ur=Fi.Record,kr={add:32774,subtract:32778,"reverse subtract":32779};Rn.ext_blend_minmax&&(kr.min=Jv,kr.max=L0);var yi=Rn.angle_instanced_arrays,io=Rn.webgl_draw_buffers,oi={dirty:!0,profile:Ui.profile},eo={},Ei=[],to={},li={};function di(It){return It.replace(".","_")}function zo(It,tn,Mn){var Tr=di(It);Ei.push(It),eo[Tr]=oi[Tr]=!!Mn,to[Tr]=tn}function pa(It,tn,Mn){var Tr=di(It);Ei.push(It),Array.isArray(Mn)?(oi[Tr]=Mn.slice(),eo[Tr]=Mn.slice()):oi[Tr]=eo[Tr]=Mn,li[Tr]=tn}zo(Jt,$p),zo(ma,t_),pa(fa,"blendColor",[0,0,0,0]),pa(Qo,"blendEquationSeparate",[em,em]),pa(ba,"blendFuncSeparate",[r_,n_,r_,n_]),zo(sa,Zm,!0),pa(Fo,"depthFunc",Vg),pa(lc,"depthRange",[0,1]),pa(xl,"depthMask",!0),pa(Pc,Pc,[!0,!0,!0,!0]),zo(cc,cv),pa(Ss,"cullFace",Af),pa(yl,yl,Qv),pa(dl,dl,1),zo(vu,zg),pa(Hf,"polygonOffset",[0,0]),zo(Cu,Kv),zo(sf,qv),pa(Hu,"sampleCoverage",[1,!1]),zo(gp,Yp),pa(yp,"stencilMask",-1),pa(Lh,"stencilFunc",[Zf,0,-1]),pa(ed,"stencilOpSeparate",[id,Wd,Wd,Wd]),pa(td,"stencilOpSeparate",[Af,Wd,Wd,Wd]),zo(ah,Xm),pa(Ai,"scissor",[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]),pa(Il,Il,[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]);var qi={gl:Ue,context:Xi,strings:Qt,next:eo,current:oi,draw:Ni,elements:Or,buffer:Xr,shader:Ri,attributes:Fi.state,vao:Fi,uniforms:ci,framebuffer:Oi,extensions:Rn,timer:pi,isBufferArgs:tm},Si={primTypes:Uu,compareFuncs:t0,blendFuncs:lh,blendEquations:kr,stencilOps:_p,glTypes:Vl,orientationType:bp};le.optional(function(){qi.isArrayLike=cl}),io&&(Si.backBuffer=[Af],Si.drawBuffer=qn(Ar.maxDrawbuffers,function(It){return It===0?[0]:qn(It,function(tn){return i_+tn})}));var $r=0;function ko(){var It=Fr(),tn=It.link,Mn=It.global;It.id=$r++,It.batchId="0";var Tr=tn(qi),br=It.shared={props:"a0"};Object.keys(qi).forEach(function(Wn){br[Wn]=Mn.def(Tr,".",Wn)}),le.optional(function(){It.CHECK=tn(le),It.commandStr=le.guessCommand(),It.command=tn(It.commandStr),It.assert=function(Wn,en,Yn){Wn("if(!(",en,"))",this.CHECK,".commandRaise(",tn(Yn),",",this.command,");")},Si.invalidBlendCombinations=hv});var jn=It.next={},Jn=It.current={};Object.keys(li).forEach(function(Wn){Array.isArray(oi[Wn])&&(jn[Wn]=Mn.def(br.next,".",Wn),Jn[Wn]=Mn.def(br.current,".",Wn))});var nr=It.constants={};Object.keys(Si).forEach(function(Wn){nr[Wn]=Mn.def(JSON.stringify(Si[Wn]))}),It.invoke=function(Wn,en){switch(en.type){case Uo:var Yn=["this",br.context,br.props,It.batchId];return Wn.def(tn(en.data),".call(",Yn.slice(0,Math.max(en.data.length+1,4)),")");case Go:return Wn.def(br.props,en.data);case Zo:return Wn.def(br.context,en.data);case fs:return Wn.def("this",en.data);case Cr:return en.data.append(It,Wn),en.data.ref}},It.attribCache={};var xn={};return It.scopeAttrib=function(Wn){var en=Qt.id(Wn);if(en in xn)return xn[en];var Yn=Fi.scope[en];Yn||(Yn=Fi.scope[en]=new ur);var Dr=xn[en]=tn(Yn);return Dr},It}function Na(It){var tn=It.static,Mn=It.dynamic,Tr;if(Ll in tn){var br=!!tn[Ll];Tr=yc(function(Jn,nr){return br}),Tr.enable=br}else if(Ll in Mn){var jn=Mn[Ll];Tr=cf(jn,function(Jn,nr){return Jn.invoke(nr,jn)})}return Tr}function so(It,tn){var Mn=It.static,Tr=It.dynamic;if(tu in Mn){var br=Mn[tu];return br?(br=Oi.getFramebuffer(br),le.command(br,"invalid framebuffer object"),yc(function(Jn,nr){var xn=Jn.link(br),Wn=Jn.shared;nr.set(Wn.framebuffer,".next",xn);var en=Wn.context;return nr.set(en,"."+jd,xn+".width"),nr.set(en,"."+Gf,xn+".height"),xn})):yc(function(Jn,nr){var xn=Jn.shared;nr.set(xn.framebuffer,".next","null");var Wn=xn.context;return nr.set(Wn,"."+jd,Wn+"."+Ou),nr.set(Wn,"."+Gf,Wn+"."+Qy),"null"})}else if(tu in Tr){var jn=Tr[tu];return cf(jn,function(Jn,nr){var xn=Jn.invoke(nr,jn),Wn=Jn.shared,en=Wn.framebuffer,Yn=nr.def(en,".getFramebuffer(",xn,")");le.optional(function(){Jn.assert(nr,"!"+xn+"||"+Yn,"invalid framebuffer object")}),nr.set(en,".next",Yn);var Dr=Wn.context;return nr.set(Dr,"."+jd,Yn+"?"+Yn+".width:"+Dr+"."+Ou),nr.set(Dr,"."+Gf,Yn+"?"+Yn+".height:"+Dr+"."+Qy),Yn})}else return null}function va(It,tn,Mn){var Tr=It.static,br=It.dynamic;function jn(xn){if(xn in Tr){var Wn=Tr[xn];le.commandType(Wn,"object","invalid "+xn,Mn.commandStr);var en=!0,Yn=Wn.x|0,Dr=Wn.y|0,jr,vi;return"width"in Wn?(jr=Wn.width|0,le.command(jr>=0,"invalid "+xn,Mn.commandStr)):en=!1,"height"in Wn?(vi=Wn.height|0,le.command(vi>=0,"invalid "+xn,Mn.commandStr)):en=!1,new Ru(!en&&tn&&tn.thisDep,!en&&tn&&tn.contextDep,!en&&tn&&tn.propDep,function(Lo,ki){var $i=Lo.shared.context,oa=jr;"width"in Wn||(oa=ki.def($i,".",jd,"-",Yn));var Xo=vi;return"height"in Wn||(Xo=ki.def($i,".",Gf,"-",Dr)),[Yn,Dr,oa,Xo]})}else if(xn in br){var ei=br[xn],_i=cf(ei,function(Lo,ki){var $i=Lo.invoke(ki,ei);le.optional(function(){Lo.assert(ki,$i+"&&typeof "+$i+'==="object"',"invalid "+xn)});var oa=Lo.shared.context,Xo=ki.def($i,".x|0"),Ns=ki.def($i,".y|0"),Wc=ki.def('"width" in ',$i,"?",$i,".width|0:","(",oa,".",jd,"-",Xo,")"),nc=ki.def('"height" in ',$i,"?",$i,".height|0:","(",oa,".",Gf,"-",Ns,")");return le.optional(function(){Lo.assert(ki,Wc+">=0&&"+nc+">=0","invalid "+xn)}),[Xo,Ns,Wc,nc]});return tn&&(_i.thisDep=_i.thisDep||tn.thisDep,_i.contextDep=_i.contextDep||tn.contextDep,_i.propDep=_i.propDep||tn.propDep),_i}else return tn?new Ru(tn.thisDep,tn.contextDep,tn.propDep,function(Lo,ki){var $i=Lo.shared.context;return[0,0,ki.def($i,".",jd),ki.def($i,".",Gf)]}):null}var Jn=jn(Il);if(Jn){var nr=Jn;Jn=new Ru(Jn.thisDep,Jn.contextDep,Jn.propDep,function(xn,Wn){var en=nr.append(xn,Wn),Yn=xn.shared.context;return Wn.set(Yn,"."+Zp,en[2]),Wn.set(Yn,"."+Xv,en[3]),en})}return{viewport:Jn,scissor_box:jn(Ai)}}function ha(It,tn){var Mn=It.static,Tr=typeof Mn[wf]=="string"&&typeof Mn[Tf]=="string";if(Tr){if(Object.keys(tn.dynamic).length>0)return null;var br=tn.static,jn=Object.keys(br);if(jn.length>0&&typeof br[jn[0]]=="number"){for(var Jn=[],nr=0;nr<jn.length;++nr)le(typeof br[jn[nr]]=="number","must specify all vertex attribute locations when using vaos"),Jn.push([br[jn[nr]]|0,jn[nr]]);return Jn}}return null}function Jo(It,tn,Mn){var Tr=It.static,br=It.dynamic;function jn(en){if(en in Tr){var Yn=Qt.id(Tr[en]);le.optional(function(){Ri.shader(Hg[en],Yn,le.guessCommand())});var Dr=yc(function(){return Yn});return Dr.id=Yn,Dr}else if(en in br){var jr=br[en];return cf(jr,function(vi,ei){var _i=vi.invoke(ei,jr),Lo=ei.def(vi.shared.strings,".id(",_i,")");return le.optional(function(){ei(vi.shared.shader,".shader(",Hg[en],",",Lo,",",vi.command,");")}),Lo})}return null}var Jn=jn(wf),nr=jn(Tf),xn=null,Wn;return mu(Jn)&&mu(nr)?(xn=Ri.program(nr.id,Jn.id,null,Mn),Wn=yc(function(en,Yn){return en.link(xn)})):Wn=new Ru(Jn&&Jn.thisDep||nr&&nr.thisDep,Jn&&Jn.contextDep||nr&&nr.contextDep,Jn&&Jn.propDep||nr&&nr.propDep,function(en,Yn){var Dr=en.shared.shader,jr;Jn?jr=Jn.append(en,Yn):jr=Yn.def(Dr,".",wf);var vi;nr?vi=nr.append(en,Yn):vi=Yn.def(Dr,".",Tf);var ei=Dr+".program("+vi+","+jr;return le.optional(function(){ei+=","+en.command}),Yn.def(ei+")")}),{frag:Jn,vert:nr,progVar:Wn,program:xn}}function gs(It,tn){var Mn=It.static,Tr=It.dynamic;function br(){if(Xa in Mn){var en=Mn[Xa];tm(en)?en=Or.getElements(Or.create(en,!0)):en&&(en=Or.getElements(en),le.command(en,"invalid elements",tn.commandStr));var Yn=yc(function(jr,vi){if(en){var ei=jr.link(en);return jr.ELEMENTS=ei,ei}return jr.ELEMENTS=null,null});return Yn.value=en,Yn}else if(Xa in Tr){var Dr=Tr[Xa];return cf(Dr,function(jr,vi){var ei=jr.shared,_i=ei.isBufferArgs,Lo=ei.elements,ki=jr.invoke(vi,Dr),$i=vi.def("null"),oa=vi.def(_i,"(",ki,")"),Xo=jr.cond(oa).then($i,"=",Lo,".createStream(",ki,");").else($i,"=",Lo,".getElements(",ki,");");return le.optional(function(){jr.assert(Xo.else,"!"+ki+"||"+$i,"invalid elements")}),vi.entry(Xo),vi.exit(jr.cond(oa).then(Lo,".destroyStream(",$i,");")),jr.ELEMENTS=$i,$i})}return null}var jn=br();function Jn(){if(Wl in Mn){var en=Mn[Wl];return le.commandParameter(en,Uu,"invalid primitve",tn.commandStr),yc(function(Dr,jr){return Uu[en]})}else if(Wl in Tr){var Yn=Tr[Wl];return cf(Yn,function(Dr,jr){var vi=Dr.constants.primTypes,ei=Dr.invoke(jr,Yn);return le.optional(function(){Dr.assert(jr,ei+" in "+vi,"invalid primitive, must be one of "+Object.keys(Uu))}),jr.def(vi,"[",ei,"]")})}else if(jn)return mu(jn)?jn.value?yc(function(Dr,jr){return jr.def(Dr.ELEMENTS,".primType")}):yc(function(){return Ym}):new Ru(jn.thisDep,jn.contextDep,jn.propDep,function(Dr,jr){var vi=Dr.ELEMENTS;return jr.def(vi,"?",vi,".primType:",Ym)});return null}function nr(en,Yn){if(en in Mn){var Dr=Mn[en]|0;return le.command(!Yn||Dr>=0,"invalid "+en,tn.commandStr),yc(function(vi,ei){return Yn&&(vi.OFFSET=Dr),Dr})}else if(en in Tr){var jr=Tr[en];return cf(jr,function(vi,ei){var _i=vi.invoke(ei,jr);return Yn&&(vi.OFFSET=_i,le.optional(function(){vi.assert(ei,_i+">=0","invalid "+en)})),_i})}else if(Yn&&jn)return yc(function(vi,ei){return vi.OFFSET="0",0});return null}var xn=nr(Wf,!0);function Wn(){if(ec in Mn){var en=Mn[ec]|0;return le.command(typeof en=="number"&&en>=0,"invalid vertex count",tn.commandStr),yc(function(){return en})}else if(ec in Tr){var Yn=Tr[ec];return cf(Yn,function(vi,ei){var _i=vi.invoke(ei,Yn);return le.optional(function(){vi.assert(ei,"typeof "+_i+'==="number"&&'+_i+">=0&&"+_i+"===("+_i+"|0)","invalid vertex count")}),_i})}else if(jn)if(mu(jn)){if(jn)return xn?new Ru(xn.thisDep,xn.contextDep,xn.propDep,function(vi,ei){var _i=ei.def(vi.ELEMENTS,".vertCount-",vi.OFFSET);return le.optional(function(){vi.assert(ei,_i+">=0","invalid vertex offset/element buffer too small")}),_i}):yc(function(vi,ei){return ei.def(vi.ELEMENTS,".vertCount")});var Dr=yc(function(){return-1});return le.optional(function(){Dr.MISSING=!0}),Dr}else{var jr=new Ru(jn.thisDep||xn.thisDep,jn.contextDep||xn.contextDep,jn.propDep||xn.propDep,function(vi,ei){var _i=vi.ELEMENTS;return vi.OFFSET?ei.def(_i,"?",_i,".vertCount-",vi.OFFSET,":-1"):ei.def(_i,"?",_i,".vertCount:-1")});return le.optional(function(){jr.DYNAMIC=!0}),jr}return null}return{elements:jn,primitive:Jn(),count:Wn(),instances:nr(Gp,!1),offset:xn}}function Sl(It,tn){var Mn=It.static,Tr=It.dynamic,br={};return Ei.forEach(function(jn){var Jn=di(jn);function nr(xn,Wn){if(jn in Mn){var en=xn(Mn[jn]);br[Jn]=yc(function(){return en})}else if(jn in Tr){var Yn=Tr[jn];br[Jn]=cf(Yn,function(Dr,jr){return Wn(Dr,jr,Dr.invoke(jr,Yn))})}}switch(jn){case cc:case ma:case Jt:case gp:case sa:case ah:case vu:case Cu:case sf:case xl:return nr(function(xn){return le.commandType(xn,"boolean",jn,tn.commandStr),xn},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,"typeof "+en+'==="boolean"',"invalid flag "+jn,xn.commandStr)}),en});case Fo:return nr(function(xn){return le.commandParameter(xn,t0,"invalid "+jn,tn.commandStr),t0[xn]},function(xn,Wn,en){var Yn=xn.constants.compareFuncs;return le.optional(function(){xn.assert(Wn,en+" in "+Yn,"invalid "+jn+", must be one of "+Object.keys(t0))}),Wn.def(Yn,"[",en,"]")});case lc:return nr(function(xn){return le.command(cl(xn)&&xn.length===2&&typeof xn[0]=="number"&&typeof xn[1]=="number"&&xn[0]<=xn[1],"depth range is 2d array",tn.commandStr),xn},function(xn,Wn,en){le.optional(function(){xn.assert(Wn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===2&&typeof "+en+'[0]==="number"&&typeof '+en+'[1]==="number"&&'+en+"[0]<="+en+"[1]","depth range must be a 2d array")});var Yn=Wn.def("+",en,"[0]"),Dr=Wn.def("+",en,"[1]");return[Yn,Dr]});case ba:return nr(function(xn){le.commandType(xn,"object","blend.func",tn.commandStr);var Wn="srcRGB"in xn?xn.srcRGB:xn.src,en="srcAlpha"in xn?xn.srcAlpha:xn.src,Yn="dstRGB"in xn?xn.dstRGB:xn.dst,Dr="dstAlpha"in xn?xn.dstAlpha:xn.dst;return le.commandParameter(Wn,lh,Jn+".srcRGB",tn.commandStr),le.commandParameter(en,lh,Jn+".srcAlpha",tn.commandStr),le.commandParameter(Yn,lh,Jn+".dstRGB",tn.commandStr),le.commandParameter(Dr,lh,Jn+".dstAlpha",tn.commandStr),le.command(hv.indexOf(Wn+", "+Yn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Wn+", "+Yn+")",tn.commandStr),[lh[Wn],lh[Yn],lh[en],lh[Dr]]},function(xn,Wn,en){var Yn=xn.constants.blendFuncs;le.optional(function(){xn.assert(Wn,en+"&&typeof "+en+'==="object"',"invalid blend func, must be an object")});function Dr($i,oa){var Xo=Wn.def('"',$i,oa,'" in ',en,"?",en,".",$i,oa,":",en,".",$i);return le.optional(function(){xn.assert(Wn,Xo+" in "+Yn,"invalid "+jn+"."+$i+oa+", must be one of "+Object.keys(lh))}),Xo}var jr=Dr("src","RGB"),vi=Dr("dst","RGB");le.optional(function(){var $i=xn.constants.invalidBlendCombinations;xn.assert(Wn,$i+".indexOf("+jr+'+", "+'+vi+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ei=Wn.def(Yn,"[",jr,"]"),_i=Wn.def(Yn,"[",Dr("src","Alpha"),"]"),Lo=Wn.def(Yn,"[",vi,"]"),ki=Wn.def(Yn,"[",Dr("dst","Alpha"),"]");return[ei,Lo,_i,ki]});case Qo:return nr(function(xn){if(typeof xn=="string")return le.commandParameter(xn,kr,"invalid "+jn,tn.commandStr),[kr[xn],kr[xn]];if(typeof xn=="object")return le.commandParameter(xn.rgb,kr,jn+".rgb",tn.commandStr),le.commandParameter(xn.alpha,kr,jn+".alpha",tn.commandStr),[kr[xn.rgb],kr[xn.alpha]];le.commandRaise("invalid blend.equation",tn.commandStr)},function(xn,Wn,en){var Yn=xn.constants.blendEquations,Dr=Wn.def(),jr=Wn.def(),vi=xn.cond("typeof ",en,'==="string"');return le.optional(function(){function ei(_i,Lo,ki){xn.assert(_i,ki+" in "+Yn,"invalid "+Lo+", must be one of "+Object.keys(kr))}ei(vi.then,jn,en),xn.assert(vi.else,en+"&&typeof "+en+'==="object"',"invalid "+jn),ei(vi.else,jn+".rgb",en+".rgb"),ei(vi.else,jn+".alpha",en+".alpha")}),vi.then(Dr,"=",jr,"=",Yn,"[",en,"];"),vi.else(Dr,"=",Yn,"[",en,".rgb];",jr,"=",Yn,"[",en,".alpha];"),Wn(vi),[Dr,jr]});case fa:return nr(function(xn){return le.command(cl(xn)&&xn.length===4,"blend.color must be a 4d array",tn.commandStr),qn(4,function(Wn){return+xn[Wn]})},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===4","blend.color must be a 4d array")}),qn(4,function(Yn){return Wn.def("+",en,"[",Yn,"]")})});case yp:return nr(function(xn){return le.commandType(xn,"number",Jn,tn.commandStr),xn|0},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,"typeof "+en+'==="number"',"invalid stencil.mask")}),Wn.def(en,"|0")});case Lh:return nr(function(xn){le.commandType(xn,"object",Jn,tn.commandStr);var Wn=xn.cmp||"keep",en=xn.ref||0,Yn="mask"in xn?xn.mask:-1;return le.commandParameter(Wn,t0,jn+".cmp",tn.commandStr),le.commandType(en,"number",jn+".ref",tn.commandStr),le.commandType(Yn,"number",jn+".mask",tn.commandStr),[t0[Wn],en,Yn]},function(xn,Wn,en){var Yn=xn.constants.compareFuncs;le.optional(function(){function ei(){xn.assert(Wn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ei(en+"&&typeof ",en,'==="object"'),ei('!("cmp" in ',en,")||(",en,".cmp in ",Yn,")")});var Dr=Wn.def('"cmp" in ',en,"?",Yn,"[",en,".cmp]",":",Wd),jr=Wn.def(en,".ref|0"),vi=Wn.def('"mask" in ',en,"?",en,".mask|0:-1");return[Dr,jr,vi]});case ed:case td:return nr(function(xn){le.commandType(xn,"object",Jn,tn.commandStr);var Wn=xn.fail||"keep",en=xn.zfail||"keep",Yn=xn.zpass||"keep";return le.commandParameter(Wn,_p,jn+".fail",tn.commandStr),le.commandParameter(en,_p,jn+".zfail",tn.commandStr),le.commandParameter(Yn,_p,jn+".zpass",tn.commandStr),[jn===td?Af:id,_p[Wn],_p[en],_p[Yn]]},function(xn,Wn,en){var Yn=xn.constants.stencilOps;le.optional(function(){xn.assert(Wn,en+"&&typeof "+en+'==="object"',"invalid "+jn)});function Dr(jr){return le.optional(function(){xn.assert(Wn,'!("'+jr+'" in '+en+")||("+en+"."+jr+" in "+Yn+")","invalid "+jn+"."+jr+", must be one of "+Object.keys(_p))}),Wn.def('"',jr,'" in ',en,"?",Yn,"[",en,".",jr,"]:",Wd)}return[jn===td?Af:id,Dr("fail"),Dr("zfail"),Dr("zpass")]});case Hf:return nr(function(xn){le.commandType(xn,"object",Jn,tn.commandStr);var Wn=xn.factor|0,en=xn.units|0;return le.commandType(Wn,"number",Jn+".factor",tn.commandStr),le.commandType(en,"number",Jn+".units",tn.commandStr),[Wn,en]},function(xn,Wn,en){le.optional(function(){xn.assert(Wn,en+"&&typeof "+en+'==="object"',"invalid "+jn)});var Yn=Wn.def(en,".factor|0"),Dr=Wn.def(en,".units|0");return[Yn,Dr]});case Ss:return nr(function(xn){var Wn=0;return xn==="front"?Wn=id:xn==="back"&&(Wn=Af),le.command(!!Wn,Jn,tn.commandStr),Wn},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,en+'==="front"||'+en+'==="back"',"invalid cull.face")}),Wn.def(en,'==="front"?',id,":",Af)});case dl:return nr(function(xn){return le.command(typeof xn=="number"&&xn>=Ar.lineWidthDims[0]&&xn<=Ar.lineWidthDims[1],"invalid line width, must be a positive number between "+Ar.lineWidthDims[0]+" and "+Ar.lineWidthDims[1],tn.commandStr),xn},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,"typeof "+en+'==="number"&&'+en+">="+Ar.lineWidthDims[0]+"&&"+en+"<="+Ar.lineWidthDims[1],"invalid line width")}),en});case yl:return nr(function(xn){return le.commandParameter(xn,bp,Jn,tn.commandStr),bp[xn]},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,en+'==="cw"||'+en+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Wn.def(en+'==="cw"?'+Dh+":"+Qv)});case Pc:return nr(function(xn){return le.command(cl(xn)&&xn.length===4,"color.mask must be length 4 array",tn.commandStr),xn.map(function(Wn){return!!Wn})},function(xn,Wn,en){return le.optional(function(){xn.assert(Wn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===4","invalid color.mask")}),qn(4,function(Yn){return"!!"+en+"["+Yn+"]"})});case Hu:return nr(function(xn){le.command(typeof xn=="object"&&xn,Jn,tn.commandStr);var Wn="value"in xn?xn.value:1,en=!!xn.invert;return le.command(typeof Wn=="number"&&Wn>=0&&Wn<=1,"sample.coverage.value must be a number between 0 and 1",tn.commandStr),[Wn,en]},function(xn,Wn,en){le.optional(function(){xn.assert(Wn,en+"&&typeof "+en+'==="object"',"invalid sample.coverage")});var Yn=Wn.def('"value" in ',en,"?+",en,".value:1"),Dr=Wn.def("!!",en,".invert");return[Yn,Dr]})}}),br}function Hc(It,tn){var Mn=It.static,Tr=It.dynamic,br={};return Object.keys(Mn).forEach(function(jn){var Jn=Mn[jn],nr;if(typeof Jn=="number"||typeof Jn=="boolean")nr=yc(function(){return Jn});else if(typeof Jn=="function"){var xn=Jn._reglType;xn==="texture2d"||xn==="textureCube"?nr=yc(function(Wn){return Wn.link(Jn)}):xn==="framebuffer"||xn==="framebufferCube"?(le.command(Jn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+jn+'"',tn.commandStr),nr=yc(function(Wn){return Wn.link(Jn.color[0])})):le.commandRaise('invalid data for uniform "'+jn+'"',tn.commandStr)}else cl(Jn)?nr=yc(function(Wn){var en=Wn.global.def("[",qn(Jn.length,function(Yn){return le.command(typeof Jn[Yn]=="number"||typeof Jn[Yn]=="boolean","invalid uniform "+jn,Wn.commandStr),Jn[Yn]}),"]");return en}):le.commandRaise('invalid or missing data for uniform "'+jn+'"',tn.commandStr);nr.value=Jn,br[jn]=nr}),Object.keys(Tr).forEach(function(jn){var Jn=Tr[jn];br[jn]=cf(Jn,function(nr,xn){return nr.invoke(xn,Jn)})}),br}function $a(It,tn){var Mn=It.static,Tr=It.dynamic,br={};return Object.keys(Mn).forEach(function(jn){var Jn=Mn[jn],nr=Qt.id(jn),xn=new ur;if(tm(Jn))xn.state=Ii,xn.buffer=Xr.getBuffer(Xr.create(Jn,Xp,!1,!0)),xn.type=0;else{var Wn=Xr.getBuffer(Jn);if(Wn)xn.state=Ii,xn.buffer=Wn,xn.type=0;else if(le.command(typeof Jn=="object"&&Jn,"invalid data for attribute "+jn,tn.commandStr),"constant"in Jn){var en=Jn.constant;xn.buffer="null",xn.state=co,typeof en=="number"?xn.x=en:(le.command(cl(en)&&en.length>0&&en.length<=4,"invalid constant for attribute "+jn,tn.commandStr),ni.forEach(function(Lo,ki){ki<en.length&&(xn[Lo]=en[ki])}))}else{tm(Jn.buffer)?Wn=Xr.getBuffer(Xr.create(Jn.buffer,Xp,!1,!0)):Wn=Xr.getBuffer(Jn.buffer),le.command(!!Wn,'missing buffer for attribute "'+jn+'"',tn.commandStr);var Yn=Jn.offset|0;le.command(Yn>=0,'invalid offset for attribute "'+jn+'"',tn.commandStr);var Dr=Jn.stride|0;le.command(Dr>=0&&Dr<256,'invalid stride for attribute "'+jn+'", must be integer betweeen [0, 255]',tn.commandStr);var jr=Jn.size|0;le.command(!("size"in Jn)||jr>0&&jr<=4,'invalid size for attribute "'+jn+'", must be 1,2,3,4',tn.commandStr);var vi=!!Jn.normalized,ei=0;"type"in Jn&&(le.commandParameter(Jn.type,Vl,"invalid type for attribute "+jn,tn.commandStr),ei=Vl[Jn.type]);var _i=Jn.divisor|0;"divisor"in Jn&&(le.command(_i===0||yi,'cannot specify divisor for attribute "'+jn+'", instancing not supported',tn.commandStr),le.command(_i>=0,'invalid divisor for attribute "'+jn+'"',tn.commandStr)),le.optional(function(){var Lo=tn.commandStr,ki=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Jn).forEach(function($i){le.command(ki.indexOf($i)>=0,'unknown parameter "'+$i+'" for attribute pointer "'+jn+'" (valid parameters are '+ki+")",Lo)})}),xn.buffer=Wn,xn.state=Ii,xn.size=jr,xn.normalized=vi,xn.type=ei||Wn.dtype,xn.offset=Yn,xn.stride=Dr,xn.divisor=_i}}br[jn]=yc(function(Lo,ki){var $i=Lo.attribCache;if(nr in $i)return $i[nr];var oa={isStream:!1};return Object.keys(xn).forEach(function(Xo){oa[Xo]=xn[Xo]}),xn.buffer&&(oa.buffer=Lo.link(xn.buffer),oa.type=oa.type||oa.buffer+".dtype"),$i[nr]=oa,oa})}),Object.keys(Tr).forEach(function(jn){var Jn=Tr[jn];function nr(xn,Wn){var en=xn.invoke(Wn,Jn),Yn=xn.shared,Dr=xn.constants,jr=Yn.isBufferArgs,vi=Yn.buffer;le.optional(function(){xn.assert(Wn,en+"&&(typeof "+en+'==="object"||typeof '+en+'==="function")&&('+jr+"("+en+")||"+vi+".getBuffer("+en+")||"+vi+".getBuffer("+en+".buffer)||"+jr+"("+en+'.buffer)||("constant" in '+en+"&&(typeof "+en+'.constant==="number"||'+Yn.isArrayLike+"("+en+".constant))))",'invalid dynamic attribute "'+jn+'"')});var ei={isStream:Wn.def(!1)},_i=new ur;_i.state=Ii,Object.keys(_i).forEach(function(oa){ei[oa]=Wn.def(""+_i[oa])});var Lo=ei.buffer,ki=ei.type;Wn("if(",jr,"(",en,")){",ei.isStream,"=true;",Lo,"=",vi,".createStream(",Xp,",",en,");",ki,"=",Lo,".dtype;","}else{",Lo,"=",vi,".getBuffer(",en,");","if(",Lo,"){",ki,"=",Lo,".dtype;",'}else if("constant" in ',en,"){",ei.state,"=",co,";","if(typeof "+en+'.constant === "number"){',ei[ni[0]],"=",en,".constant;",ni.slice(1).map(function(oa){return ei[oa]}).join("="),"=0;","}else{",ni.map(function(oa,Xo){return ei[oa]+"="+en+".constant.length>"+Xo+"?"+en+".constant["+Xo+"]:0;"}).join(""),"}}else{","if(",jr,"(",en,".buffer)){",Lo,"=",vi,".createStream(",Xp,",",en,".buffer);","}else{",Lo,"=",vi,".getBuffer(",en,".buffer);","}",ki,'="type" in ',en,"?",Dr.glTypes,"[",en,".type]:",Lo,".dtype;",ei.normalized,"=!!",en,".normalized;");function $i(oa){Wn(ei[oa],"=",en,".",oa,"|0;")}return $i("size"),$i("offset"),$i("stride"),$i("divisor"),Wn("}}"),Wn.exit("if(",ei.isStream,"){",vi,".destroyStream(",Lo,");","}"),ei}br[jn]=cf(Jn,nr)}),br}function Gl(It,tn){var Mn=It.static,Tr=It.dynamic;if(sh in Mn){var br=Mn[sh];return br!==null&&Fi.getVAO(br)===null&&(br=Fi.createVAO(br)),yc(function(Jn){return Jn.link(Fi.getVAO(br))})}else if(sh in Tr){var jn=Tr[sh];return cf(jn,function(Jn,nr){var xn=Jn.invoke(nr,jn);return nr.def(Jn.shared.vao+".getVAO("+xn+")")})}return null}function qs(It){var tn=It.static,Mn=It.dynamic,Tr={};return Object.keys(tn).forEach(function(br){var jn=tn[br];Tr[br]=yc(function(Jn,nr){return typeof jn=="number"||typeof jn=="boolean"?""+jn:Jn.link(jn)})}),Object.keys(Mn).forEach(function(br){var jn=Mn[br];Tr[br]=cf(jn,function(Jn,nr){return Jn.invoke(nr,jn)})}),Tr}function ie(It,tn,Mn,Tr,br){var jn=It.static,Jn=It.dynamic;le.optional(function(){var $i=[tu,Tf,wf,Xa,Wl,Wf,ec,Gp,Ll,sh].concat(Ei);function oa(Xo){Object.keys(Xo).forEach(function(Ns){le.command($i.indexOf(Ns)>=0,'unknown parameter "'+Ns+'"',br.commandStr)})}oa(jn),oa(Jn)});var nr=ha(It,tn),xn=so(It,br),Wn=va(It,xn,br),en=gs(It,br),Yn=Sl(It,br),Dr=Jo(It,br,nr);function jr($i){var oa=Wn[$i];oa&&(Yn[$i]=oa)}jr(Il),jr(di(Ai));var vi=Object.keys(Yn).length>0,ei={framebuffer:xn,draw:en,shader:Dr,state:Yn,dirty:vi,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ei.profile=Na(It,br),ei.uniforms=Hc(Mn,br),ei.drawVAO=ei.scopeVAO=Gl(It,br),!ei.drawVAO&&Dr.program&&!nr&&Rn.angle_instanced_arrays){var _i=!0,Lo=Dr.program.attributes.map(function($i){var oa=tn.static[$i];return _i=_i&&!!oa,oa});if(_i&&Lo.length>0){var ki=Fi.getVAO(Fi.createVAO(Lo));ei.drawVAO=new Ru(null,null,null,function($i,oa){return $i.link(ki)}),ei.useVAO=!0}}return nr?ei.useVAO=!0:ei.attributes=$a(tn,br),ei.context=qs(Tr,br),ei}function tc(It,tn,Mn){var Tr=It.shared,br=Tr.context,jn=It.scope();Object.keys(Mn).forEach(function(Jn){tn.save(br,"."+Jn);var nr=Mn[Jn];jn(br,".",Jn,"=",nr.append(It,tn),";")}),tn(jn)}function ss(It,tn,Mn,Tr){var br=It.shared,jn=br.gl,Jn=br.framebuffer,nr;io&&(nr=tn.def(br.extensions,".webgl_draw_buffers"));var xn=It.constants,Wn=xn.drawBuffer,en=xn.backBuffer,Yn;Mn?Yn=Mn.append(It,tn):Yn=tn.def(Jn,".next"),Tr||tn("if(",Yn,"!==",Jn,".cur){"),tn("if(",Yn,"){",jn,".bindFramebuffer(",od,",",Yn,".framebuffer);"),io&&tn(nr,".drawBuffersWEBGL(",Wn,"[",Yn,".colorAttachments.length]);"),tn("}else{",jn,".bindFramebuffer(",od,",null);"),io&&tn(nr,".drawBuffersWEBGL(",en,");"),tn("}",Jn,".cur=",Yn,";"),Tr||tn("}")}function fr(It,tn,Mn){var Tr=It.shared,br=Tr.gl,jn=It.current,Jn=It.next,nr=Tr.current,xn=Tr.next,Wn=It.cond(nr,".dirty");Ei.forEach(function(en){var Yn=di(en);if(!(Yn in Mn.state)){var Dr,jr;if(Yn in Jn){Dr=Jn[Yn],jr=jn[Yn];var vi=qn(oi[Yn].length,function(_i){return Wn.def(Dr,"[",_i,"]")});Wn(It.cond(vi.map(function(_i,Lo){return _i+"!=="+jr+"["+Lo+"]"}).join("||")).then(br,".",li[Yn],"(",vi,");",vi.map(function(_i,Lo){return jr+"["+Lo+"]="+_i}).join(";"),";"))}else{Dr=Wn.def(xn,".",Yn);var ei=It.cond(Dr,"!==",nr,".",Yn);Wn(ei),Yn in to?ei(It.cond(Dr).then(br,".enable(",to[Yn],");").else(br,".disable(",to[Yn],");"),nr,".",Yn,"=",Dr,";"):ei(br,".",li[Yn],"(",Dr,");",nr,".",Yn,"=",Dr,";")}}}),Object.keys(Mn.state).length===0&&Wn(nr,".dirty=false;"),tn(Wn)}function Kr(It,tn,Mn,Tr){var br=It.shared,jn=It.current,Jn=br.current,nr=br.gl;D0(Object.keys(Mn)).forEach(function(xn){var Wn=Mn[xn];if(!(Tr&&!Tr(Wn))){var en=Wn.append(It,tn);if(to[xn]){var Yn=to[xn];mu(Wn)?en?tn(nr,".enable(",Yn,");"):tn(nr,".disable(",Yn,");"):tn(It.cond(en).then(nr,".enable(",Yn,");").else(nr,".disable(",Yn,");")),tn(Jn,".",xn,"=",en,";")}else if(cl(en)){var Dr=jn[xn];tn(nr,".",li[xn],"(",en,");",en.map(function(jr,vi){return Dr+"["+vi+"]="+jr}).join(";"),";")}else tn(nr,".",li[xn],"(",en,");",Jn,".",xn,"=",en,";")}})}function Dl(It,tn){yi&&(It.instancing=tn.def(It.shared.extensions,".angle_instanced_arrays"))}function Ca(It,tn,Mn,Tr,br){var jn=It.shared,Jn=It.stats,nr=jn.current,xn=jn.timer,Wn=Mn.profile;function en(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Yn,Dr;function jr($i){Yn=tn.def(),$i(Yn,"=",en(),";"),typeof br=="string"?$i(Jn,".count+=",br,";"):$i(Jn,".count++;"),pi&&(Tr?(Dr=tn.def(),$i(Dr,"=",xn,".getNumPendingQueries();")):$i(xn,".beginQuery(",Jn,");"))}function vi($i){$i(Jn,".cpuTime+=",en(),"-",Yn,";"),pi&&(Tr?$i(xn,".pushScopeStats(",Dr,",",xn,".getNumPendingQueries(),",Jn,");"):$i(xn,".endQuery();"))}function ei($i){var oa=tn.def(nr,".profile");tn(nr,".profile=",$i,";"),tn.exit(nr,".profile=",oa,";")}var _i;if(Wn){if(mu(Wn)){Wn.enable?(jr(tn),vi(tn.exit),ei("true")):ei("false");return}_i=Wn.append(It,tn),ei(_i)}else _i=tn.def(nr,".profile");var Lo=It.block();jr(Lo),tn("if(",_i,"){",Lo,"}");var ki=It.block();vi(ki),tn.exit("if(",_i,"){",ki,"}")}function ru(It,tn,Mn,Tr,br){var jn=It.shared;function Jn(xn){switch(xn){case uv:case Kp:case qp:return 2;case P0:case El:case Qp:return 3;case fv:case nd:case Hd:return 4;default:return 1}}function nr(xn,Wn,en){var Yn=jn.gl,Dr=tn.def(xn,".location"),jr=tn.def(jn.attributes,"[",Dr,"]"),vi=en.state,ei=en.buffer,_i=[en.x,en.y,en.z,en.w],Lo=["buffer","normalized","offset","stride"];function ki(){tn("if(!",jr,".buffer){",Yn,".enableVertexAttribArray(",Dr,");}");var oa=en.type,Xo;if(en.size?Xo=tn.def(en.size,"||",Wn):Xo=Wn,tn("if(",jr,".type!==",oa,"||",jr,".size!==",Xo,"||",Lo.map(function(Wc){return jr+"."+Wc+"!=="+en[Wc]}).join("||"),"){",Yn,".bindBuffer(",Xp,",",ei,".buffer);",Yn,".vertexAttribPointer(",[Dr,Xo,oa,en.normalized,en.stride,en.offset],");",jr,".type=",oa,";",jr,".size=",Xo,";",Lo.map(function(Wc){return jr+"."+Wc+"="+en[Wc]+";"}).join(""),"}"),yi){var Ns=en.divisor;tn("if(",jr,".divisor!==",Ns,"){",It.instancing,".vertexAttribDivisorANGLE(",[Dr,Ns],");",jr,".divisor=",Ns,";}")}}function $i(){tn("if(",jr,".buffer){",Yn,".disableVertexAttribArray(",Dr,");",jr,".buffer=null;","}if(",ni.map(function(oa,Xo){return jr+"."+oa+"!=="+_i[Xo]}).join("||"),"){",Yn,".vertexAttrib4f(",Dr,",",_i,");",ni.map(function(oa,Xo){return jr+"."+oa+"="+_i[Xo]+";"}).join(""),"}")}vi===Ii?ki():vi===co?$i():(tn("if(",vi,"===",Ii,"){"),ki(),tn("}else{"),$i(),tn("}"))}Tr.forEach(function(xn){var Wn=xn.name,en=Mn.attributes[Wn],Yn;if(en){if(!br(en))return;Yn=en.append(It,tn)}else{if(!br(Mu))return;var Dr=It.scopeAttrib(Wn);le.optional(function(){It.assert(tn,Dr+".state","missing attribute "+Wn)}),Yn={},Object.keys(new ur).forEach(function(jr){Yn[jr]=tn.def(Dr,".",jr)})}nr(It.link(xn),Jn(xn.info.type),Yn)})}function zs(It,tn,Mn,Tr,br){for(var jn=It.shared,Jn=jn.gl,nr,xn=0;xn<Tr.length;++xn){var Wn=Tr[xn],en=Wn.name,Yn=Wn.info.type,Dr=Mn.uniforms[en],jr=It.link(Wn),vi=jr+".location",ei;if(Dr){if(!br(Dr))continue;if(mu(Dr)){var _i=Dr.value;if(le.command(_i!==null&&typeof _i!="undefined",'missing uniform "'+en+'"',It.commandStr),Yn===e0||Yn===I0){le.command(typeof _i=="function"&&(Yn===e0&&(_i._reglType==="texture2d"||_i._reglType==="framebuffer")||Yn===I0&&(_i._reglType==="textureCube"||_i._reglType==="framebufferCube")),"invalid texture for uniform "+en,It.commandStr);var Lo=It.link(_i._texture||_i.color[0]._texture);tn(Jn,".uniform1i(",vi,",",Lo+".bind());"),tn.exit(Lo,".unbind();")}else if(Yn===Jp||Yn===rd||Yn===lf){le.optional(function(){le.command(cl(_i),"invalid matrix for uniform "+en,It.commandStr),le.command(Yn===Jp&&_i.length===4||Yn===rd&&_i.length===9||Yn===lf&&_i.length===16,"invalid length for matrix uniform "+en,It.commandStr)});var ki=It.global.def("new Float32Array(["+Array.prototype.slice.call(_i)+"])"),$i=2;Yn===rd?$i=3:Yn===lf&&($i=4),tn(Jn,".uniformMatrix",$i,"fv(",vi,",false,",ki,");")}else{switch(Yn){case jg:le.commandType(_i,"number","uniform "+en,It.commandStr),nr="1f";break;case uv:le.command(cl(_i)&&_i.length===2,"uniform "+en,It.commandStr),nr="2f";break;case P0:le.command(cl(_i)&&_i.length===3,"uniform "+en,It.commandStr),nr="3f";break;case fv:le.command(cl(_i)&&_i.length===4,"uniform "+en,It.commandStr),nr="4f";break;case $m:le.commandType(_i,"boolean","uniform "+en,It.commandStr),nr="1i";break;case nu:le.commandType(_i,"number","uniform "+en,It.commandStr),nr="1i";break;case qp:le.command(cl(_i)&&_i.length===2,"uniform "+en,It.commandStr),nr="2i";break;case Kp:le.command(cl(_i)&&_i.length===2,"uniform "+en,It.commandStr),nr="2i";break;case Qp:le.command(cl(_i)&&_i.length===3,"uniform "+en,It.commandStr),nr="3i";break;case El:le.command(cl(_i)&&_i.length===3,"uniform "+en,It.commandStr),nr="3i";break;case Hd:le.command(cl(_i)&&_i.length===4,"uniform "+en,It.commandStr),nr="4i";break;case nd:le.command(cl(_i)&&_i.length===4,"uniform "+en,It.commandStr),nr="4i";break}tn(Jn,".uniform",nr,"(",vi,",",cl(_i)?Array.prototype.slice.call(_i):_i,");")}continue}else ei=Dr.append(It,tn)}else{if(!br(Mu))continue;ei=tn.def(jn.uniforms,"[",Qt.id(en),"]")}Yn===e0?tn("if(",ei,"&&",ei,'._reglType==="framebuffer"){',ei,"=",ei,".color[0];","}"):Yn===I0&&tn("if(",ei,"&&",ei,'._reglType==="framebufferCube"){',ei,"=",ei,".color[0];","}"),le.optional(function(){function nc(Sp,Tp){It.assert(tn,Sp,'bad data or missing for uniform "'+en+'".  '+Tp)}function Jm(Sp){nc("typeof "+ei+'==="'+Sp+'"',"invalid type, expected "+Sp)}function Cf(Sp,Tp){nc(jn.isArrayLike+"("+ei+")&&"+ei+".length==="+Sp,"invalid vector, should have length "+Sp,It.commandStr)}function s_(Sp){nc("typeof "+ei+'==="function"&&'+ei+'._reglType==="texture'+(Sp===Gm?"2d":"Cube")+'"',"invalid texture type",It.commandStr)}switch(Yn){case nu:Jm("number");break;case Kp:Cf(2,"number");break;case El:Cf(3,"number");break;case nd:Cf(4,"number");break;case jg:Jm("number");break;case uv:Cf(2,"number");break;case P0:Cf(3,"number");break;case fv:Cf(4,"number");break;case $m:Jm("boolean");break;case qp:Cf(2,"boolean");break;case Qp:Cf(3,"boolean");break;case Hd:Cf(4,"boolean");break;case Jp:Cf(4,"number");break;case rd:Cf(9,"number");break;case lf:Cf(16,"number");break;case e0:s_(Gm);break;case I0:s_(Yv);break}});var oa=1;switch(Yn){case e0:case I0:var Xo=tn.def(ei,"._texture");tn(Jn,".uniform1i(",vi,",",Xo,".bind());"),tn.exit(Xo,".unbind();");continue;case nu:case $m:nr="1i";break;case Kp:case qp:nr="2i",oa=2;break;case El:case Qp:nr="3i",oa=3;break;case nd:case Hd:nr="4i",oa=4;break;case jg:nr="1f";break;case uv:nr="2f",oa=2;break;case P0:nr="3f",oa=3;break;case fv:nr="4f",oa=4;break;case Jp:nr="Matrix2fv";break;case rd:nr="Matrix3fv";break;case lf:nr="Matrix4fv";break}if(tn(Jn,".uniform",nr,"(",vi,","),nr.charAt(0)==="M"){var Ns=Math.pow(Yn-Jp+2,2),Wc=It.global.def("new Float32Array(",Ns,")");tn("false,(Array.isArray(",ei,")||",ei," instanceof Float32Array)?",ei,":(",qn(Ns,function(nc){return Wc+"["+nc+"]="+ei+"["+nc+"]"}),",",Wc,")")}else oa>1?tn(qn(oa,function(nc){return ei+"["+nc+"]"})):tn(ei);tn(");")}}function ea(It,tn,Mn,Tr){var br=It.shared,jn=br.gl,Jn=br.draw,nr=Tr.draw;function xn(){var Xo=nr.elements,Ns,Wc=tn;return Xo?((Xo.contextDep&&Tr.contextDynamic||Xo.propDep)&&(Wc=Mn),Ns=Xo.append(It,Wc)):Ns=Wc.def(Jn,".",Xa),Ns&&Wc("if("+Ns+")"+jn+".bindBuffer("+Jy+","+Ns+".buffer.buffer);"),Ns}function Wn(){var Xo=nr.count,Ns,Wc=tn;return Xo?((Xo.contextDep&&Tr.contextDynamic||Xo.propDep)&&(Wc=Mn),Ns=Xo.append(It,Wc),le.optional(function(){Xo.MISSING&&It.assert(tn,"false","missing vertex count"),Xo.DYNAMIC&&It.assert(Wc,Ns+">=0","missing vertex count")})):(Ns=Wc.def(Jn,".",ec),le.optional(function(){It.assert(Wc,Ns+">=0","missing vertex count")})),Ns}var en=xn();function Yn(Xo){var Ns=nr[Xo];return Ns?Ns.contextDep&&Tr.contextDynamic||Ns.propDep?Ns.append(It,Mn):Ns.append(It,tn):tn.def(Jn,".",Xo)}var Dr=Yn(Wl),jr=Yn(Wf),vi=Wn();if(typeof vi=="number"){if(vi===0)return}else Mn("if(",vi,"){"),Mn.exit("}");var ei,_i;yi&&(ei=Yn(Gp),_i=It.instancing);var Lo=en+".type",ki=nr.elements&&mu(nr.elements);function $i(){function Xo(){Mn(_i,".drawElementsInstancedANGLE(",[Dr,vi,Lo,jr+"<<(("+Lo+"-"+Bi+")>>1)",ei],");")}function Ns(){Mn(_i,".drawArraysInstancedANGLE(",[Dr,jr,vi,ei],");")}en?ki?Xo():(Mn("if(",en,"){"),Xo(),Mn("}else{"),Ns(),Mn("}")):Ns()}function oa(){function Xo(){Mn(jn+".drawElements("+[Dr,vi,Lo,jr+"<<(("+Lo+"-"+Bi+")>>1)"]+");")}function Ns(){Mn(jn+".drawArrays("+[Dr,jr,vi]+");")}en?ki?Xo():(Mn("if(",en,"){"),Xo(),Mn("}else{"),Ns(),Mn("}")):Ns()}yi&&(typeof ei!="number"||ei>=0)?typeof ei=="string"?(Mn("if(",ei,">0){"),$i(),Mn("}else if(",ei,"<0){"),oa(),Mn("}")):$i():oa()}function Ia(It,tn,Mn,Tr,br){var jn=ko(),Jn=jn.proc("body",br);return le.optional(function(){jn.commandStr=tn.commandStr,jn.command=jn.link(tn.commandStr)}),yi&&(jn.instancing=Jn.def(jn.shared.extensions,".angle_instanced_arrays")),It(jn,Jn,Mn,Tr),jn.compile().body}function ys(It,tn,Mn,Tr){Dl(It,tn),Mn.useVAO?Mn.drawVAO?tn(It.shared.vao,".setVAO(",Mn.drawVAO.append(It,tn),");"):tn(It.shared.vao,".setVAO(",It.shared.vao,".targetVAO);"):(tn(It.shared.vao,".setVAO(null);"),ru(It,tn,Mn,Tr.attributes,function(){return!0})),zs(It,tn,Mn,Tr.uniforms,function(){return!0}),ea(It,tn,tn,Mn)}function uc(It,tn){var Mn=It.proc("draw",1);Dl(It,Mn),tc(It,Mn,tn.context),ss(It,Mn,tn.framebuffer),fr(It,Mn,tn),Kr(It,Mn,tn.state),Ca(It,Mn,tn,!1,!0);var Tr=tn.shader.progVar.append(It,Mn);if(Mn(It.shared.gl,".useProgram(",Tr,".program);"),tn.shader.program)ys(It,Mn,tn,tn.shader.program);else{Mn(It.shared.vao,".setVAO(null);");var br=It.global.def("{}"),jn=Mn.def(Tr,".id"),Jn=Mn.def(br,"[",jn,"]");Mn(It.cond(Jn).then(Jn,".call(this,a0);").else(Jn,"=",br,"[",jn,"]=",It.link(function(nr){return Ia(ys,It,tn,nr,1)}),"(",Tr,");",Jn,".call(this,a0);"))}Object.keys(tn.state).length>0&&Mn(It.shared.current,".dirty=true;")}function Nh(It,tn,Mn,Tr){It.batchId="a1",Dl(It,tn);function br(){return!0}ru(It,tn,Mn,Tr.attributes,br),zs(It,tn,Mn,Tr.uniforms,br),ea(It,tn,tn,Mn)}function mn(It,tn,Mn,Tr){Dl(It,tn);var br=Mn.contextDep,jn=tn.def(),Jn="a0",nr="a1",xn=tn.def();It.shared.props=xn,It.batchId=jn;var Wn=It.scope(),en=It.scope();tn(Wn.entry,"for(",jn,"=0;",jn,"<",nr,";++",jn,"){",xn,"=",Jn,"[",jn,"];",en,"}",Wn.exit);function Yn(Lo){return Lo.contextDep&&br||Lo.propDep}function Dr(Lo){return!Yn(Lo)}if(Mn.needsContext&&tc(It,en,Mn.context),Mn.needsFramebuffer&&ss(It,en,Mn.framebuffer),Kr(It,en,Mn.state,Yn),Mn.profile&&Yn(Mn.profile)&&Ca(It,en,Mn,!1,!0),Tr)Mn.useVAO?Mn.drawVAO?Yn(Mn.drawVAO)?en(It.shared.vao,".setVAO(",Mn.drawVAO.append(It,en),");"):Wn(It.shared.vao,".setVAO(",Mn.drawVAO.append(It,Wn),");"):Wn(It.shared.vao,".setVAO(",It.shared.vao,".targetVAO);"):(Wn(It.shared.vao,".setVAO(null);"),ru(It,Wn,Mn,Tr.attributes,Dr),ru(It,en,Mn,Tr.attributes,Yn)),zs(It,Wn,Mn,Tr.uniforms,Dr),zs(It,en,Mn,Tr.uniforms,Yn),ea(It,Wn,en,Mn);else{var jr=It.global.def("{}"),vi=Mn.shader.progVar.append(It,en),ei=en.def(vi,".id"),_i=en.def(jr,"[",ei,"]");en(It.shared.gl,".useProgram(",vi,".program);","if(!",_i,"){",_i,"=",jr,"[",ei,"]=",It.link(function(Lo){return Ia(Nh,It,Mn,Lo,2)}),"(",vi,");}",_i,".call(this,a0[",jn,"],",jn,");")}}function Pr(It,tn){var Mn=It.proc("batch",2);It.batchId="0",Dl(It,Mn);var Tr=!1,br=!0;Object.keys(tn.context).forEach(function(jr){Tr=Tr||tn.context[jr].propDep}),Tr||(tc(It,Mn,tn.context),br=!1);var jn=tn.framebuffer,Jn=!1;jn?(jn.propDep?Tr=Jn=!0:jn.contextDep&&Tr&&(Jn=!0),Jn||ss(It,Mn,jn)):ss(It,Mn,null),tn.state.viewport&&tn.state.viewport.propDep&&(Tr=!0);function nr(jr){return jr.contextDep&&Tr||jr.propDep}fr(It,Mn,tn),Kr(It,Mn,tn.state,function(jr){return!nr(jr)}),(!tn.profile||!nr(tn.profile))&&Ca(It,Mn,tn,!1,"a1"),tn.contextDep=Tr,tn.needsContext=br,tn.needsFramebuffer=Jn;var xn=tn.shader.progVar;if(xn.contextDep&&Tr||xn.propDep)mn(It,Mn,tn,null);else{var Wn=xn.append(It,Mn);if(Mn(It.shared.gl,".useProgram(",Wn,".program);"),tn.shader.program)mn(It,Mn,tn,tn.shader.program);else{Mn(It.shared.vao,".setVAO(null);");var en=It.global.def("{}"),Yn=Mn.def(Wn,".id"),Dr=Mn.def(en,"[",Yn,"]");Mn(It.cond(Dr).then(Dr,".call(this,a0,a1);").else(Dr,"=",en,"[",Yn,"]=",It.link(function(jr){return Ia(mn,It,tn,jr,2)}),"(",Wn,");",Dr,".call(this,a0,a1);"))}}Object.keys(tn.state).length>0&&Mn(It.shared.current,".dirty=true;")}function xr(It,tn){var Mn=It.proc("scope",3);It.batchId="a2";var Tr=It.shared,br=Tr.current;tc(It,Mn,tn.context),tn.framebuffer&&tn.framebuffer.append(It,Mn),D0(Object.keys(tn.state)).forEach(function(Jn){var nr=tn.state[Jn],xn=nr.append(It,Mn);cl(xn)?xn.forEach(function(Wn,en){Mn.set(It.next[Jn],"["+en+"]",Wn)}):Mn.set(Tr.next,"."+Jn,xn)}),Ca(It,Mn,tn,!0,!0),[Xa,Wf,ec,Gp,Wl].forEach(function(Jn){var nr=tn.draw[Jn];nr&&Mn.set(Tr.draw,"."+Jn,""+nr.append(It,Mn))}),Object.keys(tn.uniforms).forEach(function(Jn){Mn.set(Tr.uniforms,"["+Qt.id(Jn)+"]",tn.uniforms[Jn].append(It,Mn))}),Object.keys(tn.attributes).forEach(function(Jn){var nr=tn.attributes[Jn].append(It,Mn),xn=It.scopeAttrib(Jn);Object.keys(new ur).forEach(function(Wn){Mn.set(xn,"."+Wn,nr[Wn])})}),tn.scopeVAO&&Mn.set(Tr.vao,".targetVAO",tn.scopeVAO.append(It,Mn));function jn(Jn){var nr=tn.shader[Jn];nr&&Mn.set(Tr.shader,"."+Jn,nr.append(It,Mn))}jn(Tf),jn(wf),Object.keys(tn.state).length>0&&(Mn(br,".dirty=true;"),Mn.exit(br,".dirty=true;")),Mn("a1(",It.shared.context,",a0,",It.batchId,");")}function vo(It){if(!(typeof It!="object"||cl(It))){for(var tn=Object.keys(It),Mn=0;Mn<tn.length;++Mn)if(Cn.isDynamic(It[tn[Mn]]))return!0;return!1}}function za(It,tn,Mn){var Tr=tn.static[Mn];if(!Tr||!vo(Tr))return;var br=It.global,jn=Object.keys(Tr),Jn=!1,nr=!1,xn=!1,Wn=It.global.def("{}");jn.forEach(function(Yn){var Dr=Tr[Yn];if(Cn.isDynamic(Dr)){typeof Dr=="function"&&(Dr=Tr[Yn]=Cn.unbox(Dr));var jr=cf(Dr,null);Jn=Jn||jr.thisDep,xn=xn||jr.propDep,nr=nr||jr.contextDep}else{switch(br(Wn,".",Yn,"="),typeof Dr){case"number":br(Dr);break;case"string":br('"',Dr,'"');break;case"object":Array.isArray(Dr)&&br("[",Dr.join(),"]");break;default:br(It.link(Dr));break}br(";")}});function en(Yn,Dr){jn.forEach(function(jr){var vi=Tr[jr];if(Cn.isDynamic(vi)){var ei=Yn.invoke(Dr,vi);Dr(Wn,".",jr,"=",ei,";")}})}tn.dynamic[Mn]=new Cn.DynamicVariable(Cr,{thisDep:Jn,contextDep:nr,propDep:xn,ref:Wn,append:en}),delete tn.static[Mn]}function Ps(It,tn,Mn,Tr,br){var jn=ko();jn.stats=jn.link(br),Object.keys(tn.static).forEach(function(nr){za(jn,tn,nr)}),$v.forEach(function(nr){za(jn,It,nr)});var Jn=ie(It,tn,Mn,Tr,jn);return uc(jn,Jn),xr(jn,Jn),Pr(jn,Jn),jn.compile()}return{next:eo,current:oi,procs:function(){var It=ko(),tn=It.proc("poll"),Mn=It.proc("refresh"),Tr=It.block();tn(Tr),Mn(Tr);var br=It.shared,jn=br.gl,Jn=br.next,nr=br.current;Tr(nr,".dirty=false;"),ss(It,tn),ss(It,Mn,null,!0);var xn;yi&&(xn=It.link(yi)),Rn.oes_vertex_array_object&&Mn(It.link(Rn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Wn=0;Wn<Ar.maxAttributes;++Wn){var en=Mn.def(br.attributes,"[",Wn,"]"),Yn=It.cond(en,".buffer");Yn.then(jn,".enableVertexAttribArray(",Wn,");",jn,".bindBuffer(",Xp,",",en,".buffer.buffer);",jn,".vertexAttribPointer(",Wn,",",en,".size,",en,".type,",en,".normalized,",en,".stride,",en,".offset);").else(jn,".disableVertexAttribArray(",Wn,");",jn,".vertexAttrib4f(",Wn,",",en,".x,",en,".y,",en,".z,",en,".w);",en,".buffer=null;"),Mn(Yn),yi&&Mn(xn,".vertexAttribDivisorANGLE(",Wn,",",en,".divisor);")}return Mn(It.shared.vao,".currentVAO=null;",It.shared.vao,".setVAO(",It.shared.vao,".targetVAO);"),Object.keys(to).forEach(function(Dr){var jr=to[Dr],vi=Tr.def(Jn,".",Dr),ei=It.block();ei("if(",vi,"){",jn,".enable(",jr,")}else{",jn,".disable(",jr,")}",nr,".",Dr,"=",vi,";"),Mn(ei),tn("if(",vi,"!==",nr,".",Dr,"){",ei,"}")}),Object.keys(li).forEach(function(Dr){var jr=li[Dr],vi=oi[Dr],ei,_i,Lo=It.block();if(Lo(jn,".",jr,"("),cl(vi)){var ki=vi.length;ei=It.global.def(Jn,".",Dr),_i=It.global.def(nr,".",Dr),Lo(qn(ki,function($i){return ei+"["+$i+"]"}),");",qn(ki,function($i){return _i+"["+$i+"]="+ei+"["+$i+"];"}).join("")),tn("if(",qn(ki,function($i){return ei+"["+$i+"]!=="+_i+"["+$i+"]"}).join("||"),"){",Lo,"}")}else ei=Tr.def(Jn,".",Dr),_i=Tr.def(nr,".",Dr),Lo(ei,");",nr,".",Dr,"=",ei,";"),tn("if(",ei,"!==",_i,"){",Lo,"}");Mn(Lo)}),It.compile()}(),compile:Ps}}function N0(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Wg=34918,o_=34919,dv=35007,Km=function(Ue,Qt){if(!Qt.ext_disjoint_timer_query)return null;var Rn=[];function Ar(){return Rn.pop()||Qt.ext_disjoint_timer_query.createQueryEXT()}function Xr(yi){Rn.push(yi)}var Or=[];function mr(yi){var io=Ar();Qt.ext_disjoint_timer_query.beginQueryEXT(dv,io),Or.push(io),pi(Or.length-1,Or.length,yi)}function Oi(){Qt.ext_disjoint_timer_query.endQueryEXT(dv)}function ci(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fi=[];function Ri(){return Fi.pop()||new ci}function Ni(yi){Fi.push(yi)}var Xi=[];function pi(yi,io,oi){var eo=Ri();eo.startQueryIndex=yi,eo.endQueryIndex=io,eo.sum=0,eo.stats=oi,Xi.push(eo)}var Ui=[],ur=[];function kr(){var yi,io,oi=Or.length;if(oi!==0){ur.length=Math.max(ur.length,oi+1),Ui.length=Math.max(Ui.length,oi+1),Ui[0]=0,ur[0]=0;var eo=0;for(yi=0,io=0;io<Or.length;++io){var Ei=Or[io];Qt.ext_disjoint_timer_query.getQueryObjectEXT(Ei,o_)?(eo+=Qt.ext_disjoint_timer_query.getQueryObjectEXT(Ei,Wg),Xr(Ei)):Or[yi++]=Ei,Ui[io+1]=eo,ur[io+1]=yi}for(Or.length=yi,yi=0,io=0;io<Xi.length;++io){var to=Xi[io],li=to.startQueryIndex,di=to.endQueryIndex;to.sum+=Ui[di]-Ui[li];var zo=ur[li],pa=ur[di];pa===zo?(to.stats.gpuTime+=to.sum/1e6,Ni(to)):(to.startQueryIndex=zo,to.endQueryIndex=pa,Xi[yi++]=to)}Xi.length=yi}}return{beginQuery:mr,endQuery:Oi,pushScopeStats:pi,update:kr,getNumPendingQueries:function(){return Or.length},clear:function(){Rn.push.apply(Rn,Or);for(var yi=0;yi<Rn.length;yi++)Qt.ext_disjoint_timer_query.deleteQueryEXT(Rn[yi]);Or.length=0,Rn.length=0},restore:function(){Or.length=0,Rn.length=0}}},nm=16384,Pu=256,rm=1024,xp=34962,qm="webglcontextlost",pv="webglcontextrestored",Ep=1,Qm=2,a_=3;function im(Ue,Qt){for(var Rn=0;Rn<Ue.length;++Rn)if(Ue[Rn]===Qt)return Rn;return-1}function Gg(Ue){var Qt=$n(Ue);if(!Qt)return null;var Rn=Qt.gl,Ar=Rn.getContextAttributes(),Xr=Rn.isContextLost(),Or=yr(Rn,Qt);if(!Or)return null;var mr=ht(),Oi=N0(),ci=Or.extensions,Fi=Km(Rn,ci),Ri=Zn(),Ni=Rn.drawingBufferWidth,Xi=Rn.drawingBufferHeight,pi={tick:0,time:0,viewportWidth:Ni,viewportHeight:Xi,framebufferWidth:Ni,framebufferHeight:Xi,drawingBufferWidth:Ni,drawingBufferHeight:Xi,pixelRatio:Qt.pixelRatio},Ui={},ur={elements:null,primitive:4,count:-1,offset:0,instances:-1},kr=Ha(Rn,ci),yi=Cd(Rn,Oi,Qt,oi),io=st(Rn,ci,kr,Oi,yi);function oi(ea){return io.destroyBuffer(ea)}var eo=$h(Rn,ci,yi,Oi),Ei=vn(Rn,mr,Oi,Qt),to=ju(Rn,ci,kr,function(){zo.procs.poll()},pi,Oi,Qt),li=Jc(Rn,ci,kr,Oi,Qt),di=G(Rn,ci,kr,to,li,Oi),zo=Ks(Rn,mr,ci,kr,yi,eo,to,di,Ui,io,Ei,ur,pi,Fi,Qt),pa=vr(Rn,di,zo.procs.poll,pi,Ar,ci,kr),qi=zo.next,Si=Rn.canvas,$r=[],ko=[],Na=[],so=[Qt.onDestroy],va=null;function ha(){if($r.length===0){Fi&&Fi.update(),va=null;return}va=Pn.next(ha),Kr();for(var ea=$r.length-1;ea>=0;--ea){var Ia=$r[ea];Ia&&Ia(pi,null,0)}Rn.flush(),Fi&&Fi.update()}function Jo(){!va&&$r.length>0&&(va=Pn.next(ha))}function gs(){va&&(Pn.cancel(ha),va=null)}function Sl(ea){ea.preventDefault(),Xr=!0,gs(),ko.forEach(function(Ia){Ia()})}function Hc(ea){Rn.getError(),Xr=!1,Or.restore(),Ei.restore(),yi.restore(),to.restore(),li.restore(),di.restore(),io.restore(),Fi&&Fi.restore(),zo.procs.refresh(),Jo(),Na.forEach(function(Ia){Ia()})}Si&&(Si.addEventListener(qm,Sl,!1),Si.addEventListener(pv,Hc,!1));function $a(){$r.length=0,gs(),Si&&(Si.removeEventListener(qm,Sl),Si.removeEventListener(pv,Hc)),Ei.clear(),di.clear(),li.clear(),to.clear(),eo.clear(),yi.clear(),io.clear(),Fi&&Fi.clear(),so.forEach(function(ea){ea()})}function Gl(ea){le(!!ea,"invalid args to regl({...})"),le.type(ea,"object","invalid args to regl({...})");function Ia(br){var jn=D({},br);delete jn.uniforms,delete jn.attributes,delete jn.context,delete jn.vao,"stencil"in jn&&jn.stencil.op&&(jn.stencil.opBack=jn.stencil.opFront=jn.stencil.op,delete jn.stencil.op);function Jn(nr){if(nr in jn){var xn=jn[nr];delete jn[nr],Object.keys(xn).forEach(function(Wn){jn[nr+"."+Wn]=xn[Wn]})}}return Jn("blend"),Jn("depth"),Jn("cull"),Jn("stencil"),Jn("polygonOffset"),Jn("scissor"),Jn("sample"),"vao"in br&&(jn.vao=br.vao),jn}function ys(br){var jn={},Jn={};return Object.keys(br).forEach(function(nr){var xn=br[nr];Cn.isDynamic(xn)?Jn[nr]=Cn.unbox(xn,nr):jn[nr]=xn}),{dynamic:Jn,static:jn}}var uc=ys(ea.context||{}),Nh=ys(ea.uniforms||{}),mn=ys(ea.attributes||{}),Pr=ys(Ia(ea)),xr={gpuTime:0,cpuTime:0,count:0},vo=zo.compile(Pr,mn,Nh,uc,xr),za=vo.draw,Ps=vo.batch,It=vo.scope,tn=[];function Mn(br){for(;tn.length<br;)tn.push(null);return tn}function Tr(br,jn){var Jn;if(Xr&&le.raise("context lost"),typeof br=="function")return It.call(this,null,br,0);if(typeof jn=="function")if(typeof br=="number")for(Jn=0;Jn<br;++Jn)It.call(this,null,jn,Jn);else if(Array.isArray(br))for(Jn=0;Jn<br.length;++Jn)It.call(this,br[Jn],jn,Jn);else return It.call(this,br,jn,0);else if(typeof br=="number"){if(br>0)return Ps.call(this,Mn(br|0),br|0)}else if(Array.isArray(br)){if(br.length)return Ps.call(this,br,br.length)}else return za.call(this,br)}return D(Tr,{stats:xr})}var qs=di.setFBO=Gl({framebuffer:Cn.define.call(null,Ep,"framebuffer")});function ie(ea,Ia){var ys=0;zo.procs.poll();var uc=Ia.color;uc&&(Rn.clearColor(+uc[0]||0,+uc[1]||0,+uc[2]||0,+uc[3]||0),ys|=nm),"depth"in Ia&&(Rn.clearDepth(+Ia.depth),ys|=Pu),"stencil"in Ia&&(Rn.clearStencil(Ia.stencil|0),ys|=rm),le(!!ys,"called regl.clear with no buffer specified"),Rn.clear(ys)}function tc(ea){if(le(typeof ea=="object"&&ea,"regl.clear() takes an object as input"),"framebuffer"in ea)if(ea.framebuffer&&ea.framebuffer_reglType==="framebufferCube")for(var Ia=0;Ia<6;++Ia)qs(D({framebuffer:ea.framebuffer.faces[Ia]},ea),ie);else qs(ea,ie);else ie(null,ea)}function ss(ea){le.type(ea,"function","regl.frame() callback must be a function"),$r.push(ea);function Ia(){var ys=im($r,ea);le(ys>=0,"cannot cancel a frame twice");function uc(){var Nh=im($r,uc);$r[Nh]=$r[$r.length-1],$r.length-=1,$r.length<=0&&gs()}$r[ys]=uc}return Jo(),{cancel:Ia}}function fr(){var ea=qi.viewport,Ia=qi.scissor_box;ea[0]=ea[1]=Ia[0]=Ia[1]=0,pi.viewportWidth=pi.framebufferWidth=pi.drawingBufferWidth=ea[2]=Ia[2]=Rn.drawingBufferWidth,pi.viewportHeight=pi.framebufferHeight=pi.drawingBufferHeight=ea[3]=Ia[3]=Rn.drawingBufferHeight}function Kr(){pi.tick+=1,pi.time=Ca(),fr(),zo.procs.poll()}function Dl(){fr(),zo.procs.refresh(),Fi&&Fi.update()}function Ca(){return(Zn()-Ri)/1e3}Dl();function ru(ea,Ia){le.type(Ia,"function","listener callback must be a function");var ys;switch(ea){case"frame":return ss(Ia);case"lost":ys=ko;break;case"restore":ys=Na;break;case"destroy":ys=so;break;default:le.raise("invalid event, must be one of frame,lost,restore,destroy")}return ys.push(Ia),{cancel:function(){for(var uc=0;uc<ys.length;++uc)if(ys[uc]===Ia){ys[uc]=ys[ys.length-1],ys.pop();return}}}}var zs=D(Gl,{clear:tc,prop:Cn.define.bind(null,Ep),context:Cn.define.bind(null,Qm),this:Cn.define.bind(null,a_),draw:Gl({}),buffer:function(ea){return yi.create(ea,xp,!1,!1)},elements:function(ea){return eo.create(ea,!1)},texture:to.create2D,cube:to.createCube,renderbuffer:li.create,framebuffer:di.create,framebufferCube:di.createCube,vao:io.createVAO,attributes:Ar,frame:ss,on:ru,limits:kr,hasExtension:function(ea){return kr.extensions.indexOf(ea.toLowerCase())>=0},read:pa,destroy:$a,_gl:Rn,_refresh:Dl,poll:function(){Kr(),Fi&&Fi.update()},now:Ca,stats:Oi});return Qt.onDone(null,zs),zs}return Gg})},86851:function(Ht,W,D){"use strict";var J=D(89594),Z=Array.prototype.concat,E=Array.prototype.slice,ve=Ht.exports=function(se){for(var ae=[],Se=0,oe=se.length;Se<oe;Se++){var Ge=se[Se];J(Ge)?ae=Z.call(ae,E.call(Ge)):ae.push(Ge)}return ae};ve.wrap=function(te){return function(){return te(ve(arguments))}}},89594:function(Ht){Ht.exports=function(D){return!D||typeof D=="string"?!1:D instanceof Array||Array.isArray(D)||D.length>=0&&(D.splice instanceof Function||Object.getOwnPropertyDescriptor(D,D.length-1)&&D.constructor.name!=="String")}},69848:function(Ht){(function(W,D){Ht.exports=D()})(this,function(){"use strict";function W(Ie,Ae,pt,ut,Et,cn){if(!(Et-ut<=pt)){var ze=ut+Et>>1;D(Ie,Ae,ze,ut,Et,cn%2),W(Ie,Ae,pt,ut,ze-1,cn+1),W(Ie,Ae,pt,ze+1,Et,cn+1)}}function D(Ie,Ae,pt,ut,Et,cn){for(;Et>ut;){if(Et-ut>600){var ze=Et-ut+1,St=pt-ut+1,we=Math.log(ze),nt=.5*Math.exp(2*we/3),Xe=.5*Math.sqrt(we*nt*(ze-nt)/ze)*(St-ze/2<0?-1:1),Ze=Math.max(ut,Math.floor(pt-St*nt/ze+Xe)),Rt=Math.min(Et,Math.floor(pt+(ze-St)*nt/ze+Xe));D(Ie,Ae,pt,Ze,Rt,cn)}var yt=Ae[2*pt+cn],Me=ut,Gt=Et;for(J(Ie,Ae,ut,pt),Ae[2*Et+cn]>yt&&J(Ie,Ae,ut,Et);Me<Gt;){for(J(Ie,Ae,Me,Gt),Me++,Gt--;Ae[2*Me+cn]<yt;)Me++;for(;Ae[2*Gt+cn]>yt;)Gt--}Ae[2*ut+cn]===yt?J(Ie,Ae,ut,Gt):(Gt++,J(Ie,Ae,Gt,Et)),Gt<=pt&&(ut=Gt+1),pt<=Gt&&(Et=Gt-1)}}function J(Ie,Ae,pt,ut){Z(Ie,pt,ut),Z(Ae,2*pt,2*ut),Z(Ae,2*pt+1,2*ut+1)}function Z(Ie,Ae,pt){var ut=Ie[Ae];Ie[Ae]=Ie[pt],Ie[pt]=ut}function E(Ie,Ae,pt,ut,Et,cn,ze){for(var St=[0,Ie.length-1,0],we=[],nt,Xe;St.length;){var Ze=St.pop(),Rt=St.pop(),yt=St.pop();if(Rt-yt<=ze){for(var Me=yt;Me<=Rt;Me++)nt=Ae[2*Me],Xe=Ae[2*Me+1],nt>=pt&&nt<=Et&&Xe>=ut&&Xe<=cn&&we.push(Ie[Me]);continue}var Gt=Math.floor((yt+Rt)/2);nt=Ae[2*Gt],Xe=Ae[2*Gt+1],nt>=pt&&nt<=Et&&Xe>=ut&&Xe<=cn&&we.push(Ie[Gt]);var ln=(Ze+1)%2;(Ze===0?pt<=nt:ut<=Xe)&&(St.push(yt),St.push(Gt-1),St.push(ln)),(Ze===0?Et>=nt:cn>=Xe)&&(St.push(Gt+1),St.push(Rt),St.push(ln))}return we}function ve(Ie,Ae,pt,ut,Et,cn){for(var ze=[0,Ie.length-1,0],St=[],we=Et*Et;ze.length;){var nt=ze.pop(),Xe=ze.pop(),Ze=ze.pop();if(Xe-Ze<=cn){for(var Rt=Ze;Rt<=Xe;Rt++)te(Ae[2*Rt],Ae[2*Rt+1],pt,ut)<=we&&St.push(Ie[Rt]);continue}var yt=Math.floor((Ze+Xe)/2),Me=Ae[2*yt],Gt=Ae[2*yt+1];te(Me,Gt,pt,ut)<=we&&St.push(Ie[yt]);var ln=(nt+1)%2;(nt===0?pt-Et<=Me:ut-Et<=Gt)&&(ze.push(Ze),ze.push(yt-1),ze.push(ln)),(nt===0?pt+Et>=Me:ut+Et>=Gt)&&(ze.push(yt+1),ze.push(Xe),ze.push(ln))}return St}function te(Ie,Ae,pt,ut){var Et=Ie-pt,cn=Ae-ut;return Et*Et+cn*cn}var se=function(Ie){return Ie[0]},ae=function(Ie){return Ie[1]},Se=function(Ae,pt,ut,Et,cn){pt===void 0&&(pt=se),ut===void 0&&(ut=ae),Et===void 0&&(Et=64),cn===void 0&&(cn=Float64Array),this.nodeSize=Et,this.points=Ae;for(var ze=Ae.length<65536?Uint16Array:Uint32Array,St=this.ids=new ze(Ae.length),we=this.coords=new cn(Ae.length*2),nt=0;nt<Ae.length;nt++)St[nt]=nt,we[2*nt]=pt(Ae[nt]),we[2*nt+1]=ut(Ae[nt]);W(St,we,Et,0,St.length-1,0)};Se.prototype.range=function(Ae,pt,ut,Et){return E(this.ids,this.coords,Ae,pt,ut,Et,this.nodeSize)},Se.prototype.within=function(Ae,pt,ut){return ve(this.ids,this.coords,Ae,pt,ut,this.nodeSize)};var oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ie){return Ie}},Ge=Math.fround||function(Ie){return function(Ae){return Ie[0]=+Ae,Ie[0]}}(new Float32Array(1)),ee=function(Ae){this.options=Nt(Object.create(oe),Ae),this.trees=new Array(this.options.maxZoom+1)};ee.prototype.load=function(Ae){var pt=this.options,ut=pt.log,Et=pt.minZoom,cn=pt.maxZoom,ze=pt.nodeSize;ut&&console.time("total time");var St="prepare "+Ae.length+" points";ut&&console.time(St),this.points=Ae;for(var we=[],nt=0;nt<Ae.length;nt++)Ae[nt].geometry&&we.push(Le(Ae[nt],nt));this.trees[cn+1]=new Se(we,ct,lt,ze,Float32Array),ut&&console.timeEnd(St);for(var Xe=cn;Xe>=Et;Xe--){var Ze=+Date.now();we=this._cluster(we,Xe),this.trees[Xe]=new Se(we,ct,lt,ze,Float32Array),ut&&console.log("z%d: %d clusters in %dms",Xe,we.length,+Date.now()-Ze)}return ut&&console.timeEnd("total time"),this},ee.prototype.getClusters=function(Ae,pt){var ut=((Ae[0]+180)%360+360)%360-180,Et=Math.max(-90,Math.min(90,Ae[1])),cn=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,ze=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)ut=-180,cn=180;else if(ut>cn){var St=this.getClusters([ut,Et,180,ze],pt),we=this.getClusters([-180,Et,cn,ze],pt);return St.concat(we)}for(var nt=this.trees[this._limitZoom(pt)],Xe=nt.range(fe(ut),He(ze),fe(cn),He(Et)),Ze=[],Rt=0,yt=Xe;Rt<yt.length;Rt+=1){var Me=yt[Rt],Gt=nt.points[Me];Ze.push(Gt.numPoints?be(Gt):this.points[Gt.index])}return Ze},ee.prototype.getChildren=function(Ae){var pt=this._getOriginId(Ae),ut=this._getOriginZoom(Ae),Et="No cluster with the specified id.",cn=this.trees[ut];if(!cn)throw new Error(Et);var ze=cn.points[pt];if(!ze)throw new Error(Et);for(var St=this.options.radius/(this.options.extent*Math.pow(2,ut-1)),we=cn.within(ze.x,ze.y,St),nt=[],Xe=0,Ze=we;Xe<Ze.length;Xe+=1){var Rt=Ze[Xe],yt=cn.points[Rt];yt.parentId===Ae&&nt.push(yt.numPoints?be(yt):this.points[yt.index])}if(nt.length===0)throw new Error(Et);return nt},ee.prototype.getLeaves=function(Ae,pt,ut){pt=pt||10,ut=ut||0;var Et=[];return this._appendLeaves(Et,Ae,pt,ut,0),Et},ee.prototype.getTile=function(Ae,pt,ut){var Et=this.trees[this._limitZoom(Ae)],cn=Math.pow(2,Ae),ze=this.options,St=ze.extent,we=ze.radius,nt=we/St,Xe=(ut-nt)/cn,Ze=(ut+1+nt)/cn,Rt={features:[]};return this._addTileFeatures(Et.range((pt-nt)/cn,Xe,(pt+1+nt)/cn,Ze),Et.points,pt,ut,cn,Rt),pt===0&&this._addTileFeatures(Et.range(1-nt/cn,Xe,1,Ze),Et.points,cn,ut,cn,Rt),pt===cn-1&&this._addTileFeatures(Et.range(0,Xe,nt/cn,Ze),Et.points,-1,ut,cn,Rt),Rt.features.length?Rt:null},ee.prototype.getClusterExpansionZoom=function(Ae){for(var pt=this._getOriginZoom(Ae)-1;pt<=this.options.maxZoom;){var ut=this.getChildren(Ae);if(pt++,ut.length!==1)break;Ae=ut[0].properties.cluster_id}return pt},ee.prototype._appendLeaves=function(Ae,pt,ut,Et,cn){for(var ze=this.getChildren(pt),St=0,we=ze;St<we.length;St+=1){var nt=we[St],Xe=nt.properties;if(Xe&&Xe.cluster?cn+Xe.point_count<=Et?cn+=Xe.point_count:cn=this._appendLeaves(Ae,Xe.cluster_id,ut,Et,cn):cn<Et?cn++:Ae.push(nt),Ae.length===ut)break}return cn},ee.prototype._addTileFeatures=function(Ae,pt,ut,Et,cn,ze){for(var St=0,we=Ae;St<we.length;St+=1){var nt=we[St],Xe=pt[nt],Ze=Xe.numPoints,Rt=void 0,yt=void 0,Me=void 0;if(Ze)Rt=Oe(Xe),yt=Xe.x,Me=Xe.y;else{var Gt=this.points[Xe.index];Rt=Gt.properties,yt=fe(Gt.geometry.coordinates[0]),Me=He(Gt.geometry.coordinates[1])}var ln={type:1,geometry:[[Math.round(this.options.extent*(yt*cn-ut)),Math.round(this.options.extent*(Me*cn-Et))]],tags:Rt},Ln=void 0;Ze?Ln=Xe.id:this.options.generateId?Ln=Xe.index:this.points[Xe.index].id&&(Ln=this.points[Xe.index].id),Ln!==void 0&&(ln.id=Ln),ze.features.push(ln)}},ee.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))},ee.prototype._cluster=function(Ae,pt){for(var ut=[],Et=this.options,cn=Et.radius,ze=Et.extent,St=Et.reduce,we=Et.minPoints,nt=cn/(ze*Math.pow(2,pt)),Xe=0;Xe<Ae.length;Xe++){var Ze=Ae[Xe];if(!(Ze.zoom<=pt)){Ze.zoom=pt;for(var Rt=this.trees[pt+1],yt=Rt.within(Ze.x,Ze.y,nt),Me=Ze.numPoints||1,Gt=Me,ln=0,Ln=yt;ln<Ln.length;ln+=1){var kn=Ln[ln],lr=Rt.points[kn];lr.zoom>pt&&(Gt+=lr.numPoints||1)}if(Gt>Me&&Gt>=we){for(var zt=Ze.x*Me,Kt=Ze.y*Me,yn=St&&Me>1?this._map(Ze,!0):null,Kn=(Xe<<5)+(pt+1)+this.points.length,rn=0,Wt=yt;rn<Wt.length;rn+=1){var Pt=Wt[rn],Pe=Rt.points[Pt];if(!(Pe.zoom<=pt)){Pe.zoom=pt;var Qe=Pe.numPoints||1;zt+=Pe.x*Qe,Kt+=Pe.y*Qe,Pe.parentId=Kn,St&&(yn||(yn=this._map(Ze,!0)),St(yn,this._map(Pe)))}}Ze.parentId=Kn,ut.push(me(zt/Gt,Kt/Gt,Kn,Gt,yn))}else if(ut.push(Ze),Gt>1)for(var Bt=0,z=yt;Bt<z.length;Bt+=1){var ue=z[Bt],ot=Rt.points[ue];ot.zoom<=pt||(ot.zoom=pt,ut.push(ot))}}}return ut},ee.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},ee.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},ee.prototype._map=function(Ae,pt){if(Ae.numPoints)return pt?Nt({},Ae.properties):Ae.properties;var ut=this.points[Ae.index].properties,Et=this.options.map(ut);return pt&&Et===ut?Nt({},Et):Et};function me(Ie,Ae,pt,ut,Et){return{x:Ge(Ie),y:Ge(Ae),zoom:1/0,id:pt,parentId:-1,numPoints:ut,properties:Et}}function Le(Ie,Ae){var pt=Ie.geometry.coordinates,ut=pt[0],Et=pt[1];return{x:Ge(fe(ut)),y:Ge(He(Et)),zoom:1/0,index:Ae,parentId:-1}}function be(Ie){return{type:"Feature",id:Ie.id,properties:Oe(Ie),geometry:{type:"Point",coordinates:[bt(Ie.x),dt(Ie.y)]}}}function Oe(Ie){var Ae=Ie.numPoints,pt=Ae>=1e4?Math.round(Ae/1e3)+"k":Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return Nt(Nt({},Ie.properties),{cluster:!0,cluster_id:Ie.id,point_count:Ae,point_count_abbreviated:pt})}function fe(Ie){return Ie/360+.5}function He(Ie){var Ae=Math.sin(Ie*Math.PI/180),pt=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return pt<0?0:pt>1?1:pt}function bt(Ie){return(Ie-.5)*360}function dt(Ie){var Ae=(180-Ie*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function Nt(Ie,Ae){for(var pt in Ae)Ie[pt]=Ae[pt];return Ie}function ct(Ie){return Ie.x}function lt(Ie){return Ie.y}return ee})},63405:function(Ht,W,D){var J=D(73897);function Z(E){if(Array.isArray(E))return J(E)}Ht.exports=Z,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},56690:function(Ht){function W(D,J){if(!(D instanceof J))throw new TypeError("Cannot call a class as a function")}Ht.exports=W,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},89728:function(Ht,W,D){var J=D(64062);function Z(ve,te){for(var se=0;se<te.length;se++){var ae=te[se];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ve,J(ae.key),ae)}}function E(ve,te,se){return te&&Z(ve.prototype,te),se&&Z(ve,se),Object.defineProperty(ve,"prototype",{writable:!1}),ve}Ht.exports=E,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},79498:function(Ht){function W(D){if(typeof Symbol!="undefined"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}Ht.exports=W,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},42281:function(Ht){function W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Ht.exports=W,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},51589:function(Ht,W,D){var J=D(85372),Z=D(79498),E=D(86116),ve=D(12218);function te(se){return J(se)||Z(se)||E(se)||ve()}Ht.exports=te,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},861:function(Ht,W,D){var J=D(63405),Z=D(79498),E=D(86116),ve=D(42281);function te(se){return J(se)||Z(se)||E(se)||ve()}Ht.exports=te,Ht.exports.__esModule=!0,Ht.exports.default=Ht.exports},1449:function(Ht,W,D){"use strict";D.d(W,{Tu:function(){return ee},tw:function(){return fe},uf:function(){return Le},yu:function(){return oe},zL:function(){return te}});var J=63710088e-1,Z={centimeters:J*100,centimetres:J*100,degrees:J/111325,feet:J*3.28084,inches:J*39.37,kilometers:J/1e3,kilometres:J/1e3,meters:J,metres:J,miles:J/1609.344,millimeters:J*1e3,millimetres:J*1e3,nauticalmiles:J/1852,radians:1,yards:J*1.0936},E={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/J,yards:1.0936133},ve={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function te(we,nt,Xe){Xe===void 0&&(Xe={});var Ze={type:"Feature"};return(Xe.id===0||Xe.id)&&(Ze.id=Xe.id),Xe.bbox&&(Ze.bbox=Xe.bbox),Ze.properties=nt||{},Ze.geometry=we,Ze}function se(we,nt,Xe){switch(Xe===void 0&&(Xe={}),we){case"Point":return ae(nt).geometry;case"LineString":return ee(nt).geometry;case"Polygon":return oe(nt).geometry;case"MultiPoint":return Oe(nt).geometry;case"MultiLineString":return be(nt).geometry;case"MultiPolygon":return fe(nt).geometry;default:throw new Error(we+" is invalid")}}function ae(we,nt,Xe){if(Xe===void 0&&(Xe={}),!we)throw new Error("coordinates is required");if(!Array.isArray(we))throw new Error("coordinates must be an Array");if(we.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Et(we[0])||!Et(we[1]))throw new Error("coordinates must contain numbers");var Ze={type:"Point",coordinates:we};return te(Ze,nt,Xe)}function Se(we,nt,Xe){return Xe===void 0&&(Xe={}),Le(we.map(function(Ze){return ae(Ze,nt)}),Xe)}function oe(we,nt,Xe){Xe===void 0&&(Xe={});for(var Ze=0,Rt=we;Ze<Rt.length;Ze++){var yt=Rt[Ze];if(yt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Me=0;Me<yt[yt.length-1].length;Me++)if(yt[yt.length-1][Me]!==yt[0][Me])throw new Error("First and last Position are not equivalent.")}var Gt={type:"Polygon",coordinates:we};return te(Gt,nt,Xe)}function Ge(we,nt,Xe){return Xe===void 0&&(Xe={}),Le(we.map(function(Ze){return oe(Ze,nt)}),Xe)}function ee(we,nt,Xe){if(Xe===void 0&&(Xe={}),we.length<2)throw new Error("coordinates must be an array of two or more positions");var Ze={type:"LineString",coordinates:we};return te(Ze,nt,Xe)}function me(we,nt,Xe){return Xe===void 0&&(Xe={}),Le(we.map(function(Ze){return ee(Ze,nt)}),Xe)}function Le(we,nt){nt===void 0&&(nt={});var Xe={type:"FeatureCollection"};return nt.id&&(Xe.id=nt.id),nt.bbox&&(Xe.bbox=nt.bbox),Xe.features=we,Xe}function be(we,nt,Xe){Xe===void 0&&(Xe={});var Ze={type:"MultiLineString",coordinates:we};return te(Ze,nt,Xe)}function Oe(we,nt,Xe){Xe===void 0&&(Xe={});var Ze={type:"MultiPoint",coordinates:we};return te(Ze,nt,Xe)}function fe(we,nt,Xe){Xe===void 0&&(Xe={});var Ze={type:"MultiPolygon",coordinates:we};return te(Ze,nt,Xe)}function He(we,nt,Xe){Xe===void 0&&(Xe={});var Ze={type:"GeometryCollection",geometries:we};return te(Ze,nt,Xe)}function bt(we,nt){if(nt===void 0&&(nt=0),nt&&!(nt>=0))throw new Error("precision must be a positive number");var Xe=Math.pow(10,nt||0);return Math.round(we*Xe)/Xe}function dt(we,nt){nt===void 0&&(nt="kilometers");var Xe=Z[nt];if(!Xe)throw new Error(nt+" units is invalid");return we*Xe}function Nt(we,nt){nt===void 0&&(nt="kilometers");var Xe=Z[nt];if(!Xe)throw new Error(nt+" units is invalid");return we/Xe}function ct(we,nt){return Ie(Nt(we,nt))}function lt(we){var nt=we%360;return nt<0&&(nt+=360),nt}function Ie(we){var nt=we%(2*Math.PI);return nt*180/Math.PI}function Ae(we){var nt=we%360;return nt*Math.PI/180}function pt(we,nt,Xe){if(nt===void 0&&(nt="kilometers"),Xe===void 0&&(Xe="kilometers"),!(we>=0))throw new Error("length must be a positive number");return dt(Nt(we,nt),Xe)}function ut(we,nt,Xe){if(nt===void 0&&(nt="meters"),Xe===void 0&&(Xe="kilometers"),!(we>=0))throw new Error("area must be a positive number");var Ze=ve[nt];if(!Ze)throw new Error("invalid original units");var Rt=ve[Xe];if(!Rt)throw new Error("invalid final units");return we/Ze*Rt}function Et(we){return!isNaN(we)&&we!==null&&!Array.isArray(we)}function cn(we){return!!we&&we.constructor===Object}function ze(we){if(!we)throw new Error("bbox is required");if(!Array.isArray(we))throw new Error("bbox must be an Array");if(we.length!==4&&we.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");we.forEach(function(nt){if(!Et(nt))throw new Error("bbox must only contain numbers")})}function St(we){if(!we)throw new Error("id is required");if(["string","number"].indexOf(typeof we)===-1)throw new Error("id must be a number or a string")}},39034:function(Ht,W,D){"use strict";D.d(W,{nG:function(){return ee},pZ:function(){return Z}});var J=D(1449);function Z(dt,Nt,ct){if(dt!==null)for(var lt,Ie,Ae,pt,ut,Et,cn,ze=0,St=0,we,nt=dt.type,Xe=nt==="FeatureCollection",Ze=nt==="Feature",Rt=Xe?dt.features.length:1,yt=0;yt<Rt;yt++){cn=Xe?dt.features[yt].geometry:Ze?dt.geometry:dt,we=cn?cn.type==="GeometryCollection":!1,ut=we?cn.geometries.length:1;for(var Me=0;Me<ut;Me++){var Gt=0,ln=0;if(pt=we?cn.geometries[Me]:cn,pt!==null){Et=pt.coordinates;var Ln=pt.type;switch(ze=ct&&(Ln==="Polygon"||Ln==="MultiPolygon")?1:0,Ln){case null:break;case"Point":if(Nt(Et,St,yt,Gt,ln)===!1)return!1;St++,Gt++;break;case"LineString":case"MultiPoint":for(lt=0;lt<Et.length;lt++){if(Nt(Et[lt],St,yt,Gt,ln)===!1)return!1;St++,Ln==="MultiPoint"&&Gt++}Ln==="LineString"&&Gt++;break;case"Polygon":case"MultiLineString":for(lt=0;lt<Et.length;lt++){for(Ie=0;Ie<Et[lt].length-ze;Ie++){if(Nt(Et[lt][Ie],St,yt,Gt,ln)===!1)return!1;St++}Ln==="MultiLineString"&&Gt++,Ln==="Polygon"&&ln++}Ln==="Polygon"&&Gt++;break;case"MultiPolygon":for(lt=0;lt<Et.length;lt++){for(ln=0,Ie=0;Ie<Et[lt].length;Ie++){for(Ae=0;Ae<Et[lt][Ie].length-ze;Ae++){if(Nt(Et[lt][Ie][Ae],St,yt,Gt,ln)===!1)return!1;St++}ln++}Gt++}break;case"GeometryCollection":for(lt=0;lt<pt.geometries.length;lt++)if(Z(pt.geometries[lt],Nt,ct)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(dt,Nt,ct,lt){var Ie=ct;return Z(dt,function(Ae,pt,ut,Et,cn){pt===0&&ct===void 0?Ie=Ae:Ie=Nt(Ie,Ae,pt,ut,Et,cn)},lt),Ie}function ve(dt,Nt){var ct;switch(dt.type){case"FeatureCollection":for(ct=0;ct<dt.features.length&&Nt(dt.features[ct].properties,ct)!==!1;ct++);break;case"Feature":Nt(dt.properties,0);break}}function te(dt,Nt,ct){var lt=ct;return ve(dt,function(Ie,Ae){Ae===0&&ct===void 0?lt=Ie:lt=Nt(lt,Ie,Ae)}),lt}function se(dt,Nt){if(dt.type==="Feature")Nt(dt,0);else if(dt.type==="FeatureCollection")for(var ct=0;ct<dt.features.length&&Nt(dt.features[ct],ct)!==!1;ct++);}function ae(dt,Nt,ct){var lt=ct;return se(dt,function(Ie,Ae){Ae===0&&ct===void 0?lt=Ie:lt=Nt(lt,Ie,Ae)}),lt}function Se(dt){var Nt=[];return Z(dt,function(ct){Nt.push(ct)}),Nt}function oe(dt,Nt){var ct,lt,Ie,Ae,pt,ut,Et,cn,ze,St,we=0,nt=dt.type==="FeatureCollection",Xe=dt.type==="Feature",Ze=nt?dt.features.length:1;for(ct=0;ct<Ze;ct++){for(ut=nt?dt.features[ct].geometry:Xe?dt.geometry:dt,cn=nt?dt.features[ct].properties:Xe?dt.properties:{},ze=nt?dt.features[ct].bbox:Xe?dt.bbox:void 0,St=nt?dt.features[ct].id:Xe?dt.id:void 0,Et=ut?ut.type==="GeometryCollection":!1,pt=Et?ut.geometries.length:1,Ie=0;Ie<pt;Ie++){if(Ae=Et?ut.geometries[Ie]:ut,Ae===null){if(Nt(null,we,cn,ze,St)===!1)return!1;continue}switch(Ae.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Nt(Ae,we,cn,ze,St)===!1)return!1;break}case"GeometryCollection":{for(lt=0;lt<Ae.geometries.length;lt++)if(Nt(Ae.geometries[lt],we,cn,ze,St)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}we++}}function Ge(dt,Nt,ct){var lt=ct;return oe(dt,function(Ie,Ae,pt,ut,Et){Ae===0&&ct===void 0?lt=Ie:lt=Nt(lt,Ie,Ae,pt,ut,Et)}),lt}function ee(dt,Nt){oe(dt,function(ct,lt,Ie,Ae,pt){var ut=ct===null?null:ct.type;switch(ut){case null:case"Point":case"LineString":case"Polygon":return Nt((0,J.zL)(ct,Ie,{bbox:Ae,id:pt}),lt,0)===!1?!1:void 0}var Et;switch(ut){case"MultiPoint":Et="Point";break;case"MultiLineString":Et="LineString";break;case"MultiPolygon":Et="Polygon";break}for(var cn=0;cn<ct.coordinates.length;cn++){var ze=ct.coordinates[cn],St={type:Et,coordinates:ze};if(Nt((0,J.zL)(St,Ie),lt,cn)===!1)return!1}})}function me(dt,Nt,ct){var lt=ct;return ee(dt,function(Ie,Ae,pt){Ae===0&&pt===0&&ct===void 0?lt=Ie:lt=Nt(lt,Ie,Ae,pt)}),lt}function Le(dt,Nt){ee(dt,function(ct,lt,Ie){var Ae=0;if(ct.geometry){var pt=ct.geometry.type;if(!(pt==="Point"||pt==="MultiPoint")){var ut,Et=0,cn=0,ze=0;if(Z(ct,function(St,we,nt,Xe,Ze){if(ut===void 0||lt>Et||Xe>cn||Ze>ze){ut=St,Et=lt,cn=Xe,ze=Ze,Ae=0;return}var Rt=lineString([ut,St],ct.properties);if(Nt(Rt,lt,Ie,Ze,Ae)===!1)return!1;Ae++,ut=St})===!1)return!1}}})}function be(dt,Nt,ct){var lt=ct,Ie=!1;return Le(dt,function(Ae,pt,ut,Et,cn){Ie===!1&&ct===void 0?lt=Ae:lt=Nt(lt,Ae,pt,ut,Et,cn),Ie=!0}),lt}function Oe(dt,Nt){if(!dt)throw new Error("geojson is required");ee(dt,function(ct,lt,Ie){if(ct.geometry!==null){var Ae=ct.geometry.type,pt=ct.geometry.coordinates;switch(Ae){case"LineString":if(Nt(ct,lt,Ie,0,0)===!1)return!1;break;case"Polygon":for(var ut=0;ut<pt.length;ut++)if(Nt(lineString(pt[ut],ct.properties),lt,Ie,ut)===!1)return!1;break}}})}function fe(dt,Nt,ct){var lt=ct;return Oe(dt,function(Ie,Ae,pt,ut){Ae===0&&ct===void 0?lt=Ie:lt=Nt(lt,Ie,Ae,pt,ut)}),lt}function He(dt,Nt){if(Nt=Nt||{},!isObject(Nt))throw new Error("options is invalid");var ct=Nt.featureIndex||0,lt=Nt.multiFeatureIndex||0,Ie=Nt.geometryIndex||0,Ae=Nt.segmentIndex||0,pt=Nt.properties,ut;switch(dt.type){case"FeatureCollection":ct<0&&(ct=dt.features.length+ct),pt=pt||dt.features[ct].properties,ut=dt.features[ct].geometry;break;case"Feature":pt=pt||dt.properties,ut=dt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ut=dt;break;default:throw new Error("geojson is invalid")}if(ut===null)return null;var Et=ut.coordinates;switch(ut.type){case"Point":case"MultiPoint":return null;case"LineString":return Ae<0&&(Ae=Et.length+Ae-1),lineString([Et[Ae],Et[Ae+1]],pt,Nt);case"Polygon":return Ie<0&&(Ie=Et.length+Ie),Ae<0&&(Ae=Et[Ie].length+Ae-1),lineString([Et[Ie][Ae],Et[Ie][Ae+1]],pt,Nt);case"MultiLineString":return lt<0&&(lt=Et.length+lt),Ae<0&&(Ae=Et[lt].length+Ae-1),lineString([Et[lt][Ae],Et[lt][Ae+1]],pt,Nt);case"MultiPolygon":return lt<0&&(lt=Et.length+lt),Ie<0&&(Ie=Et[lt].length+Ie),Ae<0&&(Ae=Et[lt][Ie].length-Ae-1),lineString([Et[lt][Ie][Ae],Et[lt][Ie][Ae+1]],pt,Nt)}throw new Error("geojson is invalid")}function bt(dt,Nt){if(Nt=Nt||{},!isObject(Nt))throw new Error("options is invalid");var ct=Nt.featureIndex||0,lt=Nt.multiFeatureIndex||0,Ie=Nt.geometryIndex||0,Ae=Nt.coordIndex||0,pt=Nt.properties,ut;switch(dt.type){case"FeatureCollection":ct<0&&(ct=dt.features.length+ct),pt=pt||dt.features[ct].properties,ut=dt.features[ct].geometry;break;case"Feature":pt=pt||dt.properties,ut=dt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ut=dt;break;default:throw new Error("geojson is invalid")}if(ut===null)return null;var Et=ut.coordinates;switch(ut.type){case"Point":return point(Et,pt,Nt);case"MultiPoint":return lt<0&&(lt=Et.length+lt),point(Et[lt],pt,Nt);case"LineString":return Ae<0&&(Ae=Et.length+Ae),point(Et[Ae],pt,Nt);case"Polygon":return Ie<0&&(Ie=Et.length+Ie),Ae<0&&(Ae=Et[Ie].length+Ae),point(Et[Ie][Ae],pt,Nt);case"MultiLineString":return lt<0&&(lt=Et.length+lt),Ae<0&&(Ae=Et[lt].length+Ae),point(Et[lt][Ae],pt,Nt);case"MultiPolygon":return lt<0&&(lt=Et.length+lt),Ie<0&&(Ie=Et[lt].length+Ie),Ae<0&&(Ae=Et[lt][Ie].length-Ae),point(Et[lt][Ie][Ae],pt,Nt)}throw new Error("geojson is invalid")}},97582:function(Ht,W,D){"use strict";D.d(W,{CR:function(){return He},Jh:function(){return Le},Q_:function(){return ze},XA:function(){return fe},ZT:function(){return Z},_T:function(){return ve},ev:function(){return Nt},mG:function(){return me},pi:function(){return E}});var J=function(yt,Me){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Gt,ln){Gt.__proto__=ln}||function(Gt,ln){for(var Ln in ln)Object.prototype.hasOwnProperty.call(ln,Ln)&&(Gt[Ln]=ln[Ln])},J(yt,Me)};function Z(yt,Me){if(typeof Me!="function"&&Me!==null)throw new TypeError("Class extends value "+String(Me)+" is not a constructor or null");J(yt,Me);function Gt(){this.constructor=yt}yt.prototype=Me===null?Object.create(Me):(Gt.prototype=Me.prototype,new Gt)}var E=function(){return E=Object.assign||function(Me){for(var Gt,ln=1,Ln=arguments.length;ln<Ln;ln++){Gt=arguments[ln];for(var kn in Gt)Object.prototype.hasOwnProperty.call(Gt,kn)&&(Me[kn]=Gt[kn])}return Me},E.apply(this,arguments)};function ve(yt,Me){var Gt={};for(var ln in yt)Object.prototype.hasOwnProperty.call(yt,ln)&&Me.indexOf(ln)<0&&(Gt[ln]=yt[ln]);if(yt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ln=0,ln=Object.getOwnPropertySymbols(yt);Ln<ln.length;Ln++)Me.indexOf(ln[Ln])<0&&Object.prototype.propertyIsEnumerable.call(yt,ln[Ln])&&(Gt[ln[Ln]]=yt[ln[Ln]]);return Gt}function te(yt,Me,Gt,ln){var Ln=arguments.length,kn=Ln<3?Me:ln===null?ln=Object.getOwnPropertyDescriptor(Me,Gt):ln,lr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kn=Reflect.decorate(yt,Me,Gt,ln);else for(var zt=yt.length-1;zt>=0;zt--)(lr=yt[zt])&&(kn=(Ln<3?lr(kn):Ln>3?lr(Me,Gt,kn):lr(Me,Gt))||kn);return Ln>3&&kn&&Object.defineProperty(Me,Gt,kn),kn}function se(yt,Me){return function(Gt,ln){Me(Gt,ln,yt)}}function ae(yt,Me,Gt,ln,Ln,kn){function lr(z){if(z!==void 0&&typeof z!="function")throw new TypeError("Function expected");return z}for(var zt=ln.kind,Kt=zt==="getter"?"get":zt==="setter"?"set":"value",yn=!Me&&yt?ln.static?yt:yt.prototype:null,Kn=Me||(yn?Object.getOwnPropertyDescriptor(yn,ln.name):{}),rn,Wt=!1,Pt=Gt.length-1;Pt>=0;Pt--){var Pe={};for(var Qe in ln)Pe[Qe]=Qe==="access"?{}:ln[Qe];for(var Qe in ln.access)Pe.access[Qe]=ln.access[Qe];Pe.addInitializer=function(z){if(Wt)throw new TypeError("Cannot add initializers after decoration has completed");kn.push(lr(z||null))};var Bt=(0,Gt[Pt])(zt==="accessor"?{get:Kn.get,set:Kn.set}:Kn[Kt],Pe);if(zt==="accessor"){if(Bt===void 0)continue;if(Bt===null||typeof Bt!="object")throw new TypeError("Object expected");(rn=lr(Bt.get))&&(Kn.get=rn),(rn=lr(Bt.set))&&(Kn.set=rn),(rn=lr(Bt.init))&&Ln.unshift(rn)}else(rn=lr(Bt))&&(zt==="field"?Ln.unshift(rn):Kn[Kt]=rn)}yn&&Object.defineProperty(yn,ln.name,Kn),Wt=!0}function Se(yt,Me,Gt){for(var ln=arguments.length>2,Ln=0;Ln<Me.length;Ln++)Gt=ln?Me[Ln].call(yt,Gt):Me[Ln].call(yt);return ln?Gt:void 0}function oe(yt){return typeof yt=="symbol"?yt:"".concat(yt)}function Ge(yt,Me,Gt){return typeof Me=="symbol"&&(Me=Me.description?"[".concat(Me.description,"]"):""),Object.defineProperty(yt,"name",{configurable:!0,value:Gt?"".concat(Gt," ",Me):Me})}function ee(yt,Me){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(yt,Me)}function me(yt,Me,Gt,ln){function Ln(kn){return kn instanceof Gt?kn:new Gt(function(lr){lr(kn)})}return new(Gt||(Gt=Promise))(function(kn,lr){function zt(Kn){try{yn(ln.next(Kn))}catch(rn){lr(rn)}}function Kt(Kn){try{yn(ln.throw(Kn))}catch(rn){lr(rn)}}function yn(Kn){Kn.done?kn(Kn.value):Ln(Kn.value).then(zt,Kt)}yn((ln=ln.apply(yt,Me||[])).next())})}function Le(yt,Me){var Gt={label:0,sent:function(){if(kn[0]&1)throw kn[1];return kn[1]},trys:[],ops:[]},ln,Ln,kn,lr;return lr={next:zt(0),throw:zt(1),return:zt(2)},typeof Symbol=="function"&&(lr[Symbol.iterator]=function(){return this}),lr;function zt(yn){return function(Kn){return Kt([yn,Kn])}}function Kt(yn){if(ln)throw new TypeError("Generator is already executing.");for(;lr&&(lr=0,yn[0]&&(Gt=0)),Gt;)try{if(ln=1,Ln&&(kn=yn[0]&2?Ln.return:yn[0]?Ln.throw||((kn=Ln.return)&&kn.call(Ln),0):Ln.next)&&!(kn=kn.call(Ln,yn[1])).done)return kn;switch(Ln=0,kn&&(yn=[yn[0]&2,kn.value]),yn[0]){case 0:case 1:kn=yn;break;case 4:return Gt.label++,{value:yn[1],done:!1};case 5:Gt.label++,Ln=yn[1],yn=[0];continue;case 7:yn=Gt.ops.pop(),Gt.trys.pop();continue;default:if(kn=Gt.trys,!(kn=kn.length>0&&kn[kn.length-1])&&(yn[0]===6||yn[0]===2)){Gt=0;continue}if(yn[0]===3&&(!kn||yn[1]>kn[0]&&yn[1]<kn[3])){Gt.label=yn[1];break}if(yn[0]===6&&Gt.label<kn[1]){Gt.label=kn[1],kn=yn;break}if(kn&&Gt.label<kn[2]){Gt.label=kn[2],Gt.ops.push(yn);break}kn[2]&&Gt.ops.pop(),Gt.trys.pop();continue}yn=Me.call(yt,Gt)}catch(Kn){yn=[6,Kn],Ln=0}finally{ln=kn=0}if(yn[0]&5)throw yn[1];return{value:yn[0]?yn[1]:void 0,done:!0}}}var be=Object.create?function(yt,Me,Gt,ln){ln===void 0&&(ln=Gt);var Ln=Object.getOwnPropertyDescriptor(Me,Gt);(!Ln||("get"in Ln?!Me.__esModule:Ln.writable||Ln.configurable))&&(Ln={enumerable:!0,get:function(){return Me[Gt]}}),Object.defineProperty(yt,ln,Ln)}:function(yt,Me,Gt,ln){ln===void 0&&(ln=Gt),yt[ln]=Me[Gt]};function Oe(yt,Me){for(var Gt in yt)Gt!=="default"&&!Object.prototype.hasOwnProperty.call(Me,Gt)&&be(Me,yt,Gt)}function fe(yt){var Me=typeof Symbol=="function"&&Symbol.iterator,Gt=Me&&yt[Me],ln=0;if(Gt)return Gt.call(yt);if(yt&&typeof yt.length=="number")return{next:function(){return yt&&ln>=yt.length&&(yt=void 0),{value:yt&&yt[ln++],done:!yt}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(yt,Me){var Gt=typeof Symbol=="function"&&yt[Symbol.iterator];if(!Gt)return yt;var ln=Gt.call(yt),Ln,kn=[],lr;try{for(;(Me===void 0||Me-- >0)&&!(Ln=ln.next()).done;)kn.push(Ln.value)}catch(zt){lr={error:zt}}finally{try{Ln&&!Ln.done&&(Gt=ln.return)&&Gt.call(ln)}finally{if(lr)throw lr.error}}return kn}function bt(){for(var yt=[],Me=0;Me<arguments.length;Me++)yt=yt.concat(He(arguments[Me]));return yt}function dt(){for(var yt=0,Me=0,Gt=arguments.length;Me<Gt;Me++)yt+=arguments[Me].length;for(var ln=Array(yt),Ln=0,Me=0;Me<Gt;Me++)for(var kn=arguments[Me],lr=0,zt=kn.length;lr<zt;lr++,Ln++)ln[Ln]=kn[lr];return ln}function Nt(yt,Me,Gt){if(Gt||arguments.length===2)for(var ln=0,Ln=Me.length,kn;ln<Ln;ln++)(kn||!(ln in Me))&&(kn||(kn=Array.prototype.slice.call(Me,0,ln)),kn[ln]=Me[ln]);return yt.concat(kn||Array.prototype.slice.call(Me))}function ct(yt){return this instanceof ct?(this.v=yt,this):new ct(yt)}function lt(yt,Me,Gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ln=Gt.apply(yt,Me||[]),Ln,kn=[];return Ln={},zt("next"),zt("throw"),zt("return",lr),Ln[Symbol.asyncIterator]=function(){return this},Ln;function lr(Pt){return function(Pe){return Promise.resolve(Pe).then(Pt,rn)}}function zt(Pt,Pe){ln[Pt]&&(Ln[Pt]=function(Qe){return new Promise(function(Bt,z){kn.push([Pt,Qe,Bt,z])>1||Kt(Pt,Qe)})},Pe&&(Ln[Pt]=Pe(Ln[Pt])))}function Kt(Pt,Pe){try{yn(ln[Pt](Pe))}catch(Qe){Wt(kn[0][3],Qe)}}function yn(Pt){Pt.value instanceof ct?Promise.resolve(Pt.value.v).then(Kn,rn):Wt(kn[0][2],Pt)}function Kn(Pt){Kt("next",Pt)}function rn(Pt){Kt("throw",Pt)}function Wt(Pt,Pe){Pt(Pe),kn.shift(),kn.length&&Kt(kn[0][0],kn[0][1])}}function Ie(yt){var Me,Gt;return Me={},ln("next"),ln("throw",function(Ln){throw Ln}),ln("return"),Me[Symbol.iterator]=function(){return this},Me;function ln(Ln,kn){Me[Ln]=yt[Ln]?function(lr){return(Gt=!Gt)?{value:ct(yt[Ln](lr)),done:!1}:kn?kn(lr):lr}:kn}}function Ae(yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me=yt[Symbol.asyncIterator],Gt;return Me?Me.call(yt):(yt=typeof fe=="function"?fe(yt):yt[Symbol.iterator](),Gt={},ln("next"),ln("throw"),ln("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt);function ln(kn){Gt[kn]=yt[kn]&&function(lr){return new Promise(function(zt,Kt){lr=yt[kn](lr),Ln(zt,Kt,lr.done,lr.value)})}}function Ln(kn,lr,zt,Kt){Promise.resolve(Kt).then(function(yn){kn({value:yn,done:zt})},lr)}}function pt(yt,Me){return Object.defineProperty?Object.defineProperty(yt,"raw",{value:Me}):yt.raw=Me,yt}var ut=Object.create?function(yt,Me){Object.defineProperty(yt,"default",{enumerable:!0,value:Me})}:function(yt,Me){yt.default=Me};function Et(yt){if(yt&&yt.__esModule)return yt;var Me={};if(yt!=null)for(var Gt in yt)Gt!=="default"&&Object.prototype.hasOwnProperty.call(yt,Gt)&&be(Me,yt,Gt);return ut(Me,yt),Me}function cn(yt){return yt&&yt.__esModule?yt:{default:yt}}function ze(yt,Me,Gt,ln){if(Gt==="a"&&!ln)throw new TypeError("Private accessor was defined without a getter");if(typeof Me=="function"?yt!==Me||!ln:!Me.has(yt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Gt==="m"?ln:Gt==="a"?ln.call(yt):ln?ln.value:Me.get(yt)}function St(yt,Me,Gt,ln,Ln){if(ln==="m")throw new TypeError("Private method is not writable");if(ln==="a"&&!Ln)throw new TypeError("Private accessor was defined without a setter");if(typeof Me=="function"?yt!==Me||!Ln:!Me.has(yt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ln==="a"?Ln.call(yt,Gt):Ln?Ln.value=Gt:Me.set(yt,Gt),Gt}function we(yt,Me){if(Me===null||typeof Me!="object"&&typeof Me!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof yt=="function"?Me===yt:yt.has(Me)}function nt(yt,Me,Gt){if(Me!=null){if(typeof Me!="object"&&typeof Me!="function")throw new TypeError("Object expected.");var ln,Ln;if(Gt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");ln=Me[Symbol.asyncDispose]}if(ln===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");ln=Me[Symbol.dispose],Gt&&(Ln=ln)}if(typeof ln!="function")throw new TypeError("Object not disposable.");Ln&&(ln=function(){try{Ln.call(this)}catch(kn){return Promise.reject(kn)}}),yt.stack.push({value:Me,dispose:ln,async:Gt})}else Gt&&yt.stack.push({async:!0});return Me}var Xe=typeof SuppressedError=="function"?SuppressedError:function(yt,Me,Gt){var ln=new Error(Gt);return ln.name="SuppressedError",ln.error=yt,ln.suppressed=Me,ln};function Ze(yt){function Me(ln){yt.error=yt.hasError?new Xe(ln,yt.error,"An error was suppressed during disposal."):ln,yt.hasError=!0}function Gt(){for(;yt.stack.length;){var ln=yt.stack.pop();try{var Ln=ln.dispose&&ln.dispose.call(ln.value);if(ln.async)return Promise.resolve(Ln).then(Gt,function(kn){return Me(kn),Gt()})}catch(kn){Me(kn)}}if(yt.hasError)throw yt.error}return Gt()}var Rt={__extends:Z,__assign:E,__rest:ve,__decorate:te,__param:se,__metadata:ee,__awaiter:me,__generator:Le,__createBinding:be,__exportStar:Oe,__values:fe,__read:He,__spread:bt,__spreadArrays:dt,__spreadArray:Nt,__await:ct,__asyncGenerator:lt,__asyncDelegator:Ie,__asyncValues:Ae,__makeTemplateObject:pt,__importStar:Et,__importDefault:cn,__classPrivateFieldGet:ze,__classPrivateFieldSet:St,__classPrivateFieldIn:we,__addDisposableResource:nt,__disposeResources:Ze}}}]);
}());